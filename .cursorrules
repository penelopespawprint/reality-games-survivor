# Debugging Protocol (MANDATORY)

Before suggesting ANY fix, change, or improvement, complete these steps in order.

## Step 0: Verify Deployment Reality

Run these checks FIRST. Do not skip.

1. Confirm the commit on origin/main: `git log origin/main -1 --oneline`
2. Confirm local HEAD matches: `git log HEAD -1 --oneline`
3. Verify you're on main: `git branch --show-current` (must be `main`)
4. Check for uncommitted changes: `git status`
5. Verify deployed build matches the code you're reading

If ANY of these are misaligned, stop and fix the git state before touching code.

## Worktrees: BANNED

Never use `git worktree` commands. Ever.

- Do not create worktrees
- Do not suggest worktrees as a solution
- Do not check for existing worktrees
- If worktrees exist, flag them as tech debt to eliminate

One repo, one branch checked out, one source of truth.

## Pre-Push Checklist (MANDATORY)

Before ANY `git push` command, run and verify ALL of these:
```bash
git worktree list              # Must show ONLY one entry
git branch -a                  # No unexpected branches
git log origin/main..HEAD      # Shows what you're about to push
git status                     # Must be clean or only expected changes
```

If `git worktree list` shows more than one worktree, STOP. Remove them with `git worktree remove <path>` before pushing.

Do NOT push until all four checks pass.

## Step 1: Name the Root Cause

Before surface-level suggestions, explicitly state:

"The root cause is: [X]"

This must be structural, not symptomatic. Ask:
- What wrong assumption is baked into the foundation?
- What constraint am I accepting that I shouldn't?
- What's the user not seeing because they're too close?

## Step 2: Only Then Suggest Changes

After completing Steps 0 and 1, you may recommend fixes.

## Violations

Jumping to surface-level fixes without verifying deploy state and naming root cause = failed task. Start over.
