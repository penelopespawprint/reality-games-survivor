var qI=Object.defineProperty;var oS=e=>{throw TypeError(e)};var FI=(e,t,r)=>t in e?qI(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Pl=(e,t,r)=>FI(e,typeof t!="symbol"?t+"":t,r),u0=(e,t,r)=>t.has(e)||oS("Cannot "+r);var re=(e,t,r)=>(u0(e,t,"read from private field"),r?r.call(e):t.get(e)),Ve=(e,t,r)=>t.has(e)?oS("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),Oe=(e,t,r,s)=>(u0(e,t,"write to private field"),s?s.call(e,r):t.set(e,r),r),ft=(e,t,r)=>(u0(e,t,"access private method"),r);var jf=(e,t,r,s)=>({set _(a){Oe(e,t,a,r)},get _(){return re(e,t,s)}});function UI(e,t){for(var r=0;r<t.length;r++){const s=t[r];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(s,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var Nf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ww(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var d0={exports:{}},Hu={},h0={exports:{}},gt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lS;function BI(){if(lS)return gt;lS=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),f=Symbol.iterator;function m(L){return L===null||typeof L!="object"?null:(L=f&&L[f]||L["@@iterator"],typeof L=="function"?L:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,g={};function b(L,q,z){this.props=L,this.context=q,this.refs=g,this.updater=z||x}b.prototype.isReactComponent={},b.prototype.setState=function(L,q){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,q,"setState")},b.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function _(){}_.prototype=b.prototype;function w(L,q,z){this.props=L,this.context=q,this.refs=g,this.updater=z||x}var S=w.prototype=new _;S.constructor=w,y(S,b.prototype),S.isPureReactComponent=!0;var j=Array.isArray,N=Object.prototype.hasOwnProperty,C={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function T(L,q,z){var Q,J={},V=null,ee=null;if(q!=null)for(Q in q.ref!==void 0&&(ee=q.ref),q.key!==void 0&&(V=""+q.key),q)N.call(q,Q)&&!E.hasOwnProperty(Q)&&(J[Q]=q[Q]);var te=arguments.length-2;if(te===1)J.children=z;else if(1<te){for(var oe=Array(te),he=0;he<te;he++)oe[he]=arguments[he+2];J.children=oe}if(L&&L.defaultProps)for(Q in te=L.defaultProps,te)J[Q]===void 0&&(J[Q]=te[Q]);return{$$typeof:e,type:L,key:V,ref:ee,props:J,_owner:C.current}}function I(L,q){return{$$typeof:e,type:L.type,key:q,ref:L.ref,props:L.props,_owner:L._owner}}function A(L){return typeof L=="object"&&L!==null&&L.$$typeof===e}function R(L){var q={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(z){return q[z]})}var O=/\/+/g;function M(L,q){return typeof L=="object"&&L!==null&&L.key!=null?R(""+L.key):q.toString(36)}function B(L,q,z,Q,J){var V=typeof L;(V==="undefined"||V==="boolean")&&(L=null);var ee=!1;if(L===null)ee=!0;else switch(V){case"string":case"number":ee=!0;break;case"object":switch(L.$$typeof){case e:case t:ee=!0}}if(ee)return ee=L,J=J(ee),L=Q===""?"."+M(ee,0):Q,j(J)?(z="",L!=null&&(z=L.replace(O,"$&/")+"/"),B(J,q,z,"",function(he){return he})):J!=null&&(A(J)&&(J=I(J,z+(!J.key||ee&&ee.key===J.key?"":(""+J.key).replace(O,"$&/")+"/")+L)),q.push(J)),1;if(ee=0,Q=Q===""?".":Q+":",j(L))for(var te=0;te<L.length;te++){V=L[te];var oe=Q+M(V,te);ee+=B(V,q,z,oe,J)}else if(oe=m(L),typeof oe=="function")for(L=oe.call(L),te=0;!(V=L.next()).done;)V=V.value,oe=Q+M(V,te++),ee+=B(V,q,z,oe,J);else if(V==="object")throw q=String(L),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.");return ee}function U(L,q,z){if(L==null)return L;var Q=[],J=0;return B(L,Q,"","",function(V){return q.call(z,V,J++)}),Q}function Y(L){if(L._status===-1){var q=L._result;q=q(),q.then(function(z){(L._status===0||L._status===-1)&&(L._status=1,L._result=z)},function(z){(L._status===0||L._status===-1)&&(L._status=2,L._result=z)}),L._status===-1&&(L._status=0,L._result=q)}if(L._status===1)return L._result.default;throw L._result}var W={current:null},K={transition:null},F={ReactCurrentDispatcher:W,ReactCurrentBatchConfig:K,ReactCurrentOwner:C};function H(){throw Error("act(...) is not supported in production builds of React.")}return gt.Children={map:U,forEach:function(L,q,z){U(L,function(){q.apply(this,arguments)},z)},count:function(L){var q=0;return U(L,function(){q++}),q},toArray:function(L){return U(L,function(q){return q})||[]},only:function(L){if(!A(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},gt.Component=b,gt.Fragment=r,gt.Profiler=a,gt.PureComponent=w,gt.StrictMode=s,gt.Suspense=u,gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=F,gt.act=H,gt.cloneElement=function(L,q,z){if(L==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+L+".");var Q=y({},L.props),J=L.key,V=L.ref,ee=L._owner;if(q!=null){if(q.ref!==void 0&&(V=q.ref,ee=C.current),q.key!==void 0&&(J=""+q.key),L.type&&L.type.defaultProps)var te=L.type.defaultProps;for(oe in q)N.call(q,oe)&&!E.hasOwnProperty(oe)&&(Q[oe]=q[oe]===void 0&&te!==void 0?te[oe]:q[oe])}var oe=arguments.length-2;if(oe===1)Q.children=z;else if(1<oe){te=Array(oe);for(var he=0;he<oe;he++)te[he]=arguments[he+2];Q.children=te}return{$$typeof:e,type:L.type,key:J,ref:V,props:Q,_owner:ee}},gt.createContext=function(L){return L={$$typeof:o,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},L.Provider={$$typeof:i,_context:L},L.Consumer=L},gt.createElement=T,gt.createFactory=function(L){var q=T.bind(null,L);return q.type=L,q},gt.createRef=function(){return{current:null}},gt.forwardRef=function(L){return{$$typeof:l,render:L}},gt.isValidElement=A,gt.lazy=function(L){return{$$typeof:p,_payload:{_status:-1,_result:L},_init:Y}},gt.memo=function(L,q){return{$$typeof:d,type:L,compare:q===void 0?null:q}},gt.startTransition=function(L){var q=K.transition;K.transition={};try{L()}finally{K.transition=q}},gt.unstable_act=H,gt.useCallback=function(L,q){return W.current.useCallback(L,q)},gt.useContext=function(L){return W.current.useContext(L)},gt.useDebugValue=function(){},gt.useDeferredValue=function(L){return W.current.useDeferredValue(L)},gt.useEffect=function(L,q){return W.current.useEffect(L,q)},gt.useId=function(){return W.current.useId()},gt.useImperativeHandle=function(L,q,z){return W.current.useImperativeHandle(L,q,z)},gt.useInsertionEffect=function(L,q){return W.current.useInsertionEffect(L,q)},gt.useLayoutEffect=function(L,q){return W.current.useLayoutEffect(L,q)},gt.useMemo=function(L,q){return W.current.useMemo(L,q)},gt.useReducer=function(L,q,z){return W.current.useReducer(L,q,z)},gt.useRef=function(L){return W.current.useRef(L)},gt.useState=function(L){return W.current.useState(L)},gt.useSyncExternalStore=function(L,q,z){return W.current.useSyncExternalStore(L,q,z)},gt.useTransition=function(){return W.current.useTransition()},gt.version="18.3.1",gt}var cS;function gp(){return cS||(cS=1,h0.exports=BI()),h0.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uS;function HI(){if(uS)return Hu;uS=1;var e=gp(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(l,u,d){var p,f={},m=null,x=null;d!==void 0&&(m=""+d),u.key!==void 0&&(m=""+u.key),u.ref!==void 0&&(x=u.ref);for(p in u)s.call(u,p)&&!i.hasOwnProperty(p)&&(f[p]=u[p]);if(l&&l.defaultProps)for(p in u=l.defaultProps,u)f[p]===void 0&&(f[p]=u[p]);return{$$typeof:t,type:l,key:m,ref:x,props:f,_owner:a.current}}return Hu.Fragment=r,Hu.jsx=o,Hu.jsxs=o,Hu}var dS;function KI(){return dS||(dS=1,d0.exports=HI()),d0.exports}var n=KI(),$=gp();const Sf=ww($);var kf={},f0={exports:{}},wr={},m0={exports:{}},p0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hS;function zI(){return hS||(hS=1,(function(e){function t(K,F){var H=K.length;K.push(F);e:for(;0<H;){var L=H-1>>>1,q=K[L];if(0<a(q,F))K[L]=F,K[H]=q,H=L;else break e}}function r(K){return K.length===0?null:K[0]}function s(K){if(K.length===0)return null;var F=K[0],H=K.pop();if(H!==F){K[0]=H;e:for(var L=0,q=K.length,z=q>>>1;L<z;){var Q=2*(L+1)-1,J=K[Q],V=Q+1,ee=K[V];if(0>a(J,H))V<q&&0>a(ee,J)?(K[L]=ee,K[V]=H,L=V):(K[L]=J,K[Q]=H,L=Q);else if(V<q&&0>a(ee,H))K[L]=ee,K[V]=H,L=V;else break e}}return F}function a(K,F){var H=K.sortIndex-F.sortIndex;return H!==0?H:K.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var u=[],d=[],p=1,f=null,m=3,x=!1,y=!1,g=!1,b=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(K){for(var F=r(d);F!==null;){if(F.callback===null)s(d);else if(F.startTime<=K)s(d),F.sortIndex=F.expirationTime,t(u,F);else break;F=r(d)}}function j(K){if(g=!1,S(K),!y)if(r(u)!==null)y=!0,Y(N);else{var F=r(d);F!==null&&W(j,F.startTime-K)}}function N(K,F){y=!1,g&&(g=!1,_(T),T=-1),x=!0;var H=m;try{for(S(F),f=r(u);f!==null&&(!(f.expirationTime>F)||K&&!R());){var L=f.callback;if(typeof L=="function"){f.callback=null,m=f.priorityLevel;var q=L(f.expirationTime<=F);F=e.unstable_now(),typeof q=="function"?f.callback=q:f===r(u)&&s(u),S(F)}else s(u);f=r(u)}if(f!==null)var z=!0;else{var Q=r(d);Q!==null&&W(j,Q.startTime-F),z=!1}return z}finally{f=null,m=H,x=!1}}var C=!1,E=null,T=-1,I=5,A=-1;function R(){return!(e.unstable_now()-A<I)}function O(){if(E!==null){var K=e.unstable_now();A=K;var F=!0;try{F=E(!0,K)}finally{F?M():(C=!1,E=null)}}else C=!1}var M;if(typeof w=="function")M=function(){w(O)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,U=B.port2;B.port1.onmessage=O,M=function(){U.postMessage(null)}}else M=function(){b(O,0)};function Y(K){E=K,C||(C=!0,M())}function W(K,F){T=b(function(){K(e.unstable_now())},F)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(K){K.callback=null},e.unstable_continueExecution=function(){y||x||(y=!0,Y(N))},e.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<K?Math.floor(1e3/K):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return r(u)},e.unstable_next=function(K){switch(m){case 1:case 2:case 3:var F=3;break;default:F=m}var H=m;m=F;try{return K()}finally{m=H}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(K,F){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var H=m;m=K;try{return F()}finally{m=H}},e.unstable_scheduleCallback=function(K,F,H){var L=e.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?L+H:L):H=L,K){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=H+q,K={id:p++,callback:F,priorityLevel:K,startTime:H,expirationTime:q,sortIndex:-1},H>L?(K.sortIndex=H,t(d,K),r(u)===null&&K===r(d)&&(g?(_(T),T=-1):g=!0,W(j,H-L))):(K.sortIndex=q,t(u,K),y||x||(y=!0,Y(N))),K},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(K){var F=m;return function(){var H=m;m=F;try{return K.apply(this,arguments)}finally{m=H}}}})(p0)),p0}var fS;function WI(){return fS||(fS=1,m0.exports=zI()),m0.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mS;function GI(){if(mS)return wr;mS=1;var e=gp(),t=WI();function r(c){for(var h="https://reactjs.org/docs/error-decoder.html?invariant="+c,v=1;v<arguments.length;v++)h+="&args[]="+encodeURIComponent(arguments[v]);return"Minified React error #"+c+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function i(c,h){o(c,h),o(c+"Capture",h)}function o(c,h){for(a[c]=h,c=0;c<h.length;c++)s.add(h[c])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(c){return u.call(f,c)?!0:u.call(p,c)?!1:d.test(c)?f[c]=!0:(p[c]=!0,!1)}function x(c,h,v,k){if(v!==null&&v.type===0)return!1;switch(typeof h){case"function":case"symbol":return!0;case"boolean":return k?!1:v!==null?!v.acceptsBooleans:(c=c.toLowerCase().slice(0,5),c!=="data-"&&c!=="aria-");default:return!1}}function y(c,h,v,k){if(h===null||typeof h>"u"||x(c,h,v,k))return!0;if(k)return!1;if(v!==null)switch(v.type){case 3:return!h;case 4:return h===!1;case 5:return isNaN(h);case 6:return isNaN(h)||1>h}return!1}function g(c,h,v,k,P,D,G){this.acceptsBooleans=h===2||h===3||h===4,this.attributeName=k,this.attributeNamespace=P,this.mustUseProperty=v,this.propertyName=c,this.type=h,this.sanitizeURL=D,this.removeEmptyString=G}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(c){b[c]=new g(c,0,!1,c,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(c){var h=c[0];b[h]=new g(h,1,!1,c[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(c){b[c]=new g(c,2,!1,c.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(c){b[c]=new g(c,2,!1,c,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(c){b[c]=new g(c,3,!1,c.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(c){b[c]=new g(c,3,!0,c,null,!1,!1)}),["capture","download"].forEach(function(c){b[c]=new g(c,4,!1,c,null,!1,!1)}),["cols","rows","size","span"].forEach(function(c){b[c]=new g(c,6,!1,c,null,!1,!1)}),["rowSpan","start"].forEach(function(c){b[c]=new g(c,5,!1,c.toLowerCase(),null,!1,!1)});var _=/[\-:]([a-z])/g;function w(c){return c[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(c){var h=c.replace(_,w);b[h]=new g(h,1,!1,c,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(c){var h=c.replace(_,w);b[h]=new g(h,1,!1,c,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(c){var h=c.replace(_,w);b[h]=new g(h,1,!1,c,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(c){b[c]=new g(c,1,!1,c.toLowerCase(),null,!1,!1)}),b.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(c){b[c]=new g(c,1,!1,c.toLowerCase(),null,!0,!0)});function S(c,h,v,k){var P=b.hasOwnProperty(h)?b[h]:null;(P!==null?P.type!==0:k||!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(y(h,v,P,k)&&(v=null),k||P===null?m(h)&&(v===null?c.removeAttribute(h):c.setAttribute(h,""+v)):P.mustUseProperty?c[P.propertyName]=v===null?P.type===3?!1:"":v:(h=P.attributeName,k=P.attributeNamespace,v===null?c.removeAttribute(h):(P=P.type,v=P===3||P===4&&v===!0?"":""+v,k?c.setAttributeNS(k,h,v):c.setAttribute(h,v))))}var j=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,N=Symbol.for("react.element"),C=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),R=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),Y=Symbol.for("react.lazy"),W=Symbol.for("react.offscreen"),K=Symbol.iterator;function F(c){return c===null||typeof c!="object"?null:(c=K&&c[K]||c["@@iterator"],typeof c=="function"?c:null)}var H=Object.assign,L;function q(c){if(L===void 0)try{throw Error()}catch(v){var h=v.stack.trim().match(/\n( *(at )?)/);L=h&&h[1]||""}return`
`+L+c}var z=!1;function Q(c,h){if(!c||z)return"";z=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(h)if(h=function(){throw Error()},Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(me){var k=me}Reflect.construct(c,[],h)}else{try{h.call()}catch(me){k=me}c.call(h.prototype)}else{try{throw Error()}catch(me){k=me}c()}}catch(me){if(me&&k&&typeof me.stack=="string"){for(var P=me.stack.split(`
`),D=k.stack.split(`
`),G=P.length-1,Z=D.length-1;1<=G&&0<=Z&&P[G]!==D[Z];)Z--;for(;1<=G&&0<=Z;G--,Z--)if(P[G]!==D[Z]){if(G!==1||Z!==1)do if(G--,Z--,0>Z||P[G]!==D[Z]){var ae=`
`+P[G].replace(" at new "," at ");return c.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",c.displayName)),ae}while(1<=G&&0<=Z);break}}}finally{z=!1,Error.prepareStackTrace=v}return(c=c?c.displayName||c.name:"")?q(c):""}function J(c){switch(c.tag){case 5:return q(c.type);case 16:return q("Lazy");case 13:return q("Suspense");case 19:return q("SuspenseList");case 0:case 2:case 15:return c=Q(c.type,!1),c;case 11:return c=Q(c.type.render,!1),c;case 1:return c=Q(c.type,!0),c;default:return""}}function V(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case E:return"Fragment";case C:return"Portal";case I:return"Profiler";case T:return"StrictMode";case M:return"Suspense";case B:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case R:return(c.displayName||"Context")+".Consumer";case A:return(c._context.displayName||"Context")+".Provider";case O:var h=c.render;return c=c.displayName,c||(c=h.displayName||h.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case U:return h=c.displayName||null,h!==null?h:V(c.type)||"Memo";case Y:h=c._payload,c=c._init;try{return V(c(h))}catch{}}return null}function ee(c){var h=c.type;switch(c.tag){case 24:return"Cache";case 9:return(h.displayName||"Context")+".Consumer";case 10:return(h._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=h.render,c=c.displayName||c.name||"",h.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return h;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(h);case 8:return h===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h}return null}function te(c){switch(typeof c){case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function oe(c){var h=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function he(c){var h=oe(c)?"checked":"value",v=Object.getOwnPropertyDescriptor(c.constructor.prototype,h),k=""+c[h];if(!c.hasOwnProperty(h)&&typeof v<"u"&&typeof v.get=="function"&&typeof v.set=="function"){var P=v.get,D=v.set;return Object.defineProperty(c,h,{configurable:!0,get:function(){return P.call(this)},set:function(G){k=""+G,D.call(this,G)}}),Object.defineProperty(c,h,{enumerable:v.enumerable}),{getValue:function(){return k},setValue:function(G){k=""+G},stopTracking:function(){c._valueTracker=null,delete c[h]}}}}function Ce(c){c._valueTracker||(c._valueTracker=he(c))}function Fe(c){if(!c)return!1;var h=c._valueTracker;if(!h)return!0;var v=h.getValue(),k="";return c&&(k=oe(c)?c.checked?"true":"false":c.value),c=k,c!==v?(h.setValue(c),!0):!1}function Ae(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}function Ne(c,h){var v=h.checked;return H({},h,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:v??c._wrapperState.initialChecked})}function Be(c,h){var v=h.defaultValue==null?"":h.defaultValue,k=h.checked!=null?h.checked:h.defaultChecked;v=te(h.value!=null?h.value:v),c._wrapperState={initialChecked:k,initialValue:v,controlled:h.type==="checkbox"||h.type==="radio"?h.checked!=null:h.value!=null}}function St(c,h){h=h.checked,h!=null&&S(c,"checked",h,!1)}function ut(c,h){St(c,h);var v=te(h.value),k=h.type;if(v!=null)k==="number"?(v===0&&c.value===""||c.value!=v)&&(c.value=""+v):c.value!==""+v&&(c.value=""+v);else if(k==="submit"||k==="reset"){c.removeAttribute("value");return}h.hasOwnProperty("value")?xe(c,h.type,v):h.hasOwnProperty("defaultValue")&&xe(c,h.type,te(h.defaultValue)),h.checked==null&&h.defaultChecked!=null&&(c.defaultChecked=!!h.defaultChecked)}function fe(c,h,v){if(h.hasOwnProperty("value")||h.hasOwnProperty("defaultValue")){var k=h.type;if(!(k!=="submit"&&k!=="reset"||h.value!==void 0&&h.value!==null))return;h=""+c._wrapperState.initialValue,v||h===c.value||(c.value=h),c.defaultValue=h}v=c.name,v!==""&&(c.name=""),c.defaultChecked=!!c._wrapperState.initialChecked,v!==""&&(c.name=v)}function xe(c,h,v){(h!=="number"||Ae(c.ownerDocument)!==c)&&(v==null?c.defaultValue=""+c._wrapperState.initialValue:c.defaultValue!==""+v&&(c.defaultValue=""+v))}var ye=Array.isArray;function Se(c,h,v,k){if(c=c.options,h){h={};for(var P=0;P<v.length;P++)h["$"+v[P]]=!0;for(v=0;v<c.length;v++)P=h.hasOwnProperty("$"+c[v].value),c[v].selected!==P&&(c[v].selected=P),P&&k&&(c[v].defaultSelected=!0)}else{for(v=""+te(v),h=null,P=0;P<c.length;P++){if(c[P].value===v){c[P].selected=!0,k&&(c[P].defaultSelected=!0);return}h!==null||c[P].disabled||(h=c[P])}h!==null&&(h.selected=!0)}}function pe(c,h){if(h.dangerouslySetInnerHTML!=null)throw Error(r(91));return H({},h,{value:void 0,defaultValue:void 0,children:""+c._wrapperState.initialValue})}function Ge(c,h){var v=h.value;if(v==null){if(v=h.children,h=h.defaultValue,v!=null){if(h!=null)throw Error(r(92));if(ye(v)){if(1<v.length)throw Error(r(93));v=v[0]}h=v}h==null&&(h=""),v=h}c._wrapperState={initialValue:te(v)}}function Qe(c,h){var v=te(h.value),k=te(h.defaultValue);v!=null&&(v=""+v,v!==c.value&&(c.value=v),h.defaultValue==null&&c.defaultValue!==v&&(c.defaultValue=v)),k!=null&&(c.defaultValue=""+k)}function Me(c){var h=c.textContent;h===c._wrapperState.initialValue&&h!==""&&h!==null&&(c.value=h)}function Cn(c){switch(c){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Or(c,h){return c==null||c==="http://www.w3.org/1999/xhtml"?Cn(h):c==="http://www.w3.org/2000/svg"&&h==="foreignObject"?"http://www.w3.org/1999/xhtml":c}var Dt,mh=(function(c){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(h,v,k,P){MSApp.execUnsafeLocalFunction(function(){return c(h,v,k,P)})}:c})(function(c,h){if(c.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in c)c.innerHTML=h;else{for(Dt=Dt||document.createElement("div"),Dt.innerHTML="<svg>"+h.valueOf().toString()+"</svg>",h=Dt.firstChild;c.firstChild;)c.removeChild(c.firstChild);for(;h.firstChild;)c.appendChild(h.firstChild)}});function zt(c,h){if(h){var v=c.firstChild;if(v&&v===c.lastChild&&v.nodeType===3){v.nodeValue=h;return}}c.textContent=h}var pr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},HP=["Webkit","ms","Moz","O"];Object.keys(pr).forEach(function(c){HP.forEach(function(h){h=h+c.charAt(0).toUpperCase()+c.substring(1),pr[h]=pr[c]})});function _j(c,h,v){return h==null||typeof h=="boolean"||h===""?"":v||typeof h!="number"||h===0||pr.hasOwnProperty(c)&&pr[c]?(""+h).trim():h+"px"}function jj(c,h){c=c.style;for(var v in h)if(h.hasOwnProperty(v)){var k=v.indexOf("--")===0,P=_j(v,h[v],k);v==="float"&&(v="cssFloat"),k?c.setProperty(v,P):c[v]=P}}var KP=H({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _x(c,h){if(h){if(KP[c]&&(h.children!=null||h.dangerouslySetInnerHTML!=null))throw Error(r(137,c));if(h.dangerouslySetInnerHTML!=null){if(h.children!=null)throw Error(r(60));if(typeof h.dangerouslySetInnerHTML!="object"||!("__html"in h.dangerouslySetInnerHTML))throw Error(r(61))}if(h.style!=null&&typeof h.style!="object")throw Error(r(62))}}function jx(c,h){if(c.indexOf("-")===-1)return typeof h.is=="string";switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nx=null;function Sx(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var kx=null,ll=null,cl=null;function Nj(c){if(c=Cu(c)){if(typeof kx!="function")throw Error(r(280));var h=c.stateNode;h&&(h=Dh(h),kx(c.stateNode,c.type,h))}}function Sj(c){ll?cl?cl.push(c):cl=[c]:ll=c}function kj(){if(ll){var c=ll,h=cl;if(cl=ll=null,Nj(c),h)for(c=0;c<h.length;c++)Nj(h[c])}}function Ej(c,h){return c(h)}function Cj(){}var Ex=!1;function Tj(c,h,v){if(Ex)return c(h,v);Ex=!0;try{return Ej(c,h,v)}finally{Ex=!1,(ll!==null||cl!==null)&&(Cj(),kj())}}function ou(c,h){var v=c.stateNode;if(v===null)return null;var k=Dh(v);if(k===null)return null;v=k[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(k=!k.disabled)||(c=c.type,k=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!k;break e;default:c=!1}if(c)return null;if(v&&typeof v!="function")throw Error(r(231,h,typeof v));return v}var Cx=!1;if(l)try{var lu={};Object.defineProperty(lu,"passive",{get:function(){Cx=!0}}),window.addEventListener("test",lu,lu),window.removeEventListener("test",lu,lu)}catch{Cx=!1}function zP(c,h,v,k,P,D,G,Z,ae){var me=Array.prototype.slice.call(arguments,3);try{h.apply(v,me)}catch(we){this.onError(we)}}var cu=!1,ph=null,xh=!1,Tx=null,WP={onError:function(c){cu=!0,ph=c}};function GP(c,h,v,k,P,D,G,Z,ae){cu=!1,ph=null,zP.apply(WP,arguments)}function VP(c,h,v,k,P,D,G,Z,ae){if(GP.apply(this,arguments),cu){if(cu){var me=ph;cu=!1,ph=null}else throw Error(r(198));xh||(xh=!0,Tx=me)}}function Ji(c){var h=c,v=c;if(c.alternate)for(;h.return;)h=h.return;else{c=h;do h=c,(h.flags&4098)!==0&&(v=h.return),c=h.return;while(c)}return h.tag===3?v:null}function Rj(c){if(c.tag===13){var h=c.memoizedState;if(h===null&&(c=c.alternate,c!==null&&(h=c.memoizedState)),h!==null)return h.dehydrated}return null}function Aj(c){if(Ji(c)!==c)throw Error(r(188))}function QP(c){var h=c.alternate;if(!h){if(h=Ji(c),h===null)throw Error(r(188));return h!==c?null:c}for(var v=c,k=h;;){var P=v.return;if(P===null)break;var D=P.alternate;if(D===null){if(k=P.return,k!==null){v=k;continue}break}if(P.child===D.child){for(D=P.child;D;){if(D===v)return Aj(P),c;if(D===k)return Aj(P),h;D=D.sibling}throw Error(r(188))}if(v.return!==k.return)v=P,k=D;else{for(var G=!1,Z=P.child;Z;){if(Z===v){G=!0,v=P,k=D;break}if(Z===k){G=!0,k=P,v=D;break}Z=Z.sibling}if(!G){for(Z=D.child;Z;){if(Z===v){G=!0,v=D,k=P;break}if(Z===k){G=!0,k=D,v=P;break}Z=Z.sibling}if(!G)throw Error(r(189))}}if(v.alternate!==k)throw Error(r(190))}if(v.tag!==3)throw Error(r(188));return v.stateNode.current===v?c:h}function Pj(c){return c=QP(c),c!==null?Oj(c):null}function Oj(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){var h=Oj(c);if(h!==null)return h;c=c.sibling}return null}var Ij=t.unstable_scheduleCallback,Lj=t.unstable_cancelCallback,YP=t.unstable_shouldYield,JP=t.unstable_requestPaint,bn=t.unstable_now,XP=t.unstable_getCurrentPriorityLevel,Rx=t.unstable_ImmediatePriority,Mj=t.unstable_UserBlockingPriority,gh=t.unstable_NormalPriority,ZP=t.unstable_LowPriority,Dj=t.unstable_IdlePriority,yh=null,Fs=null;function eO(c){if(Fs&&typeof Fs.onCommitFiberRoot=="function")try{Fs.onCommitFiberRoot(yh,c,void 0,(c.current.flags&128)===128)}catch{}}var ps=Math.clz32?Math.clz32:rO,tO=Math.log,nO=Math.LN2;function rO(c){return c>>>=0,c===0?32:31-(tO(c)/nO|0)|0}var bh=64,vh=4194304;function uu(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return c&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function wh(c,h){var v=c.pendingLanes;if(v===0)return 0;var k=0,P=c.suspendedLanes,D=c.pingedLanes,G=v&268435455;if(G!==0){var Z=G&~P;Z!==0?k=uu(Z):(D&=G,D!==0&&(k=uu(D)))}else G=v&~P,G!==0?k=uu(G):D!==0&&(k=uu(D));if(k===0)return 0;if(h!==0&&h!==k&&(h&P)===0&&(P=k&-k,D=h&-h,P>=D||P===16&&(D&4194240)!==0))return h;if((k&4)!==0&&(k|=v&16),h=c.entangledLanes,h!==0)for(c=c.entanglements,h&=k;0<h;)v=31-ps(h),P=1<<v,k|=c[v],h&=~P;return k}function sO(c,h){switch(c){case 1:case 2:case 4:return h+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function aO(c,h){for(var v=c.suspendedLanes,k=c.pingedLanes,P=c.expirationTimes,D=c.pendingLanes;0<D;){var G=31-ps(D),Z=1<<G,ae=P[G];ae===-1?((Z&v)===0||(Z&k)!==0)&&(P[G]=sO(Z,h)):ae<=h&&(c.expiredLanes|=Z),D&=~Z}}function Ax(c){return c=c.pendingLanes&-1073741825,c!==0?c:c&1073741824?1073741824:0}function $j(){var c=bh;return bh<<=1,(bh&4194240)===0&&(bh=64),c}function Px(c){for(var h=[],v=0;31>v;v++)h.push(c);return h}function du(c,h,v){c.pendingLanes|=h,h!==536870912&&(c.suspendedLanes=0,c.pingedLanes=0),c=c.eventTimes,h=31-ps(h),c[h]=v}function iO(c,h){var v=c.pendingLanes&~h;c.pendingLanes=h,c.suspendedLanes=0,c.pingedLanes=0,c.expiredLanes&=h,c.mutableReadLanes&=h,c.entangledLanes&=h,h=c.entanglements;var k=c.eventTimes;for(c=c.expirationTimes;0<v;){var P=31-ps(v),D=1<<P;h[P]=0,k[P]=-1,c[P]=-1,v&=~D}}function Ox(c,h){var v=c.entangledLanes|=h;for(c=c.entanglements;v;){var k=31-ps(v),P=1<<k;P&h|c[k]&h&&(c[k]|=h),v&=~P}}var Lt=0;function qj(c){return c&=-c,1<c?4<c?(c&268435455)!==0?16:536870912:4:1}var Fj,Ix,Uj,Bj,Hj,Lx=!1,_h=[],Wa=null,Ga=null,Va=null,hu=new Map,fu=new Map,Qa=[],oO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Kj(c,h){switch(c){case"focusin":case"focusout":Wa=null;break;case"dragenter":case"dragleave":Ga=null;break;case"mouseover":case"mouseout":Va=null;break;case"pointerover":case"pointerout":hu.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":fu.delete(h.pointerId)}}function mu(c,h,v,k,P,D){return c===null||c.nativeEvent!==D?(c={blockedOn:h,domEventName:v,eventSystemFlags:k,nativeEvent:D,targetContainers:[P]},h!==null&&(h=Cu(h),h!==null&&Ix(h)),c):(c.eventSystemFlags|=k,h=c.targetContainers,P!==null&&h.indexOf(P)===-1&&h.push(P),c)}function lO(c,h,v,k,P){switch(h){case"focusin":return Wa=mu(Wa,c,h,v,k,P),!0;case"dragenter":return Ga=mu(Ga,c,h,v,k,P),!0;case"mouseover":return Va=mu(Va,c,h,v,k,P),!0;case"pointerover":var D=P.pointerId;return hu.set(D,mu(hu.get(D)||null,c,h,v,k,P)),!0;case"gotpointercapture":return D=P.pointerId,fu.set(D,mu(fu.get(D)||null,c,h,v,k,P)),!0}return!1}function zj(c){var h=Xi(c.target);if(h!==null){var v=Ji(h);if(v!==null){if(h=v.tag,h===13){if(h=Rj(v),h!==null){c.blockedOn=h,Hj(c.priority,function(){Uj(v)});return}}else if(h===3&&v.stateNode.current.memoizedState.isDehydrated){c.blockedOn=v.tag===3?v.stateNode.containerInfo:null;return}}}c.blockedOn=null}function jh(c){if(c.blockedOn!==null)return!1;for(var h=c.targetContainers;0<h.length;){var v=Dx(c.domEventName,c.eventSystemFlags,h[0],c.nativeEvent);if(v===null){v=c.nativeEvent;var k=new v.constructor(v.type,v);Nx=k,v.target.dispatchEvent(k),Nx=null}else return h=Cu(v),h!==null&&Ix(h),c.blockedOn=v,!1;h.shift()}return!0}function Wj(c,h,v){jh(c)&&v.delete(h)}function cO(){Lx=!1,Wa!==null&&jh(Wa)&&(Wa=null),Ga!==null&&jh(Ga)&&(Ga=null),Va!==null&&jh(Va)&&(Va=null),hu.forEach(Wj),fu.forEach(Wj)}function pu(c,h){c.blockedOn===h&&(c.blockedOn=null,Lx||(Lx=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,cO)))}function xu(c){function h(P){return pu(P,c)}if(0<_h.length){pu(_h[0],c);for(var v=1;v<_h.length;v++){var k=_h[v];k.blockedOn===c&&(k.blockedOn=null)}}for(Wa!==null&&pu(Wa,c),Ga!==null&&pu(Ga,c),Va!==null&&pu(Va,c),hu.forEach(h),fu.forEach(h),v=0;v<Qa.length;v++)k=Qa[v],k.blockedOn===c&&(k.blockedOn=null);for(;0<Qa.length&&(v=Qa[0],v.blockedOn===null);)zj(v),v.blockedOn===null&&Qa.shift()}var ul=j.ReactCurrentBatchConfig,Nh=!0;function uO(c,h,v,k){var P=Lt,D=ul.transition;ul.transition=null;try{Lt=1,Mx(c,h,v,k)}finally{Lt=P,ul.transition=D}}function dO(c,h,v,k){var P=Lt,D=ul.transition;ul.transition=null;try{Lt=4,Mx(c,h,v,k)}finally{Lt=P,ul.transition=D}}function Mx(c,h,v,k){if(Nh){var P=Dx(c,h,v,k);if(P===null)eg(c,h,k,Sh,v),Kj(c,k);else if(lO(P,c,h,v,k))k.stopPropagation();else if(Kj(c,k),h&4&&-1<oO.indexOf(c)){for(;P!==null;){var D=Cu(P);if(D!==null&&Fj(D),D=Dx(c,h,v,k),D===null&&eg(c,h,k,Sh,v),D===P)break;P=D}P!==null&&k.stopPropagation()}else eg(c,h,k,null,v)}}var Sh=null;function Dx(c,h,v,k){if(Sh=null,c=Sx(k),c=Xi(c),c!==null)if(h=Ji(c),h===null)c=null;else if(v=h.tag,v===13){if(c=Rj(h),c!==null)return c;c=null}else if(v===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;c=null}else h!==c&&(c=null);return Sh=c,null}function Gj(c){switch(c){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(XP()){case Rx:return 1;case Mj:return 4;case gh:case ZP:return 16;case Dj:return 536870912;default:return 16}default:return 16}}var Ya=null,$x=null,kh=null;function Vj(){if(kh)return kh;var c,h=$x,v=h.length,k,P="value"in Ya?Ya.value:Ya.textContent,D=P.length;for(c=0;c<v&&h[c]===P[c];c++);var G=v-c;for(k=1;k<=G&&h[v-k]===P[D-k];k++);return kh=P.slice(c,1<k?1-k:void 0)}function Eh(c){var h=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&h===13&&(c=13)):c=h,c===10&&(c=13),32<=c||c===13?c:0}function Ch(){return!0}function Qj(){return!1}function Ir(c){function h(v,k,P,D,G){this._reactName=v,this._targetInst=P,this.type=k,this.nativeEvent=D,this.target=G,this.currentTarget=null;for(var Z in c)c.hasOwnProperty(Z)&&(v=c[Z],this[Z]=v?v(D):D[Z]);return this.isDefaultPrevented=(D.defaultPrevented!=null?D.defaultPrevented:D.returnValue===!1)?Ch:Qj,this.isPropagationStopped=Qj,this}return H(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var v=this.nativeEvent;v&&(v.preventDefault?v.preventDefault():typeof v.returnValue!="unknown"&&(v.returnValue=!1),this.isDefaultPrevented=Ch)},stopPropagation:function(){var v=this.nativeEvent;v&&(v.stopPropagation?v.stopPropagation():typeof v.cancelBubble!="unknown"&&(v.cancelBubble=!0),this.isPropagationStopped=Ch)},persist:function(){},isPersistent:Ch}),h}var dl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qx=Ir(dl),gu=H({},dl,{view:0,detail:0}),hO=Ir(gu),Fx,Ux,yu,Th=H({},gu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hx,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==yu&&(yu&&c.type==="mousemove"?(Fx=c.screenX-yu.screenX,Ux=c.screenY-yu.screenY):Ux=Fx=0,yu=c),Fx)},movementY:function(c){return"movementY"in c?c.movementY:Ux}}),Yj=Ir(Th),fO=H({},Th,{dataTransfer:0}),mO=Ir(fO),pO=H({},gu,{relatedTarget:0}),Bx=Ir(pO),xO=H({},dl,{animationName:0,elapsedTime:0,pseudoElement:0}),gO=Ir(xO),yO=H({},dl,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),bO=Ir(yO),vO=H({},dl,{data:0}),Jj=Ir(vO),wO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_O={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function NO(c){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(c):(c=jO[c])?!!h[c]:!1}function Hx(){return NO}var SO=H({},gu,{key:function(c){if(c.key){var h=wO[c.key]||c.key;if(h!=="Unidentified")return h}return c.type==="keypress"?(c=Eh(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?_O[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hx,charCode:function(c){return c.type==="keypress"?Eh(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?Eh(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),kO=Ir(SO),EO=H({},Th,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xj=Ir(EO),CO=H({},gu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hx}),TO=Ir(CO),RO=H({},dl,{propertyName:0,elapsedTime:0,pseudoElement:0}),AO=Ir(RO),PO=H({},Th,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),OO=Ir(PO),IO=[9,13,27,32],Kx=l&&"CompositionEvent"in window,bu=null;l&&"documentMode"in document&&(bu=document.documentMode);var LO=l&&"TextEvent"in window&&!bu,Zj=l&&(!Kx||bu&&8<bu&&11>=bu),eN=" ",tN=!1;function nN(c,h){switch(c){case"keyup":return IO.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rN(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var hl=!1;function MO(c,h){switch(c){case"compositionend":return rN(h);case"keypress":return h.which!==32?null:(tN=!0,eN);case"textInput":return c=h.data,c===eN&&tN?null:c;default:return null}}function DO(c,h){if(hl)return c==="compositionend"||!Kx&&nN(c,h)?(c=Vj(),kh=$x=Ya=null,hl=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return Zj&&h.locale!=="ko"?null:h.data;default:return null}}var $O={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sN(c){var h=c&&c.nodeName&&c.nodeName.toLowerCase();return h==="input"?!!$O[c.type]:h==="textarea"}function aN(c,h,v,k){Sj(k),h=Ih(h,"onChange"),0<h.length&&(v=new qx("onChange","change",null,v,k),c.push({event:v,listeners:h}))}var vu=null,wu=null;function qO(c){jN(c,0)}function Rh(c){var h=gl(c);if(Fe(h))return c}function FO(c,h){if(c==="change")return h}var iN=!1;if(l){var zx;if(l){var Wx="oninput"in document;if(!Wx){var oN=document.createElement("div");oN.setAttribute("oninput","return;"),Wx=typeof oN.oninput=="function"}zx=Wx}else zx=!1;iN=zx&&(!document.documentMode||9<document.documentMode)}function lN(){vu&&(vu.detachEvent("onpropertychange",cN),wu=vu=null)}function cN(c){if(c.propertyName==="value"&&Rh(wu)){var h=[];aN(h,wu,c,Sx(c)),Tj(qO,h)}}function UO(c,h,v){c==="focusin"?(lN(),vu=h,wu=v,vu.attachEvent("onpropertychange",cN)):c==="focusout"&&lN()}function BO(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return Rh(wu)}function HO(c,h){if(c==="click")return Rh(h)}function KO(c,h){if(c==="input"||c==="change")return Rh(h)}function zO(c,h){return c===h&&(c!==0||1/c===1/h)||c!==c&&h!==h}var xs=typeof Object.is=="function"?Object.is:zO;function _u(c,h){if(xs(c,h))return!0;if(typeof c!="object"||c===null||typeof h!="object"||h===null)return!1;var v=Object.keys(c),k=Object.keys(h);if(v.length!==k.length)return!1;for(k=0;k<v.length;k++){var P=v[k];if(!u.call(h,P)||!xs(c[P],h[P]))return!1}return!0}function uN(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function dN(c,h){var v=uN(c);c=0;for(var k;v;){if(v.nodeType===3){if(k=c+v.textContent.length,c<=h&&k>=h)return{node:v,offset:h-c};c=k}e:{for(;v;){if(v.nextSibling){v=v.nextSibling;break e}v=v.parentNode}v=void 0}v=uN(v)}}function hN(c,h){return c&&h?c===h?!0:c&&c.nodeType===3?!1:h&&h.nodeType===3?hN(c,h.parentNode):"contains"in c?c.contains(h):c.compareDocumentPosition?!!(c.compareDocumentPosition(h)&16):!1:!1}function fN(){for(var c=window,h=Ae();h instanceof c.HTMLIFrameElement;){try{var v=typeof h.contentWindow.location.href=="string"}catch{v=!1}if(v)c=h.contentWindow;else break;h=Ae(c.document)}return h}function Gx(c){var h=c&&c.nodeName&&c.nodeName.toLowerCase();return h&&(h==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||h==="textarea"||c.contentEditable==="true")}function WO(c){var h=fN(),v=c.focusedElem,k=c.selectionRange;if(h!==v&&v&&v.ownerDocument&&hN(v.ownerDocument.documentElement,v)){if(k!==null&&Gx(v)){if(h=k.start,c=k.end,c===void 0&&(c=h),"selectionStart"in v)v.selectionStart=h,v.selectionEnd=Math.min(c,v.value.length);else if(c=(h=v.ownerDocument||document)&&h.defaultView||window,c.getSelection){c=c.getSelection();var P=v.textContent.length,D=Math.min(k.start,P);k=k.end===void 0?D:Math.min(k.end,P),!c.extend&&D>k&&(P=k,k=D,D=P),P=dN(v,D);var G=dN(v,k);P&&G&&(c.rangeCount!==1||c.anchorNode!==P.node||c.anchorOffset!==P.offset||c.focusNode!==G.node||c.focusOffset!==G.offset)&&(h=h.createRange(),h.setStart(P.node,P.offset),c.removeAllRanges(),D>k?(c.addRange(h),c.extend(G.node,G.offset)):(h.setEnd(G.node,G.offset),c.addRange(h)))}}for(h=[],c=v;c=c.parentNode;)c.nodeType===1&&h.push({element:c,left:c.scrollLeft,top:c.scrollTop});for(typeof v.focus=="function"&&v.focus(),v=0;v<h.length;v++)c=h[v],c.element.scrollLeft=c.left,c.element.scrollTop=c.top}}var GO=l&&"documentMode"in document&&11>=document.documentMode,fl=null,Vx=null,ju=null,Qx=!1;function mN(c,h,v){var k=v.window===v?v.document:v.nodeType===9?v:v.ownerDocument;Qx||fl==null||fl!==Ae(k)||(k=fl,"selectionStart"in k&&Gx(k)?k={start:k.selectionStart,end:k.selectionEnd}:(k=(k.ownerDocument&&k.ownerDocument.defaultView||window).getSelection(),k={anchorNode:k.anchorNode,anchorOffset:k.anchorOffset,focusNode:k.focusNode,focusOffset:k.focusOffset}),ju&&_u(ju,k)||(ju=k,k=Ih(Vx,"onSelect"),0<k.length&&(h=new qx("onSelect","select",null,h,v),c.push({event:h,listeners:k}),h.target=fl)))}function Ah(c,h){var v={};return v[c.toLowerCase()]=h.toLowerCase(),v["Webkit"+c]="webkit"+h,v["Moz"+c]="moz"+h,v}var ml={animationend:Ah("Animation","AnimationEnd"),animationiteration:Ah("Animation","AnimationIteration"),animationstart:Ah("Animation","AnimationStart"),transitionend:Ah("Transition","TransitionEnd")},Yx={},pN={};l&&(pN=document.createElement("div").style,"AnimationEvent"in window||(delete ml.animationend.animation,delete ml.animationiteration.animation,delete ml.animationstart.animation),"TransitionEvent"in window||delete ml.transitionend.transition);function Ph(c){if(Yx[c])return Yx[c];if(!ml[c])return c;var h=ml[c],v;for(v in h)if(h.hasOwnProperty(v)&&v in pN)return Yx[c]=h[v];return c}var xN=Ph("animationend"),gN=Ph("animationiteration"),yN=Ph("animationstart"),bN=Ph("transitionend"),vN=new Map,wN="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ja(c,h){vN.set(c,h),i(h,[c])}for(var Jx=0;Jx<wN.length;Jx++){var Xx=wN[Jx],VO=Xx.toLowerCase(),QO=Xx[0].toUpperCase()+Xx.slice(1);Ja(VO,"on"+QO)}Ja(xN,"onAnimationEnd"),Ja(gN,"onAnimationIteration"),Ja(yN,"onAnimationStart"),Ja("dblclick","onDoubleClick"),Ja("focusin","onFocus"),Ja("focusout","onBlur"),Ja(bN,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),YO=new Set("cancel close invalid load scroll toggle".split(" ").concat(Nu));function _N(c,h,v){var k=c.type||"unknown-event";c.currentTarget=v,VP(k,h,void 0,c),c.currentTarget=null}function jN(c,h){h=(h&4)!==0;for(var v=0;v<c.length;v++){var k=c[v],P=k.event;k=k.listeners;e:{var D=void 0;if(h)for(var G=k.length-1;0<=G;G--){var Z=k[G],ae=Z.instance,me=Z.currentTarget;if(Z=Z.listener,ae!==D&&P.isPropagationStopped())break e;_N(P,Z,me),D=ae}else for(G=0;G<k.length;G++){if(Z=k[G],ae=Z.instance,me=Z.currentTarget,Z=Z.listener,ae!==D&&P.isPropagationStopped())break e;_N(P,Z,me),D=ae}}}if(xh)throw c=Tx,xh=!1,Tx=null,c}function Xt(c,h){var v=h[ig];v===void 0&&(v=h[ig]=new Set);var k=c+"__bubble";v.has(k)||(NN(h,c,2,!1),v.add(k))}function Zx(c,h,v){var k=0;h&&(k|=4),NN(v,c,k,h)}var Oh="_reactListening"+Math.random().toString(36).slice(2);function Su(c){if(!c[Oh]){c[Oh]=!0,s.forEach(function(v){v!=="selectionchange"&&(YO.has(v)||Zx(v,!1,c),Zx(v,!0,c))});var h=c.nodeType===9?c:c.ownerDocument;h===null||h[Oh]||(h[Oh]=!0,Zx("selectionchange",!1,h))}}function NN(c,h,v,k){switch(Gj(h)){case 1:var P=uO;break;case 4:P=dO;break;default:P=Mx}v=P.bind(null,h,v,c),P=void 0,!Cx||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(P=!0),k?P!==void 0?c.addEventListener(h,v,{capture:!0,passive:P}):c.addEventListener(h,v,!0):P!==void 0?c.addEventListener(h,v,{passive:P}):c.addEventListener(h,v,!1)}function eg(c,h,v,k,P){var D=k;if((h&1)===0&&(h&2)===0&&k!==null)e:for(;;){if(k===null)return;var G=k.tag;if(G===3||G===4){var Z=k.stateNode.containerInfo;if(Z===P||Z.nodeType===8&&Z.parentNode===P)break;if(G===4)for(G=k.return;G!==null;){var ae=G.tag;if((ae===3||ae===4)&&(ae=G.stateNode.containerInfo,ae===P||ae.nodeType===8&&ae.parentNode===P))return;G=G.return}for(;Z!==null;){if(G=Xi(Z),G===null)return;if(ae=G.tag,ae===5||ae===6){k=D=G;continue e}Z=Z.parentNode}}k=k.return}Tj(function(){var me=D,we=Sx(v),je=[];e:{var ve=vN.get(c);if(ve!==void 0){var De=qx,qe=c;switch(c){case"keypress":if(Eh(v)===0)break e;case"keydown":case"keyup":De=kO;break;case"focusin":qe="focus",De=Bx;break;case"focusout":qe="blur",De=Bx;break;case"beforeblur":case"afterblur":De=Bx;break;case"click":if(v.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":De=Yj;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":De=mO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":De=TO;break;case xN:case gN:case yN:De=gO;break;case bN:De=AO;break;case"scroll":De=hO;break;case"wheel":De=OO;break;case"copy":case"cut":case"paste":De=bO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":De=Xj}var Ue=(h&4)!==0,vn=!Ue&&c==="scroll",ue=Ue?ve!==null?ve+"Capture":null:ve;Ue=[];for(var le=me,de;le!==null;){de=le;var Ee=de.stateNode;if(de.tag===5&&Ee!==null&&(de=Ee,ue!==null&&(Ee=ou(le,ue),Ee!=null&&Ue.push(ku(le,Ee,de)))),vn)break;le=le.return}0<Ue.length&&(ve=new De(ve,qe,null,v,we),je.push({event:ve,listeners:Ue}))}}if((h&7)===0){e:{if(ve=c==="mouseover"||c==="pointerover",De=c==="mouseout"||c==="pointerout",ve&&v!==Nx&&(qe=v.relatedTarget||v.fromElement)&&(Xi(qe)||qe[sa]))break e;if((De||ve)&&(ve=we.window===we?we:(ve=we.ownerDocument)?ve.defaultView||ve.parentWindow:window,De?(qe=v.relatedTarget||v.toElement,De=me,qe=qe?Xi(qe):null,qe!==null&&(vn=Ji(qe),qe!==vn||qe.tag!==5&&qe.tag!==6)&&(qe=null)):(De=null,qe=me),De!==qe)){if(Ue=Yj,Ee="onMouseLeave",ue="onMouseEnter",le="mouse",(c==="pointerout"||c==="pointerover")&&(Ue=Xj,Ee="onPointerLeave",ue="onPointerEnter",le="pointer"),vn=De==null?ve:gl(De),de=qe==null?ve:gl(qe),ve=new Ue(Ee,le+"leave",De,v,we),ve.target=vn,ve.relatedTarget=de,Ee=null,Xi(we)===me&&(Ue=new Ue(ue,le+"enter",qe,v,we),Ue.target=de,Ue.relatedTarget=vn,Ee=Ue),vn=Ee,De&&qe)t:{for(Ue=De,ue=qe,le=0,de=Ue;de;de=pl(de))le++;for(de=0,Ee=ue;Ee;Ee=pl(Ee))de++;for(;0<le-de;)Ue=pl(Ue),le--;for(;0<de-le;)ue=pl(ue),de--;for(;le--;){if(Ue===ue||ue!==null&&Ue===ue.alternate)break t;Ue=pl(Ue),ue=pl(ue)}Ue=null}else Ue=null;De!==null&&SN(je,ve,De,Ue,!1),qe!==null&&vn!==null&&SN(je,vn,qe,Ue,!0)}}e:{if(ve=me?gl(me):window,De=ve.nodeName&&ve.nodeName.toLowerCase(),De==="select"||De==="input"&&ve.type==="file")var He=FO;else if(sN(ve))if(iN)He=KO;else{He=BO;var Ye=UO}else(De=ve.nodeName)&&De.toLowerCase()==="input"&&(ve.type==="checkbox"||ve.type==="radio")&&(He=HO);if(He&&(He=He(c,me))){aN(je,He,v,we);break e}Ye&&Ye(c,ve,me),c==="focusout"&&(Ye=ve._wrapperState)&&Ye.controlled&&ve.type==="number"&&xe(ve,"number",ve.value)}switch(Ye=me?gl(me):window,c){case"focusin":(sN(Ye)||Ye.contentEditable==="true")&&(fl=Ye,Vx=me,ju=null);break;case"focusout":ju=Vx=fl=null;break;case"mousedown":Qx=!0;break;case"contextmenu":case"mouseup":case"dragend":Qx=!1,mN(je,v,we);break;case"selectionchange":if(GO)break;case"keydown":case"keyup":mN(je,v,we)}var Je;if(Kx)e:{switch(c){case"compositionstart":var tt="onCompositionStart";break e;case"compositionend":tt="onCompositionEnd";break e;case"compositionupdate":tt="onCompositionUpdate";break e}tt=void 0}else hl?nN(c,v)&&(tt="onCompositionEnd"):c==="keydown"&&v.keyCode===229&&(tt="onCompositionStart");tt&&(Zj&&v.locale!=="ko"&&(hl||tt!=="onCompositionStart"?tt==="onCompositionEnd"&&hl&&(Je=Vj()):(Ya=we,$x="value"in Ya?Ya.value:Ya.textContent,hl=!0)),Ye=Ih(me,tt),0<Ye.length&&(tt=new Jj(tt,c,null,v,we),je.push({event:tt,listeners:Ye}),Je?tt.data=Je:(Je=rN(v),Je!==null&&(tt.data=Je)))),(Je=LO?MO(c,v):DO(c,v))&&(me=Ih(me,"onBeforeInput"),0<me.length&&(we=new Jj("onBeforeInput","beforeinput",null,v,we),je.push({event:we,listeners:me}),we.data=Je))}jN(je,h)})}function ku(c,h,v){return{instance:c,listener:h,currentTarget:v}}function Ih(c,h){for(var v=h+"Capture",k=[];c!==null;){var P=c,D=P.stateNode;P.tag===5&&D!==null&&(P=D,D=ou(c,v),D!=null&&k.unshift(ku(c,D,P)),D=ou(c,h),D!=null&&k.push(ku(c,D,P))),c=c.return}return k}function pl(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5);return c||null}function SN(c,h,v,k,P){for(var D=h._reactName,G=[];v!==null&&v!==k;){var Z=v,ae=Z.alternate,me=Z.stateNode;if(ae!==null&&ae===k)break;Z.tag===5&&me!==null&&(Z=me,P?(ae=ou(v,D),ae!=null&&G.unshift(ku(v,ae,Z))):P||(ae=ou(v,D),ae!=null&&G.push(ku(v,ae,Z)))),v=v.return}G.length!==0&&c.push({event:h,listeners:G})}var JO=/\r\n?/g,XO=/\u0000|\uFFFD/g;function kN(c){return(typeof c=="string"?c:""+c).replace(JO,`
`).replace(XO,"")}function Lh(c,h,v){if(h=kN(h),kN(c)!==h&&v)throw Error(r(425))}function Mh(){}var tg=null,ng=null;function rg(c,h){return c==="textarea"||c==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var sg=typeof setTimeout=="function"?setTimeout:void 0,ZO=typeof clearTimeout=="function"?clearTimeout:void 0,EN=typeof Promise=="function"?Promise:void 0,eI=typeof queueMicrotask=="function"?queueMicrotask:typeof EN<"u"?function(c){return EN.resolve(null).then(c).catch(tI)}:sg;function tI(c){setTimeout(function(){throw c})}function ag(c,h){var v=h,k=0;do{var P=v.nextSibling;if(c.removeChild(v),P&&P.nodeType===8)if(v=P.data,v==="/$"){if(k===0){c.removeChild(P),xu(h);return}k--}else v!=="$"&&v!=="$?"&&v!=="$!"||k++;v=P}while(v);xu(h)}function Xa(c){for(;c!=null;c=c.nextSibling){var h=c.nodeType;if(h===1||h===3)break;if(h===8){if(h=c.data,h==="$"||h==="$!"||h==="$?")break;if(h==="/$")return null}}return c}function CN(c){c=c.previousSibling;for(var h=0;c;){if(c.nodeType===8){var v=c.data;if(v==="$"||v==="$!"||v==="$?"){if(h===0)return c;h--}else v==="/$"&&h++}c=c.previousSibling}return null}var xl=Math.random().toString(36).slice(2),Us="__reactFiber$"+xl,Eu="__reactProps$"+xl,sa="__reactContainer$"+xl,ig="__reactEvents$"+xl,nI="__reactListeners$"+xl,rI="__reactHandles$"+xl;function Xi(c){var h=c[Us];if(h)return h;for(var v=c.parentNode;v;){if(h=v[sa]||v[Us]){if(v=h.alternate,h.child!==null||v!==null&&v.child!==null)for(c=CN(c);c!==null;){if(v=c[Us])return v;c=CN(c)}return h}c=v,v=c.parentNode}return null}function Cu(c){return c=c[Us]||c[sa],!c||c.tag!==5&&c.tag!==6&&c.tag!==13&&c.tag!==3?null:c}function gl(c){if(c.tag===5||c.tag===6)return c.stateNode;throw Error(r(33))}function Dh(c){return c[Eu]||null}var og=[],yl=-1;function Za(c){return{current:c}}function Zt(c){0>yl||(c.current=og[yl],og[yl]=null,yl--)}function Wt(c,h){yl++,og[yl]=c.current,c.current=h}var ei={},Gn=Za(ei),xr=Za(!1),Zi=ei;function bl(c,h){var v=c.type.contextTypes;if(!v)return ei;var k=c.stateNode;if(k&&k.__reactInternalMemoizedUnmaskedChildContext===h)return k.__reactInternalMemoizedMaskedChildContext;var P={},D;for(D in v)P[D]=h[D];return k&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=h,c.__reactInternalMemoizedMaskedChildContext=P),P}function gr(c){return c=c.childContextTypes,c!=null}function $h(){Zt(xr),Zt(Gn)}function TN(c,h,v){if(Gn.current!==ei)throw Error(r(168));Wt(Gn,h),Wt(xr,v)}function RN(c,h,v){var k=c.stateNode;if(h=h.childContextTypes,typeof k.getChildContext!="function")return v;k=k.getChildContext();for(var P in k)if(!(P in h))throw Error(r(108,ee(c)||"Unknown",P));return H({},v,k)}function qh(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||ei,Zi=Gn.current,Wt(Gn,c),Wt(xr,xr.current),!0}function AN(c,h,v){var k=c.stateNode;if(!k)throw Error(r(169));v?(c=RN(c,h,Zi),k.__reactInternalMemoizedMergedChildContext=c,Zt(xr),Zt(Gn),Wt(Gn,c)):Zt(xr),Wt(xr,v)}var aa=null,Fh=!1,lg=!1;function PN(c){aa===null?aa=[c]:aa.push(c)}function sI(c){Fh=!0,PN(c)}function ti(){if(!lg&&aa!==null){lg=!0;var c=0,h=Lt;try{var v=aa;for(Lt=1;c<v.length;c++){var k=v[c];do k=k(!0);while(k!==null)}aa=null,Fh=!1}catch(P){throw aa!==null&&(aa=aa.slice(c+1)),Ij(Rx,ti),P}finally{Lt=h,lg=!1}}return null}var vl=[],wl=0,Uh=null,Bh=0,Vr=[],Qr=0,eo=null,ia=1,oa="";function to(c,h){vl[wl++]=Bh,vl[wl++]=Uh,Uh=c,Bh=h}function ON(c,h,v){Vr[Qr++]=ia,Vr[Qr++]=oa,Vr[Qr++]=eo,eo=c;var k=ia;c=oa;var P=32-ps(k)-1;k&=~(1<<P),v+=1;var D=32-ps(h)+P;if(30<D){var G=P-P%5;D=(k&(1<<G)-1).toString(32),k>>=G,P-=G,ia=1<<32-ps(h)+P|v<<P|k,oa=D+c}else ia=1<<D|v<<P|k,oa=c}function cg(c){c.return!==null&&(to(c,1),ON(c,1,0))}function ug(c){for(;c===Uh;)Uh=vl[--wl],vl[wl]=null,Bh=vl[--wl],vl[wl]=null;for(;c===eo;)eo=Vr[--Qr],Vr[Qr]=null,oa=Vr[--Qr],Vr[Qr]=null,ia=Vr[--Qr],Vr[Qr]=null}var Lr=null,Mr=null,nn=!1,gs=null;function IN(c,h){var v=Zr(5,null,null,0);v.elementType="DELETED",v.stateNode=h,v.return=c,h=c.deletions,h===null?(c.deletions=[v],c.flags|=16):h.push(v)}function LN(c,h){switch(c.tag){case 5:var v=c.type;return h=h.nodeType!==1||v.toLowerCase()!==h.nodeName.toLowerCase()?null:h,h!==null?(c.stateNode=h,Lr=c,Mr=Xa(h.firstChild),!0):!1;case 6:return h=c.pendingProps===""||h.nodeType!==3?null:h,h!==null?(c.stateNode=h,Lr=c,Mr=null,!0):!1;case 13:return h=h.nodeType!==8?null:h,h!==null?(v=eo!==null?{id:ia,overflow:oa}:null,c.memoizedState={dehydrated:h,treeContext:v,retryLane:1073741824},v=Zr(18,null,null,0),v.stateNode=h,v.return=c,c.child=v,Lr=c,Mr=null,!0):!1;default:return!1}}function dg(c){return(c.mode&1)!==0&&(c.flags&128)===0}function hg(c){if(nn){var h=Mr;if(h){var v=h;if(!LN(c,h)){if(dg(c))throw Error(r(418));h=Xa(v.nextSibling);var k=Lr;h&&LN(c,h)?IN(k,v):(c.flags=c.flags&-4097|2,nn=!1,Lr=c)}}else{if(dg(c))throw Error(r(418));c.flags=c.flags&-4097|2,nn=!1,Lr=c}}}function MN(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;Lr=c}function Hh(c){if(c!==Lr)return!1;if(!nn)return MN(c),nn=!0,!1;var h;if((h=c.tag!==3)&&!(h=c.tag!==5)&&(h=c.type,h=h!=="head"&&h!=="body"&&!rg(c.type,c.memoizedProps)),h&&(h=Mr)){if(dg(c))throw DN(),Error(r(418));for(;h;)IN(c,h),h=Xa(h.nextSibling)}if(MN(c),c.tag===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(r(317));e:{for(c=c.nextSibling,h=0;c;){if(c.nodeType===8){var v=c.data;if(v==="/$"){if(h===0){Mr=Xa(c.nextSibling);break e}h--}else v!=="$"&&v!=="$!"&&v!=="$?"||h++}c=c.nextSibling}Mr=null}}else Mr=Lr?Xa(c.stateNode.nextSibling):null;return!0}function DN(){for(var c=Mr;c;)c=Xa(c.nextSibling)}function _l(){Mr=Lr=null,nn=!1}function fg(c){gs===null?gs=[c]:gs.push(c)}var aI=j.ReactCurrentBatchConfig;function Tu(c,h,v){if(c=v.ref,c!==null&&typeof c!="function"&&typeof c!="object"){if(v._owner){if(v=v._owner,v){if(v.tag!==1)throw Error(r(309));var k=v.stateNode}if(!k)throw Error(r(147,c));var P=k,D=""+c;return h!==null&&h.ref!==null&&typeof h.ref=="function"&&h.ref._stringRef===D?h.ref:(h=function(G){var Z=P.refs;G===null?delete Z[D]:Z[D]=G},h._stringRef=D,h)}if(typeof c!="string")throw Error(r(284));if(!v._owner)throw Error(r(290,c))}return c}function Kh(c,h){throw c=Object.prototype.toString.call(h),Error(r(31,c==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":c))}function $N(c){var h=c._init;return h(c._payload)}function qN(c){function h(ue,le){if(c){var de=ue.deletions;de===null?(ue.deletions=[le],ue.flags|=16):de.push(le)}}function v(ue,le){if(!c)return null;for(;le!==null;)h(ue,le),le=le.sibling;return null}function k(ue,le){for(ue=new Map;le!==null;)le.key!==null?ue.set(le.key,le):ue.set(le.index,le),le=le.sibling;return ue}function P(ue,le){return ue=ci(ue,le),ue.index=0,ue.sibling=null,ue}function D(ue,le,de){return ue.index=de,c?(de=ue.alternate,de!==null?(de=de.index,de<le?(ue.flags|=2,le):de):(ue.flags|=2,le)):(ue.flags|=1048576,le)}function G(ue){return c&&ue.alternate===null&&(ue.flags|=2),ue}function Z(ue,le,de,Ee){return le===null||le.tag!==6?(le=s0(de,ue.mode,Ee),le.return=ue,le):(le=P(le,de),le.return=ue,le)}function ae(ue,le,de,Ee){var He=de.type;return He===E?we(ue,le,de.props.children,Ee,de.key):le!==null&&(le.elementType===He||typeof He=="object"&&He!==null&&He.$$typeof===Y&&$N(He)===le.type)?(Ee=P(le,de.props),Ee.ref=Tu(ue,le,de),Ee.return=ue,Ee):(Ee=pf(de.type,de.key,de.props,null,ue.mode,Ee),Ee.ref=Tu(ue,le,de),Ee.return=ue,Ee)}function me(ue,le,de,Ee){return le===null||le.tag!==4||le.stateNode.containerInfo!==de.containerInfo||le.stateNode.implementation!==de.implementation?(le=a0(de,ue.mode,Ee),le.return=ue,le):(le=P(le,de.children||[]),le.return=ue,le)}function we(ue,le,de,Ee,He){return le===null||le.tag!==7?(le=co(de,ue.mode,Ee,He),le.return=ue,le):(le=P(le,de),le.return=ue,le)}function je(ue,le,de){if(typeof le=="string"&&le!==""||typeof le=="number")return le=s0(""+le,ue.mode,de),le.return=ue,le;if(typeof le=="object"&&le!==null){switch(le.$$typeof){case N:return de=pf(le.type,le.key,le.props,null,ue.mode,de),de.ref=Tu(ue,null,le),de.return=ue,de;case C:return le=a0(le,ue.mode,de),le.return=ue,le;case Y:var Ee=le._init;return je(ue,Ee(le._payload),de)}if(ye(le)||F(le))return le=co(le,ue.mode,de,null),le.return=ue,le;Kh(ue,le)}return null}function ve(ue,le,de,Ee){var He=le!==null?le.key:null;if(typeof de=="string"&&de!==""||typeof de=="number")return He!==null?null:Z(ue,le,""+de,Ee);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case N:return de.key===He?ae(ue,le,de,Ee):null;case C:return de.key===He?me(ue,le,de,Ee):null;case Y:return He=de._init,ve(ue,le,He(de._payload),Ee)}if(ye(de)||F(de))return He!==null?null:we(ue,le,de,Ee,null);Kh(ue,de)}return null}function De(ue,le,de,Ee,He){if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number")return ue=ue.get(de)||null,Z(le,ue,""+Ee,He);if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case N:return ue=ue.get(Ee.key===null?de:Ee.key)||null,ae(le,ue,Ee,He);case C:return ue=ue.get(Ee.key===null?de:Ee.key)||null,me(le,ue,Ee,He);case Y:var Ye=Ee._init;return De(ue,le,de,Ye(Ee._payload),He)}if(ye(Ee)||F(Ee))return ue=ue.get(de)||null,we(le,ue,Ee,He,null);Kh(le,Ee)}return null}function qe(ue,le,de,Ee){for(var He=null,Ye=null,Je=le,tt=le=0,Dn=null;Je!==null&&tt<de.length;tt++){Je.index>tt?(Dn=Je,Je=null):Dn=Je.sibling;var kt=ve(ue,Je,de[tt],Ee);if(kt===null){Je===null&&(Je=Dn);break}c&&Je&&kt.alternate===null&&h(ue,Je),le=D(kt,le,tt),Ye===null?He=kt:Ye.sibling=kt,Ye=kt,Je=Dn}if(tt===de.length)return v(ue,Je),nn&&to(ue,tt),He;if(Je===null){for(;tt<de.length;tt++)Je=je(ue,de[tt],Ee),Je!==null&&(le=D(Je,le,tt),Ye===null?He=Je:Ye.sibling=Je,Ye=Je);return nn&&to(ue,tt),He}for(Je=k(ue,Je);tt<de.length;tt++)Dn=De(Je,ue,tt,de[tt],Ee),Dn!==null&&(c&&Dn.alternate!==null&&Je.delete(Dn.key===null?tt:Dn.key),le=D(Dn,le,tt),Ye===null?He=Dn:Ye.sibling=Dn,Ye=Dn);return c&&Je.forEach(function(ui){return h(ue,ui)}),nn&&to(ue,tt),He}function Ue(ue,le,de,Ee){var He=F(de);if(typeof He!="function")throw Error(r(150));if(de=He.call(de),de==null)throw Error(r(151));for(var Ye=He=null,Je=le,tt=le=0,Dn=null,kt=de.next();Je!==null&&!kt.done;tt++,kt=de.next()){Je.index>tt?(Dn=Je,Je=null):Dn=Je.sibling;var ui=ve(ue,Je,kt.value,Ee);if(ui===null){Je===null&&(Je=Dn);break}c&&Je&&ui.alternate===null&&h(ue,Je),le=D(ui,le,tt),Ye===null?He=ui:Ye.sibling=ui,Ye=ui,Je=Dn}if(kt.done)return v(ue,Je),nn&&to(ue,tt),He;if(Je===null){for(;!kt.done;tt++,kt=de.next())kt=je(ue,kt.value,Ee),kt!==null&&(le=D(kt,le,tt),Ye===null?He=kt:Ye.sibling=kt,Ye=kt);return nn&&to(ue,tt),He}for(Je=k(ue,Je);!kt.done;tt++,kt=de.next())kt=De(Je,ue,tt,kt.value,Ee),kt!==null&&(c&&kt.alternate!==null&&Je.delete(kt.key===null?tt:kt.key),le=D(kt,le,tt),Ye===null?He=kt:Ye.sibling=kt,Ye=kt);return c&&Je.forEach(function($I){return h(ue,$I)}),nn&&to(ue,tt),He}function vn(ue,le,de,Ee){if(typeof de=="object"&&de!==null&&de.type===E&&de.key===null&&(de=de.props.children),typeof de=="object"&&de!==null){switch(de.$$typeof){case N:e:{for(var He=de.key,Ye=le;Ye!==null;){if(Ye.key===He){if(He=de.type,He===E){if(Ye.tag===7){v(ue,Ye.sibling),le=P(Ye,de.props.children),le.return=ue,ue=le;break e}}else if(Ye.elementType===He||typeof He=="object"&&He!==null&&He.$$typeof===Y&&$N(He)===Ye.type){v(ue,Ye.sibling),le=P(Ye,de.props),le.ref=Tu(ue,Ye,de),le.return=ue,ue=le;break e}v(ue,Ye);break}else h(ue,Ye);Ye=Ye.sibling}de.type===E?(le=co(de.props.children,ue.mode,Ee,de.key),le.return=ue,ue=le):(Ee=pf(de.type,de.key,de.props,null,ue.mode,Ee),Ee.ref=Tu(ue,le,de),Ee.return=ue,ue=Ee)}return G(ue);case C:e:{for(Ye=de.key;le!==null;){if(le.key===Ye)if(le.tag===4&&le.stateNode.containerInfo===de.containerInfo&&le.stateNode.implementation===de.implementation){v(ue,le.sibling),le=P(le,de.children||[]),le.return=ue,ue=le;break e}else{v(ue,le);break}else h(ue,le);le=le.sibling}le=a0(de,ue.mode,Ee),le.return=ue,ue=le}return G(ue);case Y:return Ye=de._init,vn(ue,le,Ye(de._payload),Ee)}if(ye(de))return qe(ue,le,de,Ee);if(F(de))return Ue(ue,le,de,Ee);Kh(ue,de)}return typeof de=="string"&&de!==""||typeof de=="number"?(de=""+de,le!==null&&le.tag===6?(v(ue,le.sibling),le=P(le,de),le.return=ue,ue=le):(v(ue,le),le=s0(de,ue.mode,Ee),le.return=ue,ue=le),G(ue)):v(ue,le)}return vn}var jl=qN(!0),FN=qN(!1),zh=Za(null),Wh=null,Nl=null,mg=null;function pg(){mg=Nl=Wh=null}function xg(c){var h=zh.current;Zt(zh),c._currentValue=h}function gg(c,h,v){for(;c!==null;){var k=c.alternate;if((c.childLanes&h)!==h?(c.childLanes|=h,k!==null&&(k.childLanes|=h)):k!==null&&(k.childLanes&h)!==h&&(k.childLanes|=h),c===v)break;c=c.return}}function Sl(c,h){Wh=c,mg=Nl=null,c=c.dependencies,c!==null&&c.firstContext!==null&&((c.lanes&h)!==0&&(yr=!0),c.firstContext=null)}function Yr(c){var h=c._currentValue;if(mg!==c)if(c={context:c,memoizedValue:h,next:null},Nl===null){if(Wh===null)throw Error(r(308));Nl=c,Wh.dependencies={lanes:0,firstContext:c}}else Nl=Nl.next=c;return h}var no=null;function yg(c){no===null?no=[c]:no.push(c)}function UN(c,h,v,k){var P=h.interleaved;return P===null?(v.next=v,yg(h)):(v.next=P.next,P.next=v),h.interleaved=v,la(c,k)}function la(c,h){c.lanes|=h;var v=c.alternate;for(v!==null&&(v.lanes|=h),v=c,c=c.return;c!==null;)c.childLanes|=h,v=c.alternate,v!==null&&(v.childLanes|=h),v=c,c=c.return;return v.tag===3?v.stateNode:null}var ni=!1;function bg(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function BN(c,h){c=c.updateQueue,h.updateQueue===c&&(h.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function ca(c,h){return{eventTime:c,lane:h,tag:0,payload:null,callback:null,next:null}}function ri(c,h,v){var k=c.updateQueue;if(k===null)return null;if(k=k.shared,(_t&2)!==0){var P=k.pending;return P===null?h.next=h:(h.next=P.next,P.next=h),k.pending=h,la(c,v)}return P=k.interleaved,P===null?(h.next=h,yg(k)):(h.next=P.next,P.next=h),k.interleaved=h,la(c,v)}function Gh(c,h,v){if(h=h.updateQueue,h!==null&&(h=h.shared,(v&4194240)!==0)){var k=h.lanes;k&=c.pendingLanes,v|=k,h.lanes=v,Ox(c,v)}}function HN(c,h){var v=c.updateQueue,k=c.alternate;if(k!==null&&(k=k.updateQueue,v===k)){var P=null,D=null;if(v=v.firstBaseUpdate,v!==null){do{var G={eventTime:v.eventTime,lane:v.lane,tag:v.tag,payload:v.payload,callback:v.callback,next:null};D===null?P=D=G:D=D.next=G,v=v.next}while(v!==null);D===null?P=D=h:D=D.next=h}else P=D=h;v={baseState:k.baseState,firstBaseUpdate:P,lastBaseUpdate:D,shared:k.shared,effects:k.effects},c.updateQueue=v;return}c=v.lastBaseUpdate,c===null?v.firstBaseUpdate=h:c.next=h,v.lastBaseUpdate=h}function Vh(c,h,v,k){var P=c.updateQueue;ni=!1;var D=P.firstBaseUpdate,G=P.lastBaseUpdate,Z=P.shared.pending;if(Z!==null){P.shared.pending=null;var ae=Z,me=ae.next;ae.next=null,G===null?D=me:G.next=me,G=ae;var we=c.alternate;we!==null&&(we=we.updateQueue,Z=we.lastBaseUpdate,Z!==G&&(Z===null?we.firstBaseUpdate=me:Z.next=me,we.lastBaseUpdate=ae))}if(D!==null){var je=P.baseState;G=0,we=me=ae=null,Z=D;do{var ve=Z.lane,De=Z.eventTime;if((k&ve)===ve){we!==null&&(we=we.next={eventTime:De,lane:0,tag:Z.tag,payload:Z.payload,callback:Z.callback,next:null});e:{var qe=c,Ue=Z;switch(ve=h,De=v,Ue.tag){case 1:if(qe=Ue.payload,typeof qe=="function"){je=qe.call(De,je,ve);break e}je=qe;break e;case 3:qe.flags=qe.flags&-65537|128;case 0:if(qe=Ue.payload,ve=typeof qe=="function"?qe.call(De,je,ve):qe,ve==null)break e;je=H({},je,ve);break e;case 2:ni=!0}}Z.callback!==null&&Z.lane!==0&&(c.flags|=64,ve=P.effects,ve===null?P.effects=[Z]:ve.push(Z))}else De={eventTime:De,lane:ve,tag:Z.tag,payload:Z.payload,callback:Z.callback,next:null},we===null?(me=we=De,ae=je):we=we.next=De,G|=ve;if(Z=Z.next,Z===null){if(Z=P.shared.pending,Z===null)break;ve=Z,Z=ve.next,ve.next=null,P.lastBaseUpdate=ve,P.shared.pending=null}}while(!0);if(we===null&&(ae=je),P.baseState=ae,P.firstBaseUpdate=me,P.lastBaseUpdate=we,h=P.shared.interleaved,h!==null){P=h;do G|=P.lane,P=P.next;while(P!==h)}else D===null&&(P.shared.lanes=0);ao|=G,c.lanes=G,c.memoizedState=je}}function KN(c,h,v){if(c=h.effects,h.effects=null,c!==null)for(h=0;h<c.length;h++){var k=c[h],P=k.callback;if(P!==null){if(k.callback=null,k=v,typeof P!="function")throw Error(r(191,P));P.call(k)}}}var Ru={},Bs=Za(Ru),Au=Za(Ru),Pu=Za(Ru);function ro(c){if(c===Ru)throw Error(r(174));return c}function vg(c,h){switch(Wt(Pu,h),Wt(Au,c),Wt(Bs,Ru),c=h.nodeType,c){case 9:case 11:h=(h=h.documentElement)?h.namespaceURI:Or(null,"");break;default:c=c===8?h.parentNode:h,h=c.namespaceURI||null,c=c.tagName,h=Or(h,c)}Zt(Bs),Wt(Bs,h)}function kl(){Zt(Bs),Zt(Au),Zt(Pu)}function zN(c){ro(Pu.current);var h=ro(Bs.current),v=Or(h,c.type);h!==v&&(Wt(Au,c),Wt(Bs,v))}function wg(c){Au.current===c&&(Zt(Bs),Zt(Au))}var on=Za(0);function Qh(c){for(var h=c;h!==null;){if(h.tag===13){var v=h.memoizedState;if(v!==null&&(v=v.dehydrated,v===null||v.data==="$?"||v.data==="$!"))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var _g=[];function jg(){for(var c=0;c<_g.length;c++)_g[c]._workInProgressVersionPrimary=null;_g.length=0}var Yh=j.ReactCurrentDispatcher,Ng=j.ReactCurrentBatchConfig,so=0,ln=null,Tn=null,Ln=null,Jh=!1,Ou=!1,Iu=0,iI=0;function Vn(){throw Error(r(321))}function Sg(c,h){if(h===null)return!1;for(var v=0;v<h.length&&v<c.length;v++)if(!xs(c[v],h[v]))return!1;return!0}function kg(c,h,v,k,P,D){if(so=D,ln=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,Yh.current=c===null||c.memoizedState===null?uI:dI,c=v(k,P),Ou){D=0;do{if(Ou=!1,Iu=0,25<=D)throw Error(r(301));D+=1,Ln=Tn=null,h.updateQueue=null,Yh.current=hI,c=v(k,P)}while(Ou)}if(Yh.current=ef,h=Tn!==null&&Tn.next!==null,so=0,Ln=Tn=ln=null,Jh=!1,h)throw Error(r(300));return c}function Eg(){var c=Iu!==0;return Iu=0,c}function Hs(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ln===null?ln.memoizedState=Ln=c:Ln=Ln.next=c,Ln}function Jr(){if(Tn===null){var c=ln.alternate;c=c!==null?c.memoizedState:null}else c=Tn.next;var h=Ln===null?ln.memoizedState:Ln.next;if(h!==null)Ln=h,Tn=c;else{if(c===null)throw Error(r(310));Tn=c,c={memoizedState:Tn.memoizedState,baseState:Tn.baseState,baseQueue:Tn.baseQueue,queue:Tn.queue,next:null},Ln===null?ln.memoizedState=Ln=c:Ln=Ln.next=c}return Ln}function Lu(c,h){return typeof h=="function"?h(c):h}function Cg(c){var h=Jr(),v=h.queue;if(v===null)throw Error(r(311));v.lastRenderedReducer=c;var k=Tn,P=k.baseQueue,D=v.pending;if(D!==null){if(P!==null){var G=P.next;P.next=D.next,D.next=G}k.baseQueue=P=D,v.pending=null}if(P!==null){D=P.next,k=k.baseState;var Z=G=null,ae=null,me=D;do{var we=me.lane;if((so&we)===we)ae!==null&&(ae=ae.next={lane:0,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null}),k=me.hasEagerState?me.eagerState:c(k,me.action);else{var je={lane:we,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null};ae===null?(Z=ae=je,G=k):ae=ae.next=je,ln.lanes|=we,ao|=we}me=me.next}while(me!==null&&me!==D);ae===null?G=k:ae.next=Z,xs(k,h.memoizedState)||(yr=!0),h.memoizedState=k,h.baseState=G,h.baseQueue=ae,v.lastRenderedState=k}if(c=v.interleaved,c!==null){P=c;do D=P.lane,ln.lanes|=D,ao|=D,P=P.next;while(P!==c)}else P===null&&(v.lanes=0);return[h.memoizedState,v.dispatch]}function Tg(c){var h=Jr(),v=h.queue;if(v===null)throw Error(r(311));v.lastRenderedReducer=c;var k=v.dispatch,P=v.pending,D=h.memoizedState;if(P!==null){v.pending=null;var G=P=P.next;do D=c(D,G.action),G=G.next;while(G!==P);xs(D,h.memoizedState)||(yr=!0),h.memoizedState=D,h.baseQueue===null&&(h.baseState=D),v.lastRenderedState=D}return[D,k]}function WN(){}function GN(c,h){var v=ln,k=Jr(),P=h(),D=!xs(k.memoizedState,P);if(D&&(k.memoizedState=P,yr=!0),k=k.queue,Rg(YN.bind(null,v,k,c),[c]),k.getSnapshot!==h||D||Ln!==null&&Ln.memoizedState.tag&1){if(v.flags|=2048,Mu(9,QN.bind(null,v,k,P,h),void 0,null),Mn===null)throw Error(r(349));(so&30)!==0||VN(v,h,P)}return P}function VN(c,h,v){c.flags|=16384,c={getSnapshot:h,value:v},h=ln.updateQueue,h===null?(h={lastEffect:null,stores:null},ln.updateQueue=h,h.stores=[c]):(v=h.stores,v===null?h.stores=[c]:v.push(c))}function QN(c,h,v,k){h.value=v,h.getSnapshot=k,JN(h)&&XN(c)}function YN(c,h,v){return v(function(){JN(h)&&XN(c)})}function JN(c){var h=c.getSnapshot;c=c.value;try{var v=h();return!xs(c,v)}catch{return!0}}function XN(c){var h=la(c,1);h!==null&&ws(h,c,1,-1)}function ZN(c){var h=Hs();return typeof c=="function"&&(c=c()),h.memoizedState=h.baseState=c,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Lu,lastRenderedState:c},h.queue=c,c=c.dispatch=cI.bind(null,ln,c),[h.memoizedState,c]}function Mu(c,h,v,k){return c={tag:c,create:h,destroy:v,deps:k,next:null},h=ln.updateQueue,h===null?(h={lastEffect:null,stores:null},ln.updateQueue=h,h.lastEffect=c.next=c):(v=h.lastEffect,v===null?h.lastEffect=c.next=c:(k=v.next,v.next=c,c.next=k,h.lastEffect=c)),c}function e1(){return Jr().memoizedState}function Xh(c,h,v,k){var P=Hs();ln.flags|=c,P.memoizedState=Mu(1|h,v,void 0,k===void 0?null:k)}function Zh(c,h,v,k){var P=Jr();k=k===void 0?null:k;var D=void 0;if(Tn!==null){var G=Tn.memoizedState;if(D=G.destroy,k!==null&&Sg(k,G.deps)){P.memoizedState=Mu(h,v,D,k);return}}ln.flags|=c,P.memoizedState=Mu(1|h,v,D,k)}function t1(c,h){return Xh(8390656,8,c,h)}function Rg(c,h){return Zh(2048,8,c,h)}function n1(c,h){return Zh(4,2,c,h)}function r1(c,h){return Zh(4,4,c,h)}function s1(c,h){if(typeof h=="function")return c=c(),h(c),function(){h(null)};if(h!=null)return c=c(),h.current=c,function(){h.current=null}}function a1(c,h,v){return v=v!=null?v.concat([c]):null,Zh(4,4,s1.bind(null,h,c),v)}function Ag(){}function i1(c,h){var v=Jr();h=h===void 0?null:h;var k=v.memoizedState;return k!==null&&h!==null&&Sg(h,k[1])?k[0]:(v.memoizedState=[c,h],c)}function o1(c,h){var v=Jr();h=h===void 0?null:h;var k=v.memoizedState;return k!==null&&h!==null&&Sg(h,k[1])?k[0]:(c=c(),v.memoizedState=[c,h],c)}function l1(c,h,v){return(so&21)===0?(c.baseState&&(c.baseState=!1,yr=!0),c.memoizedState=v):(xs(v,h)||(v=$j(),ln.lanes|=v,ao|=v,c.baseState=!0),h)}function oI(c,h){var v=Lt;Lt=v!==0&&4>v?v:4,c(!0);var k=Ng.transition;Ng.transition={};try{c(!1),h()}finally{Lt=v,Ng.transition=k}}function c1(){return Jr().memoizedState}function lI(c,h,v){var k=oi(c);if(v={lane:k,action:v,hasEagerState:!1,eagerState:null,next:null},u1(c))d1(h,v);else if(v=UN(c,h,v,k),v!==null){var P=ar();ws(v,c,k,P),h1(v,h,k)}}function cI(c,h,v){var k=oi(c),P={lane:k,action:v,hasEagerState:!1,eagerState:null,next:null};if(u1(c))d1(h,P);else{var D=c.alternate;if(c.lanes===0&&(D===null||D.lanes===0)&&(D=h.lastRenderedReducer,D!==null))try{var G=h.lastRenderedState,Z=D(G,v);if(P.hasEagerState=!0,P.eagerState=Z,xs(Z,G)){var ae=h.interleaved;ae===null?(P.next=P,yg(h)):(P.next=ae.next,ae.next=P),h.interleaved=P;return}}catch{}finally{}v=UN(c,h,P,k),v!==null&&(P=ar(),ws(v,c,k,P),h1(v,h,k))}}function u1(c){var h=c.alternate;return c===ln||h!==null&&h===ln}function d1(c,h){Ou=Jh=!0;var v=c.pending;v===null?h.next=h:(h.next=v.next,v.next=h),c.pending=h}function h1(c,h,v){if((v&4194240)!==0){var k=h.lanes;k&=c.pendingLanes,v|=k,h.lanes=v,Ox(c,v)}}var ef={readContext:Yr,useCallback:Vn,useContext:Vn,useEffect:Vn,useImperativeHandle:Vn,useInsertionEffect:Vn,useLayoutEffect:Vn,useMemo:Vn,useReducer:Vn,useRef:Vn,useState:Vn,useDebugValue:Vn,useDeferredValue:Vn,useTransition:Vn,useMutableSource:Vn,useSyncExternalStore:Vn,useId:Vn,unstable_isNewReconciler:!1},uI={readContext:Yr,useCallback:function(c,h){return Hs().memoizedState=[c,h===void 0?null:h],c},useContext:Yr,useEffect:t1,useImperativeHandle:function(c,h,v){return v=v!=null?v.concat([c]):null,Xh(4194308,4,s1.bind(null,h,c),v)},useLayoutEffect:function(c,h){return Xh(4194308,4,c,h)},useInsertionEffect:function(c,h){return Xh(4,2,c,h)},useMemo:function(c,h){var v=Hs();return h=h===void 0?null:h,c=c(),v.memoizedState=[c,h],c},useReducer:function(c,h,v){var k=Hs();return h=v!==void 0?v(h):h,k.memoizedState=k.baseState=h,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:h},k.queue=c,c=c.dispatch=lI.bind(null,ln,c),[k.memoizedState,c]},useRef:function(c){var h=Hs();return c={current:c},h.memoizedState=c},useState:ZN,useDebugValue:Ag,useDeferredValue:function(c){return Hs().memoizedState=c},useTransition:function(){var c=ZN(!1),h=c[0];return c=oI.bind(null,c[1]),Hs().memoizedState=c,[h,c]},useMutableSource:function(){},useSyncExternalStore:function(c,h,v){var k=ln,P=Hs();if(nn){if(v===void 0)throw Error(r(407));v=v()}else{if(v=h(),Mn===null)throw Error(r(349));(so&30)!==0||VN(k,h,v)}P.memoizedState=v;var D={value:v,getSnapshot:h};return P.queue=D,t1(YN.bind(null,k,D,c),[c]),k.flags|=2048,Mu(9,QN.bind(null,k,D,v,h),void 0,null),v},useId:function(){var c=Hs(),h=Mn.identifierPrefix;if(nn){var v=oa,k=ia;v=(k&~(1<<32-ps(k)-1)).toString(32)+v,h=":"+h+"R"+v,v=Iu++,0<v&&(h+="H"+v.toString(32)),h+=":"}else v=iI++,h=":"+h+"r"+v.toString(32)+":";return c.memoizedState=h},unstable_isNewReconciler:!1},dI={readContext:Yr,useCallback:i1,useContext:Yr,useEffect:Rg,useImperativeHandle:a1,useInsertionEffect:n1,useLayoutEffect:r1,useMemo:o1,useReducer:Cg,useRef:e1,useState:function(){return Cg(Lu)},useDebugValue:Ag,useDeferredValue:function(c){var h=Jr();return l1(h,Tn.memoizedState,c)},useTransition:function(){var c=Cg(Lu)[0],h=Jr().memoizedState;return[c,h]},useMutableSource:WN,useSyncExternalStore:GN,useId:c1,unstable_isNewReconciler:!1},hI={readContext:Yr,useCallback:i1,useContext:Yr,useEffect:Rg,useImperativeHandle:a1,useInsertionEffect:n1,useLayoutEffect:r1,useMemo:o1,useReducer:Tg,useRef:e1,useState:function(){return Tg(Lu)},useDebugValue:Ag,useDeferredValue:function(c){var h=Jr();return Tn===null?h.memoizedState=c:l1(h,Tn.memoizedState,c)},useTransition:function(){var c=Tg(Lu)[0],h=Jr().memoizedState;return[c,h]},useMutableSource:WN,useSyncExternalStore:GN,useId:c1,unstable_isNewReconciler:!1};function ys(c,h){if(c&&c.defaultProps){h=H({},h),c=c.defaultProps;for(var v in c)h[v]===void 0&&(h[v]=c[v]);return h}return h}function Pg(c,h,v,k){h=c.memoizedState,v=v(k,h),v=v==null?h:H({},h,v),c.memoizedState=v,c.lanes===0&&(c.updateQueue.baseState=v)}var tf={isMounted:function(c){return(c=c._reactInternals)?Ji(c)===c:!1},enqueueSetState:function(c,h,v){c=c._reactInternals;var k=ar(),P=oi(c),D=ca(k,P);D.payload=h,v!=null&&(D.callback=v),h=ri(c,D,P),h!==null&&(ws(h,c,P,k),Gh(h,c,P))},enqueueReplaceState:function(c,h,v){c=c._reactInternals;var k=ar(),P=oi(c),D=ca(k,P);D.tag=1,D.payload=h,v!=null&&(D.callback=v),h=ri(c,D,P),h!==null&&(ws(h,c,P,k),Gh(h,c,P))},enqueueForceUpdate:function(c,h){c=c._reactInternals;var v=ar(),k=oi(c),P=ca(v,k);P.tag=2,h!=null&&(P.callback=h),h=ri(c,P,k),h!==null&&(ws(h,c,k,v),Gh(h,c,k))}};function f1(c,h,v,k,P,D,G){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(k,D,G):h.prototype&&h.prototype.isPureReactComponent?!_u(v,k)||!_u(P,D):!0}function m1(c,h,v){var k=!1,P=ei,D=h.contextType;return typeof D=="object"&&D!==null?D=Yr(D):(P=gr(h)?Zi:Gn.current,k=h.contextTypes,D=(k=k!=null)?bl(c,P):ei),h=new h(v,D),c.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=tf,c.stateNode=h,h._reactInternals=c,k&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=P,c.__reactInternalMemoizedMaskedChildContext=D),h}function p1(c,h,v,k){c=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(v,k),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(v,k),h.state!==c&&tf.enqueueReplaceState(h,h.state,null)}function Og(c,h,v,k){var P=c.stateNode;P.props=v,P.state=c.memoizedState,P.refs={},bg(c);var D=h.contextType;typeof D=="object"&&D!==null?P.context=Yr(D):(D=gr(h)?Zi:Gn.current,P.context=bl(c,D)),P.state=c.memoizedState,D=h.getDerivedStateFromProps,typeof D=="function"&&(Pg(c,h,D,v),P.state=c.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof P.getSnapshotBeforeUpdate=="function"||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(h=P.state,typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount(),h!==P.state&&tf.enqueueReplaceState(P,P.state,null),Vh(c,v,P,k),P.state=c.memoizedState),typeof P.componentDidMount=="function"&&(c.flags|=4194308)}function El(c,h){try{var v="",k=h;do v+=J(k),k=k.return;while(k);var P=v}catch(D){P=`
Error generating stack: `+D.message+`
`+D.stack}return{value:c,source:h,stack:P,digest:null}}function Ig(c,h,v){return{value:c,source:null,stack:v??null,digest:h??null}}function Lg(c,h){try{console.error(h.value)}catch(v){setTimeout(function(){throw v})}}var fI=typeof WeakMap=="function"?WeakMap:Map;function x1(c,h,v){v=ca(-1,v),v.tag=3,v.payload={element:null};var k=h.value;return v.callback=function(){cf||(cf=!0,Yg=k),Lg(c,h)},v}function g1(c,h,v){v=ca(-1,v),v.tag=3;var k=c.type.getDerivedStateFromError;if(typeof k=="function"){var P=h.value;v.payload=function(){return k(P)},v.callback=function(){Lg(c,h)}}var D=c.stateNode;return D!==null&&typeof D.componentDidCatch=="function"&&(v.callback=function(){Lg(c,h),typeof k!="function"&&(ai===null?ai=new Set([this]):ai.add(this));var G=h.stack;this.componentDidCatch(h.value,{componentStack:G!==null?G:""})}),v}function y1(c,h,v){var k=c.pingCache;if(k===null){k=c.pingCache=new fI;var P=new Set;k.set(h,P)}else P=k.get(h),P===void 0&&(P=new Set,k.set(h,P));P.has(v)||(P.add(v),c=EI.bind(null,c,h,v),h.then(c,c))}function b1(c){do{var h;if((h=c.tag===13)&&(h=c.memoizedState,h=h!==null?h.dehydrated!==null:!0),h)return c;c=c.return}while(c!==null);return null}function v1(c,h,v,k,P){return(c.mode&1)===0?(c===h?c.flags|=65536:(c.flags|=128,v.flags|=131072,v.flags&=-52805,v.tag===1&&(v.alternate===null?v.tag=17:(h=ca(-1,1),h.tag=2,ri(v,h,1))),v.lanes|=1),c):(c.flags|=65536,c.lanes=P,c)}var mI=j.ReactCurrentOwner,yr=!1;function sr(c,h,v,k){h.child=c===null?FN(h,null,v,k):jl(h,c.child,v,k)}function w1(c,h,v,k,P){v=v.render;var D=h.ref;return Sl(h,P),k=kg(c,h,v,k,D,P),v=Eg(),c!==null&&!yr?(h.updateQueue=c.updateQueue,h.flags&=-2053,c.lanes&=~P,ua(c,h,P)):(nn&&v&&cg(h),h.flags|=1,sr(c,h,k,P),h.child)}function _1(c,h,v,k,P){if(c===null){var D=v.type;return typeof D=="function"&&!r0(D)&&D.defaultProps===void 0&&v.compare===null&&v.defaultProps===void 0?(h.tag=15,h.type=D,j1(c,h,D,k,P)):(c=pf(v.type,null,k,h,h.mode,P),c.ref=h.ref,c.return=h,h.child=c)}if(D=c.child,(c.lanes&P)===0){var G=D.memoizedProps;if(v=v.compare,v=v!==null?v:_u,v(G,k)&&c.ref===h.ref)return ua(c,h,P)}return h.flags|=1,c=ci(D,k),c.ref=h.ref,c.return=h,h.child=c}function j1(c,h,v,k,P){if(c!==null){var D=c.memoizedProps;if(_u(D,k)&&c.ref===h.ref)if(yr=!1,h.pendingProps=k=D,(c.lanes&P)!==0)(c.flags&131072)!==0&&(yr=!0);else return h.lanes=c.lanes,ua(c,h,P)}return Mg(c,h,v,k,P)}function N1(c,h,v){var k=h.pendingProps,P=k.children,D=c!==null?c.memoizedState:null;if(k.mode==="hidden")if((h.mode&1)===0)h.memoizedState={baseLanes:0,cachePool:null,transitions:null},Wt(Tl,Dr),Dr|=v;else{if((v&1073741824)===0)return c=D!==null?D.baseLanes|v:v,h.lanes=h.childLanes=1073741824,h.memoizedState={baseLanes:c,cachePool:null,transitions:null},h.updateQueue=null,Wt(Tl,Dr),Dr|=c,null;h.memoizedState={baseLanes:0,cachePool:null,transitions:null},k=D!==null?D.baseLanes:v,Wt(Tl,Dr),Dr|=k}else D!==null?(k=D.baseLanes|v,h.memoizedState=null):k=v,Wt(Tl,Dr),Dr|=k;return sr(c,h,P,v),h.child}function S1(c,h){var v=h.ref;(c===null&&v!==null||c!==null&&c.ref!==v)&&(h.flags|=512,h.flags|=2097152)}function Mg(c,h,v,k,P){var D=gr(v)?Zi:Gn.current;return D=bl(h,D),Sl(h,P),v=kg(c,h,v,k,D,P),k=Eg(),c!==null&&!yr?(h.updateQueue=c.updateQueue,h.flags&=-2053,c.lanes&=~P,ua(c,h,P)):(nn&&k&&cg(h),h.flags|=1,sr(c,h,v,P),h.child)}function k1(c,h,v,k,P){if(gr(v)){var D=!0;qh(h)}else D=!1;if(Sl(h,P),h.stateNode===null)rf(c,h),m1(h,v,k),Og(h,v,k,P),k=!0;else if(c===null){var G=h.stateNode,Z=h.memoizedProps;G.props=Z;var ae=G.context,me=v.contextType;typeof me=="object"&&me!==null?me=Yr(me):(me=gr(v)?Zi:Gn.current,me=bl(h,me));var we=v.getDerivedStateFromProps,je=typeof we=="function"||typeof G.getSnapshotBeforeUpdate=="function";je||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(Z!==k||ae!==me)&&p1(h,G,k,me),ni=!1;var ve=h.memoizedState;G.state=ve,Vh(h,k,G,P),ae=h.memoizedState,Z!==k||ve!==ae||xr.current||ni?(typeof we=="function"&&(Pg(h,v,we,k),ae=h.memoizedState),(Z=ni||f1(h,v,Z,k,ve,ae,me))?(je||typeof G.UNSAFE_componentWillMount!="function"&&typeof G.componentWillMount!="function"||(typeof G.componentWillMount=="function"&&G.componentWillMount(),typeof G.UNSAFE_componentWillMount=="function"&&G.UNSAFE_componentWillMount()),typeof G.componentDidMount=="function"&&(h.flags|=4194308)):(typeof G.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=k,h.memoizedState=ae),G.props=k,G.state=ae,G.context=me,k=Z):(typeof G.componentDidMount=="function"&&(h.flags|=4194308),k=!1)}else{G=h.stateNode,BN(c,h),Z=h.memoizedProps,me=h.type===h.elementType?Z:ys(h.type,Z),G.props=me,je=h.pendingProps,ve=G.context,ae=v.contextType,typeof ae=="object"&&ae!==null?ae=Yr(ae):(ae=gr(v)?Zi:Gn.current,ae=bl(h,ae));var De=v.getDerivedStateFromProps;(we=typeof De=="function"||typeof G.getSnapshotBeforeUpdate=="function")||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(Z!==je||ve!==ae)&&p1(h,G,k,ae),ni=!1,ve=h.memoizedState,G.state=ve,Vh(h,k,G,P);var qe=h.memoizedState;Z!==je||ve!==qe||xr.current||ni?(typeof De=="function"&&(Pg(h,v,De,k),qe=h.memoizedState),(me=ni||f1(h,v,me,k,ve,qe,ae)||!1)?(we||typeof G.UNSAFE_componentWillUpdate!="function"&&typeof G.componentWillUpdate!="function"||(typeof G.componentWillUpdate=="function"&&G.componentWillUpdate(k,qe,ae),typeof G.UNSAFE_componentWillUpdate=="function"&&G.UNSAFE_componentWillUpdate(k,qe,ae)),typeof G.componentDidUpdate=="function"&&(h.flags|=4),typeof G.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof G.componentDidUpdate!="function"||Z===c.memoizedProps&&ve===c.memoizedState||(h.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||Z===c.memoizedProps&&ve===c.memoizedState||(h.flags|=1024),h.memoizedProps=k,h.memoizedState=qe),G.props=k,G.state=qe,G.context=ae,k=me):(typeof G.componentDidUpdate!="function"||Z===c.memoizedProps&&ve===c.memoizedState||(h.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||Z===c.memoizedProps&&ve===c.memoizedState||(h.flags|=1024),k=!1)}return Dg(c,h,v,k,D,P)}function Dg(c,h,v,k,P,D){S1(c,h);var G=(h.flags&128)!==0;if(!k&&!G)return P&&AN(h,v,!1),ua(c,h,D);k=h.stateNode,mI.current=h;var Z=G&&typeof v.getDerivedStateFromError!="function"?null:k.render();return h.flags|=1,c!==null&&G?(h.child=jl(h,c.child,null,D),h.child=jl(h,null,Z,D)):sr(c,h,Z,D),h.memoizedState=k.state,P&&AN(h,v,!0),h.child}function E1(c){var h=c.stateNode;h.pendingContext?TN(c,h.pendingContext,h.pendingContext!==h.context):h.context&&TN(c,h.context,!1),vg(c,h.containerInfo)}function C1(c,h,v,k,P){return _l(),fg(P),h.flags|=256,sr(c,h,v,k),h.child}var $g={dehydrated:null,treeContext:null,retryLane:0};function qg(c){return{baseLanes:c,cachePool:null,transitions:null}}function T1(c,h,v){var k=h.pendingProps,P=on.current,D=!1,G=(h.flags&128)!==0,Z;if((Z=G)||(Z=c!==null&&c.memoizedState===null?!1:(P&2)!==0),Z?(D=!0,h.flags&=-129):(c===null||c.memoizedState!==null)&&(P|=1),Wt(on,P&1),c===null)return hg(h),c=h.memoizedState,c!==null&&(c=c.dehydrated,c!==null)?((h.mode&1)===0?h.lanes=1:c.data==="$!"?h.lanes=8:h.lanes=1073741824,null):(G=k.children,c=k.fallback,D?(k=h.mode,D=h.child,G={mode:"hidden",children:G},(k&1)===0&&D!==null?(D.childLanes=0,D.pendingProps=G):D=xf(G,k,0,null),c=co(c,k,v,null),D.return=h,c.return=h,D.sibling=c,h.child=D,h.child.memoizedState=qg(v),h.memoizedState=$g,c):Fg(h,G));if(P=c.memoizedState,P!==null&&(Z=P.dehydrated,Z!==null))return pI(c,h,G,k,Z,P,v);if(D){D=k.fallback,G=h.mode,P=c.child,Z=P.sibling;var ae={mode:"hidden",children:k.children};return(G&1)===0&&h.child!==P?(k=h.child,k.childLanes=0,k.pendingProps=ae,h.deletions=null):(k=ci(P,ae),k.subtreeFlags=P.subtreeFlags&14680064),Z!==null?D=ci(Z,D):(D=co(D,G,v,null),D.flags|=2),D.return=h,k.return=h,k.sibling=D,h.child=k,k=D,D=h.child,G=c.child.memoizedState,G=G===null?qg(v):{baseLanes:G.baseLanes|v,cachePool:null,transitions:G.transitions},D.memoizedState=G,D.childLanes=c.childLanes&~v,h.memoizedState=$g,k}return D=c.child,c=D.sibling,k=ci(D,{mode:"visible",children:k.children}),(h.mode&1)===0&&(k.lanes=v),k.return=h,k.sibling=null,c!==null&&(v=h.deletions,v===null?(h.deletions=[c],h.flags|=16):v.push(c)),h.child=k,h.memoizedState=null,k}function Fg(c,h){return h=xf({mode:"visible",children:h},c.mode,0,null),h.return=c,c.child=h}function nf(c,h,v,k){return k!==null&&fg(k),jl(h,c.child,null,v),c=Fg(h,h.pendingProps.children),c.flags|=2,h.memoizedState=null,c}function pI(c,h,v,k,P,D,G){if(v)return h.flags&256?(h.flags&=-257,k=Ig(Error(r(422))),nf(c,h,G,k)):h.memoizedState!==null?(h.child=c.child,h.flags|=128,null):(D=k.fallback,P=h.mode,k=xf({mode:"visible",children:k.children},P,0,null),D=co(D,P,G,null),D.flags|=2,k.return=h,D.return=h,k.sibling=D,h.child=k,(h.mode&1)!==0&&jl(h,c.child,null,G),h.child.memoizedState=qg(G),h.memoizedState=$g,D);if((h.mode&1)===0)return nf(c,h,G,null);if(P.data==="$!"){if(k=P.nextSibling&&P.nextSibling.dataset,k)var Z=k.dgst;return k=Z,D=Error(r(419)),k=Ig(D,k,void 0),nf(c,h,G,k)}if(Z=(G&c.childLanes)!==0,yr||Z){if(k=Mn,k!==null){switch(G&-G){case 4:P=2;break;case 16:P=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:P=32;break;case 536870912:P=268435456;break;default:P=0}P=(P&(k.suspendedLanes|G))!==0?0:P,P!==0&&P!==D.retryLane&&(D.retryLane=P,la(c,P),ws(k,c,P,-1))}return n0(),k=Ig(Error(r(421))),nf(c,h,G,k)}return P.data==="$?"?(h.flags|=128,h.child=c.child,h=CI.bind(null,c),P._reactRetry=h,null):(c=D.treeContext,Mr=Xa(P.nextSibling),Lr=h,nn=!0,gs=null,c!==null&&(Vr[Qr++]=ia,Vr[Qr++]=oa,Vr[Qr++]=eo,ia=c.id,oa=c.overflow,eo=h),h=Fg(h,k.children),h.flags|=4096,h)}function R1(c,h,v){c.lanes|=h;var k=c.alternate;k!==null&&(k.lanes|=h),gg(c.return,h,v)}function Ug(c,h,v,k,P){var D=c.memoizedState;D===null?c.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:k,tail:v,tailMode:P}:(D.isBackwards=h,D.rendering=null,D.renderingStartTime=0,D.last=k,D.tail=v,D.tailMode=P)}function A1(c,h,v){var k=h.pendingProps,P=k.revealOrder,D=k.tail;if(sr(c,h,k.children,v),k=on.current,(k&2)!==0)k=k&1|2,h.flags|=128;else{if(c!==null&&(c.flags&128)!==0)e:for(c=h.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&R1(c,v,h);else if(c.tag===19)R1(c,v,h);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===h)break e;for(;c.sibling===null;){if(c.return===null||c.return===h)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}k&=1}if(Wt(on,k),(h.mode&1)===0)h.memoizedState=null;else switch(P){case"forwards":for(v=h.child,P=null;v!==null;)c=v.alternate,c!==null&&Qh(c)===null&&(P=v),v=v.sibling;v=P,v===null?(P=h.child,h.child=null):(P=v.sibling,v.sibling=null),Ug(h,!1,P,v,D);break;case"backwards":for(v=null,P=h.child,h.child=null;P!==null;){if(c=P.alternate,c!==null&&Qh(c)===null){h.child=P;break}c=P.sibling,P.sibling=v,v=P,P=c}Ug(h,!0,v,null,D);break;case"together":Ug(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function rf(c,h){(h.mode&1)===0&&c!==null&&(c.alternate=null,h.alternate=null,h.flags|=2)}function ua(c,h,v){if(c!==null&&(h.dependencies=c.dependencies),ao|=h.lanes,(v&h.childLanes)===0)return null;if(c!==null&&h.child!==c.child)throw Error(r(153));if(h.child!==null){for(c=h.child,v=ci(c,c.pendingProps),h.child=v,v.return=h;c.sibling!==null;)c=c.sibling,v=v.sibling=ci(c,c.pendingProps),v.return=h;v.sibling=null}return h.child}function xI(c,h,v){switch(h.tag){case 3:E1(h),_l();break;case 5:zN(h);break;case 1:gr(h.type)&&qh(h);break;case 4:vg(h,h.stateNode.containerInfo);break;case 10:var k=h.type._context,P=h.memoizedProps.value;Wt(zh,k._currentValue),k._currentValue=P;break;case 13:if(k=h.memoizedState,k!==null)return k.dehydrated!==null?(Wt(on,on.current&1),h.flags|=128,null):(v&h.child.childLanes)!==0?T1(c,h,v):(Wt(on,on.current&1),c=ua(c,h,v),c!==null?c.sibling:null);Wt(on,on.current&1);break;case 19:if(k=(v&h.childLanes)!==0,(c.flags&128)!==0){if(k)return A1(c,h,v);h.flags|=128}if(P=h.memoizedState,P!==null&&(P.rendering=null,P.tail=null,P.lastEffect=null),Wt(on,on.current),k)break;return null;case 22:case 23:return h.lanes=0,N1(c,h,v)}return ua(c,h,v)}var P1,Bg,O1,I1;P1=function(c,h){for(var v=h.child;v!==null;){if(v.tag===5||v.tag===6)c.appendChild(v.stateNode);else if(v.tag!==4&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===h)break;for(;v.sibling===null;){if(v.return===null||v.return===h)return;v=v.return}v.sibling.return=v.return,v=v.sibling}},Bg=function(){},O1=function(c,h,v,k){var P=c.memoizedProps;if(P!==k){c=h.stateNode,ro(Bs.current);var D=null;switch(v){case"input":P=Ne(c,P),k=Ne(c,k),D=[];break;case"select":P=H({},P,{value:void 0}),k=H({},k,{value:void 0}),D=[];break;case"textarea":P=pe(c,P),k=pe(c,k),D=[];break;default:typeof P.onClick!="function"&&typeof k.onClick=="function"&&(c.onclick=Mh)}_x(v,k);var G;v=null;for(me in P)if(!k.hasOwnProperty(me)&&P.hasOwnProperty(me)&&P[me]!=null)if(me==="style"){var Z=P[me];for(G in Z)Z.hasOwnProperty(G)&&(v||(v={}),v[G]="")}else me!=="dangerouslySetInnerHTML"&&me!=="children"&&me!=="suppressContentEditableWarning"&&me!=="suppressHydrationWarning"&&me!=="autoFocus"&&(a.hasOwnProperty(me)?D||(D=[]):(D=D||[]).push(me,null));for(me in k){var ae=k[me];if(Z=P!=null?P[me]:void 0,k.hasOwnProperty(me)&&ae!==Z&&(ae!=null||Z!=null))if(me==="style")if(Z){for(G in Z)!Z.hasOwnProperty(G)||ae&&ae.hasOwnProperty(G)||(v||(v={}),v[G]="");for(G in ae)ae.hasOwnProperty(G)&&Z[G]!==ae[G]&&(v||(v={}),v[G]=ae[G])}else v||(D||(D=[]),D.push(me,v)),v=ae;else me==="dangerouslySetInnerHTML"?(ae=ae?ae.__html:void 0,Z=Z?Z.__html:void 0,ae!=null&&Z!==ae&&(D=D||[]).push(me,ae)):me==="children"?typeof ae!="string"&&typeof ae!="number"||(D=D||[]).push(me,""+ae):me!=="suppressContentEditableWarning"&&me!=="suppressHydrationWarning"&&(a.hasOwnProperty(me)?(ae!=null&&me==="onScroll"&&Xt("scroll",c),D||Z===ae||(D=[])):(D=D||[]).push(me,ae))}v&&(D=D||[]).push("style",v);var me=D;(h.updateQueue=me)&&(h.flags|=4)}},I1=function(c,h,v,k){v!==k&&(h.flags|=4)};function Du(c,h){if(!nn)switch(c.tailMode){case"hidden":h=c.tail;for(var v=null;h!==null;)h.alternate!==null&&(v=h),h=h.sibling;v===null?c.tail=null:v.sibling=null;break;case"collapsed":v=c.tail;for(var k=null;v!==null;)v.alternate!==null&&(k=v),v=v.sibling;k===null?h||c.tail===null?c.tail=null:c.tail.sibling=null:k.sibling=null}}function Qn(c){var h=c.alternate!==null&&c.alternate.child===c.child,v=0,k=0;if(h)for(var P=c.child;P!==null;)v|=P.lanes|P.childLanes,k|=P.subtreeFlags&14680064,k|=P.flags&14680064,P.return=c,P=P.sibling;else for(P=c.child;P!==null;)v|=P.lanes|P.childLanes,k|=P.subtreeFlags,k|=P.flags,P.return=c,P=P.sibling;return c.subtreeFlags|=k,c.childLanes=v,h}function gI(c,h,v){var k=h.pendingProps;switch(ug(h),h.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qn(h),null;case 1:return gr(h.type)&&$h(),Qn(h),null;case 3:return k=h.stateNode,kl(),Zt(xr),Zt(Gn),jg(),k.pendingContext&&(k.context=k.pendingContext,k.pendingContext=null),(c===null||c.child===null)&&(Hh(h)?h.flags|=4:c===null||c.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,gs!==null&&(Zg(gs),gs=null))),Bg(c,h),Qn(h),null;case 5:wg(h);var P=ro(Pu.current);if(v=h.type,c!==null&&h.stateNode!=null)O1(c,h,v,k,P),c.ref!==h.ref&&(h.flags|=512,h.flags|=2097152);else{if(!k){if(h.stateNode===null)throw Error(r(166));return Qn(h),null}if(c=ro(Bs.current),Hh(h)){k=h.stateNode,v=h.type;var D=h.memoizedProps;switch(k[Us]=h,k[Eu]=D,c=(h.mode&1)!==0,v){case"dialog":Xt("cancel",k),Xt("close",k);break;case"iframe":case"object":case"embed":Xt("load",k);break;case"video":case"audio":for(P=0;P<Nu.length;P++)Xt(Nu[P],k);break;case"source":Xt("error",k);break;case"img":case"image":case"link":Xt("error",k),Xt("load",k);break;case"details":Xt("toggle",k);break;case"input":Be(k,D),Xt("invalid",k);break;case"select":k._wrapperState={wasMultiple:!!D.multiple},Xt("invalid",k);break;case"textarea":Ge(k,D),Xt("invalid",k)}_x(v,D),P=null;for(var G in D)if(D.hasOwnProperty(G)){var Z=D[G];G==="children"?typeof Z=="string"?k.textContent!==Z&&(D.suppressHydrationWarning!==!0&&Lh(k.textContent,Z,c),P=["children",Z]):typeof Z=="number"&&k.textContent!==""+Z&&(D.suppressHydrationWarning!==!0&&Lh(k.textContent,Z,c),P=["children",""+Z]):a.hasOwnProperty(G)&&Z!=null&&G==="onScroll"&&Xt("scroll",k)}switch(v){case"input":Ce(k),fe(k,D,!0);break;case"textarea":Ce(k),Me(k);break;case"select":case"option":break;default:typeof D.onClick=="function"&&(k.onclick=Mh)}k=P,h.updateQueue=k,k!==null&&(h.flags|=4)}else{G=P.nodeType===9?P:P.ownerDocument,c==="http://www.w3.org/1999/xhtml"&&(c=Cn(v)),c==="http://www.w3.org/1999/xhtml"?v==="script"?(c=G.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild)):typeof k.is=="string"?c=G.createElement(v,{is:k.is}):(c=G.createElement(v),v==="select"&&(G=c,k.multiple?G.multiple=!0:k.size&&(G.size=k.size))):c=G.createElementNS(c,v),c[Us]=h,c[Eu]=k,P1(c,h,!1,!1),h.stateNode=c;e:{switch(G=jx(v,k),v){case"dialog":Xt("cancel",c),Xt("close",c),P=k;break;case"iframe":case"object":case"embed":Xt("load",c),P=k;break;case"video":case"audio":for(P=0;P<Nu.length;P++)Xt(Nu[P],c);P=k;break;case"source":Xt("error",c),P=k;break;case"img":case"image":case"link":Xt("error",c),Xt("load",c),P=k;break;case"details":Xt("toggle",c),P=k;break;case"input":Be(c,k),P=Ne(c,k),Xt("invalid",c);break;case"option":P=k;break;case"select":c._wrapperState={wasMultiple:!!k.multiple},P=H({},k,{value:void 0}),Xt("invalid",c);break;case"textarea":Ge(c,k),P=pe(c,k),Xt("invalid",c);break;default:P=k}_x(v,P),Z=P;for(D in Z)if(Z.hasOwnProperty(D)){var ae=Z[D];D==="style"?jj(c,ae):D==="dangerouslySetInnerHTML"?(ae=ae?ae.__html:void 0,ae!=null&&mh(c,ae)):D==="children"?typeof ae=="string"?(v!=="textarea"||ae!=="")&&zt(c,ae):typeof ae=="number"&&zt(c,""+ae):D!=="suppressContentEditableWarning"&&D!=="suppressHydrationWarning"&&D!=="autoFocus"&&(a.hasOwnProperty(D)?ae!=null&&D==="onScroll"&&Xt("scroll",c):ae!=null&&S(c,D,ae,G))}switch(v){case"input":Ce(c),fe(c,k,!1);break;case"textarea":Ce(c),Me(c);break;case"option":k.value!=null&&c.setAttribute("value",""+te(k.value));break;case"select":c.multiple=!!k.multiple,D=k.value,D!=null?Se(c,!!k.multiple,D,!1):k.defaultValue!=null&&Se(c,!!k.multiple,k.defaultValue,!0);break;default:typeof P.onClick=="function"&&(c.onclick=Mh)}switch(v){case"button":case"input":case"select":case"textarea":k=!!k.autoFocus;break e;case"img":k=!0;break e;default:k=!1}}k&&(h.flags|=4)}h.ref!==null&&(h.flags|=512,h.flags|=2097152)}return Qn(h),null;case 6:if(c&&h.stateNode!=null)I1(c,h,c.memoizedProps,k);else{if(typeof k!="string"&&h.stateNode===null)throw Error(r(166));if(v=ro(Pu.current),ro(Bs.current),Hh(h)){if(k=h.stateNode,v=h.memoizedProps,k[Us]=h,(D=k.nodeValue!==v)&&(c=Lr,c!==null))switch(c.tag){case 3:Lh(k.nodeValue,v,(c.mode&1)!==0);break;case 5:c.memoizedProps.suppressHydrationWarning!==!0&&Lh(k.nodeValue,v,(c.mode&1)!==0)}D&&(h.flags|=4)}else k=(v.nodeType===9?v:v.ownerDocument).createTextNode(k),k[Us]=h,h.stateNode=k}return Qn(h),null;case 13:if(Zt(on),k=h.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(nn&&Mr!==null&&(h.mode&1)!==0&&(h.flags&128)===0)DN(),_l(),h.flags|=98560,D=!1;else if(D=Hh(h),k!==null&&k.dehydrated!==null){if(c===null){if(!D)throw Error(r(318));if(D=h.memoizedState,D=D!==null?D.dehydrated:null,!D)throw Error(r(317));D[Us]=h}else _l(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;Qn(h),D=!1}else gs!==null&&(Zg(gs),gs=null),D=!0;if(!D)return h.flags&65536?h:null}return(h.flags&128)!==0?(h.lanes=v,h):(k=k!==null,k!==(c!==null&&c.memoizedState!==null)&&k&&(h.child.flags|=8192,(h.mode&1)!==0&&(c===null||(on.current&1)!==0?Rn===0&&(Rn=3):n0())),h.updateQueue!==null&&(h.flags|=4),Qn(h),null);case 4:return kl(),Bg(c,h),c===null&&Su(h.stateNode.containerInfo),Qn(h),null;case 10:return xg(h.type._context),Qn(h),null;case 17:return gr(h.type)&&$h(),Qn(h),null;case 19:if(Zt(on),D=h.memoizedState,D===null)return Qn(h),null;if(k=(h.flags&128)!==0,G=D.rendering,G===null)if(k)Du(D,!1);else{if(Rn!==0||c!==null&&(c.flags&128)!==0)for(c=h.child;c!==null;){if(G=Qh(c),G!==null){for(h.flags|=128,Du(D,!1),k=G.updateQueue,k!==null&&(h.updateQueue=k,h.flags|=4),h.subtreeFlags=0,k=v,v=h.child;v!==null;)D=v,c=k,D.flags&=14680066,G=D.alternate,G===null?(D.childLanes=0,D.lanes=c,D.child=null,D.subtreeFlags=0,D.memoizedProps=null,D.memoizedState=null,D.updateQueue=null,D.dependencies=null,D.stateNode=null):(D.childLanes=G.childLanes,D.lanes=G.lanes,D.child=G.child,D.subtreeFlags=0,D.deletions=null,D.memoizedProps=G.memoizedProps,D.memoizedState=G.memoizedState,D.updateQueue=G.updateQueue,D.type=G.type,c=G.dependencies,D.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),v=v.sibling;return Wt(on,on.current&1|2),h.child}c=c.sibling}D.tail!==null&&bn()>Rl&&(h.flags|=128,k=!0,Du(D,!1),h.lanes=4194304)}else{if(!k)if(c=Qh(G),c!==null){if(h.flags|=128,k=!0,v=c.updateQueue,v!==null&&(h.updateQueue=v,h.flags|=4),Du(D,!0),D.tail===null&&D.tailMode==="hidden"&&!G.alternate&&!nn)return Qn(h),null}else 2*bn()-D.renderingStartTime>Rl&&v!==1073741824&&(h.flags|=128,k=!0,Du(D,!1),h.lanes=4194304);D.isBackwards?(G.sibling=h.child,h.child=G):(v=D.last,v!==null?v.sibling=G:h.child=G,D.last=G)}return D.tail!==null?(h=D.tail,D.rendering=h,D.tail=h.sibling,D.renderingStartTime=bn(),h.sibling=null,v=on.current,Wt(on,k?v&1|2:v&1),h):(Qn(h),null);case 22:case 23:return t0(),k=h.memoizedState!==null,c!==null&&c.memoizedState!==null!==k&&(h.flags|=8192),k&&(h.mode&1)!==0?(Dr&1073741824)!==0&&(Qn(h),h.subtreeFlags&6&&(h.flags|=8192)):Qn(h),null;case 24:return null;case 25:return null}throw Error(r(156,h.tag))}function yI(c,h){switch(ug(h),h.tag){case 1:return gr(h.type)&&$h(),c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 3:return kl(),Zt(xr),Zt(Gn),jg(),c=h.flags,(c&65536)!==0&&(c&128)===0?(h.flags=c&-65537|128,h):null;case 5:return wg(h),null;case 13:if(Zt(on),c=h.memoizedState,c!==null&&c.dehydrated!==null){if(h.alternate===null)throw Error(r(340));_l()}return c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 19:return Zt(on),null;case 4:return kl(),null;case 10:return xg(h.type._context),null;case 22:case 23:return t0(),null;case 24:return null;default:return null}}var sf=!1,Yn=!1,bI=typeof WeakSet=="function"?WeakSet:Set,$e=null;function Cl(c,h){var v=c.ref;if(v!==null)if(typeof v=="function")try{v(null)}catch(k){fn(c,h,k)}else v.current=null}function Hg(c,h,v){try{v()}catch(k){fn(c,h,k)}}var L1=!1;function vI(c,h){if(tg=Nh,c=fN(),Gx(c)){if("selectionStart"in c)var v={start:c.selectionStart,end:c.selectionEnd};else e:{v=(v=c.ownerDocument)&&v.defaultView||window;var k=v.getSelection&&v.getSelection();if(k&&k.rangeCount!==0){v=k.anchorNode;var P=k.anchorOffset,D=k.focusNode;k=k.focusOffset;try{v.nodeType,D.nodeType}catch{v=null;break e}var G=0,Z=-1,ae=-1,me=0,we=0,je=c,ve=null;t:for(;;){for(var De;je!==v||P!==0&&je.nodeType!==3||(Z=G+P),je!==D||k!==0&&je.nodeType!==3||(ae=G+k),je.nodeType===3&&(G+=je.nodeValue.length),(De=je.firstChild)!==null;)ve=je,je=De;for(;;){if(je===c)break t;if(ve===v&&++me===P&&(Z=G),ve===D&&++we===k&&(ae=G),(De=je.nextSibling)!==null)break;je=ve,ve=je.parentNode}je=De}v=Z===-1||ae===-1?null:{start:Z,end:ae}}else v=null}v=v||{start:0,end:0}}else v=null;for(ng={focusedElem:c,selectionRange:v},Nh=!1,$e=h;$e!==null;)if(h=$e,c=h.child,(h.subtreeFlags&1028)!==0&&c!==null)c.return=h,$e=c;else for(;$e!==null;){h=$e;try{var qe=h.alternate;if((h.flags&1024)!==0)switch(h.tag){case 0:case 11:case 15:break;case 1:if(qe!==null){var Ue=qe.memoizedProps,vn=qe.memoizedState,ue=h.stateNode,le=ue.getSnapshotBeforeUpdate(h.elementType===h.type?Ue:ys(h.type,Ue),vn);ue.__reactInternalSnapshotBeforeUpdate=le}break;case 3:var de=h.stateNode.containerInfo;de.nodeType===1?de.textContent="":de.nodeType===9&&de.documentElement&&de.removeChild(de.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(Ee){fn(h,h.return,Ee)}if(c=h.sibling,c!==null){c.return=h.return,$e=c;break}$e=h.return}return qe=L1,L1=!1,qe}function $u(c,h,v){var k=h.updateQueue;if(k=k!==null?k.lastEffect:null,k!==null){var P=k=k.next;do{if((P.tag&c)===c){var D=P.destroy;P.destroy=void 0,D!==void 0&&Hg(h,v,D)}P=P.next}while(P!==k)}}function af(c,h){if(h=h.updateQueue,h=h!==null?h.lastEffect:null,h!==null){var v=h=h.next;do{if((v.tag&c)===c){var k=v.create;v.destroy=k()}v=v.next}while(v!==h)}}function Kg(c){var h=c.ref;if(h!==null){var v=c.stateNode;switch(c.tag){case 5:c=v;break;default:c=v}typeof h=="function"?h(c):h.current=c}}function M1(c){var h=c.alternate;h!==null&&(c.alternate=null,M1(h)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(h=c.stateNode,h!==null&&(delete h[Us],delete h[Eu],delete h[ig],delete h[nI],delete h[rI])),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function D1(c){return c.tag===5||c.tag===3||c.tag===4}function $1(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||D1(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function zg(c,h,v){var k=c.tag;if(k===5||k===6)c=c.stateNode,h?v.nodeType===8?v.parentNode.insertBefore(c,h):v.insertBefore(c,h):(v.nodeType===8?(h=v.parentNode,h.insertBefore(c,v)):(h=v,h.appendChild(c)),v=v._reactRootContainer,v!=null||h.onclick!==null||(h.onclick=Mh));else if(k!==4&&(c=c.child,c!==null))for(zg(c,h,v),c=c.sibling;c!==null;)zg(c,h,v),c=c.sibling}function Wg(c,h,v){var k=c.tag;if(k===5||k===6)c=c.stateNode,h?v.insertBefore(c,h):v.appendChild(c);else if(k!==4&&(c=c.child,c!==null))for(Wg(c,h,v),c=c.sibling;c!==null;)Wg(c,h,v),c=c.sibling}var qn=null,bs=!1;function si(c,h,v){for(v=v.child;v!==null;)q1(c,h,v),v=v.sibling}function q1(c,h,v){if(Fs&&typeof Fs.onCommitFiberUnmount=="function")try{Fs.onCommitFiberUnmount(yh,v)}catch{}switch(v.tag){case 5:Yn||Cl(v,h);case 6:var k=qn,P=bs;qn=null,si(c,h,v),qn=k,bs=P,qn!==null&&(bs?(c=qn,v=v.stateNode,c.nodeType===8?c.parentNode.removeChild(v):c.removeChild(v)):qn.removeChild(v.stateNode));break;case 18:qn!==null&&(bs?(c=qn,v=v.stateNode,c.nodeType===8?ag(c.parentNode,v):c.nodeType===1&&ag(c,v),xu(c)):ag(qn,v.stateNode));break;case 4:k=qn,P=bs,qn=v.stateNode.containerInfo,bs=!0,si(c,h,v),qn=k,bs=P;break;case 0:case 11:case 14:case 15:if(!Yn&&(k=v.updateQueue,k!==null&&(k=k.lastEffect,k!==null))){P=k=k.next;do{var D=P,G=D.destroy;D=D.tag,G!==void 0&&((D&2)!==0||(D&4)!==0)&&Hg(v,h,G),P=P.next}while(P!==k)}si(c,h,v);break;case 1:if(!Yn&&(Cl(v,h),k=v.stateNode,typeof k.componentWillUnmount=="function"))try{k.props=v.memoizedProps,k.state=v.memoizedState,k.componentWillUnmount()}catch(Z){fn(v,h,Z)}si(c,h,v);break;case 21:si(c,h,v);break;case 22:v.mode&1?(Yn=(k=Yn)||v.memoizedState!==null,si(c,h,v),Yn=k):si(c,h,v);break;default:si(c,h,v)}}function F1(c){var h=c.updateQueue;if(h!==null){c.updateQueue=null;var v=c.stateNode;v===null&&(v=c.stateNode=new bI),h.forEach(function(k){var P=TI.bind(null,c,k);v.has(k)||(v.add(k),k.then(P,P))})}}function vs(c,h){var v=h.deletions;if(v!==null)for(var k=0;k<v.length;k++){var P=v[k];try{var D=c,G=h,Z=G;e:for(;Z!==null;){switch(Z.tag){case 5:qn=Z.stateNode,bs=!1;break e;case 3:qn=Z.stateNode.containerInfo,bs=!0;break e;case 4:qn=Z.stateNode.containerInfo,bs=!0;break e}Z=Z.return}if(qn===null)throw Error(r(160));q1(D,G,P),qn=null,bs=!1;var ae=P.alternate;ae!==null&&(ae.return=null),P.return=null}catch(me){fn(P,h,me)}}if(h.subtreeFlags&12854)for(h=h.child;h!==null;)U1(h,c),h=h.sibling}function U1(c,h){var v=c.alternate,k=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:if(vs(h,c),Ks(c),k&4){try{$u(3,c,c.return),af(3,c)}catch(Ue){fn(c,c.return,Ue)}try{$u(5,c,c.return)}catch(Ue){fn(c,c.return,Ue)}}break;case 1:vs(h,c),Ks(c),k&512&&v!==null&&Cl(v,v.return);break;case 5:if(vs(h,c),Ks(c),k&512&&v!==null&&Cl(v,v.return),c.flags&32){var P=c.stateNode;try{zt(P,"")}catch(Ue){fn(c,c.return,Ue)}}if(k&4&&(P=c.stateNode,P!=null)){var D=c.memoizedProps,G=v!==null?v.memoizedProps:D,Z=c.type,ae=c.updateQueue;if(c.updateQueue=null,ae!==null)try{Z==="input"&&D.type==="radio"&&D.name!=null&&St(P,D),jx(Z,G);var me=jx(Z,D);for(G=0;G<ae.length;G+=2){var we=ae[G],je=ae[G+1];we==="style"?jj(P,je):we==="dangerouslySetInnerHTML"?mh(P,je):we==="children"?zt(P,je):S(P,we,je,me)}switch(Z){case"input":ut(P,D);break;case"textarea":Qe(P,D);break;case"select":var ve=P._wrapperState.wasMultiple;P._wrapperState.wasMultiple=!!D.multiple;var De=D.value;De!=null?Se(P,!!D.multiple,De,!1):ve!==!!D.multiple&&(D.defaultValue!=null?Se(P,!!D.multiple,D.defaultValue,!0):Se(P,!!D.multiple,D.multiple?[]:"",!1))}P[Eu]=D}catch(Ue){fn(c,c.return,Ue)}}break;case 6:if(vs(h,c),Ks(c),k&4){if(c.stateNode===null)throw Error(r(162));P=c.stateNode,D=c.memoizedProps;try{P.nodeValue=D}catch(Ue){fn(c,c.return,Ue)}}break;case 3:if(vs(h,c),Ks(c),k&4&&v!==null&&v.memoizedState.isDehydrated)try{xu(h.containerInfo)}catch(Ue){fn(c,c.return,Ue)}break;case 4:vs(h,c),Ks(c);break;case 13:vs(h,c),Ks(c),P=c.child,P.flags&8192&&(D=P.memoizedState!==null,P.stateNode.isHidden=D,!D||P.alternate!==null&&P.alternate.memoizedState!==null||(Qg=bn())),k&4&&F1(c);break;case 22:if(we=v!==null&&v.memoizedState!==null,c.mode&1?(Yn=(me=Yn)||we,vs(h,c),Yn=me):vs(h,c),Ks(c),k&8192){if(me=c.memoizedState!==null,(c.stateNode.isHidden=me)&&!we&&(c.mode&1)!==0)for($e=c,we=c.child;we!==null;){for(je=$e=we;$e!==null;){switch(ve=$e,De=ve.child,ve.tag){case 0:case 11:case 14:case 15:$u(4,ve,ve.return);break;case 1:Cl(ve,ve.return);var qe=ve.stateNode;if(typeof qe.componentWillUnmount=="function"){k=ve,v=ve.return;try{h=k,qe.props=h.memoizedProps,qe.state=h.memoizedState,qe.componentWillUnmount()}catch(Ue){fn(k,v,Ue)}}break;case 5:Cl(ve,ve.return);break;case 22:if(ve.memoizedState!==null){K1(je);continue}}De!==null?(De.return=ve,$e=De):K1(je)}we=we.sibling}e:for(we=null,je=c;;){if(je.tag===5){if(we===null){we=je;try{P=je.stateNode,me?(D=P.style,typeof D.setProperty=="function"?D.setProperty("display","none","important"):D.display="none"):(Z=je.stateNode,ae=je.memoizedProps.style,G=ae!=null&&ae.hasOwnProperty("display")?ae.display:null,Z.style.display=_j("display",G))}catch(Ue){fn(c,c.return,Ue)}}}else if(je.tag===6){if(we===null)try{je.stateNode.nodeValue=me?"":je.memoizedProps}catch(Ue){fn(c,c.return,Ue)}}else if((je.tag!==22&&je.tag!==23||je.memoizedState===null||je===c)&&je.child!==null){je.child.return=je,je=je.child;continue}if(je===c)break e;for(;je.sibling===null;){if(je.return===null||je.return===c)break e;we===je&&(we=null),je=je.return}we===je&&(we=null),je.sibling.return=je.return,je=je.sibling}}break;case 19:vs(h,c),Ks(c),k&4&&F1(c);break;case 21:break;default:vs(h,c),Ks(c)}}function Ks(c){var h=c.flags;if(h&2){try{e:{for(var v=c.return;v!==null;){if(D1(v)){var k=v;break e}v=v.return}throw Error(r(160))}switch(k.tag){case 5:var P=k.stateNode;k.flags&32&&(zt(P,""),k.flags&=-33);var D=$1(c);Wg(c,D,P);break;case 3:case 4:var G=k.stateNode.containerInfo,Z=$1(c);zg(c,Z,G);break;default:throw Error(r(161))}}catch(ae){fn(c,c.return,ae)}c.flags&=-3}h&4096&&(c.flags&=-4097)}function wI(c,h,v){$e=c,B1(c)}function B1(c,h,v){for(var k=(c.mode&1)!==0;$e!==null;){var P=$e,D=P.child;if(P.tag===22&&k){var G=P.memoizedState!==null||sf;if(!G){var Z=P.alternate,ae=Z!==null&&Z.memoizedState!==null||Yn;Z=sf;var me=Yn;if(sf=G,(Yn=ae)&&!me)for($e=P;$e!==null;)G=$e,ae=G.child,G.tag===22&&G.memoizedState!==null?z1(P):ae!==null?(ae.return=G,$e=ae):z1(P);for(;D!==null;)$e=D,B1(D),D=D.sibling;$e=P,sf=Z,Yn=me}H1(c)}else(P.subtreeFlags&8772)!==0&&D!==null?(D.return=P,$e=D):H1(c)}}function H1(c){for(;$e!==null;){var h=$e;if((h.flags&8772)!==0){var v=h.alternate;try{if((h.flags&8772)!==0)switch(h.tag){case 0:case 11:case 15:Yn||af(5,h);break;case 1:var k=h.stateNode;if(h.flags&4&&!Yn)if(v===null)k.componentDidMount();else{var P=h.elementType===h.type?v.memoizedProps:ys(h.type,v.memoizedProps);k.componentDidUpdate(P,v.memoizedState,k.__reactInternalSnapshotBeforeUpdate)}var D=h.updateQueue;D!==null&&KN(h,D,k);break;case 3:var G=h.updateQueue;if(G!==null){if(v=null,h.child!==null)switch(h.child.tag){case 5:v=h.child.stateNode;break;case 1:v=h.child.stateNode}KN(h,G,v)}break;case 5:var Z=h.stateNode;if(v===null&&h.flags&4){v=Z;var ae=h.memoizedProps;switch(h.type){case"button":case"input":case"select":case"textarea":ae.autoFocus&&v.focus();break;case"img":ae.src&&(v.src=ae.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(h.memoizedState===null){var me=h.alternate;if(me!==null){var we=me.memoizedState;if(we!==null){var je=we.dehydrated;je!==null&&xu(je)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}Yn||h.flags&512&&Kg(h)}catch(ve){fn(h,h.return,ve)}}if(h===c){$e=null;break}if(v=h.sibling,v!==null){v.return=h.return,$e=v;break}$e=h.return}}function K1(c){for(;$e!==null;){var h=$e;if(h===c){$e=null;break}var v=h.sibling;if(v!==null){v.return=h.return,$e=v;break}$e=h.return}}function z1(c){for(;$e!==null;){var h=$e;try{switch(h.tag){case 0:case 11:case 15:var v=h.return;try{af(4,h)}catch(ae){fn(h,v,ae)}break;case 1:var k=h.stateNode;if(typeof k.componentDidMount=="function"){var P=h.return;try{k.componentDidMount()}catch(ae){fn(h,P,ae)}}var D=h.return;try{Kg(h)}catch(ae){fn(h,D,ae)}break;case 5:var G=h.return;try{Kg(h)}catch(ae){fn(h,G,ae)}}}catch(ae){fn(h,h.return,ae)}if(h===c){$e=null;break}var Z=h.sibling;if(Z!==null){Z.return=h.return,$e=Z;break}$e=h.return}}var _I=Math.ceil,of=j.ReactCurrentDispatcher,Gg=j.ReactCurrentOwner,Xr=j.ReactCurrentBatchConfig,_t=0,Mn=null,_n=null,Fn=0,Dr=0,Tl=Za(0),Rn=0,qu=null,ao=0,lf=0,Vg=0,Fu=null,br=null,Qg=0,Rl=1/0,da=null,cf=!1,Yg=null,ai=null,uf=!1,ii=null,df=0,Uu=0,Jg=null,hf=-1,ff=0;function ar(){return(_t&6)!==0?bn():hf!==-1?hf:hf=bn()}function oi(c){return(c.mode&1)===0?1:(_t&2)!==0&&Fn!==0?Fn&-Fn:aI.transition!==null?(ff===0&&(ff=$j()),ff):(c=Lt,c!==0||(c=window.event,c=c===void 0?16:Gj(c.type)),c)}function ws(c,h,v,k){if(50<Uu)throw Uu=0,Jg=null,Error(r(185));du(c,v,k),((_t&2)===0||c!==Mn)&&(c===Mn&&((_t&2)===0&&(lf|=v),Rn===4&&li(c,Fn)),vr(c,k),v===1&&_t===0&&(h.mode&1)===0&&(Rl=bn()+500,Fh&&ti()))}function vr(c,h){var v=c.callbackNode;aO(c,h);var k=wh(c,c===Mn?Fn:0);if(k===0)v!==null&&Lj(v),c.callbackNode=null,c.callbackPriority=0;else if(h=k&-k,c.callbackPriority!==h){if(v!=null&&Lj(v),h===1)c.tag===0?sI(G1.bind(null,c)):PN(G1.bind(null,c)),eI(function(){(_t&6)===0&&ti()}),v=null;else{switch(qj(k)){case 1:v=Rx;break;case 4:v=Mj;break;case 16:v=gh;break;case 536870912:v=Dj;break;default:v=gh}v=tS(v,W1.bind(null,c))}c.callbackPriority=h,c.callbackNode=v}}function W1(c,h){if(hf=-1,ff=0,(_t&6)!==0)throw Error(r(327));var v=c.callbackNode;if(Al()&&c.callbackNode!==v)return null;var k=wh(c,c===Mn?Fn:0);if(k===0)return null;if((k&30)!==0||(k&c.expiredLanes)!==0||h)h=mf(c,k);else{h=k;var P=_t;_t|=2;var D=Q1();(Mn!==c||Fn!==h)&&(da=null,Rl=bn()+500,oo(c,h));do try{SI();break}catch(Z){V1(c,Z)}while(!0);pg(),of.current=D,_t=P,_n!==null?h=0:(Mn=null,Fn=0,h=Rn)}if(h!==0){if(h===2&&(P=Ax(c),P!==0&&(k=P,h=Xg(c,P))),h===1)throw v=qu,oo(c,0),li(c,k),vr(c,bn()),v;if(h===6)li(c,k);else{if(P=c.current.alternate,(k&30)===0&&!jI(P)&&(h=mf(c,k),h===2&&(D=Ax(c),D!==0&&(k=D,h=Xg(c,D))),h===1))throw v=qu,oo(c,0),li(c,k),vr(c,bn()),v;switch(c.finishedWork=P,c.finishedLanes=k,h){case 0:case 1:throw Error(r(345));case 2:lo(c,br,da);break;case 3:if(li(c,k),(k&130023424)===k&&(h=Qg+500-bn(),10<h)){if(wh(c,0)!==0)break;if(P=c.suspendedLanes,(P&k)!==k){ar(),c.pingedLanes|=c.suspendedLanes&P;break}c.timeoutHandle=sg(lo.bind(null,c,br,da),h);break}lo(c,br,da);break;case 4:if(li(c,k),(k&4194240)===k)break;for(h=c.eventTimes,P=-1;0<k;){var G=31-ps(k);D=1<<G,G=h[G],G>P&&(P=G),k&=~D}if(k=P,k=bn()-k,k=(120>k?120:480>k?480:1080>k?1080:1920>k?1920:3e3>k?3e3:4320>k?4320:1960*_I(k/1960))-k,10<k){c.timeoutHandle=sg(lo.bind(null,c,br,da),k);break}lo(c,br,da);break;case 5:lo(c,br,da);break;default:throw Error(r(329))}}}return vr(c,bn()),c.callbackNode===v?W1.bind(null,c):null}function Xg(c,h){var v=Fu;return c.current.memoizedState.isDehydrated&&(oo(c,h).flags|=256),c=mf(c,h),c!==2&&(h=br,br=v,h!==null&&Zg(h)),c}function Zg(c){br===null?br=c:br.push.apply(br,c)}function jI(c){for(var h=c;;){if(h.flags&16384){var v=h.updateQueue;if(v!==null&&(v=v.stores,v!==null))for(var k=0;k<v.length;k++){var P=v[k],D=P.getSnapshot;P=P.value;try{if(!xs(D(),P))return!1}catch{return!1}}}if(v=h.child,h.subtreeFlags&16384&&v!==null)v.return=h,h=v;else{if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function li(c,h){for(h&=~Vg,h&=~lf,c.suspendedLanes|=h,c.pingedLanes&=~h,c=c.expirationTimes;0<h;){var v=31-ps(h),k=1<<v;c[v]=-1,h&=~k}}function G1(c){if((_t&6)!==0)throw Error(r(327));Al();var h=wh(c,0);if((h&1)===0)return vr(c,bn()),null;var v=mf(c,h);if(c.tag!==0&&v===2){var k=Ax(c);k!==0&&(h=k,v=Xg(c,k))}if(v===1)throw v=qu,oo(c,0),li(c,h),vr(c,bn()),v;if(v===6)throw Error(r(345));return c.finishedWork=c.current.alternate,c.finishedLanes=h,lo(c,br,da),vr(c,bn()),null}function e0(c,h){var v=_t;_t|=1;try{return c(h)}finally{_t=v,_t===0&&(Rl=bn()+500,Fh&&ti())}}function io(c){ii!==null&&ii.tag===0&&(_t&6)===0&&Al();var h=_t;_t|=1;var v=Xr.transition,k=Lt;try{if(Xr.transition=null,Lt=1,c)return c()}finally{Lt=k,Xr.transition=v,_t=h,(_t&6)===0&&ti()}}function t0(){Dr=Tl.current,Zt(Tl)}function oo(c,h){c.finishedWork=null,c.finishedLanes=0;var v=c.timeoutHandle;if(v!==-1&&(c.timeoutHandle=-1,ZO(v)),_n!==null)for(v=_n.return;v!==null;){var k=v;switch(ug(k),k.tag){case 1:k=k.type.childContextTypes,k!=null&&$h();break;case 3:kl(),Zt(xr),Zt(Gn),jg();break;case 5:wg(k);break;case 4:kl();break;case 13:Zt(on);break;case 19:Zt(on);break;case 10:xg(k.type._context);break;case 22:case 23:t0()}v=v.return}if(Mn=c,_n=c=ci(c.current,null),Fn=Dr=h,Rn=0,qu=null,Vg=lf=ao=0,br=Fu=null,no!==null){for(h=0;h<no.length;h++)if(v=no[h],k=v.interleaved,k!==null){v.interleaved=null;var P=k.next,D=v.pending;if(D!==null){var G=D.next;D.next=P,k.next=G}v.pending=k}no=null}return c}function V1(c,h){do{var v=_n;try{if(pg(),Yh.current=ef,Jh){for(var k=ln.memoizedState;k!==null;){var P=k.queue;P!==null&&(P.pending=null),k=k.next}Jh=!1}if(so=0,Ln=Tn=ln=null,Ou=!1,Iu=0,Gg.current=null,v===null||v.return===null){Rn=1,qu=h,_n=null;break}e:{var D=c,G=v.return,Z=v,ae=h;if(h=Fn,Z.flags|=32768,ae!==null&&typeof ae=="object"&&typeof ae.then=="function"){var me=ae,we=Z,je=we.tag;if((we.mode&1)===0&&(je===0||je===11||je===15)){var ve=we.alternate;ve?(we.updateQueue=ve.updateQueue,we.memoizedState=ve.memoizedState,we.lanes=ve.lanes):(we.updateQueue=null,we.memoizedState=null)}var De=b1(G);if(De!==null){De.flags&=-257,v1(De,G,Z,D,h),De.mode&1&&y1(D,me,h),h=De,ae=me;var qe=h.updateQueue;if(qe===null){var Ue=new Set;Ue.add(ae),h.updateQueue=Ue}else qe.add(ae);break e}else{if((h&1)===0){y1(D,me,h),n0();break e}ae=Error(r(426))}}else if(nn&&Z.mode&1){var vn=b1(G);if(vn!==null){(vn.flags&65536)===0&&(vn.flags|=256),v1(vn,G,Z,D,h),fg(El(ae,Z));break e}}D=ae=El(ae,Z),Rn!==4&&(Rn=2),Fu===null?Fu=[D]:Fu.push(D),D=G;do{switch(D.tag){case 3:D.flags|=65536,h&=-h,D.lanes|=h;var ue=x1(D,ae,h);HN(D,ue);break e;case 1:Z=ae;var le=D.type,de=D.stateNode;if((D.flags&128)===0&&(typeof le.getDerivedStateFromError=="function"||de!==null&&typeof de.componentDidCatch=="function"&&(ai===null||!ai.has(de)))){D.flags|=65536,h&=-h,D.lanes|=h;var Ee=g1(D,Z,h);HN(D,Ee);break e}}D=D.return}while(D!==null)}J1(v)}catch(He){h=He,_n===v&&v!==null&&(_n=v=v.return);continue}break}while(!0)}function Q1(){var c=of.current;return of.current=ef,c===null?ef:c}function n0(){(Rn===0||Rn===3||Rn===2)&&(Rn=4),Mn===null||(ao&268435455)===0&&(lf&268435455)===0||li(Mn,Fn)}function mf(c,h){var v=_t;_t|=2;var k=Q1();(Mn!==c||Fn!==h)&&(da=null,oo(c,h));do try{NI();break}catch(P){V1(c,P)}while(!0);if(pg(),_t=v,of.current=k,_n!==null)throw Error(r(261));return Mn=null,Fn=0,Rn}function NI(){for(;_n!==null;)Y1(_n)}function SI(){for(;_n!==null&&!YP();)Y1(_n)}function Y1(c){var h=eS(c.alternate,c,Dr);c.memoizedProps=c.pendingProps,h===null?J1(c):_n=h,Gg.current=null}function J1(c){var h=c;do{var v=h.alternate;if(c=h.return,(h.flags&32768)===0){if(v=gI(v,h,Dr),v!==null){_n=v;return}}else{if(v=yI(v,h),v!==null){v.flags&=32767,_n=v;return}if(c!==null)c.flags|=32768,c.subtreeFlags=0,c.deletions=null;else{Rn=6,_n=null;return}}if(h=h.sibling,h!==null){_n=h;return}_n=h=c}while(h!==null);Rn===0&&(Rn=5)}function lo(c,h,v){var k=Lt,P=Xr.transition;try{Xr.transition=null,Lt=1,kI(c,h,v,k)}finally{Xr.transition=P,Lt=k}return null}function kI(c,h,v,k){do Al();while(ii!==null);if((_t&6)!==0)throw Error(r(327));v=c.finishedWork;var P=c.finishedLanes;if(v===null)return null;if(c.finishedWork=null,c.finishedLanes=0,v===c.current)throw Error(r(177));c.callbackNode=null,c.callbackPriority=0;var D=v.lanes|v.childLanes;if(iO(c,D),c===Mn&&(_n=Mn=null,Fn=0),(v.subtreeFlags&2064)===0&&(v.flags&2064)===0||uf||(uf=!0,tS(gh,function(){return Al(),null})),D=(v.flags&15990)!==0,(v.subtreeFlags&15990)!==0||D){D=Xr.transition,Xr.transition=null;var G=Lt;Lt=1;var Z=_t;_t|=4,Gg.current=null,vI(c,v),U1(v,c),WO(ng),Nh=!!tg,ng=tg=null,c.current=v,wI(v),JP(),_t=Z,Lt=G,Xr.transition=D}else c.current=v;if(uf&&(uf=!1,ii=c,df=P),D=c.pendingLanes,D===0&&(ai=null),eO(v.stateNode),vr(c,bn()),h!==null)for(k=c.onRecoverableError,v=0;v<h.length;v++)P=h[v],k(P.value,{componentStack:P.stack,digest:P.digest});if(cf)throw cf=!1,c=Yg,Yg=null,c;return(df&1)!==0&&c.tag!==0&&Al(),D=c.pendingLanes,(D&1)!==0?c===Jg?Uu++:(Uu=0,Jg=c):Uu=0,ti(),null}function Al(){if(ii!==null){var c=qj(df),h=Xr.transition,v=Lt;try{if(Xr.transition=null,Lt=16>c?16:c,ii===null)var k=!1;else{if(c=ii,ii=null,df=0,(_t&6)!==0)throw Error(r(331));var P=_t;for(_t|=4,$e=c.current;$e!==null;){var D=$e,G=D.child;if(($e.flags&16)!==0){var Z=D.deletions;if(Z!==null){for(var ae=0;ae<Z.length;ae++){var me=Z[ae];for($e=me;$e!==null;){var we=$e;switch(we.tag){case 0:case 11:case 15:$u(8,we,D)}var je=we.child;if(je!==null)je.return=we,$e=je;else for(;$e!==null;){we=$e;var ve=we.sibling,De=we.return;if(M1(we),we===me){$e=null;break}if(ve!==null){ve.return=De,$e=ve;break}$e=De}}}var qe=D.alternate;if(qe!==null){var Ue=qe.child;if(Ue!==null){qe.child=null;do{var vn=Ue.sibling;Ue.sibling=null,Ue=vn}while(Ue!==null)}}$e=D}}if((D.subtreeFlags&2064)!==0&&G!==null)G.return=D,$e=G;else e:for(;$e!==null;){if(D=$e,(D.flags&2048)!==0)switch(D.tag){case 0:case 11:case 15:$u(9,D,D.return)}var ue=D.sibling;if(ue!==null){ue.return=D.return,$e=ue;break e}$e=D.return}}var le=c.current;for($e=le;$e!==null;){G=$e;var de=G.child;if((G.subtreeFlags&2064)!==0&&de!==null)de.return=G,$e=de;else e:for(G=le;$e!==null;){if(Z=$e,(Z.flags&2048)!==0)try{switch(Z.tag){case 0:case 11:case 15:af(9,Z)}}catch(He){fn(Z,Z.return,He)}if(Z===G){$e=null;break e}var Ee=Z.sibling;if(Ee!==null){Ee.return=Z.return,$e=Ee;break e}$e=Z.return}}if(_t=P,ti(),Fs&&typeof Fs.onPostCommitFiberRoot=="function")try{Fs.onPostCommitFiberRoot(yh,c)}catch{}k=!0}return k}finally{Lt=v,Xr.transition=h}}return!1}function X1(c,h,v){h=El(v,h),h=x1(c,h,1),c=ri(c,h,1),h=ar(),c!==null&&(du(c,1,h),vr(c,h))}function fn(c,h,v){if(c.tag===3)X1(c,c,v);else for(;h!==null;){if(h.tag===3){X1(h,c,v);break}else if(h.tag===1){var k=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof k.componentDidCatch=="function"&&(ai===null||!ai.has(k))){c=El(v,c),c=g1(h,c,1),h=ri(h,c,1),c=ar(),h!==null&&(du(h,1,c),vr(h,c));break}}h=h.return}}function EI(c,h,v){var k=c.pingCache;k!==null&&k.delete(h),h=ar(),c.pingedLanes|=c.suspendedLanes&v,Mn===c&&(Fn&v)===v&&(Rn===4||Rn===3&&(Fn&130023424)===Fn&&500>bn()-Qg?oo(c,0):Vg|=v),vr(c,h)}function Z1(c,h){h===0&&((c.mode&1)===0?h=1:(h=vh,vh<<=1,(vh&130023424)===0&&(vh=4194304)));var v=ar();c=la(c,h),c!==null&&(du(c,h,v),vr(c,v))}function CI(c){var h=c.memoizedState,v=0;h!==null&&(v=h.retryLane),Z1(c,v)}function TI(c,h){var v=0;switch(c.tag){case 13:var k=c.stateNode,P=c.memoizedState;P!==null&&(v=P.retryLane);break;case 19:k=c.stateNode;break;default:throw Error(r(314))}k!==null&&k.delete(h),Z1(c,v)}var eS;eS=function(c,h,v){if(c!==null)if(c.memoizedProps!==h.pendingProps||xr.current)yr=!0;else{if((c.lanes&v)===0&&(h.flags&128)===0)return yr=!1,xI(c,h,v);yr=(c.flags&131072)!==0}else yr=!1,nn&&(h.flags&1048576)!==0&&ON(h,Bh,h.index);switch(h.lanes=0,h.tag){case 2:var k=h.type;rf(c,h),c=h.pendingProps;var P=bl(h,Gn.current);Sl(h,v),P=kg(null,h,k,c,P,v);var D=Eg();return h.flags|=1,typeof P=="object"&&P!==null&&typeof P.render=="function"&&P.$$typeof===void 0?(h.tag=1,h.memoizedState=null,h.updateQueue=null,gr(k)?(D=!0,qh(h)):D=!1,h.memoizedState=P.state!==null&&P.state!==void 0?P.state:null,bg(h),P.updater=tf,h.stateNode=P,P._reactInternals=h,Og(h,k,c,v),h=Dg(null,h,k,!0,D,v)):(h.tag=0,nn&&D&&cg(h),sr(null,h,P,v),h=h.child),h;case 16:k=h.elementType;e:{switch(rf(c,h),c=h.pendingProps,P=k._init,k=P(k._payload),h.type=k,P=h.tag=AI(k),c=ys(k,c),P){case 0:h=Mg(null,h,k,c,v);break e;case 1:h=k1(null,h,k,c,v);break e;case 11:h=w1(null,h,k,c,v);break e;case 14:h=_1(null,h,k,ys(k.type,c),v);break e}throw Error(r(306,k,""))}return h;case 0:return k=h.type,P=h.pendingProps,P=h.elementType===k?P:ys(k,P),Mg(c,h,k,P,v);case 1:return k=h.type,P=h.pendingProps,P=h.elementType===k?P:ys(k,P),k1(c,h,k,P,v);case 3:e:{if(E1(h),c===null)throw Error(r(387));k=h.pendingProps,D=h.memoizedState,P=D.element,BN(c,h),Vh(h,k,null,v);var G=h.memoizedState;if(k=G.element,D.isDehydrated)if(D={element:k,isDehydrated:!1,cache:G.cache,pendingSuspenseBoundaries:G.pendingSuspenseBoundaries,transitions:G.transitions},h.updateQueue.baseState=D,h.memoizedState=D,h.flags&256){P=El(Error(r(423)),h),h=C1(c,h,k,v,P);break e}else if(k!==P){P=El(Error(r(424)),h),h=C1(c,h,k,v,P);break e}else for(Mr=Xa(h.stateNode.containerInfo.firstChild),Lr=h,nn=!0,gs=null,v=FN(h,null,k,v),h.child=v;v;)v.flags=v.flags&-3|4096,v=v.sibling;else{if(_l(),k===P){h=ua(c,h,v);break e}sr(c,h,k,v)}h=h.child}return h;case 5:return zN(h),c===null&&hg(h),k=h.type,P=h.pendingProps,D=c!==null?c.memoizedProps:null,G=P.children,rg(k,P)?G=null:D!==null&&rg(k,D)&&(h.flags|=32),S1(c,h),sr(c,h,G,v),h.child;case 6:return c===null&&hg(h),null;case 13:return T1(c,h,v);case 4:return vg(h,h.stateNode.containerInfo),k=h.pendingProps,c===null?h.child=jl(h,null,k,v):sr(c,h,k,v),h.child;case 11:return k=h.type,P=h.pendingProps,P=h.elementType===k?P:ys(k,P),w1(c,h,k,P,v);case 7:return sr(c,h,h.pendingProps,v),h.child;case 8:return sr(c,h,h.pendingProps.children,v),h.child;case 12:return sr(c,h,h.pendingProps.children,v),h.child;case 10:e:{if(k=h.type._context,P=h.pendingProps,D=h.memoizedProps,G=P.value,Wt(zh,k._currentValue),k._currentValue=G,D!==null)if(xs(D.value,G)){if(D.children===P.children&&!xr.current){h=ua(c,h,v);break e}}else for(D=h.child,D!==null&&(D.return=h);D!==null;){var Z=D.dependencies;if(Z!==null){G=D.child;for(var ae=Z.firstContext;ae!==null;){if(ae.context===k){if(D.tag===1){ae=ca(-1,v&-v),ae.tag=2;var me=D.updateQueue;if(me!==null){me=me.shared;var we=me.pending;we===null?ae.next=ae:(ae.next=we.next,we.next=ae),me.pending=ae}}D.lanes|=v,ae=D.alternate,ae!==null&&(ae.lanes|=v),gg(D.return,v,h),Z.lanes|=v;break}ae=ae.next}}else if(D.tag===10)G=D.type===h.type?null:D.child;else if(D.tag===18){if(G=D.return,G===null)throw Error(r(341));G.lanes|=v,Z=G.alternate,Z!==null&&(Z.lanes|=v),gg(G,v,h),G=D.sibling}else G=D.child;if(G!==null)G.return=D;else for(G=D;G!==null;){if(G===h){G=null;break}if(D=G.sibling,D!==null){D.return=G.return,G=D;break}G=G.return}D=G}sr(c,h,P.children,v),h=h.child}return h;case 9:return P=h.type,k=h.pendingProps.children,Sl(h,v),P=Yr(P),k=k(P),h.flags|=1,sr(c,h,k,v),h.child;case 14:return k=h.type,P=ys(k,h.pendingProps),P=ys(k.type,P),_1(c,h,k,P,v);case 15:return j1(c,h,h.type,h.pendingProps,v);case 17:return k=h.type,P=h.pendingProps,P=h.elementType===k?P:ys(k,P),rf(c,h),h.tag=1,gr(k)?(c=!0,qh(h)):c=!1,Sl(h,v),m1(h,k,P),Og(h,k,P,v),Dg(null,h,k,!0,c,v);case 19:return A1(c,h,v);case 22:return N1(c,h,v)}throw Error(r(156,h.tag))};function tS(c,h){return Ij(c,h)}function RI(c,h,v,k){this.tag=c,this.key=v,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=k,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zr(c,h,v,k){return new RI(c,h,v,k)}function r0(c){return c=c.prototype,!(!c||!c.isReactComponent)}function AI(c){if(typeof c=="function")return r0(c)?1:0;if(c!=null){if(c=c.$$typeof,c===O)return 11;if(c===U)return 14}return 2}function ci(c,h){var v=c.alternate;return v===null?(v=Zr(c.tag,h,c.key,c.mode),v.elementType=c.elementType,v.type=c.type,v.stateNode=c.stateNode,v.alternate=c,c.alternate=v):(v.pendingProps=h,v.type=c.type,v.flags=0,v.subtreeFlags=0,v.deletions=null),v.flags=c.flags&14680064,v.childLanes=c.childLanes,v.lanes=c.lanes,v.child=c.child,v.memoizedProps=c.memoizedProps,v.memoizedState=c.memoizedState,v.updateQueue=c.updateQueue,h=c.dependencies,v.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},v.sibling=c.sibling,v.index=c.index,v.ref=c.ref,v}function pf(c,h,v,k,P,D){var G=2;if(k=c,typeof c=="function")r0(c)&&(G=1);else if(typeof c=="string")G=5;else e:switch(c){case E:return co(v.children,P,D,h);case T:G=8,P|=8;break;case I:return c=Zr(12,v,h,P|2),c.elementType=I,c.lanes=D,c;case M:return c=Zr(13,v,h,P),c.elementType=M,c.lanes=D,c;case B:return c=Zr(19,v,h,P),c.elementType=B,c.lanes=D,c;case W:return xf(v,P,D,h);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case A:G=10;break e;case R:G=9;break e;case O:G=11;break e;case U:G=14;break e;case Y:G=16,k=null;break e}throw Error(r(130,c==null?c:typeof c,""))}return h=Zr(G,v,h,P),h.elementType=c,h.type=k,h.lanes=D,h}function co(c,h,v,k){return c=Zr(7,c,k,h),c.lanes=v,c}function xf(c,h,v,k){return c=Zr(22,c,k,h),c.elementType=W,c.lanes=v,c.stateNode={isHidden:!1},c}function s0(c,h,v){return c=Zr(6,c,null,h),c.lanes=v,c}function a0(c,h,v){return h=Zr(4,c.children!==null?c.children:[],c.key,h),h.lanes=v,h.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},h}function PI(c,h,v,k,P){this.tag=h,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Px(0),this.expirationTimes=Px(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Px(0),this.identifierPrefix=k,this.onRecoverableError=P,this.mutableSourceEagerHydrationData=null}function i0(c,h,v,k,P,D,G,Z,ae){return c=new PI(c,h,v,Z,ae),h===1?(h=1,D===!0&&(h|=8)):h=0,D=Zr(3,null,null,h),c.current=D,D.stateNode=c,D.memoizedState={element:k,isDehydrated:v,cache:null,transitions:null,pendingSuspenseBoundaries:null},bg(D),c}function OI(c,h,v){var k=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:C,key:k==null?null:""+k,children:c,containerInfo:h,implementation:v}}function nS(c){if(!c)return ei;c=c._reactInternals;e:{if(Ji(c)!==c||c.tag!==1)throw Error(r(170));var h=c;do{switch(h.tag){case 3:h=h.stateNode.context;break e;case 1:if(gr(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break e}}h=h.return}while(h!==null);throw Error(r(171))}if(c.tag===1){var v=c.type;if(gr(v))return RN(c,v,h)}return h}function rS(c,h,v,k,P,D,G,Z,ae){return c=i0(v,k,!0,c,P,D,G,Z,ae),c.context=nS(null),v=c.current,k=ar(),P=oi(v),D=ca(k,P),D.callback=h??null,ri(v,D,P),c.current.lanes=P,du(c,P,k),vr(c,k),c}function gf(c,h,v,k){var P=h.current,D=ar(),G=oi(P);return v=nS(v),h.context===null?h.context=v:h.pendingContext=v,h=ca(D,G),h.payload={element:c},k=k===void 0?null:k,k!==null&&(h.callback=k),c=ri(P,h,G),c!==null&&(ws(c,P,G,D),Gh(c,P,G)),G}function yf(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 5:return c.child.stateNode;default:return c.child.stateNode}}function sS(c,h){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var v=c.retryLane;c.retryLane=v!==0&&v<h?v:h}}function o0(c,h){sS(c,h),(c=c.alternate)&&sS(c,h)}function II(){return null}var aS=typeof reportError=="function"?reportError:function(c){console.error(c)};function l0(c){this._internalRoot=c}bf.prototype.render=l0.prototype.render=function(c){var h=this._internalRoot;if(h===null)throw Error(r(409));gf(c,h,null,null)},bf.prototype.unmount=l0.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var h=c.containerInfo;io(function(){gf(null,c,null,null)}),h[sa]=null}};function bf(c){this._internalRoot=c}bf.prototype.unstable_scheduleHydration=function(c){if(c){var h=Bj();c={blockedOn:null,target:c,priority:h};for(var v=0;v<Qa.length&&h!==0&&h<Qa[v].priority;v++);Qa.splice(v,0,c),v===0&&zj(c)}};function c0(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function vf(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11&&(c.nodeType!==8||c.nodeValue!==" react-mount-point-unstable "))}function iS(){}function LI(c,h,v,k,P){if(P){if(typeof k=="function"){var D=k;k=function(){var me=yf(G);D.call(me)}}var G=rS(h,k,c,0,null,!1,!1,"",iS);return c._reactRootContainer=G,c[sa]=G.current,Su(c.nodeType===8?c.parentNode:c),io(),G}for(;P=c.lastChild;)c.removeChild(P);if(typeof k=="function"){var Z=k;k=function(){var me=yf(ae);Z.call(me)}}var ae=i0(c,0,!1,null,null,!1,!1,"",iS);return c._reactRootContainer=ae,c[sa]=ae.current,Su(c.nodeType===8?c.parentNode:c),io(function(){gf(h,ae,v,k)}),ae}function wf(c,h,v,k,P){var D=v._reactRootContainer;if(D){var G=D;if(typeof P=="function"){var Z=P;P=function(){var ae=yf(G);Z.call(ae)}}gf(h,G,c,P)}else G=LI(v,h,c,P,k);return yf(G)}Fj=function(c){switch(c.tag){case 3:var h=c.stateNode;if(h.current.memoizedState.isDehydrated){var v=uu(h.pendingLanes);v!==0&&(Ox(h,v|1),vr(h,bn()),(_t&6)===0&&(Rl=bn()+500,ti()))}break;case 13:io(function(){var k=la(c,1);if(k!==null){var P=ar();ws(k,c,1,P)}}),o0(c,1)}},Ix=function(c){if(c.tag===13){var h=la(c,134217728);if(h!==null){var v=ar();ws(h,c,134217728,v)}o0(c,134217728)}},Uj=function(c){if(c.tag===13){var h=oi(c),v=la(c,h);if(v!==null){var k=ar();ws(v,c,h,k)}o0(c,h)}},Bj=function(){return Lt},Hj=function(c,h){var v=Lt;try{return Lt=c,h()}finally{Lt=v}},kx=function(c,h,v){switch(h){case"input":if(ut(c,v),h=v.name,v.type==="radio"&&h!=null){for(v=c;v.parentNode;)v=v.parentNode;for(v=v.querySelectorAll("input[name="+JSON.stringify(""+h)+'][type="radio"]'),h=0;h<v.length;h++){var k=v[h];if(k!==c&&k.form===c.form){var P=Dh(k);if(!P)throw Error(r(90));Fe(k),ut(k,P)}}}break;case"textarea":Qe(c,v);break;case"select":h=v.value,h!=null&&Se(c,!!v.multiple,h,!1)}},Ej=e0,Cj=io;var MI={usingClientEntryPoint:!1,Events:[Cu,gl,Dh,Sj,kj,e0]},Bu={findFiberByHostInstance:Xi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},DI={bundleType:Bu.bundleType,version:Bu.version,rendererPackageName:Bu.rendererPackageName,rendererConfig:Bu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:j.ReactCurrentDispatcher,findHostInstanceByFiber:function(c){return c=Pj(c),c===null?null:c.stateNode},findFiberByHostInstance:Bu.findFiberByHostInstance||II,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _f=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_f.isDisabled&&_f.supportsFiber)try{yh=_f.inject(DI),Fs=_f}catch{}}return wr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=MI,wr.createPortal=function(c,h){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c0(h))throw Error(r(200));return OI(c,h,null,v)},wr.createRoot=function(c,h){if(!c0(c))throw Error(r(299));var v=!1,k="",P=aS;return h!=null&&(h.unstable_strictMode===!0&&(v=!0),h.identifierPrefix!==void 0&&(k=h.identifierPrefix),h.onRecoverableError!==void 0&&(P=h.onRecoverableError)),h=i0(c,1,!1,null,null,v,!1,k,P),c[sa]=h.current,Su(c.nodeType===8?c.parentNode:c),new l0(h)},wr.findDOMNode=function(c){if(c==null)return null;if(c.nodeType===1)return c;var h=c._reactInternals;if(h===void 0)throw typeof c.render=="function"?Error(r(188)):(c=Object.keys(c).join(","),Error(r(268,c)));return c=Pj(h),c=c===null?null:c.stateNode,c},wr.flushSync=function(c){return io(c)},wr.hydrate=function(c,h,v){if(!vf(h))throw Error(r(200));return wf(null,c,h,!0,v)},wr.hydrateRoot=function(c,h,v){if(!c0(c))throw Error(r(405));var k=v!=null&&v.hydratedSources||null,P=!1,D="",G=aS;if(v!=null&&(v.unstable_strictMode===!0&&(P=!0),v.identifierPrefix!==void 0&&(D=v.identifierPrefix),v.onRecoverableError!==void 0&&(G=v.onRecoverableError)),h=rS(h,null,c,1,v??null,P,!1,D,G),c[sa]=h.current,Su(c),k)for(c=0;c<k.length;c++)v=k[c],P=v._getVersion,P=P(v._source),h.mutableSourceEagerHydrationData==null?h.mutableSourceEagerHydrationData=[v,P]:h.mutableSourceEagerHydrationData.push(v,P);return new bf(h)},wr.render=function(c,h,v){if(!vf(h))throw Error(r(200));return wf(null,c,h,!1,v)},wr.unmountComponentAtNode=function(c){if(!vf(c))throw Error(r(40));return c._reactRootContainer?(io(function(){wf(null,null,c,!1,function(){c._reactRootContainer=null,c[sa]=null})}),!0):!1},wr.unstable_batchedUpdates=e0,wr.unstable_renderSubtreeIntoContainer=function(c,h,v,k){if(!vf(v))throw Error(r(200));if(c==null||c._reactInternals===void 0)throw Error(r(38));return wf(c,h,v,!1,k)},wr.version="18.3.1-next-f1338f8080-20240426",wr}var pS;function kC(){if(pS)return f0.exports;pS=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),f0.exports=GI(),f0.exports}var xS;function VI(){if(xS)return kf;xS=1;var e=kC();return kf.createRoot=e.createRoot,kf.hydrateRoot=e.hydrateRoot,kf}var QI=VI(),Bc=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},YI={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},vi,vw,hC,JI=(hC=class{constructor(){Ve(this,vi,YI);Ve(this,vw,!1)}setTimeoutProvider(e){Oe(this,vi,e)}setTimeout(e,t){return re(this,vi).setTimeout(e,t)}clearTimeout(e){re(this,vi).clearTimeout(e)}setInterval(e,t){return re(this,vi).setInterval(e,t)}clearInterval(e){re(this,vi).clearInterval(e)}},vi=new WeakMap,vw=new WeakMap,hC),_o=new JI;function XI(e){setTimeout(e,0)}var Uo=typeof window>"u"||"Deno"in globalThis;function cr(){}function ZI(e,t){return typeof e=="function"?e(t):e}function Jb(e){return typeof e=="number"&&e>=0&&e!==1/0}function EC(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Ri(e,t){return typeof e=="function"?e(t):e}function rs(e,t){return typeof e=="function"?e(t):e}function gS(e,t){const{type:r="all",exact:s,fetchStatus:a,predicate:i,queryKey:o,stale:l}=e;if(o){if(s){if(t.queryHash!==_w(o,t.options))return!1}else if(!hd(t.queryKey,o))return!1}if(r!=="all"){const u=t.isActive();if(r==="active"&&!u||r==="inactive"&&u)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||a&&a!==t.state.fetchStatus||i&&!i(t))}function yS(e,t){const{exact:r,status:s,predicate:a,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(Bo(t.options.mutationKey)!==Bo(i))return!1}else if(!hd(t.options.mutationKey,i))return!1}return!(s&&t.state.status!==s||a&&!a(t))}function _w(e,t){return((t==null?void 0:t.queryKeyHashFn)||Bo)(e)}function Bo(e){return JSON.stringify(e,(t,r)=>Xb(r)?Object.keys(r).sort().reduce((s,a)=>(s[a]=r[a],s),{}):r)}function hd(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>hd(e[r],t[r])):!1}var eL=Object.prototype.hasOwnProperty;function CC(e,t){if(e===t)return e;const r=bS(e)&&bS(t);if(!r&&!(Xb(e)&&Xb(t)))return t;const a=(r?e:Object.keys(e)).length,i=r?t:Object.keys(t),o=i.length,l=r?new Array(o):{};let u=0;for(let d=0;d<o;d++){const p=r?d:i[d],f=e[p],m=t[p];if(f===m){l[p]=f,(r?d<a:eL.call(e,p))&&u++;continue}if(f===null||m===null||typeof f!="object"||typeof m!="object"){l[p]=m;continue}const x=CC(f,m);l[p]=x,x===f&&u++}return a===o&&u===a?e:l}function Rm(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function bS(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Xb(e){if(!vS(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!vS(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function vS(e){return Object.prototype.toString.call(e)==="[object Object]"}function tL(e){return new Promise(t=>{_o.setTimeout(t,e)})}function Zb(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?CC(e,t):t}function nL(e,t,r=0){const s=[...e,t];return r&&s.length>r?s.slice(1):s}function rL(e,t,r=0){const s=[t,...e];return r&&s.length>r?s.slice(0,-1):s}var jw=Symbol();function TC(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===jw?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function RC(e,t){return typeof e=="function"?e(...t):!!e}var Co,wi,hc,fC,sL=(fC=class extends Bc{constructor(){super();Ve(this,Co);Ve(this,wi);Ve(this,hc);Oe(this,hc,t=>{if(!Uo&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){re(this,wi)||this.setEventListener(re(this,hc))}onUnsubscribe(){var t;this.hasListeners()||((t=re(this,wi))==null||t.call(this),Oe(this,wi,void 0))}setEventListener(t){var r;Oe(this,hc,t),(r=re(this,wi))==null||r.call(this),Oe(this,wi,t(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(t){re(this,Co)!==t&&(Oe(this,Co,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof re(this,Co)=="boolean"?re(this,Co):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Co=new WeakMap,wi=new WeakMap,hc=new WeakMap,fC),Nw=new sL;function ev(){let e,t;const r=new Promise((a,i)=>{e=a,t=i});r.status="pending",r.catch(()=>{});function s(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{s({status:"fulfilled",value:a}),e(a)},r.reject=a=>{s({status:"rejected",reason:a}),t(a)},r}var aL=XI;function iL(){let e=[],t=0,r=l=>{l()},s=l=>{l()},a=aL;const i=l=>{t?e.push(l):a(()=>{r(l)})},o=()=>{const l=e;e=[],l.length&&a(()=>{s(()=>{l.forEach(u=>{r(u)})})})};return{batch:l=>{let u;t++;try{u=l()}finally{t--,t||o()}return u},batchCalls:l=>(...u)=>{i(()=>{l(...u)})},schedule:i,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{s=l},setScheduler:l=>{a=l}}}var Pn=iL(),fc,_i,mc,mC,oL=(mC=class extends Bc{constructor(){super();Ve(this,fc,!0);Ve(this,_i);Ve(this,mc);Oe(this,mc,t=>{if(!Uo&&window.addEventListener){const r=()=>t(!0),s=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",s)}}})}onSubscribe(){re(this,_i)||this.setEventListener(re(this,mc))}onUnsubscribe(){var t;this.hasListeners()||((t=re(this,_i))==null||t.call(this),Oe(this,_i,void 0))}setEventListener(t){var r;Oe(this,mc,t),(r=re(this,_i))==null||r.call(this),Oe(this,_i,t(this.setOnline.bind(this)))}setOnline(t){re(this,fc)!==t&&(Oe(this,fc,t),this.listeners.forEach(s=>{s(t)}))}isOnline(){return re(this,fc)}},fc=new WeakMap,_i=new WeakMap,mc=new WeakMap,mC),Am=new oL;function lL(e){return Math.min(1e3*2**e,3e4)}function AC(e){return(e??"online")==="online"?Am.isOnline():!0}var tv=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function PC(e){let t=!1,r=0,s;const a=ev(),i=()=>a.status!=="pending",o=g=>{var b;if(!i()){const _=new tv(g);m(_),(b=e.onCancel)==null||b.call(e,_)}},l=()=>{t=!0},u=()=>{t=!1},d=()=>Nw.isFocused()&&(e.networkMode==="always"||Am.isOnline())&&e.canRun(),p=()=>AC(e.networkMode)&&e.canRun(),f=g=>{i()||(s==null||s(),a.resolve(g))},m=g=>{i()||(s==null||s(),a.reject(g))},x=()=>new Promise(g=>{var b;s=_=>{(i()||d())&&g(_)},(b=e.onPause)==null||b.call(e)}).then(()=>{var g;s=void 0,i()||(g=e.onContinue)==null||g.call(e)}),y=()=>{if(i())return;let g;const b=r===0?e.initialPromise:void 0;try{g=b??e.fn()}catch(_){g=Promise.reject(_)}Promise.resolve(g).then(f).catch(_=>{var C;if(i())return;const w=e.retry??(Uo?0:3),S=e.retryDelay??lL,j=typeof S=="function"?S(r,_):S,N=w===!0||typeof w=="number"&&r<w||typeof w=="function"&&w(r,_);if(t||!N){m(_);return}r++,(C=e.onFail)==null||C.call(e,r,_),tL(j).then(()=>d()?void 0:x()).then(()=>{t?m(_):y()})})};return{promise:a,status:()=>a.status,cancel:o,continue:()=>(s==null||s(),a),cancelRetry:l,continueRetry:u,canStart:p,start:()=>(p()?y():x().then(y),a)}}var To,pC,OC=(pC=class{constructor(){Ve(this,To)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Jb(this.gcTime)&&Oe(this,To,_o.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Uo?1/0:300*1e3))}clearGcTimeout(){re(this,To)&&(_o.clearTimeout(re(this,To)),Oe(this,To,void 0))}},To=new WeakMap,pC),Ro,pc,ns,Ao,$n,Md,Po,Es,pa,xC,cL=(xC=class extends OC{constructor(t){super();Ve(this,Es);Ve(this,Ro);Ve(this,pc);Ve(this,ns);Ve(this,Ao);Ve(this,$n);Ve(this,Md);Ve(this,Po);Oe(this,Po,!1),Oe(this,Md,t.defaultOptions),this.setOptions(t.options),this.observers=[],Oe(this,Ao,t.client),Oe(this,ns,re(this,Ao).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Oe(this,Ro,_S(this.options)),this.state=t.state??re(this,Ro),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=re(this,$n))==null?void 0:t.promise}setOptions(t){if(this.options={...re(this,Md),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=_S(this.options);r.data!==void 0&&(this.setState(wS(r.data,r.dataUpdatedAt)),Oe(this,Ro,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&re(this,ns).remove(this)}setData(t,r){const s=Zb(this.state.data,t,this.options);return ft(this,Es,pa).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(t,r){ft(this,Es,pa).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var s,a;const r=(s=re(this,$n))==null?void 0:s.promise;return(a=re(this,$n))==null||a.cancel(t),r?r.then(cr).catch(cr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(re(this,Ro))}isActive(){return this.observers.some(t=>rs(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===jw||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Ri(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!EC(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(s=>s.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=re(this,$n))==null||r.continue()}onOnline(){var r;const t=this.observers.find(s=>s.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=re(this,$n))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),re(this,ns).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(re(this,$n)&&(re(this,Po)?re(this,$n).cancel({revert:!0}):re(this,$n).cancelRetry()),this.scheduleGc()),re(this,ns).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ft(this,Es,pa).call(this,{type:"invalidate"})}async fetch(t,r){var u,d,p,f,m,x,y,g,b,_,w,S;if(this.state.fetchStatus!=="idle"&&((u=re(this,$n))==null?void 0:u.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(re(this,$n))return re(this,$n).continueRetry(),re(this,$n).promise}if(t&&this.setOptions(t),!this.options.queryFn){const j=this.observers.find(N=>N.options.queryFn);j&&this.setOptions(j.options)}const s=new AbortController,a=j=>{Object.defineProperty(j,"signal",{enumerable:!0,get:()=>(Oe(this,Po,!0),s.signal)})},i=()=>{const j=TC(this.options,r),C=(()=>{const E={client:re(this,Ao),queryKey:this.queryKey,meta:this.meta};return a(E),E})();return Oe(this,Po,!1),this.options.persister?this.options.persister(j,C,this):j(C)},l=(()=>{const j={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:re(this,Ao),state:this.state,fetchFn:i};return a(j),j})();(d=this.options.behavior)==null||d.onFetch(l,this),Oe(this,pc,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((p=l.fetchOptions)==null?void 0:p.meta))&&ft(this,Es,pa).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta}),Oe(this,$n,PC({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,onCancel:j=>{j instanceof tv&&j.revert&&this.setState({...re(this,pc),fetchStatus:"idle"}),s.abort()},onFail:(j,N)=>{ft(this,Es,pa).call(this,{type:"failed",failureCount:j,error:N})},onPause:()=>{ft(this,Es,pa).call(this,{type:"pause"})},onContinue:()=>{ft(this,Es,pa).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const j=await re(this,$n).start();if(j===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(j),(x=(m=re(this,ns).config).onSuccess)==null||x.call(m,j,this),(g=(y=re(this,ns).config).onSettled)==null||g.call(y,j,this.state.error,this),j}catch(j){if(j instanceof tv){if(j.silent)return re(this,$n).promise;if(j.revert){if(this.state.data===void 0)throw j;return this.state.data}}throw ft(this,Es,pa).call(this,{type:"error",error:j}),(_=(b=re(this,ns).config).onError)==null||_.call(b,j,this),(S=(w=re(this,ns).config).onSettled)==null||S.call(w,this.state.data,j,this),j}finally{this.scheduleGc()}}},Ro=new WeakMap,pc=new WeakMap,ns=new WeakMap,Ao=new WeakMap,$n=new WeakMap,Md=new WeakMap,Po=new WeakMap,Es=new WeakSet,pa=function(t){const r=s=>{switch(t.type){case"failed":return{...s,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...IC(s.data,this.options),fetchMeta:t.meta??null};case"success":const a={...s,...wS(t.data,t.dataUpdatedAt),dataUpdateCount:s.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Oe(this,pc,t.manual?a:void 0),a;case"error":const i=t.error;return{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...t.state}}};this.state=r(this.state),Pn.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),re(this,ns).notify({query:this,type:"updated",action:t})})},xC);function IC(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:AC(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function wS(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function _S(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,s=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var jr,bt,Dd,or,Oo,xc,ya,ji,$d,gc,yc,Io,Lo,Ni,bc,Pt,Ju,nv,rv,sv,av,iv,ov,lv,LC,gC,uL=(gC=class extends Bc{constructor(t,r){super();Ve(this,Pt);Ve(this,jr);Ve(this,bt);Ve(this,Dd);Ve(this,or);Ve(this,Oo);Ve(this,xc);Ve(this,ya);Ve(this,ji);Ve(this,$d);Ve(this,gc);Ve(this,yc);Ve(this,Io);Ve(this,Lo);Ve(this,Ni);Ve(this,bc,new Set);this.options=r,Oe(this,jr,t),Oe(this,ji,null),Oe(this,ya,ev()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(re(this,bt).addObserver(this),jS(re(this,bt),this.options)?ft(this,Pt,Ju).call(this):this.updateResult(),ft(this,Pt,av).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return cv(re(this,bt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return cv(re(this,bt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,ft(this,Pt,iv).call(this),ft(this,Pt,ov).call(this),re(this,bt).removeObserver(this)}setOptions(t){const r=this.options,s=re(this,bt);if(this.options=re(this,jr).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof rs(this.options.enabled,re(this,bt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");ft(this,Pt,lv).call(this),re(this,bt).setOptions(this.options),r._defaulted&&!Rm(this.options,r)&&re(this,jr).getQueryCache().notify({type:"observerOptionsUpdated",query:re(this,bt),observer:this});const a=this.hasListeners();a&&NS(re(this,bt),s,this.options,r)&&ft(this,Pt,Ju).call(this),this.updateResult(),a&&(re(this,bt)!==s||rs(this.options.enabled,re(this,bt))!==rs(r.enabled,re(this,bt))||Ri(this.options.staleTime,re(this,bt))!==Ri(r.staleTime,re(this,bt)))&&ft(this,Pt,nv).call(this);const i=ft(this,Pt,rv).call(this);a&&(re(this,bt)!==s||rs(this.options.enabled,re(this,bt))!==rs(r.enabled,re(this,bt))||i!==re(this,Ni))&&ft(this,Pt,sv).call(this,i)}getOptimisticResult(t){const r=re(this,jr).getQueryCache().build(re(this,jr),t),s=this.createResult(r,t);return hL(this,s)&&(Oe(this,or,s),Oe(this,xc,this.options),Oe(this,Oo,re(this,bt).state)),s}getCurrentResult(){return re(this,or)}trackResult(t,r){return new Proxy(t,{get:(s,a)=>(this.trackProp(a),r==null||r(a),a==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&re(this,ya).status==="pending"&&re(this,ya).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(s,a))})}trackProp(t){re(this,bc).add(t)}getCurrentQuery(){return re(this,bt)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=re(this,jr).defaultQueryOptions(t),s=re(this,jr).getQueryCache().build(re(this,jr),r);return s.fetch().then(()=>this.createResult(s,r))}fetch(t){return ft(this,Pt,Ju).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),re(this,or)))}createResult(t,r){var I;const s=re(this,bt),a=this.options,i=re(this,or),o=re(this,Oo),l=re(this,xc),d=t!==s?t.state:re(this,Dd),{state:p}=t;let f={...p},m=!1,x;if(r._optimisticResults){const A=this.hasListeners(),R=!A&&jS(t,r),O=A&&NS(t,s,r,a);(R||O)&&(f={...f,...IC(p.data,t.options)}),r._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:y,errorUpdatedAt:g,status:b}=f;x=f.data;let _=!1;if(r.placeholderData!==void 0&&x===void 0&&b==="pending"){let A;i!=null&&i.isPlaceholderData&&r.placeholderData===(l==null?void 0:l.placeholderData)?(A=i.data,_=!0):A=typeof r.placeholderData=="function"?r.placeholderData((I=re(this,yc))==null?void 0:I.state.data,re(this,yc)):r.placeholderData,A!==void 0&&(b="success",x=Zb(i==null?void 0:i.data,A,r),m=!0)}if(r.select&&x!==void 0&&!_)if(i&&x===(o==null?void 0:o.data)&&r.select===re(this,$d))x=re(this,gc);else try{Oe(this,$d,r.select),x=r.select(x),x=Zb(i==null?void 0:i.data,x,r),Oe(this,gc,x),Oe(this,ji,null)}catch(A){Oe(this,ji,A)}re(this,ji)&&(y=re(this,ji),x=re(this,gc),g=Date.now(),b="error");const w=f.fetchStatus==="fetching",S=b==="pending",j=b==="error",N=S&&w,C=x!==void 0,T={status:b,fetchStatus:f.fetchStatus,isPending:S,isSuccess:b==="success",isError:j,isInitialLoading:N,isLoading:N,data:x,dataUpdatedAt:f.dataUpdatedAt,error:y,errorUpdatedAt:g,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>d.dataUpdateCount||f.errorUpdateCount>d.errorUpdateCount,isFetching:w,isRefetching:w&&!S,isLoadingError:j&&!C,isPaused:f.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:j&&C,isStale:Sw(t,r),refetch:this.refetch,promise:re(this,ya),isEnabled:rs(r.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const A=M=>{T.status==="error"?M.reject(T.error):T.data!==void 0&&M.resolve(T.data)},R=()=>{const M=Oe(this,ya,T.promise=ev());A(M)},O=re(this,ya);switch(O.status){case"pending":t.queryHash===s.queryHash&&A(O);break;case"fulfilled":(T.status==="error"||T.data!==O.value)&&R();break;case"rejected":(T.status!=="error"||T.error!==O.reason)&&R();break}}return T}updateResult(){const t=re(this,or),r=this.createResult(re(this,bt),this.options);if(Oe(this,Oo,re(this,bt).state),Oe(this,xc,this.options),re(this,Oo).data!==void 0&&Oe(this,yc,re(this,bt)),Rm(r,t))return;Oe(this,or,r);const s=()=>{if(!t)return!0;const{notifyOnChangeProps:a}=this.options,i=typeof a=="function"?a():a;if(i==="all"||!i&&!re(this,bc).size)return!0;const o=new Set(i??re(this,bc));return this.options.throwOnError&&o.add("error"),Object.keys(re(this,or)).some(l=>{const u=l;return re(this,or)[u]!==t[u]&&o.has(u)})};ft(this,Pt,LC).call(this,{listeners:s()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&ft(this,Pt,av).call(this)}},jr=new WeakMap,bt=new WeakMap,Dd=new WeakMap,or=new WeakMap,Oo=new WeakMap,xc=new WeakMap,ya=new WeakMap,ji=new WeakMap,$d=new WeakMap,gc=new WeakMap,yc=new WeakMap,Io=new WeakMap,Lo=new WeakMap,Ni=new WeakMap,bc=new WeakMap,Pt=new WeakSet,Ju=function(t){ft(this,Pt,lv).call(this);let r=re(this,bt).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(cr)),r},nv=function(){ft(this,Pt,iv).call(this);const t=Ri(this.options.staleTime,re(this,bt));if(Uo||re(this,or).isStale||!Jb(t))return;const s=EC(re(this,or).dataUpdatedAt,t)+1;Oe(this,Io,_o.setTimeout(()=>{re(this,or).isStale||this.updateResult()},s))},rv=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(re(this,bt)):this.options.refetchInterval)??!1},sv=function(t){ft(this,Pt,ov).call(this),Oe(this,Ni,t),!(Uo||rs(this.options.enabled,re(this,bt))===!1||!Jb(re(this,Ni))||re(this,Ni)===0)&&Oe(this,Lo,_o.setInterval(()=>{(this.options.refetchIntervalInBackground||Nw.isFocused())&&ft(this,Pt,Ju).call(this)},re(this,Ni)))},av=function(){ft(this,Pt,nv).call(this),ft(this,Pt,sv).call(this,ft(this,Pt,rv).call(this))},iv=function(){re(this,Io)&&(_o.clearTimeout(re(this,Io)),Oe(this,Io,void 0))},ov=function(){re(this,Lo)&&(_o.clearInterval(re(this,Lo)),Oe(this,Lo,void 0))},lv=function(){const t=re(this,jr).getQueryCache().build(re(this,jr),this.options);if(t===re(this,bt))return;const r=re(this,bt);Oe(this,bt,t),Oe(this,Dd,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},LC=function(t){Pn.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(re(this,or))}),re(this,jr).getQueryCache().notify({query:re(this,bt),type:"observerResultsUpdated"})})},gC);function dL(e,t){return rs(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function jS(e,t){return dL(e,t)||e.state.data!==void 0&&cv(e,t,t.refetchOnMount)}function cv(e,t,r){if(rs(t.enabled,e)!==!1&&Ri(t.staleTime,e)!=="static"){const s=typeof r=="function"?r(e):r;return s==="always"||s!==!1&&Sw(e,t)}return!1}function NS(e,t,r,s){return(e!==t||rs(s.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&Sw(e,r)}function Sw(e,t){return rs(t.enabled,e)!==!1&&e.isStaleByTime(Ri(t.staleTime,e))}function hL(e,t){return!Rm(e.getCurrentResult(),t)}function SS(e){return{onFetch:(t,r)=>{var p,f,m,x,y;const s=t.options,a=(m=(f=(p=t.fetchOptions)==null?void 0:p.meta)==null?void 0:f.fetchMore)==null?void 0:m.direction,i=((x=t.state.data)==null?void 0:x.pages)||[],o=((y=t.state.data)==null?void 0:y.pageParams)||[];let l={pages:[],pageParams:[]},u=0;const d=async()=>{let g=!1;const b=S=>{Object.defineProperty(S,"signal",{enumerable:!0,get:()=>(t.signal.aborted?g=!0:t.signal.addEventListener("abort",()=>{g=!0}),t.signal)})},_=TC(t.options,t.fetchOptions),w=async(S,j,N)=>{if(g)return Promise.reject();if(j==null&&S.pages.length)return Promise.resolve(S);const E=(()=>{const R={client:t.client,queryKey:t.queryKey,pageParam:j,direction:N?"backward":"forward",meta:t.options.meta};return b(R),R})(),T=await _(E),{maxPages:I}=t.options,A=N?rL:nL;return{pages:A(S.pages,T,I),pageParams:A(S.pageParams,j,I)}};if(a&&i.length){const S=a==="backward",j=S?fL:kS,N={pages:i,pageParams:o},C=j(s,N);l=await w(N,C,S)}else{const S=e??i.length;do{const j=u===0?o[0]??s.initialPageParam:kS(s,l);if(u>0&&j==null)break;l=await w(l,j),u++}while(u<S)}return l};t.options.persister?t.fetchFn=()=>{var g,b;return(b=(g=t.options).persister)==null?void 0:b.call(g,d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=d}}}function kS(e,{pages:t,pageParams:r}){const s=t.length-1;return t.length>0?e.getNextPageParam(t[s],t,r[s],r):void 0}function fL(e,{pages:t,pageParams:r}){var s;return t.length>0?(s=e.getPreviousPageParam)==null?void 0:s.call(e,t[0],t,r[0],r):void 0}var qd,Ws,lr,Mo,Gs,mi,yC,mL=(yC=class extends OC{constructor(t){super();Ve(this,Gs);Ve(this,qd);Ve(this,Ws);Ve(this,lr);Ve(this,Mo);Oe(this,qd,t.client),this.mutationId=t.mutationId,Oe(this,lr,t.mutationCache),Oe(this,Ws,[]),this.state=t.state||MC(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){re(this,Ws).includes(t)||(re(this,Ws).push(t),this.clearGcTimeout(),re(this,lr).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Oe(this,Ws,re(this,Ws).filter(r=>r!==t)),this.scheduleGc(),re(this,lr).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){re(this,Ws).length||(this.state.status==="pending"?this.scheduleGc():re(this,lr).remove(this))}continue(){var t;return((t=re(this,Mo))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,l,u,d,p,f,m,x,y,g,b,_,w,S,j,N,C,E,T,I;const r=()=>{ft(this,Gs,mi).call(this,{type:"continue"})},s={client:re(this,qd),meta:this.options.meta,mutationKey:this.options.mutationKey};Oe(this,Mo,PC({fn:()=>this.options.mutationFn?this.options.mutationFn(t,s):Promise.reject(new Error("No mutationFn found")),onFail:(A,R)=>{ft(this,Gs,mi).call(this,{type:"failed",failureCount:A,error:R})},onPause:()=>{ft(this,Gs,mi).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>re(this,lr).canRun(this)}));const a=this.state.status==="pending",i=!re(this,Mo).canStart();try{if(a)r();else{ft(this,Gs,mi).call(this,{type:"pending",variables:t,isPaused:i}),await((l=(o=re(this,lr).config).onMutate)==null?void 0:l.call(o,t,this,s));const R=await((d=(u=this.options).onMutate)==null?void 0:d.call(u,t,s));R!==this.state.context&&ft(this,Gs,mi).call(this,{type:"pending",context:R,variables:t,isPaused:i})}const A=await re(this,Mo).start();return await((f=(p=re(this,lr).config).onSuccess)==null?void 0:f.call(p,A,t,this.state.context,this,s)),await((x=(m=this.options).onSuccess)==null?void 0:x.call(m,A,t,this.state.context,s)),await((g=(y=re(this,lr).config).onSettled)==null?void 0:g.call(y,A,null,this.state.variables,this.state.context,this,s)),await((_=(b=this.options).onSettled)==null?void 0:_.call(b,A,null,t,this.state.context,s)),ft(this,Gs,mi).call(this,{type:"success",data:A}),A}catch(A){try{throw await((S=(w=re(this,lr).config).onError)==null?void 0:S.call(w,A,t,this.state.context,this,s)),await((N=(j=this.options).onError)==null?void 0:N.call(j,A,t,this.state.context,s)),await((E=(C=re(this,lr).config).onSettled)==null?void 0:E.call(C,void 0,A,this.state.variables,this.state.context,this,s)),await((I=(T=this.options).onSettled)==null?void 0:I.call(T,void 0,A,t,this.state.context,s)),A}finally{ft(this,Gs,mi).call(this,{type:"error",error:A})}}finally{re(this,lr).runNext(this)}}},qd=new WeakMap,Ws=new WeakMap,lr=new WeakMap,Mo=new WeakMap,Gs=new WeakSet,mi=function(t){const r=s=>{switch(t.type){case"failed":return{...s,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...s,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:t.error,failureCount:s.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Pn.batch(()=>{re(this,Ws).forEach(s=>{s.onMutationUpdate(t)}),re(this,lr).notify({mutation:this,type:"updated",action:t})})},yC);function MC(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var ba,Cs,Fd,bC,pL=(bC=class extends Bc{constructor(t={}){super();Ve(this,ba);Ve(this,Cs);Ve(this,Fd);this.config=t,Oe(this,ba,new Set),Oe(this,Cs,new Map),Oe(this,Fd,0)}build(t,r,s){const a=new mL({client:t,mutationCache:this,mutationId:++jf(this,Fd)._,options:t.defaultMutationOptions(r),state:s});return this.add(a),a}add(t){re(this,ba).add(t);const r=Ef(t);if(typeof r=="string"){const s=re(this,Cs).get(r);s?s.push(t):re(this,Cs).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(re(this,ba).delete(t)){const r=Ef(t);if(typeof r=="string"){const s=re(this,Cs).get(r);if(s)if(s.length>1){const a=s.indexOf(t);a!==-1&&s.splice(a,1)}else s[0]===t&&re(this,Cs).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=Ef(t);if(typeof r=="string"){const s=re(this,Cs).get(r),a=s==null?void 0:s.find(i=>i.state.status==="pending");return!a||a===t}else return!0}runNext(t){var s;const r=Ef(t);if(typeof r=="string"){const a=(s=re(this,Cs).get(r))==null?void 0:s.find(i=>i!==t&&i.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Pn.batch(()=>{re(this,ba).forEach(t=>{this.notify({type:"removed",mutation:t})}),re(this,ba).clear(),re(this,Cs).clear()})}getAll(){return Array.from(re(this,ba))}find(t){const r={exact:!0,...t};return this.getAll().find(s=>yS(r,s))}findAll(t={}){return this.getAll().filter(r=>yS(t,r))}notify(t){Pn.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return Pn.batch(()=>Promise.all(t.map(r=>r.continue().catch(cr))))}},ba=new WeakMap,Cs=new WeakMap,Fd=new WeakMap,bC);function Ef(e){var t;return(t=e.options.scope)==null?void 0:t.id}var va,Si,Nr,wa,Pa,tm,uv,vC,xL=(vC=class extends Bc{constructor(r,s){super();Ve(this,Pa);Ve(this,va);Ve(this,Si);Ve(this,Nr);Ve(this,wa);Oe(this,va,r),this.setOptions(s),this.bindMethods(),ft(this,Pa,tm).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var a;const s=this.options;this.options=re(this,va).defaultMutationOptions(r),Rm(this.options,s)||re(this,va).getMutationCache().notify({type:"observerOptionsUpdated",mutation:re(this,Nr),observer:this}),s!=null&&s.mutationKey&&this.options.mutationKey&&Bo(s.mutationKey)!==Bo(this.options.mutationKey)?this.reset():((a=re(this,Nr))==null?void 0:a.state.status)==="pending"&&re(this,Nr).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=re(this,Nr))==null||r.removeObserver(this)}onMutationUpdate(r){ft(this,Pa,tm).call(this),ft(this,Pa,uv).call(this,r)}getCurrentResult(){return re(this,Si)}reset(){var r;(r=re(this,Nr))==null||r.removeObserver(this),Oe(this,Nr,void 0),ft(this,Pa,tm).call(this),ft(this,Pa,uv).call(this)}mutate(r,s){var a;return Oe(this,wa,s),(a=re(this,Nr))==null||a.removeObserver(this),Oe(this,Nr,re(this,va).getMutationCache().build(re(this,va),this.options)),re(this,Nr).addObserver(this),re(this,Nr).execute(r)}},va=new WeakMap,Si=new WeakMap,Nr=new WeakMap,wa=new WeakMap,Pa=new WeakSet,tm=function(){var s;const r=((s=re(this,Nr))==null?void 0:s.state)??MC();Oe(this,Si,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},uv=function(r){Pn.batch(()=>{var s,a,i,o,l,u,d,p;if(re(this,wa)&&this.hasListeners()){const f=re(this,Si).variables,m=re(this,Si).context,x={client:re(this,va),meta:this.options.meta,mutationKey:this.options.mutationKey};(r==null?void 0:r.type)==="success"?((a=(s=re(this,wa)).onSuccess)==null||a.call(s,r.data,f,m,x),(o=(i=re(this,wa)).onSettled)==null||o.call(i,r.data,null,f,m,x)):(r==null?void 0:r.type)==="error"&&((u=(l=re(this,wa)).onError)==null||u.call(l,r.error,f,m,x),(p=(d=re(this,wa)).onSettled)==null||p.call(d,void 0,r.error,f,m,x))}this.listeners.forEach(f=>{f(re(this,Si))})})},vC),Vs,wC,gL=(wC=class extends Bc{constructor(t={}){super();Ve(this,Vs);this.config=t,Oe(this,Vs,new Map)}build(t,r,s){const a=r.queryKey,i=r.queryHash??_w(a,r);let o=this.get(i);return o||(o=new cL({client:t,queryKey:a,queryHash:i,options:t.defaultQueryOptions(r),state:s,defaultOptions:t.getQueryDefaults(a)}),this.add(o)),o}add(t){re(this,Vs).has(t.queryHash)||(re(this,Vs).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=re(this,Vs).get(t.queryHash);r&&(t.destroy(),r===t&&re(this,Vs).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Pn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return re(this,Vs).get(t)}getAll(){return[...re(this,Vs).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(s=>gS(r,s))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(s=>gS(t,s)):r}notify(t){Pn.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){Pn.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Pn.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Vs=new WeakMap,wC),pn,ki,Ei,vc,wc,Ci,_c,jc,_C,yL=(_C=class{constructor(e={}){Ve(this,pn);Ve(this,ki);Ve(this,Ei);Ve(this,vc);Ve(this,wc);Ve(this,Ci);Ve(this,_c);Ve(this,jc);Oe(this,pn,e.queryCache||new gL),Oe(this,ki,e.mutationCache||new pL),Oe(this,Ei,e.defaultOptions||{}),Oe(this,vc,new Map),Oe(this,wc,new Map),Oe(this,Ci,0)}mount(){jf(this,Ci)._++,re(this,Ci)===1&&(Oe(this,_c,Nw.subscribe(async e=>{e&&(await this.resumePausedMutations(),re(this,pn).onFocus())})),Oe(this,jc,Am.subscribe(async e=>{e&&(await this.resumePausedMutations(),re(this,pn).onOnline())})))}unmount(){var e,t;jf(this,Ci)._--,re(this,Ci)===0&&((e=re(this,_c))==null||e.call(this),Oe(this,_c,void 0),(t=re(this,jc))==null||t.call(this),Oe(this,jc,void 0))}isFetching(e){return re(this,pn).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return re(this,ki).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=re(this,pn).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=re(this,pn).build(this,t),s=r.state.data;return s===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(Ri(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(s))}getQueriesData(e){return re(this,pn).findAll(e).map(({queryKey:t,state:r})=>{const s=r.data;return[t,s]})}setQueryData(e,t,r){const s=this.defaultQueryOptions({queryKey:e}),a=re(this,pn).get(s.queryHash),i=a==null?void 0:a.state.data,o=ZI(t,i);if(o!==void 0)return re(this,pn).build(this,s).setData(o,{...r,manual:!0})}setQueriesData(e,t,r){return Pn.batch(()=>re(this,pn).findAll(e).map(({queryKey:s})=>[s,this.setQueryData(s,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=re(this,pn).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=re(this,pn);Pn.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=re(this,pn);return Pn.batch(()=>(r.findAll(e).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},s=Pn.batch(()=>re(this,pn).findAll(e).map(a=>a.cancel(r)));return Promise.all(s).then(cr).catch(cr)}invalidateQueries(e,t={}){return Pn.batch(()=>(re(this,pn).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},s=Pn.batch(()=>re(this,pn).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let i=a.fetch(void 0,r);return r.throwOnError||(i=i.catch(cr)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(s).then(cr)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=re(this,pn).build(this,t);return r.isStaleByTime(Ri(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(cr).catch(cr)}fetchInfiniteQuery(e){return e.behavior=SS(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(cr).catch(cr)}ensureInfiniteQueryData(e){return e.behavior=SS(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Am.isOnline()?re(this,ki).resumePausedMutations():Promise.resolve()}getQueryCache(){return re(this,pn)}getMutationCache(){return re(this,ki)}getDefaultOptions(){return re(this,Ei)}setDefaultOptions(e){Oe(this,Ei,e)}setQueryDefaults(e,t){re(this,vc).set(Bo(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...re(this,vc).values()],r={};return t.forEach(s=>{hd(e,s.queryKey)&&Object.assign(r,s.defaultOptions)}),r}setMutationDefaults(e,t){re(this,wc).set(Bo(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...re(this,wc).values()],r={};return t.forEach(s=>{hd(e,s.mutationKey)&&Object.assign(r,s.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...re(this,Ei).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=_w(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===jw&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...re(this,Ei).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){re(this,pn).clear(),re(this,ki).clear()}},pn=new WeakMap,ki=new WeakMap,Ei=new WeakMap,vc=new WeakMap,wc=new WeakMap,Ci=new WeakMap,_c=new WeakMap,jc=new WeakMap,_C),DC=$.createContext(void 0),at=e=>{const t=$.useContext(DC);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},bL=({client:e,children:t})=>($.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),n.jsx(DC.Provider,{value:e,children:t})),$C=$.createContext(!1),vL=()=>$.useContext($C);$C.Provider;function wL(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var _L=$.createContext(wL()),jL=()=>$.useContext(_L),NL=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},SL=e=>{$.useEffect(()=>{e.clearReset()},[e])},kL=({result:e,errorResetBoundary:t,throwOnError:r,query:s,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&s&&(a&&e.data===void 0||RC(r,[e.error,s])),EL=e=>{if(e.suspense){const r=a=>a==="static"?a:Math.max(a??1e3,1e3),s=e.staleTime;e.staleTime=typeof s=="function"?(...a)=>r(s(...a)):r(s),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},CL=(e,t)=>e.isLoading&&e.isFetching&&!t,TL=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,ES=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function RL(e,t,r){var f,m,x,y,g;const s=vL(),a=jL(),i=at(),o=i.defaultQueryOptions(e);(m=(f=i.getDefaultOptions().queries)==null?void 0:f._experimental_beforeQuery)==null||m.call(f,o),o._optimisticResults=s?"isRestoring":"optimistic",EL(o),NL(o,a),SL(a);const l=!i.getQueryCache().get(o.queryHash),[u]=$.useState(()=>new t(i,o)),d=u.getOptimisticResult(o),p=!s&&e.subscribed!==!1;if($.useSyncExternalStore($.useCallback(b=>{const _=p?u.subscribe(Pn.batchCalls(b)):cr;return u.updateResult(),_},[u,p]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),$.useEffect(()=>{u.setOptions(o)},[o,u]),TL(o,d))throw ES(o,u,a);if(kL({result:d,errorResetBoundary:a,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw d.error;if((y=(x=i.getDefaultOptions().queries)==null?void 0:x._experimental_afterQuery)==null||y.call(x,o,d),o.experimental_prefetchInRender&&!Uo&&CL(d,s)){const b=l?ES(o,u,a):(g=i.getQueryCache().get(o.queryHash))==null?void 0:g.promise;b==null||b.catch(cr).finally(()=>{u.updateResult()})}return o.notifyOnChangeProps?d:u.trackResult(d)}function ie(e,t){return RL(e,uL)}function ke(e,t){const r=at(),[s]=$.useState(()=>new xL(r,e));$.useEffect(()=>{s.setOptions(e)},[s,e]);const a=$.useSyncExternalStore($.useCallback(o=>s.subscribe(Pn.batchCalls(o)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),i=$.useCallback((o,l)=>{s.mutate(o,l).catch(cr)},[s]);if(a.error&&RC(s.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:i,mutateAsync:a.mutate}}/**
 * react-router v7.11.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var CS="popstate";function AL(e={}){function t(s,a){let{pathname:i,search:o,hash:l}=s.location;return dv("",{pathname:i,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(s,a){return typeof a=="string"?a:fd(a)}return OL(t,r,null,e)}function rn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function zr(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function PL(){return Math.random().toString(36).substring(2,10)}function TS(e,t){return{usr:e.state,key:e.key,idx:t}}function dv(e,t,r=null,s){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Hc(t):t,state:r,key:t&&t.key||s||PL()}}function fd({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Hc(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let s=e.indexOf("?");s>=0&&(t.search=e.substring(s),e=e.substring(0,s)),e&&(t.pathname=e)}return t}function OL(e,t,r,s={}){let{window:a=document.defaultView,v5Compat:i=!1}=s,o=a.history,l="POP",u=null,d=p();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function p(){return(o.state||{idx:null}).idx}function f(){l="POP";let b=p(),_=b==null?null:b-d;d=b,u&&u({action:l,location:g.location,delta:_})}function m(b,_){l="PUSH";let w=dv(g.location,b,_);d=p()+1;let S=TS(w,d),j=g.createHref(w);try{o.pushState(S,"",j)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;a.location.assign(j)}i&&u&&u({action:l,location:g.location,delta:1})}function x(b,_){l="REPLACE";let w=dv(g.location,b,_);d=p();let S=TS(w,d),j=g.createHref(w);o.replaceState(S,"",j),i&&u&&u({action:l,location:g.location,delta:0})}function y(b){return IL(b)}let g={get action(){return l},get location(){return e(a,o)},listen(b){if(u)throw new Error("A history only accepts one active listener");return a.addEventListener(CS,f),u=b,()=>{a.removeEventListener(CS,f),u=null}},createHref(b){return t(a,b)},createURL:y,encodeLocation(b){let _=y(b);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:m,replace:x,go(b){return o.go(b)}};return g}function IL(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),rn(r,"No window.location.(origin|href) available to create URL");let s=typeof e=="string"?e:fd(e);return s=s.replace(/ $/,"%20"),!t&&s.startsWith("//")&&(s=r+s),new URL(s,r)}function qC(e,t,r="/"){return LL(e,t,r,!1)}function LL(e,t,r,s){let a=typeof t=="string"?Hc(t):t,i=Oa(a.pathname||"/",r);if(i==null)return null;let o=FC(e);ML(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let d=GL(i);l=zL(o[u],d,s)}return l}function FC(e,t=[],r=[],s="",a=!1){let i=(o,l,u=a,d)=>{let p={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(s)&&u)return;rn(p.relativePath.startsWith(s),`Absolute route path "${p.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(s.length)}let f=Sa([s,p.relativePath]),m=r.concat(p);o.children&&o.children.length>0&&(rn(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),FC(o.children,t,m,f,u)),!(o.path==null&&!o.index)&&t.push({path:f,score:HL(f,o.index),routesMeta:m})};return e.forEach((o,l)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))i(o,l);else for(let d of UC(o.path))i(o,l,!0,d)}),t}function UC(e){let t=e.split("/");if(t.length===0)return[];let[r,...s]=t,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(s.length===0)return a?[i,""]:[i];let o=UC(s.join("/")),l=[];return l.push(...o.map(u=>u===""?i:[i,u].join("/"))),a&&l.push(...o),l.map(u=>e.startsWith("/")&&u===""?"/":u)}function ML(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:KL(t.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}var DL=/^:[\w-]+$/,$L=3,qL=2,FL=1,UL=10,BL=-2,RS=e=>e==="*";function HL(e,t){let r=e.split("/"),s=r.length;return r.some(RS)&&(s+=BL),t&&(s+=qL),r.filter(a=>!RS(a)).reduce((a,i)=>a+(DL.test(i)?$L:i===""?FL:UL),s)}function KL(e,t){return e.length===t.length&&e.slice(0,-1).every((s,a)=>s===t[a])?e[e.length-1]-t[t.length-1]:0}function zL(e,t,r=!1){let{routesMeta:s}=e,a={},i="/",o=[];for(let l=0;l<s.length;++l){let u=s[l],d=l===s.length-1,p=i==="/"?t:t.slice(i.length)||"/",f=Pm({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},p),m=u.route;if(!f&&d&&r&&!s[s.length-1].route.index&&(f=Pm({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},p)),!f)return null;Object.assign(a,f.params),o.push({params:a,pathname:Sa([i,f.pathname]),pathnameBase:JL(Sa([i,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(i=Sa([i,f.pathnameBase]))}return o}function Pm(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,s]=WL(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:s.reduce((d,{paramName:p,isOptional:f},m)=>{if(p==="*"){let y=l[m]||"";o=i.slice(0,i.length-y.length).replace(/(.)\/+$/,"$1")}const x=l[m];return f&&!x?d[p]=void 0:d[p]=(x||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:e}}function WL(e,t=!1,r=!0){zr(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let s=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(s.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(s.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),s]}function GL(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return zr(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Oa(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,s=e.charAt(r);return s&&s!=="/"?null:e.slice(r)||"/"}var BC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,VL=e=>BC.test(e);function QL(e,t="/"){let{pathname:r,search:s="",hash:a=""}=typeof e=="string"?Hc(e):e,i;if(r)if(VL(r))i=r;else{if(r.includes("//")){let o=r;r=r.replace(/\/\/+/g,"/"),zr(!1,`Pathnames cannot have embedded double slashes - normalizing ${o} -> ${r}`)}r.startsWith("/")?i=AS(r.substring(1),"/"):i=AS(r,t)}else i=t;return{pathname:i,search:XL(s),hash:ZL(a)}}function AS(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function x0(e,t,r,s){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function YL(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function kw(e){let t=YL(e);return t.map((r,s)=>s===t.length-1?r.pathname:r.pathnameBase)}function Ew(e,t,r,s=!1){let a;typeof e=="string"?a=Hc(e):(a={...e},rn(!a.pathname||!a.pathname.includes("?"),x0("?","pathname","search",a)),rn(!a.pathname||!a.pathname.includes("#"),x0("#","pathname","hash",a)),rn(!a.search||!a.search.includes("#"),x0("#","search","hash",a)));let i=e===""||a.pathname==="",o=i?"/":a.pathname,l;if(o==null)l=r;else{let f=t.length-1;if(!s&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),f-=1;a.pathname=m.join("/")}l=f>=0?t[f]:"/"}let u=QL(a,l),d=o&&o!=="/"&&o.endsWith("/"),p=(i||o===".")&&r.endsWith("/");return!u.pathname.endsWith("/")&&(d||p)&&(u.pathname+="/"),u}var Sa=e=>e.join("/").replace(/\/\/+/g,"/"),JL=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),XL=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,ZL=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,eM=class{constructor(e,t,r,s=!1){this.status=e,this.statusText=t||"",this.internal=s,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}};function tM(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function nM(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var HC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function KC(e,t){let r=e;if(typeof r!="string"||!BC.test(r))return{absoluteURL:void 0,isExternal:!1,to:r};let s=r,a=!1;if(HC)try{let i=new URL(window.location.href),o=r.startsWith("//")?new URL(i.protocol+r):new URL(r),l=Oa(o.pathname,t);o.origin===i.origin&&l!=null?r=l+o.search+o.hash:a=!0}catch{zr(!1,`<Link to="${r}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:s,isExternal:a,to:r}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var zC=["POST","PUT","PATCH","DELETE"];new Set(zC);var rM=["GET",...zC];new Set(rM);var Kc=$.createContext(null);Kc.displayName="DataRouter";var yp=$.createContext(null);yp.displayName="DataRouterState";var sM=$.createContext(!1),WC=$.createContext({isTransitioning:!1});WC.displayName="ViewTransition";var aM=$.createContext(new Map);aM.displayName="Fetchers";var iM=$.createContext(null);iM.displayName="Await";var Wr=$.createContext(null);Wr.displayName="Navigation";var Ud=$.createContext(null);Ud.displayName="Location";var hs=$.createContext({outlet:null,matches:[],isDataRoute:!1});hs.displayName="Route";var Cw=$.createContext(null);Cw.displayName="RouteError";var GC="REACT_ROUTER_ERROR",oM="REDIRECT",lM="ROUTE_ERROR_RESPONSE";function cM(e){if(e.startsWith(`${GC}:${oM}:{`))try{let t=JSON.parse(e.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function uM(e){if(e.startsWith(`${GC}:${lM}:{`))try{let t=JSON.parse(e.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new eM(t.status,t.statusText,t.data)}catch{}}function dM(e,{relative:t}={}){rn(zc(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:s}=$.useContext(Wr),{hash:a,pathname:i,search:o}=Bd(e,{relative:t}),l=i;return r!=="/"&&(l=i==="/"?r:Sa([r,i])),s.createHref({pathname:l,search:o,hash:a})}function zc(){return $.useContext(Ud)!=null}function Gr(){return rn(zc(),"useLocation() may be used only in the context of a <Router> component."),$.useContext(Ud).location}var VC="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function QC(e){$.useContext(Wr).static||$.useLayoutEffect(e)}function $s(){let{isDataRoute:e}=$.useContext(hs);return e?kM():hM()}function hM(){rn(zc(),"useNavigate() may be used only in the context of a <Router> component.");let e=$.useContext(Kc),{basename:t,navigator:r}=$.useContext(Wr),{matches:s}=$.useContext(hs),{pathname:a}=Gr(),i=JSON.stringify(kw(s)),o=$.useRef(!1);return QC(()=>{o.current=!0}),$.useCallback((u,d={})=>{if(zr(o.current,VC),!o.current)return;if(typeof u=="number"){r.go(u);return}let p=Ew(u,JSON.parse(i),a,d.relative==="path");e==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:Sa([t,p.pathname])),(d.replace?r.replace:r.push)(p,d.state,d)},[t,r,i,a,e])}var fM=$.createContext(null);function mM(e){let t=$.useContext(hs).outlet;return $.useMemo(()=>t&&$.createElement(fM.Provider,{value:e},t),[t,e])}function Wn(){let{matches:e}=$.useContext(hs),t=e[e.length-1];return t?t.params:{}}function Bd(e,{relative:t}={}){let{matches:r}=$.useContext(hs),{pathname:s}=Gr(),a=JSON.stringify(kw(r));return $.useMemo(()=>Ew(e,JSON.parse(a),s,t==="path"),[e,a,s,t])}function pM(e,t){return YC(e,t)}function YC(e,t,r,s,a){var w;rn(zc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=$.useContext(Wr),{matches:o}=$.useContext(hs),l=o[o.length-1],u=l?l.params:{},d=l?l.pathname:"/",p=l?l.pathnameBase:"/",f=l&&l.route;{let S=f&&f.path||"";XC(d,!f||S.endsWith("*")||S.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${S}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${S}"> to <Route path="${S==="/"?"*":`${S}/*`}">.`)}let m=Gr(),x;if(t){let S=typeof t=="string"?Hc(t):t;rn(p==="/"||((w=S.pathname)==null?void 0:w.startsWith(p)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${S.pathname}" was given in the \`location\` prop.`),x=S}else x=m;let y=x.pathname||"/",g=y;if(p!=="/"){let S=p.replace(/^\//,"").split("/");g="/"+y.replace(/^\//,"").split("/").slice(S.length).join("/")}let b=qC(e,{pathname:g});zr(f||b!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),zr(b==null||b[b.length-1].route.element!==void 0||b[b.length-1].route.Component!==void 0||b[b.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=vM(b&&b.map(S=>Object.assign({},S,{params:Object.assign({},u,S.params),pathname:Sa([p,i.encodeLocation?i.encodeLocation(S.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?p:Sa([p,i.encodeLocation?i.encodeLocation(S.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:S.pathnameBase])})),o,r,s,a);return t&&_?$.createElement(Ud.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},_):_}function xM(){let e=SM(),t=tM(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:s},i={padding:"2px 4px",backgroundColor:s},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=$.createElement($.Fragment,null,$.createElement("p",null," Hey developer "),$.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",$.createElement("code",{style:i},"ErrorBoundary")," or"," ",$.createElement("code",{style:i},"errorElement")," prop on your route.")),$.createElement($.Fragment,null,$.createElement("h2",null,"Unexpected Application Error!"),$.createElement("h3",{style:{fontStyle:"italic"}},t),r?$.createElement("pre",{style:a},r):null,o)}var gM=$.createElement(xM,null),JC=class extends $.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){const r=uM(e.digest);r&&(e=r)}let t=e!==void 0?$.createElement(hs.Provider,{value:this.props.routeContext},$.createElement(Cw.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?$.createElement(yM,{error:e},t):t}};JC.contextType=sM;var g0=new WeakMap;function yM({children:e,error:t}){let{basename:r}=$.useContext(Wr);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let s=cM(t.digest);if(s){let a=g0.get(t);if(a)throw a;let i=KC(s.location,r);if(HC&&!g0.get(t))if(i.isExternal||s.reloadDocument)window.location.href=i.absoluteURL||i.to;else{const o=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(i.to,{replace:s.replace}));throw g0.set(t,o),o}return $.createElement("meta",{httpEquiv:"refresh",content:`0;url=${i.absoluteURL||i.to}`})}}return e}function bM({routeContext:e,match:t,children:r}){let s=$.useContext(Kc);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),$.createElement(hs.Provider,{value:e},r)}function vM(e,t=[],r=null,s=null,a=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let i=e,o=r==null?void 0:r.errors;if(o!=null){let p=i.findIndex(f=>f.route.id&&(o==null?void 0:o[f.route.id])!==void 0);rn(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,p+1))}let l=!1,u=-1;if(r)for(let p=0;p<i.length;p++){let f=i[p];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=p),f.route.id){let{loaderData:m,errors:x}=r,y=f.route.loader&&!m.hasOwnProperty(f.route.id)&&(!x||x[f.route.id]===void 0);if(f.route.lazy||y){l=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}let d=r&&s?(p,f)=>{var m,x;s(p,{location:r.location,params:((x=(m=r.matches)==null?void 0:m[0])==null?void 0:x.params)??{},unstable_pattern:nM(r.matches),errorInfo:f})}:void 0;return i.reduceRight((p,f,m)=>{let x,y=!1,g=null,b=null;r&&(x=o&&f.route.id?o[f.route.id]:void 0,g=f.route.errorElement||gM,l&&(u<0&&m===0?(XC("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,b=null):u===m&&(y=!0,b=f.route.hydrateFallbackElement||null)));let _=t.concat(i.slice(0,m+1)),w=()=>{let S;return x?S=g:y?S=b:f.route.Component?S=$.createElement(f.route.Component,null):f.route.element?S=f.route.element:S=p,$.createElement(bM,{match:f,routeContext:{outlet:p,matches:_,isDataRoute:r!=null},children:S})};return r&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?$.createElement(JC,{location:r.location,revalidation:r.revalidation,component:g,error:x,children:w(),routeContext:{outlet:null,matches:_,isDataRoute:!0},onError:d}):w()},null)}function Tw(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function wM(e){let t=$.useContext(Kc);return rn(t,Tw(e)),t}function _M(e){let t=$.useContext(yp);return rn(t,Tw(e)),t}function jM(e){let t=$.useContext(hs);return rn(t,Tw(e)),t}function Rw(e){let t=jM(e),r=t.matches[t.matches.length-1];return rn(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function NM(){return Rw("useRouteId")}function SM(){var s;let e=$.useContext(Cw),t=_M("useRouteError"),r=Rw("useRouteError");return e!==void 0?e:(s=t.errors)==null?void 0:s[r]}function kM(){let{router:e}=wM("useNavigate"),t=Rw("useNavigate"),r=$.useRef(!1);return QC(()=>{r.current=!0}),$.useCallback(async(a,i={})=>{zr(r.current,VC),r.current&&(typeof a=="number"?await e.navigate(a):await e.navigate(a,{fromRouteId:t,...i}))},[e,t])}var PS={};function XC(e,t,r){!t&&!PS[e]&&(PS[e]=!0,zr(!1,r))}$.memo(EM);function EM({routes:e,future:t,state:r,onError:s}){return YC(e,void 0,r,s,t)}function Js({to:e,replace:t,state:r,relative:s}){rn(zc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=$.useContext(Wr);zr(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=$.useContext(hs),{pathname:o}=Gr(),l=$s(),u=Ew(e,kw(i),o,s==="path"),d=JSON.stringify(u);return $.useEffect(()=>{l(JSON.parse(d),{replace:t,state:r,relative:s})},[l,d,s,t,r]),null}function Aw(e){return mM(e.context)}function Te(e){rn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function CM({basename:e="/",children:t=null,location:r,navigationType:s="POP",navigator:a,static:i=!1,unstable_useTransitions:o}){rn(!zc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=e.replace(/^\/*/,"/"),u=$.useMemo(()=>({basename:l,navigator:a,static:i,unstable_useTransitions:o,future:{}}),[l,a,i,o]);typeof r=="string"&&(r=Hc(r));let{pathname:d="/",search:p="",hash:f="",state:m=null,key:x="default"}=r,y=$.useMemo(()=>{let g=Oa(d,l);return g==null?null:{location:{pathname:g,search:p,hash:f,state:m,key:x},navigationType:s}},[l,d,p,f,m,x,s]);return zr(y!=null,`<Router basename="${l}"> is not able to match the URL "${d}${p}${f}" because it does not start with the basename, so the <Router> won't render anything.`),y==null?null:$.createElement(Wr.Provider,{value:u},$.createElement(Ud.Provider,{children:t,value:y}))}function TM({children:e,location:t}){return pM(hv(e),t)}function hv(e,t=[]){let r=[];return $.Children.forEach(e,(s,a)=>{if(!$.isValidElement(s))return;let i=[...t,a];if(s.type===$.Fragment){r.push.apply(r,hv(s.props.children,i));return}rn(s.type===Te,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),rn(!s.props.index||!s.props.children,"An index route cannot have child routes.");let o={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=hv(s.props.children,i)),r.push(o)}),r}var nm="get",rm="application/x-www-form-urlencoded";function bp(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function RM(e){return bp(e)&&e.tagName.toLowerCase()==="button"}function AM(e){return bp(e)&&e.tagName.toLowerCase()==="form"}function PM(e){return bp(e)&&e.tagName.toLowerCase()==="input"}function OM(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function IM(e,t){return e.button===0&&(!t||t==="_self")&&!OM(e)}function fv(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let s=e[r];return t.concat(Array.isArray(s)?s.map(a=>[r,a]):[[r,s]])},[]))}function LM(e,t){let r=fv(e);return t&&t.forEach((s,a)=>{r.has(a)||t.getAll(a).forEach(i=>{r.append(a,i)})}),r}var Cf=null;function MM(){if(Cf===null)try{new FormData(document.createElement("form"),0),Cf=!1}catch{Cf=!0}return Cf}var DM=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function y0(e){return e!=null&&!DM.has(e)?(zr(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${rm}"`),null):e}function $M(e,t){let r,s,a,i,o;if(AM(e)){let l=e.getAttribute("action");s=l?Oa(l,t):null,r=e.getAttribute("method")||nm,a=y0(e.getAttribute("enctype"))||rm,i=new FormData(e)}else if(RM(e)||PM(e)&&(e.type==="submit"||e.type==="image")){let l=e.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=e.getAttribute("formaction")||l.getAttribute("action");if(s=u?Oa(u,t):null,r=e.getAttribute("formmethod")||l.getAttribute("method")||nm,a=y0(e.getAttribute("formenctype"))||y0(l.getAttribute("enctype"))||rm,i=new FormData(l,e),!MM()){let{name:d,type:p,value:f}=e;if(p==="image"){let m=d?`${d}.`:"";i.append(`${m}x`,"0"),i.append(`${m}y`,"0")}else d&&i.append(d,f)}}else{if(bp(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=nm,s=null,a=rm,o=e}return i&&a==="text/plain"&&(o=i,i=void 0),{action:s,method:r.toLowerCase(),encType:a,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Pw(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function qM(e,t,r){let s=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return s.pathname==="/"?s.pathname=`_root.${r}`:t&&Oa(s.pathname,t)==="/"?s.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${r}`,s}async function FM(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function UM(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function BM(e,t,r){let s=await Promise.all(e.map(async a=>{let i=t.routes[a.route.id];if(i){let o=await FM(i,r);return o.links?o.links():[]}return[]}));return WM(s.flat(1).filter(UM).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function OS(e,t,r,s,a,i){let o=(u,d)=>r[d]?u.route.id!==r[d].route.id:!0,l=(u,d)=>{var p;return r[d].pathname!==u.pathname||((p=r[d].route.path)==null?void 0:p.endsWith("*"))&&r[d].params["*"]!==u.params["*"]};return i==="assets"?t.filter((u,d)=>o(u,d)||l(u,d)):i==="data"?t.filter((u,d)=>{var f;let p=s.routes[u.route.id];if(!p||!p.hasLoader)return!1;if(o(u,d)||l(u,d))return!0;if(u.route.shouldRevalidate){let m=u.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((f=r[0])==null?void 0:f.params)||{},nextUrl:new URL(e,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function HM(e,t,{includeHydrateFallback:r}={}){return KM(e.map(s=>{let a=t.routes[s.route.id];if(!a)return[];let i=[a.module];return a.clientActionModule&&(i=i.concat(a.clientActionModule)),a.clientLoaderModule&&(i=i.concat(a.clientLoaderModule)),r&&a.hydrateFallbackModule&&(i=i.concat(a.hydrateFallbackModule)),a.imports&&(i=i.concat(a.imports)),i}).flat(1))}function KM(e){return[...new Set(e)]}function zM(e){let t={},r=Object.keys(e).sort();for(let s of r)t[s]=e[s];return t}function WM(e,t){let r=new Set;return new Set(t),e.reduce((s,a)=>{let i=JSON.stringify(zM(a));return r.has(i)||(r.add(i),s.push({key:i,link:a})),s},[])}function ZC(){let e=$.useContext(Kc);return Pw(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function GM(){let e=$.useContext(yp);return Pw(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Ow=$.createContext(void 0);Ow.displayName="FrameworkContext";function eT(){let e=$.useContext(Ow);return Pw(e,"You must render this element inside a <HydratedRouter> element"),e}function VM(e,t){let r=$.useContext(Ow),[s,a]=$.useState(!1),[i,o]=$.useState(!1),{onFocus:l,onBlur:u,onMouseEnter:d,onMouseLeave:p,onTouchStart:f}=t,m=$.useRef(null);$.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let g=_=>{_.forEach(w=>{o(w.isIntersecting)})},b=new IntersectionObserver(g,{threshold:.5});return m.current&&b.observe(m.current),()=>{b.disconnect()}}},[e]),$.useEffect(()=>{if(s){let g=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(g)}}},[s]);let x=()=>{a(!0)},y=()=>{a(!1),o(!1)};return r?e!=="intent"?[i,m,{}]:[i,m,{onFocus:Ku(l,x),onBlur:Ku(u,y),onMouseEnter:Ku(d,x),onMouseLeave:Ku(p,y),onTouchStart:Ku(f,x)}]:[!1,m,{}]}function Ku(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function QM({page:e,...t}){let{router:r}=ZC(),s=$.useMemo(()=>qC(r.routes,e,r.basename),[r.routes,e,r.basename]);return s?$.createElement(JM,{page:e,matches:s,...t}):null}function YM(e){let{manifest:t,routeModules:r}=eT(),[s,a]=$.useState([]);return $.useEffect(()=>{let i=!1;return BM(e,t,r).then(o=>{i||a(o)}),()=>{i=!0}},[e,t,r]),s}function JM({page:e,matches:t,...r}){let s=Gr(),{manifest:a,routeModules:i}=eT(),{basename:o}=ZC(),{loaderData:l,matches:u}=GM(),d=$.useMemo(()=>OS(e,t,u,a,s,"data"),[e,t,u,a,s]),p=$.useMemo(()=>OS(e,t,u,a,s,"assets"),[e,t,u,a,s]),f=$.useMemo(()=>{if(e===s.pathname+s.search+s.hash)return[];let y=new Set,g=!1;if(t.forEach(_=>{var S;let w=a.routes[_.route.id];!w||!w.hasLoader||(!d.some(j=>j.route.id===_.route.id)&&_.route.id in l&&((S=i[_.route.id])!=null&&S.shouldRevalidate)||w.hasClientLoader?g=!0:y.add(_.route.id))}),y.size===0)return[];let b=qM(e,o,"data");return g&&y.size>0&&b.searchParams.set("_routes",t.filter(_=>y.has(_.route.id)).map(_=>_.route.id).join(",")),[b.pathname+b.search]},[o,l,s,a,d,t,e,i]),m=$.useMemo(()=>HM(p,a),[p,a]),x=YM(p);return $.createElement($.Fragment,null,f.map(y=>$.createElement("link",{key:y,rel:"prefetch",as:"fetch",href:y,...r})),m.map(y=>$.createElement("link",{key:y,rel:"modulepreload",href:y,...r})),x.map(({key:y,link:g})=>$.createElement("link",{key:y,nonce:r.nonce,...g})))}function XM(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var ZM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{ZM&&(window.__reactRouterVersion="7.11.0")}catch{}function e8({basename:e,children:t,unstable_useTransitions:r,window:s}){let a=$.useRef();a.current==null&&(a.current=AL({window:s,v5Compat:!0}));let i=a.current,[o,l]=$.useState({action:i.action,location:i.location}),u=$.useCallback(d=>{r===!1?l(d):$.startTransition(()=>l(d))},[r]);return $.useLayoutEffect(()=>i.listen(u),[i,u]),$.createElement(CM,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:i,unstable_useTransitions:r})}var tT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,se=$.forwardRef(function({onClick:t,discover:r="render",prefetch:s="none",relative:a,reloadDocument:i,replace:o,state:l,target:u,to:d,preventScrollReset:p,viewTransition:f,unstable_defaultShouldRevalidate:m,...x},y){let{basename:g,unstable_useTransitions:b}=$.useContext(Wr),_=typeof d=="string"&&tT.test(d),w=KC(d,g);d=w.to;let S=dM(d,{relative:a}),[j,N,C]=VM(s,x),E=s8(d,{replace:o,state:l,target:u,preventScrollReset:p,relative:a,viewTransition:f,unstable_defaultShouldRevalidate:m,unstable_useTransitions:b});function T(A){t&&t(A),A.defaultPrevented||E(A)}let I=$.createElement("a",{...x,...C,href:w.absoluteURL||S,onClick:w.isExternal||i?t:T,ref:XM(y,N),target:u,"data-discover":!_&&r==="render"?"true":void 0});return j&&!_?$.createElement($.Fragment,null,I,$.createElement(QM,{page:S})):I});se.displayName="Link";var t8=$.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:s="",end:a=!1,style:i,to:o,viewTransition:l,children:u,...d},p){let f=Bd(o,{relative:d.relative}),m=Gr(),x=$.useContext(yp),{navigator:y,basename:g}=$.useContext(Wr),b=x!=null&&c8(f)&&l===!0,_=y.encodeLocation?y.encodeLocation(f).pathname:f.pathname,w=m.pathname,S=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;r||(w=w.toLowerCase(),S=S?S.toLowerCase():null,_=_.toLowerCase()),S&&g&&(S=Oa(S,g)||S);const j=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let N=w===_||!a&&w.startsWith(_)&&w.charAt(j)==="/",C=S!=null&&(S===_||!a&&S.startsWith(_)&&S.charAt(_.length)==="/"),E={isActive:N,isPending:C,isTransitioning:b},T=N?t:void 0,I;typeof s=="function"?I=s(E):I=[s,N?"active":null,C?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let A=typeof i=="function"?i(E):i;return $.createElement(se,{...d,"aria-current":T,className:I,ref:p,style:A,to:o,viewTransition:l},typeof u=="function"?u(E):u)});t8.displayName="NavLink";var n8=$.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:s,replace:a,state:i,method:o=nm,action:l,onSubmit:u,relative:d,preventScrollReset:p,viewTransition:f,unstable_defaultShouldRevalidate:m,...x},y)=>{let{unstable_useTransitions:g}=$.useContext(Wr),b=o8(),_=l8(l,{relative:d}),w=o.toLowerCase()==="get"?"get":"post",S=typeof l=="string"&&tT.test(l),j=N=>{if(u&&u(N),N.defaultPrevented)return;N.preventDefault();let C=N.nativeEvent.submitter,E=(C==null?void 0:C.getAttribute("formmethod"))||o,T=()=>b(C||N.currentTarget,{fetcherKey:t,method:E,navigate:r,replace:a,state:i,relative:d,preventScrollReset:p,viewTransition:f,unstable_defaultShouldRevalidate:m});g&&r!==!1?$.startTransition(()=>T()):T()};return $.createElement("form",{ref:y,method:w,action:_,onSubmit:s?u:j,...x,"data-discover":!S&&e==="render"?"true":void 0})});n8.displayName="Form";function r8(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function nT(e){let t=$.useContext(Kc);return rn(t,r8(e)),t}function s8(e,{target:t,replace:r,state:s,preventScrollReset:a,relative:i,viewTransition:o,unstable_defaultShouldRevalidate:l,unstable_useTransitions:u}={}){let d=$s(),p=Gr(),f=Bd(e,{relative:i});return $.useCallback(m=>{if(IM(m,t)){m.preventDefault();let x=r!==void 0?r:fd(p)===fd(f),y=()=>d(e,{replace:x,state:s,preventScrollReset:a,relative:i,viewTransition:o,unstable_defaultShouldRevalidate:l});u?$.startTransition(()=>y()):y()}},[p,d,f,r,s,t,e,a,i,o,l,u])}function Hd(e){zr(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=$.useRef(fv(e)),r=$.useRef(!1),s=Gr(),a=$.useMemo(()=>LM(s.search,r.current?null:t.current),[s.search]),i=$s(),o=$.useCallback((l,u)=>{const d=fv(typeof l=="function"?l(new URLSearchParams(a)):l);r.current=!0,i("?"+d,u)},[i,a]);return[a,o]}var a8=0,i8=()=>`__${String(++a8)}__`;function o8(){let{router:e}=nT("useSubmit"),{basename:t}=$.useContext(Wr),r=NM(),s=e.fetch,a=e.navigate;return $.useCallback(async(i,o={})=>{let{action:l,method:u,encType:d,formData:p,body:f}=$M(i,t);if(o.navigate===!1){let m=o.fetcherKey||i8();await s(m,r,o.action||l,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:p,body:f,formMethod:o.method||u,formEncType:o.encType||d,flushSync:o.flushSync})}else await a(o.action||l,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:p,body:f,formMethod:o.method||u,formEncType:o.encType||d,replace:o.replace,state:o.state,fromRouteId:r,flushSync:o.flushSync,viewTransition:o.viewTransition})},[s,a,t,r])}function l8(e,{relative:t}={}){let{basename:r}=$.useContext(Wr),s=$.useContext(hs);rn(s,"useFormAction must be used inside a RouteContext");let[a]=s.matches.slice(-1),i={...Bd(e||".",{relative:t})},o=Gr();if(e==null){i.search=o.search;let l=new URLSearchParams(i.search),u=l.getAll("index");if(u.some(p=>p==="")){l.delete("index"),u.filter(f=>f).forEach(f=>l.append("index",f));let p=l.toString();i.search=p?`?${p}`:""}}return(!e||e===".")&&a.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(i.pathname=i.pathname==="/"?r:Sa([r,i.pathname])),fd(i)}function c8(e,{relative:t}={}){let r=$.useContext(WC);rn(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=nT("useViewTransitionState"),a=Bd(e,{relative:t});if(!r.isTransitioning)return!1;let i=Oa(r.currentLocation.pathname,s)||r.currentLocation.pathname,o=Oa(r.nextLocation.pathname,s)||r.nextLocation.pathname;return Pm(a.pathname,o)!=null||Pm(a.pathname,i)!=null}function vp(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(r[s[a]]=e[s[a]]);return r}function u8(e,t,r,s){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(p){try{d(s.next(p))}catch(f){o(f)}}function u(p){try{d(s.throw(p))}catch(f){o(f)}}function d(p){p.done?i(p.value):a(p.value).then(l,u)}d((s=s.apply(e,t||[])).next())})}const d8=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class Iw extends Error{constructor(t,r="FunctionsError",s){super(t),this.name=r,this.context=s}}class h8 extends Iw{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class IS extends Iw{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class LS extends Iw{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var mv;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(mv||(mv={}));class f8{constructor(t,{headers:r={},customFetch:s,region:a=mv.Any}={}){this.url=t,this.headers=r,this.region=a,this.fetch=d8(s)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return u8(this,arguments,void 0,function*(r,s={}){var a;let i,o;try{const{headers:l,method:u,body:d,signal:p,timeout:f}=s;let m={},{region:x}=s;x||(x=this.region);const y=new URL(`${this.url}/${r}`);x&&x!=="any"&&(m["x-region"]=x,y.searchParams.set("forceFunctionRegion",x));let g;d&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(m["Content-Type"]="application/octet-stream",g=d):typeof d=="string"?(m["Content-Type"]="text/plain",g=d):typeof FormData<"u"&&d instanceof FormData?g=d:(m["Content-Type"]="application/json",g=JSON.stringify(d)):g=d;let b=p;f&&(o=new AbortController,i=setTimeout(()=>o.abort(),f),p?(b=o.signal,p.addEventListener("abort",()=>o.abort())):b=o.signal);const _=yield this.fetch(y.toString(),{method:u||"POST",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),l),body:g,signal:b}).catch(N=>{throw new h8(N)}),w=_.headers.get("x-relay-error");if(w&&w==="true")throw new IS(_);if(!_.ok)throw new LS(_);let S=((a=_.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),j;return S==="application/json"?j=yield _.json():S==="application/octet-stream"||S==="application/pdf"?j=yield _.blob():S==="text/event-stream"?j=_:S==="multipart/form-data"?j=yield _.formData():j=yield _.text(),{data:j,error:null,response:_}}catch(l){return{data:null,error:l,response:l instanceof LS||l instanceof IS?l.context:void 0}}finally{i&&clearTimeout(i)}})}}var m8=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},p8=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let a=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let o=null,l=null,u=null,d=i.status,p=i.statusText;if(i.ok){var f,m;if(r.method!=="HEAD"){var x;const _=await i.text();_===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((x=r.headers.get("Accept"))===null||x===void 0)&&x.includes("application/vnd.pgrst.plan+text"))?l=_:l=JSON.parse(_))}const g=(f=r.headers.get("Prefer"))===null||f===void 0?void 0:f.match(/count=(exact|planned|estimated)/),b=(m=i.headers.get("content-range"))===null||m===void 0?void 0:m.split("/");g&&b&&b.length>1&&(u=parseInt(b[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(l)&&(l.length>1?(o={code:"PGRST116",details:`Results contain ${l.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},l=null,u=null,d=406,p="Not Acceptable"):l.length===1?l=l[0]:l=null)}else{var y;const g=await i.text();try{o=JSON.parse(g),Array.isArray(o)&&i.status===404&&(l=[],o=null,d=200,p="OK")}catch{i.status===404&&g===""?(d=204,p="No Content"):o={message:g}}if(o&&r.isMaybeSingle&&(!(o==null||(y=o.details)===null||y===void 0)&&y.includes("0 rows"))&&(o=null,d=200,p="OK"),o&&r.shouldThrowOnError)throw new m8(o)}return{error:o,data:l,count:u,status:d,statusText:p}});return this.shouldThrowOnError||(a=a.catch(i=>{var o;let l="";const u=i==null?void 0:i.cause;if(u){var d,p,f,m;const y=(d=u==null?void 0:u.message)!==null&&d!==void 0?d:"",g=(p=u==null?void 0:u.code)!==null&&p!==void 0?p:"";l=`${(f=i==null?void 0:i.name)!==null&&f!==void 0?f:"FetchError"}: ${i==null?void 0:i.message}`,l+=`

Caused by: ${(m=u==null?void 0:u.name)!==null&&m!==void 0?m:"Error"}: ${y}`,g&&(l+=` (${g})`),u!=null&&u.stack&&(l+=`
${u.stack}`)}else{var x;l=(x=i==null?void 0:i.stack)!==null&&x!==void 0?x:""}return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:l,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),a.then(e,t)}returns(){return this}overrideTypes(){return this}},x8=class extends p8{select(e){let t=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!t?"":(s==='"'&&(t=!t),s)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:s,referencedTable:a=s}={}){const i=a?`${a}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:s=r}={}){const a=typeof s>"u"?"offset":`${s}.offset`,i=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(i,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:s=!1,wal:a=!1,format:i="text"}={}){var o;const l=[e?"analyze":null,t?"verbose":null,r?"settings":null,s?"buffers":null,a?"wal":null].filter(Boolean).join("|"),u=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${u}"; options=${l};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const MS=new RegExp("[,()]");var Wl=class extends x8{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(s=>typeof s=="string"&&MS.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}notIn(e,t){const r=Array.from(new Set(t)).map(s=>typeof s=="string"&&MS.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`not.in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:s}={}){let a="";s==="plain"?a="pl":s==="phrase"?a="ph":s==="websearch"&&(a="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${a}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}},g8=class{constructor(e,{headers:t={},schema:r,fetch:s}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=s}select(e,t){const{head:r=!1,count:s}=t??{},a=r?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),s&&this.headers.append("Prefer",`count=${s}`),new Wl({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){var s;const a="POST";if(t&&this.headers.append("Prefer",`count=${t}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const i=e.reduce((o,l)=>o.concat(Object.keys(l)),[]);if(i.length>0){const o=[...new Set(i)].map(l=>`"${l}"`);this.url.searchParams.set("columns",o.join(","))}}return new Wl({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:s,defaultToNull:a=!0}={}){var i;const o="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&this.url.searchParams.set("on_conflict",t),s&&this.headers.append("Prefer",`count=${s}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(l.length>0){const u=[...new Set(l)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Wl({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(e,{count:t}={}){var r;const s="PATCH";return t&&this.headers.append("Prefer",`count=${t}`),new Wl({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var t;const r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new Wl({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},y8=class rT{constructor(t,{headers:r={},schema:s,fetch:a}={}){this.url=t,this.headers=new Headers(r),this.schemaName=s,this.fetch=a}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new g8(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new rT(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:s=!1,get:a=!1,count:i}={}){var o;let l;const u=new URL(`${this.url}/rpc/${t}`);let d;s||a?(l=s?"HEAD":"GET",Object.entries(r).filter(([f,m])=>m!==void 0).map(([f,m])=>[f,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([f,m])=>{u.searchParams.append(f,m)})):(l="POST",d=r);const p=new Headers(this.headers);return i&&p.set("Prefer",`count=${i}`),new Wl({method:l,url:u,headers:p,schema:this.schemaName,body:d,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};class b8{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const s=r.node,a=parseInt(s.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const s=this.getWebSocketConstructor();return new s(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const v8="2.89.0",w8=`realtime-js/${v8}`,sT="1.0.0",_8="2.0.0",DS=sT,pv=1e4,j8=1e3,N8=100;var pi;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(pi||(pi={}));var An;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(An||(An={}));var Ts;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Ts||(Ts={}));var xv;(function(e){e.websocket="websocket"})(xv||(xv={}));var xo;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(xo||(xo={}));class S8{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let s=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(s))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,s;const a=(s=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&s!==void 0?s:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(t){var r,s;const a=(s=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&s!==void 0?s:{},o=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(t,r,s){var a,i;const o=t.topic,l=(a=t.ref)!==null&&a!==void 0?a:"",u=(i=t.join_ref)!==null&&i!==void 0?i:"",d=t.payload.event,p=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},f=Object.keys(p).length===0?"":JSON.stringify(p);if(u.length>255)throw new Error(`joinRef length ${u.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`ref length ${l.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`userEvent length ${d.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`metadata length ${f.length} exceeds maximum of 255`);const m=this.USER_BROADCAST_PUSH_META_LENGTH+u.length+l.length+o.length+d.length+f.length,x=new ArrayBuffer(this.HEADER_LENGTH+m);let y=new DataView(x),g=0;y.setUint8(g++,this.KINDS.userBroadcastPush),y.setUint8(g++,u.length),y.setUint8(g++,l.length),y.setUint8(g++,o.length),y.setUint8(g++,d.length),y.setUint8(g++,f.length),y.setUint8(g++,r),Array.from(u,_=>y.setUint8(g++,_.charCodeAt(0))),Array.from(l,_=>y.setUint8(g++,_.charCodeAt(0))),Array.from(o,_=>y.setUint8(g++,_.charCodeAt(0))),Array.from(d,_=>y.setUint8(g++,_.charCodeAt(0))),Array.from(f,_=>y.setUint8(g++,_.charCodeAt(0)));var b=new Uint8Array(x.byteLength+s.byteLength);return b.set(new Uint8Array(x),0),b.set(new Uint8Array(s),x.byteLength),b.buffer}decode(t,r){if(this._isArrayBuffer(t)){let s=this._binaryDecode(t);return r(s)}if(typeof t=="string"){const s=JSON.parse(t),[a,i,o,l,u]=s;return r({join_ref:a,ref:i,topic:o,event:l,payload:u})}return r({})}_binaryDecode(t){const r=new DataView(t),s=r.getUint8(0),a=new TextDecoder;switch(s){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,a)}}_decodeUserBroadcast(t,r,s){const a=r.getUint8(1),i=r.getUint8(2),o=r.getUint8(3),l=r.getUint8(4);let u=this.HEADER_LENGTH+4;const d=s.decode(t.slice(u,u+a));u=u+a;const p=s.decode(t.slice(u,u+i));u=u+i;const f=s.decode(t.slice(u,u+o));u=u+o;const m=t.slice(u,t.byteLength),x=l===this.JSON_ENCODING?JSON.parse(s.decode(m)):m,y={type:this.BROADCAST_EVENT,event:p,payload:x};return o>0&&(y.meta=JSON.parse(f)),{join_ref:null,ref:null,topic:d,event:this.BROADCAST_EVENT,payload:y}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(t,r){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([s])=>r.includes(s)))}}let aT=class{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var Qt;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Qt||(Qt={}));const $S=(e,t,r={})=>{var s;const a=(s=r.skipTypes)!==null&&s!==void 0?s:[];return t?Object.keys(t).reduce((i,o)=>(i[o]=k8(o,e,t,a),i),{}):{}},k8=(e,t,r,s)=>{const a=t.find(l=>l.name===e),i=a==null?void 0:a.type,o=r[e];return i&&!s.includes(i)?iT(i,o):gv(o)},iT=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return R8(t,r)}switch(e){case Qt.bool:return E8(t);case Qt.float4:case Qt.float8:case Qt.int2:case Qt.int4:case Qt.int8:case Qt.numeric:case Qt.oid:return C8(t);case Qt.json:case Qt.jsonb:return T8(t);case Qt.timestamp:return A8(t);case Qt.abstime:case Qt.date:case Qt.daterange:case Qt.int4range:case Qt.int8range:case Qt.money:case Qt.reltime:case Qt.text:case Qt.time:case Qt.timestamptz:case Qt.timetz:case Qt.tsrange:case Qt.tstzrange:return gv(t);default:return gv(t)}},gv=e=>e,E8=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},C8=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},T8=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},R8=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,s=e[r];if(e[0]==="{"&&s==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>iT(t,l))}return e},A8=e=>typeof e=="string"?e.replace(" ","T"):e,oT=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class b0{constructor(t,r,s={},a=pv){this.channel=t,this.event=r,this.payload=s,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var s;return this._hasReceived(t)&&r((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(s=>s.status===t).forEach(s=>s.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var qS;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(qS||(qS={}));class sd{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=sd.syncState(this.state,a,i,o),this.pendingDiffs.forEach(u=>{this.state=sd.syncDiff(this.state,u,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(s.diff,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=sd.syncDiff(this.state,a,i,o),l())}),this.onJoin((a,i,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:o})}),this.onLeave((a,i,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,s,a){const i=this.cloneDeep(t),o=this.transformState(r),l={},u={};return this.map(i,(d,p)=>{o[d]||(u[d]=p)}),this.map(o,(d,p)=>{const f=i[d];if(f){const m=p.map(b=>b.presence_ref),x=f.map(b=>b.presence_ref),y=p.filter(b=>x.indexOf(b.presence_ref)<0),g=f.filter(b=>m.indexOf(b.presence_ref)<0);y.length>0&&(l[d]=y),g.length>0&&(u[d]=g)}else l[d]=p}),this.syncDiff(i,{joins:l,leaves:u},s,a)}static syncDiff(t,r,s,a){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return s||(s=()=>{}),a||(a=()=>{}),this.map(i,(l,u)=>{var d;const p=(d=t[l])!==null&&d!==void 0?d:[];if(t[l]=this.cloneDeep(u),p.length>0){const f=t[l].map(x=>x.presence_ref),m=p.filter(x=>f.indexOf(x.presence_ref)<0);t[l].unshift(...m)}s(l,p,u)}),this.map(o,(l,u)=>{let d=t[l];if(!d)return;const p=u.map(f=>f.presence_ref);d=d.filter(f=>p.indexOf(f.presence_ref)<0),t[l]=d,a(l,d,u),d.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(s=>r(s,t[s]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,s)=>{const a=t[s];return"metas"in a?r[s]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[s]=a,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var FS;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(FS||(FS={}));var ad;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(ad||(ad={}));var ga;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(ga||(ga={}));class Zl{constructor(t,r={config:{}},s){var a,i;if(this.topic=t,this.params=r,this.socket=s,this.bindings={},this.state=An.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new b0(this,Ts.join,this.params,this.timeout),this.rejoinTimer=new aT(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=An.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=An.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=An.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=An.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=An.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ts.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new sd(this),this.broadcastEndpointURL=oT(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var s,a,i;if(this.socket.isConnected()||this.socket.connect(),this.state==An.closed){const{config:{broadcast:o,presence:l,private:u}}=this.params,d=(a=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(x=>x.filter))!==null&&a!==void 0?a:[],p=!!this.bindings[ad.PRESENCE]&&this.bindings[ad.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,f={},m={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:p}),postgres_changes:d,private:u};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(x=>t==null?void 0:t(ga.CHANNEL_ERROR,x)),this._onClose(()=>t==null?void 0:t(ga.CLOSED)),this.updateJoinPayload(Object.assign({config:m},f)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:x})=>{var y;if(this.socket._isManualToken()||this.socket.setAuth(),x===void 0){t==null||t(ga.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,b=(y=g==null?void 0:g.length)!==null&&y!==void 0?y:0,_=[];for(let w=0;w<b;w++){const S=g[w],{filter:{event:j,schema:N,table:C,filter:E}}=S,T=x&&x[w];if(T&&T.event===j&&Zl.isFilterValueEqual(T.schema,N)&&Zl.isFilterValueEqual(T.table,C)&&Zl.isFilterValueEqual(T.filter,E))_.push(Object.assign(Object.assign({},S),{id:T.id}));else{this.unsubscribe(),this.state=An.errored,t==null||t(ga.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=_,t&&t(ga.SUBSCRIBED);return}}).receive("error",x=>{this.state=An.errored,t==null||t(ga.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(x).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(ga.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,s){return this.state===An.joined&&t===ad.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,r,s)}async httpSend(t,r,s={}){var a;if(r==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(a=s.timeout)!==null&&a!==void 0?a:this.timeout);if(l.status===202)return{success:!0};let u=l.statusText;try{const d=await l.json();u=d.error||d.message||u}catch{}return Promise.reject(new Error(u))}async send(t,r={}){var s,a;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=t,l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const u={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);return await((a=d.body)===null||a===void 0?void 0:a.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,u;const d=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((u=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||u===void 0)&&u.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=An.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ts.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(a=>{s=new b0(this,Ts.leave,{},t),s.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=An.closed,this.bindings={}}async _fetchWithTimeout(t,r,s){const a=new AbortController,i=setTimeout(()=>a.abort(),s),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(i),o}_push(t,r,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new b0(this,t,r,s);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>N8){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,s){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,s){var a,i;const o=t.toLocaleLowerCase(),{close:l,error:u,leave:d,join:p}=Ts;if(s&&[l,u,d,p].indexOf(o)>=0&&s!==this._joinRef())return;let m=this._onMessage(o,r,s);if(r&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(x=>{var y,g,b;return((y=x.filter)===null||y===void 0?void 0:y.event)==="*"||((b=(g=x.filter)===null||g===void 0?void 0:g.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===o}).map(x=>x.callback(m,s)):(i=this.bindings[o])===null||i===void 0||i.filter(x=>{var y,g,b,_,w,S;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in x){const j=x.id,N=(y=x.filter)===null||y===void 0?void 0:y.event;return j&&((g=r.ids)===null||g===void 0?void 0:g.includes(j))&&(N==="*"||(N==null?void 0:N.toLocaleLowerCase())===((b=r.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const j=(w=(_=x==null?void 0:x.filter)===null||_===void 0?void 0:_.event)===null||w===void 0?void 0:w.toLocaleLowerCase();return j==="*"||j===((S=r==null?void 0:r.event)===null||S===void 0?void 0:S.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===o}).map(x=>{if(typeof m=="object"&&"ids"in m){const y=m.data,{schema:g,table:b,commit_timestamp:_,type:w,errors:S}=y;m=Object.assign(Object.assign({},{schema:g,table:b,commit_timestamp:_,eventType:w,new:{},old:{},errors:S}),this._getPayloadRecords(y))}x.callback(m,s)})}_isClosed(){return this.state===An.closed}_isJoined(){return this.state===An.joined}_isJoining(){return this.state===An.joining}_isLeaving(){return this.state===An.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,s){const a=t.toLocaleLowerCase(),i={type:a,filter:r,callback:s};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(t,r){const s=t.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===s&&Zl.isEqual(a.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const s in t)if(t[s]!==r[s])return!1;return!0}static isFilterValueEqual(t,r){return(t??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Ts.close,{},t)}_onError(t){this._on(Ts.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=An.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=$S(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=$S(t.columns,t.old_record)),r}}const v0=()=>{},Tf={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},P8=[1e3,2e3,5e3,1e4],O8=1e4,I8=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class L8{constructor(t,r){var s;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=pv,this.transport=null,this.heartbeatIntervalMs=Tf.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=v0,this.ref=0,this.reconnectTimer=null,this.vsn=DS,this.logger=v0,this.conn=null,this.sendBuffer=[],this.serializer=new S8,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>a?(...i)=>a(...i):(...i)=>fetch(...i),!(!((s=r==null?void 0:r.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${xv.websocket}`,this.httpEndpoint=oT(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=b8.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,s){this.logger(t,r,s)}connectionState(){switch(this.conn&&this.conn.readyState){case pi.connecting:return xo.Connecting;case pi.open:return xo.Open;case pi.closing:return xo.Closing;default:return xo.Closed}}isConnected(){return this.connectionState()===xo.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const s=`realtime:${t}`,a=this.getChannels().find(i=>i.topic===s);if(a)return a;{const i=new Zl(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:s,payload:a,ref:i}=t,o=()=>{this.encode(t,l=>{var u;(u=this.conn)===null||u===void 0||u.send(l)})};this.log("push",`${r} ${s} (${i})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(j8,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Tf.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(s=>s.topic===t&&(s._isJoined()||s._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(d){this.log("error","error in heartbeat callback",d)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:a,payload:i,ref:o}=r,l=o?`(${o})`:"",u=i.status||"";this.log("receive",`${u} ${s} ${a} ${l}`.trim(),i),this.channels.filter(d=>d._isMember(s)).forEach(d=>d._trigger(a,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===pi.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===pi.open||this.conn.readyState===pi.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Ts.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const s=t.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${t}${s}${a}`}_workerObjectUrl(t){let r;if(t)r=t;else{const s=new Blob([I8],{type:"application/javascript"});r=URL.createObjectURL(s)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r,s=!1;if(t)r=t,s=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(a){this.log("error","Error fetching access token from callback",a),r=this.accessTokenValue}else r=this.accessTokenValue;s?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(a=>{const i={access_token:r,version:w8};r&&a.updateJoinPayload(i),a.joinedOnce&&a._isJoined()&&a._push(Ts.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(s=>{try{s(r)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(s){this.log("error",`error triggering ${t} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new aT(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Tf.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,s,a,i,o,l,u,d,p,f,m,x;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(s=t==null?void 0:t.timeout)!==null&&s!==void 0?s:pv,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:Tf.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:v0,this.vsn=(u=t==null?void 0:t.vsn)!==null&&u!==void 0?u:DS,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(d=t==null?void 0:t.reconnectAfterMs)!==null&&d!==void 0?d:(y=>P8[y-1]||O8),this.vsn){case sT:this.encode=(p=t==null?void 0:t.encode)!==null&&p!==void 0?p:((y,g)=>g(JSON.stringify(y))),this.decode=(f=t==null?void 0:t.decode)!==null&&f!==void 0?f:((y,g)=>g(JSON.parse(y)));break;case _8:this.encode=(m=t==null?void 0:t.encode)!==null&&m!==void 0?m:this.serializer.encode.bind(this.serializer),this.decode=(x=t==null?void 0:t.decode)!==null&&x!==void 0?x:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var md=class extends Error{constructor(e,t){var r;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((r=t.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function M8(e,t,r){const s=new URL(t,e);if(r)for(const[a,i]of Object.entries(r))i!==void 0&&s.searchParams.set(a,i);return s.toString()}async function D8(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function $8(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:s,query:a,body:i,headers:o}){const l=M8(e.baseUrl,s,a),u=await D8(e.auth),d=await t(l,{method:r,headers:{...i?{"Content-Type":"application/json"}:{},...u,...o},body:i?JSON.stringify(i):void 0}),p=await d.text(),f=(d.headers.get("content-type")||"").includes("application/json"),m=f&&p?JSON.parse(p):p;if(!d.ok){const x=f?m:void 0,y=x==null?void 0:x.error;throw new md((y==null?void 0:y.message)??`Request failed with status ${d.status}`,{status:d.status,icebergType:y==null?void 0:y.type,icebergCode:y==null?void 0:y.code,details:x})}return{status:d.status,headers:d.headers,data:m}}}}function Rf(e){return e.join("")}var q8=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:Rf(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(s=>({namespace:s}))}async createNamespace(e,t){const r={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Rf(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Rf(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Rf(e.namespace)}`}),!0}catch(t){if(t instanceof md&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(r){if(r instanceof md&&r.status===409)return;throw r}}};function Ol(e){return e.join("")}var F8=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ol(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ol(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ol(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ol(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ol(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ol(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(r){if(r instanceof md&&r.status===404)return!1;throw r}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof md&&r.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},U8=class{constructor(e){var s;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=$8({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(s=e.accessDelegation)==null?void 0:s.join(","),this.namespaceOps=new q8(this.client,t),this.tableOps=new F8(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},wp=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function cn(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var B8=class extends wp{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},yv=class extends wp{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}};const Lw=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),H8=()=>Response,bv=e=>{if(Array.isArray(e))return e.map(r=>bv(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,s])=>{const a=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[a]=bv(s)}),t},K8=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},z8=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function pd(e){"@babel/helpers - typeof";return pd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pd(e)}function W8(e,t){if(pd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(pd(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function G8(e){var t=W8(e,"string");return pd(t)=="symbol"?t:t+""}function V8(e,t,r){return(t=G8(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function US(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function et(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?US(Object(r),!0).forEach(function(s){V8(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):US(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}const w0=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},Q8=async(e,t,r)=>{e instanceof await H8()&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{const a=e.status||500,i=(s==null?void 0:s.statusCode)||a+"";t(new B8(w0(s),a,i))}).catch(s=>{t(new yv(w0(s),s))}):t(new yv(w0(e),e))},Y8=(e,t,r,s)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!s?a:(K8(s)?(a.headers=et({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(s)):a.body=s,t!=null&&t.duplex&&(a.duplex=t.duplex),et(et({},a),r))};async function Kd(e,t,r,s,a,i){return new Promise((o,l)=>{e(r,Y8(t,s,a,i)).then(u=>{if(!u.ok)throw u;return s!=null&&s.noResolveJson?u:u.json()}).then(u=>o(u)).catch(u=>Q8(u,l,s))})}async function xd(e,t,r,s){return Kd(e,"GET",t,r,s)}async function ks(e,t,r,s,a){return Kd(e,"POST",t,s,a,r)}async function vv(e,t,r,s,a){return Kd(e,"PUT",t,s,a,r)}async function J8(e,t,r,s){return Kd(e,"HEAD",t,et(et({},r),{},{noResolveJson:!0}),s)}async function Mw(e,t,r,s,a){return Kd(e,"DELETE",t,s,a,r)}var X8=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(cn(t))return{data:null,error:t};throw t}}};let lT;lT=Symbol.toStringTag;var Z8=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[lT]="BlobDownloadBuilder",this.promise=null}asStream(){return new X8(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(cn(t))return{data:null,error:t};throw t}}};const eD={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},BS={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var tD=class{constructor(e,t={},r,s){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=Lw(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(e,t,r,s){var a=this;try{let i;const o=et(et({},BS),s);let l=et(et({},a.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const u=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),u&&i.append("metadata",a.encodeMetadata(u)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),u&&!i.has("metadata")&&i.append("metadata",a.encodeMetadata(u))):(i=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,u&&(l["x-metadata"]=a.toBase64(a.encodeMetadata(u))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),s!=null&&s.headers&&(l=et(et({},l),s.headers));const d=a._removeEmptyFolders(t),p=a._getFinalPath(d),f=await(e=="PUT"?vv:ks)(a.fetch,`${a.url}/object/${p}`,i,et({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:d,id:f.Id,fullPath:f.Key},error:null}}catch(i){if(a.shouldThrowOnError)throw i;if(cn(i))return{data:null,error:i};throw i}}async upload(e,t,r){return this.uploadOrUpdate("POST",e,t,r)}async uploadToSignedUrl(e,t,r,s){var a=this;const i=a._removeEmptyFolders(e),o=a._getFinalPath(i),l=new URL(a.url+`/object/upload/sign/${o}`);l.searchParams.set("token",t);try{let u;const d=et({upsert:BS.upsert},s),p=et(et({},a.headers),{"x-upsert":String(d.upsert)});return typeof Blob<"u"&&r instanceof Blob?(u=new FormData,u.append("cacheControl",d.cacheControl),u.append("",r)):typeof FormData<"u"&&r instanceof FormData?(u=r,u.append("cacheControl",d.cacheControl)):(u=r,p["cache-control"]=`max-age=${d.cacheControl}`,p["content-type"]=d.contentType),{data:{path:i,fullPath:(await vv(a.fetch,l.toString(),u,{headers:p})).Key},error:null}}catch(u){if(a.shouldThrowOnError)throw u;if(cn(u))return{data:null,error:u};throw u}}async createSignedUploadUrl(e,t){var r=this;try{let s=r._getFinalPath(e);const a=et({},r.headers);t!=null&&t.upsert&&(a["x-upsert"]="true");const i=await ks(r.fetch,`${r.url}/object/upload/sign/${s}`,{},{headers:a}),o=new URL(r.url+i.url),l=o.searchParams.get("token");if(!l)throw new wp("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(cn(s))return{data:null,error:s};throw s}}async update(e,t,r){return this.uploadOrUpdate("PUT",e,t,r)}async move(e,t,r){var s=this;try{return{data:await ks(s.fetch,`${s.url}/object/move`,{bucketId:s.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:s.headers}),error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(cn(a))return{data:null,error:a};throw a}}async copy(e,t,r){var s=this;try{return{data:{path:(await ks(s.fetch,`${s.url}/object/copy`,{bucketId:s.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:s.headers})).Key},error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(cn(a))return{data:null,error:a};throw a}}async createSignedUrl(e,t,r){var s=this;try{let a=s._getFinalPath(e),i=await ks(s.fetch,`${s.url}/object/sign/${a}`,et({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:s.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${s.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(cn(a))return{data:null,error:a};throw a}}async createSignedUrls(e,t,r){var s=this;try{const a=await ks(s.fetch,`${s.url}/object/sign/${s.bucketId}`,{expiresIn:t,paths:e},{headers:s.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:a.map(o=>et(et({},o),{},{signedUrl:o.signedURL?encodeURI(`${s.url}${o.signedURL}${i}`):null})),error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(cn(a))return{data:null,error:a};throw a}}download(e,t){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),a=s?`?${s}`:"",i=this._getFinalPath(e),o=()=>xd(this.fetch,`${this.url}/${r}/${i}${a}`,{headers:this.headers,noResolveJson:!0});return new Z8(o,this.shouldThrowOnError)}async info(e){var t=this;const r=t._getFinalPath(e);try{return{data:bv(await xd(t.fetch,`${t.url}/object/info/${r}`,{headers:t.headers})),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(cn(s))return{data:null,error:s};throw s}}async exists(e){var t=this;const r=t._getFinalPath(e);try{return await J8(t.fetch,`${t.url}/object/${r}`,{headers:t.headers}),{data:!0,error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(cn(s)&&s instanceof yv){const a=s.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:s}}throw s}}getPublicUrl(e,t){const r=this._getFinalPath(e),s=[],a=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";a!==""&&s.push(a);const i=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});o!==""&&s.push(o);let l=s.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${r}${l}`)}}}async remove(e){var t=this;try{return{data:await Mw(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(cn(r))return{data:null,error:r};throw r}}async list(e,t,r){var s=this;try{const a=et(et(et({},eD),t),{},{prefix:e||""});return{data:await ks(s.fetch,`${s.url}/object/list/${s.bucketId}`,a,{headers:s.headers},r),error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(cn(a))return{data:null,error:a};throw a}}async listV2(e,t){var r=this;try{const s=et({},e);return{data:await ks(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,s,{headers:r.headers},t),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(cn(s))return{data:null,error:s};throw s}}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const cT="2.89.0",uT={"X-Client-Info":`storage-js/${cT}`};var nD=class{constructor(e,t={},r,s){this.shouldThrowOnError=!1;const a=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=et(et({},uT),t),this.fetch=Lw(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(e){var t=this;try{const r=t.listBucketOptionsToQueryString(e);return{data:await xd(t.fetch,`${t.url}/bucket${r}`,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(cn(r))return{data:null,error:r};throw r}}async getBucket(e){var t=this;try{return{data:await xd(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(cn(r))return{data:null,error:r};throw r}}async createBucket(e,t={public:!1}){var r=this;try{return{data:await ks(r.fetch,`${r.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(cn(s))return{data:null,error:s};throw s}}async updateBucket(e,t){var r=this;try{return{data:await vv(r.fetch,`${r.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(cn(s))return{data:null,error:s};throw s}}async emptyBucket(e){var t=this;try{return{data:await ks(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(cn(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await Mw(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(cn(r))return{data:null,error:r};throw r}}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},rD=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=et(et({},uT),t),this.fetch=Lw(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await ks(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(cn(r))return{data:null,error:r};throw r}}async listBuckets(e){var t=this;try{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const s=r.toString(),a=s?`${t.url}/bucket?${s}`:`${t.url}/bucket`;return{data:await xd(t.fetch,a,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(cn(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await Mw(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(cn(r))return{data:null,error:r};throw r}}from(e){var t=this;if(!z8(e))throw new wp("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new U8({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),s=this.shouldThrowOnError;return new Proxy(r,{get(a,i){const o=a[i];return typeof o!="function"?o:async(...l)=>{try{return{data:await o.apply(a,l),error:null}}catch(u){if(s)throw u;return{data:null,error:u}}}}})}};const Dw={"X-Client-Info":`storage-js/${cT}`,"Content-Type":"application/json"};var dT=class extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Hr(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}var _0=class extends dT{constructor(e,t,r){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},sD=class extends dT{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}};const $w=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),aD=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},HS=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),iD=async(e,t,r)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const s=e.status||500,a=e;if(typeof a.json=="function")a.json().then(i=>{const o=(i==null?void 0:i.statusCode)||(i==null?void 0:i.code)||s+"";t(new _0(HS(i),s,o))}).catch(()=>{const i=s+"";t(new _0(a.statusText||`HTTP ${s} error`,s,i))});else{const i=s+"";t(new _0(a.statusText||`HTTP ${s} error`,s,i))}}else t(new sD(HS(e),e))},oD=(e,t,r,s)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return s?(aD(s)?(a.headers=et({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(s)):a.body=s,et(et({},a),r)):a};async function lD(e,t,r,s,a,i){return new Promise((o,l)=>{e(r,oD(t,s,a,i)).then(u=>{if(!u.ok)throw u;if(s!=null&&s.noResolveJson)return u;const d=u.headers.get("content-type");return!d||!d.includes("application/json")?{}:u.json()}).then(u=>o(u)).catch(u=>iD(u,l,s))})}async function Kr(e,t,r,s,a){return lD(e,"POST",t,s,a,r)}var cD=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=et(et({},Dw),t),this.fetch=$w(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(e){var t=this;try{return{data:await Kr(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Hr(r))return{data:null,error:r};throw r}}async getIndex(e,t){var r=this;try{return{data:await Kr(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Hr(s))return{data:null,error:s};throw s}}async listIndexes(e){var t=this;try{return{data:await Kr(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Hr(r))return{data:null,error:r};throw r}}async deleteIndex(e,t){var r=this;try{return{data:await Kr(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers})||{},error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Hr(s))return{data:null,error:s};throw s}}},uD=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=et(et({},Dw),t),this.fetch=$w(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(e){var t=this;try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await Kr(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Hr(r))return{data:null,error:r};throw r}}async getVectors(e){var t=this;try{return{data:await Kr(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Hr(r))return{data:null,error:r};throw r}}async listVectors(e){var t=this;try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:await Kr(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Hr(r))return{data:null,error:r};throw r}}async queryVectors(e){var t=this;try{return{data:await Kr(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Hr(r))return{data:null,error:r};throw r}}async deleteVectors(e){var t=this;try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await Kr(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Hr(r))return{data:null,error:r};throw r}}},dD=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=et(et({},Dw),t),this.fetch=$w(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await Kr(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Hr(r))return{data:null,error:r};throw r}}async getBucket(e){var t=this;try{return{data:await Kr(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Hr(r))return{data:null,error:r};throw r}}async listBuckets(e={}){var t=this;try{return{data:await Kr(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Hr(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await Kr(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Hr(r))return{data:null,error:r};throw r}}},hD=class extends dD{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new fD(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,r=this;return t().call(r,e)}async getBucket(e){var t=()=>super.getBucket,r=this;return t().call(r,e)}async listBuckets(e={}){var t=()=>super.listBuckets,r=this;return t().call(r,e)}async deleteBucket(e){var t=()=>super.deleteBucket,r=this;return t().call(r,e)}},fD=class extends cD{constructor(e,t,r,s){super(e,t,s),this.vectorBucketName=r}async createIndex(e){var t=()=>super.createIndex,r=this;return t().call(r,et(et({},e),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,r=this;return t().call(r,et(et({},e),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,r=this;return t().call(r,r.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,r=this;return t().call(r,r.vectorBucketName,e)}index(e){return new mD(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},mD=class extends uD{constructor(e,t,r,s,a){super(e,t,a),this.vectorBucketName=r,this.indexName=s}async putVectors(e){var t=()=>super.putVectors,r=this;return t().call(r,et(et({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(e){var t=()=>super.getVectors,r=this;return t().call(r,et(et({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,r=this;return t().call(r,et(et({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,r=this;return t().call(r,et(et({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,r=this;return t().call(r,et(et({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},pD=class extends nD{constructor(e,t={},r,s){super(e,t,r,s)}from(e){return new tD(this.url,this.headers,e,this.fetch)}get vectors(){return new hD(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new rD(this.url+"/iceberg",this.headers,this.fetch)}};const hT="2.89.0",Gl=30*1e3,wv=3,j0=wv*Gl,xD="http://localhost:9999",gD="supabase.auth.token",yD={"X-Client-Info":`gotrue-js/${hT}`},_v="X-Supabase-Api-Version",fT={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},bD=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,vD=600*1e3;class gd extends Error{constructor(t,r,s){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=s}}function ze(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class wD extends gd{constructor(t,r,s){super(t,r,s),this.name="AuthApiError",this.status=r,this.code=s}}function _D(e){return ze(e)&&e.name==="AuthApiError"}class go extends gd{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class qa extends gd{constructor(t,r,s,a){super(t,s,a),this.name=r,this.status=s}}class $r extends qa{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function jD(e){return ze(e)&&e.name==="AuthSessionMissingError"}class Il extends qa{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Af extends qa{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Pf extends qa{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function ND(e){return ze(e)&&e.name==="AuthImplicitGrantRedirectError"}class KS extends qa{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class SD extends qa{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class jv extends qa{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function N0(e){return ze(e)&&e.name==="AuthRetryableFetchError"}class zS extends qa{constructor(t,r,s){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=s}}class Nv extends qa{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Om="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),WS=` 	
\r=`.split(""),kD=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<WS.length;t+=1)e[WS[t].charCodeAt(0)]=-2;for(let t=0;t<Om.length;t+=1)e[Om[t].charCodeAt(0)]=t;return e})();function GS(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;r(Om[s]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;r(Om[s]),t.queuedBits-=6}}function mT(e,t,r){const s=kD[e];if(s>-1)for(t.queue=t.queue<<6|s,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function VS(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},s={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=o=>{TD(o,s,r)};for(let o=0;o<e.length;o+=1)mT(e.charCodeAt(o),a,i);return t.join("")}function ED(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function CD(e,t){for(let r=0;r<e.length;r+=1){let s=e.charCodeAt(r);if(s>55295&&s<=56319){const a=(s-55296)*1024&65535;s=(e.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}ED(s,t)}}function TD(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let s=1;s<6;s+=1)if((e>>7-s&1)===0){t.utf8seq=s;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function ic(e){const t=[],r={queue:0,queuedBits:0},s=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)mT(e.charCodeAt(a),r,s);return new Uint8Array(t)}function RD(e){const t=[];return CD(e,r=>t.push(r)),new Uint8Array(t)}function jo(e){const t=[],r={queue:0,queuedBits:0},s=a=>{t.push(a)};return e.forEach(a=>GS(a,r,s)),GS(null,r,s),t.join("")}function AD(e){return Math.round(Date.now()/1e3)+e}function PD(){return Symbol("auth-callback")}const Bn=()=>typeof window<"u"&&typeof document<"u",uo={tested:!1,writable:!1},pT=()=>{if(!Bn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(uo.tested)return uo.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),uo.tested=!0,uo.writable=!0}catch{uo.tested=!0,uo.writable=!1}return uo.writable};function OD(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,i)=>{t[i]=a})}catch{}return r.searchParams.forEach((s,a)=>{t[a]=s}),t}const xT=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),ID=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Vl=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},ho=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Un=async(e,t)=>{await e.removeItem(t)};class _p{constructor(){this.promise=new _p.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}_p.promiseConstructor=Promise;function S0(e){const t=e.split(".");if(t.length!==3)throw new Nv("Invalid JWT structure");for(let s=0;s<t.length;s++)if(!bD.test(t[s]))throw new Nv("JWT not in base64url format");return{header:JSON.parse(VS(t[0])),payload:JSON.parse(VS(t[1])),signature:ic(t[2]),raw:{header:t[0],payload:t[1]}}}async function LD(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function MD(e,t){return new Promise((s,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){s(o);return}}catch(o){if(!t(i,o)){a(o);return}}})()})}function DD(e){return("0"+e.toString(16)).substr(-2)}function $D(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=r.length;let a="";for(let i=0;i<56;i++)a+=r.charAt(Math.floor(Math.random()*s));return a}return crypto.getRandomValues(t),Array.from(t,DD).join("")}async function qD(e){const r=new TextEncoder().encode(e),s=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(s);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function FD(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await qD(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ll(e,t,r=!1){const s=$D();let a=s;r&&(a+="/PASSWORD_RECOVERY"),await Vl(e,`${t}-code-verifier`,a);const i=await FD(s);return[i,s===i?"plain":"s256"]}const UD=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function BD(e){const t=e.headers.get(_v);if(!t||!t.match(UD))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function HD(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function KD(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const zD=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ml(e){if(!zD.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function k0(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function WD(e,t){return new Proxy(e,{get:(r,s,a)=>{if(s==="__isInsecureUserWarningProxy")return!0;if(typeof s=="symbol"){const i=s.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,s,a)}return!t.value&&typeof s=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,s,a)}})}function QS(e){return JSON.parse(JSON.stringify(e))}const mo=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),GD=[502,503,504];async function YS(e){var t;if(!ID(e))throw new jv(mo(e),0);if(GD.includes(e.status))throw new jv(mo(e),e.status);let r;try{r=await e.json()}catch(i){throw new go(mo(i),i)}let s;const a=BD(e);if(a&&a.getTime()>=fT["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?s=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(s=r.error_code),s){if(s==="weak_password")throw new zS(mo(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(s==="session_not_found")throw new $r}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new zS(mo(r),e.status,r.weak_password.reasons);throw new wD(mo(r),e.status||500,s)}const VD=(e,t,r,s)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(s),Object.assign(Object.assign({},a),r))};async function Ze(e,t,r,s){var a;const i=Object.assign({},s==null?void 0:s.headers);i[_v]||(i[_v]=fT["2024-01-01"].name),s!=null&&s.jwt&&(i.Authorization=`Bearer ${s.jwt}`);const o=(a=s==null?void 0:s.query)!==null&&a!==void 0?a:{};s!=null&&s.redirectTo&&(o.redirect_to=s.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",u=await QD(e,t,r+l,{headers:i,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(u):{data:Object.assign({},u),error:null}}async function QD(e,t,r,s,a,i){const o=VD(t,s,a,i);let l;try{l=await e(r,Object.assign({},o))}catch(u){throw console.error(u),new jv(mo(u),0)}if(l.ok||await YS(l),s!=null&&s.noResolveJson)return l;try{return await l.json()}catch(u){await YS(u)}}function Ns(e){var t;let r=null;XD(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=AD(e.expires_in)));const s=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:s},error:null}}function JS(e){const t=Ns(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,s)=>r&&typeof s=="string",!0)&&(t.data.weak_password=e.weak_password),t}function bi(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function YD(e){return{data:e,error:null}}function JD(e){const{action_link:t,email_otp:r,hashed_token:s,redirect_to:a,verification_type:i}=e,o=vp(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:s,redirect_to:a,verification_type:i},u=Object.assign({},o);return{data:{properties:l,user:u},error:null}}function XS(e){return e}function XD(e){return e.access_token&&e.refresh_token&&e.expires_in}const E0=["global","local","others"];class ZD{constructor({url:t="",headers:r={},fetch:s}){this.url=t,this.headers=r,this.fetch=xT(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=E0[0]){if(E0.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${E0.join(", ")}`);try{return await Ze(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(s){if(ze(s))return{data:null,error:s};throw s}}async inviteUserByEmail(t,r={}){try{return await Ze(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:bi})}catch(s){if(ze(s))return{data:{user:null},error:s};throw s}}async generateLink(t){try{const{options:r}=t,s=vp(t,["options"]),a=Object.assign(Object.assign({},s),r);return"newEmail"in s&&(a.new_email=s==null?void 0:s.newEmail,delete a.newEmail),await Ze(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:JD,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(ze(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await Ze(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:bi})}catch(r){if(ze(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,s,a,i,o,l,u;try{const d={nextPage:null,lastPage:0,total:0},p=await Ze(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:XS});if(p.error)throw p.error;const f=await p.json(),m=(o=p.headers.get("x-total-count"))!==null&&o!==void 0?o:0,x=(u=(l=p.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&u!==void 0?u:[];return x.length>0&&(x.forEach(y=>{const g=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(y.split(";")[1].split("=")[1]);d[`${b}Page`]=g}),d.total=parseInt(m)),{data:Object.assign(Object.assign({},f),d),error:null}}catch(d){if(ze(d))return{data:{users:[]},error:d};throw d}}async getUserById(t){Ml(t);try{return await Ze(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:bi})}catch(r){if(ze(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Ml(t);try{return await Ze(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:bi})}catch(s){if(ze(s))return{data:{user:null},error:s};throw s}}async deleteUser(t,r=!1){Ml(t);try{return await Ze(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:bi})}catch(s){if(ze(s))return{data:{user:null},error:s};throw s}}async _listFactors(t){Ml(t.userId);try{const{data:r,error:s}=await Ze(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:s}}catch(r){if(ze(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Ml(t.userId),Ml(t.id);try{return{data:await Ze(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(ze(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,s,a,i,o,l,u;try{const d={nextPage:null,lastPage:0,total:0},p=await Ze(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:XS});if(p.error)throw p.error;const f=await p.json(),m=(o=p.headers.get("x-total-count"))!==null&&o!==void 0?o:0,x=(u=(l=p.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&u!==void 0?u:[];return x.length>0&&(x.forEach(y=>{const g=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(y.split(";")[1].split("=")[1]);d[`${b}Page`]=g}),d.total=parseInt(m)),{data:Object.assign(Object.assign({},f),d),error:null}}catch(d){if(ze(d))return{data:{clients:[]},error:d};throw d}}async _createOAuthClient(t){try{return await Ze(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ze(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await Ze(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ze(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await Ze(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(ze(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(t){try{return await Ze(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ze(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await Ze(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ze(r))return{data:null,error:r};throw r}}}function ZS(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Dl={debug:!!(globalThis&&pT()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class gT extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class e$ extends gT{}async function t$(e,t,r){Dl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const s=new globalThis.AbortController;return t>0&&setTimeout(()=>{s.abort(),Dl.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async a=>{if(a){Dl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await r()}finally{Dl.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw Dl.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new e$(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Dl.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function n$(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function yT(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function r$(e){return parseInt(e,16)}function s$(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,s=>s.toString(16).padStart(2,"0")).join("")}function a$(e){var t;const{chainId:r,domain:s,expirationTime:a,issuedAt:i=new Date,nonce:o,notBefore:l,requestId:u,resources:d,scheme:p,uri:f,version:m}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(m!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${m}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const x=yT(e.address),y=p?`${p}://${s}`:s,g=e.statement?`${e.statement}
`:"",b=`${y} wants you to sign in with your Ethereum account:
${x}

${g}`;let _=`URI: ${f}
Version: ${m}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(a&&(_+=`
Expiration Time: ${a.toISOString()}`),l&&(_+=`
Not Before: ${l.toISOString()}`),u&&(_+=`
Request ID: ${u}`),d){let w=`
Resources:`;for(const S of d){if(!S||typeof S!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${S}`);w+=`
- ${S}`}_+=w}return`${b}
${_}`}class jn extends Error{constructor({message:t,code:r,cause:s,name:a}){var i;super(t,{cause:s}),this.__isWebAuthnError=!0,this.name=(i=a??(s instanceof Error?s.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class Im extends jn{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function i$({error:e,options:t}){var r,s,a;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new jn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new jn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new jn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((a=i.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new jn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new jn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new jn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new jn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new jn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(bT(o)){if(i.rp.id!==o)return new jn({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new jn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new jn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new jn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new jn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function o$({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new jn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new jn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const s=window.location.hostname;if(bT(s)){if(r.rpId!==s)return new jn({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new jn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new jn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new jn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class l${createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const c$=new l$;function u$(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:s}=e,a=vp(e,["challenge","user","excludeCredentials"]),i=ic(t).buffer,o=Object.assign(Object.assign({},r),{id:ic(r.id).buffer}),l=Object.assign(Object.assign({},a),{challenge:i,user:o});if(s&&s.length>0){l.excludeCredentials=new Array(s.length);for(let u=0;u<s.length;u++){const d=s[u];l.excludeCredentials[u]=Object.assign(Object.assign({},d),{id:ic(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return l}function d$(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,s=vp(e,["challenge","allowCredentials"]),a=ic(t).buffer,i=Object.assign(Object.assign({},s),{challenge:a});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const l=r[o];i.allowCredentials[o]=Object.assign(Object.assign({},l),{id:ic(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return i}function h$(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:jo(new Uint8Array(e.response.attestationObject)),clientDataJSON:jo(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function f$(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,s=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:jo(new Uint8Array(a.authenticatorData)),clientDataJSON:jo(new Uint8Array(a.clientDataJSON)),signature:jo(new Uint8Array(a.signature)),userHandle:a.userHandle?jo(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function bT(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function e2(){var e,t;return!!(Bn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function m$(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Im("Browser returned unexpected credential type",t)}:{data:null,error:new Im("Empty credential response",t)}}catch(t){return{data:null,error:i$({error:t,options:e})}}}async function p$(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Im("Browser returned unexpected credential type",t)}:{data:null,error:new Im("Empty credential response",t)}}catch(t){return{data:null,error:o$({error:t,options:e})}}}const x$={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},g$={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Lm(...e){const t=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),r=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),s={};for(const a of e)if(a)for(const i in a){const o=a[i];if(o!==void 0)if(Array.isArray(o))s[i]=o;else if(r(o))s[i]=o;else if(t(o)){const l=s[i];t(l)?s[i]=Lm(l,o):s[i]=Lm(o)}else s[i]=o}return s}function y$(e,t){return Lm(x$,e,t||{})}function b$(e,t){return Lm(g$,e,t||{})}class v${constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:s,signal:a},i){try{const{data:o,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!o)return{data:null,error:l};const u=a??c$.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:d}=o.webauthn.credential_options.publicKey;d.name||(d.name=`${d.id}:${s}`),d.displayName||(d.displayName=d.name)}switch(o.webauthn.type){case"create":{const d=y$(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:p,error:f}=await m$({publicKey:d,signal:u});return p?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:p}},error:null}:{data:null,error:f}}case"request":{const d=b$(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:p,error:f}=await p$(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:d,signal:u}));return p?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:p}},error:null}:{data:null,error:f}}}}catch(o){return ze(o)?{data:null,error:o}:{data:null,error:new go("Unexpected error in challenge",o)}}}async _verify({challengeId:t,factorId:r,webauthn:s}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:s})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},i){if(!r)return{data:null,error:new gd("rpId is required for WebAuthn authentication")};try{if(!e2())return{data:null,error:new go("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:s},signal:a},{request:i});if(!o)return{data:null,error:l};const{webauthn:u}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:u.type,rpId:r,rpOrigins:s,credential_response:u.credential_response}})}catch(o){return ze(o)?{data:null,error:o}:{data:null,error:new go("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},i){if(!r)return{data:null,error:new gd("rpId is required for WebAuthn registration")};try{if(!e2())return{data:null,error:new go("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(p=>{var f;return(f=p.data)===null||f===void 0?void 0:f.all.find(m=>m.factor_type==="webauthn"&&m.friendly_name===t&&m.status!=="unverified")}).then(p=>p?this.client.mfa.unenroll({factorId:p==null?void 0:p.id}):void 0),{data:null,error:l};const{data:u,error:d}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:s},signal:a},{create:i});return u?this._verify({factorId:o.id,challengeId:u.challengeId,webauthn:{rpId:r,rpOrigins:s,type:u.webauthn.type,credential_response:u.webauthn.credential_response}}):{data:null,error:d}}catch(o){return ze(o)?{data:null,error:o}:{data:null,error:new go("Unexpected error in register",o)}}}}n$();const w$={url:xD,storageKey:gD,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:yD,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function t2(e,t,r){return await r()}const $l={};class yd{get jwks(){var t,r;return(r=(t=$l[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){$l[this.storageKey]=Object.assign(Object.assign({},$l[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=$l[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){$l[this.storageKey]=Object.assign(Object.assign({},$l[this.storageKey]),{cachedAt:t})}constructor(t){var r,s,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},w$),t);if(this.storageKey=i.storageKey,this.instanceID=(r=yd.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,yd.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&Bn()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new ZD({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=xT(i.fetch),this.lock=i.lock||t2,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:this.persistSession&&Bn()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=t$:this.lock=t2,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new v$(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:pT()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=ZS(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=ZS(this.memoryStorage)),Bn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${hT}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},s="none";if(Bn()&&(r=OD(window.location.href),this._isImplicitGrantCallback(r)?s="implicit":await this._isPKCECallback(r)&&(s="pkce")),Bn()&&this.detectSessionInUrl&&s!=="none"){const{data:a,error:i}=await this._getSessionFromURL(r,s);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),ND(i)){const u=(t=i.details)===null||t===void 0?void 0:t.code;if(u==="identity_already_exists"||u==="identity_not_found"||u==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return ze(r)?this._returnResult({error:r}):this._returnResult({error:new go("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,s,a;try{const i=await Ze(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:Ns}),{data:o,error:l}=i;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const u=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",u)),this._returnResult({data:{user:d,session:u},error:null})}catch(i){if(ze(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(t){var r,s,a;try{let i;if("email"in t){const{email:p,password:f,options:m}=t;let x=null,y=null;this.flowType==="pkce"&&([x,y]=await Ll(this.storage,this.storageKey)),i=await Ze(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:p,password:f,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:x,code_challenge_method:y},xform:Ns})}else if("phone"in t){const{phone:p,password:f,options:m}=t;i=await Ze(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:f,data:(s=m==null?void 0:m.data)!==null&&s!==void 0?s:{},channel:(a=m==null?void 0:m.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Ns})}else throw new Af("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return await Un(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:l});const u=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",u)),this._returnResult({data:{user:d,session:u},error:null})}catch(i){if(await Un(this.storage,`${this.storageKey}-code-verifier`),ze(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:l}=t;r=await Ze(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:JS})}else if("phone"in t){const{phone:i,password:o,options:l}=t;r=await Ze(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:JS})}else throw new Af("You must provide either an email or phone number and a password");const{data:s,error:a}=r;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!s||!s.session||!s.user){const i=new Il;return this._returnResult({data:{user:null,session:null},error:i})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:a})}catch(r){if(ze(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,s,a,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(s=t.options)===null||s===void 0?void 0:s.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,s,a,i,o,l,u,d,p,f,m;let x,y;if("message"in t)x=t.message,y=t.signature;else{const{chain:g,wallet:b,statement:_,options:w}=t;let S;if(Bn())if(typeof b=="object")S=b;else{const I=window;if("ethereum"in I&&typeof I.ethereum=="object"&&"request"in I.ethereum&&typeof I.ethereum.request=="function")S=I.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=b}const j=new URL((r=w==null?void 0:w.url)!==null&&r!==void 0?r:window.location.href),N=await S.request({method:"eth_requestAccounts"}).then(I=>I).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!N||N.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const C=yT(N[0]);let E=(s=w==null?void 0:w.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!E){const I=await S.request({method:"eth_chainId"});E=r$(I)}const T={domain:j.host,address:C,statement:_,uri:j.href,version:"1",chainId:E,nonce:(a=w==null?void 0:w.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(o=(i=w==null?void 0:w.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=w==null?void 0:w.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(u=w==null?void 0:w.signInWithEthereum)===null||u===void 0?void 0:u.notBefore,requestId:(d=w==null?void 0:w.signInWithEthereum)===null||d===void 0?void 0:d.requestId,resources:(p=w==null?void 0:w.signInWithEthereum)===null||p===void 0?void 0:p.resources};x=a$(T),y=await S.request({method:"personal_sign",params:[s$(x),C]})}try{const{data:g,error:b}=await Ze(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:x,signature:y},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Ns});if(b)throw b;if(!g||!g.session||!g.user){const _=new Il;return this._returnResult({data:{user:null,session:null},error:_})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:Object.assign({},g),error:b})}catch(g){if(ze(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async signInWithSolana(t){var r,s,a,i,o,l,u,d,p,f,m,x;let y,g;if("message"in t)y=t.message,g=t.signature;else{const{chain:b,wallet:_,statement:w,options:S}=t;let j;if(Bn())if(typeof _=="object")j=_;else{const C=window;if("solana"in C&&typeof C.solana=="object"&&("signIn"in C.solana&&typeof C.solana.signIn=="function"||"signMessage"in C.solana&&typeof C.solana.signMessage=="function"))j=C.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof _!="object"||!(S!=null&&S.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=_}const N=new URL((r=S==null?void 0:S.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in j&&j.signIn){const C=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},S==null?void 0:S.signInWithSolana),{version:"1",domain:N.host,uri:N.href}),w?{statement:w}:null));let E;if(Array.isArray(C)&&C[0]&&typeof C[0]=="object")E=C[0];else if(C&&typeof C=="object"&&"signedMessage"in C&&"signature"in C)E=C;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in E&&"signature"in E&&(typeof E.signedMessage=="string"||E.signedMessage instanceof Uint8Array)&&E.signature instanceof Uint8Array)y=typeof E.signedMessage=="string"?E.signedMessage:new TextDecoder().decode(E.signedMessage),g=E.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${N.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...w?["",w,""]:[""],"Version: 1",`URI: ${N.href}`,`Issued At: ${(a=(s=S==null?void 0:S.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=S==null?void 0:S.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${S.signInWithSolana.notBefore}`]:[],...!((o=S==null?void 0:S.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${S.signInWithSolana.expirationTime}`]:[],...!((l=S==null?void 0:S.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${S.signInWithSolana.chainId}`]:[],...!((u=S==null?void 0:S.signInWithSolana)===null||u===void 0)&&u.nonce?[`Nonce: ${S.signInWithSolana.nonce}`]:[],...!((d=S==null?void 0:S.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${S.signInWithSolana.requestId}`]:[],...!((f=(p=S==null?void 0:S.signInWithSolana)===null||p===void 0?void 0:p.resources)===null||f===void 0)&&f.length?["Resources",...S.signInWithSolana.resources.map(E=>`- ${E}`)]:[]].join(`
`);const C=await j.signMessage(new TextEncoder().encode(y),"utf8");if(!C||!(C instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=C}}try{const{data:b,error:_}=await Ze(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:jo(g)},!((m=t.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(x=t.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:Ns});if(_)throw _;if(!b||!b.session||!b.user){const w=new Il;return this._returnResult({data:{user:null,session:null},error:w})}return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:Object.assign({},b),error:_})}catch(b){if(ze(b))return this._returnResult({data:{user:null,session:null},error:b});throw b}}async _exchangeCodeForSession(t){const r=await ho(this.storage,`${this.storageKey}-code-verifier`),[s,a]=(r??"").split("/");try{if(!s&&this.flowType==="pkce")throw new SD;const{data:i,error:o}=await Ze(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:s},xform:Ns});if(await Un(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const l=new Il;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:o})}catch(i){if(await Un(this.storage,`${this.storageKey}-code-verifier`),ze(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(t){try{const{options:r,provider:s,token:a,access_token:i,nonce:o}=t,l=await Ze(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:a,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Ns}),{data:u,error:d}=l;if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!u||!u.session||!u.user){const p=new Il;return this._returnResult({data:{user:null,session:null},error:p})}return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),this._returnResult({data:u,error:d})}catch(r){if(ze(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,s,a,i,o;try{if("email"in t){const{email:l,options:u}=t;let d=null,p=null;this.flowType==="pkce"&&([d,p]=await Ll(this.storage,this.storageKey));const{error:f}=await Ze(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=u==null?void 0:u.data)!==null&&r!==void 0?r:{},create_user:(s=u==null?void 0:u.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},code_challenge:d,code_challenge_method:p},redirectTo:u==null?void 0:u.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}if("phone"in t){const{phone:l,options:u}=t,{data:d,error:p}=await Ze(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=u==null?void 0:u.data)!==null&&a!==void 0?a:{},create_user:(i=u==null?void 0:u.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},channel:(o=u==null?void 0:u.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:p})}throw new Af("You must provide either an email or phone number.")}catch(l){if(await Un(this.storage,`${this.storageKey}-code-verifier`),ze(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(t){var r,s;try{let a,i;"options"in t&&(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(s=t.options)===null||s===void 0?void 0:s.captchaToken);const{data:o,error:l}=await Ze(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:Ns});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const u=o.session,d=o.user;return u!=null&&u.access_token&&(await this._saveSession(u),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",u)),this._returnResult({data:{user:d,session:u},error:null})}catch(a){if(ze(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(t){var r,s,a,i,o;try{let l=null,u=null;this.flowType==="pkce"&&([l,u]=await Ll(this.storage,this.storageKey));const d=await Ze(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&s!==void 0?s:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:u}),headers:this.headers,xform:YD});return!((i=d.data)===null||i===void 0)&&i.url&&Bn()&&!(!((o=t.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(d.data.url),this._returnResult(d)}catch(l){if(await Un(this.storage,`${this.storageKey}-code-verifier`),ze(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:s}=t;if(s)throw s;if(!r)throw new $r;const{error:a}=await Ze(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(t){if(ze(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:s,type:a,options:i}=t,{error:o}=await Ze(this.fetch,"POST",r,{headers:this.headers,body:{email:s,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in t){const{phone:s,type:a,options:i}=t,{data:o,error:l}=await Ze(this.fetch,"POST",r,{headers:this.headers,body:{phone:s,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l})}throw new Af("You must provide either an email or phone number and a type")}catch(r){if(ze(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await s,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=r();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await ho(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const s=t.expires_at?t.expires_at*1e3-Date.now()<j0:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",t.expires_at),!s){if(this.userStorage){const o=await ho(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=k0()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};t.user=WD(t.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const r=await this._acquireLock(-1,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(t){try{return t?await Ze(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:bi}):await this._useSession(async r=>{var s,a,i;const{data:o,error:l}=r;if(l)throw l;return!(!((s=o.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new $r}:await Ze(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:bi})})}catch(r){if(ze(r))return jD(r)&&(await this._removeSession(),await Un(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async s=>{const{data:a,error:i}=s;if(i)throw i;if(!a.session)throw new $r;const o=a.session;let l=null,u=null;this.flowType==="pkce"&&t.email!=null&&([l,u]=await Ll(this.storage,this.storageKey));const{data:d,error:p}=await Ze(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:u}),jwt:o.access_token,xform:bi});if(p)throw p;return o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(s){if(await Un(this.storage,`${this.storageKey}-code-verifier`),ze(s))return this._returnResult({data:{user:null},error:s});throw s}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new $r;const r=Date.now()/1e3;let s=r,a=!0,i=null;const{payload:o}=S0(t.access_token);if(o.exp&&(s=o.exp,a=s<=r),a){const{data:l,error:u}=await this._callRefreshToken(t.refresh_token);if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:u}=await this._getUser(t.access_token);if(u)throw u;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:s-r,expires_at:s},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if(ze(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var s;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(s=o.session)!==null&&s!==void 0?s:void 0}if(!(t!=null&&t.refresh_token))throw new $r;const{data:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(ze(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!Bn())throw new Pf("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Pf(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new KS("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Pf("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new KS("No code detected.");const{data:w,error:S}=await this._exchangeCodeForSession(t.code);if(S)throw S;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:w.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:a,access_token:i,refresh_token:o,expires_in:l,expires_at:u,token_type:d}=t;if(!i||!l||!o||!d)throw new Pf("No session defined in URL");const p=Math.round(Date.now()/1e3),f=parseInt(l);let m=p+f;u&&(m=parseInt(u));const x=m-p;x*1e3<=Gl&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${f}s`);const y=m-f;p-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,m,p):p-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,m,p);const{data:g,error:b}=await this._getUser(i);if(b)throw b;const _={provider_token:s,provider_refresh_token:a,access_token:i,expires_in:f,expires_at:m,refresh_token:o,token_type:d,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:_,redirectType:t.type},error:null})}catch(s){if(ze(s))return this._returnResult({data:{session:null,redirectType:null},error:s});throw s}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await ho(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var s;const{data:a,error:i}=r;if(i)return this._returnResult({error:i});const o=(s=a.session)===null||s===void 0?void 0:s.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(_D(l)&&(l.status===404||l.status===401||l.status===403)))return this._returnResult({error:l})}return t!=="others"&&(await this._removeSession(),await Un(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=PD(),s={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:s}}}async _emitInitialSession(t){return await this._useSession(async r=>{var s,a;try{const{data:{session:i},error:o}=r;if(o)throw o;await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let s=null,a=null;this.flowType==="pkce"&&([s,a]=await Ll(this.storage,this.storageKey,!0));try{return await Ze(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:s,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(await Un(this.storage,`${this.storageKey}-code-verifier`),ze(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var t;try{const{data:r,error:s}=await this.getUser();if(s)throw s;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(ze(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:s,error:a}=await this._useSession(async i=>{var o,l,u,d,p;const{data:f,error:m}=i;if(m)throw m;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(u=t.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:!0});return await Ze(this.fetch,"GET",x,{headers:this.headers,jwt:(p=(d=f.session)===null||d===void 0?void 0:d.access_token)!==null&&p!==void 0?p:void 0})});if(a)throw a;return Bn()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),this._returnResult({data:{provider:t.provider,url:s==null?void 0:s.url},error:null})}catch(s){if(ze(s))return this._returnResult({data:{provider:t.provider,url:null},error:s});throw s}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var s;try{const{error:a,data:{session:i}}=r;if(a)throw a;const{options:o,provider:l,token:u,access_token:d,nonce:p}=t,f=await Ze(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=i==null?void 0:i.access_token)!==null&&s!==void 0?s:void 0,body:{provider:l,id_token:u,access_token:d,nonce:p,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Ns}),{data:m,error:x}=f;return x?this._returnResult({data:{user:null,session:null},error:x}):!m||!m.session||!m.user?this._returnResult({data:{user:null,session:null},error:new Il}):(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("USER_UPDATED",m.session)),this._returnResult({data:m,error:x}))}catch(a){if(await Un(this.storage,`${this.storageKey}-code-verifier`),ze(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var s,a;const{data:i,error:o}=r;if(o)throw o;return await Ze(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(ze(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const s=Date.now();return await MD(async a=>(a>0&&await LD(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await Ze(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Ns})),(a,i)=>{const o=200*Math.pow(2,a);return i&&N0(i)&&Date.now()+o-s<Gl})}catch(s){if(this._debug(r,"error",s),ze(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const s=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",s),Bn()&&!r.skipBrowserRedirect&&window.location.assign(s),{data:{provider:t,url:s},error:null}}async _recoverAndRefresh(){var t,r;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const a=await ho(this.storage,this.storageKey);if(a&&this.userStorage){let o=await ho(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:a.user},await Vl(this.userStorage,this.storageKey+"-user",o)),a.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:k0()}else if(a&&!a.user&&!a.user){const o=await ho(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(a.user=o.user,await Un(this.storage,this.storageKey+"-user"),await Vl(this.storage,this.storageKey,a)):a.user=k0()}if(this._debug(s,"session from storage",a),!this._isValidSession(a)){this._debug(s,"session is not valid"),a!==null&&await this._removeSession();return}const i=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<j0;if(this._debug(s,`session has${i?"":" not"} expired with margin of ${j0}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:o}=await this._callRefreshToken(a.refresh_token);o&&(console.error(o),N0(o)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(a.access_token);!l&&(o!=null&&o.user)?(a.user=o.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(s,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(s,"error",a),console.error(a);return}finally{this._debug(s,"end")}}async _callRefreshToken(t){var r,s;if(!t)throw new $r;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new _p;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new $r;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={data:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(a,"error",i),ze(i)){const o={data:null,error:i};return N0(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,r,s=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",r,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(u){i.push(u)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Un(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),s=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&r.user&&await Vl(this.userStorage,this.storageKey+"-user",{user:r.user});const a=Object.assign({},r);delete a.user;const i=QS(a);await Vl(this.storage,this.storageKey,i)}else{const a=QS(r);await Vl(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Un(this.storage,this.storageKey),await Un(this.storage,this.storageKey+"-code-verifier"),await Un(this.storage,this.storageKey+"-user"),this.userStorage&&await Un(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Bn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Gl);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:s}}=r;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((s.expires_at*1e3-t)/Gl);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Gl}ms, refresh threshold is ${wv} ticks`),a<=wv&&await this._callRefreshToken(s.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof gT)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Bn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,s){const a=[`provider=${encodeURIComponent(r)}`];if(s!=null&&s.redirectTo&&a.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&a.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[i,o]=await Ll(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(l.toString())}if(s!=null&&s.queryParams){const i=new URLSearchParams(s.queryParams);a.push(i.toString())}return s!=null&&s.skipBrowserRedirect&&a.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var s;const{data:a,error:i}=r;return i?this._returnResult({data:null,error:i}):await Ze(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(ze(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var s,a;const{data:i,error:o}=r;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:u,error:d}=await Ze(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token});return d?this._returnResult({data:null,error:d}):(t.factorType==="totp"&&u.type==="totp"&&(!((a=u==null?void 0:u.totp)===null||a===void 0)&&a.qr_code)&&(u.totp.qr_code=`data:image/svg+xml;utf-8,${u.totp.qr_code}`),this._returnResult({data:u,error:null}))})}catch(r){if(ze(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:a,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?h$(t.webauthn.credential_response):f$(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:u}=await Ze(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});return u?this._returnResult({data:null,error:u}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:u}))})}catch(r){if(ze(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:a,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=await Ze(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});if(o.error)return o;const{data:l}=o;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:u$(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:d$(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(ze(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:s}=await this._challenge({factorId:t.factorId});return s?this._returnResult({data:null,error:s}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:s}=await this.getUser();if(s)return{data:null,error:s};const a={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])a.all.push(i),i.status==="verified"&&a[i.factor_type].push(i);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var t,r;const{data:{session:s},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=S0(s.access_token);let o=null;i.aal&&(o=i.aal);let l=o;((r=(t=s.user.factors)===null||t===void 0?void 0:t.filter(p=>p.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const d=i.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:d},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:s},error:a}=r;return a?this._returnResult({data:null,error:a}):s?await Ze(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:s.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new $r})})}catch(r){if(ze(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async s=>{const{data:{session:a},error:i}=s;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new $r});const o=await Ze(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&Bn()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(s){if(ze(s))return this._returnResult({data:null,error:s});throw s}}async _denyAuthorization(t,r){try{return await this._useSession(async s=>{const{data:{session:a},error:i}=s;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new $r});const o=await Ze(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&Bn()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(s){if(ze(s))return this._returnResult({data:null,error:s});throw s}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:s}=t;return s?this._returnResult({data:null,error:s}):r?await Ze(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new $r})})}catch(t){if(ze(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:s},error:a}=r;return a?this._returnResult({data:null,error:a}):s?(await Ze(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new $r})})}catch(r){if(ze(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let s=r.keys.find(l=>l.kid===t);if(s)return s;const a=Date.now();if(s=this.jwks.keys.find(l=>l.kid===t),s&&this.jwks_cached_at+vD>a)return s;const{data:i,error:o}=await Ze(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,s=i.keys.find(l=>l.kid===t),!s)?null:s}async getClaims(t,r={}){try{let s=t;if(!s){const{data:x,error:y}=await this.getSession();if(y||!x.session)return this._returnResult({data:null,error:y});s=x.session.access_token}const{header:a,payload:i,signature:o,raw:{header:l,payload:u}}=S0(s);r!=null&&r.allowExpired||HD(i.exp);const d=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!d){const{error:x}=await this.getUser(s);if(x)throw x;return{data:{claims:i,header:a,signature:o},error:null}}const p=KD(a.alg),f=await crypto.subtle.importKey("jwk",d,p,!0,["verify"]);if(!await crypto.subtle.verify(p,f,o,RD(`${l}.${u}`)))throw new Nv("Invalid JWT signature");return{data:{claims:i,header:a,signature:o},error:null}}catch(s){if(ze(s))return this._returnResult({data:null,error:s});throw s}}}yd.nextInstanceID={};const _$=yd,j$="2.89.0";let Xu="";typeof Deno<"u"?Xu="deno":typeof document<"u"?Xu="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Xu="react-native":Xu="node";const N$={"X-Client-Info":`supabase-js-${Xu}/${j$}`},S$={headers:N$},k$={schema:"public"},E$={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},C$={};function bd(e){"@babel/helpers - typeof";return bd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bd(e)}function T$(e,t){if(bd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(bd(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function R$(e){var t=T$(e,"string");return bd(t)=="symbol"?t:t+""}function A$(e,t,r){return(t=R$(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function gn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?n2(Object(r),!0).forEach(function(s){A$(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n2(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}const P$=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),O$=()=>Headers,I$=(e,t,r)=>{const s=P$(r),a=O$();return async(i,o)=>{var l;const u=(l=await t())!==null&&l!==void 0?l:e;let d=new a(o==null?void 0:o.headers);return d.has("apikey")||d.set("apikey",e),d.has("Authorization")||d.set("Authorization",`Bearer ${u}`),s(i,gn(gn({},o),{},{headers:d}))}};function L$(e){return e.endsWith("/")?e:e+"/"}function M$(e,t){var r,s;const{db:a,auth:i,realtime:o,global:l}=e,{db:u,auth:d,realtime:p,global:f}=t,m={db:gn(gn({},u),a),auth:gn(gn({},d),i),realtime:gn(gn({},p),o),storage:{},global:gn(gn(gn({},f),l),{},{headers:gn(gn({},(r=f==null?void 0:f.headers)!==null&&r!==void 0?r:{}),(s=l==null?void 0:l.headers)!==null&&s!==void 0?s:{})}),accessToken:async()=>""};return e.accessToken?m.accessToken=e.accessToken:delete m.accessToken,m}function D$(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(L$(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var $$=class extends _${constructor(e){super(e)}},q$=class{constructor(e,t,r){var s,a;this.supabaseUrl=e,this.supabaseKey=t;const i=D$(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o=`sb-${i.hostname.split(".")[0]}-auth-token`,l={db:k$,realtime:C$,auth:gn(gn({},E$),{},{storageKey:o}),global:S$},u=M$(r??{},l);if(this.storageKey=(s=u.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(a=u.global.headers)!==null&&a!==void 0?a:{},u.accessToken)this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(p,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}});else{var d;this.auth=this._initSupabaseAuthClient((d=u.auth)!==null&&d!==void 0?d:{},this.headers,u.global.fetch)}this.fetch=I$(t,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(gn({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.accessToken&&this.accessToken().then(p=>this.realtime.setAuth(p)).catch(p=>console.warn("Failed to set initial Realtime auth token:",p)),this.rest=new y8(new URL("rest/v1",i).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new pD(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new f8(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,r;if(e.accessToken)return await e.accessToken();const{data:s}=await e.auth.getSession();return(t=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,userStorage:a,storageKey:i,flowType:o,lock:l,debug:u,throwOnError:d},p,f){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new $$({url:this.authUrl.href,headers:gn(gn({},m),p),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,userStorage:a,flowType:o,lock:l,debug:u,throwOnError:d,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(x=>x.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new L8(this.realtimeUrl.href,gn(gn({},e),{},{params:gn(gn({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const F$=(e,t,r)=>new q$(e,t,r);function U$(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}U$()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const B$=void 0,H$=void 0;throw new Error("Missing Supabase environment variables");const vT="rgfl-auth-token";function K$(e){if(!e)return!1;try{const t=JSON.parse(e);return!t.access_token||typeof t.access_token!="string"?!1:t.access_token.split(".").length!==3?(console.warn("Invalid JWT format in stored token - clearing"),!1):!0}catch{return console.warn("Failed to parse stored token - clearing"),!1}}const z$={getItem:e=>{const t=window.localStorage.getItem(e);return e===vT&&!K$(t)?(window.localStorage.removeItem(e),null):t},setItem:(e,t)=>{window.localStorage.setItem(e,t)},removeItem:e=>{window.localStorage.removeItem(e)}},X=F$(B$,H$,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,storageKey:vT,storage:z$}}),Pe=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Xe=globalThis,ka="10.32.1";function Fa(){return zd(Xe),Xe}function zd(e){const t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||ka,t[ka]=t[ka]||{}}function Wc(e,t,r=Xe){const s=r.__SENTRY__=r.__SENTRY__||{},a=s[ka]=s[ka]||{};return a[e]||(a[e]=t())}const qw=["debug","info","warn","error","log","assert","trace"],W$="Sentry Logger ",Mm={};function zi(e){if(!("console"in Xe))return e();const t=Xe.console,r={},s=Object.keys(Mm);s.forEach(a=>{const i=Mm[a];r[a]=t[a],t[a]=i});try{return e()}finally{s.forEach(a=>{t[a]=r[a]})}}function G$(){Uw().enabled=!0}function V$(){Uw().enabled=!1}function wT(){return Uw().enabled}function Q$(...e){Fw("log",...e)}function Y$(...e){Fw("warn",...e)}function J$(...e){Fw("error",...e)}function Fw(e,...t){Pe&&wT()&&zi(()=>{Xe.console[e](`${W$}[${e}]:`,...t)})}function Uw(){return Pe?Wc("loggerSettings",()=>({enabled:!1})):{enabled:!1}}const ce={enable:G$,disable:V$,isEnabled:wT,log:Q$,warn:Y$,error:J$},_T=50,Zs="?",r2=/\(error: (.*)\)/,s2=/captureMessage|captureException/;function jT(...e){const t=e.sort((r,s)=>r[0]-s[0]).map(r=>r[1]);return(r,s=0,a=0)=>{const i=[],o=r.split(`
`);for(let l=s;l<o.length;l++){let u=o[l];u.length>1024&&(u=u.slice(0,1024));const d=r2.test(u)?u.replace(r2,"$1"):u;if(!d.match(/\S*Error: /)){for(const p of t){const f=p(d);if(f){i.push(f);break}}if(i.length>=_T+a)break}}return Z$(i.slice(a))}}function X$(e){return Array.isArray(e)?jT(...e):e}function Z$(e){if(!e.length)return[];const t=Array.from(e);return/sentryWrapped/.test(Of(t).function||"")&&t.pop(),t.reverse(),s2.test(Of(t).function||"")&&(t.pop(),s2.test(Of(t).function||"")&&t.pop()),t.slice(0,_T).map(r=>({...r,filename:r.filename||Of(t).filename,function:r.function||Zs}))}function Of(e){return e[e.length-1]||{}}const C0="<anonymous>";function Ia(e){try{return!e||typeof e!="function"?C0:e.name||C0}catch{return C0}}function Sv(e){const t=e.exception;if(t){const r=[];try{return t.values.forEach(s=>{s.stacktrace.frames&&r.push(...s.stacktrace.frames)}),r}catch{return}}}function NT(e){return"__v_isVNode"in e&&e.__v_isVNode?"[VueVNode]":"[VueViewModel]"}const sm={},a2={};function Wi(e,t){sm[e]=sm[e]||[],sm[e].push(t)}function Gi(e,t){if(!a2[e]){a2[e]=!0;try{t()}catch(r){Pe&&ce.error(`Error while instrumenting ${e}`,r)}}}function as(e,t){const r=e&&sm[e];if(r)for(const s of r)try{s(t)}catch(a){Pe&&ce.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${Ia(s)}
Error:`,a)}}let T0=null;function ST(e){const t="error";Wi(t,e),Gi(t,eq)}function eq(){T0=Xe.onerror,Xe.onerror=function(e,t,r,s,a){return as("error",{column:s,error:a,line:r,msg:e,url:t}),T0?T0.apply(this,arguments):!1},Xe.onerror.__SENTRY_INSTRUMENTED__=!0}let R0=null;function kT(e){const t="unhandledrejection";Wi(t,e),Gi(t,tq)}function tq(){R0=Xe.onunhandledrejection,Xe.onunhandledrejection=function(e){return as("unhandledrejection",e),R0?R0.apply(this,arguments):!0},Xe.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const ET=Object.prototype.toString;function Ea(e){switch(ET.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return La(e,Error)}}function Gc(e,t){return ET.call(e)===`[object ${t}]`}function CT(e){return Gc(e,"ErrorEvent")}function i2(e){return Gc(e,"DOMError")}function nq(e){return Gc(e,"DOMException")}function Ps(e){return Gc(e,"String")}function jp(e){return typeof e=="object"&&e!==null&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function $i(e){return e===null||jp(e)||typeof e!="object"&&typeof e!="function"}function Xs(e){return Gc(e,"Object")}function Np(e){return typeof Event<"u"&&La(e,Event)}function rq(e){return typeof Element<"u"&&La(e,Element)}function sq(e){return Gc(e,"RegExp")}function nl(e){return!!(e!=null&&e.then&&typeof e.then=="function")}function aq(e){return Xs(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function La(e,t){try{return e instanceof t}catch{return!1}}function TT(e){return!!(typeof e=="object"&&e!==null&&(e.__isVue||e._isVue||e.__v_isVNode))}function Bw(e){return typeof Request<"u"&&La(e,Request)}const Hw=Xe,iq=80;function Cr(e,t={}){if(!e)return"<unknown>";try{let r=e;const s=5,a=[];let i=0,o=0;const l=" > ",u=l.length;let d;const p=Array.isArray(t)?t:t.keyAttrs,f=!Array.isArray(t)&&t.maxStringLength||iq;for(;r&&i++<s&&(d=oq(r,p),!(d==="html"||i>1&&o+a.length*u+d.length>=f));)a.push(d),o+=d.length,r=r.parentNode;return a.reverse().join(l)}catch{return"<unknown>"}}function oq(e,t){const r=e,s=[];if(!(r!=null&&r.tagName))return"";if(Hw.HTMLElement&&r instanceof HTMLElement&&r.dataset){if(r.dataset.sentryComponent)return r.dataset.sentryComponent;if(r.dataset.sentryElement)return r.dataset.sentryElement}s.push(r.tagName.toLowerCase());const a=t!=null&&t.length?t.filter(o=>r.getAttribute(o)).map(o=>[o,r.getAttribute(o)]):null;if(a!=null&&a.length)a.forEach(o=>{s.push(`[${o[0]}="${o[1]}"]`)});else{r.id&&s.push(`#${r.id}`);const o=r.className;if(o&&Ps(o)){const l=o.split(/\s+/);for(const u of l)s.push(`.${u}`)}}const i=["aria-label","type","name","title","alt"];for(const o of i){const l=r.getAttribute(o);l&&s.push(`[${o}="${l}"]`)}return s.join("")}function rl(){try{return Hw.document.location.href}catch{return""}}function RT(e){if(!Hw.HTMLElement)return null;let t=e;const r=5;for(let s=0;s<r;s++){if(!t)return null;if(t instanceof HTMLElement){if(t.dataset.sentryComponent)return t.dataset.sentryComponent;if(t.dataset.sentryElement)return t.dataset.sentryElement}t=t.parentNode}return null}function Kn(e,t,r){if(!(t in e))return;const s=e[t];if(typeof s!="function")return;const a=r(s);typeof a=="function"&&AT(a,s);try{e[t]=a}catch{Pe&&ce.log(`Failed to replace method "${t}" in object`,e)}}function In(e,t,r){try{Object.defineProperty(e,t,{value:r,writable:!0,configurable:!0})}catch{Pe&&ce.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function AT(e,t){try{const r=t.prototype||{};e.prototype=t.prototype=r,In(e,"__sentry_original__",t)}catch{}}function Kw(e){return e.__sentry_original__}function PT(e){if(Ea(e))return{message:e.message,name:e.name,stack:e.stack,...l2(e)};if(Np(e)){const t={type:e.type,target:o2(e.target),currentTarget:o2(e.currentTarget),...l2(e)};return typeof CustomEvent<"u"&&La(e,CustomEvent)&&(t.detail=e.detail),t}else return e}function o2(e){try{return rq(e)?Cr(e):Object.prototype.toString.call(e)}catch{return"<unknown>"}}function l2(e){if(typeof e=="object"&&e!==null){const t={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}else return{}}function lq(e){const t=Object.keys(PT(e));return t.sort(),t[0]?t.join(", "):"[object has no keys]"}function vd(e,t=0){return typeof e!="string"||t===0||e.length<=t?e:`${e.slice(0,t)}...`}function A0(e,t){let r=e;const s=r.length;if(s<=150)return r;t>s&&(t=s);let a=Math.max(t-60,0);a<5&&(a=0);let i=Math.min(a+140,s);return i>s-5&&(i=s),i===s&&(a=Math.max(i-140,0)),r=r.slice(a,i),a>0&&(r=`'{snip} ${r}`),i<s&&(r+=" {snip}"),r}function Dm(e,t){if(!Array.isArray(e))return"";const r=[];for(let s=0;s<e.length;s++){const a=e[s];try{TT(a)?r.push(NT(a)):r.push(String(a))}catch{r.push("[value cannot be serialized]")}}return r.join(t)}function am(e,t,r=!1){return Ps(e)?sq(t)?t.test(e):Ps(t)?r?e===t:e.includes(t):!1:!1}function Os(e,t=[],r=!1){return t.some(s=>am(e,s,r))}function cq(){const e=Xe;return e.crypto||e.msCrypto}let P0;function uq(){return Math.random()*16}function On(e=cq()){try{if(e!=null&&e.randomUUID)return e.randomUUID().replace(/-/g,"")}catch{}return P0||(P0="10000000100040008000"+1e11),P0.replace(/[018]/g,t=>(t^(uq()&15)>>t/4).toString(16))}function OT(e){var t,r;return(r=(t=e.exception)==null?void 0:t.values)==null?void 0:r[0]}function yo(e){const{message:t,event_id:r}=e;if(t)return t;const s=OT(e);return s?s.type&&s.value?`${s.type}: ${s.value}`:s.type||s.value||r||"<unknown>":r||"<unknown>"}function kv(e,t,r){const s=e.exception=e.exception||{},a=s.values=s.values||[],i=a[0]=a[0]||{};i.value||(i.value=t||""),i.type||(i.type="Error")}function Ma(e,t){const r=OT(e);if(!r)return;const s={type:"generic",handled:!0},a=r.mechanism;if(r.mechanism={...s,...a,...t},t&&"data"in t){const i={...a==null?void 0:a.data,...t.data};r.mechanism.data=i}}function dq(e,t,r=5){if(t.lineno===void 0)return;const s=e.length,a=Math.max(Math.min(s-1,t.lineno-1),0);t.pre_context=e.slice(Math.max(0,a-r),a).map(o=>A0(o,0));const i=Math.min(s-1,a);t.context_line=A0(e[i],t.colno||0),t.post_context=e.slice(Math.min(a+1,s),a+1+r).map(o=>A0(o,0))}function c2(e){if(hq(e))return!0;try{In(e,"__sentry_captured__",!0)}catch{}return!1}function hq(e){try{return e.__sentry_captured__}catch{}}const IT=1e3;function sl(){return Date.now()/IT}function fq(){const{performance:e}=Xe;if(!(e!=null&&e.now)||!e.timeOrigin)return sl;const t=e.timeOrigin;return()=>(t+e.now())/IT}let u2;function Jt(){return(u2??(u2=fq()))()}let O0;function mq(){var p;const{performance:e}=Xe;if(!(e!=null&&e.now))return[void 0,"none"];const t=3600*1e3,r=e.now(),s=Date.now(),a=e.timeOrigin?Math.abs(e.timeOrigin+r-s):t,i=a<t,o=(p=e.timing)==null?void 0:p.navigationStart,u=typeof o=="number"?Math.abs(o+r-s):t,d=u<t;return i||d?a<=u?[e.timeOrigin,"timeOrigin"]:[o,"navigationStart"]:[s,"dateNow"]}function rr(){return O0||(O0=mq()),O0[0]}function pq(e){const t=Jt(),r={sid:On(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>gq(r)};return e&&Nc(r,e),r}function Nc(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),!e.did&&!t.did&&(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||Jt(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=t.sid.length===32?t.sid:On()),t.init!==void 0&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),typeof t.started=="number"&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if(typeof t.duration=="number")e.duration=t.duration;else{const r=e.timestamp-e.started;e.duration=r>=0?r:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),typeof t.errors=="number"&&(e.errors=t.errors),t.status&&(e.status=t.status)}function xq(e,t){let r={};e.status==="ok"&&(r={status:"exited"}),Nc(e,r)}function gq(e){return{sid:`${e.sid}`,init:e.init,started:new Date(e.started*1e3).toISOString(),timestamp:new Date(e.timestamp*1e3).toISOString(),status:e.status,errors:e.errors,did:typeof e.did=="number"||typeof e.did=="string"?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}}}function Wd(e,t,r=2){if(!t||typeof t!="object"||r<=0)return t;if(e&&Object.keys(t).length===0)return e;const s={...e};for(const a in t)Object.prototype.hasOwnProperty.call(t,a)&&(s[a]=Wd(s[a],t[a],r-1));return s}function ea(){return On()}function Ca(){return On().substring(16)}const Ev="_sentrySpan";function ta(e,t){t?In(e,Ev,t):delete e[Ev]}function Sc(e){return e[Ev]}const yq=100;class Ls{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._attributes={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:ea(),sampleRand:Math.random()}}clone(){const t=new Ls;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._attributes={...this._attributes},t._extra={...this._extra},t._contexts={...this._contexts},this._contexts.flags&&(t._contexts.flags={values:[...this._contexts.flags.values]}),t._user=this._user,t._level=this._level,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t._lastEventId=this._lastEventId,ta(t,Sc(this)),t}setClient(t){this._client=t}setLastEventId(t){this._lastEventId=t}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&Nc(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,r){return this.setTags({[t]:r})}setAttributes(t){return this._attributes={...this._attributes,...t},this._notifyScopeListeners(),this}setAttribute(t,r){return this.setAttributes({[t]:r})}removeAttribute(t){return t in this._attributes&&(delete this._attributes[t],this._notifyScopeListeners()),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,r){return this._extra={...this._extra,[t]:r},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,r){return r===null?delete this._contexts[t]:this._contexts[t]=r,this._notifyScopeListeners(),this}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;const r=typeof t=="function"?t(this):t,s=r instanceof Ls?r.getScopeData():Xs(r)?t:void 0,{tags:a,attributes:i,extra:o,user:l,contexts:u,level:d,fingerprint:p=[],propagationContext:f}=s||{};return this._tags={...this._tags,...a},this._attributes={...this._attributes,...i},this._extra={...this._extra,...o},this._contexts={...this._contexts,...u},l&&Object.keys(l).length&&(this._user=l),d&&(this._level=d),p.length&&(this._fingerprint=p),f&&(this._propagationContext=f),this}clear(){return this._breadcrumbs=[],this._tags={},this._attributes={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,ta(this,void 0),this._attachments=[],this.setPropagationContext({traceId:ea(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(t,r){var i;const s=typeof r=="number"?r:yq;if(s<=0)return this;const a={timestamp:sl(),...t,message:t.message?vd(t.message,2048):t.message};return this._breadcrumbs.push(a),this._breadcrumbs.length>s&&(this._breadcrumbs=this._breadcrumbs.slice(-s),(i=this._client)==null||i.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,attributes:this._attributes,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:Sc(this)}}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata=Wd(this._sdkProcessingMetadata,t,2),this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(t,r){const s=(r==null?void 0:r.event_id)||On();if(!this._client)return Pe&&ce.warn("No client configured on scope - will not capture exception!"),s;const a=new Error("Sentry syntheticException");return this._client.captureException(t,{originalException:t,syntheticException:a,...r,event_id:s},this),s}captureMessage(t,r,s){const a=(s==null?void 0:s.event_id)||On();if(!this._client)return Pe&&ce.warn("No client configured on scope - will not capture message!"),a;const i=(s==null?void 0:s.syntheticException)??new Error(t);return this._client.captureMessage(t,r,{originalException:t,syntheticException:i,...s,event_id:a},this),a}captureEvent(t,r){const s=(r==null?void 0:r.event_id)||On();return this._client?(this._client.captureEvent(t,{...r,event_id:s},this),s):(Pe&&ce.warn("No client configured on scope - will not capture event!"),s)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}}function bq(){return Wc("defaultCurrentScope",()=>new Ls)}function vq(){return Wc("defaultIsolationScope",()=>new Ls)}class wq{constructor(t,r){let s;t?s=t:s=new Ls;let a;r?a=r:a=new Ls,this._stack=[{scope:s}],this._isolationScope=a}withScope(t){const r=this._pushScope();let s;try{s=t(r)}catch(a){throw this._popScope(),a}return nl(s)?s.then(a=>(this._popScope(),a),a=>{throw this._popScope(),a}):(this._popScope(),s)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const t=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:t}),t}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}}function kc(){const e=Fa(),t=zd(e);return t.stack=t.stack||new wq(bq(),vq())}function _q(e){return kc().withScope(e)}function jq(e,t){const r=kc();return r.withScope(()=>(r.getStackTop().scope=e,t(e)))}function d2(e){return kc().withScope(()=>e(kc().getIsolationScope()))}function Nq(){return{withIsolationScope:d2,withScope:_q,withSetScope:jq,withSetIsolationScope:(e,t)=>d2(t),getCurrentScope:()=>kc().getScope(),getIsolationScope:()=>kc().getIsolationScope()}}function Vi(e){const t=zd(e);return t.acs?t.acs:Nq()}function lt(){const e=Fa();return Vi(e).getCurrentScope()}function En(){const e=Fa();return Vi(e).getIsolationScope()}function Ta(){return Wc("globalScope",()=>new Ls)}function Pr(...e){const t=Fa(),r=Vi(t);if(e.length===2){const[s,a]=e;return s?r.withSetScope(s,a):r.withScope(a)}return r.withScope(e[0])}function Sq(...e){const t=Fa(),r=Vi(t);if(e.length===2){const[s,a]=e;return s?r.withSetIsolationScope(s,a):r.withIsolationScope(a)}return r.withIsolationScope(e[0])}function Ie(){return lt().getClient()}function LT(e){const t=e.getPropagationContext(),{traceId:r,parentSpanId:s,propagationSpanId:a}=t,i={trace_id:r,span_id:a||Ca()};return s&&(i.parent_span_id=s),i}const At="sentry.source",Sp="sentry.sample_rate",MT="sentry.previous_trace_sample_rate",Ut="sentry.op",ct="sentry.origin",wd="sentry.idle_span_finish_reason",Gd="sentry.measurement_unit",Vd="sentry.measurement_value",Cv="sentry.custom_span_name",zw="sentry.profile_id",Vc="sentry.exclusive_time",kq="http.request.method",Eq="url.full",Cq="sentry.link.type",Tq=0,kp=1,vt=2;function DT(e){if(e<400&&e>=100)return{code:kp};if(e>=400&&e<500)switch(e){case 401:return{code:vt,message:"unauthenticated"};case 403:return{code:vt,message:"permission_denied"};case 404:return{code:vt,message:"not_found"};case 409:return{code:vt,message:"already_exists"};case 413:return{code:vt,message:"failed_precondition"};case 429:return{code:vt,message:"resource_exhausted"};case 499:return{code:vt,message:"cancelled"};default:return{code:vt,message:"invalid_argument"}}if(e>=500&&e<600)switch(e){case 501:return{code:vt,message:"unimplemented"};case 503:return{code:vt,message:"unavailable"};case 504:return{code:vt,message:"deadline_exceeded"};default:return{code:vt,message:"internal_error"}}return{code:vt,message:"internal_error"}}function _d(e,t){e.setAttribute("http.response.status_code",t);const r=DT(t);r.message!=="unknown_error"&&e.setStatus(r)}const $T="_sentryScope",qT="_sentryIsolationScope";function Rq(e){try{const t=Xe.WeakRef;if(typeof t=="function")return new t(e)}catch{}return e}function Aq(e){if(e){if(typeof e=="object"&&"deref"in e&&typeof e.deref=="function")try{return e.deref()}catch{return}return e}}function Pq(e,t,r){e&&(In(e,qT,Rq(r)),In(e,$T,t))}function $m(e){const t=e;return{scope:t[$T],isolationScope:Aq(t[qT])}}const Ww="sentry-",Oq=/^sentry-/,Iq=8192;function Gw(e){const t=Lq(e);if(!t)return;const r=Object.entries(t).reduce((s,[a,i])=>{if(a.match(Oq)){const o=a.slice(Ww.length);s[o]=i}return s},{});if(Object.keys(r).length>0)return r}function FT(e){if(!e)return;const t=Object.entries(e).reduce((r,[s,a])=>(a&&(r[`${Ww}${s}`]=a),r),{});return Mq(t)}function Lq(e){if(!(!e||!Ps(e)&&!Array.isArray(e)))return Array.isArray(e)?e.reduce((t,r)=>{const s=h2(r);return Object.entries(s).forEach(([a,i])=>{t[a]=i}),t},{}):h2(e)}function h2(e){return e.split(",").map(t=>{const r=t.indexOf("=");if(r===-1)return[];const s=t.slice(0,r),a=t.slice(r+1);return[s,a].map(i=>{try{return decodeURIComponent(i.trim())}catch{return}})}).reduce((t,[r,s])=>(r&&s&&(t[r]=s),t),{})}function Mq(e){if(Object.keys(e).length!==0)return Object.entries(e).reduce((t,[r,s],a)=>{const i=`${encodeURIComponent(r)}=${encodeURIComponent(s)}`,o=a===0?i:`${t},${i}`;return o.length>Iq?(Pe&&ce.warn(`Not adding key: ${r} with val: ${s} to baggage header due to exceeding baggage size limits.`),t):o},"")}const Dq=/^o(\d+)\./,$q=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function qq(e){return e==="http"||e==="https"}function Ua(e,t=!1){const{host:r,path:s,pass:a,port:i,projectId:o,protocol:l,publicKey:u}=e;return`${l}://${u}${t&&a?`:${a}`:""}@${r}${i?`:${i}`:""}/${s&&`${s}/`}${o}`}function UT(e){const t=$q.exec(e);if(!t){zi(()=>{console.error(`Invalid Sentry Dsn: ${e}`)});return}const[r,s,a="",i="",o="",l=""]=t.slice(1);let u="",d=l;const p=d.split("/");if(p.length>1&&(u=p.slice(0,-1).join("/"),d=p.pop()),d){const f=d.match(/^\d+/);f&&(d=f[0])}return BT({host:i,pass:a,path:u,projectId:d,port:o,protocol:r,publicKey:s})}function BT(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function Fq(e){if(!Pe)return!0;const{port:t,projectId:r,protocol:s}=e;return["protocol","publicKey","host","projectId"].find(o=>e[o]?!1:(ce.error(`Invalid Sentry Dsn: ${o} missing`),!0))?!1:r.match(/^\d+$/)?qq(s)?t&&isNaN(parseInt(t,10))?(ce.error(`Invalid Sentry Dsn: Invalid port ${t}`),!1):!0:(ce.error(`Invalid Sentry Dsn: Invalid protocol ${s}`),!1):(ce.error(`Invalid Sentry Dsn: Invalid projectId ${r}`),!1)}function Uq(e){const t=e.match(Dq);return t==null?void 0:t[1]}function HT(e){const t=e.getOptions(),{host:r}=e.getDsn()||{};let s;return t.orgId?s=String(t.orgId):r&&(s=Uq(r)),s}function KT(e){const t=typeof e=="string"?UT(e):BT(e);if(!(!t||!Fq(t)))return t}function Ho(e){if(typeof e=="boolean")return Number(e);const t=typeof e=="string"?parseFloat(e):e;if(!(typeof t!="number"||isNaN(t)||t<0||t>1))return t}const zT=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function Bq(e){if(!e)return;const t=e.match(zT);if(!t)return;let r;return t[3]==="1"?r=!0:t[3]==="0"&&(r=!1),{traceId:t[1],parentSampled:r,parentSpanId:t[2]}}function WT(e,t){const r=Bq(e),s=Gw(t);if(!(r!=null&&r.traceId))return{traceId:ea(),sampleRand:Math.random()};const a=Hq(r,s);s&&(s.sample_rand=a.toString());const{traceId:i,parentSpanId:o,parentSampled:l}=r;return{traceId:i,parentSpanId:o,sampled:l,dsc:s||{},sampleRand:a}}function GT(e=ea(),t=Ca(),r){let s="";return r!==void 0&&(s=r?"-1":"-0"),`${e}-${t}${s}`}function VT(e=ea(),t=Ca(),r){return`00-${e}-${t}-${r?"01":"00"}`}function Hq(e,t){const r=Ho(t==null?void 0:t.sample_rand);if(r!==void 0)return r;const s=Ho(t==null?void 0:t.sample_rate);return s&&(e==null?void 0:e.parentSampled)!==void 0?e.parentSampled?Math.random()*s:s+Math.random()*(1-s):Math.random()}function Kq(e,t){const r=HT(e);return t&&r&&t!==r?(ce.log(`Won't continue trace because org IDs don't match (incoming baggage: ${t}, SDK options: ${r})`),!1):(e.getOptions().strictTraceContinuation||!1)&&(t&&!r||!t&&r)?(ce.log(`Starting a new trace because strict trace continuation is enabled but one org ID is missing (incoming baggage: ${t}, Sentry client: ${r})`),!1):!0}const QT=0,Vw=1;let f2=!1;function zq(e){const{spanId:t,traceId:r}=e.spanContext(),{data:s,op:a,parent_span_id:i,status:o,origin:l,links:u}=We(e);return{parent_span_id:i,span_id:t,trace_id:r,data:s,op:a,status:o,origin:l,links:u}}function YT(e){const{spanId:t,traceId:r,isRemote:s}=e.spanContext(),a=s?t:We(e).parent_span_id,i=$m(e).scope,o=s?(i==null?void 0:i.getPropagationContext().propagationSpanId)||Ca():t;return{parent_span_id:a,span_id:o,trace_id:r}}function JT(e){const{traceId:t,spanId:r}=e.spanContext(),s=Qi(e);return GT(t,r,s)}function Wq(e){const{traceId:t,spanId:r}=e.spanContext(),s=Qi(e);return VT(t,r,s)}function XT(e){if(e&&e.length>0)return e.map(({context:{spanId:t,traceId:r,traceFlags:s,...a},attributes:i})=>({span_id:t,trace_id:r,sampled:s===Vw,attributes:i,...a}))}function Do(e){return typeof e=="number"?m2(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?m2(e.getTime()):Jt()}function m2(e){return e>9999999999?e/1e3:e}function We(e){var s;if(Vq(e))return e.getSpanJSON();const{spanId:t,traceId:r}=e.spanContext();if(Gq(e)){const{attributes:a,startTime:i,name:o,endTime:l,status:u,links:d}=e,p="parentSpanId"in e?e.parentSpanId:"parentSpanContext"in e?(s=e.parentSpanContext)==null?void 0:s.spanId:void 0;return{span_id:t,trace_id:r,data:a,description:o,parent_span_id:p,start_timestamp:Do(i),timestamp:Do(l)||void 0,status:ZT(u),op:a[Ut],origin:a[ct],links:XT(d)}}return{span_id:t,trace_id:r,start_timestamp:0,data:{}}}function Gq(e){const t=e;return!!t.attributes&&!!t.startTime&&!!t.name&&!!t.endTime&&!!t.status}function Vq(e){return typeof e.getSpanJSON=="function"}function Qi(e){const{traceFlags:t}=e.spanContext();return t===Vw}function ZT(e){if(!(!e||e.code===Tq))return e.code===kp?"ok":e.message||"internal_error"}const $o="_sentryChildSpans",Tv="_sentryRootSpan";function e3(e,t){const r=e[Tv]||e;In(t,Tv,r),e[$o]?e[$o].add(t):In(e,$o,new Set([t]))}function Qq(e,t){e[$o]&&e[$o].delete(t)}function id(e){const t=new Set;function r(s){if(!t.has(s)&&Qi(s)){t.add(s);const a=s[$o]?Array.from(s[$o]):[];for(const i of a)r(i)}}return r(e),Array.from(t)}function dn(e){return e[Tv]||e}function hn(){const e=Fa(),t=Vi(e);return t.getActiveSpan?t.getActiveSpan():Sc(lt())}function Rv(){f2||(zi(()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly or use `ignoreSpans`.")}),f2=!0)}function Yq(e,t){e.updateName(t),e.setAttributes({[At]:"custom",[Cv]:t})}let p2=!1;function t3(){if(p2)return;function e(){const t=hn(),r=t&&dn(t);if(r){const s="internal_error";Pe&&ce.log(`[Tracing] Root span: ${s} -> Global error occurred`),r.setStatus({code:vt,message:s})}}e.tag="sentry_tracingErrorCallback",p2=!0,ST(e),kT(e)}function is(e){var r;if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const t=e||((r=Ie())==null?void 0:r.getOptions());return!!t&&(t.tracesSampleRate!=null||!!t.tracesSampler)}function x2(e){ce.log(`Ignoring span ${e.op} - ${e.description} because it matches \`ignoreSpans\`.`)}function qm(e,t){if(!(t!=null&&t.length)||!e.description)return!1;for(const r of t){if(Xq(r)){if(am(e.description,r))return Pe&&x2(e),!0;continue}if(!r.name&&!r.op)continue;const s=r.name?am(e.description,r.name):!0,a=r.op?e.op&&am(e.op,r.op):!0;if(s&&a)return Pe&&x2(e),!0}return!1}function Jq(e,t){const r=t.parent_span_id,s=t.span_id;if(r)for(const a of e)a.parent_span_id===s&&(a.parent_span_id=r)}function Xq(e){return typeof e=="string"||e instanceof RegExp}const Ep="production",n3="_frozenDsc";function im(e,t){In(e,n3,t)}function r3(e,t){const r=t.getOptions(),{publicKey:s}=t.getDsn()||{},a={environment:r.environment||Ep,release:r.release,public_key:s,trace_id:e,org_id:HT(t)};return t.emit("createDsc",a),a}function Qw(e,t){const r=t.getPropagationContext();return r.dsc||r3(r.traceId,e)}function Ms(e){var y;const t=Ie();if(!t)return{};const r=dn(e),s=We(r),a=s.data,i=r.spanContext().traceState,o=(i==null?void 0:i.get("sentry.sample_rate"))??a[Sp]??a[MT];function l(g){return(typeof o=="number"||typeof o=="string")&&(g.sample_rate=`${o}`),g}const u=r[n3];if(u)return l(u);const d=i==null?void 0:i.get("sentry.dsc"),p=d&&Gw(d);if(p)return l(p);const f=r3(e.spanContext().traceId,t),m=a[At],x=s.description;return m!=="url"&&x&&(f.transaction=x),is()&&(f.sampled=String(Qi(r)),f.sample_rand=(i==null?void 0:i.get("sentry.sample_rand"))??((y=$m(r).scope)==null?void 0:y.getPropagationContext().sampleRand.toString())),l(f),t.emit("createDsc",f,r),f}function Zq(e){const t=Ms(e);return FT(t)}class Da{constructor(t={}){this._traceId=t.traceId||ea(),this._spanId=t.spanId||Ca()}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:QT}}end(t){}setAttribute(t,r){return this}setAttributes(t){return this}setStatus(t){return this}updateName(t){return this}isRecording(){return!1}addEvent(t,r,s){return this}addLink(t){return this}addLinks(t){return this}recordException(t,r){}}function Fr(e,t=100,r=1/0){try{return Av("",e,t,r)}catch(s){return{ERROR:`**non-serializable** (${s})`}}}function s3(e,t=3,r=100*1024){const s=Fr(e,t);return rF(s)>r?s3(e,t-1,r):s}function Av(e,t,r=1/0,s=1/0,a=sF()){const[i,o]=a;if(t==null||["boolean","string"].includes(typeof t)||typeof t=="number"&&Number.isFinite(t))return t;const l=eF(e,t);if(!l.startsWith("[object "))return l;if(t.__sentry_skip_normalization__)return t;const u=typeof t.__sentry_override_normalization_depth__=="number"?t.__sentry_override_normalization_depth__:r;if(u===0)return l.replace("object ","");if(i(t))return"[Circular ~]";const d=t;if(d&&typeof d.toJSON=="function")try{const x=d.toJSON();return Av("",x,u-1,s,a)}catch{}const p=Array.isArray(t)?[]:{};let f=0;const m=PT(t);for(const x in m){if(!Object.prototype.hasOwnProperty.call(m,x))continue;if(f>=s){p[x]="[MaxProperties ~]";break}const y=m[x];p[x]=Av(x,y,u-1,s,a),f++}return o(t),p}function eF(e,t){try{if(e==="domain"&&t&&typeof t=="object"&&t._events)return"[Domain]";if(e==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&t===global)return"[Global]";if(typeof window<"u"&&t===window)return"[Window]";if(typeof document<"u"&&t===document)return"[Document]";if(TT(t))return NT(t);if(aq(t))return"[SyntheticEvent]";if(typeof t=="number"&&!Number.isFinite(t))return`[${t}]`;if(typeof t=="function")return`[Function: ${Ia(t)}]`;if(typeof t=="symbol")return`[${String(t)}]`;if(typeof t=="bigint")return`[BigInt: ${String(t)}]`;const r=tF(t);return/^HTML(\w*)Element$/.test(r)?`[HTMLElement: ${r}]`:`[object ${r}]`}catch(r){return`**non-serializable** (${r})`}}function tF(e){const t=Object.getPrototypeOf(e);return t!=null&&t.constructor?t.constructor.name:"null prototype"}function nF(e){return~-encodeURI(e).split(/%..|./).length}function rF(e){return nF(JSON.stringify(e))}function sF(){const e=new WeakSet;function t(s){return e.has(s)?!0:(e.add(s),!1)}function r(s){e.delete(s)}return[t,r]}function qs(e,t=[]){return[e,t]}function aF(e,t){const[r,s]=e;return[r,[...s,t]]}function Ko(e,t){const r=e[1];for(const s of r){const a=s[0].type;if(t(s,a))return!0}return!1}function g2(e,t){return Ko(e,(r,s)=>t.includes(s))}function Fm(e){const t=zd(Xe);return t.encodePolyfill?t.encodePolyfill(e):new TextEncoder().encode(e)}function iF(e){const t=zd(Xe);return t.decodePolyfill?t.decodePolyfill(e):new TextDecoder().decode(e)}function Um(e){const[t,r]=e;let s=JSON.stringify(t);function a(i){typeof s=="string"?s=typeof i=="string"?s+i:[Fm(s),i]:s.push(typeof i=="string"?Fm(i):i)}for(const i of r){const[o,l]=i;if(a(`
${JSON.stringify(o)}
`),typeof l=="string"||l instanceof Uint8Array)a(l);else{let u;try{u=JSON.stringify(l)}catch{u=JSON.stringify(Fr(l))}a(u)}}return typeof s=="string"?s:oF(s)}function oF(e){const t=e.reduce((a,i)=>a+i.length,0),r=new Uint8Array(t);let s=0;for(const a of e)r.set(a,s),s+=a.length;return r}function lF(e){let t=typeof e=="string"?Fm(e):e;function r(o){const l=t.subarray(0,o);return t=t.subarray(o+1),l}function s(){let o=t.indexOf(10);return o<0&&(o=t.length),JSON.parse(iF(r(o)))}const a=s(),i=[];for(;t.length;){const o=s(),l=typeof o.length=="number"?o.length:void 0;i.push([o,l?r(l):s()])}return[a,i]}function cF(e){return[{type:"span"},e]}function uF(e){const t=typeof e.data=="string"?Fm(e.data):e.data;return[{type:"attachment",length:t.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType},t]}const dF={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security",log:"log_item",metric:"metric",trace_metric:"metric"};function y2(e){return dF[e]}function Cp(e){if(!(e!=null&&e.sdk))return;const{name:t,version:r}=e.sdk;return{name:t,version:r}}function a3(e,t,r,s){var i;const a=(i=e.sdkProcessingMetadata)==null?void 0:i.dynamicSamplingContext;return{event_id:e.event_id,sent_at:new Date().toISOString(),...t&&{sdk:t},...!!r&&s&&{dsn:Ua(s)},...a&&{trace:a}}}function hF(e,t){var s,a,i,o;if(!t)return e;const r=e.sdk||{};return e.sdk={...r,name:r.name||t.name,version:r.version||t.version,integrations:[...((s=e.sdk)==null?void 0:s.integrations)||[],...t.integrations||[]],packages:[...((a=e.sdk)==null?void 0:a.packages)||[],...t.packages||[]],settings:(i=e.sdk)!=null&&i.settings||t.settings?{...(o=e.sdk)==null?void 0:o.settings,...t.settings}:void 0},e}function fF(e,t,r,s){const a=Cp(r),i={sent_at:new Date().toISOString(),...a&&{sdk:a},...!!s&&t&&{dsn:Ua(t)}},o="aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()];return qs(i,[o])}function mF(e,t,r,s){const a=Cp(r),i=e.type&&e.type!=="replay_event"?e.type:"event";hF(e,r==null?void 0:r.sdk);const o=a3(e,a,s,t);return delete e.sdkProcessingMetadata,qs(o,[[{type:i},e]])}function pF(e,t){function r(x){return!!x.trace_id&&!!x.public_key}const s=Ms(e[0]),a=t==null?void 0:t.getDsn(),i=t==null?void 0:t.getOptions().tunnel,o={sent_at:new Date().toISOString(),...r(s)&&{trace:s},...!!i&&a&&{dsn:Ua(a)}},{beforeSendSpan:l,ignoreSpans:u}=(t==null?void 0:t.getOptions())||{},d=u!=null&&u.length?e.filter(x=>!qm(We(x),u)):e,p=e.length-d.length;p&&(t==null||t.recordDroppedEvent("before_send","span",p));const f=l?x=>{const y=We(x),g=l(y);return g||(Rv(),y)}:We,m=[];for(const x of d){const y=f(x);y&&m.push(cF(y))}return qs(o,m)}function xF(e){if(!Pe)return;const{description:t="< unknown name >",op:r="< unknown op >",parent_span_id:s}=We(e),{spanId:a}=e.spanContext(),i=Qi(e),o=dn(e),l=o===e,u=`[Tracing] Starting ${i?"sampled":"unsampled"} ${l?"root ":""}span`,d=[`op: ${r}`,`name: ${t}`,`ID: ${a}`];if(s&&d.push(`parent ID: ${s}`),!l){const{op:p,description:f}=We(o);d.push(`root ID: ${o.spanContext().spanId}`),p&&d.push(`root op: ${p}`),f&&d.push(`root description: ${f}`)}ce.log(`${u}
  ${d.join(`
  `)}`)}function gF(e){if(!Pe)return;const{description:t="< unknown name >",op:r="< unknown op >"}=We(e),{spanId:s}=e.spanContext(),i=dn(e)===e,o=`[Tracing] Finishing "${r}" ${i?"root ":""}span "${t}" with ID ${s}`;ce.log(o)}function i3(e,t,r,s=hn()){const a=s&&dn(s);a&&(Pe&&ce.log(`[Measurement] Setting measurement on root span: ${e} = ${t} ${r}`),a.addEvent(e,{[Vd]:t,[Gd]:r}))}function b2(e){if(!e||e.length===0)return;const t={};return e.forEach(r=>{const s=r.attributes||{},a=s[Gd],i=s[Vd];typeof a=="string"&&typeof i=="number"&&(t[r.name]={value:i,unit:a})}),t}const v2=1e3;class Tp{constructor(t={}){this._traceId=t.traceId||ea(),this._spanId=t.spanId||Ca(),this._startTime=t.startTimestamp||Jt(),this._links=t.links,this._attributes={},this.setAttributes({[ct]:"manual",[Ut]:t.op,...t.attributes}),this._name=t.name,t.parentSpanId&&(this._parentSpanId=t.parentSpanId),"sampled"in t&&(this._sampled=t.sampled),t.endTimestamp&&(this._endTime=t.endTimestamp),this._events=[],this._isStandaloneSpan=t.isStandalone,this._endTime&&this._onSpanEnded()}addLink(t){return this._links?this._links.push(t):this._links=[t],this}addLinks(t){return this._links?this._links.push(...t):this._links=t,this}recordException(t,r){}spanContext(){const{_spanId:t,_traceId:r,_sampled:s}=this;return{spanId:t,traceId:r,traceFlags:s?Vw:QT}}setAttribute(t,r){return r===void 0?delete this._attributes[t]:this._attributes[t]=r,this}setAttributes(t){return Object.keys(t).forEach(r=>this.setAttribute(r,t[r])),this}updateStartTime(t){this._startTime=Do(t)}setStatus(t){return this._status=t,this}updateName(t){return this._name=t,this.setAttribute(At,"custom"),this}end(t){this._endTime||(this._endTime=Do(t),gF(this),this._onSpanEnded())}getSpanJSON(){return{data:this._attributes,description:this._name,op:this._attributes[Ut],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:ZT(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[ct],profile_id:this._attributes[zw],exclusive_time:this._attributes[Vc],measurements:b2(this._events),is_segment:this._isStandaloneSpan&&dn(this)===this||void 0,segment_id:this._isStandaloneSpan?dn(this).spanContext().spanId:void 0,links:XT(this._links)}}isRecording(){return!this._endTime&&!!this._sampled}addEvent(t,r,s){Pe&&ce.log("[Tracing] Adding an event to span:",t);const a=w2(r)?r:s||Jt(),i=w2(r)?{}:r||{},o={name:t,time:Do(a),attributes:i};return this._events.push(o),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){const t=Ie();if(t&&t.emit("spanEnd",this),!(this._isStandaloneSpan||this===dn(this)))return;if(this._isStandaloneSpan){this._sampled?bF(pF([this],t)):(Pe&&ce.log("[Tracing] Discarding standalone span because its trace was not chosen to be sampled."),t&&t.recordDroppedEvent("sample_rate","span"));return}const s=this._convertSpanToTransaction();s&&($m(this).scope||lt()).captureEvent(s)}_convertSpanToTransaction(){var p;if(!_2(We(this)))return;this._name||(Pe&&ce.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");const{scope:t,isolationScope:r}=$m(this),s=(p=t==null?void 0:t.getScopeData().sdkProcessingMetadata)==null?void 0:p.normalizedRequest;if(this._sampled!==!0)return;const i=id(this).filter(f=>f!==this&&!yF(f)).map(f=>We(f)).filter(_2),o=this._attributes[At];delete this._attributes[Cv],i.forEach(f=>{delete f.data[Cv]});const l={contexts:{trace:zq(this)},spans:i.length>v2?i.sort((f,m)=>f.start_timestamp-m.start_timestamp).slice(0,v2):i,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:t,capturedSpanIsolationScope:r,dynamicSamplingContext:Ms(this)},request:s,...o&&{transaction_info:{source:o}}},u=b2(this._events);return u&&Object.keys(u).length&&(Pe&&ce.log("[Measurements] Adding measurements to transaction event",JSON.stringify(u,void 0,2)),l.measurements=u),l}}function w2(e){return e&&typeof e=="number"||e instanceof Date||Array.isArray(e)}function _2(e){return!!e.start_timestamp&&!!e.timestamp&&!!e.span_id&&!!e.trace_id}function yF(e){return e instanceof Tp&&e.isStandaloneSpan()}function bF(e){const t=Ie();if(!t)return;const r=e[1];if(!r||r.length===0){t.recordDroppedEvent("before_send","span");return}t.sendEnvelope(e)}function Rp(e,t,r=()=>{},s=()=>{}){let a;try{a=e()}catch(i){throw t(i),r(),i}return vF(a,t,r,s)}function vF(e,t,r,s){return nl(e)?e.then(a=>(r(),s(a),a),a=>{throw t(a),r(),a}):(r(),s(e),e)}function wF(e,t,r){if(!is(e))return[!1];let s,a;typeof e.tracesSampler=="function"?(a=e.tracesSampler({...t,inheritOrSampleWith:l=>typeof t.parentSampleRate=="number"?t.parentSampleRate:typeof t.parentSampled=="boolean"?Number(t.parentSampled):l}),s=!0):t.parentSampled!==void 0?a=t.parentSampled:typeof e.tracesSampleRate<"u"&&(a=e.tracesSampleRate,s=!0);const i=Ho(a);if(i===void 0)return Pe&&ce.warn(`[Tracing] Discarding root span because of invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(a)} of type ${JSON.stringify(typeof a)}.`),[!1];if(!i)return Pe&&ce.log(`[Tracing] Discarding transaction because ${typeof e.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),[!1,i,s];const o=r<i;return o||Pe&&ce.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(a)})`),[o,i,s]}const Bm="__SENTRY_SUPPRESS_TRACING__";function na(e,t){const r=Qd();if(r.startSpan)return r.startSpan(e,t);const s=Jw(e),{forceTransaction:a,parentSpan:i,scope:o}=e,l=o==null?void 0:o.clone();return Pr(l,()=>c3(i)(()=>{const d=lt(),p=Xw(d,i),m=e.onlyIfParent&&!p?new Da:Yw({parentSpan:p,spanArguments:s,forceTransaction:a,scope:d});return ta(d,m),Rp(()=>t(m),()=>{const{status:x}=We(m);m.isRecording()&&(!x||x==="ok")&&m.setStatus({code:vt,message:"internal_error"})},()=>{m.end()})}))}function ja(e,t){const r=Qd();if(r.startSpanManual)return r.startSpanManual(e,t);const s=Jw(e),{forceTransaction:a,parentSpan:i,scope:o}=e,l=o==null?void 0:o.clone();return Pr(l,()=>c3(i)(()=>{const d=lt(),p=Xw(d,i),m=e.onlyIfParent&&!p?new Da:Yw({parentSpan:p,spanArguments:s,forceTransaction:a,scope:d});return ta(d,m),Rp(()=>t(m,()=>m.end()),()=>{const{status:x}=We(m);m.isRecording()&&(!x||x==="ok")&&m.setStatus({code:vt,message:"internal_error"})})}))}function os(e){const t=Qd();if(t.startInactiveSpan)return t.startInactiveSpan(e);const r=Jw(e),{forceTransaction:s,parentSpan:a}=e;return(e.scope?o=>Pr(e.scope,o):a!==void 0?o=>zo(a,o):o=>o())(()=>{const o=lt(),l=Xw(o,a);return e.onlyIfParent&&!l?new Da:Yw({parentSpan:l,spanArguments:r,forceTransaction:s,scope:o})})}const _F=(e,t)=>{const r=Fa(),s=Vi(r);if(s.continueTrace)return s.continueTrace(e,t);const{sentryTrace:a,baggage:i}=e,o=Ie(),l=Gw(i);return o&&!Kq(o,l==null?void 0:l.org_id)?l3(t):Pr(u=>{const d=WT(a,i);return u.setPropagationContext(d),ta(u,void 0),t()})};function zo(e,t){const r=Qd();return r.withActiveSpan?r.withActiveSpan(e,t):Pr(s=>(ta(s,e||void 0),t(s)))}function o3(e){const t=Qd();return t.suppressTracing?t.suppressTracing(e):Pr(r=>{r.setSDKProcessingMetadata({[Bm]:!0});const s=e();return r.setSDKProcessingMetadata({[Bm]:void 0}),s})}function l3(e){return Pr(t=>(t.setPropagationContext({traceId:ea(),sampleRand:Math.random()}),Pe&&ce.log(`Starting a new trace with id ${t.getPropagationContext().traceId}`),zo(null,e)))}function Yw({parentSpan:e,spanArguments:t,forceTransaction:r,scope:s}){if(!is()){const o=new Da;if(r||!e){const l={sampled:"false",sample_rate:"0",transaction:t.name,...Ms(o)};im(o,l)}return o}const a=En();let i;if(e&&!r)i=jF(e,s,t),e3(e,i);else if(e){const o=Ms(e),{traceId:l,spanId:u}=e.spanContext(),d=Qi(e);i=j2({traceId:l,parentSpanId:u,...t},s,d),im(i,o)}else{const{traceId:o,dsc:l,parentSpanId:u,sampled:d}={...a.getPropagationContext(),...s.getPropagationContext()};i=j2({traceId:o,parentSpanId:u,...t},s,d),l&&im(i,l)}return xF(i),Pq(i,s,a),i}function Jw(e){const r={isStandalone:(e.experimental||{}).standalone,...e};if(e.startTime){const s={...r};return s.startTimestamp=Do(e.startTime),delete s.startTime,s}return r}function Qd(){const e=Fa();return Vi(e)}function j2(e,t,r){var y;const s=Ie(),a=(s==null?void 0:s.getOptions())||{},{name:i=""}=e,o={spanAttributes:{...e.attributes},spanName:i,parentSampled:r};s==null||s.emit("beforeSampling",o,{decision:!1});const l=o.parentSampled??r,u=o.spanAttributes,d=t.getPropagationContext(),[p,f,m]=t.getScopeData().sdkProcessingMetadata[Bm]?[!1]:wF(a,{name:i,parentSampled:l,attributes:u,parentSampleRate:Ho((y=d.dsc)==null?void 0:y.sample_rate)},d.sampleRand),x=new Tp({...e,attributes:{[At]:"custom",[Sp]:f!==void 0&&m?f:void 0,...u},sampled:p});return!p&&s&&(Pe&&ce.log("[Tracing] Discarding root span because its trace was not chosen to be sampled."),s.recordDroppedEvent("sample_rate","transaction")),s&&s.emit("spanStart",x),x}function jF(e,t,r){const{spanId:s,traceId:a}=e.spanContext(),i=t.getScopeData().sdkProcessingMetadata[Bm]?!1:Qi(e),o=i?new Tp({...r,parentSpanId:s,traceId:a,sampled:i}):new Da({traceId:a});e3(e,o);const l=Ie();return l&&(l.emit("spanStart",o),r.endTimestamp&&l.emit("spanEnd",o)),o}function Xw(e,t){if(t)return t;if(t===null)return;const r=Sc(e);if(!r)return;const s=Ie();return(s?s.getOptions():{}).parentSpanIsAlwaysRootSpan?dn(r):r}function c3(e){return e!==void 0?t=>zo(e,t):t=>t()}const om={idleTimeout:1e3,finalTimeout:3e4,childSpanTimeout:15e3},NF="heartbeatFailed",SF="idleTimeout",kF="finalTimeout",EF="externalFinish";function u3(e,t={}){const r=new Map;let s=!1,a,i=EF,o=!t.disableAutoFinish;const l=[],{idleTimeout:u=om.idleTimeout,finalTimeout:d=om.finalTimeout,childSpanTimeout:p=om.childSpanTimeout,beforeSpanEnd:f,trimIdleSpanEndTimestamp:m=!0}=t,x=Ie();if(!x||!is()){const E=new Da,T={sample_rate:"0",sampled:"false",...Ms(E)};return im(E,T),E}const y=lt(),g=hn(),b=CF(e);b.end=new Proxy(b.end,{apply(E,T,I){if(f&&f(b),T instanceof Da)return;const[A,...R]=I,O=A||Jt(),M=Do(O),B=id(b).filter(H=>H!==b),U=We(b);if(!B.length||!m)return C(M),Reflect.apply(E,T,[M,...R]);const Y=x.getOptions().ignoreSpans,W=B==null?void 0:B.reduce((H,L)=>{const q=We(L);return!q.timestamp||Y&&qm(q,Y)?H:H?Math.max(H,q.timestamp):q.timestamp},void 0),K=U.start_timestamp,F=Math.min(K?K+d/1e3:1/0,Math.max(K||-1/0,Math.min(M,W||1/0)));return C(F),Reflect.apply(E,T,[F,...R])}});function _(){a&&(clearTimeout(a),a=void 0)}function w(E){_(),a=setTimeout(()=>{!s&&r.size===0&&o&&(i=SF,b.end(E))},u)}function S(E){a=setTimeout(()=>{!s&&o&&(i=NF,b.end(E))},p)}function j(E){_(),r.set(E,!0);const T=Jt();S(T+p/1e3)}function N(E){if(r.has(E)&&r.delete(E),r.size===0){const T=Jt();w(T+u/1e3)}}function C(E){s=!0,r.clear(),l.forEach(B=>B()),ta(y,g);const T=We(b),{start_timestamp:I}=T;if(!I)return;T.data[wd]||b.setAttribute(wd,i);const R=T.status;(!R||R==="unknown")&&b.setStatus({code:kp}),ce.log(`[Tracing] Idle span "${T.op}" finished`);const O=id(b).filter(B=>B!==b);let M=0;O.forEach(B=>{B.isRecording()&&(B.setStatus({code:vt,message:"cancelled"}),B.end(E),Pe&&ce.log("[Tracing] Cancelling span since span ended early",JSON.stringify(B,void 0,2)));const U=We(B),{timestamp:Y=0,start_timestamp:W=0}=U,K=W<=E,F=(d+u)/1e3,H=Y-W<=F;if(Pe){const L=JSON.stringify(B,void 0,2);K?H||ce.log("[Tracing] Discarding span since it finished after idle span final timeout",L):ce.log("[Tracing] Discarding span since it happened after idle span was finished",L)}(!H||!K)&&(Qq(b,B),M++)}),M>0&&b.setAttribute("sentry.idle_span_discarded_spans",M)}return l.push(x.on("spanStart",E=>{if(s||E===b||We(E).timestamp||E instanceof Tp&&E.isStandaloneSpan())return;id(b).includes(E)&&j(E.spanContext().spanId)})),l.push(x.on("spanEnd",E=>{s||N(E.spanContext().spanId)})),l.push(x.on("idleSpanEnableAutoFinish",E=>{E===b&&(o=!0,w(),r.size&&S())})),t.disableAutoFinish||w(),setTimeout(()=>{s||(b.setStatus({code:vt,message:"deadline_exceeded"}),i=kF,b.end())},d),b}function CF(e){const t=os(e);return ta(lt(),t),Pe&&ce.log("[Tracing] Started span is an idle span"),t}const I0=0,N2=1,S2=2;function Ap(e){return new jd(t=>{t(e)})}function Zw(e){return new jd((t,r)=>{r(e)})}class jd{constructor(t){this._state=I0,this._handlers=[],this._runExecutor(t)}then(t,r){return new jd((s,a)=>{this._handlers.push([!1,i=>{if(!t)s(i);else try{s(t(i))}catch(o){a(o)}},i=>{if(!r)a(i);else try{s(r(i))}catch(o){a(o)}}]),this._executeHandlers()})}catch(t){return this.then(r=>r,t)}finally(t){return new jd((r,s)=>{let a,i;return this.then(o=>{i=!1,a=o,t&&t()},o=>{i=!0,a=o,t&&t()}).then(()=>{if(i){s(a);return}r(a)})})}_executeHandlers(){if(this._state===I0)return;const t=this._handlers.slice();this._handlers=[],t.forEach(r=>{r[0]||(this._state===N2&&r[1](this._value),this._state===S2&&r[2](this._value),r[0]=!0)})}_runExecutor(t){const r=(i,o)=>{if(this._state===I0){if(nl(o)){o.then(s,a);return}this._state=i,this._value=o,this._executeHandlers()}},s=i=>{r(N2,i)},a=i=>{r(S2,i)};try{t(s,a)}catch(i){a(i)}}}function TF(e,t,r,s=0){try{const a=Pv(t,r,e,s);return nl(a)?a:Ap(a)}catch(a){return Zw(a)}}function Pv(e,t,r,s){const a=r[s];if(!e||!a)return e;const i=a({...e},t);return Pe&&i===null&&ce.log(`Event processor "${a.id||"?"}" dropped event`),nl(i)?i.then(o=>Pv(o,t,r,s+1)):Pv(i,t,r,s+1)}function RF(e,t){const{fingerprint:r,span:s,breadcrumbs:a,sdkProcessingMetadata:i}=t;AF(e,t),s&&IF(e,s),LF(e,r),PF(e,a),OF(e,i)}function Ec(e,t){const{extra:r,tags:s,attributes:a,user:i,contexts:o,level:l,sdkProcessingMetadata:u,breadcrumbs:d,fingerprint:p,eventProcessors:f,attachments:m,propagationContext:x,transactionName:y,span:g}=t;zu(e,"extra",r),zu(e,"tags",s),zu(e,"attributes",a),zu(e,"user",i),zu(e,"contexts",o),e.sdkProcessingMetadata=Wd(e.sdkProcessingMetadata,u,2),l&&(e.level=l),y&&(e.transactionName=y),g&&(e.span=g),d.length&&(e.breadcrumbs=[...e.breadcrumbs,...d]),p.length&&(e.fingerprint=[...e.fingerprint,...p]),f.length&&(e.eventProcessors=[...e.eventProcessors,...f]),m.length&&(e.attachments=[...e.attachments,...m]),e.propagationContext={...e.propagationContext,...x}}function zu(e,t,r){e[t]=Wd(e[t],r,1)}function AF(e,t){const{extra:r,tags:s,user:a,contexts:i,level:o,transactionName:l}=t;Object.keys(r).length&&(e.extra={...r,...e.extra}),Object.keys(s).length&&(e.tags={...s,...e.tags}),Object.keys(a).length&&(e.user={...a,...e.user}),Object.keys(i).length&&(e.contexts={...i,...e.contexts}),o&&(e.level=o),l&&e.type!=="transaction"&&(e.transaction=l)}function PF(e,t){const r=[...e.breadcrumbs||[],...t];e.breadcrumbs=r.length?r:void 0}function OF(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}function IF(e,t){e.contexts={trace:YT(t),...e.contexts},e.sdkProcessingMetadata={dynamicSamplingContext:Ms(t),...e.sdkProcessingMetadata};const r=dn(t),s=We(r).description;s&&!e.transaction&&e.type==="transaction"&&(e.transaction=s)}function LF(e,t){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],t&&(e.fingerprint=e.fingerprint.concat(t)),e.fingerprint.length||delete e.fingerprint}let ha,k2,E2,di;function d3(e){const t=Xe._sentryDebugIds,r=Xe._debugIds;if(!t&&!r)return{};const s=t?Object.keys(t):[],a=r?Object.keys(r):[];if(di&&s.length===k2&&a.length===E2)return di;k2=s.length,E2=a.length,di={},ha||(ha={});const i=(o,l)=>{for(const u of o){const d=l[u],p=ha==null?void 0:ha[u];if(p&&di&&d)di[p[0]]=d,ha&&(ha[u]=[p[0],d]);else if(d){const f=e(u);for(let m=f.length-1;m>=0;m--){const x=f[m],y=x==null?void 0:x.filename;if(y&&di&&ha){di[y]=d,ha[u]=[y,d];break}}}}};return t&&i(s,t),r&&i(a,r),di}function MF(e,t){const r=d3(e);if(!r)return[];const s=[];for(const a of t)a&&r[a]&&s.push({type:"sourcemap",code_file:a,debug_id:r[a]});return s}function h3(e,t,r,s,a,i){const{normalizeDepth:o=3,normalizeMaxBreadth:l=1e3}=e,u={...t,event_id:t.event_id||r.event_id||On(),timestamp:t.timestamp||sl()},d=r.integrations||e.integrations.map(b=>b.name);DF(u,e),FF(u,d),a&&a.emit("applyFrameMetadata",t),t.type===void 0&&$F(u,e.stackParser);const p=BF(s,r.captureContext);r.mechanism&&Ma(u,r.mechanism);const f=a?a.getEventProcessors():[],m=Ta().getScopeData();if(i){const b=i.getScopeData();Ec(m,b)}if(p){const b=p.getScopeData();Ec(m,b)}const x=[...r.attachments||[],...m.attachments];x.length&&(r.attachments=x),RF(u,m);const y=[...f,...m.eventProcessors];return TF(y,u,r).then(b=>(b&&qF(b),typeof o=="number"&&o>0?UF(b,o,l):b))}function DF(e,t){var l,u;const{environment:r,release:s,dist:a,maxValueLength:i}=t;e.environment=e.environment||r||Ep,!e.release&&s&&(e.release=s),!e.dist&&a&&(e.dist=a);const o=e.request;o!=null&&o.url&&i&&(o.url=vd(o.url,i)),i&&((u=(l=e.exception)==null?void 0:l.values)==null||u.forEach(d=>{d.value&&(d.value=vd(d.value,i))}))}function $F(e,t){var s,a;const r=d3(t);(a=(s=e.exception)==null?void 0:s.values)==null||a.forEach(i=>{var o,l;(l=(o=i.stacktrace)==null?void 0:o.frames)==null||l.forEach(u=>{u.filename&&(u.debug_id=r[u.filename])})})}function qF(e){var s,a;const t={};if((a=(s=e.exception)==null?void 0:s.values)==null||a.forEach(i=>{var o,l;(l=(o=i.stacktrace)==null?void 0:o.frames)==null||l.forEach(u=>{u.debug_id&&(u.abs_path?t[u.abs_path]=u.debug_id:u.filename&&(t[u.filename]=u.debug_id),delete u.debug_id)})}),Object.keys(t).length===0)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const r=e.debug_meta.images;Object.entries(t).forEach(([i,o])=>{r.push({type:"sourcemap",code_file:i,debug_id:o})})}function FF(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}function UF(e,t,r){var a,i;if(!e)return null;const s={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(o=>({...o,...o.data&&{data:Fr(o.data,t,r)}}))},...e.user&&{user:Fr(e.user,t,r)},...e.contexts&&{contexts:Fr(e.contexts,t,r)},...e.extra&&{extra:Fr(e.extra,t,r)}};return(a=e.contexts)!=null&&a.trace&&s.contexts&&(s.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(s.contexts.trace.data=Fr(e.contexts.trace.data,t,r))),e.spans&&(s.spans=e.spans.map(o=>({...o,...o.data&&{data:Fr(o.data,t,r)}}))),(i=e.contexts)!=null&&i.flags&&s.contexts&&(s.contexts.flags=Fr(e.contexts.flags,3,r)),s}function BF(e,t){if(!t)return e;const r=e?e.clone():new Ls;return r.update(t),r}function HF(e){if(e)return KF(e)?{captureContext:e}:WF(e)?{captureContext:e}:e}function KF(e){return e instanceof Ls||typeof e=="function"}const zF=["user","level","extra","contexts","tags","fingerprint","propagationContext"];function WF(e){return Object.keys(e).some(t=>zF.includes(t))}function Ct(e,t){return lt().captureException(e,HF(t))}function f3(e,t){const r=typeof t=="string"?t:void 0,s=typeof t!="string"?{captureContext:t}:void 0;return lt().captureMessage(e,r,s)}function Qc(e,t){return lt().captureEvent(e,t)}function e_(e,t){En().setContext(e,t)}function GF(e){En().setExtras(e)}function VF(e,t){En().setExtra(e,t)}function QF(e){En().setTags(e)}function YF(e,t){En().setTag(e,t)}function JF(e){En().setUser(e)}function m3(){return En().lastEventId()}async function XF(e){const t=Ie();return t?t.flush(e):(Pe&&ce.warn("Cannot flush events. No client defined."),Promise.resolve(!1))}async function ZF(e){const t=Ie();return t?t.close(e):(Pe&&ce.warn("Cannot flush events and disable SDK. No client defined."),Promise.resolve(!1))}function e7(){return!!Ie()}function p3(){const e=Ie();return(e==null?void 0:e.getOptions().enabled)!==!1&&!!(e!=null&&e.getTransport())}function x3(e){En().addEventProcessor(e)}function Ov(e){const t=En(),r=lt(),{userAgent:s}=Xe.navigator||{},a=pq({user:r.getUser()||t.getUser(),...s&&{userAgent:s},...e}),i=t.getSession();return(i==null?void 0:i.status)==="ok"&&Nc(i,{status:"exited"}),t_(),t.setSession(a),a}function t_(){const e=En(),r=lt().getSession()||e.getSession();r&&xq(r),g3(),e.setSession()}function g3(){const e=En(),t=Ie(),r=e.getSession();r&&t&&t.captureSession(r)}function Iv(e=!1){if(e){t_();return}g3()}const t7="7";function y3(e){const t=e.protocol?`${e.protocol}:`:"",r=e.port?`:${e.port}`:"";return`${t}//${e.host}${r}${e.path?`/${e.path}`:""}/api/`}function n7(e){return`${y3(e)}${e.projectId}/envelope/`}function r7(e,t){const r={sentry_version:t7};return e.publicKey&&(r.sentry_key=e.publicKey),t&&(r.sentry_client=`${t.name}/${t.version}`),new URLSearchParams(r).toString()}function b3(e,t,r){return t||`${n7(e)}?${r7(e,r)}`}function s7(e,t){const r=KT(e);if(!r)return"";const s=`${y3(r)}embed/error-page/`;let a=`dsn=${Ua(r)}`;for(const i in t)if(i!=="dsn"&&i!=="onClose")if(i==="user"){const o=t.user;if(!o)continue;o.name&&(a+=`&name=${encodeURIComponent(o.name)}`),o.email&&(a+=`&email=${encodeURIComponent(o.email)}`)}else a+=`&${encodeURIComponent(i)}=${encodeURIComponent(t[i])}`;return`${s}?${a}`}const C2=[];function a7(e){const t={};return e.forEach(r=>{const{name:s}=r,a=t[s];a&&!a.isDefaultInstance&&r.isDefaultInstance||(t[s]=r)}),Object.values(t)}function i7(e){const t=e.defaultIntegrations||[],r=e.integrations;t.forEach(a=>{a.isDefaultInstance=!0});let s;if(Array.isArray(r))s=[...t,...r];else if(typeof r=="function"){const a=r(t);s=Array.isArray(a)?a:[a]}else s=t;return a7(s)}function o7(e,t){const r={};return t.forEach(s=>{s&&v3(e,s,r)}),r}function T2(e,t){for(const r of t)r!=null&&r.afterAllSetup&&r.afterAllSetup(e)}function v3(e,t,r){if(r[t.name]){Pe&&ce.log(`Integration skipped because it was already installed: ${t.name}`);return}if(r[t.name]=t,!C2.includes(t.name)&&typeof t.setupOnce=="function"&&(t.setupOnce(),C2.push(t.name)),t.setup&&typeof t.setup=="function"&&t.setup(e),typeof t.preprocessEvent=="function"){const s=t.preprocessEvent.bind(t);e.on("preprocessEvent",(a,i)=>s(a,i,e))}if(typeof t.processEvent=="function"){const s=t.processEvent.bind(t),a=Object.assign((i,o)=>s(i,o,e),{id:t.name});e.addEventProcessor(a)}Pe&&ce.log(`Integration installed: ${t.name}`)}function Lv(e){const t=Ie();if(!t){Pe&&ce.warn(`Cannot add integration "${e.name}" because no SDK Client is available.`);return}t.addIntegration(e)}function l7(e){return typeof e=="object"&&e!=null&&!Array.isArray(e)&&Object.keys(e).includes("value")}function c7(e,t){const{value:r,unit:s}=l7(e)?e:{value:e,unit:void 0},a=u7(r),i=s&&typeof s=="string"?{unit:s}:{};if(a)return{...a,...i};if(!t)return;let o="";try{o=JSON.stringify(r)??""}catch{}return{value:o,type:"string",...i}}function R2(e,t=!1){const r={};for(const[s,a]of Object.entries(e)){const i=c7(a,t);i&&(r[s]=i)}return r}function u7(e){const t=typeof e=="string"?"string":typeof e=="boolean"?"boolean":typeof e=="number"&&!Number.isNaN(e)?Number.isInteger(e)?"integer":"double":null;if(t)return{value:e,type:t}}function w3(e,t){return t?Pr(t,()=>{const r=hn(),s=r?YT(r):LT(t);return[r?Ms(r):Qw(e,t),s]}):[void 0,void 0]}const d7={trace:1,debug:5,info:9,warn:13,error:17,fatal:21};function h7(e){return[{type:"log",item_count:e.length,content_type:"application/vnd.sentry.items.log+json"},{items:e}]}function f7(e,t,r,s){const a={};return t!=null&&t.sdk&&(a.sdk={name:t.sdk.name,version:t.sdk.version}),r&&s&&(a.dsn=Ua(s)),qs(a,[h7(e)])}const m7=100;function zs(e,t,r,s=!0){r&&(!e[t]||s)&&(e[t]=r)}function p7(e,t){const r=r_(),s=_3(e);s===void 0?r.set(e,[t]):s.length>=m7?(n_(e,s),r.set(e,[t])):r.set(e,[...s,t])}function Hm(e,t=lt(),r=p7){var R;const s=(t==null?void 0:t.getClient())??Ie();if(!s){Pe&&ce.warn("No client available to capture log.");return}const{release:a,environment:i,enableLogs:o=!1,beforeSendLog:l}=s.getOptions();if(!o){Pe&&ce.warn("logging option not enabled, log will not be captured.");return}const[,u]=w3(s,t),d={...e.attributes},{user:{id:p,email:f,username:m},attributes:x={}}=x7(t);zs(d,"user.id",p,!1),zs(d,"user.email",f,!1),zs(d,"user.name",m,!1),zs(d,"sentry.release",a),zs(d,"sentry.environment",i);const{name:y,version:g}=((R=s.getSdkMetadata())==null?void 0:R.sdk)??{};zs(d,"sentry.sdk.name",y),zs(d,"sentry.sdk.version",g);const b=s.getIntegrationByName("Replay"),_=b==null?void 0:b.getReplayId(!0);zs(d,"sentry.replay_id",_),_&&(b==null?void 0:b.getRecordingMode())==="buffer"&&zs(d,"sentry._internal.replay_is_buffering",!0);const w=e.message;if(jp(w)){const{__sentry_template_string__:O,__sentry_template_values__:M=[]}=w;M!=null&&M.length&&(d["sentry.message.template"]=O),M.forEach((B,U)=>{d[`sentry.message.parameter.${U}`]=B})}const S=Sc(t);zs(d,"sentry.trace.parent_span_id",S==null?void 0:S.spanContext().spanId);const j={...e,attributes:d};s.emit("beforeCaptureLog",j);const N=l?zi(()=>l(j)):j;if(!N){s.recordDroppedEvent("before_send","log_item",1),Pe&&ce.warn("beforeSendLog returned null, log will not be captured.");return}const{level:C,message:E,attributes:T={},severityNumber:I}=N,A={timestamp:Jt(),level:C,body:E,trace_id:u==null?void 0:u.trace_id,severity_number:I??d7[C],attributes:{...R2(x),...R2(T,!0)}};r(s,A),s.emit("afterCaptureLog",N)}function n_(e,t){const r=t??_3(e)??[];if(r.length===0)return;const s=e.getOptions(),a=f7(r,s._metadata,s.tunnel,e.getDsn());r_().set(e,[]),e.emit("flushLogs"),e.sendEnvelope(a)}function _3(e){return r_().get(e)}function x7(e){const t=Ta().getScopeData();return Ec(t,En().getScopeData()),Ec(t,e.getScopeData()),t}function r_(){return Wc("clientToLogBufferMap",()=>new WeakMap)}function g7(e){return[{type:"trace_metric",item_count:e.length,content_type:"application/vnd.sentry.items.trace-metric+json"},{items:e}]}function y7(e,t,r,s){const a={};return t!=null&&t.sdk&&(a.sdk={name:t.sdk.name,version:t.sdk.version}),r&&s&&(a.dsn=Ua(s)),qs(a,[g7(e)])}const b7=1e3;function v7(e){switch(typeof e){case"number":return Number.isInteger(e)?{value:e,type:"integer"}:{value:e,type:"double"};case"boolean":return{value:e,type:"boolean"};case"string":return{value:e,type:"string"};default:{let t="";try{t=JSON.stringify(e)??""}catch{}return{value:t,type:"string"}}}}function fa(e,t,r,s=!0){r&&(s||!(t in e))&&(e[t]=r)}function w7(e,t){const r=a_(),s=j3(e);s===void 0?r.set(e,[t]):s.length>=b7?(s_(e,s),r.set(e,[t])):r.set(e,[...s,t])}function _7(e,t,r){var x;const{release:s,environment:a}=t.getOptions(),i={...e.attributes},{user:{id:o,email:l,username:u}}=S7(r);fa(i,"user.id",o,!1),fa(i,"user.email",l,!1),fa(i,"user.name",u,!1),fa(i,"sentry.release",s),fa(i,"sentry.environment",a);const{name:d,version:p}=((x=t.getSdkMetadata())==null?void 0:x.sdk)??{};fa(i,"sentry.sdk.name",d),fa(i,"sentry.sdk.version",p);const f=t.getIntegrationByName("Replay"),m=f==null?void 0:f.getReplayId(!0);return fa(i,"sentry.replay_id",m),m&&(f==null?void 0:f.getRecordingMode())==="buffer"&&fa(i,"sentry._internal.replay_is_buffering",!0),{...e,attributes:i}}function j7(e,t,r){const s={};for(const u in e.attributes)e.attributes[u]!==void 0&&(s[u]=v7(e.attributes[u]));const[,a]=w3(t,r),i=Sc(r),o=i?i.spanContext().traceId:a==null?void 0:a.trace_id,l=i?i.spanContext().spanId:void 0;return{timestamp:Jt(),trace_id:o??"",span_id:l,name:e.name,type:e.type,unit:e.unit,value:e.value,attributes:s}}function N7(e,t){const r=(t==null?void 0:t.scope)??lt(),s=(t==null?void 0:t.captureSerializedMetric)??w7,a=(r==null?void 0:r.getClient())??Ie();if(!a){Pe&&ce.warn("No client available to capture metric.");return}const{_experiments:i,enableMetrics:o,beforeSendMetric:l}=a.getOptions();if(!(o??(i==null?void 0:i.enableMetrics)??!0)){Pe&&ce.warn("metrics option not enabled, metric will not be captured.");return}const d=_7(e,a,r);a.emit("processMetric",d);const p=l||(i==null?void 0:i.beforeSendMetric),f=p?p(d):d;if(!f){Pe&&ce.log("`beforeSendMetric` returned `null`, will not send metric.");return}const m=j7(f,a,r);Pe&&ce.log("[Metric]",m),s(a,m),a.emit("afterCaptureMetric",f)}function s_(e,t){const r=t??j3(e)??[];if(r.length===0)return;const s=e.getOptions(),a=y7(r,s._metadata,s.tunnel,e.getDsn());a_().set(e,[]),e.emit("flushMetrics"),e.sendEnvelope(a)}function j3(e){return a_().get(e)}function S7(e){const t=Ta().getScopeData();return Ec(t,En().getScopeData()),Ec(t,e.getScopeData()),t}function a_(){return Wc("clientToMetricBufferMap",()=>new WeakMap)}const i_=Symbol.for("SentryBufferFullError");function o_(e=100){const t=new Set;function r(){return t.size<e}function s(o){t.delete(o)}function a(o){if(!r())return Zw(i_);const l=o();return t.add(l),l.then(()=>s(l),()=>s(l)),l}function i(o){if(!t.size)return Ap(!0);const l=Promise.allSettled(Array.from(t)).then(()=>!0);if(!o)return l;const u=[l,new Promise(d=>setTimeout(()=>d(!1),o))];return Promise.race(u)}return{get $(){return Array.from(t)},add:a,drain:i}}const k7=60*1e3;function N3(e,t=Date.now()){const r=parseInt(`${e}`,10);if(!isNaN(r))return r*1e3;const s=Date.parse(`${e}`);return isNaN(s)?k7:s-t}function E7(e,t){return e[t]||e.all||0}function S3(e,t,r=Date.now()){return E7(e,t)>r}function k3(e,{statusCode:t,headers:r},s=Date.now()){const a={...e},i=r==null?void 0:r["x-sentry-rate-limits"],o=r==null?void 0:r["retry-after"];if(i)for(const l of i.trim().split(",")){const[u,d,,,p]=l.split(":",5),f=parseInt(u,10),m=(isNaN(f)?60:f)*1e3;if(!d)a.all=s+m;else for(const x of d.split(";"))x==="metric_bucket"?(!p||p.split(";").includes("custom"))&&(a[x]=s+m):a[x]=s+m}else o?a.all=s+N3(o,s):t===429&&(a.all=s+60*1e3);return a}const E3=64;function C3(e,t,r=o_(e.bufferSize||E3)){let s={};const a=o=>r.drain(o);function i(o){const l=[];if(Ko(o,(f,m)=>{const x=y2(m);S3(s,x)?e.recordDroppedEvent("ratelimit_backoff",x):l.push(f)}),l.length===0)return Promise.resolve({});const u=qs(o[0],l),d=f=>{Ko(u,(m,x)=>{e.recordDroppedEvent(f,y2(x))})},p=()=>t({body:Um(u)}).then(f=>(f.statusCode!==void 0&&(f.statusCode<200||f.statusCode>=300)&&Pe&&ce.warn(`Sentry responded with status code ${f.statusCode} to sent event.`),s=k3(s,f),f),f=>{throw d("network_error"),Pe&&ce.error("Encountered error running transport request:",f),f});return r.add(p).then(f=>f,f=>{if(f===i_)return Pe&&ce.error("Skipped sending event because buffer is full."),d("queue_overflow"),Promise.resolve({});throw f})}return{send:i,flush:a}}function C7(e,t,r){const s=[{type:"client_report"},{timestamp:sl(),discarded_events:e}];return qs(t?{dsn:t}:{},[s])}function T3(e){const t=[];e.message&&t.push(e.message);try{const r=e.exception.values[e.exception.values.length-1];r!=null&&r.value&&(t.push(r.value),r.type&&t.push(`${r.type}: ${r.value}`))}catch{}return t}function T7(e){var u;const{trace_id:t,parent_span_id:r,span_id:s,status:a,origin:i,data:o,op:l}=((u=e.contexts)==null?void 0:u.trace)??{};return{data:o??{},description:e.transaction,op:l,parent_span_id:r,span_id:s??"",start_timestamp:e.start_timestamp??0,status:a,timestamp:e.timestamp,trace_id:t??"",origin:i,profile_id:o==null?void 0:o[zw],exclusive_time:o==null?void 0:o[Vc],measurements:e.measurements,is_segment:!0}}function R7(e){return{type:"transaction",timestamp:e.timestamp,start_timestamp:e.start_timestamp,transaction:e.description,contexts:{trace:{trace_id:e.trace_id,span_id:e.span_id,parent_span_id:e.parent_span_id,op:e.op,status:e.status,origin:e.origin,data:{...e.data,...e.profile_id&&{[zw]:e.profile_id},...e.exclusive_time&&{[Vc]:e.exclusive_time}}}},measurements:e.measurements}}const A2="Not capturing exception because it's already been captured.",P2="Discarded session because of missing or non-string release",R3=Symbol.for("SentryInternalError"),A3=Symbol.for("SentryDoNotSendEventError"),A7=5e3;function lm(e){return{message:e,[R3]:!0}}function L0(e){return{message:e,[A3]:!0}}function O2(e){return!!e&&typeof e=="object"&&R3 in e}function I2(e){return!!e&&typeof e=="object"&&A3 in e}function L2(e,t,r,s,a){let i=0,o,l=!1;e.on(r,()=>{i=0,clearTimeout(o),l=!1}),e.on(t,u=>{i+=s(u),i>=8e5?a(e):l||(l=!0,o=setTimeout(()=>{a(e)},A7))}),e.on("flush",()=>{a(e)})}class P7{constructor(t){var s,a,i;if(this._options=t,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],this._promiseBuffer=o_(((s=t.transportOptions)==null?void 0:s.bufferSize)??E3),t.dsn?this._dsn=KT(t.dsn):Pe&&ce.warn("No DSN provided, client will not send events."),this._dsn){const o=b3(this._dsn,t.tunnel,t._metadata?t._metadata.sdk:void 0);this._transport=t.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:o})}this._options.enableLogs=this._options.enableLogs??((a=this._options._experiments)==null?void 0:a.enableLogs),this._options.enableLogs&&L2(this,"afterCaptureLog","flushLogs",M7,n_),(this._options.enableMetrics??((i=this._options._experiments)==null?void 0:i.enableMetrics)??!0)&&L2(this,"afterCaptureMetric","flushMetrics",L7,s_)}captureException(t,r,s){const a=On();if(c2(t))return Pe&&ce.log(A2),a;const i={event_id:a,...r};return this._process(()=>this.eventFromException(t,i).then(o=>this._captureEvent(o,i,s)).then(o=>o),"error"),i.event_id}captureMessage(t,r,s,a){const i={event_id:On(),...s},o=jp(t)?t:String(t),l=$i(t),u=l?this.eventFromMessage(o,r,i):this.eventFromException(t,i);return this._process(()=>u.then(d=>this._captureEvent(d,i,a)),l?"unknown":"error"),i.event_id}captureEvent(t,r,s){const a=On();if(r!=null&&r.originalException&&c2(r.originalException))return Pe&&ce.log(A2),a;const i={event_id:a,...r},o=t.sdkProcessingMetadata||{},l=o.capturedSpanScope,u=o.capturedSpanIsolationScope,d=M2(t.type);return this._process(()=>this._captureEvent(t,i,l||s,u),d),i.event_id}captureSession(t){this.sendSession(t),Nc(t,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}async flush(t){const r=this._transport;if(!r)return!0;this.emit("flush");const s=await this._isClientDoneProcessing(t),a=await r.flush(t);return s&&a}async close(t){const r=await this.flush(t);return this.getOptions().enabled=!1,this.emit("close"),r}getEventProcessors(){return this._eventProcessors}addEventProcessor(t){this._eventProcessors.push(t)}init(){(this._isEnabled()||this._options.integrations.some(({name:t})=>t.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(t){return this._integrations[t]}addIntegration(t){const r=this._integrations[t.name];v3(this,t,this._integrations),r||T2(this,[t])}sendEvent(t,r={}){this.emit("beforeSendEvent",t,r);let s=mF(t,this._dsn,this._options._metadata,this._options.tunnel);for(const a of r.attachments||[])s=aF(s,uF(a));this.sendEnvelope(s).then(a=>this.emit("afterSendEvent",t,a))}sendSession(t){const{release:r,environment:s=Ep}=this._options;if("aggregates"in t){const i=t.attrs||{};if(!i.release&&!r){Pe&&ce.warn(P2);return}i.release=i.release||r,i.environment=i.environment||s,t.attrs=i}else{if(!t.release&&!r){Pe&&ce.warn(P2);return}t.release=t.release||r,t.environment=t.environment||s}this.emit("beforeSendSession",t);const a=fF(t,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(a)}recordDroppedEvent(t,r,s=1){if(this._options.sendClientReports){const a=`${t}:${r}`;Pe&&ce.log(`Recording outcome: "${a}"${s>1?` (${s} times)`:""}`),this._outcomes[a]=(this._outcomes[a]||0)+s}}on(t,r){const s=this._hooks[t]=this._hooks[t]||new Set,a=(...i)=>r(...i);return s.add(a),()=>{s.delete(a)}}emit(t,...r){const s=this._hooks[t];s&&s.forEach(a=>a(...r))}async sendEnvelope(t){if(this.emit("beforeEnvelope",t),this._isEnabled()&&this._transport)try{return await this._transport.send(t)}catch(r){return Pe&&ce.error("Error while sending envelope:",r),{}}return Pe&&ce.error("Transport disabled"),{}}_setupIntegrations(){const{integrations:t}=this._options;this._integrations=o7(this,t),T2(this,t)}_updateSessionFromEvent(t,r){var u,d;let s=r.level==="fatal",a=!1;const i=(u=r.exception)==null?void 0:u.values;if(i){a=!0,s=!1;for(const p of i)if(((d=p.mechanism)==null?void 0:d.handled)===!1){s=!0;break}}const o=t.status==="ok";(o&&t.errors===0||o&&s)&&(Nc(t,{...s&&{status:"crashed"},errors:t.errors||Number(a||s)}),this.captureSession(t))}async _isClientDoneProcessing(t){let r=0;for(;!t||r<t;){if(await new Promise(s=>setTimeout(s,1)),!this._numProcessing)return!0;r++}return!1}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(t,r,s,a){const i=this.getOptions(),o=Object.keys(this._integrations);return!r.integrations&&(o!=null&&o.length)&&(r.integrations=o),this.emit("preprocessEvent",t,r),t.type||a.setLastEventId(t.event_id||r.event_id),h3(i,t,r,s,this,a).then(l=>{if(l===null)return l;this.emit("postprocessEvent",l,r),l.contexts={trace:LT(s),...l.contexts};const u=Qw(this,s);return l.sdkProcessingMetadata={dynamicSamplingContext:u,...l.sdkProcessingMetadata},l})}_captureEvent(t,r={},s=lt(),a=En()){return Pe&&Mv(t)&&ce.log(`Captured error event \`${T3(t)[0]||"<unknown>"}\``),this._processEvent(t,r,s,a).then(i=>i.event_id,i=>{Pe&&(I2(i)?ce.log(i.message):O2(i)?ce.warn(i.message):ce.warn(i))})}_processEvent(t,r,s,a){const i=this.getOptions(),{sampleRate:o}=i,l=P3(t),u=Mv(t),p=`before send for type \`${t.type||"error"}\``,f=typeof o>"u"?void 0:Ho(o);if(u&&typeof f=="number"&&Math.random()>f)return this.recordDroppedEvent("sample_rate","error"),Zw(L0(`Discarding event because it's not included in the random sample (sampling rate = ${o})`));const m=M2(t.type);return this._prepareEvent(t,r,s,a).then(x=>{if(x===null)throw this.recordDroppedEvent("event_processor",m),L0("An event processor returned `null`, will not send event.");if(r.data&&r.data.__sentry__===!0)return x;const g=I7(this,i,x,r);return O7(g,p)}).then(x=>{var b;if(x===null){if(this.recordDroppedEvent("before_send",m),l){const w=1+(t.spans||[]).length;this.recordDroppedEvent("before_send","span",w)}throw L0(`${p} returned \`null\`, will not send event.`)}const y=s.getSession()||a.getSession();if(u&&y&&this._updateSessionFromEvent(y,x),l){const _=((b=x.sdkProcessingMetadata)==null?void 0:b.spanCountBeforeProcessing)||0,w=x.spans?x.spans.length:0,S=_-w;S>0&&this.recordDroppedEvent("before_send","span",S)}const g=x.transaction_info;if(l&&g&&x.transaction!==t.transaction){const _="custom";x.transaction_info={...g,source:_}}return this.sendEvent(x,r),x}).then(null,x=>{throw I2(x)||O2(x)?x:(this.captureException(x,{mechanism:{handled:!1,type:"internal"},data:{__sentry__:!0},originalException:x}),lm(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${x}`))})}_process(t,r){this._numProcessing++,this._promiseBuffer.add(t).then(s=>(this._numProcessing--,s),s=>(this._numProcessing--,s===i_&&this.recordDroppedEvent("queue_overflow",r),s))}_clearOutcomes(){const t=this._outcomes;return this._outcomes={},Object.entries(t).map(([r,s])=>{const[a,i]=r.split(":");return{reason:a,category:i,quantity:s}})}_flushOutcomes(){Pe&&ce.log("Flushing outcomes...");const t=this._clearOutcomes();if(t.length===0){Pe&&ce.log("No outcomes to send");return}if(!this._dsn){Pe&&ce.log("No dsn provided, will not send outcomes");return}Pe&&ce.log("Sending outcomes:",t);const r=C7(t,this._options.tunnel&&Ua(this._dsn));this.sendEnvelope(r)}}function M2(e){return e==="replay_event"?"replay":e||"error"}function O7(e,t){const r=`${t} must return \`null\` or a valid event.`;if(nl(e))return e.then(s=>{if(!Xs(s)&&s!==null)throw lm(r);return s},s=>{throw lm(`${t} rejected with ${s}`)});if(!Xs(e)&&e!==null)throw lm(r);return e}function I7(e,t,r,s){const{beforeSend:a,beforeSendTransaction:i,beforeSendSpan:o,ignoreSpans:l}=t;let u=r;if(Mv(u)&&a)return a(u,s);if(P3(u)){if(o||l){const d=T7(u);if(l!=null&&l.length&&qm(d,l))return null;if(o){const p=o(d);p?u=Wd(r,R7(p)):Rv()}if(u.spans){const p=[],f=u.spans;for(const x of f){if(l!=null&&l.length&&qm(x,l)){Jq(f,x);continue}if(o){const y=o(x);y?p.push(y):(Rv(),p.push(x))}else p.push(x)}const m=u.spans.length-p.length;m&&e.recordDroppedEvent("before_send","span",m),u.spans=p}}if(i){if(u.spans){const d=u.spans.length;u.sdkProcessingMetadata={...r.sdkProcessingMetadata,spanCountBeforeProcessing:d}}return i(u,s)}}return u}function Mv(e){return e.type===void 0}function P3(e){return e.type==="transaction"}function L7(e){let t=0;return e.name&&(t+=e.name.length*2),t+=8,t+O3(e.attributes)}function M7(e){let t=0;return e.message&&(t+=e.message.length*2),t+O3(e.attributes)}function O3(e){if(!e)return 0;let t=0;return Object.values(e).forEach(r=>{Array.isArray(r)?t+=r.length*D2(r[0]):$i(r)?t+=D2(r):t+=100}),t}function D2(e){return typeof e=="string"?e.length*2:typeof e=="number"?8:typeof e=="boolean"?4:0}function D7(e,t){t.debug===!0&&(Pe?ce.enable():zi(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),lt().update(t.initialScope);const s=new e(t);return I3(s),s.init(),s}function I3(e){lt().setClient(e)}const M0=100,D0=5e3,$7=36e5;function q7(e){function t(...r){Pe&&ce.log("[Offline]:",...r)}return r=>{const s=e(r);if(!r.createStore)throw new Error("No `createStore` function was provided");const a=r.createStore(r);let i=D0,o;function l(f,m,x){return g2(f,["client_report"])?!1:r.shouldStore?r.shouldStore(f,m,x):!0}function u(f){o&&clearTimeout(o),o=setTimeout(async()=>{o=void 0;const m=await a.shift();m&&(t("Attempting to send previously queued event"),m[0].sent_at=new Date().toISOString(),p(m,!0).catch(x=>{t("Failed to retry sending",x)}))},f),typeof o!="number"&&o.unref&&o.unref()}function d(){o||(u(i),i=Math.min(i*2,$7))}async function p(f,m=!1){var x,y;if(!m&&g2(f,["replay_event","replay_recording"]))return await a.push(f),u(M0),{};try{if(r.shouldSend&&await r.shouldSend(f)===!1)throw new Error("Envelope not sent because `shouldSend` callback returned false");const g=await s.send(f);let b=M0;if(g){if((x=g.headers)!=null&&x["retry-after"])b=N3(g.headers["retry-after"]);else if((y=g.headers)!=null&&y["x-sentry-rate-limits"])b=6e4;else if((g.statusCode||0)>=400)return g}return u(b),i=D0,g}catch(g){if(await l(f,g,i))return m?await a.unshift(f):await a.push(f),d(),t("Error sending. Event queued.",g),{};throw g}}return r.flushAtStartup&&d(),{send:p,flush:f=>(f===void 0&&(i=D0,u(M0)),s.flush(f))}}}const cm="MULTIPLEXED_TRANSPORT_EXTRA_KEY";function L3(e,t){let r;return Ko(e,(s,a)=>(t.includes(a)&&(r=Array.isArray(s)?s[1]:void 0),!!r)),r}function F7(e,t){return r=>{const s=e(r);return{...s,send:async a=>{const i=L3(a,["event","transaction","profile","replay_event"]);return i&&(i.release=t),s.send(a)}}}}function U7(e,t){return qs(t?{...e[0],dsn:t}:e[0],e[1])}function B7(e,t){return r=>{const s=e(r),a=new Map,i=t||(d=>{var f;const p=d.getEvent();return(f=p==null?void 0:p.extra)!=null&&f[cm]&&Array.isArray(p.extra[cm])?p.extra[cm]:[]});function o(d,p){const f=p?`${d}:${p}`:d;let m=a.get(f);if(!m){const x=UT(d);if(!x)return;const y=b3(x,r.tunnel);m=p?F7(e,p)({...r,url:y}):e({...r,url:y}),a.set(f,m)}return[d,m]}async function l(d){function p(y){const g=y!=null&&y.length?y:["event"];return L3(d,g)}const f=i({envelope:d,getEvent:p}).map(y=>typeof y=="string"?o(y,void 0):o(y.dsn,y.release)).filter(y=>!!y),m=f.length?f:[["",s]];return(await Promise.all(m.map(([y,g])=>g.send(U7(d,y)))))[0]}async function u(d){const p=[...a.values(),s];return(await Promise.all(p.map(m=>m.flush(d)))).every(m=>m)}return{send:l,flush:u}}}const H7="thismessage:/";function l_(e){return"isRelative"in e}function c_(e,t){const r=e.indexOf("://")<=0&&e.indexOf("//")!==0,s=r?H7:void 0;try{if("canParse"in URL&&!URL.canParse(e,s))return;const a=new URL(e,s);return r?{isRelative:r,pathname:a.pathname,search:a.search,hash:a.hash}:a}catch{}}function K7(e){if(l_(e))return e.pathname;const t=new URL(e);return t.search="",t.hash="",["80","443"].includes(t.port)&&(t.port=""),t.password&&(t.password="%filtered%"),t.username&&(t.username="%filtered%"),t.toString()}function qo(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const r=t[6]||"",s=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:r,hash:s,relative:t[5]+r+s}}function M3(e){return e.split(/[?#]/,1)[0]}function D3(e,t){const r=t==null?void 0:t.getDsn(),s=t==null?void 0:t.getOptions().tunnel;return W7(e,r)||z7(e,s)}function z7(e,t){return t?$2(e)===$2(t):!1}function W7(e,t){const r=c_(e);return!r||l_(r)?!1:t?r.host.includes(t.host)&&/(^|&|\?)sentry_key=/.test(r.search):!1}function $2(e){return e[e.length-1]==="/"?e.slice(0,-1):e}function $3(e,...t){const r=new String(String.raw(e,...t));return r.__sentry_template_string__=e.join("\0").replace(/%/g,"%%").replace(/\0/g,"%s"),r.__sentry_template_values__=t,r}const G7=$3;function V7(e){var t;"aggregates"in e?((t=e.attrs)==null?void 0:t.ip_address)===void 0&&(e.attrs={...e.attrs,ip_address:"{{auto}}"}):e.ipAddress===void 0&&(e.ipAddress="{{auto}}")}function q3(e,t,r=[t],s="npm"){const a=e._metadata||{};a.sdk||(a.sdk={name:`sentry.javascript.${t}`,packages:r.map(i=>({name:`${s}:@sentry/${i}`,version:ka})),version:ka}),e._metadata=a}function u_(e={}){const t=e.client||Ie();if(!p3()||!t)return{};const r=Fa(),s=Vi(r);if(s.getTraceData)return s.getTraceData(e);const a=e.scope||lt(),i=e.span||hn(),o=i?JT(i):Q7(a),l=i?Ms(i):Qw(t,a),u=FT(l);if(!zT.test(o))return ce.warn("Invalid sentry-trace data. Cannot generate trace data"),{};const p={"sentry-trace":o,baggage:u};return e.propagateTraceparent&&(p.traceparent=i?Wq(i):Y7(a)),p}function Q7(e){const{traceId:t,sampled:r,propagationSpanId:s}=e.getPropagationContext();return GT(t,s,r)}function Y7(e){const{traceId:t,sampled:r,propagationSpanId:s}=e.getPropagationContext();return VT(t,s,r)}function J7(e,t,r){let s,a,i;const o=r!=null&&r.maxWait?Math.max(r.maxWait,t):0,l=(r==null?void 0:r.setTimeoutImpl)||setTimeout;function u(){return d(),s=e(),s}function d(){a!==void 0&&clearTimeout(a),i!==void 0&&clearTimeout(i),a=i=void 0}function p(){return a!==void 0||i!==void 0?u():s}function f(){return a&&clearTimeout(a),a=l(u,t),o&&i===void 0&&(i=l(u,o)),s}return f.cancel=d,f.flush=p,f}const X7=100;function Ds(e,t){const r=Ie(),s=En();if(!r)return;const{beforeBreadcrumb:a=null,maxBreadcrumbs:i=X7}=r.getOptions();if(i<=0)return;const l={timestamp:sl(),...e},u=a?zi(()=>a(l,t)):l;u!==null&&(r.emit&&r.emit("beforeAddBreadcrumb",u,t),s.addBreadcrumb(u,i))}let q2;const Z7="FunctionToString",F2=new WeakMap,eU=(()=>({name:Z7,setupOnce(){q2=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=Kw(this),r=F2.has(Ie())&&t!==void 0?t:this;return q2.apply(r,e)}}catch{}},setup(e){F2.set(e,!0)}})),F3=eU,tU=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,/^Can't find variable: gmo$/,/^undefined is not an object \(evaluating 'a\.[A-Z]'\)$/,`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/,/^Java exception was raised during method invocation$/],nU="EventFilters",U3=(e={})=>{let t;return{name:nU,setup(r){const s=r.getOptions();t=U2(e,s)},processEvent(r,s,a){if(!t){const i=a.getOptions();t=U2(e,i)}return rU(r,t)?null:r}}},B3=((e={})=>({...U3(e),name:"InboundFilters"}));function U2(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:tU],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[]]}}function rU(e,t){if(e.type){if(e.type==="transaction"&&aU(e,t.ignoreTransactions))return Pe&&ce.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${yo(e)}`),!0}else{if(sU(e,t.ignoreErrors))return Pe&&ce.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${yo(e)}`),!0;if(cU(e))return Pe&&ce.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${yo(e)}`),!0;if(iU(e,t.denyUrls))return Pe&&ce.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${yo(e)}.
Url: ${Km(e)}`),!0;if(!oU(e,t.allowUrls))return Pe&&ce.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${yo(e)}.
Url: ${Km(e)}`),!0}return!1}function sU(e,t){return t!=null&&t.length?T3(e).some(r=>Os(r,t)):!1}function aU(e,t){if(!(t!=null&&t.length))return!1;const r=e.transaction;return r?Os(r,t):!1}function iU(e,t){if(!(t!=null&&t.length))return!1;const r=Km(e);return r?Os(r,t):!1}function oU(e,t){if(!(t!=null&&t.length))return!0;const r=Km(e);return r?Os(r,t):!0}function lU(e=[]){for(let t=e.length-1;t>=0;t--){const r=e[t];if(r&&r.filename!=="<anonymous>"&&r.filename!=="[native code]")return r.filename||null}return null}function Km(e){var t,r;try{const s=[...((t=e.exception)==null?void 0:t.values)??[]].reverse().find(i=>{var o,l,u;return((o=i.mechanism)==null?void 0:o.parent_id)===void 0&&((u=(l=i.stacktrace)==null?void 0:l.frames)==null?void 0:u.length)}),a=(r=s==null?void 0:s.stacktrace)==null?void 0:r.frames;return a?lU(a):null}catch{return Pe&&ce.error(`Cannot extract url for event ${yo(e)}`),null}}function cU(e){var t,r;return(r=(t=e.exception)==null?void 0:t.values)!=null&&r.length?!e.message&&!e.exception.values.some(s=>s.stacktrace||s.type&&s.type!=="Error"||s.value):!1}function uU(e,t,r,s,a,i){var l;if(!((l=a.exception)!=null&&l.values)||!i||!La(i.originalException,Error))return;const o=a.exception.values.length>0?a.exception.values[a.exception.values.length-1]:void 0;o&&(a.exception.values=Dv(e,t,s,i.originalException,r,a.exception.values,o,0))}function Dv(e,t,r,s,a,i,o,l){if(i.length>=r+1)return i;let u=[...i];if(La(s[a],Error)){B2(o,l);const d=e(t,s[a]),p=u.length;H2(d,a,p,l),u=Dv(e,t,r,s[a],a,[d,...u],d,p)}return Array.isArray(s.errors)&&s.errors.forEach((d,p)=>{if(La(d,Error)){B2(o,l);const f=e(t,d),m=u.length;H2(f,`errors[${p}]`,m,l),u=Dv(e,t,r,d,a,[f,...u],f,m)}}),u}function B2(e,t){e.mechanism={handled:!0,type:"auto.core.linked_errors",...e.mechanism,...e.type==="AggregateError"&&{is_exception_group:!0},exception_id:t}}function H2(e,t,r,s){e.mechanism={handled:!0,...e.mechanism,type:"chained",source:t,exception_id:r,parent_id:s}}const H3=new Map,K2=new Set;function dU(e){if(Xe._sentryModuleMetadata)for(const t of Object.keys(Xe._sentryModuleMetadata)){const r=Xe._sentryModuleMetadata[t];if(K2.has(t))continue;K2.add(t);const s=e(t);for(const a of s.reverse())if(a.filename){H3.set(a.filename,r);break}}}function hU(e,t){return dU(e),H3.get(t)}function K3(e,t){var r,s;(s=(r=t.exception)==null?void 0:r.values)==null||s.forEach(a=>{var i,o;(o=(i=a.stacktrace)==null?void 0:i.frames)==null||o.forEach(l=>{if(!l.filename||l.module_metadata)return;const u=hU(e,l.filename);u&&(l.module_metadata=u)})})}function z3(e){var t,r;(r=(t=e.exception)==null?void 0:t.values)==null||r.forEach(s=>{var a,i;(i=(a=s.stacktrace)==null?void 0:a.frames)==null||i.forEach(o=>{delete o.module_metadata})})}const fU=()=>({name:"ModuleMetadata",setup(e){e.on("beforeEnvelope",t=>{Ko(t,(r,s)=>{if(s==="event"){const a=Array.isArray(r)?r[1]:void 0;a&&(z3(a),r[1]=a)}})}),e.on("applyFrameMetadata",t=>{if(t.type)return;const r=e.getOptions().stackParser;K3(r,t)})}});function d_(e){const t="console";Wi(t,e),Gi(t,mU)}function mU(){"console"in Xe&&qw.forEach(function(e){e in Xe.console&&Kn(Xe.console,e,function(t){return Mm[e]=t,function(...r){as("console",{args:r,level:e});const a=Mm[e];a==null||a.apply(Xe.console,r)}})})}function zm(e){return e==="warn"?"warning":["fatal","error","warning","log","info","debug"].includes(e)?e:"log"}const pU="CaptureConsole",xU=((e={})=>{const t=e.levels||qw,r=e.handled??!0;return{name:pU,setup(s){"console"in Xe&&d_(({args:a,level:i})=>{Ie()!==s||!t.includes(i)||yU(a,i,r)})}}}),gU=xU;function yU(e,t,r){const s=zm(t),a=new Error,i={level:zm(t),extra:{arguments:e}};Pr(o=>{if(o.addEventProcessor(d=>(d.logger="console",Ma(d,{handled:r,type:"auto.core.capture_console"}),d)),t==="assert"){if(!e[0]){const d=`Assertion failed: ${Dm(e.slice(1)," ")||"console.assert"}`;o.setExtra("arguments",e.slice(1)),o.captureMessage(d,s,{captureContext:i,syntheticException:a})}return}const l=e.find(d=>d instanceof Error);if(l){Ct(l,i);return}const u=Dm(e," ");o.captureMessage(u,s,{captureContext:i,syntheticException:a})})}const bU="Dedupe",vU=(()=>{let e;return{name:bU,processEvent(t){if(t.type)return t;try{if(wU(t,e))return Pe&&ce.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return e=t}}}),W3=vU;function wU(e,t){return t?!!(_U(e,t)||jU(e,t)):!1}function _U(e,t){const r=e.message,s=t.message;return!(!r&&!s||r&&!s||!r&&s||r!==s||!V3(e,t)||!G3(e,t))}function jU(e,t){const r=z2(t),s=z2(e);return!(!r||!s||r.type!==s.type||r.value!==s.value||!V3(e,t)||!G3(e,t))}function G3(e,t){let r=Sv(e),s=Sv(t);if(!r&&!s)return!0;if(r&&!s||!r&&s||(r=r,s=s,s.length!==r.length))return!1;for(let a=0;a<s.length;a++){const i=s[a],o=r[a];if(i.filename!==o.filename||i.lineno!==o.lineno||i.colno!==o.colno||i.function!==o.function)return!1}return!0}function V3(e,t){let r=e.fingerprint,s=t.fingerprint;if(!r&&!s)return!0;if(r&&!s||!r&&s)return!1;r=r,s=s;try{return r.join("")===s.join("")}catch{return!1}}function z2(e){var t,r;return(r=(t=e.exception)==null?void 0:t.values)==null?void 0:r[0]}const NU="ExtraErrorData",SU=((e={})=>{const{depth:t=3,captureErrorCause:r=!0}=e;return{name:NU,processEvent(s,a,i){const{maxValueLength:o}=i.getOptions();return EU(s,a,t,r,o)}}}),kU=SU;function EU(e,t={},r,s,a){if(!t.originalException||!Ea(t.originalException))return e;const i=t.originalException.name||t.originalException.constructor.name,o=Q3(t.originalException,s,a);if(o){const l={...e.contexts},u=Fr(o,r);return Xs(u)&&(In(u,"__sentry_skip_normalization__",!0),l[i]=u),{...e,contexts:l}}return e}function Q3(e,t,r){try{const s=["name","message","stack","line","column","fileName","lineNumber","columnNumber","toJSON"],a={};for(const i of Object.keys(e)){if(s.indexOf(i)!==-1)continue;const o=e[i];a[i]=Ea(o)||typeof o=="string"?r?vd(`${o}`,r):`${o}`:o}if(t&&e.cause!==void 0)if(Ea(e.cause)){const i=e.cause.name||e.cause.constructor.name;a.cause={[i]:Q3(e.cause,!1,r)}}else a.cause=e.cause;if(typeof e.toJSON=="function"){const i=e.toJSON();for(const o of Object.keys(i)){const l=i[o];a[o]=Ea(l)?l.toString():l}}return a}catch(s){Pe&&ce.error("Unable to extract extra data from the Error object:",s)}return null}function CU(e,t){let r=0;for(let s=e.length-1;s>=0;s--){const a=e[s];a==="."?e.splice(s,1):a===".."?(e.splice(s,1),r++):r&&(e.splice(s,1),r--)}if(t)for(;r--;r)e.unshift("..");return e}const TU=/^(\S+:\\|\/?)([\s\S]*?)((?:\.{1,2}|[^/\\]+?|)(\.[^./\\]*|))(?:[/\\]*)$/;function RU(e){const t=e.length>1024?`<truncated>${e.slice(-1024)}`:e,r=TU.exec(t);return r?r.slice(1):[]}function W2(...e){let t="",r=!1;for(let s=e.length-1;s>=-1&&!r;s--){const a=s>=0?e[s]:"/";a&&(t=`${a}/${t}`,r=a.charAt(0)==="/")}return t=CU(t.split("/").filter(s=>!!s),!r).join("/"),(r?"/":"")+t||"."}function G2(e){let t=0;for(;t<e.length&&e[t]==="";t++);let r=e.length-1;for(;r>=0&&e[r]==="";r--);return t>r?[]:e.slice(t,r-t+1)}function AU(e,t){e=W2(e).slice(1),t=W2(t).slice(1);const r=G2(e.split("/")),s=G2(t.split("/")),a=Math.min(r.length,s.length);let i=a;for(let l=0;l<a;l++)if(r[l]!==s[l]){i=l;break}let o=[];for(let l=i;l<r.length;l++)o.push("..");return o=o.concat(s.slice(i)),o.join("/")}function PU(e,t){return RU(e)[2]||""}const OU="RewriteFrames",IU=(e={})=>{const t=e.root,r=e.prefix||"app:///",s="window"in Xe&&!!Xe.window,a=e.iteratee||LU({isBrowser:s,root:t,prefix:r});function i(l){try{return{...l,exception:{...l.exception,values:l.exception.values.map(u=>({...u,...u.stacktrace&&{stacktrace:o(u.stacktrace)}}))}}}catch{return l}}function o(l){var u;return{...l,frames:(u=l==null?void 0:l.frames)==null?void 0:u.map(d=>a(d))}}return{name:OU,processEvent(l){let u=l;return l.exception&&Array.isArray(l.exception.values)&&(u=i(u)),u}}};function LU({isBrowser:e,root:t,prefix:r}){return s=>{if(!s.filename)return s;const a=/^[a-zA-Z]:\\/.test(s.filename)||s.filename.includes("\\")&&!s.filename.includes("/"),i=/^\//.test(s.filename);if(e){if(t){const o=s.filename;o.indexOf(t)===0&&(s.filename=o.replace(t,r))}}else if(a||i){const o=a?s.filename.replace(/^[a-zA-Z]:/,"").replace(/\\/g,"/"):s.filename,l=t?AU(t,o):PU(o);s.filename=`${r}${l}`}return s}}const MU=["reauthenticate","signInAnonymously","signInWithOAuth","signInWithIdToken","signInWithOtp","signInWithPassword","signInWithSSO","signOut","signUp","verifyOtp"],DU=["createUser","deleteUser","listUsers","getUserById","updateUserById","inviteUserByEmail"],$U={eq:"eq",neq:"neq",gt:"gt",gte:"gte",lt:"lt",lte:"lte",like:"like","like(all)":"likeAllOf","like(any)":"likeAnyOf",ilike:"ilike","ilike(all)":"ilikeAllOf","ilike(any)":"ilikeAnyOf",is:"is",in:"in",cs:"contains",cd:"containedBy",sr:"rangeGt",nxl:"rangeGte",sl:"rangeLt",nxr:"rangeLte",adj:"rangeAdjacent",ov:"overlaps",fts:"",plfts:"plain",phfts:"phrase",wfts:"websearch",not:"not"},Y3=["select","insert","upsert","update","delete"];function Pp(e){try{e.__SENTRY_INSTRUMENTED__=!0}catch{}}function Op(e){try{return e.__SENTRY_INSTRUMENTED__}catch{return!1}}function qU(e,t={}){var r;switch(e){case"GET":return"select";case"POST":return(r=t.Prefer)!=null&&r.includes("resolution=")?"upsert":"insert";case"PATCH":return"update";case"DELETE":return"delete";default:return"<unknown-op>"}}function FU(e,t){if(t===""||t==="*")return"select(*)";if(e==="select")return`select(${t})`;if(e==="or"||e.endsWith(".or"))return`${e}${t}`;const[r,...s]=t.split(".");let a;return r!=null&&r.startsWith("fts")?a="textSearch":r!=null&&r.startsWith("plfts")?a="textSearch[plain]":r!=null&&r.startsWith("phfts")?a="textSearch[phrase]":r!=null&&r.startsWith("wfts")?a="textSearch[websearch]":a=r&&$U[r]||"filter",`${a}(${e}, ${s.join(".")})`}function V2(e,t=!1){return new Proxy(e,{apply(r,s,a){return na({name:`auth ${t?"(admin) ":""}${e.name}`,attributes:{[ct]:"auto.db.supabase",[Ut]:"db","db.system":"postgresql","db.operation":`auth.${t?"admin.":""}${e.name}`}},i=>Reflect.apply(r,s,a).then(o=>(o&&typeof o=="object"&&"error"in o&&o.error?(i.setStatus({code:vt}),Ct(o.error,{mechanism:{handled:!1,type:"auto.db.supabase.auth"}})):i.setStatus({code:kp}),i.end(),o)).catch(o=>{throw i.setStatus({code:vt}),i.end(),Ct(o,{mechanism:{handled:!1,type:"auto.db.supabase.auth"}}),o}).then(...a))}})}function UU(e){const t=e.auth;if(!(!t||Op(e.auth))){for(const r of MU){const s=t[r];s&&typeof e.auth[r]=="function"&&(e.auth[r]=V2(s))}for(const r of DU){const s=t.admin[r];s&&typeof e.auth.admin[r]=="function"&&(e.auth.admin[r]=V2(s,!0))}Pp(e.auth)}}function BU(e){Op(e.prototype.from)||(e.prototype.from=new Proxy(e.prototype.from,{apply(t,r,s){const a=Reflect.apply(t,r,s),i=a.constructor;return KU(i),a}}),Pp(e.prototype.from))}function HU(e){Op(e.prototype.then)||(e.prototype.then=new Proxy(e.prototype.then,{apply(t,r,s){var x;const a=Y3,i=r,o=qU(i.method,i.headers);if(!a.includes(o)||!((x=i==null?void 0:i.url)!=null&&x.pathname)||typeof i.url.pathname!="string")return Reflect.apply(t,r,s);const l=i.url.pathname.split("/"),u=l.length>0?l[l.length-1]:"",d=[];for(const[y,g]of i.url.searchParams.entries())d.push(FU(y,g));const p=Object.create(null);if(Xs(i.body))for(const[y,g]of Object.entries(i.body))p[y]=g;const f=`${o==="select"?"":`${o}${p?"(...) ":""}`}${d.join(" ")} from(${u})`,m={"db.table":u,"db.schema":i.schema,"db.url":i.url.origin,"db.sdk":i.headers["X-Client-Info"],"db.system":"postgresql","db.operation":o,[ct]:"auto.db.supabase",[Ut]:"db"};return d.length&&(m["db.query"]=d),Object.keys(p).length&&(m["db.body"]=p),na({name:f,attributes:m},y=>Reflect.apply(t,r,[]).then(g=>{if(y&&(g&&typeof g=="object"&&"status"in g&&_d(y,g.status||500),y.end()),g.error){const w=new Error(g.error.message);g.error.code&&(w.code=g.error.code),g.error.details&&(w.details=g.error.details);const S={};d.length&&(S.query=d),Object.keys(p).length&&(S.body=p),Ct(w,j=>(j.addEventProcessor(N=>(Ma(N,{handled:!1,type:"auto.db.supabase.postgres"}),N)),j.setContext("supabase",S),j))}const b={type:"supabase",category:`db.${o}`,message:f},_={};return d.length&&(_.query=d),Object.keys(p).length&&(_.body=p),Object.keys(_).length&&(b.data=_),Ds(b),g},g=>{throw y&&(_d(y,500),y.end()),g}).then(...s))}}),Pp(e.prototype.then))}function KU(e){for(const t of Y3)Op(e.prototype[t])||(e.prototype[t]=new Proxy(e.prototype[t],{apply(r,s,a){const i=Reflect.apply(r,s,a),o=i.constructor;return Pe&&ce.log(`Instrumenting ${t} operation's PostgRESTFilterBuilder`),HU(o),i}}),Pp(e.prototype[t]))}const J3=e=>{if(!e){Pe&&ce.warn("Supabase integration was not installed because no Supabase client was provided.");return}const t=e.constructor===Function?e:e.constructor;BU(t),UU(e)},zU="Supabase",WU=(e=>({setupOnce(){J3(e)},name:zU})),GU=e=>WU(e.supabaseClient),VU=10,QU="ZodErrors";function YU(e){return Ea(e)&&e.name==="ZodError"&&Array.isArray(e.issues)}function JU(e){return{...e,path:"path"in e&&Array.isArray(e.path)?e.path.join("."):void 0,keys:"keys"in e?JSON.stringify(e.keys):void 0,unionErrors:"unionErrors"in e?JSON.stringify(e.unionErrors):void 0}}function XU(e){return e.map(t=>typeof t=="number"?"<array>":t).join(".")}function ZU(e){const t=new Set;for(const s of e.issues){const a=XU(s.path);a.length>0&&t.add(a)}const r=Array.from(t);if(r.length===0){let s="variable";if(e.issues.length>0){const a=e.issues[0];a!==void 0&&"expected"in a&&typeof a.expected=="string"&&(s=a.expected)}return`Failed to validate ${s}`}return`Failed to validate keys: ${vd(r.join(", "),100)}`}function eB(e,t=!1,r,s){var a;if(!((a=r.exception)!=null&&a.values)||!s.originalException||!YU(s.originalException)||s.originalException.issues.length===0)return r;try{const o=(t?s.originalException.issues:s.originalException.issues.slice(0,e)).map(JU);return t&&(Array.isArray(s.attachments)||(s.attachments=[]),s.attachments.push({filename:"zod_issues.json",data:JSON.stringify({issues:o})})),{...r,exception:{...r.exception,values:[{...r.exception.values[0],value:ZU(s.originalException)},...r.exception.values.slice(1)]},extra:{...r.extra,"zoderror.issues":o.slice(0,e)}}}catch(i){return{...r,extra:{...r.extra,"zoderrors sentry integration parse error":{message:"an exception was thrown while processing ZodError within applyZodErrorsToEvent()",error:i instanceof Error?`${i.name}: ${i.message}
${i.stack}`:"unknown"}}}}}const tB=((e={})=>{const t=e.limit??VU;return{name:QU,processEvent(r,s){return eB(t,e.saveZodIssuesAsAttachment,r,s)}}}),nB=tB,rB=e=>({name:"ThirdPartyErrorsFilter",setup(t){t.on("beforeEnvelope",r=>{Ko(r,(s,a)=>{if(a==="event"){const i=Array.isArray(s)?s[1]:void 0;i&&(z3(i),s[1]=i)}})}),t.on("applyFrameMetadata",r=>{if(r.type)return;const s=t.getOptions().stackParser;K3(s,r)})},processEvent(t){const r=sB(t);if(r){const s=e.behaviour==="drop-error-if-contains-third-party-frames"||e.behaviour==="apply-tag-if-contains-third-party-frames"?"some":"every";if(r[s](i=>!i.some(o=>e.filterKeys.includes(o)))){if(e.behaviour==="drop-error-if-contains-third-party-frames"||e.behaviour==="drop-error-if-exclusively-contains-third-party-frames")return null;t.tags={...t.tags,third_party_code:!0}}}return t}});function sB(e){const t=Sv(e);if(t)return t.filter(r=>!!r.filename&&(r.lineno??r.colno)!=null).map(r=>r.module_metadata?Object.keys(r.module_metadata).filter(s=>s.startsWith(Q2)).map(s=>s.slice(Q2.length)):[])}const Q2="_sentryBundlerPluginAppKey:",aB=100,iB=10,If="flag.evaluation.";function Yc(e){const r=lt().getScopeData().contexts.flags,s=r?r.values:[];return s.length&&(e.contexts===void 0&&(e.contexts={}),e.contexts.flags={values:[...s]}),e}function Wo(e,t,r=aB){const s=lt().getScopeData().contexts;s.flags||(s.flags={values:[]});const a=s.flags.values;oB(a,e,t,r)}function oB(e,t,r,s){if(typeof r!="boolean")return;if(e.length>s){Pe&&ce.error(`[Feature Flags] insertToFlagBuffer called on a buffer larger than maxSize=${s}`);return}const a=e.findIndex(i=>i.flag===t);a!==-1&&e.splice(a,1),e.length===s&&e.shift(),e.push({flag:t,result:r})}function Go(e,t,r=iB){if(typeof t!="boolean")return;const s=hn();if(!s)return;const a=We(s).data;if(`${If}${e}`in a){s.setAttribute(`${If}${e}`,t);return}Object.keys(a).filter(o=>o.startsWith(If)).length<r&&s.setAttribute(`${If}${e}`,t)}const lB=()=>({name:"FeatureFlags",processEvent(e,t,r){return Yc(e)},addFeatureFlag(e,t){Wo(e,t),Go(e,t)}}),cB=({growthbookClass:e})=>({name:"GrowthBook",setupOnce(){const t=e.prototype;typeof t.isOn=="function"&&Kn(t,"isOn",Y2),typeof t.getFeatureValue=="function"&&Kn(t,"getFeatureValue",Y2)},processEvent(t,r,s){return Yc(t)}});function Y2(e){return function(...t){const r=t[0],s=e.apply(this,t);return typeof r=="string"&&typeof s=="boolean"&&(Wo(r,s),Go(r,s)),s}}function uB(e,t,r,s,a){if(!e.fetchData)return;const{method:i,url:o}=e.fetchData,l=is()&&t(o);if(e.endTimestamp&&l){const x=e.fetchData.__span;if(!x)return;const y=s[x];y&&(fB(y,e),dB(y,e,a),delete s[x]);return}const{spanOrigin:u="auto.http.browser",propagateTraceparent:d=!1}=typeof a=="object"?a:{spanOrigin:a},p=!!hn(),f=l&&p?os(pB(o,i,u)):new Da;if(e.fetchData.__span=f.spanContext().spanId,s[f.spanContext().spanId]=f,r(e.fetchData.url)){const x=e.args[0],y=e.args[1]||{},g=hB(x,y,is()&&p?f:void 0,d);g&&(e.args[1]=y,y.headers=g)}const m=Ie();if(m){const x={input:e.args,response:e.response,startTimestamp:e.startTimestamp,endTimestamp:e.endTimestamp};m.emit("beforeOutgoingRequestSpan",f,x)}return f}function dB(e,t,r){var a;const s=typeof r=="object"&&r!==null?r.onRequestSpanEnd:void 0;s==null||s(e,{headers:(a=t.response)==null?void 0:a.headers,error:t.error})}function hB(e,t,r,s){const a=u_({span:r,propagateTraceparent:s}),i=a["sentry-trace"],o=a.baggage,l=a.traceparent;if(!i)return;const u=t.headers||(Bw(e)?e.headers:void 0);if(u)if(mB(u)){const d=new Headers(u);if(d.get("sentry-trace")||d.set("sentry-trace",i),s&&l&&!d.get("traceparent")&&d.set("traceparent",l),o){const p=d.get("baggage");p?Lf(p)||d.set("baggage",`${p},${o}`):d.set("baggage",o)}return d}else if(Array.isArray(u)){const d=[...u];u.find(f=>f[0]==="sentry-trace")||d.push(["sentry-trace",i]),s&&l&&!u.find(f=>f[0]==="traceparent")&&d.push(["traceparent",l]);const p=u.find(f=>f[0]==="baggage"&&Lf(f[1]));return o&&!p&&d.push(["baggage",o]),d}else{const d="sentry-trace"in u?u["sentry-trace"]:void 0,p="traceparent"in u?u.traceparent:void 0,f="baggage"in u?u.baggage:void 0,m=f?Array.isArray(f)?[...f]:[f]:[],x=f&&(Array.isArray(f)?f.find(g=>Lf(g)):Lf(f));o&&!x&&m.push(o);const y={...u,"sentry-trace":d??i,baggage:m.length>0?m.join(","):void 0};return s&&l&&!p&&(y.traceparent=l),y}else return{...a}}function fB(e,t){var r,s;if(t.response){_d(e,t.response.status);const a=(s=(r=t.response)==null?void 0:r.headers)==null?void 0:s.get("content-length");if(a){const i=parseInt(a);i>0&&e.setAttribute("http.response_content_length",i)}}else t.error&&e.setStatus({code:vt,message:"internal_error"});e.end()}function Lf(e){return e.split(",").some(t=>t.trim().startsWith(Ww))}function mB(e){return typeof Headers<"u"&&La(e,Headers)}function pB(e,t,r){const s=c_(e);return{name:s?`${t} ${K7(s)}`:t,attributes:xB(e,s,t,r)}}function xB(e,t,r,s){const a={url:e,type:"fetch","http.method":r,[ct]:s,[Ut]:"http.client"};return t&&(l_(t)||(a["http.url"]=t.href,a["server.address"]=t.host),t.search&&(a["http.query"]=t.search),t.hash&&(a["http.fragment"]=t.hash)),a}function X3(e,t={},r=lt()){const{message:s,name:a,email:i,url:o,source:l,associatedEventId:u,tags:d}=e,p={contexts:{feedback:{contact_email:i,name:a,message:s,url:o,source:l,associated_event_id:u}},type:"feedback",level:"info",tags:d},f=(r==null?void 0:r.getClient())||Ie();return f&&f.emit("beforeSendFeedback",p,t),r.captureEvent(p,t)}function Jc(e,t,r,s,a){Hm({level:e,message:t,attributes:r,severityNumber:a},s)}function gB(e,t,{scope:r}={}){Jc("trace",e,t,r)}function yB(e,t,{scope:r}={}){Jc("debug",e,t,r)}function bB(e,t,{scope:r}={}){Jc("info",e,t,r)}function vB(e,t,{scope:r}={}){Jc("warn",e,t,r)}function wB(e,t,{scope:r}={}){Jc("error",e,t,r)}function _B(e,t,{scope:r}={}){Jc("fatal",e,t,r)}const jB=Object.freeze(Object.defineProperty({__proto__:null,debug:yB,error:wB,fatal:_B,fmt:G7,info:bB,trace:gB,warn:vB},Symbol.toStringTag,{value:"Module"}));function $v(e,t,r){return"util"in Xe&&typeof Xe.util.format=="function"?Xe.util.format(...e):NB(e,t,r)}function NB(e,t,r){return e.map(s=>$i(s)?String(s):JSON.stringify(Fr(s,t,r))).join(" ")}function SB(e){return/%[sdifocO]/.test(e)}function kB(e,t){const r={},s=new Array(t.length).fill("{}").join(" ");return r["sentry.message.template"]=`${e} ${s}`,t.forEach((a,i)=>{r[`sentry.message.parameter.${i}`]=a}),r}const EB="ConsoleLogs",J2={[ct]:"auto.log.console"},CB=((e={})=>{const t=e.levels||qw;return{name:EB,setup(r){const{enableLogs:s,normalizeDepth:a=3,normalizeMaxBreadth:i=1e3}=r.getOptions();if(!s){Pe&&ce.warn("`enableLogs` is not enabled, ConsoleLogs integration disabled");return}d_(({args:o,level:l})=>{if(Ie()!==r||!t.includes(l))return;const u=o[0],d=o.slice(1);if(l==="assert"){if(!u){const x=d.length>0?`Assertion failed: ${$v(d,a,i)}`:"Assertion failed";Hm({level:"error",message:x,attributes:J2})}return}const p=l==="log",f=o.length>1&&typeof o[0]=="string"&&!SB(o[0]),m={...J2,...f?kB(u,d):{}};Hm({level:p?"info":l,message:$v(o,a,i),severityNumber:p?10:void 0,attributes:m})})}}}),Z3=CB;function h_(e,t,r,s){N7({type:e,name:t,value:r,unit:s==null?void 0:s.unit,attributes:s==null?void 0:s.attributes},{scope:s==null?void 0:s.scope})}function TB(e,t=1,r){h_("counter",e,t,r)}function RB(e,t,r){h_("gauge",e,t,r)}function AB(e,t,r){h_("distribution",e,t,r)}const PB=Object.freeze(Object.defineProperty({__proto__:null,count:TB,distribution:AB,gauge:RB},Symbol.toStringTag,{value:"Module"})),OB=["trace","debug","info","warn","error","fatal"];function IB(e={}){const t=new Set(e.levels??OB),r=e.client;return{log(s){const{type:a,level:i,message:o,args:l,tag:u,date:d,...p}=s,f=r||Ie();if(!f)return;const m=DB(a,i);if(!t.has(m))return;const{normalizeDepth:x=3,normalizeMaxBreadth:y=1e3}=f.getOptions(),g=[];o&&g.push(o),l&&l.length>0&&g.push($v(l,x,y));const b=g.join(" ");p["sentry.origin"]="auto.log.consola",u&&(p["consola.tag"]=u),a&&(p["consola.type"]=a),i!=null&&typeof i=="number"&&(p["consola.level"]=i),Hm({level:m,message:b,attributes:p})}}}const LB={silent:"trace",fatal:"fatal",error:"error",warn:"warn",log:"info",info:"info",success:"info",fail:"error",ready:"info",start:"info",box:"info",debug:"debug",trace:"trace",verbose:"debug",critical:"fatal",notice:"info"},MB={0:"fatal",1:"warn",2:"info",3:"info",4:"debug",5:"trace"};function DB(e,t){if(e==="verbose")return"debug";if(e==="silent")return"trace";if(e){const r=LB[e];if(r)return r}if(typeof t=="number"){const r=MB[t];if(r)return r}return"info"}const $B="gen_ai.prompt",Ip="gen_ai.system",kr="gen_ai.request.model",f_="gen_ai.request.stream",Lp="gen_ai.request.temperature",m_="gen_ai.request.max_tokens",Mp="gen_ai.request.frequency_penalty",p_="gen_ai.request.presence_penalty",Dp="gen_ai.request.top_p",eR="gen_ai.request.top_k",qB="gen_ai.request.encoding_format",FB="gen_ai.request.dimensions",Yi="gen_ai.response.finish_reasons",Ba="gen_ai.response.model",Xc="gen_ai.response.id",UB="gen_ai.response.stop_reason",Vo="gen_ai.usage.input_tokens",Qo="gen_ai.usage.output_tokens",Yo="gen_ai.usage.total_tokens",qi="gen_ai.operation.name",Fi="gen_ai.request.messages",ls="gen_ai.response.text",$p="gen_ai.request.available_tools",qp="gen_ai.response.streaming",ra="gen_ai.response.tool_calls",tR="gen_ai.agent.name",BB="gen_ai.pipeline.name",HB="gen_ai.usage.cache_creation_input_tokens",KB="gen_ai.usage.cache_read_input_tokens",zB="gen_ai.invoke_agent",WB="openai.response.id",nR="openai.response.model",GB="openai.response.timestamp",VB="openai.usage.completion_tokens",QB="openai.usage.prompt_tokens",$0={CHAT:"chat",RESPONSES:"responses",EMBEDDINGS:"embeddings"},X2="anthropic.response.timestamp",rR=2e4,Wm=e=>new TextEncoder().encode(e).length,Gm=e=>Wm(JSON.stringify(e));function x_(e,t){if(Wm(e)<=t)return e;let r=0,s=e.length,a="";for(;r<=s;){const i=Math.floor((r+s)/2),o=e.slice(0,i);Wm(o)<=t?(a=o,r=i+1):s=i-1}return a}function YB(e){return typeof e=="string"?e:"text"in e?e.text:""}function Z2(e,t){return typeof e=="string"?t:{...e,text:t}}function JB(e){return e!==null&&typeof e=="object"&&"content"in e&&typeof e.content=="string"}function XB(e){return e!==null&&typeof e=="object"&&"content"in e&&Array.isArray(e.content)}function od(e){return!e||typeof e!="object"?!1:ZB(e)||sR(e)||"media_type"in e&&typeof e.media_type=="string"&&"data"in e||"image_url"in e&&typeof e.image_url=="string"&&e.image_url.startsWith("data:")||"type"in e&&(e.type==="blob"||e.type==="base64")||"b64_json"in e||"type"in e&&"result"in e&&e.type==="image_generation"||"uri"in e&&typeof e.uri=="string"&&e.uri.startsWith("data:")}function ZB(e){return"type"in e&&typeof e.type=="string"&&"source"in e&&od(e.source)}function sR(e){return"inlineData"in e&&!!e.inlineData&&typeof e.inlineData=="object"&&"data"in e.inlineData&&typeof e.inlineData.data=="string"}function aR(e){return e!==null&&typeof e=="object"&&"parts"in e&&Array.isArray(e.parts)&&e.parts.length>0}function e9(e,t){const r={...e,content:""},s=Gm(r),a=t-s;if(a<=0)return[];const i=x_(e.content,a);return[{...e,content:i}]}function t9(e,t){const{parts:r}=e,s=r.map(l=>Z2(l,"")),a=Gm({...e,parts:s});let i=t-a;if(i<=0)return[];const o=[];for(const l of r){const u=YB(l),d=Wm(u);if(d<=i)o.push(l),i-=d;else if(o.length===0){const p=x_(u,i);p&&o.push(Z2(l,p));break}else break}return o.length<=0?[]:[{...e,parts:o}]}function n9(e,t){return!e||typeof e!="object"?[]:JB(e)?e9(e,t):aR(e)?t9(e,t):[]}const ek="[Filtered]",r9=["image_url","data","content","b64_json","result","uri"];function um(e){const t={...e};od(t.source)&&(t.source=um(t.source)),sR(e)&&(t.inlineData={...e.inlineData,data:ek});for(const r of r9)typeof t[r]=="string"&&(t[r]=ek);return t}function qv(e){return e.map(r=>{let s;return r&&typeof r=="object"&&(XB(r)?s={...r,content:qv(r.content)}:"content"in r&&od(r.content)&&(s={...r,content:um(r.content)}),aR(r)&&(s={...s??r,parts:qv(r.parts)}),od(s)?s=um(s):od(r)&&(s=um(r))),s??r})}function s9(e,t){if(!Array.isArray(e)||e.length===0)return e;const r=qv(e);if(Gm(r)<=t)return r;const a=r.map(Gm);let i=0,o=r.length;for(let l=r.length-1;l>=0;l--){const u=a[l];if(u&&i+u>t)break;u&&(i+=u),o=l}if(o===r.length){const l=r[r.length-1];return n9(l,t)}return r.slice(o)}function Fp(e){return s9(e,rR)}function a9(e){return x_(e,rR)}function Yd(e){return e.includes("messages")?"messages":e.includes("completions")?"completions":e.includes("models")?"models":e.includes("chat")?"chat":e.split(".").pop()||"unknown"}function Vm(e){return`gen_ai.${Yd(e)}`}function iR(e,t){return e?`${e}.${t}`:t}function g_(e,t,r,s,a){if(t!==void 0&&e.setAttributes({[Vo]:t}),r!==void 0&&e.setAttributes({[Qo]:r}),t!==void 0||r!==void 0||s!==void 0||a!==void 0){const i=(t??0)+(r??0)+(s??0)+(a??0);e.setAttributes({[Yo]:i})}}function Qm(e){if(typeof e=="string")return a9(e);if(Array.isArray(e)){const t=Fp(e);return JSON.stringify(t)}return JSON.stringify(e)}const i9=["responses.create","chat.completions.create","embeddings.create"],o9=["response.output_item.added","response.function_call_arguments.delta","response.function_call_arguments.done","response.output_item.done"],l9=["response.created","response.in_progress","response.failed","response.completed","response.incomplete","response.queued","response.output_text.delta",...o9];function y_(e){return e.includes("chat.completions")?$0.CHAT:e.includes("responses")?$0.RESPONSES:e.includes("embeddings")?$0.EMBEDDINGS:e.split(".").pop()||"unknown"}function tk(e){return`gen_ai.${y_(e)}`}function c9(e){return i9.includes(e)}function u9(e,t){return e?`${e}.${t}`:t}function d9(e){return e!==null&&typeof e=="object"&&"object"in e&&e.object==="chat.completion"}function h9(e){return e!==null&&typeof e=="object"&&"object"in e&&e.object==="response"}function f9(e){if(e===null||typeof e!="object"||!("object"in e))return!1;const t=e;return t.object==="list"&&typeof t.model=="string"&&t.model.toLowerCase().includes("embedding")}function m9(e){return e!==null&&typeof e=="object"&&"type"in e&&typeof e.type=="string"&&e.type.startsWith("response.")}function p9(e){return e!==null&&typeof e=="object"&&"object"in e&&e.object==="chat.completion.chunk"}function x9(e,t,r){if(b_(e,t.id,t.model,t.created),t.usage&&Up(e,t.usage.prompt_tokens,t.usage.completion_tokens,t.usage.total_tokens),Array.isArray(t.choices)){const s=t.choices.map(a=>a.finish_reason).filter(a=>a!==null);if(s.length>0&&e.setAttributes({[Yi]:JSON.stringify(s)}),r){const a=t.choices.map(i=>{var o;return(o=i.message)==null?void 0:o.tool_calls}).filter(i=>Array.isArray(i)&&i.length>0).flat();a.length>0&&e.setAttributes({[ra]:JSON.stringify(a)})}}}function g9(e,t,r){if(b_(e,t.id,t.model,t.created_at),t.status&&e.setAttributes({[Yi]:JSON.stringify([t.status])}),t.usage&&Up(e,t.usage.input_tokens,t.usage.output_tokens,t.usage.total_tokens),r){const s=t;if(Array.isArray(s.output)&&s.output.length>0){const a=s.output.filter(i=>typeof i=="object"&&i!==null&&i.type==="function_call");a.length>0&&e.setAttributes({[ra]:JSON.stringify(a)})}}}function y9(e,t){e.setAttributes({[nR]:t.model,[Ba]:t.model}),t.usage&&Up(e,t.usage.prompt_tokens,void 0,t.usage.total_tokens)}function Up(e,t,r,s){t!==void 0&&e.setAttributes({[QB]:t,[Vo]:t}),r!==void 0&&e.setAttributes({[VB]:r,[Qo]:r}),s!==void 0&&e.setAttributes({[Yo]:s})}function b_(e,t,r,s){e.setAttributes({[WB]:t,[Xc]:t}),e.setAttributes({[nR]:r,[Ba]:r}),e.setAttributes({[GB]:new Date(s*1e3).toISOString()})}function b9(e,t){for(const r of e){const s=r.index;if(!(s===void 0||!r.function))if(!(s in t.chatCompletionToolCalls))t.chatCompletionToolCalls[s]={...r,function:{name:r.function.name,arguments:r.function.arguments||""}};else{const a=t.chatCompletionToolCalls[s];r.function.arguments&&(a!=null&&a.function)&&(a.function.arguments+=r.function.arguments)}}}function v9(e,t,r){var s,a;t.responseId=e.id??t.responseId,t.responseModel=e.model??t.responseModel,t.responseTimestamp=e.created??t.responseTimestamp,e.usage&&(t.promptTokens=e.usage.prompt_tokens,t.completionTokens=e.usage.completion_tokens,t.totalTokens=e.usage.total_tokens);for(const i of e.choices??[])r&&((s=i.delta)!=null&&s.content&&t.responseTexts.push(i.delta.content),(a=i.delta)!=null&&a.tool_calls&&b9(i.delta.tool_calls,t)),i.finish_reason&&t.finishReasons.push(i.finish_reason)}function w9(e,t,r,s){if(!(e&&typeof e=="object")){t.eventTypes.push("unknown:non-object");return}if(e instanceof Error){s.setStatus({code:vt,message:"internal_error"}),Ct(e,{mechanism:{handled:!1,type:"auto.ai.openai.stream-response"}});return}if(!("type"in e))return;const a=e;if(!l9.includes(a.type)){t.eventTypes.push(a.type);return}if(r&&(a.type==="response.output_item.done"&&"item"in a&&t.responsesApiToolCalls.push(a.item),a.type==="response.output_text.delta"&&"delta"in a&&a.delta)){t.responseTexts.push(a.delta);return}if("response"in a){const{response:i}=a;t.responseId=i.id??t.responseId,t.responseModel=i.model??t.responseModel,t.responseTimestamp=i.created_at??t.responseTimestamp,i.usage&&(t.promptTokens=i.usage.input_tokens,t.completionTokens=i.usage.output_tokens,t.totalTokens=i.usage.total_tokens),i.status&&t.finishReasons.push(i.status),r&&i.output_text&&t.responseTexts.push(i.output_text)}}async function*_9(e,t,r){const s={eventTypes:[],responseTexts:[],finishReasons:[],responseId:"",responseModel:"",responseTimestamp:0,promptTokens:void 0,completionTokens:void 0,totalTokens:void 0,chatCompletionToolCalls:{},responsesApiToolCalls:[]};try{for await(const a of e)p9(a)?v9(a,s,r):m9(a)&&w9(a,s,r,t),yield a}finally{b_(t,s.responseId,s.responseModel,s.responseTimestamp),Up(t,s.promptTokens,s.completionTokens,s.totalTokens),t.setAttributes({[qp]:!0}),s.finishReasons.length&&t.setAttributes({[Yi]:JSON.stringify(s.finishReasons)}),r&&s.responseTexts.length&&t.setAttributes({[ls]:s.responseTexts.join("")});const i=[...Object.values(s.chatCompletionToolCalls),...s.responsesApiToolCalls];i.length>0&&t.setAttributes({[ra]:JSON.stringify(i)}),t.end()}}function j9(e,t){const r={[Ip]:"openai",[qi]:y_(t),[ct]:"auto.ai.openai"};if(e.length>0&&typeof e[0]=="object"&&e[0]!==null){const s=e[0],a=Array.isArray(s.tools)?s.tools:[],o=s.web_search_options&&typeof s.web_search_options=="object"?[{type:"web_search_options",...s.web_search_options}]:[],l=[...a,...o];l.length>0&&(r[$p]=JSON.stringify(l))}if(e.length>0&&typeof e[0]=="object"&&e[0]!==null){const s=e[0];r[kr]=s.model??"unknown","temperature"in s&&(r[Lp]=s.temperature),"top_p"in s&&(r[Dp]=s.top_p),"frequency_penalty"in s&&(r[Mp]=s.frequency_penalty),"presence_penalty"in s&&(r[p_]=s.presence_penalty),"stream"in s&&(r[f_]=s.stream),"encoding_format"in s&&(r[qB]=s.encoding_format),"dimensions"in s&&(r[FB]=s.dimensions)}else r[kr]="unknown";return r}function N9(e,t,r){var a;if(!t||typeof t!="object")return;const s=t;if(d9(s)){if(x9(e,s,r),r&&((a=s.choices)!=null&&a.length)){const i=s.choices.map(o=>{var l;return((l=o.message)==null?void 0:l.content)||""});e.setAttributes({[ls]:JSON.stringify(i)})}}else h9(s)?(g9(e,s,r),r&&s.output_text&&e.setAttributes({[ls]:s.output_text})):f9(s)&&y9(e,s)}function nk(e,t){if("messages"in t){const r=Qm(t.messages);e.setAttributes({[Fi]:r})}if("input"in t){const r=Qm(t.input);e.setAttributes({[Fi]:r})}}function S9(e,t,r,s){return async function(...i){const o=j9(i,t),l=o[kr]||"unknown",u=y_(t),d=i[0];return d&&typeof d=="object"&&d.stream===!0?ja({name:`${u} ${l} stream-response`,op:tk(t),attributes:o},async f=>{try{s.recordInputs&&d&&nk(f,d);const m=await e.apply(r,i);return _9(m,f,s.recordOutputs??!1)}catch(m){throw f.setStatus({code:vt,message:"internal_error"}),Ct(m,{mechanism:{handled:!1,type:"auto.ai.openai.stream",data:{function:t}}}),f.end(),m}}):na({name:`${u} ${l}`,op:tk(t),attributes:o},async f=>{try{s.recordInputs&&d&&nk(f,d);const m=await e.apply(r,i);return N9(f,m,s.recordOutputs),m}catch(m){throw Ct(m,{mechanism:{handled:!1,type:"auto.ai.openai",data:{function:t}}}),m}})}}function oR(e,t="",r){return new Proxy(e,{get(s,a){const i=s[a],o=u9(t,String(a));return typeof i=="function"&&c9(o)?S9(i,o,s,r):typeof i=="function"?i.bind(s):i&&typeof i=="object"?oR(i,o,r):i}})}function k9(e,t){var a;const r=!!((a=Ie())!=null&&a.getOptions().sendDefaultPii),s={recordInputs:r,recordOutputs:r,...t};return oR(e,"",s)}function E9(e,t){var r;return"type"in e&&typeof e.type=="string"&&e.type==="error"?(t.setStatus({code:vt,message:((r=e.error)==null?void 0:r.type)??"internal_error"}),Ct(e.error,{mechanism:{handled:!1,type:"auto.ai.anthropic.anthropic_error"}}),!0):!1}function C9(e,t){if(e.type==="message_delta"&&e.usage&&"output_tokens"in e.usage&&typeof e.usage.output_tokens=="number"&&(t.completionTokens=e.usage.output_tokens),e.message){const r=e.message;r.id&&(t.responseId=r.id),r.model&&(t.responseModel=r.model),r.stop_reason&&t.finishReasons.push(r.stop_reason),r.usage&&(typeof r.usage.input_tokens=="number"&&(t.promptTokens=r.usage.input_tokens),typeof r.usage.cache_creation_input_tokens=="number"&&(t.cacheCreationInputTokens=r.usage.cache_creation_input_tokens),typeof r.usage.cache_read_input_tokens=="number"&&(t.cacheReadInputTokens=r.usage.cache_read_input_tokens))}}function T9(e,t){e.type!=="content_block_start"||typeof e.index!="number"||!e.content_block||(e.content_block.type==="tool_use"||e.content_block.type==="server_tool_use")&&(t.activeToolBlocks[e.index]={id:e.content_block.id,name:e.content_block.name,inputJsonParts:[]})}function R9(e,t,r){if(!(e.type!=="content_block_delta"||!e.delta)){if(typeof e.index=="number"&&"partial_json"in e.delta&&typeof e.delta.partial_json=="string"){const s=t.activeToolBlocks[e.index];s&&s.inputJsonParts.push(e.delta.partial_json)}r&&typeof e.delta.text=="string"&&t.responseTexts.push(e.delta.text)}}function A9(e,t){if(e.type!=="content_block_stop"||typeof e.index!="number")return;const r=t.activeToolBlocks[e.index];if(!r)return;const s=r.inputJsonParts.join("");let a;try{a=s?JSON.parse(s):{}}catch{a={__unparsed:s}}t.toolCalls.push({type:"tool_use",id:r.id,name:r.name,input:a}),delete t.activeToolBlocks[e.index]}function lR(e,t,r,s){!(e&&typeof e=="object")||E9(e,s)||(C9(e,t),T9(e,t),R9(e,t,r),A9(e,t))}function P9(e,t,r){t.isRecording()&&(e.responseId&&t.setAttributes({[Xc]:e.responseId}),e.responseModel&&t.setAttributes({[Ba]:e.responseModel}),g_(t,e.promptTokens,e.completionTokens,e.cacheCreationInputTokens,e.cacheReadInputTokens),t.setAttributes({[qp]:!0}),e.finishReasons.length>0&&t.setAttributes({[Yi]:JSON.stringify(e.finishReasons)}),r&&e.responseTexts.length>0&&t.setAttributes({[ls]:e.responseTexts.join("")}),r&&e.toolCalls.length>0&&t.setAttributes({[ra]:JSON.stringify(e.toolCalls)}),t.end())}async function*O9(e,t,r){const s={responseTexts:[],finishReasons:[],responseId:"",responseModel:"",promptTokens:void 0,completionTokens:void 0,cacheCreationInputTokens:void 0,cacheReadInputTokens:void 0,toolCalls:[],activeToolBlocks:{}};try{for await(const a of e)lR(a,s,r,t),yield a}finally{s.responseId&&t.setAttributes({[Xc]:s.responseId}),s.responseModel&&t.setAttributes({[Ba]:s.responseModel}),g_(t,s.promptTokens,s.completionTokens,s.cacheCreationInputTokens,s.cacheReadInputTokens),t.setAttributes({[qp]:!0}),s.finishReasons.length>0&&t.setAttributes({[Yi]:JSON.stringify(s.finishReasons)}),r&&s.responseTexts.length>0&&t.setAttributes({[ls]:s.responseTexts.join("")}),r&&s.toolCalls.length>0&&t.setAttributes({[ra]:JSON.stringify(s.toolCalls)}),t.end()}}function I9(e,t,r){const s={responseTexts:[],finishReasons:[],responseId:"",responseModel:"",promptTokens:void 0,completionTokens:void 0,cacheCreationInputTokens:void 0,cacheReadInputTokens:void 0,toolCalls:[],activeToolBlocks:{}};return e.on("streamEvent",a=>{lR(a,s,r,t)}),e.on("message",()=>{P9(s,t,r)}),e.on("error",a=>{Ct(a,{mechanism:{handled:!1,type:"auto.ai.anthropic.stream_error"}}),t.isRecording()&&(t.setStatus({code:vt,message:"stream_error"}),t.end())}),e}const L9=["messages.create","messages.stream","messages.countTokens","models.get","completions.create","models.retrieve","beta.messages.create"];function M9(e){return L9.includes(e)}function D9(e,t){t.error&&(e.setStatus({code:vt,message:t.error.type||"internal_error"}),Ct(t.error,{mechanism:{handled:!1,type:"auto.ai.anthropic.anthropic_error"}}))}function $9(e){const{system:t,messages:r}=e,s=typeof t=="string"?[{role:"system",content:e.system}]:[],a=Array.isArray(r)?r:r!=null?[r]:[];return[...s,...a]}function q9(e,t){const r={[Ip]:"anthropic",[qi]:Yd(t),[ct]:"auto.ai.anthropic"};if(e.length>0&&typeof e[0]=="object"&&e[0]!==null){const s=e[0];s.tools&&Array.isArray(s.tools)&&(r[$p]=JSON.stringify(s.tools)),r[kr]=s.model??"unknown","temperature"in s&&(r[Lp]=s.temperature),"top_p"in s&&(r[Dp]=s.top_p),"stream"in s&&(r[f_]=s.stream),"top_k"in s&&(r[eR]=s.top_k),"frequency_penalty"in s&&(r[Mp]=s.frequency_penalty),"max_tokens"in s&&(r[m_]=s.max_tokens)}else t==="models.retrieve"||t==="models.get"?r[kr]=e[0]:r[kr]="unknown";return r}function Fv(e,t){const r=$9(t);if(r.length){const s=Qm(r);e.setAttributes({[Fi]:s})}if("input"in t){const s=Qm(t.input);e.setAttributes({[Fi]:s})}"prompt"in t&&e.setAttributes({[$B]:JSON.stringify(t.prompt)})}function F9(e,t){if("content"in t&&Array.isArray(t.content)){e.setAttributes({[ls]:t.content.map(s=>s.text).filter(s=>!!s).join("")});const r=[];for(const s of t.content)(s.type==="tool_use"||s.type==="server_tool_use")&&r.push(s);r.length>0&&e.setAttributes({[ra]:JSON.stringify(r)})}"completion"in t&&e.setAttributes({[ls]:t.completion}),"input_tokens"in t&&e.setAttributes({[ls]:JSON.stringify(t.input_tokens)})}function U9(e,t){"id"in t&&"model"in t&&(e.setAttributes({[Xc]:t.id,[Ba]:t.model}),"created"in t&&typeof t.created=="number"&&e.setAttributes({[X2]:new Date(t.created*1e3).toISOString()}),"created_at"in t&&typeof t.created_at=="number"&&e.setAttributes({[X2]:new Date(t.created_at*1e3).toISOString()}),"usage"in t&&t.usage&&g_(e,t.usage.input_tokens,t.usage.output_tokens,t.usage.cache_creation_input_tokens,t.usage.cache_read_input_tokens))}function B9(e,t,r){if(!(!t||typeof t!="object")){if("type"in t&&t.type==="error"){D9(e,t);return}r&&F9(e,t),U9(e,t)}}function rk(e,t,r){throw Ct(e,{mechanism:{handled:!1,type:"auto.ai.anthropic",data:{function:r}}}),t.isRecording()&&(t.setStatus({code:vt,message:"internal_error"}),t.end()),e}function H9(e,t,r,s,a,i,o,l,u,d,p){const f=a[kr]??"unknown",m={name:`${i} ${f} stream-response`,op:Vm(o),attributes:a};return d&&!p?ja(m,async x=>{try{u.recordInputs&&l&&Fv(x,l);const y=await e.apply(r,s);return O9(y,x,u.recordOutputs??!1)}catch(y){return rk(y,x,o)}}):ja(m,x=>{try{u.recordInputs&&l&&Fv(x,l);const y=t.apply(r,s);return I9(y,x,u.recordOutputs??!1)}catch(y){return rk(y,x,o)}})}function K9(e,t,r,s){return new Proxy(e,{apply(a,i,o){const l=q9(o,t),u=l[kr]??"unknown",d=Yd(t),p=typeof o[0]=="object"?o[0]:void 0,f=!!(p!=null&&p.stream),m=t==="messages.stream";return f||m?H9(e,a,r,o,l,d,t,p,s,f,m):na({name:`${d} ${u}`,op:Vm(t),attributes:l},x=>(s.recordInputs&&p&&Fv(x,p),Rp(()=>a.apply(r,o),y=>{Ct(y,{mechanism:{handled:!1,type:"auto.ai.anthropic",data:{function:t}}})},()=>{},y=>B9(x,y,s.recordOutputs))))}})}function cR(e,t="",r){return new Proxy(e,{get(s,a){const i=s[a],o=iR(t,String(a));return typeof i=="function"&&M9(o)?K9(i,o,s,r):typeof i=="function"?i.bind(s):i&&typeof i=="object"?cR(i,o,r):i}})}function z9(e,t){var a;const r=!!((a=Ie())!=null&&a.getOptions().sendDefaultPii),s={recordInputs:r,recordOutputs:r,...t};return cR(e,"",s)}const sk=["models.generateContent","models.generateContentStream","chats.create","sendMessage","sendMessageStream"],W9="google_genai",uR="chats.create",G9="chat";function V9(e,t){const r=e==null?void 0:e.promptFeedback;if(r!=null&&r.blockReason){const s=r.blockReasonMessage??r.blockReason;return t.setStatus({code:vt,message:`Content blocked: ${s}`}),Ct(`Content blocked: ${s}`,{mechanism:{handled:!1,type:"auto.ai.google_genai"}}),!0}return!1}function Q9(e,t){typeof e.responseId=="string"&&(t.responseId=e.responseId),typeof e.modelVersion=="string"&&(t.responseModel=e.modelVersion);const r=e.usageMetadata;r&&(typeof r.promptTokenCount=="number"&&(t.promptTokens=r.promptTokenCount),typeof r.candidatesTokenCount=="number"&&(t.completionTokens=r.candidatesTokenCount),typeof r.totalTokenCount=="number"&&(t.totalTokens=r.totalTokenCount))}function Y9(e,t,r){var s;Array.isArray(e.functionCalls)&&t.toolCalls.push(...e.functionCalls);for(const a of e.candidates??[]){a!=null&&a.finishReason&&!t.finishReasons.includes(a.finishReason)&&t.finishReasons.push(a.finishReason);for(const i of((s=a==null?void 0:a.content)==null?void 0:s.parts)??[])r&&i.text&&t.responseTexts.push(i.text),i.functionCall&&t.toolCalls.push({type:"function",id:i.functionCall.id,name:i.functionCall.name,arguments:i.functionCall.args})}}function J9(e,t,r,s){!e||V9(e,s)||(Q9(e,t),Y9(e,t,r))}async function*X9(e,t,r){const s={responseTexts:[],finishReasons:[],toolCalls:[]};try{for await(const a of e)J9(a,s,r,t),yield a}finally{const a={[qp]:!0};s.responseId&&(a[Xc]=s.responseId),s.responseModel&&(a[Ba]=s.responseModel),s.promptTokens!==void 0&&(a[Vo]=s.promptTokens),s.completionTokens!==void 0&&(a[Qo]=s.completionTokens),s.totalTokens!==void 0&&(a[Yo]=s.totalTokens),s.finishReasons.length&&(a[Yi]=JSON.stringify(s.finishReasons)),r&&s.responseTexts.length&&(a[ls]=s.responseTexts.join("")),r&&s.toolCalls.length&&(a[ra]=JSON.stringify(s.toolCalls)),t.setAttributes(a),t.end()}}function Z9(e){if(sk.includes(e))return!0;const t=e.split(".").pop();return sk.includes(t)}function eH(e){return e.includes("Stream")}function Zu(e,t="user"){return typeof e=="string"?[{role:t,content:e}]:Array.isArray(e)?e.flatMap(r=>Zu(r,t)):typeof e!="object"||!e?[]:"role"in e&&typeof e.role=="string"?[e]:"parts"in e?[{...e,role:t}]:[{role:t,content:e}]}function ak(e,t){if("model"in e&&typeof e.model=="string")return e.model;if(t&&typeof t=="object"){const r=t;if("model"in r&&typeof r.model=="string")return r.model;if("modelVersion"in r&&typeof r.modelVersion=="string")return r.modelVersion}return"unknown"}function tH(e){const t={};return"temperature"in e&&typeof e.temperature=="number"&&(t[Lp]=e.temperature),"topP"in e&&typeof e.topP=="number"&&(t[Dp]=e.topP),"topK"in e&&typeof e.topK=="number"&&(t[eR]=e.topK),"maxOutputTokens"in e&&typeof e.maxOutputTokens=="number"&&(t[m_]=e.maxOutputTokens),"frequencyPenalty"in e&&typeof e.frequencyPenalty=="number"&&(t[Mp]=e.frequencyPenalty),"presencePenalty"in e&&typeof e.presencePenalty=="number"&&(t[p_]=e.presencePenalty),t}function nH(e,t,r){const s={[Ip]:W9,[qi]:Yd(e),[ct]:"auto.ai.google_genai"};if(t){if(s[kr]=ak(t,r),"config"in t&&typeof t.config=="object"&&t.config){const a=t.config;if(Object.assign(s,tH(a)),"tools"in a&&Array.isArray(a.tools)){const i=a.tools.flatMap(o=>o.functionDeclarations);s[$p]=JSON.stringify(i)}}}else s[kr]=ak({},r);return s}function ik(e,t){const r=[];"config"in t&&t.config&&typeof t.config=="object"&&"systemInstruction"in t.config&&t.config.systemInstruction&&r.push(...Zu(t.config.systemInstruction,"system")),"history"in t&&r.push(...Zu(t.history,"user")),"contents"in t&&r.push(...Zu(t.contents,"user")),"message"in t&&r.push(...Zu(t.message,"user")),r.length&&e.setAttributes({[Fi]:JSON.stringify(Fp(r))})}function rH(e,t,r){if(!(!t||typeof t!="object")){if(t.modelVersion&&e.setAttribute(Ba,t.modelVersion),t.usageMetadata&&typeof t.usageMetadata=="object"){const s=t.usageMetadata;typeof s.promptTokenCount=="number"&&e.setAttributes({[Vo]:s.promptTokenCount}),typeof s.candidatesTokenCount=="number"&&e.setAttributes({[Qo]:s.candidatesTokenCount}),typeof s.totalTokenCount=="number"&&e.setAttributes({[Yo]:s.totalTokenCount})}if(r&&Array.isArray(t.candidates)&&t.candidates.length>0){const s=t.candidates.map(a=>{var i;return(i=a.content)!=null&&i.parts&&Array.isArray(a.content.parts)?a.content.parts.map(o=>typeof o.text=="string"?o.text:"").filter(o=>o.length>0).join(""):""}).filter(a=>a.length>0);s.length>0&&e.setAttributes({[ls]:s.join("")})}if(r&&t.functionCalls){const s=t.functionCalls;Array.isArray(s)&&s.length>0&&e.setAttributes({[ra]:JSON.stringify(s)})}}}function ok(e,t,r,s){const a=t===uR;return new Proxy(e,{apply(i,o,l){const u=l[0],d=nH(t,u,r),p=d[kr]??"unknown",f=Yd(t);return eH(t)?ja({name:`${f} ${p} stream-response`,op:Vm(t),attributes:d},async m=>{try{s.recordInputs&&u&&ik(m,u);const x=await i.apply(r,l);return X9(x,m,!!s.recordOutputs)}catch(x){throw m.setStatus({code:vt,message:"internal_error"}),Ct(x,{mechanism:{handled:!1,type:"auto.ai.google_genai",data:{function:t}}}),m.end(),x}}):na({name:a?`${f} ${p} create`:`${f} ${p}`,op:Vm(t),attributes:d},m=>(s.recordInputs&&u&&ik(m,u),Rp(()=>i.apply(r,l),x=>{Ct(x,{mechanism:{handled:!1,type:"auto.ai.google_genai",data:{function:t}}})},()=>{},x=>{a||rH(m,x,s.recordOutputs)})))}})}function Uv(e,t="",r){return new Proxy(e,{get:(s,a,i)=>{const o=Reflect.get(s,a,i),l=iR(t,String(a));if(typeof o=="function"&&Z9(l)){if(l===uR){const u=ok(o,l,s,r);return function(...p){const f=u(...p);return f&&typeof f=="object"?Uv(f,G9,r):f}}return ok(o,l,s,r)}return typeof o=="function"?o.bind(s):o&&typeof o=="object"?Uv(o,l,r):o}})}function sH(e,t){var a;const r=!!((a=Ie())!=null&&a.getOptions().sendDefaultPii),s={recordInputs:r,recordOutputs:r,...t};return Uv(e,"",s)}const ed="auto.ai.langchain",aH={human:"user",ai:"assistant",assistant:"assistant",system:"system",function:"function",tool:"tool"},_a=(e,t,r)=>{r!=null&&(e[t]=r)},qr=(e,t,r)=>{const s=Number(r);Number.isNaN(s)||(e[t]=s)};function Sr(e){if(typeof e=="string")return e;try{return JSON.stringify(e)}catch{return String(e)}}function Wu(e){const t=e.toLowerCase();return aH[t]??t}function lk(e){return e.includes("System")?"system":e.includes("Human")?"user":e.includes("AI")||e.includes("Assistant")?"assistant":e.includes("Function")?"function":e.includes("Tool")?"tool":"user"}function ck(e){if(!(!e||Array.isArray(e)))return e.invocation_params}function v_(e){return e.map(t=>{var a,i;const r=t._getType;if(typeof r=="function"){const o=r.call(t);return{role:Wu(o),content:Sr(t.content)}}const s=(a=t.constructor)==null?void 0:a.name;if(s)return{role:Wu(lk(s)),content:Sr(t.content)};if(t.type){const o=String(t.type).toLowerCase();return{role:Wu(o),content:Sr(t.content)}}if(t.role)return{role:Wu(String(t.role)),content:Sr(t.content)};if(t.lc===1&&t.kwargs){const o=t.id,l=Array.isArray(o)&&o.length>0?o[o.length-1]:"",u=typeof l=="string"?lk(l):"user";return{role:Wu(u),content:Sr((i=t.kwargs)==null?void 0:i.content)}}return{role:"user",content:Sr(t.content)}})}function iH(e,t,r){const s={},a="kwargs"in e?e.kwargs:void 0,i=(t==null?void 0:t.temperature)??(r==null?void 0:r.ls_temperature)??(a==null?void 0:a.temperature);qr(s,Lp,i);const o=(t==null?void 0:t.max_tokens)??(r==null?void 0:r.ls_max_tokens)??(a==null?void 0:a.max_tokens);qr(s,m_,o);const l=(t==null?void 0:t.top_p)??(a==null?void 0:a.top_p);qr(s,Dp,l);const u=t==null?void 0:t.frequency_penalty;qr(s,Mp,u);const d=t==null?void 0:t.presence_penalty;return qr(s,p_,d),t&&"stream"in t&&_a(s,f_,!!t.stream),s}function dR(e,t,r,s,a,i){return{[Ip]:Sr(e??"langchain"),[qi]:r,[kr]:Sr(t),[ct]:ed,...iH(s,a,i)}}function oH(e,t,r,s,a){const i=a==null?void 0:a.ls_provider,o=(s==null?void 0:s.model)??(a==null?void 0:a.ls_model_name)??"unknown",l=dR(i,o,"pipeline",e,s,a);if(r&&Array.isArray(t)&&t.length>0){const u=t.map(d=>({role:"user",content:d}));_a(l,Fi,Sr(u))}return l}function lH(e,t,r,s,a){var u;const i=(a==null?void 0:a.ls_provider)??((u=e.id)==null?void 0:u[2]),o=(s==null?void 0:s.model)??(a==null?void 0:a.ls_model_name)??"unknown",l=dR(i,o,"chat",e,s,a);if(r&&Array.isArray(t)&&t.length>0){const d=v_(t.flat()),p=Fp(d);_a(l,Fi,Sr(p))}return l}function cH(e,t){var a;const r=[],s=e.flat();for(const i of s){const o=(a=i.message)==null?void 0:a.content;if(Array.isArray(o))for(const l of o){const u=l;u.type==="tool_use"&&r.push(u)}}r.length>0&&_a(t,ra,Sr(r))}function uH(e,t){if(!e)return;const r=e.tokenUsage,s=e.usage;if(r)qr(t,Vo,r.promptTokens),qr(t,Qo,r.completionTokens),qr(t,Yo,r.totalTokens);else if(s){qr(t,Vo,s.input_tokens),qr(t,Qo,s.output_tokens);const a=Number(s.input_tokens),i=Number(s.output_tokens),o=(Number.isNaN(a)?0:a)+(Number.isNaN(i)?0:i);o>0&&qr(t,Yo,o),s.cache_creation_input_tokens!==void 0&&qr(t,HB,s.cache_creation_input_tokens),s.cache_read_input_tokens!==void 0&&qr(t,KB,s.cache_read_input_tokens)}}function dH(e,t){var d,p,f,m;if(!e)return;const r={};if(Array.isArray(e.generations)){const x=e.generations.flat().map(y=>{var g,b;return(g=y.generationInfo)!=null&&g.finish_reason?y.generationInfo.finish_reason:(b=y.generation_info)!=null&&b.finish_reason?y.generation_info.finish_reason:null}).filter(y=>typeof y=="string");if(x.length>0&&_a(r,Yi,Sr(x)),cH(e.generations,r),t){const y=e.generations.flat().map(g=>{var b;return g.text??((b=g.message)==null?void 0:b.content)}).filter(g=>typeof g=="string");y.length>0&&_a(r,ls,Sr(y))}}uH(e.llmOutput,r);const s=e.llmOutput,a=(p=(d=e.generations)==null?void 0:d[0])==null?void 0:p[0],i=a==null?void 0:a.message,o=(s==null?void 0:s.model_name)??(s==null?void 0:s.model)??((f=i==null?void 0:i.response_metadata)==null?void 0:f.model_name);o&&_a(r,Ba,o);const l=(s==null?void 0:s.id)??(i==null?void 0:i.id);l&&_a(r,Xc,l);const u=(s==null?void 0:s.stop_reason)??((m=i==null?void 0:i.response_metadata)==null?void 0:m.finish_reason);return u&&_a(r,UB,Sr(u)),r}function hH(e={}){const t=e.recordInputs??!1,r=e.recordOutputs??!1,s=new Map,a=o=>{const l=s.get(o);l!=null&&l.isRecording()&&(l.end(),s.delete(o))},i={lc_serializable:!1,lc_namespace:["langchain_core","callbacks","sentry"],lc_secrets:void 0,lc_attributes:void 0,lc_aliases:void 0,lc_serializable_keys:void 0,lc_id:["langchain_core","callbacks","sentry"],lc_kwargs:{},name:"SentryCallbackHandler",ignoreLLM:!1,ignoreChain:!1,ignoreAgent:!1,ignoreRetriever:!1,ignoreCustomEvent:!1,raiseError:!1,awaitHandlers:!0,handleLLMStart(o,l,u,d,p,f,m,x){const y=ck(f),g=oH(o,l,t,y,m),b=g[kr],_=g[qi];ja({name:`${_} ${b}`,op:"gen_ai.pipeline",attributes:{...g,[Ut]:"gen_ai.pipeline"}},w=>(s.set(u,w),w))},handleChatModelStart(o,l,u,d,p,f,m,x){const y=ck(f),g=lH(o,l,t,y,m),b=g[kr],_=g[qi];ja({name:`${_} ${b}`,op:"gen_ai.chat",attributes:{...g,[Ut]:"gen_ai.chat"}},w=>(s.set(u,w),w))},handleLLMEnd(o,l,u,d,p){const f=s.get(l);if(f!=null&&f.isRecording()){const m=dH(o,r);m&&f.setAttributes(m),a(l)}},handleLLMError(o,l){const u=s.get(l);u!=null&&u.isRecording()&&(u.setStatus({code:vt,message:"llm_error"}),a(l)),Ct(o,{mechanism:{handled:!1,type:`${ed}.llm_error_handler`}})},handleChainStart(o,l,u,d){const p=o.name||"unknown_chain",f={[ct]:"auto.ai.langchain","langchain.chain.name":p};t&&(f["langchain.chain.inputs"]=JSON.stringify(l)),ja({name:`chain ${p}`,op:"gen_ai.invoke_agent",attributes:{...f,[Ut]:"gen_ai.invoke_agent"}},m=>(s.set(u,m),m))},handleChainEnd(o,l){const u=s.get(l);u!=null&&u.isRecording()&&(r&&u.setAttributes({"langchain.chain.outputs":JSON.stringify(o)}),a(l))},handleChainError(o,l){const u=s.get(l);u!=null&&u.isRecording()&&(u.setStatus({code:vt,message:"chain_error"}),a(l)),Ct(o,{mechanism:{handled:!1,type:`${ed}.chain_error_handler`}})},handleToolStart(o,l,u,d){const p=o.name||"unknown_tool",f={[ct]:ed,"gen_ai.tool.name":p};t&&(f["gen_ai.tool.input"]=l),ja({name:`execute_tool ${p}`,op:"gen_ai.execute_tool",attributes:{...f,[Ut]:"gen_ai.execute_tool"}},m=>(s.set(u,m),m))},handleToolEnd(o,l){const u=s.get(l);u!=null&&u.isRecording()&&(r&&u.setAttributes({"gen_ai.tool.output":JSON.stringify(o)}),a(l))},handleToolError(o,l){const u=s.get(l);u!=null&&u.isRecording()&&(u.setStatus({code:vt,message:"tool_error"}),a(l)),Ct(o,{mechanism:{handled:!1,type:`${ed}.tool_error_handler`}})},copy(){return i},toJSON(){return{lc:1,type:"not_implemented",id:i.lc_id}},toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:i.lc_id}}};return i}const hR="auto.ai.langgraph";function fH(e){if(!e||e.length===0)return null;const t=[];for(const r of e)if(r&&typeof r=="object"){const s=r.tool_calls;s&&Array.isArray(s)&&t.push(...s)}return t.length>0?t:null}function mH(e){const t=e;let r=0,s=0,a=0;if(t.usage_metadata&&typeof t.usage_metadata=="object"){const i=t.usage_metadata;return typeof i.input_tokens=="number"&&(r=i.input_tokens),typeof i.output_tokens=="number"&&(s=i.output_tokens),typeof i.total_tokens=="number"&&(a=i.total_tokens),{inputTokens:r,outputTokens:s,totalTokens:a}}if(t.response_metadata&&typeof t.response_metadata=="object"){const i=t.response_metadata;if(i.tokenUsage&&typeof i.tokenUsage=="object"){const o=i.tokenUsage;typeof o.promptTokens=="number"&&(r=o.promptTokens),typeof o.completionTokens=="number"&&(s=o.completionTokens),typeof o.totalTokens=="number"&&(a=o.totalTokens)}}return{inputTokens:r,outputTokens:s,totalTokens:a}}function pH(e,t){const r=t;if(r.response_metadata&&typeof r.response_metadata=="object"){const s=r.response_metadata;s.model_name&&typeof s.model_name=="string"&&e.setAttribute(Ba,s.model_name),s.finish_reason&&typeof s.finish_reason=="string"&&e.setAttribute(Yi,[s.finish_reason])}}function xH(e){var r,s,a,i,o,l,u,d;if(!((i=(a=(s=(r=e.builder)==null?void 0:r.nodes)==null?void 0:s.tools)==null?void 0:a.runnable)!=null&&i.tools))return null;const t=(d=(u=(l=(o=e.builder)==null?void 0:o.nodes)==null?void 0:l.tools)==null?void 0:u.runnable)==null?void 0:d.tools;return!t||!Array.isArray(t)||t.length===0?null:t.map(p=>{var f,m,x;return{name:(f=p.lc_kwargs)==null?void 0:f.name,description:(m=p.lc_kwargs)==null?void 0:m.description,schema:(x=p.lc_kwargs)==null?void 0:x.schema}})}function gH(e,t,r){const s=r,a=s==null?void 0:s.messages;if(!a||!Array.isArray(a))return;const i=(t==null?void 0:t.length)??0,o=a.length>i?a.slice(i):[];if(o.length===0)return;const l=fH(o);l&&e.setAttribute(ra,JSON.stringify(l));const u=v_(o);e.setAttribute(ls,JSON.stringify(u));let d=0,p=0,f=0;for(const m of o){const x=mH(m);d+=x.inputTokens,p+=x.outputTokens,f+=x.totalTokens,pH(e,m)}d>0&&e.setAttribute(Vo,d),p>0&&e.setAttribute(Qo,p),f>0&&e.setAttribute(Yo,f)}function yH(e,t){return new Proxy(e,{apply(r,s,a){return na({op:"gen_ai.create_agent",name:"create_agent",attributes:{[ct]:hR,[Ut]:"gen_ai.create_agent",[qi]:"create_agent"}},i=>{try{const o=Reflect.apply(r,s,a),l=a.length>0?a[0]:{};l!=null&&l.name&&typeof l.name=="string"&&(i.setAttribute(tR,l.name),i.updateName(`create_agent ${l.name}`));const u=o.invoke;return u&&typeof u=="function"&&(o.invoke=bH(u.bind(o),o,l,t)),o}catch(o){throw i.setStatus({code:vt,message:"internal_error"}),Ct(o,{mechanism:{handled:!1,type:"auto.ai.langgraph.error"}}),o}})}})}function bH(e,t,r,s){return new Proxy(e,{apply(a,i,o){return na({op:"gen_ai.invoke_agent",name:"invoke_agent",attributes:{[ct]:hR,[Ut]:zB,[qi]:"invoke_agent"}},async l=>{try{const u=r==null?void 0:r.name;u&&typeof u=="string"&&(l.setAttribute(BB,u),l.setAttribute(tR,u),l.updateName(`invoke_agent ${u}`));const d=xH(t);d&&l.setAttribute($p,JSON.stringify(d));const p=s.recordInputs,f=s.recordOutputs,m=o.length>0?o[0].messages??[]:[];if(m&&p){const y=v_(m),g=Fp(y);l.setAttribute(Fi,JSON.stringify(g))}const x=await Reflect.apply(a,i,o);return f&&gH(l,m??null,x),x}catch(u){throw l.setStatus({code:vt,message:"internal_error"}),Ct(u,{mechanism:{handled:!1,type:"auto.ai.langgraph.error"}}),u}})}})}function vH(e,t){const r=t||{};return e.compile=yH(e.compile.bind(e),r),e}function fR(e){if(e!==void 0)return e>=400&&e<500?"warning":e>=500?"error":void 0}const Cc=Xe;function wH(){return"history"in Cc&&!!Cc.history}function _H(){if(!("fetch"in Cc))return!1;try{return new Headers,new Request("data:,"),new Response,!0}catch{return!1}}function Bv(e){return e&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function mR(){var r;if(typeof EdgeRuntime=="string")return!0;if(!_H())return!1;if(Bv(Cc.fetch))return!0;let e=!1;const t=Cc.document;if(t&&typeof t.createElement=="function")try{const s=t.createElement("iframe");s.hidden=!0,t.head.appendChild(s),(r=s.contentWindow)!=null&&r.fetch&&(e=Bv(s.contentWindow.fetch)),t.head.removeChild(s)}catch(s){Pe&&ce.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",s)}return e}function jH(){return"ReportingObserver"in Cc}function w_(e,t){const r="fetch";Wi(r,e),Gi(r,()=>pR(void 0,t))}function NH(e){const t="fetch-body-resolved";Wi(t,e),Gi(t,()=>pR(kH))}function pR(e,t=!1){t&&!mR()||Kn(Xe,"fetch",function(r){return function(...s){const a=new Error,{method:i,url:o}=EH(s),l={args:s,fetchData:{method:i,url:o},startTimestamp:Jt()*1e3,virtualError:a,headers:CH(s)};return e||as("fetch",{...l}),r.apply(Xe,s).then(async u=>(e?e(u):as("fetch",{...l,endTimestamp:Jt()*1e3,response:u}),u),u=>{if(as("fetch",{...l,endTimestamp:Jt()*1e3,error:u}),Ea(u)&&u.stack===void 0&&(u.stack=a.stack,In(u,"framesToPop",1)),u instanceof TypeError&&(u.message==="Failed to fetch"||u.message==="Load failed"||u.message==="NetworkError when attempting to fetch resource."))try{const d=new URL(l.fetchData.url);u.message=`${u.message} (${d.host})`}catch{}throw u})}})}async function SH(e,t){if(e!=null&&e.body){const r=e.body,s=r.getReader(),a=setTimeout(()=>{r.cancel().then(null,()=>{})},90*1e3);let i=!0;for(;i;){let o;try{o=setTimeout(()=>{r.cancel().then(null,()=>{})},5e3);const{done:l}=await s.read();clearTimeout(o),l&&(t(),i=!1)}catch{i=!1}finally{clearTimeout(o)}}clearTimeout(a),s.releaseLock(),r.cancel().then(null,()=>{})}}function kH(e){let t;try{t=e.clone()}catch{return}SH(t,()=>{as("fetch-body-resolved",{endTimestamp:Jt()*1e3,response:e})})}function dm(e,t){return!!e&&typeof e=="object"&&!!e[t]}function uk(e){return typeof e=="string"?e:e?dm(e,"url")?e.url:e.toString?e.toString():"":""}function EH(e){if(e.length===0)return{method:"GET",url:""};if(e.length===2){const[r,s]=e;return{url:uk(r),method:dm(s,"method")?String(s.method).toUpperCase():Bw(r)&&dm(r,"method")?String(r.method).toUpperCase():"GET"}}const t=e[0];return{url:uk(t),method:dm(t,"method")?String(t.method).toUpperCase():"GET"}}function CH(e){const[t,r]=e;try{if(typeof r=="object"&&r!==null&&"headers"in r&&r.headers)return new Headers(r.headers);if(Bw(t))return new Headers(t.headers)}catch{}}function TH(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}function RH(){return"npm"}function AH(){return!TH()&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function Ym(){return typeof window<"u"&&(!AH()||PH())}function PH(){const e=Xe.process;return(e==null?void 0:e.type)==="renderer"}const As=Xe,qt=As.document,td=As.navigator,xR="Report a Bug",OH="Cancel",IH="Send Bug Report",LH="Confirm",MH="Report a Bug",DH="your.email@example.org",$H="Email",qH="What's the bug? What did you expect?",FH="Description",UH="Your Name",BH="Name",HH="Thank you for your report!",KH="(required)",zH="Add a screenshot",WH="Remove screenshot",GH="Highlight",VH="Hide",QH="Remove",YH="widget",JH="api",XH=5e3,gR=(e,t={includeReplay:!0})=>{if(!e.message)throw new Error("Unable to submit feedback with empty message");const r=Ie();if(!r)throw new Error("No client setup, cannot send feedback.");e.tags&&Object.keys(e.tags).length&&lt().setTags(e.tags);const s=X3({source:JH,url:rl(),...e},t);return new Promise((a,i)=>{const o=setTimeout(()=>i("Unable to determine if Feedback was correctly sent."),3e4),l=r.on("afterSendEvent",(u,d)=>{if(u.event_id===s)return clearTimeout(o),l(),d!=null&&d.statusCode&&d.statusCode>=200&&d.statusCode<300?a(s):(d==null?void 0:d.statusCode)===403?i("Unable to send feedback. This could be because this domain is not in your list of allowed domains."):i("Unable to send feedback. This could be because of network issues, or because you are using an ad-blocker.")})})},hm=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function ZH(){return!(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(td.userAgent)||/Macintosh/i.test(td.userAgent)&&td.maxTouchPoints&&td.maxTouchPoints>1||!isSecureContext)}function Mf(e,t){return{...e,...t,tags:{...e.tags,...t.tags},onFormOpen:()=>{var r,s;(r=t.onFormOpen)==null||r.call(t),(s=e.onFormOpen)==null||s.call(e)},onFormClose:()=>{var r,s;(r=t.onFormClose)==null||r.call(t),(s=e.onFormClose)==null||s.call(e)},onSubmitSuccess:(r,s)=>{var a,i;(a=t.onSubmitSuccess)==null||a.call(t,r,s),(i=e.onSubmitSuccess)==null||i.call(e,r,s)},onSubmitError:r=>{var s,a;(s=t.onSubmitError)==null||s.call(t,r),(a=e.onSubmitError)==null||a.call(e,r)},onFormSubmitted:()=>{var r,s;(r=t.onFormSubmitted)==null||r.call(t),(s=e.onFormSubmitted)==null||s.call(e)},themeDark:{...e.themeDark,...t.themeDark},themeLight:{...e.themeLight,...t.themeLight}}}function eK(e){const t=qt.createElement("style");return t.textContent=`
.widget__actor {
  position: fixed;
  z-index: var(--z-index);
  margin: var(--page-margin);
  inset: var(--actor-inset);

  display: flex;
  align-items: center;
  gap: 8px;
  padding: 16px;

  font-family: inherit;
  font-size: var(--font-size);
  font-weight: 600;
  line-height: 1.14em;
  text-decoration: none;

  background: var(--actor-background, var(--background));
  border-radius: var(--actor-border-radius, 1.7em/50%);
  border: var(--actor-border, var(--border));
  box-shadow: var(--actor-box-shadow, var(--box-shadow));
  color: var(--actor-color, var(--foreground));
  fill: var(--actor-color, var(--foreground));
  cursor: pointer;
  opacity: 1;
  transition: transform 0.2s ease-in-out;
  transform: translate(0, 0) scale(1);
}
.widget__actor[aria-hidden="true"] {
  opacity: 0;
  pointer-events: none;
  visibility: hidden;
  transform: translate(0, 16px) scale(0.98);
}

.widget__actor:hover {
  background: var(--actor-hover-background, var(--background));
  filter: var(--interactive-filter);
}

.widget__actor svg {
  width: 1.14em;
  height: 1.14em;
}

@media (max-width: 600px) {
  .widget__actor span {
    display: none;
  }
}
`,e&&t.setAttribute("nonce",e),t}function Br(e,t){return Object.entries(t).forEach(([r,s])=>{e.setAttributeNS(null,r,s)}),e}const ql=20,tK="http://www.w3.org/2000/svg";function nK(){const e=l=>As.document.createElementNS(tK,l),t=Br(e("svg"),{width:`${ql}`,height:`${ql}`,viewBox:`0 0 ${ql} ${ql}`,fill:"var(--actor-color, var(--foreground))"}),r=Br(e("g"),{clipPath:"url(#clip0_57_80)"}),s=Br(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.6622 15H12.3997C12.2129 14.9959 12.031 14.9396 11.8747 14.8375L8.04965 12.2H7.49956V19.1C7.4875 19.3348 7.3888 19.5568 7.22256 19.723C7.05632 19.8892 6.83435 19.9879 6.59956 20H2.04956C1.80193 19.9968 1.56535 19.8969 1.39023 19.7218C1.21511 19.5467 1.1153 19.3101 1.11206 19.0625V12.2H0.949652C0.824431 12.2017 0.700142 12.1783 0.584123 12.1311C0.468104 12.084 0.362708 12.014 0.274155 11.9255C0.185602 11.8369 0.115689 11.7315 0.0685419 11.6155C0.0213952 11.4995 -0.00202913 11.3752 -0.00034808 11.25V3.75C-0.00900498 3.62067 0.0092504 3.49095 0.0532651 3.36904C0.0972798 3.24712 0.166097 3.13566 0.255372 3.04168C0.344646 2.94771 0.452437 2.87327 0.571937 2.82307C0.691437 2.77286 0.82005 2.74798 0.949652 2.75H8.04965L11.8747 0.1625C12.031 0.0603649 12.2129 0.00407221 12.3997 0H15.6622C15.9098 0.00323746 16.1464 0.103049 16.3215 0.278167C16.4966 0.453286 16.5964 0.689866 16.5997 0.9375V3.25269C17.3969 3.42959 18.1345 3.83026 18.7211 4.41679C19.5322 5.22788 19.9878 6.32796 19.9878 7.47502C19.9878 8.62209 19.5322 9.72217 18.7211 10.5333C18.1345 11.1198 17.3969 11.5205 16.5997 11.6974V14.0125C16.6047 14.1393 16.5842 14.2659 16.5395 14.3847C16.4948 14.5035 16.4268 14.6121 16.3394 14.7042C16.252 14.7962 16.147 14.8698 16.0307 14.9206C15.9144 14.9714 15.7891 14.9984 15.6622 15ZM1.89695 10.325H1.88715V4.625H8.33715C8.52423 4.62301 8.70666 4.56654 8.86215 4.4625L12.6872 1.875H14.7247V13.125H12.6872L8.86215 10.4875C8.70666 10.3835 8.52423 10.327 8.33715 10.325H2.20217C2.15205 10.3167 2.10102 10.3125 2.04956 10.3125C1.9981 10.3125 1.94708 10.3167 1.89695 10.325ZM2.98706 12.2V18.1625H5.66206V12.2H2.98706ZM16.5997 9.93612V5.01393C16.6536 5.02355 16.7072 5.03495 16.7605 5.04814C17.1202 5.13709 17.4556 5.30487 17.7425 5.53934C18.0293 5.77381 18.2605 6.06912 18.4192 6.40389C18.578 6.73866 18.6603 7.10452 18.6603 7.47502C18.6603 7.84552 18.578 8.21139 18.4192 8.54616C18.2605 8.88093 18.0293 9.17624 17.7425 9.41071C17.4556 9.64518 17.1202 9.81296 16.7605 9.90191C16.7072 9.91509 16.6536 9.9265 16.5997 9.93612Z"});t.appendChild(r).appendChild(s);const a=e("defs"),i=Br(e("clipPath"),{id:"clip0_57_80"}),o=Br(e("rect"),{width:`${ql}`,height:`${ql}`,fill:"white"});return i.appendChild(o),a.appendChild(i),t.appendChild(a).appendChild(i).appendChild(o),t}function rK({triggerLabel:e,triggerAriaLabel:t,shadow:r,styleNonce:s}){const a=qt.createElement("button");if(a.type="button",a.className="widget__actor",a.ariaHidden="false",a.ariaLabel=t||e||xR,a.appendChild(nK()),e){const o=qt.createElement("span");o.appendChild(qt.createTextNode(e)),a.appendChild(o)}const i=eK(s);return{el:a,appendToDom(){r.appendChild(i),r.appendChild(a)},removeFromDom(){a.remove(),i.remove()},show(){a.ariaHidden="false"},hide(){a.ariaHidden="true"}}}const yR="rgba(88, 74, 192, 1)",sK={foreground:"#2b2233",background:"#ffffff",accentForeground:"white",accentBackground:yR,successColor:"#268d75",errorColor:"#df3338",border:"1.5px solid rgba(41, 35, 47, 0.13)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(95%)"},dk={foreground:"#ebe6ef",background:"#29232f",accentForeground:"white",accentBackground:yR,successColor:"#2da98c",errorColor:"#f55459",border:"1.5px solid rgba(235, 230, 239, 0.15)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(150%)"};function hk(e){return`
  --foreground: ${e.foreground};
  --background: ${e.background};
  --accent-foreground: ${e.accentForeground};
  --accent-background: ${e.accentBackground};
  --success-color: ${e.successColor};
  --error-color: ${e.errorColor};
  --border: ${e.border};
  --box-shadow: ${e.boxShadow};
  --outline: ${e.outline};
  --interactive-filter: ${e.interactiveFilter};
  `}function aK({colorScheme:e,themeDark:t,themeLight:r,styleNonce:s}){const a=qt.createElement("style");return a.textContent=`
:host {
  --font-family: system-ui, 'Helvetica Neue', Arial, sans-serif;
  --font-size: 14px;
  --z-index: 100000;

  --page-margin: 16px;
  --inset: auto 0 0 auto;
  --actor-inset: var(--inset);

  font-family: var(--font-family);
  font-size: var(--font-size);

  ${e!=="system"?"color-scheme: only light;":""}

  ${hk(e==="dark"?{...dk,...t}:{...sK,...r})}
}

${e==="system"?`
@media (prefers-color-scheme: dark) {
  :host {
    ${hk({...dk,...t})}
  }
}`:""}
}
`,s&&a.setAttribute("nonce",s),a}const bR=({lazyLoadIntegration:e,getModalIntegration:t,getScreenshotIntegration:r})=>(({id:a="sentry-feedback",autoInject:i=!0,showBranding:o=!0,isEmailRequired:l=!1,isNameRequired:u=!1,showEmail:d=!0,showName:p=!0,enableScreenshot:f=!0,useSentryUser:m={email:"email",name:"username"},tags:x,styleNonce:y,scriptNonce:g,colorScheme:b="system",themeLight:_={},themeDark:w={},addScreenshotButtonLabel:S=zH,cancelButtonLabel:j=OH,confirmButtonLabel:N=LH,emailLabel:C=$H,emailPlaceholder:E=DH,formTitle:T=MH,isRequiredLabel:I=KH,messageLabel:A=FH,messagePlaceholder:R=qH,nameLabel:O=BH,namePlaceholder:M=UH,removeScreenshotButtonLabel:B=WH,submitButtonLabel:U=IH,successMessageText:Y=HH,triggerLabel:W=xR,triggerAriaLabel:K="",highlightToolText:F=GH,hideToolText:H=VH,removeHighlightText:L=QH,onFormOpen:q,onFormClose:z,onSubmitSuccess:Q,onSubmitError:J,onFormSubmitted:V}={})=>{const ee={id:a,autoInject:i,showBranding:o,isEmailRequired:l,isNameRequired:u,showEmail:d,showName:p,enableScreenshot:f,useSentryUser:m,tags:x,styleNonce:y,scriptNonce:g,colorScheme:b,themeDark:w,themeLight:_,triggerLabel:W,triggerAriaLabel:K,cancelButtonLabel:j,submitButtonLabel:U,confirmButtonLabel:N,formTitle:T,emailLabel:C,emailPlaceholder:E,messageLabel:A,messagePlaceholder:R,nameLabel:O,namePlaceholder:M,successMessageText:Y,isRequiredLabel:I,addScreenshotButtonLabel:S,removeScreenshotButtonLabel:B,highlightToolText:F,hideToolText:H,removeHighlightText:L,onFormClose:z,onFormOpen:q,onSubmitError:J,onSubmitSuccess:Q,onFormSubmitted:V};let te=null,oe=[];const he=Ne=>{if(!te){const Be=qt.createElement("div");Be.id=String(Ne.id),qt.body.appendChild(Be),te=Be.attachShadow({mode:"open"}),te.appendChild(aK(Ne))}return te},Ce=async Ne=>{const Be=Ne.enableScreenshot&&ZH();let St,ut;try{St=(t?t():await e("feedbackModalIntegration",g))(),Lv(St)}catch{throw hm&&ce.error("[Feedback] Error when trying to load feedback integrations. Try using `feedbackSyncIntegration` in your `Sentry.init`."),new Error("[Feedback] Missing feedback modal integration!")}try{const xe=Be?r?r():await e("feedbackScreenshotIntegration",g):void 0;xe&&(ut=xe(),Lv(ut))}catch{hm&&ce.error("[Feedback] Missing feedback screenshot integration. Proceeding without screenshots.")}const fe=St.createDialog({options:{...Ne,onFormClose:()=>{var xe;fe==null||fe.close(),(xe=Ne.onFormClose)==null||xe.call(Ne)},onFormSubmitted:()=>{var xe;fe==null||fe.close(),(xe=Ne.onFormSubmitted)==null||xe.call(Ne)}},screenshotIntegration:ut,sendFeedback:gR,shadow:he(Ne)});return fe},Fe=(Ne,Be={})=>{const St=Mf(ee,Be),ut=typeof Ne=="string"?qt.querySelector(Ne):typeof Ne.addEventListener=="function"?Ne:null;if(!ut)throw hm&&ce.error("[Feedback] Unable to attach to target element"),new Error("Unable to attach to target element");let fe=null;const xe=async()=>{fe||(fe=await Ce({...St,onFormSubmitted:()=>{var Se;fe==null||fe.removeFromDom(),(Se=St.onFormSubmitted)==null||Se.call(St)}})),fe.appendToDom(),fe.open()};ut.addEventListener("click",xe);const ye=()=>{oe=oe.filter(Se=>Se!==ye),fe==null||fe.removeFromDom(),fe=null,ut.removeEventListener("click",xe)};return oe.push(ye),ye},Ae=(Ne={})=>{const Be=Mf(ee,Ne),St=he(Be),ut=rK({triggerLabel:Be.triggerLabel,triggerAriaLabel:Be.triggerAriaLabel,shadow:St,styleNonce:y});return Fe(ut.el,{...Be,onFormOpen(){ut.hide()},onFormClose(){ut.show()},onFormSubmitted(){ut.show()}}),ut};return{name:"Feedback",setupOnce(){!Ym()||!ee.autoInject||(qt.readyState==="loading"?qt.addEventListener("DOMContentLoaded",()=>Ae().appendToDom()):Ae().appendToDom())},attachTo:Fe,createWidget(Ne={}){const Be=Ae(Mf(ee,Ne));return Be.appendToDom(),Be},async createForm(Ne={}){return Ce(Mf(ee,Ne))},remove(){var Ne;te&&((Ne=te.parentElement)==null||Ne.remove(),te=null),oe.forEach(Be=>Be()),oe=[]}}});function iK(){const e=Ie();return e==null?void 0:e.getIntegrationByName("Feedback")}var Bp,Bt,vR,bo,fk,wR,Hv,Nd={},__=[],oK=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,j_=Array.isArray;function Ti(e,t){for(var r in t)e[r]=t[r];return e}function _R(e){var t=e.parentNode;t&&t.removeChild(e)}function pt(e,t,r){var s,a,i,o={};for(i in t)i=="key"?s=t[i]:i=="ref"?a=t[i]:o[i]=t[i];if(arguments.length>2&&(o.children=arguments.length>3?Bp.call(arguments,2):r),typeof e=="function"&&e.defaultProps!=null)for(i in e.defaultProps)o[i]===void 0&&(o[i]=e.defaultProps[i]);return fm(e,o,s,a,null)}function fm(e,t,r,s,a){var i={type:e,props:t,key:r,ref:s,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:a??++vR,__i:-1,__u:0};return a==null&&Bt.vnode!=null&&Bt.vnode(i),i}function Jd(e){return e.children}function mm(e,t){this.props=e,this.context=t}function Tc(e,t){if(t==null)return e.__?Tc(e.__,e.__i+1):null;for(var r;t<e.__k.length;t++)if((r=e.__k[t])!=null&&r.__e!=null)return r.__e;return typeof e.type=="function"?Tc(e):null}function lK(e,t,r){var s,a=e.__v,i=a.__e,o=e.__P;if(o)return(s=Ti({},a)).__v=a.__v+1,Bt.vnode&&Bt.vnode(s),N_(o,s,a,e.__n,o.ownerSVGElement!==void 0,32&a.__u?[i]:null,t,i??Tc(a),!!(32&a.__u),r),s.__.__k[s.__i]=s,s.__d=void 0,s.__e!=i&&jR(s),s}function jR(e){var t,r;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((r=e.__k[t])!=null&&r.__e!=null){e.__e=e.__c.base=r.__e;break}return jR(e)}}function mk(e){(!e.__d&&(e.__d=!0)&&bo.push(e)&&!Jm.__r++||fk!==Bt.debounceRendering)&&((fk=Bt.debounceRendering)||wR)(Jm)}function Jm(){var e,t,r,s=[],a=[];for(bo.sort(Hv);e=bo.shift();)e.__d&&(r=bo.length,t=lK(e,s,a)||t,r===0||bo.length>r?(Kv(s,t,a),a.length=s.length=0,t=void 0,bo.sort(Hv)):t&&Bt.__c&&Bt.__c(t,__));t&&Kv(s,t,a),Jm.__r=0}function NR(e,t,r,s,a,i,o,l,u,d,p){var f,m,x,y,g,b=s&&s.__k||__,_=t.length;for(r.__d=u,cK(r,t,b),u=r.__d,f=0;f<_;f++)(x=r.__k[f])!=null&&typeof x!="boolean"&&typeof x!="function"&&(m=x.__i===-1?Nd:b[x.__i]||Nd,x.__i=f,N_(e,x,m,a,i,o,l,u,d,p),y=x.__e,x.ref&&m.ref!=x.ref&&(m.ref&&S_(m.ref,null,x),p.push(x.ref,x.__c||y,x)),g==null&&y!=null&&(g=y),65536&x.__u||m.__k===x.__k?u=SR(x,u,e):typeof x.type=="function"&&x.__d!==void 0?u=x.__d:y&&(u=y.nextSibling),x.__d=void 0,x.__u&=-196609);r.__d=u,r.__e=g}function cK(e,t,r){var s,a,i,o,l,u=t.length,d=r.length,p=d,f=0;for(e.__k=[],s=0;s<u;s++)(a=e.__k[s]=(a=t[s])==null||typeof a=="boolean"||typeof a=="function"?null:typeof a=="string"||typeof a=="number"||typeof a=="bigint"||a.constructor==String?fm(null,a,null,null,a):j_(a)?fm(Jd,{children:a},null,null,null):a.constructor===void 0&&a.__b>0?fm(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):a)!=null?(a.__=e,a.__b=e.__b+1,l=uK(a,r,o=s+f,p),a.__i=l,i=null,l!==-1&&(p--,(i=r[l])&&(i.__u|=131072)),i==null||i.__v===null?(l==-1&&f--,typeof a.type!="function"&&(a.__u|=65536)):l!==o&&(l===o+1?f++:l>o?p>u-o?f+=l-o:f--:f=l<o&&l==o-1?l-o:0,l!==s+f&&(a.__u|=65536))):(i=r[s])&&i.key==null&&i.__e&&(i.__e==e.__d&&(e.__d=Tc(i)),zv(i,i,!1),r[s]=null,p--);if(p)for(s=0;s<d;s++)(i=r[s])!=null&&(131072&i.__u)==0&&(i.__e==e.__d&&(e.__d=Tc(i)),zv(i,i))}function SR(e,t,r){var s,a;if(typeof e.type=="function"){for(s=e.__k,a=0;s&&a<s.length;a++)s[a]&&(s[a].__=e,t=SR(s[a],t,r));return t}e.__e!=t&&(r.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType===8);return t}function uK(e,t,r,s){var a=e.key,i=e.type,o=r-1,l=r+1,u=t[r];if(u===null||u&&a==u.key&&i===u.type)return r;if(s>(u!=null&&(131072&u.__u)==0?1:0))for(;o>=0||l<t.length;){if(o>=0){if((u=t[o])&&(131072&u.__u)==0&&a==u.key&&i===u.type)return o;o--}if(l<t.length){if((u=t[l])&&(131072&u.__u)==0&&a==u.key&&i===u.type)return l;l++}}return-1}function pk(e,t,r){t[0]==="-"?e.setProperty(t,r??""):e[t]=r==null?"":typeof r!="number"||oK.test(t)?r:r+"px"}function Df(e,t,r,s,a){var i;e:if(t==="style")if(typeof r=="string")e.style.cssText=r;else{if(typeof s=="string"&&(e.style.cssText=s=""),s)for(t in s)r&&t in r||pk(e.style,t,"");if(r)for(t in r)s&&r[t]===s[t]||pk(e.style,t,r[t])}else if(t[0]==="o"&&t[1]==="n")i=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=r,r?s?r.u=s.u:(r.u=Date.now(),e.addEventListener(t,i?gk:xk,i)):e.removeEventListener(t,i?gk:xk,i);else{if(a)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!=="width"&&t!=="height"&&t!=="href"&&t!=="list"&&t!=="form"&&t!=="tabIndex"&&t!=="download"&&t!=="rowSpan"&&t!=="colSpan"&&t!=="role"&&t in e)try{e[t]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&t[4]!=="-"?e.removeAttribute(t):e.setAttribute(t,r))}}function xk(e){if(this.l){var t=this.l[e.type+!1];if(e.t){if(e.t<=t.u)return}else e.t=Date.now();return t(Bt.event?Bt.event(e):e)}}function gk(e){if(this.l)return this.l[e.type+!0](Bt.event?Bt.event(e):e)}function N_(e,t,r,s,a,i,o,l,u,d){var p,f,m,x,y,g,b,_,w,S,j,N,C,E,T,I=t.type;if(t.constructor!==void 0)return null;128&r.__u&&(u=!!(32&r.__u),i=[l=t.__e=r.__e]),(p=Bt.__b)&&p(t);e:if(typeof I=="function")try{if(_=t.props,w=(p=I.contextType)&&s[p.__c],S=p?w?w.props.value:p.__:s,r.__c?b=(f=t.__c=r.__c).__=f.__E:("prototype"in I&&I.prototype.render?t.__c=f=new I(_,S):(t.__c=f=new mm(_,S),f.constructor=I,f.render=hK),w&&w.sub(f),f.props=_,f.state||(f.state={}),f.context=S,f.__n=s,m=f.__d=!0,f.__h=[],f._sb=[]),f.__s==null&&(f.__s=f.state),I.getDerivedStateFromProps!=null&&(f.__s==f.state&&(f.__s=Ti({},f.__s)),Ti(f.__s,I.getDerivedStateFromProps(_,f.__s))),x=f.props,y=f.state,f.__v=t,m)I.getDerivedStateFromProps==null&&f.componentWillMount!=null&&f.componentWillMount(),f.componentDidMount!=null&&f.__h.push(f.componentDidMount);else{if(I.getDerivedStateFromProps==null&&_!==x&&f.componentWillReceiveProps!=null&&f.componentWillReceiveProps(_,S),!f.__e&&(f.shouldComponentUpdate!=null&&f.shouldComponentUpdate(_,f.__s,S)===!1||t.__v===r.__v)){for(t.__v!==r.__v&&(f.props=_,f.state=f.__s,f.__d=!1),t.__e=r.__e,t.__k=r.__k,t.__k.forEach(function(A){A&&(A.__=t)}),j=0;j<f._sb.length;j++)f.__h.push(f._sb[j]);f._sb=[],f.__h.length&&o.push(f);break e}f.componentWillUpdate!=null&&f.componentWillUpdate(_,f.__s,S),f.componentDidUpdate!=null&&f.__h.push(function(){f.componentDidUpdate(x,y,g)})}if(f.context=S,f.props=_,f.__P=e,f.__e=!1,N=Bt.__r,C=0,"prototype"in I&&I.prototype.render){for(f.state=f.__s,f.__d=!1,N&&N(t),p=f.render(f.props,f.state,f.context),E=0;E<f._sb.length;E++)f.__h.push(f._sb[E]);f._sb=[]}else do f.__d=!1,N&&N(t),p=f.render(f.props,f.state,f.context),f.state=f.__s;while(f.__d&&++C<25);f.state=f.__s,f.getChildContext!=null&&(s=Ti(Ti({},s),f.getChildContext())),m||f.getSnapshotBeforeUpdate==null||(g=f.getSnapshotBeforeUpdate(x,y)),NR(e,j_(T=p!=null&&p.type===Jd&&p.key==null?p.props.children:p)?T:[T],t,r,s,a,i,o,l,u,d),f.base=t.__e,t.__u&=-161,f.__h.length&&o.push(f),b&&(f.__E=f.__=null)}catch(A){t.__v=null,u||i!=null?(t.__e=l,t.__u|=u?160:32,i[i.indexOf(l)]=null):(t.__e=r.__e,t.__k=r.__k),Bt.__e(A,t,r)}else i==null&&t.__v===r.__v?(t.__k=r.__k,t.__e=r.__e):t.__e=dK(r.__e,t,r,s,a,i,o,u,d);(p=Bt.diffed)&&p(t)}function Kv(e,t,r){for(var s=0;s<r.length;s++)S_(r[s],r[++s],r[++s]);Bt.__c&&Bt.__c(t,e),e.some(function(a){try{e=a.__h,a.__h=[],e.some(function(i){i.call(a)})}catch(i){Bt.__e(i,a.__v)}})}function dK(e,t,r,s,a,i,o,l,u){var d,p,f,m,x,y,g,b=r.props,_=t.props,w=t.type;if(w==="svg"&&(a=!0),i!=null){for(d=0;d<i.length;d++)if((x=i[d])&&"setAttribute"in x==!!w&&(w?x.localName===w:x.nodeType===3)){e=x,i[d]=null;break}}if(e==null){if(w===null)return document.createTextNode(_);e=a?document.createElementNS("http://www.w3.org/2000/svg",w):document.createElement(w,_.is&&_),i=null,l=!1}if(w===null)b===_||l&&e.data===_||(e.data=_);else{if(i=i&&Bp.call(e.childNodes),b=r.props||Nd,!l&&i!=null)for(b={},d=0;d<e.attributes.length;d++)b[(x=e.attributes[d]).name]=x.value;for(d in b)x=b[d],d=="children"||(d=="dangerouslySetInnerHTML"?f=x:d==="key"||d in _||Df(e,d,null,x,a));for(d in _)x=_[d],d=="children"?m=x:d=="dangerouslySetInnerHTML"?p=x:d=="value"?y=x:d=="checked"?g=x:d==="key"||l&&typeof x!="function"||b[d]===x||Df(e,d,x,b[d],a);if(p)l||f&&(p.__html===f.__html||p.__html===e.innerHTML)||(e.innerHTML=p.__html),t.__k=[];else if(f&&(e.innerHTML=""),NR(e,j_(m)?m:[m],t,r,s,a&&w!=="foreignObject",i,o,i?i[0]:r.__k&&Tc(r,0),l,u),i!=null)for(d=i.length;d--;)i[d]!=null&&_R(i[d]);l||(d="value",y!==void 0&&(y!==e[d]||w==="progress"&&!y||w==="option"&&y!==b[d])&&Df(e,d,y,b[d],!1),d="checked",g!==void 0&&g!==e[d]&&Df(e,d,g,b[d],!1))}return e}function S_(e,t,r){try{typeof e=="function"?e(t):e.current=t}catch(s){Bt.__e(s,r)}}function zv(e,t,r){var s,a;if(Bt.unmount&&Bt.unmount(e),(s=e.ref)&&(s.current&&s.current!==e.__e||S_(s,null,t)),(s=e.__c)!=null){if(s.componentWillUnmount)try{s.componentWillUnmount()}catch(i){Bt.__e(i,t)}s.base=s.__P=null,e.__c=void 0}if(s=e.__k)for(a=0;a<s.length;a++)s[a]&&zv(s[a],t,r||typeof e.type!="function");r||e.__e==null||_R(e.__e),e.__=e.__e=e.__d=void 0}function hK(e,t,r){return this.constructor(e,r)}function fK(e,t,r){var s,a,i,o;Bt.__&&Bt.__(e,t),a=(s=!1)?null:t.__k,i=[],o=[],N_(t,e=t.__k=pt(Jd,null,[e]),a||Nd,Nd,t.ownerSVGElement!==void 0,a?null:t.firstChild?Bp.call(t.childNodes):null,i,a?a.__e:t.firstChild,s,o),e.__d=void 0,Kv(i,e,o)}Bp=__.slice,Bt={__e:function(e,t,r,s){for(var a,i,o;t=t.__;)if((a=t.__c)&&!a.__)try{if((i=a.constructor)&&i.getDerivedStateFromError!=null&&(a.setState(i.getDerivedStateFromError(e)),o=a.__d),a.componentDidCatch!=null&&(a.componentDidCatch(e,s||{}),o=a.__d),o)return a.__E=a}catch(l){e=l}throw e}},vR=0,mm.prototype.setState=function(e,t){var r;r=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Ti({},this.state),typeof e=="function"&&(e=e(Ti({},r),this.props)),e&&Ti(r,e),e!=null&&this.__v&&(t&&this._sb.push(t),mk(this))},mm.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),mk(this))},mm.prototype.render=Jd,bo=[],wR=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Hv=function(e,t){return e.__v.__b-t.__v.__b},Jm.__r=0;var $a,Ft,q0,yk,Rc=0,kR=[],pm=[],un=Bt,bk=un.__b,vk=un.__r,wk=un.diffed,_k=un.__c,jk=un.unmount,Nk=un.__;function al(e,t){un.__h&&un.__h(Ft,e,Rc||t),Rc=0;var r=Ft.__H||(Ft.__H={__:[],__h:[]});return e>=r.__.length&&r.__.push({__V:pm}),r.__[e]}function No(e){return Rc=1,ER(TR,e)}function ER(e,t,r){var s=al($a++,2);if(s.t=e,!s.__c&&(s.__=[r?r(t):TR(void 0,t),function(l){var u=s.__N?s.__N[0]:s.__[0],d=s.t(u,l);u!==d&&(s.__N=[d,s.__[1]],s.__c.setState({}))}],s.__c=Ft,!Ft.u)){var a=function(l,u,d){if(!s.__c.__H)return!0;var p=s.__c.__H.__.filter(function(m){return!!m.__c});if(p.every(function(m){return!m.__N}))return!i||i.call(this,l,u,d);var f=!1;return p.forEach(function(m){if(m.__N){var x=m.__[0];m.__=m.__N,m.__N=void 0,x!==m.__[0]&&(f=!0)}}),!(!f&&s.__c.props===l)&&(!i||i.call(this,l,u,d))};Ft.u=!0;var i=Ft.shouldComponentUpdate,o=Ft.componentWillUpdate;Ft.componentWillUpdate=function(l,u,d){if(this.__e){var p=i;i=void 0,a(l,u,d),i=p}o&&o.call(this,l,u,d)},Ft.shouldComponentUpdate=a}return s.__N||s.__}function mK(e,t){var r=al($a++,3);!un.__s&&k_(r.__H,t)&&(r.__=e,r.i=t,Ft.__H.__h.push(r))}function CR(e,t){var r=al($a++,4);!un.__s&&k_(r.__H,t)&&(r.__=e,r.i=t,Ft.__h.push(r))}function pK(e){return Rc=5,Xd(function(){return{current:e}},[])}function xK(e,t,r){Rc=6,CR(function(){return typeof e=="function"?(e(t()),function(){return e(null)}):e?(e.current=t(),function(){return e.current=null}):void 0},r==null?r:r.concat(e))}function Xd(e,t){var r=al($a++,7);return k_(r.__H,t)?(r.__V=e(),r.i=t,r.__h=e,r.__V):r.__}function oc(e,t){return Rc=8,Xd(function(){return e},t)}function gK(e){var t=Ft.context[e.__c],r=al($a++,9);return r.c=e,t?(r.__==null&&(r.__=!0,t.sub(Ft)),t.props.value):e.__}function yK(e,t){un.useDebugValue&&un.useDebugValue(t?t(e):e)}function bK(e){var t=al($a++,10),r=No();return t.__=e,Ft.componentDidCatch||(Ft.componentDidCatch=function(s,a){t.__&&t.__(s,a),r[1](s)}),[r[0],function(){r[1](void 0)}]}function vK(){var e=al($a++,11);if(!e.__){for(var t=Ft.__v;t!==null&&!t.__m&&t.__!==null;)t=t.__;var r=t.__m||(t.__m=[0,0]);e.__="P"+r[0]+"-"+r[1]++}return e.__}function wK(){for(var e;e=kR.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(xm),e.__H.__h.forEach(Wv),e.__H.__h=[]}catch(t){e.__H.__h=[],un.__e(t,e.__v)}}un.__b=function(e){Ft=null,bk&&bk(e)},un.__=function(e,t){t.__k&&t.__k.__m&&(e.__m=t.__k.__m),Nk&&Nk(e,t)},un.__r=function(e){vk&&vk(e),$a=0;var t=(Ft=e.__c).__H;t&&(q0===Ft?(t.__h=[],Ft.__h=[],t.__.forEach(function(r){r.__N&&(r.__=r.__N),r.__V=pm,r.__N=r.i=void 0})):(t.__h.forEach(xm),t.__h.forEach(Wv),t.__h=[],$a=0)),q0=Ft},un.diffed=function(e){wk&&wk(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(kR.push(t)!==1&&yk===un.requestAnimationFrame||((yk=un.requestAnimationFrame)||_K)(wK)),t.__H.__.forEach(function(r){r.i&&(r.__H=r.i),r.__V!==pm&&(r.__=r.__V),r.i=void 0,r.__V=pm})),q0=Ft=null},un.__c=function(e,t){t.some(function(r){try{r.__h.forEach(xm),r.__h=r.__h.filter(function(s){return!s.__||Wv(s)})}catch(s){t.some(function(a){a.__h&&(a.__h=[])}),t=[],un.__e(s,r.__v)}}),_k&&_k(e,t)},un.unmount=function(e){jk&&jk(e);var t,r=e.__c;r&&r.__H&&(r.__H.__.forEach(function(s){try{xm(s)}catch(a){t=a}}),r.__H=void 0,t&&un.__e(t,r.__v))};var Sk=typeof requestAnimationFrame=="function";function _K(e){var t,r=function(){clearTimeout(s),Sk&&cancelAnimationFrame(t),setTimeout(e)},s=setTimeout(r,100);Sk&&(t=requestAnimationFrame(r))}function xm(e){var t=Ft,r=e.__c;typeof r=="function"&&(e.__c=void 0,r()),Ft=t}function Wv(e){var t=Ft;e.__c=e.__(),Ft=t}function k_(e,t){return!e||e.length!==t.length||t.some(function(r,s){return r!==e[s]})}function TR(e,t){return typeof t=="function"?t(e):t}const jK=Object.defineProperty({__proto__:null,useCallback:oc,useContext:gK,useDebugValue:yK,useEffect:mK,useErrorBoundary:bK,useId:vK,useImperativeHandle:xK,useLayoutEffect:CR,useMemo:Xd,useReducer:ER,useRef:pK,useState:No},Symbol.toStringTag,{value:"Module"}),NK="http://www.w3.org/2000/svg";function SK(){const e=s=>qt.createElementNS(NK,s),t=Br(e("svg"),{width:"32",height:"30",viewBox:"0 0 72 66",fill:"inherit"}),r=Br(e("path"),{transform:"translate(11, 11)",d:"M29,2.26a4.67,4.67,0,0,0-8,0L14.42,13.53A32.21,32.21,0,0,1,32.17,40.19H27.55A27.68,27.68,0,0,0,12.09,17.47L6,28a15.92,15.92,0,0,1,9.23,12.17H4.62A.76.76,0,0,1,4,39.06l2.94-5a10.74,10.74,0,0,0-3.36-1.9l-2.91,5a4.54,4.54,0,0,0,1.69,6.24A4.66,4.66,0,0,0,4.62,44H19.15a19.4,19.4,0,0,0-8-17.31l2.31-4A23.87,23.87,0,0,1,23.76,44H36.07a35.88,35.88,0,0,0-16.41-31.8l4.67-8a.77.77,0,0,1,1.05-.27c.53.29,20.29,34.77,20.66,35.17a.76.76,0,0,1-.68,1.13H40.6q.09,1.91,0,3.81h4.78A4.59,4.59,0,0,0,50,39.43a4.49,4.49,0,0,0-.62-2.28Z"});return t.appendChild(r),t}function kK({options:e}){const t=Xd(()=>({__html:SK().outerHTML}),[]);return pt("h2",{class:"dialog__header"},pt("span",{class:"dialog__title"},e.formTitle),e.showBranding?pt("a",{class:"brand-link",target:"_blank",href:"https://sentry.io/welcome/",title:"Powered by Sentry",rel:"noopener noreferrer",dangerouslySetInnerHTML:t}):null)}function EK(e,t){const r=[];return t.isNameRequired&&!e.name&&r.push(t.nameLabel),t.isEmailRequired&&!e.email&&r.push(t.emailLabel),e.message||r.push(t.messageLabel),r}function F0(e,t){const r=e.get(t);return typeof r=="string"?r.trim():""}function CK({options:e,defaultEmail:t,defaultName:r,onFormClose:s,onSubmit:a,onSubmitSuccess:i,onSubmitError:o,showEmail:l,showName:u,screenshotInput:d}){const{tags:p,addScreenshotButtonLabel:f,removeScreenshotButtonLabel:m,cancelButtonLabel:x,emailLabel:y,emailPlaceholder:g,isEmailRequired:b,isNameRequired:_,messageLabel:w,messagePlaceholder:S,nameLabel:j,namePlaceholder:N,submitButtonLabel:C,isRequiredLabel:E}=e,[T,I]=No(!1),[A,R]=No(null),[O,M]=No(!1),B=d==null?void 0:d.input,[U,Y]=No(null),W=oc(H=>{Y(H),M(!1)},[]),K=oc(H=>{const L=EK(H,{emailLabel:y,isEmailRequired:b,isNameRequired:_,messageLabel:w,nameLabel:j});return L.length>0?R(`Please enter in the following required fields: ${L.join(", ")}`):R(null),L.length===0},[y,b,_,w,j]),F=oc(async H=>{I(!0);try{if(H.preventDefault(),!(H.target instanceof HTMLFormElement))return;const L=new FormData(H.target),q=await(d&&O?d.value():void 0),z={name:F0(L,"name"),email:F0(L,"email"),message:F0(L,"message"),attachments:q?[q]:void 0};if(!K(z))return;try{const Q=await a({name:z.name,email:z.email,message:z.message,source:YH,tags:p},{attachments:z.attachments});i(z,Q)}catch(Q){hm&&ce.error(Q),R(Q),o(Q)}}finally{I(!1)}},[d&&O,i,o]);return pt("form",{class:"form",onSubmit:F},B&&O?pt(B,{onError:W}):null,pt("fieldset",{class:"form__right","data-sentry-feedback":!0,disabled:T},pt("div",{class:"form__top"},A?pt("div",{class:"form__error-container"},A):null,u?pt("label",{for:"name",class:"form__label"},pt(U0,{label:j,isRequiredLabel:E,isRequired:_}),pt("input",{class:"form__input",defaultValue:r,id:"name",name:"name",placeholder:N,required:_,type:"text"})):pt("input",{"aria-hidden":!0,value:r,name:"name",type:"hidden"}),l?pt("label",{for:"email",class:"form__label"},pt(U0,{label:y,isRequiredLabel:E,isRequired:b}),pt("input",{class:"form__input",defaultValue:t,id:"email",name:"email",placeholder:g,required:b,type:"email"})):pt("input",{"aria-hidden":!0,value:t,name:"email",type:"hidden"}),pt("label",{for:"message",class:"form__label"},pt(U0,{label:w,isRequiredLabel:E,isRequired:!0}),pt("textarea",{autoFocus:!0,class:"form__input form__input--textarea",id:"message",name:"message",placeholder:S,required:!0,rows:5})),B?pt("label",{for:"screenshot",class:"form__label"},pt("button",{class:"btn btn--default",disabled:T,type:"button",onClick:()=>{Y(null),M(H=>!H)}},O?m:f),U?pt("div",{class:"form__error-container"},U.message):null):null),pt("div",{class:"btn-group"},pt("button",{class:"btn btn--primary",disabled:T,type:"submit"},C),pt("button",{class:"btn btn--default",disabled:T,type:"button",onClick:s},x))))}function U0({label:e,isRequired:t,isRequiredLabel:r}){return pt("span",{class:"form__label__text"},e,t&&pt("span",{class:"form__label__text--required"},r))}const $f=16,kk=17,TK="http://www.w3.org/2000/svg";function RK(){const e=u=>As.document.createElementNS(TK,u),t=Br(e("svg"),{width:`${$f}`,height:`${kk}`,viewBox:`0 0 ${$f} ${kk}`,fill:"inherit"}),r=Br(e("g"),{clipPath:"url(#clip0_57_156)"}),s=Br(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.55544 15.1518C4.87103 16.0308 6.41775 16.5 8 16.5C10.1217 16.5 12.1566 15.6571 13.6569 14.1569C15.1571 12.6566 16 10.6217 16 8.5C16 6.91775 15.5308 5.37103 14.6518 4.05544C13.7727 2.73985 12.5233 1.71447 11.0615 1.10897C9.59966 0.503466 7.99113 0.34504 6.43928 0.653721C4.88743 0.962403 3.46197 1.72433 2.34315 2.84315C1.22433 3.96197 0.462403 5.38743 0.153721 6.93928C-0.15496 8.49113 0.00346625 10.0997 0.608967 11.5615C1.21447 13.0233 2.23985 14.2727 3.55544 15.1518ZM4.40546 3.1204C5.46945 2.40946 6.72036 2.03 8 2.03C9.71595 2.03 11.3616 2.71166 12.575 3.92502C13.7883 5.13838 14.47 6.78405 14.47 8.5C14.47 9.77965 14.0905 11.0306 13.3796 12.0945C12.6687 13.1585 11.6582 13.9878 10.476 14.4775C9.29373 14.9672 7.99283 15.0953 6.73777 14.8457C5.48271 14.596 4.32987 13.9798 3.42502 13.075C2.52018 12.1701 1.90397 11.0173 1.65432 9.76224C1.40468 8.50718 1.5328 7.20628 2.0225 6.02404C2.5122 4.8418 3.34148 3.83133 4.40546 3.1204Z"}),a=Br(e("path"),{d:"M6.68775 12.4297C6.78586 12.4745 6.89218 12.4984 7 12.5C7.11275 12.4955 7.22315 12.4664 7.32337 12.4145C7.4236 12.3627 7.51121 12.2894 7.58 12.2L12 5.63999C12.0848 5.47724 12.1071 5.28902 12.0625 5.11098C12.0178 4.93294 11.9095 4.77744 11.7579 4.67392C11.6064 4.57041 11.4221 4.52608 11.24 4.54931C11.0579 4.57254 10.8907 4.66173 10.77 4.79999L6.88 10.57L5.13 8.56999C5.06508 8.49566 4.98613 8.43488 4.89768 8.39111C4.80922 8.34735 4.713 8.32148 4.61453 8.31498C4.51605 8.30847 4.41727 8.32147 4.32382 8.35322C4.23038 8.38497 4.14413 8.43484 4.07 8.49999C3.92511 8.63217 3.83692 8.81523 3.82387 9.01092C3.81083 9.2066 3.87393 9.39976 4 9.54999L6.43 12.24C6.50187 12.3204 6.58964 12.385 6.68775 12.4297Z"});t.appendChild(r).append(a,s);const i=e("defs"),o=Br(e("clipPath"),{id:"clip0_57_156"}),l=Br(e("rect"),{width:`${$f}`,height:`${$f}`,fill:"white",transform:"translate(0 0.5)"});return o.appendChild(l),i.appendChild(o),t.appendChild(i).appendChild(o).appendChild(l),t}function AK({open:e,onFormSubmitted:t,...r}){const s=r.options,a=Xd(()=>({__html:RK().outerHTML}),[]),[i,o]=No(null),l=oc(()=>{i&&(clearTimeout(i),o(null)),t()},[i]),u=oc((d,p)=>{r.onSubmitSuccess(d,p),o(setTimeout(()=>{t(),o(null)},XH))},[t]);return pt(Jd,null,i?pt("div",{class:"success__position",onClick:l},pt("div",{class:"success__content"},s.successMessageText,pt("span",{class:"success__icon",dangerouslySetInnerHTML:a}))):pt("dialog",{class:"dialog",onClick:s.onFormClose,open:e},pt("div",{class:"dialog__position"},pt("div",{class:"dialog__content",onClick:d=>{d.stopPropagation()}},pt(kK,{options:s}),pt(CK,{...r,onSubmitSuccess:u})))))}const PK=`
.dialog {
  position: fixed;
  z-index: var(--z-index);
  margin: 0;
  inset: 0;

  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0;
  height: 100vh;
  width: 100vw;

  color: var(--dialog-color, var(--foreground));
  fill: var(--dialog-color, var(--foreground));
  line-height: 1.75em;

  background-color: rgba(0, 0, 0, 0.05);
  border: none;
  inset: 0;
  opacity: 1;
  transition: opacity 0.2s ease-in-out;
}

.dialog__position {
  position: fixed;
  z-index: var(--z-index);
  inset: var(--dialog-inset);
  padding: var(--page-margin);
  display: flex;
  max-height: calc(100vh - (2 * var(--page-margin)));
}
@media (max-width: 600px) {
  .dialog__position {
    inset: var(--page-margin);
    padding: 0;
  }
}

.dialog__position:has(.editor) {
  inset: var(--page-margin);
  padding: 0;
}

.dialog:not([open]) {
  opacity: 0;
  pointer-events: none;
  visibility: hidden;
}
.dialog:not([open]) .dialog__content {
  transform: translate(0, -16px) scale(0.98);
}

.dialog__content {
  display: flex;
  flex-direction: column;
  gap: 16px;
  padding: var(--dialog-padding, 24px);
  max-width: 100%;
  width: 100%;
  max-height: 100%;
  overflow: auto;

  background: var(--dialog-background, var(--background));
  border-radius: var(--dialog-border-radius, 20px);
  border: var(--dialog-border, var(--border));
  box-shadow: var(--dialog-box-shadow, var(--box-shadow));
  transform: translate(0, 0) scale(1);
  transition: transform 0.2s ease-in-out;
}

`,OK=`
.dialog__header {
  display: flex;
  gap: 4px;
  justify-content: space-between;
  font-weight: var(--dialog-header-weight, 600);
  margin: 0;
}
.dialog__title {
  align-self: center;
  width: var(--form-width, 272px);
}

@media (max-width: 600px) {
  .dialog__title {
    width: auto;
  }
}

.dialog__position:has(.editor) .dialog__title {
  width: auto;
}


.brand-link {
  display: inline-flex;
}
.brand-link:focus-visible {
  outline: var(--outline);
}
`,IK=`
.form {
  display: flex;
  overflow: auto;
  flex-direction: row;
  gap: 16px;
  flex: 1 0;
}

.form fieldset {
  border: none;
  margin: 0;
  padding: 0;
}

.form__right {
  flex: 0 0 auto;
  display: flex;
  overflow: auto;
  flex-direction: column;
  justify-content: space-between;
  gap: 20px;
  width: var(--form-width, 100%);
}

.dialog__position:has(.editor) .form__right {
  width: var(--form-width, 272px);
}

.form__top {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.form__error-container {
  color: var(--error-color);
  fill: var(--error-color);
}

.form__label {
  display: flex;
  flex-direction: column;
  gap: 4px;
  margin: 0px;
}

.form__label__text {
  display: flex;
  gap: 4px;
  align-items: center;
}

.form__label__text--required {
  font-size: 0.85em;
}

.form__input {
  font-family: inherit;
  line-height: inherit;
  background: transparent;
  box-sizing: border-box;
  border: var(--input-border, var(--border));
  border-radius: var(--input-border-radius, 6px);
  color: var(--input-color, inherit);
  fill: var(--input-color, inherit);
  font-size: var(--input-font-size, inherit);
  font-weight: var(--input-font-weight, 500);
  padding: 6px 12px;
}

.form__input::placeholder {
  opacity: 0.65;
  color: var(--input-placeholder-color, inherit);
  filter: var(--interactive-filter);
}

.form__input:focus-visible {
  outline: var(--input-focus-outline, var(--outline));
}

.form__input--textarea {
  font-family: inherit;
  resize: vertical;
}

.error {
  color: var(--error-color);
  fill: var(--error-color);
}
`,LK=`
.btn-group {
  display: grid;
  gap: 8px;
}

.btn {
  line-height: inherit;
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  cursor: pointer;
  font-family: inherit;
  font-size: var(--button-font-size, inherit);
  font-weight: var(--button-font-weight, 600);
  padding: var(--button-padding, 6px 16px);
}
.btn[disabled] {
  opacity: 0.6;
  pointer-events: none;
}

.btn--primary {
  color: var(--button-primary-color, var(--accent-foreground));
  fill: var(--button-primary-color, var(--accent-foreground));
  background: var(--button-primary-background, var(--accent-background));
  border: var(--button-primary-border, var(--border));
  border-radius: var(--button-primary-border-radius, 6px);
  font-weight: var(--button-primary-font-weight, 500);
}
.btn--primary:hover {
  color: var(--button-primary-hover-color, var(--accent-foreground));
  fill: var(--button-primary-hover-color, var(--accent-foreground));
  background: var(--button-primary-hover-background, var(--accent-background));
  filter: var(--interactive-filter);
}
.btn--primary:focus-visible {
  background: var(--button-primary-hover-background, var(--accent-background));
  filter: var(--interactive-filter);
  outline: var(--button-primary-focus-outline, var(--outline));
}

.btn--default {
  color: var(--button-color, var(--foreground));
  fill: var(--button-color, var(--foreground));
  background: var(--button-background, var(--background));
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  font-weight: var(--button-font-weight, 500);
}
.btn--default:hover {
  color: var(--button-color, var(--foreground));
  fill: var(--button-color, var(--foreground));
  background: var(--button-hover-background, var(--background));
  filter: var(--interactive-filter);
}
.btn--default:focus-visible {
  background: var(--button-hover-background, var(--background));
  filter: var(--interactive-filter);
  outline: var(--button-focus-outline, var(--outline));
}
`,MK=`
.success__position {
  position: fixed;
  inset: var(--dialog-inset);
  padding: var(--page-margin);
  z-index: var(--z-index);
}
.success__content {
  background: var(--success-background, var(--background));
  border: var(--success-border, var(--border));
  border-radius: var(--success-border-radius, 1.7em/50%);
  box-shadow: var(--success-box-shadow, var(--box-shadow));
  font-weight: var(--success-font-weight, 600);
  color: var(--success-color);
  fill: var(--success-color);
  padding: 12px 24px;
  line-height: 1.75em;

  display: grid;
  align-items: center;
  grid-auto-flow: column;
  gap: 6px;
  cursor: default;
}

.success__icon {
  display: flex;
}
`;function DK(e){const t=qt.createElement("style");return t.textContent=`
:host {
  --dialog-inset: var(--inset);
}

${PK}
${OK}
${IK}
${LK}
${MK}
`,e&&t.setAttribute("nonce",e),t}function $K(){const e=lt().getUser(),t=En().getUser(),r=Ta().getUser();return e&&Object.keys(e).length?e:t&&Object.keys(t).length?t:r}const qK=(()=>({name:"FeedbackModal",setupOnce(){},createDialog:({options:e,screenshotIntegration:t,sendFeedback:r,shadow:s})=>{const a=s,i=e.useSentryUser,o=$K(),l=qt.createElement("div"),u=DK(e.styleNonce);let d="";const p={get el(){return l},appendToDom(){!a.contains(u)&&!a.contains(l)&&(a.appendChild(u),a.appendChild(l))},removeFromDom(){l.remove(),u.remove(),qt.body.style.overflow=d},open(){var x,y;m(!0),(x=e.onFormOpen)==null||x.call(e),(y=Ie())==null||y.emit("openFeedbackWidget"),d=qt.body.style.overflow,qt.body.style.overflow="hidden"},close(){m(!1),qt.body.style.overflow=d}},f=t==null?void 0:t.createInput({h:pt,hooks:jK,dialog:p,options:e}),m=x=>{fK(pt(AK,{options:e,screenshotInput:f,showName:e.showName||e.isNameRequired,showEmail:e.showEmail||e.isEmailRequired,defaultName:String(i&&(o==null?void 0:o[i.name])||""),defaultEmail:String(i&&(o==null?void 0:o[i.email])||""),onFormClose:()=>{var y;m(!1),(y=e.onFormClose)==null||y.call(e)},onSubmit:r,onSubmitSuccess:(y,g)=>{var b;m(!1),(b=e.onSubmitSuccess)==null||b.call(e,y,g)},onSubmitError:y=>{var g;(g=e.onSubmitError)==null||g.call(e,y)},onFormSubmitted:()=>{var y;(y=e.onFormSubmitted)==null||y.call(e)},open:x}),l)};return p}}));function FK({h:e}){return function(){return e("svg",{"data-test-id":"icon-close",viewBox:"0 0 16 16",fill:"#2B2233",height:"25px",width:"25px"},e("circle",{r:"7",cx:"8",cy:"8",fill:"white"}),e("path",{strokeWidth:"1.5",d:"M8,16a8,8,0,1,1,8-8A8,8,0,0,1,8,16ZM8,1.53A6.47,6.47,0,1,0,14.47,8,6.47,6.47,0,0,0,8,1.53Z"}),e("path",{strokeWidth:"1.5",d:"M5.34,11.41a.71.71,0,0,1-.53-.22.74.74,0,0,1,0-1.06l5.32-5.32a.75.75,0,0,1,1.06,1.06L5.87,11.19A.74.74,0,0,1,5.34,11.41Z"}),e("path",{strokeWidth:"1.5",d:"M10.66,11.41a.74.74,0,0,1-.53-.22L4.81,5.87A.75.75,0,0,1,5.87,4.81l5.32,5.32a.74.74,0,0,1,0,1.06A.71.71,0,0,1,10.66,11.41Z"}))}}function UK(e){const t=qt.createElement("style"),r="#1A141F",s="#302735";return t.textContent=`
.editor {
  display: flex;
  flex-grow: 1;
  flex-direction: column;
}

.editor__image-container {
  justify-items: center;
  padding: 15px;
  position: relative;
  height: 100%;
  border-radius: var(--menu-border-radius, 6px);

  background-color: ${r};
  background-image: repeating-linear-gradient(
      -145deg,
      transparent,
      transparent 8px,
      ${r} 8px,
      ${r} 11px
    ),
    repeating-linear-gradient(
      -45deg,
      transparent,
      transparent 15px,
      ${s} 15px,
      ${s} 16px
    );
}

.editor__canvas-container {
  width: 100%;
  height: 100%;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
}

.editor__canvas-container > * {
  object-fit: contain;
  position: absolute;
}

.editor__tool-container {
  padding-top: 8px;
  display: flex;
  justify-content: center;
}

.editor__tool-bar {
  display: flex;
  gap: 8px;
}

.editor__tool {
  display: flex;
  padding: 8px 12px;
  justify-content: center;
  align-items: center;
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  background: var(--button-background, var(--background));
  color: var(--button-color, var(--foreground));
}

.editor__tool--active {
  background: var(--button-primary-background, var(--accent-background));
  color: var(--button-primary-color, var(--accent-foreground));
}

.editor__rect {
  position: absolute;
  z-index: 2;
}

.editor__rect button {
  opacity: 0;
  position: absolute;
  top: -12px;
  right: -12px;
  cursor: pointer;
  padding: 0;
  z-index: 3;
  border: none;
  background: none;
}

.editor__rect:hover button {
  opacity: 1;
}
`,e&&t.setAttribute("nonce",e),t}function BK({h:e}){return function({action:r,setAction:s,options:a}){return e("div",{class:"editor__tool-container"},e("div",{class:"editor__tool-bar"},e("button",{type:"button",class:`editor__tool ${r==="highlight"?"editor__tool--active":""}`,onClick:()=>{s(r==="highlight"?"":"highlight")}},a.highlightToolText),e("button",{type:"button",class:`editor__tool ${r==="hide"?"editor__tool--active":""}`,onClick:()=>{s(r==="hide"?"":"hide")}},a.hideToolText)))}}function HK({hooks:e}){function t(){const[r,s]=e.useState(As.devicePixelRatio??1);return e.useEffect(()=>{const a=()=>{s(As.devicePixelRatio)},i=matchMedia(`(resolution: ${As.devicePixelRatio}dppx)`);return i.addEventListener("change",a),()=>{i.removeEventListener("change",a)}},[]),r}return function({onBeforeScreenshot:s,onScreenshot:a,onAfterScreenshot:i,onError:o}){const l=t();e.useEffect(()=>{(async()=>{s();const d=await td.mediaDevices.getDisplayMedia({video:{width:As.innerWidth*l,height:As.innerHeight*l},audio:!1,monitorTypeSurfaces:"exclude",preferCurrentTab:!0,selfBrowserSurface:"include",surfaceSwitching:"exclude"}),p=qt.createElement("video");await new Promise((f,m)=>{p.srcObject=d,p.onloadedmetadata=()=>{a(p,l),d.getTracks().forEach(x=>x.stop()),f()},p.play().catch(m)}),i()})().catch(o)},[])}}function KK(e,t,r){switch(e.type){case"highlight":{t.shadowColor="rgba(0, 0, 0, 0.7)",t.shadowBlur=50,t.fillStyle=r,t.fillRect(e.x-1,e.y-1,e.w+2,e.h+2),t.clearRect(e.x,e.y,e.w,e.h);break}case"hide":t.fillStyle="rgb(0, 0, 0)",t.fillRect(e.x,e.y,e.w,e.h);break}}function xi(e,t,r){if(!e)return;const s=e.getContext("2d",t);s&&r(e,s)}function B0(e,t){xi(e,{alpha:!0},(r,s)=>{s.drawImage(t,0,0,t.width,t.height,0,0,r.width,r.height)})}function H0(e,t,r){xi(e,{alpha:!0},(s,a)=>{r.length&&(a.fillStyle="rgba(0, 0, 0, 0.25)",a.fillRect(0,0,s.width,s.height)),r.forEach(i=>{KK(i,a,t)})})}function zK({h:e,hooks:t,outputBuffer:r,dialog:s,options:a}){const i=HK({hooks:t}),o=BK({h:e}),l=FK({h:e}),u={__html:UK(a.styleNonce).innerText},d=s.el.style,p=({screenshot:f})=>{const[m,x]=t.useState("highlight"),[y,g]=t.useState([]),b=t.useRef(null),_=t.useRef(null),w=t.useRef(null),S=t.useRef(null),[j,N]=t.useState(1),C=t.useMemo(()=>{const O=qt.getElementById(a.id);if(!O)return"white";const M=getComputedStyle(O);return M.getPropertyValue("--button-primary-background")||M.getPropertyValue("--accent-background")},[a.id]);t.useLayoutEffect(()=>{const O=()=>{const M=b.current;M&&(xi(f.canvas,{alpha:!1},B=>{const U=Math.min(M.clientWidth/B.width,M.clientHeight/B.height);N(U)}),(M.clientHeight===0||M.clientWidth===0)&&setTimeout(O,0))};return O(),As.addEventListener("resize",O),()=>{As.removeEventListener("resize",O)}},[f]);const E=t.useCallback((O,M)=>{xi(O,{alpha:!0},(B,U)=>{U.scale(M,M),B.width=f.canvas.width,B.height=f.canvas.height})},[f]);t.useEffect(()=>{E(_.current,f.dpi),B0(_.current,f.canvas)},[f]),t.useEffect(()=>{E(w.current,f.dpi),xi(w.current,{alpha:!0},(O,M)=>{M.clearRect(0,0,O.width,O.height)}),H0(w.current,C,y)},[y,C]),t.useEffect(()=>{E(r,f.dpi),B0(r,f.canvas),xi(qt.createElement("canvas"),{alpha:!0},(O,M)=>{M.scale(f.dpi,f.dpi),O.width=f.canvas.width,O.height=f.canvas.height,H0(O,C,y),B0(r,O)})},[y,f,C]);const T=O=>{if(!m||!S.current)return;const M=S.current.getBoundingClientRect(),B={type:m,x:O.offsetX/j,y:O.offsetY/j},U=(K,F)=>{const H=(F.clientX-M.x)/j,L=(F.clientY-M.y)/j;return{type:K.type,x:Math.min(K.x,H),y:Math.min(K.y,L),w:Math.abs(H-K.x),h:Math.abs(L-K.y)}},Y=K=>{xi(w.current,{alpha:!0},(F,H)=>{H.clearRect(0,0,F.width,F.height)}),H0(w.current,C,[...y,U(B,K)])},W=K=>{const F=U(B,K);F.w*j>=1&&F.h*j>=1&&g(H=>[...H,F]),qt.removeEventListener("mousemove",Y),qt.removeEventListener("mouseup",W)};qt.addEventListener("mousemove",Y),qt.addEventListener("mouseup",W)},I=t.useCallback(O=>M=>{M.preventDefault(),M.stopPropagation(),g(B=>{const U=[...B];return U.splice(O,1),U})},[]),A={width:`${f.canvas.width*j}px`,height:`${f.canvas.height*j}px`},R=O=>{O.stopPropagation()};return e("div",{class:"editor"},e("style",{nonce:a.styleNonce,dangerouslySetInnerHTML:u}),e("div",{class:"editor__image-container"},e("div",{class:"editor__canvas-container",ref:b},e("canvas",{ref:_,id:"background",style:A}),e("canvas",{ref:w,id:"foreground",style:A}),e("div",{ref:S,onMouseDown:T,style:A},y.map((O,M)=>e("div",{key:M,class:"editor__rect",style:{top:`${O.y*j}px`,left:`${O.x*j}px`,width:`${O.w*j}px`,height:`${O.h*j}px`}},e("button",{"aria-label":a.removeHighlightText,onClick:I(M),onMouseDown:R,onMouseUp:R,type:"button"},e(l,null))))))),e(o,{options:a,action:m,setAction:x}))};return function({onError:m}){const[x,y]=t.useState();return i({onBeforeScreenshot:t.useCallback(()=>{d.display="none"},[]),onScreenshot:t.useCallback((g,b)=>{xi(qt.createElement("canvas"),{alpha:!1},(_,w)=>{w.scale(b,b),_.width=g.videoWidth,_.height=g.videoHeight,w.drawImage(g,0,0,_.width,_.height),y({canvas:_,dpi:b})}),r.width=g.videoWidth,r.height=g.videoHeight},[]),onAfterScreenshot:t.useCallback(()=>{d.display="block"},[]),onError:t.useCallback(g=>{d.display="block",m(g)},[])}),x?e(p,{screenshot:x}):e("div",null)}}const WK=(()=>({name:"FeedbackScreenshot",setupOnce(){},createInput:({h:e,hooks:t,dialog:r,options:s})=>{const a=qt.createElement("canvas");return{input:zK({h:e,hooks:t,outputBuffer:a,dialog:r,options:s}),value:async()=>{const i=await new Promise(o=>{a.toBlob(o,"image/png")});if(i)return{data:new Uint8Array(await i.arrayBuffer()),filename:"screenshot.png",contentType:"application/png"}}}}})),Le=Xe;let Gv=0;function RR(){return Gv>0}function GK(){Gv++,setTimeout(()=>{Gv--})}function Ac(e,t={}){function r(a){return typeof a=="function"}if(!r(e))return e;try{const a=e.__sentry_wrapped__;if(a)return typeof a=="function"?a:e;if(Kw(e))return e}catch{return e}const s=function(...a){try{const i=a.map(o=>Ac(o,t));return e.apply(this,i)}catch(i){throw GK(),Pr(o=>{o.addEventProcessor(l=>(t.mechanism&&(kv(l,void 0),Ma(l,t.mechanism)),l.extra={...l.extra,arguments:a},l)),Ct(i)}),i}};try{for(const a in e)Object.prototype.hasOwnProperty.call(e,a)&&(s[a]=e[a])}catch{}AT(s,e),In(e,"__sentry_wrapped__",s);try{Object.getOwnPropertyDescriptor(s,"name").configurable&&Object.defineProperty(s,"name",{get(){return e.name}})}catch{}return s}function E_(){const e=rl(),{referrer:t}=Le.document||{},{userAgent:r}=Le.navigator||{},s={...t&&{Referer:t},...r&&{"User-Agent":r}};return{url:e,headers:s}}const VK={replayIntegration:"replay",replayCanvasIntegration:"replay-canvas",feedbackIntegration:"feedback",feedbackModalIntegration:"feedback-modal",feedbackScreenshotIntegration:"feedback-screenshot",captureConsoleIntegration:"captureconsole",contextLinesIntegration:"contextlines",linkedErrorsIntegration:"linkederrors",dedupeIntegration:"dedupe",extraErrorDataIntegration:"extraerrordata",graphqlClientIntegration:"graphqlclient",httpClientIntegration:"httpclient",reportingObserverIntegration:"reportingobserver",rewriteFramesIntegration:"rewriteframes",browserProfilingIntegration:"browserprofiling",moduleMetadataIntegration:"modulemetadata",instrumentAnthropicAiClient:"instrumentanthropicaiclient",instrumentOpenAiClient:"instrumentopenaiclient",instrumentGoogleGenAIClient:"instrumentgooglegenaiclient",instrumentLangGraph:"instrumentlanggraph",createLangChainCallbackHandler:"createlangchaincallbackhandler"},Ek=Le;async function AR(e,t){const r=VK[e],s=Ek.Sentry=Ek.Sentry||{};if(!r)throw new Error(`Cannot lazy load integration: ${e}`);const a=s[e];if(typeof a=="function"&&!("_isShim"in a))return a;const i=QK(r),o=Le.document.createElement("script");o.src=i,o.crossOrigin="anonymous",o.referrerPolicy="strict-origin",t&&o.setAttribute("nonce",t);const l=new Promise((f,m)=>{o.addEventListener("load",()=>f()),o.addEventListener("error",m)}),u=Le.document.currentScript,d=Le.document.body||Le.document.head||(u==null?void 0:u.parentElement);if(d)d.appendChild(o);else throw new Error(`Could not find parent element to insert lazy-loaded ${e} script`);try{await l}catch{throw new Error(`Error when loading integration: ${e}`)}const p=s[e];if(typeof p!="function")throw new Error(`Could not load integration: ${e}`);return p}function QK(e){var s;const t=Ie(),r=((s=t==null?void 0:t.getOptions())==null?void 0:s.cdnBaseUrl)||"https://browser.sentry-cdn.com";return new URL(`/${ka}/${e}.min.js`,r).toString()}const YK=bR({lazyLoadIntegration:AR}),Ck=bR({getModalIntegration:()=>qK,getScreenshotIntegration:()=>WK});function Hp(e,t){const r=C_(e,t),s={type:tz(t),value:nz(t)};return r.length&&(s.stacktrace={frames:r}),s.type===void 0&&s.value===""&&(s.value="Unrecoverable error caught"),s}function JK(e,t,r,s){const a=Ie(),i=a==null?void 0:a.getOptions().normalizeDepth,o=az(t),l={__serialized__:s3(t,i)};if(o)return{exception:{values:[Hp(e,o)]},extra:l};const u={exception:{values:[{type:Np(t)?t.constructor.name:s?"UnhandledRejection":"Error",value:rz(t,{isUnhandledRejection:s})}]},extra:l};if(r){const d=C_(e,r);d.length&&(u.exception.values[0].stacktrace={frames:d})}return u}function K0(e,t){return{exception:{values:[Hp(e,t)]}}}function C_(e,t){const r=t.stacktrace||t.stack||"",s=ZK(t),a=ez(t);try{return e(r,s,a)}catch{}return[]}const XK=/Minified React error #\d+;/i;function ZK(e){return e&&XK.test(e.message)?1:0}function ez(e){return typeof e.framesToPop=="number"?e.framesToPop:0}function PR(e){return typeof WebAssembly<"u"&&typeof WebAssembly.Exception<"u"?e instanceof WebAssembly.Exception:!1}function tz(e){const t=e==null?void 0:e.name;return!t&&PR(e)?e.message&&Array.isArray(e.message)&&e.message.length==2?e.message[0]:"WebAssembly.Exception":t}function nz(e){const t=e==null?void 0:e.message;return PR(e)?Array.isArray(e.message)&&e.message.length==2?e.message[1]:"wasm exception":t?t.error&&typeof t.error.message=="string"?t.error.message:t:"No error message"}function OR(e,t,r,s){const a=(r==null?void 0:r.syntheticException)||void 0,i=Kp(e,t,a,s);return Ma(i),i.level="error",r!=null&&r.event_id&&(i.event_id=r.event_id),Ap(i)}function IR(e,t,r="info",s,a){const i=(s==null?void 0:s.syntheticException)||void 0,o=Vv(e,t,i,a);return o.level=r,s!=null&&s.event_id&&(o.event_id=s.event_id),Ap(o)}function Kp(e,t,r,s,a){let i;if(CT(t)&&t.error)return K0(e,t.error);if(i2(t)||nq(t)){const o=t;if("stack"in t)i=K0(e,t);else{const l=o.name||(i2(o)?"DOMError":"DOMException"),u=o.message?`${l}: ${o.message}`:l;i=Vv(e,u,r,s),kv(i,u)}return"code"in o&&(i.tags={...i.tags,"DOMException.code":`${o.code}`}),i}return Ea(t)?K0(e,t):Xs(t)||Np(t)?(i=JK(e,t,r,a),Ma(i,{synthetic:!0}),i):(i=Vv(e,t,r,s),kv(i,`${t}`),Ma(i,{synthetic:!0}),i)}function Vv(e,t,r,s){const a={};if(s&&r){const i=C_(e,r);i.length&&(a.exception={values:[{value:t,stacktrace:{frames:i}}]}),Ma(a,{synthetic:!0})}if(jp(t)){const{__sentry_template_string__:i,__sentry_template_values__:o}=t;return a.logentry={message:i,params:o},a}return a.message=t,a}function rz(e,{isUnhandledRejection:t}){const r=lq(e),s=t?"promise rejection":"exception";return CT(e)?`Event \`ErrorEvent\` captured as ${s} with message \`${e.message}\``:Np(e)?`Event \`${sz(e)}\` (type=${e.type}) captured as ${s}`:`Object captured as ${s} with keys: ${r}`}function sz(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch{}}function az(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const r=e[t];if(r instanceof Error)return r}}class LR extends P7{constructor(t){var p;const r=iz(t),s=Le.SENTRY_SDK_SOURCE||RH();q3(r,"browser",["browser"],s),(p=r._metadata)!=null&&p.sdk&&(r._metadata.sdk.settings={infer_ip:r.sendDefaultPii?"auto":"never",...r._metadata.sdk.settings}),super(r);const{sendDefaultPii:a,sendClientReports:i,enableLogs:o,_experiments:l,enableMetrics:u}=this._options,d=u??(l==null?void 0:l.enableMetrics)??!0;Le.document&&(i||o||d)&&Le.document.addEventListener("visibilitychange",()=>{Le.document.visibilityState==="hidden"&&(i&&this._flushOutcomes(),o&&n_(this),d&&s_(this))}),a&&this.on("beforeSendSession",V7)}eventFromException(t,r){return OR(this._options.stackParser,t,r,this._options.attachStacktrace)}eventFromMessage(t,r="info",s){return IR(this._options.stackParser,t,r,s,this._options.attachStacktrace)}_prepareEvent(t,r,s,a){return t.platform=t.platform||"javascript",super._prepareEvent(t,r,s,a)}}function iz(e){var t;return{release:typeof __SENTRY_RELEASE__=="string"?__SENTRY_RELEASE__:(t=Le.SENTRY_RELEASE)==null?void 0:t.id,sendClientReports:!0,parentSpanIsAlwaysRootSpan:!0,...e}}const Jo=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,st=Xe,oz=(e,t)=>e>t[1]?"poor":e>t[0]?"needs-improvement":"good",Zd=(e,t,r,s)=>{let a,i;return o=>{t.value>=0&&(o||s)&&(i=t.value-(a??0),(i||a===void 0)&&(a=t.value,t.delta=i,t.rating=oz(t.value,r),e(t)))}},eh=(e=!0)=>{var r,s;const t=(s=(r=st.performance)==null?void 0:r.getEntriesByType)==null?void 0:s.call(r,"navigation")[0];if(!e||t&&t.responseStart>0&&t.responseStart<performance.now())return t},Zc=()=>{const e=eh();return(e==null?void 0:e.activationStart)??0};function Fo(e,t,r){st.document&&st.addEventListener(e,t,r)}function T_(e,t,r){st.document&&st.removeEventListener(e,t,r)}let lc=-1;const MR=new Set,lz=()=>{var e,t;return((e=st.document)==null?void 0:e.visibilityState)==="hidden"&&!((t=st.document)!=null&&t.prerendering)?0:1/0},gm=e=>{if(cz(e)&&lc>-1){if(e.type==="visibilitychange"||e.type==="pagehide")for(const t of MR)t();isFinite(lc)||(lc=e.type==="visibilitychange"?e.timeStamp:0,T_("prerenderingchange",gm,!0))}},th=()=>{var e;if(st.document&&lc<0){const t=Zc();lc=(st.document.prerendering||(e=globalThis.performance.getEntriesByType("visibility-state").filter(s=>s.name==="hidden"&&s.startTime>t)[0])==null?void 0:e.startTime)??lz(),Fo("visibilitychange",gm,!0),Fo("pagehide",gm,!0),Fo("prerenderingchange",gm,!0)}return{get firstHiddenTime(){return lc},onHidden(t){MR.add(t)}}};function cz(e){var t;return e.type==="pagehide"||((t=st.document)==null?void 0:t.visibilityState)==="hidden"}const uz=()=>`v5-${Date.now()}-${Math.floor(Math.random()*(9e12-1))+1e12}`,nh=(e,t=-1)=>{var i,o;const r=eh();let s="navigate";return r&&((i=st.document)!=null&&i.prerendering||Zc()>0?s="prerender":(o=st.document)!=null&&o.wasDiscarded?s="restore":r.type&&(s=r.type.replace(/_/g,"-"))),{name:e,value:t,rating:"good",delta:0,entries:[],id:uz(),navigationType:s}},z0=new WeakMap;function R_(e,t){return z0.get(e)||z0.set(e,new t),z0.get(e)}class Xm{constructor(){Xm.prototype.__init.call(this),Xm.prototype.__init2.call(this)}__init(){this._sessionValue=0}__init2(){this._sessionEntries=[]}_processEntry(t){var a;if(t.hadRecentInput)return;const r=this._sessionEntries[0],s=this._sessionEntries[this._sessionEntries.length-1];this._sessionValue&&r&&s&&t.startTime-s.startTime<1e3&&t.startTime-r.startTime<5e3?(this._sessionValue+=t.value,this._sessionEntries.push(t)):(this._sessionValue=t.value,this._sessionEntries=[t]),(a=this._onAfterProcessingUnexpectedShift)==null||a.call(this,t)}}const eu=(e,t,r={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const s=new PerformanceObserver(a=>{Promise.resolve().then(()=>{t(a.getEntries())})});return s.observe({type:e,buffered:!0,...r}),s}}catch{}},A_=e=>{let t=!1;return()=>{t||(e(),t=!0)}},zp=e=>{var t;(t=st.document)!=null&&t.prerendering?addEventListener("prerenderingchange",()=>e(),!0):e()},dz=[1800,3e3],hz=(e,t={})=>{zp(()=>{const r=th(),s=nh("FCP");let a;const o=eu("paint",l=>{for(const u of l)u.name==="first-contentful-paint"&&(o.disconnect(),u.startTime<r.firstHiddenTime&&(s.value=Math.max(u.startTime-Zc(),0),s.entries.push(u),a(!0)))});o&&(a=Zd(e,s,dz,t.reportAllChanges))})},fz=[.1,.25],mz=(e,t={})=>{hz(A_(()=>{var u;const r=nh("CLS",0);let s;const a=th(),i=R_(t,Xm),o=d=>{for(const p of d)i._processEntry(p);i._sessionValue>r.value&&(r.value=i._sessionValue,r.entries=i._sessionEntries,s())},l=eu("layout-shift",o);l&&(s=Zd(e,r,fz,t.reportAllChanges),a.onHidden(()=>{o(l.takeRecords()),s(!0)}),(u=st==null?void 0:st.setTimeout)==null||u.call(st,s))}))};let DR=0,W0=1/0,qf=0;const pz=e=>{e.forEach(t=>{t.interactionId&&(W0=Math.min(W0,t.interactionId),qf=Math.max(qf,t.interactionId),DR=qf?(qf-W0)/7+1:0)})};let Qv;const $R=()=>Qv?DR:performance.interactionCount||0,xz=()=>{"interactionCount"in performance||Qv||(Qv=eu("event",pz,{type:"event",buffered:!0,durationThreshold:0}))},G0=10;let qR=0;const gz=()=>$R()-qR;class Zm{constructor(){Zm.prototype.__init.call(this),Zm.prototype.__init2.call(this)}__init(){this._longestInteractionList=[]}__init2(){this._longestInteractionMap=new Map}_resetInteractions(){qR=$R(),this._longestInteractionList.length=0,this._longestInteractionMap.clear()}_estimateP98LongestInteraction(){const t=Math.min(this._longestInteractionList.length-1,Math.floor(gz()/50));return this._longestInteractionList[t]}_processEntry(t){var a,i;if((a=this._onBeforeProcessingEntry)==null||a.call(this,t),!(t.interactionId||t.entryType==="first-input"))return;const r=this._longestInteractionList.at(-1);let s=this._longestInteractionMap.get(t.interactionId);if(s||this._longestInteractionList.length<G0||t.duration>r._latency){if(s?t.duration>s._latency?(s.entries=[t],s._latency=t.duration):t.duration===s._latency&&t.startTime===s.entries[0].startTime&&s.entries.push(t):(s={id:t.interactionId,entries:[t],_latency:t.duration},this._longestInteractionMap.set(s.id,s),this._longestInteractionList.push(s)),this._longestInteractionList.sort((o,l)=>l._latency-o._latency),this._longestInteractionList.length>G0){const o=this._longestInteractionList.splice(G0);for(const l of o)this._longestInteractionMap.delete(l.id)}(i=this._onAfterProcessingINPCandidate)==null||i.call(this,s)}}}const FR=e=>{const t=r=>{var s;(r.type==="pagehide"||((s=st.document)==null?void 0:s.visibilityState)==="hidden")&&e(r)};Fo("visibilitychange",t,!0),Fo("pagehide",t,!0)},UR=e=>{var r;const t=st.requestIdleCallback||st.setTimeout;((r=st.document)==null?void 0:r.visibilityState)==="hidden"?e():(e=A_(e),Fo("visibilitychange",e,{once:!0,capture:!0}),t(()=>{e(),T_("visibilitychange",e,{capture:!0})}),FR(e))},yz=[200,500],bz=40,vz=(e,t={})=>{if(!(globalThis.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype))return;const r=th();zp(()=>{xz();const s=nh("INP");let a;const i=R_(t,Zm),o=u=>{UR(()=>{for(const p of u)i._processEntry(p);const d=i._estimateP98LongestInteraction();d&&d._latency!==s.value&&(s.value=d._latency,s.entries=d.entries,a())})},l=eu("event",o,{durationThreshold:t.durationThreshold??bz});a=Zd(e,s,yz,t.reportAllChanges),l&&(l.observe({type:"first-input",buffered:!0}),r.onHidden(()=>{o(l.takeRecords()),a(!0)}))})};class wz{_processEntry(t){var r;(r=this._onBeforeProcessingEntry)==null||r.call(this,t)}}const _z=[2500,4e3],jz=(e,t={})=>{zp(()=>{const r=th(),s=nh("LCP");let a;const i=R_(t,wz),o=u=>{t.reportAllChanges||(u=u.slice(-1));for(const d of u)i._processEntry(d),d.startTime<r.firstHiddenTime&&(s.value=Math.max(d.startTime-Zc(),0),s.entries=[d],a())},l=eu("largest-contentful-paint",o);if(l){a=Zd(e,s,_z,t.reportAllChanges);const u=A_(()=>{o(l.takeRecords()),l.disconnect(),a(!0)}),d=p=>{p.isTrusted&&(UR(u),T_(p.type,d,{capture:!0}))};for(const p of["keydown","click","visibilitychange"])Fo(p,d,{capture:!0})}})},Nz=[800,1800],Yv=e=>{var t,r;(t=st.document)!=null&&t.prerendering?zp(()=>Yv(e)):((r=st.document)==null?void 0:r.readyState)!=="complete"?addEventListener("load",()=>Yv(e),!0):setTimeout(e)},Sz=(e,t={})=>{const r=nh("TTFB"),s=Zd(e,r,Nz,t.reportAllChanges);Yv(()=>{const a=eh();a&&(r.value=Math.max(a.responseStart-Zc(),0),r.entries=[a],s(!0))})},ld={},ep={};let BR,HR,KR,zR;function P_(e,t=!1){return Wp("cls",e,Ez,BR,t)}function O_(e,t=!1){return Wp("lcp",e,Cz,HR,t)}function kz(e){return Wp("ttfb",e,Tz,KR)}function WR(e){return Wp("inp",e,Rz,zR)}function Xo(e,t){return GR(e,t),ep[e]||(Az(e),ep[e]=!0),VR(e,t)}function rh(e,t){const r=ld[e];if(r!=null&&r.length)for(const s of r)try{s(t)}catch(a){Jo&&ce.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${Ia(s)}
Error:`,a)}}function Ez(){return mz(e=>{rh("cls",{metric:e}),BR=e},{reportAllChanges:!0})}function Cz(){return jz(e=>{rh("lcp",{metric:e}),HR=e},{reportAllChanges:!0})}function Tz(){return Sz(e=>{rh("ttfb",{metric:e}),KR=e})}function Rz(){return vz(e=>{rh("inp",{metric:e}),zR=e})}function Wp(e,t,r,s,a=!1){GR(e,t);let i;return ep[e]||(i=r(),ep[e]=!0),s&&t({metric:s}),VR(e,t,a?i:void 0)}function Az(e){const t={};e==="event"&&(t.durationThreshold=0),eu(e,r=>{rh(e,{entries:r})},t)}function GR(e,t){ld[e]=ld[e]||[],ld[e].push(t)}function VR(e,t,r){return()=>{r&&r();const s=ld[e];if(!s)return;const a=s.indexOf(t);a!==-1&&s.splice(a,1)}}function Pz(e){return"duration"in e}function V0(e){return typeof e=="number"&&isFinite(e)}function Ui(e,t,r,{...s}){const a=We(e).start_timestamp;return a&&a>t&&typeof e.updateStartTime=="function"&&e.updateStartTime(t),zo(e,()=>{const i=os({startTime:t,...s});return i&&i.end(r),i})}function I_(e){var b;const t=Ie();if(!t)return;const{name:r,transaction:s,attributes:a,startTime:i}=e,{release:o,environment:l,sendDefaultPii:u}=t.getOptions(),d=t.getIntegrationByName("Replay"),p=d==null?void 0:d.getReplayId(),f=lt(),m=f.getUser(),x=m!==void 0?m.email||m.id||m.ip_address:void 0;let y;try{y=f.getScopeData().contexts.profile.profile_id}catch{}const g={release:o,environment:l,user:x||void 0,profile_id:y||void 0,replay_id:p||void 0,transaction:s,"user_agent.original":(b=st.navigator)==null?void 0:b.userAgent,"client.address":u?"{{auto}}":void 0,...a};return os({name:r,attributes:g,startTime:i,experimental:{standalone:!0}})}function sh(){return st.addEventListener&&st.performance}function yn(e){return e/1e3}function Oz(e){let t="unknown",r="unknown",s="";for(const a of e){if(a==="/"){[t,r]=e.split("/");break}if(!isNaN(Number(a))){t=s==="h"?"http":s,r=e.split(s)[1];break}s+=a}return s===e&&(t=s),{name:t,version:r}}function QR(e){try{return PerformanceObserver.supportedEntryTypes.includes(e)}catch{return!1}}function YR(e,t){let r,s=!1;function a(l){!s&&r&&t(l,r),s=!0}FR(()=>{a("pagehide")});const i=e.on("beforeStartNavigationSpan",(l,u)=>{u!=null&&u.isRedirect||(a("navigation"),i(),o())}),o=e.on("afterStartPageLoadSpan",l=>{r=l.spanContext().spanId,o()})}function Iz(e){let t=0,r;if(!QR("layout-shift"))return;const s=P_(({metric:a})=>{const i=a.entries[a.entries.length-1];i&&(t=a.value,r=i)},!0);YR(e,(a,i)=>{Lz(t,r,i,a),s()})}function Lz(e,t,r,s){var d;Jo&&ce.log(`Sending CLS span (${e})`);const a=t?yn((rr()||0)+t.startTime):Jt(),i=lt().getScopeData().transactionName,o=t?Cr((d=t.sources[0])==null?void 0:d.node):"Layout shift",l={[ct]:"auto.http.browser.cls",[Ut]:"ui.webvital.cls",[Vc]:0,"sentry.pageload.span_id":r,"sentry.report_event":s};t!=null&&t.sources&&t.sources.forEach((p,f)=>{l[`cls.source.${f+1}`]=Cr(p.node)});const u=I_({name:o,transaction:i,attributes:l,startTime:a});u&&(u.addEvent("cls",{[Gd]:"",[Vd]:e}),u.end(a))}function Mz(e){let t=0,r;if(!QR("largest-contentful-paint"))return;const s=O_(({metric:a})=>{const i=a.entries[a.entries.length-1];i&&(t=a.value,r=i)},!0);YR(e,(a,i)=>{Dz(t,r,i,a),s()})}function Dz(e,t,r,s){Jo&&ce.log(`Sending LCP span (${e})`);const a=yn((rr()||0)+((t==null?void 0:t.startTime)||0)),i=lt().getScopeData().transactionName,o=t?Cr(t.element):"Largest contentful paint",l={[ct]:"auto.http.browser.lcp",[Ut]:"ui.webvital.lcp",[Vc]:0,"sentry.pageload.span_id":r,"sentry.report_event":s};t&&(t.element&&(l["lcp.element"]=Cr(t.element)),t.id&&(l["lcp.id"]=t.id),t.url&&(l["lcp.url"]=t.url),t.loadTime!=null&&(l["lcp.loadTime"]=t.loadTime),t.renderTime!=null&&(l["lcp.renderTime"]=t.renderTime),t.size!=null&&(l["lcp.size"]=t.size));const u=I_({name:o,transaction:i,attributes:l,startTime:a});u&&(u.addEvent("lcp",{[Gd]:"millisecond",[Vd]:e}),u.end(a))}function es(e){return e&&((rr()||performance.timeOrigin)+e)/1e3}function JR(e){var r;const t={};if(e.nextHopProtocol!=null){const{name:s,version:a}=Oz(e.nextHopProtocol);t["network.protocol.version"]=a,t["network.protocol.name"]=s}return rr()||(r=sh())!=null&&r.timeOrigin?$z({...t,"http.request.redirect_start":es(e.redirectStart),"http.request.redirect_end":es(e.redirectEnd),"http.request.worker_start":es(e.workerStart),"http.request.fetch_start":es(e.fetchStart),"http.request.domain_lookup_start":es(e.domainLookupStart),"http.request.domain_lookup_end":es(e.domainLookupEnd),"http.request.connect_start":es(e.connectStart),"http.request.secure_connection_start":es(e.secureConnectionStart),"http.request.connection_end":es(e.connectEnd),"http.request.request_start":es(e.requestStart),"http.request.response_start":es(e.responseStart),"http.request.response_end":es(e.responseEnd),"http.request.time_to_first_byte":e.responseStart!=null?e.responseStart/1e3:void 0}):t}function $z(e){return Object.fromEntries(Object.entries(e).filter(([,t])=>t!=null))}const qz=2147483647;let Tk=0,Rs={},_r,ec;function Fz({recordClsStandaloneSpans:e,recordLcpStandaloneSpans:t,client:r}){const s=sh();if(s&&rr()){s.mark&&st.performance.mark("sentry-tracing-init");const a=t?Mz(r):zz(),i=Wz(),o=e?Iz(r):Kz();return()=>{a==null||a(),i(),o==null||o()}}return()=>{}}function Uz(){Xo("longtask",({entries:e})=>{const t=hn();if(!t)return;const{op:r,start_timestamp:s}=We(t);for(const a of e){const i=yn(rr()+a.startTime),o=yn(a.duration);r==="navigation"&&s&&i<s||Ui(t,i,i+o,{name:"Main UI thread blocked",op:"ui.long-task",attributes:{[ct]:"auto.ui.browser.metrics"}})}})}function Bz(){new PerformanceObserver(t=>{const r=hn();if(r)for(const s of t.getEntries()){if(!s.scripts[0])continue;const a=yn(rr()+s.startTime),{start_timestamp:i,op:o}=We(r);if(o==="navigation"&&i&&a<i)continue;const l=yn(s.duration),u={[ct]:"auto.ui.browser.metrics"},d=s.scripts[0],{invoker:p,invokerType:f,sourceURL:m,sourceFunctionName:x,sourceCharPosition:y}=d;u["browser.script.invoker"]=p,u["browser.script.invoker_type"]=f,m&&(u["code.filepath"]=m),x&&(u["code.function"]=x),y!==-1&&(u["browser.script.source_char_position"]=y),Ui(r,a,a+l,{name:"Main UI thread blocked",op:"ui.long-animation-frame",attributes:u})}}).observe({type:"long-animation-frame",buffered:!0})}function Hz(){Xo("event",({entries:e})=>{const t=hn();if(t){for(const r of e)if(r.name==="click"){const s=yn(rr()+r.startTime),a=yn(r.duration),i={name:Cr(r.target),op:`ui.interaction.${r.name}`,startTime:s,attributes:{[ct]:"auto.ui.browser.metrics"}},o=RT(r.target);o&&(i.attributes["ui.component_name"]=o),Ui(t,s,s+a,i)}}})}function Kz(){return P_(({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(Rs.cls={value:e.value,unit:""},ec=t)},!0)}function zz(){return O_(({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(Rs.lcp={value:e.value,unit:"millisecond"},_r=t)},!0)}function Wz(){return kz(({metric:e})=>{e.entries[e.entries.length-1]&&(Rs.ttfb={value:e.value,unit:"millisecond"})})}function Gz(e,t){const r=sh(),s=rr();if(!(r!=null&&r.getEntries)||!s)return;const a=yn(s),i=r.getEntries(),{op:o,start_timestamp:l}=We(e);i.slice(Tk).forEach(u=>{const d=yn(u.startTime),p=yn(Math.max(0,u.duration));if(!(o==="navigation"&&l&&a+d<l))switch(u.entryType){case"navigation":{Jz(e,u,a);break}case"mark":case"paint":case"measure":{Qz(e,u,d,p,a,t.ignorePerformanceApiSpans);const f=th(),m=u.startTime<f.firstHiddenTime;u.name==="first-paint"&&m&&(Rs.fp={value:u.startTime,unit:"millisecond"}),u.name==="first-contentful-paint"&&m&&(Rs.fcp={value:u.startTime,unit:"millisecond"});break}case"resource":{eW(e,u,u.name,d,p,a,t.ignoreResourceSpans);break}}}),Tk=Math.max(i.length-1,0),tW(e),o==="pageload"&&(sW(Rs),t.recordClsOnPageloadSpan||delete Rs.cls,t.recordLcpOnPageloadSpan||delete Rs.lcp,Object.entries(Rs).forEach(([u,d])=>{i3(u,d.value,d.unit)}),e.setAttribute("performance.timeOrigin",a),e.setAttribute("performance.activationStart",Zc()),nW(e,t)),_r=void 0,ec=void 0,Rs={}}function Vz(e){if((e==null?void 0:e.entryType)==="measure")try{return e.detail.devtools.track==="Components "}catch{return}}function Qz(e,t,r,s,a,i){if(Vz(t)||["mark","measure"].includes(t.entryType)&&Os(t.name,i))return;const o=eh(!1),l=yn(o?o.requestStart:0),u=a+Math.max(r,l),d=a+r,p=d+s,f={[ct]:"auto.resource.browser.metrics"};u!==d&&(f["sentry.browser.measure_happened_before_request"]=!0,f["sentry.browser.measure_start_time"]=u),Yz(f,t),u<=p&&Ui(e,u,p,{name:t.name,op:t.entryType,attributes:f})}function Yz(e,t){try{const r=t.detail;if(!r)return;if(typeof r=="object"){for(const[s,a]of Object.entries(r))if(a&&$i(a))e[`sentry.browser.measure.detail.${s}`]=a;else if(a!==void 0)try{e[`sentry.browser.measure.detail.${s}`]=JSON.stringify(a)}catch{}return}if($i(r)){e["sentry.browser.measure.detail"]=r;return}try{e["sentry.browser.measure.detail"]=JSON.stringify(r)}catch{}}catch{}}function Jz(e,t,r){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(s=>{Ff(e,t,s,r)}),Ff(e,t,"secureConnection",r,"TLS/SSL"),Ff(e,t,"fetch",r,"cache"),Ff(e,t,"domainLookup",r,"DNS"),Zz(e,t,r)}function Ff(e,t,r,s,a=r){const i=Xz(r),o=t[i],l=t[`${r}Start`];!l||!o||Ui(e,s+yn(l),s+yn(o),{op:`browser.${a}`,name:t.name,attributes:{[ct]:"auto.ui.browser.metrics",...r==="redirect"&&t.redirectCount!=null?{"http.redirect_count":t.redirectCount}:{}}})}function Xz(e){return e==="secureConnection"?"connectEnd":e==="fetch"?"domainLookupStart":`${e}End`}function Zz(e,t,r){const s=r+yn(t.requestStart),a=r+yn(t.responseEnd),i=r+yn(t.responseStart);t.responseEnd&&(Ui(e,s,a,{op:"browser.request",name:t.name,attributes:{[ct]:"auto.ui.browser.metrics"}}),Ui(e,i,a,{op:"browser.response",name:t.name,attributes:{[ct]:"auto.ui.browser.metrics"}}))}function eW(e,t,r,s,a,i,o){if(t.initiatorType==="xmlhttprequest"||t.initiatorType==="fetch")return;const l=t.initiatorType?`resource.${t.initiatorType}`:"resource.other";if(o!=null&&o.includes(l))return;const u={[ct]:"auto.resource.browser.metrics"},d=qo(r);d.protocol&&(u["url.scheme"]=d.protocol.split(":").pop()),d.host&&(u["server.address"]=d.host),u["url.same_origin"]=r.includes(st.location.origin),rW(t,u,[["responseStatus","http.response.status_code"],["transferSize","http.response_transfer_size"],["encodedBodySize","http.response_content_length"],["decodedBodySize","http.decoded_response_content_length"],["renderBlockingStatus","resource.render_blocking_status"],["deliveryType","http.response_delivery_type"]]);const p={...u,...JR(t)},f=i+s,m=f+a;Ui(e,f,m,{name:r.replace(st.location.origin,""),op:l,attributes:p})}function tW(e){const t=st.navigator;if(!t)return;const r=t.connection;r&&(r.effectiveType&&e.setAttribute("effectiveConnectionType",r.effectiveType),r.type&&e.setAttribute("connectionType",r.type),V0(r.rtt)&&(Rs["connection.rtt"]={value:r.rtt,unit:"millisecond"})),V0(t.deviceMemory)&&e.setAttribute("deviceMemory",`${t.deviceMemory} GB`),V0(t.hardwareConcurrency)&&e.setAttribute("hardwareConcurrency",String(t.hardwareConcurrency))}function nW(e,t){_r&&t.recordLcpOnPageloadSpan&&(_r.element&&e.setAttribute("lcp.element",Cr(_r.element)),_r.id&&e.setAttribute("lcp.id",_r.id),_r.url&&e.setAttribute("lcp.url",_r.url.trim().slice(0,200)),_r.loadTime!=null&&e.setAttribute("lcp.loadTime",_r.loadTime),_r.renderTime!=null&&e.setAttribute("lcp.renderTime",_r.renderTime),e.setAttribute("lcp.size",_r.size)),ec!=null&&ec.sources&&t.recordClsOnPageloadSpan&&ec.sources.forEach((r,s)=>e.setAttribute(`cls.source.${s+1}`,Cr(r.node)))}function rW(e,t,r){r.forEach(([s,a])=>{const i=e[s];i!=null&&(typeof i=="number"&&i<qz||typeof i=="string")&&(t[a]=i)})}function sW(e){const t=eh(!1);if(!t)return;const{responseStart:r,requestStart:s}=t;s<=r&&(e["ttfb.requestTime"]={value:r-s,unit:"millisecond"})}function aW(){return sh()&&rr()?Xo("element",iW):()=>{}}const iW=({entries:e})=>{const t=hn(),r=t?dn(t):void 0,s=r?We(r).description:lt().getScopeData().transactionName;e.forEach(a=>{var x,y;const i=a;if(!i.identifier)return;const o=i.name,l=i.renderTime,u=i.loadTime,[d,p]=u?[yn(u),"load-time"]:l?[yn(l),"render-time"]:[Jt(),"entry-emission"],f=o==="image-paint"?yn(Math.max(0,(l??0)-(u??0))):0,m={[ct]:"auto.ui.browser.elementtiming",[Ut]:"ui.elementtiming",[At]:"component","sentry.span_start_time_source":p,"sentry.transaction_name":s,"element.id":i.id,"element.type":((y=(x=i.element)==null?void 0:x.tagName)==null?void 0:y.toLowerCase())||"unknown","element.size":i.naturalWidth&&i.naturalHeight?`${i.naturalWidth}x${i.naturalHeight}`:void 0,"element.render_time":l,"element.load_time":u,"element.url":i.url||void 0,"element.identifier":i.identifier,"element.paint_type":o};na({name:`element[${i.identifier}]`,attributes:m,startTime:d,onlyIfParent:!0},g=>{g.end(d+f)})})},oW=1e3;let Rk,Jv,Xv;function XR(e){Wi("dom",e),Gi("dom",lW)}function lW(){if(!st.document)return;const e=as.bind(null,"dom"),t=Ak(e,!0);st.document.addEventListener("click",t,!1),st.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(r=>{var i,o;const a=(i=st[r])==null?void 0:i.prototype;(o=a==null?void 0:a.hasOwnProperty)!=null&&o.call(a,"addEventListener")&&(Kn(a,"addEventListener",function(l){return function(u,d,p){if(u==="click"||u=="keypress")try{const f=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},m=f[u]=f[u]||{refCount:0};if(!m.handler){const x=Ak(e);m.handler=x,l.call(this,u,x,p)}m.refCount++}catch{}return l.call(this,u,d,p)}}),Kn(a,"removeEventListener",function(l){return function(u,d,p){if(u==="click"||u=="keypress")try{const f=this.__sentry_instrumentation_handlers__||{},m=f[u];m&&(m.refCount--,m.refCount<=0&&(l.call(this,u,m.handler,p),m.handler=void 0,delete f[u]),Object.keys(f).length===0&&delete this.__sentry_instrumentation_handlers__)}catch{}return l.call(this,u,d,p)}}))})}function cW(e){if(e.type!==Jv)return!1;try{if(!e.target||e.target._sentryId!==Xv)return!1}catch{}return!0}function uW(e,t){return e!=="keypress"?!1:t!=null&&t.tagName?!(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable):!0}function Ak(e,t=!1){return r=>{if(!r||r._sentryCaptured)return;const s=dW(r);if(uW(r.type,s))return;In(r,"_sentryCaptured",!0),s&&!s._sentryId&&In(s,"_sentryId",On());const a=r.type==="keypress"?"input":r.type;cW(r)||(e({event:r,name:a,global:t}),Jv=r.type,Xv=s?s._sentryId:void 0),clearTimeout(Rk),Rk=st.setTimeout(()=>{Xv=void 0,Jv=void 0},oW)}}function dW(e){try{return e.target}catch{return null}}let Uf;function Gp(e){const t="history";Wi(t,e),Gi(t,hW)}function hW(){if(st.addEventListener("popstate",()=>{const t=st.location.href,r=Uf;if(Uf=t,r===t)return;as("history",{from:r,to:t})}),!wH())return;function e(t){return function(...r){const s=r.length>2?r[2]:void 0;if(s){const a=Uf,i=fW(String(s));if(Uf=i,a===i)return t.apply(this,r);as("history",{from:a,to:i})}return t.apply(this,r)}}Kn(st.history,"pushState",e),Kn(st.history,"replaceState",e)}function fW(e){try{return new URL(e,st.location.origin).toString()}catch{return e}}const ym={};function L_(e){const t=ym[e];if(t)return t;let r=st[e];if(Bv(r))return ym[e]=r.bind(st);const s=st.document;if(s&&typeof s.createElement=="function")try{const a=s.createElement("iframe");a.hidden=!0,s.head.appendChild(a);const i=a.contentWindow;i!=null&&i[e]&&(r=i[e]),s.head.removeChild(a)}catch(a){Jo&&ce.warn(`Could not create sandbox iframe for ${e} check, bailing to window.${e}: `,a)}return r&&(ym[e]=r.bind(st))}function mW(e){ym[e]=void 0}function ah(...e){return L_("setTimeout")(...e)}const Na="__sentry_xhr_v3__";function M_(e){Wi("xhr",e),Gi("xhr",pW)}function pW(){if(!st.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;e.open=new Proxy(e.open,{apply(t,r,s){const a=new Error,i=Jt()*1e3,o=Ps(s[0])?s[0].toUpperCase():void 0,l=xW(s[1]);if(!o||!l)return t.apply(r,s);r[Na]={method:o,url:l,request_headers:{}},o==="POST"&&l.match(/sentry_key/)&&(r.__sentry_own_request__=!0);const u=()=>{const d=r[Na];if(d&&r.readyState===4){try{d.status_code=r.status}catch{}const p={endTimestamp:Jt()*1e3,startTimestamp:i,xhr:r,virtualError:a};as("xhr",p)}};return"onreadystatechange"in r&&typeof r.onreadystatechange=="function"?r.onreadystatechange=new Proxy(r.onreadystatechange,{apply(d,p,f){return u(),d.apply(p,f)}}):r.addEventListener("readystatechange",u),r.setRequestHeader=new Proxy(r.setRequestHeader,{apply(d,p,f){const[m,x]=f,y=p[Na];return y&&Ps(m)&&Ps(x)&&(y.request_headers[m.toLowerCase()]=x),d.apply(p,f)}}),t.apply(r,s)}}),e.send=new Proxy(e.send,{apply(t,r,s){const a=r[Na];if(!a)return t.apply(r,s);s[0]!==void 0&&(a.body=s[0]);const i={startTimestamp:Jt()*1e3,xhr:r};return as("xhr",i),t.apply(r,s)}})}function xW(e){if(Ps(e))return e;try{return e.toString()}catch{}}const gW=Symbol.for("sentry__originalRequestBody");function ZR(e){return new URLSearchParams(e).toString()}function tp(e,t=ce){try{if(typeof e=="string")return[e];if(e instanceof URLSearchParams)return[e.toString()];if(e instanceof FormData)return[ZR(e)];if(!e)return[void 0]}catch(r){return Jo&&t.error(r,"Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return Jo&&t.log("Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function D_(e=[]){if(e.length>=2&&e[1]&&typeof e[1]=="object"&&"body"in e[1])return e[1].body;if(e.length>=1&&e[0]instanceof Request){const r=e[0][gW];return r!==void 0?r:void 0}}function eA(e){let t;try{t=e.getAllResponseHeaders()}catch(r){return Jo&&ce.error(r,"Failed to get xhr response headers",e),{}}return t?t.split(`\r
`).reduce((r,s)=>{const[a,i]=s.split(": ");return i&&(r[a.toLowerCase()]=i),r},{}):{}}const Q0=[],bm=new Map,Fl=new Map,yW=60;function bW(){if(sh()&&rr()){const t=vW();return()=>{t()}}return()=>{}}const Zv={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};function vW(){return WR(wW)}const wW=({metric:e})=>{if(e.value==null)return;const t=yn(e.value);if(t>yW)return;const r=e.entries.find(y=>y.duration===e.value&&Zv[y.name]);if(!r)return;const{interactionId:s}=r,a=Zv[r.name],i=yn(rr()+r.startTime),o=hn(),l=o?dn(o):void 0,u=s!=null?bm.get(s):void 0,d=(u==null?void 0:u.span)||l,p=d?We(d).description:lt().getScopeData().transactionName,f=(u==null?void 0:u.elementName)||Cr(r.target),m={[ct]:"auto.http.browser.inp",[Ut]:`ui.interaction.${a}`,[Vc]:r.duration},x=I_({name:f,transaction:p,attributes:m,startTime:i});x&&(x.addEvent("inp",{[Gd]:"millisecond",[Vd]:e.value}),x.end(i+t))};function _W(){const e=Object.keys(Zv);Ym()&&e.forEach(a=>{st.addEventListener(a,t,{capture:!0,passive:!0})});function t(a){const i=a.target;if(!i)return;const o=Cr(i),l=Math.round(a.timeStamp);if(Fl.set(l,o),Fl.size>50){const u=Fl.keys().next().value;u!==void 0&&Fl.delete(u)}}function r(a){const i=Math.round(a.startTime);let o=Fl.get(i);if(!o)for(let l=-5;l<=5;l++){const u=Fl.get(i+l);if(u){o=u;break}}return o||"<unknown>"}const s=({entries:a})=>{const i=hn(),o=i&&dn(i);a.forEach(l=>{if(!Pz(l))return;const u=l.interactionId;if(u==null||bm.has(u))return;const d=l.target?Cr(l.target):r(l);if(Q0.length>10){const p=Q0.shift();bm.delete(p)}Q0.push(u),bm.set(u,{span:o,elementName:d})})};Xo("event",s),Xo("first-input",s)}const jW=40;function $_(e,t=L_("fetch")){let r=0,s=0;async function a(i){const o=i.body.length;r+=o,s++;const l={body:i.body,method:"POST",referrerPolicy:"strict-origin",headers:e.headers,keepalive:r<=6e4&&s<15,...e.fetchOptions};try{const u=await t(e.url,l);return{statusCode:u.status,headers:{"x-sentry-rate-limits":u.headers.get("X-Sentry-Rate-Limits"),"retry-after":u.headers.get("Retry-After")}}}catch(u){throw mW("fetch"),u}finally{r-=o,s--}}return C3(e,a,o_(e.bufferSize||jW))}const Re=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function NW(){const e=Ie();if(!e){Re&&ce.warn("No Sentry client available, profiling is not started");return}if(!e.getIntegrationByName("BrowserProfiling")){Re&&ce.warn("BrowserProfiling integration is not available");return}e.emit("startUIProfiler")}function SW(){const e=Ie();if(!e){Re&&ce.warn("No Sentry client available, profiling is not started");return}if(!e.getIntegrationByName("BrowserProfiling")){Re&&ce.warn("ProfilingIntegration is not available");return}e.emit("stopUIProfiler")}const kW={startProfiler:NW,stopProfiler:SW},EW=10,CW=20,TW=30,RW=40,AW=50;function Pc(e,t,r,s){const a={filename:e,function:t==="<anonymous>"?Zs:t,in_app:!0};return r!==void 0&&(a.lineno=r),s!==void 0&&(a.colno=s),a}const PW=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,OW=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,IW=/\((\S*)(?::(\d+))(?::(\d+))\)/,LW=/at (.+?) ?\(data:(.+?),/,MW=e=>{const t=e.match(LW);if(t)return{filename:`<data:${t[2]}>`,function:t[1]};const r=PW.exec(e);if(r){const[,a,i,o]=r;return Pc(a,Zs,+i,+o)}const s=OW.exec(e);if(s){if(s[2]&&s[2].indexOf("eval")===0){const l=IW.exec(s[2]);l&&(s[2]=l[1],s[3]=l[2],s[4]=l[3])}const[i,o]=aA(s[1]||Zs,s[2]);return Pc(o,i,s[3]?+s[3]:void 0,s[4]?+s[4]:void 0)}},tA=[TW,MW],DW=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,$W=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,qW=e=>{const t=DW.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const i=$W.exec(t[3]);i&&(t[1]=t[1]||"eval",t[3]=i[1],t[4]=i[2],t[5]="")}let s=t[3],a=t[1]||Zs;return[a,s]=aA(a,s),Pc(s,a,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}},nA=[AW,qW],FW=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,UW=e=>{const t=FW.exec(e);return t?Pc(t[2],t[1]||Zs,+t[3],t[4]?+t[4]:void 0):void 0},BW=[RW,UW],HW=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,KW=e=>{const t=HW.exec(e);return t?Pc(t[2],t[3]||Zs,+t[1]):void 0},zW=[EW,KW],WW=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,GW=e=>{const t=WW.exec(e);return t?Pc(t[5],t[3]||t[4]||Zs,+t[1],+t[2]):void 0},VW=[CW,GW],rA=[tA,nA],sA=jT(...rA),aA=(e,t)=>{const r=e.indexOf("safari-extension")!==-1,s=e.indexOf("safari-web-extension")!==-1;return r||s?[e.indexOf("@")!==-1?e.split("@")[0]:Zs,r?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]};function QW(e,{metadata:t,tunnel:r,dsn:s}){const a={event_id:e.event_id,sent_at:new Date().toISOString(),...(t==null?void 0:t.sdk)&&{sdk:{name:t.sdk.name,version:t.sdk.version}},...!!r&&!!s&&{dsn:Ua(s)}},i=YW(e);return qs(a,[i])}function YW(e){return[{type:"user_report"},e]}const Bf=1024,JW="Breadcrumbs",XW=((e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:JW,setup(r){t.console&&d_(tG(r)),t.dom&&XR(eG(r,t.dom)),t.xhr&&M_(nG(r)),t.fetch&&w_(rG(r)),t.history&&Gp(sG(r)),t.sentry&&r.on("beforeSendEvent",ZW(r))}}}),iA=XW;function ZW(e){return function(r){Ie()===e&&Ds({category:`sentry.${r.type==="transaction"?"transaction":"event"}`,event_id:r.event_id,level:r.level,message:yo(r)},{event:r})}}function eG(e,t){return function(s){if(Ie()!==e)return;let a,i,o=typeof t=="object"?t.serializeAttribute:void 0,l=typeof t=="object"&&typeof t.maxStringLength=="number"?t.maxStringLength:void 0;l&&l>Bf&&(Re&&ce.warn(`\`dom.maxStringLength\` cannot exceed ${Bf}, but a value of ${l} was configured. Sentry will use ${Bf} instead.`),l=Bf),typeof o=="string"&&(o=[o]);try{const d=s.event,p=aG(d)?d.target:d;a=Cr(p,{keyAttrs:o,maxStringLength:l}),i=RT(p)}catch{a="<unknown>"}if(a.length===0)return;const u={category:`ui.${s.name}`,message:a};i&&(u.data={"ui.component_name":i}),Ds(u,{event:s.event,name:s.name,global:s.global})}}function tG(e){return function(r){if(Ie()!==e)return;const s={category:"console",data:{arguments:r.args,logger:"console"},level:zm(r.level),message:Dm(r.args," ")};if(r.level==="assert")if(r.args[0]===!1)s.message=`Assertion failed: ${Dm(r.args.slice(1)," ")||"console.assert"}`,s.data.arguments=r.args.slice(1);else return;Ds(s,{input:r.args,level:r.level})}}function nG(e){return function(r){if(Ie()!==e)return;const{startTimestamp:s,endTimestamp:a}=r,i=r.xhr[Na];if(!s||!a||!i)return;const{method:o,url:l,status_code:u,body:d}=i,p={method:o,url:l,status_code:u},f={xhr:r.xhr,input:d,startTimestamp:s,endTimestamp:a},m={category:"xhr",data:p,type:"http",level:fR(u)};e.emit("beforeOutgoingRequestBreadcrumb",m,f),Ds(m,f)}}function rG(e){return function(r){if(Ie()!==e)return;const{startTimestamp:s,endTimestamp:a}=r;if(a&&!(r.fetchData.url.match(/sentry_key/)&&r.fetchData.method==="POST"))if(r.fetchData.method,r.fetchData.url,r.error){const i=r.fetchData,o={data:r.error,input:r.args,startTimestamp:s,endTimestamp:a},l={category:"fetch",data:i,level:"error",type:"http"};e.emit("beforeOutgoingRequestBreadcrumb",l,o),Ds(l,o)}else{const i=r.response,o={...r.fetchData,status_code:i==null?void 0:i.status};r.fetchData.request_body_size,r.fetchData.response_body_size,i==null||i.status;const l={input:r.args,response:i,startTimestamp:s,endTimestamp:a},u={category:"fetch",data:o,type:"http",level:fR(o.status_code)};e.emit("beforeOutgoingRequestBreadcrumb",u,l),Ds(u,l)}}}function sG(e){return function(r){if(Ie()!==e)return;let s=r.from,a=r.to;const i=qo(Le.location.href);let o=s?qo(s):void 0;const l=qo(a);o!=null&&o.path||(o=i),i.protocol===l.protocol&&i.host===l.host&&(a=l.relative),i.protocol===o.protocol&&i.host===o.host&&(s=o.relative),Ds({category:"navigation",data:{from:s,to:a}})}}function aG(e){return!!e&&!!e.target}const iG=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],oG="BrowserApiErrors",lG=((e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,unregisterOriginalCallbacks:!1,...e};return{name:oG,setupOnce(){t.setTimeout&&Kn(Le,"setTimeout",Pk),t.setInterval&&Kn(Le,"setInterval",Pk),t.requestAnimationFrame&&Kn(Le,"requestAnimationFrame",cG),t.XMLHttpRequest&&"XMLHttpRequest"in Le&&Kn(XMLHttpRequest.prototype,"send",uG);const r=t.eventTarget;r&&(Array.isArray(r)?r:iG).forEach(a=>dG(a,t))}}}),oA=lG;function Pk(e){return function(...t){const r=t[0];return t[0]=Ac(r,{mechanism:{handled:!1,type:`auto.browser.browserapierrors.${Ia(e)}`}}),e.apply(this,t)}}function cG(e){return function(t){return e.apply(this,[Ac(t,{mechanism:{data:{handler:Ia(e)},handled:!1,type:"auto.browser.browserapierrors.requestAnimationFrame"}})])}}function uG(e){return function(...t){const r=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(a=>{a in r&&typeof r[a]=="function"&&Kn(r,a,function(i){const o={mechanism:{data:{handler:Ia(i)},handled:!1,type:`auto.browser.browserapierrors.xhr.${a}`}},l=Kw(i);return l&&(o.mechanism.data.handler=Ia(l)),Ac(i,o)})}),e.apply(this,t)}}function dG(e,t){var a,i;const s=(a=Le[e])==null?void 0:a.prototype;(i=s==null?void 0:s.hasOwnProperty)!=null&&i.call(s,"addEventListener")&&(Kn(s,"addEventListener",function(o){return function(l,u,d){try{hG(u)&&(u.handleEvent=Ac(u.handleEvent,{mechanism:{data:{handler:Ia(u),target:e},handled:!1,type:"auto.browser.browserapierrors.handleEvent"}}))}catch{}return t.unregisterOriginalCallbacks&&fG(this,l,u),o.apply(this,[l,Ac(u,{mechanism:{data:{handler:Ia(u),target:e},handled:!1,type:"auto.browser.browserapierrors.addEventListener"}}),d])}}),Kn(s,"removeEventListener",function(o){return function(l,u,d){try{const p=u.__sentry_wrapped__;p&&o.call(this,l,p,d)}catch{}return o.call(this,l,u,d)}}))}function hG(e){return typeof e.handleEvent=="function"}function fG(e,t,r){e&&typeof e=="object"&&"removeEventListener"in e&&typeof e.removeEventListener=="function"&&e.removeEventListener(t,r)}const lA=()=>({name:"BrowserSession",setupOnce(){if(typeof Le.document>"u"){Re&&ce.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.");return}Ov({ignoreDuration:!0}),Iv(),Gp(({from:e,to:t})=>{e!==void 0&&e!==t&&(Ov({ignoreDuration:!0}),Iv())})}}),mG="GlobalHandlers",pG=((e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:mG,setupOnce(){Error.stackTraceLimit=50},setup(r){t.onerror&&(xG(r),Ok("onerror")),t.onunhandledrejection&&(gG(r),Ok("onunhandledrejection"))}}}),cA=pG;function xG(e){ST(t=>{const{stackParser:r,attachStacktrace:s}=hA();if(Ie()!==e||RR())return;const{msg:a,url:i,line:o,column:l,error:u}=t,d=yG(Kp(r,u||a,void 0,s,!1),i,o,l);d.level="error",Qc(d,{originalException:u,mechanism:{handled:!1,type:"auto.browser.global_handlers.onerror"}})})}function gG(e){kT(t=>{const{stackParser:r,attachStacktrace:s}=hA();if(Ie()!==e||RR())return;const a=uA(t),i=$i(a)?dA(a):Kp(r,a,void 0,s,!0);i.level="error",Qc(i,{originalException:a,mechanism:{handled:!1,type:"auto.browser.global_handlers.onunhandledrejection"}})})}function uA(e){if($i(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch{}return e}function dA(e){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(e)}`}]}}}function yG(e,t,r,s){const a=e.exception=e.exception||{},i=a.values=a.values||[],o=i[0]=i[0]||{},l=o.stacktrace=o.stacktrace||{},u=l.frames=l.frames||[],d=s,p=r,f=bG(t)??rl();return u.length===0&&u.push({colno:d,filename:f,function:Zs,in_app:!0,lineno:p}),e}function Ok(e){Re&&ce.log(`Global Handler attached: ${e}`)}function hA(){const e=Ie();return(e==null?void 0:e.getOptions())||{stackParser:()=>[],attachStacktrace:!1}}function bG(e){if(!(!Ps(e)||e.length===0)){if(e.startsWith("data:")){const t=e.match(/^data:([^;]+)/),r=t?t[1]:"text/javascript",s=e.includes("base64,");return`<data:${r}${s?",base64":""}>`}return e}}const fA=()=>({name:"HttpContext",preprocessEvent(e){var s;if(!Le.navigator&&!Le.location&&!Le.document)return;const t=E_(),r={...t.headers,...(s=e.request)==null?void 0:s.headers};e.request={...t,...e.request,headers:r}}}),vG="cause",wG=5,_G="LinkedErrors",jG=((e={})=>{const t=e.limit||wG,r=e.key||vG;return{name:_G,preprocessEvent(s,a,i){const o=i.getOptions();uU(Hp,o.stackParser,r,t,s,a)}}}),mA=jG,NG="SpotlightBrowser",SG=((e={})=>{const t=e.sidecarUrl||"http://localhost:8969/stream";return{name:NG,setup:()=>{Re&&ce.log("Using Sidecar URL",t)},processEvent:r=>CG(r)?null:r,afterAllSetup:r=>{kG(r,t)}}});function kG(e,t){const r=L_("fetch");let s=0;e.on("beforeEnvelope",a=>{if(s>3){ce.warn("[Spotlight] Disabled Sentry -> Spotlight integration due to too many failed requests:",s);return}r(t,{method:"POST",body:Um(a),headers:{"Content-Type":"application/x-sentry-envelope"},mode:"cors"}).then(i=>{i.status>=200&&i.status<400&&(s=0)},i=>{s++,ce.error("Sentry SDK can't connect to Sidecar is it running? See: https://spotlightjs.com/sidecar/npx/",i)})})}const EG=SG;function CG(e){var t;return!!(e.type==="transaction"&&e.spans&&((t=e.contexts)!=null&&t.trace)&&e.contexts.trace.op==="ui.action.click"&&e.spans.some(({description:r})=>r==null?void 0:r.includes("#sentry-spotlight")))}function TG(){return RG()?(Re&&zi(()=>{console.error("[Sentry] You cannot use Sentry.init() in a browser extension, see: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")}),!0):!1}function RG(){var i;if(typeof Le.window>"u")return!1;const e=Le;if(e.nw)return!1;const t=e.chrome||e.browser;if(!((i=t==null?void 0:t.runtime)!=null&&i.id))return!1;const r=rl(),s=["chrome-extension","moz-extension","ms-browser-extension","safari-web-extension"];return!(Le===Le.top&&s.some(o=>r.startsWith(`${o}://`)))}function pA(e){return[B3(),F3(),oA(),iA(),cA(),mA(),W3(),fA(),lA()]}function AG(e={}){const t=!e.skipBrowserExtensionCheck&&TG();let r=e.defaultIntegrations==null?pA():e.defaultIntegrations;const s={...e,enabled:t?!1:e.enabled,stackParser:X$(e.stackParser||sA),integrations:i7({integrations:e.integrations,defaultIntegrations:r}),transport:e.transport||$_};return D7(LR,s)}function PG(){}function OG(e){e()}function ew(e={}){const t=Le.document,r=(t==null?void 0:t.head)||(t==null?void 0:t.body);if(!r){Re&&ce.error("[showReportDialog] Global document not defined");return}const s=lt(),a=Ie(),i=a==null?void 0:a.getDsn();if(!i){Re&&ce.error("[showReportDialog] DSN not configured");return}const o={...e,user:{...s.getUser(),...e.user},eventId:e.eventId||m3()},l=Le.document.createElement("script");l.async=!0,l.crossOrigin="anonymous",l.src=s7(i,o);const{onLoad:u,onClose:d}=o;if(u&&(l.onload=u),d){const p=f=>{if(f.data==="__sentry_reportdialog_closed__")try{d()}finally{Le.removeEventListener("message",p)}};Le.addEventListener("message",p)}r.appendChild(l)}const IG=Xe,LG="ReportingObserver",Ik=new WeakMap,MG=((e={})=>{const t=e.types||["crash","deprecation","intervention"];function r(s){if(Ik.has(Ie()))for(const a of s)Pr(i=>{i.setExtra("url",a.url);const o=`ReportingObserver [${a.type}]`;let l="No details available";if(a.body){const u={};for(const d in a.body)u[d]=a.body[d];if(i.setExtra("body",u),a.type==="crash"){const d=a.body;l=[d.crashId||"",d.reason||""].join(" ").trim()||l}else l=a.body.message||l}f3(`${o}: ${l}`)})}return{name:LG,setupOnce(){if(!jH())return;new IG.ReportingObserver(r,{buffered:!0,types:t}).observe()},setup(s){Ik.set(s,!0)}}}),DG=MG,$G="HttpClient",qG=((e={})=>{const t={failedRequestStatusCodes:[[500,599]],failedRequestTargets:[/.*/],...e};return{name:$G,setup(r){VG(r,t),QG(r,t)}}}),FG=qG;function UG(e,t,r,s,a){if(gA(e,r.status,r.url)){const i=YG(t,s);let o,l,u,d;bA()&&([o,u]=Lk("Cookie",i),[l,d]=Lk("Set-Cookie",r));const p=yA({url:i.url,method:i.method,status:r.status,requestHeaders:o,responseHeaders:l,requestCookies:u,responseCookies:d,error:a,type:"fetch"});Qc(p)}}function Lk(e,t){const r=KG(t.headers);let s;try{const a=r[e]||r[e.toLowerCase()]||void 0;a&&(s=xA(a))}catch{}return[r,s]}function BG(e,t,r,s,a){if(gA(e,t.status,t.responseURL)){let i,o,l;if(bA()){try{const d=t.getResponseHeader("Set-Cookie")||t.getResponseHeader("set-cookie")||void 0;d&&(o=xA(d))}catch{}try{l=zG(t)}catch{}i=s}const u=yA({url:t.responseURL,method:r,status:t.status,requestHeaders:i,responseHeaders:l,responseCookies:o,error:a,type:"xhr"});Qc(u)}}function HG(e){if(e){const t=e["Content-Length"]||e["content-length"];if(t)return parseInt(t,10)}}function xA(e){return e.split("; ").reduce((t,r)=>{const[s,a]=r.split("=");return s&&a&&(t[s]=a),t},{})}function KG(e){const t={};return e.forEach((r,s)=>{t[s]=r}),t}function zG(e){const t=e.getAllResponseHeaders();return t?t.split(`\r
`).reduce((r,s)=>{const[a,i]=s.split(": ");return a&&i&&(r[a]=i),r},{}):{}}function WG(e,t){return e.some(r=>typeof r=="string"?t.includes(r):r.test(t))}function GG(e,t){return e.some(r=>typeof r=="number"?r===t:t>=r[0]&&t<=r[1])}function VG(e,t){mR()&&w_(r=>{if(Ie()!==e)return;const{response:s,args:a,error:i,virtualError:o}=r,[l,u]=a;s&&UG(t,l,s,u,i||o)},!1)}function QG(e,t){"XMLHttpRequest"in Xe&&M_(r=>{if(Ie()!==e)return;const{error:s,virtualError:a}=r,i=r.xhr,o=i[Na];if(!o)return;const{method:l,request_headers:u}=o;try{BG(t,i,l,u,s||a)}catch(d){Re&&ce.warn("Error while extracting response event form XHR response",d)}})}function gA(e,t,r){return GG(e.failedRequestStatusCodes,t)&&WG(e.failedRequestTargets,r)&&!D3(r,Ie())}function yA(e){const t=Ie(),r=t&&e.error&&e.error instanceof Error?e.error.stack:void 0,s=r&&t?t.getOptions().stackParser(r,0,1):void 0,a=`HTTP Client Error with status code: ${e.status}`,i={message:a,exception:{values:[{type:"Error",value:a,stacktrace:s?{frames:s}:void 0}]},request:{url:e.url,method:e.method,headers:e.requestHeaders,cookies:e.requestCookies},contexts:{response:{status_code:e.status,headers:e.responseHeaders,cookies:e.responseCookies,body_size:HG(e.responseHeaders)}}};return Ma(i,{type:`auto.http.client.${e.type}`,handled:!1}),i}function YG(e,t){return!t&&e instanceof Request||e instanceof Request&&e.bodyUsed?e:new Request(e,t)}function bA(){const e=Ie();return e?!!e.getOptions().sendDefaultPii:!1}const Y0=Xe,JG=7,XG="ContextLines",ZG=((e={})=>{const t=e.frameContextLines!=null?e.frameContextLines:JG;return{name:XG,processEvent(r){return tV(r,t)}}}),eV=ZG;function tV(e,t){var l;const r=Y0.document,s=Y0.location&&M3(Y0.location.href);if(!r||!s)return e;const a=(l=e.exception)==null?void 0:l.values;if(!(a!=null&&a.length))return e;const i=r.documentElement.innerHTML;if(!i)return e;const o=["<!DOCTYPE html>","<html>",...i.split(`
`),"</html>"];return a.forEach(u=>{const d=u.stacktrace;d!=null&&d.frames&&(d.frames=d.frames.map(p=>nV(p,o,s,t)))}),e}function nV(e,t,r,s){return e.filename!==r||!e.lineno||!t.length||dq(t,e,s),e}const rV="GraphQLClient",sV=(e=>({name:rV,setup(t){aV(t,e),iV(t,e)}}));function aV(e,t){e.on("beforeOutgoingRequestSpan",(r,s)=>{const i=We(r).data||{};if(!(i[Ut]==="http.client"))return;const u=i[Eq]||i["http.url"],d=i[kq]||i["http.method"];if(!Ps(u)||!Ps(d))return;const{endpoints:p}=t,f=Os(u,p),m=wA(s);if(f&&m){const x=_A(m);if(x){const y=vA(x);r.updateName(`${d} ${u} (${y})`),Vp(x)&&r.setAttribute("graphql.document",x.query),Qp(x)&&(r.setAttribute("graphql.persisted_query.hash.sha256",x.extensions.persistedQuery.sha256Hash),r.setAttribute("graphql.persisted_query.version",x.extensions.persistedQuery.version))}}})}function iV(e,t){e.on("beforeOutgoingRequestBreadcrumb",(r,s)=>{const{category:a,type:i,data:o}=r;if(i==="http"&&(a==="fetch"||a==="xhr")){const p=o==null?void 0:o.url,{endpoints:f}=t,m=Os(p,f),x=wA(s);if(m&&o&&x){const y=_A(x);if(!o.graphql&&y){const g=vA(y);o["graphql.operation"]=g,Vp(y)&&(o["graphql.document"]=y.query),Qp(y)&&(o["graphql.persisted_query.hash.sha256"]=y.extensions.persistedQuery.sha256Hash,o["graphql.persisted_query.version"]=y.extensions.persistedQuery.version)}}}})}function vA(e){if(Qp(e))return`persisted ${e.operationName}`;if(Vp(e)){const{query:t,operationName:r}=e,{operationName:s=r,operationType:a}=oV(t);return s?`${a} ${s}`:`${a}`}return"unknown"}function wA(e){const t="xhr"in e;let r;if(t){const s=e.xhr[Na];r=s&&tp(s.body)[0]}else{const s=D_(e.input);r=tp(s)[0]}return r}function oV(e){const t=/^(?:\s*)(query|mutation|subscription)(?:\s*)(\w+)(?:\s*)[{(]/,r=/^(?:\s*)(query|mutation|subscription)(?:\s*)[{(]/,s=e.match(t);if(s)return{operationType:s[1],operationName:s[2]};const a=e.match(r);return a?{operationType:a[1],operationName:void 0}:{operationType:void 0,operationName:void 0}}function vm(e){return typeof e=="object"&&e!==null}function Vp(e){return vm(e)&&typeof e.query=="string"}function Qp(e){return vm(e)&&typeof e.operationName=="string"&&vm(e.extensions)&&vm(e.extensions.persistedQuery)&&typeof e.extensions.persistedQuery.sha256Hash=="string"&&typeof e.extensions.persistedQuery.version=="number"}function _A(e){try{const t=JSON.parse(e);return Vp(t)||Qp(t)?t:void 0}catch{return}}const lV=sV,Yt=Xe,q_="sentryReplaySession",cV="replay_event",F_="Unable to send Replay",uV=3e5,dV=9e5,hV=5e3,fV=5500,mV=6e4,pV=5e3,xV=3,Mk=15e4,Hf=5e3,gV=3e3,yV=300,U_=2e7,bV=4999,vV=5e4,Dk=36e5;var wV=Object.defineProperty,_V=(e,t,r)=>t in e?wV(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,$k=(e,t,r)=>_V(e,typeof t!="symbol"?t+"":t,r),Sn=(e=>(e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e))(Sn||{});function jV(e){return e.nodeType===e.ELEMENT_NODE}function cd(e){const t=e==null?void 0:e.host;return(t==null?void 0:t.shadowRoot)===e}function ud(e){return Object.prototype.toString.call(e)==="[object ShadowRoot]"}function NV(e){return e.includes(" background-clip: text;")&&!e.includes(" -webkit-background-clip: text;")&&(e=e.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),e}function SV(e){const{cssText:t}=e;if(t.split('"').length<3)return t;const r=["@import",`url(${JSON.stringify(e.href)})`];return e.layerName===""?r.push("layer"):e.layerName&&r.push(`layer(${e.layerName})`),e.supportsText&&r.push(`supports(${e.supportsText})`),e.media.length&&r.push(e.media.mediaText),r.join(" ")+";"}function np(e){try{const t=e.rules||e.cssRules;return t?NV(Array.from(t,jA).join("")):null}catch{return null}}function kV(e){let t="";for(let r=0;r<e.style.length;r++){const s=e.style,a=s[r],i=s.getPropertyPriority(a);t+=`${a}:${s.getPropertyValue(a)}${i?" !important":""};`}return`${e.selectorText} { ${t} }`}function jA(e){let t;if(CV(e))try{t=np(e.styleSheet)||SV(e)}catch{}else if(TV(e)){let r=e.cssText;const s=e.selectorText.includes(":"),a=typeof e.style.all=="string"&&e.style.all;if(a&&(r=kV(e)),s&&(r=EV(r)),s||a)return r}return t||e.cssText}function EV(e){const t=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return e.replace(t,"$1\\$2")}function CV(e){return"styleSheet"in e}function TV(e){return"selectorText"in e}let NA=class{constructor(){$k(this,"idNodeMap",new Map),$k(this,"nodeMetaMap",new WeakMap)}getId(t){var s;return t?((s=this.getMeta(t))==null?void 0:s.id)??-1:-1}getNode(t){return this.idNodeMap.get(t)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(t){return this.nodeMetaMap.get(t)||null}removeNodeFromMap(t){const r=this.getId(t);this.idNodeMap.delete(r),t.childNodes&&t.childNodes.forEach(s=>this.removeNodeFromMap(s))}has(t){return this.idNodeMap.has(t)}hasNode(t){return this.nodeMetaMap.has(t)}add(t,r){const s=r.id;this.idNodeMap.set(s,t),this.nodeMetaMap.set(t,r)}replace(t,r){const s=this.getNode(t);if(s){const a=this.nodeMetaMap.get(s);a&&this.nodeMetaMap.set(r,a)}this.idNodeMap.set(t,r)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}};function RV(){return new NA}function Yp({maskInputOptions:e,tagName:t,type:r}){return t==="OPTION"&&(t="SELECT"),!!(e[t.toLowerCase()]||r&&e[r]||r==="password"||t==="INPUT"&&!r&&e.text)}function Sd({isMasked:e,element:t,value:r,maskInputFn:s}){let a=r||"";return e?(s&&(a=s(a,t)),"*".repeat(a.length)):a}function Oc(e){return e.toLowerCase()}function tw(e){return e.toUpperCase()}const qk="__rrweb_original__";function AV(e){const t=e.getContext("2d");if(!t)return!0;const r=50;for(let s=0;s<e.width;s+=r)for(let a=0;a<e.height;a+=r){const i=t.getImageData,o=qk in i?i[qk]:i;if(new Uint32Array(o.call(t,s,a,Math.min(r,e.width-s),Math.min(r,e.height-a)).data.buffer).some(u=>u!==0))return!1}return!0}function B_(e){const t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?Oc(t):null}function rp(e,t,r){return t==="INPUT"&&(r==="radio"||r==="checkbox")?e.getAttribute("value")||"":e.value}function SA(e,t){let r;try{r=new URL(e,t??window.location.href)}catch{return null}const s=/\.([0-9a-z]+)(?:$)/i,a=r.pathname.match(s);return(a==null?void 0:a[1])??null}const Fk={};function kA(e){const t=Fk[e];if(t)return t;const r=window.document;let s=window[e];if(r&&typeof r.createElement=="function")try{const a=r.createElement("iframe");a.hidden=!0,r.head.appendChild(a);const i=a.contentWindow;i&&i[e]&&(s=i[e]),r.head.removeChild(a)}catch{}return Fk[e]=s.bind(window)}function nw(...e){return kA("setTimeout")(...e)}function EA(...e){return kA("clearTimeout")(...e)}function CA(e){try{return e.contentDocument}catch{}}let PV=1;const OV=new RegExp("[^a-z0-9-_:]"),kd=-2;function H_(){return PV++}function IV(e){if(e instanceof HTMLFormElement)return"form";const t=Oc(e.tagName);return OV.test(t)?"div":t}function LV(e){let t="";return e.indexOf("//")>-1?t=e.split("/").slice(0,3).join("/"):t=e.split("/")[0],t=t.split("?")[0],t}let Ul,Uk;const MV=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,DV=/^(?:[a-z+]+:)?\/\//i,$V=/^www\..*/i,qV=/^(data:)([^,]*),(.*)/i;function FV(e,t){if(!e||t.size===0)return e;try{const r=e.split(";"),s=[];for(let a of r){if(a=a.trim(),!a)continue;const i=a.indexOf(":");if(i===-1){s.push(a);continue}const o=a.slice(0,i).trim();t.has(o)||s.push(a)}return s.join("; ")+(s.length>0&&e.endsWith(";")?";":"")}catch(r){return console.warn("Error filtering CSS properties:",r),e}}function sp(e,t){return(e||"").replace(MV,(r,s,a,i,o,l)=>{const u=a||o||l,d=s||i||"";if(!u)return r;if(DV.test(u)||$V.test(u))return`url(${d}${u}${d})`;if(qV.test(u))return`url(${d}${u}${d})`;if(u[0]==="/")return`url(${d}${LV(t)+u}${d})`;const p=t.split("/"),f=u.split("/");p.pop();for(const m of f)m!=="."&&(m===".."?p.pop():p.push(m));return`url(${d}${p.join("/")}${d})`})}const UV=/^[^ \t\n\r\u000c]+/,BV=/^[, \t\n\r\u000c]+/;function HV(e,t){if(t.trim()==="")return t;let r=0;function s(i){let o;const l=i.exec(t.substring(r));return l?(o=l[0],r+=o.length,o):""}const a=[];for(;s(BV),!(r>=t.length);){let i=s(UV);if(i.slice(-1)===",")i=tc(e,i.substring(0,i.length-1)),a.push(i);else{let o="";i=tc(e,i);let l=!1;for(;;){const u=t.charAt(r);if(u===""){a.push((i+o).trim());break}else if(l)u===")"&&(l=!1);else if(u===","){r+=1,a.push((i+o).trim());break}else u==="("&&(l=!0);o+=u,r+=1}}}return a.join(", ")}const Bk=new WeakMap;function tc(e,t){return!t||t.trim()===""?t:Jp(e,t)}function KV(e){return!!(e.tagName==="svg"||e.ownerSVGElement)}function Jp(e,t){let r=Bk.get(e);if(r||(r=e.createElement("a"),Bk.set(e,r)),!t)t="";else if(t.startsWith("blob:")||t.startsWith("data:"))return t;return r.setAttribute("href",t),r.href}function TA(e,t,r,s,a,i,o){if(!s)return s;if(r==="src"||r==="href"&&!(t==="use"&&s[0]==="#"))return tc(e,s);if(r==="xlink:href"&&s[0]!=="#")return tc(e,s);if(r==="background"&&(t==="table"||t==="td"||t==="th"))return tc(e,s);if(r==="srcset")return HV(e,s);if(r==="style"){let l=sp(s,Jp(e));return o&&o.size>0&&(l=FV(l,o)),l}else if(t==="object"&&r==="data")return tc(e,s);return typeof i=="function"?i(r,s,a):s}function RA(e,t,r){return(e==="video"||e==="audio")&&t==="autoplay"}function zV(e,t,r,s){try{if(s&&e.matches(s))return!1;if(typeof t=="string"){if(e.classList.contains(t))return!0}else for(let a=e.classList.length;a--;){const i=e.classList[a];if(t.test(i))return!0}if(r)return e.matches(r)}catch{}return!1}function WV(e,t){for(let r=e.classList.length;r--;){const s=e.classList[r];if(t.test(s))return!0}return!1}function So(e,t,r=1/0,s=0){return!e||e.nodeType!==e.ELEMENT_NODE||s>r?-1:t(e)?s:So(e.parentNode,t,r,s+1)}function nc(e,t){return r=>{const s=r;if(s===null)return!1;try{if(e){if(typeof e=="string"){if(s.matches(`.${e}`))return!0}else if(WV(s,e))return!0}return!!(t&&s.matches(t))}catch{return!1}}}function Ic(e,t,r,s,a,i){try{const o=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(o===null)return!1;if(o.tagName==="INPUT"){const d=o.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(d))return!0}let l=-1,u=-1;if(i){if(u=So(o,nc(s,a)),u<0)return!0;l=So(o,nc(t,r),u>=0?u:1/0)}else{if(l=So(o,nc(t,r)),l<0)return!1;u=So(o,nc(s,a),l>=0?l:1/0)}return l>=0?u>=0?l<=u:!0:u>=0?!1:!!i}catch{}return!!i}function GV(e,t,r){const s=e.contentWindow;if(!s)return;let a=!1,i;try{i=s.document.readyState}catch{return}if(i!=="complete"){const l=nw(()=>{a||(t(),a=!0)},r);e.addEventListener("load",()=>{EA(l),a=!0,t()});return}const o="about:blank";if(s.location.href!==o||e.src===o||e.src==="")return nw(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}function VV(e,t,r){let s=!1,a;try{a=e.sheet}catch{return}if(a)return;const i=nw(()=>{s||(t(),s=!0)},r);e.addEventListener("load",()=>{EA(i),s=!0,t()})}function QV(e,t){const{doc:r,mirror:s,blockClass:a,blockSelector:i,unblockSelector:o,maskAllText:l,maskAttributeFn:u,maskTextClass:d,unmaskTextClass:p,maskTextSelector:f,unmaskTextSelector:m,inlineStylesheet:x,maskInputOptions:y={},maskTextFn:g,maskInputFn:b,dataURLOptions:_={},inlineImages:w,recordCanvas:S,keepIframeSrcFn:j,newlyAddedElement:N=!1,ignoreCSSAttributes:C}=t,E=YV(r,s);switch(e.nodeType){case e.DOCUMENT_NODE:return e.compatMode!=="CSS1Compat"?{type:Sn.Document,childNodes:[],compatMode:e.compatMode}:{type:Sn.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:Sn.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:E};case e.ELEMENT_NODE:return XV(e,{doc:r,blockClass:a,blockSelector:i,unblockSelector:o,inlineStylesheet:x,maskAttributeFn:u,maskInputOptions:y,maskInputFn:b,dataURLOptions:_,inlineImages:w,recordCanvas:S,keepIframeSrcFn:j,newlyAddedElement:N,rootId:E,maskTextClass:d,unmaskTextClass:p,maskTextSelector:f,unmaskTextSelector:m,ignoreCSSAttributes:C});case e.TEXT_NODE:return JV(e,{doc:r,maskAllText:l,maskTextClass:d,unmaskTextClass:p,maskTextSelector:f,unmaskTextSelector:m,maskTextFn:g,maskInputOptions:y,maskInputFn:b,rootId:E});case e.CDATA_SECTION_NODE:return{type:Sn.CDATA,textContent:"",rootId:E};case e.COMMENT_NODE:return{type:Sn.Comment,textContent:e.textContent||"",rootId:E};default:return!1}}function YV(e,t){if(!t.hasNode(e))return;const r=t.getId(e);return r===1?void 0:r}function JV(e,t){var _;const{maskAllText:r,maskTextClass:s,unmaskTextClass:a,maskTextSelector:i,unmaskTextSelector:o,maskTextFn:l,maskInputOptions:u,maskInputFn:d,rootId:p}=t,f=e.parentNode&&e.parentNode.tagName;let m=e.textContent;const x=f==="STYLE"?!0:void 0,y=f==="SCRIPT"?!0:void 0,g=f==="TEXTAREA"?!0:void 0;if(x&&m){try{e.nextSibling||e.previousSibling||(_=e.parentNode.sheet)!=null&&_.cssRules&&(m=np(e.parentNode.sheet))}catch(w){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${w}`,e)}m=sp(m,Jp(t.doc))}y&&(m="SCRIPT_PLACEHOLDER");const b=Ic(e,s,i,a,o,r);if(!x&&!y&&!g&&m&&b&&(m=l?l(m,e.parentElement):m.replace(/[\S]/g,"*")),g&&m&&(u.textarea||b)&&(m=d?d(m,e.parentNode):m.replace(/[\S]/g,"*")),f==="OPTION"&&m){const w=Yp({type:null,tagName:f,maskInputOptions:u});m=Sd({isMasked:Ic(e,s,i,a,o,w),element:e,value:m,maskInputFn:d})}return{type:Sn.Text,textContent:m||"",isStyle:x,rootId:p}}function XV(e,t){const{doc:r,blockClass:s,blockSelector:a,unblockSelector:i,inlineStylesheet:o,maskInputOptions:l={},maskAttributeFn:u,maskInputFn:d,dataURLOptions:p={},inlineImages:f,recordCanvas:m,keepIframeSrcFn:x,newlyAddedElement:y=!1,rootId:g,maskTextClass:b,unmaskTextClass:_,maskTextSelector:w,unmaskTextSelector:S,ignoreCSSAttributes:j}=t,N=zV(e,s,a,i),C=IV(e);let E={};const T=e.attributes.length;for(let A=0;A<T;A++){const R=e.attributes[A];R.name&&!RA(C,R.name,R.value)&&(E[R.name]=TA(r,C,Oc(R.name),R.value,e,u,j))}if(C==="link"&&o){const A=Array.from(r.styleSheets).find(O=>O.href===e.href);let R=null;A&&(R=np(A)),R&&(E.rel=null,E.href=null,E.crossorigin=null,E._cssText=sp(R,A.href))}if(C==="style"&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){const A=np(e.sheet);A&&(E._cssText=sp(A,Jp(r)))}if(C==="input"||C==="textarea"||C==="select"||C==="option"){const A=e,R=B_(A),O=rp(A,tw(C),R),M=A.checked;if(R!=="submit"&&R!=="button"&&O){const B=Ic(A,b,w,_,S,Yp({type:R,tagName:tw(C),maskInputOptions:l}));E.value=Sd({isMasked:B,element:A,value:O,maskInputFn:d})}M&&(E.checked=M)}if(C==="option"&&(e.selected&&!l.select?E.selected=!0:delete E.selected),C==="canvas"&&m){if(e.__context==="2d")AV(e)||(E.rr_dataURL=e.toDataURL(p.type,p.quality));else if(!("__context"in e)){const A=e.toDataURL(p.type,p.quality),R=r.createElement("canvas");R.width=e.width,R.height=e.height;const O=R.toDataURL(p.type,p.quality);A!==O&&(E.rr_dataURL=A)}}if(C==="img"&&f){Ul||(Ul=r.createElement("canvas"),Uk=Ul.getContext("2d"));const A=e,R=A.currentSrc||A.getAttribute("src")||"<unknown-src>",O=A.crossOrigin,M=()=>{A.removeEventListener("load",M);try{Ul.width=A.naturalWidth,Ul.height=A.naturalHeight,Uk.drawImage(A,0,0),E.rr_dataURL=Ul.toDataURL(p.type,p.quality)}catch(B){if(A.crossOrigin!=="anonymous"){A.crossOrigin="anonymous",A.complete&&A.naturalWidth!==0?M():A.addEventListener("load",M);return}else console.warn(`Cannot inline img src=${R}! Error: ${B}`)}A.crossOrigin==="anonymous"&&(O?E.crossOrigin=O:A.removeAttribute("crossorigin"))};A.complete&&A.naturalWidth!==0?M():A.addEventListener("load",M)}if((C==="audio"||C==="video")&&(E.rr_mediaState=e.paused?"paused":"played",E.rr_mediaCurrentTime=e.currentTime),y||(e.scrollLeft&&(E.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(E.rr_scrollTop=e.scrollTop)),N){const{width:A,height:R}=e.getBoundingClientRect();E={class:E.class,rr_width:`${A}px`,rr_height:`${R}px`}}C==="iframe"&&!x(E.src)&&(!N&&!CA(e)&&(E.rr_src=E.src),delete E.src);let I;try{customElements.get(C)&&(I=!0)}catch{}return{type:Sn.Element,tagName:C,attributes:E,childNodes:[],isSVG:KV(e)||void 0,needBlock:N,rootId:g,isCustom:I}}function Gt(e){return e==null?"":e.toLowerCase()}function ZV(e,t){if(t.comment&&e.type===Sn.Comment)return!0;if(e.type===Sn.Element){if(t.script&&(e.tagName==="script"||e.tagName==="link"&&(e.attributes.rel==="preload"||e.attributes.rel==="modulepreload")||e.tagName==="link"&&e.attributes.rel==="prefetch"&&typeof e.attributes.href=="string"&&SA(e.attributes.href)==="js"))return!0;if(t.headFavicon&&(e.tagName==="link"&&e.attributes.rel==="shortcut icon"||e.tagName==="meta"&&(Gt(e.attributes.name).match(/^msapplication-tile(image|color)$/)||Gt(e.attributes.name)==="application-name"||Gt(e.attributes.rel)==="icon"||Gt(e.attributes.rel)==="apple-touch-icon"||Gt(e.attributes.rel)==="shortcut icon")))return!0;if(e.tagName==="meta"){if(t.headMetaDescKeywords&&Gt(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(Gt(e.attributes.property).match(/^(og|twitter|fb):/)||Gt(e.attributes.name).match(/^(og|twitter):/)||Gt(e.attributes.name)==="pinterest"))return!0;if(t.headMetaRobots&&(Gt(e.attributes.name)==="robots"||Gt(e.attributes.name)==="googlebot"||Gt(e.attributes.name)==="bingbot"))return!0;if(t.headMetaHttpEquiv&&e.attributes["http-equiv"]!==void 0)return!0;if(t.headMetaAuthorship&&(Gt(e.attributes.name)==="author"||Gt(e.attributes.name)==="generator"||Gt(e.attributes.name)==="framework"||Gt(e.attributes.name)==="publisher"||Gt(e.attributes.name)==="progid"||Gt(e.attributes.property).match(/^article:/)||Gt(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&(Gt(e.attributes.name)==="google-site-verification"||Gt(e.attributes.name)==="yandex-verification"||Gt(e.attributes.name)==="csrf-token"||Gt(e.attributes.name)==="p:domain_verify"||Gt(e.attributes.name)==="verify-v1"||Gt(e.attributes.name)==="verification"||Gt(e.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}function rc(e,t){const{doc:r,mirror:s,blockClass:a,blockSelector:i,unblockSelector:o,maskAllText:l,maskTextClass:u,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:f,skipChild:m=!1,inlineStylesheet:x=!0,maskInputOptions:y={},maskAttributeFn:g,maskTextFn:b,maskInputFn:_,slimDOMOptions:w,dataURLOptions:S={},inlineImages:j=!1,recordCanvas:N=!1,onSerialize:C,onIframeLoad:E,iframeLoadTimeout:T=5e3,onBlockedImageLoad:I,onStylesheetLoad:A,stylesheetLoadTimeout:R=5e3,keepIframeSrcFn:O=()=>!1,newlyAddedElement:M=!1,ignoreCSSAttributes:B}=t;let{preserveWhiteSpace:U=!0}=t;const Y=QV(e,{doc:r,mirror:s,blockClass:a,blockSelector:i,maskAllText:l,unblockSelector:o,maskTextClass:u,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:f,inlineStylesheet:x,maskInputOptions:y,maskAttributeFn:g,maskTextFn:b,maskInputFn:_,dataURLOptions:S,inlineImages:j,recordCanvas:N,keepIframeSrcFn:O,newlyAddedElement:M,ignoreCSSAttributes:B});if(!Y)return console.warn(e,"not serialized"),null;let W;s.hasNode(e)?W=s.getId(e):ZV(Y,w)||!U&&Y.type===Sn.Text&&!Y.isStyle&&!Y.textContent.replace(/^\s+|\s+$/gm,"").length?W=kd:W=H_();const K=Object.assign(Y,{id:W});if(s.add(e,K),W===kd)return null;C&&C(e);let F=!m;if(K.type===Sn.Element){F=F&&!K.needBlock;const H=e.shadowRoot;H&&ud(H)&&(K.isShadowHost=!0)}if((K.type===Sn.Document||K.type===Sn.Element)&&F){w.headWhitespace&&K.type===Sn.Element&&K.tagName==="head"&&(U=!1);const H={doc:r,mirror:s,blockClass:a,blockSelector:i,maskAllText:l,unblockSelector:o,maskTextClass:u,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:f,skipChild:m,inlineStylesheet:x,maskInputOptions:y,maskAttributeFn:g,maskTextFn:b,maskInputFn:_,slimDOMOptions:w,dataURLOptions:S,inlineImages:j,recordCanvas:N,preserveWhiteSpace:U,onSerialize:C,onIframeLoad:E,iframeLoadTimeout:T,onBlockedImageLoad:I,onStylesheetLoad:A,stylesheetLoadTimeout:R,keepIframeSrcFn:O,ignoreCSSAttributes:B},L=e.childNodes?Array.from(e.childNodes):[];for(const q of L){const z=rc(q,H);z&&K.childNodes.push(z)}if(jV(e)&&e.shadowRoot)for(const q of Array.from(e.shadowRoot.childNodes)){const z=rc(q,H);z&&(ud(e.shadowRoot)&&(z.isShadow=!0),K.childNodes.push(z))}}if(e.parentNode&&cd(e.parentNode)&&ud(e.parentNode)&&(K.isShadow=!0),K.type===Sn.Element&&K.tagName==="iframe"&&!K.needBlock&&GV(e,()=>{const H=CA(e);if(H&&E){const L=rc(H,{doc:H,mirror:s,blockClass:a,blockSelector:i,unblockSelector:o,maskAllText:l,maskTextClass:u,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:f,skipChild:!1,inlineStylesheet:x,maskInputOptions:y,maskAttributeFn:g,maskTextFn:b,maskInputFn:_,slimDOMOptions:w,dataURLOptions:S,inlineImages:j,recordCanvas:N,preserveWhiteSpace:U,onSerialize:C,onIframeLoad:E,iframeLoadTimeout:T,onStylesheetLoad:A,stylesheetLoadTimeout:R,keepIframeSrcFn:O,ignoreCSSAttributes:B});L&&E(e,L)}},T),K.type===Sn.Element&&K.tagName==="img"&&!e.complete&&K.needBlock){const H=e,L=()=>{if(H.isConnected&&!H.complete&&I)try{const q=H.getBoundingClientRect();q.width>0&&q.height>0&&I(H,K,q)}catch{}H.removeEventListener("load",L)};H.isConnected&&H.addEventListener("load",L)}return K.type===Sn.Element&&K.tagName==="link"&&typeof K.attributes.rel=="string"&&(K.attributes.rel==="stylesheet"||K.attributes.rel==="preload"&&typeof K.attributes.href=="string"&&SA(K.attributes.href)==="css")&&VV(e,()=>{if(A){const H=rc(e,{doc:r,mirror:s,blockClass:a,blockSelector:i,unblockSelector:o,maskAllText:l,maskTextClass:u,unmaskTextClass:d,maskTextSelector:p,unmaskTextSelector:f,skipChild:!1,inlineStylesheet:x,maskInputOptions:y,maskAttributeFn:g,maskTextFn:b,maskInputFn:_,slimDOMOptions:w,dataURLOptions:S,inlineImages:j,recordCanvas:N,preserveWhiteSpace:U,onSerialize:C,onIframeLoad:E,iframeLoadTimeout:T,onStylesheetLoad:A,stylesheetLoadTimeout:R,keepIframeSrcFn:O,ignoreCSSAttributes:B});H&&A(e,H)}},R),K.type===Sn.Element&&delete K.needBlock,K}function eQ(e,t){const{mirror:r=new NA,blockClass:s="rr-block",blockSelector:a=null,unblockSelector:i=null,maskAllText:o=!1,maskTextClass:l="rr-mask",unmaskTextClass:u=null,maskTextSelector:d=null,unmaskTextSelector:p=null,inlineStylesheet:f=!0,inlineImages:m=!1,recordCanvas:x=!1,maskAllInputs:y=!1,maskAttributeFn:g,maskTextFn:b,maskInputFn:_,slimDOM:w=!1,dataURLOptions:S,preserveWhiteSpace:j,onSerialize:N,onIframeLoad:C,iframeLoadTimeout:E,onBlockedImageLoad:T,onStylesheetLoad:I,stylesheetLoadTimeout:A,keepIframeSrcFn:R=()=>!1,ignoreCSSAttributes:O=new Set([])}=t||{};return rc(e,{doc:e,mirror:r,blockClass:s,blockSelector:a,unblockSelector:i,maskAllText:o,maskTextClass:l,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:p,skipChild:!1,inlineStylesheet:f,maskInputOptions:y===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:y===!1?{}:y,maskAttributeFn:g,maskTextFn:b,maskInputFn:_,slimDOMOptions:w===!0||w==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:w==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:w===!1?{}:w,dataURLOptions:S,inlineImages:m,recordCanvas:x,preserveWhiteSpace:j,onSerialize:N,onIframeLoad:C,iframeLoadTimeout:E,onBlockedImageLoad:T,onStylesheetLoad:I,stylesheetLoadTimeout:A,keepIframeSrcFn:R,newlyAddedElement:!1,ignoreCSSAttributes:O})}function ur(e,t,r=document){const s={capture:!0,passive:!0};return r.addEventListener(e,t,s),()=>r.removeEventListener(e,t,s)}const Ql=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let Hk={map:{},getId(){return console.error(Ql),-1},getNode(){return console.error(Ql),null},removeNodeFromMap(){console.error(Ql)},has(){return console.error(Ql),!1},reset(){console.error(Ql)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(Hk=new Proxy(Hk,{get(e,t,r){return t==="map"&&console.error(Ql),Reflect.get(e,t,r)}}));function Ed(e,t,r={}){let s=null,a=0;return function(...i){const o=Date.now();!a&&r.leading===!1&&(a=o);const l=t-(o-a),u=this;l<=0||l>t?(s&&(oQ(s),s=null),a=o,e.apply(u,i)):!s&&r.trailing!==!1&&(s=Xp(()=>{a=r.leading===!1?0:Date.now(),s=null,e.apply(u,i)},l))}}function AA(e,t,r,s,a=window){const i=a.Object.getOwnPropertyDescriptor(e,t);return a.Object.defineProperty(e,t,s?r:{set(o){Xp(()=>{r.set.call(this,o)},0),i&&i.set&&i.set.call(this,o)}}),()=>AA(e,t,i||{},!0)}function K_(e,t,r){try{if(!(t in e))return()=>{};const s=e[t],a=r(s);return typeof a=="function"&&(a.prototype=a.prototype||{},Object.defineProperties(a,{__rrweb_original__:{enumerable:!1,value:s}})),e[t]=a,()=>{e[t]=s}}catch{return()=>{}}}let ap=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||(ap=()=>new Date().getTime());function PA(e){var r,s,a,i,o,l;const t=e.document;return{left:t.scrollingElement?t.scrollingElement.scrollLeft:e.pageXOffset!==void 0?e.pageXOffset:(t==null?void 0:t.documentElement.scrollLeft)||((s=(r=t==null?void 0:t.body)==null?void 0:r.parentElement)==null?void 0:s.scrollLeft)||((a=t==null?void 0:t.body)==null?void 0:a.scrollLeft)||0,top:t.scrollingElement?t.scrollingElement.scrollTop:e.pageYOffset!==void 0?e.pageYOffset:(t==null?void 0:t.documentElement.scrollTop)||((o=(i=t==null?void 0:t.body)==null?void 0:i.parentElement)==null?void 0:o.scrollTop)||((l=t==null?void 0:t.body)==null?void 0:l.scrollTop)||0}}function OA(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function IA(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function LA(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch{return null}}function Ur(e,t,r,s,a){if(!e)return!1;const i=LA(e);if(!i)return!1;const o=nc(t,r);if(!a){const d=s&&i.matches(s);return o(i)&&!d}const l=So(i,o);let u=-1;return l<0?!1:(s&&(u=So(i,nc(null,s))),l>-1&&u<0?!0:l<u)}function tQ(e,t){return t.getId(e)!==-1}function J0(e,t){return t.getId(e)===kd}function MA(e,t){if(cd(e))return!1;const r=t.getId(e);return t.has(r)?e.parentNode&&e.parentNode.nodeType===e.DOCUMENT_NODE?!1:e.parentNode?MA(e.parentNode,t):!0:!0}function rw(e){return!!e.changedTouches}function nQ(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...t)=>{let r=t[0];if(!(0 in t))throw new TypeError("1 argument is required");do if(this===r)return!0;while(r=r&&r.parentNode);return!1})}function DA(e,t){return!!(e.nodeName==="IFRAME"&&t.getMeta(e))}function $A(e,t){return!!(e.nodeName==="LINK"&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&e.getAttribute("rel")==="stylesheet"&&t.getMeta(e))}function sw(e){return!!(e!=null&&e.shadowRoot)}class rQ{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(t){return this.styleIDMap.get(t)??-1}has(t){return this.styleIDMap.has(t)}add(t,r){if(this.has(t))return this.getId(t);let s;return r===void 0?s=this.id++:s=r,this.styleIDMap.set(t,s),this.idStyleMap.set(s,t),s}getStyle(t){return this.idStyleMap.get(t)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function qA(e){var r,s;let t=null;return((s=(r=e.getRootNode)==null?void 0:r.call(e))==null?void 0:s.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(t=e.getRootNode().host),t}function sQ(e){let t=e,r;for(;r=qA(t);)t=r;return t}function aQ(e){const t=e.ownerDocument;if(!t)return!1;const r=sQ(e);return t.contains(r)}function FA(e){const t=e.ownerDocument;return t?t.contains(e)||aQ(e):!1}const Kk={};function z_(e){const t=Kk[e];if(t)return t;const r=window.document;let s=window[e];if(r&&typeof r.createElement=="function")try{const a=r.createElement("iframe");a.hidden=!0,r.head.appendChild(a);const i=a.contentWindow;i&&i[e]&&(s=i[e]),r.head.removeChild(a)}catch{}return Kk[e]=s.bind(window)}function iQ(...e){return z_("requestAnimationFrame")(...e)}function Xp(...e){return z_("setTimeout")(...e)}function oQ(...e){return z_("clearTimeout")(...e)}var mt=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(mt||{}),it=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(it||{}),ir=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(ir||{}),xa=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(xa||{}),Yl=(e=>(e[e.Play=0]="Play",e[e.Pause=1]="Pause",e[e.Seeked=2]="Seeked",e[e.VolumeChange=3]="VolumeChange",e[e.RateChange=4]="RateChange",e))(Yl||{});function W_(e){try{return e.contentDocument}catch{}}function lQ(e){try{return e.contentWindow}catch{}}function zk(e){return"__ln"in e}class cQ{constructor(){this.length=0,this.head=null,this.tail=null}get(t){if(t>=this.length)throw new Error("Position outside of list range");let r=this.head;for(let s=0;s<t;s++)r=(r==null?void 0:r.next)||null;return r}addNode(t){const r={value:t,previous:null,next:null};if(t.__ln=r,t.previousSibling&&zk(t.previousSibling)){const s=t.previousSibling.__ln.next;r.next=s,r.previous=t.previousSibling.__ln,t.previousSibling.__ln.next=r,s&&(s.previous=r)}else if(t.nextSibling&&zk(t.nextSibling)&&t.nextSibling.__ln.previous){const s=t.nextSibling.__ln.previous;r.previous=s,r.next=t.nextSibling.__ln,t.nextSibling.__ln.previous=r,s&&(s.next=r)}else this.head&&(this.head.previous=r),r.next=this.head,this.head=r;r.next===null&&(this.tail=r),this.length++}removeNode(t){const r=t.__ln;this.head&&(r.previous?(r.previous.next=r.next,r.next?r.next.previous=r.previous:this.tail=r.previous):(this.head=r.next,this.head?this.head.previous=null:this.tail=null),t.__ln&&delete t.__ln,this.length--)}}const Wk=(e,t)=>`${e}@${t}`;class uQ{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=t=>{t.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const t=[],r=new Set,s=new cQ,a=u=>{let d=u,p=kd;for(;p===kd;)d=d&&d.nextSibling,p=d&&this.mirror.getId(d);return p},i=u=>{if(!u.parentNode||!FA(u))return;const d=cd(u.parentNode)?this.mirror.getId(qA(u)):this.mirror.getId(u.parentNode),p=a(u);if(d===-1||p===-1)return s.addNode(u);const f=rc(u,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:m=>{DA(m,this.mirror)&&!Ur(m,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&this.iframeManager.addIframe(m),$A(m,this.mirror)&&this.stylesheetManager.trackLinkElement(m),sw(u)&&this.shadowDomManager.addShadowRoot(u.shadowRoot,this.doc)},onIframeLoad:(m,x)=>{Ur(m,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(this.iframeManager.attachIframe(m,x),m.contentWindow&&this.canvasManager.addWindow(m.contentWindow),this.shadowDomManager.observeAttachShadow(m))},onStylesheetLoad:(m,x)=>{this.stylesheetManager.attachLinkElement(m,x)},onBlockedImageLoad:(m,x,{width:y,height:g})=>{this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:x.id,attributes:{style:{width:`${y}px`,height:`${g}px`}}}]})},ignoreCSSAttributes:this.ignoreCSSAttributes});f&&(t.push({parentId:d,nextId:p,node:f}),r.add(f.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const u of this.movedSet)Gk(this.removes,u,this.mirror)&&!this.movedSet.has(u.parentNode)||i(u);for(const u of this.addedSet)!Vk(this.droppedSet,u)&&!Gk(this.removes,u,this.mirror)||Vk(this.movedSet,u)?i(u):this.droppedSet.add(u);let o=null;for(;s.length;){let u=null;if(o){const d=this.mirror.getId(o.value.parentNode),p=a(o.value);d!==-1&&p!==-1&&(u=o)}if(!u){let d=s.tail;for(;d;){const p=d;if(d=d.previous,p){const f=this.mirror.getId(p.value.parentNode);if(a(p.value)===-1)continue;if(f!==-1){u=p;break}else{const x=p.value;if(x.parentNode&&x.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const y=x.parentNode.host;if(this.mirror.getId(y)!==-1){u=p;break}}}}}}if(!u){for(;s.head;)s.removeNode(s.head.value);break}o=u.previous,s.removeNode(u.value),i(u.value)}const l={texts:this.texts.map(u=>({id:this.mirror.getId(u.node),value:u.value})).filter(u=>!r.has(u.id)).filter(u=>this.mirror.has(u.id)),attributes:this.attributes.map(u=>{const{attributes:d}=u;if(typeof d.style=="string"){const p=JSON.stringify(u.styleDiff),f=JSON.stringify(u._unchangedStyles);p.length<d.style.length&&(p+f).split("var(").length===d.style.split("var(").length&&(d.style=u.styleDiff)}return{id:this.mirror.getId(u.node),attributes:d}}).filter(u=>!r.has(u.id)).filter(u=>this.mirror.has(u.id)),removes:this.removes,adds:t};!l.texts.length&&!l.attributes.length&&!l.removes.length&&!l.adds.length||(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(l))},this.processMutation=t=>{if(!J0(t.target,this.mirror))switch(t.type){case"characterData":{const r=t.target.textContent;!Ur(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&r!==t.oldValue&&this.texts.push({value:Ic(t.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&r?this.maskTextFn?this.maskTextFn(r,LA(t.target)):r.replace(/[\S]/g,"*"):r,node:t.target});break}case"attributes":{const r=t.target;let s=t.attributeName,a=t.target.getAttribute(s);if(s==="value"){const o=B_(r),l=r.tagName;a=rp(r,l,o);const u=Yp({maskInputOptions:this.maskInputOptions,tagName:l,type:o}),d=Ic(t.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,u);a=Sd({isMasked:d,element:r,value:a,maskInputFn:this.maskInputFn})}if(Ur(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||a===t.oldValue)return;let i=this.attributeMap.get(t.target);if(r.tagName==="IFRAME"&&s==="src"&&!this.keepIframeSrcFn(a))if(!W_(r))s="rr_src";else return;if(i||(i={node:t.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(i),this.attributeMap.set(t.target,i)),s==="type"&&r.tagName==="INPUT"&&(t.oldValue||"").toLowerCase()==="password"&&r.setAttribute("data-rr-is-password","true"),!RA(r.tagName,s)&&(i.attributes[s]=TA(this.doc,Oc(r.tagName),Oc(s),a,r,this.maskAttributeFn),s==="style")){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch{this.unattachedDoc=this.doc}const o=this.unattachedDoc.createElement("span");t.oldValue&&o.setAttribute("style",t.oldValue);for(const l of Array.from(r.style)){const u=r.style.getPropertyValue(l),d=r.style.getPropertyPriority(l);u!==o.style.getPropertyValue(l)||d!==o.style.getPropertyPriority(l)?d===""?i.styleDiff[l]=u:i.styleDiff[l]=[u,d]:i._unchangedStyles[l]=[u,d]}for(const l of Array.from(o.style))r.style.getPropertyValue(l)===""&&(i.styleDiff[l]=!1)}break}case"childList":{if(Ur(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;t.addedNodes.forEach(r=>this.genAdds(r,t.target)),t.removedNodes.forEach(r=>{const s=this.mirror.getId(r),a=cd(t.target)?this.mirror.getId(t.target.host):this.mirror.getId(t.target);Ur(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||J0(r,this.mirror)||!tQ(r,this.mirror)||(this.addedSet.has(r)?(aw(this.addedSet,r),this.droppedSet.add(r)):this.addedSet.has(t.target)&&s===-1||MA(t.target,this.mirror)||(this.movedSet.has(r)&&this.movedMap[Wk(s,a)]?aw(this.movedSet,r):this.removes.push({parentId:a,id:s,isShadow:cd(t.target)&&ud(t.target)?!0:void 0})),this.mapRemoves.push(r))});break}}},this.genAdds=(t,r)=>{if(!this.processedNodeManager.inOtherBuffer(t,this)&&!(this.addedSet.has(t)||this.movedSet.has(t))){if(this.mirror.hasNode(t)){if(J0(t,this.mirror))return;this.movedSet.add(t);let s=null;r&&this.mirror.hasNode(r)&&(s=this.mirror.getId(r)),s&&s!==-1&&(this.movedMap[Wk(this.mirror.getId(t),s)]=!0)}else this.addedSet.add(t),this.droppedSet.delete(t);Ur(t,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(t.childNodes&&t.childNodes.forEach(s=>this.genAdds(s)),sw(t)&&t.shadowRoot.childNodes.forEach(s=>{this.processedNodeManager.add(s,this),this.genAdds(s,t)}))}}}init(t){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager","ignoreCSSAttributes"].forEach(r=>{this[r]=t[r]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function aw(e,t){var r;e.delete(t),(r=t.childNodes)==null||r.forEach(s=>aw(e,s))}function Gk(e,t,r){return e.length===0?!1:dQ(e,t,r)}function dQ(e,t,r){let s=t.parentNode;for(;s;){const a=r.getId(s);if(e.some(i=>i.id===a))return!0;s=s.parentNode}return!1}function Vk(e,t){return e.size===0?!1:UA(e,t)}function UA(e,t){const{parentNode:r}=t;return r?e.has(r)?!0:UA(e,r):!1}let dd;function hQ(e){dd=e}function fQ(){dd=void 0}const wt=e=>dd?(...r)=>{try{return e(...r)}catch(s){if(dd&&dd(s)===!0)return()=>{};throw s}}:e,sc=[];function ih(e){try{if("composedPath"in e){const t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch{}return e&&e.target}function BA(e,t){var o,l;const r=new uQ;sc.push(r),r.init(e);let s=window.MutationObserver||window.__rrMutationObserver;const a=(l=(o=window==null?void 0:window.Zone)==null?void 0:o.__symbol__)==null?void 0:l.call(o,"MutationObserver");a&&window[a]&&(s=window[a]);const i=new s(wt(u=>{e.onMutation&&e.onMutation(u)===!1||r.processMutations.bind(r)(u)}));return i.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),i}function mQ({mousemoveCb:e,sampling:t,doc:r,mirror:s}){if(t.mousemove===!1)return()=>{};const a=typeof t.mousemove=="number"?t.mousemove:50,i=typeof t.mousemoveCallback=="number"?t.mousemoveCallback:500;let o=[],l;const u=Ed(wt(f=>{const m=Date.now()-l;e(o.map(x=>(x.timeOffset-=m,x)),f),o=[],l=null}),i),d=wt(Ed(wt(f=>{const m=ih(f),{clientX:x,clientY:y}=rw(f)?f.changedTouches[0]:f;l||(l=ap()),o.push({x,y,id:s.getId(m),timeOffset:ap()-l}),u(typeof DragEvent<"u"&&f instanceof DragEvent?it.Drag:f instanceof MouseEvent?it.MouseMove:it.TouchMove)}),a,{trailing:!1})),p=[ur("mousemove",d,r),ur("touchmove",d,r),ur("drag",d,r)];return wt(()=>{p.forEach(f=>f())})}function pQ({mouseInteractionCb:e,doc:t,mirror:r,blockClass:s,blockSelector:a,unblockSelector:i,sampling:o}){if(o.mouseInteraction===!1)return()=>{};const l=o.mouseInteraction===!0||o.mouseInteraction===void 0?{}:o.mouseInteraction,u=[];let d=null;const p=f=>m=>{const x=ih(m);if(Ur(x,s,a,i,!0))return;let y=null,g=f;if("pointerType"in m){switch(m.pointerType){case"mouse":y=xa.Mouse;break;case"touch":y=xa.Touch;break;case"pen":y=xa.Pen;break}y===xa.Touch?ir[f]===ir.MouseDown?g="TouchStart":ir[f]===ir.MouseUp&&(g="TouchEnd"):xa.Pen}else rw(m)&&(y=xa.Touch);y!==null?(d=y,(g.startsWith("Touch")&&y===xa.Touch||g.startsWith("Mouse")&&y===xa.Mouse)&&(y=null)):ir[f]===ir.Click&&(y=d,d=null);const b=rw(m)?m.changedTouches[0]:m;if(!b)return;const _=r.getId(x),{clientX:w,clientY:S}=b;wt(e)({type:ir[g],id:_,x:w,y:S,...y!==null&&{pointerType:y}})};return Object.keys(ir).filter(f=>Number.isNaN(Number(f))&&!f.endsWith("_Departed")&&l[f]!==!1).forEach(f=>{let m=Oc(f);const x=p(f);if(window.PointerEvent)switch(ir[f]){case ir.MouseDown:case ir.MouseUp:m=m.replace("mouse","pointer");break;case ir.TouchStart:case ir.TouchEnd:return}u.push(ur(m,x,t))}),wt(()=>{u.forEach(f=>f())})}function HA({scrollCb:e,doc:t,mirror:r,blockClass:s,blockSelector:a,unblockSelector:i,sampling:o}){const l=wt(Ed(wt(u=>{const d=ih(u);if(!d||Ur(d,s,a,i,!0))return;const p=r.getId(d);if(d===t&&t.defaultView){const f=PA(t.defaultView);e({id:p,x:f.left,y:f.top})}else e({id:p,x:d.scrollLeft,y:d.scrollTop})}),o.scroll||100));return ur("scroll",l,t)}function xQ({viewportResizeCb:e},{win:t}){let r=-1,s=-1;const a=wt(Ed(wt(()=>{const i=OA(),o=IA();(r!==i||s!==o)&&(e({width:Number(o),height:Number(i)}),r=i,s=o)}),200));return ur("resize",a,t)}const gQ=["INPUT","TEXTAREA","SELECT"],Qk=new WeakMap;function yQ({inputCb:e,doc:t,mirror:r,blockClass:s,blockSelector:a,unblockSelector:i,ignoreClass:o,ignoreSelector:l,maskInputOptions:u,maskInputFn:d,sampling:p,userTriggeredOnInput:f,maskTextClass:m,unmaskTextClass:x,maskTextSelector:y,unmaskTextSelector:g}){function b(E){let T=ih(E);const I=E.isTrusted,A=T&&tw(T.tagName);if(A==="OPTION"&&(T=T.parentElement),!T||!A||gQ.indexOf(A)<0||Ur(T,s,a,i,!0))return;const R=T;if(R.classList.contains(o)||l&&R.matches(l))return;const O=B_(T);let M=rp(R,A,O),B=!1;const U=Yp({maskInputOptions:u,tagName:A,type:O}),Y=Ic(T,m,y,x,g,U);(O==="radio"||O==="checkbox")&&(B=T.checked),M=Sd({isMasked:Y,element:T,value:M,maskInputFn:d}),_(T,f?{text:M,isChecked:B,userTriggered:I}:{text:M,isChecked:B});const W=T.name;O==="radio"&&W&&B&&t.querySelectorAll(`input[type="radio"][name="${W}"]`).forEach(K=>{if(K!==T){const F=Sd({isMasked:Y,element:K,value:rp(K,A,O),maskInputFn:d});_(K,f?{text:F,isChecked:!B,userTriggered:!1}:{text:F,isChecked:!B})}})}function _(E,T){const I=Qk.get(E);if(!I||I.text!==T.text||I.isChecked!==T.isChecked){Qk.set(E,T);const A=r.getId(E);wt(e)({...T,id:A})}}const S=(p.input==="last"?["change"]:["input","change"]).map(E=>ur(E,wt(b),t)),j=t.defaultView;if(!j)return()=>{S.forEach(E=>E())};const N=j.Object.getOwnPropertyDescriptor(j.HTMLInputElement.prototype,"value"),C=[[j.HTMLInputElement.prototype,"value"],[j.HTMLInputElement.prototype,"checked"],[j.HTMLSelectElement.prototype,"value"],[j.HTMLTextAreaElement.prototype,"value"],[j.HTMLSelectElement.prototype,"selectedIndex"],[j.HTMLOptionElement.prototype,"selected"]];return N&&N.set&&S.push(...C.map(E=>AA(E[0],E[1],{set(){wt(b)({target:this,isTrusted:!1})}},!1,j))),wt(()=>{S.forEach(E=>E())})}function ip(e){const t=[];function r(s,a){if(Kf("CSSGroupingRule")&&s.parentRule instanceof CSSGroupingRule||Kf("CSSMediaRule")&&s.parentRule instanceof CSSMediaRule||Kf("CSSSupportsRule")&&s.parentRule instanceof CSSSupportsRule||Kf("CSSConditionRule")&&s.parentRule instanceof CSSConditionRule){const o=Array.from(s.parentRule.cssRules).indexOf(s);a.unshift(o)}else if(s.parentStyleSheet){const o=Array.from(s.parentStyleSheet.cssRules).indexOf(s);a.unshift(o)}return a}return r(e,t)}function gi(e,t,r){let s,a;return e?(e.ownerNode?s=t.getId(e.ownerNode):a=r.getId(e),{styleId:a,id:s}):{}}function bQ({styleSheetRuleCb:e,mirror:t,stylesheetManager:r},{win:s}){if(!s.CSSStyleSheet||!s.CSSStyleSheet.prototype)return()=>{};const a=s.CSSStyleSheet.prototype.insertRule;s.CSSStyleSheet.prototype.insertRule=new Proxy(a,{apply:wt((p,f,m)=>{const[x,y]=m,{id:g,styleId:b}=gi(f,t,r.styleMirror);return(g&&g!==-1||b&&b!==-1)&&e({id:g,styleId:b,adds:[{rule:x,index:y}]}),p.apply(f,m)})});const i=s.CSSStyleSheet.prototype.deleteRule;s.CSSStyleSheet.prototype.deleteRule=new Proxy(i,{apply:wt((p,f,m)=>{const[x]=m,{id:y,styleId:g}=gi(f,t,r.styleMirror);return(y&&y!==-1||g&&g!==-1)&&e({id:y,styleId:g,removes:[{index:x}]}),p.apply(f,m)})});let o;s.CSSStyleSheet.prototype.replace&&(o=s.CSSStyleSheet.prototype.replace,s.CSSStyleSheet.prototype.replace=new Proxy(o,{apply:wt((p,f,m)=>{const[x]=m,{id:y,styleId:g}=gi(f,t,r.styleMirror);return(y&&y!==-1||g&&g!==-1)&&e({id:y,styleId:g,replace:x}),p.apply(f,m)})}));let l;s.CSSStyleSheet.prototype.replaceSync&&(l=s.CSSStyleSheet.prototype.replaceSync,s.CSSStyleSheet.prototype.replaceSync=new Proxy(l,{apply:wt((p,f,m)=>{const[x]=m,{id:y,styleId:g}=gi(f,t,r.styleMirror);return(y&&y!==-1||g&&g!==-1)&&e({id:y,styleId:g,replaceSync:x}),p.apply(f,m)})}));const u={};zf("CSSGroupingRule")?u.CSSGroupingRule=s.CSSGroupingRule:(zf("CSSMediaRule")&&(u.CSSMediaRule=s.CSSMediaRule),zf("CSSConditionRule")&&(u.CSSConditionRule=s.CSSConditionRule),zf("CSSSupportsRule")&&(u.CSSSupportsRule=s.CSSSupportsRule));const d={};return Object.entries(u).forEach(([p,f])=>{d[p]={insertRule:f.prototype.insertRule,deleteRule:f.prototype.deleteRule},f.prototype.insertRule=new Proxy(d[p].insertRule,{apply:wt((m,x,y)=>{const[g,b]=y,{id:_,styleId:w}=gi(x.parentStyleSheet,t,r.styleMirror);return(_&&_!==-1||w&&w!==-1)&&e({id:_,styleId:w,adds:[{rule:g,index:[...ip(x),b||0]}]}),m.apply(x,y)})}),f.prototype.deleteRule=new Proxy(d[p].deleteRule,{apply:wt((m,x,y)=>{const[g]=y,{id:b,styleId:_}=gi(x.parentStyleSheet,t,r.styleMirror);return(b&&b!==-1||_&&_!==-1)&&e({id:b,styleId:_,removes:[{index:[...ip(x),g]}]}),m.apply(x,y)})})}),wt(()=>{s.CSSStyleSheet.prototype.insertRule=a,s.CSSStyleSheet.prototype.deleteRule=i,o&&(s.CSSStyleSheet.prototype.replace=o),l&&(s.CSSStyleSheet.prototype.replaceSync=l),Object.entries(u).forEach(([p,f])=>{f.prototype.insertRule=d[p].insertRule,f.prototype.deleteRule=d[p].deleteRule})})}function KA({mirror:e,stylesheetManager:t},r){var o,l,u;let s=null;r.nodeName==="#document"?s=e.getId(r):s=e.getId(r.host);const a=r.nodeName==="#document"?(o=r.defaultView)==null?void 0:o.Document:(u=(l=r.ownerDocument)==null?void 0:l.defaultView)==null?void 0:u.ShadowRoot,i=a!=null&&a.prototype?Object.getOwnPropertyDescriptor(a==null?void 0:a.prototype,"adoptedStyleSheets"):void 0;return s===null||s===-1||!a||!i?()=>{}:(Object.defineProperty(r,"adoptedStyleSheets",{configurable:i.configurable,enumerable:i.enumerable,get(){var d;return(d=i.get)==null?void 0:d.call(this)},set(d){var f;const p=(f=i.set)==null?void 0:f.call(this,d);if(s!==null&&s!==-1)try{t.adoptStyleSheets(d,s)}catch{}return p}}),wt(()=>{Object.defineProperty(r,"adoptedStyleSheets",{configurable:i.configurable,enumerable:i.enumerable,get:i.get,set:i.set})}))}function vQ({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:r,stylesheetManager:s},{win:a}){const i=a.CSSStyleDeclaration.prototype.setProperty;a.CSSStyleDeclaration.prototype.setProperty=new Proxy(i,{apply:wt((l,u,d)=>{var g;const[p,f,m]=d;if(r.has(p))return i.apply(u,[p,f,m]);const{id:x,styleId:y}=gi((g=u.parentRule)==null?void 0:g.parentStyleSheet,t,s.styleMirror);return(x&&x!==-1||y&&y!==-1)&&e({id:x,styleId:y,set:{property:p,value:f,priority:m},index:ip(u.parentRule)}),l.apply(u,d)})});const o=a.CSSStyleDeclaration.prototype.removeProperty;return a.CSSStyleDeclaration.prototype.removeProperty=new Proxy(o,{apply:wt((l,u,d)=>{var x;const[p]=d;if(r.has(p))return o.apply(u,[p]);const{id:f,styleId:m}=gi((x=u.parentRule)==null?void 0:x.parentStyleSheet,t,s.styleMirror);return(f&&f!==-1||m&&m!==-1)&&e({id:f,styleId:m,remove:{property:p},index:ip(u.parentRule)}),l.apply(u,d)})}),wt(()=>{a.CSSStyleDeclaration.prototype.setProperty=i,a.CSSStyleDeclaration.prototype.removeProperty=o})}function wQ({mediaInteractionCb:e,blockClass:t,blockSelector:r,unblockSelector:s,mirror:a,sampling:i,doc:o}){const l=wt(d=>Ed(wt(p=>{const f=ih(p);if(!f||Ur(f,t,r,s,!0))return;const{currentTime:m,volume:x,muted:y,playbackRate:g}=f;e({type:d,id:a.getId(f),currentTime:m,volume:x,muted:y,playbackRate:g})}),i.media||500)),u=[ur("play",l(Yl.Play),o),ur("pause",l(Yl.Pause),o),ur("seeked",l(Yl.Seeked),o),ur("volumechange",l(Yl.VolumeChange),o),ur("ratechange",l(Yl.RateChange),o)];return wt(()=>{u.forEach(d=>d())})}function _Q({fontCb:e,doc:t}){const r=t.defaultView;if(!r)return()=>{};const s=[],a=new WeakMap,i=r.FontFace;r.FontFace=function(u,d,p){const f=new i(u,d,p);return a.set(f,{family:u,buffer:typeof d!="string",descriptors:p,fontSource:typeof d=="string"?d:JSON.stringify(Array.from(new Uint8Array(d)))}),f};const o=K_(t.fonts,"add",function(l){return function(u){return Xp(wt(()=>{const d=a.get(u);d&&(e(d),a.delete(u))}),0),l.apply(this,[u])}});return s.push(()=>{r.FontFace=i}),s.push(o),wt(()=>{s.forEach(l=>l())})}function jQ(e){const{doc:t,mirror:r,blockClass:s,blockSelector:a,unblockSelector:i,selectionCb:o}=e;let l=!0;const u=wt(()=>{const d=t.getSelection();if(!d||l&&(d!=null&&d.isCollapsed))return;l=d.isCollapsed||!1;const p=[],f=d.rangeCount||0;for(let m=0;m<f;m++){const x=d.getRangeAt(m),{startContainer:y,startOffset:g,endContainer:b,endOffset:_}=x;Ur(y,s,a,i,!0)||Ur(b,s,a,i,!0)||p.push({start:r.getId(y),startOffset:g,end:r.getId(b),endOffset:_})}o({ranges:p})});return u(),ur("selectionchange",u)}function NQ({doc:e,customElementCb:t}){const r=e.defaultView;return!r||!r.customElements?()=>{}:K_(r.customElements,"define",function(a){return function(i,o,l){try{t({define:{name:i}})}catch{}return a.apply(this,[i,o,l])}})}function SQ(e,t={}){const r=e.doc.defaultView;if(!r)return()=>{};let s;e.recordDOM&&(s=BA(e,e.doc));const a=mQ(e),i=pQ(e),o=HA(e),l=xQ(e,{win:r}),u=yQ(e),d=wQ(e);let p=()=>{},f=()=>{},m=()=>{},x=()=>{};e.recordDOM&&(p=bQ(e,{win:r}),f=KA(e,e.doc),m=vQ(e,{win:r}),e.collectFonts&&(x=_Q(e)));const y=jQ(e),g=NQ(e),b=[];for(const _ of e.plugins)b.push(_.observer(_.callback,r,_.options));return wt(()=>{sc.forEach(_=>_.reset()),s==null||s.disconnect(),a(),i(),o(),l(),u(),d(),p(),f(),m(),x(),y(),g(),b.forEach(_=>_())})}function Kf(e){return typeof window[e]<"u"}function zf(e){return!!(typeof window[e]<"u"&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}class iw{constructor(t){this.generateIdFn=t,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(t,r,s,a){const i=s||this.getIdToRemoteIdMap(t),o=a||this.getRemoteIdToIdMap(t);let l=i.get(r);return l||(l=this.generateIdFn(),i.set(r,l),o.set(l,r)),l}getIds(t,r){const s=this.getIdToRemoteIdMap(t),a=this.getRemoteIdToIdMap(t);return r.map(i=>this.getId(t,i,s,a))}getRemoteId(t,r,s){const a=s||this.getRemoteIdToIdMap(t);if(typeof r!="number")return r;const i=a.get(r);return i||-1}getRemoteIds(t,r){const s=this.getRemoteIdToIdMap(t);return r.map(a=>this.getRemoteId(t,a,s))}reset(t){if(!t){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(t),this.iframeRemoteIdToIdMap.delete(t)}getIdToRemoteIdMap(t){let r=this.iframeIdToRemoteIdMap.get(t);return r||(r=new Map,this.iframeIdToRemoteIdMap.set(t,r)),r}getRemoteIdToIdMap(t){let r=this.iframeRemoteIdToIdMap.get(t);return r||(r=new Map,this.iframeRemoteIdToIdMap.set(t,r)),r}}class kQ{constructor(){this.crossOriginIframeMirror=new iw(H_),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}}class EQ{constructor(t){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new iw(H_),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=t.mutationCb,this.wrappedEmit=t.wrappedEmit,this.stylesheetManager=t.stylesheetManager,this.recordCrossOriginIframes=t.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new iw(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=t.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(t){this.iframes.set(t,!0),t.contentWindow&&this.crossOriginIframeMap.set(t.contentWindow,t)}addLoadListener(t){this.loadListener=t}attachIframe(t,r){var a,i;this.mutationCb({adds:[{parentId:this.mirror.getId(t),nextId:null,node:r}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),this.recordCrossOriginIframes&&((a=t.contentWindow)==null||a.addEventListener("message",this.handleMessage.bind(this))),(i=this.loadListener)==null||i.call(this,t);const s=W_(t);s&&s.adoptedStyleSheets&&s.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(s.adoptedStyleSheets,this.mirror.getId(s))}handleMessage(t){const r=t;if(r.data.type!=="rrweb"||r.origin!==r.data.origin||!t.source)return;const a=this.crossOriginIframeMap.get(t.source);if(!a)return;const i=this.transformCrossOriginEvent(a,r.data.event);i&&this.wrappedEmit(i,r.data.isCheckout)}transformCrossOriginEvent(t,r){var s;switch(r.type){case mt.FullSnapshot:{this.crossOriginIframeMirror.reset(t),this.crossOriginIframeStyleMirror.reset(t),this.replaceIdOnNode(r.data.node,t);const a=r.data.node.id;return this.crossOriginIframeRootIdMap.set(t,a),this.patchRootIdOnNode(r.data.node,a),{timestamp:r.timestamp,type:mt.IncrementalSnapshot,data:{source:it.Mutation,adds:[{parentId:this.mirror.getId(t),nextId:null,node:r.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case mt.Meta:case mt.Load:case mt.DomContentLoaded:return!1;case mt.Plugin:return r;case mt.Custom:return this.replaceIds(r.data.payload,t,["id","parentId","previousId","nextId"]),r;case mt.IncrementalSnapshot:switch(r.data.source){case it.Mutation:return r.data.adds.forEach(a=>{this.replaceIds(a,t,["parentId","nextId","previousId"]),this.replaceIdOnNode(a.node,t);const i=this.crossOriginIframeRootIdMap.get(t);i&&this.patchRootIdOnNode(a.node,i)}),r.data.removes.forEach(a=>{this.replaceIds(a,t,["parentId","id"])}),r.data.attributes.forEach(a=>{this.replaceIds(a,t,["id"])}),r.data.texts.forEach(a=>{this.replaceIds(a,t,["id"])}),r;case it.Drag:case it.TouchMove:case it.MouseMove:return r.data.positions.forEach(a=>{this.replaceIds(a,t,["id"])}),r;case it.ViewportResize:return!1;case it.MediaInteraction:case it.MouseInteraction:case it.Scroll:case it.CanvasMutation:case it.Input:return this.replaceIds(r.data,t,["id"]),r;case it.StyleSheetRule:case it.StyleDeclaration:return this.replaceIds(r.data,t,["id"]),this.replaceStyleIds(r.data,t,["styleId"]),r;case it.Font:return r;case it.Selection:return r.data.ranges.forEach(a=>{this.replaceIds(a,t,["start","end"])}),r;case it.AdoptedStyleSheet:return this.replaceIds(r.data,t,["id"]),this.replaceStyleIds(r.data,t,["styleIds"]),(s=r.data.styles)==null||s.forEach(a=>{this.replaceStyleIds(a,t,["styleId"])}),r}}return!1}replace(t,r,s,a){for(const i of a)!Array.isArray(r[i])&&typeof r[i]!="number"||(Array.isArray(r[i])?r[i]=t.getIds(s,r[i]):r[i]=t.getId(s,r[i]));return r}replaceIds(t,r,s){return this.replace(this.crossOriginIframeMirror,t,r,s)}replaceStyleIds(t,r,s){return this.replace(this.crossOriginIframeStyleMirror,t,r,s)}replaceIdOnNode(t,r){this.replaceIds(t,r,["id","rootId"]),"childNodes"in t&&t.childNodes.forEach(s=>{this.replaceIdOnNode(s,r)})}patchRootIdOnNode(t,r){t.type!==Sn.Document&&!t.rootId&&(t.rootId=r),"childNodes"in t&&t.childNodes.forEach(s=>{this.patchRootIdOnNode(s,r)})}}class CQ{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}class TQ{constructor(t){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=t.mutationCb,this.scrollCb=t.scrollCb,this.bypassOptions=t.bypassOptions,this.mirror=t.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(t,r){if(!ud(t)||this.shadowDoms.has(t))return;this.shadowDoms.add(t),this.bypassOptions.canvasManager.addShadowRoot(t);const s=BA({...this.bypassOptions,doc:r,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},t);this.restoreHandlers.push(()=>s.disconnect()),this.restoreHandlers.push(HA({...this.bypassOptions,scrollCb:this.scrollCb,doc:t,mirror:this.mirror})),Xp(()=>{t.adoptedStyleSheets&&t.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(t.adoptedStyleSheets,this.mirror.getId(t.host)),this.restoreHandlers.push(KA({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},t))},0)}observeAttachShadow(t){const r=W_(t),s=lQ(t);!r||!s||this.patchAttachShadow(s.Element,r)}patchAttachShadow(t,r){const s=this;this.restoreHandlers.push(K_(t.prototype,"attachShadow",function(a){return function(i){const o=a.call(this,i);return this.shadowRoot&&FA(this)&&s.addShadowRoot(this.shadowRoot,r),o}}))}reset(){this.restoreHandlers.forEach(t=>{try{t()}catch{}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet,this.bypassOptions.canvasManager.resetShadowRoots()}}var Yk="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",RQ=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Wf=0;Wf<Yk.length;Wf++)RQ[Yk.charCodeAt(Wf)]=Wf;class Jk{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}addWindow(){}addShadowRoot(){}resetShadowRoots(){}}class AQ{constructor(t){this.trackedLinkElements=new WeakSet,this.styleMirror=new rQ,this.mutationCb=t.mutationCb,this.adoptedStyleSheetCb=t.adoptedStyleSheetCb}attachLinkElement(t,r){"_cssText"in r.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:r.id,attributes:r.attributes}]}),this.trackLinkElement(t)}trackLinkElement(t){this.trackedLinkElements.has(t)||(this.trackedLinkElements.add(t),this.trackStylesheetInLinkElement(t))}adoptStyleSheets(t,r){if(t.length===0)return;const s={id:r,styleIds:[]},a=[];for(const i of t){let o;this.styleMirror.has(i)?o=this.styleMirror.getId(i):(o=this.styleMirror.add(i),a.push({styleId:o,rules:Array.from(i.rules||CSSRule,(l,u)=>({rule:jA(l),index:u}))})),s.styleIds.push(o)}a.length>0&&(s.styles=a),this.adoptedStyleSheetCb(s)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(t){}}class PQ{constructor(){this.nodeMap=new WeakMap,this.active=!1}inOtherBuffer(t,r){const s=this.nodeMap.get(t);return s&&Array.from(s).some(a=>a!==r)}add(t,r){this.active||(this.active=!0,iQ(()=>{this.nodeMap=new WeakMap,this.active=!1})),this.nodeMap.set(t,(this.nodeMap.get(t)||new Set).add(r))}destroy(){}}let mn,op;var jC;try{if(Array.from([1],e=>e*2)[0]!==2){const e=document.createElement("iframe");document.body.appendChild(e),Array.from=((jC=e.contentWindow)==null?void 0:jC.Array.from)||Array.from,document.body.removeChild(e)}}catch(e){console.debug("Unable to override Array.from",e)}const Ss=RV();function Ra(e={}){const{emit:t,checkoutEveryNms:r,checkoutEveryNth:s,blockClass:a="rr-block",blockSelector:i=null,unblockSelector:o=null,ignoreClass:l="rr-ignore",ignoreSelector:u=null,maskAllText:d=!1,maskTextClass:p="rr-mask",unmaskTextClass:f=null,maskTextSelector:m=null,unmaskTextSelector:x=null,inlineStylesheet:y=!0,maskAllInputs:g,maskInputOptions:b,slimDOMOptions:_,maskAttributeFn:w,maskInputFn:S,maskTextFn:j,maxCanvasSize:N=null,packFn:C,sampling:E={},dataURLOptions:T={},mousemoveWait:I,recordDOM:A=!0,recordCanvas:R=!1,recordCrossOriginIframes:O=!1,recordAfter:M=e.recordAfter==="DOMContentLoaded"?e.recordAfter:"load",userTriggeredOnInput:B=!1,collectFonts:U=!1,inlineImages:Y=!1,plugins:W,keepIframeSrcFn:K=()=>!1,ignoreCSSAttributes:F=new Set([]),errorHandler:H,onMutation:L,getCanvasManager:q}=e;hQ(H);const z=O?window.parent===window:!0;let Q=!1;if(!z)try{window.parent.document&&(Q=!1)}catch{Q=!0}if(z&&!t)throw new Error("emit function is required");if(!z&&!Q)return()=>{};I!==void 0&&E.mousemove===void 0&&(E.mousemove=I),Ss.reset();const J=g===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:b!==void 0?b:{},V=_===!0||_==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:_==="all",headMetaDescKeywords:_==="all"}:_||{};nQ();let ee,te=0;const oe=ye=>{for(const Se of W||[])Se.eventProcessor&&(ye=Se.eventProcessor(ye));return C&&!Q&&(ye=C(ye)),ye};mn=(ye,Se)=>{var Ge;const pe=ye;if(pe.timestamp=ap(),(Ge=sc[0])!=null&&Ge.isFrozen()&&pe.type!==mt.FullSnapshot&&!(pe.type===mt.IncrementalSnapshot&&pe.data.source===it.Mutation)&&sc.forEach(Qe=>Qe.unfreeze()),z)t==null||t(oe(pe),Se);else if(Q){const Qe={type:"rrweb",event:oe(pe),origin:window.location.origin,isCheckout:Se};window.parent.postMessage(Qe,"*")}if(pe.type===mt.FullSnapshot)ee=pe,te=0;else if(pe.type===mt.IncrementalSnapshot){if(pe.data.source===it.Mutation&&pe.data.isAttachIframe)return;te++;const Qe=s&&te>=s,Me=r&&ee&&pe.timestamp-ee.timestamp>r;(Qe||Me)&&xe(!0)}};const he=ye=>{mn({type:mt.IncrementalSnapshot,data:{source:it.Mutation,...ye}})},Ce=ye=>mn({type:mt.IncrementalSnapshot,data:{source:it.Scroll,...ye}}),Fe=ye=>mn({type:mt.IncrementalSnapshot,data:{source:it.CanvasMutation,...ye}}),Ae=ye=>mn({type:mt.IncrementalSnapshot,data:{source:it.AdoptedStyleSheet,...ye}}),Ne=new AQ({mutationCb:he,adoptedStyleSheetCb:Ae}),Be=typeof __RRWEB_EXCLUDE_IFRAME__=="boolean"&&__RRWEB_EXCLUDE_IFRAME__?new kQ:new EQ({mirror:Ss,mutationCb:he,stylesheetManager:Ne,recordCrossOriginIframes:O,wrappedEmit:mn});for(const ye of W||[])ye.getMirror&&ye.getMirror({nodeMirror:Ss,crossOriginIframeMirror:Be.crossOriginIframeMirror,crossOriginIframeStyleMirror:Be.crossOriginIframeStyleMirror});const St=new PQ,ut=IQ(q,{mirror:Ss,win:window,mutationCb:ye=>mn({type:mt.IncrementalSnapshot,data:{source:it.CanvasMutation,...ye}}),recordCanvas:R,blockClass:a,blockSelector:i,unblockSelector:o,maxCanvasSize:N,sampling:E.canvas,dataURLOptions:T,errorHandler:H}),fe=typeof __RRWEB_EXCLUDE_SHADOW_DOM__=="boolean"&&__RRWEB_EXCLUDE_SHADOW_DOM__?new CQ:new TQ({mutationCb:he,scrollCb:Ce,bypassOptions:{onMutation:L,blockClass:a,blockSelector:i,unblockSelector:o,maskAllText:d,maskTextClass:p,unmaskTextClass:f,maskTextSelector:m,unmaskTextSelector:x,inlineStylesheet:y,maskInputOptions:J,dataURLOptions:T,maskAttributeFn:w,maskTextFn:j,maskInputFn:S,recordCanvas:R,inlineImages:Y,sampling:E,slimDOMOptions:V,iframeManager:Be,stylesheetManager:Ne,canvasManager:ut,keepIframeSrcFn:K,processedNodeManager:St,ignoreCSSAttributes:F},mirror:Ss}),xe=(ye=!1)=>{if(!A)return;mn({type:mt.Meta,data:{href:window.location.href,width:IA(),height:OA()}},ye),Ne.reset(),fe.init(),sc.forEach(pe=>pe.lock());const Se=eQ(document,{mirror:Ss,blockClass:a,blockSelector:i,unblockSelector:o,maskAllText:d,maskTextClass:p,unmaskTextClass:f,maskTextSelector:m,unmaskTextSelector:x,inlineStylesheet:y,maskAllInputs:J,maskAttributeFn:w,maskInputFn:S,maskTextFn:j,slimDOM:V,dataURLOptions:T,recordCanvas:R,inlineImages:Y,onSerialize:pe=>{DA(pe,Ss)&&Be.addIframe(pe),$A(pe,Ss)&&Ne.trackLinkElement(pe),sw(pe)&&fe.addShadowRoot(pe.shadowRoot,document)},onIframeLoad:(pe,Ge)=>{Be.attachIframe(pe,Ge),pe.contentWindow&&ut.addWindow(pe.contentWindow),fe.observeAttachShadow(pe)},onStylesheetLoad:(pe,Ge)=>{Ne.attachLinkElement(pe,Ge)},onBlockedImageLoad:(pe,Ge,{width:Qe,height:Me})=>{he({adds:[],removes:[],texts:[],attributes:[{id:Ge.id,attributes:{style:{width:`${Qe}px`,height:`${Me}px`}}}]})},keepIframeSrcFn:K,ignoreCSSAttributes:F});if(!Se)return console.warn("Failed to snapshot the document");mn({type:mt.FullSnapshot,data:{node:Se,initialOffset:PA(window)}}),sc.forEach(pe=>pe.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&Ne.adoptStyleSheets(document.adoptedStyleSheets,Ss.getId(document))};op=xe;try{const ye=[],Se=Ge=>{var Qe;return wt(SQ)({onMutation:L,mutationCb:he,mousemoveCb:(Me,Cn)=>mn({type:mt.IncrementalSnapshot,data:{source:Cn,positions:Me}}),mouseInteractionCb:Me=>mn({type:mt.IncrementalSnapshot,data:{source:it.MouseInteraction,...Me}}),scrollCb:Ce,viewportResizeCb:Me=>mn({type:mt.IncrementalSnapshot,data:{source:it.ViewportResize,...Me}}),inputCb:Me=>mn({type:mt.IncrementalSnapshot,data:{source:it.Input,...Me}}),mediaInteractionCb:Me=>mn({type:mt.IncrementalSnapshot,data:{source:it.MediaInteraction,...Me}}),styleSheetRuleCb:Me=>mn({type:mt.IncrementalSnapshot,data:{source:it.StyleSheetRule,...Me}}),styleDeclarationCb:Me=>mn({type:mt.IncrementalSnapshot,data:{source:it.StyleDeclaration,...Me}}),canvasMutationCb:Fe,fontCb:Me=>mn({type:mt.IncrementalSnapshot,data:{source:it.Font,...Me}}),selectionCb:Me=>{mn({type:mt.IncrementalSnapshot,data:{source:it.Selection,...Me}})},customElementCb:Me=>{mn({type:mt.IncrementalSnapshot,data:{source:it.CustomElement,...Me}})},blockClass:a,ignoreClass:l,ignoreSelector:u,maskAllText:d,maskTextClass:p,unmaskTextClass:f,maskTextSelector:m,unmaskTextSelector:x,maskInputOptions:J,inlineStylesheet:y,sampling:E,recordDOM:A,recordCanvas:R,inlineImages:Y,userTriggeredOnInput:B,collectFonts:U,doc:Ge,maskAttributeFn:w,maskInputFn:S,maskTextFn:j,keepIframeSrcFn:K,blockSelector:i,unblockSelector:o,slimDOMOptions:V,dataURLOptions:T,mirror:Ss,iframeManager:Be,stylesheetManager:Ne,shadowDomManager:fe,processedNodeManager:St,canvasManager:ut,ignoreCSSAttributes:F,plugins:((Qe=W==null?void 0:W.filter(Me=>Me.observer))==null?void 0:Qe.map(Me=>({observer:Me.observer,options:Me.options,callback:Cn=>mn({type:mt.Plugin,data:{plugin:Me.name,payload:Cn}})})))||[]},{})};Be.addLoadListener(Ge=>{try{ye.push(Se(Ge.contentDocument))}catch(Qe){console.warn(Qe)}});const pe=()=>{xe(),ye.push(Se(document))};return document.readyState==="interactive"||document.readyState==="complete"?pe():(ye.push(ur("DOMContentLoaded",()=>{mn({type:mt.DomContentLoaded,data:{}}),M==="DOMContentLoaded"&&pe()})),ye.push(ur("load",()=>{mn({type:mt.Load,data:{}}),M==="load"&&pe()},window))),()=>{ye.forEach(Ge=>Ge()),St.destroy(),op=void 0,fQ()}}catch(ye){console.warn(ye)}}function OQ(e){if(!op)throw new Error("please take full snapshot after start recording");op(e)}Ra.mirror=Ss;Ra.takeFullSnapshot=OQ;function IQ(e,t){try{return e?e(t):new Jk}catch{return console.warn("Unable to initialize CanvasManager"),new Jk}}var Xk;(function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"})(Xk||(Xk={}));const LQ=3,MQ=5;function G_(e){return e>9999999999?e:e*1e3}function X0(e){return e>9999999999?e/1e3:e}function oh(e,t){t.category!=="sentry.transaction"&&(["ui.click","ui.input"].includes(t.category)?e.triggerUserActivity():e.checkAndHandleExpiredSession(),e.addUpdate(()=>(e.throttledAddEvent({type:mt.Custom,timestamp:(t.timestamp||0)*1e3,data:{tag:"breadcrumb",payload:Fr(t,10,1e3)}}),t.category==="console")))}const DQ="button,a";function zA(e){return e.closest(DQ)||e}function WA(e){const t=GA(e);return!t||!(t instanceof Element)?t:zA(t)}function GA(e){return $Q(e)?e.target:e}function $Q(e){return typeof e=="object"&&!!e&&"target"in e}let yi;function qQ(e){return yi||(yi=[],FQ()),yi.push(e),()=>{const t=yi?yi.indexOf(e):-1;t>-1&&yi.splice(t,1)}}function FQ(){Kn(Yt,"open",function(e){return function(...t){if(yi)try{yi.forEach(r=>r())}catch{}return e.apply(Yt,t)}})}const UQ=new Set([it.Mutation,it.StyleSheetRule,it.StyleDeclaration,it.AdoptedStyleSheet,it.CanvasMutation,it.Selection,it.MediaInteraction]);function BQ(e,t,r){e.handleClick(t,r)}class HQ{constructor(t,r,s=oh){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=r.timeout/1e3,this._threshold=r.threshold/1e3,this._scrollTimeout=r.scrollTimeout/1e3,this._replay=t,this._ignoreSelector=r.ignoreSelector,this._addBreadcrumbEvent=s}addListeners(){const t=qQ(()=>{this._lastMutation=Zk()});this._teardown=()=>{t(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(t,r){if(zQ(r,this._ignoreSelector)||!WQ(t))return;const s={timestamp:X0(t.timestamp),clickBreadcrumb:t,clickCount:0,node:r};this._clicks.some(a=>a.node===s.node&&Math.abs(a.timestamp-s.timestamp)<1)||(this._clicks.push(s),this._clicks.length===1&&this._scheduleCheckClicks())}registerMutation(t=Date.now()){this._lastMutation=X0(t)}registerScroll(t=Date.now()){this._lastScroll=X0(t)}registerClick(t){const r=zA(t);this._handleMultiClick(r)}_handleMultiClick(t){this._getClicks(t).forEach(r=>{r.clickCount++})}_getClicks(t){return this._clicks.filter(r=>r.node===t)}_checkClicks(){const t=[],r=Zk();this._clicks.forEach(s=>{!s.mutationAfter&&this._lastMutation&&(s.mutationAfter=s.timestamp<=this._lastMutation?this._lastMutation-s.timestamp:void 0),!s.scrollAfter&&this._lastScroll&&(s.scrollAfter=s.timestamp<=this._lastScroll?this._lastScroll-s.timestamp:void 0),s.timestamp+this._timeout<=r&&t.push(s)});for(const s of t){const a=this._clicks.indexOf(s);a>-1&&(this._generateBreadcrumbs(s),this._clicks.splice(a,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(t){const r=this._replay,s=t.scrollAfter&&t.scrollAfter<=this._scrollTimeout,a=t.mutationAfter&&t.mutationAfter<=this._threshold,i=!s&&!a,{clickCount:o,clickBreadcrumb:l}=t;if(i){const u=Math.min(t.mutationAfter||this._timeout,this._timeout)*1e3,d=u<this._timeout*1e3?"mutation":"timeout",p={type:"default",message:l.message,timestamp:l.timestamp,category:"ui.slowClickDetected",data:{...l.data,url:Yt.location.href,route:r.getCurrentRoute(),timeAfterClickMs:u,endReason:d,clickCount:o||1}};this._addBreadcrumbEvent(r,p);return}if(o>1){const u={type:"default",message:l.message,timestamp:l.timestamp,category:"ui.multiClick",data:{...l.data,url:Yt.location.href,route:r.getCurrentRoute(),clickCount:o,metric:!0}};this._addBreadcrumbEvent(r,u)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=ah(()=>this._checkClicks(),1e3)}}const KQ=["A","BUTTON","INPUT"];function zQ(e,t){return!!(!KQ.includes(e.tagName)||e.tagName==="INPUT"&&!["submit","button"].includes(e.getAttribute("type")||"")||e.tagName==="A"&&(e.hasAttribute("download")||e.hasAttribute("target")&&e.getAttribute("target")!=="_self")||t&&e.matches(t))}function WQ(e){return!!(e.data&&typeof e.data.nodeId=="number"&&e.timestamp)}function Zk(){return Date.now()/1e3}function GQ(e,t){try{if(!VQ(t))return;const{source:r}=t.data;if(UQ.has(r)&&e.registerMutation(t.timestamp),r===it.Scroll&&e.registerScroll(t.timestamp),QQ(t)){const{type:s,id:a}=t.data,i=Ra.mirror.getNode(a);i instanceof HTMLElement&&s===ir.Click&&e.registerClick(i)}}catch{}}function VQ(e){return e.type===LQ}function QQ(e){return e.data.source===it.MouseInteraction}function Qs(e){return{timestamp:Date.now()/1e3,type:"default",...e}}var V_=(e=>(e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e))(V_||{});const YQ=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function JQ(e){const t={};!e["data-sentry-component"]&&e["data-sentry-element"]&&(e["data-sentry-component"]=e["data-sentry-element"]);for(const r in e)if(YQ.has(r)){let s=r;(r==="data-testid"||r==="data-test-id")&&(s="testId"),t[s]=e[r]}return t}const XQ=e=>t=>{if(!e.isEnabled())return;const r=ZQ(t);if(!r)return;const s=t.name==="click",a=s?t.event:void 0;s&&e.clickDetector&&(a!=null&&a.target)&&!a.altKey&&!a.metaKey&&!a.ctrlKey&&!a.shiftKey&&BQ(e.clickDetector,r,WA(t.event)),oh(e,r)};function VA(e,t){const r=Ra.mirror.getId(e),s=r&&Ra.mirror.getNode(r),a=s&&Ra.mirror.getMeta(s),i=a&&tY(a)?a:null;return{message:t,data:i?{nodeId:r,node:{id:r,tagName:i.tagName,textContent:Array.from(i.childNodes).map(o=>o.type===V_.Text&&o.textContent).filter(Boolean).map(o=>o.trim()).join(""),attributes:JQ(i.attributes)}}:{}}}function ZQ(e){const{target:t,message:r}=eY(e);return Qs({category:`ui.${e.name}`,...VA(t,r)})}function eY(e){const t=e.name==="click";let r,s=null;try{s=t?WA(e.event):GA(e.event),r=Cr(s,{maxStringLength:200})||"<unknown>"}catch{r="<unknown>"}return{target:s,message:r}}function tY(e){return e.type===V_.Element}function nY(e,t){if(!e.isEnabled())return;e.updateUserActivity();const r=rY(t);r&&oh(e,r)}function rY(e){const{metaKey:t,shiftKey:r,ctrlKey:s,altKey:a,key:i,target:o}=e;if(!o||sY(o)||!i)return null;const l=t||s||a,u=i.length===1;if(!l&&u)return null;const d=Cr(o,{maxStringLength:200})||"<unknown>",p=VA(o,d);return Qs({category:"ui.keyDown",message:d,data:{...p.data,metaKey:t,shiftKey:r,ctrlKey:s,altKey:a,key:i}})}function sY(e){return e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.isContentEditable}const aY={resource:uY,paint:lY,navigation:cY};function Z0(e,t){return({metric:r})=>void t.replayPerformanceEntries.push(e(r))}function iY(e){return e.map(oY).filter(Boolean)}function oY(e){const t=aY[e.entryType];return t?t(e):null}function Lc(e){return((rr()||Yt.performance.timeOrigin)+e)/1e3}function lY(e){const{duration:t,entryType:r,name:s,startTime:a}=e,i=Lc(a);return{type:r,name:s,start:i,end:i+t,data:void 0}}function cY(e){const{entryType:t,name:r,decodedBodySize:s,duration:a,domComplete:i,encodedBodySize:o,domContentLoadedEventStart:l,domContentLoadedEventEnd:u,domInteractive:d,loadEventStart:p,loadEventEnd:f,redirectCount:m,startTime:x,transferSize:y,type:g}=e;return a===0?null:{type:`${t}.${g}`,start:Lc(x),end:Lc(i),name:r,data:{size:y,decodedBodySize:s,encodedBodySize:o,duration:a,domInteractive:d,domContentLoadedEventStart:l,domContentLoadedEventEnd:u,loadEventStart:p,loadEventEnd:f,domComplete:i,redirectCount:m}}}function uY(e){const{entryType:t,initiatorType:r,name:s,responseEnd:a,startTime:i,decodedBodySize:o,encodedBodySize:l,responseStatus:u,transferSize:d}=e;return["fetch","xmlhttprequest"].includes(r)?null:{type:`${t}.${r}`,start:Lc(i),end:Lc(a),name:s,data:{size:d,statusCode:u,decodedBodySize:o,encodedBodySize:l}}}function dY(e){const t=e.entries[e.entries.length-1],r=t!=null&&t.element?[t.element]:void 0;return Q_(e,"largest-contentful-paint",r)}function hY(e){return e.sources!==void 0}function fY(e){const t=[],r=[];for(const s of e.entries)if(hY(s)){const a=[];for(const i of s.sources)if(i.node){r.push(i.node);const o=Ra.mirror.getId(i.node);o&&a.push(o)}t.push({value:s.value,nodeIds:a.length?a:void 0})}return Q_(e,"cumulative-layout-shift",r,t)}function mY(e){const t=e.entries[e.entries.length-1],r=t!=null&&t.target?[t.target]:void 0;return Q_(e,"interaction-to-next-paint",r)}function Q_(e,t,r,s){const a=e.value,i=e.rating,o=Lc(a);return{type:"web-vital",name:t,start:o,end:o,data:{value:a,size:a,rating:i,nodeIds:r?r.map(l=>Ra.mirror.getId(l)):void 0,attributions:s}}}function pY(e){function t(a){e.performanceEntries.includes(a)||e.performanceEntries.push(a)}function r({entries:a}){a.forEach(t)}const s=[];return["navigation","paint","resource"].forEach(a=>{s.push(Xo(a,r))}),s.push(O_(Z0(dY,e)),P_(Z0(fY,e)),WR(Z0(mY,e))),()=>{s.forEach(a=>a())}}const nt=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,xY='var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),s=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=function(t,e){for(var i=new n(31),s=0;s<31;++s)i[s]=e+=1<<t[s-1];var a=new r(i[30]);for(s=1;s<30;++s)for(var o=i[s];o<i[s+1];++o)a[o]=o-i[s]<<5|s;return{b:i,r:a}},o=a(e,2),h=o.b,f=o.r;h[28]=258,f[258]=28;for(var l=a(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,s=0,a=new n(r);s<i;++s)t[s]&&++a[t[s]-1];var o,h=new n(r);for(s=1;s<r;++s)h[s]=h[s-1]+a[s-1]<<1;if(e){o=new n(1<<r);var f=15-r;for(s=0;s<i;++s)if(t[s])for(var l=s<<4|t[s],c=r-t[s],v=h[t[s]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>f]=l}else for(o=new n(i),s=0;s<i;++s)t[s]&&(o[s]=u[h[t[s]-1]++]>>15-t[s]);return o},p=new t(288);for(c=0;c<144;++c)p[c]=8;for(c=144;c<256;++c)p[c]=9;for(c=256;c<280;++c)p[c]=7;for(c=280;c<288;++c)p[c]=8;var g=new t(32);for(c=0;c<32;++c)g[c]=5;var w=d(p,9,0),y=d(g,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},_=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},x=function(r,e){for(var i=[],s=0;s<r.length;++s)r[s]&&i.push({s:s,f:r[s]});var a=i.length,o=i.slice();if(!a)return{t:F,l:0};if(1==a){var h=new t(i[0].s+1);return h[i[0].s]=1,{t:h,l:1}}i.sort(function(t,n){return t.f-n.f}),i.push({s:-1,f:25001});var f=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:f.f+l.f,l:f,r:l};c!=a-1;)f=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:f.f+l.f,l:f,r:l};var d=o[0].s;for(s=1;s<a;++s)o[s].s>d&&(d=o[s].s);var p=new n(d+1),g=A(i[c-1],p,0);if(g>e){s=0;var w=0,y=g-e,m=1<<y;for(o.sort(function(t,n){return p[n.s]-p[t.s]||t.f-n.f});s<a;++s){var b=o[s].s;if(!(p[b]>e))break;w+=m-(1<<g-p[b]),p[b]=e}for(w>>=y;w>0;){var M=o[s].s;p[M]<e?w-=1<<e-p[M]++-1:++s}for(;s>=0&&w;--s){var E=o[s].s;p[E]==e&&(--p[E],++w)}g=e}return{t:new t(p),l:g}},A=function(t,n,r){return-1==t.s?Math.max(A(t.l,n,r+1),A(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,s=t[0],a=1,o=function(t){e[i++]=t},h=1;h<=r;++h)if(t[h]==s&&h!=r)++a;else{if(!s&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(s),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(s);a=1,s=t[h]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var s=0;s<e;++s)t[i+s+4]=r[s];return 8*(i+4+e)},U=function(t,r,a,o,h,f,l,u,c,v,m){z(r,m++,a),++h[256];for(var b=x(h,15),M=b.t,E=b.l,A=x(f,15),U=A.t,C=A.l,F=D(M),I=F.c,S=F.n,L=D(U),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=x(q,7),H=G.t,J=G.l,K=19;K>4&&!H[s[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(h,p)+T(f,g)+l,X=T(h,M)+T(f,U)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(U,C,0),R=U;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[s[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=w,P=p,Q=y,R=g;for(B=0;B<u;++B){var rt=o[B];if(rt>255){_(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;_(r,m,Q[et]),m+=R[et],et>3&&(_(r,m,rt>>5&8191),m+=i[et])}else _(r,m,N[rt]),m+=P[rt]}return _(r,m,N[256]),m+P[256]},C=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,s=0|r.length,a=0;a!=s;){for(var o=Math.min(a+2655,s);a<o;++a)i+=e+=r[a];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},L=function(s,a,o,h,u){if(!u&&(u={l:1},a.dictionary)){var c=a.dictionary.subarray(-32768),v=new t(c.length+s.length);v.set(c),v.set(s,c.length),s=v,u.w=c.length}return function(s,a,o,h,u,c){var v=c.z||s.length,d=new t(h+v+5*(1+Math.ceil(v/7e3))+u),p=d.subarray(h,d.length-u),g=c.l,w=7&(c.r||0);if(a){w&&(p[0]=c.r>>3);for(var y=C[a-1],M=y>>13,E=8191&y,z=(1<<o)-1,_=c.p||new n(32768),x=c.h||new n(z+1),A=Math.ceil(o/3),D=2*A,T=function(t){return(s[t]^s[t+1]<<A^s[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=x[H];if(_[J]=K,x[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!g)){w=U(s,p,0,F,I,S,O,q,G,j-G,w),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(s[j+Q]==s[j+Q-W]){for(var $=0;$<Z&&s[j+$]==s[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-_[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=_[J])&32767}if(R){F[q++]=268435456|f[Q]<<18|l[R];var it=31&f[Q],st=31&l[R];O+=e[it]+i[st],++I[257+it],++S[st],B=j+Q,++L}else F[q++]=s[j],++I[s[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=s[j],++I[s[j]];w=U(s,p,g,F,I,S,O,q,G,j-G,w),g||(c.r=7&w|p[w/8|0]<<3,w-=7,c.h=x,c.p=_,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+g;j+=65535){var at=j+65535;at>=v&&(p[w/8|0]=g,at=v),w=k(p,w+1,s.subarray(j,at))}c.i=v}return b(d,0,h+m(w)+u)}(s,null==a.level?6:a.level,null==a.mem?u.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(s.length)))):20:12+a.mem,o,h,u)},O=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},j=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(L(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var s=this.b.length-this.s.z;this.b.set(n.subarray(0,s),this.s.z),this.s.z=this.b.length,this.p(this.b,!1),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(s),32768),this.s.z=n.length-s+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n.prototype.flush=function(){this.ondata||E(5),this.s.l&&E(4),this.p(this.b,!1),this.s.w=this.s.i,this.s.i-=2},n}();function q(t,n){n||(n={});var r=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}}(),e=t.length;r.p(t);var i,s=L(t,n,10+((i=n).filename?i.filename.length+1:0),8),a=s.length;return function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&O(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}}(s,n),O(s,a-8,r.d()),O(s,a-4,e),s}var B=function(){function t(t,n){this.c=S(),this.v=1,j.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),j.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=L(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=S();i.p(n.dictionary),O(t,2,i.d())}}(r,this.o),this.v=0),n&&O(r,r.length-4,this.c.d()),this.ondata(r,n)},t.prototype.flush=function(){j.prototype.flush.call(this)},t}(),G="undefined"!=typeof TextEncoder&&new TextEncoder,H="undefined"!=typeof TextDecoder&&new TextDecoder;try{H.decode(F,{stream:!0})}catch(t){}var J=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(K(t),this.d=n||!1)},t}();function K(n,r){if(G)return G.encode(n);for(var e=n.length,i=new t(n.length+(n.length>>1)),s=0,a=function(t){i[s++]=t},o=0;o<e;++o){if(s+5>i.length){var h=new t(s+8+(e-o<<1));h.set(i),i=h}var f=n.charCodeAt(o);f<128||r?a(f):f<2048?(a(192|f>>6),a(128|63&f)):f>55295&&f<57344?(a(240|(f=65536+(1047552&f)|1023&n.charCodeAt(++o))>>18),a(128|f>>12&63),a(128|f>>6&63),a(128|63&f)):(a(224|f>>12),a(128|f>>6&63),a(128|63&f))}return b(i,0,s)}const N=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(const r of t)n+=r.length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new B,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new J((t,n)=>{this.deflate.push(t,n)}),this.stream.push("[")}},P={clear:()=>{N.clear()},addEvent:t=>N.addEvent(t),finish:()=>N.finish(),compress:t=>function(t){return q(K(t))}(t)};addEventListener("message",function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in P&&"function"==typeof P[n])try{const t=P[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}}),postMessage({id:void 0,method:"init",success:!0,response:void 0});';function gY(){const e=new Blob([xY]);return URL.createObjectURL(e)}const eE=["log","warn","error"],wm="[Replay] ";function ey(e,t="info"){Ds({category:"console",data:{logger:"replay"},level:t,message:`${wm}${e}`},{level:t})}function yY(){let e=!1,t=!1;const r={exception:()=>{},infoTick:()=>{},setConfig:s=>{e=!!s.captureExceptions,t=!!s.traceInternals}};return nt?(eE.forEach(s=>{r[s]=(...a)=>{ce[s](wm,...a),t&&ey(a.join(""),zm(s))}}),r.exception=(s,...a)=>{a.length&&r.error&&r.error(...a),ce.error(wm,s),e?Ct(s,{mechanism:{handled:!0,type:"auto.function.replay.debug"}}):t&&ey(s,"error")},r.infoTick=(...s)=>{ce.log(wm,...s),t&&setTimeout(()=>ey(s[0]),0)}):eE.forEach(s=>{r[s]=()=>{}}),r}const rt=yY();class Y_ extends Error{constructor(){super(`Event buffer exceeded maximum size of ${U_}.`)}}class QA{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1,this.waitForCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(t){const r=JSON.stringify(t).length;if(this._totalSize+=r,this._totalSize>U_)throw new Y_;this.events.push(t)}finish(){return new Promise(t=>{const r=this.events;this.clear(),t(JSON.stringify(r))})}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){const t=this.events.map(r=>r.timestamp).sort()[0];return t?G_(t):null}}class bY{constructor(t){this._worker=t,this._id=0}ensureReady(){return this._ensureReadyPromise?this._ensureReadyPromise:(this._ensureReadyPromise=new Promise((t,r)=>{this._worker.addEventListener("message",({data:s})=>{s.success?t():r()},{once:!0}),this._worker.addEventListener("error",s=>{r(s)},{once:!0})}),this._ensureReadyPromise)}destroy(){nt&&rt.log("Destroying compression worker"),this._worker.terminate()}postMessage(t,r){const s=this._getAndIncrementId();return new Promise((a,i)=>{const o=({data:l})=>{const u=l;if(u.method===t&&u.id===s){if(this._worker.removeEventListener("message",o),!u.success){nt&&rt.error("Error in compression worker: ",u.response),i(new Error("Error in compression worker"));return}a(u.response)}};this._worker.addEventListener("message",o),this._worker.postMessage({id:s,method:t,arg:r})})}_getAndIncrementId(){return this._id++}}class vY{constructor(t){this._worker=new bY(t),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this.waitForCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(t){const r=G_(t.timestamp);(!this._earliestTimestamp||r<this._earliestTimestamp)&&(this._earliestTimestamp=r);const s=JSON.stringify(t);return this._totalSize+=s.length,this._totalSize>U_?Promise.reject(new Y_):this._sendEventToWorker(s)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,t=>{nt&&rt.exception(t,'Sending "clear" message to worker failed',t)})}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(t){return this._worker.postMessage("addEvent",t)}async _finishRequest(){const t=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,t}}class wY{constructor(t){this._fallback=new QA,this._compression=new vY(t),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get waitForCheckout(){return this._used.waitForCheckout}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(t){this._used.hasCheckout=t}set waitForCheckout(t){this._used.waitForCheckout=t}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(t){return this._used.addEvent(t)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch(t){nt&&rt.exception(t,"Failed to load the compression worker, falling back to simple buffer");return}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){const{events:t,hasCheckout:r,waitForCheckout:s}=this._fallback,a=[];for(const i of t)a.push(this._compression.addEvent(i));this._compression.hasCheckout=r,this._compression.waitForCheckout=s,this._used=this._compression;try{await Promise.all(a),this._fallback.clear()}catch(i){nt&&rt.exception(i,"Failed to add events when switching buffers.")}}}function _Y({useCompression:e,workerUrl:t}){if(e&&window.Worker){const r=jY(t);if(r)return r}return nt&&rt.log("Using simple buffer"),new QA}function jY(e){try{const t=e||NY();if(!t)return;nt&&rt.log(`Using compression worker${e?` from ${e}`:""}`);const r=new Worker(t);return new wY(r)}catch(t){nt&&rt.exception(t,"Failed to create compression worker")}}function NY(){return typeof __SENTRY_EXCLUDE_REPLAY_WORKER__>"u"||!__SENTRY_EXCLUDE_REPLAY_WORKER__?gY():""}function J_(){try{return"sessionStorage"in Yt&&!!Yt.sessionStorage}catch{return!1}}function SY(e){kY(),e.session=void 0}function kY(){if(J_())try{Yt.sessionStorage.removeItem(q_)}catch{}}function YA(e){return e===void 0?!1:Math.random()<e}function Zp(e){if(J_())try{Yt.sessionStorage.setItem(q_,JSON.stringify(e))}catch{}}function JA(e){const t=Date.now(),r=e.id||On(),s=e.started||t,a=e.lastActivity||t,i=e.segmentId||0,o=e.sampled,l=e.previousSessionId,u=e.dirty||!1;return{id:r,started:s,lastActivity:a,segmentId:i,sampled:o,previousSessionId:l,dirty:u}}function EY(e,t){return YA(e)?"session":t?"buffer":!1}function tE({sessionSampleRate:e,allowBuffering:t,stickySession:r=!1},{previousSessionId:s}={}){const a=EY(e,t),i=JA({sampled:a,previousSessionId:s});return r&&Zp(i),i}function CY(){if(!J_())return null;try{const e=Yt.sessionStorage.getItem(q_);if(!e)return null;const t=JSON.parse(e);return nt&&rt.infoTick("Loading existing session"),JA(t)}catch{return null}}function ow(e,t,r=+new Date){return e===null||t===void 0||t<0?!0:t===0?!1:e+t<=r}function XA(e,{maxReplayDuration:t,sessionIdleExpire:r,targetTime:s=Date.now()}){return ow(e.started,t,s)||ow(e.lastActivity,r,s)}function ZA(e,{sessionIdleExpire:t,maxReplayDuration:r}){return!(!XA(e,{sessionIdleExpire:t,maxReplayDuration:r})||e.sampled==="buffer"&&e.segmentId===0)}function ty({sessionIdleExpire:e,maxReplayDuration:t,previousSessionId:r},s){const a=s.stickySession&&CY();return a?ZA(a,{sessionIdleExpire:e,maxReplayDuration:t})?(nt&&rt.infoTick("Session in sessionStorage is expired, creating new one..."),tE(s,{previousSessionId:a.id})):a:(nt&&rt.infoTick("Creating new session"),tE(s,{previousSessionId:r}))}function TY(e){return e.type===mt.Custom}function X_(e,t,r){return t6(e,t)?(e6(e,t,r),!0):!1}function RY(e,t,r){return t6(e,t)?e6(e,t,r):Promise.resolve(null)}async function e6(e,t,r){const{eventBuffer:s}=e;if(!s||s.waitForCheckout&&!r)return null;const a=e.recordingMode==="buffer";try{r&&a&&s.clear(),r&&(s.hasCheckout=!0,s.waitForCheckout=!1);const i=e.getOptions(),o=AY(t,i.beforeAddRecordingEvent);return o?await s.addEvent(o):void 0}catch(i){const o=i&&i instanceof Y_,l=o?"addEventSizeExceeded":"addEvent",u=Ie();if(u){const d=o?"buffer_overflow":"internal_sdk_error";u.recordDroppedEvent(d,"replay")}if(o&&a)return s.clear(),s.waitForCheckout=!0,null;e.handleException(i),await e.stop({reason:l})}}function t6(e,t){if(!e.eventBuffer||e.isPaused()||!e.isEnabled())return!1;const r=G_(t.timestamp);return r+e.timeouts.sessionIdlePause<Date.now()?!1:r>e.getContext().initialTimestamp+e.getOptions().maxReplayDuration?(nt&&rt.infoTick(`Skipping event with timestamp ${r} because it is after maxReplayDuration`),!1):!0}function AY(e,t){try{if(typeof t=="function"&&TY(e))return t(e)}catch(r){return nt&&rt.exception(r,"An error occurred in the `beforeAddRecordingEvent` callback, skipping the event..."),null}return e}function Z_(e){return!e.type}function lw(e){return e.type==="transaction"}function PY(e){return e.type==="replay_event"}function nE(e){return e.type==="feedback"}function OY(e){return(t,r)=>{if(!e.isEnabled()||!Z_(t)&&!lw(t))return;const s=r.statusCode;if(!(!s||s<200||s>=300)){if(lw(t)){IY(e,t);return}LY(e,t)}}}function IY(e,t){var s,a;const r=e.getContext();(a=(s=t.contexts)==null?void 0:s.trace)!=null&&a.trace_id&&r.traceIds.size<100&&r.traceIds.add(t.contexts.trace.trace_id)}function LY(e,t){const r=e.getContext();if(t.event_id&&r.errorIds.size<100&&r.errorIds.add(t.event_id),e.recordingMode!=="buffer"||!t.tags||!t.tags.replayId)return;const{beforeErrorSampling:s}=e.getOptions();typeof s=="function"&&!s(t)||ah(async()=>{try{await e.sendBufferedReplayOrFlush()}catch(a){e.handleException(a)}})}function MY(e){return t=>{!e.isEnabled()||!Z_(t)||DY(e,t)}}function DY(e,t){var s,a,i;const r=(i=(a=(s=t.exception)==null?void 0:s.values)==null?void 0:a[0])==null?void 0:i.value;if(typeof r=="string"&&(r.match(/(reactjs\.org\/docs\/error-decoder\.html\?invariant=|react\.dev\/errors\/)(418|419|422|423|425)/)||r.match(/(does not match server-rendered HTML|Hydration failed because)/i))){const o=Qs({category:"replay.hydrate-error",data:{url:rl()}});oh(e,o)}}function $Y(e){const t=Ie();t&&t.on("beforeAddBreadcrumb",r=>qY(e,r))}function qY(e,t){if(!e.isEnabled()||!n6(t))return;const r=FY(t);r&&oh(e,r)}function FY(e){return!n6(e)||["fetch","xhr","sentry.event","sentry.transaction"].includes(e.category)||e.category.startsWith("ui.")?null:e.category==="console"?UY(e):Qs(e)}function UY(e){var a;const t=(a=e.data)==null?void 0:a.arguments;if(!Array.isArray(t)||t.length===0)return Qs(e);let r=!1;const s=t.map(i=>{if(!i)return i;if(typeof i=="string")return i.length>Hf?(r=!0,`${i.slice(0,Hf)}`):i;if(typeof i=="object")try{const o=Fr(i,7);return JSON.stringify(o).length>Hf?(r=!0,`${JSON.stringify(o,null,2).slice(0,Hf)}`):o}catch{}return i});return Qs({...e,data:{...e.data,arguments:s,...r?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}function n6(e){return!!e.category}function BY(e,t){var r,s,a;return e.type||!((s=(r=e.exception)==null?void 0:r.values)!=null&&s.length)?!1:!!((a=t.originalException)!=null&&a.__rrweb__)}function r6(){const e=lt().getPropagationContext().dsc;e&&delete e.replay_id;const t=hn();if(t){const r=Ms(t);delete r.replay_id}}function HY(e,t){e.triggerUserActivity(),e.addUpdate(()=>t.timestamp?(e.throttledAddEvent({type:mt.Custom,timestamp:t.timestamp*1e3,data:{tag:"breadcrumb",payload:{timestamp:t.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:t.event_id}}}}),!1):!0)}function KY(e,t){return e.recordingMode!=="buffer"||t.message===F_||!t.exception||t.type?!1:YA(e.getOptions().errorSampleRate)}function zY(e){return Object.assign((t,r)=>{var o;if(!e.isEnabled()||e.isPaused())return t;if(PY(t))return delete t.breadcrumbs,t;if(!Z_(t)&&!lw(t)&&!nE(t))return t;if(!e.checkAndHandleExpiredSession())return r6(),t;if(nE(t))return e.flush(),t.contexts.feedback.replay_id=e.getSessionId(),HY(e,t),t;if(BY(t,r)&&!e.getOptions()._experiments.captureExceptions)return nt&&rt.log("Ignoring error from rrweb internals",t),null;const a=KY(e,t);if((a||e.recordingMode==="session")&&(t.tags={...t.tags,replayId:e.getSessionId()}),a&&e.recordingMode==="buffer"&&((o=e.session)==null?void 0:o.sampled)==="buffer"){const l=e.session;l.dirty=!0,e.getOptions().stickySession&&Zp(l)}return t},{id:"Replay"})}function ex(e,t){return t.map(({type:r,start:s,end:a,name:i,data:o})=>{const l=e.throttledAddEvent({type:mt.Custom,timestamp:s,data:{tag:"performanceSpan",payload:{op:r,description:i,startTimestamp:s,endTimestamp:a,data:o}}});return typeof l=="string"?Promise.resolve(null):l})}function WY(e){const{from:t,to:r}=e,s=Date.now()/1e3;return{type:"navigation.push",start:s,end:s,name:r,data:{previous:t}}}function GY(e){return t=>{if(!e.isEnabled())return;const r=WY(t);r!==null&&(e.getContext().urls.push(r.name),e.triggerUserActivity(),e.addUpdate(()=>(ex(e,[r]),!1)))}}function VY(e,t){return nt&&e.getOptions()._experiments.traceInternals?!1:D3(t,Ie())}function s6(e,t){e.isEnabled()&&t!==null&&(VY(e,t.name)||e.addUpdate(()=>(ex(e,[t]),!0)))}function tx(e){if(!e)return;const t=new TextEncoder;try{if(typeof e=="string")return t.encode(e).length;if(e instanceof URLSearchParams)return t.encode(e.toString()).length;if(e instanceof FormData){const r=ZR(e);return t.encode(r).length}if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength}catch{}}function a6(e){if(!e)return;const t=parseInt(e,10);return isNaN(t)?void 0:t}function lp(e,t){if(!e)return{headers:{},size:void 0,_meta:{warnings:[t]}};const r={...e._meta},s=r.warnings||[];return r.warnings=[...s,t],e._meta=r,e}function i6(e,t){if(!t)return null;const{startTimestamp:r,endTimestamp:s,url:a,method:i,statusCode:o,request:l,response:u}=t;return{type:e,start:r/1e3,end:s/1e3,name:a,data:{method:i,statusCode:o,request:l,response:u}}}function Cd(e){return{headers:{},size:e,_meta:{warnings:["URL_SKIPPED"]}}}function Ai(e,t,r){if(!t&&Object.keys(e).length===0)return;if(!t)return{headers:e};if(!r)return{headers:e,size:t};const s={headers:e,size:t},{body:a,warnings:i}=QY(r);return s.body=a,i!=null&&i.length&&(s._meta={warnings:i}),s}function cw(e,t){return Object.entries(e).reduce((r,[s,a])=>{const i=s.toLowerCase();return t.includes(i)&&e[s]&&(r[i]=a),r},{})}function QY(e){if(!e||typeof e!="string")return{body:e};const t=e.length>Mk,r=YY(e);if(t){const s=e.slice(0,Mk);return r?{body:s,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${s}`,warnings:["TEXT_TRUNCATED"]}}if(r)try{return{body:JSON.parse(e)}}catch{}return{body:e}}function YY(e){const t=e[0],r=e[e.length-1];return t==="["&&r==="]"||t==="{"&&r==="}"}function cp(e,t){const r=JY(e);return Os(r,t)}function JY(e,t=Yt.document.baseURI){if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith(Yt.location.origin))return e;const r=new URL(e,t);if(r.origin!==new URL(t).origin)return e;const s=r.href;return!e.endsWith("/")&&s.endsWith("/")?s.slice(0,-1):s}async function XY(e,t,r){try{const s=await eJ(e,t,r),a=i6("resource.fetch",s);s6(r.replay,a)}catch(s){nt&&rt.exception(s,"Failed to capture fetch breadcrumb")}}function ZY(e,t){const{input:r,response:s}=t,a=r?D_(r):void 0,i=tx(a),o=s?a6(s.headers.get("content-length")):void 0;i!==void 0&&(e.data.request_body_size=i),o!==void 0&&(e.data.response_body_size=o)}async function eJ(e,t,r){const s=Date.now(),{startTimestamp:a=s,endTimestamp:i=s}=t,{url:o,method:l,status_code:u=0,request_body_size:d,response_body_size:p}=e.data,f=cp(o,r.networkDetailAllowUrls)&&!cp(o,r.networkDetailDenyUrls),m=f?tJ(r,t.input,d):Cd(d),x=await nJ(f,r,t.response,p);return{startTimestamp:a,endTimestamp:i,url:o,method:l,statusCode:u,request:m,response:x}}function tJ({networkCaptureBodies:e,networkRequestHeaders:t},r,s){const a=r?aJ(r,t):{};if(!e)return Ai(a,s,void 0);const i=D_(r),[o,l]=tp(i,rt),u=Ai(a,s,o);return l?lp(u,l):u}async function nJ(e,{networkCaptureBodies:t,networkResponseHeaders:r},s,a){if(!e&&a!==void 0)return Cd(a);const i=s?o6(s.headers,r):{};if(!s||!t&&a!==void 0)return Ai(i,a,void 0);const[o,l]=await sJ(s),u=rJ(o,{networkCaptureBodies:t,responseBodySize:a,captureDetails:e,headers:i});return l?lp(u,l):u}function rJ(e,{networkCaptureBodies:t,responseBodySize:r,captureDetails:s,headers:a}){try{const i=e!=null&&e.length&&r===void 0?tx(e):r;return s?t?Ai(a,i,e):Ai(a,i,void 0):Cd(i)}catch(i){return nt&&rt.exception(i,"Failed to serialize response body"),Ai(a,r,void 0)}}async function sJ(e){const t=iJ(e);if(!t)return[void 0,"BODY_PARSE_ERROR"];try{return[await oJ(t)]}catch(r){return r instanceof Error&&r.message.indexOf("Timeout")>-1?(nt&&rt.warn("Parsing text body from response timed out"),[void 0,"BODY_PARSE_TIMEOUT"]):(nt&&rt.exception(r,"Failed to get text body from response"),[void 0,"BODY_PARSE_ERROR"])}}function o6(e,t){const r={};return t.forEach(s=>{e.get(s)&&(r[s]=e.get(s))}),r}function aJ(e,t){return e.length===1&&typeof e[0]!="string"?rE(e[0],t):e.length===2?rE(e[1],t):{}}function rE(e,t){if(!e)return{};const r=e.headers;return r?r instanceof Headers?o6(r,t):Array.isArray(r)?{}:cw(r,t):{}}function iJ(e){try{return e.clone()}catch(t){nt&&rt.exception(t,"Failed to clone response body")}}function oJ(e){return new Promise((t,r)=>{const s=ah(()=>r(new Error("Timeout while trying to read response body")),500);lJ(e).then(a=>t(a),a=>r(a)).finally(()=>clearTimeout(s))})}async function lJ(e){return await e.text()}async function cJ(e,t,r){try{const s=dJ(e,t,r),a=i6("resource.xhr",s);s6(r.replay,a)}catch(s){nt&&rt.exception(s,"Failed to capture xhr breadcrumb")}}function uJ(e,t){const{xhr:r,input:s}=t;if(!r)return;const a=tx(s),i=r.getResponseHeader("content-length")?a6(r.getResponseHeader("content-length")):mJ(r.response,r.responseType);a!==void 0&&(e.data.request_body_size=a),i!==void 0&&(e.data.response_body_size=i)}function dJ(e,t,r){const s=Date.now(),{startTimestamp:a=s,endTimestamp:i=s,input:o,xhr:l}=t,{url:u,method:d,status_code:p=0,request_body_size:f,response_body_size:m}=e.data;if(!u)return null;if(!l||!cp(u,r.networkDetailAllowUrls)||cp(u,r.networkDetailDenyUrls)){const C=Cd(f),E=Cd(m);return{startTimestamp:a,endTimestamp:i,url:u,method:d,statusCode:p,request:C,response:E}}const x=l[Na],y=x?cw(x.request_headers,r.networkRequestHeaders):{},g=cw(eA(l),r.networkResponseHeaders),[b,_]=r.networkCaptureBodies?tp(o,rt):[void 0],[w,S]=r.networkCaptureBodies?hJ(l):[void 0],j=Ai(y,f,b),N=Ai(g,m,w);return{startTimestamp:a,endTimestamp:i,url:u,method:d,statusCode:p,request:_?lp(j,_):j,response:S?lp(N,S):N}}function hJ(e){const t=[];try{return[e.responseText]}catch(r){t.push(r)}try{return fJ(e.response,e.responseType)}catch(r){t.push(r)}return nt&&rt.warn("Failed to get xhr response body",...t),[void 0]}function fJ(e,t){try{if(typeof e=="string")return[e];if(e instanceof Document)return[e.body.outerHTML];if(t==="json"&&e&&typeof e=="object")return[JSON.stringify(e)];if(!e)return[void 0]}catch(r){return nt&&rt.exception(r,"Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return nt&&rt.log("Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function mJ(e,t){try{const r=t==="json"&&e&&typeof e=="object"?JSON.stringify(e):e;return tx(r)}catch{return}}function pJ(e){const t=Ie();try{const{networkDetailAllowUrls:r,networkDetailDenyUrls:s,networkCaptureBodies:a,networkRequestHeaders:i,networkResponseHeaders:o}=e.getOptions(),l={replay:e,networkDetailAllowUrls:r,networkDetailDenyUrls:s,networkCaptureBodies:a,networkRequestHeaders:i,networkResponseHeaders:o};t&&t.on("beforeAddBreadcrumb",(u,d)=>xJ(l,u,d))}catch{}}function xJ(e,t,r){if(t.data)try{gJ(t)&&bJ(r)&&(uJ(t,r),cJ(t,r,e)),yJ(t)&&vJ(r)&&(ZY(t,r),XY(t,r,e))}catch(s){nt&&rt.exception(s,"Error when enriching network breadcrumb")}}function gJ(e){return e.category==="xhr"}function yJ(e){return e.category==="fetch"}function bJ(e){return e==null?void 0:e.xhr}function vJ(e){return e==null?void 0:e.response}function wJ(e){const t=Ie();XR(XQ(e)),Gp(GY(e)),$Y(e),pJ(e);const r=zY(e);x3(r),t&&(t.on("beforeSendEvent",MY(e)),t.on("afterSendEvent",OY(e)),t.on("createDsc",s=>{const a=e.getSessionId();a&&e.isEnabled()&&e.recordingMode==="session"&&e.checkAndHandleExpiredSession()&&(s.replay_id=a)}),t.on("spanStart",s=>{e.lastActiveSpan=s}),t.on("spanEnd",s=>{e.lastActiveSpan=s}),t.on("beforeSendFeedback",async(s,a)=>{var o;const i=e.getSessionId();a!=null&&a.includeReplay&&e.isEnabled()&&i&&((o=s.contexts)!=null&&o.feedback)&&(s.contexts.feedback.source==="api"&&await e.sendBufferedReplayOrFlush(),s.contexts.feedback.replay_id=i)}),t.on("openFeedbackWidget",async()=>{await e.sendBufferedReplayOrFlush()}))}async function _J(e){try{return Promise.all(ex(e,[jJ(Yt.performance.memory)]))}catch{return[]}}function jJ(e){const{jsHeapSizeLimit:t,totalJSHeapSize:r,usedJSHeapSize:s}=e,a=Date.now()/1e3;return{type:"memory",name:"memory",start:a,end:a,data:{memory:{jsHeapSizeLimit:t,totalJSHeapSize:r,usedJSHeapSize:s}}}}function NJ(e,t,r){return J7(e,t,{...r,setTimeoutImpl:ah})}const ts=Xe.navigator;function SJ(){return/iPhone|iPad|iPod/i.test((ts==null?void 0:ts.userAgent)??"")||/Macintosh/i.test((ts==null?void 0:ts.userAgent)??"")&&(ts!=null&&ts.maxTouchPoints)&&(ts==null?void 0:ts.maxTouchPoints)>1?{sampling:{mousemove:!1}}:{}}function kJ(e){let t=!1;return(r,s)=>{if(!e.checkAndHandleExpiredSession()){nt&&rt.warn("Received replay event after session expired.");return}const a=s||!t;t=!0,e.clickDetector&&GQ(e.clickDetector,r),e.addUpdate(()=>{if(e.recordingMode==="buffer"&&a&&e.setInitialState(),!X_(e,r,a))return!0;if(!a)return!1;const i=e.session;if(CJ(e,a),e.recordingMode==="buffer"&&i&&e.eventBuffer&&!i.dirty){const o=e.eventBuffer.getEarliestTimestamp();o&&(nt&&rt.log(`Updating session start time to earliest event in buffer to ${new Date(o)}`),i.started=o,e.getOptions().stickySession&&Zp(i))}return i!=null&&i.previousSessionId||e.recordingMode==="session"&&e.flush(),!0})}}function EJ(e){const t=e.getOptions();return{type:mt.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:e.isRecordingCanvas(),sessionSampleRate:t.sessionSampleRate,errorSampleRate:t.errorSampleRate,useCompressionOption:t.useCompression,blockAllMedia:t.blockAllMedia,maskAllText:t.maskAllText,maskAllInputs:t.maskAllInputs,useCompression:e.eventBuffer?e.eventBuffer.type==="worker":!1,networkDetailHasUrls:t.networkDetailAllowUrls.length>0,networkCaptureBodies:t.networkCaptureBodies,networkRequestHasHeaders:t.networkRequestHeaders.length>0,networkResponseHasHeaders:t.networkResponseHeaders.length>0}}}}function CJ(e,t){!t||!e.session||e.session.segmentId!==0||X_(e,EJ(e),!1)}function TJ(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch{return null}}function RJ(e,t,r,s){return qs(a3(e,Cp(e),s,r),[[{type:"replay_event"},e],[{type:"replay_recording",length:typeof t=="string"?new TextEncoder().encode(t).length:t.length},t]])}function AJ({recordingData:e,headers:t}){let r;const s=`${JSON.stringify(t)}
`;if(typeof e=="string")r=`${s}${e}`;else{const i=new TextEncoder().encode(s);r=new Uint8Array(i.length+e.length),r.set(i),r.set(e,i.length)}return r}async function PJ({client:e,scope:t,replayId:r,event:s}){const a=typeof e._integrations=="object"&&e._integrations!==null&&!Array.isArray(e._integrations)?Object.keys(e._integrations):void 0,i={event_id:r,integrations:a};e.emit("preprocessEvent",s,i);const o=await h3(e.getOptions(),s,i,t,e,En());if(!o)return null;e.emit("postprocessEvent",o,i),o.platform=o.platform||"javascript";const l=e.getSdkMetadata(),{name:u,version:d,settings:p}=(l==null?void 0:l.sdk)||{};return o.sdk={...o.sdk,name:u||"sentry.javascript.unknown",version:d||"0.0.0",settings:p},o}async function OJ({recordingData:e,replayId:t,segmentId:r,eventContext:s,timestamp:a,session:i}){const o=AJ({recordingData:e,headers:{segment_id:r}}),{urls:l,errorIds:u,traceIds:d,initialTimestamp:p}=s,f=Ie(),m=lt(),x=f==null?void 0:f.getTransport(),y=f==null?void 0:f.getDsn();if(!f||!x||!y||!i.sampled)return Promise.resolve({});const g={type:cV,replay_start_timestamp:p/1e3,timestamp:a/1e3,error_ids:u,trace_ids:d,urls:l,replay_id:t,segment_id:r,replay_type:i.sampled},b=await PJ({scope:m,client:f,replayId:t,event:g});if(!b)return f.recordDroppedEvent("event_processor","replay"),nt&&rt.log("An event processor returned `null`, will not send event."),Promise.resolve({});delete b.sdkProcessingMetadata;const _=RJ(b,o,y,f.getOptions().tunnel);let w;try{w=await x.send(_)}catch(j){const N=new Error(F_);try{N.cause=j}catch{}throw N}if(typeof w.statusCode=="number"&&(w.statusCode<200||w.statusCode>=300))throw new l6(w.statusCode);const S=k3({},w);if(S3(S,"replay"))throw new ej(S);return w}class l6 extends Error{constructor(t){super(`Transport returned status code ${t}`)}}class ej extends Error{constructor(t){super("Rate limit hit"),this.rateLimits=t}}async function c6(e,t={count:0,interval:pV}){const{recordingData:r,onError:s}=e;if(r.length)try{return await OJ(e),!0}catch(a){if(a instanceof l6||a instanceof ej)throw a;if(e_("Replays",{_retryCount:t.count}),s&&s(a),t.count>=xV){const i=new Error(`${F_} - max retries exceeded`);try{i.cause=a}catch{}throw i}return t.interval*=++t.count,new Promise((i,o)=>{ah(async()=>{try{await c6(e,t),i(!0)}catch(l){o(l)}},t.interval)})}}const u6="__THROTTLED",IJ="__SKIPPED";function LJ(e,t,r){const s=new Map,a=l=>{const u=l-r;s.forEach((d,p)=>{p<u&&s.delete(p)})},i=()=>[...s.values()].reduce((l,u)=>l+u,0);let o=!1;return(...l)=>{const u=Math.floor(Date.now()/1e3);if(a(u),i()>=t){const p=o;return o=!0,p?IJ:u6}o=!1;const d=s.get(u)||0;return s.set(u,d+1),e(...l)}}class MJ{constructor({options:t,recordingOptions:r}){this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:uV,sessionIdleExpire:dV},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._requiresManualStart=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=r,this._options=t,this._debouncedFlush=NJ(()=>this._flush(),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=LJ((o,l)=>RY(this,o,l),300,5);const{slowClickTimeout:s,slowClickIgnoreSelectors:a}=this.getOptions(),i=s?{threshold:Math.min(gV,s),timeout:s,scrollTimeout:yV,ignoreSelector:a?a.join(","):""}:void 0;if(i&&(this.clickDetector=new HQ(this,i)),nt){const o=t._experiments;rt.setConfig({captureExceptions:!!o.captureExceptions,traceInternals:!!o.traceInternals})}this._handleVisibilityChange=()=>{Yt.document.visibilityState==="visible"?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()},this._handleWindowBlur=()=>{const o=Qs({category:"ui.blur"});this._doChangeToBackgroundTasks(o)},this._handleWindowFocus=()=>{const o=Qs({category:"ui.focus"});this._doChangeToForegroundTasks(o)},this._handleKeyboardEvent=o=>{nY(this,o)}}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return!!this._canvas}getOptions(){return this._options}handleException(t){nt&&rt.exception(t),this._options.onError&&this._options.onError(t)}initializeSampling(t){const{errorSampleRate:r,sessionSampleRate:s}=this._options,a=r<=0&&s<=0;if(this._requiresManualStart=a,!a){if(this._initializeSessionForSampling(t),!this.session){nt&&rt.exception(new Error("Unable to initialize and create session"));return}this.session.sampled!==!1&&(this.recordingMode=this.session.sampled==="buffer"&&this.session.segmentId===0?"buffer":"session",nt&&rt.infoTick(`Starting replay in ${this.recordingMode} mode`),this._initializeRecording())}}start(){if(this._isEnabled&&this.recordingMode==="session"){nt&&rt.log("Recording is already in progress");return}if(this._isEnabled&&this.recordingMode==="buffer"){nt&&rt.log("Buffering is in progress, call `flush()` to save the replay");return}nt&&rt.infoTick("Starting replay in session mode"),this._updateUserActivity();const t=ty({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=t,this.recordingMode="session",this._initializeRecording()}startBuffering(){if(this._isEnabled){nt&&rt.log("Buffering is in progress, call `flush()` to save the replay");return}nt&&rt.infoTick("Starting replay in buffer mode");const t=ty({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=t,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{const t=this._canvas;this._stopRecording=Ra({...this._recordingOptions,...this.recordingMode==="buffer"?{checkoutEveryNms:mV}:this._options._experiments.continuousCheckout&&{checkoutEveryNms:Math.max(36e4,this._options._experiments.continuousCheckout)},emit:kJ(this),...SJ(),onMutation:this._onMutationHandler.bind(this),...t?{recordCanvas:t.recordCanvas,getCanvasManager:t.getCanvasManager,sampling:t.sampling,dataURLOptions:t.dataURLOptions}:{}})}catch(t){this.handleException(t)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(t){return this.handleException(t),!1}}async stop({forceFlush:t=!1,reason:r}={}){var s;if(this._isEnabled){this._isEnabled=!1,this.recordingMode="buffer";try{nt&&rt.log(`Stopping Replay${r?` triggered by ${r}`:""}`),r6(),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),t&&await this._flush({force:!0}),(s=this.eventBuffer)==null||s.destroy(),this.eventBuffer=null,SY(this)}catch(a){this.handleException(a)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),nt&&rt.log("Pausing replay"))}resume(){!this._isPaused||!this._checkSession()||(this._isPaused=!1,this.startRecording(),nt&&rt.log("Resuming replay"))}async sendBufferedReplayOrFlush({continueRecording:t=!0}={}){if(this.recordingMode==="session")return this.flushImmediate();const r=Date.now();nt&&rt.log("Converting buffer to session"),await this.flushImmediate();const s=this.stopRecording();!t||!s||this.recordingMode!=="session"&&(this.recordingMode="session",this.session&&(this.session.dirty=!1,this._updateUserActivity(r),this._updateSessionActivity(r),this._maybeSaveSession()),this.startRecording())}addUpdate(t){const r=t();this.recordingMode==="buffer"||!this._isEnabled||r!==!0&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),!this._stopRecording){if(!this._checkSession())return;this.resume();return}this.checkAndHandleExpiredSession(),this._updateSessionActivity()}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return this.recordingMode==="buffer"?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(t){var r,s;if(!(t&&((r=this.session)==null?void 0:r.sampled)===!1))return(s=this.session)==null?void 0:s.id}checkAndHandleExpiredSession(){if(this._lastActivity&&ow(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&this.session.sampled==="session"){this.pause();return}return!!this._checkSession()}setInitialState(){const t=`${Yt.location.pathname}${Yt.location.hash}${Yt.location.search}`,r=`${Yt.location.origin}${t}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=r,this._context.initialTimestamp=Date.now(),this._context.urls.push(r)}throttledAddEvent(t,r){const s=this._throttledAddEvent(t,r);if(s===u6){const a=Qs({category:"replay.throttled"});this.addUpdate(()=>!X_(this,{type:MQ,timestamp:a.timestamp||0,data:{tag:"breadcrumb",payload:a,metric:!0}}))}return s}getCurrentRoute(){const t=this.lastActiveSpan||hn(),r=t&&dn(t),a=(r&&We(r).data||{})[At];if(!(!r||!a||!["route","custom"].includes(a)))return We(r).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=_Y({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_initializeSessionForSampling(t){const r=this._options.errorSampleRate>0,s=ty({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,previousSessionId:t},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:r});this.session=s}_checkSession(){if(!this.session)return!1;const t=this.session;return ZA(t,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})?(this._refreshSession(t),!1):!0}async _refreshSession(t){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(t.id))}_addListeners(){try{Yt.document.addEventListener("visibilitychange",this._handleVisibilityChange),Yt.addEventListener("blur",this._handleWindowBlur),Yt.addEventListener("focus",this._handleWindowFocus),Yt.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(wJ(this),this._hasInitializedCoreListeners=!0)}catch(t){this.handleException(t)}this._performanceCleanupCallback=pY(this)}_removeListeners(){try{Yt.document.removeEventListener("visibilitychange",this._handleVisibilityChange),Yt.removeEventListener("blur",this._handleWindowBlur),Yt.removeEventListener("focus",this._handleWindowFocus),Yt.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(t){this.handleException(t)}}_doChangeToBackgroundTasks(t){!this.session||XA(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(t&&this._createCustomBreadcrumb(t),this.conditionalFlush())}_doChangeToForegroundTasks(t){if(!this.session)return;if(!this.checkAndHandleExpiredSession()){nt&&rt.log("Document has become active, but session has expired");return}t&&this._createCustomBreadcrumb(t)}_updateUserActivity(t=Date.now()){this._lastActivity=t}_updateSessionActivity(t=Date.now()){this.session&&(this.session.lastActivity=t,this._maybeSaveSession())}_createCustomBreadcrumb(t){this.addUpdate(()=>{this.throttledAddEvent({type:mt.Custom,timestamp:t.timestamp||0,data:{tag:"breadcrumb",payload:t}})})}_addPerformanceEntries(){let t=iY(this.performanceEntries).concat(this.replayPerformanceEntries);if(this.performanceEntries=[],this.replayPerformanceEntries=[],this._requiresManualStart){const r=this._context.initialTimestamp/1e3;t=t.filter(s=>s.start>=r)}return Promise.all(ex(this,t))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:t,eventBuffer:r}=this;if(!t||!r||this._requiresManualStart||t.segmentId)return;const s=r.getEarliestTimestamp();s&&s<this._context.initialTimestamp&&(this._context.initialTimestamp=s)}_popEventContext(){const t={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),t}async _runFlush(){var r;const t=this.getSessionId();if(!this.session||!this.eventBuffer||!t){nt&&rt.error("No session or eventBuffer found to flush.");return}if(await this._addPerformanceEntries(),!!((r=this.eventBuffer)!=null&&r.hasEvents)&&(await _J(this),!!this.eventBuffer&&t===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();const s=Date.now();if(s-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");const a=this._popEventContext(),i=this.session.segmentId++;this._maybeSaveSession();const o=await this.eventBuffer.finish();await c6({replayId:t,recordingData:o,segmentId:i,eventContext:a,session:this.session,timestamp:s,onError:l=>this.handleException(l)})}catch(s){this.handleException(s),this.stop({reason:"sendReplay"});const a=Ie();if(a){const i=s instanceof ej?"ratelimit_backoff":"send_error";a.recordDroppedEvent(i,"replay")}}}async _flush({force:t=!1}={}){if(!this._isEnabled&&!t)return;if(!this.checkAndHandleExpiredSession()){nt&&rt.error("Attempting to finish replay event after session expired.");return}if(!this.session)return;const r=this.session.started,a=Date.now()-r;this._debouncedFlush.cancel();const i=a<this._options.minReplayDuration,o=a>this._options.maxReplayDuration+5e3;if(i||o){nt&&rt.log(`Session duration (${Math.floor(a/1e3)}s) is too ${i?"short":"long"}, not sending replay.`),i&&this._debouncedFlush();return}const l=this.eventBuffer;l&&this.session.segmentId===0&&!l.hasCheckout&&nt&&rt.log("Flushing initial segment without checkout.");const u=!!this._flushLock;this._flushLock||(this._flushLock=this._runFlush());try{await this._flushLock}catch(d){this.handleException(d)}finally{this._flushLock=void 0,u&&this._debouncedFlush()}}_maybeSaveSession(){this.session&&this._options.stickySession&&Zp(this.session)}_onMutationHandler(t){const{ignoreMutations:r}=this._options._experiments;if(r!=null&&r.length&&t.some(l=>{const u=TJ(l.target),d=r.join(",");return u==null?void 0:u.matches(d)}))return!1;const s=t.length,a=this._options.mutationLimit,i=this._options.mutationBreadcrumbLimit,o=a&&s>a;if(s>i||o){const l=Qs({category:"replay.mutations",data:{count:s,limit:o}});this._createCustomBreadcrumb(l)}return o?(this.stop({reason:"mutationLimit",forceFlush:this.recordingMode==="session"}),!1):!0}}function Gu(e,t){return[...e,...t].join(",")}function DJ({mask:e,unmask:t,block:r,unblock:s,ignore:a}){const i=["base","iframe[srcdoc]:not([src])"],o=Gu(e,[".sentry-mask","[data-sentry-mask]"]),l=Gu(t,[]);return{maskTextSelector:o,unmaskTextSelector:l,blockSelector:Gu(r,[".sentry-block","[data-sentry-block]",...i]),unblockSelector:Gu(s,[]),ignoreSelector:Gu(a,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'])}}function $J({el:e,key:t,maskAttributes:r,maskAllText:s,privacyOptions:a,value:i}){return!s||a.unmaskTextSelector&&e.matches(a.unmaskTextSelector)?i:r.includes(t)||t==="value"&&e.tagName==="INPUT"&&["submit","button"].includes(e.getAttribute("type")||"")?i.replace(/[\S]/g,"*"):i}const sE='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',qJ=["content-length","content-type","accept"],FJ=Symbol.for("sentry__originalRequestBody");let aE=!1,iE=!1;function UJ(){if(typeof Request>"u"||iE)return;const e=Request;try{const t=function(r,s){const a=new e(r,s);return(s==null?void 0:s.body)!=null&&(a[FJ]=s.body),a};t.prototype=e.prototype,Xe.Request=t,iE=!0}catch{}}const d6=(e=>new BJ(e));class BJ{constructor({flushMinDelay:t=hV,flushMaxDelay:r=fV,minReplayDuration:s=bV,maxReplayDuration:a=Dk,stickySession:i=!0,useCompression:o=!0,workerUrl:l,_experiments:u={},maskAllText:d=!0,maskAllInputs:p=!0,blockAllMedia:f=!0,mutationBreadcrumbLimit:m=750,mutationLimit:x=1e4,slowClickTimeout:y=7e3,slowClickIgnoreSelectors:g=[],networkDetailAllowUrls:b=[],networkDetailDenyUrls:_=[],networkCaptureBodies:w=!0,networkRequestHeaders:S=[],networkResponseHeaders:j=[],mask:N=[],maskAttributes:C=["title","placeholder","aria-label"],unmask:E=[],block:T=[],unblock:I=[],ignore:A=[],maskFn:R,beforeAddRecordingEvent:O,beforeErrorSampling:M,onError:B,attachRawBodyFromRequest:U=!1}={}){this.name="Replay";const Y=DJ({mask:N,unmask:E,block:T,unblock:I,ignore:A});if(this._recordingOptions={maskAllInputs:p,maskAllText:d,maskInputOptions:{password:!0},maskTextFn:R,maskInputFn:R,maskAttributeFn:(W,K,F)=>$J({maskAttributes:C,maskAllText:d,privacyOptions:Y,key:W,value:K,el:F}),...Y,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:W=>{try{W.__rrweb__=!0}catch{}},recordCrossOriginIframes:!!u.recordCrossOriginIframes},this._initialOptions={flushMinDelay:t,flushMaxDelay:r,minReplayDuration:Math.min(s,vV),maxReplayDuration:Math.min(a,Dk),stickySession:i,useCompression:o,workerUrl:l,blockAllMedia:f,maskAllInputs:p,maskAllText:d,mutationBreadcrumbLimit:m,mutationLimit:x,slowClickTimeout:y,slowClickIgnoreSelectors:g,networkDetailAllowUrls:b,networkDetailDenyUrls:_,networkCaptureBodies:w,networkRequestHeaders:oE(S),networkResponseHeaders:oE(j),beforeAddRecordingEvent:O,beforeErrorSampling:M,onError:B,attachRawBodyFromRequest:U,_experiments:u},this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${sE}`:sE,this._recordingOptions.ignoreCSSAttributes=new Set(["background-image"])),this._isInitialized&&Ym())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return aE}set _isInitialized(t){aE=t}afterAllSetup(t){!Ym()||this._replay||(this._initialOptions.attachRawBodyFromRequest&&UJ(),this._setup(t),this._initialize(t))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:this._replay.recordingMode==="session"}):Promise.resolve()}flush(t){return this._replay?this._replay.isEnabled()?this._replay.sendBufferedReplayOrFlush(t):(this._replay.start(),Promise.resolve()):Promise.resolve()}getReplayId(t){var r;if((r=this._replay)!=null&&r.isEnabled())return this._replay.getSessionId(t)}getRecordingMode(){var t;if((t=this._replay)!=null&&t.isEnabled())return this._replay.recordingMode}_initialize(t){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(t),this._replay.initializeSampling())}_setup(t){const r=HJ(this._initialOptions,t);this._replay=new MJ({options:r,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(t){try{const r=t.getIntegrationByName("ReplayCanvas");if(!r)return;this._replay._canvas=r.getOptions()}catch{}}}function HJ(e,t){const r=t.getOptions(),s={sessionSampleRate:0,errorSampleRate:0,...e},a=Ho(r.replaysSessionSampleRate),i=Ho(r.replaysOnErrorSampleRate);return a==null&&i==null&&zi(()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")}),a!=null&&(s.sessionSampleRate=a),i!=null&&(s.errorSampleRate=i),s}function oE(e){return[...qJ,...e.map(t=>t.toLowerCase())]}function KJ(){const e=Ie();return e==null?void 0:e.getIntegrationByName("Replay")}var zJ=Object.defineProperty,WJ=(e,t,r)=>t in e?zJ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,lE=(e,t,r)=>WJ(e,typeof t!="symbol"?t+"":t,r);class GJ{constructor(){lE(this,"idNodeMap",new Map),lE(this,"nodeMetaMap",new WeakMap)}getId(t){var s;return t?((s=this.getMeta(t))==null?void 0:s.id)??-1:-1}getNode(t){return this.idNodeMap.get(t)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(t){return this.nodeMetaMap.get(t)||null}removeNodeFromMap(t){const r=this.getId(t);this.idNodeMap.delete(r),t.childNodes&&t.childNodes.forEach(s=>this.removeNodeFromMap(s))}has(t){return this.idNodeMap.has(t)}hasNode(t){return this.nodeMetaMap.has(t)}add(t,r){const s=r.id;this.idNodeMap.set(s,t),this.nodeMetaMap.set(t,r)}replace(t,r){const s=this.getNode(t);if(s){const a=this.nodeMetaMap.get(s);a&&this.nodeMetaMap.set(r,a)}this.idNodeMap.set(t,r)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function VJ(){return new GJ}function QJ(e,t){for(let r=e.classList.length;r--;){const s=e.classList[r];if(t.test(s))return!0}return!1}function uw(e,t,r=1/0,s=0){return!e||e.nodeType!==e.ELEMENT_NODE||s>r?-1:t(e)?s:uw(e.parentNode,t,r,s+1)}function cE(e,t){return r=>{const s=r;if(s===null)return!1;try{if(e){if(typeof e=="string"){if(s.matches(`.${e}`))return!0}else if(QJ(s,e))return!0}return!!(t&&s.matches(t))}catch{return!1}}}const Jl=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let uE={map:{},getId(){return console.error(Jl),-1},getNode(){return console.error(Jl),null},removeNodeFromMap(){console.error(Jl)},has(){return console.error(Jl),!1},reset(){console.error(Jl)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(uE=new Proxy(uE,{get(e,t,r){return t==="map"&&console.error(Jl),Reflect.get(e,t,r)}}));function tj(e,t,r,s,a=window){const i=a.Object.getOwnPropertyDescriptor(e,t);return a.Object.defineProperty(e,t,s?r:{set(o){f6(()=>{r.set.call(this,o)},0),i&&i.set&&i.set.call(this,o)}}),()=>tj(e,t,i||{},!0)}function nj(e,t,r){try{if(!(t in e))return()=>{};const s=e[t],a=r(s);return typeof a=="function"&&(a.prototype=a.prototype||{},Object.defineProperties(a,{__rrweb_original__:{enumerable:!1,value:s}})),e[t]=a,()=>{e[t]=s}}catch{return()=>{}}}Date.now().toString();function YJ(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch{return null}}function nx(e,t,r,s,a){if(!e)return!1;const i=YJ(e);if(!i)return!1;const o=cE(t,r),l=uw(i,o);let u=-1;return l<0?!1:(s&&(u=uw(i,cE(null,s))),l>-1&&u<0?!0:l<u)}const dE={};function h6(e){const t=dE[e];if(t)return t;const r=window.document;let s=window[e];if(r&&typeof r.createElement=="function")try{const a=r.createElement("iframe");a.hidden=!0,r.head.appendChild(a);const i=a.contentWindow;i&&i[e]&&(s=i[e]),r.head.removeChild(a)}catch{}return dE[e]=s.bind(window)}function fo(...e){return h6("requestAnimationFrame")(...e)}function f6(...e){return h6("setTimeout")(...e)}var Mc=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(Mc||{});let _m;function JJ(e){_m=e}const ny=e=>_m?(...r)=>{try{return e(...r)}catch(s){if(_m&&_m(s)===!0)return()=>{};throw s}}:e;var ac="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",XJ=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Gf=0;Gf<ac.length;Gf++)XJ[ac.charCodeAt(Gf)]=Gf;var ZJ=function(e){var t=new Uint8Array(e),r,s=t.length,a="";for(r=0;r<s;r+=3)a+=ac[t[r]>>2],a+=ac[(t[r]&3)<<4|t[r+1]>>4],a+=ac[(t[r+1]&15)<<2|t[r+2]>>6],a+=ac[t[r+2]&63];return s%3===2?a=a.substring(0,a.length-1)+"=":s%3===1&&(a=a.substring(0,a.length-2)+"=="),a};const hE=new Map;function eX(e,t){let r=hE.get(e);return r||(r=new Map,hE.set(e,r)),r.has(t)||r.set(t,[]),r.get(t)}const m6=(e,t,r)=>{if(!e||!(x6(e,t)||typeof e=="object"))return;const s=e.constructor.name,a=eX(r,s);let i=a.indexOf(e);return i===-1&&(i=a.length,a.push(e)),i};function jm(e,t,r){if(e instanceof Array)return e.map(s=>jm(s,t,r));if(e===null)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray)return{rr_type:e.constructor.name,args:[Object.values(e)]};if(e instanceof ArrayBuffer){const s=e.constructor.name,a=ZJ(e);return{rr_type:s,base64:a}}else{if(e instanceof DataView)return{rr_type:e.constructor.name,args:[jm(e.buffer,t,r),e.byteOffset,e.byteLength]};if(e instanceof HTMLImageElement){const s=e.constructor.name,{src:a}=e;return{rr_type:s,src:a}}else if(e instanceof HTMLCanvasElement){const s="HTMLImageElement",a=e.toDataURL();return{rr_type:s,src:a}}else{if(e instanceof ImageData)return{rr_type:e.constructor.name,args:[jm(e.data,t,r),e.width,e.height]};if(x6(e,t)||typeof e=="object"){const s=e.constructor.name,a=m6(e,t,r);return{rr_type:s,index:a}}}}return e}const p6=(e,t,r)=>e.map(s=>jm(s,t,r)),x6=(e,t)=>!!["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(a=>typeof t[a]=="function").find(a=>e instanceof t[a]);function tX(e,t,r,s,a){const i=[],o=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);for(const l of o)try{if(typeof t.CanvasRenderingContext2D.prototype[l]!="function")continue;const u=nj(t.CanvasRenderingContext2D.prototype,l,function(d){return function(...p){return nx(this.canvas,r,s,a,!0)||f6(()=>{const f=p6(p,t,this);e(this.canvas,{type:Mc["2D"],property:l,args:f})},0),d.apply(this,p)}});i.push(u)}catch{const u=tj(t.CanvasRenderingContext2D.prototype,l,{set(d){e(this.canvas,{type:Mc["2D"],property:l,args:[d],setter:!0})}});i.push(u)}return()=>{i.forEach(l=>l())}}function nX(e){return e==="experimental-webgl"?"webgl":e}function fE(e,t,r,s,a){const i=[];try{const o=nj(e.HTMLCanvasElement.prototype,"getContext",function(l){return function(u,...d){if(!nx(this,t,r,s,!0)){const p=nX(u);if("__context"in this||(this.__context=p),a&&["webgl","webgl2"].includes(p))if(d[0]&&typeof d[0]=="object"){const f=d[0];f.preserveDrawingBuffer||(f.preserveDrawingBuffer=!0)}else d.splice(0,1,{preserveDrawingBuffer:!0})}return l.apply(this,[u,...d])}});i.push(o)}catch{console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{i.forEach(o=>o())}}function mE(e,t,r,s,a,i,o,l){const u=[],d=Object.getOwnPropertyNames(e);for(const p of d)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(p))try{if(typeof e[p]!="function")continue;const f=nj(e,p,function(m){return function(...x){const y=m.apply(this,x);if(m6(y,l,this),"tagName"in this.canvas&&!nx(this.canvas,s,a,i,!0)){const g=p6(x,l,this),b={type:t,property:p,args:g};r(this.canvas,b)}return y}});u.push(f)}catch{const f=tj(e,p,{set(m){r(this.canvas,{type:t,property:p,args:[m],setter:!0})}});u.push(f)}return u}function rX(e,t,r,s,a,i){const o=[];return o.push(...mE(t.WebGLRenderingContext.prototype,Mc.WebGL,e,r,s,a,i,t)),typeof t.WebGL2RenderingContext<"u"&&o.push(...mE(t.WebGL2RenderingContext.prototype,Mc.WebGL2,e,r,s,a,i,t)),()=>{o.forEach(l=>l())}}const sX='for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t="undefined"==typeof Uint8Array?[]:new Uint8Array(256),a=0;a<64;a++)t[e.charCodeAt(a)]=a;var n=function(t){var a,n=new Uint8Array(t),r=n.length,s="";for(a=0;a<r;a+=3)s+=e[n[a]>>2],s+=e[(3&n[a])<<4|n[a+1]>>4],s+=e[(15&n[a+1])<<2|n[a+2]>>6],s+=e[63&n[a+2]];return r%3==2?s=s.substring(0,s.length-1)+"=":r%3==1&&(s=s.substring(0,s.length-2)+"=="),s};const r=new Map,s=new Map;const i=self;i.onmessage=async function(e){if(!("OffscreenCanvas"in globalThis))return i.postMessage({id:e.data.id});{const{id:t,bitmap:a,width:o,height:f,maxCanvasSize:c,dataURLOptions:g}=e.data,u=async function(e,t,a){const r=e+"-"+t;if("OffscreenCanvas"in globalThis){if(s.has(r))return s.get(r);const i=new OffscreenCanvas(e,t);i.getContext("2d");const o=await i.convertToBlob(a),f=await o.arrayBuffer(),c=n(f);return s.set(r,c),c}return""}(o,f,g),[h,d]=function(e,t,a){if(!a)return[e,t];const[n,r]=a;if(e<=n&&t<=r)return[e,t];let s=e,i=t;return s>n&&(i=Math.floor(n*t/e),s=n),i>r&&(s=Math.floor(r*e/t),i=r),[s,i]}(o,f,c),l=new OffscreenCanvas(h,d),w=l.getContext("bitmaprenderer"),p=h===o&&d===f?a:await createImageBitmap(a,{resizeWidth:h,resizeHeight:d,resizeQuality:"low"});w?.transferFromImageBitmap(p),a.close();const y=await l.convertToBlob(g),v=y.type,b=await y.arrayBuffer(),m=n(b);if(p.close(),!r.has(t)&&await u===m)return r.set(t,m),i.postMessage({id:t});if(r.get(t)===m)return i.postMessage({id:t});i.postMessage({id:t,type:v,base64:m,width:o,height:f}),r.set(t,m)}};';function aX(){const e=new Blob([sX]);return URL.createObjectURL(e)}class iX{constructor(t){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.shadowDoms=new Set,this.windowsSet=new WeakSet,this.windows=[],this.restoreHandlers=[],this.frozen=!1,this.locked=!1,this.snapshotInProgressMap=new Map,this.worker=null,this.lastSnapshotTime=0,this.processMutation=(l,u)=>{(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId||!this.rafStamps.invokeId)&&(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(l)||this.pendingCanvasMutations.set(l,[]),this.pendingCanvasMutations.get(l).push(u)};const{enableManualSnapshot:r,sampling:s="all",win:a,recordCanvas:i,errorHandler:o}=t;t.sampling=s,this.mutationCb=t.mutationCb,this.mirror=t.mirror,this.options=t,o&&JJ(o),(i&&typeof s=="number"||r)&&(this.worker=this.initFPSWorker()),this.addWindow(a),!r&&ny(()=>{i&&s==="all"&&(this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher()),i&&typeof s=="number"&&this.initCanvasFPSObserver()})()}reset(){var t;this.pendingCanvasMutations.clear(),this.restoreHandlers.forEach(r=>{try{r()}catch{}}),this.restoreHandlers=[],this.windowsSet=new WeakSet,this.windows=[],this.shadowDoms=new Set,(t=this.worker)==null||t.terminate(),this.worker=null,this.snapshotInProgressMap=new Map}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}addWindow(t){const{sampling:r="all",blockClass:s,blockSelector:a,unblockSelector:i,recordCanvas:o,enableManualSnapshot:l}=this.options;if(!this.windowsSet.has(t)){if(l){this.windowsSet.add(t),this.windows.push(new WeakRef(t));return}ny(()=>{if(o&&r==="all"&&this.initCanvasMutationObserver(t,s,a,i),o&&typeof r=="number"){const u=fE(t,s,a,i,!0);this.restoreHandlers.push(()=>{u()})}})(),this.windowsSet.add(t),this.windows.push(new WeakRef(t))}}addShadowRoot(t){this.shadowDoms.add(new WeakRef(t))}resetShadowRoots(){this.shadowDoms=new Set}snapshot(t,r){if(r!=null&&r.skipRequestAnimationFrame){this.takeSnapshot(performance.now(),!0,t);return}fo(s=>this.takeSnapshot(s,!0,t))}initFPSWorker(){const t=new Worker(aX());return t.onmessage=r=>{const s=r.data,{id:a}=s;if(this.snapshotInProgressMap.set(a,!1),!("base64"in s))return;const{base64:i,type:o,width:l,height:u}=s;this.mutationCb({id:a,type:Mc["2D"],commands:[{property:"clearRect",args:[0,0,l,u]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:i}],type:o}]},0,0,l,u]}]})},t}initCanvasFPSObserver(){let t;if(!this.windows.length&&!this.shadowDoms.size)return;const r=s=>{this.takeSnapshot(s,!1),t=fo(r)};t=fo(r),this.restoreHandlers.push(()=>{t&&cancelAnimationFrame(t)})}initCanvasMutationObserver(t,r,s,a){const i=fE(t,r,s,a,!1),o=tX(this.processMutation.bind(this),t,r,s,a),l=rX(this.processMutation.bind(this),t,r,s,a,this.mirror);this.restoreHandlers.push(()=>{i(),o(),l()})}getCanvasElements(t,r,s){const a=[],i=o=>{o.querySelectorAll("canvas").forEach(l=>{nx(l,t,r,s)||a.push(l)})};for(const o of this.windows){const l=o.deref();let u;try{u=l&&l.document}catch{}u&&i(u)}for(const o of this.shadowDoms){const l=o.deref();l&&i(l)}return a}takeSnapshot(t,r,s){const{sampling:a,blockClass:i,blockSelector:o,unblockSelector:l,dataURLOptions:u,maxCanvasSize:d}=this.options,f=1e3/(a==="all"?2:a||2);return this.lastSnapshotTime&&t-this.lastSnapshotTime<f?!1:(this.lastSnapshotTime=t,(s?[s]:this.getCanvasElements(i,o,l)).forEach(y=>{var b;const g=this.mirror.getId(y);if(!(!this.mirror.hasNode(y)||!y.width||!y.height||this.snapshotInProgressMap.get(g))){if(this.snapshotInProgressMap.set(g,!0),!r&&["webgl","webgl2"].includes(y.__context)){const _=y.getContext(y.__context);((b=_==null?void 0:_.getContextAttributes())==null?void 0:b.preserveDrawingBuffer)===!1&&_.clear(_.COLOR_BUFFER_BIT)}createImageBitmap(y).then(_=>{var w;(w=this.worker)==null||w.postMessage({id:g,bitmap:_,width:y.width,height:y.height,dataURLOptions:u,maxCanvasSize:d},[_])}).catch(_=>{ny(()=>{throw this.snapshotInProgressMap.delete(g),_})()})}}),!0)}startPendingCanvasMutationFlusher(){fo(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){const t=r=>{this.rafStamps.latestId=r,fo(t)};fo(t)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((t,r)=>{const s=this.mirror.getId(r);this.flushPendingCanvasMutationFor(r,s)}),fo(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(t,r){if(this.frozen||this.locked)return;const s=this.pendingCanvasMutations.get(t);if(!s||r===-1)return;const a=s.map(o=>{const{type:l,...u}=o;return u}),{type:i}=s[0];this.mutationCb({id:r,type:i,commands:a}),this.pendingCanvasMutations.delete(t)}}var NC;try{if(Array.from([1],e=>e*2)[0]!==2){const e=document.createElement("iframe");document.body.appendChild(e),Array.from=((NC=e.contentWindow)==null?void 0:NC.Array.from)||Array.from,document.body.removeChild(e)}}catch(e){console.debug("Unable to override Array.from",e)}VJ();var pE;(function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"})(pE||(pE={}));const xE={low:{sampling:{canvas:1},dataURLOptions:{type:"image/webp",quality:.25}},medium:{sampling:{canvas:2},dataURLOptions:{type:"image/webp",quality:.4}},high:{sampling:{canvas:4},dataURLOptions:{type:"image/webp",quality:.5}}},oX="ReplayCanvas",Vf=1280,lX=((e={})=>{const[t,r]=e.maxCanvasSize||[],s={quality:e.quality||"medium",enableManualSnapshot:e.enableManualSnapshot,maxCanvasSize:[t?Math.min(t,Vf):Vf,r?Math.min(r,Vf):Vf]};let a;const i=new Promise(o=>a=o);return{name:oX,getOptions(){const{quality:o,enableManualSnapshot:l,maxCanvasSize:u}=s;return{enableManualSnapshot:l,recordCanvas:!0,getCanvasManager:d=>{const p=new iX({...d,enableManualSnapshot:l,maxCanvasSize:u,errorHandler:f=>{try{typeof f=="object"&&(f.__rrweb__=!0)}catch{}}});return a(p),p},...xE[o]||xE.medium}},async snapshot(o,l){(await i).snapshot(o,l)}}}),cX=lX;function uX(e){return e.split(",").some(t=>t.trim().startsWith("sentry-"))}function g6(e){try{return new URL(e,Le.location.origin).href}catch{return}}function dX(e){return e.entryType==="resource"&&"initiatorType"in e&&typeof e.nextHopProtocol=="string"&&(e.initiatorType==="fetch"||e.initiatorType==="xmlhttprequest")}function y6(e){try{return new Headers(e)}catch{return}}const gE=new WeakMap,ry=new Map,rj={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,trackFetchStreamPerformance:!1};function b6(e,t){const{traceFetch:r,traceXHR:s,trackFetchStreamPerformance:a,shouldCreateSpanForRequest:i,enableHTTPTimings:o,tracePropagationTargets:l,onRequestSpanStart:u,onRequestSpanEnd:d}={...rj,...t},p=typeof i=="function"?i:y=>!0,f=y=>hX(y,l),m={},x=e.getOptions().propagateTraceparent;r&&(e.addEventProcessor(y=>(y.type==="transaction"&&y.spans&&y.spans.forEach(g=>{if(g.op==="http.client"){const b=ry.get(g.span_id);b&&(g.timestamp=b/1e3,ry.delete(g.span_id))}}),y)),a&&NH(y=>{if(y.response){const g=gE.get(y.response);g&&y.endTimestamp&&ry.set(g,y.endTimestamp)}}),w_(y=>{const g=uB(y,p,f,m,{propagateTraceparent:x,onRequestSpanEnd:d});if(y.response&&y.fetchData.__span&&gE.set(y.response,y.fetchData.__span),g){const b=g6(y.fetchData.url),_=b?qo(b).host:void 0;g.setAttributes({"http.url":b,"server.address":_}),o&&yE(g),u==null||u(g,{headers:y.headers})}})),s&&M_(y=>{var b;const g=fX(y,p,f,m,x,d);g&&(o&&yE(g),u==null||u(g,{headers:y6((b=y.xhr.__sentry_xhr_v3__)==null?void 0:b.request_headers)}))})}function yE(e){const{url:t}=We(e).data;if(!t||typeof t!="string")return;const r=Xo("resource",({entries:s})=>{s.forEach(a=>{dX(a)&&a.name.endsWith(t)&&(e.setAttributes(JR(a)),setTimeout(r))})})}function hX(e,t){const r=rl();if(r){let s,a;try{s=new URL(e,r),a=new URL(r).origin}catch{return!1}const i=s.origin===a;return t?Os(s.toString(),t)||i&&Os(s.pathname,t):i}else{const s=!!e.match(/^\/(?!\/)/);return t?Os(e,t):s}}function fX(e,t,r,s,a,i){const o=e.xhr,l=o==null?void 0:o[Na];if(!o||o.__sentry_own_request__||!l)return;const{url:u,method:d}=l,p=is()&&t(u);if(e.endTimestamp&&p){const _=o.__sentry_xhr_span_id__;if(!_)return;const w=s[_];w&&l.status_code!==void 0&&(_d(w,l.status_code),w.end(),i==null||i(w,{headers:y6(eA(o)),error:e.error}),delete s[_]);return}const f=g6(u),m=qo(f||u),x=M3(u),y=!!hn(),g=p&&y?os({name:`${d} ${x}`,attributes:{url:u,type:"xhr","http.method":d,"http.url":f,"server.address":m==null?void 0:m.host,[ct]:"auto.http.browser",[Ut]:"http.client",...(m==null?void 0:m.search)&&{"http.query":m==null?void 0:m.search},...(m==null?void 0:m.hash)&&{"http.fragment":m==null?void 0:m.hash}}}):new Da;o.__sentry_xhr_span_id__=g.spanContext().spanId,s[o.__sentry_xhr_span_id__]=g,r(u)&&mX(o,is()&&y?g:void 0,a);const b=Ie();return b&&b.emit("beforeOutgoingRequestSpan",g,e),g}function mX(e,t,r){const{"sentry-trace":s,baggage:a,traceparent:i}=u_({span:t,propagateTraceparent:r});s&&pX(e,s,a,i)}function pX(e,t,r,s){var i;const a=(i=e.__sentry_xhr_v3__)==null?void 0:i.request_headers;if(!(a!=null&&a["sentry-trace"]||!e.setRequestHeader))try{if(e.setRequestHeader("sentry-trace",t),s&&!(a!=null&&a.traceparent)&&e.setRequestHeader("traceparent",s),r){const o=a==null?void 0:a.baggage;(!o||!uX(o))&&e.setRequestHeader("baggage",r)}}catch{}}function xX(){Le.document?Le.document.addEventListener("visibilitychange",()=>{const e=hn();if(!e)return;const t=dn(e);if(Le.document.hidden&&t){const r="cancelled",{op:s,status:a}=We(t);Re&&ce.log(`[Tracing] Transaction: ${r} -> since tab moved to the background, op: ${s}`),a||t.setStatus({code:vt,message:r}),t.setAttribute("sentry.cancellation_reason","document.hidden"),t.end()}}):Re&&ce.warn("[Tracing] Could not set up background tab detection due to lack of global document")}const gX=3600,v6="sentry_previous_trace",yX="sentry.previous_trace";function bX(e,{linkPreviousTrace:t,consistentTraceSampling:r}){const s=t==="session-storage";let a=s?_X():void 0;e.on("spanStart",o=>{if(dn(o)!==o)return;const l=lt().getPropagationContext();a=vX(a,o,l),s&&wX(a)});let i=!0;r&&e.on("beforeSampling",o=>{if(!a)return;const l=lt(),u=l.getPropagationContext();if(i&&u.parentSpanId){i=!1;return}l.setPropagationContext({...u,dsc:{...u.dsc,sample_rate:String(a.sampleRate),sampled:String(dw(a.spanContext))},sampleRand:a.sampleRand}),o.parentSampled=dw(a.spanContext),o.parentSampleRate=a.sampleRate,o.spanAttributes={...o.spanAttributes,[MT]:a.sampleRate}})}function vX(e,t,r){const s=We(t);function a(){var l,u;try{return Number((l=r.dsc)==null?void 0:l.sample_rate)??Number((u=s.data)==null?void 0:u[Sp])}catch{return 0}}const i={spanContext:t.spanContext(),startTimestamp:s.start_timestamp,sampleRate:a(),sampleRand:r.sampleRand};if(!e)return i;const o=e.spanContext;return o.traceId===s.trace_id?e:(Date.now()/1e3-e.startTimestamp<=gX&&(Re&&ce.log(`Adding previous_trace \`${JSON.stringify(o)}\` link to span \`${JSON.stringify({op:s.op,...t.spanContext()})}\``),t.addLink({context:o,attributes:{[Cq]:"previous_trace"}}),t.setAttribute(yX,`${o.traceId}-${o.spanId}-${dw(o)?1:0}`)),i)}function wX(e){try{Le.sessionStorage.setItem(v6,JSON.stringify(e))}catch(t){Re&&ce.warn("Could not store previous trace in sessionStorage",t)}}function _X(){var e;try{const t=(e=Le.sessionStorage)==null?void 0:e.getItem(v6);return JSON.parse(t)}catch{return}}function dw(e){return e.traceFlags===1}const jX="BrowserTracing",NX={...om,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableLongAnimationFrame:!0,enableInp:!0,enableElementTiming:!0,ignoreResourceSpans:[],ignorePerformanceApiSpans:[],detectRedirects:!0,linkPreviousTrace:"in-memory",consistentTraceSampling:!1,enableReportPageLoaded:!1,_experiments:{},...rj},il=((e={})=>{const t={name:void 0,source:void 0},r=Le.document,{enableInp:s,enableElementTiming:a,enableLongTask:i,enableLongAnimationFrame:o,_experiments:{enableInteractions:l,enableStandaloneClsSpans:u,enableStandaloneLcpSpans:d},beforeStartSpan:p,idleTimeout:f,finalTimeout:m,childSpanTimeout:x,markBackgroundSpan:y,traceFetch:g,traceXHR:b,trackFetchStreamPerformance:_,shouldCreateSpanForRequest:w,enableHTTPTimings:S,ignoreResourceSpans:j,ignorePerformanceApiSpans:N,instrumentPageLoad:C,instrumentNavigation:E,detectRedirects:T,linkPreviousTrace:I,consistentTraceSampling:A,enableReportPageLoaded:R,onRequestSpanStart:O,onRequestSpanEnd:M}={...NX,...e};let B,U,Y;function W(K,F,H=!0){const L=F.op==="pageload",q=F.name,z=p?p(F):F,Q=z.attributes||{};if(q!==z.name&&(Q[At]="custom",z.attributes=Q),!H){const ee=sl();os({...z,startTime:ee}).end(ee);return}t.name=z.name,t.source=Q[At];const J=u3(z,{idleTimeout:f,finalTimeout:m,childSpanTimeout:x,disableAutoFinish:L,beforeSpanEnd:ee=>{B==null||B(),Gz(ee,{recordClsOnPageloadSpan:!u,recordLcpOnPageloadSpan:!d,ignoreResourceSpans:j,ignorePerformanceApiSpans:N}),vE(K,void 0);const te=lt(),oe=te.getPropagationContext();te.setPropagationContext({...oe,traceId:J.spanContext().traceId,sampled:Qi(J),dsc:Ms(ee)}),L&&(Y=void 0)},trimIdleSpanEndTimestamp:!R});L&&R&&(Y=J),vE(K,J);function V(){r&&["interactive","complete"].includes(r.readyState)&&K.emit("idleSpanEnableAutoFinish",J)}L&&!R&&r&&(r.addEventListener("readystatechange",()=>{V()}),V())}return{name:jX,setup(K){if(t3(),B=Fz({recordClsStandaloneSpans:u||!1,recordLcpStandaloneSpans:d||!1,client:K}),s&&bW(),a&&aW(),o&&Xe.PerformanceObserver&&PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes("long-animation-frame")?Bz():i&&Uz(),l&&Hz(),T&&r){const H=()=>{U=Jt()};addEventListener("click",H,{capture:!0}),addEventListener("keydown",H,{capture:!0,passive:!0})}function F(){const H=Td(K);H&&!We(H).timestamp&&(Re&&ce.log(`[Tracing] Finishing current active span with op: ${We(H).op}`),H.setAttribute(wd,"cancelled"),H.end())}K.on("startNavigationSpan",(H,L)=>{if(Ie()!==K)return;if(L!=null&&L.isRedirect){Re&&ce.warn("[Tracing] Detected redirect, navigation span will not be the root span, but a child span."),W(K,{op:"navigation.redirect",...H},!1);return}U=void 0,F(),En().setPropagationContext({traceId:ea(),sampleRand:Math.random(),propagationSpanId:is()?void 0:Ca()});const q=lt();q.setPropagationContext({traceId:ea(),sampleRand:Math.random(),propagationSpanId:is()?void 0:Ca()}),q.setSDKProcessingMetadata({normalizedRequest:void 0}),W(K,{op:"navigation",...H,parentSpan:null,forceTransaction:!0})}),K.on("startPageLoadSpan",(H,L={})=>{if(Ie()!==K)return;F();const q=L.sentryTrace||bE("sentry-trace"),z=L.baggage||bE("baggage"),Q=WT(q,z),J=lt();J.setPropagationContext(Q),is()||(J.getPropagationContext().propagationSpanId=Ca()),J.setSDKProcessingMetadata({normalizedRequest:E_()}),W(K,{op:"pageload",...H})}),K.on("endPageloadSpan",()=>{R&&Y&&(Y.setAttribute(wd,"reportPageLoaded"),Y.end())})},afterAllSetup(K){let F=rl();if(I!=="off"&&bX(K,{linkPreviousTrace:I,consistentTraceSampling:A}),Le.location){if(C){const H=rr();tu(K,{name:Le.location.pathname,startTime:H?H/1e3:void 0,attributes:{[At]:"url",[ct]:"auto.pageload.browser"}})}E&&Gp(({to:H,from:L})=>{if(L===void 0&&(F==null?void 0:F.indexOf(H))!==-1){F=void 0;return}F=void 0;const q=c_(H),z=Td(K),Q=z&&T&&kX(z,U);nu(K,{name:(q==null?void 0:q.pathname)||Le.location.pathname,attributes:{[At]:"url",[ct]:"auto.navigation.browser"}},{url:H,isRedirect:Q})})}y&&xX(),l&&SX(K,f,m,x,t),s&&_W(),b6(K,{traceFetch:g,traceXHR:b,trackFetchStreamPerformance:_,tracePropagationTargets:K.getOptions().tracePropagationTargets,shouldCreateSpanForRequest:w,enableHTTPTimings:S,onRequestSpanStart:O,onRequestSpanEnd:M})}}});function tu(e,t,r){e.emit("startPageLoadSpan",t,r),lt().setTransactionName(t.name);const s=Td(e);return s&&e.emit("afterStartPageLoadSpan",s),s}function nu(e,t,r){const{url:s,isRedirect:a}=r||{};e.emit("beforeStartNavigationSpan",t,{isRedirect:a}),e.emit("startNavigationSpan",t,{isRedirect:a});const i=lt();return i.setTransactionName(t.name),s&&!a&&i.setSDKProcessingMetadata({normalizedRequest:{...E_(),url:s}}),Td(e)}function bE(e){const t=Le.document,r=t==null?void 0:t.querySelector(`meta[name=${e}]`);return(r==null?void 0:r.getAttribute("content"))||void 0}function SX(e,t,r,s,a){const i=Le.document;let o;const l=()=>{const u="ui.action.click",d=Td(e);if(d){const p=We(d).op;if(["navigation","pageload"].includes(p)){Re&&ce.warn(`[Tracing] Did not create ${u} span because a pageload or navigation span is in progress.`);return}}if(o&&(o.setAttribute(wd,"interactionInterrupted"),o.end(),o=void 0),!a.name){Re&&ce.warn(`[Tracing] Did not create ${u} transaction because _latestRouteName is missing.`);return}o=u3({name:a.name,op:u,attributes:{[At]:a.source||"url"}},{idleTimeout:t,finalTimeout:r,childSpanTimeout:s})};i&&addEventListener("click",l,{capture:!0})}const w6="_sentry_idleSpan";function Td(e){return e[w6]}function vE(e,t){In(e,w6,t)}const wE=1.5;function kX(e,t){const r=We(e),s=sl(),a=r.start_timestamp;return!(s-a>wE||t&&s-t<=wE)}function EX(e=Ie()){e==null||e.emit("endPageloadSpan")}function CX(e){const t=hn();if(t===e)return;const r=lt();e.end=new Proxy(e.end,{apply(s,a,i){return ta(r,t),Reflect.apply(s,a,i)}}),ta(r,e)}function Dc(e){return new Promise((t,r)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>r(e.error)})}function TX(e,t){const r=indexedDB.open(e);r.onupgradeneeded=()=>r.result.createObjectStore(t);const s=Dc(r);return a=>s.then(i=>a(i.transaction(t,"readwrite").objectStore(t)))}function sj(e){return Dc(e.getAllKeys())}function RX(e,t,r){return e(s=>sj(s).then(a=>{if(!(a.length>=r))return s.put(t,Math.max(...a,0)+1),Dc(s.transaction)}))}function AX(e,t,r){return e(s=>sj(s).then(a=>{if(!(a.length>=r))return s.put(t,Math.min(...a,0)-1),Dc(s.transaction)}))}function PX(e){return e(t=>sj(t).then(r=>{const s=r[0];if(s!=null)return Dc(t.get(s)).then(a=>(t.delete(s),Dc(t.transaction).then(()=>a)))}))}function OX(e){let t;function r(){return t==null&&(t=TX(e.dbName||"sentry-offline",e.storeName||"queue")),t}return{push:async s=>{try{const a=await Um(s);await RX(r(),a,e.maxQueueSize||30)}catch{}},unshift:async s=>{try{const a=await Um(s);await AX(r(),a,e.maxQueueSize||30)}catch{}},shift:async()=>{try{const s=await PX(r());if(s)return lF(s)}catch{}}}}function IX(e){return t=>{const r=e({...t,createStore:OX});return Le.addEventListener("online",async s=>{await r.flush()}),r}}function LX(e=$_){return IX(q7(e))}const _E=1e6,MX="window"in Xe&&Xe.window===Xe&&typeof importScripts>"u",Pi=String(0),up=MX?"main":"worker",ss=Le.navigator;let _6="",j6="",N6="",hw=(ss==null?void 0:ss.userAgent)||"",S6="";var SC;const DX=(ss==null?void 0:ss.language)||((SC=ss==null?void 0:ss.languages)==null?void 0:SC[0])||"";function $X(e){return typeof e=="object"&&e!==null&&"getHighEntropyValues"in e}const jE=ss==null?void 0:ss.userAgentData;$X(jE)&&jE.getHighEntropyValues(["architecture","model","platform","platformVersion","fullVersionList"]).then(e=>{var t;if(_6=e.platform||"",N6=e.architecture||"",S6=e.model||"",j6=e.platformVersion||"",(t=e.fullVersionList)!=null&&t.length){const r=e.fullVersionList[e.fullVersionList.length-1];hw=`${r.brand} ${r.version}`}}).catch(e=>{});function qX(e){return!("thread_metadata"in e)}function FX(e){return qX(e)?WX(e):e}function UX(e){var r,s;const t=(s=(r=e.contexts)==null?void 0:r.trace)==null?void 0:s.trace_id;return typeof t=="string"&&t.length!==32&&Re&&ce.log(`[Profiling] Invalid traceId: ${t} on profiled event`),typeof t!="string"?"":t}function BX(e,t,r,s){if(s.type!=="transaction")throw new TypeError("Profiling events may only be attached to transactions, this should never occur.");if(r==null)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${r} instead.`);const a=UX(s),i=FX(r),o=t||(typeof s.start_timestamp=="number"?s.start_timestamp*1e3:Jt()*1e3),l=typeof s.timestamp=="number"?s.timestamp*1e3:Jt()*1e3;return{event_id:e,timestamp:new Date(o).toISOString(),platform:"javascript",version:"1",release:s.release||"",environment:s.environment||Ep,runtime:{name:"javascript",version:Le.navigator.userAgent},os:{name:_6,version:j6,build_number:hw},device:{locale:DX,model:S6,manufacturer:hw,architecture:N6,is_emulator:!1},debug_meta:{images:E6(r.resources)},profile:i,transactions:[{name:s.transaction||"",id:s.event_id||On(),trace_id:a,active_thread_id:Pi,relative_start_ns:"0",relative_end_ns:((l-o)*1e6).toFixed(0)}]}}function HX(e,t,r){var o,l;if(e==null)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${e} instead.`);const s=zX(e),a=t.getOptions(),i=(l=(o=t.getSdkMetadata)==null?void 0:o.call(t))==null?void 0:l.sdk;return{chunk_id:On(),client_sdk:{name:(i==null?void 0:i.name)??"sentry.javascript.browser",version:(i==null?void 0:i.version)??"0.0.0"},profiler_id:r||On(),platform:"javascript",version:"2",release:a.release??"",environment:a.environment??"production",debug_meta:{images:E6(e.resources)},profile:s}}function KX(e){try{if(!e||typeof e!="object")return{reason:"chunk is not an object"};const t=s=>typeof s=="string"&&/^[a-f0-9]{32}$/.test(s);if(!t(e.profiler_id))return{reason:"missing or invalid profiler_id"};if(!t(e.chunk_id))return{reason:"missing or invalid chunk_id"};if(!e.client_sdk)return{reason:"missing client_sdk metadata"};const r=e.profile;return r?!Array.isArray(r.frames)||!r.frames.length?{reason:"profile has no frames"}:!Array.isArray(r.stacks)||!r.stacks.length?{reason:"profile has no stacks"}:!Array.isArray(r.samples)||!r.samples.length?{reason:"profile has no samples"}:{valid:!0}:{reason:"missing profile data"}}catch(t){return{reason:`unknown validation error: ${t}`}}}function zX(e){const t=[];for(let l=0;l<e.frames.length;l++){const u=e.frames[l];u&&(t[l]={function:u.name,abs_path:typeof u.resourceId=="number"?e.resources[u.resourceId]:void 0,lineno:u.line,colno:u.column})}const r=[];for(let l=0;l<e.stacks.length;l++){const u=e.stacks[l];if(!u)continue;const d=[];let p=u;for(;p;)d.push(p.frameId),p=p.parentId===void 0?void 0:e.stacks[p.parentId];r[l]=d}const s=rr(),a=typeof performance.timeOrigin=="number"?performance.timeOrigin:s||0,i=a-(s||a),o=[];for(let l=0;l<e.samples.length;l++){const u=e.samples[l];if(!u)continue;const d=(a+(u.timestamp-i))/1e3;o[l]={stack_id:u.stackId??0,thread_id:Pi,timestamp:d}}return{frames:t,stacks:r,samples:o,thread_metadata:{[Pi]:{name:up}}}}function k6(e){return We(e).op==="pageload"}function WX(e){let t,r=0;const s={samples:[],stacks:[],frames:[],thread_metadata:{[Pi]:{name:up}}},a=e.samples[0];if(!a)return s;const i=a.timestamp,o=rr(),l=typeof performance.timeOrigin=="number"?performance.timeOrigin:o||0,u=l-(o||l);return e.samples.forEach((d,p)=>{if(d.stackId===void 0){t===void 0&&(t=r,s.stacks[t]=[],r++),s.samples[p]={elapsed_since_start_ns:((d.timestamp+u-i)*_E).toFixed(0),stack_id:t,thread_id:Pi};return}let f=e.stacks[d.stackId];const m=[];for(;f;){m.push(f.frameId);const y=e.frames[f.frameId];y&&s.frames[f.frameId]===void 0&&(s.frames[f.frameId]={function:y.name,abs_path:typeof y.resourceId=="number"?e.resources[y.resourceId]:void 0,lineno:y.line,colno:y.column}),f=f.parentId===void 0?void 0:e.stacks[f.parentId]}const x={elapsed_since_start_ns:((d.timestamp+u-i)*_E).toFixed(0),stack_id:r,thread_id:Pi};s.stacks[r]=m,s.samples[p]=x,r++}),s}function GX(e,t){if(!t.length)return e;for(const r of t)e[1].push([{type:"profile"},r]);return e}function VX(e){const t=[];return Ko(e,(r,s)=>{var a,i;if(s==="transaction")for(let o=1;o<r.length;o++){const l=r[o];(i=(a=l==null?void 0:l.contexts)==null?void 0:a.profile)!=null&&i.profile_id&&t.push(r[o])}}),t}function E6(e){const t=Ie(),r=t==null?void 0:t.getOptions(),s=r==null?void 0:r.stackParser;return s?MF(s,e):[]}function C6(e){return typeof e!="number"&&typeof e!="boolean"||typeof e=="number"&&isNaN(e)?(Re&&ce.warn(`[Profiling] Invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(e)} of type ${JSON.stringify(typeof e)}.`),!1):e===!0||e===!1?!0:e<0||e>1?(Re&&ce.warn(`[Profiling] Invalid sample rate. Sample rate must be between 0 and 1. Got ${e}.`),!1):!0}function QX(e){return e.samples.length<2?(Re&&ce.log("[Profiling] Discarding profile because it contains less than 2 samples"),!1):e.frames.length?!0:(Re&&ce.log("[Profiling] Discarding profile because it contains no frames"),!1)}let aj=!1;const T6=3e4;function YX(e){return typeof e=="function"}function R6(){const e=Le.Profiler;if(!YX(e)){Re&&ce.log("[Profiling] Profiling is not supported by this browser, Profiler interface missing on window object.");return}const t=10,r=Math.floor(T6/t);try{return new e({sampleInterval:t,maxBufferSize:r})}catch{Re&&(ce.log("[Profiling] Failed to initialize the Profiling constructor, this is likely due to a missing 'Document-Policy': 'js-profiling' header."),ce.log("[Profiling] Disabling profiling for current user session.")),aj=!0}}function NE(e){if(aj)return Re&&ce.log("[Profiling] Profiling has been disabled for the duration of the current user session."),!1;if(!e.isRecording())return Re&&ce.log("[Profiling] Discarding profile because root span was not sampled."),!1;const t=Ie(),r=t==null?void 0:t.getOptions();if(!r)return Re&&ce.log("[Profiling] Profiling disabled, no options found."),!1;const s=r.profilesSampleRate;return C6(s)?s?(s===!0?!0:Math.random()<s)?!0:(Re&&ce.log(`[Profiling] Discarding profile because it's not included in the random sample (sampling rate = ${Number(s)})`),!1):(Re&&ce.log("[Profiling] Discarding profile because a negative sampling decision was inherited or profileSampleRate is set to 0"),!1):(Re&&ce.warn("[Profiling] Discarding profile because of invalid sample rate."),!1)}function JX(e){if(aj)return Re&&ce.log("[Profiling] Profiling has been disabled for the duration of the current user session as the JS Profiler could not be started."),!1;if(e.profileLifecycle!=="trace"&&e.profileLifecycle!=="manual")return Re&&ce.warn("[Profiling] Session not sampled. Invalid `profileLifecycle` option."),!1;const t=e.profileSessionSampleRate;return C6(t)?t?Math.random()<=t:(Re&&ce.log("[Profiling] Discarding profile because profileSessionSampleRate is not defined or set to 0"),!1):(Re&&ce.warn("[Profiling] Discarding profile because of invalid profileSessionSampleRate."),!1)}function Qf(e){return typeof e.profilesSampleRate<"u"}function XX(e,t,r,s){return QX(r)?BX(e,t,r,s):null}const ko=new Map;function ZX(){return ko.size}function eZ(e){const t=ko.get(e);return t&&ko.delete(e),t}function tZ(e,t){if(ko.set(e,t),ko.size>30){const r=ko.keys().next().value;r!==void 0&&ko.delete(r)}}function nZ(e){var t,r,s,a,i;return!((t=e==null?void 0:e.contexts)!=null&&t.profile)||!e.contexts||(e.contexts.trace={...((r=e.contexts)==null?void 0:r.trace)??{},data:{...((a=(s=e.contexts)==null?void 0:s.trace)==null?void 0:a.data)??{},"thread.id":Pi,"thread.name":up}},(i=e.spans)==null||i.forEach(o=>{o.data={...o.data||{},"thread.id":Pi,"thread.name":up}})),e}function SE(e){let t;k6(e)&&(t=Jt()*1e3);const r=R6();if(!r)return;Re&&ce.log(`[Profiling] started profiling span: ${We(e).description}`);const s=On();let a=null;lt().setContext("profile",{profile_id:s,start_timestamp:t});async function i(){if(e&&r){if(a){Re&&ce.log("[Profiling] profile for:",We(e).description,"already exists, returning early");return}return r.stop().then(d=>{if(o&&(Le.clearTimeout(o),o=void 0),Re&&ce.log(`[Profiling] stopped profiling of span: ${We(e).description}`),!d){Re&&ce.log(`[Profiling] profiler returned null profile for: ${We(e).description}`,"this may indicate an overlapping span or a call to stopProfiling with a profile title that was never started");return}a=d,tZ(s,d)}).catch(d=>{Re&&ce.log("[Profiling] error while stopping profiler:",d)})}}let o=Le.setTimeout(()=>{Re&&ce.log("[Profiling] max profile duration elapsed, stopping profiling for:",We(e).description),i()},T6);const l=e.end.bind(e);function u(){return e?(i().then(()=>{l()},()=>{l()}),e):l()}e.end=u}const rZ=6e4,sZ=3e5;class aZ{constructor(){this._client=void 0,this._profiler=void 0,this._chunkTimer=void 0,this._profilerId=void 0,this._isRunning=!1,this._sessionSampled=!1,this._lifecycleMode=void 0,this._activeRootSpanIds=new Set,this._rootSpanTimeouts=new Map}initialize(t){const r=t.getOptions().profileLifecycle,s=JX(t.getOptions());Re&&ce.log(`[Profiling] Initializing profiler (lifecycle='${r}').`),s||Re&&ce.log("[Profiling] Session not sampled. Skipping lifecycle profiler initialization."),this._profilerId=On(),this._client=t,this._sessionSampled=s,this._lifecycleMode=r,r==="trace"&&this._setupTraceLifecycleListeners(t)}start(){if(this._lifecycleMode==="trace"){Re&&ce.warn('[Profiling] `profileLifecycle` is set to "trace". Calls to `uiProfiler.start()` are ignored in trace mode.');return}if(this._isRunning){Re&&ce.warn("[Profiling] Profile session is already running, `uiProfiler.start()` is a no-op.");return}if(!this._sessionSampled){Re&&ce.warn("[Profiling] Session is not sampled, `uiProfiler.start()` is a no-op.");return}this._beginProfiling()}stop(){if(this._lifecycleMode==="trace"){Re&&ce.warn('[Profiling] `profileLifecycle` is set to "trace". Calls to `uiProfiler.stop()` are ignored in trace mode.');return}if(!this._isRunning){Re&&ce.warn("[Profiling] Profiler is not running, `uiProfiler.stop()` is a no-op.");return}this._endProfiling()}notifyRootSpanActive(t){if(this._lifecycleMode!=="trace"||!this._sessionSampled)return;const r=t.spanContext().spanId;if(!r||this._activeRootSpanIds.has(r))return;this._registerTraceRootSpan(r);const s=this._activeRootSpanIds.size;s===1&&(Re&&ce.log("[Profiling] Detected already active root span during setup. Active root spans now:",s),this._beginProfiling())}_beginProfiling(){if(!this._isRunning){if(this._isRunning=!0,Re&&ce.log("[Profiling] Started profiling with profiler ID:",this._profilerId),Ta().setContext("profile",{profiler_id:this._profilerId}),this._startProfilerInstance(),!this._profiler){Re&&ce.log("[Profiling] Failed to start JS Profiler; stopping."),this._resetProfilerInfo();return}this._startPeriodicChunking()}}_endProfiling(){this._isRunning&&(this._isRunning=!1,this._chunkTimer&&(clearTimeout(this._chunkTimer),this._chunkTimer=void 0),this._clearAllRootSpanTimeouts(),this._collectCurrentChunk().catch(t=>{Re&&ce.error("[Profiling] Failed to collect current profile chunk on `stop()`:",t)}),this._lifecycleMode==="manual"&&Ta().setContext("profile",{}))}_setupTraceLifecycleListeners(t){t.on("spanStart",r=>{if(!this._sessionSampled){Re&&ce.log("[Profiling] Span not profiled because of negative sampling decision for user session.");return}if(r!==dn(r))return;if(!r.isRecording()){Re&&ce.log("[Profiling] Discarding profile because root span was not sampled.");return}const s=r.spanContext().spanId;if(!s||this._activeRootSpanIds.has(s))return;this._registerTraceRootSpan(s);const a=this._activeRootSpanIds.size;a===1&&(Re&&ce.log(`[Profiling] Root span ${s} started. Profiling active while there are active root spans (count=${a}).`),this._beginProfiling())}),t.on("spanEnd",r=>{if(!this._sessionSampled)return;const s=r.spanContext().spanId;if(!s||!this._activeRootSpanIds.has(s))return;this._activeRootSpanIds.delete(s);const a=this._activeRootSpanIds.size;Re&&ce.log(`[Profiling] Root span with ID ${s} ended. Will continue profiling for as long as there are active root spans (currently: ${a}).`),a===0&&(this._collectCurrentChunk().catch(i=>{Re&&ce.error("[Profiling] Failed to collect current profile chunk on last `spanEnd`:",i)}),this._endProfiling())})}_resetProfilerInfo(){this._isRunning=!1,Ta().setContext("profile",{})}_clearAllRootSpanTimeouts(){this._rootSpanTimeouts.forEach(t=>clearTimeout(t)),this._rootSpanTimeouts.clear()}_registerTraceRootSpan(t){this._activeRootSpanIds.add(t);const r=setTimeout(()=>this._onRootSpanTimeout(t),sZ);this._rootSpanTimeouts.set(t,r)}_startProfilerInstance(){var r;if(((r=this._profiler)==null?void 0:r.stopped)===!1)return;const t=R6();if(!t){Re&&ce.log("[Profiling] Failed to start JS Profiler.");return}this._profiler=t}_startPeriodicChunking(){this._isRunning&&(this._chunkTimer=setTimeout(()=>{if(this._collectCurrentChunk().catch(t=>{Re&&ce.error("[Profiling] Failed to collect current profile chunk during periodic chunking:",t)}),this._isRunning){if(this._startProfilerInstance(),!this._profiler){this._resetProfilerInfo();return}this._startPeriodicChunking()}},rZ))}_onRootSpanTimeout(t){this._rootSpanTimeouts.has(t)&&(this._rootSpanTimeouts.delete(t),this._activeRootSpanIds.has(t)&&(Re&&ce.log(`[Profiling] Reached 5-minute timeout for root span ${t}. You likely started a manual root span that never called \`.end()\`.`),this._activeRootSpanIds.delete(t),this._activeRootSpanIds.size===0&&this._endProfiling()))}async _collectCurrentChunk(){const t=this._profiler;if(this._profiler=void 0,!!t)try{const r=await t.stop(),s=HX(r,this._client,this._profilerId),a=KX(s);if("reason"in a){Re&&ce.log("[Profiling] Discarding invalid profile chunk (this is probably a bug in the SDK):",a.reason);return}this._sendProfileChunk(s),Re&&ce.log("[Profiling] Collected browser profile chunk.")}catch(r){Re&&ce.log("[Profiling] Error while stopping JS Profiler for chunk:",r)}}_sendProfileChunk(t){var l;const r=this._client,s=Cp((l=r.getSdkMetadata)==null?void 0:l.call(r)),a=r.getDsn(),i=r.getOptions().tunnel,o=qs({event_id:On(),sent_at:new Date().toISOString(),...s&&{sdk:s},...!!i&&a&&{dsn:Ua(a)}},[[{type:"profile_chunk"},t]]);r.sendEnvelope(o).then(null,u=>{Re&&ce.error("Error while sending profile chunk envelope:",u)})}}const iZ="BrowserProfiling",oZ=(()=>({name:iZ,setup(e){const t=e.getOptions(),r=new aZ;if(!Qf(t)&&!t.profileLifecycle&&(t.profileLifecycle="manual"),Qf(t)&&!t.profilesSampleRate){Re&&ce.log("[Profiling] Profiling disabled, no profiling options found.");return}const s=hn(),a=s&&dn(s);if(Qf(t)&&t.profileSessionSampleRate!==void 0&&Re&&ce.warn("[Profiling] Both legacy profiling (`profilesSampleRate`) and UI profiling settings are defined. `profileSessionSampleRate` has no effect when legacy profiling is enabled."),Qf(t))a&&k6(a)&&NE(a)&&SE(a),e.on("spanStart",i=>{i===dn(i)&&NE(i)&&SE(i)}),e.on("beforeEnvelope",i=>{var u,d;if(!ZX())return;const o=VX(i);if(!o.length)return;const l=[];for(const p of o){const f=p==null?void 0:p.contexts,m=(u=f==null?void 0:f.profile)==null?void 0:u.profile_id,x=(d=f==null?void 0:f.profile)==null?void 0:d.start_timestamp;if(typeof m!="string"){Re&&ce.log("[Profiling] cannot find profile for a span without a profile context");continue}if(!m){Re&&ce.log("[Profiling] cannot find profile for a span without a profile context");continue}f!=null&&f.profile&&delete f.profile;const y=eZ(m);if(!y){Re&&ce.log(`[Profiling] Could not retrieve profile for span: ${m}`);continue}const g=XX(m,x,y,p);g&&l.push(g)}GX(i,l)});else{const i=t.profileLifecycle;if(e.on("startUIProfiler",()=>r.start()),e.on("stopUIProfiler",()=>r.stop()),i==="manual")r.initialize(e);else if(i==="trace"){if(!is(t)){Re&&ce.warn("[Profiling] `profileLifecycle` is 'trace' but tracing is disabled. Set a `tracesSampleRate` or `tracesSampler` to enable span tracing.");return}r.initialize(e),a&&r.notifyRootSpanActive(a),Le.setTimeout(()=>{const o=hn(),l=o&&dn(o);l&&r.notifyRootSpanActive(l)},0)}}},processEvent(e){return nZ(e)}})),lZ=oZ,cZ=()=>({name:"LaunchDarkly",processEvent(e,t,r){return Yc(e)}});function uZ(){return{name:"sentry-flag-auditor",type:"flag-used",synchronous:!0,method:(e,t,r)=>{Wo(e,t.value),Go(e,t.value)}}}const dZ=()=>({name:"OpenFeature",processEvent(e,t,r){return Yc(e)}});class hZ{after(t,r){Wo(r.flagKey,r.value),Go(r.flagKey,r.value)}error(t,r,s){Wo(t.flagKey,t.defaultValue),Go(t.flagKey,t.defaultValue)}}const fZ=({featureFlagClientClass:e})=>({name:"Unleash",setupOnce(){const t=e.prototype;Kn(t,"isEnabled",mZ)},processEvent(t,r,s){return Yc(t)}});function mZ(e){return function(...t){const r=t[0],s=e.apply(this,t);return typeof r=="string"&&typeof s=="boolean"?(Wo(r,s),Go(r,s)):Re&&ce.error(`[Feature Flags] UnleashClient.isEnabled does not match expected signature. arg0: ${r} (${typeof r}), result: ${s} (${typeof s})`),s}}const pZ=(({growthbookClass:e})=>cB({growthbookClass:e})),xZ=({featureFlagClient:e})=>({name:"Statsig",setup(t){e.on("gate_evaluation",r=>{Wo(r.gate.name,r.gate.value),Go(r.gate.name,r.gate.value)})},processEvent(t,r,s){return Yc(t)}});async function gZ(){const e=Ie();if(!e)return"no-client-active";if(!e.getDsn())return"no-dsn-configured";try{await o3(()=>fetch("https://o447951.ingest.sentry.io/api/4509632503087104/envelope/?sentry_version=7&sentry_key=c1dfb07d783ad5325c245c1fd3725390&sentry_client=sentry.javascript.browser%2F1.33.7",{body:"{}",method:"POST",mode:"cors",credentials:"omit"}))}catch{return"sentry-unreachable"}}const yZ="WebWorker",bZ=({worker:e})=>({name:yZ,setupOnce:()=>{(Array.isArray(e)?e:[e]).forEach(t=>kE(t))},addWorker:t=>kE(t)});function kE(e){e.addEventListener("message",t=>{_Z(t.data)&&(t.stopImmediatePropagation(),t.data._sentryDebugIds&&(Re&&ce.log("Sentry debugId web worker message received",t.data),Le._sentryDebugIds={...t.data._sentryDebugIds,...Le._sentryDebugIds}),t.data._sentryWorkerError&&(Re&&ce.log("Sentry worker rejection message received",t.data._sentryWorkerError),vZ(t.data._sentryWorkerError)))})}function vZ(e){const t=Ie();if(!t)return;const r=t.getOptions().stackParser,s=t.getOptions().attachStacktrace,a=e.reason,i=$i(a)?dA(a):Kp(r,a,void 0,s,!0);i.level="error",e.filename&&(i.contexts={...i.contexts,worker:{filename:e.filename}}),Qc(i,{originalException:a,mechanism:{handled:!1,type:"auto.browser.web_worker.onunhandledrejection"}}),Re&&ce.log("Captured worker unhandled rejection",a)}function wZ({self:e}){e.postMessage({_sentryMessage:!0,_sentryDebugIds:e._sentryDebugIds??void 0}),e.addEventListener("unhandledrejection",t=>{var a;const s={reason:uA(t),filename:(a=e.location)==null?void 0:a.href};e.postMessage({_sentryMessage:!0,_sentryWorkerError:s}),Re&&ce.log("[Sentry Worker] Forwarding unhandled rejection to parent",s)}),Re&&ce.log("[Sentry Worker] Registered worker with unhandled rejection handling")}function _Z(e){if(!Xs(e)||e._sentryMessage!==!0)return!1;const t="_sentryDebugIds"in e,r="_sentryWorkerError"in e;return!(!t&&!r||t&&!(Xs(e._sentryDebugIds)||e._sentryDebugIds===void 0)||r&&!Xs(e._sentryWorkerError))}function A6(e){const t={...e};return q3(t,"react"),e_("react",{version:$.version}),AG(t)}function jZ(e){const t=e.match(/^([^.]+)/);return t!==null&&parseInt(t[0])>=17}function NZ(e,t){const r=new WeakSet;function s(a,i){if(!r.has(a)){if(a.cause)return r.add(a),s(a.cause,i);a.cause=i}}s(e,t)}function ij(e,{componentStack:t},r){if(jZ($.version)&&Ea(e)&&t){const s=new Error(e.message);s.name=`React ErrorBoundary ${e.name}`,s.stack=t,NZ(e,s)}return Pr(s=>(s.setContext("react",{componentStack:t}),Ct(e,r)))}function SZ(e){return(t,r)=>{const s=!!e,a=ij(t,r,{mechanism:{handled:s,type:"auto.function.react.error_handler"}});s&&e(t,r,a)}}const P6="ui.react.render",kZ="ui.react.update",O6="ui.react.mount";var sy={exports:{}},Rt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EE;function EZ(){if(EE)return Rt;EE=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,s=e?Symbol.for("react.fragment"):60107,a=e?Symbol.for("react.strict_mode"):60108,i=e?Symbol.for("react.profiler"):60114,o=e?Symbol.for("react.provider"):60109,l=e?Symbol.for("react.context"):60110,u=e?Symbol.for("react.async_mode"):60111,d=e?Symbol.for("react.concurrent_mode"):60111,p=e?Symbol.for("react.forward_ref"):60112,f=e?Symbol.for("react.suspense"):60113,m=e?Symbol.for("react.suspense_list"):60120,x=e?Symbol.for("react.memo"):60115,y=e?Symbol.for("react.lazy"):60116,g=e?Symbol.for("react.block"):60121,b=e?Symbol.for("react.fundamental"):60117,_=e?Symbol.for("react.responder"):60118,w=e?Symbol.for("react.scope"):60119;function S(N){if(typeof N=="object"&&N!==null){var C=N.$$typeof;switch(C){case t:switch(N=N.type,N){case u:case d:case s:case i:case a:case f:return N;default:switch(N=N&&N.$$typeof,N){case l:case p:case y:case x:case o:return N;default:return C}}case r:return C}}}function j(N){return S(N)===d}return Rt.AsyncMode=u,Rt.ConcurrentMode=d,Rt.ContextConsumer=l,Rt.ContextProvider=o,Rt.Element=t,Rt.ForwardRef=p,Rt.Fragment=s,Rt.Lazy=y,Rt.Memo=x,Rt.Portal=r,Rt.Profiler=i,Rt.StrictMode=a,Rt.Suspense=f,Rt.isAsyncMode=function(N){return j(N)||S(N)===u},Rt.isConcurrentMode=j,Rt.isContextConsumer=function(N){return S(N)===l},Rt.isContextProvider=function(N){return S(N)===o},Rt.isElement=function(N){return typeof N=="object"&&N!==null&&N.$$typeof===t},Rt.isForwardRef=function(N){return S(N)===p},Rt.isFragment=function(N){return S(N)===s},Rt.isLazy=function(N){return S(N)===y},Rt.isMemo=function(N){return S(N)===x},Rt.isPortal=function(N){return S(N)===r},Rt.isProfiler=function(N){return S(N)===i},Rt.isStrictMode=function(N){return S(N)===a},Rt.isSuspense=function(N){return S(N)===f},Rt.isValidElementType=function(N){return typeof N=="string"||typeof N=="function"||N===s||N===d||N===i||N===a||N===f||N===m||typeof N=="object"&&N!==null&&(N.$$typeof===y||N.$$typeof===x||N.$$typeof===o||N.$$typeof===l||N.$$typeof===p||N.$$typeof===b||N.$$typeof===_||N.$$typeof===w||N.$$typeof===g)},Rt.typeOf=S,Rt}var CE;function CZ(){return CE||(CE=1,sy.exports=EZ()),sy.exports}var ay,TE;function TZ(){if(TE)return ay;TE=1;var e=CZ(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},i={};i[e.ForwardRef]=s,i[e.Memo]=a;function o(y){return e.isMemo(y)?a:i[y.$$typeof]||t}var l=Object.defineProperty,u=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,p=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,m=Object.prototype;function x(y,g,b){if(typeof g!="string"){if(m){var _=f(g);_&&_!==m&&x(y,_,b)}var w=u(g);d&&(w=w.concat(d(g)));for(var S=o(y),j=o(g),N=0;N<w.length;++N){var C=w[N];if(!r[C]&&!(b&&b[C])&&!(j&&j[C])&&!(S&&S[C])){var E=p(g,C);try{l(y,C,E)}catch{}}}}return y}return ay=x,ay}var I6=TZ();const L6=ww(I6),RZ=UI({__proto__:null,default:L6},[I6]),rx=L6||RZ,AZ="unknown";class oj extends $.Component{constructor(t){super(t);const{name:r,disabled:s=!1}=this.props;s||(this._mountSpan=os({name:`<${r}>`,onlyIfParent:!0,op:O6,attributes:{[ct]:"auto.ui.react.profiler","ui.component_name":r}}))}componentDidMount(){this._mountSpan&&this._mountSpan.end()}shouldComponentUpdate({updateProps:t,includeUpdates:r=!0}){if(r&&this._mountSpan&&t!==this.props.updateProps){const s=Object.keys(t).filter(a=>t[a]!==this.props.updateProps[a]);if(s.length>0){const a=Jt();this._updateSpan=zo(this._mountSpan,()=>os({name:`<${this.props.name}>`,onlyIfParent:!0,op:kZ,startTime:a,attributes:{[ct]:"auto.ui.react.profiler","ui.component_name":this.props.name,"ui.react.changed_props":s}}))}}return!0}componentDidUpdate(){this._updateSpan&&(this._updateSpan.end(),this._updateSpan=void 0)}componentWillUnmount(){const t=Jt(),{name:r,includeRender:s=!0}=this.props;if(this._mountSpan&&s){const a=We(this._mountSpan).timestamp;zo(this._mountSpan,()=>{const i=os({onlyIfParent:!0,name:`<${r}>`,op:P6,startTime:a,attributes:{[ct]:"auto.ui.react.profiler","ui.component_name":r}});i&&i.end(t)})}}render(){return this.props.children}}Object.assign(oj,{defaultProps:{disabled:!1,includeRender:!0,includeUpdates:!0}});function PZ(e,t){const r=(t==null?void 0:t.name)||e.displayName||e.name||AZ,s=a=>$.createElement(oj,{...t,name:r,updateProps:a},$.createElement(e,{...a}));return s.displayName=`profiler(${r})`,rx(s,e),s}function OZ(e,t={disabled:!1,hasRenderSpan:!0}){const[r]=$.useState(()=>{if(!(t!=null&&t.disabled))return os({name:`<${e}>`,onlyIfParent:!0,op:O6,attributes:{[ct]:"auto.ui.react.profiler","ui.component_name":e}})});$.useEffect(()=>(r&&r.end(),()=>{if(r&&t.hasRenderSpan){const s=We(r).timestamp,a=Jt(),i=os({name:`<${e}>`,onlyIfParent:!0,op:P6,startTime:s,attributes:{[ct]:"auto.ui.react.profiler","ui.component_name":e}});i&&i.end(a)}}),[])}const Xn=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,IZ="unknown",iy={componentStack:null,error:null,eventId:null};let M6=class extends $.Component{constructor(t){super(t),this.state=iy,this._openFallbackReportDialog=!0;const r=Ie();r&&t.showDialog&&(this._openFallbackReportDialog=!1,this._cleanupHook=r.on("afterSendEvent",s=>{!s.type&&this._lastEventId&&s.event_id===this._lastEventId&&ew({...t.dialogOptions,eventId:this._lastEventId})}))}componentDidCatch(t,r){const{componentStack:s}=r,{beforeCapture:a,onError:i,showDialog:o,dialogOptions:l}=this.props;Pr(u=>{a&&a(u,t,s);const d=this.props.handled!=null?this.props.handled:!!this.props.fallback,p=ij(t,r,{mechanism:{handled:d,type:"auto.function.react.error_boundary"}});i&&i(t,s,p),o&&(this._lastEventId=p,this._openFallbackReportDialog&&ew({...l,eventId:p})),this.setState({error:t,componentStack:s,eventId:p})})}componentDidMount(){const{onMount:t}=this.props;t&&t()}componentWillUnmount(){const{error:t,componentStack:r,eventId:s}=this.state,{onUnmount:a}=this.props;a&&(this.state===iy?a(null,null,null):a(t,r,s)),this._cleanupHook&&(this._cleanupHook(),this._cleanupHook=void 0)}resetErrorBoundary(){const{onReset:t}=this.props,{error:r,componentStack:s,eventId:a}=this.state;t&&t(r,s,a),this.setState(iy)}render(){const{fallback:t,children:r}=this.props,s=this.state;if(s.componentStack===null)return typeof r=="function"?r():r;const a=typeof t=="function"?$.createElement(t,{error:s.error,componentStack:s.componentStack,resetError:()=>this.resetErrorBoundary(),eventId:s.eventId}):t;return $.isValidElement(a)?a:(t&&Xn&&ce.warn("fallback did not produce a valid ReactElement"),null)}};function LZ(e,t){const r=e.displayName||e.name||IZ,s=$.memo(a=>$.createElement(M6,{...t},$.createElement(e,{...a})));return s.displayName=`errorBoundary(${r})`,rx(s,e),s}const MZ="redux.action",DZ="info",$Z={attachReduxState:!0,actionTransformer:e=>e,stateTransformer:e=>e||null};function qZ(e){const t={...$Z,...e};return r=>(s,a)=>{t.attachReduxState&&Ta().addEventProcessor((l,u)=>{try{l.type===void 0&&l.contexts.state.state.type==="redux"&&(u.attachments=[...u.attachments||[],{filename:"redux_state.json",data:JSON.stringify(l.contexts.state.state.value)}])}catch{}return l});function i(l){return(u,d)=>{const p=l(u,d),f=lt(),m=t.actionTransformer(d);typeof m<"u"&&m!==null&&Ds({category:MZ,data:m,type:DZ});const x=t.stateTransformer(p);if(typeof x<"u"&&x!==null){const g=Ie(),b=g==null?void 0:g.getOptions(),_=(b==null?void 0:b.normalizeDepth)||3,w={state:{type:"redux",value:x}};In(w,"__sentry_override_normalization_depth__",3+_),f.setContext("state",w)}else f.setContext("state",null);const{configureScopeWithState:y}=t;return typeof y=="function"&&y(f,p),p}}const o=r(i(s),a);return o.replaceReducer=new Proxy(o.replaceReducer,{apply:function(l,u,d){l.apply(u,[i(d[0])])}}),o}}function FZ(e){const t=il({...e,instrumentPageLoad:!1,instrumentNavigation:!1}),{history:r,routes:s,match:a,instrumentPageLoad:i=!0,instrumentNavigation:o=!0}=e;return{...t,afterAllSetup(l){t.afterAllSetup(l),i&&Le.location&&RE(s,Le.location,a,(u,d="url")=>{tu(l,{name:u,attributes:{[Ut]:"pageload",[ct]:"auto.pageload.react.reactrouter_v3",[At]:d}})}),o&&r.listen&&r.listen(u=>{(u.action==="PUSH"||u.action==="POP")&&RE(s,u,a,(d,p="url")=>{nu(l,{name:d,attributes:{[Ut]:"navigation",[ct]:"auto.navigation.react.reactrouter_v3",[At]:p}})})})}}}function RE(e,t,r,s){let a=t.pathname;r({location:t,routes:e},(i,o,l)=>{if(i||!l)return s(a);const u=UZ(l.routes||[]);return u.length===0||u==="/*"?s(a):(a=u,s(a,"route"))})}function UZ(e){var s;if(!Array.isArray(e)||e.length===0)return"";const t=e.filter(a=>!!a.path);let r=-1;for(let a=t.length-1;a>=0;a--)if((s=t[a].path)!=null&&s.startsWith("/")){r=a;break}return t.slice(r).reduce((a,{path:i})=>{const o=a==="/"||a===""?i:`/${i}`;return`${a}${o}`},"")}function BZ(e,t={}){const r=e,s=il({...t,instrumentNavigation:!1,instrumentPageLoad:!1}),{instrumentPageLoad:a=!0,instrumentNavigation:i=!0}=t;return{...s,afterAllSetup(o){s.afterAllSetup(o);const l=Le.location;if(a&&l){const u=r.matchRoutes(l.pathname,r.options.parseSearch(l.search),{preload:!1,throwOnError:!1}),d=u[u.length-1];tu(o,{name:d?d.routeId:l.pathname,attributes:{[Ut]:"pageload",[ct]:"auto.pageload.react.tanstack_router",[At]:d?"route":"url",...AE(d)}})}i&&r.subscribe("onBeforeNavigate",u=>{if(!u.fromLocation||u.toLocation.state===u.fromLocation.state)return;const d=r.matchRoutes(u.toLocation.pathname,u.toLocation.search,{preload:!1,throwOnError:!1}),p=d[d.length-1],f=Le.location,m=nu(o,{name:p?p.routeId:f.pathname,attributes:{[Ut]:"navigation",[ct]:"auto.navigation.react.tanstack_router",[At]:p?"route":"url"}}),x=r.subscribe("onResolved",y=>{if(x(),m){const g=r.matchRoutes(y.toLocation.pathname,y.toLocation.search,{preload:!1,throwOnError:!1}),b=g[g.length-1];b&&(m.updateName(b.routeId),m.setAttribute(At,"route"),m.setAttributes(AE(b)))}})})}}}function AE(e){if(!e)return{};const t={};return Object.entries(e.params).forEach(([r,s])=>{t[`url.path.params.${r}`]=s,t[`url.path.parameter.${r}`]=s,t[`params.${r}`]=s}),t}function HZ(e){const t=il({...e,instrumentPageLoad:!1,instrumentNavigation:!1}),{history:r,routes:s,matchPath:a,instrumentPageLoad:i=!0,instrumentNavigation:o=!0}=e;return{...t,afterAllSetup(l){t.afterAllSetup(l),D6(l,i,o,r,"reactrouter_v4",s,a)}}}function KZ(e){const t=il({...e,instrumentPageLoad:!1,instrumentNavigation:!1}),{history:r,routes:s,matchPath:a,instrumentPageLoad:i=!0,instrumentNavigation:o=!0}=e;return{...t,afterAllSetup(l){t.afterAllSetup(l),D6(l,i,o,r,"reactrouter_v5",s,a)}}}function D6(e,t,r,s,a,i=[],o){function l(){if(s.location)return s.location.pathname;if(Le.location)return Le.location.pathname}function u(d){if(i.length===0||!o)return[d,"url"];const p=$6(i,d,o);for(const f of p)if(f.match.isExact)return[f.match.path,"route"];return[d,"url"]}if(t){const d=l();if(d){const[p,f]=u(d);tu(e,{name:p,attributes:{[Ut]:"pageload",[ct]:`auto.pageload.react.${a}`,[At]:f}})}}r&&s.listen&&s.listen((d,p)=>{if(p&&(p==="PUSH"||p==="POP")){const[f,m]=u(d.pathname);nu(e,{name:f,attributes:{[Ut]:"navigation",[ct]:`auto.navigation.react.${a}`,[At]:m}})}})}function $6(e,t,r,s=[]){return e.some(a=>{const i=a.path?r(t,a):s.length?s[s.length-1].match:zZ(t);return i&&(s.push({route:a,match:i}),a.routes&&$6(a.routes,t,r,s)),!!i}),s}function zZ(e){return{path:"/",url:"/",params:{},isExact:e==="/"}}function WZ(e){const t=e.displayName||e.name,r=s=>{var a;if((a=s==null?void 0:s.computedMatch)!=null&&a.isExact){const i=s.computedMatch.path,o=GZ();lt().setTransactionName(i),o&&(o.updateName(i),o.setAttribute(At,"route"))}return $.createElement(e,{...s})};return r.displayName=`sentryRoute(${t})`,rx(r,e),r}function GZ(){const e=hn(),t=e&&dn(e);if(!t)return;const r=We(t).op;return r==="navigation"||r==="pageload"?t:void 0}let lj,cc=!1;const Oi=[],VZ=10;function QZ(e,t){const r={};return Oi.length>=VZ&&(Xn&&ce.warn("[React Router] Navigation context stack overflow - removing oldest context"),Oi.shift()),Oi.push({token:r,targetPath:e,span:t}),r}function YZ(e){const t=Oi[Oi.length-1];(t==null?void 0:t.token)===e&&Oi.pop()}function q6(){const e=Oi.length;return e>0?Oi[e-1]??null:null}function JZ(e,t=!1){lj=e,cc=t}function XZ(e){return eee(e.route.path||"")}function ZZ(e){return e.params["*"]||""}function eee(e){return e[e.length-1]==="*"?e.slice(0,-1):e}function uc(e){return e[e.length-1]==="/"?e.slice(0,-1):e}function F6(e){return e.endsWith("*")}function Bi(e){return e.includes("/*")||e.endsWith("*")}function PE(e,t){var r;return F6(e)&&!!((r=t.route.children)!=null&&r.length)||!1}function tee(e){var t;return!!(!e.children&&e.element&&((t=e.path)!=null&&t.endsWith("/*")))}function nee(e,t,r){const s=e&&e.length>0?e:cc?sx(t,r):t;let a=s.slice(-2)==="/*"?s.slice(0,-2):s;return a.length>1&&a[a.length-1]==="/"&&(a=a.slice(0,-1)),[a,"route"]}function OE(e){return e.split(/\\?\//).filter(t=>t.length>0&&t!==",").length}function sx(e,t){if(!t||t==="/"||!e.toLowerCase().startsWith(t.toLowerCase()))return e;const r=t.endsWith("/")?t.length-1:t.length,s=e.charAt(r);return s&&s!=="/"?e:e.slice(r)||"/"}function dp(e){return e[0]==="/"?e:`/${e}`}function U6(e,t){const r=lj(e,t);if(!r||r.length===0)return"";for(const s of r)if(s.route.path&&s.route.path!=="*"){const a=XZ(s),i=sx(t.pathname,dp(s.pathnameBase));return t.pathname===i?uc(i):uc(uc(a||"")+dp(U6(e.filter(o=>o!==s.route),{pathname:i})))}return""}function ree(e,t){const r=lj(t,e);if(r){for(const s of r)if(tee(s.route)&&ZZ(s))return!0}return!1}function IE(e,t){return cc?sx(e.pathname,t):e.pathname||""}function see(e,t,r,s=""){if(!e||e.length===0)return[cc?sx(t.pathname,s):t.pathname,"url"];if(!r)return[IE(t,s),"url"];let a="";for(const i of r){const o=i.route;if(!o)continue;if(o.index)return nee(a,i.pathname,s);const l=o.path;if(!l||PE(l,i))continue;const u=l[0]==="/"||a[a.length-1]==="/"?l:`/${l}`;if(a=uc(a)+dp(u),uc(t.pathname)===uc(s+i.pathname))return OE(a)!==OE(i.pathname)&&!F6(a)?[(cc?"":s)+u,"route"]:(PE(a,i)&&(a=a.slice(0,-1)),[(cc?"":s)+a,"route"])}return[IE(t,s),"url"]}function ax(e,t,r,s,a=""){let i,o="url";const l=ree(e,r);return l&&(i=dp(U6(r,e)),o="route"),(!l||!i)&&([i,o]=see(t,e,s,a)),[i||e.pathname,o]}function Is(){const e=hn(),t=e?dn(e):void 0;if(!t)return;const r=We(t).op;return r==="navigation"||r==="pageload"?t:void 0}function aee(){const e=q6();if(e!=null&&e.targetPath)return{pathname:e.targetPath,search:"",hash:"",state:null,key:"default"};if(typeof Le<"u")try{const t=Le.location;if(t)return{pathname:t.pathname,search:t.search||"",hash:t.hash||"",state:null,key:"default"}}catch{Xn&&ce.warn("[React Router] Could not access window.location")}return null}function iee(){const e=q6();return e?e.span:Is()}function oee(e,t,r,s){const a=new Proxy(e,{apply(i,o,l){const u=aee(),d=iee(),p=i.apply(o,l);return lee(p,t,r,s,u,d),p}});return In(a,"__sentry_proxied__",!0),a}function lee(e,t,r,s,a,i){nl(e)?e.then(o=>{Array.isArray(o)&&s(o,t,a??void 0,i)}).catch(o=>{Xn&&ce.warn(`Error resolving async handler '${r}' for route`,t,o)}):Array.isArray(e)&&s(e,t,a??void 0,i)}function ix(e,t){if(e.handle&&typeof e.handle=="object")for(const r of Object.keys(e.handle)){const s=e.handle[r];typeof s=="function"&&!s.__sentry_proxied__&&(e.handle[r]=oee(s,e,r,t))}if(Array.isArray(e.children))for(const r of e.children)ix(r,t)}let Ii,Li,Mi,Nm,cs,ox=!1,Eo=3e3;const B6=new WeakSet,vo=new WeakMap,hr=new Set,Sm=new WeakMap;function cee(e){return Le!=null&&Le.requestAnimationFrame?Le.requestAnimationFrame(e):setTimeout(e,0)}function LE(e){Le!=null&&Le.cancelAnimationFrame?Le.cancelAnimationFrame(e):clearTimeout(e)}function H6(e){return`${e.pathname}${e.search||""}${e.hash||""}`}function ME(e){return e.includes(":")||e.includes("*")}function uee(e,t,r,s){var i;if(!e)return{skip:!1,shouldUpdate:!1};if(e.locationKey===t&&(e.isPlaceholder||!s)){const o=!!e.routeName&&Bi(e.routeName),l=Bi(r),u=!!e.routeName&&ME(e.routeName),d=ME(r),p=o&&!l,f=!u&&d,m=r!==e.routeName&&r.length>(((i=e.routeName)==null?void 0:i.length)||0)&&!l;return{skip:!0,shouldUpdate:!!(e.routeName&&(p||f||m))}}return{skip:!1,shouldUpdate:!1}}function dee(e,t){const r=t.children||[],s=e.filter(a=>!r.some(i=>i===a||a.path&&i.path===a.path||a.id&&i.id===a.id));s.length>0&&(t.children=[...r,...s])}function hee(e,t){let r=Sm.get(e);r||(r=new Set,Sm.set(e,r)),r.add(t),t.finally(()=>{const s=Sm.get(e);s&&s.delete(t)})}function cj(e,t,r=null,s){e.forEach(i=>{hr.add(i),ox&&ix(i,cj)}),t&&dee(e,t);const a=s??Is();if(a){const i=We(a);if(i.timestamp){Xn&&ce.warn("[React Router] Lazy handler resolved after span ended - skipping update");return}const o=i.op;let l=r;if(!l&&!s&&typeof Le<"u"){const u=Le.location;u!=null&&u.pathname&&(l={pathname:u.pathname})}l&&(o==="pageload"?ch({activeRootSpan:a,location:{pathname:l.pathname},routes:Array.from(hr),allRoutes:Array.from(hr)}):o==="navigation"&&fw(a,l,Array.from(hr),!1,cs))}}function fw(e,t,r,s=!1,a){var p;const i=We(e),o=i.description,l=e==null?void 0:e.__sentry_navigation_name_set__,u=o&&Bi(o);if((!l||s||u)&&!i.timestamp){const f=a(r,t),[m,x]=ax(t,r,r,f||[],""),y=(p=i.data)==null?void 0:p[At];m&&(!o||!l&&(y!=="route"||x==="route")||y!=="route"&&x==="route"||y==="route"&&x==="route"&&u)&&(e.updateName(m),e.setAttribute(At,x),!Bi(m)&&x==="route"&&In(e,"__sentry_navigation_name_set__",!0))}}function K6(e,t,r,s,a){let i=!1,o=!!a&&We(a).op==="pageload",l=!1,u=null,d=null;e.subscribe(p=>{if(!i){const m=Is();m&&We(m).op==="pageload"?o=!0:o&&(p.historyAction==="POP"&&!l?l=!0:i=!0)}if(p.historyAction==="PUSH"||p.historyAction==="POP"&&i){const m=H6(p.location),x=()=>{d!==m&&(d=m,u=null,uj({location:p.location,routes:t,navigationType:p.historyAction,version:r,basename:s,allRoutes:Array.from(hr)}))};p.navigation.state!=="idle"?(d!==m&&(d=null),u!==null&&LE(u),u=cee(x)):(u!==null&&(LE(u),u=null),x())}})}function z6(e,t){return!Ii||!Li||!Mi||!cs?(Xn&&ce.warn(`reactRouterV${t}Instrumentation was unable to wrap the \`createRouter\` function because of one or more missing parameters.`),e):function(r,s){if(lh(r),ox)for(const u of r)ix(u,cj);const a=Q6(s),i=e(r,a),o=s==null?void 0:s.basename,l=Is();return i.state.historyAction==="POP"&&l&&ch({activeRootSpan:l,location:i.state.location,routes:r,basename:o,allRoutes:Array.from(hr)}),K6(i,r,t,o,l),i}}function W6(e,t){return!Ii||!Li||!Mi||!cs?(Xn&&ce.warn(`reactRouterV${t}Instrumentation was unable to wrap the \`createMemoryRouter\` function because of one or more missing parameters.`),e):function(r,s){if(lh(r),ox)for(const y of r)ix(y,cj);const a=Q6(s,!0),i=e(r,a),o=s==null?void 0:s.basename;let l;const u=s==null?void 0:s.initialEntries,d=s==null?void 0:s.initialIndex,p=u&&u.length===1,f=d!==void 0&&u&&u[d];l=p?u[0]:f?u[d]:void 0;const m=l?typeof l=="string"?{pathname:l}:l:i.state.location,x=Is();return i.state.historyAction==="POP"&&x&&ch({activeRootSpan:x,location:m,routes:r,basename:o,allRoutes:Array.from(hr)}),K6(i,r,t,o,x),i}}function G6(e,t){const r=il({...e,instrumentPageLoad:!1,instrumentNavigation:!1}),{useEffect:s,useLocation:a,useNavigationType:i,createRoutesFromChildren:o,matchRoutes:l,stripBasename:u,enableAsyncRouteHandlers:d=!1,instrumentPageLoad:p=!0,instrumentNavigation:f=!0,lazyRouteTimeout:m}=e;return{...r,setup(x){r.setup(x);const y=e.finalTimeout??3e4,g=(e.idleTimeout??1e3)*3,b=m??g;b===1/0?(Eo=y,Xn&&ce.log("[React Router] lazyRouteTimeout set to Infinity, capping at finalTimeout:",y,"ms to prevent indefinite hangs")):Number.isNaN(b)?(Xn&&ce.warn("[React Router] lazyRouteTimeout must be a number, falling back to default:",g),Eo=g):b<0?(Xn&&ce.warn("[React Router] lazyRouteTimeout must be non-negative or Infinity, got:",b,"falling back to:",g),Eo=g):Eo=b,Ii=s,Li=a,Mi=i,cs=l,Nm=o,ox=d,JZ(l,u||!1)},afterAllSetup(x){var g;r.afterAllSetup(x);const y=(g=Le.location)==null?void 0:g.pathname;p&&y&&tu(x,{name:y,attributes:{[At]:"url",[Ut]:"pageload",[ct]:`auto.pageload.react.reactrouter_v${t}`}}),f&&B6.add(x)}}}function V6(e,t){if(!Ii||!Li||!Mi||!cs)return Xn&&ce.warn("reactRouterV6Instrumentation was unable to wrap `useRoutes` because of one or more missing parameters."),e;const r=s=>{const a=$.useRef(!0),{routes:i,locationArg:o}=s,l=e(i,o),u=Li(),d=Mi(),p=typeof o=="string"||o!=null&&o.pathname?o:u;return Ii(()=>{const f=typeof p=="string"?{pathname:p}:p;a.current?(lh(i),ch({activeRootSpan:Is(),location:f,routes:i,allRoutes:Array.from(hr)}),a.current=!1):uj({location:f,routes:i,navigationType:d,version:t,allRoutes:Array.from(hr)})},[d,p]),l};return(s,a)=>$.createElement(r,{routes:s,locationArg:a})}function Q6(e,t=!1){if(!e||!("patchRoutesOnNavigation"in e)||typeof e.patchRoutesOnNavigation!="function")return e||{};const r=e.patchRoutesOnNavigation;return{...e,patchRoutesOnNavigation:async s=>{const a=s==null?void 0:s.path,i=Is();if(!t){const l=s==null?void 0:s.patch;l&&(s.patch=(u,d)=>{lh(d);const p=Is();return a&&p&&We(p).op==="navigation"&&fw(p,{pathname:a,search:"",hash:"",state:null,key:"default"},Array.from(hr),!0,cs),l(u,d)})}const o=(async()=>{var p;const l=QZ(a,i);let u;try{u=await r(s)}finally{YZ(l)}const d=Is();if(d&&We(d).op==="navigation"){const f=t?a:a||((p=Le.location)==null?void 0:p.pathname);f&&fw(d,{pathname:f,search:"",hash:"",state:null,key:"default"},Array.from(hr),!1,cs)}return u})();return i&&hee(i,o),o}}}function uj(e){const{location:t,routes:r,navigationType:s,version:a,matches:i,basename:o,allRoutes:l}=e,u=Array.isArray(i)?i:cs(l||r,t,o),d=Ie();if(!d||!B6.has(d))return;const p=Is();if(!(p&&We(p).op==="pageload"&&s==="POP")&&(s==="PUSH"||s==="POP")&&u){const[f,m]=ax(t,l||r,l||r,u,o),x=H6(t),y=vo.get(d),g=y&&!y.isPlaceholder?!!We(y.span).timestamp:!1,{skip:b,shouldUpdate:_}=uee(y,x,f,g);if(b){if(_&&y){const N=y.routeName;y.isPlaceholder?(y.routeName=f,Xn&&ce.log(`[Tracing] Updated placeholder navigation name from "${N}" to "${f}" (will apply to real span)`)):(y.span.updateName(f),y.span.setAttribute(At,m),In(y.span,"__sentry_navigation_name_set__",!0),y.routeName=f,Xn&&ce.log(`[Tracing] Updated navigation span name from "${N}" to "${f}"`))}else Xn&&ce.log(`[Tracing] Skipping duplicate navigation for location: ${x}`);return}const S={span:{end:()=>{}},routeName:f,pathname:t.pathname,locationKey:x,isPlaceholder:!0};vo.set(d,S);let j;try{j=nu(d,{name:S.routeName,attributes:{[At]:m,[Ut]:"navigation",[ct]:`auto.navigation.react.reactrouter_v${a}`}})}catch(N){throw vo.delete(d),N}j?(vo.set(d,{span:j,routeName:S.routeName,pathname:t.pathname,locationKey:x}),J6(j,t,r,o,l,"navigation")):vo.delete(d)}}function lh(e){e.forEach(t=>{Y6(t).forEach(s=>{hr.add(s)})})}function Y6(e,t=new Set){return t.has(e)||(t.add(e),e.children&&!e.index&&e.children.forEach(r=>{Y6(r,t).forEach(a=>{t.add(a)})})),t}function ch({activeRootSpan:e,location:t,routes:r,matches:s,basename:a,allRoutes:i}){const o=Array.isArray(s)?s:cs(i||r,t,a);if(o){const[l,u]=ax(t,i||r,i||r,o,a);lt().setTransactionName(l||"/"),e&&(e.updateName(l),e.setAttribute(At,u),J6(e,t,r,a,i,"pageload"))}}function fee(e,t,r,s,a=!1){return r?!!(!e&&a||e&&Bi(e)&&s==="route"&&!Bi(r)||t!=="route"&&s==="route"):!1}function oy(e,t,r,s,a,i,o,l){var u;try{const d=(u=t.data)==null?void 0:u[At];if(d==="route"&&r&&!Bi(r))return;const p=Array.from(l),f=p.length>0?p:a,m=cs(f,s,i);if(!m)return;const[x,y]=ax(s,f,f,m,i),g=fee(r,d,x,y,!0),b=o==="pageload"||!t.timestamp;g&&b&&(e.updateName(x),e.setAttribute(At,y))}catch(d){Xn&&ce.warn(`Error updating span details before ending: ${d}`)}}function J6(e,t,r,s,a,i){const o=`__sentry_${i}_end_patched__`;if((e==null?void 0:e[o])||!e.end)return;const u=a?new Set(a):hr,d=e.end.bind(e);let p=!1;e.end=function(...m){var j;if(p)return;p=!0;const x=m.length>0?m[0]:Date.now()/1e3,y=We(e),g=y.description,b=(j=y.data)==null?void 0:j[At],_=()=>{const N=Ie();if(N&&i==="navigation"){const C=vo.get(N);C&&C.span===e&&vo.delete(N)}},w=Sm.get(e);if(w&&w.size>0&&g&&(Bi(g)||b!=="route")){if(Eo===0){oy(e,y,g,t,r,s,i,u),_(),d(x);return}const N=Promise.allSettled(w).then(()=>{});(Eo===1/0?N:Promise.race([N,new Promise(E=>setTimeout(E,Eo))])).then(()=>{const E=We(e);oy(e,E,E.description,t,r,s,i,u),_(),d(x)}).catch(()=>{_(),d(x)});return}oy(e,y,g,t,r,s,i,u),_(),d(x)},In(e,o,!0)}function X6(e,t){if(!Ii||!Li||!Mi||!Nm||!cs)return Xn&&ce.warn(`reactRouterV6Instrumentation was unable to wrap Routes because of one or more missing parameters.
      useEffect: ${Ii}. useLocation: ${Li}. useNavigationType: ${Mi}.
      createRoutesFromChildren: ${Nm}. matchRoutes: ${cs}.`),e;const r=s=>{const a=$.useRef(!0),i=Li(),o=Mi();return Ii(()=>{const l=Nm(s.children);a.current?(lh(l),ch({activeRootSpan:Is(),location:i,routes:l,allRoutes:Array.from(hr)}),a.current=!1):uj({location:i,routes:l,navigationType:o,version:t,allRoutes:Array.from(hr)})},[i,o]),$.createElement(e,{...s})};return rx(r,e),r}function mee(e){return G6(e,"6")}function pee(e){return V6(e,"6")}function xee(e){return z6(e,"6")}function gee(e){return W6(e,"6")}function yee(e){return X6(e,"6")}function bee(e){return G6(e,"7")}function vee(e){return X6(e,"7")}function wee(e){return z6(e,"7")}function _ee(e){return W6(e,"7")}function jee(e){return V6(e,"7")}const Nee=Object.freeze(Object.defineProperty({__proto__:null,BrowserClient:LR,ErrorBoundary:M6,MULTIPLEXED_TRANSPORT_EXTRA_KEY:cm,OpenFeatureIntegrationHook:hZ,Profiler:oj,SDK_VERSION:ka,SEMANTIC_ATTRIBUTE_SENTRY_OP:Ut,SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN:ct,SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE:Sp,SEMANTIC_ATTRIBUTE_SENTRY_SOURCE:At,Scope:Ls,WINDOW:Le,addBreadcrumb:Ds,addEventProcessor:x3,addIntegration:Lv,breadcrumbsIntegration:iA,browserApiErrorsIntegration:oA,browserProfilingIntegration:lZ,browserSessionIntegration:lA,browserTracingIntegration:il,buildLaunchDarklyFlagUsedHandler:uZ,captureConsoleIntegration:gU,captureEvent:Qc,captureException:Ct,captureFeedback:X3,captureMessage:f3,captureReactException:ij,captureSession:Iv,chromeStackLineParser:tA,close:ZF,consoleLoggingIntegration:Z3,contextLinesIntegration:eV,continueTrace:_F,createConsolaReporter:IB,createLangChainCallbackHandler:hH,createReduxEnhancer:qZ,createTransport:C3,createUserFeedbackEnvelope:QW,dedupeIntegration:W3,defaultRequestInstrumentationOptions:rj,defaultStackLineParsers:rA,defaultStackParser:sA,diagnoseSdkConnectivity:gZ,endSession:t_,eventFiltersIntegration:U3,eventFromException:OR,eventFromMessage:IR,exceptionFromError:Hp,extraErrorDataIntegration:kU,featureFlagsIntegration:lB,feedbackAsyncIntegration:YK,feedbackIntegration:Ck,feedbackSyncIntegration:Ck,flush:XF,forceLoad:PG,functionToStringIntegration:F3,geckoStackLineParser:nA,getActiveSpan:hn,getClient:Ie,getCurrentScope:lt,getDefaultIntegrations:pA,getFeedback:iK,getGlobalScope:Ta,getIsolationScope:En,getReplay:KJ,getRootSpan:dn,getSpanDescendants:id,getSpanStatusFromHttpCode:DT,getTraceData:u_,globalHandlersIntegration:cA,graphqlClientIntegration:lV,growthbookIntegration:pZ,httpClientIntegration:FG,httpContextIntegration:fA,inboundFiltersIntegration:B3,init:A6,instrumentAnthropicAiClient:z9,instrumentGoogleGenAIClient:sH,instrumentLangGraph:vH,instrumentOpenAiClient:k9,instrumentOutgoingRequests:b6,instrumentSupabaseClient:J3,isEnabled:p3,isInitialized:e7,lastEventId:m3,launchDarklyIntegration:cZ,lazyLoadIntegration:AR,linkedErrorsIntegration:mA,logger:jB,makeBrowserOfflineTransport:LX,makeFetchTransport:$_,makeMultiplexedTransport:B7,metrics:PB,moduleMetadataIntegration:fU,onLoad:OG,openFeatureIntegration:dZ,opera10StackLineParser:zW,opera11StackLineParser:VW,parameterize:$3,reactErrorHandler:SZ,reactRouterV3BrowserTracingIntegration:FZ,reactRouterV4BrowserTracingIntegration:HZ,reactRouterV5BrowserTracingIntegration:KZ,reactRouterV6BrowserTracingIntegration:mee,reactRouterV7BrowserTracingIntegration:bee,registerSpanErrorInstrumentation:t3,registerWebWorker:wZ,replayCanvasIntegration:cX,replayIntegration:d6,reportPageLoaded:EX,reportingObserverIntegration:DG,rewriteFramesIntegration:IU,sendFeedback:gR,setActiveSpanInBrowser:CX,setContext:e_,setCurrentClient:I3,setExtra:VF,setExtras:GF,setHttpStatus:_d,setMeasurement:i3,setTag:YF,setTags:QF,setUser:JF,showReportDialog:ew,spanToBaggageHeader:Zq,spanToJSON:We,spanToTraceHeader:JT,spotlightBrowserIntegration:EG,startBrowserTracingNavigationSpan:nu,startBrowserTracingPageLoadSpan:tu,startInactiveSpan:os,startNewTrace:l3,startSession:Ov,startSpan:na,startSpanManual:ja,statsigIntegration:xZ,supabaseIntegration:GU,suppressTracing:o3,tanstackRouterBrowserTracingIntegration:BZ,thirdPartyErrorFilterIntegration:rB,uiProfiler:kW,unleashIntegration:fZ,updateSpanName:Yq,useProfiler:OZ,webWorkerIntegration:bZ,winjsStackLineParser:BW,withActiveSpan:zo,withErrorBoundary:LZ,withIsolationScope:Sq,withProfiler:PZ,withScope:Pr,withSentryReactRouterV6Routing:yee,withSentryReactRouterV7Routing:vee,withSentryRouting:WZ,wrapCreateBrowserRouterV6:xee,wrapCreateBrowserRouterV7:wee,wrapCreateMemoryRouterV6:gee,wrapCreateMemoryRouterV7:_ee,wrapUseRoutesV6:pee,wrapUseRoutesV7:jee,zodErrorsIntegration:nB},Symbol.toStringTag,{value:"Module"}));function See(){const e="https://9510dc570d99c3c8c341b7eede7cb2f2@o4510618335903744.ingest.us.sentry.io/4510620242935808";console.log("Initializing Sentry with DSN:",e.substring(0,20)+"..."),A6({dsn:e,release:"1.0.0",environment:"production",sendDefaultPii:!0,debug:!1,enableLogs:!0,integrations:[il(),d6({maskAllText:!0,blockAllMedia:!0,unblock:[".error-message","[data-sentry-unmask]"],block:['input[type="password"]','input[type="email"]',".sensitive"]}),Z3({levels:["log","error","warn"]})],tracesSampleRate:.1,replaysSessionSampleRate:.1,replaysOnErrorSampleRate:1}),console.log("Sentry initialized successfully"),window.addEventListener("unhandledrejection",t=>{console.error("Unhandled promise rejection:",t.reason),Ct(t.reason,{tags:{type:"unhandled-rejection"}})}),window.addEventListener("error",t=>{console.error("Global error:",t.error),Ct(t.error||new Error(t.message),{tags:{type:"global-error"},contexts:{error:{filename:t.filename,lineno:t.lineno,colno:t.colno}}})})}const xn={count:(e,t=1,r)=>{try{console.debug(`[Metric] count: ${e} = ${t}`)}catch{}},gauge:(e,t,r)=>{try{console.debug(`[Metric] gauge: ${e} = ${t}`)}catch{}},distribution:(e,t,r)=>{try{console.debug(`[Metric] distribution: ${e} = ${t}`)}catch{}},set:(e,t,r)=>{try{console.debug(`[Metric] set: ${e} = ${t}`)}catch{}},timing:async(e,t,r)=>{const s=performance.now();try{const a=await t(),i=performance.now()-s;return xn.distribution(e,i,{...r,status:"success"}),a}catch(a){const i=performance.now()-s;throw xn.distribution(e,i,{...r,status:"error"}),a}}},Z6=$.createContext(null);function kee({children:e}){const[t,r]=$.useState(null),[s,a]=$.useState(null),[i,o]=$.useState(null),[l,u]=$.useState(!0),d=$.useRef(!1),p=async(w,S=2)=>{for(let j=0;j<S;j++)try{const{data:N,error:C}=await X.from("users").select("id, email, display_name, role, phone, phone_verified, avatar_url, profile_setup_complete").eq("id",w).single();if(!C&&N)return N;const E=(C==null?void 0:C.code)==="PGRST116"||(C==null?void 0:C.status)===406;if(E&&j<S-1){const T=Math.min(150*(j+1),500);await new Promise(I=>setTimeout(I,T));continue}return E||console.error("Error fetching profile:",C),null}catch(N){return console.error("fetchProfile exception:",N),null}return null},f=async()=>{if(t!=null&&t.id){const w=await p(t.id);a(w)}};$.useEffect(()=>{d.current=!1;const w=async()=>{var j;try{if(window.location.hash.includes("access_token"))return;const C=X.auth.getSession(),E=new Promise(A=>setTimeout(()=>A({data:{session:null},error:null}),5e3)),T=await Promise.race([C,E]),I=(j=T==null?void 0:T.data)==null?void 0:j.session;if(d.current)return;if(I){if(o(I),r(I.user??null),I.user){const R=window.location.hash.includes("access_token")?5:2;try{const O=await p(I.user.id,R);a(O)}catch(O){console.error("Failed to fetch profile:",O)}}}else d.current||(o(null),r(null),a(null));u(!1)}catch(N){console.error("Failed to initialize auth:",N),d.current||(window.localStorage.removeItem("rgfl-auth-token"),o(null),r(null),a(null)),u(!1)}},{data:{subscription:S}}=X.auth.onAuthStateChange((j,N)=>{if((j==="SIGNED_IN"||j==="TOKEN_REFRESHED")&&(d.current=!0),j==="SIGNED_IN"&&window.location.hash.includes("access_token")&&window.history.replaceState(null,"",window.location.pathname+window.location.search),o(N),r((N==null?void 0:N.user)??null),N!=null&&N.user){const C=N.user.id,T=j==="SIGNED_IN"||j==="TOKEN_REFRESHED"?5:2;setTimeout(async()=>{try{const I=await p(C,T);a(I)}catch(I){console.error("Failed to fetch profile:",I),a(null)}u(!1)},10)}else a(null),u(!1)});return w(),()=>S.unsubscribe()},[]),$.useEffect(()=>{const w=async()=>{const{data:{session:S}}=await X.auth.getSession();if(S){if(o(S),r(S.user??null),S.user){const j=await p(S.user.id);a(j)}}else o(null),r(null),a(null)};return window.addEventListener("popstate",w),()=>window.removeEventListener("popstate",w)},[]);const m=async(w,S)=>{const j=performance.now();try{const{error:N}=await X.auth.signInWithPassword({email:w,password:S});if(N)throw xn.count("auth_signin",1,{method:"password",status:"error"}),N;xn.count("auth_signin",1,{method:"password",status:"success"}),xn.distribution("auth_signin_time",performance.now()-j,{method:"password"})}catch(N){throw xn.count("auth_signin",1,{method:"password",status:"error"}),N}},x=async(w,S,j,N)=>{const C=performance.now();try{const{data:E,error:T}=await X.auth.signUp({email:w,password:S,options:{data:{display_name:j,phone:N==null?void 0:N.phone,hometown:N==null?void 0:N.hometown,favorite_castaway:N==null?void 0:N.favorite_castaway}}});if(T)throw xn.count("auth_signup",1,{status:"error"}),T;if(E.user&&(N!=null&&N.phone||N!=null&&N.hometown||N!=null&&N.favorite_castaway)){const I={};N!=null&&N.phone&&(I.phone=N.phone),N!=null&&N.hometown&&(I.hometown=N.hometown),N!=null&&N.favorite_castaway&&(I.favorite_castaway=N.favorite_castaway),await X.from("users").update(I).eq("id",E.user.id)}xn.count("auth_signup",1,{status:"success"}),xn.distribution("auth_signup_time",performance.now()-C)}catch(E){throw xn.count("auth_signup",1,{status:"error"}),E}},y=async w=>{try{const{error:S}=await X.auth.signInWithOtp({email:w,options:{emailRedirectTo:`${window.location.origin}/profile/setup`}});if(S)throw xn.count("auth_signin",1,{method:"magic_link",status:"error"}),S;xn.count("auth_signin",1,{method:"magic_link",status:"success"})}catch(S){throw xn.count("auth_signin",1,{method:"magic_link",status:"error"}),S}},g=async()=>{try{const{error:w}=await X.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/profile/setup`}});if(w)throw xn.count("auth_signin",1,{method:"google",status:"error"}),w;xn.count("auth_signin",1,{method:"google",status:"initiated"})}catch(w){throw xn.count("auth_signin",1,{method:"google",status:"error"}),w}},b=async()=>{r(null),a(null),o(null);const{error:w}=await X.auth.signOut();w?(console.error("Supabase signOut error:",w),xn.count("auth_signout",1,{status:"error"})):xn.count("auth_signout",1,{status:"success"})},_=(s==null?void 0:s.role)==="admin";return n.jsx(Z6.Provider,{value:{user:t,profile:s,session:i,loading:l,isAdmin:_,signIn:m,signUp:x,signInWithMagicLink:y,signInWithGoogle:g,signOut:b,refreshProfile:f},children:e})}function Et(){const e=$.useContext(Z6);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e}/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eee=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Cee=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,s)=>s?s.toUpperCase():r.toLowerCase()),DE=e=>{const t=Cee(e);return t.charAt(0).toUpperCase()+t.slice(1)},eP=(...e)=>e.filter((t,r,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===r).join(" ").trim(),Tee=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ree={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aee=$.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:s,className:a="",children:i,iconNode:o,...l},u)=>$.createElement("svg",{ref:u,...Ree,width:t,height:t,stroke:e,strokeWidth:s?Number(r)*24/Number(t):r,className:eP("lucide",a),...!i&&!Tee(l)&&{"aria-hidden":"true"},...l},[...o.map(([d,p])=>$.createElement(d,p)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=(e,t)=>{const r=$.forwardRef(({className:s,...a},i)=>$.createElement(Aee,{ref:i,iconNode:t,className:eP(`lucide-${Eee(DE(e))}`,`lucide-${e}`,s),...a}));return r.displayName=DE(e),r};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pee=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Di=ge("activity",Pee);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oee=[["path",{d:"M19 9V6a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v3",key:"irtipd"}],["path",{d:"M3 16a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-5a2 2 0 0 0-4 0v1.5a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5V11a2 2 0 0 0-4 0z",key:"1qyhux"}],["path",{d:"M5 18v2",key:"ppbyun"}],["path",{d:"M19 18v2",key:"gy7782"}]],Iee=ge("armchair",Oee);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lee=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],$E=ge("archive",Lee);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mee=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],ht=ge("arrow-left",Mee);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dee=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],$ee=ge("arrow-right-left",Dee);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qee=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Hn=ge("arrow-right",qee);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fee=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],tP=ge("award",Fee);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uee=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Ys=ge("bell",Uee);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bee=[["path",{d:"M16 7h.01",key:"1kdx03"}],["path",{d:"M3.4 18H12a8 8 0 0 0 8-8V7a4 4 0 0 0-7.28-2.3L2 20",key:"oj1oa8"}],["path",{d:"m20 7 2 .5-2 .5",key:"12nv4d"}],["path",{d:"M10 18v3",key:"1yea0a"}],["path",{d:"M14 17.75V21",key:"1pymcb"}],["path",{d:"M7 18a6 6 0 0 0 3.84-10.61",key:"1npnn0"}]],Hee=ge("bird",Bee);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kee=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],$c=ge("book-open",Kee);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zee=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],nP=ge("brain",zee);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wee=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Gee=ge("briefcase",Wee);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vee=[["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z",key:"uouzyp"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M21 21a4 4 0 0 0-3.81-4",key:"1b0z45"}],["path",{d:"M21 5a4 4 0 0 1-3.55 3.97",key:"5cxbf6"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M3 21a4 4 0 0 1 3.81-4",key:"1fjd4g"}],["path",{d:"M3 5a4 4 0 0 0 3.55 3.97",key:"1d7oge"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M9 7.13V6a3 3 0 1 1 6 0v1.13",key:"1vgav8"}]],Qee=ge("bug",Vee);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yee=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],Jee=ge("calculator",Yee);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xee=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],wn=ge("calendar",Xee);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zee=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],ete=ge("camera",Zee);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tte=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Rd=ge("chart-column",tte);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nte=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ot=ge("check",nte);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rte=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],en=ge("chevron-down",rte);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ste=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],mw=ge("chevron-left",ste);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ate=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],dr=ge("chevron-right",ate);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ite=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],fs=ge("chevron-up",ite);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ote=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],yt=ge("circle-alert",ote);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lte=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],xt=ge("circle-check-big",lte);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cte=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],dj=ge("circle-check",cte);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ute=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],qc=ge("circle-question-mark",ute);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dte=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{x:"9",y:"9",width:"6",height:"6",rx:"1",key:"1ssd4o"}]],hte=ge("circle-stop",dte);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fte=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Tr=ge("circle-x",fte);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mte=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],pte=ge("circle",mte);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xte=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Nt=ge("clock",xte);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gte=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],yte=ge("cloud",gte);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bte=[["path",{d:"M16.17 7.83 2 22",key:"t58vo8"}],["path",{d:"M4.02 12a2.827 2.827 0 1 1 3.81-4.17A2.827 2.827 0 1 1 12 4.02a2.827 2.827 0 1 1 4.17 3.81A2.827 2.827 0 1 1 19.98 12a2.827 2.827 0 1 1-3.81 4.17A2.827 2.827 0 1 1 12 19.98a2.827 2.827 0 1 1-4.17-3.81A1 1 0 1 1 4 12",key:"17k36q"}],["path",{d:"m7.83 7.83 8.34 8.34",key:"1d7sxk"}]],vte=ge("clover",bte);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wte=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],_te=ge("code",wte);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jte=[["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["circle",{cx:"12",cy:"12",r:"8",key:"46899m"}]],rP=ge("cog",jte);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nte=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],lx=ge("copy",Nte);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ste=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],hp=ge("credit-card",Ste);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kte=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],er=ge("crown",kte);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ete=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],sP=ge("database",Ete);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cte=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Zo=ge("dollar-sign",Cte);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tte=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],Rte=ge("ellipsis-vertical",Tte);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ate=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Ad=ge("external-link",Ate);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pte=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],uh=ge("eye-off",Pte);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ote=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ha=ge("eye",Ote);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ite=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],aP=ge("facebook",Ite);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lte=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Fc=ge("file-text",Lte);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mte=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],Rr=ge("flame",Mte);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dte=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],$te=ge("gauge",Dte);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qte=[["path",{d:"M9 10h.01",key:"qbtxuw"}],["path",{d:"M15 10h.01",key:"1qmjsl"}],["path",{d:"M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z",key:"uwwb07"}]],Fte=ge("ghost",qte);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ute=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],us=ge("globe",Ute);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bte=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],iP=ge("grid-3x3",Bte);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hte=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],cx=ge("grip-vertical",Hte);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kte=[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]],zte=ge("handshake",Kte);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wte=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],ux=ge("heart",Wte);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gte=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],Pd=ge("history",Gte);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vte=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],oP=ge("house",Vte);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qte=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],dx=ge("info",Qte);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yte=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],Jte=ge("instagram",Yte);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xte=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Zte=ge("layout-dashboard",Xte);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ene=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],tne=ge("layout-grid",ene);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nne=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],pw=ge("lightbulb",nne);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rne=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],sne=ge("link-2",rne);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ane=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],ine=ge("link",ane);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const one=[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]],lne=ge("linkedin",one);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cne=[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}]],une=ge("list-checks",cne);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dne=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],hne=ge("list",dne);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fne=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],be=ge("loader-circle",fne);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mne=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],mr=ge("lock",mne);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pne=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],xne=ge("log-in",pne);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gne=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],yne=ge("log-out",gne);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bne=[["path",{d:"M21.2 8.4c.5.38.8.97.8 1.6v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V10a2 2 0 0 1 .8-1.6l8-6a2 2 0 0 1 2.4 0l8 6Z",key:"1jhwl8"}],["path",{d:"m22 10-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 10",key:"1qfld7"}]],vne=ge("mail-open",bne);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wne=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],sn=ge("mail",wne);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _ne=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],hj=ge("map-pin",_ne);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jne=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],Er=ge("medal",jne);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nne=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],Od=ge("megaphone",Nne);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sne=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],xw=ge("menu",Sne);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kne=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],Id=ge("message-circle",kne);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ene=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],el=ge("message-square",Ene);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cne=[["path",{d:"M5 12h14",key:"1ays0h"}]],hx=ge("minus",Cne);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tne=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],lP=ge("pause",Tne);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rne=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],fp=ge("pen",Rne);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ane=[["path",{d:"m10 10-6.157 6.162a2 2 0 0 0-.5.833l-1.322 4.36a.5.5 0 0 0 .622.624l4.358-1.323a2 2 0 0 0 .83-.5L14 13.982",key:"bjo8r8"}],["path",{d:"m12.829 7.172 4.359-4.346a1 1 0 1 1 3.986 3.986l-4.353 4.353",key:"16h5ne"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Pne=ge("pencil-off",Ane);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const One=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],ru=ge("pencil",One);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ine=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],fj=ge("phone",Ine);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lne=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],fx=ge("play",Lne);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mne=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],tr=ge("plus",Mne);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dne=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],qE=ge("qr-code",Dne);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $ne=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],an=ge("refresh-cw",$ne);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qne=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],mj=ge("rotate-ccw",qne);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fne=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Ar=ge("save",Fne);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Une=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Ka=ge("search",Une);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bne=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Jn=ge("send",Bne);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hne=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],pj=ge("server",Hne);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kne=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],dh=ge("settings",Kne);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zne=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],mx=ge("share-2",zne);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wne=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],FE=ge("shield-alert",Wne);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gne=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],UE=ge("shield-check",Gne);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vne=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Aa=ge("shield",Vne);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qne=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],dc=ge("shuffle",Qne);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yne=[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]],Jne=ge("skip-forward",Yne);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xne=[["path",{d:"m12.5 17-.5-1-.5 1h1z",key:"3me087"}],["path",{d:"M15 22a1 1 0 0 0 1-1v-1a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20v1a1 1 0 0 0 1 1z",key:"1o5pge"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}]],gw=ge("skull",Xne);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zne=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],Uc=ge("smartphone",Zne);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ere=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],su=ge("sparkles",ere);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tre=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],tl=ge("square-pen",tre);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nre=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],zn=ge("star",nre);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rre=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],kn=ge("target",rre);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sre=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],are=ge("timer",sre);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ire=[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],cP=ge("toggle-left",ire);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ore=[["circle",{cx:"15",cy:"12",r:"3",key:"1afu0r"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],uP=ge("toggle-right",ore);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lre=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ms=ge("trash-2",lre);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cre=[["path",{d:"M13 8c0-2.76-2.46-5-5.5-5S2 5.24 2 8h2l1-1 1 1h4",key:"foxbe7"}],["path",{d:"M13 7.14A5.82 5.82 0 0 1 16.5 6c3.04 0 5.5 2.24 5.5 5h-3l-1-1-1 1h-3",key:"18arnh"}],["path",{d:"M5.89 9.71c-2.15 2.15-2.3 5.47-.35 7.43l4.24-4.25.7-.7.71-.71 2.12-2.12c-1.95-1.96-5.27-1.8-7.42.35",key:"ywahnh"}],["path",{d:"M11 15.5c.5 2.5-.17 4.5-1 6.5h4c2-5.5-.5-12-1-14",key:"ft0feo"}]],ure=ge("tree-palm",cre);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dre=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],Hi=ge("trending-down",dre);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hre=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],fr=ge("trending-up",hre);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fre=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Tt=ge("triangle-alert",fre);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mre=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],ot=ge("trophy",mre);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pre=[["path",{d:"m17 2-5 5-5-5",key:"16satq"}],["rect",{width:"20",height:"15",x:"2",y:"7",rx:"2",key:"1e6viu"}]],yw=ge("tv",pre);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xre=[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]],px=ge("twitter",xre);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gre=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],dP=ge("type",gre);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yre=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],bre=ge("user-minus",yre);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vre=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],hh=ge("user",vre);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wre=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Ke=ge("users",wre);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _re=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],It=ge("x",_re);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jre=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],ds=ge("zap",jre),Nre="modulepreload",Sre=function(e){return"/"+e},BE={},kre=function(t,r,s){let a=Promise.resolve();if(r&&r.length>0){let o=function(d){return Promise.all(d.map(p=>Promise.resolve(p).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),u=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));a=o(r.map(d=>{if(d=Sre(d),d in BE)return;BE[d]=!0;const p=d.endsWith(".css"),f=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${f}`))return;const m=document.createElement("link");if(m.rel=p?"stylesheet":Nre,p||(m.as="script"),m.crossOrigin="",m.href=d,u&&m.setAttribute("nonce",u),document.head.appendChild(m),p)return new Promise((x,y)=>{m.addEventListener("load",x),m.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${d}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},HE=e=>{let t;const r=new Set,s=(d,p)=>{const f=typeof d=="function"?d(t):d;if(!Object.is(f,t)){const m=t;t=p??(typeof f!="object"||f===null)?f:Object.assign({},t,f),r.forEach(x=>x(t,m))}},a=()=>t,l={setState:s,getState:a,getInitialState:()=>u,subscribe:d=>(r.add(d),()=>r.delete(d))},u=t=e(s,a,l);return l},Ere=(e=>e?HE(e):HE),Cre=e=>e;function Tre(e,t=Cre){const r=Sf.useSyncExternalStore(e.subscribe,Sf.useCallback(()=>t(e.getState()),[e,t]),Sf.useCallback(()=>t(e.getInitialState()),[e,t]));return Sf.useDebugValue(r),r}const Rre=e=>{const t=Ere(e),r=s=>Tre(t,s);return Object.assign(r,t),r},Are=(e=>Rre);function Pre(e,t){let r;try{r=e()}catch{return}return{getItem:a=>{var i;const o=u=>u===null?null:JSON.parse(u,void 0),l=(i=r.getItem(a))!=null?i:null;return l instanceof Promise?l.then(o):o(l)},setItem:(a,i)=>r.setItem(a,JSON.stringify(i,void 0)),removeItem:a=>r.removeItem(a)}}const bw=e=>t=>{try{const r=e(t);return r instanceof Promise?r:{then(s){return bw(s)(r)},catch(s){return this}}}catch(r){return{then(s){return this},catch(s){return bw(s)(r)}}}},Ore=(e,t)=>(r,s,a)=>{let i={storage:Pre(()=>localStorage),partialize:g=>g,version:0,merge:(g,b)=>({...b,...g}),...t},o=!1;const l=new Set,u=new Set;let d=i.storage;if(!d)return e((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),r(...g)},s,a);const p=()=>{const g=i.partialize({...s()});return d.setItem(i.name,{state:g,version:i.version})},f=a.setState;a.setState=(g,b)=>(f(g,b),p());const m=e((...g)=>(r(...g),p()),s,a);a.getInitialState=()=>m;let x;const y=()=>{var g,b;if(!d)return;o=!1,l.forEach(w=>{var S;return w((S=s())!=null?S:m)});const _=((b=i.onRehydrateStorage)==null?void 0:b.call(i,(g=s())!=null?g:m))||void 0;return bw(d.getItem.bind(d))(i.name).then(w=>{if(w)if(typeof w.version=="number"&&w.version!==i.version){if(i.migrate){const S=i.migrate(w.state,w.version);return S instanceof Promise?S.then(j=>[!0,j]):[!0,S]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,w.state];return[!1,void 0]}).then(w=>{var S;const[j,N]=w;if(x=i.merge(N,(S=s())!=null?S:m),r(x,!0),j)return p()}).then(()=>{_==null||_(x,void 0),x=s(),o=!0,u.forEach(w=>w(x))}).catch(w=>{_==null||_(void 0,w)})};return a.persist={setOptions:g=>{i={...i,...g},g.storage&&(d=g.storage)},clearStorage:()=>{d==null||d.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>y(),hasHydrated:()=>o,onHydrate:g=>(l.add(g),()=>{l.delete(g)}),onFinishHydration:g=>(u.add(g),()=>{u.delete(g)})},i.skipHydration||y(),x||m},Ire=Ore,ol=Are()(Ire(e=>({isEditMode:!1,toggleEditMode:()=>e(t=>({isEditMode:!t.isEditMode})),setEditMode:t=>e({isEditMode:t})}),{name:"admin-edit-mode"})),Lre=$.lazy(()=>kre(()=>import("./RichTextEditor-BeDSEBvu.js"),[]).then(e=>({default:e.RichTextEditor}))),Mre="https://rgfl-api-production.up.railway.app";async function Dre(e,t){var i;const s=(i=(await X.auth.getSession()).data.session)==null?void 0:i.access_token;if(!s)throw new Error("Not authenticated");const a=await fetch(`${Mre}/api/site-copy/${encodeURIComponent(e)}`,{method:"PUT",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify({content:t})});if(!a.ok){const o=await a.json().catch(()=>({}));throw new Error(o.error||"Failed to update")}return a.json()}function ne({copyKey:e,children:t,as:r="span",className:s="",multiline:a=!1,richText:i=!1}){const{isAdmin:o}=Et(),{isEditMode:l}=ol(),[u,d]=$.useState(!1),[p,f]=$.useState(t),m=$.useRef(null),x=at(),[y,g]=$.useState(null),b=ke({mutationFn:j=>Dre(e,j),onSuccess:()=>{d(!1),g(null),x.invalidateQueries({queryKey:["site-copy"]})},onError:j=>{g(j instanceof Error?j.message:"Failed to save")}});$.useEffect(()=>{u&&m.current&&!i&&(m.current.focus(),m.current.select())},[u,i]),$.useEffect(()=>{u||f(t)},[t,u]);const _=()=>{p!==t?(g(null),b.mutate(p)):d(!1)},w=()=>{f(t),d(!1),g(null)},S=j=>{j.key==="Enter"&&!a&&!i&&(j.preventDefault(),_()),j.key==="Escape"&&w()};return!o||!l?i?n.jsx(r,{className:s,dangerouslySetInnerHTML:{__html:t}}):n.jsx(r,{className:s,children:t}):u&&i?n.jsxs(n.Fragment,{children:[n.jsx(r,{className:`${s} border-b-2 border-dashed border-burgundy-300 opacity-50`,dangerouslySetInnerHTML:{__html:t}}),n.jsx("div",{className:"fixed inset-0 z-[200] bg-black/50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-hidden",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-cream-200 bg-cream-50",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(dP,{className:"h-5 w-5 text-burgundy-500"}),n.jsx("h3",{className:"font-semibold text-neutral-800",children:"Edit Rich Text"})]}),n.jsx("span",{className:"text-sm text-neutral-400 font-mono",children:e})]}),n.jsx("div",{className:"p-4 max-h-[60vh] overflow-y-auto",children:n.jsx($.Suspense,{fallback:n.jsx("div",{className:"flex items-center justify-center h-32",children:n.jsx(be,{className:"h-6 w-6 animate-spin text-burgundy-500"})}),children:n.jsx(Lre,{value:p,onChange:f,placeholder:"Enter your content..."})})}),n.jsxs("div",{className:"flex items-center justify-between p-4 border-t border-cream-200 bg-cream-50",children:[n.jsx("div",{children:y&&n.jsx("span",{className:"text-red-500 text-sm",children:y})}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:w,disabled:b.isPending,className:"px-4 py-2 text-neutral-600 hover:text-neutral-800 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:_,disabled:b.isPending,className:"px-4 py-2 bg-burgundy-500 hover:bg-burgundy-600 text-white rounded-lg transition-colors flex items-center gap-2",children:b.isPending?n.jsxs(n.Fragment,{children:[n.jsx(be,{className:"h-4 w-4 animate-spin"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Ot,{className:"h-4 w-4"}),"Save Changes"]})})]})]})]})})]}):u?n.jsxs("div",{className:"relative inline-flex items-center gap-2",children:[a?n.jsx("textarea",{ref:m,value:p,onChange:j=>f(j.target.value),onKeyDown:S,className:"bg-white border-2 border-burgundy-400 rounded-lg px-3 py-2 text-neutral-800 min-w-[200px] focus:outline-none focus:ring-2 focus:ring-burgundy-500",rows:3}):n.jsx("input",{ref:m,type:"text",value:p,onChange:j=>f(j.target.value),onKeyDown:S,className:"bg-white border-2 border-burgundy-400 rounded-lg px-3 py-1 text-neutral-800 min-w-[200px] focus:outline-none focus:ring-2 focus:ring-burgundy-500"}),n.jsx("button",{onClick:_,disabled:b.isPending,className:"p-1.5 bg-green-500 hover:bg-green-600 text-white rounded-lg transition-colors",children:b.isPending?n.jsx(be,{className:"h-4 w-4 animate-spin"}):n.jsx(Ot,{className:"h-4 w-4"})}),n.jsx("button",{onClick:w,disabled:b.isPending,className:"p-1.5 bg-neutral-400 hover:bg-neutral-500 text-white rounded-lg transition-colors","aria-label":"Cancel",children:n.jsx(It,{className:"h-4 w-4"})}),y&&n.jsx("span",{className:"text-red-500 text-sm ml-2",children:y})]}):n.jsxs("span",{className:"group relative inline-flex items-center gap-1",children:[i?n.jsx(r,{className:`${s} border-b-2 border-dashed border-burgundy-300`,dangerouslySetInnerHTML:{__html:t}}):n.jsx(r,{className:`${s} border-b-2 border-dashed border-burgundy-300`,children:t}),n.jsx("button",{onClick:()=>d(!0),className:"p-1 bg-burgundy-500 hover:bg-burgundy-600 text-white rounded transition-all",title:`Edit: ${e}`,children:n.jsx(ru,{className:"h-3 w-3"})})]})}const $re="https://rgfl-api-production.up.railway.app";async function qre(){const e=await fetch(`${$re}/api/site-copy`);if(!e.ok)throw new Error("Failed to fetch site copy");return(await e.json()).data||{}}function Kt(){const{data:e,isLoading:t,error:r,refetch:s}=ie({queryKey:["site-copy"],queryFn:qre,staleTime:0,gcTime:3e5,refetchOnWindowFocus:!0,refetchOnMount:"always"});return{getCopy:(i,o)=>e&&e[i]||o,isLoading:t,error:r,data:e,refetch:s}}function _e(){var E,T;const e=Gr(),{user:t,signOut:r,loading:s}=Et(),{getCopy:a}=Kt(),[i,o]=$.useState(!1),[l,u]=$.useState(!1),[d,p]=$.useState(!1),[f,m]=$.useState(!1),x=$.useRef(null),y=$.useRef(null),g=$.useRef(null),b=$.useRef(null);$.useEffect(()=>{o(!1)},[e.pathname]),$.useEffect(()=>{const I=A=>{x.current&&!x.current.contains(A.target)&&o(!1),y.current&&!y.current.contains(A.target)&&u(!1),g.current&&!g.current.contains(A.target)&&p(!1),b.current&&!b.current.contains(A.target)&&m(!1)};return(i||l||d||f)&&document.addEventListener("mousedown",I),()=>document.removeEventListener("mousedown",I)},[i,l,d,f]);const _=async()=>{try{o(!1),await r()}catch(I){console.error("Sign out failed:",I),window.location.href="/"}},{data:w}=ie({queryKey:["profile",t==null?void 0:t.id],queryFn:async()=>{if(!(t!=null&&t.id))return null;const{data:I,error:A}=await X.from("users").select("id, display_name, role, avatar_url").eq("id",t.id).single();if(A)throw A;return I},enabled:!!(t!=null&&t.id)}),S=(w==null?void 0:w.display_name)||((E=t==null?void 0:t.user_metadata)==null?void 0:E.display_name)||((T=t==null?void 0:t.email)==null?void 0:T.split("@")[0])||"",j=I=>{if(!I)return"";const A=I.trim().split(" ").filter(Boolean);return A.length===0?"":A.length===1?A[0].charAt(0).toUpperCase():A[0].charAt(0).toUpperCase()+A[A.length-1].charAt(0).toUpperCase()},N=I=>I==="/"?e.pathname==="/":e.pathname.startsWith(I),C=(w==null?void 0:w.role)==="admin";return t?n.jsx(n.Fragment,{children:n.jsx("nav",{className:`bg-white border-b ${C?"border-orange-300":"border-neutral-200"} shadow-sm sticky top-0 z-50`,children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsxs("div",{className:"flex items-center justify-between h-16",children:[n.jsx(se,{to:"/dashboard",className:"flex-shrink-0",children:n.jsx("img",{src:"/logo.png",alt:"RGFL",className:"h-10 w-auto"})}),n.jsxs("div",{className:"hidden lg:flex items-center gap-1",children:[n.jsx(se,{to:"/dashboard",className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${N("/dashboard")?"text-burgundy-600 bg-burgundy-50":"text-neutral-600 hover:text-burgundy-600 hover:bg-neutral-50"}`,children:n.jsx(ne,{copyKey:"nav.dashboard",as:"span",className:"",children:a("nav.dashboard","Dashboard")})}),n.jsxs("div",{className:"relative",ref:g,children:[n.jsxs("button",{onClick:()=>p(!d),className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors flex items-center gap-1 ${N("/leagues")||N("/my-leagues")?"text-burgundy-600 bg-burgundy-50":"text-neutral-600 hover:text-burgundy-600 hover:bg-neutral-50"}`,children:[n.jsx(ne,{copyKey:"nav.leagues",as:"span",className:"",children:a("nav.leagues","Leagues")}),n.jsx(en,{className:`h-4 w-4 transition-transform ${d?"rotate-180":""}`})]}),d&&n.jsxs("div",{className:"absolute top-full left-0 mt-1 bg-white rounded-xl shadow-lg border border-neutral-200 min-w-[180px] z-50 py-1",children:[n.jsx(se,{to:"/leagues",onClick:()=>p(!1),className:`block px-4 py-2 text-sm hover:bg-neutral-50 ${N("/leagues")&&!N("/draft/rankings")?"text-burgundy-600 bg-burgundy-50":"text-neutral-600"}`,children:n.jsx(ne,{copyKey:"nav.all_leagues",as:"span",className:"",children:a("nav.all_leagues","All Leagues")})}),n.jsx(se,{to:"/draft/rankings",onClick:()=>p(!1),className:`block px-4 py-2 text-sm hover:bg-neutral-50 ${N("/draft/rankings")?"text-burgundy-600 bg-burgundy-50":"text-neutral-600"}`,children:n.jsx(ne,{copyKey:"nav.draft_rankings",as:"span",className:"",children:a("nav.draft_rankings","Draft Rankings")})})]})]}),n.jsx(se,{to:"/castaways",className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${N("/castaways")?"text-burgundy-600 bg-burgundy-50":"text-neutral-600 hover:text-burgundy-600 hover:bg-neutral-50"}`,children:n.jsx(ne,{copyKey:"nav.castaways",as:"span",className:"",children:a("nav.castaways","Castaways")})}),n.jsx(se,{to:"/leaderboard",className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${N("/leaderboard")?"text-burgundy-600 bg-burgundy-50":"text-neutral-600 hover:text-burgundy-600 hover:bg-neutral-50"}`,children:n.jsx(ne,{copyKey:"nav.leaderboard",as:"span",className:"",children:a("nav.leaderboard","Leaderboard")})}),n.jsxs("div",{className:"relative",ref:y,children:[n.jsxs("button",{onClick:()=>u(!l),className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors flex items-center gap-1 ${N("/how-to-play")||N("/scoring")||N("/timeline")?"text-burgundy-600 bg-burgundy-50":"text-neutral-600 hover:text-burgundy-600 hover:bg-neutral-50"}`,children:[n.jsx(ne,{copyKey:"nav.how_to_play",as:"span",className:"",children:a("nav.how_to_play","How to Play")}),n.jsx(en,{className:`h-4 w-4 transition-transform ${l?"rotate-180":""}`})]}),l&&n.jsxs("div",{className:"absolute top-full left-0 mt-1 bg-white rounded-xl shadow-lg border border-neutral-200 min-w-[180px] z-50 py-1",children:[n.jsx(se,{to:"/how-to-play",onClick:()=>u(!1),className:`block px-4 py-2 text-sm hover:bg-neutral-50 ${N("/how-to-play")&&!N("/scoring")&&!N("/timeline")?"text-burgundy-600 bg-burgundy-50":"text-neutral-600"}`,children:n.jsx(ne,{copyKey:"nav.how_to_play_overview",as:"span",className:"",children:a("nav.how_to_play_overview","How to Play")})}),n.jsx(se,{to:"/scoring-rules",onClick:()=>u(!1),className:`block px-4 py-2 text-sm hover:bg-neutral-50 ${N("/scoring")||N("/scoring-rules")?"text-burgundy-600 bg-burgundy-50":"text-neutral-600"}`,children:n.jsx(ne,{copyKey:"nav.scoring_rules",as:"span",className:"",children:a("nav.scoring_rules","Scoring Rules")})}),n.jsx(se,{to:"/sms-commands",onClick:()=>u(!1),className:`block px-4 py-2 text-sm hover:bg-neutral-50 ${N("/sms-commands")?"text-burgundy-600 bg-burgundy-50":"text-neutral-600"}`,children:n.jsx(ne,{copyKey:"nav.sms_commands",as:"span",className:"",children:a("nav.sms_commands","SMS Commands")})}),n.jsx(se,{to:"/timeline",onClick:()=>u(!1),className:`block px-4 py-2 text-sm hover:bg-neutral-50 ${N("/timeline")?"text-burgundy-600 bg-burgundy-50":"text-neutral-600"}`,children:n.jsx(ne,{copyKey:"nav.weekly_timeline",as:"span",className:"",children:a("nav.weekly_timeline","Weekly Timeline")})})]})]}),n.jsxs("div",{className:"relative",ref:b,children:[n.jsxs("button",{onClick:()=>m(!f),className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors flex items-center gap-1 ${N("/contact")||N("/faq")?"text-burgundy-600 bg-burgundy-50":"text-neutral-600 hover:text-burgundy-600 hover:bg-neutral-50"}`,children:[n.jsx(ne,{copyKey:"nav.contact",as:"span",className:"",children:a("nav.contact","Contact")}),n.jsx(en,{className:`h-4 w-4 transition-transform ${f?"rotate-180":""}`})]}),f&&n.jsxs("div",{className:"absolute top-full left-0 mt-1 bg-white rounded-xl shadow-lg border border-neutral-200 min-w-[180px] z-50 py-1",children:[n.jsxs(se,{to:"/contact",onClick:()=>m(!1),className:`flex items-center gap-2 px-4 py-2 text-sm hover:bg-neutral-50 ${N("/contact")&&!N("/faq")?"text-burgundy-600 bg-burgundy-50":"text-neutral-600"}`,children:[n.jsx(sn,{className:"h-4 w-4"}),n.jsx(ne,{copyKey:"nav.contact_us",as:"span",className:"",children:a("nav.contact_us","Contact Us")})]}),n.jsxs(se,{to:"/faq",onClick:()=>m(!1),className:`flex items-center gap-2 px-4 py-2 text-sm hover:bg-neutral-50 ${N("/faq")?"text-burgundy-600 bg-burgundy-50":"text-neutral-600"}`,children:[n.jsx(qc,{className:"h-4 w-4"}),n.jsx(ne,{copyKey:"nav.faq",as:"span",className:"",children:a("nav.faq","FAQ")})]})]})]}),n.jsxs(se,{to:"/trivia",className:"trivia-pulse ml-2 px-4 py-2 bg-gradient-to-r from-teal-500 to-teal-600 text-white font-semibold rounded-full text-sm flex items-center gap-2 hover:from-teal-600 hover:to-teal-700 transition-all shadow-md",children:[n.jsx(pw,{className:"w-4 h-4"}),n.jsx(ne,{copyKey:"nav.trivia",as:"span",className:"",children:a("nav.trivia","Trivia")}),n.jsx("span",{className:"bg-white/25 px-1.5 py-0.5 rounded text-[10px] font-bold",children:n.jsx(ne,{copyKey:"nav.trivia_badge",as:"span",className:"",children:a("nav.trivia_badge","NEW")})})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>o(!i),className:"lg:hidden p-2 text-neutral-600 hover:text-burgundy-600","aria-label":i?"Close menu":"Open menu","aria-expanded":i,children:i?n.jsx(It,{className:"h-6 w-6"}):n.jsx(xw,{className:"h-6 w-6"})}),C&&n.jsxs(se,{to:"/admin",className:"hidden sm:flex items-center gap-1 text-xs font-medium px-3 py-1.5 rounded-lg text-white bg-orange-500 hover:bg-orange-600 transition-colors",children:[n.jsx(Aa,{className:"h-4 w-4"}),"Admin Panel"]}),n.jsxs("div",{className:"relative group hidden md:flex items-center",children:[n.jsxs("button",{className:"flex items-center gap-2 p-1 pr-2 text-neutral-600 hover:bg-neutral-50 rounded-full transition-all","aria-haspopup":"true",children:[n.jsx("div",{className:"w-9 h-9 bg-burgundy-500 rounded-full flex items-center justify-center text-white text-sm font-bold overflow-hidden",children:w!=null&&w.avatar_url?n.jsx("img",{src:w.avatar_url,alt:S,className:"w-full h-full object-cover"}):j(S)||"?"}),n.jsx("span",{className:"text-neutral-700 text-sm font-medium max-w-[100px] truncate",children:(S==null?void 0:S.split(" ")[0])||"Player"}),n.jsx(en,{className:"w-4 h-4 text-neutral-400"})]}),n.jsxs("div",{className:"absolute right-0 top-full mt-2 w-56 bg-white rounded-xl shadow-lg border border-neutral-200 opacity-0 invisible group-hover:opacity-100 group-hover:visible group-focus-within:opacity-100 group-focus-within:visible transition-all",role:"menu",children:[n.jsxs("div",{className:"p-4 border-b border-neutral-100",children:[n.jsx("p",{className:"font-semibold text-neutral-800",children:S||"Survivor"}),n.jsx("p",{className:"text-sm text-neutral-400",children:n.jsx(ne,{copyKey:"nav.user_role",as:"span",className:"",children:a("nav.user_role","Fantasy Player")})})]}),n.jsxs("div",{className:"p-2",children:[n.jsx(se,{to:"/profile",className:"block px-3 py-2 text-sm text-neutral-600 hover:bg-neutral-50 rounded-lg",role:"menuitem",children:n.jsx(ne,{copyKey:"nav.profile_settings",as:"span",className:"",children:a("nav.profile_settings","Profile Settings")})}),n.jsx(se,{to:"/profile/payments",className:"block px-3 py-2 text-sm text-neutral-600 hover:bg-neutral-50 rounded-lg",role:"menuitem",children:n.jsx(ne,{copyKey:"nav.payment_history",as:"span",className:"",children:a("nav.payment_history","Payment History")})}),n.jsxs("div",{className:"px-3 py-2 text-sm text-neutral-400 flex items-center justify-between rounded-lg",children:[n.jsx("span",{children:n.jsx(ne,{copyKey:"nav.sms_notifications",as:"span",className:"",children:a("nav.sms_notifications","SMS Notifications")})}),n.jsx("span",{className:"text-xs bg-neutral-100 text-neutral-500 px-2 py-0.5 rounded-full",children:n.jsx(ne,{copyKey:"nav.coming_soon",as:"span",className:"",children:a("nav.coming_soon","Coming Soon")})})]}),n.jsx("hr",{className:"my-2 border-neutral-100"}),n.jsx("button",{onClick:_,className:"w-full text-left px-3 py-2 text-sm text-red-600 hover:bg-red-50 rounded-lg",role:"menuitem",children:n.jsx(ne,{copyKey:"nav.sign_out",as:"span",className:"",children:a("nav.sign_out","Sign out")})})]})]})]})]})]}),i&&n.jsxs("div",{ref:x,className:"lg:hidden border-t border-burgundy-100 py-2 bg-white",children:[n.jsxs("div",{className:"px-4 py-3 border-b border-burgundy-100",children:[n.jsx("p",{className:"font-semibold text-neutral-800",children:S||"Survivor"}),n.jsx("p",{className:"text-sm text-neutral-400",children:n.jsx(ne,{copyKey:"nav.user_role",as:"span",className:"",children:a("nav.user_role","Fantasy Player")})})]}),n.jsxs(se,{to:"/trivia",onClick:()=>o(!1),className:"mx-4 mt-3 mb-2 px-4 py-3 bg-gradient-to-r from-teal-500 to-teal-600 text-white font-bold rounded-lg flex items-center justify-center gap-2 uppercase tracking-wide",children:[n.jsx(pw,{className:"w-5 h-5"}),n.jsx(ne,{copyKey:"nav.play_trivia",as:"span",className:"",children:a("nav.play_trivia","Play Trivia")}),n.jsx("span",{className:"bg-white/20 px-2 py-0.5 rounded text-xs",children:n.jsx(ne,{copyKey:"nav.trivia_badge",as:"span",className:"",children:a("nav.trivia_badge","NEW")})})]}),n.jsx(se,{to:"/dashboard",className:`block px-4 py-3 text-sm font-semibold uppercase tracking-wide ${N("/dashboard")?"text-burgundy-600 bg-burgundy-50":"text-neutral-600"}`,children:n.jsx(ne,{copyKey:"nav.dashboard",as:"span",className:"",children:a("nav.dashboard","Dashboard")})}),n.jsxs("div",{children:[n.jsx("div",{className:"px-4 py-2 text-sm font-semibold text-neutral-800 uppercase tracking-wide",children:n.jsx(ne,{copyKey:"nav.leagues",as:"span",className:"",children:a("nav.leagues","Leagues")})}),n.jsx(se,{to:"/leagues",className:`block px-8 py-2 text-sm ${N("/leagues")&&!N("/draft/rankings")?"text-burgundy-600 bg-burgundy-50":"text-neutral-600"}`,children:n.jsx(ne,{copyKey:"nav.all_leagues",as:"span",className:"",children:a("nav.all_leagues","All Leagues")})}),n.jsx(se,{to:"/draft/rankings",className:`block px-8 py-2 text-sm ${N("/draft/rankings")?"text-burgundy-600 bg-burgundy-50":"text-neutral-600"}`,children:n.jsx(ne,{copyKey:"nav.draft_rankings",as:"span",className:"",children:a("nav.draft_rankings","Draft Rankings")})})]}),n.jsx(se,{to:"/castaways",className:`block px-4 py-3 text-sm font-semibold uppercase tracking-wide ${N("/castaways")?"text-burgundy-600 bg-burgundy-50":"text-neutral-600"}`,children:n.jsx(ne,{copyKey:"nav.castaways",as:"span",className:"",children:a("nav.castaways","Castaways")})}),n.jsx(se,{to:"/leaderboard",className:`block px-4 py-3 text-sm font-semibold uppercase tracking-wide ${N("/leaderboard")?"text-burgundy-600 bg-burgundy-50":"text-neutral-600"}`,children:n.jsx(ne,{copyKey:"nav.leaderboard",as:"span",className:"",children:a("nav.leaderboard","Leaderboard")})}),n.jsxs("div",{children:[n.jsx("div",{className:"px-4 py-2 text-sm font-semibold text-neutral-800 uppercase tracking-wide",children:n.jsx(ne,{copyKey:"nav.how_to_play",as:"span",className:"",children:a("nav.how_to_play","How to Play")})}),n.jsx(se,{to:"/how-to-play",className:`block px-8 py-2 text-sm ${N("/how-to-play")&&!N("/scoring")&&!N("/timeline")?"text-burgundy-600 bg-burgundy-50":"text-neutral-600"}`,children:n.jsx(ne,{copyKey:"nav.overview",as:"span",className:"",children:a("nav.overview","Overview")})}),n.jsx(se,{to:"/scoring-rules",className:`block px-8 py-2 text-sm ${N("/scoring")||N("/scoring-rules")?"text-burgundy-600 bg-burgundy-50":"text-neutral-600"}`,children:n.jsx(ne,{copyKey:"nav.scoring_rules",as:"span",className:"",children:a("nav.scoring_rules","Scoring Rules")})}),n.jsx(se,{to:"/timeline",className:`block px-8 py-2 text-sm ${N("/timeline")?"text-burgundy-600 bg-burgundy-50":"text-neutral-600"}`,children:n.jsx(ne,{copyKey:"nav.weekly_timeline",as:"span",className:"",children:a("nav.weekly_timeline","Weekly Timeline")})}),n.jsx(se,{to:"/sms-commands",className:`block px-8 py-2 text-sm ${N("/sms-commands")?"text-burgundy-600 bg-burgundy-50":"text-neutral-600"}`,children:n.jsx(ne,{copyKey:"nav.sms_commands",as:"span",className:"",children:a("nav.sms_commands","SMS Commands")})})]}),n.jsxs("div",{children:[n.jsx("div",{className:"px-4 py-2 text-sm font-semibold text-neutral-800 uppercase tracking-wide",children:n.jsx(ne,{copyKey:"nav.contact",as:"span",className:"",children:a("nav.contact","Contact")})}),n.jsx(se,{to:"/contact",className:`block px-8 py-2 text-sm ${N("/contact")&&!N("/faq")?"text-burgundy-600 bg-burgundy-50":"text-neutral-600"}`,children:n.jsx(ne,{copyKey:"nav.contact_us",as:"span",className:"",children:a("nav.contact_us","Contact Us")})}),n.jsx(se,{to:"/faq",className:`block px-8 py-2 text-sm ${N("/faq")?"text-burgundy-600 bg-burgundy-50":"text-neutral-600"}`,children:n.jsx(ne,{copyKey:"nav.faq",as:"span",className:"",children:a("nav.faq","FAQ")})})]}),C&&n.jsxs(n.Fragment,{children:[n.jsx("hr",{className:"my-2 border-burgundy-100"}),n.jsxs(se,{to:"/admin",className:"flex items-center gap-2 px-4 py-3 text-sm font-semibold text-orange-600 bg-orange-50",children:[n.jsx(Aa,{className:"h-4 w-4"}),"Admin Panel"]})]}),n.jsx("hr",{className:"my-2 border-burgundy-100"}),n.jsx(se,{to:"/profile",className:"block px-4 py-3 text-sm text-neutral-600",children:n.jsx(ne,{copyKey:"nav.profile_settings",as:"span",className:"",children:a("nav.profile_settings","Profile Settings")})}),n.jsxs("div",{className:"px-4 py-3 text-sm text-neutral-400 flex items-center justify-between",children:[n.jsx("span",{children:n.jsx(ne,{copyKey:"nav.sms_notifications",as:"span",className:"",children:a("nav.sms_notifications","SMS Notifications")})}),n.jsx("span",{className:"text-xs bg-neutral-100 text-neutral-500 px-2 py-0.5 rounded-full",children:n.jsx(ne,{copyKey:"nav.coming_soon",as:"span",className:"",children:a("nav.coming_soon","Coming Soon")})})]}),n.jsx("hr",{className:"my-2 border-burgundy-100"}),n.jsx("button",{onClick:_,className:"w-full text-left px-4 py-3 text-sm text-red-600 font-semibold",children:n.jsx(ne,{copyKey:"nav.sign_out",as:"span",className:"",children:a("nav.sign_out","Sign out")})})]})]})})}):s?n.jsx("nav",{className:"bg-white border-b border-neutral-200 shadow-sm sticky top-0 z-50",children:n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"flex items-center justify-between h-16",children:[n.jsx(se,{to:"/",className:"flex-shrink-0",children:n.jsx("img",{src:"/logo.png",alt:"RGFL",className:"h-10 w-auto"})}),n.jsx("div",{className:"w-24"})]})})}):n.jsx("nav",{className:"bg-white border-b border-neutral-200 shadow-sm sticky top-0 z-50",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsxs("div",{className:"flex items-center justify-between h-16",children:[n.jsx(se,{to:"/",className:"flex-shrink-0",children:n.jsx("img",{src:"/logo.png",alt:"RGFL",className:"h-10 w-auto"})}),n.jsxs("div",{className:"hidden md:flex items-center gap-1",children:[n.jsx(se,{to:"/",className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${e.pathname==="/"?"text-burgundy-600 bg-burgundy-50":"text-neutral-600 hover:text-burgundy-600 hover:bg-neutral-50"}`,children:n.jsx(ne,{copyKey:"nav.home",as:"span",className:"",children:a("nav.home","Home")})}),n.jsx(se,{to:"/how-to-play",className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${N("/how-to-play")?"text-burgundy-600 bg-burgundy-50":"text-neutral-600 hover:text-burgundy-600 hover:bg-neutral-50"}`,children:n.jsx(ne,{copyKey:"nav.how_to_play",as:"span",className:"",children:a("nav.how_to_play","How to Play")})}),n.jsx(se,{to:"/scoring-rules",className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${N("/scoring-rules")||N("/scoring")?"text-burgundy-600 bg-burgundy-50":"text-neutral-600 hover:text-burgundy-600 hover:bg-neutral-50"}`,children:n.jsx(ne,{copyKey:"nav.scoring_rules",as:"span",className:"",children:a("nav.scoring_rules","Scoring Rules")})}),n.jsxs("div",{className:"relative group",children:[n.jsxs("button",{className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors flex items-center gap-1 ${N("/contact")||N("/faq")?"text-burgundy-600 bg-burgundy-50":"text-neutral-600 hover:text-burgundy-600 hover:bg-neutral-50"}`,children:[n.jsx(ne,{copyKey:"nav.contact",as:"span",className:"",children:a("nav.contact","Contact")}),n.jsx(en,{className:"h-4 w-4"})]}),n.jsxs("div",{className:"absolute top-full left-0 mt-1 bg-white rounded-xl shadow-lg border border-neutral-200 min-w-[160px] z-50 py-1 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all",children:[n.jsxs(se,{to:"/contact",className:`flex items-center gap-2 px-4 py-2 text-sm hover:bg-neutral-50 ${N("/contact")&&!N("/faq")?"text-burgundy-600 bg-burgundy-50":"text-neutral-600"}`,children:[n.jsx(sn,{className:"h-4 w-4"}),n.jsx(ne,{copyKey:"nav.contact_us",as:"span",className:"",children:a("nav.contact_us","Contact Us")})]}),n.jsxs(se,{to:"/faq",className:`flex items-center gap-2 px-4 py-2 text-sm hover:bg-neutral-50 ${N("/faq")?"text-burgundy-600 bg-burgundy-50":"text-neutral-600"}`,children:[n.jsx(qc,{className:"h-4 w-4"}),n.jsx(ne,{copyKey:"nav.faq",as:"span",className:"",children:a("nav.faq","FAQ")})]})]})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:()=>o(!i),className:"md:hidden p-2 text-neutral-600 hover:text-burgundy-600","aria-label":i?"Close menu":"Open menu","aria-expanded":i,children:i?n.jsx(It,{className:"h-6 w-6"}):n.jsx(xw,{className:"h-6 w-6"})}),n.jsx(se,{to:"/login",className:"hidden sm:block text-neutral-600 hover:text-burgundy-600 font-medium text-sm px-4 py-2 rounded-lg hover:bg-neutral-50 transition-colors",children:n.jsx(ne,{copyKey:"nav.login",as:"span",className:"",children:a("nav.login","Login")})}),n.jsx(se,{to:"/signup",className:"bg-burgundy-500 hover:bg-burgundy-600 text-white font-semibold text-sm px-5 py-2 rounded-full transition-colors shadow-sm",children:n.jsx(ne,{copyKey:"nav.signup_free",as:"span",className:"",children:a("nav.signup_free","Sign Up Free")})})]})]}),i&&n.jsxs("div",{ref:x,className:"md:hidden border-t border-neutral-100 py-2 bg-white",children:[n.jsx(se,{to:"/",className:`block px-4 py-3 text-sm font-medium rounded-lg mx-2 ${e.pathname==="/"?"text-burgundy-600 bg-burgundy-50":"text-neutral-600 hover:bg-neutral-50"}`,children:n.jsx(ne,{copyKey:"nav.home",as:"span",className:"",children:a("nav.home","Home")})}),n.jsx(se,{to:"/how-to-play",className:`block px-4 py-3 text-sm font-medium rounded-lg mx-2 ${N("/how-to-play")?"text-burgundy-600 bg-burgundy-50":"text-neutral-600 hover:bg-neutral-50"}`,children:n.jsx(ne,{copyKey:"nav.how_to_play",as:"span",className:"",children:a("nav.how_to_play","How to Play")})}),n.jsx(se,{to:"/scoring-rules",className:`block px-4 py-3 text-sm font-medium rounded-lg mx-2 ${N("/scoring-rules")||N("/scoring")?"text-burgundy-600 bg-burgundy-50":"text-neutral-600 hover:bg-neutral-50"}`,children:n.jsx(ne,{copyKey:"nav.scoring_rules",as:"span",className:"",children:a("nav.scoring_rules","Scoring Rules")})}),n.jsx(se,{to:"/contact",className:`block px-4 py-3 text-sm font-medium rounded-lg mx-2 ${N("/contact")&&!N("/faq")?"text-burgundy-600 bg-burgundy-50":"text-neutral-600 hover:bg-neutral-50"}`,children:n.jsx(ne,{copyKey:"nav.contact_us",as:"span",className:"",children:a("nav.contact_us","Contact Us")})}),n.jsx(se,{to:"/faq",className:`block px-4 py-3 text-sm font-medium rounded-lg mx-2 ${N("/faq")?"text-burgundy-600 bg-burgundy-50":"text-neutral-600 hover:bg-neutral-50"}`,children:n.jsx(ne,{copyKey:"nav.faq",as:"span",className:"",children:a("nav.faq","FAQ")})}),n.jsx("hr",{className:"my-2 border-neutral-100 mx-4"}),n.jsx(se,{to:"/login",className:"block px-4 py-3 text-sm font-medium text-neutral-600 mx-2",children:n.jsx(ne,{copyKey:"nav.login",as:"span",className:"",children:a("nav.login","Login")})})]})]})})}function tn(){const e=new Date().getFullYear(),{getCopy:t}=Kt();return n.jsx("footer",{className:"bg-neutral-900 text-white mt-auto",children:n.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[n.jsxs("div",{className:"grid md:grid-cols-4 gap-8",children:[n.jsxs("div",{className:"md:col-span-1",children:[n.jsx(se,{to:"/",className:"flex items-center gap-2 mb-4",children:n.jsx("img",{src:"/logo.png",alt:"RGFL",className:"h-10 w-auto brightness-0 invert"})}),n.jsx(ne,{copyKey:"footer.tagline",as:"p",className:"text-neutral-400 text-sm",children:t("footer.tagline","Fantasy Survivor for people who actually watch Survivor.")})]}),n.jsxs("div",{children:[n.jsx(ne,{copyKey:"footer.play_header",as:"h4",className:"font-display font-bold text-sm uppercase tracking-wider text-neutral-400 mb-4",children:t("footer.play_header","Play")}),n.jsxs("ul",{className:"space-y-2",children:[n.jsx("li",{children:n.jsx(se,{to:"/how-to-play",className:"text-neutral-300 hover:text-burgundy-400 transition-colors text-sm",children:n.jsx(ne,{copyKey:"footer.link_how_to_play",as:"span",className:"",children:t("footer.link_how_to_play","How to Play")})})}),n.jsx("li",{children:n.jsx(se,{to:"/how-to-play#scoring",className:"text-neutral-300 hover:text-burgundy-400 transition-colors text-sm",children:n.jsx(ne,{copyKey:"footer.link_scoring_rules",as:"span",className:"",children:t("footer.link_scoring_rules","Scoring Rules")})})}),n.jsx("li",{children:n.jsx(se,{to:"/leagues",className:"text-neutral-300 hover:text-burgundy-400 transition-colors text-sm",children:n.jsx(ne,{copyKey:"footer.link_leagues",as:"span",className:"",children:t("footer.link_leagues","Leagues")})})})]})]}),n.jsxs("div",{children:[n.jsx(ne,{copyKey:"footer.resources_header",as:"h4",className:"font-display font-bold text-sm uppercase tracking-wider text-neutral-400 mb-4",children:t("footer.resources_header","Resources")}),n.jsxs("ul",{className:"space-y-2",children:[n.jsx("li",{children:n.jsx(se,{to:"/faq",className:"text-neutral-300 hover:text-burgundy-400 transition-colors text-sm",children:n.jsx(ne,{copyKey:"footer.link_faq",as:"span",className:"",children:t("footer.link_faq","FAQ")})})}),n.jsx("li",{children:n.jsx(se,{to:"/contact",className:"text-neutral-300 hover:text-burgundy-400 transition-colors text-sm",children:n.jsx(ne,{copyKey:"footer.link_contact",as:"span",className:"",children:t("footer.link_contact","Contact Us")})})}),n.jsx("li",{children:n.jsx(se,{to:"/privacy",className:"text-neutral-300 hover:text-burgundy-400 transition-colors text-sm",children:n.jsx(ne,{copyKey:"footer.link_privacy",as:"span",className:"",children:t("footer.link_privacy","Privacy Policy")})})}),n.jsx("li",{children:n.jsx(se,{to:"/terms",className:"text-neutral-300 hover:text-burgundy-400 transition-colors text-sm",children:n.jsx(ne,{copyKey:"footer.link_terms",as:"span",className:"",children:t("footer.link_terms","Terms of Service")})})})]})]}),n.jsxs("div",{children:[n.jsx(ne,{copyKey:"footer.contact_header",as:"h4",className:"font-display font-bold text-sm uppercase tracking-wider text-neutral-400 mb-4",children:t("footer.contact_header","Contact")}),n.jsx("ul",{className:"space-y-2",children:n.jsx("li",{children:n.jsx("a",{href:"https://twitter.com/realitygamesfl",target:"_blank",rel:"noopener noreferrer",className:"text-neutral-300 hover:text-burgundy-400 transition-colors text-sm",children:n.jsx(ne,{copyKey:"footer.twitter_handle",as:"span",className:"",children:t("footer.twitter_handle","@realitygamesfl")})})})})]})]}),n.jsxs("div",{className:"border-t border-neutral-800 mt-4 pt-4 flex flex-col md:flex-row justify-between items-center gap-4",children:[n.jsx(ne,{copyKey:"footer.copyright",as:"p",className:"text-neutral-500 text-sm",children:t("footer.copyright",` ${e} Reality Games Fantasy League. All rights reserved.`)}),n.jsxs("div",{className:"flex items-center gap-4 text-sm text-neutral-500",children:[n.jsx(se,{to:"/privacy",className:"hover:text-neutral-300 transition-colors",children:n.jsx(ne,{copyKey:"footer.bottom_privacy",as:"span",className:"",children:t("footer.bottom_privacy","Privacy")})}),n.jsx(se,{to:"/terms",className:"hover:text-neutral-300 transition-colors",children:n.jsx(ne,{copyKey:"footer.bottom_terms",as:"span",className:"",children:t("footer.bottom_terms","Terms")})}),n.jsx(ne,{copyKey:"footer.disclaimer",as:"span",className:"",children:t("footer.disclaimer","Not affiliated with CBS or Survivor.")})]})]})]})})}function Fre(){return n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex flex-col",children:[n.jsx("a",{href:"#main-content",className:"sr-only focus:not-sr-only focus:absolute focus:top-2 focus:left-2 focus:z-[100] focus:bg-burgundy-600 focus:text-white focus:px-4 focus:py-2 focus:rounded-lg focus:font-semibold focus:shadow-lg",children:"Skip to main content"}),n.jsx(_e,{}),n.jsx("main",{id:"main-content",className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex-1",tabIndex:-1,children:n.jsx(Aw,{})}),n.jsx(tn,{})]})}function Ure(){const{user:e,profile:t,loading:r}=Et(),s=Gr(),a=window.location.hash.includes("access_token");if(r||a)return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-cream-200",children:n.jsx(be,{className:"h-12 w-12 text-burgundy-500 animate-spin"})});if(!e){const i=s.pathname+s.search;return n.jsx(Js,{to:`/login?redirect=${encodeURIComponent(i)}`,replace:!0})}if(!(t!=null&&t.profile_setup_complete)&&s.pathname!=="/profile/setup"){const i=s.pathname+s.search;return n.jsx(Js,{to:`/profile/setup?redirect=${encodeURIComponent(i)}`,replace:!0})}return n.jsx(Aw,{})}function Bre(){const{user:e,loading:t,isAdmin:r}=Et(),s=window.location.hash.includes("access_token");return t||s?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-cream-200",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-burgundy-500"})}):e?r?n.jsx(Aw,{}):n.jsx(Js,{to:"/dashboard",replace:!0,state:{error:"Access denied. Admin privileges required."}}):n.jsx(Js,{to:"/login",replace:!0})}class hP extends $.Component{constructor(r){super(r);Pl(this,"handleReload",()=>{window.location.reload()});Pl(this,"handleGoHome",()=>{window.location.href="/"});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(r){return{hasError:!0,error:r,errorInfo:null}}componentDidCatch(r,s){this.setState({errorInfo:s}),console.error("Error Boundary caught error:",r,s),Nee&&Ct(r,{contexts:{react:{componentStack:s.componentStack}},extra:{errorInfo:s.componentStack}})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated p-8 max-w-md w-full text-center border border-cream-200",children:[n.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6",children:n.jsx(Tt,{className:"h-8 w-8 text-red-500"})}),n.jsx("h1",{className:"text-2xl font-display font-bold text-neutral-800 mb-2",children:"Something went wrong"}),n.jsx("p",{className:"text-neutral-500 mb-6",children:"We're sorry, but something unexpected happened. Please try refreshing the page or going back to the home page."}),!1,n.jsxs("div",{className:"flex gap-3 justify-center",children:[n.jsxs("button",{onClick:this.handleReload,className:"btn btn-secondary flex items-center gap-2",children:[n.jsx(an,{className:"h-4 w-4"}),"Refresh Page"]}),n.jsxs("button",{onClick:this.handleGoHome,className:"btn btn-primary flex items-center gap-2",children:[n.jsx(oP,{className:"h-4 w-4"}),"Go Home"]})]})]})}):this.props.children}}const Hre=$.createContext(null),Kre={success:{icon:xt,bg:"bg-green-50",border:"border-green-200",text:"text-green-800",iconColor:"text-green-500"},error:{icon:yt,bg:"bg-red-50",border:"border-red-200",text:"text-red-800",iconColor:"text-red-500"},info:{icon:dx,bg:"bg-blue-50",border:"border-blue-200",text:"text-blue-800",iconColor:"text-blue-500"}};function zre({children:e}){const[t,r]=$.useState([]),s=$.useCallback(u=>{r(d=>d.filter(p=>p.id!==u))},[]),a=$.useCallback((u,d="info")=>{const p=Math.random().toString(36).substring(2,9);r(f=>[...f,{id:p,message:u,type:d}]),setTimeout(()=>s(p),5e3)},[s]),i=$.useCallback(u=>a(u,"success"),[a]),o=$.useCallback(u=>a(u,"error"),[a]),l=$.useCallback(u=>a(u,"info"),[a]);return n.jsxs(Hre.Provider,{value:{showToast:a,showSuccess:i,showError:o,showInfo:l},children:[e,n.jsx("div",{className:"fixed bottom-4 right-4 z-50 flex flex-col gap-2 max-w-sm",children:t.map(u=>{const d=Kre[u.type],p=d.icon;return n.jsxs("div",{className:`flex items-start gap-3 p-4 rounded-xl border shadow-lg animate-slide-up ${d.bg} ${d.border}`,children:[n.jsx(p,{className:`h-5 w-5 flex-shrink-0 mt-0.5 ${d.iconColor}`}),n.jsx("p",{className:`text-sm font-medium flex-1 ${d.text}`,children:u.message}),n.jsx("button",{onClick:()=>s(u.id),className:`flex-shrink-0 ${d.text} hover:opacity-70`,children:n.jsx(It,{className:"h-4 w-4"})})]},u.id)})})]})}const Wre=e=>e instanceof TypeError,Gre=e=>e===408||e===429||e>=502&&e<=504,KE=e=>new Promise(t=>setTimeout(t,e));async function Vre(e,t={}){const{maxRetries:r=3,retryDelay:s=1e3,...a}=t;let i=null,o=null;for(let l=0;l<=r;l++)try{const u=await fetch(e,a);if(u.ok||!Gre(u.status)||(o=u,l===r))return u;const d=s*Math.pow(2,l);console.warn(`API request to ${e} failed with status ${u.status}, retrying in ${d}ms...`),await KE(d)}catch(u){if(i=u instanceof Error?u:new Error(String(u)),!Wre(u)||l===r)throw i;const d=s*Math.pow(2,l);console.warn(`Network error on ${e}, retrying in ${d}ms...`,u),await KE(d)}if(o)return o;throw i||new Error("Unknown error")}async function jt(e,t={}){const s=e.startsWith("/api")?e:`/api${e}`,a=t.method||"GET",i=performance.now();return na({op:"http.client",name:`${a} ${s}`},async o=>{try{o.setAttribute("http.method",a),o.setAttribute("http.url",s);const l=await Vre(s,{...t,headers:{"Content-Type":"application/json",...t.headers}}),u=l.status,d=performance.now()-i;o.setAttribute("http.status_code",u),xn.distribution("api_response_time",d,{endpoint:s.replace(/\/[a-f0-9-]{36}/g,"/:id"),method:a,status:String(u)});const p=await l.text();if(!p)return{data:null,error:l.ok?null:"Empty response",status:u};let f=null,m=null;try{const x=JSON.parse(p);l.ok?f=x:(m=x.error||x.message||`Request failed with status ${u}`,o.setAttribute("error",m||"Unknown error"),xn.count("api_error",1,{endpoint:s,status:String(u)}))}catch{m=p,o.setAttribute("error",m)}return{data:f,error:m,status:u}}catch(l){const u=l instanceof Error?l:new Error(String(l)),d=performance.now()-i;return o.setAttribute("error",!0),o.setAttribute("error.message",u.message),xn.distribution("api_response_time",d,{endpoint:s.replace(/\/[a-f0-9-]{36}/g,"/:id"),method:a,status:"error"}),xn.count("api_error",1,{endpoint:s,type:"network"}),Ct(u,{tags:{api_endpoint:s,http_method:a}}),{data:null,error:u.message,status:0}}})}async function Zn(e,t,r={}){return jt(e,{...r,headers:{...r.headers,Authorization:`Bearer ${t}`}})}const fP=(e,t,r)=>r?Zn(e,r,{method:"POST",body:JSON.stringify(t)}):jt(e,{method:"POST",body:JSON.stringify(t)});function Qre(e,t={}){const{data:r,isLoading:s,error:a}=ie({queryKey:["site-copy","page",e],queryFn:async()=>{const{data:l,error:u}=await X.from("site_copy").select("*").eq("page",e).eq("is_active",!0);if(u)throw u;return l||[]},staleTime:3e5,retry:1}),i={};r==null||r.forEach(l=>{i[l.key]=l.content});const o={...t};return Object.keys(i).forEach(l=>{o[l]=i[l]}),{copy:o,loading:s,error:a}}function Yre(){const{user:e,loading:t}=Et(),[r,s]=$.useState(""),[a,i]=$.useState(!1),[o,l]=$.useState(!1),[u,d]=$.useState(""),{copy:p}=Qre("home",{"home.hero.badge":"Season 50 Now Open","home.hero.title":"Fantasy Survivor for People Who Actually Watch","home.hero.subtitle":"Draft castaways. Set weekly lineups. Earn points for every confessional, idol play, and blindside. Prove you know the game.","home.cta.primary":"Join Free","home.cta.secondary":"How It Works","home.trivia.heading":"Sign Up for Free Trivia","home.trivia.description":"Get access to our 24-question Survivor trivia challenge!"});if(!t&&e)return n.jsx(Js,{to:"/dashboard",replace:!0});const f=async m=>{if(m.preventDefault(),!(!r||a)){i(!0),d("");try{const x=await jt("/trivia/signup",{method:"POST",body:JSON.stringify({email:r})});x.error?d(x.error):(l(!0),s(""))}catch{d("Something went wrong. Please try again.")}finally{i(!1)}}};return n.jsxs("div",{className:"min-h-screen flex flex-col bg-cream-50",children:[n.jsx(_e,{}),n.jsx("main",{className:"flex-1 flex items-center justify-center px-4 py-12",children:n.jsxs("div",{className:"w-full max-w-3xl mx-auto text-center",children:[n.jsxs("div",{className:"inline-flex items-center gap-2 bg-burgundy-100 text-burgundy-700 px-3 py-1.5 rounded-full text-sm font-semibold mb-6",children:[n.jsx(Rr,{className:"h-4 w-4"}),n.jsx(ne,{copyKey:"home.hero.badge",as:"span",children:p["home.hero.badge"]})]}),n.jsxs("h1",{className:"text-4xl sm:text-5xl lg:text-6xl text-neutral-800 leading-[1.1] mb-6",style:{fontFamily:"Georgia, Times New Roman, serif",fontWeight:400},children:["Fantasy Survivor",n.jsx("br",{}),"for People Who",n.jsx("br",{}),n.jsx("span",{className:"italic text-burgundy-600",children:"Actually"})," Watch"]}),n.jsx(ne,{copyKey:"home.hero.subtitle",as:"p",className:"text-lg sm:text-xl text-neutral-600 mb-10 max-w-xl mx-auto",children:p["home.hero.subtitle"]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center mb-10",children:[n.jsxs(se,{to:"/signup",className:"bg-burgundy-600 hover:bg-burgundy-700 text-white px-8 py-4 rounded-xl font-bold text-lg transition-all shadow-lg hover:shadow-xl inline-flex items-center justify-center gap-2 w-full sm:w-auto",children:[n.jsx(Rr,{className:"h-5 w-5"}),p["home.cta.primary"]]}),n.jsx(se,{to:"/how-to-play",className:"bg-white hover:bg-cream-100 text-neutral-800 px-8 py-4 rounded-xl font-semibold text-lg border-2 border-cream-200 hover:border-cream-300 transition-all inline-flex items-center justify-center w-full sm:w-auto",children:p["home.cta.secondary"]})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200 max-w-md mx-auto",children:[n.jsxs("div",{className:"flex items-center justify-center gap-2 mb-3",children:[n.jsx(sn,{className:"h-5 w-5 text-burgundy-600"}),n.jsx(ne,{copyKey:"home.trivia.heading",as:"h3",className:"font-semibold text-neutral-800",children:p["home.trivia.heading"]})]}),n.jsx(ne,{copyKey:"home.trivia.description",as:"p",className:"text-sm text-neutral-600 mb-4",children:p["home.trivia.description"]}),o?n.jsxs("div",{className:"flex items-center justify-center gap-2 text-green-600 py-2",children:[n.jsx(xt,{className:"h-5 w-5"}),n.jsx("span",{className:"font-medium",children:"You're signed up! Check your email."})]}):n.jsxs("form",{onSubmit:f,className:"flex flex-col sm:flex-row gap-2",children:[n.jsx("input",{type:"email",value:r,onChange:m=>s(m.target.value),placeholder:"Enter your email",required:!0,className:"flex-1 px-4 py-3 rounded-lg border border-cream-200 focus:outline-none focus:ring-2 focus:ring-burgundy-500 focus:border-transparent"}),n.jsx("button",{type:"submit",disabled:a||!r,className:"bg-burgundy-600 hover:bg-burgundy-700 disabled:bg-burgundy-400 text-white px-6 py-3 rounded-lg font-semibold transition-all inline-flex items-center justify-center gap-2",children:a?n.jsx(be,{className:"h-4 w-4 animate-spin"}):"Sign Up"})]}),u&&n.jsx("p",{className:"text-red-600 text-sm mt-2",children:u})]})]})}),n.jsx(tn,{})]})}function Jre(){const{signInWithGoogle:e,signInWithMagicLink:t}=Et(),[r,s]=$.useState(!1),[a,i]=$.useState(!1),[o,l]=$.useState(""),[u,d]=$.useState(!1),[p,f]=$.useState(!1),[m,x]=$.useState(""),y=async()=>{x(""),s(!0);try{await e()}catch(b){x(b instanceof Error?b.message:"Failed to sign in with Google"),s(!1)}},g=async()=>{x(""),f(!0);try{await t(o),d(!0)}catch(b){x(b instanceof Error?b.message:"Failed to send magic link")}finally{f(!1)}};return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b from-cream-100 to-cream-200 px-4 py-12",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-float max-w-md w-full p-8 animate-slide-up",children:[n.jsx("div",{className:"flex justify-center mb-6",children:n.jsx(se,{to:"/",children:n.jsx("img",{src:"/logo.png",alt:"RGFL",className:"h-24 w-auto"})})}),n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("h1",{className:"font-display text-3xl text-neutral-800",children:"Welcome Back"}),n.jsx("p",{className:"text-neutral-500 mt-2",children:"Log in to continue to your dashboard"})]}),m&&n.jsx("div",{className:"bg-error-50 border border-error-200 rounded-xl p-4 mb-6",children:n.jsx("p",{className:"text-error-600 text-sm",children:m})}),n.jsx("div",{className:"space-y-4 mb-6",children:n.jsx("p",{className:"text-neutral-600 text-center",children:"Log in with your Google account. OAuth is the only authentication method available."})}),n.jsxs("div",{className:"mt-6 space-y-3",children:[n.jsxs("button",{type:"button",onClick:y,disabled:r,className:"btn btn-secondary w-full flex items-center justify-center gap-3 shadow-card hover:shadow-card-hover transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[n.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),n.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),n.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),n.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),r?"Connecting...":"Continue with Google"]}),n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute inset-0 flex items-center",children:n.jsx("div",{className:"w-full border-t border-neutral-200"})}),n.jsx("div",{className:"relative flex justify-center text-sm",children:n.jsx("span",{className:"px-2 bg-white text-neutral-400",children:"OR"})})]}),!a&&!u&&n.jsxs("button",{type:"button",onClick:()=>i(!0),className:"btn btn-secondary w-full flex items-center justify-center gap-3 shadow-card hover:shadow-card-hover transition-all",children:[n.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("rect",{x:"2",y:"4",width:"20",height:"16",rx:"2"}),n.jsx("path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"})]}),"Sign in with Email (Magic Link)"]}),a&&!u&&n.jsxs("div",{className:"space-y-3 animate-slide-up",children:[n.jsx("input",{type:"email",value:o,onChange:b=>l(b.target.value),placeholder:"Enter your email",className:"input w-full",disabled:p}),n.jsx("button",{type:"button",onClick:g,disabled:!o||p,className:"btn btn-primary w-full disabled:opacity-50 disabled:cursor-not-allowed",children:p?"Sending...":"Send Magic Link"}),n.jsx("button",{type:"button",onClick:()=>i(!1),className:"text-sm text-neutral-400 hover:text-neutral-600 transition-colors",children:" Back to Google Sign In"})]}),u&&n.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4",children:[n.jsxs("p",{className:"text-green-700 text-sm text-center",children:[" Check your email! We sent a magic link to ",n.jsx("strong",{children:o})]}),n.jsx("p",{className:"text-green-600 text-xs text-center mt-2",children:"Click the link to sign in (check spam if you don't see it)"})]})]}),n.jsx("div",{className:"mt-8 text-center",children:n.jsxs("p",{className:"text-neutral-500 text-sm",children:["Don't have an account?"," ",n.jsx(se,{to:"/signup",className:"text-burgundy-500 hover:text-burgundy-600 font-semibold",children:"Sign up"})]})}),n.jsx("div",{className:"mt-6 text-center",children:n.jsx(se,{to:"/",className:"text-sm text-neutral-400 hover:text-neutral-600 transition-colors",children:" Back to home"})})]})})}function zE(){const{signInWithGoogle:e,signInWithMagicLink:t}=Et(),[r,s]=$.useState(!1),[a,i]=$.useState(!1),[o,l]=$.useState(""),[u,d]=$.useState(!1),[p,f]=$.useState(!1),[m,x]=$.useState(""),y=async()=>{x(""),s(!0);try{await e()}catch(b){x(b instanceof Error?b.message:"Failed to sign in with Google"),s(!1)}},g=async()=>{x(""),f(!0);try{await t(o),d(!0)}catch(b){x(b instanceof Error?b.message:"Failed to send magic link")}finally{f(!1)}};return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b from-cream-100 to-cream-200 px-4 py-12",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-float max-w-md w-full p-8 animate-slide-up",children:[n.jsx("div",{className:"flex justify-center mb-6",children:n.jsx(se,{to:"/",children:n.jsx("img",{src:"/logo.png",alt:"RGFL",className:"h-24 w-auto"})})}),n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("h1",{className:"font-display text-3xl text-neutral-800",children:"Sign up"}),n.jsx("p",{className:"text-neutral-500 mt-2",children:"Free and only takes a minute"})]}),m&&n.jsx("div",{className:"bg-error-50 border border-error-200 rounded-xl p-4 mb-6",children:n.jsx("p",{className:"text-error-600 text-sm",children:m})}),n.jsx("div",{className:"space-y-4",children:n.jsx("p",{className:"text-neutral-600 text-center",children:"Sign up with your Google account. Profile questions will be asked after registration."})}),n.jsxs("div",{className:"mt-6 space-y-3",children:[n.jsxs("button",{type:"button",onClick:y,disabled:r,className:"btn btn-secondary w-full flex items-center justify-center gap-3 shadow-card hover:shadow-card-hover transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[n.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),n.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),n.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),n.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),r?"Connecting...":"Continue with Google"]}),n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute inset-0 flex items-center",children:n.jsx("div",{className:"w-full border-t border-neutral-200"})}),n.jsx("div",{className:"relative flex justify-center text-sm",children:n.jsx("span",{className:"px-2 bg-white text-neutral-400",children:"OR"})})]}),!a&&!u&&n.jsxs("button",{type:"button",onClick:()=>i(!0),className:"btn btn-secondary w-full flex items-center justify-center gap-3 shadow-card hover:shadow-card-hover transition-all",children:[n.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("rect",{x:"2",y:"4",width:"20",height:"16",rx:"2"}),n.jsx("path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"})]}),"Sign up with Email (Magic Link)"]}),a&&!u&&n.jsxs("div",{className:"space-y-3 animate-slide-up",children:[n.jsx("input",{type:"email",value:o,onChange:b=>l(b.target.value),placeholder:"Enter your email",className:"input w-full",disabled:p}),n.jsx("button",{type:"button",onClick:g,disabled:!o||p,className:"btn btn-primary w-full disabled:opacity-50 disabled:cursor-not-allowed",children:p?"Sending...":"Send Magic Link"}),n.jsx("button",{type:"button",onClick:()=>i(!1),className:"text-sm text-neutral-400 hover:text-neutral-600 transition-colors",children:" Back to Google Sign Up"})]}),u&&n.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4",children:[n.jsxs("p",{className:"text-green-700 text-sm text-center",children:[" Check your email! We sent a magic link to ",n.jsx("strong",{children:o})]}),n.jsx("p",{className:"text-green-600 text-xs text-center mt-2",children:"Click the link to complete signup (check spam if you don't see it)"})]})]}),n.jsx("div",{className:"mt-8 text-center",children:n.jsxs("p",{className:"text-neutral-500 text-sm",children:["Already have an account?"," ",n.jsx(se,{to:"/login",className:"text-burgundy-500 hover:text-burgundy-600 font-semibold",children:"Login"})]})}),n.jsx("div",{className:"mt-6 text-center",children:n.jsx(se,{to:"/",className:"text-sm text-neutral-400 hover:text-neutral-600 transition-colors",children:" Back to home"})})]})})}function km(e){return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}function Em(e){const t=new Date,r=e.getTime()-t.getTime();if(r<=0)return"Now";const s=Math.floor(r/(1e3*60*60*24)),a=Math.floor(r%(1e3*60*60*24)/(1e3*60*60)),i=Math.floor(r%(1e3*60*60)/(1e3*60));return s>0?`${s}d ${a}h`:a>0?`${a}h ${i}m`:`${i}m`}function Xre(e,t="America/Los_Angeles"){const r=new Date(e),s={weekday:"long",month:"long",day:"numeric",year:"numeric"},a={hour:"numeric",minute:"2-digit",hour12:!0,timeZone:t,timeZoneName:"short"},i=r.toLocaleDateString("en-US",{...s,timeZone:t}),o=r.toLocaleTimeString("en-US",a);return`${i} at ${o}`}const Zre={burgundy:{bg:"bg-gradient-to-r from-burgundy-500 to-burgundy-600",btn:"bg-white text-burgundy-600 hover:bg-cream-100"},orange:{bg:"bg-gradient-to-r from-orange-500 to-orange-600",btn:"bg-white text-orange-600 hover:bg-cream-100"},amber:{bg:"bg-gradient-to-r from-amber-500 to-amber-600",btn:"bg-white text-amber-600 hover:bg-cream-100"},green:{bg:"bg-gradient-to-r from-green-500 to-green-600",btn:"bg-white text-green-600 hover:bg-cream-100"},blue:{bg:"bg-gradient-to-r from-blue-500 to-blue-600",btn:"bg-white text-blue-600 hover:bg-cream-100"}},ese={make_pick:"bg-white animate-pulse",picks_locked:"bg-white/80",awaiting_results:"bg-white/60",results_posted:"bg-white/60"};function tse({weeklyPhase:e,primaryLeagueId:t}){const r=Zre[e.color];return n.jsx("div",{className:`rounded-2xl p-6 mb-8 ${r.bg} text-white`,children:n.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("div",{className:`w-3 h-3 rounded-full ${ese[e.phase]}`}),n.jsx("span",{className:"text-sm font-semibold opacity-90 uppercase tracking-wide",children:e.label})]}),n.jsx("p",{className:"text-lg font-medium",children:e.description}),e.countdown&&n.jsxs("p",{className:"text-sm opacity-80 mt-1",children:[e.countdown.label,": ",Em(e.countdown.targetTime)]})]}),t&&n.jsx(se,{to:`/leagues/${t}${e.ctaPath}`,className:`btn ${r.btn} font-semibold`,children:e.ctaLabel})]})})}function nse({recentlyEliminated:e,autoPickedLeagues:t}){var a;const r=e&&e.length>0,s=t&&t.length>0;return!r&&!s?null:n.jsxs("div",{className:"space-y-3 mb-6",children:[r&&n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-4 flex items-start gap-3",children:[n.jsx(Tr,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-red-800",children:e.length===1?`${e[0].name} was eliminated!`:`${e.map(i=>i.name).join(" and ")} were eliminated!`}),n.jsx("p",{className:"text-sm text-red-700 mt-1",children:e.length===1?"The tribe has spoken. You still have your other castaway to play for!":"The tribe has spoken. Your season may be impacted by these eliminations."})]})]}),s&&n.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-2xl p-4 flex items-start gap-3",children:[n.jsx(yt,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("p",{className:"font-medium text-amber-800",children:["You were auto-picked in"," ",t.length===1?((a=t[0].leagues)==null?void 0:a.name)||"a league":`${t.length} leagues`]}),n.jsx("p",{className:"text-sm text-amber-700 mt-1",children:"You didn't submit a pick in time last episode. Make sure to pick before the deadline this week!"})]})]})]})}function rse({gamePhase:e,activeSeason:t,nextEpisode:r,primaryLeagueId:s,castawayCount:a,hasPickedForNextEpisode:i=!1}){const{getCopy:o}=Kt();return n.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[e==="pre_draft"||e==="pre_registration"?n.jsxs(se,{to:"/draft/rankings",className:"col-span-2 bg-burgundy-500 hover:bg-burgundy-600 text-white rounded-2xl p-6 transition-colors group",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-14 h-14 bg-white/20 rounded-xl flex items-center justify-center",children:n.jsx(une,{className:"h-7 w-7"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx(ne,{copyKey:"dashboard.cta.draft_rankings_title",as:"h3",className:"font-bold text-xl",children:o("dashboard.cta.draft_rankings_title","Set Your Draft Rankings")}),n.jsxs("p",{className:"text-burgundy-100 text-sm mt-1",children:[n.jsx(ne,{copyKey:"dashboard.cta.draft_rankings_desc",as:"span",className:"text-burgundy-100 text-sm",children:o("dashboard.cta.draft_rankings_desc","Rank")})," ",a>0?`all ${a}`:"the"," ",n.jsx(ne,{copyKey:"dashboard.cta.castaways_before_draft",as:"span",className:"text-burgundy-100 text-sm",children:o("dashboard.cta.castaways_before_draft","castaways before the draft")})]})]}),n.jsx(dr,{className:"h-6 w-6 text-white/60 group-hover:translate-x-1 transition-transform"})]}),t&&n.jsxs("div",{className:"mt-4 pt-4 border-t border-white/20 flex items-center gap-2",children:[n.jsx(Nt,{className:"h-4 w-4 text-burgundy-200"}),n.jsxs("span",{className:"text-sm text-burgundy-100",children:[n.jsx(ne,{copyKey:"dashboard.cta.premiere_in",as:"span",className:"text-sm text-burgundy-100",children:o("dashboard.cta.premiere_in","Premiere in")})," ",Em(new Date(t.premiere_at))]})]})]}):e==="active"&&r?i?n.jsxs(se,{to:s?`/leagues/${s}/pick`:"/leagues",className:"col-span-2 bg-green-600 hover:bg-green-700 text-white rounded-2xl p-6 transition-colors group",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-14 h-14 bg-white/20 rounded-xl flex items-center justify-center",children:n.jsx(kn,{className:"h-7 w-7"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx(ne,{copyKey:"dashboard.cta.pick_submitted",as:"h3",className:"font-bold text-xl",children:o("dashboard.cta.pick_submitted","Pick Submitted ")}),n.jsxs("p",{className:"text-green-100 text-sm mt-1",children:["Episode ",r.number," "," ",n.jsx(ne,{copyKey:"dashboard.cta.pick_locked",as:"span",className:"text-green-100 text-sm",children:o("dashboard.cta.pick_locked","Your pick is locked in!")})]})]}),n.jsx(dr,{className:"h-6 w-6 text-white/60 group-hover:translate-x-1 transition-transform"})]}),n.jsxs("div",{className:"mt-4 pt-4 border-t border-white/20 flex items-center gap-2",children:[n.jsx(Nt,{className:"h-4 w-4 text-green-200"}),n.jsxs("span",{className:"text-sm text-green-100",children:[n.jsx(ne,{copyKey:"dashboard.cta.episode_airs_in",as:"span",className:"text-sm text-green-100",children:o("dashboard.cta.episode_airs_in","Episode airs in")})," ",Em(new Date(r.air_date))]})]})]}):n.jsxs(se,{to:s?`/leagues/${s}/pick`:"/leagues",className:"col-span-2 bg-burgundy-500 hover:bg-burgundy-600 text-white rounded-2xl p-6 transition-colors group",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-14 h-14 bg-white/20 rounded-xl flex items-center justify-center",children:n.jsx(kn,{className:"h-7 w-7"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx(ne,{copyKey:"dashboard.cta.make_pick",as:"h3",className:"font-bold text-xl",children:o("dashboard.cta.make_pick","Make Your Pick")}),n.jsxs("p",{className:"text-burgundy-100 text-sm mt-1",children:["Episode ",r.number," "," ",n.jsx(ne,{copyKey:"dashboard.cta.lock_before",as:"span",className:"text-burgundy-100 text-sm",children:o("dashboard.cta.lock_before","Lock in before Wed 8pm ET")})]})]}),n.jsx(dr,{className:"h-6 w-6 text-white/60 group-hover:translate-x-1 transition-transform"})]}),n.jsxs("div",{className:"mt-4 pt-4 border-t border-white/20 flex items-center gap-2",children:[n.jsx(Nt,{className:"h-4 w-4 text-burgundy-200"}),n.jsxs("span",{className:"text-sm text-burgundy-100",children:[n.jsx(ne,{copyKey:"dashboard.cta.picks_lock_in",as:"span",className:"text-sm text-burgundy-100",children:o("dashboard.cta.picks_lock_in","Picks lock in")})," ",Em(new Date(r.picks_lock_at))]})]})]}):n.jsx(se,{to:"/leaderboard",className:"col-span-2 bg-burgundy-500 hover:bg-burgundy-600 text-white rounded-2xl p-6 transition-colors group",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-14 h-14 bg-white/20 rounded-xl flex items-center justify-center",children:n.jsx(ot,{className:"h-7 w-7"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx(ne,{copyKey:"dashboard.cta.view_standings",as:"h3",className:"font-bold text-xl",children:o("dashboard.cta.view_standings","View Final Standings")}),n.jsx("p",{className:"text-burgundy-100 text-sm mt-1",children:t?n.jsxs(n.Fragment,{children:[n.jsx(ne,{copyKey:"dashboard.cta.season",as:"span",className:"text-burgundy-100 text-sm",children:o("dashboard.cta.season","Season")})," ",t.number," ",n.jsx(ne,{copyKey:"dashboard.cta.results_in",as:"span",className:"text-burgundy-100 text-sm",children:o("dashboard.cta.results_in","results are in!")})]}):n.jsx(ne,{copyKey:"dashboard.cta.results_in_simple",as:"span",className:"text-burgundy-100 text-sm",children:o("dashboard.cta.results_in_simple","Results are in!")})})]}),n.jsx(dr,{className:"h-6 w-6 text-white/60 group-hover:translate-x-1 transition-transform"})]})}),n.jsxs(se,{to:"/scoring-rules",className:"bg-white hover:bg-cream-50 border-2 border-cream-200 hover:border-burgundy-300 rounded-2xl p-5 transition-all group",children:[n.jsx("div",{className:"w-12 h-12 bg-burgundy-100 rounded-xl flex items-center justify-center mb-3 group-hover:bg-burgundy-500 transition-colors",children:n.jsx($c,{className:"h-6 w-6 text-burgundy-500 group-hover:text-white transition-colors"})}),n.jsx(ne,{copyKey:"dashboard.quick.scoring_rules",as:"h3",className:"font-bold text-neutral-800",children:o("dashboard.quick.scoring_rules","Scoring Rules")}),n.jsx(ne,{copyKey:"dashboard.quick.scoring_rules_desc",as:"p",className:"text-neutral-500 text-sm mt-1",children:o("dashboard.quick.scoring_rules_desc","See how you score")})]}),n.jsxs(se,{to:"/castaways",className:"bg-white hover:bg-cream-50 border-2 border-cream-200 hover:border-burgundy-300 rounded-2xl p-5 transition-all group",children:[n.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-xl flex items-center justify-center mb-3 group-hover:bg-orange-500 transition-colors",children:n.jsx(Rr,{className:"h-6 w-6 text-orange-500 group-hover:text-white transition-colors"})}),n.jsxs("h3",{className:"font-bold text-neutral-800",children:[a>0?a:""," ",n.jsx(ne,{copyKey:"dashboard.quick.castaways",as:"span",className:"font-bold text-neutral-800",children:o("dashboard.quick.castaways","Castaways")})]}),n.jsx(ne,{copyKey:"dashboard.quick.castaways_desc",as:"p",className:"text-neutral-500 text-sm mt-1",children:o("dashboard.quick.castaways_desc","Meet the players")})]})]})}function sse({leagueCount:e,activeCastaways:t,totalPoints:r}){const{getCopy:s}=Kt();return n.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-8",children:[n.jsxs("div",{className:"bg-white rounded-2xl p-5 border border-cream-200 text-center",children:[n.jsx("div",{className:"w-12 h-12 bg-burgundy-100 rounded-xl flex items-center justify-center mx-auto mb-3",children:n.jsx(Ke,{className:"h-6 w-6 text-burgundy-500"})}),n.jsx("p",{className:"text-3xl font-display font-bold text-neutral-800",children:e}),n.jsx(ne,{copyKey:"dashboard.stats.my_leagues",as:"p",className:"text-sm text-neutral-500 mt-1",children:s("dashboard.stats.my_leagues","My Leagues")})]}),n.jsxs("div",{className:"bg-white rounded-2xl p-5 border border-cream-200 text-center",children:[n.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-xl flex items-center justify-center mx-auto mb-3",children:n.jsx(Rr,{className:"h-6 w-6 text-orange-500"})}),n.jsx("p",{className:"text-3xl font-display font-bold text-neutral-800",children:t}),n.jsx(ne,{copyKey:"dashboard.stats.active_castaways",as:"p",className:"text-sm text-neutral-500 mt-1",children:s("dashboard.stats.active_castaways","Active Castaways")})]}),n.jsxs("div",{className:"bg-white rounded-2xl p-5 border border-cream-200 text-center",children:[n.jsx("div",{className:"w-12 h-12 bg-amber-100 rounded-xl flex items-center justify-center mx-auto mb-3",children:n.jsx(ds,{className:"h-6 w-6 text-amber-600"})}),n.jsx("p",{className:"text-3xl font-display font-bold text-neutral-800",children:r}),n.jsx(ne,{copyKey:"dashboard.stats.total_points",as:"p",className:"text-sm text-neutral-500 mt-1",children:s("dashboard.stats.total_points","Total Points")})]})]})}function ase({rank:e,totalPoints:t}){const{getCopy:r}=Kt();return n.jsx(se,{to:"/leaderboard",className:"block bg-white hover:bg-cream-50 rounded-2xl p-6 border border-cream-200 mb-8 transition-colors group",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-14 h-14 bg-amber-100 rounded-xl flex items-center justify-center group-hover:bg-amber-500 transition-colors",children:n.jsx(fr,{className:"h-7 w-7 text-amber-600 group-hover:text-white transition-colors"})}),n.jsxs("div",{children:[n.jsx(ne,{copyKey:"dashboard.rank.title",as:"h3",className:"font-bold text-lg text-neutral-800",children:r("dashboard.rank.title","Your Global Rank")}),n.jsxs("p",{className:"text-neutral-500 text-sm",children:[t," ",n.jsx(ne,{copyKey:"dashboard.rank.points_label",as:"span",className:"text-neutral-500 text-sm",children:r("dashboard.rank.points_label","points earned this season")})]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("p",{className:"text-4xl font-display font-bold text-burgundy-500",children:["#",e]}),n.jsx(ne,{copyKey:"dashboard.rank.out_of",as:"p",className:"text-xs text-neutral-400 mt-1",children:r("dashboard.rank.out_of","out of all players")})]})]})})}function nr(e,t){return t||`https://api.dicebear.com/7.x/initials/svg?seed=${encodeURIComponent(e)}&backgroundColor=8B0000&textColor=ffffff&fontSize=40`}function ise({leagueId:e,leagueName:t,seasonId:r}){const{user:s}=Et(),a=at(),[i,o]=$.useState(!1),[l,u]=$.useState(null),[d,p]=$.useState(!1),[f,m]=$.useState(null),[x,y]=$.useState({days:0,hours:0,minutes:0}),{data:g}=ie({queryKey:["currentEpisode",r],queryFn:async()=>{const A=new Date().toISOString(),{data:R,error:O}=await X.from("episodes").select("*").eq("season_id",r).gt("number",1).gte("picks_lock_at",A).order("air_date",{ascending:!0}).limit(1).single();if(O&&O.code!=="PGRST116")throw O;return R},enabled:!!r}),{data:b}=ie({queryKey:["roster",e,s==null?void 0:s.id],queryFn:async()=>{const{data:A,error:R}=await X.from("rosters").select("id, castaway_id, castaways(id, name, photo_url, status)").eq("league_id",e).eq("user_id",s.id).is("dropped_at",null);if(R)throw R;return A},enabled:!!e&&!!(s!=null&&s.id)}),{data:_}=ie({queryKey:["currentPick",e,g==null?void 0:g.id,s==null?void 0:s.id],queryFn:async()=>{if(!(g!=null&&g.id))return null;const{data:A,error:R}=await X.from("weekly_picks").select("*").eq("league_id",e).eq("episode_id",g.id).eq("user_id",s.id).single();if(R&&R.code!=="PGRST116")throw R;return A},enabled:!!e&&!!(g!=null&&g.id)&&!!(s!=null&&s.id)}),{data:w}=ie({queryKey:["castawayStats",e,s==null?void 0:s.id],queryFn:async()=>{if(!b)return[];const A=b.map(B=>B.castaway_id);if(A.length===0)return[];const{data:R,error:O}=await X.from("weekly_picks").select("castaway_id, points_earned").eq("league_id",e).eq("user_id",s.id).in("castaway_id",A).in("status",["locked","auto_picked"]);if(O)throw O;const M=new Map;return A.forEach(B=>{M.set(B,{castaway_id:B,total_points:0,times_picked:0})}),R==null||R.forEach(B=>{if(B.castaway_id){const U=M.get(B.castaway_id);U&&(U.total_points+=B.points_earned||0,U.times_picked+=1)}}),Array.from(M.values())},enabled:!!e&&!!(s!=null&&s.id)&&!!b&&b.length>0});$.useEffect(()=>{if(!(g!=null&&g.picks_lock_at))return;const A=()=>{const O=new Date(g.picks_lock_at).getTime(),M=Date.now(),B=Math.max(0,O-M);y({days:Math.floor(B/(1e3*60*60*24)),hours:Math.floor(B%(1e3*60*60*24)/(1e3*60*60)),minutes:Math.floor(B%(1e3*60*60)/(1e3*60))})};A();const R=setInterval(A,6e4);return()=>clearInterval(R)},[g==null?void 0:g.picks_lock_at]),$.useEffect(()=>{_!=null&&_.castaway_id&&u(_.castaway_id)},[_==null?void 0:_.castaway_id]);const S=ke({mutationFn:async A=>{if(!(g!=null&&g.id))throw new Error("No episode available");const{data:{session:R}}=await X.auth.getSession();if(!(R!=null&&R.access_token))throw new Error("Not authenticated");const O=await fP(`/leagues/${e}/picks`,{castaway_id:A,episode_id:g.id},R.access_token);if(O.error)throw new Error(O.error);return O.data},onSuccess:()=>{a.invalidateQueries({queryKey:["currentPick",e,g==null?void 0:g.id,s==null?void 0:s.id]}),a.invalidateQueries({queryKey:["next-episode-picks"]}),p(!0),m(null),setTimeout(()=>{p(!1),o(!1)},2e3)},onError:A=>{m(A.message||"Failed to save pick"),p(!1)}}),j=()=>{l&&(m(null),S.mutate(l))};if(!g||g.picks_lock_at&&new Date(g.picks_lock_at)<=new Date)return null;const C=!!(_!=null&&_.castaway_id),E=(b==null?void 0:b.filter(A=>{var R;return((R=A.castaways)==null?void 0:R.status)==="active"}))||[],T=b==null?void 0:b.find(A=>A.castaway_id===(_==null?void 0:_.castaway_id)),I=A=>w==null?void 0:w.find(R=>R.castaway_id===A);return i?n.jsxs("div",{className:"mt-4 bg-white rounded-xl border-2 border-burgundy-200 overflow-hidden",children:[n.jsxs("div",{className:"p-4 bg-burgundy-50 border-b border-burgundy-100 flex items-center justify-between cursor-pointer",onClick:()=>o(!1),children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(kn,{className:"h-5 w-5 text-burgundy-600"}),n.jsxs("div",{children:[n.jsxs("p",{className:"font-medium text-burgundy-800",children:["Episode ",g.number," Pick"]}),n.jsxs("div",{className:"flex items-center gap-1 text-sm text-burgundy-600",children:[n.jsx(Nt,{className:"h-3 w-3"}),x.days>0?`${x.days}d ${x.hours}h left`:`${x.hours}h ${x.minutes}m left`]})]})]}),n.jsx(fs,{className:"h-5 w-5 text-burgundy-400"})]}),n.jsx("div",{className:"p-4 space-y-2 max-h-64 overflow-y-auto",children:E.length===0?n.jsxs("div",{className:"text-center py-4",children:[n.jsx(yt,{className:"h-8 w-8 text-orange-500 mx-auto mb-2"}),n.jsx("p",{className:"text-sm text-neutral-600",children:"No active castaways available"})]}):E.map(A=>{const R=I(A.castaway_id),O=l===A.castaway_id,M=(_==null?void 0:_.castaway_id)===A.castaway_id;return n.jsxs("button",{onClick:()=>u(A.castaway_id),className:`w-full flex items-center gap-3 p-3 rounded-xl transition-all ${O?"bg-burgundy-100 border-2 border-burgundy-400":"bg-cream-50 border-2 border-transparent hover:border-cream-300"}`,children:[n.jsx("img",{src:nr(A.castaways.name,A.castaways.photo_url),alt:A.castaways.name,className:"w-10 h-10 rounded-full object-cover"}),n.jsxs("div",{className:"flex-1 text-left",children:[n.jsx("p",{className:"font-medium text-neutral-800",children:A.castaways.name}),R&&R.times_picked>0&&n.jsxs("p",{className:"text-xs text-neutral-500",children:[n.jsx(zn,{className:"h-3 w-3 inline mr-1 text-amber-500"}),R.total_points," pts from ",R.times_picked," pick",R.times_picked!==1?"s":""]})]}),M&&n.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full",children:"Current"}),O&&!M&&n.jsx("div",{className:"w-5 h-5 rounded-full bg-burgundy-500 flex items-center justify-center",children:n.jsx(xt,{className:"h-4 w-4 text-white"})})]},A.id)})}),n.jsxs("div",{className:"p-4 border-t border-cream-100 bg-cream-50/50",children:[d&&n.jsxs("div",{className:"mb-3 p-3 bg-green-50 border border-green-200 rounded-lg flex items-center gap-2",children:[n.jsx(xt,{className:"h-4 w-4 text-green-600"}),n.jsx("p",{className:"text-sm text-green-700 font-medium",children:"Pick saved!"})]}),f&&n.jsxs("div",{className:"mb-3 p-3 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2",children:[n.jsx(yt,{className:"h-4 w-4 text-red-600"}),n.jsx("p",{className:"text-sm text-red-700",children:f})]}),n.jsx("button",{onClick:j,disabled:!l||S.isPending,className:`w-full py-2.5 rounded-lg font-medium transition-all ${l?"bg-burgundy-500 hover:bg-burgundy-600 text-white":"bg-cream-200 text-neutral-400 cursor-not-allowed"}`,children:S.isPending?n.jsxs("span",{className:"flex items-center justify-center gap-2",children:[n.jsx(be,{className:"h-4 w-4 animate-spin"}),"Saving..."]}):C?"Update Pick":"Confirm Pick"})]})]}):n.jsx("div",{className:`mt-4 p-4 rounded-xl border-2 transition-all cursor-pointer ${C?"bg-green-50 border-green-200 hover:border-green-300":"bg-burgundy-50 border-burgundy-200 hover:border-burgundy-300"}`,onClick:()=>o(!0),children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${C?"bg-green-100":"bg-burgundy-100"}`,children:C?n.jsx(xt,{className:"h-5 w-5 text-green-600"}):n.jsx(kn,{className:"h-5 w-5 text-burgundy-600"})}),n.jsxs("div",{children:[n.jsxs("p",{className:`font-medium ${C?"text-green-800":"text-burgundy-800"}`,children:["Episode ",g.number," Pick"]}),C&&T?n.jsxs("p",{className:"text-sm text-green-600",children:[T.castaways.name," selected"]}):n.jsx("p",{className:"text-sm text-burgundy-600",children:x.days>0?`${x.days}d ${x.hours}h left`:`${x.hours}h ${x.minutes}m left`})]})]}),n.jsx(en,{className:`h-5 w-5 ${C?"text-green-400":"text-burgundy-400"}`})]})})}function ose({leagueId:e,leagueName:t,leagueCode:r,totalPoints:s,rank:a,rosters:i,seasonId:o,showWeeklyPick:l=!1,castawayPoints:u=[]}){const{getCopy:d}=Kt(),p=f=>{const m=u.find(x=>x.castaway_id===f);return(m==null?void 0:m.total_points)||0};return n.jsxs("div",{className:"bg-white rounded-2xl border border-cream-200 overflow-hidden",children:[n.jsx(se,{to:`/leagues/${e}`,className:"block hover:bg-cream-50 transition-colors group",children:n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-lg text-neutral-800 group-hover:text-burgundy-600 transition-colors",children:t}),n.jsx("p",{className:"text-sm text-neutral-400 font-mono",children:r})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-2xl font-display text-burgundy-500",children:s}),n.jsx(ne,{copyKey:"dashboard.league.points_label",as:"p",className:"text-xs text-neutral-400",children:d("dashboard.league.points_label","points")})]})]}),n.jsx("div",{className:"flex gap-3",children:i.length>0?i.map(f=>{var x,y,g,b,_,w,S,j;const m=p(f.castaway_id);return n.jsxs("div",{className:`flex items-center gap-3 px-4 py-3 rounded-xl flex-1 ${((x=f.castaway)==null?void 0:x.status)==="eliminated"?"bg-neutral-100 opacity-60":"bg-cream-50"}`,children:[n.jsx("img",{src:nr(((y=f.castaway)==null?void 0:y.name)||"Unknown",(g=f.castaway)==null?void 0:g.photo_url),alt:((b=f.castaway)==null?void 0:b.name)||"Castaway",className:`w-10 h-10 rounded-full object-cover ${((_=f.castaway)==null?void 0:_.status)==="eliminated"?"grayscale":""}`}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:`font-medium text-sm ${((w=f.castaway)==null?void 0:w.status)==="eliminated"?"text-neutral-500 line-through":"text-neutral-800"}`,children:((S=f.castaway)==null?void 0:S.name)||"Unknown"}),n.jsx("p",{className:"text-xs text-neutral-400",children:((j=f.castaway)==null?void 0:j.status)==="eliminated"?d("dashboard.league.eliminated","Eliminated"):d("dashboard.league.active","Active")})]}),m>0&&n.jsxs("div",{className:"flex items-center gap-1 bg-amber-50 px-2 py-1 rounded-lg",children:[n.jsx(zn,{className:"h-3 w-3 text-amber-500"}),n.jsx("span",{className:"text-xs font-semibold text-amber-700",children:m})]})]},f.castaway_id)}):n.jsx("div",{className:"flex-1 text-center py-4 bg-cream-50 rounded-xl",children:n.jsx(ne,{copyKey:"dashboard.league.no_castaways",as:"p",className:"text-sm text-neutral-400",children:d("dashboard.league.no_castaways","No castaways drafted yet")})})}),a&&n.jsxs("div",{className:"mt-4 pt-4 border-t border-cream-100 flex items-center justify-between",children:[n.jsx(ne,{copyKey:"dashboard.league.your_rank",as:"span",className:"text-sm text-neutral-500",children:d("dashboard.league.your_rank","Your Rank")}),n.jsxs("span",{className:"font-semibold text-burgundy-500",children:["#",a]})]})]})}),l&&o&&n.jsx("div",{className:"px-6 pb-6",children:n.jsx(ise,{leagueId:e,leagueName:t,seasonId:o})})]})}function lse({season:e}){const{getCopy:t}=Kt();return n.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-cream-200",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"w-10 h-10 bg-burgundy-100 rounded-xl flex items-center justify-center",children:n.jsx(fx,{className:"h-5 w-5 text-burgundy-500"})}),n.jsxs("div",{children:[n.jsxs("h3",{className:"font-semibold text-neutral-800",children:[n.jsx(ne,{copyKey:"dashboard.season.label",as:"span",children:t("dashboard.season.label","Season")})," ",e.number]}),n.jsx("p",{className:"text-sm text-neutral-400",children:e.name})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsx(ne,{copyKey:"dashboard.season.registration_opens",as:"span",className:"text-neutral-500",children:t("dashboard.season.registration_opens","Registration Opens")}),n.jsx("span",{className:"text-burgundy-500 font-semibold",children:km(e.registration_opens_at)})]}),n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsx(ne,{copyKey:"dashboard.season.premiere",as:"span",className:"text-neutral-500",children:t("dashboard.season.premiere","Premiere")}),n.jsx("span",{className:"text-neutral-800 font-semibold",children:km(e.premiere_at)})]}),n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsx(ne,{copyKey:"dashboard.season.draft_deadline",as:"span",className:"text-neutral-500",children:t("dashboard.season.draft_deadline","Draft Deadline")}),n.jsx("span",{className:"text-neutral-800 font-semibold",children:km(e.draft_deadline)})]})]})]})}function cse(){const{getCopy:e}=Kt();return n.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-cream-200",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"w-10 h-10 bg-amber-100 rounded-xl flex items-center justify-center",children:n.jsx(wn,{className:"h-5 w-5 text-amber-600"})}),n.jsx(ne,{copyKey:"dashboard.timeline.title",as:"h3",className:"font-semibold text-neutral-800",children:e("dashboard.timeline.title","Weekly Timeline")})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-burgundy-500 mt-2 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx(ne,{copyKey:"dashboard.timeline.picks_lock_time",as:"p",className:"text-sm font-medium text-neutral-800",children:e("dashboard.timeline.picks_lock_time","Wednesday 8pm ET / 5pm PT")}),n.jsx(ne,{copyKey:"dashboard.timeline.picks_lock_desc",as:"p",className:"text-xs text-neutral-500",children:e("dashboard.timeline.picks_lock_desc","Picks lock & episode airs on CBS")})]})]}),n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 mt-2 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx(ne,{copyKey:"dashboard.timeline.results_time",as:"p",className:"text-sm font-medium text-neutral-800",children:e("dashboard.timeline.results_time","Wednesday ~9pm PT")}),n.jsx(ne,{copyKey:"dashboard.timeline.results_desc",as:"p",className:"text-xs text-neutral-500",children:e("dashboard.timeline.results_desc","Results posted (exceptions may apply)")})]})]}),n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500 mt-2 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx(ne,{copyKey:"dashboard.timeline.picks_open_time",as:"p",className:"text-sm font-medium text-neutral-800",children:e("dashboard.timeline.picks_open_time","Friday 11am ET / 8am PT")}),n.jsx(ne,{copyKey:"dashboard.timeline.picks_open_desc",as:"p",className:"text-xs text-neutral-500",children:e("dashboard.timeline.picks_open_desc","Weekly picks open for next episode")})]})]})]})]})}function use({seasonStarted:e=!1}){const{getCopy:t}=Kt();return e?null:n.jsxs("div",{className:"bg-gradient-to-r from-teal-500 to-emerald-500 rounded-2xl p-5 text-white shadow-lg relative overflow-hidden",children:[n.jsx("div",{className:"absolute top-0 right-0 w-40 h-40 bg-white/10 rounded-full -translate-y-1/2 translate-x-1/3"}),n.jsx("div",{className:"absolute bottom-0 left-1/2 w-20 h-20 bg-white/5 rounded-full translate-y-1/2"}),n.jsxs("div",{className:"relative flex items-center justify-between gap-4",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-14 h-14 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center flex-shrink-0",children:n.jsx(nP,{className:"h-7 w-7 text-white"})}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(ne,{copyKey:"dashboard.trivia.title",as:"h3",className:"font-display font-bold text-xl",children:t("dashboard.trivia.title","Survivor Trivia")}),n.jsx(su,{className:"h-4 w-4 text-yellow-300"})]}),n.jsx(ne,{copyKey:"dashboard.trivia.description",as:"p",className:"text-teal-100 text-sm",children:t("dashboard.trivia.description","Test your knowledge with 24 questions while you wait for the season!")})]})]}),n.jsxs("div",{className:"flex items-center gap-4 flex-shrink-0",children:[n.jsxs("div",{className:"hidden md:flex items-center gap-2 bg-white/15 backdrop-blur-sm rounded-lg px-3 py-2",children:[n.jsx(ot,{className:"h-4 w-4 text-yellow-300"}),n.jsx(ne,{copyKey:"dashboard.trivia.compete",as:"span",className:"text-sm font-medium",children:t("dashboard.trivia.compete","Compete for #1")})]}),n.jsxs(se,{to:"/trivia",className:"flex items-center justify-center gap-2 bg-white text-teal-600 font-bold px-5 py-2.5 rounded-xl hover:bg-teal-50 transition-colors whitespace-nowrap shadow-md",children:[n.jsx(ne,{copyKey:"dashboard.trivia.cta",as:"span",children:t("dashboard.trivia.cta","Play Now")}),n.jsx(Hn,{className:"h-4 w-4"})]})]})]})]})}function Ht(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function Ki(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}const mP=6048e5,dse=864e5,Yf=43200,WE=1440;let hse={};function fh(){return hse}function Ld(e,t){var l,u,d,p;const r=fh(),s=(t==null?void 0:t.weekStartsOn)??((u=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:u.weekStartsOn)??r.weekStartsOn??((p=(d=r.locale)==null?void 0:d.options)==null?void 0:p.weekStartsOn)??0,a=Ht(e),i=a.getDay(),o=(i<s?7:0)+i-s;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function mp(e){return Ld(e,{weekStartsOn:1})}function pP(e){const t=Ht(e),r=t.getFullYear(),s=Ki(e,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const a=mp(s),i=Ki(e,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const o=mp(i);return t.getTime()>=a.getTime()?r+1:t.getTime()>=o.getTime()?r:r-1}function GE(e){const t=Ht(e);return t.setHours(0,0,0,0),t}function pp(e){const t=Ht(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function fse(e,t){const r=GE(e),s=GE(t),a=+r-pp(r),i=+s-pp(s);return Math.round((a-i)/dse)}function mse(e){const t=pP(e),r=Ki(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),mp(r)}function Cm(e,t){const r=Ht(e),s=Ht(t),a=r.getTime()-s.getTime();return a<0?-1:a>0?1:a}function pse(e){return Ki(e,Date.now())}function xse(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function gse(e){if(!xse(e)&&typeof e!="number")return!1;const t=Ht(e);return!isNaN(Number(t))}function yse(e,t){const r=Ht(e),s=Ht(t),a=r.getFullYear()-s.getFullYear(),i=r.getMonth()-s.getMonth();return a*12+i}function bse(e){return t=>{const s=(e?Math[e]:Math.trunc)(t);return s===0?0:s}}function vse(e,t){return+Ht(e)-+Ht(t)}function wse(e){const t=Ht(e);return t.setHours(23,59,59,999),t}function _se(e){const t=Ht(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function jse(e){const t=Ht(e);return+wse(t)==+_se(t)}function Nse(e,t){const r=Ht(e),s=Ht(t),a=Cm(r,s),i=Math.abs(yse(r,s));let o;if(i<1)o=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-a*i);let l=Cm(r,s)===-a;jse(Ht(e))&&i===1&&Cm(e,s)===1&&(l=!1),o=a*(i-Number(l))}return o===0?0:o}function Sse(e,t,r){const s=vse(e,t)/1e3;return bse(r==null?void 0:r.roundingMethod)(s)}function kse(e){const t=Ht(e),r=Ki(e,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}const Ese={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Cse=(e,t,r)=>{let s;const a=Ese[e];return typeof a=="string"?s=a:t===1?s=a.one:s=a.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+s:s+" ago":s};function ly(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const Tse={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Rse={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Ase={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Pse={date:ly({formats:Tse,defaultWidth:"full"}),time:ly({formats:Rse,defaultWidth:"full"}),dateTime:ly({formats:Ase,defaultWidth:"full"})},Ose={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Ise=(e,t,r,s)=>Ose[e];function Vu(e){return(t,r)=>{const s=r!=null&&r.context?String(r.context):"standalone";let a;if(s==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=r!=null&&r.width?String(r.width):o;a=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=r!=null&&r.width?String(r.width):e.defaultWidth;a=e.values[l]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(t):t;return a[i]}}const Lse={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Mse={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Dse={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},$se={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},qse={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Fse={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Use=(e,t)=>{const r=Number(e),s=r%100;if(s>20||s<10)switch(s%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},Bse={ordinalNumber:Use,era:Vu({values:Lse,defaultWidth:"wide"}),quarter:Vu({values:Mse,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Vu({values:Dse,defaultWidth:"wide"}),day:Vu({values:$se,defaultWidth:"wide"}),dayPeriod:Vu({values:qse,defaultWidth:"wide",formattingValues:Fse,defaultFormattingWidth:"wide"})};function Qu(e){return(t,r={})=>{const s=r.width,a=s&&e.matchPatterns[s]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;const o=i[0],l=s&&e.parsePatterns[s]||e.parsePatterns[e.defaultParseWidth],u=Array.isArray(l)?Kse(l,f=>f.test(o)):Hse(l,f=>f.test(o));let d;d=e.valueCallback?e.valueCallback(u):u,d=r.valueCallback?r.valueCallback(d):d;const p=t.slice(o.length);return{value:d,rest:p}}}function Hse(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function Kse(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function zse(e){return(t,r={})=>{const s=t.match(e.matchPattern);if(!s)return null;const a=s[0],i=t.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=r.valueCallback?r.valueCallback(o):o;const l=t.slice(a.length);return{value:o,rest:l}}}const Wse=/^(\d+)(th|st|nd|rd)?/i,Gse=/\d+/i,Vse={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Qse={any:[/^b/i,/^(a|c)/i]},Yse={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Jse={any:[/1/i,/2/i,/3/i,/4/i]},Xse={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Zse={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},eae={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},tae={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},nae={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},rae={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},sae={ordinalNumber:zse({matchPattern:Wse,parsePattern:Gse,valueCallback:e=>parseInt(e,10)}),era:Qu({matchPatterns:Vse,defaultMatchWidth:"wide",parsePatterns:Qse,defaultParseWidth:"any"}),quarter:Qu({matchPatterns:Yse,defaultMatchWidth:"wide",parsePatterns:Jse,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Qu({matchPatterns:Xse,defaultMatchWidth:"wide",parsePatterns:Zse,defaultParseWidth:"any"}),day:Qu({matchPatterns:eae,defaultMatchWidth:"wide",parsePatterns:tae,defaultParseWidth:"any"}),dayPeriod:Qu({matchPatterns:nae,defaultMatchWidth:"any",parsePatterns:rae,defaultParseWidth:"any"})},xP={code:"en-US",formatDistance:Cse,formatLong:Pse,formatRelative:Ise,localize:Bse,match:sae,options:{weekStartsOn:0,firstWeekContainsDate:1}};function aae(e){const t=Ht(e);return fse(t,kse(t))+1}function iae(e){const t=Ht(e),r=+mp(t)-+mse(t);return Math.round(r/mP)+1}function gP(e,t){var p,f,m,x;const r=Ht(e),s=r.getFullYear(),a=fh(),i=(t==null?void 0:t.firstWeekContainsDate)??((f=(p=t==null?void 0:t.locale)==null?void 0:p.options)==null?void 0:f.firstWeekContainsDate)??a.firstWeekContainsDate??((x=(m=a.locale)==null?void 0:m.options)==null?void 0:x.firstWeekContainsDate)??1,o=Ki(e,0);o.setFullYear(s+1,0,i),o.setHours(0,0,0,0);const l=Ld(o,t),u=Ki(e,0);u.setFullYear(s,0,i),u.setHours(0,0,0,0);const d=Ld(u,t);return r.getTime()>=l.getTime()?s+1:r.getTime()>=d.getTime()?s:s-1}function oae(e,t){var l,u,d,p;const r=fh(),s=(t==null?void 0:t.firstWeekContainsDate)??((u=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:u.firstWeekContainsDate)??r.firstWeekContainsDate??((p=(d=r.locale)==null?void 0:d.options)==null?void 0:p.firstWeekContainsDate)??1,a=gP(e,t),i=Ki(e,0);return i.setFullYear(a,0,s),i.setHours(0,0,0,0),Ld(i,t)}function lae(e,t){const r=Ht(e),s=+Ld(r,t)-+oae(r,t);return Math.round(s/mP)+1}function Mt(e,t){const r=e<0?"-":"",s=Math.abs(e).toString().padStart(t,"0");return r+s}const hi={y(e,t){const r=e.getFullYear(),s=r>0?r:1-r;return Mt(t==="yy"?s%100:s,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):Mt(r+1,2)},d(e,t){return Mt(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return Mt(e.getHours()%12||12,t.length)},H(e,t){return Mt(e.getHours(),t.length)},m(e,t){return Mt(e.getMinutes(),t.length)},s(e,t){return Mt(e.getSeconds(),t.length)},S(e,t){const r=t.length,s=e.getMilliseconds(),a=Math.trunc(s*Math.pow(10,r-3));return Mt(a,t.length)}},Bl={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},VE={G:function(e,t,r){const s=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(s,{width:"abbreviated"});case"GGGGG":return r.era(s,{width:"narrow"});case"GGGG":default:return r.era(s,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const s=e.getFullYear(),a=s>0?s:1-s;return r.ordinalNumber(a,{unit:"year"})}return hi.y(e,t)},Y:function(e,t,r,s){const a=gP(e,s),i=a>0?a:1-a;if(t==="YY"){const o=i%100;return Mt(o,2)}return t==="Yo"?r.ordinalNumber(i,{unit:"year"}):Mt(i,t.length)},R:function(e,t){const r=pP(e);return Mt(r,t.length)},u:function(e,t){const r=e.getFullYear();return Mt(r,t.length)},Q:function(e,t,r){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(s);case"QQ":return Mt(s,2);case"Qo":return r.ordinalNumber(s,{unit:"quarter"});case"QQQ":return r.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(s,{width:"wide",context:"formatting"})}},q:function(e,t,r){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(s);case"qq":return Mt(s,2);case"qo":return r.ordinalNumber(s,{unit:"quarter"});case"qqq":return r.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(s,{width:"wide",context:"standalone"})}},M:function(e,t,r){const s=e.getMonth();switch(t){case"M":case"MM":return hi.M(e,t);case"Mo":return r.ordinalNumber(s+1,{unit:"month"});case"MMM":return r.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(s,{width:"wide",context:"formatting"})}},L:function(e,t,r){const s=e.getMonth();switch(t){case"L":return String(s+1);case"LL":return Mt(s+1,2);case"Lo":return r.ordinalNumber(s+1,{unit:"month"});case"LLL":return r.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(s,{width:"wide",context:"standalone"})}},w:function(e,t,r,s){const a=lae(e,s);return t==="wo"?r.ordinalNumber(a,{unit:"week"}):Mt(a,t.length)},I:function(e,t,r){const s=iae(e);return t==="Io"?r.ordinalNumber(s,{unit:"week"}):Mt(s,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):hi.d(e,t)},D:function(e,t,r){const s=aae(e);return t==="Do"?r.ordinalNumber(s,{unit:"dayOfYear"}):Mt(s,t.length)},E:function(e,t,r){const s=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(s,{width:"short",context:"formatting"});case"EEEE":default:return r.day(s,{width:"wide",context:"formatting"})}},e:function(e,t,r,s){const a=e.getDay(),i=(a-s.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return Mt(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,r,s){const a=e.getDay(),i=(a-s.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return Mt(i,t.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,r){const s=e.getDay(),a=s===0?7:s;switch(t){case"i":return String(a);case"ii":return Mt(a,t.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(s,{width:"short",context:"formatting"});case"iiii":default:return r.day(s,{width:"wide",context:"formatting"})}},a:function(e,t,r){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,r){const s=e.getHours();let a;switch(s===12?a=Bl.noon:s===0?a=Bl.midnight:a=s/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,r){const s=e.getHours();let a;switch(s>=17?a=Bl.evening:s>=12?a=Bl.afternoon:s>=4?a=Bl.morning:a=Bl.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let s=e.getHours()%12;return s===0&&(s=12),r.ordinalNumber(s,{unit:"hour"})}return hi.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):hi.H(e,t)},K:function(e,t,r){const s=e.getHours()%12;return t==="Ko"?r.ordinalNumber(s,{unit:"hour"}):Mt(s,t.length)},k:function(e,t,r){let s=e.getHours();return s===0&&(s=24),t==="ko"?r.ordinalNumber(s,{unit:"hour"}):Mt(s,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):hi.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):hi.s(e,t)},S:function(e,t){return hi.S(e,t)},X:function(e,t,r){const s=e.getTimezoneOffset();if(s===0)return"Z";switch(t){case"X":return YE(s);case"XXXX":case"XX":return po(s);case"XXXXX":case"XXX":default:return po(s,":")}},x:function(e,t,r){const s=e.getTimezoneOffset();switch(t){case"x":return YE(s);case"xxxx":case"xx":return po(s);case"xxxxx":case"xxx":default:return po(s,":")}},O:function(e,t,r){const s=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+QE(s,":");case"OOOO":default:return"GMT"+po(s,":")}},z:function(e,t,r){const s=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+QE(s,":");case"zzzz":default:return"GMT"+po(s,":")}},t:function(e,t,r){const s=Math.trunc(e.getTime()/1e3);return Mt(s,t.length)},T:function(e,t,r){const s=e.getTime();return Mt(s,t.length)}};function QE(e,t=""){const r=e>0?"-":"+",s=Math.abs(e),a=Math.trunc(s/60),i=s%60;return i===0?r+String(a):r+String(a)+t+Mt(i,2)}function YE(e,t){return e%60===0?(e>0?"-":"+")+Mt(Math.abs(e)/60,2):po(e,t)}function po(e,t=""){const r=e>0?"-":"+",s=Math.abs(e),a=Mt(Math.trunc(s/60),2),i=Mt(s%60,2);return r+a+t+i}const JE=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},yP=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},cae=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],s=r[1],a=r[2];if(!a)return JE(e,t);let i;switch(s){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",JE(s,t)).replace("{{time}}",yP(a,t))},uae={p:yP,P:cae},dae=/^D+$/,hae=/^Y+$/,fae=["D","DD","YY","YYYY"];function mae(e){return dae.test(e)}function pae(e){return hae.test(e)}function xae(e,t,r){const s=gae(e,t,r);if(console.warn(s),fae.includes(e))throw new RangeError(s)}function gae(e,t,r){const s=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${s} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const yae=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,bae=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,vae=/^'([^]*?)'?$/,wae=/''/g,_ae=/[a-zA-Z]/;function XE(e,t,r){var p,f,m,x;const s=fh(),a=s.locale??xP,i=s.firstWeekContainsDate??((f=(p=s.locale)==null?void 0:p.options)==null?void 0:f.firstWeekContainsDate)??1,o=s.weekStartsOn??((x=(m=s.locale)==null?void 0:m.options)==null?void 0:x.weekStartsOn)??0,l=Ht(e);if(!gse(l))throw new RangeError("Invalid time value");let u=t.match(bae).map(y=>{const g=y[0];if(g==="p"||g==="P"){const b=uae[g];return b(y,a.formatLong)}return y}).join("").match(yae).map(y=>{if(y==="''")return{isToken:!1,value:"'"};const g=y[0];if(g==="'")return{isToken:!1,value:jae(y)};if(VE[g])return{isToken:!0,value:y};if(g.match(_ae))throw new RangeError("Format string contains an unescaped latin alphabet character `"+g+"`");return{isToken:!1,value:y}});a.localize.preprocessor&&(u=a.localize.preprocessor(l,u));const d={firstWeekContainsDate:i,weekStartsOn:o,locale:a};return u.map(y=>{if(!y.isToken)return y.value;const g=y.value;(pae(g)||mae(g))&&xae(g,t,String(e));const b=VE[g[0]];return b(l,g,a.localize,d)}).join("")}function jae(e){const t=e.match(vae);return t?t[1].replace(wae,"'"):e}function Nae(e,t,r){const s=fh(),a=(r==null?void 0:r.locale)??s.locale??xP,i=2520,o=Cm(e,t);if(isNaN(o))throw new RangeError("Invalid time value");const l=Object.assign({},r,{addSuffix:r==null?void 0:r.addSuffix,comparison:o});let u,d;o>0?(u=Ht(t),d=Ht(e)):(u=Ht(e),d=Ht(t));const p=Sse(d,u),f=(pp(d)-pp(u))/1e3,m=Math.round((p-f)/60);let x;if(m<2)return r!=null&&r.includeSeconds?p<5?a.formatDistance("lessThanXSeconds",5,l):p<10?a.formatDistance("lessThanXSeconds",10,l):p<20?a.formatDistance("lessThanXSeconds",20,l):p<40?a.formatDistance("halfAMinute",0,l):p<60?a.formatDistance("lessThanXMinutes",1,l):a.formatDistance("xMinutes",1,l):m===0?a.formatDistance("lessThanXMinutes",1,l):a.formatDistance("xMinutes",m,l);if(m<45)return a.formatDistance("xMinutes",m,l);if(m<90)return a.formatDistance("aboutXHours",1,l);if(m<WE){const y=Math.round(m/60);return a.formatDistance("aboutXHours",y,l)}else{if(m<i)return a.formatDistance("xDays",1,l);if(m<Yf){const y=Math.round(m/WE);return a.formatDistance("xDays",y,l)}else if(m<Yf*2)return x=Math.round(m/Yf),a.formatDistance("aboutXMonths",x,l)}if(x=Nse(d,u),x<12){const y=Math.round(m/Yf);return a.formatDistance("xMonths",y,l)}else{const y=x%12,g=Math.trunc(x/12);return y<3?a.formatDistance("aboutXYears",g,l):y<9?a.formatDistance("overXYears",g,l):a.formatDistance("almostXYears",g+1,l)}}function bP(e,t){return Nae(e,pse(e),t)}function Sae(){const{data:e,isLoading:t}=ie({queryKey:["announcements"],queryFn:async()=>{const s=new Date().toISOString(),{data:a,error:i}=await X.from("announcements").select("*").eq("is_active",!0).or(`expires_at.is.null,expires_at.gt.${s}`).order("priority",{ascending:!1}).order("created_at",{ascending:!1}).limit(3);if(i)throw i;return a||[]},staleTime:3e5});if(t)return n.jsx("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 p-6",children:n.jsxs("div",{className:"animate-pulse",children:[n.jsx("div",{className:"h-5 w-32 bg-cream-200 rounded mb-4"}),n.jsx("div",{className:"h-4 w-full bg-cream-100 rounded mb-2"}),n.jsx("div",{className:"h-4 w-3/4 bg-cream-100 rounded"})]})});if(!e||e.length===0)return null;const r=s=>{switch(s){case"urgent":return{bg:"bg-red-50",border:"border-red-200",icon:Tt,iconColor:"text-red-500",titleColor:"text-red-700"};case"high":return{bg:"bg-amber-50",border:"border-amber-200",icon:Od,iconColor:"text-amber-500",titleColor:"text-amber-700"};case"medium":return{bg:"bg-blue-50",border:"border-blue-200",icon:dx,iconColor:"text-blue-500",titleColor:"text-blue-700"};default:return{bg:"bg-green-50",border:"border-green-200",icon:dj,iconColor:"text-green-500",titleColor:"text-green-700"}}};return n.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 overflow-hidden",children:[n.jsxs("div",{className:"p-4 border-b border-cream-100 flex items-center gap-2",children:[n.jsx(Od,{className:"h-5 w-5 text-burgundy-500"}),n.jsx("h3",{className:"font-display font-bold text-neutral-800",children:"Announcements"})]}),n.jsx("div",{className:"divide-y divide-cream-100",children:e.map(s=>{const a=r(s.priority),i=a.icon;return n.jsx("div",{className:`p-4 ${a.bg} border-l-4 ${a.border}`,children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(i,{className:`h-5 w-5 ${a.iconColor} flex-shrink-0 mt-0.5`}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:`font-semibold ${a.titleColor} mb-1`,children:s.title}),n.jsx("p",{className:"text-neutral-600 text-sm line-clamp-2",children:s.body}),n.jsx("p",{className:"text-neutral-400 text-xs mt-2",children:bP(new Date(s.created_at),{addSuffix:!0})})]})]})},s.id)})})]})}function kae(e,t){if(!e)return"pre_registration";const r=new Date,s=new Date(e.registration_opens_at),a=new Date(e.premiere_at);return r<s?"pre_registration":r<a?"pre_draft":t?"active":"post_season"}function Eae(e,t){if(!e)return null;const r=new Date,s=new Date(e.picks_lock_at),a=new Date(e.air_date);new Date(a).setHours(21,0,0,0);const o=new Date(a);return o.setDate(o.getDate()+2),o.setHours(8,0,0,0),t!=null&&t.is_scored&&r<o?{phase:"results_posted",label:"Results Posted",description:`Episode ${t.number} scores are in! Check your points.`,ctaLabel:"View Results",ctaPath:"/episodes",color:"green"}:r<s?{phase:"make_pick",label:"Make Your Pick",description:`Choose your castaway for Episode ${e.number}`,ctaLabel:"Make Pick",ctaPath:"/pick",color:"burgundy",countdown:{label:"Picks lock in",targetTime:s}}:r<a?{phase:"picks_locked",label:"Picks Locked",description:"Your pick is locked. Episode airs tonight!",ctaLabel:"View Pick",ctaPath:"/pick",color:"orange",countdown:{label:"Episode airs in",targetTime:a}}:e.is_scored?null:{phase:"awaiting_results",label:"Awaiting Results",description:"Episode has aired. Results coming Friday!",ctaLabel:"View Teams",ctaPath:"/team",color:"amber"}}function Cae(){const{user:e}=Et(),{getCopy:t}=Kt(),{data:r}=ie({queryKey:["profile",e==null?void 0:e.id],queryFn:async()=>{const{data:C,error:E}=await X.from("users").select("*").eq("id",e.id).single();if(E){if(E.code==="PGRST116")return null;throw E}return C},enabled:!!(e!=null&&e.id),retry:3,retryDelay:C=>Math.min(1e3*2**C,3e3)}),{data:s}=ie({queryKey:["active-season"],queryFn:async()=>{const{data:C,error:E}=await X.from("seasons").select("*").eq("is_active",!0).single();if(E&&E.code!=="PGRST116")throw E;return C}}),{data:a}=ie({queryKey:["my-leagues-detailed",e==null?void 0:e.id],queryFn:async()=>{const{data:C,error:E}=await X.from("league_members").select(`
          league_id,
          total_points,
          rank,
          league:leagues (
            id,
            name,
            code,
            status,
            is_global,
            season_id
          )
        `).eq("user_id",e.id);if(E)throw E;return C.map(T=>({league_id:T.league_id,total_points:T.total_points,rank:T.rank,league:T.league})).filter(T=>T.league!==null)},enabled:!!(e!=null&&e.id)}),{data:i}=ie({queryKey:["my-rosters",e==null?void 0:e.id],queryFn:async()=>{const{data:C,error:E}=await X.from("rosters").select(`
          league_id,
          castaway_id,
          castaway:castaways (
            id,
            name,
            photo_url,
            status
          )
        `).eq("user_id",e.id).is("dropped_at",null);if(E)throw E;return C},enabled:!!(e!=null&&e.id)}),{data:o}=ie({queryKey:["castaway-points",e==null?void 0:e.id],queryFn:async()=>{const{data:C,error:E}=await X.from("weekly_picks").select("league_id, castaway_id, points_earned").eq("user_id",e.id).in("status",["locked","auto_picked"]);if(E)throw E;const T=new Map;return C==null||C.forEach(I=>{if(!I.castaway_id)return;T.has(I.league_id)||T.set(I.league_id,new Map);const A=T.get(I.league_id),R=A.get(I.castaway_id)||0;A.set(I.castaway_id,R+(I.points_earned||0))}),T},enabled:!!(e!=null&&e.id)}),{data:l}=ie({queryKey:["next-episode",s==null?void 0:s.id],queryFn:async()=>{const{data:C,error:E}=await X.from("episodes").select("*").eq("season_id",s.id).gt("air_date",new Date().toISOString()).order("air_date",{ascending:!0}).limit(1).single();if(E&&E.code!=="PGRST116")throw E;return C},enabled:!!(s!=null&&s.id)}),{data:u}=ie({queryKey:["previous-episode",s==null?void 0:s.id],queryFn:async()=>{const{data:C,error:E}=await X.from("episodes").select("*").eq("season_id",s.id).eq("is_scored",!0).order("air_date",{ascending:!1}).limit(1).single();if(E&&E.code!=="PGRST116")throw E;return C},enabled:!!(s!=null&&s.id)}),{data:d}=ie({queryKey:["castaway-count",s==null?void 0:s.id],queryFn:async()=>{const{count:C,error:E}=await X.from("castaways").select("*",{count:"exact",head:!0}).eq("season_id",s.id);if(E)throw E;return C||0},enabled:!!(s!=null&&s.id)}),{data:p}=ie({queryKey:["recently-eliminated",e==null?void 0:e.id,u==null?void 0:u.id],queryFn:async()=>{if(!i||!u)return[];const{data:C,error:E}=await X.from("castaways").select("id, name").eq("eliminated_episode_id",u.id);if(E)throw E;const T=i.map(I=>I.castaway_id);return(C==null?void 0:C.filter(I=>T.includes(I.id)))||[]},enabled:!!(e!=null&&e.id)&&!!(u!=null&&u.id)&&!!i}),{data:f}=ie({queryKey:["auto-picked",e==null?void 0:e.id,u==null?void 0:u.id],queryFn:async()=>{if(!u||!a)return[];const C=a.filter(I=>!I.league.is_global).map(I=>I.league_id);if(C.length===0)return[];const{data:E,error:T}=await X.from("weekly_picks").select("league_id, leagues(name)").eq("user_id",e.id).eq("episode_id",u.id).eq("status","auto_picked").in("league_id",C);if(T)throw T;return E||[]},enabled:!!(e!=null&&e.id)&&!!(u!=null&&u.id)&&!!a}),{data:m}=ie({queryKey:["next-episode-picks",e==null?void 0:e.id,l==null?void 0:l.id],queryFn:async()=>{if(!l||!a)return[];const C=a.filter(I=>!I.league.is_global).map(I=>I.league_id);if(C.length===0)return[];const{data:E,error:T}=await X.from("weekly_picks").select("league_id").eq("user_id",e.id).eq("episode_id",l.id).in("league_id",C);if(T)throw T;return E||[]},enabled:!!(e!=null&&e.id)&&!!(l!=null&&l.id)&&!!a}),x=(i==null?void 0:i.reduce((C,E)=>(C[E.league_id]||(C[E.league_id]=[]),C[E.league_id].push(E),C),{}))||{},y=C=>{if(!o)return[];const E=o.get(C);return E?Array.from(E.entries()).map(([T,I])=>({castaway_id:T,total_points:I})):[]},g=(a==null?void 0:a.filter(C=>!C.league.is_global&&(!(s!=null&&s.id)||C.league.season_id===s.id)))||[],b=a==null?void 0:a.find(C=>C.league.is_global&&(!(s!=null&&s.id)||C.league.season_id===s.id)),_=kae(s||null,l||null),w=_==="active"?Eae(l||null,u||null):null,S=(b==null?void 0:b.total_points)||0,j=Object.values(x).flat().filter(C=>{var E;return((E=C.castaway)==null?void 0:E.status)==="active"}).length,N=g.length>0?g[0].league_id:void 0;return n.jsxs("div",{className:"pb-4",children:[n.jsxs("div",{className:"mb-4",children:[n.jsxs("h1",{className:"text-2xl font-display font-bold text-neutral-800",children:[n.jsx(ne,{copyKey:"dashboard.header.title",as:"span",className:"",children:t("dashboard.header.title","Welcome back")}),r!=null&&r.display_name?`, ${r.display_name.split(" ")[0]}`:"","."]}),n.jsx(ne,{copyKey:"dashboard.header.subtitle",as:"p",className:"text-neutral-500 mt-1 text-base",children:t("dashboard.header.subtitle","Your fantasy headquarters")})]}),n.jsx("div",{className:"mb-4",children:n.jsx(use,{seasonStarted:_==="active"||_==="post_season"})}),w&&n.jsx("div",{className:"mb-4",children:n.jsx(tse,{weeklyPhase:w,primaryLeagueId:N})}),n.jsx(nse,{recentlyEliminated:p,autoPickedLeagues:f}),n.jsx("div",{className:"mb-4",children:n.jsx(Sae,{})}),n.jsx("div",{className:"mb-4",children:n.jsx(rse,{gamePhase:_,activeSeason:s||null,nextEpisode:l||null,primaryLeagueId:N,castawayCount:d||0,hasPickedForNextEpisode:((m==null?void 0:m.length)||0)>=g.length&&g.length>0})}),n.jsx("div",{className:"mb-4",children:n.jsx(sse,{leagueCount:g.length,activeCastaways:j,totalPoints:S})}),(b==null?void 0:b.rank)&&n.jsx("div",{className:"mb-4",children:n.jsx(ase,{rank:b.rank,totalPoints:b.total_points})}),n.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(ne,{copyKey:"dashboard.leagues.title",as:"h2",className:"text-lg font-display font-bold text-neutral-800",children:t("dashboard.leagues.title","My Leagues")}),n.jsxs(se,{to:"/leagues",className:"text-burgundy-500 hover:text-burgundy-600 text-sm font-semibold flex items-center gap-1",children:[n.jsx(ne,{copyKey:"dashboard.leagues.view_all",as:"span",className:"",children:t("dashboard.leagues.view_all","View All")})," ",n.jsx(dr,{className:"h-4 w-4"})]})]}),g.length>0?n.jsx("div",{className:"space-y-3",children:g.map(C=>n.jsx(ose,{leagueId:C.league_id,leagueName:C.league.name,leagueCode:C.league.code,totalPoints:C.total_points,rank:C.rank,rosters:x[C.league_id]||[],seasonId:C.league.season_id,castawayPoints:y(C.league_id),showWeeklyPick:_==="active"},C.league_id))}):n.jsxs("div",{className:"bg-white rounded-2xl p-8 text-center border border-cream-200",children:[n.jsx("div",{className:"w-12 h-12 bg-cream-100 rounded-full flex items-center justify-center mx-auto mb-3",children:n.jsx(Ke,{className:"h-6 w-6 text-neutral-400"})}),n.jsx(ne,{copyKey:"dashboard.empty.title",as:"h3",className:"font-semibold text-neutral-800 mb-2",children:t("dashboard.empty.title","No leagues yet")}),n.jsx(ne,{copyKey:"dashboard.empty.description",as:"p",className:"text-neutral-500 mb-4",children:t("dashboard.empty.description","Join or create a league to start playing!")}),n.jsxs("div",{className:"flex gap-3 justify-center",children:[n.jsx(se,{to:"/leagues/create",className:"btn btn-primary",children:n.jsx(ne,{copyKey:"dashboard.empty.create_button",as:"span",className:"",children:t("dashboard.empty.create_button","Create League")})}),n.jsx(se,{to:"/leagues",className:"btn btn-secondary",children:n.jsx(ne,{copyKey:"dashboard.empty.browse_button",as:"span",className:"",children:t("dashboard.empty.browse_button","Browse Leagues")})})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[s&&n.jsx(lse,{season:s}),n.jsx(cse,{})]})]})]})}const Tae={Vatu:{bg:"bg-purple-100",text:"text-purple-700"},Kalo:{bg:"bg-teal-100",text:"text-teal-700"},Cila:{bg:"bg-orange-100",text:"text-orange-700"}};function Rae({tribe:e}){const t=Tae[e]||{bg:"bg-neutral-100",text:"text-neutral-600"};return n.jsx("span",{className:`text-[10px] font-semibold px-1.5 py-0.5 rounded ${t.bg} ${t.text}`,children:e})}function Aae({castaway:e,index:t,totalCount:r,isDragging:s,isLocked:a,onDragStart:i,onDragOver:o,onDragEnd:l,onMoveUp:u,onMoveDown:d}){return n.jsxs("div",{draggable:!a,onDragStart:i,onDragOver:o,onDragEnd:l,className:`p-3 flex items-center gap-3 transition-all ${s?"bg-burgundy-50 opacity-50":"hover:bg-cream-50"} ${a?"cursor-default":"cursor-grab active:cursor-grabbing"}`,children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${t<2?"bg-burgundy-100 text-burgundy-600":t<5?"bg-amber-100 text-amber-600":"bg-cream-100 text-neutral-600"}`,children:t+1}),!a&&n.jsx(cx,{className:"h-5 w-5 text-neutral-300 flex-shrink-0"}),n.jsx("img",{src:nr(e.name,e.photo_url),alt:e.name,className:"w-10 h-10 rounded-full object-cover border border-cream-200"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("p",{className:"font-medium text-neutral-800 truncate",children:e.name}),e.tribe_original&&n.jsx(Rae,{tribe:e.tribe_original})]}),n.jsxs("div",{className:"flex items-center gap-2 text-xs text-neutral-500",children:[e.age&&n.jsxs("span",{children:[e.age," yrs"]}),e.hometown&&n.jsxs(n.Fragment,{children:[e.age&&n.jsx("span",{children:""}),n.jsx("span",{children:e.hometown})]}),e.occupation&&n.jsxs(n.Fragment,{children:[n.jsx("span",{children:""}),n.jsx("span",{className:"truncate",children:e.occupation})]})]})]}),!a&&n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("button",{onClick:u,disabled:t===0,className:"p-1 hover:bg-cream-100 rounded disabled:opacity-30 disabled:cursor-not-allowed",children:n.jsx(fs,{className:"h-4 w-4 text-neutral-500"})}),n.jsx("button",{onClick:d,disabled:t===r-1,className:"p-1 hover:bg-cream-100 rounded disabled:opacity-30 disabled:cursor-not-allowed",children:n.jsx(en,{className:"h-4 w-4 text-neutral-500"})})]})]})}function Pae({leagueId:e,league:t,rankings:r,castawayMap:s,onEditRankings:a}){return n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200",children:[n.jsx(_e,{}),n.jsxs("div",{className:"max-w-2xl mx-auto p-4 pb-24",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx(se,{to:`/leagues/${e}`,className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:n.jsx(ht,{className:"h-5 w-5 text-neutral-600"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h1",{className:"text-2xl font-display font-bold text-neutral-800",children:"Rankings Saved!"}),n.jsx("p",{className:"text-neutral-500",children:t==null?void 0:t.name})]})]}),n.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 rounded-2xl p-6 text-white shadow-elevated mb-6",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-14 h-14 bg-white/20 rounded-full flex items-center justify-center",children:n.jsx(Ot,{className:"h-7 w-7"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-display font-bold",children:"Rankings Confirmed!"}),n.jsx("p",{className:"text-green-100",children:"Your draft preferences have been saved for all leagues."})]})]})}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated border border-cream-200 overflow-hidden mb-6",children:[n.jsxs("div",{className:"p-5 border-b border-cream-100",children:[n.jsxs("h2",{className:"text-lg font-display font-bold text-neutral-800 flex items-center gap-2",children:[n.jsx(ot,{className:"h-5 w-5 text-burgundy-500"}),"Your Complete Rankings"]}),n.jsxs("p",{className:"text-sm text-neutral-500 mt-1",children:[r.length," castaways ranked"]})]}),n.jsx("div",{className:"divide-y divide-cream-100 max-h-[60vh] overflow-y-auto",children:r.map((i,o)=>{const l=s.get(i);return l?n.jsxs("div",{className:"p-3 flex items-center gap-3",children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${o<2?"bg-burgundy-100 text-burgundy-600":o<5?"bg-amber-100 text-amber-600":"bg-cream-100 text-neutral-600"}`,children:o+1}),n.jsx("img",{src:nr(l.name,l.photo_url),alt:l.name,className:"w-10 h-10 rounded-full object-cover border border-cream-200"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"font-medium text-neutral-800 truncate",children:l.name}),n.jsxs("div",{className:"flex items-center gap-2 text-xs text-neutral-500",children:[l.age&&n.jsxs("span",{children:[l.age," yrs"]}),l.hometown&&n.jsxs(n.Fragment,{children:[l.age&&n.jsx("span",{children:""}),n.jsx("span",{children:l.hometown})]})]})]})]},i):null})})]}),n.jsxs("div",{className:"flex gap-4",children:[n.jsx("button",{onClick:a,className:"flex-1 btn btn-secondary",children:"Edit Rankings"}),n.jsx(se,{to:`/leagues/${e}`,className:"flex-1 btn btn-primary text-center",children:"Back to League"})]})]})]})}function Oae({leagueId:e,league:t,roster:r}){return n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200",children:[n.jsx(_e,{}),n.jsxs("div",{className:"max-w-2xl mx-auto p-4 pb-24",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx(se,{to:`/leagues/${e}`,className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:n.jsx(ht,{className:"h-5 w-5 text-neutral-600"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-display font-bold text-neutral-800",children:"Draft Results"}),n.jsx("p",{className:"text-neutral-500",children:t==null?void 0:t.name})]})]}),n.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 rounded-2xl p-6 text-white shadow-elevated mb-6",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-14 h-14 bg-white/20 rounded-full flex items-center justify-center",children:n.jsx(ot,{className:"h-7 w-7"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-display font-bold",children:"Draft Complete!"}),n.jsx("p",{className:"text-green-100",children:"Your team has been drafted based on your rankings."})]})]})}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated border border-cream-200 overflow-hidden",children:[n.jsx("div",{className:"p-5 border-b border-cream-100",children:n.jsxs("h2",{className:"text-lg font-display font-bold text-neutral-800 flex items-center gap-2",children:[n.jsx(Ke,{className:"h-5 w-5 text-burgundy-500"}),"Your Team"]})}),n.jsx("div",{className:"divide-y divide-cream-100",children:r.map((s,a)=>{var i,o,l,u,d,p,f,m;return n.jsxs("div",{className:"p-4 flex items-center gap-4",children:[n.jsx("div",{className:"w-10 h-10 bg-burgundy-100 rounded-full flex items-center justify-center",children:n.jsxs("span",{className:"font-bold text-burgundy-600",children:["#",a+1]})}),n.jsx("img",{src:nr(((i=s.castaways)==null?void 0:i.name)||"Unknown",(o=s.castaways)==null?void 0:o.photo_url),alt:((l=s.castaways)==null?void 0:l.name)||"Castaway",className:"w-14 h-14 rounded-full object-cover border-2 border-cream-200"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-semibold text-neutral-800",children:(u=s.castaways)==null?void 0:u.name}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-neutral-500",children:[((d=s.castaways)==null?void 0:d.age)&&n.jsxs("span",{children:[s.castaways.age," yrs"]}),((p=s.castaways)==null?void 0:p.hometown)&&n.jsxs(n.Fragment,{children:[((f=s.castaways)==null?void 0:f.age)&&n.jsx("span",{children:""}),n.jsx("span",{children:s.castaways.hometown})]}),((m=s.castaways)==null?void 0:m.occupation)&&n.jsxs(n.Fragment,{children:[n.jsx("span",{children:""}),n.jsx("span",{children:s.castaways.occupation})]})]})]}),n.jsx("div",{className:"text-right",children:n.jsxs("p",{className:"text-xs text-neutral-400",children:["Round ",s.draft_round]})})]},s.id)})})]}),n.jsx("div",{className:"mt-6 text-center",children:n.jsx(se,{to:`/leagues/${e}`,className:"btn btn-primary",children:"Back to League"})})]})]})}function Iae({rankings:e,castawayMap:t,isPending:r,onConfirm:s,onCancel:a}){return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated max-w-lg w-full max-h-[90vh] flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-cream-100 flex items-start justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-display font-bold text-neutral-800",children:"Confirm Your Rankings"}),n.jsxs("p",{className:"text-neutral-500 text-sm mt-1",children:["This will apply to ",n.jsx("strong",{className:"text-neutral-700",children:"all your leagues"})," this season"]})]}),n.jsx("button",{onClick:a,className:"p-2 hover:bg-cream-100 rounded-lg transition-colors",children:n.jsx(It,{className:"h-5 w-5 text-neutral-400"})})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:n.jsxs("div",{className:"bg-cream-50 rounded-xl p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("p",{className:"text-sm font-medium text-neutral-700",children:"Your Complete Rankings"}),n.jsxs("span",{className:"text-xs text-neutral-500",children:[e.length," castaways"]})]}),n.jsx("div",{className:"space-y-1",children:e.map((i,o)=>{const l=t.get(i);if(!l)return null;const u=o<2,d=o>=2&&o<6;return n.jsxs("div",{className:`flex items-center gap-3 p-2 rounded-lg transition-colors ${u?"bg-burgundy-50 border border-burgundy-100":d?"bg-amber-50/50":"hover:bg-cream-100"}`,children:[n.jsx("span",{className:`w-7 h-7 rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0 ${u?"bg-burgundy-500 text-white":d?"bg-amber-100 text-amber-700":"bg-cream-200 text-neutral-500"}`,children:o+1}),l.photo_url&&n.jsx("img",{src:l.photo_url,alt:l.name,className:"w-8 h-8 rounded-full object-cover flex-shrink-0"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("span",{className:`block truncate ${u?"font-medium text-burgundy-800":"text-neutral-700"}`,children:l.name}),l.tribe_original&&n.jsx("span",{className:"text-xs text-neutral-400",children:l.tribe_original})]}),u&&n.jsx("span",{className:"text-xs font-medium text-burgundy-600 bg-burgundy-100 px-2 py-0.5 rounded-full flex-shrink-0",children:"Top Pick"})]},i)})})]})}),n.jsx("div",{className:"p-4 border-t border-cream-100 bg-cream-50/50",children:n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:a,className:"flex-1 btn btn-secondary",children:"Go Back"}),n.jsxs("button",{onClick:s,disabled:r,className:"flex-1 btn btn-primary flex items-center justify-center gap-2",children:[r?n.jsx(be,{className:"h-4 w-4 animate-spin"}):n.jsx(Ot,{className:"h-4 w-4"}),"Confirm & Save"]})]})})]})})}function Lae(e){return ie({queryKey:["userProfile",e],queryFn:async()=>{if(!e)return null;const{data:t,error:r}=await X.from("users").select("*").eq("id",e).single();if(r)throw r;return t},enabled:!!e,staleTime:300*1e3})}function Mae(e){return ie({queryKey:["nextEpisode",e],queryFn:async()=>{if(!e)return null;const{data:t,error:r}=await X.from("episodes").select("*").eq("season_id",e).gt("number",1).eq("is_scored",!1).order("number",{ascending:!0}).limit(1).single();if(r&&r.code!=="PGRST116")throw r;return t},enabled:!!e,staleTime:60*1e3})}function vP(e){return ie({queryKey:["castaways",e],queryFn:async()=>{if(!e)return[];const{data:t,error:r}=await X.from("castaways").select("*").eq("season_id",e).order("name",{ascending:!0});if(r)throw r;return t},enabled:!!e,staleTime:120*1e3})}function Dae(e){return ie({queryKey:["myLeagues",e],queryFn:async()=>{if(!e)return[];const{data:t,error:r}=await X.from("league_members").select(`
          league_id,
          total_points,
          rank,
          joined_at,
          leagues (
            id,
            name,
            code,
            season_id,
            max_players,
            require_donation,
            donation_amount,
            commissioner_id,
            created_at
          )
        `).eq("user_id",e);if(r)throw r;return t.map(s=>({...s.leagues,membership:{total_points:s.total_points,rank:s.rank,joined_at:s.joined_at}}))},enabled:!!e,staleTime:120*1e3})}function xj(e){return ie({queryKey:["league",e],queryFn:async()=>{if(!e)return null;const{data:t,error:r}=await X.from("leagues").select(`
          *,
          seasons(*),
          commissioner:users!leagues_commissioner_id_fkey(id, display_name)
        `).eq("id",e).single();if(r)throw r;return t},enabled:!!e,staleTime:120*1e3})}function $ae(e){return ie({queryKey:["leagueMembers",e],queryFn:async()=>{if(!e)return[];const{data:t,error:r}=await X.from("league_members").select(`
          *,
          users (
            id,
            display_name,
            avatar_url
          )
        `).eq("league_id",e).order("rank",{ascending:!0});if(r)throw r;return t},enabled:!!e,staleTime:120*1e3})}function gj(e,t){return ie({queryKey:["roster",e,t],queryFn:async()=>{if(!e||!t)return[];const{data:r,error:s}=await X.from("rosters").select(`
          *,
          castaways (
            id,
            name,
            status,
            tribe_original,
            placement,
            photo_url
          )
        `).eq("league_id",e).eq("user_id",t).is("dropped_at",null).order("draft_pick",{ascending:!0});if(s)throw s;return r},enabled:!!e&&!!t,staleTime:120*1e3})}function qae(e){return ie({queryKey:["leagueRosters",e],queryFn:async()=>{if(!e)return[];const{data:t,error:r}=await X.from("rosters").select(`
          *,
          users (
            id,
            display_name
          ),
          castaways (
            id,
            name,
            status,
            tribe_original,
            placement,
            photo_url
          )
        `).eq("league_id",e).is("dropped_at",null).order("user_id",{ascending:!0}).order("draft_pick",{ascending:!0});if(r)throw r;return t},enabled:!!e,staleTime:120*1e3})}function wP(e){return ie({queryKey:["profile",e],queryFn:async()=>{const{data:t,error:r}=await X.from("users").select("id, display_name, role").eq("id",e).single();if(r)throw r;return t},enabled:!!e})}function _P(){return ie({queryKey:["activeSeason"],queryFn:async()=>{const{data:e,error:t}=await X.from("seasons").select("*").eq("is_active",!0).single();if(t&&t.code!=="PGRST116")throw t;return e}})}function jP(e){return ie({queryKey:["episodes",e],queryFn:async()=>{if(!e)return[];const{data:t,error:r}=await X.from("episodes").select("*").eq("season_id",e).order("number",{ascending:!0});if(r)throw r;return t},enabled:!!e})}function NP(e){return ie({queryKey:["castaways",e],queryFn:async()=>{if(!e)return[];const{data:t,error:r}=await X.from("castaways").select("*").eq("season_id",e).order("name");if(r)throw r;return t},enabled:!!e})}function SP(e){return ie({queryKey:["scoringRules",e],queryFn:async()=>{if(!e)return[];const{data:t,error:r}=await X.from("scoring_rules").select("*").eq("season_id",e).eq("is_active",!0).order("sort_order");if(r)throw r;return t},enabled:!!e})}function kP(e){return ie({queryKey:["episodeScores",e],queryFn:async()=>{if(!e)return[];const{data:t,error:r}=await X.from("episode_scores").select("*").eq("episode_id",e);if(r)throw r;return t},enabled:!!e})}function EP(e){return ie({queryKey:["scoringStatus",e],queryFn:async()=>{if(!e)return null;const{data:{session:t}}=await X.auth.getSession();if(!(t!=null&&t.access_token))throw new Error("Not authenticated");const r=await Zn(`/episodes/${e}/scoring/status`,t.access_token);if(r.error)throw new Error(r.error);return r.data},enabled:!!e,refetchInterval:5e3})}function Fae(e){const t=(e==null?void 0:e.reduce((a,i)=>{const o=i.category||"Other";return a[o]||(a[o]=[]),a[o].push(i),a},{}))||{},r=["Survival","Tribal Council","Challenges","Strategy","Social","Advantages","Finale","Other"],s={};return r.forEach(a=>{t[a]&&(s[a]=t[a])}),Object.keys(t).forEach(a=>{s[a]||(s[a]=t[a])}),s}const Uae=["RAND_CONFESSIONAL","PRE_TEAM_REWARD_WIN","PRE_TEAM_IMMUNITY_WIN","PRE_TEAM_COMBINED_WIN","PRE_TEAM_LAST_PLACE","PRE_NO_TRIBAL","PRE_ATTEND_TRIBAL","PRE_SURVIVE_TRIBAL","PRE_VOTE_RECEIVED_COUNT","PRE_SNUFFED","POST_IND_REWARD_WIN","POST_TEAM_REWARD_WIN","POST_IND_IMMUNITY_WIN","POST_COMBINED_WIN","POST_NO_TRIBAL","POST_SURVIVE_TRIBAL","POST_VOTE_RECEIVED_COUNT","POST_SNUFFED"];function CP(e){return e?Uae.map(t=>e.find(r=>r.code===t)).filter(t=>t!==void 0):[]}function Bae(){var W;const{leagueId:e}=Wn(),{user:t}=Et(),r=at(),[s,a]=$.useState([]),[i,o]=$.useState(!1),[l,u]=$.useState(null),[d,p]=$.useState(!1),[f,m]=$.useState(!1),{data:x,isLoading:y}=xj(e),{data:g,isLoading:b}=vP(x==null?void 0:x.season_id),{data:_}=gj(e,t==null?void 0:t.id),{data:w,isLoading:S}=ie({queryKey:["draft-rankings",x==null?void 0:x.season_id,t==null?void 0:t.id],queryFn:async()=>{if(!(x!=null&&x.season_id)||!(t!=null&&t.id))return null;const{data:K,error:F}=await X.from("draft_rankings").select("*").eq("season_id",x.season_id).eq("user_id",t.id).single();return F&&F.code!=="PGRST116"?null:K},enabled:!!(x!=null&&x.season_id)&&!!(t!=null&&t.id)}),j=K=>{const F=[...K];for(let H=F.length-1;H>0;H--){const L=Math.floor(Math.random()*(H+1));[F[H],F[L]]=[F[L],F[H]]}return F};$.useEffect(()=>{w!=null&&w.rankings?a(w.rankings):g&&g.length>0&&s.length===0&&a(j(g.map(K=>K.id)))},[w,g]);const N=ke({mutationFn:async()=>{if(!(x!=null&&x.season_id)||!(t!=null&&t.id))throw new Error("Missing required data");const{error:K}=await X.from("draft_rankings").upsert({season_id:x.season_id,user_id:t.id,rankings:s,submitted_at:new Date().toISOString()},{onConflict:"user_id,season_id"});if(K)throw K},onSuccess:()=>{r.invalidateQueries({queryKey:["draft-rankings",x==null?void 0:x.season_id,t==null?void 0:t.id]}),o(!1),p(!1),m(!0)}}),C=$.useMemo(()=>{const K=new Map;return g==null||g.forEach(F=>K.set(F.id,F)),K},[g]),E=(W=x==null?void 0:x.seasons)!=null&&W.draft_deadline?new Date(x.seasons.draft_deadline):null,I=E?new Date>E:!1,A=(x==null?void 0:x.draft_status)==="completed",R=K=>{if(K===0)return;const F=[...s];[F[K-1],F[K]]=[F[K],F[K-1]],a(F),o(!0)},O=K=>{if(K===s.length-1)return;const F=[...s];[F[K],F[K+1]]=[F[K+1],F[K]],a(F),o(!0)},M=K=>u(K),B=(K,F)=>{if(K.preventDefault(),l===null||l===F)return;const H=[...s],[L]=H.splice(l,1);H.splice(F,0,L),a(H),u(F),o(!0)},U=()=>u(null);return y||b||S?n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200",children:[n.jsx(_e,{}),n.jsx("div",{className:"flex items-center justify-center py-24",children:n.jsx(be,{className:"h-8 w-8 text-burgundy-500 animate-spin"})})]}):f?n.jsx(Pae,{leagueId:e,league:x||void 0,rankings:s,castawayMap:C,onEditRankings:()=>m(!1)}):A&&_&&_.length>0?n.jsx(Oae,{leagueId:e,league:x||void 0,roster:_}):n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200",children:[n.jsx(_e,{}),n.jsxs("div",{className:"max-w-3xl mx-auto p-4 pb-24",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx(se,{to:`/leagues/${e}`,className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:n.jsx(ht,{className:"h-5 w-5 text-neutral-600"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h1",{className:"text-2xl font-display font-bold text-neutral-800",children:"Draft Rankings"}),n.jsx("p",{className:"text-neutral-500",children:x==null?void 0:x.name})]}),i&&!I&&n.jsxs("button",{onClick:()=>p(!0),disabled:N.isPending,className:"btn btn-primary flex items-center gap-2",children:[N.isPending?n.jsx(be,{className:"h-4 w-4 animate-spin"}):n.jsx(Ar,{className:"h-4 w-4"}),"Save Rankings"]})]}),n.jsx("div",{className:"bg-gradient-to-r from-burgundy-500 to-burgundy-600 rounded-2xl p-5 text-white shadow-elevated mb-6",children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center flex-shrink-0",children:n.jsx(dx,{className:"h-6 w-6"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"font-display font-bold text-lg mb-1",children:"How the Draft Works"}),n.jsxs("p",{className:"text-burgundy-100 text-sm",children:["Rank all ",(g==null?void 0:g.length)||18," castaways from your most wanted (#1) to least wanted.",n.jsxs("strong",{className:"text-white",children:[" ","Your rankings apply to ALL your leagues this season."]})," ","At the deadline, the system runs a snake draft using everyone's rankings. You'll get 2 castaways based on your draft position and preferences in each league."]})]})]})}),E&&n.jsxs("div",{className:`rounded-2xl p-4 mb-6 flex items-center gap-4 ${I?"bg-red-50 border border-red-200":"bg-amber-50 border border-amber-200"}`,children:[n.jsx(Nt,{className:`h-6 w-6 ${I?"text-red-500":"text-amber-500"}`}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:`font-medium ${I?"text-red-700":"text-amber-700"}`,children:I?"Draft Deadline Passed":"Draft Deadline"}),n.jsx("p",{className:`text-sm ${I?"text-red-600":"text-amber-600"}`,children:E.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",timeZoneName:"short"})})]}),w&&n.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[n.jsx(Ot,{className:"h-5 w-5"}),n.jsx("span",{className:"text-sm font-medium",children:"Submitted"})]})]}),I&&!A&&n.jsxs("div",{className:"bg-neutral-100 rounded-2xl p-6 text-center mb-6 border border-neutral-200",children:[n.jsx(yt,{className:"h-10 w-10 text-neutral-400 mx-auto mb-3"}),n.jsx("p",{className:"text-neutral-600 font-medium",children:"Rankings are locked"}),n.jsx("p",{className:"text-neutral-500 text-sm mt-1",children:"The draft deadline has passed. The system will process the draft soon."})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated border border-cream-200 overflow-hidden",children:[n.jsxs("div",{className:"p-5 border-b border-cream-100 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-display font-bold text-neutral-800",children:"Your Rankings"}),n.jsx("p",{className:"text-sm text-neutral-500",children:w?"Last saved "+new Date(w.submitted_at).toLocaleDateString():"Drag to reorder or use arrows"})]}),n.jsxs("div",{className:"text-sm text-neutral-400",children:[s.length," castaways"]})]}),n.jsx("div",{className:"divide-y divide-cream-100",children:s.map((K,F)=>{const H=C.get(K);return H?n.jsx(Aae,{castaway:H,index:F,totalCount:s.length,isDragging:l===F,isLocked:I,onDragStart:()=>M(F),onDragOver:L=>B(L,F),onDragEnd:U,onMoveUp:()=>R(F),onMoveDown:()=>O(F)},K):null})})]}),i&&!I&&n.jsx("div",{className:"fixed bottom-0 left-0 right-0 p-4 bg-white border-t border-cream-200 shadow-elevated",children:n.jsxs("div",{className:"max-w-3xl mx-auto flex items-center justify-between",children:[n.jsx("p",{className:"text-neutral-500 text-sm",children:"You have unsaved changes"}),n.jsxs("button",{onClick:()=>p(!0),disabled:N.isPending,className:"btn btn-primary flex items-center gap-2",children:[N.isPending?n.jsx(be,{className:"h-4 w-4 animate-spin"}):n.jsx(Ar,{className:"h-4 w-4"}),"Save Rankings"]})]})}),d&&n.jsx(Iae,{rankings:s,castawayMap:C,isPending:N.isPending,onConfirm:()=>N.mutate(),onCancel:()=>p(!1)})]})]})}function Hae({episode:e,timeLeft:t}){const r=t.days===0&&t.hours<2;return n.jsx("div",{className:`rounded-2xl p-6 text-white shadow-elevated animate-slide-up ${r?"bg-gradient-to-r from-orange-500 to-red-500":"bg-gradient-to-r from-burgundy-500 to-burgundy-600"}`,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:`text-sm font-medium ${r?"text-orange-100":"text-burgundy-100"}`,children:r?"HURRY! Picks Lock In":"Picks Lock In"}),n.jsxs("div",{className:"flex items-baseline gap-2 sm:gap-3 mt-2",children:[t.days>0&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"text-center",children:[n.jsx("span",{className:"text-3xl sm:text-4xl font-display",children:t.days}),n.jsx("p",{className:"text-xs text-burgundy-200 mt-1",children:"days"})]}),n.jsx("span",{className:"text-xl sm:text-2xl text-burgundy-200",children:":"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("span",{className:"text-3xl sm:text-4xl font-display",children:t.hours}),n.jsx("p",{className:"text-xs text-burgundy-200 mt-1",children:"hours"})]}),n.jsx("span",{className:"text-xl sm:text-2xl text-burgundy-200",children:":"}),n.jsxs("div",{className:"text-center",children:[n.jsx("span",{className:"text-3xl sm:text-4xl font-display",children:t.minutes}),n.jsx("p",{className:"text-xs text-burgundy-200 mt-1",children:"min"})]}),r&&n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"text-xl sm:text-2xl text-burgundy-200",children:":"}),n.jsxs("div",{className:"text-center",children:[n.jsx("span",{className:"text-3xl sm:text-4xl font-display",children:t.seconds}),n.jsx("p",{className:"text-xs text-burgundy-200 mt-1",children:"sec"})]})]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:`text-sm ${r?"text-orange-100":"text-burgundy-100"}`,children:"Episode airs"}),n.jsx("p",{className:"font-semibold text-lg",children:new Date(e.air_date).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]})]})})}function Kae({wasAutoPicked:e,pickSubmitted:t,isUrgent:r,isVeryUrgent:s}){return n.jsxs(n.Fragment,{children:[e&&n.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-2xl p-4 flex items-start gap-3 animate-slide-up",style:{animationDelay:"0.05s"},children:[n.jsx(yt,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-amber-800",children:"You were auto-picked last episode"}),n.jsx("p",{className:"text-sm text-amber-700",children:"You didn't submit a pick in time, so the system picked for you. Make sure to submit your pick before the deadline!"})]})]}),!t&&!s&&r&&n.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-2xl p-4 flex items-start gap-3 animate-slide-up",style:{animationDelay:"0.05s"},children:[n.jsx(Nt,{className:"w-5 h-5 text-orange-600 flex-shrink-0 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-orange-800",children:"Don't forget to pick!"}),n.jsx("p",{className:"text-sm text-orange-700",children:"If you don't submit a pick, the system will randomly select one of your active castaways."})]})]}),!t&&s&&n.jsxs("div",{className:"bg-red-50 border border-red-300 rounded-2xl p-4 flex items-start gap-3 animate-pulse",children:[n.jsx(yt,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-red-800",children:"Less than 30 minutes left!"}),n.jsx("p",{className:"text-sm text-red-700",children:"Submit your pick now or you'll be auto-picked!"})]})]})]})}function zae({castaway:e,isSelected:t,stats:r,onSelect:s}){var a;return n.jsxs("button",{onClick:s,className:`w-full p-5 rounded-xl border-2 transition-all text-left flex items-center gap-5 ${t?"border-burgundy-500 bg-burgundy-50 shadow-card":"border-cream-200 bg-cream-50 hover:border-cream-300 hover:shadow-sm"}`,children:[n.jsx("img",{src:nr(e.name||"Unknown",e.photo_url),alt:e.name||"Castaway",className:"w-16 h-16 rounded-xl object-cover"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("h3",{className:`font-semibold text-lg ${t?"text-burgundy-700":"text-neutral-800"}`,children:e.name}),n.jsx("span",{className:`badge text-xs ${e.status==="active"?"badge-success":"bg-neutral-100 text-neutral-500"}`,children:(a=e.status)==null?void 0:a.toUpperCase()})]}),r&&r.times_picked>0?n.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[n.jsxs("div",{className:"flex items-center gap-1 text-neutral-500",children:[n.jsx(ot,{className:"w-3.5 h-3.5"}),n.jsxs("span",{children:[r.total_points," pts total"]})]}),n.jsxs("div",{className:"flex items-center gap-1 text-neutral-500",children:[n.jsx(kn,{className:"w-3.5 h-3.5"}),n.jsxs("span",{children:[r.times_picked,"x picked"]})]}),n.jsxs("div",{className:"flex items-center gap-1 text-neutral-500",children:[n.jsx(fr,{className:"w-3.5 h-3.5"}),n.jsxs("span",{children:[r.avg_points," avg"]})]})]}):n.jsx("p",{className:"text-sm text-neutral-400",children:"Not yet picked this season"})]}),n.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center ${t?"border-burgundy-500 bg-burgundy-500":"border-cream-300"}`,children:t&&n.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})})]})}function Wae({roster:e,activeCastaways:t,selectedCastaway:r,currentPickCastawayId:s,pickSubmitted:a,showSuccess:i,mutationError:o,isPending:l,castawayStats:u,onSelect:d,onSubmit:p}){var m,x;const f=y=>u==null?void 0:u.find(g=>g.castaway_id===y);return n.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated overflow-hidden animate-slide-up",style:{animationDelay:"0.1s"},children:[n.jsxs("div",{className:"p-6 border-b border-cream-100",children:[n.jsx("h2",{className:"font-semibold text-neutral-800",children:"Select Your Castaway"}),n.jsx("p",{className:"text-sm text-neutral-500 mt-1",children:"Choose which player from your roster to play this week"})]}),n.jsx("div",{className:"p-6 space-y-4",children:t.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-orange-100 rounded-full flex items-center justify-center",children:n.jsx(yt,{className:"w-8 h-8 text-orange-600"})}),n.jsx("h3",{className:"text-lg font-semibold text-neutral-800 mb-2",children:"No Active Castaways"}),n.jsx("p",{className:"text-neutral-500 mb-4",children:e&&e.length>0?"All your castaways have been eliminated. Your season has ended.":"Your roster is empty. This shouldn't happen - please contact support."})]}):t.map(y=>n.jsx(zae,{castaway:y.castaways,isSelected:r===y.castaway_id,stats:f(y.castaway_id),onSelect:()=>d(y.castaway_id)},y.id))}),n.jsxs("div",{className:"p-6 border-t border-cream-100 bg-cream-50/50",children:[i&&n.jsxs("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-xl flex items-center gap-3",children:[n.jsx(xt,{className:"h-5 w-5 text-green-600 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-green-800",children:"Pick Saved!"}),n.jsx("p",{className:"text-sm text-green-600",children:"You can change it until picks lock."})]})]}),o&&n.jsxs("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-xl flex items-center gap-3",children:[n.jsx(yt,{className:"h-5 w-5 text-red-600 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-red-800",children:"Failed to Save"}),n.jsx("p",{className:"text-sm text-red-600",children:o})]})]}),n.jsx("button",{onClick:p,disabled:!r||l,className:`w-full btn ${r?"btn-primary shadow-card":"bg-cream-200 text-neutral-400 cursor-not-allowed"}`,children:l?n.jsxs("span",{className:"flex items-center justify-center gap-2",children:[n.jsx(be,{className:"h-4 w-4 animate-spin"}),"Saving..."]}):a?"Update Pick":r?"Confirm Pick":"Select a Castaway"}),a&&!i&&n.jsxs("p",{className:"text-center text-sm text-neutral-500 mt-3",children:["Current pick:"," ",n.jsx("span",{className:"font-medium text-neutral-700",children:(x=(m=e==null?void 0:e.find(y=>y.castaway_id===s))==null?void 0:m.castaways)==null?void 0:x.name})]})]})]})}function Gae({picks:e}){return e.length===0?null:n.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated p-6 animate-slide-up",style:{animationDelay:"0.2s"},children:[n.jsx("h3",{className:"font-semibold text-neutral-800 mb-4",children:"Previous Picks"}),n.jsx("div",{className:"space-y-3",children:e.map(t=>{var r,s;return n.jsxs("div",{className:"flex items-center justify-between p-3 bg-cream-50 rounded-xl",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("span",{className:"text-sm font-medium text-neutral-500",children:["Ep ",(r=t.episodes)==null?void 0:r.number]}),n.jsx("span",{className:"font-medium text-neutral-800",children:((s=t.castaways)==null?void 0:s.name)||"Unknown"})]}),n.jsxs("span",{className:`badge ${t.points_earned>=0?"badge-success":"bg-red-100 text-red-700"}`,children:[t.points_earned>=0?"+":"",t.points_earned," pts"]})]},t.id)})})]})}function Vae({leagueId:e}){return n.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated p-12 text-center animate-slide-up",children:[n.jsx("div",{className:"w-20 h-20 mx-auto mb-6 bg-amber-100 rounded-full flex items-center justify-center",children:n.jsx(yt,{className:"w-10 h-10 text-amber-600"})}),n.jsx("h2",{className:"text-2xl font-display text-neutral-800 mb-3",children:"Complete Your Draft First"}),n.jsx("p",{className:"text-neutral-500 mb-8",children:"You need to complete the draft before you can make weekly picks. Head to the draft room to select your castaways!"}),n.jsx(se,{to:`/leagues/${e}/draft`,className:"btn btn-primary shadow-card",children:"Go to Draft Room"})]})}function Qae({leagueId:e}){return n.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated p-12 text-center animate-slide-up",children:[n.jsx("div",{className:"w-20 h-20 mx-auto mb-6 bg-cream-100 rounded-full flex items-center justify-center",children:n.jsx(Nt,{className:"w-10 h-10 text-neutral-400"})}),n.jsx("h2",{className:"text-2xl font-display text-neutral-800 mb-3",children:"No Episode Scheduled"}),n.jsx("p",{className:"text-neutral-500 mb-8",children:"There are no upcoming episodes with open picks. Check back later!"}),n.jsx(se,{to:`/leagues/${e}`,className:"btn btn-primary shadow-card",children:"Back to League"})]})}function Yae({leagueId:e,episode:t,roster:r,currentPickCastawayId:s}){var a,i;return n.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated p-12 text-center animate-slide-up",children:[n.jsx("div",{className:"w-20 h-20 mx-auto mb-6 bg-burgundy-100 rounded-full flex items-center justify-center",children:n.jsx(mr,{className:"w-10 h-10 text-burgundy-600"})}),n.jsx("h2",{className:"text-2xl font-display text-neutral-800 mb-3",children:"Picks Locked"}),n.jsxs("p",{className:"text-neutral-500 mb-2",children:["Your pick for Episode ",t.number," is locked."]}),s?n.jsx("p",{className:"text-lg font-semibold text-burgundy-600 mb-8",children:((i=(a=r==null?void 0:r.find(o=>o.castaway_id===s))==null?void 0:a.castaways)==null?void 0:i.name)||"Unknown"}):n.jsx("p",{className:"text-lg font-semibold text-orange-600 mb-8",children:"No pick submitted - auto-pick will be applied"}),n.jsx(se,{to:`/leagues/${e}`,className:"btn btn-primary shadow-card",children:"Back to League"})]})}function Jae(){var Y;const{leagueId:e}=Wn(),{user:t}=Et(),{getCopy:r}=Kt(),s=at(),[a,i]=$.useState(null),[o,l]=$.useState({days:0,hours:0,minutes:0,seconds:0}),[u,d]=$.useState(!1),[p,f]=$.useState(null),{data:m}=xj(e),{data:x,isLoading:y}=gj(e,t==null?void 0:t.id),{data:g}=ie({queryKey:["currentEpisode",m==null?void 0:m.season_id],queryFn:async()=>{if(!(m!=null&&m.season_id))throw new Error("No season ID");const W=new Date().toISOString(),{data:K,error:F}=await X.from("episodes").select("*").eq("season_id",m.season_id).gt("number",1).gte("picks_lock_at",W).order("air_date",{ascending:!0}).limit(1).single();if(F&&F.code!=="PGRST116")throw F;return K},enabled:!!(m!=null&&m.season_id)}),{data:b}=ie({queryKey:["draftStatus",e],queryFn:async()=>{if(!e)throw new Error("No league ID");const{data:W,error:K}=await X.from("leagues").select("draft_status, status").eq("id",e).single();if(K)throw K;return W},enabled:!!e}),{data:_}=ie({queryKey:["currentPick",e,g==null?void 0:g.id,t==null?void 0:t.id],queryFn:async()=>{if(!e||!(g!=null&&g.id)||!(t!=null&&t.id))throw new Error("Missing data");const{data:W,error:K}=await X.from("weekly_picks").select("*").eq("league_id",e).eq("episode_id",g.id).eq("user_id",t.id).single();if(K&&K.code!=="PGRST116")throw K;return W},enabled:!!e&&!!(g!=null&&g.id)&&!!(t!=null&&t.id)}),{data:w}=ie({queryKey:["previousPicks",e,t==null?void 0:t.id],queryFn:async()=>{if(!e||!(t!=null&&t.id))throw new Error("Missing data");const{data:W,error:K}=await X.from("weekly_picks").select("id, episode_id, castaway_id, status, points_earned, episodes(number, title), castaways(*)").eq("league_id",e).eq("user_id",t.id).neq("status","pending").order("episodes(number)",{ascending:!1}).limit(10);if(K)throw K;return W},enabled:!!e&&!!(t!=null&&t.id)}),{data:S}=ie({queryKey:["castawayStats",e,t==null?void 0:t.id],queryFn:async()=>{if(!e||!(t!=null&&t.id)||!x)throw new Error("Missing data");const W=x.map(L=>L.castaway_id),{data:K,error:F}=await X.from("weekly_picks").select("castaway_id, points_earned").eq("league_id",e).eq("user_id",t.id).in("castaway_id",W).in("status",["locked","auto_picked"]);if(F)throw F;const H=new Map;return W.forEach(L=>{H.set(L,{castaway_id:L,total_points:0,times_picked:0,avg_points:0})}),K==null||K.forEach(L=>{if(L.castaway_id){const q=H.get(L.castaway_id);q&&(q.total_points+=L.points_earned||0,q.times_picked+=1,q.avg_points=q.times_picked>0?Math.round(q.total_points/q.times_picked):0)}}),Array.from(H.values())},enabled:!!e&&!!(t!=null&&t.id)&&!!x&&x.length>0}),j=((Y=w==null?void 0:w[0])==null?void 0:Y.status)==="auto_picked",N=ke({mutationFn:async W=>{if(!e||!(g!=null&&g.id))throw new Error("Missing required data");const{data:{session:K}}=await X.auth.getSession();if(!(K!=null&&K.access_token))throw new Error("Not authenticated");const F=await fP(`/leagues/${e}/picks`,{castaway_id:W,episode_id:g.id},K.access_token);if(F.error)throw new Error(F.error);return F.data},onSuccess:()=>{s.invalidateQueries({queryKey:["currentPick",e,g==null?void 0:g.id,t==null?void 0:t.id]}),d(!0),f(null),setTimeout(()=>d(!1),3e3)},onError:W=>{f(W.message||"Failed to save pick. Please try again."),d(!1)}});$.useEffect(()=>{if(!(g!=null&&g.picks_lock_at))return;const W=()=>{const F=new Date(g.picks_lock_at).getTime(),H=Date.now(),L=Math.max(0,F-H);l({days:Math.floor(L/(1e3*60*60*24)),hours:Math.floor(L%(1e3*60*60*24)/(1e3*60*60)),minutes:Math.floor(L%(1e3*60*60)/(1e3*60)),seconds:Math.floor(L%(1e3*60)/1e3)})};W();const K=setInterval(W,1e3);return()=>clearInterval(K)},[g==null?void 0:g.picks_lock_at]),$.useEffect(()=>{_!=null&&_.castaway_id&&i(_.castaway_id)},[_==null?void 0:_.castaway_id]);const C=()=>{a&&(f(null),N.mutate(a))},E=!!(_!=null&&_.castaway_id),T=(g==null?void 0:g.picks_lock_at)&&new Date(g.picks_lock_at)<=new Date,I=(_==null?void 0:_.status)==="locked"||T,A=(x==null?void 0:x.filter(W=>{var K;return((K=W.castaways)==null?void 0:K.status)==="active"}))||[],R=!m||y,O=(b==null?void 0:b.draft_status)==="completed",M=o.days*24*60+o.hours*60+o.minutes,B=M<=30&&M>0,U=o.days===0&&o.hours<2;return R?n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200",children:[n.jsx(_e,{}),n.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:n.jsx(be,{className:"h-8 w-8 text-burgundy-500 animate-spin"})})]}):n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200",children:[n.jsx(_e,{}),n.jsxs("main",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsx("div",{className:"flex items-center justify-between mb-8 animate-fade-in",children:n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(se,{to:`/leagues/${e}`,className:"text-neutral-400 hover:text-neutral-600 transition-colors",children:n.jsx(ht,{className:"w-5 h-5"})}),n.jsx("h1",{className:"text-2xl font-display text-neutral-800",children:r("weekly-pick.header.title","Weekly Pick")})]}),n.jsx("p",{className:"text-neutral-500",children:r("weekly-pick.header.subtitle","Choose your castaway for this episode")})]})}),O?g?I?n.jsx(Yae,{leagueId:e,episode:g,roster:x,currentPickCastawayId:_==null?void 0:_.castaway_id}):n.jsxs("div",{className:"space-y-6",children:[n.jsx(Hae,{episode:g,timeLeft:o}),n.jsx(Kae,{wasAutoPicked:j,pickSubmitted:E,isUrgent:U,isVeryUrgent:B}),n.jsx(Wae,{roster:x,activeCastaways:A,selectedCastaway:a,currentPickCastawayId:_==null?void 0:_.castaway_id,pickSubmitted:E,showSuccess:u,mutationError:p,isPending:N.isPending,castawayStats:S,onSelect:i,onSubmit:C}),w&&w.length>0&&n.jsx(Gae,{picks:w})]}):n.jsx(Qae,{leagueId:e}):n.jsx(Vae,{leagueId:e})]})]})}const cy=25;function Xae(){var g;const{leagueId:e}=Wn(),{user:t}=Et(),[r,s]=$.useState(1),{data:a}=ie({queryKey:["profile",t==null?void 0:t.id],queryFn:async()=>{const{data:b,error:_}=await X.from("users").select("id, display_name").eq("id",t.id).single();if(_)throw _;return b},enabled:!!(t!=null&&t.id)}),{data:i}=ie({queryKey:["league",e],queryFn:async()=>{if(!e)throw new Error("No league ID");const{data:b,error:_}=await X.from("leagues").select("*").eq("id",e).single();if(_)throw _;return b},enabled:!!e}),{data:o,isLoading:l}=ie({queryKey:["leaderboard",e],queryFn:async()=>{if(!e)throw new Error("No league ID");const{data:b,error:_}=await X.from("league_members").select("id, user_id, total_points, rank, users(id, display_name)").eq("league_id",e).order("total_points",{ascending:!1});if(_)throw _;return b},enabled:!!e}),u=b=>b===0?{emoji:"",bg:"bg-yellow-100",text:"text-yellow-700"}:b===1?{emoji:"",bg:"bg-gray-100",text:"text-gray-700"}:b===2?{emoji:"",bg:"bg-orange-100",text:"text-orange-700"}:{emoji:null,bg:"bg-cream-50",text:"text-neutral-600"},d=(o==null?void 0:o.length)||0,p=Math.ceil(d/cy),f=(r-1)*cy,m=f+cy,x=(o==null?void 0:o.slice(f,m))||[],y=p>1;return n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsxs("div",{className:"flex items-center justify-between mb-8 animate-fade-in",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(se,{to:"/dashboard",className:"text-neutral-400 hover:text-neutral-600 transition-colors",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),n.jsx("h1",{className:"text-2xl font-display text-neutral-800",children:"Leaderboard"})]}),n.jsx("p",{className:"text-neutral-500",children:(i==null?void 0:i.name)||"Loading..."})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-sm text-neutral-500",children:"League Code"}),n.jsx("p",{className:"font-mono font-bold text-burgundy-600",children:i==null?void 0:i.code})]})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated overflow-hidden animate-slide-up",children:[n.jsxs("div",{className:"p-6 border-b border-cream-100",children:[n.jsx("h2",{className:"font-semibold text-neutral-800",children:"Standings"}),n.jsxs("p",{className:"text-sm text-neutral-500 mt-1",children:[(o==null?void 0:o.length)||0," players"]})]}),l?n.jsxs("div",{className:"p-12 text-center",children:[n.jsx("div",{className:"w-8 h-8 mx-auto border-2 border-burgundy-500 border-t-transparent rounded-full animate-spin"}),n.jsx("p",{className:"text-neutral-500 mt-4",children:"Loading standings..."})]}):(o==null?void 0:o.length)===0?n.jsx("div",{className:"p-12 text-center",children:n.jsx("p",{className:"text-neutral-500",children:"No players in this league yet."})}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"divide-y divide-cream-100",children:x.map((b,_)=>{var C;const w=f+_,S=u(w),j=b.user_id===(t==null?void 0:t.id),N=w+1;return n.jsxs("div",{className:`flex items-center gap-4 p-5 transition-colors ${j?"bg-burgundy-50":"hover:bg-cream-50"}`,children:[n.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold ${S.bg} ${S.text}`,children:S.emoji||N}),n.jsx("div",{className:"flex-1",children:n.jsxs("p",{className:`font-semibold ${j?"text-burgundy-700":"text-neutral-800"}`,children:[(C=b.users)==null?void 0:C.display_name,j&&n.jsx("span",{className:"ml-2 text-xs text-burgundy-500",children:"(You)"})]})}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-2xl font-display text-neutral-800",children:b.total_points}),n.jsx("p",{className:"text-xs text-neutral-400",children:"points"})]})]},b.id)})}),y&&n.jsxs("div",{className:"p-4 border-t border-cream-100 flex items-center justify-between",children:[n.jsxs("p",{className:"text-sm text-neutral-500",children:["Showing ",f+1,"-",Math.min(m,d)," of ",d," ","players"]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>s(b=>Math.max(1,b-1)),disabled:r===1,className:"p-2 rounded-lg border border-cream-200 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-cream-50 transition-colors",children:n.jsx(mw,{className:"h-5 w-5 text-neutral-600"})}),n.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:p},(b,_)=>_+1).map(b=>{const _=b===1||b===p||b>=r-1&&b<=r+1,w=b===2&&r>3||b===p-1&&r<p-2;return!_&&!w?null:w&&!_?n.jsx("span",{className:"px-2 text-neutral-400",children:"..."},b):_?n.jsx("button",{onClick:()=>s(b),className:`w-10 h-10 rounded-lg font-medium transition-colors ${b===r?"bg-burgundy-500 text-white":"border border-cream-200 text-neutral-600 hover:bg-cream-50"}`,children:b},b):null})}),n.jsx("button",{onClick:()=>s(b=>Math.min(p,b+1)),disabled:r===p,className:"p-2 rounded-lg border border-cream-200 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-cream-50 transition-colors",children:n.jsx(dr,{className:"h-5 w-5 text-neutral-600"})})]})]})]})]}),t&&o&&n.jsx("div",{className:"mt-6 bg-gradient-to-r from-burgundy-500 to-burgundy-600 rounded-2xl p-6 text-white shadow-elevated animate-slide-up",style:{animationDelay:"0.1s"},children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-burgundy-100 text-sm",children:"Your Position"}),n.jsxs("p",{className:"text-3xl font-display mt-1",children:["#",o.findIndex(b=>b.user_id===t.id)+1]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-burgundy-100 text-sm",children:"Your Points"}),n.jsx("p",{className:"text-3xl font-display mt-1",children:((g=o.find(b=>b.user_id===t.id))==null?void 0:g.total_points)||0})]})]})})]})}function Zae(){return n.jsxs(n.Fragment,{children:[n.jsx(_e,{}),n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated p-8 max-w-md w-full text-center border border-cream-200",children:[n.jsx("div",{className:"w-20 h-20 bg-burgundy-100 rounded-full flex items-center justify-center mx-auto mb-6",children:n.jsx(Ka,{className:"h-10 w-10 text-burgundy-500"})}),n.jsx("h1",{className:"text-6xl font-display font-bold text-burgundy-500 mb-2",children:"404"}),n.jsx("h2",{className:"text-xl font-display text-neutral-600 mb-4",children:"Page Not Found"}),n.jsx("p",{className:"text-neutral-500 mb-8",children:"This page has been voted off the island."}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[n.jsxs("button",{onClick:()=>window.history.back(),className:"flex items-center justify-center gap-2 px-6 py-3 bg-cream-100 text-neutral-700 rounded-xl font-medium hover:bg-cream-200 transition-colors",children:[n.jsx(ht,{className:"h-5 w-5"}),"Go Back"]}),n.jsxs(se,{to:"/dashboard",className:"flex items-center justify-center gap-2 px-6 py-3 bg-burgundy-500 text-white rounded-xl font-medium hover:bg-burgundy-600 transition-colors",children:[n.jsx(oP,{className:"h-5 w-5"}),"Dashboard"]})]})]})})]})}function yj({index:e,totalItems:t,onMoveUp:r,onMoveDown:s,onDelete:a,showDelete:i=!1,className:o=""}){const{isAdmin:l}=Et(),{isEditMode:u}=ol();if(!l||!u)return null;const d=e===0,p=e===t-1;return n.jsxs("div",{className:`flex items-center gap-1 ${o}`,children:[n.jsx("button",{onClick:f=>{f.preventDefault(),f.stopPropagation(),r()},disabled:d,className:`p-1.5 rounded transition-all ${d?"bg-neutral-100 text-neutral-300 cursor-not-allowed":"bg-neutral-200 hover:bg-neutral-300 text-neutral-600"}`,title:"Move Up",children:n.jsx(fs,{className:"h-3 w-3"})}),n.jsx("button",{onClick:f=>{f.preventDefault(),f.stopPropagation(),s()},disabled:p,className:`p-1.5 rounded transition-all ${p?"bg-neutral-100 text-neutral-300 cursor-not-allowed":"bg-neutral-200 hover:bg-neutral-300 text-neutral-600"}`,title:"Move Down",children:n.jsx(en,{className:"h-3 w-3"})}),i&&a&&n.jsx("button",{onClick:f=>{f.preventDefault(),f.stopPropagation(),a()},className:"p-1.5 bg-red-100 hover:bg-red-200 text-red-600 rounded transition-all",title:"Delete",children:n.jsx(ms,{className:"h-3 w-3"})})]})}function eie(){const{user:e,isAdmin:t}=Et(),{getCopy:r}=Kt(),{isEditMode:s}=ol(),a=at(),{data:i}=ie({queryKey:["how-to-play","step-order"],queryFn:async()=>{const{data:p}=await X.from("site_copy").select("content").eq("key","how-to-play.step-order").single();if(p!=null&&p.content)try{return JSON.parse(p.content)}catch{return[0,1,2,3,4,5]}return[0,1,2,3,4,5]}}),o=ke({mutationFn:async p=>{const{error:f}=await X.from("site_copy").upsert({key:"how-to-play.step-order",page:"how-to-play",content:JSON.stringify(p),is_active:!0},{onConflict:"key"});if(f)throw f},onSuccess:()=>{a.invalidateQueries({queryKey:["how-to-play","step-order"]})}}),l=p=>{if(!i||p===0)return;const f=[...i];[f[p-1],f[p]]=[f[p],f[p-1]],o.mutate(f)},u=p=>{if(!i||p===i.length-1)return;const f=[...i];[f[p],f[p+1]]=[f[p+1],f[p]],o.mutate(f)},d=[{icon:Ke,title:r("how-to-play.step1.title","Join or Create a League"),description:r("how-to-play.step1.description","Play with friends in a private league or join a public one. Each league has its own leaderboard and bragging rights.")},{icon:ot,title:r("how-to-play.step2.title","Rank Your Castaways"),description:r("how-to-play.step2.description","After the first episode, participants rank all castaways 1-24. This determines who you get in the snake draft.")},{icon:kn,title:r("how-to-play.step3.title","Get Your Team"),description:r("how-to-play.step3.description","After the deadline, the system runs a snake draft. You get 2 castaways based on your draft position and rankings.")},{icon:wn,title:r("how-to-play.step4.title","Make Weekly Picks (Starting/Benched)"),description:r("how-to-play.step4.description",'Each week, choose which of your 2 castaways to "start" for that episode. Only your starting castaway earns points - the other is benched.')},{icon:zn,title:r("how-to-play.step5.title","Earn Points"),description:r("how-to-play.step5.description","Points are based on your STARTING castaway's performance that week. Your benched castaway does not score."),linkTo:"/scoring",linkText:"View Full Scoring Rules "},{icon:tP,title:r("how-to-play.step6.title","Win Your League"),description:r("how-to-play.step6.description","The player with the most total points at the end of the season wins! Track your progress on the leaderboard.")}];return n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex flex-col",children:[n.jsx(_e,{}),n.jsx("div",{className:"px-6 py-10 text-center bg-gradient-to-b from-burgundy-50 to-transparent",children:n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsxs("div",{className:"flex items-center justify-center gap-3 mb-3",children:[n.jsx($c,{className:"h-9 w-9 text-burgundy-500"}),n.jsx(ne,{copyKey:"how-to-play.header.title",as:"h1",className:"text-3xl md:text-4xl font-display font-bold text-neutral-800",children:r("how-to-play.header.title","How to Play")})]}),n.jsx(ne,{copyKey:"how-to-play.header.subtitle",as:"p",className:"text-neutral-600 text-lg max-w-2xl mx-auto",children:r("how-to-play.header.subtitle","Everything you need to know to dominate your league")})]})}),n.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8 flex-1",children:[n.jsx("section",{className:"mb-16",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(se,{to:"/scoring",className:"bg-white rounded-2xl shadow-card border border-cream-200 p-6 hover:shadow-card-hover transition-shadow group",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-12 h-12 bg-burgundy-100 rounded-xl flex items-center justify-center",children:n.jsx(zn,{className:"h-6 w-6 text-burgundy-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-display font-bold text-neutral-800",children:"Scoring Rules"}),n.jsx("p",{className:"text-neutral-500 text-sm",children:"100+ ways to earn points"})]})]}),n.jsx(Hn,{className:"h-5 w-5 text-neutral-400 group-hover:text-burgundy-500 transition-colors"})]})}),n.jsx(se,{to:"/sms-commands",className:"bg-white rounded-2xl shadow-card border border-cream-200 p-6 hover:shadow-card-hover transition-shadow group",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center",children:n.jsx(el,{className:"h-6 w-6 text-green-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-display font-bold text-neutral-800",children:"SMS Commands"}),n.jsx("p",{className:"text-neutral-500 text-sm",children:"Make picks via text"})]})]}),n.jsx(Hn,{className:"h-5 w-5 text-neutral-400 group-hover:text-green-500 transition-colors"})]})}),n.jsx(se,{to:"/timeline",className:"bg-white rounded-2xl shadow-card border border-cream-200 p-6 hover:shadow-card-hover transition-shadow group",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-12 h-12 bg-amber-100 rounded-xl flex items-center justify-center",children:n.jsx(wn,{className:"h-6 w-6 text-amber-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-display font-bold text-neutral-800",children:"Weekly Timeline"}),n.jsx("p",{className:"text-neutral-500 text-sm",children:"Know every deadline"})]})]}),n.jsx(Hn,{className:"h-5 w-5 text-neutral-400 group-hover:text-amber-500 transition-colors"})]})}),n.jsx(se,{to:"/faq",className:"bg-white rounded-2xl shadow-card border border-cream-200 p-6 hover:shadow-card-hover transition-shadow group",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center",children:n.jsx($c,{className:"h-6 w-6 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-display font-bold text-neutral-800",children:"FAQ"}),n.jsx("p",{className:"text-neutral-500 text-sm",children:"Common questions answered"})]})]}),n.jsx(Hn,{className:"h-5 w-5 text-neutral-400 group-hover:text-blue-500 transition-colors"})]})})]})}),n.jsxs("section",{className:"mb-16",children:[n.jsx(ne,{copyKey:"how-to-play.steps.section-title",as:"h2",className:"text-2xl font-display font-bold text-neutral-800 mb-8 text-center",children:r("how-to-play.steps.section-title","The Game in 6 Steps")}),n.jsx("div",{className:"space-y-6",children:(i||[0,1,2,3,4,5]).map((p,f)=>{const m=d[p];return m?n.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 overflow-hidden relative",children:[t&&s&&n.jsx("div",{className:"absolute top-2 right-2 z-10",children:n.jsx(yj,{index:f,totalItems:d.length,onMoveUp:()=>l(f),onMoveDown:()=>u(f)})}),n.jsx("div",{className:"p-6 md:p-8",children:n.jsxs("div",{className:"flex items-start gap-4 md:gap-6",children:[n.jsx("div",{className:"flex-shrink-0 w-14 h-14 bg-burgundy-500 rounded-2xl flex items-center justify-center shadow-lg",children:n.jsx(m.icon,{className:"h-7 w-7 text-white"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"flex items-center gap-2 mb-2",children:n.jsxs("span",{className:"text-burgundy-500 font-bold text-sm",children:["Step ",f+1]})}),n.jsx(ne,{copyKey:`how-to-play.step${p+1}.title`,as:"h3",className:"text-xl md:text-2xl font-display font-bold text-neutral-800 mb-2",children:m.title}),n.jsx(ne,{copyKey:`how-to-play.step${p+1}.description`,as:"p",className:"text-neutral-600 mb-4",children:m.description}),"linkTo"in m&&m.linkTo&&n.jsxs(se,{to:m.linkTo,className:"inline-flex items-center gap-2 mt-2 text-burgundy-600 hover:text-burgundy-700 font-medium",children:[m.linkText||"Learn more",n.jsx(Hn,{className:"h-4 w-4"})]})]})]})})]},p):null})})]}),n.jsx("section",{className:"text-center pb-16",children:n.jsxs("div",{className:"bg-gradient-to-r from-burgundy-500 to-burgundy-600 rounded-2xl p-8 md:p-12 text-white shadow-lg",children:[n.jsx(ne,{copyKey:"how-to-play.cta.title",as:"h2",className:"text-2xl md:text-3xl font-display font-bold mb-4",children:r("how-to-play.cta.title","Ready to Play?")}),n.jsx(ne,{copyKey:"how-to-play.cta.description",as:"p",className:"text-burgundy-100 mb-8 max-w-lg mx-auto text-lg",children:r("how-to-play.cta.description","Join Season 50: In the Hands of the Fans and prove you know more about Survivor strategy than your friends.")}),e?n.jsxs(se,{to:"/dashboard",className:"inline-flex items-center gap-2 bg-white text-burgundy-600 font-bold px-8 py-4 rounded-xl hover:bg-cream-100 transition-colors text-lg",children:[r("how-to-play.cta.button-logged-in","Go to Dashboard"),n.jsx(Hn,{className:"h-5 w-5"})]}):n.jsxs(se,{to:"/signup",className:"inline-flex items-center gap-2 bg-white text-burgundy-600 font-bold px-8 py-4 rounded-xl hover:bg-cream-100 transition-colors text-lg",children:[r("how-to-play.cta.button-logged-out","Join Now - It's Free"),n.jsx(Hn,{className:"h-5 w-5"})]})]})})]}),n.jsx(tn,{})]})}const tie=[{category:"Pre-Merge Team Reward and Immunity Challenge Scoring",rules:[{positive:!0,text:"Your player's team wins a reward challenge (if three teams, get 1st or 2nd)"},{positive:!1,text:"Your player sits out of a reward, immunity or combined immunity/reward challenge"},{positive:!0,text:"Your player gives up their chance for reward to someone else before the challenge; not penalized for sitting out"}]},{category:"Pre-Merge Tribal Council Scoring",rules:[{positive:!0,text:"Your player doesn't go to tribal council"},{positive:!0,text:"Your player goes to tribal council but does not get snuffed"},{positive:!1,text:"Each vote your player receives to vote them out and does count"},{positive:!0,text:"Each vote your player receives but does not count (eg Player is now immune after votes were cast)"}]},{category:"Post-Merge Reward and Individual Immunity Challenge Scoring",rules:[{positive:!0,text:"Your player gives up their chance for reward to someone else before the challenge; not penalized for sitting out"},{positive:!1,text:"Your player is the first individual eliminated in an individual reward or immunity challenge"}]},{category:"Advantages Scoring",rules:[{positive:!1,text:"Your player is on a journey, must play (no choice), and incurs a disadvantage"},{positive:!1,text:"Your player finds a hidden advantage but 'plays it safe' and puts it back"},{positive:!1,text:"Your player uses a real or fake advantage unsuccessfully for themselves or another player"},{positive:!1,text:"Your player finds a fake advantage and believes it is real (eg 'It's a fucking stick!' incident (if the stick was an advantage rather than an idol) would yield Jason -1 because he believed it was real but yield Eliza 0 because she did not believe it was real)"}]},{category:"Hidden Immunity Idols Scoring",rules:[{positive:!0,text:"Your player gives their hidden immunity idol to another player"},{positive:!0,text:"Your player uses their Shot in the Dark successfully"}]},{category:"Random Scoring",rules:[{positive:!0,text:"Wardrobe malfunction (must be more than blurring of a crack or through-the-pants; we're talking boobs fully popping out or Free Willy)"},{positive:!1,text:"Crying/brink of tears for negative reasons (upset, bullied)"},{positive:!0,text:"Your player secretly eats food and doesn't share with the entire tribe"}]},{category:"Final Three",rules:[{positive:!0,text:"You are chosen by another castaway to be in the final three"},{positive:!0,text:"Each vote your player receives in the final vote"},{positive:!0,text:"Your player wins the season"}]}];function ZE(){const{user:e}=Et(),{getCopy:t}=Kt();return n.jsxs("div",{className:"min-h-screen bg-cream-50 flex flex-col",children:[n.jsx(_e,{}),n.jsx("div",{className:"px-6 py-10 text-center bg-gradient-to-b from-burgundy-50 to-transparent",children:n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsxs("div",{className:"flex items-center justify-center gap-3 mb-3",children:[n.jsx($c,{className:"h-9 w-9 text-burgundy-500"}),n.jsx(ne,{copyKey:"scoring.header.title",as:"h1",className:"text-3xl md:text-4xl font-display font-bold text-neutral-800",children:t("scoring.header.title","Scoring Rules")})]}),n.jsx(ne,{copyKey:"scoring.header.subtitle",as:"p",className:"text-neutral-600 max-w-2xl mx-auto",children:t("scoring.header.subtitle","See how castaways earn and lose points each episode. New rules are added each season.")})]})}),n.jsx("div",{className:"max-w-4xl mx-auto px-6 pb-12 flex-1",children:n.jsx("div",{className:"space-y-8",children:tie.map(r=>n.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 overflow-hidden",children:[n.jsx("div",{className:"px-6 py-4 bg-burgundy-50 border-b border-burgundy-100",children:n.jsx(ne,{copyKey:`scoring.category.${r.category.toLowerCase().replace(/\s+/g,"_")}`,as:"h2",className:"text-lg font-display font-bold text-burgundy-800",children:t(`scoring.category.${r.category.toLowerCase().replace(/\s+/g,"_")}`,r.category)})}),n.jsx("div",{className:"divide-y divide-cream-100",children:r.rules.map((s,a)=>n.jsxs("div",{className:"px-6 py-4 flex items-start gap-4",children:[n.jsx("span",{className:`font-bold text-xl min-w-[30px] text-center ${s.positive?"text-green-600":"text-red-600"}`,children:s.positive?"+":""}),n.jsx(ne,{copyKey:`scoring.rule.${r.category.toLowerCase().replace(/\s+/g,"_")}.${a}`,as:"p",className:"text-neutral-700 flex-1",multiline:!0,children:t(`scoring.rule.${r.category.toLowerCase().replace(/\s+/g,"_")}.${a}`,s.text)})]},a))})]},r.category))})}),n.jsx("div",{className:"max-w-4xl mx-auto px-6 pb-16 text-center",children:n.jsxs("div",{className:"bg-burgundy-500 rounded-2xl p-8 text-white",children:[n.jsx(ne,{copyKey:"scoring.cta.title",as:"h2",className:"text-2xl font-display font-bold mb-4",children:t("scoring.cta.title","Ready to Put Your Survivor Knowledge to the Test?")}),n.jsx(ne,{copyKey:"scoring.cta.description",as:"p",className:"text-burgundy-100 mb-6 max-w-lg mx-auto",children:t("scoring.cta.description","Join Season 50 and prove you know more about Survivor strategy than your friends.")}),e?n.jsxs(se,{to:"/dashboard",className:"inline-flex items-center gap-2 bg-white text-burgundy-600 font-bold px-8 py-3 rounded-xl hover:bg-cream-100 transition-colors",children:["Go to Dashboard",n.jsx(Hn,{className:"h-5 w-5"})]}):n.jsxs(se,{to:"/signup",className:"inline-flex items-center gap-2 bg-white text-burgundy-600 font-bold px-8 py-3 rounded-xl hover:bg-cream-100 transition-colors",children:["Join Now - It's Free",n.jsx(Hn,{className:"h-5 w-5"})]})]})}),n.jsx(tn,{})]})}const e5=[{day:"Wednesday",time:"8:00 PM ET / 5:00 PM PT",icon:mr,color:"burgundy",title:"Picks Lock & Episode Airs",description:`All weekly picks lock when the episode starts airing on CBS. Make sure you've selected which of your castaways to "play" for this episode before showtime.`,tip:"Set a reminder for Wednesday afternoon! If you forget to pick, the system will randomly select from your available castaways."},{day:"Wednesday",time:"~9:00 PM PT",icon:Ys,color:"green",title:"Results Posted",description:"Results are usually released shortly after the episode finishes airing on the west coast. In some cases, it may take until the next morning.",tip:"Results notifications respect your spoiler delay settings."},{day:"Friday",time:"11:00 AM ET / 8:00 AM PT",icon:an,color:"blue",title:"Weekly Picks Open",description:"Picks for the next episode open Friday morning. You have until the next Wednesday at 8pm ET to decide which of your castaways to play.",tip:"The earlier you pick, the less chance you forget!"}];function nie(){const{user:e,isAdmin:t}=Et(),{getCopy:r}=Kt(),{isEditMode:s}=ol(),a=at(),{data:i}=ie({queryKey:["timeline","event-order"],queryFn:async()=>{const{data:d}=await X.from("site_copy").select("content").eq("key","timeline.event-order").single();if(d!=null&&d.content)try{return JSON.parse(d.content)}catch{return[0,1,2]}return[0,1,2]}}),o=ke({mutationFn:async d=>{const{error:p}=await X.from("site_copy").upsert({key:"timeline.event-order",page:"timeline",content:JSON.stringify(d),is_active:!0},{onConflict:"key"});if(p)throw p},onSuccess:()=>{a.invalidateQueries({queryKey:["timeline","event-order"]})}}),l=d=>{if(!i||d===0)return;const p=[...i];[p[d-1],p[d]]=[p[d],p[d-1]],o.mutate(p)},u=d=>{if(!i||d===i.length-1)return;const p=[...i];[p[d],p[d+1]]=[p[d+1],p[d]],o.mutate(p)};return n.jsxs("div",{className:"min-h-screen bg-cream-50 flex flex-col",children:[n.jsx(_e,{}),n.jsx("div",{className:"px-6 py-10 text-center bg-gradient-to-b from-amber-50 to-transparent",children:n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsxs("div",{className:"flex items-center justify-center gap-3 mb-3",children:[n.jsx(wn,{className:"h-9 w-9 text-amber-600"}),n.jsx(ne,{copyKey:"timeline.header.title",as:"h1",className:"text-3xl md:text-4xl font-display font-bold text-neutral-800",children:r("timeline.header.title","Weekly Timeline")})]}),n.jsx(ne,{copyKey:"timeline.header.subtitle",as:"p",className:"text-neutral-600 max-w-2xl mx-auto",children:r("timeline.header.subtitle","Every week follows the same rhythm. Know the schedule, never miss a deadline, and maximize your scoring potential.")})]})}),n.jsx("div",{className:"max-w-3xl mx-auto px-6 pb-12",children:n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute left-8 top-0 bottom-0 w-0.5 bg-cream-300"}),n.jsx("div",{className:"space-y-8",children:(i||[0,1,2]).map((d,p)=>{const f=e5[d];if(!f)return null;const m=f.icon,x=f.color==="burgundy"?"bg-burgundy-500":f.color==="orange"?"bg-orange-500":f.color==="amber"?"bg-amber-500":f.color==="green"?"bg-green-500":"bg-blue-500",y=f.color==="burgundy"?"bg-burgundy-50 border-burgundy-200":f.color==="orange"?"bg-orange-50 border-orange-200":f.color==="amber"?"bg-amber-50 border-amber-200":f.color==="green"?"bg-green-50 border-green-200":"bg-blue-50 border-blue-200",g=f.color==="burgundy"?"text-burgundy-700":f.color==="orange"?"text-orange-700":f.color==="amber"?"text-amber-700":f.color==="green"?"text-green-700":"text-blue-700";return n.jsxs("div",{className:"relative flex gap-6",children:[n.jsx("div",{className:`relative z-10 w-16 h-16 ${x} rounded-2xl flex items-center justify-center shadow-lg flex-shrink-0`,children:n.jsx(m,{className:"h-7 w-7 text-white"})}),n.jsxs("div",{className:"flex-1 bg-white rounded-2xl shadow-card border border-cream-200 p-6 relative",children:[t&&s&&n.jsx("div",{className:"absolute top-2 right-2 z-10",children:n.jsx(yj,{index:p,totalItems:e5.length,onMoveUp:()=>l(p),onMoveDown:()=>u(p)})}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-2",children:[n.jsx(ne,{copyKey:`timeline.event${d+1}.day`,as:"span",className:"font-display font-bold text-neutral-800",children:r(`timeline.event${d+1}.day`,f.day)}),n.jsx("span",{className:"text-neutral-400",children:""}),n.jsxs("span",{className:"text-neutral-600 flex items-center gap-1",children:[n.jsx(Nt,{className:"h-4 w-4"}),n.jsx(ne,{copyKey:`timeline.event${d+1}.time`,as:"span",className:"",children:r(`timeline.event${d+1}.time`,f.time)})]})]}),n.jsx(ne,{copyKey:`timeline.event${d+1}.title`,as:"h3",className:"text-xl font-display font-bold text-neutral-800 mb-2",children:r(`timeline.event${d+1}.title`,f.title)}),n.jsx(ne,{copyKey:`timeline.event${d+1}.description`,as:"p",className:"text-neutral-600 mb-4",children:r(`timeline.event${d+1}.description`,f.description)}),n.jsx("div",{className:`${y} rounded-xl p-3 border`,children:n.jsxs("p",{className:`text-sm ${g} flex items-start gap-2`,children:[n.jsx(dj,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),n.jsx(ne,{copyKey:`timeline.event${d+1}.tip`,as:"span",className:"",children:r(`timeline.event${d+1}.tip`,f.tip)})]})})]})]},d)})})]})}),n.jsx("div",{className:"max-w-3xl mx-auto px-6 pb-12",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 p-6",children:[n.jsxs("h3",{className:"font-display font-bold text-lg text-neutral-800 mb-4 flex items-center gap-2",children:[n.jsx(yt,{className:"h-5 w-5 text-amber-500"}),n.jsx(ne,{copyKey:"timeline.notes.title",as:"span",className:"",children:r("timeline.notes.title","Important Notes")})]}),n.jsxs("ul",{className:"space-y-3 text-neutral-600",children:[n.jsxs("li",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-burgundy-500 mt-2 flex-shrink-0"}),n.jsx(ne,{copyKey:"timeline.notes.note1",as:"span",className:"",children:r("timeline.notes.note1","All times are in Pacific Standard Time (PST) unless otherwise noted. The episode airs at 8pm Eastern (5pm Pacific).")})]}),n.jsxs("li",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-burgundy-500 mt-2 flex-shrink-0"}),n.jsx(ne,{copyKey:"timeline.notes.note2",as:"span",className:"",children:r("timeline.notes.note2","Double episodes may have adjusted schedules. We'll notify you of any changes.")})]}),n.jsxs("li",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-burgundy-500 mt-2 flex-shrink-0"}),n.jsx(ne,{copyKey:"timeline.notes.note3",as:"span",className:"",children:r("timeline.notes.note3","Forgot to pick? The system randomly selects from your available castaways.")})]}),n.jsxs("li",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-burgundy-500 mt-2 flex-shrink-0"}),n.jsx(ne,{copyKey:"timeline.notes.note4",as:"span",className:"",children:r("timeline.notes.note4","Both castaways eliminated? Your torch is snuffed for the season, but you can still watch the leaderboard!")})]})]})]})}),n.jsx("div",{className:"max-w-3xl mx-auto px-6 pb-16 text-center",children:n.jsxs("div",{className:"bg-gradient-to-r from-amber-500 to-orange-500 rounded-2xl p-8 text-white",children:[n.jsx(ne,{copyKey:"timeline.cta.title",as:"h2",className:"text-2xl font-display font-bold mb-4",children:r("timeline.cta.title","Never Miss a Deadline")}),n.jsx(ne,{copyKey:"timeline.cta.description",as:"p",className:"text-amber-100 mb-6 max-w-lg mx-auto",children:r("timeline.cta.description","Enable notifications to get reminders before picks lock and when results are posted.")}),e?n.jsxs(se,{to:"/settings",className:"inline-flex items-center gap-2 bg-white text-amber-600 font-bold px-8 py-3 rounded-xl hover:bg-cream-100 transition-colors",children:[n.jsx(ne,{copyKey:"timeline.cta.button_settings",as:"span",className:"",children:r("timeline.cta.button_settings","Manage Notifications")}),n.jsx(Hn,{className:"h-5 w-5"})]}):n.jsxs(se,{to:"/signup",className:"inline-flex items-center gap-2 bg-white text-amber-600 font-bold px-8 py-3 rounded-xl hover:bg-cream-100 transition-colors",children:[n.jsx(ne,{copyKey:"timeline.cta.button_signup",as:"span",className:"",children:r("timeline.cta.button_signup","Join Now - It's Free")}),n.jsx(Hn,{className:"h-5 w-5"})]})]})}),n.jsx(tn,{})]})}function rie(){var b;const{code:e}=Wn(),t=$s();Kt();const[r,s]=$.useState(""),[a,i]=$.useState(null),{data:o,isLoading:l}=ie({queryKey:["session"],queryFn:async()=>{const{data:_}=await X.auth.getSession();return _.session}}),{data:u,isLoading:d,error:p}=ie({queryKey:["league-by-code",e],queryFn:async()=>{var S;if(!e)throw new Error("No code provided");const _=e.trim().toUpperCase(),w=await jt(`/leagues/code/${_}`);if(w.error)throw new Error(w.error);if(!((S=w.data)!=null&&S.league))throw new Error("League not found");return w.data.league},enabled:!!e&&e.trim().length>0,retry:3,retryDelay:_=>Math.min(1e3*2**_,3e3),staleTime:3e4}),f=u,m=u==null?void 0:u.member_count,{data:x}=ie({queryKey:["is-member",f==null?void 0:f.id,(b=o==null?void 0:o.user)==null?void 0:b.id],queryFn:async()=>{var w;return!(o!=null&&o.access_token)||!(f!=null&&f.id)?!1:((w=(await Zn(`/leagues/${f.id}/join/status`,o.access_token)).data)==null?void 0:w.paid)??!1},enabled:!!(o!=null&&o.access_token)&&!!(f!=null&&f.id)}),y=ke({mutationFn:async()=>{var w;if(!(o!=null&&o.access_token)||!f)throw new Error("Not authenticated");const _=await Zn(`/leagues/${f.id}/join`,o.access_token,{method:"POST",body:JSON.stringify({password:r})});if(_.status===402){const S=await Zn(`/leagues/${f.id}/join/checkout`,o.access_token,{method:"POST"});if(S.error)throw new Error(S.error||"Failed to create checkout session");return(w=S.data)!=null&&w.checkout_url&&(window.location.href=S.data.checkout_url),null}if(_.error)throw new Error(_.error);return _.data},onSuccess:_=>{_&&t(`/leagues/${f.id}`)},onError:_=>{i(_.message),Ct(_,{tags:{operation:"join_league",league_code:e},extra:{league_id:f==null?void 0:f.id}})}});if($.useEffect(()=>{const _=window.location.hash.includes("access_token");!l&&!o&&e&&!_&&t(`/login?redirect=/join/${e}`)},[o,l,e,t]),l||d)return n.jsxs(n.Fragment,{children:[n.jsx(_e,{}),n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex flex-col items-center justify-center px-4",children:[n.jsx("img",{src:"/logo.png",alt:"RGFL",className:"h-16 w-auto mb-6 animate-pulse"}),n.jsx("p",{className:"text-neutral-600 font-medium",children:"Loading league details..."})]})]});if(p||!f)return n.jsxs(n.Fragment,{children:[n.jsx(_e,{}),n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center px-4",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated p-8 border border-cream-200 max-w-md text-center",children:[n.jsx(Tr,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),n.jsx("h1",{className:"text-2xl font-display font-bold text-neutral-800 mb-2",children:"League Not Found"}),n.jsxs("p",{className:"text-neutral-500 mb-6",children:['The invite code "',e,`" doesn't match any league. Check the code and try again.`]}),n.jsx(se,{to:"/dashboard",className:"btn btn-primary inline-block",children:"Go to Dashboard"})]})})]});if(x)return n.jsxs(n.Fragment,{children:[n.jsx(_e,{}),n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center px-4",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated p-8 border border-cream-200 max-w-md text-center",children:[n.jsx(xt,{className:"h-12 w-12 text-green-500 mx-auto mb-4"}),n.jsx("h1",{className:"text-2xl font-display font-bold text-neutral-800 mb-2",children:"Already a Member"}),n.jsxs("p",{className:"text-neutral-500 mb-6",children:["You're already a member of ",f.name,"!"]}),n.jsx(se,{to:`/leagues/${f.id}`,className:"btn btn-primary inline-block",children:"Go to League"})]})})]});const g=m!==void 0&&m>=f.max_players;return n.jsxs(n.Fragment,{children:[n.jsx(_e,{}),n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center px-4",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated p-8 border border-cream-200 max-w-md w-full",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("h1",{className:"text-2xl font-display font-bold text-neutral-800 mb-2",children:f.name}),n.jsxs("p",{className:"text-neutral-500",children:["Season ",f.seasons.number,": ",f.seasons.name]})]}),n.jsxs("div",{className:"flex justify-center gap-6 mb-8",children:[n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"flex items-center justify-center gap-1 text-burgundy-500",children:[n.jsx(Ke,{className:"h-5 w-5"}),n.jsxs("span",{className:"text-xl font-bold",children:[m,"/",f.max_players]})]}),n.jsx("p",{className:"text-neutral-500 text-sm",children:"Players"})]}),f.require_donation&&f.donation_amount&&n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"flex items-center justify-center gap-1 text-burgundy-500",children:[n.jsx(Zo,{className:"h-5 w-5"}),n.jsx("span",{className:"text-xl font-bold",children:f.donation_amount})]}),n.jsx("p",{className:"text-neutral-500 text-sm",children:"Entry Fee"})]})]}),f.donation_notes&&n.jsx("div",{className:"bg-cream-50 rounded-xl p-4 mb-6 border border-cream-200",children:n.jsx("p",{className:"text-neutral-600 text-sm",children:f.donation_notes})}),g?n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-red-500 mb-4",children:"This league is full."}),n.jsx(se,{to:"/dashboard",className:"btn btn-secondary inline-block",children:"Back to Dashboard"})]}):n.jsxs("form",{onSubmit:_=>{_.preventDefault(),i(null),y.mutate()},children:[(u==null?void 0:u.has_password)&&n.jsxs("div",{className:"mb-6",children:[n.jsxs("label",{className:"block text-neutral-700 text-sm font-medium mb-2",children:[n.jsx(mr,{className:"h-4 w-4 inline mr-1"}),"League Password"]}),n.jsx("input",{type:"password",value:r,onChange:_=>s(_.target.value),placeholder:"Enter password",className:"input",required:!0})]}),a&&n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-3 mb-6",children:n.jsx("p",{className:"text-red-600 text-sm",children:a})}),n.jsx("button",{type:"submit",disabled:y.isPending,className:"w-full btn btn-primary flex items-center justify-center gap-2",children:y.isPending?n.jsxs(n.Fragment,{children:[n.jsx(be,{className:"h-5 w-5 animate-spin"}),"Joining..."]}):f.require_donation?n.jsxs(n.Fragment,{children:[n.jsx(Zo,{className:"h-5 w-5"}),"Pay $",f.donation_amount," & Join"]}):"Join League"})]})]})})]})}function sie(){return n.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-2xl p-4 mb-6",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"p-2 bg-amber-100 rounded-full",children:n.jsx(Uc,{className:"h-5 w-5 text-amber-600"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-bold text-amber-800",children:"Add Your Phone Number"}),n.jsx("p",{className:"text-sm text-amber-700 mt-1",children:'Verify your phone to receive SMS pick reminders and use text commands like "PICK Boston Rob" to submit picks on the go!'}),n.jsxs("a",{href:"#phone-section",className:"inline-flex items-center gap-1 text-sm font-medium text-amber-800 hover:text-amber-900 mt-2",children:[n.jsx(fj,{className:"h-4 w-4"}),"Set up phone below"]})]})]})})}function aie({displayName:e,email:t,avatarUrl:r,userId:s,onUpdateName:a,onUpdateAvatar:i,isUpdating:o,error:l,success:u}){const[d,p]=$.useState(!1),[f,m]=$.useState(""),[x,y]=$.useState(!1),[g,b]=$.useState(null),_=$.useRef(null),w=()=>{f.trim()&&(a(f.trim()),p(!1),m(""))},S=()=>{p(!1),m("")},j=()=>{m(e||""),p(!0)},N=()=>{var E;(E=_.current)==null||E.click()},C=async E=>{var I;const T=(I=E.target.files)==null?void 0:I[0];if(T){if(!T.type.startsWith("image/")){b("Please select an image file");return}if(T.size>2*1024*1024){b("Image must be less than 2MB");return}y(!0),b(null);try{const A=T.name.split(".").pop(),O=`${s}-${Date.now()}.${A}`,{error:M}=await X.storage.from("avatars").upload(O,T,{upsert:!0});if(M){M.message.includes("Bucket not found")||M.message.includes("not found")?b("Avatar storage is being set up. Please try again later or contact support."):M.message.includes("exceeded")||M.message.includes("size")?b("Image is too large. Please choose a smaller file (max 2MB)."):M.message.includes("type")||M.message.includes("mime")?b("Invalid file type. Please upload a JPG, PNG, or GIF image."):b("Unable to upload avatar. Please try again."),console.error("Avatar upload error:",M);return}const{data:{publicUrl:B}}=X.storage.from("avatars").getPublicUrl(O);i(B)}catch(A){console.error("Avatar upload error:",A),b("Something went wrong uploading your avatar. Please try again.")}finally{y(!1),_.current&&(_.current.value="")}}};return n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200 mb-6",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsxs("div",{className:"relative group",children:[n.jsx("div",{className:"w-16 h-16 rounded-full overflow-hidden bg-burgundy-500 flex items-center justify-center cursor-pointer",onClick:N,children:r?n.jsx("img",{src:r,alt:e||"Profile",className:"w-full h-full object-cover"}):n.jsx(hh,{className:"h-8 w-8 text-white"})}),n.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer",onClick:N,children:x?n.jsx(be,{className:"h-6 w-6 text-white animate-spin"}):n.jsx(ete,{className:"h-6 w-6 text-white"})}),n.jsx("input",{ref:_,type:"file",accept:"image/*",onChange:C,className:"hidden",disabled:x})]}),n.jsxs("div",{className:"flex-1",children:[d?n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",value:f,onChange:E=>m(E.target.value),placeholder:"Enter display name",className:"input flex-1",autoFocus:!0}),n.jsx("button",{onClick:w,disabled:!f.trim()||o,className:"btn btn-primary",children:o?n.jsx(be,{className:"h-5 w-5 animate-spin"}):"Save"}),n.jsx("button",{onClick:S,className:"btn btn-secondary",disabled:o,children:"Cancel"})]}):n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800",children:e}),n.jsx("button",{onClick:j,className:"p-1 text-neutral-400 hover:text-burgundy-500 transition-colors",title:"Edit display name",children:n.jsx(ru,{className:"h-4 w-4"})})]}),n.jsx("p",{className:"text-neutral-500",children:t})]})]}),(l||g)&&n.jsxs("div",{className:"mb-4 flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-xl text-red-600 text-sm",children:[n.jsx(yt,{className:"h-4 w-4 flex-shrink-0"}),l||g]}),u&&n.jsxs("div",{className:"mb-4 flex items-center gap-2 p-3 bg-green-50 border border-green-200 rounded-xl text-green-600 text-sm",children:[n.jsx(Ot,{className:"h-4 w-4 flex-shrink-0"}),u]}),n.jsxs("div",{className:"flex items-center gap-3 p-3 bg-cream-50 rounded-xl border border-cream-200",children:[n.jsx(sn,{className:"h-5 w-5 text-burgundy-500"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-neutral-800",children:t}),n.jsx("p",{className:"text-neutral-400 text-sm",children:"Primary email"})]}),n.jsx(Ot,{className:"h-5 w-5 text-green-500"})]})]})}const TP=[{value:"",label:"Not selected"},{value:"borneo",label:"Borneo (S1)"},{value:"australian-outback",label:"The Australian Outback (S2)"},{value:"africa",label:"Africa (S3)"},{value:"marquesas",label:"Marquesas (S4)"},{value:"thailand",label:"Thailand (S5)"},{value:"amazon",label:"The Amazon (S6)"},{value:"pearl-islands",label:"Pearl Islands (S7)"},{value:"all-stars",label:"All-Stars (S8)"},{value:"vanuatu",label:"Vanuatu (S9)"},{value:"palau",label:"Palau (S10)"},{value:"guatemala",label:"Guatemala (S11)"},{value:"panama",label:"Panama (S12)"},{value:"cook-islands",label:"Cook Islands (S13)"},{value:"fiji",label:"Fiji (S14)"},{value:"china",label:"China (S15)"},{value:"micronesia",label:"Micronesia (S16)"},{value:"gabon",label:"Gabon (S17)"},{value:"tocantins",label:"Tocantins (S18)"},{value:"samoa",label:"Samoa (S19)"},{value:"heroes-vs-villains",label:"Heroes vs. Villains (S20)"},{value:"nicaragua",label:"Nicaragua (S21)"},{value:"redemption-island",label:"Redemption Island (S22)"},{value:"south-pacific",label:"South Pacific (S23)"},{value:"one-world",label:"One World (S24)"},{value:"philippines",label:"Philippines (S25)"},{value:"caramoan",label:"Caramoan (S26)"},{value:"blood-vs-water",label:"Blood vs. Water (S27)"},{value:"cagayan",label:"Cagayan (S28)"},{value:"san-juan-del-sur",label:"San Juan del Sur (S29)"},{value:"worlds-apart",label:"Worlds Apart (S30)"},{value:"cambodia",label:"Cambodia (S31)"},{value:"kaoh-rong",label:"Kah Rng (S32)"},{value:"millennials-vs-gen-x",label:"Millennials vs. Gen X (S33)"},{value:"game-changers",label:"Game Changers (S34)"},{value:"heroes-healers-hustlers",label:"Heroes vs. Healers vs. Hustlers (S35)"},{value:"ghost-island",label:"Ghost Island (S36)"},{value:"david-vs-goliath",label:"David vs. Goliath (S37)"},{value:"edge-of-extinction",label:"Edge of Extinction (S38)"},{value:"island-of-the-idols",label:"Island of the Idols (S39)"},{value:"winners-at-war",label:"Winners at War (S40)"},{value:"41",label:"Survivor 41 (S41)"},{value:"42",label:"Survivor 42 (S42)"},{value:"43",label:"Survivor 43 (S43)"},{value:"44",label:"Survivor 44 (S44)"},{value:"45",label:"Survivor 45 (S45)"},{value:"46",label:"Survivor 46 (S46)"},{value:"47",label:"Survivor 47 (S47)"},{value:"48",label:"Survivor 48 (S48)"},{value:"49",label:"Survivor 49 (S49)"},{value:"50",label:"Survivor 50 (S50)"}];function iie(e){if(!e)return"Not selected";const t=TP.find(r=>r.value===e);return(t==null?void 0:t.label)||e}function oie({bio:e,hometown:t,favoriteCastaway:r,favoriteSeason:s,onUpdate:a,isUpdating:i}){const[o,l]=$.useState(null),[u,d]=$.useState(""),p=(y,g)=>{l(y),d(g||"")},f=()=>{if(o){const y={};o==="bio"&&(y.bio=u),o==="hometown"&&(y.hometown=u),o==="favoriteCastaway"&&(y.favorite_castaway=u),o==="favoriteSeason"&&(y.favorite_season=u),a(y),l(null),d("")}},m=()=>{l(null),d("")},x=(y,g,b,_,w,S)=>{const j=o===y;return n.jsxs("div",{className:"flex items-start gap-3 p-4 bg-cream-50 rounded-xl border border-cream-200",children:[n.jsx("div",{className:"mt-0.5",children:_}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm text-neutral-500 mb-1",children:g}),j?n.jsxs("div",{className:"space-y-2",children:[S?n.jsx("select",{value:u,onChange:N=>d(N.target.value),className:"w-full px-3 py-2 rounded-lg border border-cream-300 focus:border-burgundy-500 focus:ring-2 focus:ring-burgundy-500/20 outline-none transition-all bg-white text-sm",autoFocus:!0,children:TP.map(N=>n.jsx("option",{value:N.value,children:N.label},N.value))}):w?n.jsx("textarea",{value:u,onChange:N=>d(N.target.value),className:"w-full px-3 py-2 rounded-lg border border-cream-300 focus:border-burgundy-500 focus:ring-2 focus:ring-burgundy-500/20 outline-none transition-all resize-none text-sm",rows:3,autoFocus:!0}):n.jsx("input",{type:"text",value:u,onChange:N=>d(N.target.value),className:"w-full px-3 py-2 rounded-lg border border-cream-300 focus:border-burgundy-500 focus:ring-2 focus:ring-burgundy-500/20 outline-none transition-all text-sm",autoFocus:!0}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:f,disabled:i,className:"flex items-center gap-1 px-3 py-1.5 bg-burgundy-500 text-white text-sm rounded-lg hover:bg-burgundy-600 transition-colors disabled:opacity-50",children:[i?n.jsx(be,{className:"h-4 w-4 animate-spin"}):n.jsx(Ot,{className:"h-4 w-4"}),"Save"]}),n.jsxs("button",{onClick:m,disabled:i,className:"flex items-center gap-1 px-3 py-1.5 bg-neutral-100 text-neutral-700 text-sm rounded-lg hover:bg-neutral-200 transition-colors disabled:opacity-50",children:[n.jsx(It,{className:"h-4 w-4"}),"Cancel"]})]})]}):n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsx("p",{className:`text-neutral-800 ${b?"":"italic text-neutral-400"}`,children:y==="favoriteSeason"?iie(b):b||"Not set"}),n.jsx("button",{onClick:()=>p(y,b),className:"p-1 text-neutral-400 hover:text-burgundy-500 transition-colors flex-shrink-0",title:`Edit ${g.toLowerCase()}`,children:n.jsx(ru,{className:"h-4 w-4"})})]})]})]})};return n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200 mb-6",children:[n.jsx("h3",{className:"text-lg font-display font-bold text-neutral-800 mb-4",children:"About You"}),n.jsxs("div",{className:"space-y-3",children:[x("bio","Bio",e,n.jsx(Fc,{className:"h-5 w-5 text-burgundy-500"}),!0),x("hometown","Hometown",t,n.jsx(hj,{className:"h-5 w-5 text-burgundy-500"})),x("favoriteCastaway","Favorite Castaway",r,n.jsx(ux,{className:"h-5 w-5 text-burgundy-500"})),x("favoriteSeason","Favorite Season",s,n.jsx(zn,{className:"h-5 w-5 text-burgundy-500"}),!1,!0)]})]})}function lie({currentPhone:e,isPhoneVerified:t,onUpdatePhone:r,onVerifyCode:s,onResendCode:a,isUpdating:i,isVerifying:o,isResending:l,error:u,success:d,showVerification:p,onShowVerification:f}){const[m,x]=$.useState(""),[y,g]=$.useState(""),b=()=>{r(m),x("")},_=()=>{s(y),g("")};return n.jsxs("div",{id:"phone-section",className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200 mb-6 scroll-mt-4",children:[n.jsxs("h3",{className:"text-lg font-display font-bold text-neutral-800 mb-4 flex items-center gap-2",children:[n.jsx(fj,{className:"h-5 w-5 text-burgundy-500"}),"Phone Number"]}),n.jsx("p",{className:"text-neutral-500 text-sm mb-4",children:"Add your phone for SMS picks and notifications. Text PICK [name] to make picks!"}),e&&n.jsxs("div",{className:"flex items-center gap-3 p-3 bg-cream-50 rounded-xl border border-cream-200 mb-4",children:[n.jsx(Uc,{className:"h-5 w-5 text-burgundy-500"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-neutral-800",children:e}),n.jsx("p",{className:`text-sm ${t?"text-green-600":"text-orange-500"}`,children:t?"Verified":"Not verified - enter code below"})]}),t?n.jsx(Ot,{className:"h-5 w-5 text-green-500"}):n.jsx("button",{onClick:()=>f(!0),className:"text-sm text-burgundy-600 hover:text-burgundy-700 font-medium",children:"Verify"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"tel",value:m,onChange:w=>x(w.target.value),placeholder:"(555) 555-5555",className:"input flex-1"}),n.jsx("button",{onClick:b,disabled:!m||i,className:"btn btn-primary",children:i?n.jsx(be,{className:"h-5 w-5 animate-spin"}):"Update"})]}),u&&n.jsxs("div",{className:"mt-4 flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-xl text-red-600 text-sm",children:[n.jsx(yt,{className:"h-4 w-4 flex-shrink-0"}),u]}),d&&n.jsxs("div",{className:"mt-4 flex items-center gap-2 p-3 bg-green-50 border border-green-200 rounded-xl text-green-600 text-sm",children:[n.jsx(Ot,{className:"h-4 w-4 flex-shrink-0"}),d]}),p&&n.jsxs("div",{className:"mt-4 p-4 bg-cream-50 rounded-xl border border-cream-200",children:[n.jsx("p",{className:"text-neutral-500 text-sm mb-2",children:"Enter the verification code sent to your phone:"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",value:y,onChange:w=>g(w.target.value.replace(/\D/g,"")),placeholder:"123456",maxLength:6,className:"input flex-1 text-center tracking-widest font-mono text-lg"}),n.jsx("button",{onClick:_,disabled:y.length!==6||o,className:"btn btn-primary",children:o?n.jsx(be,{className:"h-5 w-5 animate-spin"}):"Verify"})]}),n.jsxs("button",{onClick:a,disabled:l,className:"mt-3 flex items-center gap-2 text-sm text-burgundy-600 hover:text-burgundy-700 disabled:opacity-50",children:[l?n.jsx(be,{className:"h-4 w-4 animate-spin"}):n.jsx(an,{className:"h-4 w-4"}),"Resend code"]})]})]})}function cie({emailEnabled:e,smsEnabled:t,pushEnabled:r,phoneVerified:s,onEmailChange:a,onSmsChange:i,onPushChange:o,hideSms:l=!1}){return n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200 mb-6",children:[n.jsxs("h3",{className:"text-lg font-display font-bold text-neutral-800 mb-4 flex items-center gap-2",children:[n.jsx(Ys,{className:"h-5 w-5 text-burgundy-500"}),"Notifications"]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between cursor-pointer p-3 bg-cream-50 rounded-xl border border-cream-200 hover:bg-cream-100 transition-colors",onClick:()=>a(!e),children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(sn,{className:"h-5 w-5 text-neutral-400"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-neutral-800 font-medium",children:"Email Notifications"}),n.jsx("p",{className:"text-neutral-400 text-sm",children:"Reminders, results, and updates"})]})]}),n.jsx("div",{className:`w-12 h-7 rounded-full p-1 transition-colors ${e?"bg-burgundy-500":"bg-neutral-300"}`,children:n.jsx("div",{className:`w-5 h-5 rounded-full bg-white shadow-md transform transition-transform ${e?"translate-x-5":"translate-x-0"}`})})]}),!l&&n.jsxs("div",{className:`flex items-center justify-between p-3 bg-cream-50 rounded-xl border border-cream-200 transition-colors ${s?"cursor-pointer hover:bg-cream-100":"opacity-60 cursor-not-allowed"}`,onClick:()=>s&&i(!t),children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Uc,{className:"h-5 w-5 text-neutral-400"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-neutral-800 font-medium",children:"SMS Notifications"}),n.jsx("p",{className:"text-neutral-400 text-sm",children:s?"Pick reminders and urgent alerts":"Verify phone to enable"})]})]}),n.jsx("div",{className:`w-12 h-7 rounded-full p-1 transition-colors ${t&&s?"bg-burgundy-500":"bg-neutral-300"}`,children:n.jsx("div",{className:`w-5 h-5 rounded-full bg-white shadow-md transform transition-transform ${t&&s?"translate-x-5":"translate-x-0"}`})})]}),n.jsxs("div",{className:"flex items-center justify-between cursor-pointer p-3 bg-cream-50 rounded-xl border border-cream-200 hover:bg-cream-100 transition-colors",onClick:()=>o(!r),children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Ys,{className:"h-5 w-5 text-neutral-400"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-neutral-800 font-medium",children:"Push Notifications"}),n.jsx("p",{className:"text-neutral-400 text-sm",children:"Real-time updates on your device"})]})]}),n.jsx("div",{className:`w-12 h-7 rounded-full p-1 transition-colors ${r?"bg-burgundy-500":"bg-neutral-300"}`,children:n.jsx("div",{className:`w-5 h-5 rounded-full bg-white shadow-md transform transition-transform ${r?"translate-x-5":"translate-x-0"}`})})]})]})]})}function uie({onLogout:e}){return n.jsxs("button",{onClick:e,className:"w-full flex items-center justify-center gap-2 bg-red-50 hover:bg-red-100 border border-red-200 text-red-600 font-bold py-3 rounded-xl transition-colors",children:[n.jsx(yne,{className:"h-5 w-5"}),"Log Out"]})}function die(){const e=$s(),t=at(),{getCopy:r}=Kt(),[s,a]=$.useState(null),[i,o]=$.useState(null),[l,u]=$.useState(null),[d,p]=$.useState(null),[f,m]=$.useState(!1),{data:x,isLoading:y,isError:g,error:b,refetch:_}=ie({queryKey:["user-profile"],queryFn:async()=>{const{data:{user:T}}=await X.auth.getUser();if(!T)throw new Error("Not authenticated");const{data:I,error:A}=await X.from("users").select("*").eq("id",T.id).single();if(A)throw console.error("Profile query error:",A),A;return I},retry:2,retryDelay:1e3}),w=ke({mutationFn:async T=>{const{data:{user:I}}=await X.auth.getUser();if(!I)throw new Error("Not authenticated");const{error:A}=await X.from("users").update(T).eq("id",I.id);if(A)throw A},onSuccess:()=>{t.invalidateQueries({queryKey:["user-profile"]}),a(null),o("Profile updated successfully!"),setTimeout(()=>o(null),3e3)},onError:T=>{a(T.message),o(null)}}),S=ke({mutationFn:async T=>{const{data:{user:I}}=await X.auth.getUser();if(!I)throw new Error("Not authenticated");const{error:A}=await X.from("users").update(T).eq("id",I.id);if(A)throw A},onSuccess:()=>{t.invalidateQueries({queryKey:["user-profile"]})}}),j=ke({mutationFn:async T=>{const{data:{session:I}}=await X.auth.getSession();if(!(I!=null&&I.access_token))throw new Error("Not authenticated");const A=await Zn("/me/phone",I.access_token,{method:"PATCH",body:JSON.stringify({phone:T})});if(A.error)throw new Error(A.error);return A.data},onSuccess:T=>{m(!0),u(null),p((T==null?void 0:T.message)||"Verification code sent!"),t.invalidateQueries({queryKey:["user-profile"]})},onError:T=>{u(T.message),p(null)}}),N=ke({mutationFn:async T=>{const{data:{session:I}}=await X.auth.getSession();if(!(I!=null&&I.access_token))throw new Error("Not authenticated");const A=await Zn("/me/verify-phone",I.access_token,{method:"POST",body:JSON.stringify({code:T})});if(A.error)throw new Error(A.error);return A.data},onSuccess:T=>{m(!1),u(null),p((T==null?void 0:T.message)||"Phone verified!"),t.invalidateQueries({queryKey:["user-profile"]})},onError:T=>{u(T.message),p(null)}}),C=ke({mutationFn:async()=>{const{data:{session:T}}=await X.auth.getSession();if(!(T!=null&&T.access_token))throw new Error("Not authenticated");const I=await Zn("/me/resend-code",T.access_token,{method:"POST"});if(I.error)throw new Error(I.error);return I.data},onSuccess:T=>{u(null),p((T==null?void 0:T.message)||"New code sent!")},onError:T=>{u(T.message),p(null)}}),E=async()=>{try{localStorage.removeItem("adminViewMode"),await X.auth.signOut(),e("/login")}catch(T){console.error("Logout failed:",T),window.location.href="/login"}};return y?n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx(be,{className:"h-8 w-8 text-burgundy-500 animate-spin"})}):g?n.jsx("div",{className:"max-w-2xl mx-auto",children:n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-6 text-center",children:[n.jsx(yt,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),n.jsx("h2",{className:"text-xl font-display font-bold text-red-800 mb-2",children:"Failed to Load Profile"}),n.jsx("p",{className:"text-red-600 mb-4",children:b instanceof Error?b.message:"An unexpected error occurred. Please try again."}),n.jsxs("button",{onClick:()=>_(),className:"inline-flex items-center gap-2 px-4 py-2 bg-burgundy-600 text-white rounded-lg hover:bg-burgundy-700 transition-colors",children:[n.jsx(an,{className:"h-4 w-4"}),"Try Again"]})]})}):n.jsxs("div",{className:"max-w-2xl mx-auto",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx(ne,{copyKey:"profile.header.title",as:"h1",className:"text-2xl font-display font-bold text-neutral-800",children:r("profile.header.title","My Profile")}),n.jsx(ne,{copyKey:"profile.header.subtitle",as:"p",className:"text-neutral-500",children:r("profile.header.subtitle","Manage your account and preferences")})]}),!(x!=null&&x.phone_verified)&&n.jsx(sie,{}),n.jsx(aie,{displayName:(x==null?void 0:x.display_name)||"",email:(x==null?void 0:x.email)||"",avatarUrl:(x==null?void 0:x.avatar_url)||null,userId:(x==null?void 0:x.id)||"",onUpdateName:T=>w.mutate({display_name:T}),onUpdateAvatar:T=>w.mutate({avatar_url:T}),isUpdating:w.isPending,error:s,success:i}),n.jsx(oie,{bio:(x==null?void 0:x.bio)||null,hometown:(x==null?void 0:x.hometown)||null,favoriteCastaway:(x==null?void 0:x.favorite_castaway)||null,favoriteSeason:(x==null?void 0:x.favorite_season)||null,onUpdate:T=>w.mutate(T),isUpdating:w.isPending}),n.jsx(lie,{currentPhone:(x==null?void 0:x.phone)||null,isPhoneVerified:(x==null?void 0:x.phone_verified)??!1,onUpdatePhone:T=>j.mutate(T),onVerifyCode:T=>N.mutate(T),onResendCode:()=>C.mutate(),isUpdating:j.isPending,isVerifying:N.isPending,isResending:C.isPending,error:l,success:d,showVerification:f,onShowVerification:m}),n.jsx(cie,{emailEnabled:(x==null?void 0:x.notification_email)??!0,smsEnabled:(x==null?void 0:x.notification_sms)??!1,pushEnabled:(x==null?void 0:x.notification_push)??!0,phoneVerified:(x==null?void 0:x.phone_verified)??!1,onEmailChange:T=>S.mutate({notification_email:T}),onSmsChange:T=>S.mutate({notification_sms:T}),onPushChange:T=>S.mutate({notification_push:T}),hideSms:!1}),n.jsx(uie,{onLogout:E})]})}const hie=[{value:"",label:"Select a season (optional)"},{value:"borneo",label:"Borneo (S1)"},{value:"australian-outback",label:"The Australian Outback (S2)"},{value:"africa",label:"Africa (S3)"},{value:"marquesas",label:"Marquesas (S4)"},{value:"thailand",label:"Thailand (S5)"},{value:"amazon",label:"The Amazon (S6)"},{value:"pearl-islands",label:"Pearl Islands (S7)"},{value:"all-stars",label:"All-Stars (S8)"},{value:"vanuatu",label:"Vanuatu (S9)"},{value:"palau",label:"Palau (S10)"},{value:"guatemala",label:"Guatemala (S11)"},{value:"panama",label:"Panama (S12)"},{value:"cook-islands",label:"Cook Islands (S13)"},{value:"fiji",label:"Fiji (S14)"},{value:"china",label:"China (S15)"},{value:"micronesia",label:"Micronesia (S16)"},{value:"gabon",label:"Gabon (S17)"},{value:"tocantins",label:"Tocantins (S18)"},{value:"samoa",label:"Samoa (S19)"},{value:"heroes-vs-villains",label:"Heroes vs. Villains (S20)"},{value:"nicaragua",label:"Nicaragua (S21)"},{value:"redemption-island",label:"Redemption Island (S22)"},{value:"south-pacific",label:"South Pacific (S23)"},{value:"one-world",label:"One World (S24)"},{value:"philippines",label:"Philippines (S25)"},{value:"caramoan",label:"Caramoan (S26)"},{value:"blood-vs-water",label:"Blood vs. Water (S27)"},{value:"cagayan",label:"Cagayan (S28)"},{value:"san-juan-del-sur",label:"San Juan del Sur (S29)"},{value:"worlds-apart",label:"Worlds Apart (S30)"},{value:"cambodia",label:"Cambodia (S31)"},{value:"kaoh-rong",label:"Kah Rng (S32)"},{value:"millennials-vs-gen-x",label:"Millennials vs. Gen X (S33)"},{value:"game-changers",label:"Game Changers (S34)"},{value:"heroes-healers-hustlers",label:"Heroes vs. Healers vs. Hustlers (S35)"},{value:"ghost-island",label:"Ghost Island (S36)"},{value:"david-vs-goliath",label:"David vs. Goliath (S37)"},{value:"edge-of-extinction",label:"Edge of Extinction (S38)"},{value:"island-of-the-idols",label:"Island of the Idols (S39)"},{value:"winners-at-war",label:"Winners at War (S40)"},{value:"41",label:"Survivor 41 (S41)"},{value:"42",label:"Survivor 42 (S42)"},{value:"43",label:"Survivor 43 (S43)"},{value:"44",label:"Survivor 44 (S44)"},{value:"45",label:"Survivor 45 (S45)"},{value:"46",label:"Survivor 46 (S46)"},{value:"47",label:"Survivor 47 (S47)"},{value:"48",label:"Survivor 48 (S48)"},{value:"49",label:"Survivor 49 (S49)"},{value:"50",label:"Survivor 50: In the Hands of the Fans (S50)"}];function fie(){const e=$s(),[t]=Hd(),r=at(),{user:s,profile:a,refreshProfile:i,loading:o}=Et(),[l,u]=$.useState(""),[d,p]=$.useState(""),[f,m]=$.useState(""),[x,y]=$.useState(""),[g,b]=$.useState(""),[_,w]=$.useState(""),[S,j]=$.useState(!0),[N,C]=$.useState(""),[E,T]=$.useState(!1),[I,A]=$.useState(""),[R,O]=$.useState(!1),{data:M}=ie({queryKey:["season-50-castaways"],queryFn:async()=>{const{data:q}=await X.from("seasons").select("id").eq("number",50).single();if(!q)return[];const{data:z,error:Q}=await X.from("castaways").select("id, name").eq("season_id",q.id).eq("status","active").order("name");if(Q)throw Q;return z||[]}}),{data:B}=ie({queryKey:["profile-setup-fallback",s==null?void 0:s.id],queryFn:async()=>{if(!(s!=null&&s.id))return null;const{data:q,error:z}=await X.from("users").select("display_name, email, profile_setup_complete").eq("id",s.id).maybeSingle();if(z&&z.code!=="PGRST116"&&(z==null?void 0:z.status)!==406)throw z;return q},enabled:!!s&&!a,staleTime:6e4}),U=$.useMemo(()=>a??B,[a,B]),Y=({className:q=""})=>n.jsx("div",{className:`animate-pulse bg-cream-200 rounded-lg ${q}`}),W=()=>n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b from-cream-100 to-cream-200 px-4 py-12",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-float max-w-md w-full p-8",children:[n.jsx("div",{className:"flex justify-center mb-6",children:n.jsx(Y,{className:"h-16 w-32 rounded-2xl"})}),n.jsx(Y,{className:"h-8 w-40 mx-auto mb-2"}),n.jsx(Y,{className:"h-4 w-56 mx-auto mb-6"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(Y,{className:"h-4 w-24 mb-2"}),n.jsx(Y,{className:"h-11 w-full"})]}),n.jsx(Y,{className:"h-10 w-full"})]})]})}),K=ke({mutationFn:async q=>{const z={display_name:q.display_name,notification_email:q.notification_email,profile_setup_complete:!0};q.hometown&&(z.hometown=q.hometown),q.favorite_castaway&&(z.favorite_castaway=q.favorite_castaway),q.favorite_season&&(z.favorite_season=q.favorite_season),q.season_50_winner_prediction&&(z.season_50_winner_prediction=q.season_50_winner_prediction),q.phone&&(z.phone=q.phone),q.notification_sms!==void 0&&(z.notification_sms=q.notification_sms);const{data:Q}=await X.from("users").select("id, role").eq("id",s.id).maybeSingle(),J={id:s.id,email:s.email||"",display_name:q.display_name,notification_email:q.notification_email,...z};Q!=null&&Q.role&&(J.role=Q.role);const{error:V}=await X.from("users").upsert(J,{onConflict:"id"});if(V)throw console.error("Profile update error:",V),new Error(V.message||"Update failed")},onSuccess:async()=>{await i(),r.invalidateQueries({queryKey:["profile",s==null?void 0:s.id]});const q=t.get("redirect")||"/dashboard";e(q==="/profile/setup"?"/dashboard":q,{replace:!0})}}),F=`${l.trim()}${d.trim()?` ${d.trim().charAt(0).toUpperCase()}.`:""}`,H=async q=>{if(q.preventDefault(),A(""),!l.trim()){A("Please enter your first name");return}if(l.trim().length<2){A("First name must be at least 2 characters");return}if(!d.trim()){A("Please enter your last initial");return}if(!/^[A-Za-z]$/.test(d.trim())){A("Last initial must be a single letter");return}try{localStorage.setItem("storage-test","test"),localStorage.removeItem("storage-test")}catch{A('Your browser is blocking local storage. Please disable "Incognito" mode or allow cookies/storage for this site.');return}O(!0);try{const{data:{session:z}}=await X.auth.getSession();if(!z)throw new Error("Your session has expired. Please log in again.");await K.mutateAsync({display_name:F.trim(),hometown:f.trim()||void 0,favorite_castaway:x.trim()||void 0,favorite_season:g||void 0,season_50_winner_prediction:_||void 0,notification_email:S,phone:N.trim()||void 0,notification_sms:E})}catch(z){console.error("Submit error:",z);const Q=(z==null?void 0:z.message)||(typeof z=="string"?z:"Unknown error");Q.toLowerCase().includes("jwt")||Q.toLowerCase().includes("session")||Q.toLowerCase().includes("auth")?A("Your login session has expired. Please refresh the page to log in again."):Q.includes("check your connection")?A(`Connection issue: ${Q}. If this persists, try logging out and back in.`):A(Q),O(!1)}};$.useEffect(()=>{const q=window.location.hash.includes("access_token");!o&&!s&&!q&&e("/login?redirect=/profile/setup",{replace:!0})},[o,s,e]);const L=window.location.hash.includes("access_token");if(o||!s||L)return W();if(U!=null&&U.profile_setup_complete){const q=t.get("redirect")||"/dashboard";return e(q==="/profile/setup"?"/dashboard":q,{replace:!0}),null}return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b from-cream-100 to-cream-200 px-4 py-12",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-float max-w-md w-full p-8 animate-slide-up",children:[n.jsx("div",{className:"flex justify-center mb-6",children:n.jsx("img",{src:"/logo.png",alt:"RGFL",className:"h-16 w-auto"})}),n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("div",{className:"w-16 h-16 bg-burgundy-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(hh,{className:"h-8 w-8 text-burgundy-600"})}),n.jsx("h1",{className:"font-display text-3xl text-neutral-800 mb-2",children:"Welcome!"}),n.jsx("p",{className:"text-neutral-500",children:"Let's set up your profile"})]}),n.jsxs("form",{onSubmit:H,className:"space-y-6",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:["Your Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("div",{className:"flex-1",children:n.jsx("input",{type:"text",value:l,onChange:q=>u(q.target.value),placeholder:"First name",className:"w-full px-4 py-3 rounded-xl border border-cream-300 focus:border-burgundy-500 focus:ring-2 focus:ring-burgundy-500/20 outline-none transition-all",autoFocus:!0})}),n.jsx("div",{className:"w-20",children:n.jsx("input",{type:"text",value:d,onChange:q=>p(q.target.value.slice(0,1)),placeholder:"L",maxLength:1,className:"w-full px-4 py-3 rounded-xl border border-cream-300 focus:border-burgundy-500 focus:ring-2 focus:ring-burgundy-500/20 outline-none transition-all text-center uppercase"})})]}),F&&l.trim()&&d.trim()&&n.jsxs("p",{className:"text-sm text-neutral-500 mt-2",children:["You'll appear as:"," ",n.jsx("span",{className:"font-semibold text-neutral-800",children:F})]}),n.jsx("p",{className:"text-xs text-neutral-400 mt-1",children:"Privacy: Only your first name and last initial are shown to other players"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("p",{className:"text-sm text-neutral-500 font-medium",children:"Notifications"}),n.jsxs("div",{className:"flex items-center justify-between cursor-pointer p-4 bg-cream-50 rounded-xl border border-cream-200 hover:bg-cream-100 transition-colors",onClick:()=>j(!S),children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Ys,{className:"h-5 w-5 text-neutral-400"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-neutral-800 font-medium",children:"Email Notifications"}),n.jsx("p",{className:"text-neutral-400 text-sm",children:"Get reminders and results"})]})]}),n.jsx("div",{className:`w-12 h-7 rounded-full p-1 transition-colors ${S?"bg-burgundy-500":"bg-neutral-300"}`,children:n.jsx("div",{className:`w-5 h-5 rounded-full bg-white shadow-md transform transition-transform ${S?"translate-x-5":"translate-x-0"}`})})]}),n.jsxs("div",{className:"p-4 bg-gradient-to-r from-burgundy-50 to-amber-50 rounded-xl border border-burgundy-200",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[n.jsx(el,{className:"h-5 w-5 text-burgundy-500"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-neutral-800 font-medium",children:"SMS Picks & Notifications"}),n.jsx("p",{className:"text-neutral-400 text-sm",children:'Text "PICK [name]" to make picks on the go!'})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-neutral-700 mb-1",children:"Phone Number (optional)"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Uc,{className:"h-5 w-5 text-neutral-400"}),n.jsx("input",{id:"phone",type:"tel",value:N,onChange:q=>C(q.target.value),placeholder:"(555) 555-5555",className:"flex-1 px-4 py-2 rounded-lg border border-cream-300 focus:border-burgundy-500 focus:ring-2 focus:ring-burgundy-500/20 outline-none transition-all"})]}),n.jsx("p",{className:"text-xs text-neutral-500 mt-1",children:"We'll send a verification code to confirm your number"})]}),N&&n.jsxs("div",{className:"flex items-center justify-between cursor-pointer p-3 bg-white rounded-lg border border-cream-200 hover:bg-cream-50 transition-colors",onClick:()=>T(!E),children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-neutral-800 font-medium text-sm",children:"SMS Reminders"}),n.jsx("p",{className:"text-neutral-400 text-xs",children:"Get pick reminders via text"})]}),n.jsx("div",{className:`w-10 h-6 rounded-full p-0.5 transition-colors ${E?"bg-burgundy-500":"bg-neutral-300"}`,children:n.jsx("div",{className:`w-5 h-5 rounded-full bg-white shadow-md transform transition-transform ${E?"translate-x-4":"translate-x-0"}`})})]})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("p",{className:"text-sm text-neutral-500 font-medium",children:"Optional Information"}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"hometown",className:"block text-sm font-medium text-neutral-700 mb-2",children:"Hometown"}),n.jsx("input",{id:"hometown",type:"text",value:f,onChange:q=>m(q.target.value),placeholder:"e.g., Los Angeles, CA",className:"w-full px-4 py-3 rounded-xl border border-cream-300 focus:border-burgundy-500 focus:ring-2 focus:ring-burgundy-500/20 outline-none transition-all"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"favoriteCastaway",className:"block text-sm font-medium text-neutral-700 mb-2",children:"Favorite Castaway"}),n.jsx("input",{id:"favoriteCastaway",type:"text",value:x,onChange:q=>y(q.target.value),placeholder:"e.g., Parvati Shallow",className:"w-full px-4 py-3 rounded-xl border border-cream-300 focus:border-burgundy-500 focus:ring-2 focus:ring-burgundy-500/20 outline-none transition-all"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"favoriteSeason",className:"block text-sm font-medium text-neutral-700 mb-2",children:"Favorite Survivor Season"}),n.jsx("select",{id:"favoriteSeason",value:g,onChange:q=>b(q.target.value),className:"w-full px-4 py-3 rounded-xl border border-cream-300 focus:border-burgundy-500 focus:ring-2 focus:ring-burgundy-500/20 outline-none transition-all bg-white",children:hie.map(q=>n.jsx("option",{value:q.value,children:q.label},q.value))})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"season50Winner",className:"block text-sm font-medium text-neutral-700 mb-2",children:" Who Will Win Season 50?"}),n.jsxs("select",{id:"season50Winner",value:_,onChange:q=>w(q.target.value),className:"w-full px-4 py-3 rounded-xl border border-cream-300 focus:border-burgundy-500 focus:ring-2 focus:ring-burgundy-500/20 outline-none transition-all bg-white",children:[n.jsx("option",{value:"",children:"Make your prediction (optional)"}),M==null?void 0:M.map(q=>n.jsx("option",{value:q.id,children:q.name},q.id))]}),n.jsx("p",{className:"text-xs text-neutral-500 mt-1",children:"Just for fun! Lock in your prediction before the season starts."})]})]}),I&&n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-3 text-sm text-red-700",children:I}),n.jsx("button",{type:"submit",disabled:R||!l.trim()||!d.trim(),className:"w-full bg-burgundy-500 hover:bg-burgundy-600 text-white font-semibold py-3 rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:R?n.jsxs(n.Fragment,{children:[n.jsx(be,{className:"h-5 w-5 animate-spin"}),"Setting up..."]}):"Let's Play!"})]})]})})}function mie({leagueId:e}){const{user:t}=Et(),r=at(),[s,a]=$.useState(""),i=$.useRef(null),o=$.useRef(null),{data:l,isLoading:u}=ie({queryKey:["league-messages",e],queryFn:async()=>{const{data:g,error:b}=await X.from("league_messages").select(`
          id,
          user_id,
          content,
          created_at,
          user:users (
            display_name,
            avatar_url
          )
        `).eq("league_id",e).order("created_at",{ascending:!0}).limit(100);if(b)throw b;return g},refetchInterval:1e4}),d=ke({mutationFn:async g=>{const{error:b}=await X.from("league_messages").insert({league_id:e,user_id:t.id,content:g});if(b)throw b},onSuccess:()=>{var g;a(""),r.invalidateQueries({queryKey:["league-messages",e]}),(g=o.current)==null||g.focus()}});$.useEffect(()=>{const g=X.channel(`league-chat-${e}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"league_messages",filter:`league_id=eq.${e}`},()=>{r.invalidateQueries({queryKey:["league-messages",e]})}).subscribe();return()=>{X.removeChannel(g)}},[e,r]),$.useEffect(()=>{var g;(g=i.current)==null||g.scrollIntoView({behavior:"smooth"})},[l]);const p=g=>{g.preventDefault(),s.trim()&&!d.isPending&&d.mutate(s.trim())},f=g=>new Date(g).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),m=g=>{const b=new Date(g),_=new Date,w=new Date(_);return w.setDate(w.getDate()-1),b.toDateString()===_.toDateString()?"Today":b.toDateString()===w.toDateString()?"Yesterday":b.toLocaleDateString("en-US",{month:"short",day:"numeric"})},x=g=>{if(!g)return"Unknown";const b=g.trim().split(/\s+/);if(b.length===1)return b[0];const _=b[0],w=b[b.length-1].charAt(0).toUpperCase();return`${_} ${w}.`},y=(l==null?void 0:l.reduce((g,b)=>{const _=new Date(b.created_at).toDateString();return g[_]||(g[_]=[]),g[_].push(b),g},{}))||{};return u?n.jsx("div",{className:"flex items-center justify-center h-96",children:n.jsx(be,{className:"h-8 w-8 text-burgundy-500 animate-spin"})}):n.jsxs("div",{className:"flex flex-col h-[500px] bg-white rounded-2xl shadow-card border border-cream-200 overflow-hidden",children:[n.jsx("div",{className:"px-6 py-4 border-b border-cream-200 bg-cream-50",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Id,{className:"h-5 w-5 text-burgundy-500"}),n.jsx("h3",{className:"font-semibold text-neutral-800",children:"League Chat"}),n.jsxs("span",{className:"text-sm text-neutral-400",children:[(l==null?void 0:l.length)||0," messages"]})]})}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[Object.keys(y).length===0?n.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[n.jsx(Id,{className:"h-12 w-12 text-neutral-300 mb-3"}),n.jsx("p",{className:"text-neutral-500 font-medium",children:"No messages yet"}),n.jsx("p",{className:"text-sm text-neutral-400",children:"Be the first to say something!"})]}):Object.entries(y).map(([g,b])=>n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-4 my-4",children:[n.jsx("div",{className:"flex-1 h-px bg-cream-200"}),n.jsx("span",{className:"text-xs text-neutral-400 font-medium",children:m(b[0].created_at)}),n.jsx("div",{className:"flex-1 h-px bg-cream-200"})]}),b.map((_,w)=>{var N,C,E,T;const S=_.user_id===(t==null?void 0:t.id),j=w===0||b[w-1].user_id!==_.user_id;return n.jsxs("div",{className:`flex gap-3 ${S?"flex-row-reverse":""} ${j?"mt-4":"mt-1"}`,children:[n.jsx("div",{className:`w-8 flex-shrink-0 ${j?"":"invisible"}`,children:j&&n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-white text-sm font-semibold ${S?"bg-burgundy-500":"bg-neutral-400"}`,children:((E=(C=(N=_.user)==null?void 0:N.display_name)==null?void 0:C.charAt(0))==null?void 0:E.toUpperCase())||"?"})}),n.jsxs("div",{className:`max-w-[70%] ${S?"items-end":"items-start"}`,children:[j&&!S&&n.jsx("p",{className:"text-xs text-neutral-500 mb-1 ml-1",children:x((T=_.user)==null?void 0:T.display_name)}),n.jsx("div",{className:`px-4 py-2 rounded-2xl ${S?"bg-burgundy-500 text-white rounded-br-md":"bg-cream-100 text-neutral-800 rounded-bl-md"}`,children:n.jsx("p",{className:"text-sm whitespace-pre-wrap break-words",children:_.content})}),n.jsx("p",{className:`text-xs text-neutral-400 mt-1 ${S?"text-right mr-1":"ml-1"}`,children:f(_.created_at)})]})]},_.id)})]},g)),n.jsx("div",{ref:i})]}),n.jsx("form",{onSubmit:p,className:"p-4 border-t border-cream-200 bg-cream-50",children:n.jsxs("div",{className:"flex gap-3",children:[n.jsx("input",{ref:o,type:"text",value:s,onChange:g=>a(g.target.value),placeholder:"Type a message...",className:"flex-1 px-4 py-2 rounded-full border border-cream-300 bg-white focus:outline-none focus:ring-2 focus:ring-burgundy-500 focus:border-transparent",disabled:d.isPending}),n.jsx("button",{type:"submit",disabled:!s.trim()||d.isPending,className:"w-10 h-10 rounded-full bg-burgundy-500 text-white flex items-center justify-center hover:bg-burgundy-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:d.isPending?n.jsx(be,{className:"h-5 w-5 animate-spin"}):n.jsx(Jn,{className:"h-5 w-5"})})]})})]})}function pie({league:e,members:t,myMembership:r,canManageLeague:s,copied:a,onCopyInvite:i}){var o,l;return n.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated p-6 border border-cream-200 mb-6",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-display font-bold text-neutral-800",children:e.name}),n.jsxs("div",{className:"flex items-center gap-2 mt-1 text-neutral-500",children:[n.jsx(er,{className:"h-4 w-4 text-burgundy-400","aria-hidden":"true"}),n.jsx("span",{className:"text-sm",children:((o=e.commissioner)==null?void 0:o.display_name)||"Unknown Commissioner"}),n.jsx("span",{className:"text-neutral-300","aria-hidden":"true",children:""}),n.jsxs("span",{className:"text-sm",children:["Season ",((l=e.seasons)==null?void 0:l.number)||"N/A"]})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:i,className:"p-2 bg-cream-50 rounded-xl hover:bg-cream-100 transition-all border border-cream-200",title:"Copy invite link","aria-label":a?"Invite link copied":"Copy invite link",children:a?n.jsx(Ot,{className:"h-5 w-5 text-green-500","aria-hidden":"true"}):n.jsx(mx,{className:"h-5 w-5 text-neutral-600","aria-hidden":"true"})}),s&&n.jsx(se,{to:`/leagues/${e.id}/settings`,className:"p-2 bg-cream-50 rounded-xl hover:bg-cream-100 transition-all border border-cream-200",title:"League Settings","aria-label":"League Settings",children:n.jsx(dh,{className:"h-5 w-5 text-neutral-600","aria-hidden":"true"})})]})]}),n.jsxs("div",{className:"grid grid-cols-4 gap-4 pt-4 border-t border-cream-100",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-2xl font-bold text-neutral-800",children:(t==null?void 0:t.length)||0}),n.jsx("p",{className:"text-xs text-neutral-500 uppercase tracking-wide",children:"Players"})]}),n.jsxs("div",{className:"text-center",children:[n.jsxs("p",{className:"text-2xl font-bold text-burgundy-600",children:["#",(r==null?void 0:r.rank)||"-"]}),n.jsx("p",{className:"text-xs text-neutral-500 uppercase tracking-wide",children:"Your Rank"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-2xl font-bold text-neutral-800",children:(r==null?void 0:r.total_points)||0}),n.jsx("p",{className:"text-xs text-neutral-500 uppercase tracking-wide",children:"Your Points"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-2xl font-bold text-green-600 capitalize",children:e.status}),n.jsx("p",{className:"text-xs text-neutral-500 uppercase tracking-wide",children:"Status"})]})]}),e.require_donation&&n.jsxs("div",{className:"mt-4 flex items-center gap-3 p-3 bg-gradient-to-r from-burgundy-50 to-cream-50 rounded-xl border border-burgundy-100",children:[n.jsx(ux,{className:"h-5 w-5 text-burgundy-500 flex-shrink-0"}),n.jsxs("div",{children:[n.jsxs("p",{className:"text-burgundy-700 font-medium text-sm",children:["$",e.donation_amount," Charity Entry"]}),n.jsx("p",{className:"text-burgundy-500 text-xs",children:"All proceeds donated to charity chosen by winner"})]})]})]})}function xie({activeTab:e,onTabChange:t}){const r=[{id:"overview",label:"Overview",icon:n.jsx(Rd,{className:"h-4 w-4"})},{id:"players",label:"Players",icon:n.jsx(Ke,{className:"h-4 w-4"})},{id:"standings",label:"Standings",icon:n.jsx(ot,{className:"h-4 w-4"})}];return n.jsx("div",{className:"flex gap-2 mb-6 overflow-x-auto pb-2",children:r.map(s=>n.jsxs("button",{onClick:()=>t(s.id),className:`px-4 py-2 rounded-xl text-sm font-medium whitespace-nowrap transition-all flex items-center gap-2 ${e===s.id?"bg-burgundy-500 text-white shadow-md":"bg-white text-neutral-600 border border-cream-200 hover:border-burgundy-200"}`,children:[s.icon,s.label]},s.id))})}function gie({leagueId:e,roster:t,league:r}){return n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-5 border border-cream-200",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h2",{className:"text-lg font-display font-bold text-neutral-800 flex items-center gap-2",children:[n.jsx(kn,{className:"h-5 w-5 text-burgundy-500"}),"My Team"]}),n.jsxs(se,{to:`/leagues/${e}/team`,className:"text-burgundy-500 hover:text-burgundy-600 text-sm flex items-center gap-1",children:["View Details ",n.jsx(dr,{className:"h-4 w-4"})]})]}),t&&t.length>0?n.jsx("div",{className:"grid grid-cols-2 gap-4",children:t.map(s=>{var a,i,o,l,u,d,p,f,m,x;return n.jsx("div",{className:`relative rounded-xl overflow-hidden ${((a=s.castaways)==null?void 0:a.status)==="eliminated"?"opacity-60":""}`,children:n.jsx("div",{className:`p-4 ${((i=s.castaways)==null?void 0:i.status)==="eliminated"?"bg-neutral-100 border border-neutral-200":"bg-gradient-to-br from-cream-50 to-cream-100 border border-cream-200"}`,children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("img",{src:nr(((o=s.castaways)==null?void 0:o.name)||"Unknown",(l=s.castaways)==null?void 0:l.photo_url),alt:((u=s.castaways)==null?void 0:u.name)||"Castaway",className:`w-12 h-12 rounded-full object-cover border-2 ${((d=s.castaways)==null?void 0:d.status)==="eliminated"?"border-neutral-300 grayscale":"border-burgundy-200"}`}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-neutral-800",children:(p=s.castaways)==null?void 0:p.name}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Rr,{className:`h-3 w-3 ${((f=s.castaways)==null?void 0:f.status)==="eliminated"?"text-neutral-400":"text-orange-500"}`}),n.jsx("span",{className:`text-xs capitalize ${((m=s.castaways)==null?void 0:m.status)==="eliminated"?"text-neutral-500":"text-green-600"}`,children:(x=s.castaways)==null?void 0:x.status})]})]})]})})},s.id)})}):n.jsxs("div",{className:"text-center py-8 bg-cream-50 rounded-xl border border-cream-200",children:[n.jsx(Ke,{className:"h-10 w-10 text-neutral-300 mx-auto mb-3"}),n.jsx("p",{className:"text-neutral-500",children:"Draft hasn't started yet"}),r.draft_status==="pending"&&n.jsx(se,{to:`/leagues/${e}/draft`,className:"text-burgundy-500 hover:text-burgundy-600 text-sm mt-2 inline-block",children:"Submit Draft Rankings "})]})]})}function yie({leagueId:e}){return n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs(se,{to:`/leagues/${e}/pick`,className:"bg-burgundy-500 hover:bg-burgundy-600 text-white rounded-2xl p-5 shadow-elevated transition-all flex items-center gap-4",children:[n.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:n.jsx(kn,{className:"h-6 w-6"})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Make Pick"}),n.jsx("p",{className:"text-burgundy-200 text-sm",children:"Choose this week's castaway"})]})]}),n.jsxs(se,{to:`/leagues/${e}/draft`,className:"bg-white hover:bg-cream-50 text-neutral-800 rounded-2xl p-5 shadow-card border border-cream-200 transition-all flex items-center gap-4",children:[n.jsx("div",{className:"w-12 h-12 bg-cream-100 rounded-xl flex items-center justify-center",children:n.jsx(Ke,{className:"h-6 w-6 text-burgundy-500"})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Draft Rankings"}),n.jsx("p",{className:"text-neutral-500 text-sm",children:"Rank your castaways"})]})]})]})}function bie({episode:e}){return n.jsx("div",{className:"bg-gradient-to-r from-burgundy-500 to-burgundy-600 rounded-2xl p-5 text-white shadow-elevated",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Nt,{className:"h-8 w-8 text-burgundy-200"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-burgundy-100 text-sm",children:"Next Episode"}),n.jsxs("p",{className:"font-semibold text-lg",children:["Episode ",e.number]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-burgundy-100 text-sm",children:"Airs"}),n.jsx("p",{className:"font-semibold",children:new Date(e.air_date).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})})]})]})})}function vie(e){return e===1?{bg:"bg-yellow-100",text:"text-yellow-700",icon:n.jsx(er,{className:"h-4 w-4 text-yellow-500"})}:e===2?{bg:"bg-gray-100",text:"text-gray-600",icon:n.jsx(Er,{className:"h-4 w-4 text-gray-400"})}:e===3?{bg:"bg-orange-100",text:"text-orange-600",icon:n.jsx(Er,{className:"h-4 w-4 text-orange-400"})}:{bg:"bg-cream-50",text:"text-neutral-600",icon:null}}function wie({members:e,currentUserId:t,onViewFullStandings:r}){const a=(e?[...e].sort((i,o)=>(o.total_points||0)-(i.total_points||0)):[]).slice(0,3);return n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-5 border border-cream-200",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h2",{className:"text-lg font-display font-bold text-neutral-800 flex items-center gap-2",children:[n.jsx(ot,{className:"h-5 w-5 text-burgundy-500"}),"Top Performers"]}),e&&e.length>0&&n.jsxs("button",{onClick:r,className:"text-burgundy-500 hover:text-burgundy-600 text-sm flex items-center gap-1",children:["Full Standings ",n.jsx(dr,{className:"h-4 w-4"})]})]}),(!e||e.length===0)&&n.jsxs("div",{className:"text-center py-6",children:[n.jsx(Ke,{className:"h-10 w-10 text-neutral-300 mx-auto mb-2"}),n.jsx("p",{className:"text-neutral-500 text-sm",children:"No standings yet"})]}),a.length>0&&n.jsx("div",{className:"space-y-2",children:a.map((i,o)=>{var d;const l=vie(o+1),u=i.user_id===t;return n.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl transition-colors ${u?"bg-burgundy-50 border border-burgundy-200":`${l.bg} border border-transparent`}`,children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${l.bg}`,children:l.icon||n.jsx("span",{className:`font-bold ${l.text}`,children:o+1})}),n.jsx("div",{className:"flex-1",children:n.jsxs("p",{className:"font-medium text-neutral-800",children:[((d=i.users)==null?void 0:d.display_name)||"Unknown",u&&n.jsx("span",{className:"ml-2 text-xs text-burgundy-500",children:"(You)"})]})}),n.jsx("p",{className:"font-bold text-neutral-800",children:i.total_points||0})]},i.id)})})]})}function _ie({members:e,rostersByUser:t,currentUserId:r,commissionerId:s}){return n.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 overflow-hidden",children:[n.jsx("div",{className:"p-5 border-b border-cream-100",children:n.jsxs("h2",{className:"text-lg font-display font-bold text-neutral-800",children:["League Players (",(e==null?void 0:e.length)||0,")"]})}),n.jsx("div",{className:"divide-y divide-cream-100",children:e==null?void 0:e.map((a,i)=>{var p,f,m,x;const o=t==null?void 0:t[a.user_id],l=a.user_id===r,u=((p=a.users)==null?void 0:p.display_name)||((f=a.user)==null?void 0:f.display_name)||"Unknown Player",d=((m=a.users)==null?void 0:m.avatar_url)||null;return n.jsx("div",{className:`p-4 ${l?"bg-burgundy-50":"hover:bg-cream-50"} transition-colors`,children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-10 h-10 rounded-full bg-cream-100 flex items-center justify-center overflow-hidden",children:d?n.jsx("img",{src:d,alt:u,className:"w-full h-full object-cover"}):n.jsx(hh,{className:"h-5 w-5 text-neutral-400"})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("p",{className:"font-semibold text-neutral-800",children:[u,l&&n.jsx("span",{className:"ml-2 text-xs text-burgundy-500",children:"(You)"}),a.user_id===s&&n.jsx("span",{className:"ml-2 text-xs bg-burgundy-100 text-burgundy-600 px-2 py-0.5 rounded-full",children:"League Creator"})]}),n.jsx("div",{className:"flex items-center gap-2 mt-2",children:((x=o==null?void 0:o.castaways)==null?void 0:x.map(y=>n.jsxs("div",{className:`flex items-center gap-2 px-2 py-1 rounded-lg text-xs ${y.status==="eliminated"?"bg-neutral-100 text-neutral-500":"bg-cream-100 text-neutral-700"}`,children:[n.jsx(Rr,{className:`h-3 w-3 ${y.status==="eliminated"?"text-neutral-400":"text-orange-500"}`}),y.name]},y.id)))||n.jsx("span",{className:"text-neutral-400 text-xs",children:"No castaways drafted"})})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-xl font-bold text-neutral-800",children:a.total_points||0}),n.jsx("p",{className:"text-xs text-neutral-400",children:"points"})]})]})},a.id)})})]})}function jie(e){return e===1?{bg:"bg-yellow-100",text:"text-yellow-700",icon:n.jsx(er,{className:"h-4 w-4 text-yellow-500"})}:e===2?{bg:"bg-gray-100",text:"text-gray-600",icon:n.jsx(Er,{className:"h-4 w-4 text-gray-400"})}:e===3?{bg:"bg-orange-100",text:"text-orange-600",icon:n.jsx(Er,{className:"h-4 w-4 text-orange-400"})}:{bg:"bg-cream-50",text:"text-neutral-600",icon:null}}function Nie(e){const t=new Map,r=[...e].sort((i,o)=>(o.total_points||0)-(i.total_points||0));let s=1,a=null;return r.forEach((i,o)=>{const l=i.total_points||0;(a===null||l!==a)&&(s=o+1),t.set(i.id,s),a=l}),t}function Sie({members:e,currentUserId:t}){var u,d,p;const r=e?[...e].sort((f,m)=>(m.total_points||0)-(f.total_points||0)):[],s=e?Nie(e):new Map;if(!e||e.length===0)return n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-12 border border-cream-200 text-center",children:[n.jsx(Ke,{className:"h-12 w-12 text-neutral-300 mx-auto mb-4"}),n.jsx("h3",{className:"font-semibold text-neutral-700 mb-2",children:"No Members Yet"}),n.jsx("p",{className:"text-neutral-500",children:"Standings will appear once players join the league."})]});const a=r[0],i=r[1],o=r[2],l=r.length>=3&&a&&i&&o;return n.jsxs("div",{className:"space-y-6",children:[l&&n.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[n.jsxs("div",{className:"bg-gradient-to-b from-gray-100 to-gray-50 rounded-2xl p-5 border-2 border-gray-200 text-center mt-6",children:[n.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full mx-auto mb-2 flex items-center justify-center",children:n.jsx(Er,{className:"h-5 w-5 text-gray-500"})}),n.jsx("p",{className:"font-semibold text-neutral-800 truncate text-sm",children:((u=i.users)==null?void 0:u.display_name)||"Unknown"}),n.jsx("p",{className:"text-2xl font-display text-gray-600 mt-1",children:i.total_points||0}),n.jsx("p",{className:"text-xs text-neutral-400",children:"pts"})]}),n.jsxs("div",{className:"bg-gradient-to-b from-yellow-100 to-amber-50 rounded-2xl p-5 border-2 border-yellow-300 text-center shadow-elevated",children:[n.jsx("div",{className:"w-12 h-12 bg-yellow-300 rounded-full mx-auto mb-2 flex items-center justify-center",children:n.jsx(er,{className:"h-6 w-6 text-yellow-700"})}),n.jsx("p",{className:"font-bold text-neutral-800 truncate",children:((d=a.users)==null?void 0:d.display_name)||"Unknown"}),n.jsx("p",{className:"text-3xl font-display text-yellow-700 mt-1",children:a.total_points||0}),n.jsx("p",{className:"text-xs text-neutral-500",children:"pts"})]}),n.jsxs("div",{className:"bg-gradient-to-b from-orange-100 to-amber-50 rounded-2xl p-5 border-2 border-orange-200 text-center mt-6",children:[n.jsx("div",{className:"w-10 h-10 bg-orange-200 rounded-full mx-auto mb-2 flex items-center justify-center",children:n.jsx(Er,{className:"h-5 w-5 text-orange-500"})}),n.jsx("p",{className:"font-semibold text-neutral-800 truncate text-sm",children:((p=o.users)==null?void 0:p.display_name)||"Unknown"}),n.jsx("p",{className:"text-2xl font-display text-orange-600 mt-1",children:o.total_points||0}),n.jsx("p",{className:"text-xs text-neutral-400",children:"pts"})]})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 overflow-hidden",children:[n.jsx("div",{className:"p-5 border-b border-cream-100",children:n.jsx("h2",{className:"text-lg font-display font-bold text-neutral-800",children:"Full Standings"})}),n.jsx("div",{className:"divide-y divide-cream-100",children:r.map(f=>{var g;const m=s.get(f.id)||1,x=jie(m),y=f.user_id===t;return n.jsxs("div",{className:`flex items-center gap-4 p-4 transition-colors ${y?"bg-burgundy-50 border-l-4 border-burgundy-500":"hover:bg-cream-50"}`,children:[n.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${x.bg}`,children:x.icon||n.jsx("span",{className:`font-bold ${x.text}`,children:m})}),n.jsx("div",{className:"flex-1",children:n.jsxs("p",{className:`font-semibold ${y?"text-burgundy-700":"text-neutral-800"}`,children:[((g=f.users)==null?void 0:g.display_name)||"Unknown",y&&n.jsx("span",{className:"ml-2 text-xs text-burgundy-500 font-normal",children:"(You)"})]})}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-2xl font-display text-neutral-800",children:f.total_points||0}),n.jsx("p",{className:"text-xs text-neutral-400",children:"points"})]})]},f.id)})})]})]})}function kie({league:e,canManageLeague:t,copied:r,onCopyInvite:s}){return t?n.jsxs("div",{className:"mt-6 bg-white rounded-2xl shadow-card p-5 border border-cream-200",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-neutral-500 text-sm",children:"League Invite Code"}),n.jsx("p",{className:"font-mono text-2xl font-bold text-burgundy-600 tracking-wider",children:e.code})]}),n.jsx("button",{onClick:s,className:"btn btn-secondary flex items-center gap-2",children:r?n.jsxs(n.Fragment,{children:[n.jsx(Ot,{className:"h-5 w-5 text-green-500"}),"Copied!"]}):n.jsxs(n.Fragment,{children:[n.jsx(lx,{className:"h-5 w-5"}),"Copy Invite Link"]})})]}),n.jsxs("p",{className:"text-neutral-400 text-xs mt-2",children:["Share this link:"," ",n.jsxs("code",{className:"select-all bg-cream-50 px-1 py-0.5 rounded text-neutral-600",children:[window.location.origin,"/join/",e.code]})]})]}):n.jsx("div",{className:"mt-6 bg-white rounded-2xl shadow-card p-5 border border-cream-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-neutral-500 text-sm",children:"Invite Friends"}),n.jsx("p",{className:"text-neutral-700 font-medium",children:"Share the invite link to grow your league!"})]}),n.jsx("button",{onClick:s,className:"btn btn-primary flex items-center gap-2",children:r?n.jsxs(n.Fragment,{children:[n.jsx(Ot,{className:"h-5 w-5"}),"Copied!"]}):n.jsxs(n.Fragment,{children:[n.jsx(mx,{className:"h-5 w-5"}),"Share Link"]})})]})})}function Eie(){const{id:e}=Wn(),{user:t,loading:r}=Et(),[s,a]=Hd(),[i,o]=$.useState("overview"),[l,u]=$.useState(!1),[d,p]=$.useState(!1),[f,m]=$.useState(!1),x=at(),{data:y,isLoading:g,error:b}=xj(e),{data:_,isLoading:w,refetch:S}=$ae(e),{data:j}=qae(e),{data:N}=gj(e,t==null?void 0:t.id),{data:C}=Lae(t==null?void 0:t.id),{data:E}=Mae(y==null?void 0:y.season_id);$.useEffect(()=>{if(s.get("joined")==="true"){p(!0),m(!0),s.delete("joined"),a(s,{replace:!0});let K=0;const F=10,H=setInterval(async()=>{K++,await x.invalidateQueries({queryKey:["league-members",e]}),await S(),K>=F&&(clearInterval(H),m(!1))},1e3),L=setTimeout(()=>p(!1),5e3);return()=>{clearInterval(H),clearTimeout(L)}}},[s,a,e,x,S]);const T=async()=>{if(!(y!=null&&y.code))return;const K=`${window.location.origin}/join/${y.code}`;try{if(navigator.clipboard&&window.isSecureContext)await navigator.clipboard.writeText(K);else{const F=document.createElement("textarea");F.value=K,F.style.position="fixed",F.style.left="-9999px",document.body.appendChild(F),F.select(),document.execCommand("copy"),document.body.removeChild(F)}u(!0),setTimeout(()=>u(!1),2e3)}catch(F){console.error("Failed to copy:",F),alert(`Copy this link: ${K}`)}};if(!r&&!t&&!window.location.hash.includes("access_token"))return n.jsx(Js,{to:`/login?redirect=/leagues/${e}`,replace:!0});if(g||r)return n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center",children:n.jsx(be,{className:"h-8 w-8 text-burgundy-500 animate-spin"})});if(b)return n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200",children:[n.jsx(_e,{}),n.jsx("div",{className:"max-w-md mx-auto p-4 pt-16",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-8 text-center border border-red-200",children:[n.jsx(yt,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),n.jsx("h2",{className:"text-xl font-bold text-neutral-800 mb-2",children:"Error Loading League"}),n.jsx("p",{className:"text-neutral-600 mb-4",children:b instanceof Error?b.message:"Failed to load league data"}),n.jsx(se,{to:"/dashboard",className:"btn btn-primary",children:"Back to Dashboard"})]})})]});if(!y)return n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200",children:[n.jsx(_e,{}),n.jsx("div",{className:"max-w-md mx-auto p-4 pt-16",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-8 text-center",children:[n.jsx(yt,{className:"h-12 w-12 text-neutral-400 mx-auto mb-4"}),n.jsx("h2",{className:"text-xl font-bold text-neutral-800 mb-2",children:"League Not Found"}),n.jsx("p",{className:"text-neutral-600 mb-4",children:"This league may have been deleted or the link is incorrect."}),n.jsx(se,{to:"/dashboard",className:"btn btn-primary",children:"Back to Dashboard"})]})})]});const I=_==null?void 0:_.find(K=>K.user_id===(t==null?void 0:t.id)),A=(y==null?void 0:y.commissioner_id)===(t==null?void 0:t.id),R=(C==null?void 0:C.role)==="admin",O=A||R,M=(y==null?void 0:y.is_global)===!0,B=!!I;if(y.is_public&&y.require_donation&&!B&&!A&&!R&&!f)return n.jsx(Js,{to:`/join/${y.code}`,replace:!0});const Y=y.is_public||M||B||A||R;if(!Y&&f)return n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200",children:[n.jsx(_e,{}),n.jsx("div",{className:"max-w-md mx-auto p-4 pt-16",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-8 border border-cream-200 text-center",children:[n.jsx(be,{className:"h-8 w-8 text-burgundy-500 animate-spin mx-auto mb-4"}),n.jsx("h1",{className:"text-xl font-display font-bold text-neutral-800 mb-2",children:"Processing Payment..."}),n.jsx("p",{className:"text-neutral-500",children:"Please wait while we confirm your membership."})]})})]});if(!Y)return n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200",children:[n.jsx(_e,{}),n.jsx("div",{className:"max-w-md mx-auto p-4 pt-16",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-8 border border-cream-200 text-center",children:[n.jsx("div",{className:"w-16 h-16 bg-burgundy-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(mr,{className:"h-8 w-8 text-burgundy-500"})}),n.jsx("h1",{className:"text-2xl font-display font-bold text-neutral-800 mb-2",children:"Private League"}),n.jsx("p",{className:"text-neutral-500 mb-6",children:"This is a private league. You need to be a member to view its content."}),y.password_hash?n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm text-neutral-500 justify-center",children:[n.jsx(yt,{className:"h-4 w-4"}),n.jsx("span",{children:"This league requires a password to join"})]}),n.jsx(se,{to:`/join/${y.code}`,className:"btn btn-primary w-full",children:"Join with Invite Code"})]}):n.jsx(se,{to:`/join/${y.code}`,className:"btn btn-primary w-full",children:"Request to Join"}),n.jsx(se,{to:"/dashboard",className:"block mt-4 text-burgundy-500 hover:text-burgundy-600 text-sm",children:" Back to Dashboard"})]})})]});const W=j==null?void 0:j.reduce((K,F)=>{const H=F.user_id;return K[H]||(K[H]={user:F.users,castaways:[]}),K[H].castaways.push(F.castaways),K},{});return n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200",children:[n.jsx(_e,{}),n.jsxs("div",{className:"max-w-4xl mx-auto p-4 pb-24",children:[d&&n.jsxs("div",{className:"mb-4 bg-green-50 border border-green-200 rounded-xl p-4 flex items-center gap-3 animate-slide-down",children:[n.jsx(xt,{className:"h-5 w-5 text-green-600 flex-shrink-0"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-semibold text-green-800",children:"Successfully joined the league!"}),n.jsx("p",{className:"text-sm text-green-700",children:"Your payment was processed and you're now a member."})]}),n.jsx("button",{onClick:()=>p(!1),className:"text-green-600 hover:text-green-800 text-sm font-medium",children:"Dismiss"})]}),n.jsx(pie,{league:y,members:_,myMembership:I,canManageLeague:O,copied:l,onCopyInvite:T}),n.jsx(xie,{activeTab:i,onTabChange:o}),i==="overview"&&n.jsxs("div",{className:"space-y-6",children:[n.jsx(gie,{leagueId:e,roster:N,league:y}),n.jsx(yie,{leagueId:e}),E&&n.jsx(bie,{episode:E}),n.jsx(wie,{members:_,currentUserId:t==null?void 0:t.id,onViewFullStandings:()=>o("standings")}),e&&n.jsx(mie,{leagueId:e})]}),i==="players"&&n.jsx(_ie,{members:_,rostersByUser:W,currentUserId:t==null?void 0:t.id,commissionerId:y.commissioner_id}),i==="standings"&&n.jsx(Sie,{members:_,currentUserId:t==null?void 0:t.id}),n.jsx(kie,{league:y,canManageLeague:O,copied:l,onCopyInvite:T})]})]})}function Cie(){const{leagueId:e}=Wn(),{getCopy:t}=Kt(),{data:r}=ie({queryKey:["current-user"],queryFn:async()=>{const{data:{user:u}}=await X.auth.getUser();return u}}),{data:s}=ie({queryKey:["league",e],queryFn:async()=>{if(!e)throw new Error("No league ID");const{data:u,error:d}=await X.from("leagues").select("*, seasons(*)").eq("id",e).single();if(d)throw d;return u},enabled:!!e}),{data:a}=ie({queryKey:["my-roster",e],queryFn:async()=>{if(!e||!r)throw new Error("Missing data");const{data:u,error:d}=await X.from("rosters").select("*, castaways(*)").eq("league_id",e).eq("user_id",r.id).is("dropped_at",null).order("draft_round",{ascending:!0});if(d)throw d;return u||[]},enabled:!!e&&!!r}),{data:i}=ie({queryKey:["pick-history",e],queryFn:async()=>{if(!e||!r)throw new Error("Missing data");const{data:u,error:d}=await X.from("weekly_picks").select("*, episodes(*), castaways(*)").eq("league_id",e).eq("user_id",r.id).order("episodes(number)",{ascending:!1});if(d)throw d;return u||[]},enabled:!!e&&!!r}),{data:o}=ie({queryKey:["my-membership",e],queryFn:async()=>{if(!e||!r)throw new Error("Missing data");const{data:u,error:d}=await X.from("league_members").select("*").eq("league_id",e).eq("user_id",r.id).single();if(d)throw d;return u},enabled:!!e&&!!r}),l=(i==null?void 0:i.reduce((u,d)=>u+(d.points_earned||0),0))||0;return n.jsxs(n.Fragment,{children:[n.jsx(_e,{}),n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 p-4 pb-24",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx(se,{to:`/leagues/${e}`,className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:n.jsx(ht,{className:"h-5 w-5 text-neutral-600"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-display font-bold text-neutral-800",children:t("my-team.header.title","My Team")}),n.jsx("p",{className:"text-neutral-500",children:t("my-team.header.subtitle","Your drafted castaways and their scores")})]})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-6",children:[n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-4 border border-cream-200 text-center",children:[n.jsx(ot,{className:"h-5 w-5 text-burgundy-500 mx-auto mb-1"}),n.jsx("p",{className:"text-xl font-bold text-neutral-800",children:(o==null?void 0:o.rank)||"-"}),n.jsx("p",{className:"text-neutral-500 text-xs",children:"Rank"})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-4 border border-cream-200 text-center",children:[n.jsx(Ke,{className:"h-5 w-5 text-burgundy-500 mx-auto mb-1"}),n.jsx("p",{className:"text-xl font-bold text-neutral-800",children:(a==null?void 0:a.length)||0}),n.jsx("p",{className:"text-neutral-500 text-xs",children:"Castaways"})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-4 border border-cream-200 text-center",children:[n.jsx(wn,{className:"h-5 w-5 text-burgundy-500 mx-auto mb-1"}),n.jsx("p",{className:"text-xl font-bold text-neutral-800",children:l}),n.jsx("p",{className:"text-neutral-500 text-xs",children:"Points"})]})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-4 border border-cream-200 mb-6",children:[n.jsx("h2",{className:"text-lg font-display font-bold text-neutral-800 mb-4",children:"Current Roster"}),a&&a.length>0?n.jsx("div",{className:"space-y-3",children:a.map(u=>{var d,p,f,m,x,y,g,b,_;return n.jsxs("div",{className:`flex items-center gap-4 p-4 rounded-xl ${((d=u.castaways)==null?void 0:d.status)==="eliminated"?"bg-red-50 border border-red-200":"bg-cream-50 border border-cream-200"}`,children:[n.jsx("img",{src:nr(((p=u.castaways)==null?void 0:p.name)||"Unknown",(f=u.castaways)==null?void 0:f.photo_url),alt:((m=u.castaways)==null?void 0:m.name)||"Castaway",className:"w-12 h-12 rounded-full object-cover"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-neutral-800 font-medium",children:(x=u.castaways)==null?void 0:x.name}),n.jsxs("p",{className:"text-neutral-500 text-sm",children:["Round ",u.draft_round]})]}),n.jsx("div",{className:"text-right",children:n.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${((y=u.castaways)==null?void 0:y.status)==="eliminated"?"bg-red-100 text-red-700":((g=u.castaways)==null?void 0:g.status)==="winner"?"bg-amber-100 text-amber-700":"bg-green-100 text-green-700"}`,children:(_=(b=u.castaways)==null?void 0:b.status)==null?void 0:_.toUpperCase()})})]},u.id)})}):n.jsx("p",{className:"text-neutral-500 text-center py-8",children:"Draft hasn't started yet. Check back after the draft!"})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-4 border border-cream-200",children:[n.jsx("h2",{className:"text-lg font-display font-bold text-neutral-800 mb-4",children:"Pick History"}),i&&i.length>0?n.jsx("div",{className:"space-y-2",children:i.map(u=>{var d,p,f;return n.jsxs("div",{className:"flex items-center gap-3 p-3 bg-cream-50 rounded-xl border border-cream-200",children:[n.jsx("div",{className:"w-8 h-8 bg-burgundy-500 rounded-full flex items-center justify-center",children:n.jsx("span",{className:"text-white text-sm font-bold",children:(d=u.episodes)==null?void 0:d.number})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-neutral-800 font-medium",children:((p=u.castaways)==null?void 0:p.name)||"No pick"}),n.jsx("p",{className:"text-neutral-500 text-sm capitalize",children:(f=u.status)==null?void 0:f.replace("_"," ")})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[u.points_earned>0?n.jsx(fr,{className:"h-4 w-4 text-green-500"}):u.points_earned<0?n.jsx(Hi,{className:"h-4 w-4 text-red-500"}):n.jsx(hx,{className:"h-4 w-4 text-neutral-400"}),n.jsxs("span",{className:`font-bold ${u.points_earned>0?"text-green-600":u.points_earned<0?"text-red-600":"text-neutral-500"}`,children:[u.points_earned>0?"+":"",u.points_earned||0]})]})]},u.id)})}):n.jsx("p",{className:"text-neutral-500 text-center py-8",children:"No picks yet. Season starts soon!"})]})]})]})}const Tie={Challenges:{color:"text-blue-600",bgColor:"bg-blue-50",icon:n.jsx(kn,{className:"h-3 w-3"})},Strategy:{color:"text-purple-600",bgColor:"bg-purple-50",icon:n.jsx(ds,{className:"h-3 w-3"})},Social:{color:"text-pink-600",bgColor:"bg-pink-50",icon:n.jsx(Ke,{className:"h-3 w-3"})},Survival:{color:"text-green-600",bgColor:"bg-green-50",icon:n.jsx(Aa,{className:"h-3 w-3"})},Tribal:{color:"text-orange-600",bgColor:"bg-orange-50",icon:n.jsx(Rr,{className:"h-3 w-3"})},Bonus:{color:"text-amber-600",bgColor:"bg-amber-50",icon:n.jsx(zn,{className:"h-3 w-3"})}};function Rie(){var y;const{leagueId:e,episodeId:t}=Wn(),[r,s]=$.useState(null),{data:a,isLoading:i}=ie({queryKey:["episode",t],queryFn:async()=>{if(!t)throw new Error("No episode ID");const{data:g,error:b}=await X.from("episodes").select("*, seasons(*)").eq("id",t).single();if(b)throw b;return g},enabled:!!t}),{data:o}=ie({queryKey:["league",e],queryFn:async()=>{if(!e)throw new Error("No league ID");const{data:g,error:b}=await X.from("leagues").select("*").eq("id",e).single();if(b)throw b;return g},enabled:!!e}),{data:l}=ie({queryKey:["episode-scores",t],queryFn:async()=>{if(!t)throw new Error("No episode ID");const{data:g,error:b}=await X.from("episode_scores").select("*, castaways(*), scoring_rules(*)").eq("episode_id",t).order("castaways(name)");if(b)throw b;return g||[]},enabled:!!t}),{data:u}=ie({queryKey:["episode-picks",e,t],queryFn:async()=>{if(!e||!t)throw new Error("Missing data");const{data:g,error:b}=await X.from("weekly_picks").select("*, users(display_name), castaways(*)").eq("league_id",e).eq("episode_id",t).order("points_earned",{ascending:!1});if(b)throw b;return g||[]},enabled:!!e&&!!t}),{data:d}=ie({queryKey:["current-user"],queryFn:async()=>{const{data:{user:g}}=await X.auth.getUser();return g}}),{data:p}=ie({queryKey:["eliminated-castaways",t],queryFn:async()=>{if(!t)return[];const{data:g,error:b}=await X.from("castaways").select("id, name, photo_url").eq("eliminated_episode_id",t);if(b)throw b;return g||[]},enabled:!!t}),f=(l==null?void 0:l.reduce((g,b)=>{const _=b.castaway_id;return g[_]||(g[_]={castaway:b.castaways,scores:[],total:0}),g[_].scores.push(b),g[_].total+=b.points,g},{}))||{},m=u==null?void 0:u.find(g=>g.user_id===(d==null?void 0:d.id)),x=m&&(p==null?void 0:p.some(g=>g.id===m.castaway_id));return i?n.jsxs(n.Fragment,{children:[n.jsx(_e,{}),n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center",children:n.jsx(be,{className:"h-8 w-8 text-burgundy-500 animate-spin"})})]}):n.jsxs(n.Fragment,{children:[n.jsx(_e,{}),n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 p-4 pb-24",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx(se,{to:`/leagues/${e}`,className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:n.jsx(ht,{className:"h-5 w-5 text-neutral-600"})}),n.jsxs("div",{children:[n.jsxs("h1",{className:"text-2xl font-display font-bold text-neutral-800",children:["Episode ",a==null?void 0:a.number," Results"]}),n.jsx("p",{className:"text-neutral-500",children:(a==null?void 0:a.title)||(o==null?void 0:o.name)})]})]}),p&&p.length>0&&n.jsx("div",{className:`rounded-xl p-4 mb-6 ${x?"bg-red-50 border-2 border-red-300":"bg-orange-50 border border-orange-200"}`,children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:`p-2 rounded-full ${x?"bg-red-100":"bg-orange-100"}`,children:n.jsx(Tr,{className:`h-5 w-5 ${x?"text-red-600":"text-orange-600"}`})}),n.jsxs("div",{children:[n.jsx("p",{className:`font-bold ${x?"text-red-800":"text-orange-800"}`,children:p.length===1?"Castaway Eliminated":`${p.length} Castaways Eliminated`}),n.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:p.map(g=>n.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-full ${(m==null?void 0:m.castaway_id)===g.id?"bg-red-100 border border-red-300":"bg-white border border-orange-200"}`,children:[n.jsx("img",{src:nr(g.name,g.photo_url),alt:g.name,className:"w-6 h-6 rounded-full object-cover grayscale"}),n.jsxs("span",{className:`text-sm font-medium ${(m==null?void 0:m.castaway_id)===g.id?"text-red-700":"text-neutral-700"}`,children:[g.name,(m==null?void 0:m.castaway_id)===g.id&&n.jsx("span",{className:"ml-1 text-xs text-red-500",children:"(Your Pick)"})]})]},g.id))}),x&&n.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center gap-1",children:[n.jsx(Tt,{className:"h-4 w-4"}),"This castaway is no longer available for future picks"]})]})]})}),m&&n.jsx("div",{className:`rounded-xl p-4 mb-6 ${(m.points_earned||0)>0?"bg-green-50 border border-green-200":(m.points_earned||0)<0?"bg-red-50 border border-red-200":"bg-white border border-cream-200"}`,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-neutral-500 text-sm",children:"Your Pick"}),n.jsx("p",{className:"text-neutral-800 font-bold text-lg",children:(y=m.castaways)==null?void 0:y.name})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[(m.points_earned||0)>0?n.jsx(fr,{className:"h-5 w-5 text-green-500"}):(m.points_earned||0)<0?n.jsx(Hi,{className:"h-5 w-5 text-red-500"}):n.jsx(hx,{className:"h-5 w-5 text-neutral-400"}),n.jsxs("span",{className:`text-2xl font-bold ${(m.points_earned||0)>0?"text-green-600":(m.points_earned||0)<0?"text-red-600":"text-neutral-800"}`,children:[(m.points_earned||0)>0?"+":"",m.points_earned||0]})]}),n.jsx("p",{className:"text-neutral-500 text-sm",children:"points"})]})]})}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-4 border border-cream-200 mb-6",children:[n.jsxs("h2",{className:"text-lg font-display font-bold text-neutral-800 mb-4 flex items-center gap-2",children:[n.jsx(ot,{className:"h-5 w-5 text-amber-500"}),"Episode Standings"]}),u&&u.length>0?n.jsx("div",{className:"space-y-2",children:u.map((g,b)=>{var _,w;return n.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl ${g.user_id===(d==null?void 0:d.id)?"bg-burgundy-50 border border-burgundy-200":"bg-cream-50 border border-cream-200"}`,children:[n.jsx("div",{className:"w-8 h-8 flex items-center justify-center",children:b===0?n.jsx(ot,{className:"h-5 w-5 text-amber-500"}):n.jsx("span",{className:"text-neutral-500 font-bold",children:b+1})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-neutral-800 font-medium",children:(_=g.users)==null?void 0:_.display_name}),n.jsx("p",{className:"text-neutral-500 text-sm",children:(w=g.castaways)==null?void 0:w.name})]}),n.jsxs("span",{className:`font-bold ${(g.points_earned||0)>0?"text-green-600":(g.points_earned||0)<0?"text-red-600":"text-neutral-500"}`,children:[(g.points_earned||0)>0?"+":"",g.points_earned||0]})]},g.id)})}):n.jsx("p",{className:"text-neutral-500 text-center py-4",children:"No picks for this episode yet."})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-4 border border-cream-200",children:[n.jsxs("h2",{className:"text-lg font-display font-bold text-neutral-800 mb-4 flex items-center gap-2",children:[n.jsx(Ke,{className:"h-5 w-5 text-burgundy-500"}),"Scoring Breakdown"]}),Object.keys(f).length>0?n.jsx("div",{className:"space-y-3",children:Object.values(f).sort((g,b)=>b.total-g.total).map(g=>{const b=r===g.castaway.id,_=(m==null?void 0:m.castaway_id)===g.castaway.id,w=g.scores.reduce((S,j)=>{var C;const N=((C=j.scoring_rules)==null?void 0:C.category)||"Other";return S[N]||(S[N]=[]),S[N].push(j),S},{});return n.jsxs("div",{className:`rounded-xl border transition-all ${_?"bg-burgundy-50 border-burgundy-200":"bg-cream-50 border-cream-200"}`,children:[n.jsxs("button",{onClick:()=>s(b?null:g.castaway.id),className:"w-full p-4 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("img",{src:nr(g.castaway.name,g.castaway.photo_url),alt:g.castaway.name,className:"w-10 h-10 rounded-full object-cover border-2 border-white shadow-sm"}),n.jsxs("div",{className:"text-left",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("p",{className:"text-neutral-800 font-medium",children:g.castaway.name}),_&&n.jsx("span",{className:"text-xs bg-burgundy-100 text-burgundy-700 px-2 py-0.5 rounded-full",children:"Your Pick"})]}),n.jsxs("p",{className:"text-neutral-500 text-sm",children:[g.scores.length," scoring event",g.scores.length!==1?"s":""]})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("span",{className:`text-xl font-bold ${g.total>0?"text-green-600":g.total<0?"text-red-600":"text-neutral-800"}`,children:[g.total>0?"+":"",g.total]}),b?n.jsx(fs,{className:"h-5 w-5 text-neutral-400"}):n.jsx(en,{className:"h-5 w-5 text-neutral-400"})]})]}),b&&n.jsx("div",{className:"px-4 pb-4 space-y-4",children:Object.entries(w).map(([S,j])=>{const N=Tie[S]||{color:"text-neutral-600",bgColor:"bg-neutral-50",icon:null},C=j.reduce((E,T)=>E+T.points,0);return n.jsxs("div",{children:[n.jsxs("div",{className:`flex items-center gap-2 mb-2 ${N.color}`,children:[N.icon,n.jsx("span",{className:"text-sm font-medium",children:S}),n.jsxs("span",{className:`text-xs px-1.5 py-0.5 rounded ${N.bgColor}`,children:[C>0?"+":"",C]})]}),n.jsx("div",{className:"space-y-1 pl-5",children:j.map(E=>{var T;return n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-neutral-700",children:(T=E.scoring_rules)==null?void 0:T.name}),E.quantity>1&&n.jsxs("span",{className:"text-xs bg-cream-200 text-neutral-600 px-1.5 py-0.5 rounded",children:["",E.quantity]})]}),n.jsxs("span",{className:`font-medium ${E.points>=0?"text-green-600":"text-red-600"}`,children:[E.points>=0?"+":"",E.points]})]},E.id)})})]},S)})})]},g.castaway.id)})}):n.jsx("p",{className:"text-neutral-500 text-center py-8",children:a!=null&&a.is_scored?"No scores recorded for this episode.":"Scoring not yet finalized. Check back Friday morning!"})]})]})]})}function Aie({weekNumber:e,onReveal:t,autoReveal:r=!1}){const[s,a]=$.useState(!1);return $.useEffect(()=>{if(r&&!s){const i=setTimeout(()=>{a(!0),t()},1500);return()=>clearTimeout(i)}},[r,s,t]),n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center p-4",children:n.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-elevated p-8 text-center animate-fade-in",children:[n.jsx("div",{className:"w-20 h-20 mx-auto mb-6 bg-amber-100 rounded-full flex items-center justify-center",children:n.jsx(Tt,{className:"w-10 h-10 text-amber-600"})}),n.jsxs("h1",{className:"text-2xl font-display font-bold text-neutral-800 mb-3",children:["Week ",e," Results"]}),n.jsxs("div",{className:"bg-amber-50 border-2 border-amber-200 rounded-xl p-4 mb-6",children:[n.jsx("p",{className:"text-amber-900 font-semibold mb-2",children:"Spoiler Warning"}),n.jsx("p",{className:"text-amber-800 text-sm leading-relaxed",children:"This page contains episode spoilers including eliminations, immunity results, and other gameplay events. Click below when you're ready to view your scores and standings."})]}),n.jsxs("label",{className:"flex items-center justify-center gap-3 mb-6 cursor-pointer group",children:[n.jsx("input",{type:"checkbox",checked:s,onChange:i=>a(i.target.checked),className:"w-5 h-5 rounded border-2 border-neutral-300 text-burgundy-600 focus:ring-2 focus:ring-burgundy-500 focus:ring-offset-2 cursor-pointer"}),n.jsx("span",{className:"text-neutral-700 group-hover:text-neutral-900 transition-colors",children:"I understand and want to see results"})]}),n.jsx("button",{onClick:t,disabled:!s,className:`w-full btn ${s?"btn-primary":"bg-neutral-200 text-neutral-400 cursor-not-allowed"} flex items-center justify-center gap-2 transition-all`,children:s?n.jsxs(n.Fragment,{children:[n.jsx(Ha,{className:"w-5 h-5"}),"Show Results"]}):n.jsxs(n.Fragment,{children:[n.jsx(uh,{className:"w-5 h-5"}),"Confirm to Continue"]})}),n.jsx("p",{className:"text-neutral-500 text-sm mt-4",children:"Not ready yet? You can always come back later."}),r&&n.jsx("p",{className:"text-burgundy-600 text-sm mt-2 animate-pulse",children:"Auto-revealing in a moment..."})]})})}const Pie={Challenges:{color:"text-blue-600",bgColor:"bg-blue-50",icon:n.jsx(kn,{className:"h-3 w-3"})},Strategy:{color:"text-purple-600",bgColor:"bg-purple-50",icon:n.jsx(ds,{className:"h-3 w-3"})},Social:{color:"text-pink-600",bgColor:"bg-pink-50",icon:n.jsx(Ke,{className:"h-3 w-3"})},Survival:{color:"text-green-600",bgColor:"bg-green-50",icon:n.jsx(Aa,{className:"h-3 w-3"})},Tribal:{color:"text-orange-600",bgColor:"bg-orange-50",icon:n.jsx(Rr,{className:"h-3 w-3"})},Bonus:{color:"text-amber-600",bgColor:"bg-amber-50",icon:n.jsx(zn,{className:"h-3 w-3"})}};function Oie(){const{weekNumber:e}=Wn(),[t]=Hd(),r=t.get("token"),{getCopy:s}=Kt(),[a,i]=$.useState(!1),[o,l]=$.useState(!1),[u,d]=$.useState(null);$.useEffect(()=>{r&&p(r)},[r]);async function p(_){try{(await(await fetch(`http://localhost:3001/api/results/verify-token?token=${_}`)).json()).valid&&(l(!0),setTimeout(()=>i(!0),2e3))}catch(w){console.error("Token verification failed:",w)}}const{data:f}=ie({queryKey:["current-user"],queryFn:async()=>{const{data:{user:_}}=await X.auth.getUser();return _}}),{data:m,isLoading:x}=ie({queryKey:["episode-by-week",e],queryFn:async()=>{if(!e)return null;const _=parseInt(e.replace("week-","")),{data:w,error:S}=await X.from("episodes").select("*, seasons(*)").eq("week_number",_).single();if(S)throw S;return w},enabled:!!e&&a}),{data:y}=ie({queryKey:["episode-scores",m==null?void 0:m.id],queryFn:async()=>{if(!(m!=null&&m.id))return[];const{data:_,error:w}=await X.from("episode_scores").select("*, castaways(*), scoring_rules(*)").eq("episode_id",m.id).order("castaways(name)");if(w)throw w;return _||[]},enabled:!!(m!=null&&m.id)&&a}),{data:g}=ie({queryKey:["eliminated-castaways",m==null?void 0:m.id],queryFn:async()=>{if(!(m!=null&&m.id))return[];const{data:_,error:w}=await X.from("castaways").select("id, name, photo_url").eq("eliminated_episode_id",m.id);if(w)throw w;return _||[]},enabled:!!(m!=null&&m.id)&&a}),b=(y==null?void 0:y.reduce((_,w)=>{const S=w.castaway_id;return _[S]||(_[S]={castaway:w.castaways,scores:[],total:0}),_[S].scores.push(w),_[S].total+=w.points,_},{}))||{};return a?x?n.jsxs(n.Fragment,{children:[n.jsx(_e,{}),n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx(be,{className:"h-8 w-8 text-burgundy-500 animate-spin mx-auto mb-4"}),n.jsx("p",{className:"text-neutral-600",children:"Loading results..."})]})})]}):n.jsxs(n.Fragment,{children:[n.jsx(_e,{}),n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 p-4 pb-24",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx(se,{to:"/dashboard",className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:n.jsx(ht,{className:"h-5 w-5 text-neutral-600"})}),n.jsxs("div",{children:[n.jsx(ne,{copyKey:"results.header.title",as:"h1",className:"text-2xl font-display font-bold text-neutral-800",children:s("results.header.title",`Week ${e==null?void 0:e.replace("week-","")} Results`)}),n.jsx(ne,{copyKey:"results.header.subtitle",as:"p",className:"text-neutral-500",children:s("results.header.subtitle",(m==null?void 0:m.title)||"Episode Results")})]})]}),g&&g.length>0&&n.jsx("div",{className:"rounded-xl p-4 mb-6 bg-orange-50 border border-orange-200",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"p-2 rounded-full bg-orange-100",children:n.jsx(Tr,{className:"h-5 w-5 text-orange-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-bold text-orange-800",children:g.length===1?"Castaway Eliminated":`${g.length} Castaways Eliminated`}),n.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:g.map(_=>n.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-full bg-white border border-orange-200",children:[n.jsx("img",{src:nr(_.name,_.photo_url),alt:_.name,className:"w-6 h-6 rounded-full object-cover grayscale"}),n.jsx("span",{className:"text-sm font-medium text-neutral-700",children:_.name})]},_.id))})]})]})}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-4 border border-cream-200",children:[n.jsxs("h2",{className:"text-lg font-display font-bold text-neutral-800 mb-4 flex items-center gap-2",children:[n.jsx(Ke,{className:"h-5 w-5 text-burgundy-500"}),"Scoring Breakdown"]}),Object.keys(b).length>0?n.jsx("div",{className:"space-y-3",children:Object.values(b).sort((_,w)=>w.total-_.total).map(_=>{const w=u===_.castaway.id,S=_.scores.reduce((j,N)=>{var E;const C=((E=N.scoring_rules)==null?void 0:E.category)||"Other";return j[C]||(j[C]=[]),j[C].push(N),j},{});return n.jsxs("div",{className:"rounded-xl border bg-cream-50 border-cream-200",children:[n.jsxs("button",{onClick:()=>d(w?null:_.castaway.id),className:"w-full p-4 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("img",{src:nr(_.castaway.name,_.castaway.photo_url),alt:_.castaway.name,className:"w-10 h-10 rounded-full object-cover border-2 border-white shadow-sm"}),n.jsxs("div",{className:"text-left",children:[n.jsx("p",{className:"text-neutral-800 font-medium",children:_.castaway.name}),n.jsxs("p",{className:"text-neutral-500 text-sm",children:[_.scores.length," scoring event",_.scores.length!==1?"s":""]})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("span",{className:`text-xl font-bold ${_.total>0?"text-green-600":_.total<0?"text-red-600":"text-neutral-800"}`,children:[_.total>0?"+":"",_.total]}),w?n.jsx(fs,{className:"h-5 w-5 text-neutral-400"}):n.jsx(en,{className:"h-5 w-5 text-neutral-400"})]})]}),w&&n.jsx("div",{className:"px-4 pb-4 space-y-4",children:Object.entries(S).map(([j,N])=>{const C=Pie[j]||{color:"text-neutral-600",bgColor:"bg-neutral-50",icon:null},E=N.reduce((T,I)=>T+I.points,0);return n.jsxs("div",{children:[n.jsxs("div",{className:`flex items-center gap-2 mb-2 ${C.color}`,children:[C.icon,n.jsx("span",{className:"text-sm font-medium",children:j}),n.jsxs("span",{className:`text-xs px-1.5 py-0.5 rounded ${C.bgColor}`,children:[E>0?"+":"",E]})]}),n.jsx("div",{className:"space-y-1 pl-5",children:N.map(T=>{var I;return n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-neutral-700",children:(I=T.scoring_rules)==null?void 0:I.name}),T.quantity>1&&n.jsxs("span",{className:"text-xs bg-cream-200 text-neutral-600 px-1.5 py-0.5 rounded",children:["",T.quantity]})]}),n.jsxs("span",{className:`font-medium ${T.points>=0?"text-green-600":"text-red-600"}`,children:[T.points>=0?"+":"",T.points]})]},T.id)})})]},j)})})]},_.castaway.id)})}):n.jsx("div",{className:"text-center py-8",children:n.jsx("p",{className:"text-neutral-500",children:m!=null&&m.is_scored?"No scores recorded for this episode.":"Scoring not yet finalized. Check back Friday morning!"})})]})]})]}):n.jsx(Aie,{weekNumber:parseInt((e==null?void 0:e.replace("week-",""))||"0"),onReveal:()=>i(!0),autoReveal:o})}function Iie({name:e,setName:t,description:r,setDescription:s}){return n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200",children:[n.jsxs("h2",{className:"font-semibold text-neutral-800 mb-4 flex items-center gap-2",children:[n.jsx(Ke,{className:"h-5 w-5 text-burgundy-500"}),"League Details"]}),n.jsxs("label",{className:"block mb-4",children:[n.jsx("span",{className:"text-neutral-700 text-sm font-medium mb-2 block",children:"League Name *"}),n.jsx("input",{type:"text",value:e,onChange:a=>t(a.target.value),placeholder:"The Tribal Council",className:"input",maxLength:50})]}),n.jsxs("label",{className:"block mb-4",children:[n.jsxs("span",{className:"text-neutral-700 text-sm font-medium mb-2 flex items-center gap-2",children:[n.jsx(Fc,{className:"h-4 w-4 text-neutral-400"}),"Description (Optional)"]}),n.jsx("textarea",{value:r,onChange:a=>s(a.target.value),placeholder:"A league for true Survivor superfans...",className:"input min-h-[80px] resize-none",maxLength:200}),n.jsxs("p",{className:"text-neutral-400 text-xs mt-1 text-right",children:[r.length,"/200"]})]})]})}function Lie({isPrivate:e,setIsPrivate:t,joinCode:r,setJoinCode:s}){return n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200",children:[n.jsxs("h2",{className:"font-semibold text-neutral-800 mb-4 flex items-center gap-2",children:[n.jsx(us,{className:"h-5 w-5 text-burgundy-500"}),"Privacy"]}),n.jsxs("div",{className:"flex gap-3 mb-4",children:[n.jsxs("button",{type:"button",onClick:()=>t(!1),className:`flex-1 p-4 rounded-xl border-2 transition-all ${e?"border-cream-200 bg-white hover:border-cream-300":"border-burgundy-500 bg-burgundy-50"}`,children:[n.jsx(us,{className:`h-6 w-6 mx-auto mb-2 ${e?"text-neutral-400":"text-burgundy-500"}`}),n.jsx("p",{className:`font-medium text-sm ${e?"text-neutral-600":"text-burgundy-700"}`,children:"Public"}),n.jsx("p",{className:"text-xs text-neutral-400 mt-1",children:"Anyone can join"})]}),n.jsxs("button",{type:"button",onClick:()=>t(!0),className:`flex-1 p-4 rounded-xl border-2 transition-all ${e?"border-burgundy-500 bg-burgundy-50":"border-cream-200 bg-white hover:border-cream-300"}`,children:[n.jsx(mr,{className:`h-6 w-6 mx-auto mb-2 ${e?"text-burgundy-500":"text-neutral-400"}`}),n.jsx("p",{className:`font-medium text-sm ${e?"text-burgundy-700":"text-neutral-600"}`,children:"Private"}),n.jsx("p",{className:"text-xs text-neutral-400 mt-1",children:"Requires code"})]})]}),e&&n.jsxs("label",{className:"block animate-fade-in",children:[n.jsxs("span",{className:"text-neutral-700 text-sm font-medium mb-2 flex items-center gap-2",children:[n.jsx(mr,{className:"h-4 w-4 text-neutral-400"}),"Password (Optional)"]}),n.jsx("input",{type:"text",value:r,onChange:a=>s(a.target.value),placeholder:"Enter an optional password",className:"input",maxLength:100}),n.jsx("p",{className:"text-neutral-400 text-xs mt-2",children:"A unique invite code will be auto-generated. Add a password for extra security."})]})]})}const t5=[10,25,50,100];function Mie({requireDonation:e,setRequireDonation:t,donationAmount:r,setDonationAmount:s}){const[a,i]=$.useState(!1),o=parseFloat(r)||0,l=t5.includes(o),u=p=>{i(!1),s(p.toString())},d=()=>{i(!0),l&&s("")};return n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200",children:[n.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(ux,{className:"h-5 w-5 text-burgundy-500"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-neutral-800 font-medium",children:"Play for a Cause"}),n.jsx("p",{className:"text-neutral-400 text-sm",children:"Entry fees go to charity"})]})]}),n.jsx("div",{onClick:()=>t(!e),className:`w-12 h-6 rounded-full transition-colors cursor-pointer ${e?"bg-burgundy-500":"bg-neutral-200"}`,children:n.jsx("div",{className:`w-5 h-5 bg-white rounded-full shadow-md transition-transform mt-0.5 ${e?"translate-x-6 ml-0.5":"translate-x-0.5"}`})})]}),e&&n.jsxs("div",{className:"mt-6 pt-4 border-t border-cream-200 animate-fade-in",children:[n.jsx("div",{className:"bg-gradient-to-br from-burgundy-50 to-cream-50 rounded-xl p-4 mb-4 border border-burgundy-100",children:n.jsxs("p",{className:"text-neutral-700 text-sm leading-relaxed",children:[n.jsx("span",{className:"font-semibold text-burgundy-600",children:"The winner of your league will recommend a charity"})," ","of their choice for the full donation pool. Outwit, outplay, outlast  for good."]})}),n.jsx("p",{className:"text-neutral-500 text-sm mb-3 font-medium",children:"Entry fee per player (minimum $10):"}),n.jsxs("div",{className:"grid grid-cols-5 gap-2 mb-3",children:[t5.map(p=>n.jsxs("button",{type:"button",onClick:()=>u(p),className:`py-3 px-2 rounded-xl font-bold text-base transition-all ${r===p.toString()&&!a?"bg-burgundy-500 text-white shadow-elevated":"bg-cream-100 text-neutral-700 hover:bg-cream-200 border border-cream-200"}`,children:["$",p]},p)),n.jsx("button",{type:"button",onClick:d,className:`py-3 px-2 rounded-xl font-bold text-sm transition-all ${a||!l&&r?"bg-burgundy-500 text-white shadow-elevated":"bg-cream-100 text-neutral-700 hover:bg-cream-200 border border-cream-200"}`,children:"Other"})]}),(a||!l&&r)&&n.jsxs("div",{className:"relative mb-3",children:[n.jsx(Zo,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-neutral-400"}),n.jsx("input",{type:"number",value:r,onChange:p=>s(p.target.value),placeholder:"Enter amount",min:"10",max:"10000",step:"1",className:"input pl-10 text-lg font-semibold",autoFocus:!0})]}),n.jsx("p",{className:"text-neutral-400 text-xs text-center",children:"100% of entry fees are donated  zero platform fees"})]})]})}function Die({league:e,joinCode:t,isPrivate:r,onClose:s}){const a=$s(),[i,o]=$.useState(!1),l=()=>`${window.location.origin}/join/${e.code}`,u=()=>{navigator.clipboard.writeText(l()),o(!0),setTimeout(()=>o(!1),2e3)},d=()=>{const x=`Join my Survivor Fantasy League "${e.name}"! `,y=l();window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(x)}&url=${encodeURIComponent(y)}`,"_blank")},p=()=>{const x=l();window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(x)}`,"_blank")},f=()=>{const x=`Join my Survivor Fantasy League! ${l()}`;window.open(`sms:?body=${encodeURIComponent(x)}`,"_blank")},m=()=>{const x=`Join my Survivor Fantasy League: ${e.name}`,y=`Hey!

I created a Survivor Fantasy League and want you to join!

League: ${e.name}
Join here: ${l()}

Let's see who can outwit, outplay, and outlast! `;window.open(`mailto:?subject=${encodeURIComponent(x)}&body=${encodeURIComponent(y)}`,"_blank")};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 animate-fade-in",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated max-w-md w-full p-6 animate-slide-up",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800",children:"Share Your League"}),n.jsx("button",{onClick:s,className:"p-2 hover:bg-cream-100 rounded-xl transition-colors",children:n.jsx(It,{className:"h-5 w-5 text-neutral-500"})})]}),n.jsxs("div",{className:"text-center mb-6",children:[n.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3",children:n.jsx(Ot,{className:"h-8 w-8 text-green-600"})}),n.jsx("h3",{className:"font-semibold text-neutral-800",children:e.name}),n.jsx("p",{className:"text-neutral-500 text-sm",children:"League created successfully!"})]}),n.jsxs("div",{className:"bg-cream-50 rounded-xl p-4 mb-6 border border-cream-200",children:[n.jsx("p",{className:"text-neutral-500 text-xs mb-1 text-center",children:"Invite Code"}),n.jsx("p",{className:"text-2xl font-mono font-bold text-burgundy-500 tracking-wider text-center",children:e.code}),r&&t&&n.jsxs("p",{className:"text-neutral-400 text-xs mt-2 text-center",children:["Join Password: ",n.jsx("span",{className:"font-mono",children:t})]})]}),n.jsx("button",{onClick:u,className:"w-full btn btn-primary mb-4 flex items-center justify-center gap-2",children:i?n.jsxs(n.Fragment,{children:[n.jsx(Ot,{className:"h-5 w-5"}),"Link Copied!"]}):n.jsxs(n.Fragment,{children:[n.jsx(lx,{className:"h-5 w-5"}),"Copy Invite Link"]})}),n.jsx("p",{className:"text-neutral-500 text-sm text-center mb-3",children:"Or share via:"}),n.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[n.jsxs("button",{onClick:f,className:"flex flex-col items-center gap-1 p-3 rounded-xl bg-green-50 hover:bg-green-100 transition-colors",children:[n.jsx(Id,{className:"h-6 w-6 text-green-600"}),n.jsx("span",{className:"text-xs text-neutral-600",children:"SMS"})]}),n.jsxs("button",{onClick:m,className:"flex flex-col items-center gap-1 p-3 rounded-xl bg-blue-50 hover:bg-blue-100 transition-colors",children:[n.jsx(sn,{className:"h-6 w-6 text-blue-600"}),n.jsx("span",{className:"text-xs text-neutral-600",children:"Email"})]}),n.jsxs("button",{onClick:d,className:"flex flex-col items-center gap-1 p-3 rounded-xl bg-sky-50 hover:bg-sky-100 transition-colors",children:[n.jsx(px,{className:"h-6 w-6 text-sky-500"}),n.jsx("span",{className:"text-xs text-neutral-600",children:"Twitter"})]}),n.jsxs("button",{onClick:p,className:"flex flex-col items-center gap-1 p-3 rounded-xl bg-indigo-50 hover:bg-indigo-100 transition-colors",children:[n.jsx(aP,{className:"h-6 w-6 text-indigo-600"}),n.jsx("span",{className:"text-xs text-neutral-600",children:"Facebook"})]})]}),n.jsx("button",{onClick:()=>{s(),a(`/leagues/${e.id}`)},className:"w-full btn btn-secondary mt-4",children:"Go to League"})]})})}const _s={name:{min:3,max:50},password:{max:100},donation:{min:0,max:1e4}};function $ie(){const e=$s(),{getCopy:t}=Kt(),[r,s]=$.useState(""),[a,i]=$.useState(""),[o,l]=$.useState(!1),[u,d]=$.useState(""),[p,f]=$.useState(!1),[m,x]=$.useState(""),[y,g]=$.useState(!1),[b,_]=$.useState(null),{data:w,isLoading:S}=ie({queryKey:["active-season"],queryFn:async()=>{const{data:O,error:M}=await X.from("seasons").select("*").eq("is_active",!0).single();if(M)throw M;return O}}),{data:j,isLoading:N}=ie({queryKey:["current-user"],queryFn:async()=>{const{data:{user:O}}=await X.auth.getUser();return O}}),C=S||N,[E,T]=$.useState(null),I=$.useMemo(()=>{const O=[];if(r.trim().length>0&&r.trim().length<_s.name.min&&O.push(`League name must be at least ${_s.name.min} characters`),r.length>_s.name.max&&O.push(`League name must be at most ${_s.name.max} characters`),o&&u&&u.length>_s.password.max&&O.push(`Join code must be at most ${_s.password.max} characters`),p&&m){const M=parseFloat(m);(isNaN(M)||M<_s.donation.min)&&O.push("Donation amount must be a positive number"),M>_s.donation.max&&O.push(`Donation amount cannot exceed $${_s.donation.max.toLocaleString()}`)}return O},[r,o,u,p,m]),A=$.useMemo(()=>r.trim().length>=_s.name.min&&r.length<=_s.name.max&&I.length===0&&(!p||m&&parseFloat(m)>0),[r,I,p,m]),R=ke({mutationFn:async()=>{var U,Y,W;if(!j||!w)throw new Error("Loading season data...");const{data:{session:O}}=await X.auth.getSession();if(!O)throw new Error("Not authenticated");const M=await Zn("/leagues",O.access_token,{method:"POST",body:JSON.stringify({name:r,season_id:w.id,password:o&&u?u:null,donation_amount:p&&m?parseFloat(m):null,max_players:12,is_public:!o})});if(M.error)throw new Error(M.error);const B=(U=M.data)==null?void 0:U.league;if(!B)throw new Error("Failed to create league");return(Y=M.data)!=null&&Y.requires_payment&&((W=M.data)!=null&&W.checkout_url)?(window.location.href=M.data.checkout_url,{...B,redirectingToPayment:!0}):B},onSuccess:O=>{T(null),!("redirectingToPayment"in O&&O.redirectingToPayment)&&(_(O),g(!0))},onError:O=>{T(O.message),Ct(O,{tags:{operation:"create_league"},extra:{name:r,isPrivate:o,requireDonation:p,donationAmount:m}})}});return C?n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200",children:[n.jsx(_e,{}),n.jsx("div",{className:"flex items-center justify-center py-24",children:n.jsxs("div",{className:"text-center",children:[n.jsx(be,{className:"h-10 w-10 text-burgundy-500 animate-spin mx-auto mb-4"}),n.jsx("p",{className:"text-neutral-500",children:"Loading season data..."})]})})]}):n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200",children:[n.jsx(_e,{}),n.jsxs("div",{className:"p-4 pb-24",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("button",{onClick:()=>e(-1),className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:n.jsx(ht,{className:"h-5 w-5 text-neutral-600"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-display font-bold text-neutral-800",children:t("create-league.header.title","Create a League")}),n.jsx("p",{className:"text-neutral-500",children:t("create-league.header.subtitle","Start your own fantasy league and invite friends")})]})]}),n.jsxs("div",{className:"max-w-md mx-auto space-y-6",children:[n.jsx(Iie,{name:r,setName:s,description:a,setDescription:i}),n.jsx(Lie,{isPrivate:o,setIsPrivate:l,joinCode:u,setJoinCode:d}),n.jsx(Mie,{requireDonation:p,setRequireDonation:f,donationAmount:m,setDonationAmount:x}),I.length>0&&n.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(yt,{className:"h-5 w-5 text-amber-600 flex-shrink-0 mt-0.5"}),n.jsx("ul",{className:"text-amber-700 text-sm space-y-1",children:I.map((O,M)=>n.jsx("li",{children:O},M))})]})}),n.jsx("button",{onClick:()=>R.mutate(),disabled:!A||R.isPending,className:"w-full btn btn-primary btn-lg flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:R.isPending?n.jsxs(n.Fragment,{children:[n.jsx(be,{className:"h-5 w-5 animate-spin"}),p?"Redirecting to payment...":"Creating..."]}):p&&m?n.jsxs(n.Fragment,{children:[n.jsx(ux,{className:"h-5 w-5"}),"Create & Pay $",m]}):n.jsxs(n.Fragment,{children:[n.jsx(Ke,{className:"h-5 w-5"}),"Create League"]})}),(R.isError||E)&&n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(yt,{className:"h-5 w-5 text-red-600 flex-shrink-0 mt-0.5"}),n.jsx("p",{className:"text-red-600 text-sm",children:E||"Error creating league. Please try again."})]})})]})]}),y&&b&&n.jsx(Die,{league:b,joinCode:u,isPrivate:o,onClose:()=>g(!1)})]})}function qie({code:e}){const[t,r]=$.useState(!1),s=()=>{const a=`${window.location.origin}/join/${e}`;navigator.clipboard.writeText(a),r(!0),setTimeout(()=>r(!1),2e3)};return n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200",children:[n.jsx("h3",{className:"text-neutral-800 font-medium mb-3",children:"Invite Link"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"flex-1 bg-cream-50 rounded-xl px-4 py-3 text-burgundy-600 font-mono border border-cream-200",children:e}),n.jsx("button",{onClick:s,className:"p-3 bg-burgundy-500 hover:bg-burgundy-600 rounded-xl transition-colors",children:t?n.jsx(Ot,{className:"h-5 w-5 text-white"}):n.jsx(lx,{className:"h-5 w-5 text-white"})})]})]})}function Fie({name:e,password:t,onNameChange:r,onPasswordChange:s}){return n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200",children:[n.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-3 mb-4",children:n.jsx("p",{className:"text-amber-700 text-sm font-medium",children:"Admin-only settings"})}),n.jsxs("label",{className:"block mb-4",children:[n.jsxs("span",{className:"text-neutral-800 font-medium flex items-center gap-2 mb-2",children:[n.jsx(Ke,{className:"h-5 w-5 text-burgundy-500"}),"League Name"]}),n.jsx("input",{type:"text",value:e,onChange:a=>r(a.target.value),className:"input"})]}),n.jsxs("label",{className:"block",children:[n.jsxs("span",{className:"text-neutral-800 font-medium flex items-center gap-2 mb-2",children:[n.jsx(mr,{className:"h-5 w-5 text-burgundy-500"}),"New Password"]}),n.jsx("input",{type:"password",value:t,onChange:a=>s(a.target.value),placeholder:"Leave blank to keep current",className:"input"})]})]})}function Uie({isPublic:e,maxPlayers:t,currentMemberCount:r,draftStatus:s,onPublicChange:a,onMaxPlayersChange:i}){const o=r===0||s==="pending";return n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200",children:[n.jsxs("h3",{className:"text-neutral-800 font-medium mb-4 flex items-center gap-2",children:[n.jsx(us,{className:"h-5 w-5 text-burgundy-500"}),"Visibility & Access"]}),n.jsxs("label",{className:"flex items-center justify-between cursor-pointer mb-4 p-3 bg-cream-50 rounded-xl border border-cream-200",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[e?n.jsx(Ha,{className:"h-5 w-5 text-burgundy-500"}):n.jsx(uh,{className:"h-5 w-5 text-neutral-400"}),n.jsxs("div",{children:[n.jsx("span",{className:"text-neutral-800 font-medium block",children:"Public League"}),n.jsx("span",{className:"text-neutral-500 text-sm",children:"Anyone can view standings"})]})]}),n.jsx("input",{type:"checkbox",checked:e,onChange:l=>a(l.target.checked),className:"w-5 h-5 rounded bg-cream-100 border-cream-300 text-burgundy-500 focus:ring-burgundy-500"})]}),n.jsxs("label",{className:"block",children:[n.jsx("span",{className:"text-neutral-500 text-sm mb-2 block",children:"Max Players"}),n.jsx("select",{value:t,onChange:l=>i(parseInt(l.target.value)),disabled:!o,className:"input disabled:opacity-50",children:[4,6,8,10,12,16,20,24].map(l=>n.jsxs("option",{value:l,disabled:l<r,children:[l," players"]},l))}),r>0&&n.jsxs("p",{className:"text-neutral-400 text-xs mt-1",children:["Currently ",r," of ",t," players"]})]})]})}function Bie({requireDonation:e,donationAmount:t,draftStatus:r,onRequireDonationChange:s,onDonationAmountChange:a}){const i=r==="pending";return n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200",children:[n.jsxs("label",{className:"flex items-center justify-between cursor-pointer mb-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Zo,{className:"h-5 w-5 text-burgundy-500"}),n.jsx("span",{className:"text-neutral-800 font-medium",children:"Require Donation"})]}),n.jsx("input",{type:"checkbox",checked:e,onChange:o=>s(o.target.checked),disabled:!i,className:"w-5 h-5 rounded bg-cream-100 border-cream-300 text-burgundy-500 focus:ring-burgundy-500 disabled:opacity-50"})]}),e&&n.jsx("div",{className:"space-y-4 pt-4 border-t border-cream-200",children:n.jsxs("label",{className:"block",children:[n.jsx("span",{className:"text-neutral-500 text-sm mb-2 block",children:"Amount ($)"}),n.jsx("input",{type:"number",value:t,onChange:o=>a(o.target.value),disabled:!i,className:"input disabled:opacity-50"})]})})]})}function Hie({members:e,currentUserId:t,draftStatus:r,onRemoveMember:s,isRemoving:a,removeError:i}){return n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200",children:[n.jsxs("h3",{className:"text-neutral-800 font-medium mb-4 flex items-center gap-2",children:[n.jsx(Ke,{className:"h-5 w-5 text-burgundy-500"}),"Members (",(e==null?void 0:e.length)||0,")"]}),n.jsx("div",{className:"space-y-2",children:e==null?void 0:e.map(o=>{var u;const l=o.user_id===t;return n.jsxs("div",{className:"flex items-center justify-between p-3 bg-cream-50 rounded-xl border border-cream-200",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("span",{className:"text-neutral-800",children:(u=o.users)==null?void 0:u.display_name}),l&&n.jsxs("span",{className:"inline-flex items-center gap-1 bg-burgundy-100 text-burgundy-600 text-xs px-2 py-0.5 rounded-full",children:[n.jsx(er,{className:"h-3 w-3"}),"You"]})]}),!l&&r==="pending"&&n.jsx("button",{onClick:()=>{var d;return s(o.user_id,((d=o.users)==null?void 0:d.display_name)||"this member")},disabled:a,className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors",title:"Remove member",children:n.jsx(bre,{className:"h-4 w-4"})})]},o.id)})}),i&&n.jsx("p",{className:"text-red-500 text-sm mt-2",children:"Failed to remove member"})]})}function Kie({otherMembers:e,onTransfer:t,isPending:r,isError:s}){const[a,i]=$.useState(!1),[o,l]=$.useState(null),[u,d]=$.useState(!1);if(e.length===0)return null;const p=()=>{o&&(t(o),i(!1),d(!1),l(null))};return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-6",children:[n.jsxs("h3",{className:"text-amber-700 font-medium mb-2 flex items-center gap-2",children:[n.jsx($ee,{className:"h-5 w-5"}),"Transfer Ownership"]}),n.jsx("p",{className:"text-amber-600 text-sm mb-4",children:"Transfer ownership to another member. You will lose all creator privileges."}),n.jsx("button",{onClick:()=>i(!0),className:"w-full bg-amber-100 hover:bg-amber-200 border border-amber-300 text-amber-800 font-bold py-3 rounded-xl transition-colors",children:"Transfer Ownership"})]}),a&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-2xl p-6 max-w-sm w-full border border-cream-200 shadow-elevated",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"text-neutral-800 font-bold flex items-center gap-2",children:[n.jsx(Tt,{className:"h-5 w-5 text-amber-500"}),"Transfer Ownership"]}),n.jsx("button",{onClick:()=>{i(!1),l(null)},className:"text-neutral-400 hover:text-neutral-600",children:n.jsx(It,{className:"h-5 w-5"})})]}),n.jsx("p",{className:"text-neutral-500 text-sm mb-4",children:"Select a member to become the new league creator. This action cannot be undone."}),n.jsx("div",{className:"space-y-2 mb-6 max-h-48 overflow-y-auto",children:e.map(f=>{var m;return n.jsxs("label",{className:`flex items-center gap-3 p-3 rounded-xl cursor-pointer transition-colors ${o===f.user_id?"bg-burgundy-50 border-2 border-burgundy-500":"bg-cream-50 border border-cream-200 hover:bg-cream-100"}`,children:[n.jsx("input",{type:"radio",name:"transfer-target",value:f.user_id,checked:o===f.user_id,onChange:x=>l(x.target.value),className:"text-burgundy-500 focus:ring-burgundy-500"}),n.jsx("span",{className:"text-neutral-800",children:(m=f.users)==null?void 0:m.display_name})]},f.id)})}),u?n.jsxs("div",{className:"space-y-3",children:[n.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-xl",children:n.jsx("p",{className:"text-red-700 text-sm font-medium",children:" You will lose all creator privileges. This cannot be undone."})}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:()=>d(!1),className:"flex-1 btn btn-secondary",children:"Go Back"}),n.jsx("button",{onClick:p,disabled:r,className:"flex-1 bg-red-500 hover:bg-red-600 disabled:bg-cream-200 text-white disabled:text-neutral-400 font-bold py-3 rounded-xl transition-colors flex items-center justify-center gap-2",children:r?n.jsx(be,{className:"h-5 w-5 animate-spin"}):"Confirm Transfer"})]})]}):n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:()=>{i(!1),l(null)},className:"flex-1 btn btn-secondary",children:"Cancel"}),n.jsx("button",{onClick:()=>d(!0),disabled:!o||r,className:"flex-1 bg-amber-500 hover:bg-amber-600 disabled:bg-cream-200 text-white disabled:text-neutral-400 font-bold py-3 rounded-xl transition-colors",children:"Continue"})]}),s&&n.jsx("p",{className:"text-red-500 text-sm mt-3 text-center",children:"Failed to transfer ownership"})]})})]})}function zie({onDelete:e,isPending:t}){const[r,s]=$.useState(!1),[a,i]=$.useState(""),o=()=>{a.toLowerCase()==="delete"&&(e(),s(!1),i(""))};return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6",children:[n.jsxs("h3",{className:"text-red-600 font-medium mb-2 flex items-center gap-2",children:[n.jsx(ms,{className:"h-5 w-5"}),"Danger Zone"]}),n.jsx("p",{className:"text-red-500 text-sm mb-4",children:"Deleting the league cannot be undone. All members will be removed."}),n.jsx("button",{onClick:()=>s(!0),disabled:t,className:"w-full bg-red-100 hover:bg-red-200 border border-red-300 text-red-700 font-bold py-3 rounded-xl transition-colors",children:t?"Deleting...":"Delete League"})]}),r&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-2xl p-6 max-w-sm w-full border border-red-200 shadow-elevated",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"text-red-600 font-bold flex items-center gap-2",children:[n.jsx(Tt,{className:"h-5 w-5"}),"Delete League"]}),n.jsx("button",{onClick:()=>{s(!1),i("")},className:"text-neutral-400 hover:text-neutral-600","aria-label":"Close",children:n.jsx(It,{className:"h-5 w-5"})})]}),n.jsx("p",{className:"text-neutral-600 text-sm mb-4",children:"This action cannot be undone. All league data, members, and history will be permanently deleted."}),n.jsxs("label",{className:"block mb-4",children:[n.jsx("span",{className:"text-neutral-700 text-sm font-medium",children:'Type "delete" to confirm:'}),n.jsx("input",{type:"text",value:a,onChange:l=>i(l.target.value),placeholder:"delete",className:"input mt-2",autoComplete:"off"})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:()=>{s(!1),i("")},className:"flex-1 btn btn-secondary",children:"Cancel"}),n.jsx("button",{onClick:o,disabled:a.toLowerCase()!=="delete"||t,className:"flex-1 bg-red-500 hover:bg-red-600 disabled:bg-red-200 text-white disabled:text-red-400 font-bold py-3 rounded-xl transition-colors flex items-center justify-center gap-2",children:t?n.jsx(be,{className:"h-5 w-5 animate-spin"}):"Delete Forever"})]})]})})]})}function Wie(){const{leagueId:e}=Wn(),t=$s(),r=at(),{session:s}=Et(),[a,i]=$.useState(""),[o,l]=$.useState(""),[u,d]=$.useState(""),[p,f]=$.useState(!1),[m,x]=$.useState(12),[y,g]=$.useState(!1),[b,_]=$.useState(""),[w,S]=$.useState(null),{data:j}=ie({queryKey:["current-user"],queryFn:async()=>{const{data:{user:K}}=await X.auth.getUser();return K}}),{data:N}=ie({queryKey:["user-profile",j==null?void 0:j.id],queryFn:async()=>{if(!(j!=null&&j.id))return null;const{data:K,error:F}=await X.from("users").select("role").eq("id",j.id).single();if(F)throw F;return K},enabled:!!(j!=null&&j.id)}),{data:C,isLoading:E}=ie({queryKey:["league",e],queryFn:async()=>{if(!e)throw new Error("No league ID");const{data:K,error:F}=await X.from("leagues").select("*, seasons(*)").eq("id",e).single();if(F)throw F;return K},enabled:!!e}),{data:T}=ie({queryKey:["league-members",e],queryFn:async()=>{if(!e)throw new Error("No league ID");const{data:K,error:F}=await X.from("league_members").select("*, users(id, display_name, email)").eq("league_id",e).order("draft_position",{ascending:!0,nullsFirst:!1});if(F)throw F;return K},enabled:!!e});$.useEffect(()=>{var K;C&&(i(C.name||""),l(C.description||""),f(C.is_public||!1),x(C.max_players||12),g(C.require_donation||!1),_(((K=C.donation_amount)==null?void 0:K.toString())||""))},[C]);const I=(C==null?void 0:C.commissioner_id)===(j==null?void 0:j.id),A=(N==null?void 0:N.role)==="admin",R=I||A,O=ke({mutationFn:async()=>{if(!e)throw new Error("No league ID");if(!(s!=null&&s.access_token))throw new Error("Not authenticated");const K={description:o};A&&(K.name=a,K.is_public=p,K.max_players=m,K.donation_amount=y?parseFloat(b):null,u&&(K.password=u));const F=await Zn(`/leagues/${e}/settings`,s.access_token,{method:"PATCH",body:JSON.stringify(K)});if(F.error)throw new Error(F.error);return F.data},onSuccess:()=>{r.invalidateQueries({queryKey:["league",e]}),d(""),S(null)},onError:K=>{S(K.message||"Failed to update league settings")}}),M=ke({mutationFn:async K=>{if(!e)throw new Error("No league ID");if(!(s!=null&&s.access_token))throw new Error("Not authenticated");const F=await Zn(`/leagues/${e}/members/${K}`,s.access_token,{method:"DELETE"});if(F.error)throw new Error(F.error);return F.data},onSuccess:()=>{r.invalidateQueries({queryKey:["league-members",e]}),S(null)},onError:K=>{S(K.message||"Failed to remove member")}}),B=ke({mutationFn:async K=>{if(!e)throw new Error("No league ID");if(!(s!=null&&s.access_token))throw new Error("Not authenticated");const F=await Zn(`/leagues/${e}/transfer`,s.access_token,{method:"POST",body:JSON.stringify({new_commissioner_id:K})});if(F.error)throw new Error(F.error);return F.data},onSuccess:()=>{r.invalidateQueries({queryKey:["league",e]}),t(`/leagues/${e}`)},onError:K=>{S(K.message||"Failed to transfer ownership")}}),U=ke({mutationFn:async()=>{if(!e)throw new Error("No league ID");const{error:K}=await X.from("leagues").delete().eq("id",e);if(K)throw K},onSuccess:()=>{t("/dashboard")}}),Y=(K,F)=>{confirm(`Remove ${F} from the league?`)&&M.mutate(K)};if(E)return n.jsxs(n.Fragment,{children:[n.jsx(_e,{}),n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center",children:n.jsx(be,{className:"h-8 w-8 text-burgundy-500 animate-spin"})})]});if(!R)return n.jsxs(n.Fragment,{children:[n.jsx(_e,{}),n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 p-4 pb-24",children:n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-8 text-center",children:[n.jsx("h1",{className:"text-xl font-display font-bold text-neutral-800 mb-2",children:"Access Denied"}),n.jsx("p",{className:"text-neutral-500 mb-4",children:"Only the league creator or admin can access settings."}),n.jsx(se,{to:`/leagues/${e}`,className:"text-burgundy-500 hover:text-burgundy-600",children:"Back to League"})]})})]});const W=(T==null?void 0:T.filter(K=>K.user_id!==(j==null?void 0:j.id)))||[];return n.jsxs(n.Fragment,{children:[n.jsx(_e,{}),n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 p-4 pb-24",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx(se,{to:`/leagues/${e}`,className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:n.jsx(ht,{className:"h-5 w-5 text-neutral-600"})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("h1",{className:"text-2xl font-display font-bold text-neutral-800 flex items-center gap-2",children:[n.jsx(dh,{className:"h-6 w-6 text-burgundy-500"}),"League Settings"]}),n.jsxs("p",{className:"text-neutral-500 flex items-center gap-2",children:[C==null?void 0:C.name,n.jsxs("span",{className:"inline-flex items-center gap-1 bg-burgundy-100 text-burgundy-600 text-xs px-2 py-0.5 rounded-full",children:[n.jsx(er,{className:"h-3 w-3"}),I?"Creator":"Admin"]})]})]})]}),n.jsxs("div",{className:"max-w-md mx-auto space-y-6",children:[w&&n.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-xl flex items-start gap-3",children:[n.jsx(yt,{className:"h-5 w-5 text-red-500 flex-shrink-0 mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-red-800 font-medium",children:"Error"}),n.jsx("p",{className:"text-red-600 text-sm",children:w})]}),n.jsx("button",{onClick:()=>S(null),className:"text-red-400 hover:text-red-600",children:""})]}),n.jsx(qie,{code:C==null?void 0:C.code}),n.jsx("div",{className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200",children:n.jsxs("label",{className:"block",children:[n.jsx("span",{className:"text-neutral-800 font-medium mb-2 block",children:"League Description"}),n.jsx("textarea",{value:o,onChange:K=>l(K.target.value),placeholder:"Tell members what your league is about...",className:"input min-h-[100px] resize-none",maxLength:500}),n.jsxs("p",{className:"text-neutral-400 text-xs mt-1 text-right",children:[o.length,"/500"]})]})}),A&&n.jsxs(n.Fragment,{children:[n.jsx(Fie,{name:a,password:u,onNameChange:i,onPasswordChange:d}),n.jsx(Uie,{isPublic:p,maxPlayers:m,currentMemberCount:(T==null?void 0:T.length)||0,draftStatus:(C==null?void 0:C.draft_status)||"pending",onPublicChange:f,onMaxPlayersChange:x}),n.jsx(Bie,{requireDonation:y,donationAmount:b,draftStatus:(C==null?void 0:C.draft_status)||"pending",onRequireDonationChange:g,onDonationAmountChange:_})]}),n.jsx(Hie,{members:T,currentUserId:j==null?void 0:j.id,draftStatus:(C==null?void 0:C.draft_status)||"pending",onRemoveMember:Y,isRemoving:M.isPending,removeError:M.isError}),n.jsx("button",{onClick:()=>O.mutate(),disabled:O.isPending,className:"w-full btn btn-primary flex items-center justify-center gap-2",children:O.isPending?n.jsx(be,{className:"h-5 w-5 animate-spin"}):"Save Changes"}),O.isSuccess&&n.jsx("p",{className:"text-green-600 text-center",children:"Settings saved!"}),n.jsx(Kie,{otherMembers:W,onTransfer:K=>B.mutate(K),isPending:B.isPending,isError:B.isError}),(C==null?void 0:C.draft_status)==="pending"&&n.jsx(zie,{onDelete:()=>U.mutate(),isPending:U.isPending})]})]})]})}function Gie(){const{getCopy:e}=Kt(),t=[{command:"PICK [name]",example:"PICK Boston Rob",description:"Submit your weekly pick. Use the castaway's first name or full name."},{command:"STATUS",example:"STATUS",description:"Check your current pick status, deadline, and points for the week."},{command:"TEAM",example:"TEAM",description:"View your current roster and each castaway's status."},{command:"SCORES",example:"SCORES",description:"Get your latest scores and league standings."},{command:"HELP",example:"HELP",description:"Get a list of available commands."}];return n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200",children:[n.jsx(_e,{}),n.jsxs("div",{className:"p-4 pb-24",children:[n.jsx("div",{className:"flex items-center gap-3 mb-6 max-w-4xl mx-auto",children:n.jsxs("div",{children:[n.jsxs("h1",{className:"text-2xl font-display font-bold text-neutral-800 flex items-center gap-2",children:[n.jsx(el,{className:"h-6 w-6 text-burgundy-500"}),n.jsx(ne,{copyKey:"sms.header.title",as:"span",children:e("sms.header.title","SMS Commands")})]}),n.jsx(ne,{copyKey:"sms.header.subtitle",as:"p",className:"text-neutral-500",children:e("sms.header.subtitle","Make picks and check status via text")})]})}),n.jsxs("div",{className:"bg-burgundy-50 border border-burgundy-200 rounded-2xl p-6 mb-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[n.jsx(fj,{className:"h-6 w-6 text-burgundy-500"}),n.jsx(ne,{copyKey:"sms.phone.title",as:"h2",className:"text-lg font-display font-bold text-neutral-800",children:e("sms.phone.title","Text Us")})]}),n.jsx("a",{href:"sms:+14247227529",className:"text-3xl font-mono font-bold text-burgundy-500 mb-2 block hover:text-burgundy-600 transition-colors",children:"(424) 722-7529"}),n.jsx(ne,{copyKey:"sms.phone.save",as:"p",className:"text-neutral-600 text-sm mb-4",children:e("sms.phone.save","Save this number to your contacts for easy access during episodes!")}),n.jsx(ne,{copyKey:"sms.phone.description",as:"p",className:"text-neutral-600 text-sm font-medium",children:e("sms.phone.description","Make weekly picks and check the leaderboard with just a simple text command.")})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200 mb-6",children:[n.jsx(ne,{copyKey:"sms.setup.title",as:"h2",className:"text-lg font-display font-bold text-neutral-800 mb-4",children:e("sms.setup.title","Setup")}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-6 h-6 bg-burgundy-500 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:n.jsx("span",{className:"text-white font-bold text-sm",children:"1"})}),n.jsxs("p",{className:"text-neutral-600",children:["Go to your"," ",n.jsx(se,{to:"/profile",className:"text-burgundy-500 hover:text-burgundy-600 font-medium",children:"Profile"})," ","and add your phone number."]})]}),n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-6 h-6 bg-burgundy-500 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:n.jsx("span",{className:"text-white font-bold text-sm",children:"2"})}),n.jsx("p",{className:"text-neutral-600",children:"Verify your phone with the code we text you."})]}),n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-6 h-6 bg-burgundy-500 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:n.jsx("span",{className:"text-white font-bold text-sm",children:"3"})}),n.jsx("p",{className:"text-neutral-600",children:"Start texting commands to make picks and check status!"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200",children:[n.jsx(ne,{copyKey:"sms.commands.title",as:"h2",className:"text-lg font-display font-bold text-neutral-800 mb-4",children:e("sms.commands.title","Available Commands")}),n.jsx("div",{className:"space-y-4",children:t.map(r=>n.jsxs("div",{className:"bg-cream-50 rounded-xl p-4 border border-cream-200",children:[n.jsx("div",{className:"flex items-center justify-between mb-2",children:n.jsx("code",{className:"text-burgundy-500 font-mono font-bold",children:r.command})}),n.jsx("p",{className:"text-neutral-600 text-sm mb-2",children:r.description}),n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx("span",{className:"text-neutral-400",children:"Example:"}),n.jsx("code",{className:"text-neutral-800 bg-cream-100 px-2 py-1 rounded",children:r.example})]})]},r.command))})]}),n.jsxs("div",{className:"mt-6 bg-gradient-to-r from-burgundy-50 to-amber-50 rounded-2xl shadow-card p-6 border border-burgundy-200",children:[n.jsx(ne,{copyKey:"sms.reminders.title",as:"h2",className:"text-lg font-display font-bold text-neutral-800 mb-3",children:e("sms.reminders.title","Weekly Pick Reminders")}),n.jsx(ne,{copyKey:"sms.reminders.description",as:"p",className:"text-neutral-700 mb-4",children:e("sms.reminders.description","We can text everyone each week asking who their weekly pick is. All you have to do is text 1 or 2 to confirm your pick for that week!")}),n.jsx(ne,{copyKey:"sms.reminders.details",as:"p",className:"text-neutral-600 text-sm",children:e("sms.reminders.details","This feature makes it super easy to make your picks without even opening the app. Just reply with the number of your castaway (1 for your first pick, 2 for your second pick).")})]}),n.jsxs("div",{className:"mt-6 bg-white rounded-2xl shadow-card p-6 border border-cream-200",children:[n.jsx(ne,{copyKey:"sms.tips.title",as:"h2",className:"text-lg font-display font-bold text-neutral-800 mb-4",children:e("sms.tips.title","Tips")}),n.jsxs("ul",{className:"space-y-2",children:[n.jsxs("li",{className:"flex items-start gap-2 text-neutral-600",children:[n.jsx(xt,{className:"h-5 w-5 text-green-500 flex-shrink-0 mt-0.5"}),"Commands are not case-sensitive (PICK = pick = Pick)"]}),n.jsxs("li",{className:"flex items-start gap-2 text-neutral-600",children:[n.jsx(xt,{className:"h-5 w-5 text-green-500 flex-shrink-0 mt-0.5"}),"You can use first name only if it's unique"]}),n.jsxs("li",{className:"flex items-start gap-2 text-neutral-600",children:[n.jsx(xt,{className:"h-5 w-5 text-green-500 flex-shrink-0 mt-0.5"}),"We'll confirm your pick with a reply text"]}),n.jsxs("li",{className:"flex items-start gap-2 text-neutral-600",children:[n.jsx(xt,{className:"h-5 w-5 text-green-500 flex-shrink-0 mt-0.5"}),"Picks lock at 3pm PST on Wednesdays"]})]})]})]}),n.jsx(tn,{})]})}function Vie(){const{seasonId:e}=Wn(),{data:t,isLoading:r}=ie({queryKey:["season",e],queryFn:async()=>{if(!e)throw new Error("No season ID");const{data:d,error:p}=await X.from("seasons").select("*").eq("id",e).single();if(p)throw p;return d},enabled:!!e}),{data:s,isLoading:a}=ie({queryKey:["season-episodes",e],queryFn:async()=>{if(!e)throw new Error("No season ID");const{data:d,error:p}=await X.from("episodes").select("*").eq("season_id",e).order("number",{ascending:!0});if(p)throw p;return d||[]},enabled:!!e}),i=new Date,o=d=>{const p=new Date(d.air_date);return d.is_scored?"scored":p<i?"aired":"upcoming"},l=d=>new Date(d).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),u=d=>new Date(d).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",timeZoneName:"short"});return r||a?n.jsxs(n.Fragment,{children:[n.jsx(_e,{}),n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center",children:n.jsx(be,{className:"h-8 w-8 text-burgundy-500 animate-spin"})})]}):n.jsxs(n.Fragment,{children:[n.jsx(_e,{}),n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 p-4 pb-24",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx(se,{to:"/dashboard",className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:n.jsx(ht,{className:"h-5 w-5 text-neutral-600"})}),n.jsxs("div",{children:[n.jsxs("h1",{className:"text-2xl font-display font-bold text-neutral-800 flex items-center gap-2",children:[n.jsx(wn,{className:"h-6 w-6 text-burgundy-500"}),"Episode Schedule"]}),n.jsxs("p",{className:"text-neutral-500",children:["Season ",t==null?void 0:t.number,": ",t==null?void 0:t.name]})]})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-4 border border-cream-200 mb-6",children:[n.jsx("h2",{className:"text-lg font-display font-bold text-neutral-800 mb-3",children:"Key Dates"}),n.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[n.jsxs("div",{className:"bg-cream-50 rounded-xl p-3 border border-cream-200",children:[n.jsx("p",{className:"text-neutral-500",children:"Premiere"}),n.jsx("p",{className:"text-neutral-800 font-medium",children:t!=null&&t.premiere_at?l(t.premiere_at):"-"})]}),n.jsxs("div",{className:"bg-cream-50 rounded-xl p-3 border border-cream-200",children:[n.jsx("p",{className:"text-neutral-500",children:"Finale"}),n.jsx("p",{className:"text-neutral-800 font-medium",children:t!=null&&t.finale_at?l(t.finale_at):"-"})]}),n.jsxs("div",{className:"bg-cream-50 rounded-xl p-3 border border-cream-200",children:[n.jsx("p",{className:"text-neutral-500",children:"Draft Deadline"}),n.jsx("p",{className:"text-neutral-800 font-medium",children:t!=null&&t.draft_deadline?l(t.draft_deadline):"-"})]}),n.jsxs("div",{className:"bg-cream-50 rounded-xl p-3 border border-cream-200",children:[n.jsx("p",{className:"text-neutral-500",children:"Registration Closes"}),n.jsx("p",{className:"text-neutral-800 font-medium",children:t!=null&&t.registration_closes_at?l(t.registration_closes_at):"-"})]})]})]}),n.jsxs("div",{className:"bg-burgundy-50 border border-burgundy-200 rounded-2xl p-4 mb-6",children:[n.jsxs("h3",{className:"text-burgundy-500 font-medium mb-2 flex items-center gap-2",children:[n.jsx(Nt,{className:"h-4 w-4"}),"Weekly Rhythm"]}),n.jsxs("div",{className:"text-sm space-y-1 text-neutral-600",children:[n.jsxs("p",{children:[n.jsx("strong",{className:"text-neutral-800",children:"Wed 3:00 PM"}),"  Picks lock"]}),n.jsxs("p",{children:[n.jsx("strong",{className:"text-neutral-800",children:"Wed 8:00 PM"}),"  Episode airs"]}),n.jsxs("p",{children:[n.jsx("strong",{className:"text-neutral-800",children:"Fri 12:00 PM"}),"  Results posted"]})]})]}),n.jsxs("div",{className:"space-y-3",children:[s==null?void 0:s.map(d=>{const p=o(d);return n.jsxs("div",{className:`bg-white rounded-2xl shadow-card p-4 border ${p==="scored"?"border-green-300":p==="aired"?"border-amber-300":"border-cream-200"}`,children:[n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${p==="scored"?"bg-green-100":p==="aired"?"bg-amber-100":"bg-cream-100"}`,children:p==="scored"?n.jsx(xt,{className:"h-5 w-5 text-green-600"}):p==="aired"?n.jsx(yw,{className:"h-5 w-5 text-amber-600"}):n.jsx(pte,{className:"h-5 w-5 text-neutral-400"})}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("h3",{className:"text-neutral-800 font-medium",children:["Episode ",d.number,d.is_finale&&"  Finale"]}),p==="scored"&&n.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded-full",children:"Scored"})]}),n.jsx("p",{className:"text-neutral-500 text-sm",children:d.title||l(d.air_date)})]})]}),n.jsxs("div",{className:"text-right text-sm",children:[n.jsx("p",{className:"text-neutral-800",children:l(d.air_date)}),n.jsx("p",{className:"text-neutral-500",children:u(d.air_date)})]})]}),p==="upcoming"&&n.jsx("div",{className:"mt-3 pt-3 border-t border-cream-200 text-sm",children:n.jsxs("p",{className:"text-neutral-500",children:["Picks lock:"," ",n.jsxs("span",{className:"text-neutral-800",children:[l(d.picks_lock_at)," at ",u(d.picks_lock_at)]})]})})]},d.id)}),(s==null?void 0:s.length)===0&&n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-8 border border-cream-200 text-center",children:[n.jsx(wn,{className:"h-12 w-12 text-neutral-400 mx-auto mb-4"}),n.jsx("p",{className:"text-neutral-500",children:"Episode schedule not yet available."})]})]})]})]})}function Qie(){const{seasonId:e}=Wn(),[t,r]=$.useState(""),[s,a]=$.useState("all"),[i,o]=$.useState(null),{data:l,isLoading:u}=ie({queryKey:["season",e],queryFn:async()=>{if(!e)throw new Error("No season ID");const{data:b,error:_}=await X.from("seasons").select("*").eq("id",e).single();if(_)throw _;return b},enabled:!!e}),{data:d,isLoading:p}=ie({queryKey:["season-castaways",e],queryFn:async()=>{if(!e)throw new Error("No season ID");const{data:b,error:_}=await X.from("castaways").select("*, episodes:eliminated_episode_id(number)").eq("season_id",e).order("name",{ascending:!0});if(_)throw _;return b||[]},enabled:!!e}),{data:f}=ie({queryKey:["castaway-scores",e],queryFn:async()=>{if(!e)return[];const{data:b}=await X.from("episodes").select("id").eq("season_id",e);if(!(b!=null&&b.length))return[];const _=b.map(j=>j.id),{data:w,error:S}=await X.from("episode_scores").select(`
          castaway_id,
          episode_id,
          points,
          episode:episodes!episode_id(number, title)
        `).in("episode_id",_);if(S)throw S;return w||[]},enabled:!!e}),m=(f==null?void 0:f.reduce((b,_)=>{var S;b[_.castaway_id]||(b[_.castaway_id]={total:0,byEpisode:{}}),b[_.castaway_id].total+=_.points;const w=(S=_.episode)==null?void 0:S.number;return w&&(b[_.castaway_id].byEpisode[w]||(b[_.castaway_id].byEpisode[w]=0),b[_.castaway_id].byEpisode[w]+=_.points),b},{}))||{},x=d==null?void 0:d.filter(b=>{var S,j;const _=b.name.toLowerCase().includes(t.toLowerCase())||((S=b.occupation)==null?void 0:S.toLowerCase().includes(t.toLowerCase()))||((j=b.hometown)==null?void 0:j.toLowerCase().includes(t.toLowerCase())),w=s==="all"||s==="active"&&b.status==="active"||s==="eliminated"&&b.status==="eliminated";return _&&w}),y=(d==null?void 0:d.filter(b=>b.status==="active").length)||0,g=(d==null?void 0:d.filter(b=>b.status==="eliminated").length)||0;return u||p?n.jsxs(n.Fragment,{children:[n.jsx(_e,{}),n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center",children:n.jsx(be,{className:"h-8 w-8 text-burgundy-500 animate-spin"})})]}):n.jsxs(n.Fragment,{children:[n.jsx(_e,{}),n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 p-4 pb-24",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx(se,{to:"/dashboard",className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:n.jsx(ht,{className:"h-5 w-5 text-neutral-600"})}),n.jsxs("div",{children:[n.jsxs("h1",{className:"text-2xl font-display font-bold text-neutral-800 flex items-center gap-2",children:[n.jsx(Ke,{className:"h-6 w-6 text-burgundy-500"}),"Castaways"]}),n.jsxs("p",{className:"text-neutral-500",children:["Season ",l==null?void 0:l.number,": ",l==null?void 0:l.name]})]})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-6",children:[n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-3 border border-cream-200 text-center",children:[n.jsx("p",{className:"text-2xl font-bold text-neutral-800",children:(d==null?void 0:d.length)||0}),n.jsx("p",{className:"text-neutral-500 text-xs",children:"Total"})]}),n.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-2xl p-3 text-center",children:[n.jsx("p",{className:"text-2xl font-bold text-green-600",children:y}),n.jsx("p",{className:"text-neutral-500 text-xs",children:"Active"})]}),n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-3 text-center",children:[n.jsx("p",{className:"text-2xl font-bold text-red-600",children:g}),n.jsx("p",{className:"text-neutral-500 text-xs",children:"Eliminated"})]})]}),n.jsxs("div",{className:"flex gap-2 mb-6",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx(Ka,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-neutral-400"}),n.jsx("input",{type:"text",value:t,onChange:b=>r(b.target.value),placeholder:"Search castaways...",className:"input pl-10"})]}),n.jsxs("select",{value:s,onChange:b=>{const _=b.target.value;(_==="all"||_==="active"||_==="eliminated")&&a(_)},className:"input px-3 py-2 w-32",children:[n.jsx("option",{value:"all",children:"All"}),n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"eliminated",children:"Eliminated"})]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:x==null?void 0:x.map(b=>{const _=m[b.id],w=i===b.id;return n.jsxs("div",{className:`bg-white rounded-2xl shadow-card border overflow-hidden ${b.status==="eliminated"?"border-red-200 opacity-75":b.status==="winner"?"border-amber-400":"border-cream-200"}`,children:[n.jsx("button",{onClick:()=>o(w?null:b.id),className:"w-full p-4 text-left",children:n.jsxs("div",{className:"flex items-start gap-3",children:[b.photo_url?n.jsx("img",{src:b.photo_url,alt:b.name,className:`w-14 h-14 rounded-full object-cover ${b.status==="eliminated"?"grayscale":""}`}):n.jsx("div",{className:"w-14 h-14 bg-cream-100 rounded-full flex items-center justify-center border border-cream-200",children:n.jsx(Ke,{className:"h-6 w-6 text-neutral-400"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[b.status==="winner"&&n.jsx(ot,{className:"h-4 w-4 text-amber-500"}),b.status==="eliminated"&&n.jsx(gw,{className:"h-4 w-4 text-red-500"}),n.jsx("h3",{className:"text-neutral-800 font-medium truncate",children:b.name})]}),b.occupation&&n.jsx("p",{className:"text-neutral-500 text-sm",children:b.occupation}),b.age&&b.hometown&&n.jsxs("p",{className:"text-neutral-400 text-xs truncate",children:[b.age,", ",b.hometown]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[(_==null?void 0:_.total)!==void 0&&n.jsxs("span",{className:`text-lg font-bold ${_.total>=0?"text-green-600":"text-red-600"}`,children:[_.total>=0?"+":"",_.total]}),w?n.jsx(fs,{className:"h-5 w-5 text-neutral-400"}):n.jsx(en,{className:"h-5 w-5 text-neutral-400"})]})]})}),w&&n.jsxs("div",{className:"px-4 pb-4 border-t border-cream-100",children:[b.status==="eliminated"&&b.episodes&&n.jsx("div",{className:"py-2 border-b border-cream-100",children:n.jsxs("p",{className:"text-red-600 text-sm",children:["Eliminated: Episode ",b.episodes.number,b.placement&&`  ${b.placement}${Yie(b.placement)} place`]})}),b.status==="winner"&&n.jsx("div",{className:"py-2 border-b border-amber-100",children:n.jsx("p",{className:"text-amber-600 text-sm font-medium",children:"Sole Survivor"})}),n.jsxs("div",{className:"pt-3",children:[n.jsx("h4",{className:"text-sm font-semibold text-neutral-700 mb-2",children:"Episode Scores"}),_!=null&&_.byEpisode&&Object.keys(_.byEpisode).length>0?n.jsx("div",{className:"grid grid-cols-4 gap-2",children:Object.entries(_.byEpisode).sort(([S],[j])=>Number(S)-Number(j)).map(([S,j])=>n.jsxs("div",{className:"text-center p-2 bg-cream-50 rounded-lg",children:[n.jsxs("p",{className:"text-xs text-neutral-500",children:["Ep ",S]}),n.jsxs("p",{className:`font-bold ${Number(j)>=0?"text-green-600":"text-red-600"}`,children:[Number(j)>=0?"+":"",j]})]},S))}):n.jsx("p",{className:"text-neutral-400 text-sm",children:"No scores yet"})]}),(_==null?void 0:_.total)!==void 0&&n.jsxs("div",{className:"mt-3 pt-3 border-t border-cream-100 flex justify-between items-center",children:[n.jsx("span",{className:"text-sm font-medium text-neutral-600",children:"Total Points"}),n.jsxs("span",{className:`text-xl font-bold ${_.total>=0?"text-green-600":"text-red-600"}`,children:[_.total>=0?"+":"",_.total]})]})]})]},b.id)})}),(x==null?void 0:x.length)===0&&n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-8 border border-cream-200 text-center",children:[n.jsx(Ke,{className:"h-12 w-12 text-neutral-400 mx-auto mb-4"}),n.jsx("p",{className:"text-neutral-500",children:"No castaways found."})]})]})]})}function Yie(e){const t=["th","st","nd","rd"],r=e%100;return t[(r-20)%10]||t[r]||t[0]}function Jie(){const{data:e}=ie({queryKey:["current-user"],queryFn:async()=>{const{data:{user:u}}=await X.auth.getUser();return u}}),{data:t,isLoading:r}=ie({queryKey:["my-payments"],queryFn:async()=>{if(!e)return[];const{data:u,error:d}=await X.from("payments").select("*, leagues(name)").eq("user_id",e.id).order("created_at",{ascending:!1});if(d)throw d;return u||[]},enabled:!!e}),s=u=>new Date(u).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),a=(u,d="usd")=>new Intl.NumberFormat("en-US",{style:"currency",currency:d.toUpperCase()}).format(u),i=u=>{switch(u){case"completed":return n.jsx(xt,{className:"h-5 w-5 text-green-600"});case"refunded":return n.jsx(Tr,{className:"h-5 w-5 text-amber-600"});case"failed":return n.jsx(Tr,{className:"h-5 w-5 text-red-600"});default:return n.jsx(Nt,{className:"h-5 w-5 text-neutral-400"})}},o=u=>{switch(u){case"completed":return"Completed";case"refunded":return"Refunded";case"failed":return"Failed";default:return"Pending"}},l=(t==null?void 0:t.filter(u=>u.status==="completed").reduce((u,d)=>u+(d.amount||0),0))||0;return r?n.jsxs(n.Fragment,{children:[n.jsx(_e,{}),n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center",children:n.jsx(be,{className:"h-8 w-8 text-burgundy-500 animate-spin"})})]}):n.jsxs(n.Fragment,{children:[n.jsx(_e,{}),n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 p-4 pb-24",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx(se,{to:"/profile",className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:n.jsx(ht,{className:"h-5 w-5 text-neutral-600"})}),n.jsxs("div",{children:[n.jsxs("h1",{className:"text-2xl font-display font-bold text-neutral-800 flex items-center gap-2",children:[n.jsx(hp,{className:"h-6 w-6 text-burgundy-500"}),"Payment History"]}),n.jsx("p",{className:"text-neutral-500",children:"Your league payments"})]})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200 mb-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-neutral-500 text-sm",children:"Total Spent"}),n.jsx("p",{className:"text-3xl font-bold text-neutral-800",children:a(l)})]}),n.jsx("div",{className:"w-12 h-12 bg-burgundy-100 rounded-full flex items-center justify-center",children:n.jsx(Zo,{className:"h-6 w-6 text-burgundy-500"})})]}),n.jsxs("p",{className:"text-neutral-500 text-sm mt-2",children:[(t==null?void 0:t.length)||0," transaction",(t==null?void 0:t.length)!==1?"s":""]})]}),n.jsxs("div",{className:"space-y-3",children:[t==null?void 0:t.map(u=>{var d;return n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-4 border border-cream-200",children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-neutral-800 font-medium",children:(d=u.leagues)==null?void 0:d.name}),n.jsx("p",{className:"text-neutral-500 text-sm",children:"League Entry Fee"})]}),n.jsx("div",{className:"text-right",children:n.jsxs("p",{className:`font-bold ${u.status==="refunded"?"text-amber-600":"text-neutral-800"}`,children:[u.status==="refunded"?"-":"",a(u.amount,u.currency)]})})]}),n.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-cream-200",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[i(u.status),n.jsx("span",{className:`text-sm ${u.status==="completed"?"text-green-600":u.status==="refunded"?"text-amber-600":u.status==="failed"?"text-red-600":"text-neutral-500"}`,children:o(u.status)})]}),n.jsx("p",{className:"text-neutral-400 text-sm",children:s(u.created_at)})]}),u.status==="refunded"&&u.refunded_at&&n.jsxs("p",{className:"text-amber-600 text-xs mt-2",children:["Refunded on ",s(u.refunded_at)]})]},u.id)}),(t==null?void 0:t.length)===0&&n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-8 border border-cream-200 text-center",children:[n.jsx(hp,{className:"h-12 w-12 text-neutral-400 mx-auto mb-4"}),n.jsx("h3",{className:"text-neutral-800 font-medium mb-2",children:"No Payments Yet"}),n.jsx("p",{className:"text-neutral-500 text-sm",children:"Join a paid league to see your payment history here."})]})]}),n.jsx("div",{className:"mt-6 p-4 bg-cream-50 rounded-2xl border border-cream-200",children:n.jsxs("p",{className:"text-neutral-600 text-sm",children:[n.jsx("strong",{className:"text-neutral-800",children:"Questions about a payment?"})," Contact us at"," ",n.jsx("a",{href:"mailto:support@realitygamesfantasyleague.com",className:"text-burgundy-500",children:"support@realitygamesfantasyleague.com"})]})})]})]})}function Xie(){var u,d,p,f,m,x,y,g,b,_,w,S;const{code:e}=Wn(),[t,r]=$.useState(!1),{data:s,isLoading:a,error:i}=ie({queryKey:["public-league",e],queryFn:async()=>{if(!e)throw new Error("No league code");const{data:j,error:N}=await X.from("leagues").select("*, seasons(*)").eq("code",e).eq("is_public",!0).single();if(N)throw N;return j},enabled:!!e}),{data:o}=ie({queryKey:["public-league-members",s==null?void 0:s.id],queryFn:async()=>{if(!(s!=null&&s.id))throw new Error("No league ID");const{data:j,error:N}=await X.from("league_members").select("*, users(display_name, avatar_url)").eq("league_id",s.id).order("total_points",{ascending:!1});if(N)throw N;return j||[]},enabled:!!(s!=null&&s.id)}),l=()=>{navigator.clipboard.writeText(window.location.href),r(!0),setTimeout(()=>r(!1),2e3)};return a?n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center",children:n.jsx(be,{className:"h-8 w-8 text-burgundy-500 animate-spin"})}):i||!s?n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center p-4",children:n.jsxs("div",{className:"text-center",children:[n.jsx(ot,{className:"h-16 w-16 text-neutral-400 mx-auto mb-4"}),n.jsx("h1",{className:"text-2xl font-display font-bold text-neutral-800 mb-2",children:"Leaderboard Not Found"}),n.jsx("p",{className:"text-neutral-500 mb-6",children:"This league doesn't exist or isn't public."}),n.jsx(se,{to:"/",className:"btn btn-primary inline-block",children:"Go Home"})]})}):n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200",children:[n.jsx("div",{className:"bg-white/80 backdrop-blur-sm border-b border-cream-200 sticky top-0 z-10",children:n.jsx("div",{className:"max-w-2xl mx-auto px-4 py-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-xl font-display font-bold text-neutral-800",children:s.name}),n.jsxs("p",{className:"text-neutral-500 text-sm",children:["Season ",(u=s.seasons)==null?void 0:u.number,"  ",(o==null?void 0:o.length)||0," players"]})]}),n.jsxs("button",{onClick:l,className:"flex items-center gap-2 px-3 py-2 bg-burgundy-100 hover:bg-burgundy-200 text-burgundy-600 rounded-xl transition-colors",children:[n.jsx(mx,{className:"h-4 w-4"}),t?"Copied!":"Share"]})]})})}),n.jsxs("div",{className:"max-w-2xl mx-auto p-4",children:[o&&o.length>=3&&n.jsxs("div",{className:"flex items-end justify-center gap-2 mb-8 pt-8",children:[n.jsxs("div",{className:"flex flex-col items-center",children:[n.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-full flex items-center justify-center mb-2 border border-gray-300",children:n.jsx("span",{className:"text-2xl",children:""})}),n.jsx("p",{className:"text-neutral-800 font-medium text-sm truncate max-w-20",children:(p=(d=o[1])==null?void 0:d.users)==null?void 0:p.display_name}),n.jsxs("p",{className:"text-neutral-500 text-xs",children:[((f=o[1])==null?void 0:f.total_points)||0," pts"]}),n.jsx("div",{className:"w-20 h-20 bg-gray-200 rounded-t-xl mt-2"})]}),n.jsxs("div",{className:"flex flex-col items-center -mt-8",children:[n.jsx(er,{className:"h-8 w-8 text-burgundy-500 mb-1"}),n.jsx("div",{className:"w-20 h-20 bg-burgundy-100 rounded-full flex items-center justify-center mb-2 border-2 border-burgundy-500",children:n.jsx("span",{className:"text-3xl",children:""})}),n.jsx("p",{className:"text-neutral-800 font-bold text-sm truncate max-w-24",children:(x=(m=o[0])==null?void 0:m.users)==null?void 0:x.display_name}),n.jsxs("p",{className:"text-burgundy-500 text-xs font-medium",children:[((y=o[0])==null?void 0:y.total_points)||0," pts"]}),n.jsx("div",{className:"w-24 h-28 bg-burgundy-100 rounded-t-xl mt-2"})]}),n.jsxs("div",{className:"flex flex-col items-center",children:[n.jsx("div",{className:"w-16 h-16 bg-amber-100 rounded-full flex items-center justify-center mb-2 border border-amber-300",children:n.jsx("span",{className:"text-2xl",children:""})}),n.jsx("p",{className:"text-neutral-800 font-medium text-sm truncate max-w-20",children:(b=(g=o[2])==null?void 0:g.users)==null?void 0:b.display_name}),n.jsxs("p",{className:"text-neutral-500 text-xs",children:[((_=o[2])==null?void 0:_.total_points)||0," pts"]}),n.jsx("div",{className:"w-20 h-16 bg-amber-100 rounded-t-xl mt-2"})]})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200",children:[n.jsx("div",{className:"px-4 py-3 border-b border-cream-200",children:n.jsxs("h2",{className:"text-lg font-display font-bold text-neutral-800 flex items-center gap-2",children:[n.jsx(ot,{className:"h-5 w-5 text-burgundy-500"}),"Full Standings"]})}),n.jsx("div",{className:"divide-y divide-cream-100",children:o==null?void 0:o.map((j,N)=>{var C,E;return n.jsxs("div",{className:`flex items-center gap-3 px-4 py-3 ${N<3?"bg-burgundy-50":""}`,children:[n.jsx("div",{className:"w-8 h-8 flex items-center justify-center",children:N===0?n.jsx(er,{className:"h-5 w-5 text-burgundy-500"}):n.jsx("span",{className:`font-bold ${N<3?"text-burgundy-500":"text-neutral-400"}`,children:N+1})}),(C=j.users)!=null&&C.avatar_url?n.jsx("img",{src:j.users.avatar_url,alt:"",className:"w-8 h-8 rounded-full object-cover"}):n.jsx("div",{className:"w-8 h-8 bg-cream-100 rounded-full flex items-center justify-center border border-cream-200",children:n.jsx(Ke,{className:"h-4 w-4 text-neutral-400"})}),n.jsx("div",{className:"flex-1 min-w-0",children:n.jsx("p",{className:"text-neutral-800 font-medium truncate",children:(E=j.users)==null?void 0:E.display_name})}),n.jsx("p",{className:`font-bold ${N===0?"text-burgundy-500":"text-neutral-800"}`,children:j.total_points||0})]},j.id)})})]}),n.jsxs("div",{className:"mt-6 bg-burgundy-50 border border-burgundy-200 rounded-2xl p-6 text-center",children:[n.jsx("h3",{className:"text-neutral-800 font-display font-bold mb-2",children:"Join the Competition"}),n.jsx("p",{className:"text-neutral-600 text-sm mb-4",children:"Create your own league and compete with friends!"}),n.jsx(se,{to:"/signup",className:"btn btn-primary inline-block",children:"Sign Up Free"})]}),n.jsxs("div",{className:"mt-8 text-center text-neutral-500 text-sm pb-8",children:[n.jsx("p",{children:"Reality Games Fantasy League"}),n.jsxs("p",{children:["Season ",(w=s.seasons)==null?void 0:w.number,": ",(S=s.seasons)==null?void 0:S.name]})]})]})]})}function Zie(){const{user:e}=Et(),t=at(),[r,s]=$.useState(""),[a,i]=$.useState(!0),o=$.useRef(null),l=$.useRef(null),{data:u}=ie({queryKey:["global-league"],queryFn:async()=>{const{data:b,error:_}=await X.from("leagues").select("id").eq("is_global",!0).single();if(_)throw _;return b}}),d=u==null?void 0:u.id,{data:p,isLoading:f}=ie({queryKey:["global-chat-messages",d],queryFn:async()=>{if(!d)return[];const{data:b,error:_}=await X.from("league_messages").select(`
          id,
          user_id,
          content,
          created_at,
          user:users (
            display_name,
            avatar_url
          )
        `).eq("league_id",d).order("created_at",{ascending:!1}).limit(50);if(_)throw _;return b.reverse()},enabled:!!d,refetchInterval:1e4}),m=ke({mutationFn:async b=>{if(!d)throw new Error("No global league found");const{error:_}=await X.from("league_messages").insert({league_id:d,user_id:e.id,content:b});if(_)throw _},onSuccess:()=>{var b;s(""),t.invalidateQueries({queryKey:["global-chat-messages",d]}),(b=l.current)==null||b.focus()}});$.useEffect(()=>{if(!d)return;const b=X.channel(`global-chat-${d}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"league_messages",filter:`league_id=eq.${d}`},()=>{t.invalidateQueries({queryKey:["global-chat-messages",d]})}).subscribe();return()=>{X.removeChannel(b)}},[d,t]),$.useEffect(()=>{var b;a&&((b=o.current)==null||b.scrollIntoView({behavior:"smooth"}))},[p,a]);const x=b=>{b.preventDefault(),r.trim()&&!m.isPending&&e&&m.mutate(r.trim())},y=b=>new Date(b).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),g=b=>{if(!b)return"Unknown";const _=b.trim().split(/\s+/);if(_.length===1)return _[0];const w=_[0],S=_[_.length-1].charAt(0).toUpperCase();return`${w} ${S}.`};return d?n.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 overflow-hidden",children:[n.jsxs("button",{onClick:()=>i(!a),className:"w-full px-5 py-4 border-b border-cream-200 bg-cream-50 flex items-center justify-between hover:bg-cream-100 transition-colors",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Id,{className:"h-5 w-5 text-burgundy-500"}),n.jsx("h3",{className:"font-semibold text-neutral-800",children:"Global Chat"}),n.jsxs("span",{className:"text-sm text-neutral-400",children:[(p==null?void 0:p.length)||0," messages"]})]}),a?n.jsx(fs,{className:"h-5 w-5 text-neutral-400"}):n.jsx(en,{className:"h-5 w-5 text-neutral-400"})]}),a&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"h-64 overflow-y-auto p-4 space-y-3 bg-cream-50/50",children:[f?n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsx(be,{className:"h-6 w-6 text-burgundy-500 animate-spin"})}):(p==null?void 0:p.length)===0?n.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[n.jsx(Id,{className:"h-10 w-10 text-neutral-300 mb-2"}),n.jsx("p",{className:"text-neutral-500 text-sm",children:"No messages yet"}),n.jsx("p",{className:"text-xs text-neutral-400",children:"Be the first to say something!"})]}):p==null?void 0:p.map(b=>{var w,S,j,N;const _=b.user_id===(e==null?void 0:e.id);return n.jsxs("div",{className:`flex gap-2 ${_?"flex-row-reverse":""}`,children:[n.jsx("div",{className:`w-7 h-7 rounded-full flex-shrink-0 flex items-center justify-center text-white text-xs font-semibold ${_?"bg-burgundy-500":"bg-neutral-400"}`,children:((j=(S=(w=b.user)==null?void 0:w.display_name)==null?void 0:S.charAt(0))==null?void 0:j.toUpperCase())||"?"}),n.jsxs("div",{className:`max-w-[75%] ${_?"text-right":""}`,children:[!_&&n.jsx("p",{className:"text-xs text-neutral-500 mb-0.5 px-1",children:g((N=b.user)==null?void 0:N.display_name)}),n.jsx("div",{className:`inline-block px-3 py-1.5 rounded-2xl text-sm ${_?"bg-burgundy-500 text-white rounded-br-md":"bg-white text-neutral-800 rounded-bl-md border border-cream-200"}`,children:b.content}),n.jsx("p",{className:"text-xs text-neutral-400 mt-0.5 px-1",children:y(b.created_at)})]})]},b.id)}),n.jsx("div",{ref:o})]}),e?n.jsx("form",{onSubmit:x,className:"p-3 border-t border-cream-200 bg-white",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{ref:l,type:"text",value:r,onChange:b=>s(b.target.value),placeholder:"Say something...",className:"flex-1 px-3 py-2 text-sm rounded-full border border-cream-300 bg-cream-50 focus:outline-none focus:ring-2 focus:ring-burgundy-500 focus:border-transparent",disabled:m.isPending}),n.jsx("button",{type:"submit",disabled:!r.trim()||m.isPending,className:"w-9 h-9 rounded-full bg-burgundy-500 text-white flex items-center justify-center hover:bg-burgundy-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:m.isPending?n.jsx(be,{className:"h-4 w-4 animate-spin"}):n.jsx(Jn,{className:"h-4 w-4"})})]})}):n.jsx("div",{className:"p-3 border-t border-cream-200 bg-cream-50 text-center",children:n.jsx("p",{className:"text-sm text-neutral-500",children:"Sign in to join the conversation"})})]})]}):null}function n5({lit:e,size:t="md",className:r=""}){const s={sm:"w-5 h-5",md:"w-6 h-6",lg:"w-8 h-8"},a=e?"#F97316":"#9CA3AF",i=e?"#FCD34D":"#D1D5DB",o=e?"#92400E":"#6B7280";return n.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:`${s[t]} ${r}`,children:[n.jsx("rect",{x:"10.5",y:"10",width:"3",height:"12",rx:"1",fill:o}),n.jsx("rect",{x:"10.5",y:"20",width:"3",height:"2",rx:"0.5",fill:o,opacity:"0.7"}),n.jsx("path",{d:"M8 10 L16 10 L14 12 L10 12 Z",fill:o}),e&&n.jsxs(n.Fragment,{children:[n.jsx("ellipse",{cx:"12",cy:"5",rx:"5",ry:"4",fill:i,opacity:"0.3"}),n.jsx("path",{d:"M12 1 C12 1 8 4 8 7 C8 9.5 9.5 10 12 10 C14.5 10 16 9.5 16 7 C16 4 12 1 12 1 Z",fill:a}),n.jsx("path",{d:"M12 3 C12 3 10 5 10 7 C10 8.5 10.8 9 12 9 C13.2 9 14 8.5 14 7 C14 5 12 3 12 3 Z",fill:i}),n.jsx("path",{d:"M12 2 C12 2 11 4 11 5.5 C11 6.5 11.5 7 12 7 C12.5 7 13 6.5 13 5.5 C13 4 12 2 12 2 Z",fill:"#FEF3C7"})]}),!e&&n.jsxs(n.Fragment,{children:[n.jsx("path",{d:"M10 8 Q9 6 10 4",stroke:"#9CA3AF",strokeWidth:"0.5",fill:"none",opacity:"0.5"}),n.jsx("path",{d:"M12 7 Q13 5 12 3",stroke:"#9CA3AF",strokeWidth:"0.5",fill:"none",opacity:"0.4"}),n.jsx("path",{d:"M14 8 Q15 6 14 4",stroke:"#9CA3AF",strokeWidth:"0.5",fill:"none",opacity:"0.3"}),n.jsx("ellipse",{cx:"12",cy:"9",rx:"3",ry:"1.5",fill:"#4B5563"})]})]})}const Jf=50;function eoe(){const{user:e}=Et(),{getCopy:t}=Kt(),[r,s]=$.useState(0),{data:a,isLoading:i,isFetching:o}=ie({queryKey:["global-leaderboard",r],queryFn:async()=>{const y=await fetch(`/api/leagues/global-leaderboard?limit=${Jf}&offset=${r}`);if(!y.ok)throw new Error("Failed to fetch leaderboard");return y.json()},placeholderData:y=>y}),l=a==null?void 0:a.leaderboard,u=a==null?void 0:a.activeSeason,d=a==null?void 0:a.summary,p=a==null?void 0:a.pagination,f=({lit:y,size:g="normal"})=>{const b=g==="large"?"lg":"md";return n.jsx(n5,{lit:y,size:b})},m=y=>y===1?{bg:"bg-gradient-to-r from-yellow-100 to-amber-50",border:"border-yellow-300",text:"text-yellow-700",icon:n.jsx(Er,{className:"h-6 w-6 text-yellow-500"})}:y===2?{bg:"bg-gradient-to-r from-gray-100 to-slate-50",border:"border-gray-300",text:"text-gray-600",icon:n.jsx(Er,{className:"h-6 w-6 text-gray-400"})}:y===3?{bg:"bg-gradient-to-r from-orange-100 to-amber-50",border:"border-orange-300",text:"text-orange-700",icon:n.jsx(Er,{className:"h-6 w-6 text-orange-400"})}:{bg:"bg-white",border:"border-cream-200",text:"text-neutral-600",icon:null},x=u?u.number===50?"Survivor Season 50: In the Hands of the Fans":`Season ${u.number}: ${u.name}`:t("leaderboard.header.title","Global Leaderboard");return n.jsx(n.Fragment,{children:n.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8 w-full",children:[n.jsxs("div",{className:"mb-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(ot,{className:"h-8 w-8 text-burgundy-500"}),u?n.jsx("h1",{className:"text-3xl font-display font-bold text-neutral-800",children:x}):n.jsx(ne,{copyKey:"leaderboard.header.title",as:"h1",className:"text-3xl font-display font-bold text-neutral-800",children:x})]}),n.jsx(ne,{copyKey:"leaderboard.header.subtitle",as:"p",className:"text-neutral-500",children:t("leaderboard.header.subtitle","See where you rank among all players")})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-2 sm:gap-4 mb-8",children:[n.jsxs("div",{className:"bg-white rounded-xl sm:rounded-2xl shadow-card p-3 sm:p-4 border border-cream-200 text-center",children:[n.jsx(Ke,{className:"h-5 w-5 sm:h-6 sm:w-6 text-burgundy-500 mx-auto mb-1 sm:mb-2"}),n.jsx("p",{className:"text-lg sm:text-2xl font-bold text-neutral-800",children:(d==null?void 0:d.totalPlayers)||0}),n.jsx("p",{className:"text-neutral-500 text-xs sm:text-sm",children:"Players"})]}),n.jsxs("div",{className:"bg-white rounded-xl sm:rounded-2xl shadow-card p-3 sm:p-4 border border-cream-200 text-center",children:[n.jsx(fr,{className:"h-5 w-5 sm:h-6 sm:w-6 text-green-500 mx-auto mb-1 sm:mb-2"}),n.jsx("p",{className:"text-lg sm:text-2xl font-bold text-neutral-800",children:(d==null?void 0:d.topScore)||0}),n.jsx("p",{className:"text-neutral-500 text-xs sm:text-sm",children:"Top Score"})]}),n.jsxs("div",{className:"bg-white rounded-xl sm:rounded-2xl shadow-card p-3 sm:p-4 border border-cream-200 text-center",children:[n.jsx("div",{className:"flex justify-center mb-1 sm:mb-2",children:n.jsx(n5,{lit:!0,size:"lg"})}),n.jsx("p",{className:"text-lg sm:text-2xl font-bold text-neutral-800",children:(d==null?void 0:d.activeTorches)||0}),n.jsx("p",{className:"text-neutral-500 text-xs sm:text-sm",children:"Torches Lit"})]})]}),r===0&&l&&l.length>=3&&n.jsxs("div",{className:"mb-8",children:[n.jsx("h2",{className:"text-lg font-semibold text-neutral-700 mb-4",children:"Top Players"}),n.jsxs("div",{className:"hidden sm:grid grid-cols-3 gap-4",children:[n.jsxs("div",{className:"bg-gradient-to-b from-gray-100 to-gray-50 rounded-2xl p-6 border-2 border-gray-200 text-center mt-8",children:[n.jsx("div",{className:"flex justify-center mb-3",children:n.jsx(f,{lit:!l[1].hasEliminatedCastaway,size:"large"})}),n.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full mx-auto mb-2 flex items-center justify-center",children:n.jsx("span",{className:"text-gray-600 font-bold text-lg",children:"2"})}),n.jsx("p",{className:"font-semibold text-neutral-800 truncate",children:l[1].displayName}),n.jsx("p",{className:"text-2xl font-display text-gray-600 mt-1",children:l[1].weightedScore}),n.jsxs("p",{className:"text-xs text-neutral-400",children:[l[1].leagueCount," ",l[1].leagueCount===1?"league":"leagues"," ",l[1].confidenceIndicator]})]}),n.jsxs("div",{className:"bg-gradient-to-b from-yellow-100 to-amber-50 rounded-2xl p-6 border-2 border-yellow-300 text-center shadow-elevated",children:[n.jsx("div",{className:"flex justify-center mb-3",children:n.jsx(f,{lit:!l[0].hasEliminatedCastaway,size:"large"})}),n.jsx("div",{className:"w-14 h-14 bg-yellow-300 rounded-full mx-auto mb-2 flex items-center justify-center",children:n.jsx(ot,{className:"h-7 w-7 text-yellow-700"})}),n.jsx("p",{className:"font-bold text-neutral-800 truncate",children:l[0].displayName}),n.jsx("p",{className:"text-3xl font-display text-yellow-700 mt-1",children:l[0].weightedScore}),n.jsxs("p",{className:"text-xs text-neutral-500",children:[l[0].leagueCount," ",l[0].leagueCount===1?"league":"leagues"," ",l[0].confidenceIndicator]})]}),n.jsxs("div",{className:"bg-gradient-to-b from-orange-100 to-amber-50 rounded-2xl p-6 border-2 border-orange-200 text-center mt-8",children:[n.jsx("div",{className:"flex justify-center mb-3",children:n.jsx(f,{lit:!l[2].hasEliminatedCastaway,size:"large"})}),n.jsx("div",{className:"w-12 h-12 bg-orange-200 rounded-full mx-auto mb-2 flex items-center justify-center",children:n.jsx("span",{className:"text-orange-600 font-bold text-lg",children:"3"})}),n.jsx("p",{className:"font-semibold text-neutral-800 truncate",children:l[2].displayName}),n.jsx("p",{className:"text-2xl font-display text-orange-600 mt-1",children:l[2].weightedScore}),n.jsxs("p",{className:"text-xs text-neutral-400",children:[l[2].leagueCount," ",l[2].leagueCount===1?"league":"leagues"," ",l[2].confidenceIndicator]})]})]}),n.jsx("div",{className:"sm:hidden space-y-2",children:[l[0],l[1],l[2]].map((y,g)=>{const b=g===0?1:g===1?2:3,_=b===1?"bg-gradient-to-r from-yellow-100 to-amber-50 border-yellow-300":b===2?"bg-gradient-to-r from-gray-100 to-gray-50 border-gray-200":"bg-gradient-to-r from-orange-100 to-amber-50 border-orange-200",w=b===1?"text-yellow-700":b===2?"text-gray-600":"text-orange-600";return n.jsxs("div",{className:`${_} rounded-xl p-3 border-2 flex items-center gap-3`,children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${b===1?"bg-yellow-300":b===2?"bg-gray-200":"bg-orange-200"}`,children:b===1?n.jsx(ot,{className:"h-4 w-4 text-yellow-700"}):n.jsx("span",{className:`font-bold text-sm ${w}`,children:b})}),n.jsx(f,{lit:!y.hasEliminatedCastaway})]}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"font-semibold text-neutral-800 truncate text-sm",children:y.displayName}),n.jsxs("p",{className:"text-xs text-neutral-400",children:[y.leagueCount," ",y.leagueCount===1?"league":"leagues"]})]}),n.jsx("p",{className:`text-xl font-display ${w}`,children:y.weightedScore})]},y.userId)})})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated overflow-hidden border border-cream-200",children:[n.jsx("div",{className:"p-5 border-b border-cream-100",children:n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[n.jsx("div",{children:n.jsx("h2",{className:"font-semibold text-neutral-800",children:"All Players"})}),n.jsxs("div",{className:"flex items-center gap-4 text-sm text-neutral-500 bg-cream-50 px-3 py-2 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx(f,{lit:!0}),n.jsx("span",{children:"Active"})]}),n.jsx("div",{className:"w-px h-4 bg-neutral-300"}),n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx(f,{lit:!1}),n.jsx("span",{children:"Eliminated"})]})]})]})}),n.jsx("div",{className:"p-5 border-b border-cream-100",children:n.jsx(Zie,{})}),i?n.jsxs("div",{className:"p-12 text-center",children:[n.jsx("div",{className:"w-8 h-8 mx-auto border-2 border-burgundy-500 border-t-transparent rounded-full animate-spin"}),n.jsx("p",{className:"text-neutral-500 mt-4",children:"Loading rankings..."})]}):(l==null?void 0:l.length)===0?n.jsxs("div",{className:"p-12 text-center",children:[n.jsx(ot,{className:"h-12 w-12 text-neutral-300 mx-auto mb-4"}),n.jsx("p",{className:"text-neutral-500",children:"No players yet. Join a league to get started!"}),n.jsx(se,{to:"/leagues",className:"btn btn-primary mt-4 inline-block",children:"Browse Leagues"})]}):n.jsx("div",{className:"divide-y divide-cream-100",children:l==null?void 0:l.map((y,g)=>{var S;const b=r+g+1,_=m(b),w=y.userId===(e==null?void 0:e.id);return n.jsxs("div",{className:`flex items-center gap-4 p-4 transition-colors ${w?"bg-burgundy-50 border-l-4 border-burgundy-500":b<=3?_.bg:"hover:bg-cream-50"}`,children:[n.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold ${b<=3?"":"bg-cream-100"} ${_.text}`,children:_.icon||b}),n.jsx("div",{className:"flex-shrink-0",children:n.jsx(f,{lit:!y.hasEliminatedCastaway})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("p",{className:`font-semibold truncate ${w?"text-burgundy-700":"text-neutral-800"}`,children:[y.displayName,w&&n.jsx("span",{className:"ml-2 text-xs text-burgundy-500 font-normal",children:"(You)"})]}),n.jsxs("p",{className:"text-sm text-neutral-400",children:[y.leagueCount," ",y.leagueCount===1?"league":"leagues"," "," ",y.totalPoints," total pts "," ",n.jsx("span",{title:`Confidence: ${Math.round((y.confidence||.5)*100)}%`,children:y.confidenceIndicator||""})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:`text-2xl font-display ${b<=3?_.text:"text-neutral-800"}`,children:y.weightedScore}),n.jsxs("p",{className:"text-xs text-neutral-400",children:["avg: ",((S=y.averagePoints)==null?void 0:S.toFixed(1))||"0"]})]})]},y.userId)})})]}),p&&n.jsxs("div",{className:"mt-6 flex flex-col items-center gap-4",children:[n.jsxs("p",{className:"text-sm text-neutral-500",children:["Showing ",r+1,"-",Math.min(r+Jf,p.total)," of"," ",p.total," players"]}),n.jsxs("div",{className:"flex gap-3",children:[r>0&&n.jsx("button",{onClick:()=>s(Math.max(0,r-Jf)),disabled:o,className:"btn btn-secondary",children:"Previous"}),p.hasMore&&n.jsx("button",{onClick:()=>s(r+Jf),disabled:o,className:"btn btn-primary flex items-center gap-2",children:o?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Loading..."]}):n.jsxs(n.Fragment,{children:["Load More",n.jsx(en,{className:"h-4 w-4"})]})})]})]}),e&&l&&l.length>0&&(()=>{const y=l.findIndex(_=>_.userId===e.id);if(y===-1)return null;const g=r+y+1;if(g<=10)return null;const b=l[y];return n.jsx("div",{className:"mt-6 bg-gradient-to-r from-burgundy-500 to-burgundy-600 rounded-2xl p-6 text-white shadow-elevated",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center",children:n.jsxs("span",{className:"font-bold text-xl",children:["#",g]})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-burgundy-100 text-sm",children:"Your Position"}),n.jsx("p",{className:"text-xl font-semibold",children:b.displayName})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-3xl font-display",children:b.weightedScore}),n.jsx("p",{className:"text-burgundy-100 text-sm",children:"score"})]})]})})})()]})})}const r5=["from-burgundy-500 to-red-600","from-blue-500 to-indigo-600","from-green-500 to-emerald-600","from-purple-500 to-violet-600","from-orange-500 to-amber-600","from-pink-500 to-rose-500","from-teal-500 to-cyan-600"];function s5(e){const t=e.split("").reduce((r,s)=>r+s.charCodeAt(0),0);return r5[t%r5.length]}function toe(){const e=$s(),{user:t}=Et(),{getCopy:r}=Kt(),[s,a]=$.useState(""),[i,o]=$.useState(""),[l,u]=$.useState(!0),{data:d,isLoading:p}=ie({queryKey:["all-leagues"],queryFn:async()=>{const{data:j,error:N}=await X.from("leagues").select(`
          *,
          commissioner:users!leagues_commissioner_id_fkey (display_name)
        `).eq("is_global",!1).order("created_at",{ascending:!1});if(N)throw N;return j||[]}}),{data:f}=ie({queryKey:["league-member-counts"],queryFn:async()=>{const{data:j,error:N}=await X.from("league_members").select("league_id");if(N)throw N;const C={};return j==null||j.forEach(E=>{C[E.league_id]=(C[E.league_id]||0)+1}),C}}),{data:m}=ie({queryKey:["my-memberships",t==null?void 0:t.id],queryFn:async()=>{if(!(t!=null&&t.id))return[];const{data:j,error:N}=await X.from("league_members").select("league_id").eq("user_id",t.id);if(N)throw N;return(j==null?void 0:j.map(C=>C.league_id))||[]},enabled:!!(t!=null&&t.id)}),{data:x}=ie({queryKey:["active-season"],queryFn:async()=>{const{data:j,error:N}=await X.from("seasons").select("*").eq("is_active",!0).single();if(N&&N.code!=="PGRST116")throw N;return j}}),{data:y}=ie({queryKey:["current-episode",x==null?void 0:x.id],queryFn:async()=>{if(!(x!=null&&x.id))return null;const{data:j,error:N}=await X.from("episodes").select("*").eq("season_id",x.id).eq("is_current",!0).single();if(N&&N.code!=="PGRST116")throw N;return j},enabled:!!(x!=null&&x.id)}),{data:g}=ie({queryKey:["weekly-picks",t==null?void 0:t.id,y==null?void 0:y.id],queryFn:async()=>{if(!(t!=null&&t.id)||!(y!=null&&y.id))return{};const{data:j,error:N}=await X.from("weekly_picks").select("league_id, castaway_id, castaways(name, photo_url)").eq("user_id",t.id).eq("episode_id",y.id);if(N)throw N;const C={};return j==null||j.forEach(E=>{var T,I;C[E.league_id]={castaway_id:E.castaway_id,name:((T=E.castaways)==null?void 0:T.name)||"Unknown",photo_url:(I=E.castaways)==null?void 0:I.photo_url}}),C},enabled:!!(t!=null&&t.id)&&!!(y!=null&&y.id)}),b=(d==null?void 0:d.filter(j=>m==null?void 0:m.includes(j.id)))||[],_=d==null?void 0:d.filter(j=>{const N=m==null?void 0:m.includes(j.id),C=j.commissioner_id===(t==null?void 0:t.id);return N?!1:!!(j.is_public||C)}),w=_==null?void 0:_.filter(j=>{var C,E;return j.name.toLowerCase().includes(s.toLowerCase())||((E=(C=j.commissioner)==null?void 0:C.display_name)==null?void 0:E.toLowerCase().includes(s.toLowerCase()))||j.code.toLowerCase().includes(s.toLowerCase())}),S=()=>{i.trim()&&e(`/join/${i.trim().toUpperCase()}`)};return n.jsx(n.Fragment,{children:n.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8 w-full",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-8",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-3xl font-display font-bold text-neutral-800 flex items-center gap-3",children:[n.jsx("span",{className:"text-3xl",children:""}),n.jsx(ne,{copyKey:"leagues.header.title",as:"span",className:"",children:r("leagues.header.title","Leagues")})]}),n.jsx(ne,{copyKey:"leagues.header.subtitle",as:"p",className:"text-neutral-500 mt-1",children:r("leagues.header.subtitle","Manage your leagues and join new ones")})]}),n.jsx("div",{className:"flex gap-3",children:n.jsxs(se,{to:"/leagues/create",className:"px-4 py-2 bg-burgundy-500 text-white rounded-xl font-semibold hover:bg-burgundy-600 transition shadow-lg flex items-center gap-2",children:[n.jsx(tr,{className:"h-5 w-5"}),n.jsx(ne,{copyKey:"leagues.create_button",as:"span",className:"",children:r("leagues.create_button","Create League")})]})})]}),p?n.jsxs("div",{className:"flex flex-col items-center justify-center py-16",children:[n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx(be,{className:"h-8 w-8 text-burgundy-500 animate-spin"})}),n.jsx("p",{className:"text-neutral-500",children:"Loading leagues..."})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-cream-200 overflow-hidden mb-8",children:[n.jsxs("button",{onClick:()=>u(!l),className:"w-full bg-gradient-to-r from-burgundy-500 to-burgundy-600 px-4 sm:px-6 py-4 flex items-center justify-between text-white",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(er,{className:"h-5 w-5"}),n.jsx("span",{className:"font-semibold text-lg",children:n.jsx(ne,{copyKey:"leagues.my_leagues",as:"span",className:"",children:r("leagues.my_leagues","My Leagues")})}),n.jsx("span",{className:"bg-white/20 px-2 py-0.5 rounded-full text-sm",children:b.length})]}),l?n.jsx(fs,{className:"h-5 w-5"}):n.jsx(en,{className:"h-5 w-5"})]}),l&&n.jsx(n.Fragment,{children:b.length===0?n.jsxs("div",{className:"px-6 py-10 text-center",children:[n.jsx(Ke,{className:"h-12 w-12 text-neutral-300 mx-auto mb-3"}),n.jsx(ne,{copyKey:"leagues.empty.title",as:"p",className:"text-neutral-500 mb-4",children:r("leagues.empty.title","You haven't joined any leagues yet")}),n.jsx(ne,{copyKey:"leagues.empty.subtitle",as:"p",className:"text-sm text-neutral-400",children:r("leagues.empty.subtitle","Join a public league below or use an invite code")})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"bg-cream-50 px-4 sm:px-6 py-3 border-b border-cream-200",children:n.jsxs("div",{className:"grid grid-cols-12 gap-4 text-sm font-semibold text-neutral-600",children:[n.jsx("div",{className:"col-span-3",children:"League"}),n.jsx("div",{className:"col-span-2 text-center",children:"Members"}),n.jsx("div",{className:"col-span-3 text-center",children:"Weekly Pick"}),n.jsx("div",{className:"col-span-2 text-center",children:"Role"}),n.jsx("div",{className:"col-span-2 text-right",children:"Actions"})]})}),n.jsx("div",{className:"divide-y divide-cream-100",children:b.map(j=>{const N=(f==null?void 0:f[j.id])||0,C=j.commissioner_id===(t==null?void 0:t.id),E=s5(j.id),T=g==null?void 0:g[j.id],I=j.status==="active"&&y;return n.jsx("div",{className:"px-4 sm:px-6 py-4 hover:bg-cream-50 transition cursor-pointer group",onClick:()=>e(`/leagues/${j.id}`),children:n.jsxs("div",{className:"grid grid-cols-12 gap-4 items-center",children:[n.jsxs("div",{className:"col-span-3 flex items-center gap-3",children:[n.jsx("div",{className:`w-10 h-10 rounded-xl bg-gradient-to-br ${E} flex items-center justify-center text-white font-bold`,children:j.name.charAt(0).toUpperCase()}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-neutral-800 group-hover:text-burgundy-600",children:j.name}),n.jsx("p",{className:"text-xs text-neutral-400 font-mono",children:j.code})]})]}),n.jsx("div",{className:"col-span-2 text-center",children:n.jsxs("span",{className:"text-neutral-700",children:[N,"/",j.max_players]})}),n.jsx("div",{className:"col-span-3 text-center",children:I?T?n.jsxs("div",{className:"flex items-center justify-center gap-2",children:[n.jsx("img",{src:T.photo_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${T.name}`,alt:T.name,className:"w-6 h-6 rounded-full object-cover"}),n.jsx("span",{className:"text-sm text-neutral-700 font-medium truncate max-w-[80px]",children:T.name.split(" ")[0]}),n.jsx(Ot,{className:"h-4 w-4 text-green-500"})]}):n.jsxs(se,{to:`/leagues/${j.id}/pick`,onClick:A=>A.stopPropagation(),className:"inline-flex items-center gap-1 text-amber-700 bg-amber-100 px-3 py-1.5 rounded-lg text-xs font-semibold hover:bg-amber-200 transition",children:[n.jsx(kn,{className:"h-3 w-3"}),"Make Pick"]}):j.status==="drafting"?n.jsx("span",{className:"text-xs text-amber-600",children:"Draft first"}):n.jsx("span",{className:"text-xs text-neutral-400",children:""})}),n.jsx("div",{className:"col-span-2 text-center",children:C?n.jsxs("span",{className:"inline-flex items-center gap-1 text-amber-700 bg-amber-100 px-2 py-1 rounded-full text-xs font-semibold",children:[n.jsx(er,{className:"h-3 w-3"}),"Creator"]}):n.jsx("span",{className:"inline-flex items-center gap-1 text-blue-700 bg-blue-100 px-2 py-1 rounded-full text-xs font-semibold",children:"Member"})}),n.jsx("div",{className:"col-span-2 text-right",children:n.jsx("div",{className:"flex items-center justify-end gap-2",children:n.jsxs(se,{to:`/leagues/${j.id}`,onClick:A=>A.stopPropagation(),className:"text-burgundy-600 font-semibold text-sm inline-flex items-center gap-1",children:["View ",n.jsx(Hn,{className:"h-4 w-4"})]})})})]})},j.id)})})]})})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-cream-200 overflow-hidden",children:[n.jsxs("div",{className:"bg-cream-50 px-4 sm:px-6 py-4 border-b border-cream-200",children:[n.jsxs("h2",{className:"text-lg font-semibold text-neutral-800 flex items-center gap-2",children:[n.jsx(us,{className:"h-5 w-5 text-teal-600"}),n.jsx(ne,{copyKey:"leagues.join.title",as:"span",className:"",children:r("leagues.join.title","Join a League")})]}),n.jsx(ne,{copyKey:"leagues.join.subtitle",as:"p",className:"text-sm text-neutral-500 mt-1",children:r("leagues.join.subtitle","Browse public leagues or enter an invite code")})]}),n.jsx("div",{className:"px-4 sm:px-6 py-4 bg-gradient-to-r from-cream-50 to-amber-50 border-b border-cream-200",children:n.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("h3",{className:"font-semibold text-neutral-800 flex items-center gap-2",children:[n.jsx(mr,{className:"h-5 w-5 text-burgundy-500"}),n.jsx(ne,{copyKey:"leagues.invite.title",as:"span",className:"",children:r("leagues.invite.title","Have an invite code?")})]}),n.jsx(ne,{copyKey:"leagues.invite.description",as:"p",className:"text-neutral-500 text-sm mt-1",children:r("leagues.invite.description","Enter your 6-character code to join a private league")})]}),n.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[n.jsx("input",{type:"text",value:i,onChange:j=>o(j.target.value.toUpperCase()),placeholder:"ABC123",maxLength:6,className:"input font-mono text-center tracking-widest uppercase w-32"}),n.jsx("button",{onClick:S,disabled:i.length!==6,className:"btn btn-primary disabled:opacity-50",children:"Join"})]})]})}),n.jsx("div",{className:"px-4 sm:px-6 py-4 border-b border-cream-200",children:n.jsxs("div",{className:"relative",children:[n.jsx(Ka,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-neutral-400"}),n.jsx("input",{type:"text",value:s,onChange:j=>a(j.target.value),placeholder:"Search public leagues...",className:"w-full pl-10 pr-4 py-2 rounded-xl border border-cream-200 bg-cream-50 focus:outline-none focus:ring-2 focus:ring-burgundy-500 focus:border-transparent"})]})}),n.jsx("div",{className:"bg-cream-50 px-4 sm:px-6 py-3 border-b border-cream-200",children:n.jsxs("div",{className:"grid grid-cols-12 gap-4 text-sm font-semibold text-neutral-600",children:[n.jsx("div",{className:"col-span-4",children:"League"}),n.jsx("div",{className:"col-span-2 text-center",children:"Members"}),n.jsx("div",{className:"col-span-2 text-center",children:"Type"}),n.jsx("div",{className:"col-span-2 text-center",children:"Donation"}),n.jsx("div",{className:"col-span-2 text-right",children:"Action"})]})}),n.jsxs("div",{className:"divide-y divide-cream-100",children:[w==null?void 0:w.map(j=>{var T;const N=(f==null?void 0:f[j.id])||0,C=N>=j.max_players,E=s5(j.id);return n.jsx("div",{className:"px-4 sm:px-6 py-4 hover:bg-cream-50 transition cursor-pointer group",onClick:()=>e(`/leagues/${j.id}`),children:n.jsxs("div",{className:"grid grid-cols-12 gap-4 items-center",children:[n.jsxs("div",{className:"col-span-4 flex items-center gap-3",children:[n.jsx("div",{className:`w-10 h-10 rounded-xl bg-gradient-to-br ${E} flex items-center justify-center text-white font-bold`,children:j.name.charAt(0).toUpperCase()}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-neutral-800 group-hover:text-burgundy-600",children:j.name}),n.jsx("p",{className:"text-xs text-neutral-500",children:((T=j.commissioner)==null?void 0:T.display_name)||"League Creator"})]})]}),n.jsx("div",{className:"col-span-2 text-center",children:n.jsxs("span",{className:"text-neutral-700",children:[N,"/",j.max_players]})}),n.jsx("div",{className:"col-span-2 text-center",children:j.is_public?n.jsxs("span",{className:"inline-flex items-center gap-1 text-teal-700 bg-teal-50 px-2 py-1 rounded-full text-xs font-semibold border border-teal-200",children:[n.jsx(us,{className:"h-3 w-3"}),"Public"]}):n.jsxs("span",{className:"inline-flex items-center gap-1 text-purple-700 bg-purple-50 px-2 py-1 rounded-full text-xs font-semibold border border-purple-200",children:[n.jsx(mr,{className:"h-3 w-3"}),"Private"]})}),n.jsx("div",{className:"col-span-2 text-center",children:j.require_donation&&j.donation_amount?n.jsxs("span",{className:"text-emerald-700 bg-emerald-50 px-2 py-1 rounded-full text-xs font-bold border border-emerald-200",children:["$",j.donation_amount.toFixed(0)]}):n.jsx("span",{className:"text-neutral-400 text-sm",children:"Free"})}),n.jsx("div",{className:"col-span-2 text-right",children:n.jsx("div",{className:"flex items-center justify-end gap-2",children:C?n.jsx("span",{className:"text-xs text-red-500 font-semibold bg-red-50 px-3 py-1.5 rounded-lg",children:"Full"}):n.jsxs(se,{to:`/join/${j.code}`,onClick:I=>I.stopPropagation(),className:"text-burgundy-600 font-semibold text-sm inline-flex items-center gap-1 bg-burgundy-50 px-3 py-1.5 rounded-lg hover:bg-burgundy-100 transition",children:["Join ",n.jsx(Hn,{className:"h-4 w-4"})]})})})]})},j.id)}),(w==null?void 0:w.length)===0&&n.jsx("div",{className:"px-6 py-10 text-center text-neutral-500",children:s?n.jsx(ne,{copyKey:"leagues.no_results",as:"span",className:"",children:r("leagues.no_results","No leagues match your search")}):n.jsx(ne,{copyKey:"leagues.no_public",as:"span",className:"",children:r("leagues.no_public","No public leagues available to join")})})]})]})]})]})})}function noe(e,t){const[r,s]=$.useState(e);return $.useEffect(()=>{const a=setTimeout(()=>s(e),t);return()=>clearTimeout(a)},[e,t]),r}function roe({search:e,onSearchChange:t,filter:r,onFilterChange:s,sortBy:a,onSortByChange:i}){const[o,l]=$.useState(e),u=$.useRef(!0),d=noe(o,300);$.useEffect(()=>{if(u.current){u.current=!1;return}t(d)},[d,t]),$.useEffect(()=>{l(e)},[e]);const p=$.useCallback(m=>{const x=m.target.value;["all","active","eliminated"].includes(x)&&s(x)},[s]),f=$.useCallback(m=>{const x=m.target.value;["name","points","status"].includes(x)&&i(x)},[i]);return n.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx(Ka,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-neutral-400"}),n.jsx("input",{type:"text",value:o,onChange:m=>l(m.target.value),placeholder:"Search castaways by name, occupation, or hometown...",className:"input pl-10 w-full","aria-label":"Search castaways"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("select",{value:r,onChange:p,className:"input px-3 py-2","aria-label":"Filter by status",children:[n.jsx("option",{value:"all",children:"All Status"}),n.jsx("option",{value:"active",children:"Active Only"}),n.jsx("option",{value:"eliminated",children:"Eliminated"})]}),n.jsxs("select",{value:a,onChange:f,className:"input px-3 py-2","aria-label":"Sort by",children:[n.jsx("option",{value:"name",children:"Sort by Name"}),n.jsx("option",{value:"points",children:"Sort by Points"}),n.jsx("option",{value:"status",children:"Sort by Status"})]})]})]})}function a5({castaway:e,stats:t}){var a;const s=(i=>{switch(i){case"Vatu":return{bg:"bg-purple-500",text:"text-purple-600",light:"bg-purple-100"};case"Kalo":return{bg:"bg-teal-500",text:"text-teal-600",light:"bg-teal-100"};case"Cila":return{bg:"bg-orange-500",text:"text-orange-600",light:"bg-orange-100"};default:return{bg:"bg-neutral-500",text:"text-neutral-600",light:"bg-neutral-100"}}})(e.tribe_original);return n.jsxs(se,{to:`/castaways/${e.id}`,className:`group block bg-white rounded-2xl border-2 overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-200 ${e.status==="eliminated"?"border-neutral-200 opacity-70":e.status==="winner"?"border-amber-300 ring-2 ring-amber-100":"border-cream-200 hover:border-burgundy-200"}`,children:[n.jsxs("div",{className:`aspect-[3/4] relative overflow-hidden ${e.status==="eliminated"?"grayscale":""}`,children:[n.jsx("img",{src:nr(e.name,e.photo_url),alt:e.name,className:"w-full h-full object-cover object-top group-hover:scale-105 transition-transform duration-300",onError:i=>{const o=i.target;e.photo_url&&!o.src.includes("dicebear")&&(o.src=nr(e.name,null))}}),n.jsx("div",{className:"absolute inset-x-0 bottom-0 h-24 bg-gradient-to-t from-black/60 to-transparent"}),e.status==="winner"&&n.jsx("div",{className:"absolute top-3 right-3",children:n.jsxs("span",{className:"flex items-center gap-1 bg-amber-500 text-white text-xs font-bold px-2.5 py-1 rounded-full shadow-lg",children:[n.jsx(ot,{className:"h-3 w-3"}),"WINNER"]})}),e.status==="eliminated"&&n.jsx("div",{className:"absolute top-3 right-3",children:n.jsxs("span",{className:"bg-neutral-700 text-white text-xs font-bold px-2.5 py-1 rounded-full shadow-lg",children:["OUT EP ",((a=e.episodes)==null?void 0:a.number)||"?"]})}),n.jsx("div",{className:"absolute bottom-0 inset-x-0 p-3",children:n.jsx("h3",{className:"font-display font-bold text-white text-lg leading-tight drop-shadow-lg",children:e.name})})]}),n.jsxs("div",{className:"p-4",children:[n.jsxs("div",{className:"space-y-1 mb-3",children:[e.occupation&&n.jsx("p",{className:"text-sm text-neutral-600 font-medium truncate",children:e.occupation}),e.hometown&&n.jsxs("p",{className:"text-xs text-neutral-400 flex items-center gap-1 truncate",children:[n.jsx(hj,{className:"h-3 w-3 flex-shrink-0"}),e.hometown]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:`text-xs font-medium px-2 py-1 rounded-full ${s.light} ${s.text}`,children:e.tribe_original||"Unknown"}),e.status==="active"&&n.jsx("span",{className:"text-xs font-bold text-green-600",children:"Active"})]}),n.jsxs("span",{className:`text-lg font-bold ${e.status==="eliminated"?"text-neutral-400":(t==null?void 0:t.total)>=0?"text-green-600":"text-red-600"}`,children:[(t==null?void 0:t.total)!==void 0?`${t.total>=0?"+":""}${t.total}`:"--"," pts"]})]})]})]})}function soe(){const{getCopy:e}=Kt(),[t,r]=$.useState(""),[s,a]=$.useState("all"),[i,o]=$.useState("name"),[l,u]=$.useState("by-tribe"),{data:d,isLoading:p,error:f}=ie({queryKey:["active-season"],queryFn:async()=>{const{data:C,error:E}=await X.from("seasons").select("*").eq("is_active",!0).maybeSingle();if(E)throw E;return C}}),{data:m,isLoading:x}=ie({queryKey:["season-castaways",d==null?void 0:d.id],queryFn:async()=>{if(!(d!=null&&d.id))return[];const{data:C,error:E}=await X.from("castaways").select("*, episodes:eliminated_episode_id(number)").eq("season_id",d.id).order("tribe_original",{ascending:!0,nullsFirst:!1}).order("name",{ascending:!0});if(E)throw E;return C||[]},enabled:!!(d!=null&&d.id)}),y={Vatu:{name:"Vatu Tribe",color:"#7C3AED",bgColor:"#EDE9FE",borderColor:"#A78BFA"},Kalo:{name:"Kalo Tribe",color:"#0D9488",bgColor:"#CCFBF1",borderColor:"#5EEAD4"},Cila:{name:"Cila Tribe",color:"#EA580C",bgColor:"#FFEDD5",borderColor:"#FB923C"}},g=$.useMemo(()=>{if(!m)return{};const C={};return m.forEach(E=>{const T=E.tribe_original||"Unknown";C[T]||(C[T]=[]),C[T].push(E)}),Object.keys(C).forEach(E=>{C[E].sort((T,I)=>T.name.localeCompare(I.name))}),C},[m]),{data:b}=ie({queryKey:["all-castaway-scores",d==null?void 0:d.id],queryFn:async()=>{if(!(d!=null&&d.id))return[];const{data:C}=await X.from("episodes").select("id").eq("season_id",d.id);if(!(C!=null&&C.length))return[];const E=C.map(A=>A.id),{data:T,error:I}=await X.from("episode_scores").select(`
          castaway_id,
          episode_id,
          points,
          episode:episodes!episode_id(number, title)
        `).in("episode_id",E);if(I)throw I;return T||[]},enabled:!!(d!=null&&d.id)}),_=$.useMemo(()=>(b==null?void 0:b.reduce((C,E)=>{var I;C[E.castaway_id]||(C[E.castaway_id]={total:0,byEpisode:{},episodeCount:0,trend:"neutral"}),C[E.castaway_id].total+=E.points;const T=(I=E.episode)==null?void 0:I.number;return T&&(C[E.castaway_id].byEpisode[T]||(C[E.castaway_id].byEpisode[T]=0,C[E.castaway_id].episodeCount++),C[E.castaway_id].byEpisode[T]+=E.points),C},{}))||{},[b]);Object.keys(_).forEach(C=>{const E=_[C],T=Object.entries(E.byEpisode).sort(([I],[A])=>Number(A)-Number(I));if(T.length>=2){const[,I]=T[0],[,A]=T[1];I>A?E.trend="up":I<A&&(E.trend="down")}});const w=$.useMemo(()=>Object.values(g).some(C=>C.some(E=>{var A,R;const T=E.name.toLowerCase().includes(t.toLowerCase())||((A=E.occupation)==null?void 0:A.toLowerCase().includes(t.toLowerCase()))||((R=E.hometown)==null?void 0:R.toLowerCase().includes(t.toLowerCase())),I=s==="all"||s==="active"&&E.status==="active"||s==="eliminated"&&E.status==="eliminated";return T&&I})),[g,t,s]),S=(m==null?void 0:m.filter(C=>C.status==="active").length)||0,j=(m==null?void 0:m.filter(C=>C.status==="eliminated").length)||0,N=$.useMemo(()=>m?m.filter(C=>{var I,A;const E=C.name.toLowerCase().includes(t.toLowerCase())||((I=C.occupation)==null?void 0:I.toLowerCase().includes(t.toLowerCase()))||((A=C.hometown)==null?void 0:A.toLowerCase().includes(t.toLowerCase())),T=s==="all"||s==="active"&&C.status==="active"||s==="eliminated"&&C.status==="eliminated";return E&&T}).sort((C,E)=>{var T,I;if(i==="points")return(((T=_[E.id])==null?void 0:T.total)||0)-(((I=_[C.id])==null?void 0:I.total)||0);if(i==="status"){const A={winner:0,active:1,eliminated:2};return(A[C.status]||3)-(A[E.status]||3)}return C.name.localeCompare(E.name)}):[],[m,_,s,t,i]);return p||x?n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex flex-col",children:[n.jsx(_e,{}),n.jsx("main",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8 flex-1 flex items-center justify-center",children:n.jsx(be,{className:"h-8 w-8 text-burgundy-500 animate-spin"})}),n.jsx(tn,{})]}):f||!d?n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex flex-col",children:[n.jsx(_e,{}),n.jsx("main",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8 flex-1 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx(Ke,{className:"h-12 w-12 text-neutral-400 mx-auto mb-4"}),n.jsx("h2",{className:"text-xl font-bold text-neutral-700 mb-2",children:"No Active Season"}),n.jsx("p",{className:"text-neutral-500",children:"Check back when a new season begins!"})]})}),n.jsx(tn,{})]}):n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex flex-col",children:[n.jsx(_e,{}),n.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 flex-1",children:n.jsxs("div",{className:"pb-12",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsxs("div",{className:"inline-flex items-center gap-3 mb-4",children:[n.jsx("span",{className:"text-4xl",children:""}),n.jsx(ne,{copyKey:"castaways.header.title",as:"h1",className:"text-4xl font-display font-bold text-neutral-800",children:e("castaways.header.title",`${(d==null?void 0:d.name)||`Season ${(d==null?void 0:d.number)||""}`} Castaways`)})]}),n.jsx(ne,{copyKey:"castaways.header.subtitle",as:"p",className:"text-neutral-500 text-lg",children:e("castaways.header.subtitle","Meet the contestants competing for the title of Sole Survivor")})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-8 max-w-2xl mx-auto",children:[n.jsxs("div",{className:"bg-white rounded-2xl p-4 text-center shadow-lg border border-cream-200",children:[n.jsx("p",{className:"text-3xl font-bold text-neutral-800",children:(m==null?void 0:m.length)||0}),n.jsx(ne,{copyKey:"castaways.stats.total",as:"p",className:"text-sm text-neutral-500",children:e("castaways.stats.total","Total")})]}),n.jsxs("div",{className:"bg-white rounded-2xl p-4 text-center shadow-lg border border-cream-200",children:[n.jsx("p",{className:"text-3xl font-bold text-green-600",children:S}),n.jsx(ne,{copyKey:"castaways.stats.active",as:"p",className:"text-sm text-neutral-500",children:e("castaways.stats.active","Active")})]}),n.jsxs("div",{className:"bg-white rounded-2xl p-4 text-center shadow-lg border border-cream-200",children:[n.jsx("p",{className:"text-3xl font-bold text-neutral-400",children:j}),n.jsx(ne,{copyKey:"castaways.stats.eliminated",as:"p",className:"text-sm text-neutral-500",children:e("castaways.stats.eliminated","Eliminated")})]})]}),n.jsx(roe,{search:t,onSearchChange:r,filter:s,onFilterChange:a,sortBy:i,onSortByChange:o}),n.jsxs("div",{className:"flex gap-2 mt-4 mb-8",children:[n.jsx("button",{onClick:()=>u("all"),className:`px-4 py-2 rounded-xl text-sm font-medium transition ${l==="all"?"bg-burgundy-500 text-white shadow-card":"bg-cream-100 text-neutral-600 hover:bg-cream-200"}`,children:"All Castaways"}),n.jsx("button",{onClick:()=>u("by-tribe"),className:`px-4 py-2 rounded-xl text-sm font-medium transition ${l==="by-tribe"?"bg-burgundy-500 text-white shadow-card":"bg-cream-100 text-neutral-600 hover:bg-cream-200"}`,children:"By Tribe"})]}),l==="all"?n.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-5",children:[N.map(C=>n.jsx(a5,{castaway:C,stats:_[C.id],isExpanded:!1,onToggleExpand:()=>{}},C.id)),N.length===0&&n.jsx("div",{className:"col-span-full bg-white rounded-2xl shadow-card p-10 text-center text-neutral-500",children:"No castaways match your filters."})]}):n.jsx("div",{className:"space-y-10",children:Object.entries(g).sort(([C],[E])=>{const T={Vatu:1,Kalo:2,Cila:3,Unknown:99};return(T[C]||99)-(T[E]||99)}).map(([C,E])=>{const T=y[C]||{name:C,color:"#6B7280"},A=E.filter(R=>{var B,U;const O=R.name.toLowerCase().includes(t.toLowerCase())||((B=R.occupation)==null?void 0:B.toLowerCase().includes(t.toLowerCase()))||((U=R.hometown)==null?void 0:U.toLowerCase().includes(t.toLowerCase())),M=s==="all"||s==="active"&&R.status==="active"||s==="eliminated"&&R.status==="eliminated";return O&&M}).sort((R,O)=>{var M,B;if(i==="points")return(((M=_[O.id])==null?void 0:M.total)||0)-(((B=_[R.id])==null?void 0:B.total)||0);if(i==="status"){const U={winner:0,active:1,eliminated:2};return(U[R.status]||3)-(U[O.status]||3)}return R.name.localeCompare(O.name)});return A.length===0?null:n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[n.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:T.color}}),n.jsx("h2",{className:"text-2xl font-display font-bold",style:{color:T.color},children:T.name}),n.jsxs("span",{className:"text-neutral-500 text-sm",children:[A.filter(R=>R.status==="active").length," active  ",A.filter(R=>R.status==="eliminated").length," ","eliminated"]})]}),n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-5",children:A.map(R=>n.jsx(a5,{castaway:R,stats:_[R.id],isExpanded:!1,onToggleExpand:()=>{}},R.id))})]},C)})}),!w&&n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-12 border border-cream-200 text-center",children:[n.jsx(Ke,{className:"h-12 w-12 text-neutral-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-neutral-800 mb-2",children:"No castaways found"}),n.jsx("p",{className:"text-neutral-500",children:"Try adjusting your search or filter criteria"})]})]})}),n.jsx(tn,{})]})}function aoe(){var y;const{id:e}=Wn(),{getCopy:t}=Kt(),{data:r,isLoading:s,error:a}=ie({queryKey:["castaway",e],queryFn:async()=>{if(!e)throw new Error("No castaway ID");const{data:g,error:b}=await X.from("castaways").select("*, seasons(number, name)").eq("id",e).single();if(b)throw b;return g},enabled:!!e}),{data:i}=ie({queryKey:["castaway-scores",e],queryFn:async()=>{if(!e)return[];const{data:g,error:b}=await X.from("episode_scores").select(`
          episode_id,
          points,
          episodes!inner (
            number,
            title,
            air_date
          )
        `).eq("castaway_id",e).order("episodes(number)",{ascending:!0});if(b)throw b;const _=new Map;return(g||[]).forEach(w=>{const S=_.get(w.episode_id);S?S.points+=Number(w.points):_.set(w.episode_id,{episode_id:w.episode_id,points:Number(w.points),episode:w.episodes})}),Array.from(_.values())},enabled:!!e}),{data:o}=ie({queryKey:["castaway-rankings",r==null?void 0:r.season_id],queryFn:async()=>{if(!(r!=null&&r.season_id))return[];const{data:g,error:b}=await X.from("episode_scores").select("castaway_id, points, castaways!inner(season_id)").eq("castaways.season_id",r.season_id);if(b)throw b;const _={};return(g||[]).forEach(S=>{_[S.castaway_id]=(_[S.castaway_id]||0)+Number(S.points)}),Object.entries(_).map(([S,j])=>({castaway_id:S,total_points:j})).sort((S,j)=>j.total_points-S.total_points).map((S,j)=>({...S,rank:j+1}))},enabled:!!(r!=null&&r.season_id)}),{data:l}=ie({queryKey:["castaway-count",r==null?void 0:r.season_id],queryFn:async()=>{if(!(r!=null&&r.season_id))return 24;const{count:g,error:b}=await X.from("castaways").select("*",{count:"exact",head:!0}).eq("season_id",r.season_id);if(b)throw b;return g||24},enabled:!!(r!=null&&r.season_id)}),{data:u}=ie({queryKey:["castaway-confessionals",e],queryFn:async()=>{if(!e)return 0;const{data:g}=await X.from("scoring_rules").select("id").eq("code","RAND_CONFESSIONAL").single();if(!g)return 0;const{data:b,error:_}=await X.from("episode_scores").select("quantity").eq("castaway_id",e).eq("scoring_rule_id",g.id);if(_)throw _;return(b||[]).reduce((w,S)=>w+(S.quantity||1),0)},enabled:!!e}),d=(i==null?void 0:i.reduce((g,b)=>g+b.points,0))||0,p=((y=o==null?void 0:o.find(g=>g.castaway_id===e))==null?void 0:y.rank)||null,f=l||24,m=g=>({Vatu:{bg:"bg-purple-100",text:"text-purple-700",border:"border-purple-300"},Kalo:{bg:"bg-teal-100",text:"text-teal-700",border:"border-teal-300"},Cila:{bg:"bg-orange-100",text:"text-orange-700",border:"border-orange-300"}})[g||""]||{bg:"bg-neutral-100",text:"text-neutral-700",border:"border-neutral-300"};if(s)return n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex flex-col",children:[n.jsx(_e,{}),n.jsx("div",{className:"flex-1 flex items-center justify-center",children:n.jsx(be,{className:"h-8 w-8 text-burgundy-500 animate-spin"})}),n.jsx(tn,{})]});if(a||!r)return n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex flex-col",children:[n.jsx(_e,{}),n.jsx("div",{className:"flex-1 flex items-center justify-center px-4",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-8 text-center max-w-md",children:[n.jsx(gw,{className:"h-12 w-12 text-neutral-400 mx-auto mb-4"}),n.jsx(ne,{copyKey:"castaway_detail.not_found.title",as:"h2",className:"text-xl font-display font-bold text-neutral-800 mb-2",children:t("castaway_detail.not_found.title","Castaway Not Found")}),n.jsx(ne,{copyKey:"castaway_detail.not_found.message",as:"p",className:"text-neutral-600 mb-4",children:t("castaway_detail.not_found.message","This castaway doesn't exist or has been removed.")}),n.jsx(se,{to:"/castaways",className:"btn btn-primary",children:n.jsx(ne,{copyKey:"castaway_detail.not_found.button",as:"span",children:t("castaway_detail.not_found.button","View All Castaways")})})]})}),n.jsx(tn,{})]});const x=m(r.tribe_original);return n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex flex-col",children:[n.jsx(_e,{}),n.jsxs("main",{className:"flex-1 max-w-4xl mx-auto px-4 py-8 w-full",children:[n.jsxs(se,{to:"/castaways",className:"inline-flex items-center gap-2 text-neutral-600 hover:text-burgundy-600 mb-6 transition-colors",children:[n.jsx(ht,{className:"h-4 w-4"}),n.jsx(ne,{copyKey:"castaway_detail.back_link",as:"span",children:t("castaway_detail.back_link","Back to Castaways")})]}),n.jsx("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 overflow-hidden mb-6",children:n.jsxs("div",{className:"lg:flex",children:[n.jsxs("div",{className:"lg:w-2/5 relative",children:[r.photo_url?n.jsx("img",{src:r.photo_url,alt:r.name,className:"w-full h-80 lg:h-full lg:min-h-[500px] object-cover object-top"}):n.jsx("div",{className:"w-full h-80 lg:h-full lg:min-h-[500px] bg-gradient-to-br from-burgundy-400 to-burgundy-600 flex items-center justify-center",children:n.jsx("span",{className:"text-8xl text-white/80 font-display",children:r.name.charAt(0)})}),r.status==="eliminated"&&n.jsx("div",{className:"absolute top-4 left-4",children:n.jsxs("div",{className:"flex items-center gap-1.5 bg-neutral-800/90 text-white px-4 py-2 rounded-full text-sm font-semibold shadow-lg",children:[n.jsx(gw,{className:"h-4 w-4"}),n.jsx(ne,{copyKey:"castaway_detail.status.eliminated",as:"span",children:t("castaway_detail.status.eliminated","Eliminated")})]})}),r.status==="winner"&&n.jsx("div",{className:"absolute top-4 left-4",children:n.jsxs("div",{className:"flex items-center gap-1.5 bg-amber-500 text-white px-4 py-2 rounded-full text-sm font-semibold shadow-lg",children:[n.jsx(ot,{className:"h-4 w-4"}),n.jsx(ne,{copyKey:"castaway_detail.status.winner",as:"span",children:t("castaway_detail.status.winner","Winner")})]})})]}),n.jsxs("div",{className:"lg:w-3/5 p-6 lg:p-8 flex flex-col",children:[n.jsxs("div",{className:"mb-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx("div",{className:`inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-sm font-medium ${x.bg} ${x.text} ${x.border} border`,children:r.tribe_original||"Unknown Tribe"}),r.status==="active"&&n.jsx(ne,{copyKey:"castaway_detail.status.active",as:"span",className:"text-sm font-semibold text-green-600",children:t("castaway_detail.status.active","Active")})]}),n.jsx("h1",{className:"text-4xl font-display font-bold text-neutral-800",children:r.name})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[r.age&&n.jsx("div",{className:"bg-cream-50 rounded-xl p-4",children:n.jsxs("div",{className:"flex items-center gap-2 text-neutral-600",children:[n.jsx(wn,{className:"h-5 w-5 text-burgundy-500"}),n.jsxs("div",{children:[n.jsx(ne,{copyKey:"castaway_detail.label.age",as:"p",className:"text-xs text-neutral-500 uppercase tracking-wide",children:t("castaway_detail.label.age","Age")}),n.jsxs("p",{className:"font-semibold text-neutral-800",children:[r.age," years old"]})]})]})}),r.hometown&&n.jsx("div",{className:"bg-cream-50 rounded-xl p-4",children:n.jsxs("div",{className:"flex items-center gap-2 text-neutral-600",children:[n.jsx(hj,{className:"h-5 w-5 text-burgundy-500"}),n.jsxs("div",{children:[n.jsx(ne,{copyKey:"castaway_detail.label.from",as:"p",className:"text-xs text-neutral-500 uppercase tracking-wide",children:t("castaway_detail.label.from","From")}),n.jsx("p",{className:"font-semibold text-neutral-800",children:r.hometown})]})]})}),r.occupation&&n.jsx("div",{className:"bg-cream-50 rounded-xl p-4 col-span-2",children:n.jsxs("div",{className:"flex items-center gap-2 text-neutral-600",children:[n.jsx(Gee,{className:"h-5 w-5 text-burgundy-500"}),n.jsxs("div",{children:[n.jsx(ne,{copyKey:"castaway_detail.label.occupation",as:"p",className:"text-xs text-neutral-500 uppercase tracking-wide",children:t("castaway_detail.label.occupation","Occupation")}),n.jsx("p",{className:"font-semibold text-neutral-800",children:r.occupation})]})]})})]}),r.fun_fact&&n.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-yellow-50 border border-amber-200 rounded-xl p-5 mb-6",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(zn,{className:"h-6 w-6 text-amber-500 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx(ne,{copyKey:"castaway_detail.label.fun_fact",as:"p",className:"font-semibold text-amber-800 mb-1",children:t("castaway_detail.label.fun_fact","Fun Fact")}),n.jsx("div",{className:"text-amber-700 leading-relaxed prose prose-sm max-w-none prose-amber",dangerouslySetInnerHTML:{__html:r.fun_fact}})]})]})}),r.previous_seasons&&r.previous_seasons.length>0&&n.jsxs("div",{className:"bg-burgundy-50 border border-burgundy-200 rounded-xl p-4 mt-auto",children:[n.jsx(ne,{copyKey:"castaway_detail.label.survivor_veteran",as:"p",className:"font-semibold text-burgundy-800 mb-2",children:t("castaway_detail.label.survivor_veteran","Survivor Veteran")}),n.jsxs("p",{className:"text-burgundy-700",children:[n.jsx(ne,{copyKey:"castaway_detail.label.previous_seasons",as:"span",children:t("castaway_detail.label.previous_seasons","Previous seasons:")})," ",r.previous_seasons.join(", "),r.best_placement&&n.jsxs("span",{className:"ml-2 font-semibold",children:["(",n.jsx(ne,{copyKey:"castaway_detail.label.best_finish",as:"span",children:t("castaway_detail.label.best_finish","Best finish:")})," #",r.best_placement,")"]})]})]})]})]})}),n.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[n.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 p-6 text-center",children:[n.jsx("p",{className:"text-3xl font-bold text-burgundy-600",children:d}),n.jsx(ne,{copyKey:"castaway_detail.label.total_points",as:"p",className:"text-neutral-500 text-sm",children:t("castaway_detail.label.total_points","Total Points")})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 p-6 text-center",children:[n.jsx("p",{className:"text-3xl font-bold text-neutral-800",children:p?`#${p}`:"-"}),n.jsx(ne,{copyKey:"castaway_detail.label.rank",as:"p",className:"text-neutral-500 text-sm",children:t("castaway_detail.label.rank",`of ${f} Castaways`)})]}),(u||0)>=1?n.jsxs(se,{to:"/scoring",className:"bg-white rounded-2xl shadow-card border border-cream-200 p-6 text-center hover:shadow-lg hover:border-burgundy-200 transition-all",children:[n.jsx("p",{className:"text-3xl font-bold text-burgundy-600",children:u||0}),n.jsx(ne,{copyKey:"castaway_detail.label.confessionals",as:"p",className:"text-neutral-500 text-sm",children:t("castaway_detail.label.confessionals","Season 50 Confessionals")})]}):n.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 p-6 text-center",children:[n.jsx("p",{className:"text-3xl font-bold text-neutral-800",children:"0"}),n.jsx(ne,{copyKey:"castaway_detail.label.confessionals",as:"p",className:"text-neutral-500 text-sm",children:t("castaway_detail.label.confessionals","Season 50 Confessionals")})]})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 overflow-hidden",children:[n.jsx("div",{className:"p-5 border-b border-cream-100",children:n.jsx(ne,{copyKey:"castaway_detail.header.performance",as:"h2",className:"text-lg font-display font-bold text-neutral-800",children:t("castaway_detail.header.performance","Week-over-Week Performance")})}),i&&i.length>0?n.jsx("div",{className:"divide-y divide-cream-100",children:i.map((g,b)=>{const _=b>0?i[b-1].points:null,w=_!==null?g.points>_?"up":g.points<_?"down":"same":null;return n.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-cream-50 transition-colors",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-10 h-10 rounded-full bg-burgundy-100 flex items-center justify-center",children:n.jsx("span",{className:"font-bold text-burgundy-600",children:g.episode.number})}),n.jsxs("div",{children:[n.jsxs("p",{className:"font-medium text-neutral-800",children:["Episode ",g.episode.number,g.episode.title&&n.jsxs("span",{className:"text-neutral-500 ml-2",children:["- ",g.episode.title]})]}),n.jsx("p",{className:"text-sm text-neutral-500",children:new Date(g.episode.air_date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[w&&n.jsxs("div",{className:`flex items-center gap-1 text-sm ${w==="up"?"text-green-600":w==="down"?"text-red-600":"text-neutral-400"}`,children:[w==="up"&&n.jsx(fr,{className:"h-4 w-4"}),w==="down"&&n.jsx(Hi,{className:"h-4 w-4"}),w==="same"&&n.jsx(hx,{className:"h-4 w-4"})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-xl font-bold text-neutral-800",children:g.points}),n.jsx(ne,{copyKey:"castaway_detail.label.points",as:"p",className:"text-xs text-neutral-400",children:t("castaway_detail.label.points","points")})]})]})]},g.episode_id)})}):n.jsxs("div",{className:"p-8 text-center text-neutral-500",children:[n.jsx(ne,{copyKey:"castaway_detail.empty.no_data",as:"p",children:t("castaway_detail.empty.no_data","No scoring data available yet.")}),n.jsx(ne,{copyKey:"castaway_detail.empty.check_back",as:"p",className:"text-sm mt-1",children:t("castaway_detail.empty.check_back","Check back after episodes air!")})]})]})]}),n.jsx(tn,{})]})}function ioe(){const{user:e}=Et(),{getCopy:t}=Kt(),[r,s]=$.useState(""),[a,i]=$.useState(""),[o,l]=$.useState("general"),[u,d]=$.useState(""),[p,f]=$.useState(""),[m,x]=$.useState(!1),[y,g]=$.useState(!1),[b,_]=$.useState(""),{data:w}=ie({queryKey:["profile",e==null?void 0:e.id],queryFn:async()=>{if(!(e!=null&&e.id))return null;const{data:N,error:C}=await X.from("users").select("display_name, email").eq("id",e.id).single();if(C)throw C;return N},enabled:!!(e!=null&&e.id)});$.useEffect(()=>{w&&(s(w.display_name||""),i(w.email||""))},[w]);const S=async N=>{N.preventDefault(),_(""),x(!0);try{const C=encodeURIComponent(`[RGFL ${o.toUpperCase()}] ${u}`),E=encodeURIComponent(`Name: ${r||(w==null?void 0:w.display_name)||"Anonymous"}
Email: ${a||(w==null?void 0:w.email)||(e==null?void 0:e.email)||"Not provided"}
Reason: ${o}
User ID: ${(e==null?void 0:e.id)||"Not logged in"}

Message:
${p}`);window.location.href=`mailto:support@realitygamesfantasyleague.com?subject=${C}&body=${E}`,setTimeout(()=>{g(!0),x(!1)},500)}catch{_("Failed to open email client. Please try again."),x(!1)}},j=[{value:"general",label:"General Inquiry",icon:qc,description:"General questions about RGFL"},{value:"partner",label:"Partner With Us",icon:zte,description:"Interested in partnerships or collaborations"},{value:"issue",label:"Report an Issue",icon:Qee,description:"Something not working right?"},{value:"other",label:"Other",icon:yt,description:"Anything else on your mind"}];return y?n.jsx("div",{className:"max-w-2xl mx-auto py-12",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated p-8 border border-cream-200 text-center",children:[n.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:n.jsx(xt,{className:"h-8 w-8 text-green-600"})}),n.jsx(ne,{copyKey:"contact.success.title",as:"h1",className:"text-2xl font-display font-bold text-neutral-800 mb-2",children:t("contact.success.title","Message Sent!")}),n.jsx(ne,{copyKey:"contact.success.description",as:"p",className:"text-neutral-500 mb-6",children:t("contact.success.description","Thank you for reaching out. Your email client should have opened with your message. We typically respond within 24-48 hours.")}),n.jsx("button",{onClick:()=>{g(!1),d(""),f("")},className:"btn btn-secondary",children:"Send Another Message"})]})}):n.jsxs("div",{className:"min-h-screen bg-cream-50 flex flex-col",children:[n.jsx(_e,{}),n.jsxs("div",{className:"max-w-2xl mx-auto pb-24 flex-1",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("div",{className:"w-16 h-16 bg-burgundy-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(sn,{className:"h-8 w-8 text-burgundy-600"})}),n.jsx(ne,{copyKey:"contact.header.title",as:"h1",className:"text-3xl font-display font-bold text-neutral-800 mb-2",children:t("contact.header.title","Contact Us")}),n.jsx(ne,{copyKey:"contact.header.subtitle",as:"p",className:"text-neutral-500",children:t("contact.header.subtitle","Questions? Feedback? We'd love to hear from you")})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated p-6 border border-cream-200",children:[b&&n.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl",children:n.jsx("p",{className:"text-red-600 text-sm",children:b})}),n.jsxs("form",{onSubmit:S,className:"space-y-6",children:[!e&&n.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-neutral-700 mb-2",children:"Your Name"}),n.jsxs("div",{className:"relative",children:[n.jsx(hh,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-neutral-400"}),n.jsx("input",{id:"name",type:"text",value:r,onChange:N=>s(N.target.value),className:"input pl-10",placeholder:"John Doe"})]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-neutral-700 mb-2",children:"Email Address"}),n.jsxs("div",{className:"relative",children:[n.jsx(sn,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-neutral-400"}),n.jsx("input",{id:"email",type:"email",value:a,onChange:N=>i(N.target.value),className:"input pl-10",placeholder:"you@example.com"})]})]})]}),e&&w&&n.jsxs("div",{className:"p-4 bg-cream-50 rounded-xl border border-cream-200",children:[n.jsx("p",{className:"text-sm text-neutral-500",children:"Sending as:"}),n.jsx("p",{className:"font-medium text-neutral-800",children:w.display_name}),n.jsx("p",{className:"text-sm text-neutral-500",children:w.email})]}),n.jsxs("div",{children:[n.jsx(ne,{copyKey:"contact.form.reason-label",as:"label",className:"block text-sm font-medium text-neutral-700 mb-3",children:t("contact.form.reason-label","What can we help you with?")}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:j.map(N=>n.jsxs("button",{type:"button",onClick:()=>l(N.value),className:`p-3 rounded-xl border text-left transition-all ${o===N.value?"border-burgundy-500 bg-burgundy-50 ring-2 ring-burgundy-100":"border-cream-200 bg-white hover:border-burgundy-200"}`,children:[n.jsx(N.icon,{className:`h-5 w-5 mb-1 ${o===N.value?"text-burgundy-500":"text-neutral-400"}`}),n.jsx("p",{className:`text-sm font-medium ${o===N.value?"text-burgundy-700":"text-neutral-700"}`,children:N.label})]},N.value))})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"subject",className:"block text-sm font-medium text-neutral-700 mb-2",children:"Subject"}),n.jsx("input",{id:"subject",type:"text",value:u,onChange:N=>d(N.target.value),className:"input",placeholder:"Brief description of your inquiry",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"message",className:"block text-sm font-medium text-neutral-700 mb-2",children:"Message"}),n.jsx("textarea",{id:"message",value:p,onChange:N=>f(N.target.value),className:"input min-h-[150px] resize-y",placeholder:"Tell us more...",required:!0})]}),n.jsx("button",{type:"submit",disabled:m||!u.trim()||!p.trim(),className:"w-full btn btn-primary btn-lg flex items-center justify-center gap-2 disabled:opacity-50",children:m?n.jsxs(n.Fragment,{children:[n.jsx(be,{className:"h-5 w-5 animate-spin"}),"Opening Email..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Jn,{className:"h-5 w-5"}),"Send Message"]})})]})]})]}),n.jsx(tn,{})]})}const i5=[{id:"1",question:"How do I join a league?",answer:"You can join a league by browsing public leagues on the Leagues page, or by entering an invite code from a friend. If the league requires a donation, you'll be redirected to complete payment before joining.",category:"Getting Started",sort_order:1},{id:"2",question:"How does the draft work?",answer:"Each league holds a draft where players take turns selecting castaways. The draft order is randomized, and you can set your draft rankings ahead of time. If you miss your pick, the system will auto-draft based on your rankings.",category:"Getting Started",sort_order:2},{id:"3",question:"How do weekly picks work?",answer:'Each week, you select one castaway from your roster to be your "active" pick. That castaway earns points for you based on their performance in the episode. Picks lock before each episode airs.',category:"Gameplay",sort_order:3},{id:"4",question:"How is scoring calculated?",answer:"Castaways earn points for various actions like winning challenges, finding idols, receiving confessionals, and surviving tribal council. Check the Scoring Rules page for the full breakdown of point values.",category:"Gameplay",sort_order:4},{id:"5",question:"What happens if my castaway is eliminated?",answer:"If a castaway on your roster is eliminated, they remain on your roster but can no longer be selected as your weekly pick. You'll need to choose from your remaining active castaways.",category:"Gameplay",sort_order:5},{id:"6",question:"Can I be in multiple leagues?",answer:"Yes! You can join as many leagues as you want. Each league has its own draft, roster, and standings. Your performance in one league doesn't affect your other leagues.",category:"Leagues",sort_order:6},{id:"7",question:"How do paid leagues work?",answer:"Some leagues require a donation to join. 100% of donations go to charity through our 501(c)(3) nonprofit partner. You'll receive a tax receipt via email after your donation.",category:"Leagues",sort_order:7},{id:"8",question:"How do I create my own league?",answer:`Click "Create League" on the Leagues page. You can set the league name, whether it's public or private, and optionally require a donation. You'll receive an invite code to share with friends.`,category:"Leagues",sort_order:8},{id:"9",question:"When are scores updated?",answer:"Scores are typically updated within 24 hours after each episode airs. You'll receive a notification when scores are finalized and standings are updated.",category:"Scoring",sort_order:9},{id:"10",question:"What is the global leaderboard?",answer:"The global leaderboard ranks all players across all leagues based on a weighted scoring system. It accounts for the number of leagues you're in and your average performance.",category:"Scoring",sort_order:10},{id:"11",question:"How do I contact support?",answer:'You can reach us through the Contact page. We typically respond within 24-48 hours. For urgent issues, include "URGENT" in your subject line.',category:"Support",sort_order:11},{id:"12",question:"Can I change my weekly pick after submitting?",answer:"Yes, you can change your pick as many times as you want until picks lock. Once locked (typically before the episode airs), picks cannot be changed.",category:"Gameplay",sort_order:12}];function ooe(){const[e,t]=$.useState(new Set),[r,s]=$.useState(null),[a,i]=$.useState(""),[o,l]=$.useState(""),{getCopy:u}=Kt(),{isAdmin:d}=Et(),{isEditMode:p}=ol(),f=at(),m=ke({mutationFn:async({id:M,question:B,answer:U})=>{const{error:Y}=await X.from("site_copy").update({key:`faq.${B.toLowerCase().replace(/\s+/g,"_").replace(/[?]/g,"")}`,content:U}).eq("id",M);if(Y)throw Y},onSuccess:()=>{f.invalidateQueries({queryKey:["faq-content"]}),s(null)}}),x=ke({mutationFn:async M=>{const{error:B}=await X.from("site_copy").delete().eq("id",M);if(B)throw B},onSuccess:()=>{f.invalidateQueries({queryKey:["faq-content"]})}}),y=ke({mutationFn:async({item1Id:M,item1NewOrder:B,item2Id:U,item2NewOrder:Y})=>{const{error:W}=await X.from("site_copy").update({sort_order:B}).eq("id",M);if(W)throw W;const{error:K}=await X.from("site_copy").update({sort_order:Y}).eq("id",U);if(K)throw K},onSuccess:()=>{f.invalidateQueries({queryKey:["faq-content"]})}}),g=(M,B)=>{confirm(`Delete FAQ: "${B}"?`)&&x.mutate(M)},b=(M,B)=>{const U=B.findIndex(Y=>Y.id===M.id);if(U>0){const Y=B[U-1];y.mutate({item1Id:M.id,item1NewOrder:Y.sort_order,item2Id:Y.id,item2NewOrder:M.sort_order})}},_=(M,B)=>{const U=B.findIndex(Y=>Y.id===M.id);if(U<B.length-1){const Y=B[U+1];y.mutate({item1Id:M.id,item1NewOrder:Y.sort_order,item2Id:Y.id,item2NewOrder:M.sort_order})}},w=M=>{s(M.id),i(M.question),l(M.answer),t(B=>new Set([...B,M.id]))},S=()=>{s(null),i(""),l("")},j=()=>{r&&m.mutate({id:r,question:a,answer:o})},{data:N,isLoading:C}=ie({queryKey:["faq-content"],queryFn:async()=>{const{data:M,error:B}=await X.from("site_copy").select("*").eq("page","faq").eq("is_active",!0).order("sort_order",{ascending:!0});if(B)throw B;return M&&M.length>0?M.map((U,Y)=>({id:U.id,question:U.key.replace("faq.","").replace(/_/g," "),answer:U.content,category:U.section||"General",sort_order:Y})):i5}}),E=N||i5,T=E.reduce((M,B)=>{const U=B.category||"General";return M[U]||(M[U]=[]),M[U].push(B),M},{}),I=Object.entries(T).map(([M,B])=>({name:M,items:B.sort((U,Y)=>U.sort_order-Y.sort_order)})),A=M=>{t(B=>{const U=new Set(B);return U.has(M)?U.delete(M):U.add(M),U})},R=()=>{t(new Set(E.map(M=>M.id)))},O=()=>{t(new Set)};return C?n.jsxs("div",{className:"min-h-screen bg-cream-50 flex flex-col",children:[n.jsx(_e,{}),n.jsx("div",{className:"flex-1 flex items-center justify-center",children:n.jsx(be,{className:"h-8 w-8 text-burgundy-500 animate-spin"})}),n.jsx(tn,{})]}):n.jsxs("div",{className:"min-h-screen bg-cream-50 flex flex-col",children:[n.jsx(_e,{}),n.jsxs("main",{className:"flex-1 max-w-4xl mx-auto px-4 py-8 w-full",children:[n.jsxs("div",{className:"text-center mb-10",children:[n.jsx("div",{className:"w-16 h-16 bg-burgundy-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(qc,{className:"h-8 w-8 text-burgundy-600"})}),n.jsx(ne,{copyKey:"faq.header.title",as:"h1",className:"text-3xl font-display font-bold text-neutral-800 mb-2",children:u("faq.header.title","Frequently Asked Questions")}),n.jsx(ne,{copyKey:"faq.header.subtitle",as:"p",className:"text-neutral-500",children:u("faq.header.subtitle","Everything you need to know about Reality Games Fantasy League")})]}),n.jsxs("div",{className:"mb-10 bg-white rounded-2xl shadow-card border border-cream-200 p-6",children:[n.jsx("h2",{className:"text-sm font-semibold text-neutral-500 uppercase tracking-wider mb-4 text-center",children:"Quick Links"}),n.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-5 gap-3",children:[n.jsxs(se,{to:"/dashboard",className:"flex flex-col items-center gap-2 p-4 rounded-xl bg-cream-50 hover:bg-burgundy-50 border border-cream-200 hover:border-burgundy-200 transition-colors group",children:[n.jsx(Zte,{className:"h-6 w-6 text-burgundy-500 group-hover:text-burgundy-600"}),n.jsx("span",{className:"text-sm font-medium text-neutral-700 group-hover:text-burgundy-700",children:"Dashboard"})]}),n.jsxs(se,{to:"/leaderboard",className:"flex flex-col items-center gap-2 p-4 rounded-xl bg-cream-50 hover:bg-burgundy-50 border border-cream-200 hover:border-burgundy-200 transition-colors group",children:[n.jsx(ot,{className:"h-6 w-6 text-burgundy-500 group-hover:text-burgundy-600"}),n.jsx("span",{className:"text-sm font-medium text-neutral-700 group-hover:text-burgundy-700",children:"Rank List"})]}),n.jsxs(se,{to:"/how-to-play",className:"flex flex-col items-center gap-2 p-4 rounded-xl bg-cream-50 hover:bg-burgundy-50 border border-cream-200 hover:border-burgundy-200 transition-colors group",children:[n.jsx($c,{className:"h-6 w-6 text-burgundy-500 group-hover:text-burgundy-600"}),n.jsx("span",{className:"text-sm font-medium text-neutral-700 group-hover:text-burgundy-700",children:"How to Play"})]}),n.jsxs(se,{to:"/scoring-rules",className:"flex flex-col items-center gap-2 p-4 rounded-xl bg-cream-50 hover:bg-burgundy-50 border border-cream-200 hover:border-burgundy-200 transition-colors group",children:[n.jsx(Jee,{className:"h-6 w-6 text-burgundy-500 group-hover:text-burgundy-600"}),n.jsx("span",{className:"text-sm font-medium text-neutral-700 group-hover:text-burgundy-700",children:"Score Rules"})]}),n.jsxs(se,{to:"/timeline",className:"flex flex-col items-center gap-2 p-4 rounded-xl bg-cream-50 hover:bg-burgundy-50 border border-cream-200 hover:border-burgundy-200 transition-colors group",children:[n.jsx(wn,{className:"h-6 w-6 text-burgundy-500 group-hover:text-burgundy-600"}),n.jsx("span",{className:"text-sm font-medium text-neutral-700 group-hover:text-burgundy-700",children:"Weekly Timeline"})]})]})]}),n.jsxs("div",{className:"flex justify-end gap-2 mb-6",children:[n.jsx("button",{onClick:R,className:"text-sm text-burgundy-600 hover:text-burgundy-700 font-medium",children:n.jsx(ne,{copyKey:"faq.expand_all",as:"span",className:"",children:u("faq.expand_all","Expand All")})}),n.jsx("span",{className:"text-neutral-300",children:"|"}),n.jsx("button",{onClick:O,className:"text-sm text-burgundy-600 hover:text-burgundy-700 font-medium",children:n.jsx(ne,{copyKey:"faq.collapse_all",as:"span",className:"",children:u("faq.collapse_all","Collapse All")})})]}),n.jsx("div",{className:"space-y-8",children:I.map(M=>n.jsxs("div",{children:[n.jsxs("h2",{className:"text-lg font-semibold text-neutral-800 mb-4 flex items-center gap-2",children:[n.jsx("span",{className:"w-2 h-2 rounded-full bg-burgundy-500"}),n.jsx(ne,{copyKey:`faq.category.${M.name.toLowerCase().replace(/\s+/g,"_")}`,as:"span",className:"",children:u(`faq.category.${M.name.toLowerCase().replace(/\s+/g,"_")}`,M.name)})]}),n.jsx("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 overflow-hidden divide-y divide-cream-100",children:M.items.map(B=>n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center",children:[n.jsxs("button",{onClick:()=>A(B.id),className:"flex-1 px-6 py-4 flex items-center justify-between text-left hover:bg-cream-50 transition-colors",children:[r===B.id?n.jsx("input",{type:"text",value:a,onChange:U=>i(U.target.value),onClick:U=>U.stopPropagation(),className:"flex-1 mr-4 px-3 py-1 border-2 border-burgundy-400 rounded-lg focus:outline-none focus:ring-2 focus:ring-burgundy-500"}):n.jsx("span",{className:`font-medium text-neutral-800 pr-4 ${d&&p?"border-b-2 border-dashed border-burgundy-300":""}`,children:B.question}),n.jsx(en,{className:`h-5 w-5 text-neutral-400 flex-shrink-0 transition-transform ${e.has(B.id)?"rotate-180":""}`})]}),d&&p&&r!==B.id&&n.jsxs("div",{className:"flex items-center gap-1 mr-2",children:[n.jsx("button",{onClick:()=>b(B,M.items),className:"p-1.5 bg-neutral-200 hover:bg-neutral-300 text-neutral-600 rounded transition-all",title:"Move Up",disabled:M.items.indexOf(B)===0,children:n.jsx(fs,{className:"h-3 w-3"})}),n.jsx("button",{onClick:()=>_(B,M.items),className:"p-1.5 bg-neutral-200 hover:bg-neutral-300 text-neutral-600 rounded transition-all",title:"Move Down",disabled:M.items.indexOf(B)===M.items.length-1,children:n.jsx(en,{className:"h-3 w-3"})}),n.jsx("button",{onClick:()=>w(B),className:"p-1.5 bg-burgundy-500 hover:bg-burgundy-600 text-white rounded transition-all",title:"Edit FAQ",children:n.jsx(ru,{className:"h-3 w-3"})}),n.jsx("button",{onClick:()=>g(B.id,B.question),className:"p-1.5 bg-red-500 hover:bg-red-600 text-white rounded transition-all",title:"Delete FAQ",children:n.jsx(ms,{className:"h-3 w-3"})})]})]}),e.has(B.id)&&n.jsx("div",{className:"px-6 pb-4 text-neutral-600 leading-relaxed",children:r===B.id?n.jsxs("div",{className:"space-y-3",children:[n.jsx("textarea",{value:o,onChange:U=>l(U.target.value),rows:4,className:"w-full px-3 py-2 border-2 border-burgundy-400 rounded-lg focus:outline-none focus:ring-2 focus:ring-burgundy-500",placeholder:"Answer (HTML supported)"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:j,disabled:m.isPending,className:"flex items-center gap-1 px-3 py-1.5 bg-green-500 hover:bg-green-600 text-white rounded-lg text-sm",children:[m.isPending?n.jsx(be,{className:"h-4 w-4 animate-spin"}):n.jsx(Ot,{className:"h-4 w-4"}),"Save"]}),n.jsxs("button",{onClick:S,disabled:m.isPending,className:"flex items-center gap-1 px-3 py-1.5 bg-neutral-400 hover:bg-neutral-500 text-white rounded-lg text-sm",children:[n.jsx(It,{className:"h-4 w-4"}),"Cancel"]})]})]}):n.jsx("div",{className:`prose prose-sm max-w-none ${d&&p?"border-b-2 border-dashed border-burgundy-300":""}`,dangerouslySetInnerHTML:{__html:B.answer}})})]},B.id))})]},M.name))}),n.jsxs("div",{className:"mt-12 bg-gradient-to-r from-burgundy-50 to-amber-50 rounded-2xl p-8 text-center border border-burgundy-100",children:[n.jsx(ne,{copyKey:"faq.cta.title",as:"h3",className:"text-xl font-semibold text-neutral-800 mb-2",children:u("faq.cta.title","Still have questions?")}),n.jsx(ne,{copyKey:"faq.cta.description",as:"p",className:"text-neutral-600 mb-4",children:u("faq.cta.description","We're here to help! Reach out and we'll get back to you as soon as possible.")}),n.jsx(se,{to:"/contact",className:"inline-flex items-center gap-2 bg-burgundy-500 text-white px-6 py-3 rounded-xl font-semibold hover:bg-burgundy-600 transition-colors",children:n.jsx(ne,{copyKey:"faq.cta.button",as:"span",className:"",children:u("faq.cta.button","Contact Us")})})]})]}),n.jsx(tn,{})]})}function loe(){var l;const{leagueId:e}=Wn(),{data:t,isLoading:r}=ie({queryKey:["league",e],queryFn:async()=>{if(!e)throw new Error("No league ID");const{data:u,error:d}=await X.from("leagues").select("*, seasons(*)").eq("id",e).single();if(d)throw d;return u},enabled:!!e}),{data:s,isLoading:a}=ie({queryKey:["league-history",t==null?void 0:t.commissioner_id],queryFn:async()=>{if(!(t!=null&&t.commissioner_id))throw new Error("No commissioner");const{data:u,error:d}=await X.from("leagues").select(`
          *,
          seasons(*),
          league_members(
            total_points,
            rank,
            users(display_name, avatar_url)
          )
        `).eq("commissioner_id",t.commissioner_id).eq("status","completed").order("created_at",{ascending:!1});if(d)throw d;return u||[]},enabled:!!(t!=null&&t.commissioner_id)}),{data:i}=ie({queryKey:["league-episodes",e],queryFn:async()=>{if(!e||!(t!=null&&t.season_id))throw new Error("Missing data");const{data:u,error:d}=await X.from("episodes").select("*").eq("season_id",t.season_id).gt("number",1).eq("is_scored",!0).order("number",{ascending:!1});if(d)throw d;return u||[]},enabled:!!e&&!!(t!=null&&t.season_id)});return r||a?n.jsxs(n.Fragment,{children:[n.jsx(_e,{}),n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center",children:n.jsx(be,{className:"h-8 w-8 text-burgundy-500 animate-spin"})})]}):n.jsxs(n.Fragment,{children:[n.jsx(_e,{}),n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 p-4 pb-24",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx(se,{to:`/leagues/${e}`,className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:n.jsx(ht,{className:"h-5 w-5 text-neutral-600"})}),n.jsxs("div",{children:[n.jsxs("h1",{className:"text-2xl font-display font-bold text-neutral-800 flex items-center gap-2",children:[n.jsx(Pd,{className:"h-6 w-6 text-burgundy-500"}),"League History"]}),n.jsx("p",{className:"text-neutral-500",children:t==null?void 0:t.name})]})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 mb-6",children:[n.jsx("div",{className:"px-4 py-3 border-b border-cream-200",children:n.jsxs("h2",{className:"text-lg font-display font-bold text-neutral-800 flex items-center gap-2",children:[n.jsx(wn,{className:"h-5 w-5 text-burgundy-500"}),"Season ",(l=t==null?void 0:t.seasons)==null?void 0:l.number," Episodes"]})}),i&&i.length>0?n.jsx("div",{className:"divide-y divide-cream-100",children:i.map(u=>n.jsxs(se,{to:`/leagues/${e}/episodes/${u.id}`,className:"flex items-center gap-3 px-4 py-3 hover:bg-cream-50 transition-colors",children:[n.jsx("div",{className:"w-10 h-10 bg-cream-100 rounded-xl flex items-center justify-center border border-cream-200",children:n.jsx("span",{className:"text-burgundy-500 font-bold",children:u.number})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("p",{className:"text-neutral-800 font-medium",children:["Episode ",u.number,u.title&&`: ${u.title}`]}),n.jsx("p",{className:"text-neutral-500 text-sm",children:new Date(u.air_date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]}),n.jsx(ot,{className:"h-5 w-5 text-neutral-400"})]},u.id))}):n.jsxs("div",{className:"p-8 text-center",children:[n.jsx(wn,{className:"h-12 w-12 text-neutral-400 mx-auto mb-4"}),n.jsx("p",{className:"text-neutral-500",children:"No scored episodes yet."}),n.jsx("p",{className:"text-neutral-400 text-sm",children:"Results will appear after the first episode is scored."})]})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200",children:[n.jsx("div",{className:"px-4 py-3 border-b border-cream-200",children:n.jsxs("h2",{className:"text-lg font-display font-bold text-neutral-800 flex items-center gap-2",children:[n.jsx(ot,{className:"h-5 w-5 text-burgundy-500"}),"Past Seasons"]})}),s&&s.length>0?n.jsx("div",{className:"divide-y divide-cream-100",children:s.map(u=>{var p,f,m,x,y;(p=u.league_members)==null||p.find(g=>g.rank===1);const d=(f=u.league_members)==null?void 0:f.sort((g,b)=>(g.rank||999)-(b.rank||999)).slice(0,3);return n.jsxs("div",{className:"p-4",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-neutral-800 font-medium",children:u.name}),n.jsxs("p",{className:"text-neutral-500 text-sm",children:["Season ",(m=u.seasons)==null?void 0:m.number,": ",(x=u.seasons)==null?void 0:x.name]})]}),n.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-700 rounded-full text-xs",children:"Completed"})]}),d&&d.length>0&&n.jsx("div",{className:"space-y-2",children:d.map((g,b)=>{var _,w,S;return n.jsxs("div",{className:`flex items-center gap-3 p-2 rounded-xl ${b===0?"bg-burgundy-50 border border-burgundy-100":"bg-cream-50 border border-cream-200"}`,children:[n.jsx("div",{className:"w-6 h-6 flex items-center justify-center",children:b===0?n.jsx(er,{className:"h-5 w-5 text-burgundy-500"}):b===1?n.jsx(Er,{className:"h-5 w-5 text-gray-400"}):n.jsx(Er,{className:"h-5 w-5 text-amber-600"})}),(_=g.users)!=null&&_.avatar_url?n.jsx("img",{src:g.users.avatar_url,alt:"",className:"w-6 h-6 rounded-full object-cover"}):n.jsx("div",{className:"w-6 h-6 bg-cream-100 rounded-full flex items-center justify-center border border-cream-200",children:n.jsx(Ke,{className:"h-3 w-3 text-neutral-400"})}),n.jsx("span",{className:`flex-1 ${b===0?"text-burgundy-600 font-medium":"text-neutral-800"}`,children:(w=g.users)==null?void 0:w.display_name}),n.jsxs("span",{className:`font-bold ${b===0?"text-burgundy-500":"text-neutral-500"}`,children:[g.total_points," pts"]})]},((S=g.users)==null?void 0:S.display_name)||b)})}),n.jsxs("div",{className:"mt-3 flex items-center justify-between text-sm text-neutral-400",children:[n.jsxs("span",{children:[((y=u.league_members)==null?void 0:y.length)||0," players"]}),n.jsxs("span",{children:["Finished ",new Date(u.updated_at).toLocaleDateString()]})]})]},u.id)})}):n.jsxs("div",{className:"p-8 text-center",children:[n.jsx(Pd,{className:"h-12 w-12 text-neutral-400 mx-auto mb-4"}),n.jsx("p",{className:"text-neutral-500",children:"No past seasons found."}),n.jsx("p",{className:"text-neutral-400 text-sm",children:"Previous league results will appear here."})]})]}),n.jsxs("div",{className:"mt-6 bg-burgundy-50 border border-burgundy-200 rounded-2xl p-4",children:[n.jsxs("h3",{className:"text-neutral-800 font-medium mb-3 flex items-center gap-2",children:[n.jsx(ot,{className:"h-5 w-5 text-burgundy-500"}),"All-Time Stats"]}),n.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-2xl font-bold text-neutral-800",children:((s==null?void 0:s.length)||0)+1}),n.jsx("p",{className:"text-neutral-500 text-xs",children:"Seasons"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-2xl font-bold text-neutral-800",children:(i==null?void 0:i.length)||0}),n.jsx("p",{className:"text-neutral-500 text-xs",children:"Episodes Scored"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-2xl font-bold text-neutral-800",children:(s==null?void 0:s.reduce((u,d)=>{var p;return u+(((p=d.league_members)==null?void 0:p.length)||0)},0))||0}),n.jsx("p",{className:"text-neutral-500 text-xs",children:"Total Players"})]})]})]})]})]})}function coe(){const e=at(),[t,r]=$.useState("notifications"),{data:s}=ie({queryKey:["current-user"],queryFn:async()=>{const{data:{user:x}}=await X.auth.getUser();return x}}),{data:a}=ie({queryKey:["user-profile",s==null?void 0:s.id],queryFn:async()=>{if(!(s!=null&&s.id))throw new Error("No user");const{data:x,error:y}=await X.from("users").select("*").eq("id",s.id).single();if(y)throw y;return x},enabled:!!(s!=null&&s.id)}),{data:i,isLoading:o}=ie({queryKey:["notifications",s==null?void 0:s.id],queryFn:async()=>{if(!(s!=null&&s.id))throw new Error("No user");const{data:x,error:y}=await X.from("notifications").select("*").eq("user_id",s.id).order("sent_at",{ascending:!1}).limit(50);if(y)throw y;return x||[]},enabled:!!(s!=null&&s.id)}),l=ke({mutationFn:async x=>{const{error:y}=await X.from("notifications").update({read_at:new Date().toISOString()}).eq("id",x);if(y)throw y},onSuccess:()=>{e.invalidateQueries({queryKey:["notifications"]})}}),u=ke({mutationFn:async()=>{if(!(s!=null&&s.id))throw new Error("No user");const{error:x}=await X.from("notifications").update({read_at:new Date().toISOString()}).eq("user_id",s.id).is("read_at",null);if(x)throw x},onSuccess:()=>{e.invalidateQueries({queryKey:["notifications"]})}}),d=ke({mutationFn:async x=>{if(!(s!=null&&s.id))throw new Error("No user");const{error:y}=await X.from("users").update(x).eq("id",s.id);if(y)throw y},onSuccess:()=>{e.invalidateQueries({queryKey:["user-profile",s==null?void 0:s.id]})}}),p=(i==null?void 0:i.filter(x=>!x.read_at).length)||0,f=x=>{switch(x){case"email":return n.jsx(sn,{className:"h-5 w-5 text-blue-500"});case"sms":return n.jsx(el,{className:"h-5 w-5 text-green-500"});case"push":return n.jsx(Uc,{className:"h-5 w-5 text-purple-500"});default:return n.jsx(Ys,{className:"h-5 w-5 text-burgundy-500"})}},m=x=>{const y=new Date(x),b=new Date().getTime()-y.getTime(),_=Math.floor(b/6e4),w=Math.floor(b/36e5),S=Math.floor(b/864e5);return _<1?"Just now":_<60?`${_}m ago`:w<24?`${w}h ago`:S<7?`${S}d ago`:y.toLocaleDateString()};return o?n.jsxs(n.Fragment,{children:[n.jsx(_e,{}),n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center",children:n.jsx(be,{className:"h-8 w-8 text-burgundy-500 animate-spin"})})]}):n.jsxs(n.Fragment,{children:[n.jsx(_e,{}),n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 p-4 pb-24",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx(se,{to:"/profile",className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:n.jsx(ht,{className:"h-5 w-5 text-neutral-600"})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("h1",{className:"text-2xl font-display font-bold text-neutral-800 flex items-center gap-2",children:[n.jsx(Ys,{className:"h-6 w-6 text-burgundy-500"}),"Notifications"]}),p>0&&n.jsxs("p",{className:"text-neutral-500",children:[p," unread"]})]}),p>0&&n.jsx("button",{onClick:()=>u.mutate(),disabled:u.isPending,className:"text-burgundy-500 text-sm hover:text-burgundy-600",children:"Mark all read"})]}),n.jsxs("div",{className:"flex gap-2 mb-6",children:[n.jsxs("button",{onClick:()=>r("notifications"),className:`flex-1 py-2 px-4 rounded-xl font-medium transition-colors ${t==="notifications"?"bg-burgundy-500 text-white":"bg-white text-neutral-600 hover:bg-cream-50 border border-cream-200"}`,children:[n.jsx(Ys,{className:"h-4 w-4 inline mr-2"}),"Inbox"]}),n.jsxs("button",{onClick:()=>r("settings"),className:`flex-1 py-2 px-4 rounded-xl font-medium transition-colors ${t==="settings"?"bg-burgundy-500 text-white":"bg-white text-neutral-600 hover:bg-cream-50 border border-cream-200"}`,children:[n.jsx(dh,{className:"h-4 w-4 inline mr-2"}),"Preferences"]})]}),t==="notifications"?n.jsx("div",{className:"space-y-3",children:i&&i.length>0?i.map(x=>n.jsx("div",{className:`bg-white rounded-2xl shadow-card p-4 border transition-colors ${x.read_at?"border-cream-200 opacity-75":"border-burgundy-200 bg-burgundy-50"}`,children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"p-2 bg-cream-100 rounded-xl border border-cream-200",children:f(x.type)}),n.jsxs("div",{className:"flex-1 min-w-0",children:[x.subject&&n.jsx("p",{className:"text-neutral-800 font-medium mb-1",children:x.subject}),n.jsx("p",{className:"text-neutral-600 text-sm",children:x.body}),n.jsx("p",{className:"text-neutral-400 text-xs mt-2",children:m(x.sent_at)})]}),!x.read_at&&n.jsx("button",{onClick:()=>l.mutate(x.id),className:"p-2 hover:bg-cream-100 rounded-xl transition-colors",title:"Mark as read",children:n.jsx(vne,{className:"h-4 w-4 text-burgundy-500"})})]})},x.id)):n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-8 border border-cream-200 text-center",children:[n.jsx(Ys,{className:"h-12 w-12 text-neutral-400 mx-auto mb-4"}),n.jsx("p",{className:"text-neutral-500",children:"No notifications yet."}),n.jsx("p",{className:"text-neutral-400 text-sm mt-1",children:"You'll receive updates about picks, scores, and league activity here."})]})}):n.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200",children:[n.jsxs("div",{className:"px-4 py-3 border-b border-cream-200",children:[n.jsx("h2",{className:"text-lg font-display font-bold text-neutral-800",children:"Notification Preferences"}),n.jsx("p",{className:"text-neutral-500 text-sm",children:"Choose how you want to receive updates"})]}),n.jsxs("div",{className:"divide-y divide-cream-100",children:[n.jsxs("div",{className:"p-4 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-xl",children:n.jsx(sn,{className:"h-5 w-5 text-blue-500"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-neutral-800 font-medium",children:"Email Notifications"}),n.jsx("p",{className:"text-neutral-500 text-sm",children:"Receive updates via email"})]})]}),n.jsx("button",{onClick:()=>d.mutate({notification_email:!(a!=null&&a.notification_email)}),disabled:d.isPending,className:`w-12 h-6 rounded-full transition-colors relative ${a!=null&&a.notification_email?"bg-burgundy-500":"bg-neutral-300"} ${d.isPending?"opacity-50":""}`,children:d.isPending?n.jsx(be,{className:"absolute top-1 left-4 w-4 h-4 text-white animate-spin"}):n.jsx("div",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-transform shadow ${a!=null&&a.notification_email?"left-7":"left-1"}`})})]}),n.jsxs("div",{className:"p-4 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-purple-100 rounded-xl",children:n.jsx(Uc,{className:"h-5 w-5 text-purple-500"})}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("p",{className:"text-neutral-800 font-medium",children:"Push Notifications"}),n.jsx("span",{className:"px-2 py-0.5 bg-purple-100 text-purple-600 text-xs rounded-full font-medium",children:"Coming Soon"})]}),n.jsx("p",{className:"text-neutral-500 text-sm",children:"Real-time alerts on your device"})]})]}),n.jsx("button",{disabled:!0,className:"w-12 h-6 rounded-full bg-neutral-200 relative cursor-not-allowed opacity-50",children:n.jsx("div",{className:"absolute top-1 left-1 w-4 h-4 bg-white rounded-full shadow"})})]})]})]}),t==="settings"&&n.jsxs("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-2xl p-4",children:[n.jsx("h3",{className:"text-neutral-800 font-medium mb-3",children:"What You'll Receive"}),n.jsxs("ul",{className:"space-y-2 text-sm text-neutral-600",children:[n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx(Ot,{className:"h-4 w-4 text-blue-500 mt-0.5 flex-shrink-0"}),n.jsx("span",{children:"Pick reminders before deadlines"})]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx(Ot,{className:"h-4 w-4 text-blue-500 mt-0.5 flex-shrink-0"}),n.jsx("span",{children:"Episode scoring results and standings updates"})]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx(Ot,{className:"h-4 w-4 text-blue-500 mt-0.5 flex-shrink-0"}),n.jsx("span",{children:"League activity and member updates"})]})]})]})]})]})}function uoe(){const{leagueId:e}=Wn(),t=$s(),r=at(),[s,a]=$.useState([]),[i,o]=$.useState(!1),[l,u]=$.useState(null),{data:d}=ie({queryKey:["current-user"],queryFn:async()=>{const{data:{user:I}}=await X.auth.getUser();return I}}),{data:p,isLoading:f}=ie({queryKey:["league",e],queryFn:async()=>{if(!e)throw new Error("No league ID");const{data:I,error:A}=await X.from("leagues").select("*, seasons(*)").eq("id",e).single();if(A)throw A;return I},enabled:!!e}),{data:m,isLoading:x}=ie({queryKey:["league-members",e],queryFn:async()=>{if(!e)throw new Error("No league ID");const{data:I,error:A}=await X.from("league_members").select("*, users(id, display_name, avatar_url)").eq("league_id",e).order("draft_position",{ascending:!0});if(A)throw A;const R=(I==null?void 0:I.map(O=>O.user_id))||[];return s.length===0&&R.length>0&&a(R),I||[]},enabled:!!e}),y=(d==null?void 0:d.id)===(p==null?void 0:p.commissioner_id),g=()=>{const I=[...s].sort(()=>Math.random()-.5);a(I),o(!0)},b=I=>{u(I)},_=(I,A)=>{if(I.preventDefault(),l===null||l===A)return;const R=[...s],[O]=R.splice(l,1);R.splice(A,0,O),a(R),u(A),o(!0)},w=()=>{u(null)},S=ke({mutationFn:async()=>{var M;if(!e)throw new Error("No league ID");const I=s.map((B,U)=>X.from("league_members").update({draft_position:U+1}).eq("league_id",e).eq("user_id",B)),R=(M=(await Promise.all(I)).find(B=>B.error))==null?void 0:M.error;if(R)throw R;const{error:O}=await X.from("leagues").update({draft_order:s}).eq("id",e);if(O)throw O},onSuccess:()=>{o(!1),r.invalidateQueries({queryKey:["league",e]}),r.invalidateQueries({queryKey:["league-members",e]})}}),j=ke({mutationFn:async()=>{if(!e)throw new Error("No league ID");const{error:I}=await X.from("leagues").update({draft_status:"in_progress",draft_started_at:new Date().toISOString(),status:"drafting"}).eq("id",e);if(I)throw I},onSuccess:()=>{r.invalidateQueries({queryKey:["league",e]}),t(`/leagues/${e}/draft`)}}),N=I=>m==null?void 0:m.find(A=>A.user_id===I),C=f||x,E=(p==null?void 0:p.draft_status)==="pending"&&m&&m.length>=2,T=(p==null?void 0:p.draft_status)!=="pending";return C?n.jsxs(n.Fragment,{children:[n.jsx(_e,{}),n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center",children:n.jsx(be,{className:"h-8 w-8 text-burgundy-500 animate-spin"})})]}):y?n.jsxs(n.Fragment,{children:[n.jsx(_e,{}),n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 p-4 pb-24",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx(se,{to:`/leagues/${e}/settings`,className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:n.jsx(ht,{className:"h-5 w-5 text-neutral-600"})}),n.jsxs("div",{children:[n.jsxs("h1",{className:"text-2xl font-display font-bold text-neutral-800 flex items-center gap-2",children:[n.jsx(dh,{className:"h-6 w-6 text-burgundy-500"}),"Draft Settings"]}),n.jsx("p",{className:"text-neutral-500",children:p==null?void 0:p.name})]})]}),n.jsx("div",{className:`rounded-2xl p-4 mb-6 ${T?"bg-amber-50 border border-amber-200":"bg-green-50 border border-green-200"}`,children:n.jsxs("div",{className:"flex items-center gap-3",children:[T?n.jsx(yt,{className:"h-5 w-5 text-amber-600"}):n.jsx(Ot,{className:"h-5 w-5 text-green-600"}),n.jsxs("div",{children:[n.jsx("p",{className:`font-medium ${T?"text-amber-800":"text-green-800"}`,children:T?`Draft is ${p==null?void 0:p.draft_status}`:"Draft has not started yet"}),n.jsx("p",{className:`text-sm ${T?"text-amber-600":"text-green-600"}`,children:T?"Draft order cannot be changed after the draft begins.":"Set the draft order below before starting."})]})]})}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 mb-6",children:[n.jsxs("div",{className:"px-4 py-3 border-b border-cream-200 flex items-center justify-between",children:[n.jsxs("h2",{className:"text-lg font-display font-bold text-neutral-800 flex items-center gap-2",children:[n.jsx(Ke,{className:"h-5 w-5 text-burgundy-500"}),"Draft Order"]}),!T&&n.jsxs("button",{onClick:g,className:"flex items-center gap-2 px-3 py-1.5 bg-burgundy-100 hover:bg-burgundy-200 text-burgundy-700 rounded-lg text-sm transition-colors",children:[n.jsx(dc,{className:"h-4 w-4"}),"Randomize"]})]}),n.jsx("div",{className:"divide-y divide-cream-100",children:s.map((I,A)=>{var M,B;const R=N(I),O=I===(d==null?void 0:d.id);return n.jsxs("div",{draggable:!T,onDragStart:()=>b(A),onDragOver:U=>_(U,A),onDragEnd:w,className:`flex items-center gap-3 px-4 py-3 ${T?"":"cursor-grab active:cursor-grabbing"} ${l===A?"bg-burgundy-50":""} ${O?"bg-burgundy-50/50":""}`,children:[!T&&n.jsx(cx,{className:"h-5 w-5 text-neutral-400 flex-shrink-0"}),n.jsx("div",{className:"w-8 h-8 bg-burgundy-500 rounded-full flex items-center justify-center text-white font-bold",children:A+1}),(M=R==null?void 0:R.users)!=null&&M.avatar_url?n.jsx("img",{src:R.users.avatar_url,alt:"",className:"w-10 h-10 rounded-full object-cover"}):n.jsx("div",{className:"w-10 h-10 bg-cream-100 rounded-full flex items-center justify-center border border-cream-200",children:n.jsx(Ke,{className:"h-5 w-5 text-neutral-400"})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("p",{className:"text-neutral-800 font-medium flex items-center gap-2",children:[(B=R==null?void 0:R.users)==null?void 0:B.display_name,I===(p==null?void 0:p.commissioner_id)&&n.jsx(er,{className:"h-4 w-4 text-burgundy-500"})]}),O&&n.jsx("p",{className:"text-burgundy-500 text-sm",children:"You"})]}),n.jsxs("div",{className:"text-neutral-500 text-sm",children:["Pick ",A+1," & ",((m==null?void 0:m.length)||0)*2-A]})]},I)})}),(m==null?void 0:m.length)===0&&n.jsxs("div",{className:"p-8 text-center",children:[n.jsx(Ke,{className:"h-12 w-12 text-neutral-400 mx-auto mb-4"}),n.jsx("p",{className:"text-neutral-600",children:"No members yet."}),n.jsx("p",{className:"text-neutral-500 text-sm",children:"Invite players to join your league."})]})]}),n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-2xl p-4 mb-6",children:[n.jsxs("h3",{className:"text-neutral-800 font-medium mb-2 flex items-center gap-2",children:[n.jsx(yt,{className:"h-5 w-5 text-blue-500"}),"Snake Draft Format"]}),n.jsx("p",{className:"text-neutral-600 text-sm",children:"Each player drafts 2 castaways. Round 1 goes in order (1, 2, 3...), then Round 2 reverses (...3, 2, 1). This ensures fairness by giving later picks an earlier second pick."})]}),n.jsxs("div",{className:"space-y-3",children:[!T&&n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>S.mutate(),disabled:!i||S.isPending,className:"btn btn-primary w-full flex items-center justify-center gap-2",children:S.isPending?n.jsx(be,{className:"h-5 w-5 animate-spin"}):n.jsxs(n.Fragment,{children:[n.jsx(Ar,{className:"h-5 w-5"}),"Save Draft Order"]})}),n.jsx("button",{onClick:()=>{confirm("Are you sure you want to start the draft? This cannot be undone.")&&j.mutate()},disabled:!E||j.isPending||i,className:"w-full bg-green-600 hover:bg-green-500 disabled:bg-neutral-300 disabled:text-neutral-500 text-white font-bold py-3 rounded-xl transition-colors flex items-center justify-center gap-2",children:j.isPending?n.jsx(be,{className:"h-5 w-5 animate-spin"}):"Start Draft Now"}),i&&n.jsx("p",{className:"text-amber-600 text-sm text-center",children:"Save your changes before starting the draft."})]}),T&&n.jsx(se,{to:`/leagues/${e}/draft`,className:"btn btn-primary w-full flex items-center justify-center gap-2",children:"Go to Draft Room"})]})]})]}):n.jsxs(n.Fragment,{children:[n.jsx(_e,{}),n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 p-4 pb-24",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx(se,{to:`/leagues/${e}`,className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:n.jsx(ht,{className:"h-5 w-5 text-neutral-600"})}),n.jsx("h1",{className:"text-2xl font-display font-bold text-neutral-800",children:"Draft Settings"})]}),n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-8 text-center",children:[n.jsx(yt,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),n.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-2",children:"Access Denied"}),n.jsx("p",{className:"text-neutral-600",children:"Only the league creator can manage draft settings."})]})]})]})}function doe(){const{user:e,isAdmin:t}=Et(),{getCopy:r}=Kt(),{isEditMode:s}=ol(),a=at(),[i,o]=$.useState([]),[l,u]=$.useState(!1),[d,p]=$.useState(null),[f,m]=$.useState(!1),[x,y]=$.useState(!1),{data:g,isLoading:b}=Dae(e==null?void 0:e.id),_=g&&g.length>0,{data:w}=ie({queryKey:["active-season"],queryFn:async()=>{const{data:z,error:Q}=await X.from("seasons").select("*").eq("is_active",!0).single();if(Q)throw Q;return z}}),{data:S,isLoading:j}=vP(w==null?void 0:w.id),{data:N,isLoading:C}=ie({queryKey:["draft-rankings",w==null?void 0:w.id,e==null?void 0:e.id],queryFn:async()=>{if(!(w!=null&&w.id)||!(e!=null&&e.id))return null;const{data:z,error:Q}=await X.from("draft_rankings").select("*").eq("season_id",w.id).eq("user_id",e.id).single();if(Q&&Q.code!=="PGRST116")throw Q;return z},enabled:!!(w!=null&&w.id)&&!!(e!=null&&e.id)}),{data:E}=ie({queryKey:["draft-rankings","strategy-order"],queryFn:async()=>{const{data:z}=await X.from("site_copy").select("content").eq("key","draft-rankings.strategy-order").single();if(z!=null&&z.content)try{return JSON.parse(z.content)}catch{return[0,1,2,3]}return[0,1,2,3]}}),T=ke({mutationFn:async z=>{const{error:Q}=await X.from("site_copy").upsert({key:"draft-rankings.strategy-order",page:"draft-rankings",content:JSON.stringify(z),is_active:!0},{onConflict:"key"});if(Q)throw Q},onSuccess:()=>{a.invalidateQueries({queryKey:["draft-rankings","strategy-order"]})}}),I=z=>{if(!E||z===0)return;const Q=[...E];[Q[z-1],Q[z]]=[Q[z],Q[z-1]],T.mutate(Q)},A=z=>{if(!E||z===E.length-1)return;const Q=[...E];[Q[z],Q[z+1]]=[Q[z+1],Q[z]],T.mutate(Q)},R=[{icon:ds,title:r("draft-rankings.strategy1.title","Study the Edit"),description:r("draft-rankings.strategy1.description","Castaways with more screen time and confessionals tend to score more points. Pay attention to who the editors are focusing on.")},{icon:Aa,title:r("draft-rankings.strategy2.title","Balance Risk"),description:r("draft-rankings.strategy2.description","Sometimes the safe pick isn't the best pick. A castaway in danger might score big if they survive or play an idol.")},{icon:Rr,title:r("draft-rankings.strategy3.title","Know the Meta"),description:r("draft-rankings.strategy3.description","Challenge beasts score consistently. Strategic players score in bursts. Social players accumulate over time.")},{icon:Nt,title:r("draft-rankings.strategy4.title","Think Long-Term"),description:r("draft-rankings.strategy4.description","Don't just think about this week. Consider who will make the merge, who has idol-finding potential, who might win.")}],O=z=>{const Q=[...z];for(let J=Q.length-1;J>0;J--){const V=Math.floor(Math.random()*(J+1));[Q[J],Q[V]]=[Q[V],Q[J]]}return Q};$.useEffect(()=>{if(S&&S.length>0&&i.length===0)if(N!=null&&N.rankings&&Array.isArray(N.rankings))o(N.rankings);else{const z=O(S.map(Q=>Q.id));o(z)}},[S,N,i.length]);const M=ke({mutationFn:async()=>{if(!(w!=null&&w.id)||!(e!=null&&e.id))throw new Error("Missing season or user");const{error:z}=await X.from("draft_rankings").upsert({user_id:e.id,season_id:w.id,rankings:i,updated_at:new Date().toISOString()});if(z)throw z},onSuccess:()=>{a.invalidateQueries({queryKey:["draft-rankings",w==null?void 0:w.id,e==null?void 0:e.id]}),u(!1),y(!0),setTimeout(()=>y(!1),3e3)}}),B=$.useMemo(()=>{const z=new Map;return S==null||S.forEach(Q=>z.set(Q.id,Q)),z},[S]),U=w!=null&&w.draft_deadline?new Date(w.draft_deadline):null,W=U?new Date>U:!1,K=z=>{if(z===0)return;const Q=[...i];[Q[z-1],Q[z]]=[Q[z],Q[z-1]],o(Q),u(!0)},F=z=>{if(z===i.length-1)return;const Q=[...i];[Q[z],Q[z+1]]=[Q[z+1],Q[z]],o(Q),u(!0)},H=z=>p(z),L=(z,Q)=>{if(z.preventDefault(),d===null||d===Q)return;const J=[...i],[V]=J.splice(d,1);J.splice(Q,0,V),o(J),p(Q),u(!0)},q=()=>p(null);return C||j||b?n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex flex-col",children:[n.jsx(_e,{}),n.jsx("main",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8 flex-1 flex items-center justify-center",children:n.jsx(be,{className:"h-8 w-8 text-burgundy-500 animate-spin"})}),n.jsx(tn,{})]}):_?w?n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex flex-col",children:[n.jsx(_e,{}),n.jsxs("main",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8 flex-1",children:[n.jsxs("div",{className:"mb-6",children:[n.jsxs(se,{to:"/dashboard",className:"inline-flex items-center gap-2 text-neutral-600 hover:text-neutral-800 mb-4",children:[n.jsx(ht,{className:"h-4 w-4"}),"Back to Dashboard"]}),n.jsx("h1",{className:"text-3xl font-display font-bold text-neutral-800 mb-2",children:r("draft-rankings.header.title","Draft Rankings")}),n.jsx("p",{className:"text-neutral-500",children:r("draft-rankings.header.subtitle","Rank castaways to set your draft preferences")})]}),n.jsxs("section",{className:"mb-6",children:[n.jsx(ne,{copyKey:"draft-rankings.strategies.section-title",as:"h2",className:"text-xl font-display font-bold text-neutral-800 mb-4",children:r("draft-rankings.strategies.section-title","Strategy Tips")}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(E||[0,1,2,3]).map((z,Q)=>{const J=R[z];return J?n.jsxs("div",{className:"bg-white rounded-xl shadow-card border border-cream-200 p-4 relative",children:[t&&s&&n.jsx("div",{className:"absolute top-2 right-2",children:n.jsx(yj,{index:Q,totalItems:R.length,onMoveUp:()=>I(Q),onMoveDown:()=>A(Q)})}),n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-9 h-9 bg-amber-100 rounded-lg flex items-center justify-center flex-shrink-0",children:n.jsx(J.icon,{className:"h-4 w-4 text-amber-600"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx(ne,{copyKey:`draft-rankings.strategy${z+1}.title`,as:"h3",className:"font-display font-bold text-neutral-800 text-sm mb-1",children:J.title}),n.jsx(ne,{copyKey:`draft-rankings.strategy${z+1}.description`,as:"p",className:"text-neutral-600 text-xs",children:J.description})]})]})]},z):null})})]}),U&&n.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-xl p-4 mb-6 flex items-center gap-3",children:[n.jsx(Nt,{className:"h-5 w-5 text-orange-600 flex-shrink-0"}),n.jsxs("div",{children:[n.jsxs("p",{className:"text-orange-800 font-medium",children:["Draft Deadline: ",Xre(U.toISOString())]}),W&&n.jsx("p",{className:"text-orange-600 text-sm mt-1",children:"Deadline has passed"})]})]}),x&&n.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4 mb-6 flex items-center gap-3",children:[n.jsx(Ot,{className:"h-5 w-5 text-green-600"}),n.jsx("p",{className:"text-green-800 font-medium",children:"Rankings saved successfully!"})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 overflow-hidden",children:[n.jsxs("div",{className:"p-6 border-b border-cream-100 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold text-neutral-800",children:"Your Rankings"}),n.jsx("p",{className:"text-sm text-neutral-500 mt-1",children:"Drag to reorder or use the arrows to move castaways up/down"})]}),n.jsx("button",{onClick:()=>{l?m(!0):M.mutate()},disabled:!l||M.isPending,className:"btn btn-primary flex items-center gap-2 disabled:opacity-50",children:M.isPending?n.jsxs(n.Fragment,{children:[n.jsx(be,{className:"h-4 w-4 animate-spin"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Ar,{className:"h-4 w-4"}),"Save Rankings"]})})]}),n.jsx("div",{className:"divide-y divide-cream-100",children:i.map((z,Q)=>{const J=B.get(z);return J?n.jsxs("div",{draggable:!0,onDragStart:()=>H(Q),onDragOver:V=>L(V,Q),onDragEnd:q,className:`flex items-center gap-4 p-4 hover:bg-cream-50 transition-colors ${d===Q?"opacity-50":""}`,children:[n.jsx(cx,{className:"h-5 w-5 text-neutral-400 cursor-move"}),n.jsx("div",{className:"w-12 text-center",children:n.jsxs("span",{className:"text-lg font-bold text-neutral-600",children:["#",Q+1]})}),n.jsx("img",{src:J.photo_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${J.name}`,alt:J.name,className:"w-12 h-12 rounded-full object-cover"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h3",{className:"font-semibold text-neutral-800",children:J.name}),J.tribe_original&&n.jsx("span",{className:`text-xs font-medium px-2 py-0.5 rounded-full ${J.tribe_original==="Vatu"?"bg-purple-100 text-purple-700":J.tribe_original==="Kalo"?"bg-teal-100 text-teal-700":J.tribe_original==="Cila"?"bg-orange-100 text-orange-700":"bg-neutral-100 text-neutral-700"}`,children:J.tribe_original})]}),J.occupation&&n.jsx("p",{className:"text-sm text-neutral-500",children:J.occupation})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>K(Q),disabled:Q===0,className:"p-2 rounded-lg hover:bg-cream-100 disabled:opacity-30 disabled:cursor-not-allowed",children:""}),n.jsx("button",{onClick:()=>F(Q),disabled:Q===i.length-1,className:"p-2 rounded-lg hover:bg-cream-100 disabled:opacity-30 disabled:cursor-not-allowed",children:""})]})]},z):null})})]}),f&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl p-6 max-w-lg w-full max-h-[90vh] flex flex-col",children:[n.jsx("h3",{className:"text-xl font-semibold text-neutral-800 mb-2",children:"Confirm Your Rankings"}),n.jsx("p",{className:"text-neutral-600 mb-4 text-sm",children:"This will update your global draft rankings for all leagues this season."}),n.jsx("div",{className:"flex-1 overflow-y-auto mb-4 border border-cream-200 rounded-xl",children:n.jsx("div",{className:"divide-y divide-cream-100",children:i.map((z,Q)=>{const J=B.get(z);if(!J)return null;const V=Q<2;return n.jsxs("div",{className:`flex items-center gap-3 p-3 ${V?"bg-amber-50":Q%2===0?"bg-white":"bg-cream-50"}`,children:[n.jsxs("span",{className:`w-8 text-center font-bold ${V?"text-amber-600":"text-neutral-500"}`,children:["#",Q+1]}),n.jsx("img",{src:J.photo_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${J.name}`,alt:J.name,className:"w-8 h-8 rounded-full object-cover"}),n.jsx("div",{className:"flex-1 min-w-0",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("p",{className:`font-medium truncate ${V?"text-amber-800":"text-neutral-800"}`,children:J.name}),J.tribe_original&&n.jsx("span",{className:`text-xs font-medium px-2 py-0.5 rounded-full ${J.tribe_original==="Vatu"?"bg-purple-100 text-purple-700":J.tribe_original==="Kalo"?"bg-teal-100 text-teal-700":J.tribe_original==="Cila"?"bg-orange-100 text-orange-700":"bg-neutral-100 text-neutral-700"}`,children:J.tribe_original})]})}),V&&n.jsx("span",{className:"text-xs bg-amber-200 text-amber-800 px-2 py-0.5 rounded-full font-medium",children:"Top Pick"})]},z)})})}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:()=>{m(!1),M.mutate()},className:"flex-1 btn btn-primary",children:"Confirm & Save"}),n.jsx("button",{onClick:()=>m(!1),className:"flex-1 btn btn-secondary",children:"Go Back"})]})]})})]}),n.jsx(tn,{})]}):n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex flex-col",children:[n.jsx(_e,{}),n.jsx("main",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8 flex-1 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx(yt,{className:"h-12 w-12 text-neutral-400 mx-auto mb-4"}),n.jsx("h2",{className:"text-xl font-bold text-neutral-700 mb-2",children:"No Active Season"}),n.jsx("p",{className:"text-neutral-500",children:"Check back when a new season begins!"})]})}),n.jsx(tn,{})]}):n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex flex-col",children:[n.jsx(_e,{}),n.jsxs("main",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8 flex-1",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h1",{className:"text-3xl font-display font-bold text-neutral-800 mb-2",children:r("draft-rankings.header.title","Draft Rankings")}),n.jsx("p",{className:"text-neutral-500",children:r("draft-rankings.header.subtitle","Rank castaways to set your draft preferences")})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 p-8 text-center",children:[n.jsx("div",{className:"w-16 h-16 bg-burgundy-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(Ke,{className:"h-8 w-8 text-burgundy-600"})}),n.jsx("h2",{className:"text-2xl font-display font-bold text-neutral-800 mb-3",children:"Join a League First"}),n.jsx("p",{className:"text-neutral-600 mb-6 max-w-md mx-auto",children:"To set your draft rankings, you need to be part of a league. Join an existing league or create your own to start ranking castaways for the draft!"}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[n.jsx(se,{to:"/leagues",className:"btn btn-primary",children:"Browse Leagues"}),n.jsx(se,{to:"/leagues/create",className:"btn btn-secondary",children:"Create a League"})]})]})]}),n.jsx(tn,{})]})}function hoe(){const{leagueId:e}=Wn(),[t,r]=$.useState(!1),[s,a]=$.useState(!1),{data:i}=ie({queryKey:["current-user"],queryFn:async()=>{const{data:{user:y}}=await X.auth.getUser();return y}}),{data:o,isLoading:l}=ie({queryKey:["league",e],queryFn:async()=>{if(!e)throw new Error("No league ID");const{data:y,error:g}=await X.from("leagues").select("*, seasons(*)").eq("id",e).single();if(g)throw g;return y},enabled:!!e}),{data:u}=ie({queryKey:["league-member-count",e],queryFn:async()=>{if(!e)throw new Error("No league ID");const{count:y,error:g}=await X.from("league_members").select("*",{count:"exact",head:!0}).eq("league_id",e);if(g)throw g;return y||0},enabled:!!e}),d=(i==null?void 0:i.id)===(o==null?void 0:o.commissioner_id),p=`${window.location.origin}/join/${o==null?void 0:o.code}`,f=((o==null?void 0:o.max_players)||12)-(u||0),m=async()=>{await navigator.clipboard.writeText(p),r(!0),setTimeout(()=>r(!1),2e3)},x=async()=>{var y,g;if(navigator.share)try{await navigator.share({title:`Join ${o==null?void 0:o.name}`,text:`Join my Survivor Fantasy league! Season ${(y=o==null?void 0:o.seasons)==null?void 0:y.number}: ${(g=o==null?void 0:o.seasons)==null?void 0:g.name}`,url:p})}catch{m()}else m()};return l?n.jsxs(n.Fragment,{children:[n.jsx(_e,{}),n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center",children:n.jsx(be,{className:"h-8 w-8 text-burgundy-500 animate-spin"})})]}):d?n.jsxs(n.Fragment,{children:[n.jsx(_e,{}),n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 p-4 pb-24",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx(se,{to:`/leagues/${e}/settings`,className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:n.jsx(ht,{className:"h-5 w-5 text-neutral-600"})}),n.jsxs("div",{children:[n.jsxs("h1",{className:"text-2xl font-display font-bold text-neutral-800 flex items-center gap-2",children:[n.jsx(sne,{className:"h-6 w-6 text-burgundy-500"}),"Invite Link"]}),n.jsx("p",{className:"text-neutral-500",children:o==null?void 0:o.name})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-4 border border-cream-200",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Ke,{className:"h-5 w-5 text-burgundy-500"}),n.jsx("span",{className:"text-neutral-500 text-sm",children:"Members"})]}),n.jsxs("p",{className:"text-2xl font-bold text-neutral-800",children:[u,"/",o==null?void 0:o.max_players]})]}),n.jsxs("div",{className:`rounded-2xl p-4 border ${f>0?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(er,{className:"h-5 w-5 text-burgundy-500"}),n.jsx("span",{className:"text-neutral-500 text-sm",children:"Spots Left"})]}),n.jsx("p",{className:`text-2xl font-bold ${f>0?"text-green-600":"text-red-600"}`,children:f})]})]}),n.jsxs("div",{className:"bg-burgundy-50 border border-burgundy-200 rounded-2xl p-6 mb-6 text-center",children:[n.jsx("p",{className:"text-burgundy-600 text-sm mb-2",children:"League Code"}),n.jsx("p",{className:"text-4xl font-mono font-bold text-burgundy-500 tracking-widest mb-4",children:o==null?void 0:o.code}),n.jsx("p",{className:"text-neutral-600 text-sm",children:"Share this code with friends to join your league"})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-4 border border-cream-200 mb-6",children:[n.jsx("p",{className:"text-neutral-500 text-sm mb-2",children:"Invite URL"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",value:p,readOnly:!0,className:"input flex-1 font-mono text-sm"}),n.jsx("button",{onClick:m,className:`px-4 py-2 rounded-xl font-medium transition-colors flex items-center gap-2 ${t?"bg-green-500 text-white":"bg-burgundy-500 hover:bg-burgundy-600 text-white"}`,children:t?n.jsxs(n.Fragment,{children:[n.jsx(Ot,{className:"h-4 w-4"}),"Copied!"]}):n.jsxs(n.Fragment,{children:[n.jsx(lx,{className:"h-4 w-4"}),"Copy"]})})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[n.jsxs("button",{onClick:x,className:"btn btn-primary flex items-center justify-center gap-2",children:[n.jsx(mx,{className:"h-5 w-5"}),"Share Invite"]}),n.jsxs("button",{onClick:()=>a(!s),className:"btn btn-secondary flex items-center justify-center gap-2",children:[n.jsx(qE,{className:"h-5 w-5"}),s?"Hide QR":"Show QR"]})]}),s&&n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-8 mb-6 text-center border border-cream-200",children:[n.jsx("div",{className:"w-48 h-48 mx-auto bg-cream-50 rounded-xl flex items-center justify-center border border-cream-200",children:n.jsx(qE,{className:"h-24 w-24 text-neutral-400"})}),n.jsxs("p",{className:"text-neutral-600 text-sm mt-4",children:["Scan to join ",o==null?void 0:o.name]})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200",children:[n.jsx("div",{className:"px-4 py-3 border-b border-cream-200",children:n.jsx("h2",{className:"text-neutral-800 font-medium",children:"Join Requirements"})}),n.jsxs("div",{className:"divide-y divide-cream-100",children:[n.jsxs("div",{className:"px-4 py-3 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(mr,{className:"h-5 w-5 text-neutral-400"}),n.jsx("span",{className:"text-neutral-800",children:"Password Protected"})]}),n.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs ${o!=null&&o.password_hash?"bg-amber-100 text-amber-700":"bg-green-100 text-green-700"}`,children:o!=null&&o.password_hash?"Yes":"No"})]}),n.jsxs("div",{className:"px-4 py-3 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(us,{className:"h-5 w-5 text-neutral-400"}),n.jsx("span",{className:"text-neutral-800",children:"Public League"})]}),n.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs ${o!=null&&o.is_public?"bg-green-100 text-green-700":"bg-neutral-100 text-neutral-600"}`,children:o!=null&&o.is_public?"Yes":"No"})]}),(o==null?void 0:o.require_donation)&&n.jsxs("div",{className:"px-4 py-3 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(er,{className:"h-5 w-5 text-burgundy-500"}),n.jsx("span",{className:"text-neutral-800",children:"Entry Fee"})]}),n.jsxs("span",{className:"text-burgundy-500 font-bold",children:["$",o.donation_amount]})]})]})]}),n.jsxs("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-2xl p-4",children:[n.jsxs("h3",{className:"text-neutral-800 font-medium mb-2 flex items-center gap-2",children:[n.jsx(yt,{className:"h-5 w-5 text-blue-500"}),"Invite Tips"]}),n.jsxs("ul",{className:"space-y-2 text-sm text-neutral-600",children:[n.jsx("li",{children:" Share the invite link via text, email, or social media"}),n.jsx("li",{children:" New members must create an account to join"}),n.jsx("li",{children:" The league code can be entered manually at /join"}),(o==null?void 0:o.require_donation)&&n.jsxs("li",{children:[" Members will need to pay the $",o.donation_amount," entry fee via Stripe"]})]})]}),n.jsx("div",{className:"mt-6",children:n.jsx(se,{to:`/leagues/${e}/settings`,className:"btn btn-secondary w-full flex items-center justify-center gap-2",children:"Manage League Settings"})})]})]}):n.jsxs(n.Fragment,{children:[n.jsx(_e,{}),n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 p-4 pb-24",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx(se,{to:`/leagues/${e}`,className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:n.jsx(ht,{className:"h-5 w-5 text-neutral-600"})}),n.jsx("h1",{className:"text-2xl font-display font-bold text-neutral-800",children:"Invite Link"})]}),n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-8 text-center",children:[n.jsx(yt,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),n.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-2",children:"Access Denied"}),n.jsx("p",{className:"text-neutral-600",children:"Only the league creator can manage invites."})]})]})]})}function foe(){return n.jsxs("div",{className:"min-h-screen bg-cream-50 flex flex-col",children:[n.jsx(_e,{}),n.jsxs("div",{className:"flex-1 max-w-4xl mx-auto px-6 py-12",children:[n.jsxs("div",{className:"mb-8",children:[n.jsxs(se,{to:"/",className:"inline-flex items-center gap-2 text-burgundy-600 hover:text-burgundy-700 mb-4",children:[n.jsx(ht,{className:"h-4 w-4"}),"Back to Home"]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Aa,{className:"h-8 w-8 text-burgundy-500"}),n.jsx("h1",{className:"text-3xl font-display font-bold text-neutral-800",children:"Privacy Policy"})]}),n.jsx("p",{className:"text-neutral-500 mt-2",children:"Last updated: December 26, 2025"})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-8 border border-cream-200 space-y-8",children:[n.jsxs("section",{children:[n.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-3",children:"1. Information We Collect"}),n.jsx("p",{className:"text-neutral-600 mb-3",children:"We collect information you provide directly to us when you:"}),n.jsxs("ul",{className:"list-disc list-inside text-neutral-600 space-y-2 ml-4",children:[n.jsx("li",{children:"Create an account (email address, display name)"}),n.jsx("li",{children:"Add a phone number for SMS notifications"}),n.jsx("li",{children:"Make payments for league entry fees"}),n.jsx("li",{children:"Participate in leagues, drafts, and weekly picks"}),n.jsx("li",{children:"Contact us for support"})]})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-3",children:"2. How We Use Your Information"}),n.jsx("p",{className:"text-neutral-600 mb-3",children:"We use the information we collect to:"}),n.jsxs("ul",{className:"list-disc list-inside text-neutral-600 space-y-2 ml-4",children:[n.jsx("li",{children:"Provide, maintain, and improve our services"}),n.jsx("li",{children:"Process transactions and send related information"}),n.jsx("li",{children:"Send you notifications about picks, scores, and league activity"}),n.jsx("li",{children:"Respond to your comments, questions, and support requests"}),n.jsx("li",{children:"Monitor and analyze trends, usage, and activities"})]})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-3",children:"3. Information Sharing"}),n.jsx("p",{className:"text-neutral-600 mb-3",children:"We do not sell, trade, or rent your personal information to third parties. We may share your information in the following circumstances:"}),n.jsxs("ul",{className:"list-disc list-inside text-neutral-600 space-y-2 ml-4",children:[n.jsx("li",{children:"With other league members (display name, picks, scores)"}),n.jsx("li",{children:"With service providers who assist in our operations (Stripe for payments, Twilio for SMS)"}),n.jsx("li",{children:"If required by law or to protect our rights"})]})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-3",children:"4. Data Security"}),n.jsx("p",{className:"text-neutral-600",children:"We take reasonable measures to help protect your personal information from loss, theft, misuse, unauthorized access, disclosure, alteration, and destruction. Your data is stored securely using industry-standard encryption and access controls."})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-3",children:"5. Your Choices"}),n.jsx("p",{className:"text-neutral-600 mb-3",children:"You may:"}),n.jsxs("ul",{className:"list-disc list-inside text-neutral-600 space-y-2 ml-4",children:[n.jsx("li",{children:"Update your account information at any time in your Profile"}),n.jsx("li",{children:"Opt out of promotional communications"}),n.jsx("li",{children:"Choose which notifications you receive (email, SMS, push)"}),n.jsx("li",{children:"Request deletion of your account by contacting us"})]})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-3",children:"6. Cookies and Tracking"}),n.jsx("p",{className:"text-neutral-600",children:"We use cookies and similar technologies to maintain your session, remember your preferences, and understand how you interact with our service. You can control cookies through your browser settings."})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-3",children:"7. Children's Privacy"}),n.jsx("p",{className:"text-neutral-600",children:"Our service is not directed to children under 13. We do not knowingly collect personal information from children under 13. If you believe we have collected information from a child under 13, please contact us."})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-3",children:"8. Changes to This Policy"}),n.jsx("p",{className:"text-neutral-600",children:'We may update this Privacy Policy from time to time. We will notify you of any changes by posting the new Privacy Policy on this page and updating the "Last updated" date.'})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-3",children:"9. Contact Us"}),n.jsxs("p",{className:"text-neutral-600",children:["If you have any questions about this Privacy Policy, please contact us at"," ",n.jsx(se,{to:"/contact",className:"text-burgundy-600 hover:text-burgundy-700 underline",children:"our contact page"}),"."]})]})]})]}),n.jsx(tn,{})]})}function moe(){return n.jsxs("div",{className:"min-h-screen bg-cream-50 flex flex-col",children:[n.jsx(_e,{}),n.jsxs("div",{className:"flex-1 max-w-4xl mx-auto px-6 py-12",children:[n.jsxs("div",{className:"mb-8",children:[n.jsxs(se,{to:"/",className:"inline-flex items-center gap-2 text-burgundy-600 hover:text-burgundy-700 mb-4",children:[n.jsx(ht,{className:"h-4 w-4"}),"Back to Home"]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Fc,{className:"h-8 w-8 text-burgundy-500"}),n.jsx("h1",{className:"text-3xl font-display font-bold text-neutral-800",children:"Terms of Service"})]}),n.jsx("p",{className:"text-neutral-500 mt-2",children:"Last updated: December 26, 2025"})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-8 border border-cream-200 space-y-8",children:[n.jsxs("section",{children:[n.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-3",children:"1. Acceptance of Terms"}),n.jsx("p",{className:"text-neutral-600",children:'By accessing or using Reality Games Survivor Fantasy League ("the Service"), you agree to be bound by these Terms of Service. If you do not agree to these terms, please do not use the Service.'})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-3",children:"2. Description of Service"}),n.jsx("p",{className:"text-neutral-600",children:'Reality Games Survivor Fantasy League is a fantasy sports platform where users draft castaways from the CBS television show "Survivor," make weekly picks, and compete in leagues based on castaway performance. This is a fan-made fantasy game and is not affiliated with, endorsed by, or sponsored by CBS, Survivor, or any related entities.'})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-3",children:"3. User Accounts"}),n.jsx("p",{className:"text-neutral-600 mb-3",children:"To use certain features of the Service, you must create an account. You agree to:"}),n.jsxs("ul",{className:"list-disc list-inside text-neutral-600 space-y-2 ml-4",children:[n.jsx("li",{children:"Provide accurate and complete information"}),n.jsx("li",{children:"Maintain the security of your account credentials"}),n.jsx("li",{children:"Notify us immediately of any unauthorized access"}),n.jsx("li",{children:"Accept responsibility for all activities under your account"})]})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-3",children:"4. League Entry Fees and Payments"}),n.jsx("p",{className:"text-neutral-600 mb-3",children:'Some leagues may require entry fees ("donations"). By joining a paid league:'}),n.jsxs("ul",{className:"list-disc list-inside text-neutral-600 space-y-2 ml-4",children:[n.jsx("li",{children:"You authorize us to process payment through Stripe"}),n.jsx("li",{children:"Refunds are available only if you leave before the draft begins"}),n.jsx("li",{children:"Site administrators have final discretion on all league payouts and prize distribution"})]})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-3",children:"5. Mobile and Device Usage"}),n.jsx("p",{className:"text-neutral-600 mb-3",children:"The Service is designed to be accessible on mobile devices, tablets, and desktop computers. By using the Service on any device:"}),n.jsxs("ul",{className:"list-disc list-inside text-neutral-600 space-y-2 ml-4",children:[n.jsx("li",{children:"You are responsible for ensuring your device meets minimum technical requirements"}),n.jsx("li",{children:"You are responsible for any data charges incurred through your mobile carrier"}),n.jsx("li",{children:"We are not responsible for device-specific issues or compatibility problems"}),n.jsx("li",{children:"Some features may be optimized for specific screen sizes or device types"}),n.jsx("li",{children:"You agree to use the Service in compliance with your device's terms of service"})]})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-3",children:"6. User Conduct"}),n.jsx("p",{className:"text-neutral-600 mb-3",children:"You agree not to:"}),n.jsxs("ul",{className:"list-disc list-inside text-neutral-600 space-y-2 ml-4",children:[n.jsx("li",{children:"Use the Service for any unlawful purpose"}),n.jsx("li",{children:"Harass, abuse, or harm other users"}),n.jsx("li",{children:"Attempt to gain unauthorized access to the Service"}),n.jsx("li",{children:"Interfere with or disrupt the Service"}),n.jsx("li",{children:"Create multiple accounts to gain unfair advantages"}),n.jsx("li",{children:"Use automated scripts or bots"})]})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-3",children:"7. Scoring and Game Rules"}),n.jsx("p",{className:"text-neutral-600",children:"Scoring is determined by our proprietary system based on castaway actions during each episode. We reserve the right to adjust scores if errors are discovered. All scoring decisions are final. Picks must be submitted before the posted deadline; late picks may be auto-filled."})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-3",children:"8. Intellectual Property"}),n.jsx("p",{className:"text-neutral-600",children:'The Service and its original content, features, and functionality are owned by Reality Games Fantasy League and are protected by copyright, trademark, and other intellectual property laws. "Survivor" is a trademark of CBS. We are not affiliated with CBS.'})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-3",children:"9. Disclaimer of Warranties"}),n.jsx("p",{className:"text-neutral-600",children:'THE SERVICE IS PROVIDED "AS IS" AND "AS AVAILABLE" WITHOUT WARRANTIES OF ANY KIND, EXPRESS OR IMPLIED. WE DO NOT GUARANTEE THAT THE SERVICE WILL BE UNINTERRUPTED, SECURE, OR ERROR-FREE.'})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-3",children:"10. Limitation of Liability"}),n.jsx("p",{className:"text-neutral-600",children:"TO THE MAXIMUM EXTENT PERMITTED BY LAW, WE SHALL NOT BE LIABLE FOR ANY INDIRECT, INCIDENTAL, SPECIAL, CONSEQUENTIAL, OR PUNITIVE DAMAGES ARISING FROM YOUR USE OF THE SERVICE, INCLUDING LOSS OF PROFITS, DATA, OR PRIZES."})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-3",children:"11. Termination"}),n.jsx("p",{className:"text-neutral-600",children:"We may terminate or suspend your account at any time for violations of these Terms or for any other reason at our discretion. Upon termination, your right to use the Service will immediately cease."})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-3",children:"12. Changes to Terms"}),n.jsx("p",{className:"text-neutral-600",children:"We reserve the right to modify these Terms at any time. We will provide notice of significant changes by posting the updated Terms on this page. Your continued use of the Service after changes constitutes acceptance of the new Terms."})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-3",children:"13. Contact Us"}),n.jsxs("p",{className:"text-neutral-600",children:["If you have any questions about these Terms, please contact us at"," ",n.jsx(se,{to:"/contact",className:"text-burgundy-600 hover:text-burgundy-700 underline",children:"our contact page"}),"."]})]})]})]}),n.jsx(tn,{})]})}function poe(){return n.jsxs("div",{className:"text-center mb-12",children:[n.jsxs("div",{className:"flex items-center justify-center gap-3 mb-6",children:[n.jsx(Rr,{className:"h-12 w-12 text-burgundy-500"}),n.jsx("h1",{className:"text-5xl md:text-6xl font-display font-bold text-neutral-800",children:"Survivor Trivia Challenge"})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-8 border-2 border-burgundy-200 mb-8 max-w-3xl mx-auto",children:[n.jsx("h2",{className:"text-2xl font-display font-bold text-burgundy-600 mb-6",children:"How It Works"}),n.jsxs("div",{className:"space-y-4 text-left",children:[n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:"w-8 h-8 bg-burgundy-100 rounded-full flex items-center justify-center flex-shrink-0 mt-1",children:n.jsx("span",{className:"text-burgundy-600 font-bold",children:"1"})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-neutral-800 mb-1",children:"Answer All 24 Questions"}),n.jsx("p",{className:"text-neutral-600 text-sm",children:"You can answer all 24 questions in one day if you get them all right. Prove you're a true Survivor fan!"})]})]}),n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center flex-shrink-0 mt-1",children:n.jsx(Nt,{className:"h-4 w-4 text-red-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-neutral-800 mb-1",children:"20 Seconds Per Question"}),n.jsx("p",{className:"text-neutral-600 text-sm",children:"Each question has a 20-second timer. Time runs out? That counts as wrong."})]})]}),n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center flex-shrink-0 mt-1",children:n.jsx(mr,{className:"h-4 w-4 text-red-600"})}),n.jsxs("div",{children:[n.jsxs("p",{className:"font-semibold text-neutral-800 mb-1",children:["Get One Wrong? ",n.jsx("span",{className:"text-red-600",children:"You have to try again in 2 hours"})]}),n.jsx("p",{className:"text-neutral-600 text-sm",children:"Miss a question or run out of time? You're locked out for 2 hours. Come back soon to continue."})]})]}),n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:"w-8 h-8 bg-burgundy-100 rounded-full flex items-center justify-center flex-shrink-0 mt-1",children:n.jsx(ot,{className:"h-4 w-4 text-burgundy-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-neutral-800 mb-1",children:"Leaderboard Tracks Your Progress"}),n.jsx("p",{className:"text-neutral-600 text-sm",children:"See how many days it took you to complete all 24 questions. Fastest completion wins!"})]})]})]})]})]})}function xoe({questionsAnswered:e,totalQuestions:t,questionsCorrect:r}){const s=Array.from({length:t},(a,i)=>({isLit:i<r,isCurrent:i===r&&e===r,number:i+1}));return n.jsxs("div",{className:"mb-8 bg-white rounded-2xl shadow-card p-6 border border-cream-200",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("span",{className:"text-sm font-medium text-neutral-600",children:[r," of ",t," torches lit"]}),n.jsxs("span",{className:"text-sm font-medium text-burgundy-600",children:[r," correct"]})]}),n.jsx("div",{className:"grid grid-cols-6 sm:grid-cols-8 md:grid-cols-12 gap-2",children:s.map(a=>n.jsxs("div",{className:`relative flex flex-col items-center justify-center p-1 rounded-lg transition-all duration-300 ${a.isLit?"bg-gradient-to-b from-orange-100 to-amber-50":a.isCurrent?"bg-burgundy-50 ring-2 ring-burgundy-300 animate-pulse":"bg-neutral-50"}`,title:`Question ${a.number}${a.isLit?" ":""}`,children:[n.jsxs("div",{className:"relative",children:[a.isLit&&n.jsx("div",{className:"absolute -top-1 left-1/2 -translate-x-1/2",children:n.jsx(Rr,{className:"h-4 w-4 text-orange-500 animate-flicker",fill:"currentColor"})}),n.jsx("div",{className:`w-2 h-5 rounded-sm mt-2 ${a.isLit?"bg-gradient-to-b from-amber-600 to-amber-800":"bg-neutral-300"}`})]}),n.jsx("span",{className:`text-[10px] font-medium mt-1 ${a.isLit?"text-amber-700":"text-neutral-400"}`,children:a.number})]},a.number))}),n.jsx("style",{children:`
        @keyframes flicker {
          0%, 100% { opacity: 1; transform: translateX(-50%) scale(1); }
          25% { opacity: 0.9; transform: translateX(-50%) scale(1.05); }
          50% { opacity: 1; transform: translateX(-50%) scale(0.95); }
          75% { opacity: 0.85; transform: translateX(-50%) scale(1.02); }
        }
        .animate-flicker {
          animation: flicker 0.8s ease-in-out infinite;
        }
      `})]})}function goe({lockedUntil:e}){const t=at(),[r,s]=$.useState(null),[a,i]=$.useState(!1),o=()=>{const u=new Date,p=new Date(e).getTime()-u.getTime();if(p<=0)return i(!0),null;const f=Math.floor(p/(1e3*60*60)),m=Math.floor(p%(1e3*60*60)/(1e3*60)),x=Math.floor(p%(1e3*60)/1e3);return f>0?`${f}h ${m}m`:m>0?`${m}m ${x}s`:`${x}s`};$.useEffect(()=>{const u=()=>{const p=o();s(p)};u();const d=setInterval(u,1e3);return()=>clearInterval(d)},[e]),$.useEffect(()=>{a&&(t.invalidateQueries({queryKey:["trivia","progress"]}),t.invalidateQueries({queryKey:["trivia","next"]}))},[a,t]);const l=()=>{t.invalidateQueries({queryKey:["trivia","progress"]}),t.invalidateQueries({queryKey:["trivia","next"]})};return a?n.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 border-4 border-green-400 rounded-2xl p-8 mb-8 text-center shadow-lg",children:[n.jsx("div",{className:"text-6xl mb-4",children:""}),n.jsx("h2",{className:"text-4xl font-display font-bold text-green-800 mb-4",children:"You're Back!"}),n.jsx("p",{className:"text-xl text-green-700 mb-6 font-semibold",children:"Your lockout has expired. Ready to try again?"}),n.jsxs("button",{onClick:l,className:"inline-flex items-center gap-2 px-8 py-4 bg-green-600 text-white font-bold rounded-xl hover:bg-green-700 transition-colors shadow-md text-lg",children:[n.jsx(an,{className:"h-5 w-5"}),"Continue Trivia"]})]}):n.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-red-100 border-4 border-red-400 rounded-2xl p-8 mb-8 text-center shadow-lg",children:[n.jsx("div",{className:"text-6xl mb-4",children:""}),n.jsx("h2",{className:"text-4xl font-display font-bold text-red-800 mb-4",children:"It's Time For You To Go"}),n.jsx("p",{className:"text-xl text-red-700 mb-2 font-semibold",children:"The tribe has spoken."}),n.jsxs("p",{className:"text-lg text-red-600 mb-6",children:["You got a question wrong. Come back in"," ",n.jsx("strong",{className:"text-2xl font-mono",children:r||"a moment"})," to continue."]}),n.jsxs("p",{className:"text-sm text-red-500 mb-6",children:["Lockout expires: ",km(e)]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[n.jsxs(se,{to:"/dashboard",className:"inline-flex items-center justify-center gap-2 px-8 py-4 bg-burgundy-600 text-white font-bold rounded-xl hover:bg-burgundy-700 transition-colors shadow-md text-lg",children:["Join a League While You Wait",n.jsx(Hn,{className:"h-5 w-5"})]}),n.jsxs("button",{onClick:l,className:"inline-flex items-center justify-center gap-2 px-6 py-4 bg-white text-red-600 font-semibold rounded-xl border-2 border-red-300 hover:bg-red-50 transition-colors",children:[n.jsx(an,{className:"h-4 w-4"}),"Check Status"]})]})]})}function yoe({daysToComplete:e}){return n.jsxs("div",{className:"bg-green-50 border-2 border-green-300 rounded-2xl p-8 mb-8 text-center",children:[n.jsx(ot,{className:"h-12 w-12 text-green-600 mx-auto mb-4"}),n.jsx("h3",{className:"text-2xl font-display font-bold text-green-800 mb-2",children:"Congratulations! You Completed All 24 Questions!"}),n.jsxs("p",{className:"text-green-700 text-lg mb-4",children:["You finished in"," ",n.jsxs("strong",{children:[e," day",e!==1?"s":""]})]}),n.jsx(se,{to:"/dashboard",className:"inline-block bg-green-600 text-white font-bold px-8 py-3 rounded-xl hover:bg-green-700 transition-colors",children:"Join a League Now"})]})}function boe({question:e,totalQuestions:t,timeRemaining:r,selectedIndex:s,showResult:a,isCorrect:i,isTimedOut:o,alreadyAnswered:l,userAnswer:u,correctIndex:d,funFact:p,wrongMessage:f,isPending:m,onAnswer:x,questionReady:y,onStartQuestion:g,onNextQuestion:b}){return!y&&!l&&!a?n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-8 border-2 border-burgundy-200 text-center",children:[n.jsx("div",{className:"mb-6",children:n.jsxs("span",{className:"inline-block px-4 py-2 bg-burgundy-100 text-burgundy-700 rounded-full text-sm font-medium",children:["Question ",e.questionNumber," of ",t]})}),n.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-orange-500 to-red-600 rounded-full mb-6 shadow-lg",children:n.jsx(fx,{className:"h-10 w-10 text-white ml-1"})}),n.jsx("h2",{className:"text-2xl font-display font-bold text-neutral-800 mb-3",children:"Ready?"}),n.jsxs("p",{className:"text-neutral-600 mb-6 max-w-sm mx-auto",children:["You'll have ",n.jsx("span",{className:"font-bold text-red-600",children:"20 seconds"})," to answer this question. The timer starts when you click the button below."]}),n.jsx("button",{onClick:g,className:"px-8 py-4 bg-gradient-to-r from-burgundy-600 to-burgundy-700 text-white font-bold text-lg rounded-xl hover:from-burgundy-500 hover:to-burgundy-600 transition-all shadow-lg transform hover:scale-105",children:"Start Question"})]}):n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-8 border-2 border-burgundy-200",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("div",{children:n.jsxs("h2",{className:"text-xl font-display font-bold text-neutral-800",children:["Question ",e.questionNumber," of ",t]})}),!l&&!a&&n.jsxs("div",{className:`flex items-center gap-2 rounded-xl px-4 py-2 ${r<=5?"bg-red-100 border-2 border-red-400 animate-pulse":"bg-red-50 border-2 border-red-300"}`,children:[n.jsx(Nt,{className:"h-5 w-5 text-red-600"}),n.jsxs("span",{className:"font-bold text-red-700 text-lg",children:[r,"s"]})]})]}),n.jsx("p",{className:"text-2xl font-display font-bold text-neutral-800 mb-6",children:e.question}),n.jsx("div",{className:"space-y-3 mb-6",children:e.options.map((_,w)=>{const S=s===w||(u==null?void 0:u.selectedIndex)===w,j=a||l,N=S,C=j&&w===d;let E="w-full text-left p-4 rounded-xl border-2 transition-all ";return l?N?E+=u!=null&&u.isCorrect?"bg-green-50 border-green-300 text-green-800":"bg-red-50 border-red-300 text-red-800":C?E+="bg-green-50 border-green-300 text-green-800":E+="bg-neutral-50 border-cream-200 text-neutral-600":a?S?E+=i?"bg-green-50 border-green-300 text-green-800":"bg-red-50 border-red-300 text-red-800":C?E+="bg-green-50 border-green-300 text-green-800":E+="bg-neutral-50 border-cream-200 text-neutral-600":E+="bg-neutral-50 border-cream-200 text-neutral-700 hover:border-burgundy-300 hover:bg-cream-50 cursor-pointer",n.jsx("button",{onClick:()=>x(w),disabled:l||a||o||m,className:E,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{children:_}),a||l?n.jsxs(n.Fragment,{children:[N&&n.jsx("span",{className:"ml-2",children:u!=null&&u.isCorrect||i?n.jsx(Ot,{className:"h-5 w-5 text-green-600"}):n.jsx(It,{className:"h-5 w-5 text-red-600"})}),!N&&C&&n.jsx(Ot,{className:"h-5 w-5 text-green-600 ml-2"})]}):null]})},w)})}),(a||l)&&n.jsx("div",{className:`p-6 rounded-xl mb-6 ${u!=null&&u.isCorrect||i?"bg-green-50 border-2 border-green-300":"bg-red-50 border-2 border-red-300"}`,children:i?n.jsxs(n.Fragment,{children:[n.jsxs("p",{className:"text-lg font-bold text-green-800 flex items-center justify-center gap-2 mb-4",children:[n.jsx("span",{className:"text-2xl",children:""})," Correct!"]}),n.jsxs("button",{onClick:b,className:"w-full px-6 py-4 bg-gradient-to-r from-green-600 to-green-700 text-white font-bold text-lg rounded-xl hover:from-green-500 hover:to-green-600 transition-all shadow-lg flex items-center justify-center gap-2",children:["Next Question",n.jsx(Hn,{className:"h-5 w-5"})]})]}):n.jsxs(n.Fragment,{children:[n.jsxs("p",{className:"text-2xl font-bold text-red-800 mb-3 text-center",children:[" ",f]}),n.jsxs("p",{className:"text-sm text-red-700 text-center mb-2",children:["Correct answer:"," ",n.jsx("span",{className:"font-semibold",children:e.options[d]})]}),n.jsx("div",{className:"bg-red-100 border border-red-300 rounded-lg p-3 mt-3",children:n.jsx("p",{className:"text-sm font-semibold text-red-800 text-center",children:" You're locked out for 2 hours. Come back soon to continue."})})]})}),o&&!a&&n.jsx("div",{className:"p-4 bg-yellow-50 border-2 border-yellow-300 rounded-xl mb-6",children:n.jsxs("p",{className:"text-sm font-medium text-yellow-800 text-center",children:[" Time's up! ",f]})})]})}function voe(){return n.jsxs("div",{className:"mt-8 bg-gradient-to-r from-burgundy-500 to-red-600 rounded-2xl p-8 text-white text-center shadow-lg",children:[n.jsx(ot,{className:"h-12 w-12 mx-auto mb-4"}),n.jsx("h3",{className:"text-2xl font-display font-bold mb-2",children:"Ready to Play for Real?"}),n.jsx("p",{className:"text-burgundy-100 mb-6 max-w-lg mx-auto",children:"Join Season 50 and compete in fantasy leagues. Draft castaways, make weekly picks, and prove you're the ultimate Survivor fan!"}),n.jsx(se,{to:"/dashboard",className:"inline-block bg-white text-burgundy-600 font-bold px-8 py-4 rounded-xl hover:bg-cream-100 transition-colors",children:"Join a League Now"})]})}function woe({isOpen:e,onClose:t,accessToken:r,currentUserId:s,title:a,subtitle:i,isCompletion:o=!1}){const{data:l,isLoading:u}=ie({queryKey:["trivia","leaderboard"],queryFn:async()=>{var x;const m=await Zn("/trivia/leaderboard",r);if(m.error)throw new Error(m.error);return((x=m.data)==null?void 0:x.data)||{leaderboard:[]}},enabled:e&&!!r});if(!e)return null;const d=(l==null?void 0:l.leaderboard)||[],p=m=>m===1?n.jsx(ot,{className:"h-5 w-5 text-yellow-500"}):m===2?n.jsx(Er,{className:"h-5 w-5 text-gray-400"}):m===3?n.jsx(Er,{className:"h-5 w-5 text-amber-600"}):n.jsx("span",{className:"text-neutral-500 font-mono text-sm",children:m}),f=d.find(m=>m.userId===s);return n.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[n.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:t}),n.jsxs("div",{className:`relative rounded-2xl shadow-2xl max-w-lg w-full max-h-[85vh] overflow-hidden ${o?"bg-gradient-to-b from-yellow-900/90 to-neutral-900 border border-yellow-500/30":"bg-gradient-to-b from-neutral-900 to-neutral-800 border border-orange-500/30"}`,children:[n.jsx("div",{className:`absolute top-0 left-0 right-0 h-32 pointer-events-none ${o?"bg-gradient-to-b from-yellow-500/20 to-transparent":"bg-gradient-to-b from-orange-600/20 to-transparent"}`}),n.jsx("button",{onClick:t,className:"absolute top-4 right-4 p-2 text-neutral-400 hover:text-white transition-colors z-10",children:n.jsx(It,{className:"h-5 w-5"})}),n.jsxs("div",{className:"relative px-6 pt-8 pb-4 text-center",children:[n.jsx("div",{className:"flex justify-center mb-4",children:n.jsx("div",{className:"relative",children:o?n.jsxs(n.Fragment,{children:[n.jsx(ot,{className:"h-16 w-16 text-yellow-400"}),n.jsx(su,{className:"absolute -top-2 -right-2 h-8 w-8 text-yellow-300 animate-pulse"}),n.jsx("div",{className:"absolute inset-0 h-16 w-16 bg-yellow-500/30 blur-xl"})]}):n.jsxs(n.Fragment,{children:[n.jsx(Rr,{className:"h-16 w-16 text-orange-500 animate-pulse"}),n.jsx("div",{className:"absolute inset-0 h-16 w-16 bg-orange-500/30 blur-xl"})]})})}),n.jsx("h2",{className:`text-2xl font-display font-bold mb-2 ${o?"text-yellow-400":"text-orange-400"}`,children:a}),n.jsx("p",{className:"text-neutral-400 text-sm",children:i}),o&&f&&n.jsxs("div",{className:"mt-4 inline-flex items-center gap-2 bg-yellow-500/20 px-4 py-2 rounded-full border border-yellow-500/30",children:[n.jsx(ot,{className:"h-4 w-4 text-yellow-400"}),n.jsxs("span",{className:"text-yellow-300 font-semibold",children:["You ranked #",f.rank,"  ",f.daysToComplete," ",f.daysToComplete===1?"day":"days","  ",f.attempts," ",f.attempts===1?"try":"tries"]})]})]}),n.jsxs("div",{className:"px-6 pb-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(ot,{className:"h-5 w-5 text-yellow-500"}),n.jsx("h3",{className:"text-lg font-semibold text-white",children:"Trivia Champions"})]}),u?n.jsx("div",{className:"flex justify-center py-8",children:n.jsx("div",{className:`animate-spin h-8 w-8 border-2 border-t-transparent rounded-full ${o?"border-yellow-500":"border-orange-500"}`})}):d.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx("p",{className:"text-neutral-400",children:"No one has completed the trivia yet."}),n.jsx("p",{className:"text-sm text-neutral-500 mt-2",children:"Be the first to answer all 24 questions!"})]}):n.jsx("div",{className:"space-y-2 max-h-[40vh] overflow-y-auto pr-2 custom-scrollbar",children:d.map(m=>{const x=m.userId===s;return n.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl transition-colors ${x?o?"bg-yellow-500/20 border border-yellow-500/30":"bg-orange-500/20 border border-orange-500/30":"bg-neutral-700/50 hover:bg-neutral-700/70"}`,children:[n.jsx("div",{className:"w-8 flex justify-center",children:p(m.rank)}),n.jsx("div",{className:"flex-1 min-w-0",children:n.jsxs("p",{className:`font-medium truncate ${x?o?"text-yellow-300":"text-orange-300":"text-white"}`,children:[m.displayName,x&&n.jsx("span",{className:`ml-2 text-xs ${o?"text-yellow-400":"text-orange-400"}`,children:"(You)"})]})}),n.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[n.jsxs("div",{className:"flex items-center gap-1",title:"Days to complete",children:[n.jsx(Nt,{className:"h-4 w-4 text-neutral-400"}),n.jsxs("span",{className:x?o?"text-yellow-300":"text-orange-300":"text-neutral-300",children:[m.daysToComplete,"d"]})]}),n.jsxs("div",{className:"flex items-center gap-1",title:"Number of attempts",children:[n.jsx(mj,{className:"h-3.5 w-3.5 text-neutral-400"}),n.jsxs("span",{className:x?o?"text-yellow-300":"text-orange-300":"text-neutral-300",children:[m.attempts,"x"]})]})]})]},m.userId)})})]}),n.jsx("div",{className:"px-6 pb-6 space-y-3",children:o?n.jsxs(n.Fragment,{children:[n.jsx(se,{to:"/dashboard",className:"block w-full py-3 bg-gradient-to-r from-yellow-500 to-orange-500 text-white font-semibold rounded-xl hover:from-yellow-400 hover:to-orange-400 transition-all shadow-lg shadow-yellow-500/25 text-center",children:"Join a Fantasy League "}),n.jsx("button",{onClick:t,className:"w-full py-3 bg-neutral-700 text-neutral-300 font-medium rounded-xl hover:bg-neutral-600 transition-all",children:"Close"})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-neutral-800/50 rounded-xl p-4 mb-3 border border-orange-500/20",children:[n.jsx("p",{className:"text-neutral-300 text-sm mb-3 text-center",children:"While you wait, why not join a Fantasy Survivor league?"}),n.jsx(se,{to:"/leagues",className:"block w-full py-2.5 bg-gradient-to-r from-burgundy-600 to-burgundy-700 text-white font-semibold rounded-lg hover:from-burgundy-500 hover:to-burgundy-600 transition-all text-center text-sm",children:"Browse Leagues "})]}),n.jsx("button",{onClick:t,className:"w-full py-3 bg-gradient-to-r from-orange-600 to-red-600 text-white font-semibold rounded-xl hover:from-orange-500 hover:to-red-500 transition-all shadow-lg shadow-orange-500/25",children:"Try Again Tomorrow"})]})})]})]})}const Xf=["It's time for you to go.","The Tribe Has Spoken.","Your torch has been snuffed.","Time for you to go.","Blindsided!","That's a vote against you.","You've been voted out of the trivia.","Grab your torch and head out.","You didn't have the numbers.","Should've played your idol.","The jury saw right through that.","Outplayed. Outwitted. Outlasted... by this quiz.","Drop your buff.","The tribe has spoken... and they said no.","Not immunity-worthy."];function _oe(){var Ce,Fe;const{user:e,loading:t,session:r}=Et(),s=at(),[a,i]=$.useState(!1),[o,l]=$.useState(!1),[u,d]=$.useState(null),[p,f]=$.useState(20),[m,x]=$.useState(!1),[y,g]=$.useState(!1),[b,_]=$.useState(!1),[w,S]=$.useState(!1),[j,N]=$.useState(null),[C,E]=$.useState("It's time for you to go."),[T,I]=$.useState(!1),[A,R]=$.useState("The Tribe Has Spoken"),[O,M]=$.useState(!1),{data:B}=ie({queryKey:["trivia","progress"],queryFn:async()=>{var Ne;if(!(r!=null&&r.access_token))throw new Error("Not authenticated");const Ae=await Zn("/trivia/progress",r.access_token);if(Ae.error)throw new Error(Ae.error);if(!((Ne=Ae.data)!=null&&Ne.data))throw new Error("No data returned");return Ae.data.data},enabled:!!e&&!!(r!=null&&r.access_token),refetchInterval:Ae=>{const Ne=Ae.state.data;return Ne!=null&&Ne.isLocked?3e4:6e4}});$.useEffect(()=>{B&&B.questionsAnswered>0&&!B.isLocked&&!B.isComplete&&i(!0)},[B]),$.useEffect(()=>{B&&(O&&!B.isLocked&&(console.log("Lockout expired, refreshing trivia state..."),s.invalidateQueries({queryKey:["trivia","next"]}),_(!1),d(null),g(!1),f(20),l(!1),x(!1),I(!1),i(!0)),M(B.isLocked))},[B==null?void 0:B.isLocked,O,s]);const{data:U,isLoading:Y,refetch:W}=ie({queryKey:["trivia","next"],queryFn:async()=>{var Ne;if(!(r!=null&&r.access_token))throw new Error("Not authenticated");const Ae=await Zn("/trivia/next",r.access_token);if(Ae.error)throw new Error(Ae.error);if(!((Ne=Ae.data)!=null&&Ne.data))throw new Error("No data returned");return Ae.data.data},enabled:!!e&&!!(r!=null&&r.access_token)&&a,retry:!1});$.useEffect(()=>{U!=null&&U.question&&!U.alreadyAnswered&&!U.isLocked&&a&&(f(20),g(!1),_(!1),d(null),N(null),l(!1),x(!1))},[(Ce=U==null?void 0:U.question)==null?void 0:Ce.id,a]);const K=()=>{l(!0),x(!0)};$.useEffect(()=>{if(!m||b||y)return;if(p<=0){g(!0),x(!1);return}const Ae=setInterval(()=>{f(Ne=>Ne<=1?(g(!0),x(!1),0):Ne-1)},1e3);return()=>clearInterval(Ae)},[p,m,b,y]);const F=ke({mutationFn:async Ae=>{var Be;if(!(r!=null&&r.access_token))throw new Error("Not authenticated");if(!(U!=null&&U.question))throw new Error("No question available");const Ne=await Zn("/trivia/answer",r.access_token,{method:"POST",body:JSON.stringify({questionId:U.question.id,selectedIndex:Ae})});if(Ne.error)throw new Error(Ne.error);if(!((Be=Ne.data)!=null&&Be.data))throw new Error("No data returned");return Ne.data.data},onSuccess:Ae=>{if(x(!1),S(Ae.isCorrect),N(Ae.funFact||null),_(!0),!Ae.isCorrect){const Ne=Xf[Math.floor(Math.random()*Xf.length)];E(Ne),R(Ne),setTimeout(()=>{I(!0)},3e3)}s.invalidateQueries({queryKey:["trivia","next"]}),s.invalidateQueries({queryKey:["trivia","progress"]})}}),H=$.useCallback(()=>{U!=null&&U.question&&!U.alreadyAnswered&&!b&&(E(Xf[Math.floor(Math.random()*Xf.length)]),F.mutate(-1))},[U==null?void 0:U.question,U==null?void 0:U.alreadyAnswered,b,F]);$.useEffect(()=>{y&&(U!=null&&U.question)&&!U.alreadyAnswered&&!b&&H()},[y,U==null?void 0:U.question,U==null?void 0:U.alreadyAnswered,b,H]);const L=Ae=>{U!=null&&U.alreadyAnswered||b||y||U!=null&&U.isLocked||(d(Ae),x(!1),F.mutate(Ae))},q=$.useCallback(()=>{W(),_(!1),d(null),g(!1),f(20),l(!1)},[W]);if($.useEffect(()=>{(U!=null&&U.isComplete||B!=null&&B.isComplete)&&(R("Trivia Champion!"),E("You completed all 24 questions!"),I(!0))},[U==null?void 0:U.isComplete,B==null?void 0:B.isComplete]),!t&&!e)return n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex flex-col",children:[n.jsx(_e,{}),n.jsxs("main",{className:"flex-1 max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-orange-500 to-red-600 rounded-full mb-6 shadow-lg",children:n.jsx(ot,{className:"h-10 w-10 text-white"})}),n.jsx("h1",{className:"text-4xl font-display font-bold text-neutral-800 mb-4",children:"Survivor Trivia Challenge"}),n.jsx("p",{className:"text-lg text-neutral-600 max-w-md mx-auto",children:"Answer 24 questions to prove you're the ultimate Survivor fan. Get one wrong? Come back in 2 hours!"})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200 mb-8",children:[n.jsx("h2",{className:"text-xl font-semibold text-neutral-800 mb-4",children:"How It Works"}),n.jsxs("ul",{className:"space-y-3 text-neutral-600",children:[n.jsxs("li",{className:"flex items-start gap-3",children:[n.jsx("span",{className:"text-orange-500 font-bold",children:"1."}),n.jsx("span",{children:"Answer 24 Survivor trivia questions"})]}),n.jsxs("li",{className:"flex items-start gap-3",children:[n.jsx("span",{className:"text-orange-500 font-bold",children:"2."}),n.jsx("span",{children:"You have 20 seconds per question"})]}),n.jsxs("li",{className:"flex items-start gap-3",children:[n.jsx("span",{className:"text-orange-500 font-bold",children:"3."}),n.jsx("span",{children:"Get one wrong = 2 hour lockout"})]}),n.jsxs("li",{className:"flex items-start gap-3",children:[n.jsx("span",{className:"text-orange-500 font-bold",children:"4."}),n.jsx("span",{children:"Complete all 24 to join the leaderboard!"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-8 border-2 border-burgundy-200 mb-8",children:[n.jsx("h2",{className:"text-xl font-semibold text-neutral-800 mb-6 text-center",children:"Sign in to play"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs(se,{to:"/login",state:{from:"/trivia"},className:"flex items-center justify-center gap-3 w-full py-4 bg-gradient-to-r from-burgundy-600 to-burgundy-700 text-white font-semibold rounded-xl hover:from-burgundy-500 hover:to-burgundy-600 transition-all shadow-lg",children:[n.jsx(xne,{className:"h-5 w-5"}),"Sign In"]}),n.jsxs(se,{to:"/signup",state:{from:"/trivia"},className:"flex items-center justify-center gap-3 w-full py-4 bg-white text-burgundy-600 font-semibold rounded-xl border-2 border-burgundy-200 hover:bg-burgundy-50 transition-all",children:[n.jsx(sn,{className:"h-5 w-5"}),"Create Account"]})]}),n.jsx("p",{className:"text-sm text-neutral-500 text-center mt-6",children:"Your progress is saved to your account so you can continue anytime."})]})]}),n.jsx(tn,{})]});const z=e&&!(r!=null&&r.access_token),Q=e&&(r==null?void 0:r.access_token)&&a&&Y;if(t||z||Q)return n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex flex-col",children:[n.jsx(_e,{}),n.jsx("main",{className:"flex-1 flex items-center justify-center",children:n.jsx(be,{className:"h-8 w-8 text-burgundy-500 animate-spin"})}),n.jsx(tn,{})]});const J=U==null?void 0:U.question,V=U==null?void 0:U.alreadyAnswered,ee=U==null?void 0:U.userAnswer,te=(U==null?void 0:U.isLocked)||(B==null?void 0:B.isLocked),oe=(U==null?void 0:U.lockedUntil)||(B==null?void 0:B.lockedUntil),he=(U==null?void 0:U.isComplete)||(B==null?void 0:B.isComplete);return n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex flex-col",children:[n.jsx(_e,{}),n.jsxs("main",{className:"flex-1 max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[!te&&!he&&n.jsx(poe,{}),B&&!he&&n.jsx(xoe,{questionsAnswered:B.questionsAnswered,totalQuestions:B.totalQuestions,questionsCorrect:B.questionsCorrect}),te&&oe&&n.jsx(goe,{lockedUntil:oe}),he&&(B==null?void 0:B.daysToComplete)&&n.jsx(yoe,{daysToComplete:B.daysToComplete}),!a&&!te&&!he&&((B==null?void 0:B.questionsAnswered)||0)===0&&n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-8 border-2 border-burgundy-200 text-center",children:[n.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-orange-500 to-red-600 rounded-full mb-6 shadow-lg",children:n.jsx(ot,{className:"h-10 w-10 text-white"})}),n.jsx("h2",{className:"text-2xl font-display font-bold text-neutral-800 mb-4",children:"Ready to Begin?"}),n.jsx("p",{className:"text-neutral-600 mb-6 max-w-md mx-auto",children:"You have 20 seconds per question. Get one wrong and you're locked out for 2 hours. Answer all 24 correctly to join the leaderboard!"}),n.jsx("button",{onClick:()=>i(!0),className:"px-8 py-4 bg-gradient-to-r from-burgundy-600 to-burgundy-700 text-white font-bold text-lg rounded-xl hover:from-burgundy-500 hover:to-burgundy-600 transition-all shadow-lg transform hover:scale-105",children:"Start Trivia Challenge"}),n.jsx("p",{className:"text-sm text-neutral-500 mt-4",children:"Your progress is saved automatically."})]}),a&&!te&&!he&&Y&&n.jsx("div",{className:"flex justify-center py-12",children:n.jsx(be,{className:"h-8 w-8 text-burgundy-500 animate-spin"})}),a&&!te&&!he&&J&&n.jsx(boe,{question:J,totalQuestions:(B==null?void 0:B.totalQuestions)||24,timeRemaining:p,selectedIndex:u,showResult:b,isCorrect:w,isTimedOut:y,alreadyAnswered:V||!1,userAnswer:ee||null,correctIndex:((Fe=F.data)==null?void 0:Fe.correctIndex)??(ee==null?void 0:ee.correctIndex)??-1,funFact:j||(U==null?void 0:U.funFact)||null,wrongMessage:C,isPending:F.isPending,onAnswer:L,questionReady:o,onStartQuestion:K,onNextQuestion:q}),a&&!te&&!he&&!J&&!Y&&n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-12 border border-cream-200 text-center",children:[n.jsx(yt,{className:"h-12 w-12 text-neutral-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-xl font-semibold text-neutral-800 mb-2",children:"No Questions Available"}),n.jsx("p",{className:"text-neutral-500",children:"Check back later for trivia questions!"})]}),!he&&n.jsx(voe,{})]}),n.jsx(tn,{}),n.jsx(woe,{isOpen:T,onClose:()=>I(!1),accessToken:(r==null?void 0:r.access_token)||"",currentUserId:e==null?void 0:e.id,title:A,subtitle:he?"You've joined the ranks of Survivor trivia masters!":"Your torch has been snuffed. Come back in 2 hours.",isCompletion:he||!1})]})}function dt(){const e=Gr(),[t,r]=$.useState(!1),[s,a]=$.useState(!1),[i,o]=$.useState(!1),[l,u]=$.useState(!1),d=$.useRef(null),p=$.useRef(null),f=$.useRef(null),m=$.useRef(null);$.useEffect(()=>{r(!1),a(!1),o(!1),u(!1)},[e.pathname]),$.useEffect(()=>{const E=T=>{d.current&&!d.current.contains(T.target)&&r(!1),p.current&&!p.current.contains(T.target)&&a(!1),f.current&&!f.current.contains(T.target)&&o(!1),m.current&&!m.current.contains(T.target)&&u(!1)};return(t||s||i||l)&&document.addEventListener("mousedown",E),()=>document.removeEventListener("mousedown",E)},[t,s,i,l]);const{data:x}=ie({queryKey:["admin","nav-badges"],queryFn:async()=>{const[E,T]=await Promise.all([X.from("failed_emails").select("*",{count:"exact",head:!0}),X.from("job_runs").select("*",{count:"exact",head:!0}).eq("status","failed").gte("started_at",new Date(Date.now()-864e5).toISOString())]);return{failedEmails:E.count||0,failedJobs:T.count||0}},refetchInterval:3e4}),y=E=>E==="/admin/command-center"||E==="/admin"?e.pathname===E||e.pathname==="/admin":e.pathname.startsWith(E),g=()=>y("/admin/castaways")||y("/admin/users")||y("/admin/seasons")||y("/admin/faq")||y("/admin/content"),b=()=>y("/admin/announcements")||y("/admin/social")||y("/admin/push")||y("/admin/email-queue")||y("/admin/sms"),_=()=>y("/admin/jobs")||y("/admin/health")||y("/admin/stats"),w=[{path:"/admin/command-center",label:"Command Center"},{path:"/admin/leagues",label:"Leagues"},{path:"/admin/scoring",label:"Scoring"},{path:"/admin/scoring-rules",label:"Rules"}],S=[{path:"/admin/castaways",label:"Castaways"},{path:"/admin/users",label:"Users"},{path:"/admin/seasons",label:"Seasons"},{path:"/admin/faq",label:"FAQ Manager"},{path:"/admin/content",label:"CMS (Legacy)"}],j=[{path:"/admin/announcements",label:"Announcements"},{path:"/admin/social",label:"Social Media"},{path:"/admin/email-queue",label:"Email Queue",badgeKey:"failedEmails"}],N=[{path:"/admin/jobs",label:"Job Monitor",badgeKey:"failedJobs"},{path:"/admin/stats",label:"Analytics"},{path:"/admin/fun-stats",label:"Fun Stats"}],C=E=>!E||E===0?null:n.jsx("span",{className:"ml-1.5 bg-red-500 text-white text-xs font-bold px-1.5 py-0.5 rounded-full min-w-[18px] text-center",children:E>99?"99+":E});return n.jsx("div",{className:"bg-neutral-900 border-b border-neutral-700",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsxs("div",{className:"flex items-center justify-between h-10",children:[n.jsxs("div",{className:"hidden md:flex items-center gap-1",children:[w.map(E=>n.jsx(se,{to:E.path,className:`px-3 py-1.5 rounded text-sm font-medium transition-colors ${y(E.path)?"bg-orange-500 text-white":"text-neutral-300 hover:text-white hover:bg-neutral-800"}`,children:E.label},E.path)),n.jsxs("div",{className:"relative",ref:p,children:[n.jsxs("button",{onClick:()=>{a(!s),o(!1),u(!1)},className:`px-3 py-1.5 rounded text-sm font-medium transition-colors flex items-center gap-1 ${g()?"bg-orange-500 text-white":"text-neutral-300 hover:text-white hover:bg-neutral-800"}`,children:["Manage",n.jsx(en,{className:`h-3 w-3 transition-transform ${s?"rotate-180":""}`})]}),s&&n.jsx("div",{className:"absolute top-full left-0 mt-1 bg-neutral-800 rounded-lg shadow-xl border border-neutral-700 min-w-[160px] z-50 py-1",children:S.map(E=>n.jsx(se,{to:E.path,onClick:()=>a(!1),className:`block px-3 py-2 text-sm ${y(E.path)?"text-orange-400 bg-neutral-700":"text-neutral-300 hover:text-white hover:bg-neutral-700"}`,children:E.label},E.path))})]}),n.jsxs("div",{className:"relative",ref:f,children:[n.jsxs("button",{onClick:()=>{o(!i),a(!1),u(!1)},className:`px-3 py-1.5 rounded text-sm font-medium transition-colors flex items-center gap-1 ${b()?"bg-orange-500 text-white":"text-neutral-300 hover:text-white hover:bg-neutral-800"}`,children:["Communicate",x!=null&&x.failedEmails?C(x.failedEmails):null,n.jsx(en,{className:`h-3 w-3 transition-transform ${i?"rotate-180":""}`})]}),i&&n.jsx("div",{className:"absolute top-full left-0 mt-1 bg-neutral-800 rounded-lg shadow-xl border border-neutral-700 min-w-[180px] z-50 py-1",children:j.map(E=>n.jsxs(se,{to:E.path,onClick:()=>o(!1),className:`flex items-center justify-between px-3 py-2 text-sm ${y(E.path)?"text-orange-400 bg-neutral-700":"text-neutral-300 hover:text-white hover:bg-neutral-700"}`,children:[n.jsx("span",{children:E.label}),E.badgeKey&&C(x==null?void 0:x[E.badgeKey])]},E.path))})]}),n.jsxs("div",{className:"relative",ref:m,children:[n.jsxs("button",{onClick:()=>{u(!l),a(!1),o(!1)},className:`px-3 py-1.5 rounded text-sm font-medium transition-colors flex items-center gap-1 ${_()?"bg-orange-500 text-white":"text-neutral-300 hover:text-white hover:bg-neutral-800"}`,children:["System",x!=null&&x.failedJobs?C(x.failedJobs):null,n.jsx(en,{className:`h-3 w-3 transition-transform ${l?"rotate-180":""}`})]}),l&&n.jsx("div",{className:"absolute top-full left-0 mt-1 bg-neutral-800 rounded-lg shadow-xl border border-neutral-700 min-w-[160px] z-50 py-1",children:N.map(E=>n.jsxs(se,{to:E.path,onClick:()=>u(!1),className:`flex items-center justify-between px-3 py-2 text-sm ${y(E.path)?"text-orange-400 bg-neutral-700":"text-neutral-300 hover:text-white hover:bg-neutral-700"}`,children:[n.jsx("span",{children:E.label}),E.badgeKey&&C(x==null?void 0:x[E.badgeKey])]},E.path))})]})]}),n.jsx(se,{to:"/dashboard",className:"hidden md:block text-sm text-neutral-400 hover:text-white transition-colors",children:" Exit Admin"}),n.jsxs("button",{onClick:()=>r(!t),className:"md:hidden p-2 text-neutral-300 hover:text-white w-full flex items-center justify-between",children:[n.jsx("span",{className:"text-sm font-medium text-orange-400",children:"Admin Menu"}),t?n.jsx(It,{className:"h-5 w-5"}):n.jsx(xw,{className:"h-5 w-5"})]})]}),t&&n.jsxs("div",{ref:d,className:"md:hidden border-t border-neutral-700 py-2",children:[w.map(E=>n.jsx(se,{to:E.path,className:`block px-4 py-2 text-sm font-medium ${y(E.path)?"bg-orange-500 text-white":"text-neutral-300"}`,children:E.label},E.path)),n.jsx("div",{className:"px-4 py-2 text-xs font-semibold text-neutral-500 uppercase tracking-wider mt-2",children:"Manage"}),S.map(E=>n.jsx(se,{to:E.path,className:`block px-6 py-2 text-sm ${y(E.path)?"text-orange-400":"text-neutral-300"}`,children:E.label},E.path)),n.jsx("div",{className:"px-4 py-2 text-xs font-semibold text-neutral-500 uppercase tracking-wider mt-2",children:"Communicate"}),j.map(E=>n.jsx(se,{to:E.path,className:`block px-6 py-2 text-sm ${y(E.path)?"text-orange-400":"text-neutral-300"}`,children:E.label},E.path)),n.jsx("div",{className:"px-4 py-2 text-xs font-semibold text-neutral-500 uppercase tracking-wider mt-2",children:"System"}),N.map(E=>n.jsx(se,{to:E.path,className:`block px-6 py-2 text-sm ${y(E.path)?"text-orange-400":"text-neutral-300"}`,children:E.label},E.path)),n.jsx("hr",{className:"my-2 border-neutral-700"}),n.jsx(se,{to:"/dashboard",className:"block px-4 py-2 text-sm text-neutral-400 hover:text-white",children:" Exit Admin"})]})]})})}const joe=[{title:"Player Stats",description:"15 stats about player performance, timing, and luck",icon:Ke,href:"/admin/fun-stats/players",color:"bg-burgundy-500",highlights:["Successful Pick Ratio","Luckiest Player","Comeback King/Queen"]},{title:"Castaway Stats",description:"5 stats about castaway value and performance",icon:ot,href:"/admin/fun-stats/castaways",color:"bg-amber-500",highlights:["Biggest Bust","Biggest Steal","Most Consistent"]},{title:"League Stats",description:"7 stats about leagues and platform-wide trends",icon:us,href:"/admin/fun-stats/leagues",color:"bg-teal-500",highlights:["Nail Biter League","Most Active Time","Tribe Scoring"]}];function Noe(){const e=at(),t=()=>{e.invalidateQueries({queryKey:["stats"]})};return n.jsxs("div",{className:"min-h-screen bg-cream-50",children:[n.jsx(dt,{}),n.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[n.jsxs("div",{className:"flex items-center justify-between mb-8",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-12 h-12 bg-burgundy-100 rounded-xl flex items-center justify-center",children:n.jsx(Rd,{className:"h-6 w-6 text-burgundy-600"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-display font-bold text-neutral-800",children:"Fun Stats"}),n.jsx("p",{className:"text-sm text-neutral-500",children:"27 unique stats about your fantasy league"})]})]}),n.jsx("div",{className:"flex items-center gap-2",children:n.jsxs("button",{onClick:t,className:"flex items-center gap-2 px-4 py-2 bg-white border border-cream-200 rounded-xl hover:bg-cream-50 transition-colors",children:[n.jsx(an,{className:"h-4 w-4"}),"Refresh All"]})})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[n.jsxs("div",{className:"bg-white rounded-xl border border-cream-200 p-4 text-center",children:[n.jsx(kn,{className:"h-6 w-6 text-burgundy-500 mx-auto mb-2"}),n.jsx("p",{className:"text-xl font-bold text-neutral-800",children:"27"}),n.jsx("p",{className:"text-xs text-neutral-500",children:"Total Stats"})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-cream-200 p-4 text-center",children:[n.jsx(fr,{className:"h-6 w-6 text-green-500 mx-auto mb-2"}),n.jsx("p",{className:"text-xl font-bold text-neutral-800",children:"15"}),n.jsx("p",{className:"text-xs text-neutral-500",children:"Player Stats"})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-cream-200 p-4 text-center",children:[n.jsx(ot,{className:"h-6 w-6 text-amber-500 mx-auto mb-2"}),n.jsx("p",{className:"text-xl font-bold text-neutral-800",children:"5"}),n.jsx("p",{className:"text-xs text-neutral-500",children:"Castaway Stats"})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-cream-200 p-4 text-center",children:[n.jsx(us,{className:"h-6 w-6 text-teal-500 mx-auto mb-2"}),n.jsx("p",{className:"text-xl font-bold text-neutral-800",children:"7"}),n.jsx("p",{className:"text-xs text-neutral-500",children:"League Stats"})]})]}),n.jsx("div",{className:"grid md:grid-cols-3 gap-6 mb-8",children:joe.map(r=>{const s=r.icon;return n.jsxs(se,{to:r.href,className:"group bg-white rounded-2xl shadow-card border border-cream-200 overflow-hidden hover:shadow-elevated transition-all hover:-translate-y-1",children:[n.jsxs("div",{className:`${r.color} p-6`,children:[n.jsx(s,{className:"h-10 w-10 text-white mb-3"}),n.jsx("h2",{className:"text-2xl font-display font-bold text-white",children:r.title})]}),n.jsxs("div",{className:"p-5",children:[n.jsx("p",{className:"text-neutral-600 mb-4",children:r.description}),n.jsx("div",{className:"space-y-2 mb-4",children:r.highlights.map(a=>n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(su,{className:"h-4 w-4 text-amber-500"}),n.jsx("span",{className:"text-sm text-neutral-700",children:a})]},a))}),n.jsxs("div",{className:"flex items-center gap-1 text-burgundy-500 font-medium group-hover:gap-2 transition-all",children:["View All Stats",n.jsx(Hn,{className:"h-4 w-4"})]})]})]},r.href)})}),n.jsxs("div",{className:"bg-burgundy-50 rounded-2xl border border-burgundy-200 p-6",children:[n.jsx("h3",{className:"font-semibold text-burgundy-800 mb-2",children:"Stats Update After Each Episode"}),n.jsx("p",{className:"text-sm text-burgundy-700",children:"All leaderboards and stats are calculated from real game data and update automatically after each episode is scored."})]})]})]})}function Nn({data:e,valueFormatter:t=o=>o.toString(),maxBars:r=10,showRank:s=!0,colorScale:a="gradient",emptyMessage:i="No data available"}){const o=e.slice(0,r),l=$.useMemo(()=>Math.max(...o.map(d=>Math.abs(d.value)),1),[o]),u=(d,p)=>{if(a==="green")return"bg-green-500";if(a==="red")return"bg-red-500";if(a==="neutral")return"bg-neutral-400";const f=["bg-burgundy-500","bg-burgundy-400","bg-rose-500","bg-rose-400","bg-orange-500","bg-orange-400","bg-amber-500","bg-amber-400","bg-yellow-500","bg-yellow-400"];return f[Math.min(p,f.length-1)]};return o.length?n.jsx("div",{className:"space-y-3",children:o.map((d,p)=>n.jsxs("div",{className:"flex items-center gap-3",children:[s&&n.jsxs("span",{className:"text-sm font-bold text-neutral-400 w-6 text-right",children:[p+1,"."]}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsxs("div",{className:"truncate",children:[n.jsx("span",{className:"font-medium text-neutral-800",children:d.label}),d.sublabel&&n.jsx("span",{className:"text-xs text-neutral-500 ml-2",children:d.sublabel})]}),n.jsx("span",{className:"font-bold text-neutral-700 ml-2 shrink-0",children:t(d.value)})]}),n.jsx("div",{className:"h-2 bg-cream-100 rounded-full overflow-hidden",children:n.jsx("div",{className:`h-full rounded-full transition-all ${d.color||u(d.value,p)}`,style:{width:`${Math.abs(d.value)/l*100}%`}})})]})]},p))}):n.jsx("div",{className:"py-8 text-center text-neutral-500",children:i})}function o5({data:e,height:t=180,valueFormatter:r=i=>i.toString(),defaultColor:s="#722F37",emptyMessage:a="No data available"}){if(!e.length)return n.jsx("div",{className:"py-8 text-center text-neutral-500",children:a});const i=Math.max(...e.map(l=>l.value),1),o=Math.min(60,Math.floor(100/e.length)-2);return n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"flex items-end justify-around",style:{height:t},children:e.map((l,u)=>{const d=l.value/i*(t-40);return n.jsxs("div",{className:"flex flex-col items-center gap-1",children:[n.jsx("span",{className:"text-xs font-semibold text-neutral-700",children:r(l.value)}),n.jsx("div",{className:"rounded-t transition-all",style:{width:`${o}px`,height:`${d}px`,backgroundColor:l.color||s}})]},u)})}),n.jsx("div",{className:"flex justify-around",children:e.map((l,u)=>n.jsx("span",{className:"text-xs text-neutral-500 text-center truncate",style:{width:`${o+8}px`},children:l.label},u))})]})}function xp({leftTitle:e,leftEntries:t,leftColor:r="green",rightTitle:s,rightEntries:a,rightColor:i="red",valueLabel:o,valueFormatter:l=p=>p.toString(),maxEntries:u=5,emptyMessage:d="No entries yet"}){const p=t.slice(0,u),f=a.slice(0,u),m=y=>{const g={green:{bg:"bg-green-50",text:"text-green-700",border:"border-green-200"},burgundy:{bg:"bg-burgundy-50",text:"text-burgundy-700",border:"border-burgundy-200"},amber:{bg:"bg-amber-50",text:"text-amber-700",border:"border-amber-200"},red:{bg:"bg-red-50",text:"text-red-700",border:"border-red-200"},neutral:{bg:"bg-neutral-50",text:"text-neutral-700",border:"border-neutral-200"},blue:{bg:"bg-blue-50",text:"text-blue-700",border:"border-blue-200"}};return g[y]||g.neutral},x=(y,g,b)=>{const _=m(b);return n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:`p-3 ${_.bg} border-b ${_.border}`,children:n.jsx("h4",{className:`font-semibold ${_.text} text-center`,children:y})}),g.length===0?n.jsx("p",{className:"text-neutral-500 text-sm text-center py-4",children:d}):n.jsx("div",{className:"divide-y divide-cream-100",children:g.map((w,S)=>n.jsxs("div",{className:"flex items-center gap-2 p-2.5",children:[n.jsxs("span",{className:"text-xs font-bold text-neutral-400 w-5",children:[S+1,"."]}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium text-neutral-800 truncate",children:w.name}),w.sublabel&&n.jsx("p",{className:"text-xs text-neutral-500 truncate",children:w.sublabel})]}),n.jsxs("div",{className:"text-right shrink-0",children:[n.jsx("span",{className:`text-sm font-bold ${_.text}`,children:l(w.value)}),o&&n.jsx("span",{className:"text-xs text-neutral-400 ml-1",children:o})]})]},w.id))})]})};return n.jsx("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 overflow-hidden",children:n.jsxs("div",{className:"flex divide-x divide-cream-200",children:[x(e,p,r),x(s,f,i)]})})}const Soe={award:tP,star:zn,trophy:ot,flame:Rr,zap:ds};function koe({title:e,description:t,recipients:r,icon:s="award",iconColor:a="text-amber-500",maxRecipients:i=10,emptyMessage:o="No recipients yet"}){const l=Soe[s],u=r.slice(0,i);return n.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 overflow-hidden",children:[n.jsxs("div",{className:"p-4 border-b border-cream-100 bg-gradient-to-r from-amber-50 to-cream-50",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(l,{className:`h-6 w-6 ${a}`}),n.jsx("h3",{className:"font-display font-bold text-neutral-800",children:e})]}),t&&n.jsx("p",{className:"text-sm text-neutral-500 mt-1",children:t})]}),u.length===0?n.jsx("p",{className:"text-neutral-500 text-center py-6",children:o}):n.jsx("div",{className:"divide-y divide-cream-100",children:u.map(d=>n.jsxs("div",{className:"flex items-center gap-3 p-3 hover:bg-cream-50 transition-colors",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-amber-100 flex items-center justify-center shrink-0",children:n.jsx(l,{className:`h-4 w-4 ${a}`})}),d.avatarUrl?n.jsx("img",{src:d.avatarUrl,alt:d.name,className:"w-10 h-10 rounded-full object-cover border border-cream-200"}):n.jsx("div",{className:"w-10 h-10 rounded-full bg-burgundy-100 flex items-center justify-center shrink-0",children:n.jsx("span",{className:"font-bold text-burgundy-600",children:d.name.charAt(0)})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"font-medium text-neutral-800 truncate",children:d.name}),d.detail&&n.jsx("p",{className:"text-xs text-neutral-500",children:d.detail})]})]},d.id))})]})}function $t({title:e,subtitle:t,icon:r,isLoading:s=!1,error:a=null,children:i,footer:o}){return n.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 overflow-hidden",children:[n.jsx("div",{className:"p-4 border-b border-cream-100",children:n.jsxs("div",{className:"flex items-center gap-2",children:[r&&n.jsx("div",{className:"text-burgundy-500",children:r}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-display font-bold text-neutral-800",children:e}),t&&n.jsx("p",{className:"text-xs text-neutral-500",children:t})]})]})}),n.jsx("div",{className:"p-4",children:s?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx(be,{className:"h-6 w-6 text-burgundy-500 animate-spin"})}):a?n.jsx("div",{className:"py-8 text-center",children:n.jsx("p",{className:"text-red-500 text-sm",children:a})}):i}),o&&n.jsx("div",{className:"px-4 py-3 bg-cream-50 border-t border-cream-100 text-xs text-neutral-500",children:o})]})}function l5({title:e,insight:t,icon:r,color:s="amber",children:a}){const o={amber:{bg:"from-amber-50 to-yellow-50",border:"border-amber-200",icon:"text-amber-500",text:"text-amber-800"},teal:{bg:"from-teal-50 to-emerald-50",border:"border-teal-200",icon:"text-teal-500",text:"text-teal-800"},burgundy:{bg:"from-burgundy-50 to-rose-50",border:"border-burgundy-200",icon:"text-burgundy-500",text:"text-burgundy-800"},neutral:{bg:"from-neutral-50 to-cream-50",border:"border-neutral-200",icon:"text-neutral-500",text:"text-neutral-800"}}[s];return n.jsx("div",{className:`bg-gradient-to-br ${o.bg} rounded-2xl border ${o.border} p-5`,children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:`${o.icon} shrink-0 mt-0.5`,children:r||n.jsx(pw,{className:"h-5 w-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:`font-semibold ${o.text} mb-1`,children:e}),n.jsx("p",{className:"text-neutral-600 text-sm",children:t}),a&&n.jsx("div",{className:"mt-3",children:a})]})]})})}function Eoe(){var S,j,N,C,E,T,I,A,R,O,M,B,U,Y,W,K,F;const e=ie({queryKey:["stats","most-leagues"],queryFn:async()=>{var L;const H=await jt("/stats/most-leagues");if(H.error)throw new Error(H.error);return(L=H.data)==null?void 0:L.data},staleTime:3e5}),t=ie({queryKey:["stats","last-minute-larry"],queryFn:async()=>{var L;const H=await jt("/stats/last-minute-larry");if(H.error)throw new Error(H.error);return(L=H.data)==null?void 0:L.data},staleTime:300*1e3}),r=ie({queryKey:["stats","early-bird"],queryFn:async()=>{var L;const H=await jt("/stats/early-bird");if(H.error)throw new Error(H.error);return(L=H.data)==null?void 0:L.data},staleTime:300*1e3}),s=ie({queryKey:["stats","submission-speed"],queryFn:async()=>{var L;const H=await jt("/stats/submission-speed");if(H.error)throw new Error(H.error);return(L=H.data)==null?void 0:L.data},staleTime:300*1e3}),a=ie({queryKey:["stats","submission-timing"],queryFn:async()=>{var L;const H=await jt("/stats/submission-timing");if(H.error)throw new Error(H.error);return(L=H.data)==null?void 0:L.data},staleTime:300*1e3}),i=ie({queryKey:["stats","successful-pick-ratio"],queryFn:async()=>{var L;const H=await jt("/stats/successful-pick-ratio");if(H.error)throw new Error(H.error);return(L=H.data)==null?void 0:L.data},staleTime:300*1e3}),o=ie({queryKey:["stats","most-active"],queryFn:async()=>{var L;const H=await jt("/stats/most-active");if(H.error)throw new Error(H.error);return(L=H.data)==null?void 0:L.data},staleTime:300*1e3}),l=ie({queryKey:["stats","improvement-trend"],queryFn:async()=>{var L;const H=await jt("/stats/improvement-trend");if(H.error)throw new Error(H.error);return(L=H.data)==null?void 0:L.data},staleTime:300*1e3}),u=ie({queryKey:["stats","luckiest-player"],queryFn:async()=>{var L;const H=await jt("/stats/luckiest-player");if(H.error)throw new Error(H.error);return(L=H.data)==null?void 0:L.data},staleTime:300*1e3}),d=ie({queryKey:["stats","unluckiest-player"],queryFn:async()=>{var L;const H=await jt("/stats/unluckiest-player");if(H.error)throw new Error(H.error);return(L=H.data)==null?void 0:L.data},staleTime:300*1e3}),p=ie({queryKey:["stats","curse-carrier"],queryFn:async()=>{var L;const H=await jt("/stats/curse-carrier");if(H.error)throw new Error(H.error);return(L=H.data)==null?void 0:L.data},staleTime:300*1e3}),f=ie({queryKey:["stats","benchwarmer-regret"],queryFn:async()=>{var L;const H=await jt("/stats/benchwarmer-regret");if(H.error)throw new Error(H.error);return(L=H.data)==null?void 0:L.data},staleTime:300*1e3}),m=ie({queryKey:["stats","indecisive"],queryFn:async()=>{var L;const H=await jt("/stats/indecisive");if(H.error)throw new Error(H.error);return(L=H.data)==null?void 0:L.data},staleTime:300*1e3}),x=ie({queryKey:["stats","set-and-forget"],queryFn:async()=>{var L;const H=await jt("/stats/set-and-forget");if(H.error)throw new Error(H.error);return(L=H.data)==null?void 0:L.data},staleTime:300*1e3}),y=ie({queryKey:["stats","waiver-wonder"],queryFn:async()=>{var L;const H=await jt("/stats/waiver-wonder");if(H.error)throw new Error(H.error);return(L=H.data)==null?void 0:L.data},staleTime:300*1e3}),g=ie({queryKey:["stats","comeback-royalty"],queryFn:async()=>{var L;const H=await jt("/stats/comeback-royalty");if(H.error)throw new Error(H.error);return(L=H.data)==null?void 0:L.data},staleTime:300*1e3}),b=ie({queryKey:["stats","choke-artist"],queryFn:async()=>{var L;const H=await jt("/stats/choke-artist");if(H.error)throw new Error(H.error);return(L=H.data)==null?void 0:L.data},staleTime:300*1e3}),_=e.isLoading||t.isLoading||r.isLoading||s.isLoading||a.isLoading||i.isLoading||o.isLoading||l.isLoading||u.isLoading||d.isLoading||p.isLoading||f.isLoading||m.isLoading||x.isLoading||y.isLoading||g.isLoading||b.isLoading,w=((S=e.error)==null?void 0:S.message)||((j=t.error)==null?void 0:j.message)||((N=r.error)==null?void 0:N.message)||((C=s.error)==null?void 0:C.message)||((E=a.error)==null?void 0:E.message)||((T=i.error)==null?void 0:T.message)||((I=o.error)==null?void 0:I.message)||((A=l.error)==null?void 0:A.message)||((R=u.error)==null?void 0:R.message)||((O=d.error)==null?void 0:O.message)||((M=p.error)==null?void 0:M.message)||((B=f.error)==null?void 0:B.message)||((U=m.error)==null?void 0:U.message)||((Y=x.error)==null?void 0:Y.message)||((W=y.error)==null?void 0:W.message)||((K=g.error)==null?void 0:K.message)||((F=b.error)==null?void 0:F.message)||null;return{mostLeagues:e.data,lastMinuteLarry:t.data,earlyBird:r.data,submissionSpeed:s.data,submissionTiming:a.data,successfulPickRatio:i.data,mostActive:o.data,improvementTrend:l.data,luckiestPlayer:u.data,unluckiestPlayer:d.data,curseCarrier:p.data,benchwarmerRegret:f.data,indecisive:m.data,setAndForget:x.data,waiverWonder:y.data,comebackRoyalty:g.data,chokeArtist:b.data,isLoading:_,error:w}}function Coe(){var u,d,p,f,m,x;const e=ie({queryKey:["stats","scoring-efficiency"],queryFn:async()=>{var g;const y=await jt("/stats/scoring-efficiency");if(y.error)throw new Error(y.error);return(g=y.data)==null?void 0:g.data},staleTime:3e5}),t=ie({queryKey:["stats","tribe-scoring"],queryFn:async()=>{var g;const y=await jt("/stats/tribe-scoring");if(y.error)throw new Error(y.error);return(g=y.data)==null?void 0:g.data},staleTime:300*1e3}),r=ie({queryKey:["stats","biggest-bust"],queryFn:async()=>{var g;const y=await jt("/stats/biggest-bust");if(y.error)throw new Error(y.error);return(g=y.data)==null?void 0:g.data},staleTime:300*1e3}),s=ie({queryKey:["stats","biggest-steal"],queryFn:async()=>{var g;const y=await jt("/stats/biggest-steal");if(y.error)throw new Error(y.error);return(g=y.data)==null?void 0:g.data},staleTime:300*1e3}),a=ie({queryKey:["stats","consistency"],queryFn:async()=>{var g;const y=await jt("/stats/consistency");if(y.error)throw new Error(y.error);return(g=y.data)==null?void 0:g.data},staleTime:300*1e3}),i=ie({queryKey:["stats","skill-correlated-picks"],queryFn:async()=>{var g;const y=await jt("/stats/skill-correlated-picks");if(y.error)throw new Error(y.error);return(g=y.data)==null?void 0:g.data},staleTime:300*1e3}),o=e.isLoading||t.isLoading||r.isLoading||s.isLoading||a.isLoading||i.isLoading,l=((u=e.error)==null?void 0:u.message)||((d=t.error)==null?void 0:d.message)||((p=r.error)==null?void 0:p.message)||((f=s.error)==null?void 0:f.message)||((m=a.error)==null?void 0:m.message)||((x=i.error)==null?void 0:x.message)||null;return{scoringEfficiency:e.data,tribeScoring:t.data,biggestBust:r.data,biggestSteal:s.data,consistency:a.data,skillCorrelated:i.data,isLoading:o,error:l}}function Toe(){var u,d,p,f,m,x;const e=ie({queryKey:["stats","league-scoring"],queryFn:async()=>{var g;const y=await jt("/stats/league-scoring");if(y.error)throw new Error(y.error);return(g=y.data)==null?void 0:g.data},staleTime:3e5}),t=ie({queryKey:["stats","activity-by-day"],queryFn:async()=>{var g;const y=await jt("/stats/activity-by-day");if(y.error)throw new Error(y.error);return(g=y.data)==null?void 0:g.data},staleTime:300*1e3}),r=ie({queryKey:["stats","activity-by-hour"],queryFn:async()=>{var g;const y=await jt("/stats/activity-by-hour");if(y.error)throw new Error(y.error);return(g=y.data)==null?void 0:g.data},staleTime:300*1e3}),s=ie({queryKey:["stats","submission-speed"],queryFn:async()=>{var g;const y=await jt("/stats/submission-speed");if(y.error)throw new Error(y.error);return(g=y.data)==null?void 0:g.data},staleTime:300*1e3}),a=ie({queryKey:["stats","nail-biter-leagues"],queryFn:async()=>{var g;const y=await jt("/stats/nail-biter-leagues");if(y.error)throw new Error(y.error);return(g=y.data)==null?void 0:g.data},staleTime:300*1e3}),i=ie({queryKey:["stats","submission-timing"],queryFn:async()=>{var g;const y=await jt("/stats/submission-timing");if(y.error)throw new Error(y.error);return(g=y.data)==null?void 0:g.data},staleTime:300*1e3}),o=e.isLoading||t.isLoading||r.isLoading||s.isLoading||a.isLoading||i.isLoading,l=((u=e.error)==null?void 0:u.message)||((d=t.error)==null?void 0:d.message)||((p=r.error)==null?void 0:p.message)||((f=s.error)==null?void 0:f.message)||((m=a.error)==null?void 0:m.message)||((x=i.error)==null?void 0:x.message)||null;return{leagueScoring:e.data,activityByDay:t.data,activityByHour:r.data,submissionSpeed:s.data,nailBiter:a.data,submissionTiming:i.data,isLoading:o,error:l}}function Roe(){var S,j,N,C,E,T,I,A,R,O,M,B,U,Y,W,K;const e=at(),{mostLeagues:t,lastMinuteLarry:r,earlyBird:s,successfulPickRatio:a,mostActive:i,improvementTrend:o,luckiestPlayer:l,unluckiestPlayer:u,curseCarrier:d,benchwarmerRegret:p,indecisive:f,setAndForget:m,waiverWonder:x,comebackRoyalty:y,chokeArtist:g,isLoading:b,error:_}=Eoe(),w=()=>{e.invalidateQueries({queryKey:["stats","players"]})};return n.jsxs("div",{className:"min-h-screen bg-cream-50",children:[n.jsx(dt,{}),n.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[n.jsxs("div",{className:"flex items-center justify-between mb-8",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(se,{to:"/admin/fun-stats",className:"p-2 bg-white border border-cream-200 rounded-xl hover:bg-cream-50 transition-colors",children:n.jsx(ht,{className:"h-5 w-5 text-neutral-600"})}),n.jsx("div",{className:"w-12 h-12 bg-burgundy-100 rounded-xl flex items-center justify-center",children:n.jsx(Ke,{className:"h-6 w-6 text-burgundy-600"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-display font-bold text-neutral-800",children:"Player Stats"}),n.jsx("p",{className:"text-sm text-neutral-500",children:"15 stats about player performance"})]})]}),n.jsxs("button",{onClick:w,className:"flex items-center gap-2 px-4 py-2 bg-white border border-cream-200 rounded-xl hover:bg-cream-50 transition-colors",children:[n.jsx(an,{className:"h-4 w-4"}),"Refresh"]})]}),b?n.jsx("div",{className:"flex items-center justify-center py-20",children:n.jsx(be,{className:"h-8 w-8 text-burgundy-500 animate-spin"})}):_?n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-6 text-center",children:n.jsx("p",{className:"text-red-600",children:_})}):n.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:[n.jsx($t,{title:"Successful Pick Ratio",subtitle:"Starters who scored above episode average",icon:n.jsx(kn,{className:"h-5 w-5"}),children:n.jsx(Nn,{data:((S=a==null?void 0:a.leaderboard)==null?void 0:S.map(F=>({label:F.display_name,value:F.ratio,sublabel:`${F.successful_picks}/${F.total_picks} picks`})))||[],valueFormatter:F=>`${F}%`,emptyMessage:"Data available after more episodes"})}),n.jsx($t,{title:"Luckiest Player",subtitle:"Points from castaways in their final episode",icon:n.jsx(vte,{className:"h-5 w-5"}),children:n.jsx(Nn,{data:((j=l==null?void 0:l.leaderboard)==null?void 0:j.map(F=>({label:F.display_name,value:F.luck_points,sublabel:`${F.castaways_count} elimination(s)`})))||[],colorScale:"green",emptyMessage:"Data available after eliminations"})}),n.jsx($t,{title:"Unluckiest Player",subtitle:"Potential points lost to early eliminations",icon:n.jsx(yte,{className:"h-5 w-5"}),children:n.jsx(Nn,{data:((N=u==null?void 0:u.leaderboard)==null?void 0:N.map(F=>({label:F.display_name,value:F.missed_points,sublabel:`${F.eliminations_count} castaway(s)`})))||[],colorScale:"red",emptyMessage:"Data available after eliminations"})}),n.jsx($t,{title:"Last-Minute Larry",subtitle:"Picks submitted in final hour before lock",icon:n.jsx(Nt,{className:"h-5 w-5"}),children:n.jsx(Nn,{data:((C=r==null?void 0:r.leaderboard)==null?void 0:C.map(F=>({label:F.display_name,value:F.ratio,sublabel:`${F.last_minute_picks}/${F.total_picks} picks`})))||[],valueFormatter:F=>`${F}%`,emptyMessage:"Data available after more picks"})}),n.jsx($t,{title:"Early Bird",subtitle:"Picks submitted within first hour",icon:n.jsx(Hee,{className:"h-5 w-5"}),children:n.jsx(Nn,{data:((E=s==null?void 0:s.leaderboard)==null?void 0:E.map(F=>({label:F.display_name,value:F.ratio,sublabel:`${F.early_picks}/${F.total_picks} picks`})))||[],valueFormatter:F=>`${F}%`,colorScale:"green",emptyMessage:"Data available after more picks"})}),n.jsx($t,{title:"Indecisive Award",subtitle:"Most lineup changes before lock",icon:n.jsx(dc,{className:"h-5 w-5"}),children:n.jsx(Nn,{data:((T=f==null?void 0:f.leaderboard)==null?void 0:T.map(F=>({label:F.display_name,value:F.total_changes,sublabel:`${F.episodes_changed} episode(s)`})))||[],emptyMessage:"Data available after more picks"})}),n.jsx($t,{title:"Set It and Forget It",subtitle:"Never changed lineup after initial submission",icon:n.jsx(mr,{className:"h-5 w-5"}),children:n.jsx(koe,{title:"",recipients:((I=m==null?void 0:m.users)==null?void 0:I.map(F=>({id:F.user_id,name:F.display_name,sublabel:`${F.episodes_played} episodes`})))||[],icon:"star",emptyMessage:"Data available after more picks"})}),n.jsx($t,{title:"Benchwarmer Regret",subtitle:"Points left on the bench all season",icon:n.jsx(Iee,{className:"h-5 w-5"}),children:n.jsx(Nn,{data:((A=p==null?void 0:p.leaderboard)==null?void 0:A.map(F=>({label:F.display_name,value:F.bench_points,sublabel:`${F.bench_points} pts wasted`})))||[],colorScale:"red",emptyMessage:"Data available after more episodes"})}),n.jsx($t,{title:"Curse Carrier",subtitle:"Newly added castaways eliminated quickly",icon:n.jsx(Fte,{className:"h-5 w-5"}),children:n.jsx(Nn,{data:((R=d==null?void 0:d.leaderboard)==null?void 0:R.map(F=>({label:F.display_name,value:F.cursed_castaways,sublabel:`${F.curse_rate}% curse rate`})))||[],colorScale:"red",emptyMessage:"Data available after eliminations"})}),n.jsx($t,{title:"Waiver Wire Wonder",subtitle:"Points from undrafted castaways",icon:n.jsx(su,{className:"h-5 w-5"}),children:n.jsx(Nn,{data:((O=x==null?void 0:x.leaderboard)==null?void 0:O.map(F=>({label:F.display_name,value:F.waiver_points,sublabel:`${F.undrafted_castaways} castaway(s)`})))||[],colorScale:"green",emptyMessage:"Data available after waivers"})}),n.jsx($t,{title:"Comeback King/Queen",subtitle:"Largest deficit overcome to win",icon:n.jsx(er,{className:"h-5 w-5"}),children:n.jsx(Nn,{data:((M=y==null?void 0:y.leaderboard)==null?void 0:M.map(F=>({label:F.display_name,value:F.max_deficit,sublabel:`Week ${F.deficit_week} - ${F.league_name}`})))||[],colorScale:"green",emptyMessage:"Data available after more episodes"})}),n.jsx($t,{title:"Choke Artist",subtitle:"Largest lead blown (led but didn't win)",icon:n.jsx(Hi,{className:"h-5 w-5"}),children:n.jsx(Nn,{data:((B=g==null?void 0:g.leaderboard)==null?void 0:B.map(F=>({label:F.display_name,value:F.max_lead,sublabel:`Week ${F.lead_week} - #${F.final_position} in ${F.league_name}`})))||[],colorScale:"red",emptyMessage:"Data available after more episodes"})}),n.jsx($t,{title:"Platform Superfans",subtitle:"Most leagues joined",icon:n.jsx(Ke,{className:"h-5 w-5"}),children:n.jsx(Nn,{data:((U=t==null?void 0:t.leaderboard)==null?void 0:U.map(F=>({label:F.display_name,value:F.league_count})))||[],emptyMessage:"No data yet"})}),n.jsx($t,{title:"Most Active Player",subtitle:"Composite engagement score",icon:n.jsx(ds,{className:"h-5 w-5"}),children:n.jsx(Nn,{data:((Y=i==null?void 0:i.leaderboard)==null?void 0:Y.map(F=>({label:F.display_name,value:F.composite_score,sublabel:`${F.picks_count} picks, ${F.messages_count} msgs`})))||[],emptyMessage:"Data available after more activity"})}),n.jsx($t,{title:"Improvement Trends",subtitle:"Week over week point trends",icon:n.jsx(fr,{className:"h-5 w-5"}),children:n.jsx(xp,{leftTitle:"Rising Stars",leftEntries:((W=o==null?void 0:o.most_improved)==null?void 0:W.map(F=>({id:F.user_id,name:F.display_name,value:F.improvement||0,sublabel:`${F.first_half_avg}  ${F.second_half_avg}`})))||[],leftColor:"green",rightTitle:"Slumping",rightEntries:((K=o==null?void 0:o.most_declined)==null?void 0:K.map(F=>({id:F.user_id,name:F.display_name,value:F.decline||Math.abs(F.improvement||0),sublabel:`${F.first_half_avg}  ${F.second_half_avg}`})))||[],rightColor:"red",valueFormatter:F=>F>=0?`+${F}`:`${F}`,emptyMessage:"Data available after more episodes"})})]})]})]})}function Aoe(){var p,f,m,x,y,g,b,_;const e=at(),{scoringEfficiency:t,tribeScoring:r,biggestBust:s,biggestSteal:a,consistency:i,skillCorrelated:o,isLoading:l,error:u}=Coe(),d=()=>{e.invalidateQueries({queryKey:["stats","castaways"]})};return n.jsxs("div",{className:"min-h-screen bg-cream-50",children:[n.jsx(dt,{}),n.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[n.jsxs("div",{className:"flex items-center justify-between mb-8",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(se,{to:"/admin/fun-stats",className:"p-2 bg-white border border-cream-200 rounded-xl hover:bg-cream-50 transition-colors",children:n.jsx(ht,{className:"h-5 w-5 text-neutral-600"})}),n.jsx("div",{className:"w-12 h-12 bg-amber-100 rounded-xl flex items-center justify-center",children:n.jsx(ot,{className:"h-6 w-6 text-amber-600"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-display font-bold text-neutral-800",children:"Castaway Stats"}),n.jsx("p",{className:"text-sm text-neutral-500",children:"5 stats about castaway performance"})]})]}),n.jsxs("button",{onClick:d,className:"flex items-center gap-2 px-4 py-2 bg-white border border-cream-200 rounded-xl hover:bg-cream-50 transition-colors",children:[n.jsx(an,{className:"h-4 w-4"}),"Refresh"]})]}),l?n.jsx("div",{className:"flex items-center justify-center py-20",children:n.jsx(be,{className:"h-8 w-8 text-burgundy-500 animate-spin"})}):u?n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-6 text-center",children:n.jsx("p",{className:"text-red-600",children:u})}):n.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[n.jsx($t,{title:"Biggest Bust",subtitle:"High draft pick, low points per episode",icon:n.jsx(Hi,{className:"h-5 w-5"}),children:n.jsx(Nn,{data:((p=s==null?void 0:s.leaderboard)==null?void 0:p.map(w=>({label:w.name,value:w.points_per_episode,sublabel:`Avg pick #${w.avg_draft_position}`})))||[],valueFormatter:w=>`${w.toFixed(1)} PPE`,colorScale:"red",emptyMessage:"Data available after more episodes"})}),n.jsx($t,{title:"Biggest Steal",subtitle:"Late draft pick, high points per episode",icon:n.jsx(fr,{className:"h-5 w-5"}),children:n.jsx(Nn,{data:((f=a==null?void 0:a.leaderboard)==null?void 0:f.map(w=>({label:w.name,value:w.points_per_episode,sublabel:`Avg pick #${w.avg_draft_position}`})))||[],valueFormatter:w=>`${w.toFixed(1)} PPE`,colorScale:"green",emptyMessage:"Data available after more episodes"})}),n.jsx($t,{title:"Consistency Ratings",subtitle:"Standard deviation of weekly scores",icon:n.jsx(Di,{className:"h-5 w-5"}),children:n.jsx(xp,{leftTitle:"Most Reliable",leftEntries:((m=i==null?void 0:i.most_consistent)==null?void 0:m.map(w=>({id:w.castaway_id,name:w.name,value:w.std_dev,sublabel:`Avg ${w.avg_points} pts`})))||[],leftColor:"green",rightTitle:"Wild Cards",rightEntries:((x=i==null?void 0:i.most_volatile)==null?void 0:x.map(w=>({id:w.castaway_id,name:w.name,value:w.std_dev,sublabel:`Avg ${w.avg_points} pts`})))||[],rightColor:"red",valueFormatter:w=>`${w}`,emptyMessage:"Data available after more episodes"})}),n.jsx($t,{title:"Scoring Efficiency",subtitle:"Points per episode played",icon:n.jsx($te,{className:"h-5 w-5"}),children:n.jsx(Nn,{data:((y=t==null?void 0:t.leaderboard)==null?void 0:y.map(w=>({label:w.name,value:w.efficiency,sublabel:`${w.episodes_played} eps`})))||[],valueFormatter:w=>w.toFixed(1),emptyMessage:"Data available after episodes are scored"})}),n.jsx($t,{title:"Skill-Correlated Picks",subtitle:"Castaways favored by top vs bottom players",icon:n.jsx(nP,{className:"h-5 w-5"}),children:n.jsx(xp,{leftTitle:"Smart Picks",leftEntries:((g=o==null?void 0:o.smart_picks)==null?void 0:g.map(w=>({id:w.castaway_id,name:w.name,value:w.differential,sublabel:`Top: ${w.top_player_ownership}% / Bot: ${w.bottom_player_ownership}%`})))||[],leftColor:"green",rightTitle:"Trap Picks",rightEntries:((b=o==null?void 0:o.trap_picks)==null?void 0:b.map(w=>({id:w.castaway_id,name:w.name,value:Math.abs(w.differential),sublabel:`Top: ${w.top_player_ownership}% / Bot: ${w.bottom_player_ownership}%`})))||[],rightColor:"red",valueFormatter:w=>`+${w}%`,emptyMessage:"Data available after more picks"})}),n.jsx($t,{title:"Tribe Scoring",subtitle:"Total fantasy points by original tribe",icon:n.jsx(ot,{className:"h-5 w-5"}),children:n.jsx(Nn,{data:((_=r==null?void 0:r.tribes)==null?void 0:_.map(w=>({label:w.name,value:w.total_points,sublabel:`${w.castaway_count} castaways`,color:w.name==="Vatu"?"bg-purple-500":w.name==="Kalo"?"bg-teal-500":w.name==="Cila"?"bg-orange-500":"bg-neutral-400"})))||[],showRank:!1,emptyMessage:"Data available after episodes are scored"})})]})]})]})}function Poe(){var f,m,x,y,g;const e=at(),{leagueScoring:t,activityByDay:r,activityByHour:s,submissionSpeed:a,nailBiter:i,submissionTiming:o,isLoading:l,error:u}=Toe(),d=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],p=()=>{e.invalidateQueries({queryKey:["stats","leagues"]})};return n.jsxs("div",{className:"min-h-screen bg-cream-50",children:[n.jsx(dt,{}),n.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[n.jsxs("div",{className:"flex items-center justify-between mb-8",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(se,{to:"/admin/fun-stats",className:"p-2 bg-white border border-cream-200 rounded-xl hover:bg-cream-50 transition-colors",children:n.jsx(ht,{className:"h-5 w-5 text-neutral-600"})}),n.jsx("div",{className:"w-12 h-12 bg-teal-100 rounded-xl flex items-center justify-center",children:n.jsx(us,{className:"h-6 w-6 text-teal-600"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-display font-bold text-neutral-800",children:"League Stats"}),n.jsx("p",{className:"text-sm text-neutral-500",children:"7 stats about platform-wide trends"})]})]}),n.jsxs("button",{onClick:p,className:"flex items-center gap-2 px-4 py-2 bg-white border border-cream-200 rounded-xl hover:bg-cream-50 transition-colors",children:[n.jsx(an,{className:"h-4 w-4"}),"Refresh"]})]}),l?n.jsx("div",{className:"flex items-center justify-center py-20",children:n.jsx(be,{className:"h-8 w-8 text-burgundy-500 animate-spin"})}):u?n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-6 text-center",children:n.jsx("p",{className:"text-red-600",children:u})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[n.jsx($t,{title:"Nail Biter Leagues",subtitle:"Most weeks decided by narrow margins",icon:n.jsx(su,{className:"h-5 w-5"}),children:n.jsx(Nn,{data:((f=i==null?void 0:i.leaderboard)==null?void 0:f.map(b=>({label:b.name,value:b.nail_biter_weeks,sublabel:`Closest: ${b.closest_margin} pts`})))||[],emptyMessage:"Data available after more episodes"})}),n.jsx($t,{title:"League Scoring",subtitle:"Total points across all members",icon:n.jsx(ot,{className:"h-5 w-5"}),children:n.jsx(Nn,{data:((m=t==null?void 0:t.leaderboard)==null?void 0:m.map(b=>({label:b.name,value:b.total_points,sublabel:`${b.member_count} members`})))||[],emptyMessage:"Data available after episodes are scored"})})]}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[n.jsx($t,{title:"Submission Timing",subtitle:"Picks in first vs last hour of window",icon:n.jsx(Nt,{className:"h-5 w-5"}),children:n.jsx(xp,{leftTitle:"Early Birds",leftEntries:((x=o==null?void 0:o.early_birds)==null?void 0:x.map(b=>({id:b.user_id,name:b.display_name,value:b.ratio,sublabel:`${b.first_hour_picks||0}/${b.total_picks} picks`})))||[],leftColor:"green",rightTitle:"Procrastinators",rightEntries:((y=o==null?void 0:o.procrastinators)==null?void 0:y.map(b=>({id:b.user_id,name:b.display_name,value:b.ratio,sublabel:`${b.last_hour_picks||0}/${b.total_picks} picks`})))||[],rightColor:"red",valueFormatter:b=>`${b}%`,emptyMessage:"Data available after more picks"})}),n.jsx($t,{title:"Submission Speed",subtitle:"Average time from window open to pick",icon:n.jsx(are,{className:"h-5 w-5"}),children:n.jsx(Nn,{data:((g=a==null?void 0:a.leaderboard)==null?void 0:g.map(b=>({label:b.display_name,value:b.avg_hours_to_submit,sublabel:`Fastest: ${b.fastest_submission.toFixed(1)}h`})))||[],valueFormatter:b=>`${b.toFixed(1)}h`,colorScale:"green",emptyMessage:"Data available after more picks"})})]}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[n.jsx($t,{title:"Activity by Day",subtitle:"Platform activity throughout the week",icon:n.jsx(wn,{className:"h-5 w-5"}),children:r!=null&&r.days&&r.days.length>0?n.jsx(o5,{data:r.days.map(b=>({label:d[b.day]||b.day.toString(),value:b.total,color:b.day===3?"#722F37":void 0}))}):n.jsx("div",{className:"py-8 text-center text-neutral-500",children:"Data available after more activity"})}),n.jsx($t,{title:"Activity by Hour",subtitle:"When players are most active",icon:n.jsx(ds,{className:"h-5 w-5"}),children:s!=null&&s.hours&&s.hours.length>0?n.jsx(o5,{data:s.hours.filter(b=>b.total>0).map(b=>({label:`${b.hour}:00`,value:b.total})),height:160}):n.jsx("div",{className:"py-8 text-center text-neutral-500",children:"Data available after more activity"})})]}),(r==null?void 0:r.days)&&r.days.length>0&&n.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[n.jsx(l5,{title:"Peak Activity Day",insight:`Players are most active on ${d[r.days.reduce((b,_)=>_.total>b.total?_:b).day]}, likely due to episode airings on Wednesday evenings.`,color:"teal"}),n.jsx(l5,{title:"Pick Deadline Rush",insight:"Most pick submissions happen within the last few hours before the Wednesday deadline at 5 PM PST.",color:"amber"})]})]})]})]})}const Ooe={episode:"bg-burgundy-500",deadline:"bg-red-500",job:"bg-blue-500",waiver:"bg-green-500"},c5={upcoming:{bg:"bg-neutral-100",text:"text-neutral-600"},"in-progress":{bg:"bg-yellow-100",text:"text-yellow-700"},completed:{bg:"bg-green-100",text:"text-green-700"}};function Ioe({events:e}){return e.length===0?n.jsx("div",{className:"bg-white rounded-2xl shadow-card p-8 text-center",children:n.jsx("p",{className:"text-neutral-400",children:"No upcoming events"})}):n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6",children:[n.jsx("h2",{className:"text-lg font-display text-neutral-800 mb-6",children:"Upcoming Events"}),n.jsx("div",{className:"space-y-6",children:e.slice(0,10).map((t,r)=>{var s,a,i;return n.jsxs("div",{className:"relative",children:[r<e.length-1&&r<9&&n.jsx("div",{className:"absolute left-6 top-12 bottom-0 w-0.5 bg-cream-200"}),n.jsxs("div",{className:"flex gap-4",children:[n.jsx("div",{className:`flex-shrink-0 w-12 h-12 ${Ooe[t.type]||"bg-neutral-400"} rounded-full flex items-center justify-center text-white text-xl font-semibold shadow-md z-10`,children:t.icon||t.type.charAt(0).toUpperCase()}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[n.jsx("h3",{className:"font-semibold text-neutral-800 text-sm",children:t.title}),t.status&&n.jsx("span",{className:`flex-shrink-0 text-xs px-2 py-0.5 rounded-full ${((s=c5[t.status])==null?void 0:s.bg)||"bg-neutral-100"} ${((a=c5[t.status])==null?void 0:a.text)||"text-neutral-600"}`,children:t.status.replace("-"," ")})]}),n.jsx("p",{className:"text-sm text-neutral-500 mb-2",children:t.description}),((i=t.metadata)==null?void 0:i.timeUntil)&&n.jsx("p",{className:"text-xs text-neutral-400 font-mono mb-2",children:t.metadata.timeUntil}),t.actionUrl&&n.jsxs(se,{to:t.actionUrl,className:"text-xs text-burgundy-600 hover:text-burgundy-700 font-medium inline-flex items-center gap-1",children:["Take action",n.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]})]},r)})}),e.length>10&&n.jsx("div",{className:"mt-6 pt-6 border-t border-cream-200 text-center",children:n.jsxs("p",{className:"text-sm text-neutral-400",children:["Showing 10 of ",e.length," upcoming events"]})})]})}const Loe={user_signup:"bg-blue-100 text-blue-600",league_created:"bg-purple-100 text-purple-600",draft_completed:"bg-green-100 text-green-600",pick_submitted:"bg-yellow-100 text-yellow-600",payment_received:"bg-green-100 text-green-600",admin_action:"bg-burgundy-100 text-burgundy-600"};function Moe(e){const t=Date.now(),r=new Date(e).getTime(),s=t-r,a=Math.floor(s/1e3/60),i=Math.floor(a/60),o=Math.floor(i/24);return a<1?"just now":a<60?`${a}m ago`:i<24?`${i}h ago`:o<7?`${o}d ago`:new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"})}function Doe(e){if(!e)return!1;const t=e.toLowerCase();return t.includes("test")||t.startsWith("user ")||/^test\d+$/.test(t)||/^user\d+$/.test(t)}function $oe({activities:e}){const[t,r]=$.useState(!0),s=t?e.filter(i=>{var o;return!Doe((o=i.user)==null?void 0:o.display_name)}):e,a=e.length-s.length;return e.length===0?n.jsx("div",{className:"bg-white rounded-2xl shadow-card p-8 text-center",children:n.jsx("p",{className:"text-neutral-400",children:"No recent activity"})}):n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h2",{className:"text-lg font-display text-neutral-800",children:"Recent Activity"}),n.jsx("button",{onClick:()=>r(!t),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-medium transition-colors ${t?"bg-neutral-100 text-neutral-600 hover:bg-neutral-200":"bg-orange-100 text-orange-600 hover:bg-orange-200"}`,title:t?"Show test accounts":"Hide test accounts",children:t?n.jsxs(n.Fragment,{children:[n.jsx(uh,{className:"h-3.5 w-3.5"}),n.jsxs("span",{children:["Hiding ",a," test",a!==1?"s":""]})]}):n.jsxs(n.Fragment,{children:[n.jsx(Ha,{className:"h-3.5 w-3.5"}),n.jsx("span",{children:"Showing all"})]})})]}),s.length===0?n.jsx("div",{className:"text-center py-8",children:n.jsxs("p",{className:"text-neutral-400 text-sm",children:["No activity from real users yet.",n.jsx("button",{onClick:()=>r(!1),className:"ml-1 text-orange-500 hover:underline",children:"Show test accounts"})]})}):n.jsx("div",{className:"space-y-3",children:s.map((i,o)=>n.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg hover:bg-cream-50 transition-colors",children:[n.jsx("div",{className:`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center text-sm ${Loe[i.type]||"bg-neutral-100 text-neutral-600"}`,children:i.icon}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm text-neutral-700",children:i.message}),n.jsx("p",{className:"text-xs text-neutral-400 mt-0.5",children:Moe(i.timestamp)})]})]},o))})]})}const uy="https://rgfl-api-production.up.railway.app";function qoe(){const{user:e}=Et(),{data:t}=ie({queryKey:["profile",e==null?void 0:e.id],queryFn:async()=>{const{data:d,error:p}=await X.from("users").select("id, display_name, role").eq("id",e.id).single();if(p)throw p;return d},enabled:!!(e!=null&&e.id)}),{data:r,isLoading:s,refetch:a,dataUpdatedAt:i}=ie({queryKey:["adminDashboard"],queryFn:async()=>{var _;const p=(_=(await X.auth.getSession()).data.session)==null?void 0:_.access_token,[f,m,x]=await Promise.all([fetch(`${uy}/api/admin/dashboard/timeline`,{headers:{Authorization:`Bearer ${p}`}}),fetch(`${uy}/api/admin/dashboard/activity`,{headers:{Authorization:`Bearer ${p}`}}),fetch(`${uy}/api/admin/dashboard/system-health`,{headers:{Authorization:`Bearer ${p}`}})]),[y,g,b]=await Promise.all([f.json(),m.json(),x.json()]);return{timeline:y.timeline||[],activity:g.activity||[],health:b}},enabled:!!(e!=null&&e.id)&&(t==null?void 0:t.role)==="admin",refetchInterval:6e4,staleTime:3e4}),{data:o=[]}=ie({queryKey:["adminAlerts"],queryFn:async()=>{const d=[],{count:p}=await X.from("failed_emails").select("*",{count:"exact",head:!0}).eq("retry_attempted",!1);p&&p>0&&d.push({id:"failed-emails",severity:p>20?"critical":"warning",title:`${p} failed emails`,message:"Emails failed to deliver and need retry",actionLabel:"Retry All",actionHref:"/admin/email-queue"});const{count:f}=await X.from("job_runs").select("*",{count:"exact",head:!0}).eq("status","failed").gte("started_at",new Date(Date.now()-1440*60*1e3).toISOString());f&&f>0&&d.push({id:"failed-jobs",severity:"warning",title:`${f} job failures`,message:"Jobs failed in the last 24 hours",actionLabel:"View Jobs",actionHref:"/admin/jobs"});const{data:m}=await X.from("episodes").select("id, number, picks_lock_at").gt("picks_lock_at",new Date().toISOString()).order("picks_lock_at",{ascending:!0}).limit(1).single();if(m){const y=(new Date(m.picks_lock_at).getTime()-Date.now())/36e5;if(y<=24){const{count:g}=await X.from("weekly_picks").select("*",{count:"exact",head:!0}).eq("episode_id",m.id),{count:b}=await X.from("league_members").select("*",{count:"exact",head:!0}),_=b?(g||0)/b*100:0;d.push({id:"pick-deadline",severity:_<50?"warning":"info",title:`Episode ${m.number} locks in ${Math.round(y)}h`,message:`${g||0}/${b||0} picks submitted (${Math.round(_)}%)`,actionLabel:"Send Reminder",actionHref:"/admin/email-queue"})}}const x={critical:0,warning:1,info:2};return d.sort((y,g)=>x[y.severity]-x[g.severity])},enabled:!!(e!=null&&e.id)&&(t==null?void 0:t.role)==="admin",refetchInterval:6e4}),{data:l}=ie({queryKey:["adminVitals"],queryFn:async()=>{const d=new Date(Date.now()-6048e5).toISOString(),{count:p}=await X.from("users").select("*",{count:"exact",head:!0}).gte("last_active_at",d),{count:f}=await X.from("users").select("*",{count:"exact",head:!0}),{data:m}=await X.from("episodes").select("id").gt("picks_lock_at",new Date().toISOString()).order("picks_lock_at",{ascending:!0}).limit(1).single();let x=0,y=0;if(m){const{count:j}=await X.from("weekly_picks").select("*",{count:"exact",head:!0}).eq("episode_id",m.id);x=j||0;const{count:N}=await X.from("league_members").select("*",{count:"exact",head:!0});y=N||0}const{count:g}=await X.from("leagues").select("*",{count:"exact",head:!0}).eq("status","active"),{count:b}=await X.from("leagues").select("*",{count:"exact",head:!0}),{count:_}=await X.from("failed_emails").select("*",{count:"exact",head:!0}).eq("retry_attempted",!1),{count:w}=await X.from("job_runs").select("*",{count:"exact",head:!0}).eq("status","failed").gte("started_at",new Date(Date.now()-1440*60*1e3).toISOString());let S="healthy";return(_||0)>50||(w||0)>5?S="critical":((_||0)>10||(w||0)>0)&&(S="warning"),{activeUsers:{current:p||0,total:f||0},picksSubmitted:{current:x,total:y,percentage:y>0?Math.round(x/y*100):0},leaguesActive:{current:g||0,total:b||0},systemHealth:S}},enabled:!!(e!=null&&e.id)&&(t==null?void 0:t.role)==="admin",refetchInterval:6e4});if(t&&t.role!=="admin")return n.jsxs("div",{className:"min-h-screen bg-neutral-900",children:[n.jsx(_e,{}),n.jsx(dt,{}),n.jsx("main",{className:"max-w-4xl mx-auto px-4 py-16 text-center",children:n.jsxs("div",{className:"bg-neutral-800 rounded-2xl p-12 border border-neutral-700",children:[n.jsx("div",{className:"w-20 h-20 mx-auto mb-6 bg-red-900/30 rounded-full flex items-center justify-center",children:n.jsx(Tt,{className:"w-10 h-10 text-red-400"})}),n.jsx("h1",{className:"text-2xl font-display text-white mb-3",children:"Access Denied"}),n.jsx("p",{className:"text-neutral-400 mb-8",children:"You don't have permission to access the admin dashboard."}),n.jsx(se,{to:"/dashboard",className:"inline-flex items-center px-6 py-3 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors",children:"Back to Dashboard"})]})})]});const u=i?new Date(i).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"never";return n.jsxs("div",{className:"min-h-screen bg-neutral-900",children:[n.jsx(_e,{}),n.jsx(dt,{}),n.jsxs("main",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-display text-white",children:"Admin Dashboard"}),n.jsx("p",{className:"text-neutral-400 text-sm mt-1",children:"What needs my attention right now?"})]}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("span",{className:"text-xs text-neutral-500",children:["Updated ",u]}),n.jsx("button",{onClick:()=>a(),className:"p-2 text-neutral-400 hover:text-white hover:bg-neutral-800 rounded-lg transition-colors",title:"Refresh",children:n.jsx(an,{className:"h-4 w-4"})})]})]}),o.length>0&&n.jsx("div",{className:"mb-6 space-y-2",children:o.map(d=>n.jsxs("div",{className:`flex items-center justify-between p-4 rounded-xl ${d.severity==="critical"?"bg-red-900/30 border border-red-800":d.severity==="warning"?"bg-amber-900/30 border border-amber-800":"bg-blue-900/30 border border-blue-800"}`,children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Tt,{className:`h-5 w-5 ${d.severity==="critical"?"text-red-400":d.severity==="warning"?"text-amber-400":"text-blue-400"}`}),n.jsxs("div",{children:[n.jsx("span",{className:`font-medium ${d.severity==="critical"?"text-red-300":d.severity==="warning"?"text-amber-300":"text-blue-300"}`,children:d.title}),n.jsx("p",{className:"text-sm text-neutral-400",children:d.message})]})]}),n.jsx(se,{to:d.actionHref,className:`text-sm font-semibold px-4 py-2 rounded-lg transition-colors ${d.severity==="critical"?"bg-red-600 text-white hover:bg-red-700":d.severity==="warning"?"bg-amber-600 text-white hover:bg-amber-700":"bg-blue-600 text-white hover:bg-blue-700"}`,children:d.actionLabel})]},d.id))}),s&&n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"grid grid-cols-4 gap-4",children:[1,2,3,4].map(d=>n.jsxs("div",{className:"bg-neutral-800 rounded-xl p-6 animate-pulse",children:[n.jsx("div",{className:"h-4 bg-neutral-700 rounded w-1/2 mb-3"}),n.jsx("div",{className:"h-8 bg-neutral-700 rounded w-3/4"})]},d))}),n.jsxs("div",{className:"bg-neutral-800 rounded-xl p-6 animate-pulse",children:[n.jsx("div",{className:"h-6 bg-neutral-700 rounded w-1/4 mb-4"}),n.jsx("div",{className:"space-y-3",children:[1,2,3,4].map(d=>n.jsx("div",{className:"h-12 bg-neutral-700 rounded"},d))})]})]}),!s&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"bg-neutral-800 rounded-xl p-5 border border-neutral-700",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(Ke,{className:"h-4 w-4 text-blue-400"}),n.jsx("span",{className:"text-sm text-neutral-400",children:"Active Users"})]}),n.jsx("div",{className:"text-2xl font-bold text-white",children:(l==null?void 0:l.activeUsers.current)||0}),n.jsxs("div",{className:"text-xs text-neutral-500 mt-1",children:["of ",(l==null?void 0:l.activeUsers.total)||0," total (last 7 days)"]})]}),n.jsxs("div",{className:"bg-neutral-800 rounded-xl p-5 border border-neutral-700",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(kn,{className:"h-4 w-4 text-green-400"}),n.jsx("span",{className:"text-sm text-neutral-400",children:"Picks Submitted"})]}),n.jsxs("div",{className:"text-2xl font-bold text-white",children:[(l==null?void 0:l.picksSubmitted.percentage)||0,"%"]}),n.jsxs("div",{className:"text-xs text-neutral-500 mt-1",children:[(l==null?void 0:l.picksSubmitted.current)||0," of ",(l==null?void 0:l.picksSubmitted.total)||0," ","eligible"]})]}),n.jsxs("div",{className:"bg-neutral-800 rounded-xl p-5 border border-neutral-700",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(ot,{className:"h-4 w-4 text-amber-400"}),n.jsx("span",{className:"text-sm text-neutral-400",children:"Leagues Active"})]}),n.jsx("div",{className:"text-2xl font-bold text-white",children:(l==null?void 0:l.leaguesActive.current)||0}),n.jsxs("div",{className:"text-xs text-neutral-500 mt-1",children:["of ",(l==null?void 0:l.leaguesActive.total)||0," total leagues"]})]}),n.jsxs("div",{className:"bg-neutral-800 rounded-xl p-5 border border-neutral-700",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(Di,{className:"h-4 w-4 text-purple-400"}),n.jsx("span",{className:"text-sm text-neutral-400",children:"System Health"})]}),n.jsx("div",{className:`text-2xl font-bold ${(l==null?void 0:l.systemHealth)==="healthy"?"text-green-400":(l==null?void 0:l.systemHealth)==="warning"?"text-amber-400":"text-red-400"}`,children:(l==null?void 0:l.systemHealth)==="healthy"?" Healthy":(l==null?void 0:l.systemHealth)==="warning"?" Warning":" Critical"}),n.jsx(se,{to:"/admin/system/health",className:"text-xs text-neutral-500 hover:text-neutral-300 mt-1 block",children:"View details "})]})]}),n.jsxs("div",{className:"bg-neutral-800 rounded-xl p-6 border border-neutral-700",children:[n.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Upcoming Events"}),r!=null&&r.timeline&&r.timeline.length>0?n.jsx(Ioe,{events:r.timeline}):n.jsx("p",{className:"text-neutral-500 text-sm",children:"No upcoming events scheduled."})]}),n.jsxs("div",{className:"bg-neutral-800 rounded-xl p-6 border border-neutral-700",children:[n.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Recent Activity"}),r!=null&&r.activity&&r.activity.length>0?n.jsx($oe,{activities:r.activity}):n.jsx("p",{className:"text-neutral-500 text-sm",children:"No recent activity."})]})]})]})]})}const Foe={api:pj,database:sP,email:sn,payments:hp,jobs:rP},Uoe={api:"API",database:"Database",email:"Email",payments:"Payments",jobs:"Jobs"};function Boe({status:e}){const t={up:"bg-green-400",degraded:"bg-amber-400",down:"bg-red-400"};return n.jsx("span",{className:`w-2 h-2 rounded-full ${t[e]||"bg-neutral-400"}`})}function Hoe({status:e,isLoading:t}){if(t)return n.jsxs("div",{className:"bg-neutral-800 rounded-xl p-5 border border-neutral-700",children:[n.jsx("h3",{className:"text-sm font-semibold text-neutral-400 uppercase tracking-wider mb-4",children:"System Status"}),n.jsx("div",{className:"flex items-center justify-center h-32",children:n.jsx(be,{className:"h-6 w-6 text-neutral-500 animate-spin"})})]});const r=(e==null?void 0:e.services)||{};return n.jsxs("div",{className:"bg-neutral-800 rounded-xl p-5 border border-neutral-700",children:[n.jsx("h3",{className:"text-sm font-semibold text-neutral-400 uppercase tracking-wider mb-4",children:"System Status"}),n.jsx("div",{className:"space-y-3",children:Object.entries(r).map(([s,a])=>{const i=Foe[s]||pj,o=Uoe[s]||s,l=a;return n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(i,{className:"h-4 w-4 text-neutral-500"}),n.jsx("span",{className:"text-sm text-neutral-300",children:o})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Boe,{status:l.status}),n.jsx("span",{className:`text-xs ${l.status==="up"?"text-green-400":l.status==="degraded"?"text-amber-400":"text-red-400"}`,children:l.status.toUpperCase()})]})]},s)})}),(e==null?void 0:e.lastChecked)&&n.jsx("div",{className:"mt-4 pt-3 border-t border-neutral-700",children:n.jsxs("span",{className:"text-xs text-neutral-500",children:["Last checked: ",new Date(e.lastChecked).toLocaleTimeString()]})})]})}const Koe="https://rgfl-api-production.up.railway.app",u5={PL:"bg-purple-600 text-white",P0:"bg-red-800 text-white",P1:"bg-red-600 text-white",P2:"bg-orange-600 text-white",P3:"bg-yellow-600 text-black",P4:"bg-blue-600 text-white"},d5={PL:"Cannot launch without",P0:"Critical Game Function",P1:"Major Web Update",P2:"Minor Web Update",P3:"Minor Edits",P4:"Nice to have"},h5={investigating:"bg-red-900/50 text-red-300 border-red-700",identified:"bg-orange-900/50 text-orange-300 border-orange-700",monitoring:"bg-blue-900/50 text-blue-300 border-blue-700",needs_verified:"bg-purple-900/50 text-purple-300 border-purple-700",verified:"bg-teal-900/50 text-teal-300 border-teal-700",resolved:"bg-green-900/50 text-green-300 border-green-700"},f5={investigating:"Investigating",identified:"Identified",monitoring:"Monitoring",needs_verified:"Needs Verified",verified:"Verified",resolved:"Resolved"};async function Hl(e,t){var i;const s=(i=(await X.auth.getSession()).data.session)==null?void 0:i.access_token,a=await fetch(`${Koe}${e}`,{...t,headers:{...t==null?void 0:t.headers,Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});if(!a.ok)throw new Error(`API error: ${a.status}`);return a.json()}function dy(e){return new Date(e).toLocaleString([],{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function m5(e,t){const r=new Date(e),a=(t?new Date(t):new Date).getTime()-r.getTime(),i=Math.floor(a/6e4);if(i<60)return`${i}m`;const o=Math.floor(i/60),l=i%60;if(o<24)return`${o}h ${l}m`;const u=Math.floor(o/24),d=o%24;return`${u}d ${d}h`}function zoe({incidentId:e,onClose:t}){var j;const r=at(),[s,a]=$.useState(""),[i,o]=$.useState(null),{data:l,isLoading:u,error:d}=ie({queryKey:["incident",e],queryFn:()=>Hl(`/api/admin/incidents/${e}`)}),p=()=>{r.invalidateQueries({queryKey:["incident",e]}),r.invalidateQueries({queryKey:["incidents","active"]}),r.invalidateQueries({queryKey:["incidents","resolved"]}),r.invalidateQueries({queryKey:["command-center"]})},f=ke({mutationFn:N=>Hl(`/api/admin/incidents/${e}/notes`,{method:"POST",body:JSON.stringify(N)}),onSuccess:()=>{p(),a(""),o(null)}}),m=ke({mutationFn:N=>Hl(`/api/admin/incidents/${e}/resolve`,{method:"POST",body:JSON.stringify({note:N})}),onSuccess:()=>{p()}}),x=ke({mutationFn:N=>Hl(`/api/admin/incidents/${e}`,{method:"PATCH",body:JSON.stringify({severity:N})}),onSuccess:()=>{p()}}),y=ke({mutationFn:N=>Hl(`/api/admin/incidents/${e}`,{method:"PATCH",body:JSON.stringify({status:N})}),onSuccess:()=>{p(),o(null)}}),g=ke({mutationFn:()=>Hl(`/api/admin/incidents/${e}`,{method:"PATCH",body:JSON.stringify({status:"investigating"})}),onSuccess:()=>{p()}}),b=()=>{if(!s.trim()&&i){y.mutate(i);return}s.trim()&&f.mutate({note:s,status:i||void 0})},_=()=>{const N=s.trim()||void 0;m.mutate(N),a("")};if(u)return n.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50",children:n.jsx("div",{className:"bg-neutral-800 rounded-xl p-8",children:n.jsx(be,{className:"h-8 w-8 animate-spin text-neutral-400"})})});if(d||!l)return n.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-neutral-800 rounded-xl p-8 max-w-md",children:[n.jsx("p",{className:"text-red-400",children:"Failed to load incident details"}),n.jsx("button",{onClick:t,className:"mt-4 px-4 py-2 bg-neutral-700 text-white rounded-lg",children:"Close"})]})});const w=l.status==="resolved",S=[...l.incident_updates||[]].sort((N,C)=>new Date(C.created_at).getTime()-new Date(N.created_at).getTime());return n.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-neutral-800 rounded-xl w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"p-5 border-b border-neutral-700 flex items-start justify-between",children:[n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("span",{className:`px-2 py-1 rounded text-sm font-bold ${u5[l.severity]}`,children:l.severity}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-semibold text-white",children:l.title}),n.jsxs("div",{className:"flex items-center gap-3 mt-1 text-sm text-neutral-400",children:[n.jsx("span",{className:`px-2 py-0.5 rounded border text-xs ${h5[l.status]}`,children:f5[l.status]}),n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(Nt,{className:"h-3 w-3"}),m5(l.created_at,l.resolved_at)]})]})]})]}),n.jsx("button",{onClick:t,className:"p-1 text-neutral-400 hover:text-white hover:bg-neutral-700 rounded transition-colors",children:n.jsx(It,{className:"h-5 w-5"})})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-5 space-y-5",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-neutral-500 mb-1",children:"Severity"}),w?n.jsxs("p",{className:"text-sm text-white",children:[l.severity," - ",d5[l.severity]]}):n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("select",{value:l.severity,onChange:N=>x.mutate(N.target.value),disabled:x.isPending,className:`px-2 py-1 rounded text-sm font-bold border-0 cursor-pointer ${u5[l.severity]} ${x.isPending?"opacity-50":""}`,children:["PL","P0","P1","P2","P3","P4"].map(N=>n.jsxs("option",{value:N,className:"bg-neutral-800 text-white",children:[N," - ",d5[N]]},N))}),x.isPending&&n.jsx(be,{className:"h-4 w-4 animate-spin text-neutral-400"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-neutral-500 mb-1",children:"Created"}),n.jsx("p",{className:"text-sm text-white",children:dy(l.created_at)})]}),l.resolved_at&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-neutral-500 mb-1",children:"Resolved"}),n.jsx("p",{className:"text-sm text-white",children:dy(l.resolved_at)})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-neutral-500 mb-1",children:"Reported By"}),n.jsx("p",{className:"text-sm text-white",children:((j=l.created_by_user)==null?void 0:j.display_name)||"Unknown"})]})]}),l.description&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-neutral-500 mb-1",children:"Description"}),n.jsx("p",{className:"text-sm text-neutral-300 bg-neutral-900 rounded-lg p-3",children:l.description})]}),l.affected_systems&&l.affected_systems.length>0&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-neutral-500 mb-2",children:"Affected Systems"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:l.affected_systems.map(N=>n.jsxs("span",{className:"flex items-center gap-1 px-2 py-1 bg-red-900/30 text-red-300 rounded text-xs",children:[n.jsx(pj,{className:"h-3 w-3"}),N]},N))})]}),l.users_affected&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-neutral-500 mb-1",children:"Users Affected"}),n.jsx("p",{className:"text-sm text-white",children:l.users_affected.toLocaleString()})]}),l.workaround&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-neutral-500 mb-1",children:"Workaround"}),n.jsx("p",{className:"text-sm text-neutral-300 bg-neutral-900 rounded-lg p-3",children:l.workaround})]}),l.link&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-neutral-500 mb-1",children:"Related Link"}),n.jsxs("a",{href:l.link,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-sm text-blue-400 hover:text-blue-300 bg-neutral-900 rounded-lg p-3 transition-colors",children:[n.jsx(Ad,{className:"h-4 w-4"}),l.link]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-neutral-500 mb-3",children:"Update Timeline"}),n.jsx("div",{className:"space-y-3",children:S.length===0?n.jsx("p",{className:"text-sm text-neutral-500 italic",children:"No updates yet"}):S.map(N=>{var C;return n.jsxs("div",{className:"flex gap-3 p-3 bg-neutral-900 rounded-lg border border-neutral-700",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${N.status==="resolved"?"bg-green-900/50":"bg-neutral-700"}`,children:N.status==="resolved"?n.jsx(xt,{className:"h-4 w-4 text-green-400"}):n.jsx(hh,{className:"h-4 w-4 text-neutral-400"})})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("span",{className:"text-sm font-medium text-white",children:((C=N.created_by_user)==null?void 0:C.display_name)||"System"}),n.jsx("span",{className:`px-1.5 py-0.5 rounded text-xs border ${h5[N.status]}`,children:f5[N.status]}),n.jsx("span",{className:"text-xs text-neutral-500",children:dy(N.created_at)})]}),n.jsx("p",{className:"text-sm text-neutral-300",children:N.note})]})]},N.id)})})]})]}),!w&&n.jsxs("div",{className:"p-5 border-t border-neutral-700 space-y-3",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("select",{value:i||"",onChange:N=>o(N.target.value||null),className:"bg-neutral-700 border border-neutral-600 rounded-lg px-3 py-2 text-sm text-white",children:[n.jsx("option",{value:"",children:"Keep Status"}),n.jsx("option",{value:"investigating",children:"Investigating"}),n.jsx("option",{value:"identified",children:"Identified"}),n.jsx("option",{value:"monitoring",children:"Monitoring"}),n.jsx("option",{value:"needs_verified",children:"Needs Verified"}),n.jsx("option",{value:"verified",children:"Verified"})]}),n.jsx("input",{type:"text",value:s,onChange:N=>a(N.target.value),placeholder:"Add an update note...",className:"flex-1 bg-neutral-700 border border-neutral-600 rounded-lg px-3 py-2 text-sm text-white placeholder-neutral-500",onKeyDown:N=>{N.key==="Enter"&&!N.shiftKey&&(N.preventDefault(),b())}}),n.jsx("button",{onClick:b,disabled:!s.trim()&&!i||f.isPending||y.isPending,className:"px-4 py-2 bg-survivor-orange hover:bg-survivor-orange/80 disabled:bg-neutral-600 text-white rounded-lg transition-colors flex items-center gap-2",children:f.isPending||y.isPending?n.jsx(be,{className:"h-4 w-4 animate-spin"}):n.jsx(Jn,{className:"h-4 w-4"})})]}),n.jsxs("button",{onClick:_,disabled:m.isPending,className:"w-full py-2 bg-green-600 hover:bg-green-700 disabled:bg-neutral-600 text-white rounded-lg transition-colors flex items-center justify-center gap-2",children:[m.isPending?n.jsx(be,{className:"h-4 w-4 animate-spin"}):n.jsx(xt,{className:"h-4 w-4"}),"Resolve Incident"]})]}),w&&n.jsxs("div",{className:"p-5 border-t border-neutral-700 space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-center gap-2 text-green-400",children:[n.jsx(xt,{className:"h-5 w-5"}),n.jsx("span",{children:"Incident Resolved"}),l.resolved_at&&n.jsxs("span",{className:"text-neutral-500",children:["(",m5(l.created_at,l.resolved_at)," total)"]})]}),n.jsxs("button",{onClick:()=>g.mutate(),disabled:g.isPending,className:"w-full py-2 bg-amber-600 hover:bg-amber-700 disabled:bg-neutral-600 text-white rounded-lg transition-colors flex items-center justify-center gap-2",children:[g.isPending?n.jsx(be,{className:"h-4 w-4 animate-spin"}):n.jsx(mj,{className:"h-4 w-4"}),"Reopen Incident"]})]})]})})}const Woe="https://rgfl-api-production.up.railway.app",hy={PL:"bg-purple-600 text-white",P0:"bg-red-800 text-white",P1:"bg-red-600 text-white",P2:"bg-orange-600 text-white",P3:"bg-yellow-600 text-black",P4:"bg-blue-600 text-white"},p5={PL:"Cannot launch without",P0:"Critical Game Function",P1:"Major Web Update",P2:"Minor Web Update",P3:"Minor Edits",P4:"Nice to have"},Goe={investigating:"Investigating",identified:"Identified",monitoring:"Monitoring",needs_verified:"Needs Verified",verified:"Verified",resolved:"Resolved"},Voe={investigating:"bg-red-900/50 text-red-300 border-red-700",identified:"bg-orange-900/50 text-orange-300 border-orange-700",monitoring:"bg-blue-900/50 text-blue-300 border-blue-700",needs_verified:"bg-purple-900/50 text-purple-300 border-purple-700",verified:"bg-teal-900/50 text-teal-300 border-teal-700",resolved:"bg-green-900/50 text-green-300 border-green-700"};async function fy(e,t){var i;const s=(i=(await X.auth.getSession()).data.session)==null?void 0:i.access_token,a=await fetch(`${Woe}${e}`,{...t,headers:{...t==null?void 0:t.headers,Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});if(!a.ok)throw new Error(`API error: ${a.status}`);return a.json()}const Kl=5;function Qoe({incidents:e}){const t=at(),[r,s]=$.useState(!1),[a,i]=$.useState(!1),[o,l]=$.useState(null),[u,d]=$.useState(0),[p,f]=$.useState(0),[m,x]=$.useState({severity:"P2",title:"",description:"",affectedSystems:[],link:""}),{data:y}=ie({queryKey:["incidents","active"],queryFn:()=>fy("/api/admin/incidents?includeResolved=false&limit=100"),refetchInterval:1e4}),{data:g}=ie({queryKey:["incidents","resolved"],queryFn:()=>fy("/api/admin/incidents?status=resolved&limit=50"),enabled:a}),b=(y==null?void 0:y.incidents)||e,_=Math.ceil(b.length/Kl),w=b.slice(u*Kl,(u+1)*Kl),S=(g==null?void 0:g.incidents)||[],j=Math.ceil(S.length/Kl),N=S.slice(p*Kl,(p+1)*Kl),C=ke({mutationFn:T=>fy("/api/admin/incidents",{method:"POST",body:JSON.stringify(T)}),onSuccess:()=>{t.invalidateQueries({queryKey:["command-center"]}),s(!1),x({severity:"P2",title:"",description:"",affectedSystems:[],link:""})}}),E=["Authentication","Payments","Scoring","Drafts","Picks","Notifications","Storage"];return n.jsxs("div",{className:"bg-neutral-800 rounded-xl p-5 border border-neutral-700",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-sm font-semibold text-neutral-400 uppercase tracking-wider",children:"Incident Panel"}),n.jsxs("button",{onClick:()=>s(!r),className:"text-xs bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded-lg transition-colors flex items-center gap-1",children:[r?n.jsx(It,{className:"h-3 w-3"}):n.jsx(tr,{className:"h-3 w-3"}),r?"Cancel":"Declare"]})]}),r&&n.jsx("div",{className:"mb-4 p-4 bg-neutral-900 rounded-lg border border-neutral-700",children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-neutral-400 mb-1",children:"Severity"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:["PL","P0","P1","P2","P3","P4"].map(T=>n.jsxs("button",{onClick:()=>x(I=>({...I,severity:T})),className:`px-3 py-1 rounded text-xs font-medium transition-colors relative group ${m.severity===T?hy[T]:"bg-neutral-700 text-neutral-300 hover:bg-neutral-600"}`,title:p5[T],children:[T,n.jsx("span",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 bg-neutral-900 text-neutral-200 text-xs rounded whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-10",children:p5[T]})]},T))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-neutral-400 mb-1",children:"Title"}),n.jsx("input",{type:"text",value:m.title,onChange:T=>x(I=>({...I,title:T.target.value})),placeholder:"Brief description of the issue",className:"w-full bg-neutral-800 border border-neutral-600 rounded px-3 py-2 text-sm text-white placeholder-neutral-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-neutral-400 mb-1",children:"Affected Systems"}),n.jsx("div",{className:"flex flex-wrap gap-1",children:E.map(T=>n.jsx("button",{onClick:()=>x(I=>({...I,affectedSystems:I.affectedSystems.includes(T)?I.affectedSystems.filter(A=>A!==T):[...I.affectedSystems,T]})),className:`px-2 py-1 rounded text-xs transition-colors ${m.affectedSystems.includes(T)?"bg-red-600 text-white":"bg-neutral-700 text-neutral-300 hover:bg-neutral-600"}`,children:T},T))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs text-neutral-400 mb-1",children:n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(ine,{className:"h-3 w-3"}),"Link (optional)"]})}),n.jsx("input",{type:"url",value:m.link,onChange:T=>x(I=>({...I,link:T.target.value})),placeholder:"https://...",className:"w-full bg-neutral-800 border border-neutral-600 rounded px-3 py-2 text-sm text-white placeholder-neutral-500"})]}),n.jsxs("button",{onClick:()=>C.mutate(m),disabled:!m.title||C.isPending,className:"w-full bg-red-600 hover:bg-red-700 disabled:bg-neutral-600 text-white py-2 rounded-lg text-sm font-medium transition-colors flex items-center justify-center gap-2",children:[C.isPending?n.jsx(be,{className:"h-4 w-4 animate-spin"}):n.jsx(Tt,{className:"h-4 w-4"}),"Declare Incident"]})]})}),b.length>0?n.jsxs("div",{className:"space-y-2",children:[w.map(T=>n.jsxs("button",{onClick:()=>l(T.id),className:"w-full flex items-center gap-3 p-3 bg-neutral-900 rounded-lg border border-neutral-700 hover:border-neutral-500 hover:bg-neutral-800 transition-colors text-left",children:[n.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-bold ${hy[T.severity]}`,children:T.severity}),n.jsx("span",{className:`px-2 py-0.5 rounded text-xs border ${Voe[T.status]}`,children:Goe[T.status]}),n.jsx("div",{className:"flex-1 min-w-0",children:n.jsx("p",{className:"text-sm text-white truncate",children:T.title})}),n.jsx(dr,{className:"h-4 w-4 text-neutral-500"})]},T.id)),_>1&&n.jsxs("div",{className:"flex items-center justify-between pt-2",children:[n.jsxs("button",{onClick:()=>d(T=>Math.max(0,T-1)),disabled:u===0,className:"flex items-center gap-1 text-xs text-neutral-400 hover:text-white disabled:opacity-50 disabled:hover:text-neutral-400 transition-colors",children:[n.jsx(mw,{className:"h-4 w-4"}),"Prev"]}),n.jsxs("span",{className:"text-xs text-neutral-500",children:[u+1," / ",_]}),n.jsxs("button",{onClick:()=>d(T=>Math.min(_-1,T+1)),disabled:u>=_-1,className:"flex items-center gap-1 text-xs text-neutral-400 hover:text-white disabled:opacity-50 disabled:hover:text-neutral-400 transition-colors",children:["Next",n.jsx(dr,{className:"h-4 w-4"})]})]})]}):n.jsxs("div",{className:"text-center py-6",children:[n.jsx("div",{className:"w-12 h-12 mx-auto mb-3 rounded-full bg-green-900/30 flex items-center justify-center",children:n.jsx(Tt,{className:"h-6 w-6 text-green-500"})}),n.jsx("p",{className:"text-sm text-neutral-400",children:"No active incidents"}),n.jsx("p",{className:"text-xs text-neutral-500 mt-1",children:"All systems operational"})]}),n.jsxs("div",{className:"mt-4 pt-4 border-t border-neutral-700",children:[n.jsxs("button",{onClick:()=>i(!a),className:"w-full flex items-center justify-between text-sm text-neutral-400 hover:text-white transition-colors",children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(Pd,{className:"h-4 w-4"}),"Resolved Incidents"]}),n.jsx(dr,{className:`h-4 w-4 transition-transform ${a?"rotate-90":""}`})]}),a&&n.jsx("div",{className:"mt-3 space-y-2",children:S.length===0?n.jsx("p",{className:"text-xs text-neutral-500 text-center py-2",children:"No resolved incidents"}):n.jsxs(n.Fragment,{children:[N.map(T=>n.jsxs("button",{onClick:()=>l(T.id),className:"w-full flex items-center gap-3 p-2 bg-neutral-900/50 rounded-lg border border-neutral-700/50 hover:border-neutral-600 hover:bg-neutral-800/50 transition-colors text-left opacity-75",children:[n.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-bold ${hy[T.severity]}`,children:T.severity}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm text-neutral-300 truncate",children:T.title}),n.jsx("p",{className:"text-xs text-green-600",children:"Resolved"})]}),n.jsx(dr,{className:"h-4 w-4 text-neutral-600"})]},T.id)),j>1&&n.jsxs("div",{className:"flex items-center justify-between pt-2",children:[n.jsxs("button",{onClick:()=>f(T=>Math.max(0,T-1)),disabled:p===0,className:"flex items-center gap-1 text-xs text-neutral-400 hover:text-white disabled:opacity-50 disabled:hover:text-neutral-400 transition-colors",children:[n.jsx(mw,{className:"h-4 w-4"}),"Prev"]}),n.jsxs("span",{className:"text-xs text-neutral-500",children:[p+1," / ",j]}),n.jsxs("button",{onClick:()=>f(T=>Math.min(j-1,T+1)),disabled:p>=j-1,className:"flex items-center gap-1 text-xs text-neutral-400 hover:text-white disabled:opacity-50 disabled:hover:text-neutral-400 transition-colors",children:["Next",n.jsx(dr,{className:"h-4 w-4"})]})]})]})})]}),o&&n.jsx(zoe,{incidentId:o,onClose:()=>l(null)})]})}const Yoe=[{path:"/admin/scoring",label:"Episode Scoring",icon:n.jsx(ot,{className:"h-5 w-5"}),description:"Enter scores"},{path:"/admin/leagues",label:"Leagues",icon:n.jsx(Ke,{className:"h-5 w-5"}),description:"Manage leagues"},{path:"/admin/announcements",label:"Announcements",icon:n.jsx(Ys,{className:"h-5 w-5"}),description:"Send blasts"},{path:"/admin/castaways",label:"Castaways",icon:n.jsx(ure,{className:"h-5 w-5"}),description:"Manage cast"},{path:"/admin/stats",label:"Analytics",icon:n.jsx(Rd,{className:"h-5 w-5"}),description:"View metrics"}],Joe=[{path:"https://supabase.com/dashboard/project/qxrgejdfxcvsfktgysop",label:"Supabase",icon:n.jsx(tne,{className:"h-5 w-5"}),description:"Database",external:!0},{path:"https://railway.app",label:"Railway",icon:n.jsx(Di,{className:"h-5 w-5"}),description:"Deployments",external:!0},{path:"https://github.com/agayinsanfrancisco/reality-games-survivor",label:"GitHub",icon:n.jsx(Fc,{className:"h-5 w-5"}),description:"Repository",external:!0},{path:"https://resend.com/emails",label:"Resend",icon:n.jsx(sn,{className:"h-5 w-5"}),description:"Email logs",external:!0},{path:"https://console.twilio.com",label:"Twilio",icon:n.jsx(el,{className:"h-5 w-5"}),description:"SMS logs",external:!0},{path:"https://buffer.com/publish",label:"Buffer",icon:n.jsx(wn,{className:"h-5 w-5"}),description:"Social media",external:!0}];function Xoe(){return n.jsxs("div",{className:"bg-neutral-800 rounded-xl p-4 border border-neutral-700",children:[n.jsx("h3",{className:"text-sm font-semibold text-neutral-400 uppercase tracking-wider mb-4",children:"Quick Links"}),n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-2",children:Yoe.map(e=>n.jsxs(se,{to:e.path,className:"flex flex-col items-center justify-center p-3 rounded-lg bg-neutral-700/50 hover:bg-neutral-700 transition-colors group",children:[n.jsx("div",{className:"text-neutral-400 group-hover:text-orange-400 transition-colors mb-1",children:e.icon}),n.jsx("span",{className:"text-xs font-medium text-white text-center",children:e.label}),n.jsx("span",{className:"text-[10px] text-neutral-500 text-center",children:e.description})]},e.path))}),n.jsxs("div",{className:"mt-4 pt-3 border-t border-neutral-700",children:[n.jsx("h4",{className:"text-xs font-semibold text-neutral-500 uppercase tracking-wider mb-2",children:"External Tools"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:Joe.map(e=>n.jsxs("a",{href:e.path,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-3 py-1.5 rounded-lg bg-neutral-700/50 hover:bg-neutral-700 transition-colors text-sm text-neutral-300 hover:text-white",children:[e.icon,n.jsx("span",{children:e.label}),n.jsx(Ad,{className:"h-3 w-3 text-neutral-500"})]},e.path))})]})]})}const x5="https://rgfl-api-production.up.railway.app",Zoe={user_signup:"bg-blue-500/20 text-blue-400",league_created:"bg-purple-500/20 text-purple-400",draft_completed:"bg-green-500/20 text-green-400",pick_submitted:"bg-amber-500/20 text-amber-400",payment_received:"bg-emerald-500/20 text-emerald-400",admin_action:"bg-red-500/20 text-red-400",quick_action:"bg-orange-500/20 text-orange-400",incident_declared:"bg-red-500/20 text-red-400",incident_resolved:"bg-green-500/20 text-green-400"};function ele(e){const t=Date.now(),r=new Date(e).getTime(),s=t-r,a=Math.floor(s/1e3),i=Math.floor(a/60),o=Math.floor(i/60);return a<5?"just now":a<60?`${a}s ago`:i<60?`${i}m ago`:o<24?`${o}h ago`:new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"})}function tle(e){if(!e)return!1;const t=e.toLowerCase();return t.includes("test")||t.startsWith("user ")||/^test\d+$/.test(t)||/^user\d+$/.test(t)}function nle(){const[e,t]=$.useState([]),[r,s]=$.useState(!0),[a,i]=$.useState(!1),o=$.useRef(null),l=$.useRef(null),{data:u,isLoading:d}=ie({queryKey:["command-center","activity"],queryFn:async()=>{var g;const x=(g=(await X.auth.getSession()).data.session)==null?void 0:g.access_token,y=await fetch(`${x5}/api/admin/dashboard/activity?limit=30`,{headers:{Authorization:`Bearer ${x}`}});if(!y.ok)throw new Error("Failed to fetch activity");return y.json()}});$.useEffect(()=>{u!=null&&u.activity&&t(u.activity)},[u]),$.useEffect(()=>{if(a)return;const m=setInterval(async()=>{var y;if(!a)try{const b=(y=(await X.auth.getSession()).data.session)==null?void 0:y.access_token,_=await fetch(`${x5}/api/admin/dashboard/activity?limit=30`,{headers:{Authorization:`Bearer ${b}`}});if(_.ok){const w=await _.json();t(w.activity||[])}}catch(g){console.error("Failed to poll activity:",g)}},1e4),x=l.current;return()=>{clearInterval(m),x&&x.close()}},[a]);const p=r?e.filter(m=>{var x;return!tle((x=m.user)==null?void 0:x.display_name)}):e,f=e.length-p.length;return n.jsxs("div",{className:"bg-neutral-800 rounded-xl p-5 border border-neutral-700 h-[400px] flex flex-col",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4 flex-shrink-0",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("h3",{className:"text-sm font-semibold text-neutral-400 uppercase tracking-wider",children:"Live Activity Feed"}),n.jsx("div",{className:`w-2 h-2 rounded-full ${a?"bg-amber-400":"bg-green-400 animate-pulse"}`})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("button",{onClick:()=>s(!r),className:`flex items-center gap-1 px-2 py-1 rounded text-xs transition-colors ${r?"bg-neutral-700 text-neutral-300":"bg-orange-900/50 text-orange-300"}`,title:r?"Show test accounts":"Hide test accounts",children:[r?n.jsx(uh,{className:"h-3 w-3"}):n.jsx(Ha,{className:"h-3 w-3"}),r?`Hide ${f}`:"Show all"]}),n.jsx("button",{onClick:()=>i(!a),className:`p-1.5 rounded transition-colors ${a?"bg-green-900/50 text-green-400":"bg-neutral-700 text-neutral-300"}`,title:a?"Resume feed":"Pause feed",children:a?n.jsx(fx,{className:"h-4 w-4"}):n.jsx(lP,{className:"h-4 w-4"})})]})]}),n.jsx("div",{ref:o,className:"flex-1 overflow-y-auto space-y-2 pr-2 scrollbar-thin scrollbar-thumb-neutral-700 scrollbar-track-transparent",children:d?n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsx(be,{className:"h-6 w-6 text-neutral-500 animate-spin"})}):p.length===0?n.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-neutral-500",children:[n.jsx("p",{className:"text-sm",children:"No recent activity"}),r&&f>0&&n.jsxs("button",{onClick:()=>s(!1),className:"text-xs text-orange-400 hover:underline mt-2",children:["Show ",f," test account activities"]})]}):p.map((m,x)=>n.jsxs("div",{className:"flex items-start gap-3 p-2 rounded-lg hover:bg-neutral-700/50 transition-colors",children:[n.jsx("div",{className:`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center text-sm ${Zoe[m.type]||"bg-neutral-700 text-neutral-400"}`,children:m.icon}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm text-neutral-200 line-clamp-2",children:m.message}),n.jsx("p",{className:"text-xs text-neutral-500 mt-0.5",children:ele(m.timestamp)})]})]},`${m.timestamp}-${x}`))}),a&&n.jsx("div",{className:"mt-2 pt-2 border-t border-neutral-700 text-center",children:n.jsx("span",{className:"text-xs text-amber-400",children:"Feed paused"})})]})}const rle="https://rgfl-api-production.up.railway.app",sle={picks:kn,payments:Ys,email:sn,scoring:kn,system:rP,drafts:Ke},ale={critical:"border-red-700 bg-red-900/30",warning:"border-amber-700 bg-amber-900/30",info:"border-blue-700 bg-blue-900/30"},ile={critical:"bg-red-600 text-white",warning:"bg-amber-600 text-white",info:"bg-blue-600 text-white"};async function ole(e,t){var i;const s=(i=(await X.auth.getSession()).data.session)==null?void 0:i.access_token,a=await fetch(`${rle}${e}`,{...t,headers:{...t==null?void 0:t.headers,Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});if(!a.ok)throw new Error(`API error: ${a.status}`);return a.json()}function lle({items:e,totalCount:t,isLoading:r}){const s=at(),a=ke({mutationFn:i=>ole(i,{method:"POST",body:"{}"}),onSuccess:()=>{s.invalidateQueries({queryKey:["command-center"]})}});return r?n.jsxs("div",{className:"bg-neutral-800 rounded-xl p-5 border border-neutral-700",children:[n.jsx("h3",{className:"text-sm font-semibold text-neutral-400 uppercase tracking-wider mb-4",children:"Attention Required"}),n.jsx("div",{className:"flex items-center justify-center h-24",children:n.jsx(be,{className:"h-6 w-6 text-neutral-500 animate-spin"})})]}):n.jsxs("div",{className:"bg-neutral-800 rounded-xl p-5 border border-neutral-700",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h3",{className:"text-sm font-semibold text-neutral-400 uppercase tracking-wider",children:"Attention Required"}),t>0&&n.jsx("span",{className:"px-2 py-0.5 bg-red-600 text-white text-xs font-bold rounded-full",children:t})]}),e.length===0?n.jsxs("div",{className:"text-center py-6",children:[n.jsx("div",{className:"w-12 h-12 mx-auto mb-3 rounded-full bg-green-900/30 flex items-center justify-center",children:n.jsx(Tt,{className:"h-6 w-6 text-green-500"})}),n.jsx("p",{className:"text-sm text-neutral-400",children:"No items need attention"})]}):n.jsxs("div",{className:"space-y-2",children:[e.slice(0,5).map(i=>{const o=sle[i.category]||Tt;return n.jsx("div",{className:`p-3 rounded-lg border ${ale[i.severity]}`,children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(o,{className:`h-4 w-4 mt-0.5 flex-shrink-0 ${i.severity==="critical"?"text-red-400":i.severity==="warning"?"text-amber-400":"text-blue-400"}`}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-sm font-medium text-white truncate",children:i.title}),i.count&&i.count>1&&n.jsx("span",{className:`px-1.5 py-0.5 text-xs font-bold rounded ${ile[i.severity]}`,children:i.count})]}),n.jsx("p",{className:"text-xs text-neutral-400 mt-0.5 truncate",children:i.description}),i.actionType==="link"?n.jsxs(se,{to:i.actionEndpoint,className:`inline-block mt-2 text-xs font-medium ${i.severity==="critical"?"text-red-400 hover:text-red-300":i.severity==="warning"?"text-amber-400 hover:text-amber-300":"text-blue-400 hover:text-blue-300"}`,children:[i.actionLabel," "]}):n.jsx("button",{onClick:()=>a.mutate(i.actionEndpoint),disabled:a.isPending,className:`mt-2 text-xs font-medium ${i.severity==="critical"?"text-red-400 hover:text-red-300":i.severity==="warning"?"text-amber-400 hover:text-amber-300":"text-blue-400 hover:text-blue-300"}`,children:a.isPending?"Processing...":i.actionLabel})]})]})},i.id)}),e.length>5&&n.jsx("div",{className:"text-center pt-2",children:n.jsxs("span",{className:"text-xs text-neutral-500",children:["+",e.length-5," more items"]})})]})]})}function cle({data:e,isLoading:t}){var s,a,i;if(t)return n.jsxs("div",{className:"bg-neutral-800 rounded-xl p-5 border border-neutral-700",children:[n.jsx("h3",{className:"text-sm font-semibold text-neutral-400 uppercase tracking-wider mb-4",children:"Active Operations"}),n.jsx("div",{className:"flex items-center justify-center h-24",children:n.jsx(be,{className:"h-6 w-6 text-neutral-500 animate-spin"})})]});const r=(s=e==null?void 0:e.picks)!=null&&s.total?Math.round(e.picks.submitted/e.picks.total*100):0;return n.jsxs("div",{className:"bg-neutral-800 rounded-xl p-5 border border-neutral-700",children:[n.jsx("h3",{className:"text-sm font-semibold text-neutral-400 uppercase tracking-wider mb-4",children:"Active Operations"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ke,{className:"h-4 w-4 text-blue-400"}),n.jsx("span",{className:"text-sm text-neutral-300",children:"Users Online"})]}),n.jsx("span",{className:"text-lg font-bold text-white",children:(e==null?void 0:e.usersOnline)||0})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(dc,{className:"h-4 w-4 text-amber-400"}),n.jsx("span",{className:"text-sm text-neutral-300",children:"Active Drafts"})]}),n.jsx("span",{className:`text-lg font-bold ${((e==null?void 0:e.activeDrafts)||0)>0?"text-amber-400":"text-white"}`,children:(e==null?void 0:e.activeDrafts)||0})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(kn,{className:"h-4 w-4 text-green-400"}),n.jsx("span",{className:"text-sm text-neutral-300",children:"Picks Submitted"})]}),n.jsxs("span",{className:"text-sm text-neutral-400",children:[((a=e==null?void 0:e.picks)==null?void 0:a.submitted)||0,"/",((i=e==null?void 0:e.picks)==null?void 0:i.total)||0]})]}),n.jsx("div",{className:"w-full bg-neutral-700 rounded-full h-2",children:n.jsx("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-500",style:{width:`${r}%`}})}),n.jsx("div",{className:"text-right mt-1",children:n.jsxs("span",{className:"text-xs text-neutral-500",children:[r,"%"]})})]}),(e==null?void 0:e.draftsInProgress)&&e.draftsInProgress.length>0&&n.jsxs("div",{className:"pt-2 border-t border-neutral-700",children:[n.jsx("span",{className:"text-xs text-neutral-500 uppercase tracking-wider",children:"In Progress:"}),n.jsxs("div",{className:"mt-2 space-y-1",children:[e.draftsInProgress.slice(0,3).map(o=>n.jsxs("div",{className:"text-xs text-neutral-400 truncate",children:[" ",o.name]},o.id)),e.draftsInProgress.length>3&&n.jsxs("div",{className:"text-xs text-neutral-500",children:["+",e.draftsInProgress.length-3," more"]})]})]})]}),(e==null?void 0:e.timestamp)&&n.jsx("div",{className:"mt-4 pt-3 border-t border-neutral-700",children:n.jsxs("span",{className:"text-xs text-neutral-500",children:["Updated: ",new Date(e.timestamp).toLocaleTimeString()]})})]})}const ule="https://rgfl-api-production.up.railway.app";async function my(e,t){var i;const s=(i=(await X.auth.getSession()).data.session)==null?void 0:i.access_token,a=await fetch(`${ule}${e}`,{...t,headers:{...t==null?void 0:t.headers,Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});if(!a.ok)throw new Error(`API error: ${a.status}`);return a.json()}function dle(){var g,b,_;const e=at(),[t,r]=$.useState(new Date);$.useEffect(()=>{const w=setInterval(()=>r(new Date),1e3);return()=>clearInterval(w)},[]);const{data:s,isLoading:a,error:i}=ie({queryKey:["command-center","status"],queryFn:()=>my("/api/admin/command-center/status"),refetchInterval:1e4,retry:2}),{data:o,isLoading:l,error:u}=ie({queryKey:["command-center","attention"],queryFn:()=>my("/api/admin/command-center/attention"),refetchInterval:3e4,retry:2}),{data:d,isLoading:p,error:f}=ie({queryKey:["command-center","operations"],queryFn:()=>my("/api/admin/command-center/operations"),refetchInterval:1e4,retry:2}),m=i||u||f,x=()=>{e.invalidateQueries({queryKey:["command-center"]})},y=(((g=s==null?void 0:s.activeIncidents)==null?void 0:g.length)??0)>0;return n.jsxs("div",{className:`min-h-screen ${y?"bg-red-950":"bg-neutral-900"}`,children:[n.jsx(_e,{}),n.jsx(dt,{}),n.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("h1",{className:"text-2xl font-display text-white",children:"Command Center"}),n.jsxs("div",{className:`flex items-center gap-2 px-3 py-1 rounded-full text-sm font-medium ${(s==null?void 0:s.status)==="operational"?"bg-green-900/50 text-green-400":(s==null?void 0:s.status)==="degraded"?"bg-amber-900/50 text-amber-400":"bg-red-900/50 text-red-400"}`,children:[n.jsx("span",{className:`w-2 h-2 rounded-full animate-pulse ${(s==null?void 0:s.status)==="operational"?"bg-green-400":(s==null?void 0:s.status)==="degraded"?"bg-amber-400":"bg-red-400"}`}),((b=s==null?void 0:s.status)==null?void 0:b.toUpperCase())||"LOADING"]})]}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("span",{className:"text-lg font-mono text-white",children:t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})}),n.jsx("button",{onClick:x,className:"p-2 text-neutral-400 hover:text-white hover:bg-neutral-800 rounded-lg transition-colors",title:"Refresh all",children:n.jsx(an,{className:"h-5 w-5"})})]})]}),m&&n.jsx("div",{className:"mb-6 p-4 bg-amber-900/50 border border-amber-700 rounded-xl",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Tt,{className:"h-6 w-6 text-amber-400"}),n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold text-amber-300",children:"API Connection Issues"}),n.jsx("span",{className:"ml-2 text-amber-400 text-sm",children:"Some data may not be loading. Check server logs or try refreshing."})]})]})}),y&&(s==null?void 0:s.activeIncidents)&&s.activeIncidents.length>0&&n.jsx("div",{className:"mb-6 p-4 bg-red-900/50 border border-red-700 rounded-xl",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Tt,{className:"h-6 w-6 text-red-400"}),n.jsxs("div",{children:[n.jsxs("span",{className:"font-semibold text-red-300",children:[s.activeIncidents.length," Active Incident",s.activeIncidents.length>1?"s":""]}),n.jsx("span",{className:"ml-2 text-red-400",children:(_=s.activeIncidents[0])==null?void 0:_.title})]})]})}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 mb-6",children:[n.jsx(Hoe,{status:s,isLoading:a}),n.jsx("div",{className:"lg:col-span-2",children:n.jsx(Qoe,{incidents:(s==null?void 0:s.activeIncidents)||[]})})]}),n.jsx("div",{className:"mb-6",children:n.jsx(Xoe,{})}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[n.jsx("div",{className:"lg:col-span-2",children:n.jsx(nle,{})}),n.jsxs("div",{className:"space-y-4",children:[n.jsx(lle,{items:(o==null?void 0:o.items)||[],totalCount:(o==null?void 0:o.totalCount)||0,isLoading:l}),n.jsx(cle,{data:d,isLoading:p})]})]})]})]})}const hle="https://rgfl-api-production.up.railway.app";async function py(e,t){var i;const s=(i=(await X.auth.getSession()).data.session)==null?void 0:i.access_token,a=await fetch(`${hle}${e}`,{...t,headers:{...t==null?void 0:t.headers,Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});if(!a.ok)throw new Error(`API error: ${a.status}`);return a.json()}function fle(){var x,y,g,b,_;const e=at(),[t,r]=$.useState(new Set),[s,a]=$.useState(!1),{data:i,isLoading:o,refetch:l}=ie({queryKey:["admin","picks","current"],queryFn:()=>py("/api/admin/picks/current"),refetchInterval:3e4}),{data:u}=ie({queryKey:["admin","picks","history"],queryFn:()=>py("/api/admin/picks/history")}),d=ke({mutationFn:(w=void 0)=>{var S;return py("/api/admin/picks/send-reminders",{method:"POST",body:JSON.stringify({episodeId:(S=i==null?void 0:i.episode)==null?void 0:S.id,userIds:w&&w.length>0?w:void 0})})},onSuccess:()=>{e.invalidateQueries({queryKey:["admin","picks"]}),r(new Set)}}),p=w=>{const S=new Set(t);S.has(w)?S.delete(w):S.add(w),r(S)},f=()=>{const w=new Set((i==null?void 0:i.missingUsers.map(S=>S.id))||[]);r(w)},m=()=>{r(new Set)};return n.jsxs("div",{className:"min-h-screen bg-neutral-900",children:[n.jsx(_e,{}),n.jsx(dt,{}),n.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-display text-white",children:"Pick Monitoring"}),n.jsx("p",{className:"text-neutral-400 text-sm mt-1",children:"Track weekly pick submissions and send reminders"})]}),n.jsx("button",{onClick:()=>l(),className:"p-2 text-neutral-400 hover:text-white hover:bg-neutral-800 rounded-lg transition-colors",children:n.jsx(an,{className:"h-5 w-5"})})]}),o?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx(be,{className:"h-8 w-8 text-neutral-500 animate-spin"})}):i!=null&&i.episode?n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"bg-neutral-800 rounded-xl p-5 border border-neutral-700",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(kn,{className:"h-4 w-4 text-purple-400"}),n.jsx("span",{className:"text-sm text-neutral-400",children:"Current Episode"})]}),n.jsxs("div",{className:"text-xl font-bold text-white",children:["Episode ",i.episode.number]}),i.episode.title&&n.jsx("div",{className:"text-sm text-neutral-500 mt-1",children:i.episode.title})]}),n.jsxs("div",{className:"bg-neutral-800 rounded-xl p-5 border border-neutral-700",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(Nt,{className:"h-4 w-4 text-amber-400"}),n.jsx("span",{className:"text-sm text-neutral-400",children:"Time Until Lock"})]}),i.episode.is_locked?n.jsx("div",{className:"text-xl font-bold text-red-400",children:"LOCKED"}):n.jsxs("div",{className:"text-xl font-bold text-white",children:[i.episode.time_until_lock.hours,"h"," ",i.episode.time_until_lock.minutes,"m"]})]}),n.jsxs("div",{className:"bg-neutral-800 rounded-xl p-5 border border-neutral-700",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(Ot,{className:"h-4 w-4 text-green-400"}),n.jsx("span",{className:"text-sm text-neutral-400",children:"Picks Submitted"})]}),n.jsxs("div",{className:"text-xl font-bold text-white",children:[((x=i.stats)==null?void 0:x.submitted)||0,n.jsxs("span",{className:"text-sm font-normal text-neutral-500 ml-1",children:["/ ",((y=i.stats)==null?void 0:y.total)||0]})]}),n.jsx("div",{className:"w-full bg-neutral-700 rounded-full h-2 mt-2",children:n.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${((g=i.stats)==null?void 0:g.percentage)||0}%`}})})]}),n.jsxs("div",{className:"bg-neutral-800 rounded-xl p-5 border border-neutral-700",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(Tt,{className:"h-4 w-4 text-red-400"}),n.jsx("span",{className:"text-sm text-neutral-400",children:"Missing Picks"})]}),n.jsx("div",{className:"text-xl font-bold text-red-400",children:((b=i.stats)==null?void 0:b.missingCount)||0}),n.jsx("button",{onClick:()=>d.mutate(void 0),disabled:d.isPending||!((_=i.stats)!=null&&_.missingCount),className:"mt-2 text-xs text-red-400 hover:text-red-300 disabled:text-neutral-600",children:"Send reminder to all "})]})]}),n.jsxs("div",{className:"bg-neutral-800 rounded-xl p-6 border border-neutral-700",children:[n.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"By League"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"text-left text-xs text-neutral-500 uppercase tracking-wider",children:[n.jsx("th",{className:"pb-3",children:"League"}),n.jsx("th",{className:"pb-3",children:"Submitted"}),n.jsx("th",{className:"pb-3",children:"Progress"})]})}),n.jsx("tbody",{className:"divide-y divide-neutral-700",children:i.leagueStats.map(w=>n.jsxs("tr",{children:[n.jsx("td",{className:"py-3 text-sm text-white",children:w.name}),n.jsxs("td",{className:"py-3 text-sm text-neutral-400",children:[w.submitted," / ",w.total]}),n.jsx("td",{className:"py-3",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-32 bg-neutral-700 rounded-full h-2",children:n.jsx("div",{className:`h-2 rounded-full ${w.percentage===100?"bg-green-500":w.percentage>=50?"bg-amber-500":"bg-red-500"}`,style:{width:`${w.percentage}%`}})}),n.jsxs("span",{className:"text-xs text-neutral-500 w-10",children:[w.percentage,"%"]})]})})]},w.id))})]})})]}),n.jsxs("div",{className:"bg-neutral-800 rounded-xl p-6 border border-neutral-700",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h2",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[n.jsx(Ke,{className:"h-5 w-5 text-neutral-400"}),"Users Without Picks",n.jsxs("span",{className:"text-sm font-normal text-neutral-500",children:["(",i.missingUsers.length,")"]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[t.size>0&&n.jsxs(n.Fragment,{children:[n.jsxs("span",{className:"text-sm text-neutral-400",children:[t.size," selected"]}),n.jsx("button",{onClick:m,className:"text-xs text-neutral-400 hover:text-white",children:"Clear"}),n.jsxs("button",{onClick:()=>d.mutate(Array.from(t)),disabled:d.isPending,className:"flex items-center gap-1 px-3 py-1.5 bg-orange-600 hover:bg-orange-700 text-white text-sm rounded-lg disabled:bg-neutral-600",children:[d.isPending?n.jsx(be,{className:"h-4 w-4 animate-spin"}):n.jsx(Jn,{className:"h-4 w-4"}),"Send Reminder"]})]}),t.size===0&&i.missingUsers.length>0&&n.jsx("button",{onClick:f,className:"text-xs text-orange-400 hover:text-orange-300",children:"Select all"})]})]}),i.missingUsers.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx(Ot,{className:"h-12 w-12 text-green-500 mx-auto mb-3"}),n.jsx("p",{className:"text-neutral-400",children:"All users have submitted their picks!"})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"divide-y divide-neutral-700",children:(s?i.missingUsers:i.missingUsers.slice(0,10)).map(w=>n.jsxs("div",{className:"flex items-center gap-3 py-3 hover:bg-neutral-700/50 px-2 rounded cursor-pointer",onClick:()=>p(w.id),children:[n.jsx("input",{type:"checkbox",checked:t.has(w.id),onChange:()=>p(w.id),className:"rounded border-neutral-600 text-orange-500 focus:ring-orange-500 bg-neutral-700",onClick:S=>S.stopPropagation()}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm text-white truncate",children:w.display_name}),n.jsx("p",{className:"text-xs text-neutral-500 truncate",children:w.email})]}),w.last_sign_in_at&&n.jsxs("span",{className:"text-xs text-neutral-500",children:["Last seen: ",new Date(w.last_sign_in_at).toLocaleDateString()]})]},w.id))}),i.missingUsers.length>10&&n.jsxs("button",{onClick:()=>a(!s),className:"w-full mt-4 py-2 text-sm text-neutral-400 hover:text-white flex items-center justify-center gap-1",children:[s?"Show less":`Show all ${i.missingUsers.length}`,n.jsx(en,{className:`h-4 w-4 transition-transform ${s?"rotate-180":""}`})]})]})]}),(u==null?void 0:u.episodes)&&u.episodes.length>0&&n.jsxs("div",{className:"bg-neutral-800 rounded-xl p-6 border border-neutral-700",children:[n.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Pick History"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"text-left text-xs text-neutral-500 uppercase tracking-wider",children:[n.jsx("th",{className:"pb-3",children:"Episode"}),n.jsx("th",{className:"pb-3",children:"Air Date"}),n.jsx("th",{className:"pb-3",children:"Total Picks"})]})}),n.jsx("tbody",{className:"divide-y divide-neutral-700",children:u.episodes.map(w=>n.jsxs("tr",{children:[n.jsxs("td",{className:"py-3 text-sm text-white",children:["Episode ",w.number]}),n.jsx("td",{className:"py-3 text-sm text-neutral-400",children:new Date(w.air_date).toLocaleDateString()}),n.jsx("td",{className:"py-3 text-sm text-neutral-400",children:w.pick_count})]},w.id))})]})})]})]}):n.jsxs("div",{className:"bg-neutral-800 rounded-xl p-12 text-center",children:[n.jsx(kn,{className:"h-12 w-12 text-neutral-600 mx-auto mb-4"}),n.jsx("h2",{className:"text-lg font-semibold text-white mb-2",children:"No Active Episode"}),n.jsx("p",{className:"text-neutral-400",children:"There's no upcoming episode with a pick deadline."})]})]})]})}const mle="https://rgfl-api-production.up.railway.app";async function fi(e,t){var i;const s=(i=(await X.auth.getSession()).data.session)==null?void 0:i.access_token,a=await fetch(`${mle}${e}`,{...t,headers:{...t==null?void 0:t.headers,Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});if(!a.ok)throw new Error(`API error: ${a.status}`);return a.json()}function ple(){const e=at(),[t,r]=$.useState("active"),{data:s,isLoading:a,refetch:i}=ie({queryKey:["admin","drafts","active"],queryFn:()=>fi("/api/admin/drafts/active"),refetchInterval:1e4,enabled:t==="active"}),{data:o,isLoading:l}=ie({queryKey:["admin","drafts","pending"],queryFn:()=>fi("/api/admin/drafts/queue"),enabled:t==="pending"}),{data:u,isLoading:d}=ie({queryKey:["admin","drafts","history"],queryFn:()=>fi("/api/admin/drafts/history"),enabled:t==="history"}),{data:p}=ie({queryKey:["admin","drafts","stats"],queryFn:()=>fi("/api/admin/drafts/stats/overview")}),f=ke({mutationFn:g=>fi(`/api/admin/drafts/${g}/pause`,{method:"POST"}),onSuccess:()=>{e.invalidateQueries({queryKey:["admin","drafts"]})}});ke({mutationFn:g=>fi(`/api/admin/drafts/${g}/resume`,{method:"POST"}),onSuccess:()=>{e.invalidateQueries({queryKey:["admin","drafts"]})}});const m=ke({mutationFn:g=>fi(`/api/admin/drafts/${g}/end`,{method:"POST",body:"{}"}),onSuccess:()=>{e.invalidateQueries({queryKey:["admin","drafts"]})}}),x=ke({mutationFn:g=>fi(`/api/admin/drafts/${g}/skip`,{method:"POST"}),onSuccess:()=>{e.invalidateQueries({queryKey:["admin","drafts"]})}}),y=g=>{if(g<60)return`${g}m`;const b=Math.floor(g/60),_=g%60;return`${b}h ${_}m`};return n.jsxs("div",{className:"min-h-screen bg-neutral-900",children:[n.jsx(_e,{}),n.jsx(dt,{}),n.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-display text-white",children:"Draft Monitoring"}),n.jsx("p",{className:"text-neutral-400 text-sm mt-1",children:"Monitor and manage active drafts"})]}),n.jsx("button",{onClick:()=>i(),className:"p-2 text-neutral-400 hover:text-white hover:bg-neutral-800 rounded-lg transition-colors",children:n.jsx(an,{className:"h-5 w-5"})})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[n.jsxs("div",{className:"bg-neutral-800 rounded-xl p-4 border border-neutral-700",children:[n.jsx("div",{className:"text-2xl font-bold text-amber-400",children:(p==null?void 0:p.inProgress)||0}),n.jsx("div",{className:"text-sm text-neutral-400",children:"Active"})]}),n.jsxs("div",{className:"bg-neutral-800 rounded-xl p-4 border border-neutral-700",children:[n.jsx("div",{className:"text-2xl font-bold text-blue-400",children:(p==null?void 0:p.pending)||0}),n.jsx("div",{className:"text-sm text-neutral-400",children:"Pending"})]}),n.jsxs("div",{className:"bg-neutral-800 rounded-xl p-4 border border-neutral-700",children:[n.jsx("div",{className:"text-2xl font-bold text-purple-400",children:(p==null?void 0:p.paused)||0}),n.jsx("div",{className:"text-sm text-neutral-400",children:"Paused"})]}),n.jsxs("div",{className:"bg-neutral-800 rounded-xl p-4 border border-neutral-700",children:[n.jsx("div",{className:"text-2xl font-bold text-green-400",children:(p==null?void 0:p.completed)||0}),n.jsx("div",{className:"text-sm text-neutral-400",children:"Completed"})]})]}),n.jsxs("div",{className:"flex gap-2 mb-6",children:[n.jsxs("button",{onClick:()=>r("active"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${t==="active"?"bg-amber-600 text-white":"bg-neutral-800 text-neutral-400 hover:text-white"}`,children:["Active (",(s==null?void 0:s.totalActive)||0,")"]}),n.jsxs("button",{onClick:()=>r("pending"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${t==="pending"?"bg-blue-600 text-white":"bg-neutral-800 text-neutral-400 hover:text-white"}`,children:["Pending (",(o==null?void 0:o.totalPending)||(p==null?void 0:p.pending)||0,")"]}),n.jsx("button",{onClick:()=>r("history"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${t==="history"?"bg-green-600 text-white":"bg-neutral-800 text-neutral-400 hover:text-white"}`,children:"History"})]}),t==="active"&&n.jsx("div",{className:"space-y-4",children:a?n.jsx("div",{className:"flex items-center justify-center h-48",children:n.jsx(be,{className:"h-8 w-8 text-neutral-500 animate-spin"})}):!(s!=null&&s.drafts)||s.drafts.length===0?n.jsxs("div",{className:"bg-neutral-800 rounded-xl p-12 text-center",children:[n.jsx(dc,{className:"h-12 w-12 text-neutral-600 mx-auto mb-4"}),n.jsx("h2",{className:"text-lg font-semibold text-white mb-2",children:"No Active Drafts"}),n.jsx("p",{className:"text-neutral-400",children:"No drafts are currently in progress."})]}):s.drafts.map(g=>{var b,_;return n.jsxs("div",{className:`bg-neutral-800 rounded-xl p-5 border ${g.isStalled?"border-red-700":"border-neutral-700"}`,children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h3",{className:"text-lg font-semibold text-white",children:g.name}),n.jsx("span",{className:"text-xs text-neutral-500 font-mono",children:g.code}),g.isStalled&&n.jsx("span",{className:"px-2 py-0.5 bg-red-900/50 text-red-400 text-xs rounded",children:"STALLED"})]}),n.jsxs("div",{className:"text-sm text-neutral-400 mt-1",children:["League Creator: ",((b=g.commissioner)==null?void 0:b.display_name)||"Unknown"," ",g.memberCount," members ",g.draftType==="snake"?"Snake":"Linear"," draft"]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>f.mutate(g.id),disabled:f.isPending,className:"p-2 bg-amber-600/20 text-amber-400 hover:bg-amber-600/30 rounded-lg",title:"Pause draft",children:n.jsx(lP,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>x.mutate(g.id),disabled:x.isPending,className:"p-2 bg-blue-600/20 text-blue-400 hover:bg-blue-600/30 rounded-lg",title:"Skip current pick",children:n.jsx(Jne,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>{confirm("Force end this draft? Remaining picks will be auto-selected.")&&m.mutate(g.id)},disabled:m.isPending,className:"p-2 bg-red-600/20 text-red-400 hover:bg-red-600/30 rounded-lg",title:"Force end draft",children:n.jsx(hte,{className:"h-4 w-4"})})]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[n.jsxs("span",{className:"text-neutral-400",children:["Pick ",g.currentPick," of ",g.totalPicks," (Round ",g.round,")"]}),n.jsxs("span",{className:"text-neutral-500",children:[g.progress,"%"]})]}),n.jsx("div",{className:"w-full bg-neutral-700 rounded-full h-2",children:n.jsx("div",{className:"bg-amber-500 h-2 rounded-full transition-all",style:{width:`${g.progress}%`}})})]}),n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ke,{className:"h-4 w-4 text-neutral-500"}),n.jsx("span",{className:"text-neutral-400",children:"Current Picker:"}),n.jsx("span",{className:"text-white font-medium",children:((_=g.currentPicker)==null?void 0:_.display_name)||"Unknown"})]}),n.jsxs("div",{className:"flex items-center gap-2 text-neutral-400",children:[n.jsx(Nt,{className:"h-4 w-4"}),y(g.durationMinutes)," elapsed"]})]})]},g.id)})}),t==="pending"&&n.jsx("div",{className:"space-y-4",children:l?n.jsx("div",{className:"flex items-center justify-center h-48",children:n.jsx(be,{className:"h-8 w-8 text-neutral-500 animate-spin"})}):!(o!=null&&o.drafts)||o.drafts.length===0?n.jsxs("div",{className:"bg-neutral-800 rounded-xl p-12 text-center",children:[n.jsx(dc,{className:"h-12 w-12 text-neutral-600 mx-auto mb-4"}),n.jsx("h2",{className:"text-lg font-semibold text-white mb-2",children:"No Pending Drafts"}),n.jsx("p",{className:"text-neutral-400",children:"All leagues have completed their drafts."})]}):n.jsx("div",{className:"bg-neutral-800 rounded-xl border border-neutral-700 overflow-hidden",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"text-left text-xs text-neutral-500 uppercase tracking-wider border-b border-neutral-700",children:[n.jsx("th",{className:"px-4 py-3",children:"League"}),n.jsx("th",{className:"px-4 py-3",children:"League Creator"}),n.jsx("th",{className:"px-4 py-3",children:"Members"}),n.jsx("th",{className:"px-4 py-3",children:"Created"}),n.jsx("th",{className:"px-4 py-3",children:"Status"})]})}),n.jsx("tbody",{className:"divide-y divide-neutral-700",children:o.drafts.map(g=>{var b;return n.jsxs("tr",{className:"hover:bg-neutral-700/50",children:[n.jsxs("td",{className:"px-4 py-3",children:[n.jsx("div",{className:"text-sm text-white font-medium",children:g.name}),n.jsx("div",{className:"text-xs text-neutral-500 font-mono",children:g.code})]}),n.jsx("td",{className:"px-4 py-3 text-sm text-neutral-400",children:((b=g.commissioner)==null?void 0:b.display_name)||"Unknown"}),n.jsx("td",{className:"px-4 py-3 text-sm text-neutral-400",children:g.memberCount}),n.jsx("td",{className:"px-4 py-3 text-sm text-neutral-500",children:new Date(g.createdAt).toLocaleDateString()}),n.jsx("td",{className:"px-4 py-3",children:g.isReady?n.jsx("span",{className:"px-2 py-0.5 bg-green-900/50 text-green-400 text-xs rounded",children:"Ready"}):n.jsx("span",{className:"px-2 py-0.5 bg-neutral-700 text-neutral-400 text-xs rounded",children:"Waiting"})})]},g.id)})})]})})}),t==="history"&&n.jsx("div",{className:"space-y-4",children:d?n.jsx("div",{className:"flex items-center justify-center h-48",children:n.jsx(be,{className:"h-8 w-8 text-neutral-500 animate-spin"})}):!(u!=null&&u.drafts)||u.drafts.length===0?n.jsxs("div",{className:"bg-neutral-800 rounded-xl p-12 text-center",children:[n.jsx(dc,{className:"h-12 w-12 text-neutral-600 mx-auto mb-4"}),n.jsx("h2",{className:"text-lg font-semibold text-white mb-2",children:"No Completed Drafts"}),n.jsx("p",{className:"text-neutral-400",children:"No drafts have been completed yet."})]}):n.jsx("div",{className:"bg-neutral-800 rounded-xl border border-neutral-700 overflow-hidden",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"text-left text-xs text-neutral-500 uppercase tracking-wider border-b border-neutral-700",children:[n.jsx("th",{className:"px-4 py-3",children:"League"}),n.jsx("th",{className:"px-4 py-3",children:"Members"}),n.jsx("th",{className:"px-4 py-3",children:"Duration"}),n.jsx("th",{className:"px-4 py-3",children:"Completed"})]})}),n.jsx("tbody",{className:"divide-y divide-neutral-700",children:u.drafts.map(g=>{var b;return n.jsxs("tr",{className:"hover:bg-neutral-700/50",children:[n.jsxs("td",{className:"px-4 py-3",children:[n.jsx("div",{className:"text-sm text-white font-medium",children:g.name}),n.jsx("div",{className:"text-xs text-neutral-500",children:(b=g.commissioner)==null?void 0:b.display_name})]}),n.jsx("td",{className:"px-4 py-3 text-sm text-neutral-400",children:g.memberCount}),n.jsx("td",{className:"px-4 py-3 text-sm text-neutral-400",children:g.durationMinutes?y(g.durationMinutes):"N/A"}),n.jsx("td",{className:"px-4 py-3 text-sm text-neutral-500",children:new Date(g.completedAt).toLocaleDateString()})]},g.id)})})]})})})]})]})}function g5({rule:e,currentCount:t,onChange:r,isCommon:s}){return n.jsxs("div",{className:`group flex items-center justify-between p-3 rounded-xl border transition-all ${t>0?"bg-burgundy-50 border-burgundy-200":"bg-white border-cream-200 hover:border-cream-300"}`,children:[n.jsxs("div",{className:"flex-1 min-w-0 mr-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[s&&n.jsx(zn,{className:"h-3 w-3 text-amber-500 fill-amber-500"}),n.jsx("h4",{className:`font-medium truncate ${t>0?"text-burgundy-900":"text-neutral-800"}`,children:e.name}),n.jsxs("span",{className:`text-xs px-1.5 py-0.5 rounded-md font-bold ${e.points>0?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[e.points>0?"+":"",e.points]})]}),e.description&&n.jsx("p",{className:"text-xs text-neutral-500 truncate mt-0.5 group-hover:whitespace-normal group-hover:overflow-visible",children:e.description})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:()=>r(Math.max(0,t-1)),disabled:t===0,className:`p-1.5 rounded-lg transition-colors ${t>0?"bg-burgundy-200 text-burgundy-700 hover:bg-burgundy-300":"bg-cream-100 text-neutral-400 cursor-not-allowed"}`,children:n.jsx(hx,{className:"h-4 w-4"})}),n.jsx("span",{className:`w-6 text-center font-bold text-lg ${t>0?"text-burgundy-600":"text-neutral-400"}`,children:t}),n.jsx("button",{onClick:()=>r(t+1),className:"p-1.5 bg-burgundy-500 text-white rounded-lg hover:bg-burgundy-600 transition-colors shadow-sm",children:n.jsx(tr,{className:"h-4 w-4"})})]})]})}function xle({isOpen:e,onClose:t,onConfirm:r,isPending:s,scoringStatus:a}){if(!e)return null;const i=a==null?void 0:a.is_complete;return n.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[100] p-4",children:n.jsx("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full overflow-hidden animate-in fade-in zoom-in duration-200",children:n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsx("div",{className:`p-3 rounded-full ${i?"bg-green-100 text-green-600":"bg-amber-100 text-amber-600"}`,children:i?n.jsx(xt,{className:"h-6 w-6"}):n.jsx(Tt,{className:"h-6 w-6"})}),n.jsx("button",{onClick:t,className:"p-1 hover:bg-cream-100 rounded-full transition-colors text-neutral-400",children:n.jsx(It,{className:"h-5 w-5"})})]}),n.jsx("h3",{className:"text-xl font-display font-bold text-neutral-900 mb-2",children:"Finalize Episode Scoring"}),n.jsxs("div",{className:"space-y-4 mb-6",children:[n.jsx("p",{className:"text-neutral-600",children:"Finalizing will lock all scores for this episode and update the global and private league standings."}),!i&&a&&n.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4",children:[n.jsx("p",{className:"text-sm text-amber-800 font-medium mb-2",children:"Warning: Scoring is incomplete"}),n.jsxs("p",{className:"text-xs text-amber-700",children:[a.total_castaways-a.scored_castaways," castaways have no points recorded. Finalizing will assume they earned 0 points."]}),n.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:a.unscored_castaway_names.map(o=>n.jsx("span",{className:"px-1.5 py-0.5 bg-amber-200/50 text-amber-800 rounded text-[10px]",children:o},o))})]}),n.jsx("div",{className:"bg-red-50 border border-red-100 rounded-xl p-4",children:n.jsxs("p",{className:"text-xs text-red-700 font-medium flex items-center gap-1",children:[n.jsx(Tt,{className:"h-3 w-3"})," This action cannot be easily undone."]})})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:t,className:"flex-1 px-4 py-3 bg-cream-100 text-neutral-700 font-bold rounded-xl hover:bg-cream-200 transition-colors",children:"Back"}),n.jsx("button",{onClick:r,disabled:s,className:"flex-1 px-4 py-3 bg-burgundy-600 text-white font-bold rounded-xl hover:bg-burgundy-700 transition-colors shadow-lg shadow-burgundy-500/20 flex items-center justify-center gap-2",children:s?n.jsxs(n.Fragment,{children:[n.jsx(be,{className:"h-4 w-4 animate-spin"}),"Finalizing..."]}):"Finalize Now"})]})]})})})}function gle({isOpen:e,onClose:t,result:r}){if(!e)return null;const{success:s,eliminated:a}=r;return n.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[100] p-4",children:n.jsx("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full overflow-hidden animate-in fade-in zoom-in duration-200",children:n.jsxs("div",{className:"p-6 text-center",children:[n.jsx("div",{className:"w-16 h-16 bg-green-100 text-green-600 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(xt,{className:"h-10 w-10"})}),n.jsx("h3",{className:"text-2xl font-display font-bold text-neutral-900 mb-2",children:s?"Scoring Finalized!":"Finalization Failed"}),n.jsx("p",{className:"text-neutral-600 mb-6",children:s?"Episode scores have been locked and all league standings have been updated.":"There was an error finalizing the scores. Please check the server logs."}),s&&a.length>0&&n.jsxs("div",{className:"bg-neutral-50 rounded-2xl p-4 mb-6 text-left border border-cream-200",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3 text-neutral-800 font-bold",children:[n.jsx(Rr,{className:"h-4 w-4 text-orange-500"}),"Torches Snuffed (",a.length,")"]}),n.jsx("div",{className:"grid grid-cols-2 gap-2",children:a.map(i=>n.jsxs("div",{className:"text-sm text-neutral-600 flex items-center gap-2",children:[n.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-neutral-300"}),i]},i))})]}),n.jsx("button",{onClick:t,className:"w-full py-4 bg-neutral-900 text-white font-bold rounded-2xl hover:bg-neutral-800 transition-colors shadow-lg",children:"Done"})]})})})}function yle({castaways:e,selectedCastawayId:t,onSelect:r,existingScores:s,hideEliminated:a=!0}){const[i,o]=$.useState(a),l=p=>s==null?void 0:s.some(f=>f.castaway_id===p),u=i?e.filter(p=>p.status==="active"):e,d=e.filter(p=>p.status==="eliminated").length;return n.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar flex flex-col",children:[d>0&&n.jsx("div",{className:"px-4 pt-2 pb-1 border-b border-cream-100",children:n.jsx("button",{onClick:()=>o(!i),className:"flex items-center gap-2 text-xs text-neutral-500 hover:text-neutral-700 transition-colors",children:i?n.jsxs(n.Fragment,{children:[n.jsx(uh,{className:"h-3 w-3"}),n.jsxs("span",{children:["Show ",d," eliminated"]})]}):n.jsxs(n.Fragment,{children:[n.jsx(Ha,{className:"h-3 w-3"}),n.jsx("span",{children:"Hide eliminated"})]})})}),n.jsx("div",{className:"flex-1 p-4 space-y-2",children:u.map(p=>{const f=t===p.id,m=l(p.id);return n.jsxs("button",{onClick:()=>r(p.id),className:`w-full flex items-center gap-3 p-3 rounded-xl border transition-all text-left group ${f?"bg-burgundy-600 border-burgundy-600 text-white shadow-lg shadow-burgundy-500/20":"bg-white border-cream-200 text-neutral-700 hover:border-burgundy-200 hover:bg-burgundy-50/30"}`,children:[n.jsx("img",{src:nr(p.name,p.photo_url),alt:p.name,className:`w-10 h-10 rounded-lg object-cover border-2 ${f?"border-white/30":"border-cream-100 group-hover:border-burgundy-100"}`}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:`font-semibold text-sm truncate ${f?"text-white":"text-neutral-800"}`,children:p.name}),n.jsx("p",{className:`text-[10px] uppercase font-bold tracking-tighter ${f?"text-burgundy-100":"text-neutral-400"}`,children:p.status})]}),m?n.jsx(xt,{className:`h-4 w-4 ${f?"text-white":"text-green-500"}`}):n.jsx(Tt,{className:`h-4 w-4 ${f?"text-burgundy-300":"text-amber-400 opacity-0 group-hover:opacity-100"}`})]},p.id)})})]})}function ble({castaway:e,totalPoints:t,episodeNumber:r,isSaving:s,isDirty:a,lastSavedAt:i}){return n.jsx("div",{className:"bg-gradient-to-r from-burgundy-500 to-burgundy-600 rounded-2xl p-6 text-white shadow-elevated",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-xl flex items-center justify-center",children:e!=null&&e.photo_url?n.jsx("img",{src:nr(e.name,e.photo_url),alt:e.name,className:"w-16 h-16 rounded-xl object-cover"}):n.jsx("span",{className:"text-2xl font-bold",children:e==null?void 0:e.name.charAt(0)})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-display",children:e==null?void 0:e.name}),n.jsxs("p",{className:"text-burgundy-100",children:["Episode ",r]})]})]}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-burgundy-200 text-sm",children:"Episode Total"}),n.jsxs("p",{className:`text-4xl font-display font-bold ${t>=0?"text-white":"text-red-200"}`,children:[t>=0?"+":"",t]})]}),n.jsxs("div",{className:"flex flex-col items-end gap-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[s&&n.jsxs("span",{className:"text-xs text-burgundy-200 flex items-center gap-1",children:[n.jsx(be,{className:"h-3 w-3 animate-spin"}),"Saving..."]}),a&&!s&&n.jsx("span",{className:"text-xs text-burgundy-200",children:"Unsaved changes"}),i&&!a&&!s&&n.jsxs("span",{className:"text-xs text-green-200 flex items-center gap-1",children:[n.jsx(xt,{className:"h-3 w-3"}),"Saved"]})]}),n.jsx("p",{className:"text-xs text-burgundy-200",children:"Auto-saves after 2 seconds"})]})]})]})})}function vle({episodes:e,selectedEpisodeId:t,onSelect:r}){const s=e.filter(a=>a.number>1);return n.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated p-5",children:[n.jsx("h3",{className:"font-semibold text-neutral-800 mb-3",children:"Select Episode"}),n.jsxs("select",{value:t||"",onChange:a=>r(a.target.value||null),className:"w-full p-3 border border-cream-200 rounded-xl focus:ring-2 focus:ring-burgundy-500 focus:border-burgundy-500","aria-label":"Select episode to score",children:[n.jsx("option",{value:"",children:"Choose episode..."}),s.map(a=>n.jsxs("option",{value:a.id,children:["Ep ",a.number,": ",a.title||"TBD"," ",a.is_scored?"":""]},a.id))]}),e.some(a=>a.number===1)&&n.jsx("p",{className:"text-xs text-neutral-500 mt-2",children:"Note: Episode 1 (premiere) is not available for scoring."})]})}function wle({scoringStatus:e,selectedEpisodeId:t,selectedEpisode:r,finalizeMutation:s,onShowFinalizeModal:a}){return n.jsxs("div",{className:"flex items-center justify-between mb-8 animate-fade-in",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(se,{to:"/admin",className:"text-neutral-400 hover:text-neutral-600 transition-colors","aria-label":"Back to admin dashboard",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),n.jsx("h1",{className:"text-2xl font-display text-neutral-800",children:"Score Episode"})]}),n.jsx("p",{className:"text-neutral-500",children:"Enter scores for each castaway"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[e&&t&&!(r!=null&&r.is_scored)&&n.jsxs("div",{className:`px-4 py-2 rounded-xl flex items-center gap-2 ${e.is_complete?"bg-green-100 text-green-700":"bg-amber-100 text-amber-700"}`,children:[e.is_complete?n.jsx(xt,{className:"h-5 w-5"}):n.jsx(Tt,{className:"h-5 w-5"}),n.jsxs("span",{className:"font-medium",children:[e.scored_castaways,"/",e.total_castaways," castaways scored"]})]}),n.jsxs(se,{to:`/admin/scoring/grid${t?`?episode=${t}`:""}`,className:"btn btn-secondary flex items-center gap-2",children:[n.jsx(iP,{className:"h-4 w-4"}),"Grid View"]}),t&&!(r!=null&&r.is_scored)&&n.jsxs("button",{onClick:a,className:"btn btn-primary flex items-center gap-2",disabled:s.isPending||!(e!=null&&e.is_complete),title:e!=null&&e.is_complete?"Finalize episode scoring":`Score all ${(e==null?void 0:e.total_castaways)||0} castaways before finalizing`,children:[s.isPending?n.jsx(be,{className:"h-4 w-4 animate-spin"}):n.jsx(xt,{className:"h-4 w-4"}),"Finalize Scores"]}),(r==null?void 0:r.is_scored)&&n.jsxs("span",{className:"flex items-center gap-2 text-green-600 font-medium",children:[n.jsx(xt,{className:"h-5 w-5"}),"Finalized"]})]})]})}function y5({category:e,rules:t,scores:r,isExpanded:s,onToggle:a,onUpdateScore:i,isFeatured:o=!1}){const l=t.reduce((d,p)=>{const f=r[p.id]||0;return d+p.points*f},0),u=t.some(d=>(r[d.id]||0)>0);return o?n.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated overflow-hidden border-2 border-burgundy-200",children:[n.jsxs("button",{onClick:a,className:"w-full p-4 border-b border-cream-100 bg-gradient-to-r from-burgundy-50 to-cream-50 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(zn,{className:"h-5 w-5 text-burgundy-500 fill-burgundy-500"}),n.jsx("h3",{className:"font-semibold text-burgundy-700",children:e}),n.jsx("span",{className:"text-xs bg-burgundy-100 text-burgundy-600 px-2 py-0.5 rounded-full font-bold",children:t.length})]}),s?n.jsx(en,{className:"h-5 w-5 text-burgundy-400"}):n.jsx(dr,{className:"h-5 w-5 text-burgundy-400"})]}),s&&n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-px bg-cream-100",children:t.map(d=>n.jsx(g5,{rule:d,currentCount:r[d.id]||0,onChange:p=>i(d.id,p)},d.id))})]}):n.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated overflow-hidden",children:[n.jsxs("button",{onClick:a,className:"w-full p-4 border-b border-cream-100 bg-cream-50 flex items-center justify-between hover:bg-cream-100 transition-colors",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[s?n.jsx(en,{className:"h-5 w-5 text-neutral-400"}):n.jsx(dr,{className:"h-5 w-5 text-neutral-400"}),n.jsx("h3",{className:"font-semibold text-neutral-800",children:e}),n.jsx("span",{className:"text-xs bg-cream-200 text-neutral-500 px-2 py-0.5 rounded-full font-bold",children:t.length})]}),u&&n.jsxs("span",{className:`font-bold text-sm ${l>=0?"text-green-600":"text-red-600"}`,children:[l>=0?"+":"",l]})]}),s&&n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-px bg-cream-100",children:t.map(d=>n.jsx(g5,{rule:d,currentCount:r[d.id]||0,onChange:p=>i(d.id,p)},d.id))})]})}const _le="https://rgfl-api-production.up.railway.app";async function b5(e,t){var l,u,d;const r=async p=>await fetch(`${_le}${e}`,{...t,headers:{...t==null?void 0:t.headers,Authorization:`Bearer ${p}`,"Content-Type":"application/json"}}),{data:s,error:a}=await X.auth.getSession();if(a)throw console.error("Session error:",a),new Error("Session error - please refresh the page");let i=(l=s.session)==null?void 0:l.access_token;if(!i){const{data:p,error:f}=await X.auth.refreshSession();if(f||!((u=p.session)!=null&&u.access_token))throw new Error("Not authenticated - please log in again");i=p.session.access_token}let o=await r(i);if(o.status===401||o.status===403){console.log("Auth error, attempting token refresh...");const{data:p,error:f}=await X.auth.refreshSession();!f&&((d=p.session)!=null&&d.access_token)&&(o=await r(p.session.access_token))}if(!o.ok){const p=await o.json().catch(()=>({}));throw new Error(p.error||`API error: ${o.status}`)}return o.json()}function v5(){const{user:e}=Et(),t=at(),[r]=Hd(),s=r.get("episode"),[a,i]=$.useState(s),[o,l]=$.useState(null),[u,d]=$.useState({}),[p,f]=$.useState(null),[m,x]=$.useState(!1),[y,g]=$.useState(!1),[b,_]=$.useState(!1),[w,S]=$.useState({"Most Scored Rules":!0}),[j,N]=$.useState(!1),[C,E]=$.useState(null),T=$.useRef(null),I=$.useRef(null),A=$.useRef(u),{data:R}=wP(e==null?void 0:e.id),{data:O}=_P(),{data:M}=jP(O==null?void 0:O.id),{data:B}=NP(O==null?void 0:O.id),{data:U}=SP(O==null?void 0:O.id),{data:Y}=kP(a),{data:W,refetch:K}=EP(a),F=$.useMemo(()=>CP(U),[U]),H=$.useMemo(()=>Fae(U),[U]),L=M==null?void 0:M.find(te=>te.id===a),q=B==null?void 0:B.find(te=>te.id===o);$.useEffect(()=>{A.current=u},[u]);const z=te=>{S(oe=>({...oe,[te]:!oe[te]}))};$.useEffect(()=>{if(!y){if(b){_(!1);return}if(Y&&o){const te=Y.filter(he=>he.castaway_id===o),oe={};te.forEach(he=>{oe[he.scoring_rule_id]=he.quantity}),d(oe),x(!1)}else o&&(d({}),x(!1))}},[o,Y]);const Q=$.useCallback(async(te,oe)=>{if(!a||!te||!(e!=null&&e.id))return;const he=Object.entries(oe).filter(([Ce,Fe])=>Fe>0).map(([Ce,Fe])=>({castaway_id:te,scoring_rule_id:Ce,quantity:Fe}));await b5(`/api/episodes/${a}/scoring/save`,{method:"POST",body:JSON.stringify({scores:he})}),f(new Date),x(!1),_(!0),t.invalidateQueries({queryKey:["episodeScores",a]}),t.invalidateQueries({queryKey:["episodeScores"]}),t.invalidateQueries({queryKey:["scoringStatus",a]}),K()},[a,e==null?void 0:e.id,t,K]),J=ke({mutationFn:async()=>{if(!a)throw new Error("No episode selected");return b5(`/api/episodes/${a}/scoring/finalize`,{method:"POST"})},onSuccess:te=>{E({success:!0,eliminated:(te==null?void 0:te.eliminated)||[]}),N(!1),t.invalidateQueries({queryKey:["episodes"]}),t.invalidateQueries({queryKey:["episodeScores"]}),t.invalidateQueries({queryKey:["castaways"]}),t.invalidateQueries({queryKey:["scoringStatus"]}),K()},onError:()=>{E({success:!1,eliminated:[]}),N(!1)}});$.useEffect(()=>{const te=T.current;if(te&&te!==o&&m){const oe={...u};g(!0),Q(te,oe).finally(()=>{g(!1)})}T.current=o},[o,m,u,Q]),$.useEffect(()=>{if(!m||!o)return;I.current&&clearTimeout(I.current);const te=o;return I.current=setTimeout(async()=>{const oe={...A.current};g(!0);try{await Q(te,oe)}finally{g(!1)}},2e3),()=>{I.current&&clearTimeout(I.current)}},[u,m,o,Q]);const V=(te,oe)=>{d(he=>({...he,[te]:Math.max(0,oe)})),x(!0)},ee=$.useMemo(()=>Object.entries(u).reduce((te,[oe,he])=>{const Ce=U==null?void 0:U.find(Fe=>Fe.id===oe);return te+((Ce==null?void 0:Ce.points)||0)*he},0),[u,U]);return R&&R.role!=="admin"?n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200",children:[n.jsx(_e,{}),n.jsx(dt,{}),n.jsx("main",{className:"max-w-4xl mx-auto px-4 py-16 text-center",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated p-12",children:[n.jsx("h1",{className:"text-2xl font-display text-neutral-800 mb-3",children:"Access Denied"}),n.jsx("p",{className:"text-neutral-500 mb-8",children:"You don't have permission to access this page."}),n.jsx(se,{to:"/dashboard",className:"btn btn-primary",children:"Back to Dashboard"})]})})]}):n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200",children:[n.jsx(_e,{}),n.jsx(dt,{}),n.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsx(wle,{scoringStatus:W||null,selectedEpisodeId:a,selectedEpisode:L,finalizeMutation:J,onShowFinalizeModal:()=>N(!0)}),n.jsxs("div",{className:"grid lg:grid-cols-4 gap-8",children:[n.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[n.jsx(vle,{episodes:M||[],selectedEpisodeId:a,onSelect:te=>{i(te),l(null)}}),a&&n.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated overflow-hidden flex flex-col h-[500px]",children:[n.jsxs("div",{className:"p-5 border-b border-cream-100 flex items-center justify-between",children:[n.jsx("h3",{className:"font-semibold text-neutral-800",children:"Castaways"}),W&&n.jsxs("span",{className:"text-[10px] bg-cream-100 text-neutral-500 px-2 py-0.5 rounded-full font-bold uppercase tracking-wider",children:[W.scored_castaways,"/",W.total_castaways]})]}),n.jsx(yle,{castaways:B||[],selectedCastawayId:o,onSelect:te=>l(te),existingScores:Y||[]})]})]}),n.jsx("div",{className:"lg:col-span-3",children:a?o?n.jsxs("div",{className:"space-y-6",children:[n.jsx(ble,{castaway:q,totalPoints:ee,episodeNumber:(L==null?void 0:L.number)||0,isSaving:y,isDirty:m,lastSavedAt:p}),F.length>0&&n.jsx(y5,{category:"Most Scored Rules",rules:F,scores:u,isExpanded:w["Most Scored Rules"]??!0,onToggle:()=>z("Most Scored Rules"),onUpdateScore:V,isFeatured:!0}),Object.entries(H).map(([te,oe])=>n.jsx(y5,{category:te,rules:oe,scores:u,isExpanded:w[te]??!1,onToggle:()=>z(te),onUpdateScore:V},te))]}):n.jsx("div",{className:"bg-white rounded-2xl shadow-elevated p-12 text-center",children:n.jsx("p",{className:"text-neutral-500",children:"Select a castaway to enter scores"})}):n.jsx("div",{className:"bg-white rounded-2xl shadow-elevated p-12 text-center",children:n.jsx("p",{className:"text-neutral-500",children:"Select an episode to begin scoring"})})})]}),n.jsx(xle,{isOpen:j,onClose:()=>N(!1),onConfirm:()=>J.mutate(),isPending:J.isPending,scoringStatus:W||{is_complete:!1,total_castaways:0,scored_castaways:0,unscored_castaway_ids:[],unscored_castaway_names:[],is_finalized:!1}}),C&&n.jsx(gle,{isOpen:!!C,onClose:()=>E(null),result:{success:C.success,eliminated:C.eliminated.map(te=>{var oe;return((oe=B==null?void 0:B.find(he=>he.id===te))==null?void 0:oe.name)||te})}})]})]})}function jle({castaway:e,isEliminated:t=!1,onEdit:r,onEliminate:s,onReactivate:a,isReactivating:i=!1}){const o=e.best_placement===1,l=t?"bg-neutral-50 rounded-xl p-4 flex items-center gap-4 opacity-75":`rounded-xl p-4 flex items-center gap-4 ${o?"bg-yellow-50 border border-yellow-200":"bg-cream-50"}`,u=t?"relative w-14 h-14 bg-neutral-200 rounded-xl flex items-center justify-center overflow-hidden grayscale":"relative w-14 h-14 bg-cream-200 rounded-xl flex items-center justify-center overflow-hidden",d=t?"font-semibold text-neutral-600 truncate":"font-semibold text-neutral-800 truncate",p=t?"text-sm text-neutral-400":"text-sm text-neutral-500";return n.jsxs("div",{className:l,children:[n.jsxs("div",{className:u,children:[e.photo_url?n.jsx("img",{src:e.photo_url,alt:e.name,className:"w-14 h-14 object-cover"}):n.jsx("span",{className:"text-xl font-bold text-neutral-400",children:e.name.charAt(0)}),o&&n.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-yellow-400 rounded-full flex items-center justify-center",children:n.jsx(ot,{className:"h-3 w-3 text-yellow-900"})})]}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("p",{className:d,children:e.name}),e.previous_seasons&&e.previous_seasons.length>0&&n.jsxs("span",{className:"flex items-center gap-1 text-xs bg-purple-100 text-purple-700 px-2 py-0.5 rounded-full",children:[n.jsx(Pd,{className:"h-3 w-3"}),e.previous_seasons.length,"x"]})]}),n.jsx("p",{className:p,children:t?e.placement?`#${e.placement}`:"Eliminated":e.occupation||"No occupation"}),!t&&!e.photo_url&&n.jsx("p",{className:"text-xs text-orange-500",children:"Missing photo"})]}),n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("button",{onClick:r,className:"px-3 py-1.5 bg-blue-100 text-blue-700 rounded-lg text-sm font-medium hover:bg-blue-200 transition-colors",children:"Edit"}),t?n.jsx("button",{onClick:a,disabled:i,className:"px-3 py-1.5 bg-green-100 text-green-700 rounded-lg text-sm font-medium hover:bg-green-200 transition-colors disabled:opacity-50",children:"Reactivate"}):n.jsx("button",{onClick:s,className:"px-3 py-1.5 bg-red-100 text-red-700 rounded-lg text-sm font-medium hover:bg-red-200 transition-colors",children:"Eliminate"})]})]})}function w5({castaways:e,isLoading:t=!1,variant:r,onEdit:s,onEliminate:a,onReactivate:i,isReactivating:o=!1}){const l=r==="eliminated",u=l?"bg-neutral-50":"bg-green-50",d=l?"text-neutral-600":"text-green-800",p=l?`Eliminated (${e.length})`:`Active Castaways (${e.length})`;return t?n.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated overflow-hidden animate-slide-up",children:[n.jsx("div",{className:`p-6 border-b border-cream-100 ${u}`,children:n.jsx("h2",{className:`font-semibold ${d}`,children:p})}),n.jsx("div",{className:"p-12 text-center",children:n.jsx("div",{className:"w-8 h-8 mx-auto border-2 border-burgundy-500 border-t-transparent rounded-full animate-spin"})})]}):e.length===0?null:n.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated overflow-hidden animate-slide-up",children:[n.jsx("div",{className:`p-6 border-b border-cream-100 ${u}`,children:n.jsx("h2",{className:`font-semibold ${d}`,children:p})}),n.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4 p-6",children:e.map(f=>n.jsx(jle,{castaway:f,isEliminated:l,onEdit:()=>s(f),onEliminate:a?()=>a(f.id):void 0,onReactivate:i?()=>i(f.id):void 0,isReactivating:o},f.id))})]})}function Nle({castawayName:e,episodes:t,selectedEpisodeId:r,onEpisodeChange:s,onConfirm:a,onCancel:i,isPending:o}){return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated max-w-md w-full p-6 animate-slide-up",children:[n.jsx("h3",{className:"text-xl font-display text-neutral-800 mb-4",children:"Eliminate Castaway"}),n.jsxs("p",{className:"text-neutral-500 mb-6",children:["Select the episode when ",e," was eliminated."]}),n.jsxs("select",{value:r,onChange:l=>s(l.target.value),className:"w-full p-3 border border-cream-200 rounded-xl mb-6 focus:ring-2 focus:ring-burgundy-500",children:[n.jsx("option",{value:"",children:"Select episode..."}),t.map(l=>n.jsxs("option",{value:l.id,children:["Episode ",l.number,": ",l.title||"TBD"]},l.id))]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:i,className:"flex-1 btn bg-cream-100 text-neutral-700 hover:bg-cream-200",children:"Cancel"}),n.jsx("button",{onClick:a,disabled:!r||o,className:"flex-1 btn bg-red-600 text-white hover:bg-red-700 disabled:opacity-50",children:o?"Eliminating...":"Confirm"})]})]})})}var xy,_5;function Sle(){if(_5)return xy;_5=1;function e(){this.__data__=[],this.size=0}return xy=e,xy}var gy,j5;function RP(){if(j5)return gy;j5=1;function e(t,r){return t===r||t!==t&&r!==r}return gy=e,gy}var yy,N5;function xx(){if(N5)return yy;N5=1;var e=RP();function t(r,s){for(var a=r.length;a--;)if(e(r[a][0],s))return a;return-1}return yy=t,yy}var by,S5;function kle(){if(S5)return by;S5=1;var e=xx(),t=Array.prototype,r=t.splice;function s(a){var i=this.__data__,o=e(i,a);if(o<0)return!1;var l=i.length-1;return o==l?i.pop():r.call(i,o,1),--this.size,!0}return by=s,by}var vy,k5;function Ele(){if(k5)return vy;k5=1;var e=xx();function t(r){var s=this.__data__,a=e(s,r);return a<0?void 0:s[a][1]}return vy=t,vy}var wy,E5;function Cle(){if(E5)return wy;E5=1;var e=xx();function t(r){return e(this.__data__,r)>-1}return wy=t,wy}var _y,C5;function Tle(){if(C5)return _y;C5=1;var e=xx();function t(r,s){var a=this.__data__,i=e(a,r);return i<0?(++this.size,a.push([r,s])):a[i][1]=s,this}return _y=t,_y}var jy,T5;function gx(){if(T5)return jy;T5=1;var e=Sle(),t=kle(),r=Ele(),s=Cle(),a=Tle();function i(o){var l=-1,u=o==null?0:o.length;for(this.clear();++l<u;){var d=o[l];this.set(d[0],d[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=s,i.prototype.set=a,jy=i,jy}var Ny,R5;function Rle(){if(R5)return Ny;R5=1;var e=gx();function t(){this.__data__=new e,this.size=0}return Ny=t,Ny}var Sy,A5;function Ale(){if(A5)return Sy;A5=1;function e(t){var r=this.__data__,s=r.delete(t);return this.size=r.size,s}return Sy=e,Sy}var ky,P5;function Ple(){if(P5)return ky;P5=1;function e(t){return this.__data__.get(t)}return ky=e,ky}var Ey,O5;function Ole(){if(O5)return Ey;O5=1;function e(t){return this.__data__.has(t)}return Ey=e,Ey}var Cy,I5;function AP(){if(I5)return Cy;I5=1;var e=typeof Nf=="object"&&Nf&&Nf.Object===Object&&Nf;return Cy=e,Cy}var Ty,L5;function za(){if(L5)return Ty;L5=1;var e=AP(),t=typeof self=="object"&&self&&self.Object===Object&&self,r=e||t||Function("return this")();return Ty=r,Ty}var Ry,M5;function bj(){if(M5)return Ry;M5=1;var e=za(),t=e.Symbol;return Ry=t,Ry}var Ay,D5;function Ile(){if(D5)return Ay;D5=1;var e=bj(),t=Object.prototype,r=t.hasOwnProperty,s=t.toString,a=e?e.toStringTag:void 0;function i(o){var l=r.call(o,a),u=o[a];try{o[a]=void 0;var d=!0}catch{}var p=s.call(o);return d&&(l?o[a]=u:delete o[a]),p}return Ay=i,Ay}var Py,$5;function Lle(){if($5)return Py;$5=1;var e=Object.prototype,t=e.toString;function r(s){return t.call(s)}return Py=r,Py}var Oy,q5;function yx(){if(q5)return Oy;q5=1;var e=bj(),t=Ile(),r=Lle(),s="[object Null]",a="[object Undefined]",i=e?e.toStringTag:void 0;function o(l){return l==null?l===void 0?a:s:i&&i in Object(l)?t(l):r(l)}return Oy=o,Oy}var Iy,F5;function PP(){if(F5)return Iy;F5=1;function e(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}return Iy=e,Iy}var Ly,U5;function OP(){if(U5)return Ly;U5=1;var e=yx(),t=PP(),r="[object AsyncFunction]",s="[object Function]",a="[object GeneratorFunction]",i="[object Proxy]";function o(l){if(!t(l))return!1;var u=e(l);return u==s||u==a||u==r||u==i}return Ly=o,Ly}var My,B5;function Mle(){if(B5)return My;B5=1;var e=za(),t=e["__core-js_shared__"];return My=t,My}var Dy,H5;function Dle(){if(H5)return Dy;H5=1;var e=Mle(),t=(function(){var s=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""})();function r(s){return!!t&&t in s}return Dy=r,Dy}var $y,K5;function IP(){if(K5)return $y;K5=1;var e=Function.prototype,t=e.toString;function r(s){if(s!=null){try{return t.call(s)}catch{}try{return s+""}catch{}}return""}return $y=r,$y}var qy,z5;function $le(){if(z5)return qy;z5=1;var e=OP(),t=Dle(),r=PP(),s=IP(),a=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,o=Function.prototype,l=Object.prototype,u=o.toString,d=l.hasOwnProperty,p=RegExp("^"+u.call(d).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(m){if(!r(m)||t(m))return!1;var x=e(m)?p:i;return x.test(s(m))}return qy=f,qy}var Fy,W5;function qle(){if(W5)return Fy;W5=1;function e(t,r){return t==null?void 0:t[r]}return Fy=e,Fy}var Uy,G5;function au(){if(G5)return Uy;G5=1;var e=$le(),t=qle();function r(s,a){var i=t(s,a);return e(i)?i:void 0}return Uy=r,Uy}var By,V5;function vj(){if(V5)return By;V5=1;var e=au(),t=za(),r=e(t,"Map");return By=r,By}var Hy,Q5;function bx(){if(Q5)return Hy;Q5=1;var e=au(),t=e(Object,"create");return Hy=t,Hy}var Ky,Y5;function Fle(){if(Y5)return Ky;Y5=1;var e=bx();function t(){this.__data__=e?e(null):{},this.size=0}return Ky=t,Ky}var zy,J5;function Ule(){if(J5)return zy;J5=1;function e(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}return zy=e,zy}var Wy,X5;function Ble(){if(X5)return Wy;X5=1;var e=bx(),t="__lodash_hash_undefined__",r=Object.prototype,s=r.hasOwnProperty;function a(i){var o=this.__data__;if(e){var l=o[i];return l===t?void 0:l}return s.call(o,i)?o[i]:void 0}return Wy=a,Wy}var Gy,Z5;function Hle(){if(Z5)return Gy;Z5=1;var e=bx(),t=Object.prototype,r=t.hasOwnProperty;function s(a){var i=this.__data__;return e?i[a]!==void 0:r.call(i,a)}return Gy=s,Gy}var Vy,e4;function Kle(){if(e4)return Vy;e4=1;var e=bx(),t="__lodash_hash_undefined__";function r(s,a){var i=this.__data__;return this.size+=this.has(s)?0:1,i[s]=e&&a===void 0?t:a,this}return Vy=r,Vy}var Qy,t4;function zle(){if(t4)return Qy;t4=1;var e=Fle(),t=Ule(),r=Ble(),s=Hle(),a=Kle();function i(o){var l=-1,u=o==null?0:o.length;for(this.clear();++l<u;){var d=o[l];this.set(d[0],d[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=s,i.prototype.set=a,Qy=i,Qy}var Yy,n4;function Wle(){if(n4)return Yy;n4=1;var e=zle(),t=gx(),r=vj();function s(){this.size=0,this.__data__={hash:new e,map:new(r||t),string:new e}}return Yy=s,Yy}var Jy,r4;function Gle(){if(r4)return Jy;r4=1;function e(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null}return Jy=e,Jy}var Xy,s4;function vx(){if(s4)return Xy;s4=1;var e=Gle();function t(r,s){var a=r.__data__;return e(s)?a[typeof s=="string"?"string":"hash"]:a.map}return Xy=t,Xy}var Zy,a4;function Vle(){if(a4)return Zy;a4=1;var e=vx();function t(r){var s=e(this,r).delete(r);return this.size-=s?1:0,s}return Zy=t,Zy}var eb,i4;function Qle(){if(i4)return eb;i4=1;var e=vx();function t(r){return e(this,r).get(r)}return eb=t,eb}var tb,o4;function Yle(){if(o4)return tb;o4=1;var e=vx();function t(r){return e(this,r).has(r)}return tb=t,tb}var nb,l4;function Jle(){if(l4)return nb;l4=1;var e=vx();function t(r,s){var a=e(this,r),i=a.size;return a.set(r,s),this.size+=a.size==i?0:1,this}return nb=t,nb}var rb,c4;function LP(){if(c4)return rb;c4=1;var e=Wle(),t=Vle(),r=Qle(),s=Yle(),a=Jle();function i(o){var l=-1,u=o==null?0:o.length;for(this.clear();++l<u;){var d=o[l];this.set(d[0],d[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=s,i.prototype.set=a,rb=i,rb}var sb,u4;function Xle(){if(u4)return sb;u4=1;var e=gx(),t=vj(),r=LP(),s=200;function a(i,o){var l=this.__data__;if(l instanceof e){var u=l.__data__;if(!t||u.length<s-1)return u.push([i,o]),this.size=++l.size,this;l=this.__data__=new r(u)}return l.set(i,o),this.size=l.size,this}return sb=a,sb}var ab,d4;function Zle(){if(d4)return ab;d4=1;var e=gx(),t=Rle(),r=Ale(),s=Ple(),a=Ole(),i=Xle();function o(l){var u=this.__data__=new e(l);this.size=u.size}return o.prototype.clear=t,o.prototype.delete=r,o.prototype.get=s,o.prototype.has=a,o.prototype.set=i,ab=o,ab}var ib,h4;function ece(){if(h4)return ib;h4=1;var e="__lodash_hash_undefined__";function t(r){return this.__data__.set(r,e),this}return ib=t,ib}var ob,f4;function tce(){if(f4)return ob;f4=1;function e(t){return this.__data__.has(t)}return ob=e,ob}var lb,m4;function nce(){if(m4)return lb;m4=1;var e=LP(),t=ece(),r=tce();function s(a){var i=-1,o=a==null?0:a.length;for(this.__data__=new e;++i<o;)this.add(a[i])}return s.prototype.add=s.prototype.push=t,s.prototype.has=r,lb=s,lb}var cb,p4;function rce(){if(p4)return cb;p4=1;function e(t,r){for(var s=-1,a=t==null?0:t.length;++s<a;)if(r(t[s],s,t))return!0;return!1}return cb=e,cb}var ub,x4;function sce(){if(x4)return ub;x4=1;function e(t,r){return t.has(r)}return ub=e,ub}var db,g4;function MP(){if(g4)return db;g4=1;var e=nce(),t=rce(),r=sce(),s=1,a=2;function i(o,l,u,d,p,f){var m=u&s,x=o.length,y=l.length;if(x!=y&&!(m&&y>x))return!1;var g=f.get(o),b=f.get(l);if(g&&b)return g==l&&b==o;var _=-1,w=!0,S=u&a?new e:void 0;for(f.set(o,l),f.set(l,o);++_<x;){var j=o[_],N=l[_];if(d)var C=m?d(N,j,_,l,o,f):d(j,N,_,o,l,f);if(C!==void 0){if(C)continue;w=!1;break}if(S){if(!t(l,function(E,T){if(!r(S,T)&&(j===E||p(j,E,u,d,f)))return S.push(T)})){w=!1;break}}else if(!(j===N||p(j,N,u,d,f))){w=!1;break}}return f.delete(o),f.delete(l),w}return db=i,db}var hb,y4;function ace(){if(y4)return hb;y4=1;var e=za(),t=e.Uint8Array;return hb=t,hb}var fb,b4;function ice(){if(b4)return fb;b4=1;function e(t){var r=-1,s=Array(t.size);return t.forEach(function(a,i){s[++r]=[i,a]}),s}return fb=e,fb}var mb,v4;function oce(){if(v4)return mb;v4=1;function e(t){var r=-1,s=Array(t.size);return t.forEach(function(a){s[++r]=a}),s}return mb=e,mb}var pb,w4;function lce(){if(w4)return pb;w4=1;var e=bj(),t=ace(),r=RP(),s=MP(),a=ice(),i=oce(),o=1,l=2,u="[object Boolean]",d="[object Date]",p="[object Error]",f="[object Map]",m="[object Number]",x="[object RegExp]",y="[object Set]",g="[object String]",b="[object Symbol]",_="[object ArrayBuffer]",w="[object DataView]",S=e?e.prototype:void 0,j=S?S.valueOf:void 0;function N(C,E,T,I,A,R,O){switch(T){case w:if(C.byteLength!=E.byteLength||C.byteOffset!=E.byteOffset)return!1;C=C.buffer,E=E.buffer;case _:return!(C.byteLength!=E.byteLength||!R(new t(C),new t(E)));case u:case d:case m:return r(+C,+E);case p:return C.name==E.name&&C.message==E.message;case x:case g:return C==E+"";case f:var M=a;case y:var B=I&o;if(M||(M=i),C.size!=E.size&&!B)return!1;var U=O.get(C);if(U)return U==E;I|=l,O.set(C,E);var Y=s(M(C),M(E),I,A,R,O);return O.delete(C),Y;case b:if(j)return j.call(C)==j.call(E)}return!1}return pb=N,pb}var xb,_4;function cce(){if(_4)return xb;_4=1;function e(t,r){for(var s=-1,a=r.length,i=t.length;++s<a;)t[i+s]=r[s];return t}return xb=e,xb}var gb,j4;function wj(){if(j4)return gb;j4=1;var e=Array.isArray;return gb=e,gb}var yb,N4;function uce(){if(N4)return yb;N4=1;var e=cce(),t=wj();function r(s,a,i){var o=a(s);return t(s)?o:e(o,i(s))}return yb=r,yb}var bb,S4;function dce(){if(S4)return bb;S4=1;function e(t,r){for(var s=-1,a=t==null?0:t.length,i=0,o=[];++s<a;){var l=t[s];r(l,s,t)&&(o[i++]=l)}return o}return bb=e,bb}var vb,k4;function hce(){if(k4)return vb;k4=1;function e(){return[]}return vb=e,vb}var wb,E4;function fce(){if(E4)return wb;E4=1;var e=dce(),t=hce(),r=Object.prototype,s=r.propertyIsEnumerable,a=Object.getOwnPropertySymbols,i=a?function(o){return o==null?[]:(o=Object(o),e(a(o),function(l){return s.call(o,l)}))}:t;return wb=i,wb}var _b,C4;function mce(){if(C4)return _b;C4=1;function e(t,r){for(var s=-1,a=Array(t);++s<t;)a[s]=r(s);return a}return _b=e,_b}var jb,T4;function wx(){if(T4)return jb;T4=1;function e(t){return t!=null&&typeof t=="object"}return jb=e,jb}var Nb,R4;function pce(){if(R4)return Nb;R4=1;var e=yx(),t=wx(),r="[object Arguments]";function s(a){return t(a)&&e(a)==r}return Nb=s,Nb}var Sb,A4;function xce(){if(A4)return Sb;A4=1;var e=pce(),t=wx(),r=Object.prototype,s=r.hasOwnProperty,a=r.propertyIsEnumerable,i=e((function(){return arguments})())?e:function(o){return t(o)&&s.call(o,"callee")&&!a.call(o,"callee")};return Sb=i,Sb}var nd={exports:{}},kb,P4;function gce(){if(P4)return kb;P4=1;function e(){return!1}return kb=e,kb}nd.exports;var O4;function DP(){return O4||(O4=1,(function(e,t){var r=za(),s=gce(),a=t&&!t.nodeType&&t,i=a&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===a,l=o?r.Buffer:void 0,u=l?l.isBuffer:void 0,d=u||s;e.exports=d})(nd,nd.exports)),nd.exports}var Eb,I4;function yce(){if(I4)return Eb;I4=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function r(s,a){var i=typeof s;return a=a??e,!!a&&(i=="number"||i!="symbol"&&t.test(s))&&s>-1&&s%1==0&&s<a}return Eb=r,Eb}var Cb,L4;function $P(){if(L4)return Cb;L4=1;var e=9007199254740991;function t(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=e}return Cb=t,Cb}var Tb,M4;function bce(){if(M4)return Tb;M4=1;var e=yx(),t=$P(),r=wx(),s="[object Arguments]",a="[object Array]",i="[object Boolean]",o="[object Date]",l="[object Error]",u="[object Function]",d="[object Map]",p="[object Number]",f="[object Object]",m="[object RegExp]",x="[object Set]",y="[object String]",g="[object WeakMap]",b="[object ArrayBuffer]",_="[object DataView]",w="[object Float32Array]",S="[object Float64Array]",j="[object Int8Array]",N="[object Int16Array]",C="[object Int32Array]",E="[object Uint8Array]",T="[object Uint8ClampedArray]",I="[object Uint16Array]",A="[object Uint32Array]",R={};R[w]=R[S]=R[j]=R[N]=R[C]=R[E]=R[T]=R[I]=R[A]=!0,R[s]=R[a]=R[b]=R[i]=R[_]=R[o]=R[l]=R[u]=R[d]=R[p]=R[f]=R[m]=R[x]=R[y]=R[g]=!1;function O(M){return r(M)&&t(M.length)&&!!R[e(M)]}return Tb=O,Tb}var Rb,D4;function vce(){if(D4)return Rb;D4=1;function e(t){return function(r){return t(r)}}return Rb=e,Rb}var rd={exports:{}};rd.exports;var $4;function wce(){return $4||($4=1,(function(e,t){var r=AP(),s=t&&!t.nodeType&&t,a=s&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===s,o=i&&r.process,l=(function(){try{var u=a&&a.require&&a.require("util").types;return u||o&&o.binding&&o.binding("util")}catch{}})();e.exports=l})(rd,rd.exports)),rd.exports}var Ab,q4;function qP(){if(q4)return Ab;q4=1;var e=bce(),t=vce(),r=wce(),s=r&&r.isTypedArray,a=s?t(s):e;return Ab=a,Ab}var Pb,F4;function _ce(){if(F4)return Pb;F4=1;var e=mce(),t=xce(),r=wj(),s=DP(),a=yce(),i=qP(),o=Object.prototype,l=o.hasOwnProperty;function u(d,p){var f=r(d),m=!f&&t(d),x=!f&&!m&&s(d),y=!f&&!m&&!x&&i(d),g=f||m||x||y,b=g?e(d.length,String):[],_=b.length;for(var w in d)(p||l.call(d,w))&&!(g&&(w=="length"||x&&(w=="offset"||w=="parent")||y&&(w=="buffer"||w=="byteLength"||w=="byteOffset")||a(w,_)))&&b.push(w);return b}return Pb=u,Pb}var Ob,U4;function jce(){if(U4)return Ob;U4=1;var e=Object.prototype;function t(r){var s=r&&r.constructor,a=typeof s=="function"&&s.prototype||e;return r===a}return Ob=t,Ob}var Ib,B4;function Nce(){if(B4)return Ib;B4=1;function e(t,r){return function(s){return t(r(s))}}return Ib=e,Ib}var Lb,H4;function Sce(){if(H4)return Lb;H4=1;var e=Nce(),t=e(Object.keys,Object);return Lb=t,Lb}var Mb,K4;function kce(){if(K4)return Mb;K4=1;var e=jce(),t=Sce(),r=Object.prototype,s=r.hasOwnProperty;function a(i){if(!e(i))return t(i);var o=[];for(var l in Object(i))s.call(i,l)&&l!="constructor"&&o.push(l);return o}return Mb=a,Mb}var Db,z4;function Ece(){if(z4)return Db;z4=1;var e=OP(),t=$P();function r(s){return s!=null&&t(s.length)&&!e(s)}return Db=r,Db}var $b,W4;function Cce(){if(W4)return $b;W4=1;var e=_ce(),t=kce(),r=Ece();function s(a){return r(a)?e(a):t(a)}return $b=s,$b}var qb,G4;function Tce(){if(G4)return qb;G4=1;var e=uce(),t=fce(),r=Cce();function s(a){return e(a,r,t)}return qb=s,qb}var Fb,V4;function Rce(){if(V4)return Fb;V4=1;var e=Tce(),t=1,r=Object.prototype,s=r.hasOwnProperty;function a(i,o,l,u,d,p){var f=l&t,m=e(i),x=m.length,y=e(o),g=y.length;if(x!=g&&!f)return!1;for(var b=x;b--;){var _=m[b];if(!(f?_ in o:s.call(o,_)))return!1}var w=p.get(i),S=p.get(o);if(w&&S)return w==o&&S==i;var j=!0;p.set(i,o),p.set(o,i);for(var N=f;++b<x;){_=m[b];var C=i[_],E=o[_];if(u)var T=f?u(E,C,_,o,i,p):u(C,E,_,i,o,p);if(!(T===void 0?C===E||d(C,E,l,u,p):T)){j=!1;break}N||(N=_=="constructor")}if(j&&!N){var I=i.constructor,A=o.constructor;I!=A&&"constructor"in i&&"constructor"in o&&!(typeof I=="function"&&I instanceof I&&typeof A=="function"&&A instanceof A)&&(j=!1)}return p.delete(i),p.delete(o),j}return Fb=a,Fb}var Ub,Q4;function Ace(){if(Q4)return Ub;Q4=1;var e=au(),t=za(),r=e(t,"DataView");return Ub=r,Ub}var Bb,Y4;function Pce(){if(Y4)return Bb;Y4=1;var e=au(),t=za(),r=e(t,"Promise");return Bb=r,Bb}var Hb,J4;function Oce(){if(J4)return Hb;J4=1;var e=au(),t=za(),r=e(t,"Set");return Hb=r,Hb}var Kb,X4;function Ice(){if(X4)return Kb;X4=1;var e=au(),t=za(),r=e(t,"WeakMap");return Kb=r,Kb}var zb,Z4;function Lce(){if(Z4)return zb;Z4=1;var e=Ace(),t=vj(),r=Pce(),s=Oce(),a=Ice(),i=yx(),o=IP(),l="[object Map]",u="[object Object]",d="[object Promise]",p="[object Set]",f="[object WeakMap]",m="[object DataView]",x=o(e),y=o(t),g=o(r),b=o(s),_=o(a),w=i;return(e&&w(new e(new ArrayBuffer(1)))!=m||t&&w(new t)!=l||r&&w(r.resolve())!=d||s&&w(new s)!=p||a&&w(new a)!=f)&&(w=function(S){var j=i(S),N=j==u?S.constructor:void 0,C=N?o(N):"";if(C)switch(C){case x:return m;case y:return l;case g:return d;case b:return p;case _:return f}return j}),zb=w,zb}var Wb,eC;function Mce(){if(eC)return Wb;eC=1;var e=Zle(),t=MP(),r=lce(),s=Rce(),a=Lce(),i=wj(),o=DP(),l=qP(),u=1,d="[object Arguments]",p="[object Array]",f="[object Object]",m=Object.prototype,x=m.hasOwnProperty;function y(g,b,_,w,S,j){var N=i(g),C=i(b),E=N?p:a(g),T=C?p:a(b);E=E==d?f:E,T=T==d?f:T;var I=E==f,A=T==f,R=E==T;if(R&&o(g)){if(!o(b))return!1;N=!0,I=!1}if(R&&!I)return j||(j=new e),N||l(g)?t(g,b,_,w,S,j):r(g,b,E,_,w,S,j);if(!(_&u)){var O=I&&x.call(g,"__wrapped__"),M=A&&x.call(b,"__wrapped__");if(O||M){var B=O?g.value():g,U=M?b.value():b;return j||(j=new e),S(B,U,_,w,j)}}return R?(j||(j=new e),s(g,b,_,w,S,j)):!1}return Wb=y,Wb}var Gb,tC;function Dce(){if(tC)return Gb;tC=1;var e=Mce(),t=wx();function r(s,a,i,o,l){return s===a?!0:s==null||a==null||!t(s)&&!t(a)?s!==s&&a!==a:e(s,a,i,o,r,l)}return Gb=r,Gb}var Vb,nC;function $ce(){if(nC)return Vb;nC=1;var e=Dce();function t(r,s){return e(r,s)}return Vb=t,Vb}var Tm={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */var qce=Tm.exports,rC;function Fce(){return rC||(rC=1,(function(e,t){(function(s,a){e.exports=a()})(typeof self<"u"?self:qce,function(){return(function(r){var s={};function a(i){if(s[i])return s[i].exports;var o=s[i]={i,l:!1,exports:{}};return r[i].call(o.exports,o,o.exports,a),o.l=!0,o.exports}return a.m=r,a.c=s,a.d=function(i,o,l){a.o(i,o)||Object.defineProperty(i,o,{configurable:!1,enumerable:!0,get:l})},a.n=function(i){var o=i&&i.__esModule?function(){return i.default}:function(){return i};return a.d(o,"a",o),o},a.o=function(i,o){return Object.prototype.hasOwnProperty.call(i,o)},a.p="",a(a.s=109)})([(function(r,s,a){Object.defineProperty(s,"__esModule",{value:!0});var i=a(17),o=a(18),l=a(19),u=a(45),d=a(46),p=a(47),f=a(48),m=a(49),x=a(12),y=a(32),g=a(33),b=a(31),_=a(1),w={Scope:_.Scope,create:_.create,find:_.find,query:_.query,register:_.register,Container:i.default,Format:o.default,Leaf:l.default,Embed:f.default,Scroll:u.default,Block:p.default,Inline:d.default,Text:m.default,Attributor:{Attribute:x.default,Class:y.default,Style:g.default,Store:b.default}};s.default=w}),(function(r,s,a){var i=this&&this.__extends||(function(){var b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,w){_.__proto__=w}||function(_,w){for(var S in w)w.hasOwnProperty(S)&&(_[S]=w[S])};return function(_,w){b(_,w);function S(){this.constructor=_}_.prototype=w===null?Object.create(w):(S.prototype=w.prototype,new S)}})();Object.defineProperty(s,"__esModule",{value:!0});var o=(function(b){i(_,b);function _(w){var S=this;return w="[Parchment] "+w,S=b.call(this,w)||this,S.message=w,S.name=S.constructor.name,S}return _})(Error);s.ParchmentError=o;var l={},u={},d={},p={};s.DATA_KEY="__blot";var f;(function(b){b[b.TYPE=3]="TYPE",b[b.LEVEL=12]="LEVEL",b[b.ATTRIBUTE=13]="ATTRIBUTE",b[b.BLOT=14]="BLOT",b[b.INLINE=7]="INLINE",b[b.BLOCK=11]="BLOCK",b[b.BLOCK_BLOT=10]="BLOCK_BLOT",b[b.INLINE_BLOT=6]="INLINE_BLOT",b[b.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",b[b.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",b[b.ANY=15]="ANY"})(f=s.Scope||(s.Scope={}));function m(b,_){var w=y(b);if(w==null)throw new o("Unable to create "+b+" blot");var S=w,j=b instanceof Node||b.nodeType===Node.TEXT_NODE?b:S.create(_);return new S(j,_)}s.create=m;function x(b,_){return _===void 0&&(_=!1),b==null?null:b[s.DATA_KEY]!=null?b[s.DATA_KEY].blot:_?x(b.parentNode,_):null}s.find=x;function y(b,_){_===void 0&&(_=f.ANY);var w;if(typeof b=="string")w=p[b]||l[b];else if(b instanceof Text||b.nodeType===Node.TEXT_NODE)w=p.text;else if(typeof b=="number")b&f.LEVEL&f.BLOCK?w=p.block:b&f.LEVEL&f.INLINE&&(w=p.inline);else if(b instanceof HTMLElement){var S=(b.getAttribute("class")||"").split(/\s+/);for(var j in S)if(w=u[S[j]],w)break;w=w||d[b.tagName]}return w==null?null:_&f.LEVEL&w.scope&&_&f.TYPE&w.scope?w:null}s.query=y;function g(){for(var b=[],_=0;_<arguments.length;_++)b[_]=arguments[_];if(b.length>1)return b.map(function(j){return g(j)});var w=b[0];if(typeof w.blotName!="string"&&typeof w.attrName!="string")throw new o("Invalid definition");if(w.blotName==="abstract")throw new o("Cannot register abstract class");if(p[w.blotName||w.attrName]=w,typeof w.keyName=="string")l[w.keyName]=w;else if(w.className!=null&&(u[w.className]=w),w.tagName!=null){Array.isArray(w.tagName)?w.tagName=w.tagName.map(function(j){return j.toUpperCase()}):w.tagName=w.tagName.toUpperCase();var S=Array.isArray(w.tagName)?w.tagName:[w.tagName];S.forEach(function(j){(d[j]==null||w.className==null)&&(d[j]=w)})}return w}s.register=g}),(function(r,s,a){var i=a(51),o=a(11),l=a(3),u=a(20),d="\0",p=function(f){Array.isArray(f)?this.ops=f:f!=null&&Array.isArray(f.ops)?this.ops=f.ops:this.ops=[]};p.prototype.insert=function(f,m){var x={};return f.length===0?this:(x.insert=f,m!=null&&typeof m=="object"&&Object.keys(m).length>0&&(x.attributes=m),this.push(x))},p.prototype.delete=function(f){return f<=0?this:this.push({delete:f})},p.prototype.retain=function(f,m){if(f<=0)return this;var x={retain:f};return m!=null&&typeof m=="object"&&Object.keys(m).length>0&&(x.attributes=m),this.push(x)},p.prototype.push=function(f){var m=this.ops.length,x=this.ops[m-1];if(f=l(!0,{},f),typeof x=="object"){if(typeof f.delete=="number"&&typeof x.delete=="number")return this.ops[m-1]={delete:x.delete+f.delete},this;if(typeof x.delete=="number"&&f.insert!=null&&(m-=1,x=this.ops[m-1],typeof x!="object"))return this.ops.unshift(f),this;if(o(f.attributes,x.attributes)){if(typeof f.insert=="string"&&typeof x.insert=="string")return this.ops[m-1]={insert:x.insert+f.insert},typeof f.attributes=="object"&&(this.ops[m-1].attributes=f.attributes),this;if(typeof f.retain=="number"&&typeof x.retain=="number")return this.ops[m-1]={retain:x.retain+f.retain},typeof f.attributes=="object"&&(this.ops[m-1].attributes=f.attributes),this}}return m===this.ops.length?this.ops.push(f):this.ops.splice(m,0,f),this},p.prototype.chop=function(){var f=this.ops[this.ops.length-1];return f&&f.retain&&!f.attributes&&this.ops.pop(),this},p.prototype.filter=function(f){return this.ops.filter(f)},p.prototype.forEach=function(f){this.ops.forEach(f)},p.prototype.map=function(f){return this.ops.map(f)},p.prototype.partition=function(f){var m=[],x=[];return this.forEach(function(y){var g=f(y)?m:x;g.push(y)}),[m,x]},p.prototype.reduce=function(f,m){return this.ops.reduce(f,m)},p.prototype.changeLength=function(){return this.reduce(function(f,m){return m.insert?f+u.length(m):m.delete?f-m.delete:f},0)},p.prototype.length=function(){return this.reduce(function(f,m){return f+u.length(m)},0)},p.prototype.slice=function(f,m){f=f||0,typeof m!="number"&&(m=1/0);for(var x=[],y=u.iterator(this.ops),g=0;g<m&&y.hasNext();){var b;g<f?b=y.next(f-g):(b=y.next(m-g),x.push(b)),g+=u.length(b)}return new p(x)},p.prototype.compose=function(f){var m=u.iterator(this.ops),x=u.iterator(f.ops),y=[],g=x.peek();if(g!=null&&typeof g.retain=="number"&&g.attributes==null){for(var b=g.retain;m.peekType()==="insert"&&m.peekLength()<=b;)b-=m.peekLength(),y.push(m.next());g.retain-b>0&&x.next(g.retain-b)}for(var _=new p(y);m.hasNext()||x.hasNext();)if(x.peekType()==="insert")_.push(x.next());else if(m.peekType()==="delete")_.push(m.next());else{var w=Math.min(m.peekLength(),x.peekLength()),S=m.next(w),j=x.next(w);if(typeof j.retain=="number"){var N={};typeof S.retain=="number"?N.retain=w:N.insert=S.insert;var C=u.attributes.compose(S.attributes,j.attributes,typeof S.retain=="number");if(C&&(N.attributes=C),_.push(N),!x.hasNext()&&o(_.ops[_.ops.length-1],N)){var E=new p(m.rest());return _.concat(E).chop()}}else typeof j.delete=="number"&&typeof S.retain=="number"&&_.push(j)}return _.chop()},p.prototype.concat=function(f){var m=new p(this.ops.slice());return f.ops.length>0&&(m.push(f.ops[0]),m.ops=m.ops.concat(f.ops.slice(1))),m},p.prototype.diff=function(f,m){if(this.ops===f.ops)return new p;var x=[this,f].map(function(w){return w.map(function(S){if(S.insert!=null)return typeof S.insert=="string"?S.insert:d;var j=w===f?"on":"with";throw new Error("diff() called "+j+" non-document")}).join("")}),y=new p,g=i(x[0],x[1],m),b=u.iterator(this.ops),_=u.iterator(f.ops);return g.forEach(function(w){for(var S=w[1].length;S>0;){var j=0;switch(w[0]){case i.INSERT:j=Math.min(_.peekLength(),S),y.push(_.next(j));break;case i.DELETE:j=Math.min(S,b.peekLength()),b.next(j),y.delete(j);break;case i.EQUAL:j=Math.min(b.peekLength(),_.peekLength(),S);var N=b.next(j),C=_.next(j);o(N.insert,C.insert)?y.retain(j,u.attributes.diff(N.attributes,C.attributes)):y.push(C).delete(j);break}S-=j}}),y.chop()},p.prototype.eachLine=function(f,m){m=m||`
`;for(var x=u.iterator(this.ops),y=new p,g=0;x.hasNext();){if(x.peekType()!=="insert")return;var b=x.peek(),_=u.length(b)-x.peekLength(),w=typeof b.insert=="string"?b.insert.indexOf(m,_)-_:-1;if(w<0)y.push(x.next());else if(w>0)y.push(x.next(w));else{if(f(y,x.next(1).attributes||{},g)===!1)return;g+=1,y=new p}}y.length()>0&&f(y,{},g)},p.prototype.transform=function(f,m){if(m=!!m,typeof f=="number")return this.transformPosition(f,m);for(var x=u.iterator(this.ops),y=u.iterator(f.ops),g=new p;x.hasNext()||y.hasNext();)if(x.peekType()==="insert"&&(m||y.peekType()!=="insert"))g.retain(u.length(x.next()));else if(y.peekType()==="insert")g.push(y.next());else{var b=Math.min(x.peekLength(),y.peekLength()),_=x.next(b),w=y.next(b);if(_.delete)continue;w.delete?g.push(w):g.retain(b,u.attributes.transform(_.attributes,w.attributes,m))}return g.chop()},p.prototype.transformPosition=function(f,m){m=!!m;for(var x=u.iterator(this.ops),y=0;x.hasNext()&&y<=f;){var g=x.peekLength(),b=x.peekType();if(x.next(),b==="delete"){f-=Math.min(g,f-y);continue}else b==="insert"&&(y<f||!m)&&(f+=g);y+=g}return f},r.exports=p}),(function(r,s){var a=Object.prototype.hasOwnProperty,i=Object.prototype.toString,o=Object.defineProperty,l=Object.getOwnPropertyDescriptor,u=function(x){return typeof Array.isArray=="function"?Array.isArray(x):i.call(x)==="[object Array]"},d=function(x){if(!x||i.call(x)!=="[object Object]")return!1;var y=a.call(x,"constructor"),g=x.constructor&&x.constructor.prototype&&a.call(x.constructor.prototype,"isPrototypeOf");if(x.constructor&&!y&&!g)return!1;var b;for(b in x);return typeof b>"u"||a.call(x,b)},p=function(x,y){o&&y.name==="__proto__"?o(x,y.name,{enumerable:!0,configurable:!0,value:y.newValue,writable:!0}):x[y.name]=y.newValue},f=function(x,y){if(y==="__proto__")if(a.call(x,y)){if(l)return l(x,y).value}else return;return x[y]};r.exports=function m(){var x,y,g,b,_,w,S=arguments[0],j=1,N=arguments.length,C=!1;for(typeof S=="boolean"&&(C=S,S=arguments[1]||{},j=2),(S==null||typeof S!="object"&&typeof S!="function")&&(S={});j<N;++j)if(x=arguments[j],x!=null)for(y in x)g=f(S,y),b=f(x,y),S!==b&&(C&&b&&(d(b)||(_=u(b)))?(_?(_=!1,w=g&&u(g)?g:[]):w=g&&d(g)?g:{},p(S,{name:y,newValue:m(C,w,b)})):typeof b<"u"&&p(S,{name:y,newValue:b}));return S}}),(function(r,s,a){Object.defineProperty(s,"__esModule",{value:!0}),s.default=s.BlockEmbed=s.bubbleFormats=void 0;var i=(function(){function R(O,M){for(var B=0;B<M.length;B++){var U=M[B];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(O,U.key,U)}}return function(O,M,B){return M&&R(O.prototype,M),B&&R(O,B),O}})(),o=function R(O,M,B){O===null&&(O=Function.prototype);var U=Object.getOwnPropertyDescriptor(O,M);if(U===void 0){var Y=Object.getPrototypeOf(O);return Y===null?void 0:R(Y,M,B)}else{if("value"in U)return U.value;var W=U.get;return W===void 0?void 0:W.call(B)}},l=a(3),u=S(l),d=a(2),p=S(d),f=a(0),m=S(f),x=a(16),y=S(x),g=a(6),b=S(g),_=a(7),w=S(_);function S(R){return R&&R.__esModule?R:{default:R}}function j(R,O){if(!(R instanceof O))throw new TypeError("Cannot call a class as a function")}function N(R,O){if(!R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O&&(typeof O=="object"||typeof O=="function")?O:R}function C(R,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof O);R.prototype=Object.create(O&&O.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),O&&(Object.setPrototypeOf?Object.setPrototypeOf(R,O):R.__proto__=O)}var E=1,T=(function(R){C(O,R);function O(){return j(this,O),N(this,(O.__proto__||Object.getPrototypeOf(O)).apply(this,arguments))}return i(O,[{key:"attach",value:function(){o(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"attach",this).call(this),this.attributes=new m.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new p.default().insert(this.value(),(0,u.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(B,U){var Y=m.default.query(B,m.default.Scope.BLOCK_ATTRIBUTE);Y!=null&&this.attributes.attribute(Y,U)}},{key:"formatAt",value:function(B,U,Y,W){this.format(Y,W)}},{key:"insertAt",value:function(B,U,Y){if(typeof U=="string"&&U.endsWith(`
`)){var W=m.default.create(I.blotName);this.parent.insertBefore(W,B===0?this:this.next),W.insertAt(0,U.slice(0,-1))}else o(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"insertAt",this).call(this,B,U,Y)}}]),O})(m.default.Embed);T.scope=m.default.Scope.BLOCK_BLOT;var I=(function(R){C(O,R);function O(M){j(this,O);var B=N(this,(O.__proto__||Object.getPrototypeOf(O)).call(this,M));return B.cache={},B}return i(O,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(m.default.Leaf).reduce(function(B,U){return U.length()===0?B:B.insert(U.value(),A(U))},new p.default).insert(`
`,A(this))),this.cache.delta}},{key:"deleteAt",value:function(B,U){o(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"deleteAt",this).call(this,B,U),this.cache={}}},{key:"formatAt",value:function(B,U,Y,W){U<=0||(m.default.query(Y,m.default.Scope.BLOCK)?B+U===this.length()&&this.format(Y,W):o(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"formatAt",this).call(this,B,Math.min(U,this.length()-B-1),Y,W),this.cache={})}},{key:"insertAt",value:function(B,U,Y){if(Y!=null)return o(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"insertAt",this).call(this,B,U,Y);if(U.length!==0){var W=U.split(`
`),K=W.shift();K.length>0&&(B<this.length()-1||this.children.tail==null?o(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"insertAt",this).call(this,Math.min(B,this.length()-1),K):this.children.tail.insertAt(this.children.tail.length(),K),this.cache={});var F=this;W.reduce(function(H,L){return F=F.split(H,!0),F.insertAt(0,L),L.length},B+K.length)}}},{key:"insertBefore",value:function(B,U){var Y=this.children.head;o(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"insertBefore",this).call(this,B,U),Y instanceof y.default&&Y.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=o(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"length",this).call(this)+E),this.cache.length}},{key:"moveChildren",value:function(B,U){o(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"moveChildren",this).call(this,B,U),this.cache={}}},{key:"optimize",value:function(B){o(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"optimize",this).call(this,B),this.cache={}}},{key:"path",value:function(B){return o(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"path",this).call(this,B,!0)}},{key:"removeChild",value:function(B){o(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"removeChild",this).call(this,B),this.cache={}}},{key:"split",value:function(B){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(U&&(B===0||B>=this.length()-E)){var Y=this.clone();return B===0?(this.parent.insertBefore(Y,this),this):(this.parent.insertBefore(Y,this.next),Y)}else{var W=o(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"split",this).call(this,B,U);return this.cache={},W}}}]),O})(m.default.Block);I.blotName="block",I.tagName="P",I.defaultChild="break",I.allowedChildren=[b.default,m.default.Embed,w.default];function A(R){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return R==null||(typeof R.formats=="function"&&(O=(0,u.default)(O,R.formats())),R.parent==null||R.parent.blotName=="scroll"||R.parent.statics.scope!==R.statics.scope)?O:A(R.parent,O)}s.bubbleFormats=A,s.BlockEmbed=T,s.default=I}),(function(r,s,a){Object.defineProperty(s,"__esModule",{value:!0}),s.default=s.overload=s.expandConfig=void 0;var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(F){return typeof F}:function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},o=(function(){function F(H,L){var q=[],z=!0,Q=!1,J=void 0;try{for(var V=H[Symbol.iterator](),ee;!(z=(ee=V.next()).done)&&(q.push(ee.value),!(L&&q.length===L));z=!0);}catch(te){Q=!0,J=te}finally{try{!z&&V.return&&V.return()}finally{if(Q)throw J}}return q}return function(H,L){if(Array.isArray(H))return H;if(Symbol.iterator in Object(H))return F(H,L);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),l=(function(){function F(H,L){for(var q=0;q<L.length;q++){var z=L[q];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(H,z.key,z)}}return function(H,L,q){return L&&F(H.prototype,L),q&&F(H,q),H}})();a(50);var u=a(2),d=A(u),p=a(14),f=A(p),m=a(8),x=A(m),y=a(9),g=A(y),b=a(0),_=A(b),w=a(15),S=A(w),j=a(3),N=A(j),C=a(10),E=A(C),T=a(34),I=A(T);function A(F){return F&&F.__esModule?F:{default:F}}function R(F,H,L){return H in F?Object.defineProperty(F,H,{value:L,enumerable:!0,configurable:!0,writable:!0}):F[H]=L,F}function O(F,H){if(!(F instanceof H))throw new TypeError("Cannot call a class as a function")}var M=(0,E.default)("quill"),B=(function(){l(F,null,[{key:"debug",value:function(L){L===!0&&(L="log"),E.default.level(L)}},{key:"find",value:function(L){return L.__quill||_.default.find(L)}},{key:"import",value:function(L){return this.imports[L]==null&&M.error("Cannot import "+L+". Are you sure it was registered?"),this.imports[L]}},{key:"register",value:function(L,q){var z=this,Q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof L!="string"){var J=L.attrName||L.blotName;typeof J=="string"?this.register("formats/"+J,L,q):Object.keys(L).forEach(function(V){z.register(V,L[V],q)})}else this.imports[L]!=null&&!Q&&M.warn("Overwriting "+L+" with",q),this.imports[L]=q,(L.startsWith("blots/")||L.startsWith("formats/"))&&q.blotName!=="abstract"?_.default.register(q):L.startsWith("modules")&&typeof q.register=="function"&&q.register()}}]);function F(H){var L=this,q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(O(this,F),this.options=U(H,q),this.container=this.options.container,this.container==null)return M.error("Invalid Quill container",H);this.options.debug&&F.debug(this.options.debug);var z=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new x.default,this.scroll=_.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new f.default(this.scroll),this.selection=new S.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(x.default.events.EDITOR_CHANGE,function(J){J===x.default.events.TEXT_CHANGE&&L.root.classList.toggle("ql-blank",L.editor.isBlank())}),this.emitter.on(x.default.events.SCROLL_UPDATE,function(J,V){var ee=L.selection.lastRange,te=ee&&ee.length===0?ee.index:void 0;Y.call(L,function(){return L.editor.update(null,V,te)},J)});var Q=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+z+"<p><br></p></div>");this.setContents(Q),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return l(F,[{key:"addContainer",value:function(L){var q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof L=="string"){var z=L;L=document.createElement("div"),L.classList.add(z)}return this.container.insertBefore(L,q),L}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(L,q,z){var Q=this,J=W(L,q,z),V=o(J,4);return L=V[0],q=V[1],z=V[3],Y.call(this,function(){return Q.editor.deleteText(L,q)},z,L,-1*q)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(L),this.container.classList.toggle("ql-disabled",!L)}},{key:"focus",value:function(){var L=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=L,this.scrollIntoView()}},{key:"format",value:function(L,q){var z=this,Q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:x.default.sources.API;return Y.call(this,function(){var J=z.getSelection(!0),V=new d.default;if(J==null)return V;if(_.default.query(L,_.default.Scope.BLOCK))V=z.editor.formatLine(J.index,J.length,R({},L,q));else{if(J.length===0)return z.selection.format(L,q),V;V=z.editor.formatText(J.index,J.length,R({},L,q))}return z.setSelection(J,x.default.sources.SILENT),V},Q)}},{key:"formatLine",value:function(L,q,z,Q,J){var V=this,ee=void 0,te=W(L,q,z,Q,J),oe=o(te,4);return L=oe[0],q=oe[1],ee=oe[2],J=oe[3],Y.call(this,function(){return V.editor.formatLine(L,q,ee)},J,L,0)}},{key:"formatText",value:function(L,q,z,Q,J){var V=this,ee=void 0,te=W(L,q,z,Q,J),oe=o(te,4);return L=oe[0],q=oe[1],ee=oe[2],J=oe[3],Y.call(this,function(){return V.editor.formatText(L,q,ee)},J,L,0)}},{key:"getBounds",value:function(L){var q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,z=void 0;typeof L=="number"?z=this.selection.getBounds(L,q):z=this.selection.getBounds(L.index,L.length);var Q=this.container.getBoundingClientRect();return{bottom:z.bottom-Q.top,height:z.height,left:z.left-Q.left,right:z.right-Q.left,top:z.top-Q.top,width:z.width}}},{key:"getContents",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-L,z=W(L,q),Q=o(z,2);return L=Q[0],q=Q[1],this.editor.getContents(L,q)}},{key:"getFormat",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof L=="number"?this.editor.getFormat(L,q):this.editor.getFormat(L.index,L.length)}},{key:"getIndex",value:function(L){return L.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(L){return this.scroll.leaf(L)}},{key:"getLine",value:function(L){return this.scroll.line(L)}},{key:"getLines",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof L!="number"?this.scroll.lines(L.index,L.length):this.scroll.lines(L,q)}},{key:"getModule",value:function(L){return this.theme.modules[L]}},{key:"getSelection",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return L&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-L,z=W(L,q),Q=o(z,2);return L=Q[0],q=Q[1],this.editor.getText(L,q)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(L,q,z){var Q=this,J=arguments.length>3&&arguments[3]!==void 0?arguments[3]:F.sources.API;return Y.call(this,function(){return Q.editor.insertEmbed(L,q,z)},J,L)}},{key:"insertText",value:function(L,q,z,Q,J){var V=this,ee=void 0,te=W(L,0,z,Q,J),oe=o(te,4);return L=oe[0],ee=oe[2],J=oe[3],Y.call(this,function(){return V.editor.insertText(L,q,ee)},J,L,q.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(L,q,z){this.clipboard.dangerouslyPasteHTML(L,q,z)}},{key:"removeFormat",value:function(L,q,z){var Q=this,J=W(L,q,z),V=o(J,4);return L=V[0],q=V[1],z=V[3],Y.call(this,function(){return Q.editor.removeFormat(L,q)},z,L)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(L){var q=this,z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:x.default.sources.API;return Y.call(this,function(){L=new d.default(L);var Q=q.getLength(),J=q.editor.deleteText(0,Q),V=q.editor.applyDelta(L),ee=V.ops[V.ops.length-1];ee!=null&&typeof ee.insert=="string"&&ee.insert[ee.insert.length-1]===`
`&&(q.editor.deleteText(q.getLength()-1,1),V.delete(1));var te=J.compose(V);return te},z)}},{key:"setSelection",value:function(L,q,z){if(L==null)this.selection.setRange(null,q||F.sources.API);else{var Q=W(L,q,z),J=o(Q,4);L=J[0],q=J[1],z=J[3],this.selection.setRange(new w.Range(L,q),z),z!==x.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(L){var q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:x.default.sources.API,z=new d.default().insert(L);return this.setContents(z,q)}},{key:"update",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:x.default.sources.USER,q=this.scroll.update(L);return this.selection.update(L),q}},{key:"updateContents",value:function(L){var q=this,z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:x.default.sources.API;return Y.call(this,function(){return L=new d.default(L),q.editor.applyDelta(L,z)},z,!0)}}]),F})();B.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},B.events=x.default.events,B.sources=x.default.sources,B.version="1.3.7",B.imports={delta:d.default,parchment:_.default,"core/module":g.default,"core/theme":I.default};function U(F,H){if(H=(0,N.default)(!0,{container:F,modules:{clipboard:!0,keyboard:!0,history:!0}},H),!H.theme||H.theme===B.DEFAULTS.theme)H.theme=I.default;else if(H.theme=B.import("themes/"+H.theme),H.theme==null)throw new Error("Invalid theme "+H.theme+". Did you register it?");var L=(0,N.default)(!0,{},H.theme.DEFAULTS);[L,H].forEach(function(Q){Q.modules=Q.modules||{},Object.keys(Q.modules).forEach(function(J){Q.modules[J]===!0&&(Q.modules[J]={})})});var q=Object.keys(L.modules).concat(Object.keys(H.modules)),z=q.reduce(function(Q,J){var V=B.import("modules/"+J);return V==null?M.error("Cannot load "+J+" module. Are you sure you registered it?"):Q[J]=V.DEFAULTS||{},Q},{});return H.modules!=null&&H.modules.toolbar&&H.modules.toolbar.constructor!==Object&&(H.modules.toolbar={container:H.modules.toolbar}),H=(0,N.default)(!0,{},B.DEFAULTS,{modules:z},L,H),["bounds","container","scrollingContainer"].forEach(function(Q){typeof H[Q]=="string"&&(H[Q]=document.querySelector(H[Q]))}),H.modules=Object.keys(H.modules).reduce(function(Q,J){return H.modules[J]&&(Q[J]=H.modules[J]),Q},{}),H}function Y(F,H,L,q){if(this.options.strict&&!this.isEnabled()&&H===x.default.sources.USER)return new d.default;var z=L==null?null:this.getSelection(),Q=this.editor.delta,J=F();if(z!=null&&(L===!0&&(L=z.index),q==null?z=K(z,J,H):q!==0&&(z=K(z,L,q,H)),this.setSelection(z,x.default.sources.SILENT)),J.length()>0){var V,ee=[x.default.events.TEXT_CHANGE,J,Q,H];if((V=this.emitter).emit.apply(V,[x.default.events.EDITOR_CHANGE].concat(ee)),H!==x.default.sources.SILENT){var te;(te=this.emitter).emit.apply(te,ee)}}return J}function W(F,H,L,q,z){var Q={};return typeof F.index=="number"&&typeof F.length=="number"?typeof H!="number"?(z=q,q=L,L=H,H=F.length,F=F.index):(H=F.length,F=F.index):typeof H!="number"&&(z=q,q=L,L=H,H=0),(typeof L>"u"?"undefined":i(L))==="object"?(Q=L,z=q):typeof L=="string"&&(q!=null?Q[L]=q:z=L),z=z||x.default.sources.API,[F,H,Q,z]}function K(F,H,L,q){if(F==null)return null;var z=void 0,Q=void 0;if(H instanceof d.default){var J=[F.index,F.index+F.length].map(function(oe){return H.transformPosition(oe,q!==x.default.sources.USER)}),V=o(J,2);z=V[0],Q=V[1]}else{var ee=[F.index,F.index+F.length].map(function(oe){return oe<H||oe===H&&q===x.default.sources.USER?oe:L>=0?oe+L:Math.max(H,oe+L)}),te=o(ee,2);z=te[0],Q=te[1]}return new w.Range(z,Q-z)}s.expandConfig=U,s.overload=W,s.default=B}),(function(r,s,a){Object.defineProperty(s,"__esModule",{value:!0});var i=(function(){function b(_,w){for(var S=0;S<w.length;S++){var j=w[S];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(_,j.key,j)}}return function(_,w,S){return w&&b(_.prototype,w),S&&b(_,S),_}})(),o=function b(_,w,S){_===null&&(_=Function.prototype);var j=Object.getOwnPropertyDescriptor(_,w);if(j===void 0){var N=Object.getPrototypeOf(_);return N===null?void 0:b(N,w,S)}else{if("value"in j)return j.value;var C=j.get;return C===void 0?void 0:C.call(S)}},l=a(7),u=f(l),d=a(0),p=f(d);function f(b){return b&&b.__esModule?b:{default:b}}function m(b,_){if(!(b instanceof _))throw new TypeError("Cannot call a class as a function")}function x(b,_){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:b}function y(b,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);b.prototype=Object.create(_&&_.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(b,_):b.__proto__=_)}var g=(function(b){y(_,b);function _(){return m(this,_),x(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return i(_,[{key:"formatAt",value:function(S,j,N,C){if(_.compare(this.statics.blotName,N)<0&&p.default.query(N,p.default.Scope.BLOT)){var E=this.isolate(S,j);C&&E.wrap(N,C)}else o(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"formatAt",this).call(this,S,j,N,C)}},{key:"optimize",value:function(S){if(o(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"optimize",this).call(this,S),this.parent instanceof _&&_.compare(this.statics.blotName,this.parent.statics.blotName)>0){var j=this.parent.isolate(this.offset(),this.length());this.moveChildren(j),j.wrap(this)}}}],[{key:"compare",value:function(S,j){var N=_.order.indexOf(S),C=_.order.indexOf(j);return N>=0||C>=0?N-C:S===j?0:S<j?-1:1}}]),_})(p.default.Inline);g.allowedChildren=[g,p.default.Embed,u.default],g.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],s.default=g}),(function(r,s,a){Object.defineProperty(s,"__esModule",{value:!0});var i=a(0),o=l(i);function l(m){return m&&m.__esModule?m:{default:m}}function u(m,x){if(!(m instanceof x))throw new TypeError("Cannot call a class as a function")}function d(m,x){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:m}function p(m,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);m.prototype=Object.create(x&&x.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(m,x):m.__proto__=x)}var f=(function(m){p(x,m);function x(){return u(this,x),d(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return x})(o.default.Text);s.default=f}),(function(r,s,a){Object.defineProperty(s,"__esModule",{value:!0});var i=(function(){function w(S,j){for(var N=0;N<j.length;N++){var C=j[N];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(S,C.key,C)}}return function(S,j,N){return j&&w(S.prototype,j),N&&w(S,N),S}})(),o=function w(S,j,N){S===null&&(S=Function.prototype);var C=Object.getOwnPropertyDescriptor(S,j);if(C===void 0){var E=Object.getPrototypeOf(S);return E===null?void 0:w(E,j,N)}else{if("value"in C)return C.value;var T=C.get;return T===void 0?void 0:T.call(N)}},l=a(54),u=f(l),d=a(10),p=f(d);function f(w){return w&&w.__esModule?w:{default:w}}function m(w,S){if(!(w instanceof S))throw new TypeError("Cannot call a class as a function")}function x(w,S){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:w}function y(w,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);w.prototype=Object.create(S&&S.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(w,S):w.__proto__=S)}var g=(0,p.default)("quill:events"),b=["selectionchange","mousedown","mouseup","click"];b.forEach(function(w){document.addEventListener(w,function(){for(var S=arguments.length,j=Array(S),N=0;N<S;N++)j[N]=arguments[N];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(C){if(C.__quill&&C.__quill.emitter){var E;(E=C.__quill.emitter).handleDOM.apply(E,j)}})})});var _=(function(w){y(S,w);function S(){m(this,S);var j=x(this,(S.__proto__||Object.getPrototypeOf(S)).call(this));return j.listeners={},j.on("error",g.error),j}return i(S,[{key:"emit",value:function(){g.log.apply(g,arguments),o(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(N){for(var C=arguments.length,E=Array(C>1?C-1:0),T=1;T<C;T++)E[T-1]=arguments[T];(this.listeners[N.type]||[]).forEach(function(I){var A=I.node,R=I.handler;(N.target===A||A.contains(N.target))&&R.apply(void 0,[N].concat(E))})}},{key:"listenDOM",value:function(N,C,E){this.listeners[N]||(this.listeners[N]=[]),this.listeners[N].push({node:C,handler:E})}}]),S})(u.default);_.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},_.sources={API:"api",SILENT:"silent",USER:"user"},s.default=_}),(function(r,s,a){Object.defineProperty(s,"__esModule",{value:!0});function i(l,u){if(!(l instanceof u))throw new TypeError("Cannot call a class as a function")}var o=function l(u){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};i(this,l),this.quill=u,this.options=d};o.DEFAULTS={},s.default=o}),(function(r,s,a){Object.defineProperty(s,"__esModule",{value:!0});var i=["error","warn","log","info"],o="warn";function l(d){if(i.indexOf(d)<=i.indexOf(o)){for(var p,f=arguments.length,m=Array(f>1?f-1:0),x=1;x<f;x++)m[x-1]=arguments[x];(p=console)[d].apply(p,m)}}function u(d){return i.reduce(function(p,f){return p[f]=l.bind(console,f,d),p},{})}l.level=u.level=function(d){o=d},s.default=u}),(function(r,s,a){var i=Array.prototype.slice,o=a(52),l=a(53),u=r.exports=function(m,x,y){return y||(y={}),m===x?!0:m instanceof Date&&x instanceof Date?m.getTime()===x.getTime():!m||!x||typeof m!="object"&&typeof x!="object"?y.strict?m===x:m==x:f(m,x,y)};function d(m){return m==null}function p(m){return!(!m||typeof m!="object"||typeof m.length!="number"||typeof m.copy!="function"||typeof m.slice!="function"||m.length>0&&typeof m[0]!="number")}function f(m,x,y){var g,b;if(d(m)||d(x)||m.prototype!==x.prototype)return!1;if(l(m))return l(x)?(m=i.call(m),x=i.call(x),u(m,x,y)):!1;if(p(m)){if(!p(x)||m.length!==x.length)return!1;for(g=0;g<m.length;g++)if(m[g]!==x[g])return!1;return!0}try{var _=o(m),w=o(x)}catch{return!1}if(_.length!=w.length)return!1;for(_.sort(),w.sort(),g=_.length-1;g>=0;g--)if(_[g]!=w[g])return!1;for(g=_.length-1;g>=0;g--)if(b=_[g],!u(m[b],x[b],y))return!1;return typeof m==typeof x}}),(function(r,s,a){Object.defineProperty(s,"__esModule",{value:!0});var i=a(1),o=(function(){function l(u,d,p){p===void 0&&(p={}),this.attrName=u,this.keyName=d;var f=i.Scope.TYPE&i.Scope.ATTRIBUTE;p.scope!=null?this.scope=p.scope&i.Scope.LEVEL|f:this.scope=i.Scope.ATTRIBUTE,p.whitelist!=null&&(this.whitelist=p.whitelist)}return l.keys=function(u){return[].map.call(u.attributes,function(d){return d.name})},l.prototype.add=function(u,d){return this.canAdd(u,d)?(u.setAttribute(this.keyName,d),!0):!1},l.prototype.canAdd=function(u,d){var p=i.query(u,i.Scope.BLOT&(this.scope|i.Scope.TYPE));return p==null?!1:this.whitelist==null?!0:typeof d=="string"?this.whitelist.indexOf(d.replace(/["']/g,""))>-1:this.whitelist.indexOf(d)>-1},l.prototype.remove=function(u){u.removeAttribute(this.keyName)},l.prototype.value=function(u){var d=u.getAttribute(this.keyName);return this.canAdd(u,d)&&d?d:""},l})();s.default=o}),(function(r,s,a){Object.defineProperty(s,"__esModule",{value:!0}),s.default=s.Code=void 0;var i=(function(){function T(I,A){var R=[],O=!0,M=!1,B=void 0;try{for(var U=I[Symbol.iterator](),Y;!(O=(Y=U.next()).done)&&(R.push(Y.value),!(A&&R.length===A));O=!0);}catch(W){M=!0,B=W}finally{try{!O&&U.return&&U.return()}finally{if(M)throw B}}return R}return function(I,A){if(Array.isArray(I))return I;if(Symbol.iterator in Object(I))return T(I,A);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=(function(){function T(I,A){for(var R=0;R<A.length;R++){var O=A[R];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(I,O.key,O)}}return function(I,A,R){return A&&T(I.prototype,A),R&&T(I,R),I}})(),l=function T(I,A,R){I===null&&(I=Function.prototype);var O=Object.getOwnPropertyDescriptor(I,A);if(O===void 0){var M=Object.getPrototypeOf(I);return M===null?void 0:T(M,A,R)}else{if("value"in O)return O.value;var B=O.get;return B===void 0?void 0:B.call(R)}},u=a(2),d=w(u),p=a(0),f=w(p),m=a(4),x=w(m),y=a(6),g=w(y),b=a(7),_=w(b);function w(T){return T&&T.__esModule?T:{default:T}}function S(T,I){if(!(T instanceof I))throw new TypeError("Cannot call a class as a function")}function j(T,I){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return I&&(typeof I=="object"||typeof I=="function")?I:T}function N(T,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof I);T.prototype=Object.create(I&&I.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),I&&(Object.setPrototypeOf?Object.setPrototypeOf(T,I):T.__proto__=I)}var C=(function(T){N(I,T);function I(){return S(this,I),j(this,(I.__proto__||Object.getPrototypeOf(I)).apply(this,arguments))}return I})(g.default);C.blotName="code",C.tagName="CODE";var E=(function(T){N(I,T);function I(){return S(this,I),j(this,(I.__proto__||Object.getPrototypeOf(I)).apply(this,arguments))}return o(I,[{key:"delta",value:function(){var R=this,O=this.domNode.textContent;return O.endsWith(`
`)&&(O=O.slice(0,-1)),O.split(`
`).reduce(function(M,B){return M.insert(B).insert(`
`,R.formats())},new d.default)}},{key:"format",value:function(R,O){if(!(R===this.statics.blotName&&O)){var M=this.descendant(_.default,this.length()-1),B=i(M,1),U=B[0];U!=null&&U.deleteAt(U.length()-1,1),l(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"format",this).call(this,R,O)}}},{key:"formatAt",value:function(R,O,M,B){if(O!==0&&!(f.default.query(M,f.default.Scope.BLOCK)==null||M===this.statics.blotName&&B===this.statics.formats(this.domNode))){var U=this.newlineIndex(R);if(!(U<0||U>=R+O)){var Y=this.newlineIndex(R,!0)+1,W=U-Y+1,K=this.isolate(Y,W),F=K.next;K.format(M,B),F instanceof I&&F.formatAt(0,R-Y+O-W,M,B)}}}},{key:"insertAt",value:function(R,O,M){if(M==null){var B=this.descendant(_.default,R),U=i(B,2),Y=U[0],W=U[1];Y.insertAt(W,O)}}},{key:"length",value:function(){var R=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?R:R+1}},{key:"newlineIndex",value:function(R){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(O)return this.domNode.textContent.slice(0,R).lastIndexOf(`
`);var M=this.domNode.textContent.slice(R).indexOf(`
`);return M>-1?R+M:-1}},{key:"optimize",value:function(R){this.domNode.textContent.endsWith(`
`)||this.appendChild(f.default.create("text",`
`)),l(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"optimize",this).call(this,R);var O=this.next;O!=null&&O.prev===this&&O.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===O.statics.formats(O.domNode)&&(O.optimize(R),O.moveChildren(this),O.remove())}},{key:"replace",value:function(R){l(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"replace",this).call(this,R),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(O){var M=f.default.find(O);M==null?O.parentNode.removeChild(O):M instanceof f.default.Embed?M.remove():M.unwrap()})}}],[{key:"create",value:function(R){var O=l(I.__proto__||Object.getPrototypeOf(I),"create",this).call(this,R);return O.setAttribute("spellcheck",!1),O}},{key:"formats",value:function(){return!0}}]),I})(x.default);E.blotName="code-block",E.tagName="PRE",E.TAB="  ",s.Code=C,s.default=E}),(function(r,s,a){Object.defineProperty(s,"__esModule",{value:!0});var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(F){return typeof F}:function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},o=(function(){function F(H,L){var q=[],z=!0,Q=!1,J=void 0;try{for(var V=H[Symbol.iterator](),ee;!(z=(ee=V.next()).done)&&(q.push(ee.value),!(L&&q.length===L));z=!0);}catch(te){Q=!0,J=te}finally{try{!z&&V.return&&V.return()}finally{if(Q)throw J}}return q}return function(H,L){if(Array.isArray(H))return H;if(Symbol.iterator in Object(H))return F(H,L);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),l=(function(){function F(H,L){for(var q=0;q<L.length;q++){var z=L[q];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(H,z.key,z)}}return function(H,L,q){return L&&F(H.prototype,L),q&&F(H,q),H}})(),u=a(2),d=O(u),p=a(20),f=O(p),m=a(0),x=O(m),y=a(13),g=O(y),b=a(24),_=O(b),w=a(4),S=O(w),j=a(16),N=O(j),C=a(21),E=O(C),T=a(11),I=O(T),A=a(3),R=O(A);function O(F){return F&&F.__esModule?F:{default:F}}function M(F,H,L){return H in F?Object.defineProperty(F,H,{value:L,enumerable:!0,configurable:!0,writable:!0}):F[H]=L,F}function B(F,H){if(!(F instanceof H))throw new TypeError("Cannot call a class as a function")}var U=/^[ -~]*$/,Y=(function(){function F(H){B(this,F),this.scroll=H,this.delta=this.getDelta()}return l(F,[{key:"applyDelta",value:function(L){var q=this,z=!1;this.scroll.update();var Q=this.scroll.length();return this.scroll.batchStart(),L=K(L),L.reduce(function(J,V){var ee=V.retain||V.delete||V.insert.length||1,te=V.attributes||{};if(V.insert!=null){if(typeof V.insert=="string"){var oe=V.insert;oe.endsWith(`
`)&&z&&(z=!1,oe=oe.slice(0,-1)),J>=Q&&!oe.endsWith(`
`)&&(z=!0),q.scroll.insertAt(J,oe);var he=q.scroll.line(J),Ce=o(he,2),Fe=Ce[0],Ae=Ce[1],Ne=(0,R.default)({},(0,w.bubbleFormats)(Fe));if(Fe instanceof S.default){var Be=Fe.descendant(x.default.Leaf,Ae),St=o(Be,1),ut=St[0];Ne=(0,R.default)(Ne,(0,w.bubbleFormats)(ut))}te=f.default.attributes.diff(Ne,te)||{}}else if(i(V.insert)==="object"){var fe=Object.keys(V.insert)[0];if(fe==null)return J;q.scroll.insertAt(J,fe,V.insert[fe])}Q+=ee}return Object.keys(te).forEach(function(xe){q.scroll.formatAt(J,ee,xe,te[xe])}),J+ee},0),L.reduce(function(J,V){return typeof V.delete=="number"?(q.scroll.deleteAt(J,V.delete),J):J+(V.retain||V.insert.length||1)},0),this.scroll.batchEnd(),this.update(L)}},{key:"deleteText",value:function(L,q){return this.scroll.deleteAt(L,q),this.update(new d.default().retain(L).delete(q))}},{key:"formatLine",value:function(L,q){var z=this,Q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(Q).forEach(function(J){if(!(z.scroll.whitelist!=null&&!z.scroll.whitelist[J])){var V=z.scroll.lines(L,Math.max(q,1)),ee=q;V.forEach(function(te){var oe=te.length();if(!(te instanceof g.default))te.format(J,Q[J]);else{var he=L-te.offset(z.scroll),Ce=te.newlineIndex(he+ee)-he+1;te.formatAt(he,Ce,J,Q[J])}ee-=oe})}}),this.scroll.optimize(),this.update(new d.default().retain(L).retain(q,(0,E.default)(Q)))}},{key:"formatText",value:function(L,q){var z=this,Q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(Q).forEach(function(J){z.scroll.formatAt(L,q,J,Q[J])}),this.update(new d.default().retain(L).retain(q,(0,E.default)(Q)))}},{key:"getContents",value:function(L,q){return this.delta.slice(L,L+q)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(L,q){return L.concat(q.delta())},new d.default)}},{key:"getFormat",value:function(L){var q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,z=[],Q=[];q===0?this.scroll.path(L).forEach(function(V){var ee=o(V,1),te=ee[0];te instanceof S.default?z.push(te):te instanceof x.default.Leaf&&Q.push(te)}):(z=this.scroll.lines(L,q),Q=this.scroll.descendants(x.default.Leaf,L,q));var J=[z,Q].map(function(V){if(V.length===0)return{};for(var ee=(0,w.bubbleFormats)(V.shift());Object.keys(ee).length>0;){var te=V.shift();if(te==null)return ee;ee=W((0,w.bubbleFormats)(te),ee)}return ee});return R.default.apply(R.default,J)}},{key:"getText",value:function(L,q){return this.getContents(L,q).filter(function(z){return typeof z.insert=="string"}).map(function(z){return z.insert}).join("")}},{key:"insertEmbed",value:function(L,q,z){return this.scroll.insertAt(L,q,z),this.update(new d.default().retain(L).insert(M({},q,z)))}},{key:"insertText",value:function(L,q){var z=this,Q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return q=q.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(L,q),Object.keys(Q).forEach(function(J){z.scroll.formatAt(L,q.length,J,Q[J])}),this.update(new d.default().retain(L).insert(q,(0,E.default)(Q)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var L=this.scroll.children.head;return L.statics.blotName!==S.default.blotName||L.children.length>1?!1:L.children.head instanceof N.default}},{key:"removeFormat",value:function(L,q){var z=this.getText(L,q),Q=this.scroll.line(L+q),J=o(Q,2),V=J[0],ee=J[1],te=0,oe=new d.default;V!=null&&(V instanceof g.default?te=V.newlineIndex(ee)-ee+1:te=V.length()-ee,oe=V.delta().slice(ee,ee+te-1).insert(`
`));var he=this.getContents(L,q+te),Ce=he.diff(new d.default().insert(z).concat(oe)),Fe=new d.default().retain(L).concat(Ce);return this.applyDelta(Fe)}},{key:"update",value:function(L){var q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,Q=this.delta;if(q.length===1&&q[0].type==="characterData"&&q[0].target.data.match(U)&&x.default.find(q[0].target)){var J=x.default.find(q[0].target),V=(0,w.bubbleFormats)(J),ee=J.offset(this.scroll),te=q[0].oldValue.replace(_.default.CONTENTS,""),oe=new d.default().insert(te),he=new d.default().insert(J.value()),Ce=new d.default().retain(ee).concat(oe.diff(he,z));L=Ce.reduce(function(Fe,Ae){return Ae.insert?Fe.insert(Ae.insert,V):Fe.push(Ae)},new d.default),this.delta=Q.compose(L)}else this.delta=this.getDelta(),(!L||!(0,I.default)(Q.compose(L),this.delta))&&(L=Q.diff(this.delta,z));return L}}]),F})();function W(F,H){return Object.keys(H).reduce(function(L,q){return F[q]==null||(H[q]===F[q]?L[q]=H[q]:Array.isArray(H[q])?H[q].indexOf(F[q])<0&&(L[q]=H[q].concat([F[q]])):L[q]=[H[q],F[q]]),L},{})}function K(F){return F.reduce(function(H,L){if(L.insert===1){var q=(0,E.default)(L.attributes);return delete q.image,H.insert({image:L.attributes.image},q)}if(L.attributes!=null&&(L.attributes.list===!0||L.attributes.bullet===!0)&&(L=(0,E.default)(L),L.attributes.list?L.attributes.list="ordered":(L.attributes.list="bullet",delete L.attributes.bullet)),typeof L.insert=="string"){var z=L.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return H.insert(z,L.attributes)}return H.push(L)},new d.default)}s.default=Y}),(function(r,s,a){Object.defineProperty(s,"__esModule",{value:!0}),s.default=s.Range=void 0;var i=(function(){function T(I,A){var R=[],O=!0,M=!1,B=void 0;try{for(var U=I[Symbol.iterator](),Y;!(O=(Y=U.next()).done)&&(R.push(Y.value),!(A&&R.length===A));O=!0);}catch(W){M=!0,B=W}finally{try{!O&&U.return&&U.return()}finally{if(M)throw B}}return R}return function(I,A){if(Array.isArray(I))return I;if(Symbol.iterator in Object(I))return T(I,A);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=(function(){function T(I,A){for(var R=0;R<A.length;R++){var O=A[R];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(I,O.key,O)}}return function(I,A,R){return A&&T(I.prototype,A),R&&T(I,R),I}})(),l=a(0),u=_(l),d=a(21),p=_(d),f=a(11),m=_(f),x=a(8),y=_(x),g=a(10),b=_(g);function _(T){return T&&T.__esModule?T:{default:T}}function w(T){if(Array.isArray(T)){for(var I=0,A=Array(T.length);I<T.length;I++)A[I]=T[I];return A}else return Array.from(T)}function S(T,I){if(!(T instanceof I))throw new TypeError("Cannot call a class as a function")}var j=(0,b.default)("quill:selection"),N=function T(I){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;S(this,T),this.index=I,this.length=A},C=(function(){function T(I,A){var R=this;S(this,T),this.emitter=A,this.scroll=I,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=u.default.create("cursor",this),this.lastRange=this.savedRange=new N(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){R.mouseDown||setTimeout(R.update.bind(R,y.default.sources.USER),1)}),this.emitter.on(y.default.events.EDITOR_CHANGE,function(O,M){O===y.default.events.TEXT_CHANGE&&M.length()>0&&R.update(y.default.sources.SILENT)}),this.emitter.on(y.default.events.SCROLL_BEFORE_UPDATE,function(){if(R.hasFocus()){var O=R.getNativeRange();O!=null&&O.start.node!==R.cursor.textNode&&R.emitter.once(y.default.events.SCROLL_UPDATE,function(){try{R.setNativeRange(O.start.node,O.start.offset,O.end.node,O.end.offset)}catch{}})}}),this.emitter.on(y.default.events.SCROLL_OPTIMIZE,function(O,M){if(M.range){var B=M.range,U=B.startNode,Y=B.startOffset,W=B.endNode,K=B.endOffset;R.setNativeRange(U,Y,W,K)}}),this.update(y.default.sources.SILENT)}return o(T,[{key:"handleComposition",value:function(){var A=this;this.root.addEventListener("compositionstart",function(){A.composing=!0}),this.root.addEventListener("compositionend",function(){if(A.composing=!1,A.cursor.parent){var R=A.cursor.restore();if(!R)return;setTimeout(function(){A.setNativeRange(R.startNode,R.startOffset,R.endNode,R.endOffset)},1)}})}},{key:"handleDragging",value:function(){var A=this;this.emitter.listenDOM("mousedown",document.body,function(){A.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){A.mouseDown=!1,A.update(y.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(A,R){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[A])){this.scroll.update();var O=this.getNativeRange();if(!(O==null||!O.native.collapsed||u.default.query(A,u.default.Scope.BLOCK))){if(O.start.node!==this.cursor.textNode){var M=u.default.find(O.start.node,!1);if(M==null)return;if(M instanceof u.default.Leaf){var B=M.split(O.start.offset);M.parent.insertBefore(this.cursor,B)}else M.insertBefore(this.cursor,O.start.node);this.cursor.attach()}this.cursor.format(A,R),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(A){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,O=this.scroll.length();A=Math.min(A,O-1),R=Math.min(A+R,O-1)-A;var M=void 0,B=this.scroll.leaf(A),U=i(B,2),Y=U[0],W=U[1];if(Y==null)return null;var K=Y.position(W,!0),F=i(K,2);M=F[0],W=F[1];var H=document.createRange();if(R>0){H.setStart(M,W);var L=this.scroll.leaf(A+R),q=i(L,2);if(Y=q[0],W=q[1],Y==null)return null;var z=Y.position(W,!0),Q=i(z,2);return M=Q[0],W=Q[1],H.setEnd(M,W),H.getBoundingClientRect()}else{var J="left",V=void 0;return M instanceof Text?(W<M.data.length?(H.setStart(M,W),H.setEnd(M,W+1)):(H.setStart(M,W-1),H.setEnd(M,W),J="right"),V=H.getBoundingClientRect()):(V=Y.domNode.getBoundingClientRect(),W>0&&(J="right")),{bottom:V.top+V.height,height:V.height,left:V[J],right:V[J],top:V.top,width:0}}}},{key:"getNativeRange",value:function(){var A=document.getSelection();if(A==null||A.rangeCount<=0)return null;var R=A.getRangeAt(0);if(R==null)return null;var O=this.normalizeNative(R);return j.info("getNativeRange",O),O}},{key:"getRange",value:function(){var A=this.getNativeRange();if(A==null)return[null,null];var R=this.normalizedToRange(A);return[R,A]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(A){var R=this,O=[[A.start.node,A.start.offset]];A.native.collapsed||O.push([A.end.node,A.end.offset]);var M=O.map(function(Y){var W=i(Y,2),K=W[0],F=W[1],H=u.default.find(K,!0),L=H.offset(R.scroll);return F===0?L:H instanceof u.default.Container?L+H.length():L+H.index(K,F)}),B=Math.min(Math.max.apply(Math,w(M)),this.scroll.length()-1),U=Math.min.apply(Math,[B].concat(w(M)));return new N(U,B-U)}},{key:"normalizeNative",value:function(A){if(!E(this.root,A.startContainer)||!A.collapsed&&!E(this.root,A.endContainer))return null;var R={start:{node:A.startContainer,offset:A.startOffset},end:{node:A.endContainer,offset:A.endOffset},native:A};return[R.start,R.end].forEach(function(O){for(var M=O.node,B=O.offset;!(M instanceof Text)&&M.childNodes.length>0;)if(M.childNodes.length>B)M=M.childNodes[B],B=0;else if(M.childNodes.length===B)M=M.lastChild,B=M instanceof Text?M.data.length:M.childNodes.length+1;else break;O.node=M,O.offset=B}),R}},{key:"rangeToNative",value:function(A){var R=this,O=A.collapsed?[A.index]:[A.index,A.index+A.length],M=[],B=this.scroll.length();return O.forEach(function(U,Y){U=Math.min(B-1,U);var W=void 0,K=R.scroll.leaf(U),F=i(K,2),H=F[0],L=F[1],q=H.position(L,Y!==0),z=i(q,2);W=z[0],L=z[1],M.push(W,L)}),M.length<2&&(M=M.concat(M)),M}},{key:"scrollIntoView",value:function(A){var R=this.lastRange;if(R!=null){var O=this.getBounds(R.index,R.length);if(O!=null){var M=this.scroll.length()-1,B=this.scroll.line(Math.min(R.index,M)),U=i(B,1),Y=U[0],W=Y;if(R.length>0){var K=this.scroll.line(Math.min(R.index+R.length,M)),F=i(K,1);W=F[0]}if(!(Y==null||W==null)){var H=A.getBoundingClientRect();O.top<H.top?A.scrollTop-=H.top-O.top:O.bottom>H.bottom&&(A.scrollTop+=O.bottom-H.bottom)}}}}},{key:"setNativeRange",value:function(A,R){var O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:A,M=arguments.length>3&&arguments[3]!==void 0?arguments[3]:R,B=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(j.info("setNativeRange",A,R,O,M),!(A!=null&&(this.root.parentNode==null||A.parentNode==null||O.parentNode==null))){var U=document.getSelection();if(U!=null)if(A!=null){this.hasFocus()||this.root.focus();var Y=(this.getNativeRange()||{}).native;if(Y==null||B||A!==Y.startContainer||R!==Y.startOffset||O!==Y.endContainer||M!==Y.endOffset){A.tagName=="BR"&&(R=[].indexOf.call(A.parentNode.childNodes,A),A=A.parentNode),O.tagName=="BR"&&(M=[].indexOf.call(O.parentNode.childNodes,O),O=O.parentNode);var W=document.createRange();W.setStart(A,R),W.setEnd(O,M),U.removeAllRanges(),U.addRange(W)}}else U.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(A){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:y.default.sources.API;if(typeof R=="string"&&(O=R,R=!1),j.info("setRange",A),A!=null){var M=this.rangeToNative(A);this.setNativeRange.apply(this,w(M).concat([R]))}else this.setNativeRange(null);this.update(O)}},{key:"update",value:function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:y.default.sources.USER,R=this.lastRange,O=this.getRange(),M=i(O,2),B=M[0],U=M[1];if(this.lastRange=B,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,m.default)(R,this.lastRange)){var Y;!this.composing&&U!=null&&U.native.collapsed&&U.start.node!==this.cursor.textNode&&this.cursor.restore();var W=[y.default.events.SELECTION_CHANGE,(0,p.default)(this.lastRange),(0,p.default)(R),A];if((Y=this.emitter).emit.apply(Y,[y.default.events.EDITOR_CHANGE].concat(W)),A!==y.default.sources.SILENT){var K;(K=this.emitter).emit.apply(K,W)}}}}]),T})();function E(T,I){try{I.parentNode}catch{return!1}return I instanceof Text&&(I=I.parentNode),T.contains(I)}s.Range=N,s.default=C}),(function(r,s,a){Object.defineProperty(s,"__esModule",{value:!0});var i=(function(){function y(g,b){for(var _=0;_<b.length;_++){var w=b[_];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(g,w.key,w)}}return function(g,b,_){return b&&y(g.prototype,b),_&&y(g,_),g}})(),o=function y(g,b,_){g===null&&(g=Function.prototype);var w=Object.getOwnPropertyDescriptor(g,b);if(w===void 0){var S=Object.getPrototypeOf(g);return S===null?void 0:y(S,b,_)}else{if("value"in w)return w.value;var j=w.get;return j===void 0?void 0:j.call(_)}},l=a(0),u=d(l);function d(y){return y&&y.__esModule?y:{default:y}}function p(y,g){if(!(y instanceof g))throw new TypeError("Cannot call a class as a function")}function f(y,g){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:y}function m(y,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);y.prototype=Object.create(g&&g.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(y,g):y.__proto__=g)}var x=(function(y){m(g,y);function g(){return p(this,g),f(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return i(g,[{key:"insertInto",value:function(_,w){_.children.length===0?o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"insertInto",this).call(this,_,w):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),g})(u.default.Embed);x.blotName="break",x.tagName="BR",s.default=x}),(function(r,s,a){var i=this&&this.__extends||(function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,x){m.__proto__=x}||function(m,x){for(var y in x)x.hasOwnProperty(y)&&(m[y]=x[y])};return function(m,x){f(m,x);function y(){this.constructor=m}m.prototype=x===null?Object.create(x):(y.prototype=x.prototype,new y)}})();Object.defineProperty(s,"__esModule",{value:!0});var o=a(44),l=a(30),u=a(1),d=(function(f){i(m,f);function m(x){var y=f.call(this,x)||this;return y.build(),y}return m.prototype.appendChild=function(x){this.insertBefore(x)},m.prototype.attach=function(){f.prototype.attach.call(this),this.children.forEach(function(x){x.attach()})},m.prototype.build=function(){var x=this;this.children=new o.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(y){try{var g=p(y);x.insertBefore(g,x.children.head||void 0)}catch(b){if(b instanceof u.ParchmentError)return;throw b}})},m.prototype.deleteAt=function(x,y){if(x===0&&y===this.length())return this.remove();this.children.forEachAt(x,y,function(g,b,_){g.deleteAt(b,_)})},m.prototype.descendant=function(x,y){var g=this.children.find(y),b=g[0],_=g[1];return x.blotName==null&&x(b)||x.blotName!=null&&b instanceof x?[b,_]:b instanceof m?b.descendant(x,_):[null,-1]},m.prototype.descendants=function(x,y,g){y===void 0&&(y=0),g===void 0&&(g=Number.MAX_VALUE);var b=[],_=g;return this.children.forEachAt(y,g,function(w,S,j){(x.blotName==null&&x(w)||x.blotName!=null&&w instanceof x)&&b.push(w),w instanceof m&&(b=b.concat(w.descendants(x,S,_))),_-=j}),b},m.prototype.detach=function(){this.children.forEach(function(x){x.detach()}),f.prototype.detach.call(this)},m.prototype.formatAt=function(x,y,g,b){this.children.forEachAt(x,y,function(_,w,S){_.formatAt(w,S,g,b)})},m.prototype.insertAt=function(x,y,g){var b=this.children.find(x),_=b[0],w=b[1];if(_)_.insertAt(w,y,g);else{var S=g==null?u.create("text",y):u.create(y,g);this.appendChild(S)}},m.prototype.insertBefore=function(x,y){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(g){return x instanceof g}))throw new u.ParchmentError("Cannot insert "+x.statics.blotName+" into "+this.statics.blotName);x.insertInto(this,y)},m.prototype.length=function(){return this.children.reduce(function(x,y){return x+y.length()},0)},m.prototype.moveChildren=function(x,y){this.children.forEach(function(g){x.insertBefore(g,y)})},m.prototype.optimize=function(x){if(f.prototype.optimize.call(this,x),this.children.length===0)if(this.statics.defaultChild!=null){var y=u.create(this.statics.defaultChild);this.appendChild(y),y.optimize(x)}else this.remove()},m.prototype.path=function(x,y){y===void 0&&(y=!1);var g=this.children.find(x,y),b=g[0],_=g[1],w=[[this,x]];return b instanceof m?w.concat(b.path(_,y)):(b!=null&&w.push([b,_]),w)},m.prototype.removeChild=function(x){this.children.remove(x)},m.prototype.replace=function(x){x instanceof m&&x.moveChildren(this),f.prototype.replace.call(this,x)},m.prototype.split=function(x,y){if(y===void 0&&(y=!1),!y){if(x===0)return this;if(x===this.length())return this.next}var g=this.clone();return this.parent.insertBefore(g,this.next),this.children.forEachAt(x,this.length(),function(b,_,w){b=b.split(_,y),g.appendChild(b)}),g},m.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},m.prototype.update=function(x,y){var g=this,b=[],_=[];x.forEach(function(w){w.target===g.domNode&&w.type==="childList"&&(b.push.apply(b,w.addedNodes),_.push.apply(_,w.removedNodes))}),_.forEach(function(w){if(!(w.parentNode!=null&&w.tagName!=="IFRAME"&&document.body.compareDocumentPosition(w)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var S=u.find(w);S!=null&&(S.domNode.parentNode==null||S.domNode.parentNode===g.domNode)&&S.detach()}}),b.filter(function(w){return w.parentNode==g.domNode}).sort(function(w,S){return w===S?0:w.compareDocumentPosition(S)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(w){var S=null;w.nextSibling!=null&&(S=u.find(w.nextSibling));var j=p(w);(j.next!=S||j.next==null)&&(j.parent!=null&&j.parent.removeChild(g),g.insertBefore(j,S||void 0))})},m})(l.default);function p(f){var m=u.find(f);if(m==null)try{m=u.create(f)}catch{m=u.create(u.Scope.INLINE),[].slice.call(f.childNodes).forEach(function(y){m.domNode.appendChild(y)}),f.parentNode&&f.parentNode.replaceChild(m.domNode,f),m.attach()}return m}s.default=d}),(function(r,s,a){var i=this&&this.__extends||(function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,x){m.__proto__=x}||function(m,x){for(var y in x)x.hasOwnProperty(y)&&(m[y]=x[y])};return function(m,x){f(m,x);function y(){this.constructor=m}m.prototype=x===null?Object.create(x):(y.prototype=x.prototype,new y)}})();Object.defineProperty(s,"__esModule",{value:!0});var o=a(12),l=a(31),u=a(17),d=a(1),p=(function(f){i(m,f);function m(x){var y=f.call(this,x)||this;return y.attributes=new l.default(y.domNode),y}return m.formats=function(x){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return x.tagName.toLowerCase()},m.prototype.format=function(x,y){var g=d.query(x);g instanceof o.default?this.attributes.attribute(g,y):y&&g!=null&&(x!==this.statics.blotName||this.formats()[x]!==y)&&this.replaceWith(x,y)},m.prototype.formats=function(){var x=this.attributes.values(),y=this.statics.formats(this.domNode);return y!=null&&(x[this.statics.blotName]=y),x},m.prototype.replaceWith=function(x,y){var g=f.prototype.replaceWith.call(this,x,y);return this.attributes.copy(g),g},m.prototype.update=function(x,y){var g=this;f.prototype.update.call(this,x,y),x.some(function(b){return b.target===g.domNode&&b.type==="attributes"})&&this.attributes.build()},m.prototype.wrap=function(x,y){var g=f.prototype.wrap.call(this,x,y);return g instanceof m&&g.statics.scope===this.statics.scope&&this.attributes.move(g),g},m})(u.default);s.default=p}),(function(r,s,a){var i=this&&this.__extends||(function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,f){p.__proto__=f}||function(p,f){for(var m in f)f.hasOwnProperty(m)&&(p[m]=f[m])};return function(p,f){d(p,f);function m(){this.constructor=p}p.prototype=f===null?Object.create(f):(m.prototype=f.prototype,new m)}})();Object.defineProperty(s,"__esModule",{value:!0});var o=a(30),l=a(1),u=(function(d){i(p,d);function p(){return d!==null&&d.apply(this,arguments)||this}return p.value=function(f){return!0},p.prototype.index=function(f,m){return this.domNode===f||this.domNode.compareDocumentPosition(f)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(m,1):-1},p.prototype.position=function(f,m){var x=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return f>0&&(x+=1),[this.parent.domNode,x]},p.prototype.value=function(){var f;return f={},f[this.statics.blotName]=this.statics.value(this.domNode)||!0,f},p.scope=l.Scope.INLINE_BLOT,p})(o.default);s.default=u}),(function(r,s,a){var i=a(11),o=a(3),l={attributes:{compose:function(d,p,f){typeof d!="object"&&(d={}),typeof p!="object"&&(p={});var m=o(!0,{},p);f||(m=Object.keys(m).reduce(function(y,g){return m[g]!=null&&(y[g]=m[g]),y},{}));for(var x in d)d[x]!==void 0&&p[x]===void 0&&(m[x]=d[x]);return Object.keys(m).length>0?m:void 0},diff:function(d,p){typeof d!="object"&&(d={}),typeof p!="object"&&(p={});var f=Object.keys(d).concat(Object.keys(p)).reduce(function(m,x){return i(d[x],p[x])||(m[x]=p[x]===void 0?null:p[x]),m},{});return Object.keys(f).length>0?f:void 0},transform:function(d,p,f){if(typeof d!="object")return p;if(typeof p=="object"){if(!f)return p;var m=Object.keys(p).reduce(function(x,y){return d[y]===void 0&&(x[y]=p[y]),x},{});return Object.keys(m).length>0?m:void 0}}},iterator:function(d){return new u(d)},length:function(d){return typeof d.delete=="number"?d.delete:typeof d.retain=="number"?d.retain:typeof d.insert=="string"?d.insert.length:1}};function u(d){this.ops=d,this.index=0,this.offset=0}u.prototype.hasNext=function(){return this.peekLength()<1/0},u.prototype.next=function(d){d||(d=1/0);var p=this.ops[this.index];if(p){var f=this.offset,m=l.length(p);if(d>=m-f?(d=m-f,this.index+=1,this.offset=0):this.offset+=d,typeof p.delete=="number")return{delete:d};var x={};return p.attributes&&(x.attributes=p.attributes),typeof p.retain=="number"?x.retain=d:typeof p.insert=="string"?x.insert=p.insert.substr(f,d):x.insert=p.insert,x}else return{retain:1/0}},u.prototype.peek=function(){return this.ops[this.index]},u.prototype.peekLength=function(){return this.ops[this.index]?l.length(this.ops[this.index])-this.offset:1/0},u.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},u.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var d=this.offset,p=this.index,f=this.next(),m=this.ops.slice(this.index);return this.offset=d,this.index=p,[f].concat(m)}else return[]},r.exports=l}),(function(r,s){var a=(function(){function i(g,b){return b!=null&&g instanceof b}var o;try{o=Map}catch{o=function(){}}var l;try{l=Set}catch{l=function(){}}var u;try{u=Promise}catch{u=function(){}}function d(g,b,_,w,S){typeof b=="object"&&(_=b.depth,w=b.prototype,S=b.includeNonEnumerable,b=b.circular);var j=[],N=[],C=typeof Buffer<"u";typeof b>"u"&&(b=!0),typeof _>"u"&&(_=1/0);function E(T,I){if(T===null)return null;if(I===0)return T;var A,R;if(typeof T!="object")return T;if(i(T,o))A=new o;else if(i(T,l))A=new l;else if(i(T,u))A=new u(function(H,L){T.then(function(q){H(E(q,I-1))},function(q){L(E(q,I-1))})});else if(d.__isArray(T))A=[];else if(d.__isRegExp(T))A=new RegExp(T.source,y(T)),T.lastIndex&&(A.lastIndex=T.lastIndex);else if(d.__isDate(T))A=new Date(T.getTime());else{if(C&&Buffer.isBuffer(T))return Buffer.allocUnsafe?A=Buffer.allocUnsafe(T.length):A=new Buffer(T.length),T.copy(A),A;i(T,Error)?A=Object.create(T):typeof w>"u"?(R=Object.getPrototypeOf(T),A=Object.create(R)):(A=Object.create(w),R=w)}if(b){var O=j.indexOf(T);if(O!=-1)return N[O];j.push(T),N.push(A)}i(T,o)&&T.forEach(function(H,L){var q=E(L,I-1),z=E(H,I-1);A.set(q,z)}),i(T,l)&&T.forEach(function(H){var L=E(H,I-1);A.add(L)});for(var M in T){var B;R&&(B=Object.getOwnPropertyDescriptor(R,M)),!(B&&B.set==null)&&(A[M]=E(T[M],I-1))}if(Object.getOwnPropertySymbols)for(var U=Object.getOwnPropertySymbols(T),M=0;M<U.length;M++){var Y=U[M],W=Object.getOwnPropertyDescriptor(T,Y);W&&!W.enumerable&&!S||(A[Y]=E(T[Y],I-1),W.enumerable||Object.defineProperty(A,Y,{enumerable:!1}))}if(S)for(var K=Object.getOwnPropertyNames(T),M=0;M<K.length;M++){var F=K[M],W=Object.getOwnPropertyDescriptor(T,F);W&&W.enumerable||(A[F]=E(T[F],I-1),Object.defineProperty(A,F,{enumerable:!1}))}return A}return E(g,_)}d.clonePrototype=function(b){if(b===null)return null;var _=function(){};return _.prototype=b,new _};function p(g){return Object.prototype.toString.call(g)}d.__objToStr=p;function f(g){return typeof g=="object"&&p(g)==="[object Date]"}d.__isDate=f;function m(g){return typeof g=="object"&&p(g)==="[object Array]"}d.__isArray=m;function x(g){return typeof g=="object"&&p(g)==="[object RegExp]"}d.__isRegExp=x;function y(g){var b="";return g.global&&(b+="g"),g.ignoreCase&&(b+="i"),g.multiline&&(b+="m"),b}return d.__getRegExpFlags=y,d})();typeof r=="object"&&r.exports&&(r.exports=a)}),(function(r,s,a){Object.defineProperty(s,"__esModule",{value:!0});var i=(function(){function A(R,O){var M=[],B=!0,U=!1,Y=void 0;try{for(var W=R[Symbol.iterator](),K;!(B=(K=W.next()).done)&&(M.push(K.value),!(O&&M.length===O));B=!0);}catch(F){U=!0,Y=F}finally{try{!B&&W.return&&W.return()}finally{if(U)throw Y}}return M}return function(R,O){if(Array.isArray(R))return R;if(Symbol.iterator in Object(R))return A(R,O);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=(function(){function A(R,O){for(var M=0;M<O.length;M++){var B=O[M];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(R,B.key,B)}}return function(R,O,M){return O&&A(R.prototype,O),M&&A(R,M),R}})(),l=function A(R,O,M){R===null&&(R=Function.prototype);var B=Object.getOwnPropertyDescriptor(R,O);if(B===void 0){var U=Object.getPrototypeOf(R);return U===null?void 0:A(U,O,M)}else{if("value"in B)return B.value;var Y=B.get;return Y===void 0?void 0:Y.call(M)}},u=a(0),d=j(u),p=a(8),f=j(p),m=a(4),x=j(m),y=a(16),g=j(y),b=a(13),_=j(b),w=a(25),S=j(w);function j(A){return A&&A.__esModule?A:{default:A}}function N(A,R){if(!(A instanceof R))throw new TypeError("Cannot call a class as a function")}function C(A,R){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R&&(typeof R=="object"||typeof R=="function")?R:A}function E(A,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof R);A.prototype=Object.create(R&&R.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),R&&(Object.setPrototypeOf?Object.setPrototypeOf(A,R):A.__proto__=R)}function T(A){return A instanceof x.default||A instanceof m.BlockEmbed}var I=(function(A){E(R,A);function R(O,M){N(this,R);var B=C(this,(R.__proto__||Object.getPrototypeOf(R)).call(this,O));return B.emitter=M.emitter,Array.isArray(M.whitelist)&&(B.whitelist=M.whitelist.reduce(function(U,Y){return U[Y]=!0,U},{})),B.domNode.addEventListener("DOMNodeInserted",function(){}),B.optimize(),B.enable(),B}return o(R,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(M,B){var U=this.line(M),Y=i(U,2),W=Y[0],K=Y[1],F=this.line(M+B),H=i(F,1),L=H[0];if(l(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"deleteAt",this).call(this,M,B),L!=null&&W!==L&&K>0){if(W instanceof m.BlockEmbed||L instanceof m.BlockEmbed){this.optimize();return}if(W instanceof _.default){var q=W.newlineIndex(W.length(),!0);if(q>-1&&(W=W.split(q+1),W===L)){this.optimize();return}}else if(L instanceof _.default){var z=L.newlineIndex(0);z>-1&&L.split(z+1)}var Q=L.children.head instanceof g.default?null:L.children.head;W.moveChildren(L,Q),W.remove()}this.optimize()}},{key:"enable",value:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",M)}},{key:"formatAt",value:function(M,B,U,Y){this.whitelist!=null&&!this.whitelist[U]||(l(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"formatAt",this).call(this,M,B,U,Y),this.optimize())}},{key:"insertAt",value:function(M,B,U){if(!(U!=null&&this.whitelist!=null&&!this.whitelist[B])){if(M>=this.length())if(U==null||d.default.query(B,d.default.Scope.BLOCK)==null){var Y=d.default.create(this.statics.defaultChild);this.appendChild(Y),U==null&&B.endsWith(`
`)&&(B=B.slice(0,-1)),Y.insertAt(0,B,U)}else{var W=d.default.create(B,U);this.appendChild(W)}else l(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"insertAt",this).call(this,M,B,U);this.optimize()}}},{key:"insertBefore",value:function(M,B){if(M.statics.scope===d.default.Scope.INLINE_BLOT){var U=d.default.create(this.statics.defaultChild);U.appendChild(M),M=U}l(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"insertBefore",this).call(this,M,B)}},{key:"leaf",value:function(M){return this.path(M).pop()||[null,-1]}},{key:"line",value:function(M){return M===this.length()?this.line(M-1):this.descendant(T,M)}},{key:"lines",value:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,U=function Y(W,K,F){var H=[],L=F;return W.children.forEachAt(K,F,function(q,z,Q){T(q)?H.push(q):q instanceof d.default.Container&&(H=H.concat(Y(q,z,L))),L-=Q}),H};return U(this,M,B)}},{key:"optimize",value:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(l(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"optimize",this).call(this,M,B),M.length>0&&this.emitter.emit(f.default.events.SCROLL_OPTIMIZE,M,B))}},{key:"path",value:function(M){return l(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"path",this).call(this,M).slice(1)}},{key:"update",value:function(M){if(this.batch!==!0){var B=f.default.sources.USER;typeof M=="string"&&(B=M),Array.isArray(M)||(M=this.observer.takeRecords()),M.length>0&&this.emitter.emit(f.default.events.SCROLL_BEFORE_UPDATE,B,M),l(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"update",this).call(this,M.concat([])),M.length>0&&this.emitter.emit(f.default.events.SCROLL_UPDATE,B,M)}}}]),R})(d.default.Scroll);I.blotName="scroll",I.className="ql-editor",I.tagName="DIV",I.defaultChild="block",I.allowedChildren=[x.default,m.BlockEmbed,S.default],s.default=I}),(function(r,s,a){Object.defineProperty(s,"__esModule",{value:!0}),s.SHORTKEY=s.default=void 0;var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(V){return typeof V}:function(V){return V&&typeof Symbol=="function"&&V.constructor===Symbol&&V!==Symbol.prototype?"symbol":typeof V},o=(function(){function V(ee,te){var oe=[],he=!0,Ce=!1,Fe=void 0;try{for(var Ae=ee[Symbol.iterator](),Ne;!(he=(Ne=Ae.next()).done)&&(oe.push(Ne.value),!(te&&oe.length===te));he=!0);}catch(Be){Ce=!0,Fe=Be}finally{try{!he&&Ae.return&&Ae.return()}finally{if(Ce)throw Fe}}return oe}return function(ee,te){if(Array.isArray(ee))return ee;if(Symbol.iterator in Object(ee))return V(ee,te);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),l=(function(){function V(ee,te){for(var oe=0;oe<te.length;oe++){var he=te[oe];he.enumerable=he.enumerable||!1,he.configurable=!0,"value"in he&&(he.writable=!0),Object.defineProperty(ee,he.key,he)}}return function(ee,te,oe){return te&&V(ee.prototype,te),oe&&V(ee,oe),ee}})(),u=a(21),d=A(u),p=a(11),f=A(p),m=a(3),x=A(m),y=a(2),g=A(y),b=a(20),_=A(b),w=a(0),S=A(w),j=a(5),N=A(j),C=a(10),E=A(C),T=a(9),I=A(T);function A(V){return V&&V.__esModule?V:{default:V}}function R(V,ee,te){return ee in V?Object.defineProperty(V,ee,{value:te,enumerable:!0,configurable:!0,writable:!0}):V[ee]=te,V}function O(V,ee){if(!(V instanceof ee))throw new TypeError("Cannot call a class as a function")}function M(V,ee){if(!V)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ee&&(typeof ee=="object"||typeof ee=="function")?ee:V}function B(V,ee){if(typeof ee!="function"&&ee!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ee);V.prototype=Object.create(ee&&ee.prototype,{constructor:{value:V,enumerable:!1,writable:!0,configurable:!0}}),ee&&(Object.setPrototypeOf?Object.setPrototypeOf(V,ee):V.__proto__=ee)}var U=(0,E.default)("quill:keyboard"),Y=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",W=(function(V){B(ee,V),l(ee,null,[{key:"match",value:function(oe,he){return he=J(he),["altKey","ctrlKey","metaKey","shiftKey"].some(function(Ce){return!!he[Ce]!==oe[Ce]&&he[Ce]!==null})?!1:he.key===(oe.which||oe.keyCode)}}]);function ee(te,oe){O(this,ee);var he=M(this,(ee.__proto__||Object.getPrototypeOf(ee)).call(this,te,oe));return he.bindings={},Object.keys(he.options.bindings).forEach(function(Ce){Ce==="list autofill"&&te.scroll.whitelist!=null&&!te.scroll.whitelist.list||he.options.bindings[Ce]&&he.addBinding(he.options.bindings[Ce])}),he.addBinding({key:ee.keys.ENTER,shiftKey:null},q),he.addBinding({key:ee.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(he.addBinding({key:ee.keys.BACKSPACE},{collapsed:!0},F),he.addBinding({key:ee.keys.DELETE},{collapsed:!0},H)):(he.addBinding({key:ee.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},F),he.addBinding({key:ee.keys.DELETE},{collapsed:!0,suffix:/^.?$/},H)),he.addBinding({key:ee.keys.BACKSPACE},{collapsed:!1},L),he.addBinding({key:ee.keys.DELETE},{collapsed:!1},L),he.addBinding({key:ee.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},F),he.listen(),he}return l(ee,[{key:"addBinding",value:function(oe){var he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ce=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Fe=J(oe);if(Fe==null||Fe.key==null)return U.warn("Attempted to add invalid keyboard binding",Fe);typeof he=="function"&&(he={handler:he}),typeof Ce=="function"&&(Ce={handler:Ce}),Fe=(0,x.default)(Fe,he,Ce),this.bindings[Fe.key]=this.bindings[Fe.key]||[],this.bindings[Fe.key].push(Fe)}},{key:"listen",value:function(){var oe=this;this.quill.root.addEventListener("keydown",function(he){if(!he.defaultPrevented){var Ce=he.which||he.keyCode,Fe=(oe.bindings[Ce]||[]).filter(function(zt){return ee.match(he,zt)});if(Fe.length!==0){var Ae=oe.quill.getSelection();if(!(Ae==null||!oe.quill.hasFocus())){var Ne=oe.quill.getLine(Ae.index),Be=o(Ne,2),St=Be[0],ut=Be[1],fe=oe.quill.getLeaf(Ae.index),xe=o(fe,2),ye=xe[0],Se=xe[1],pe=Ae.length===0?[ye,Se]:oe.quill.getLeaf(Ae.index+Ae.length),Ge=o(pe,2),Qe=Ge[0],Me=Ge[1],Cn=ye instanceof S.default.Text?ye.value().slice(0,Se):"",Or=Qe instanceof S.default.Text?Qe.value().slice(Me):"",Dt={collapsed:Ae.length===0,empty:Ae.length===0&&St.length()<=1,format:oe.quill.getFormat(Ae),offset:ut,prefix:Cn,suffix:Or},mh=Fe.some(function(zt){if(zt.collapsed!=null&&zt.collapsed!==Dt.collapsed||zt.empty!=null&&zt.empty!==Dt.empty||zt.offset!=null&&zt.offset!==Dt.offset)return!1;if(Array.isArray(zt.format)){if(zt.format.every(function(pr){return Dt.format[pr]==null}))return!1}else if(i(zt.format)==="object"&&!Object.keys(zt.format).every(function(pr){return zt.format[pr]===!0?Dt.format[pr]!=null:zt.format[pr]===!1?Dt.format[pr]==null:(0,f.default)(zt.format[pr],Dt.format[pr])}))return!1;return zt.prefix!=null&&!zt.prefix.test(Dt.prefix)||zt.suffix!=null&&!zt.suffix.test(Dt.suffix)?!1:zt.handler.call(oe,Ae,Dt)!==!0});mh&&he.preventDefault()}}}})}}]),ee})(I.default);W.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},W.DEFAULTS={bindings:{bold:Q("bold"),italic:Q("italic"),underline:Q("underline"),indent:{key:W.keys.TAB,format:["blockquote","indent","list"],handler:function(ee,te){if(te.collapsed&&te.offset!==0)return!0;this.quill.format("indent","+1",N.default.sources.USER)}},outdent:{key:W.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(ee,te){if(te.collapsed&&te.offset!==0)return!0;this.quill.format("indent","-1",N.default.sources.USER)}},"outdent backspace":{key:W.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(ee,te){te.format.indent!=null?this.quill.format("indent","-1",N.default.sources.USER):te.format.list!=null&&this.quill.format("list",!1,N.default.sources.USER)}},"indent code-block":z(!0),"outdent code-block":z(!1),"remove tab":{key:W.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(ee){this.quill.deleteText(ee.index-1,1,N.default.sources.USER)}},tab:{key:W.keys.TAB,handler:function(ee){this.quill.history.cutoff();var te=new g.default().retain(ee.index).delete(ee.length).insert("	");this.quill.updateContents(te,N.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(ee.index+1,N.default.sources.SILENT)}},"list empty enter":{key:W.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(ee,te){this.quill.format("list",!1,N.default.sources.USER),te.format.indent&&this.quill.format("indent",!1,N.default.sources.USER)}},"checklist enter":{key:W.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(ee){var te=this.quill.getLine(ee.index),oe=o(te,2),he=oe[0],Ce=oe[1],Fe=(0,x.default)({},he.formats(),{list:"checked"}),Ae=new g.default().retain(ee.index).insert(`
`,Fe).retain(he.length()-Ce-1).retain(1,{list:"unchecked"});this.quill.updateContents(Ae,N.default.sources.USER),this.quill.setSelection(ee.index+1,N.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:W.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(ee,te){var oe=this.quill.getLine(ee.index),he=o(oe,2),Ce=he[0],Fe=he[1],Ae=new g.default().retain(ee.index).insert(`
`,te.format).retain(Ce.length()-Fe-1).retain(1,{header:null});this.quill.updateContents(Ae,N.default.sources.USER),this.quill.setSelection(ee.index+1,N.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(ee,te){var oe=te.prefix.length,he=this.quill.getLine(ee.index),Ce=o(he,2),Fe=Ce[0],Ae=Ce[1];if(Ae>oe)return!0;var Ne=void 0;switch(te.prefix.trim()){case"[]":case"[ ]":Ne="unchecked";break;case"[x]":Ne="checked";break;case"-":case"*":Ne="bullet";break;default:Ne="ordered"}this.quill.insertText(ee.index," ",N.default.sources.USER),this.quill.history.cutoff();var Be=new g.default().retain(ee.index-Ae).delete(oe+1).retain(Fe.length()-2-Ae).retain(1,{list:Ne});this.quill.updateContents(Be,N.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(ee.index-oe,N.default.sources.SILENT)}},"code exit":{key:W.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(ee){var te=this.quill.getLine(ee.index),oe=o(te,2),he=oe[0],Ce=oe[1],Fe=new g.default().retain(ee.index+he.length()-Ce-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(Fe,N.default.sources.USER)}},"embed left":K(W.keys.LEFT,!1),"embed left shift":K(W.keys.LEFT,!0),"embed right":K(W.keys.RIGHT,!1),"embed right shift":K(W.keys.RIGHT,!0)}};function K(V,ee){var te,oe=V===W.keys.LEFT?"prefix":"suffix";return te={key:V,shiftKey:ee,altKey:null},R(te,oe,/^$/),R(te,"handler",function(Ce){var Fe=Ce.index;V===W.keys.RIGHT&&(Fe+=Ce.length+1);var Ae=this.quill.getLeaf(Fe),Ne=o(Ae,1),Be=Ne[0];return Be instanceof S.default.Embed?(V===W.keys.LEFT?ee?this.quill.setSelection(Ce.index-1,Ce.length+1,N.default.sources.USER):this.quill.setSelection(Ce.index-1,N.default.sources.USER):ee?this.quill.setSelection(Ce.index,Ce.length+1,N.default.sources.USER):this.quill.setSelection(Ce.index+Ce.length+1,N.default.sources.USER),!1):!0}),te}function F(V,ee){if(!(V.index===0||this.quill.getLength()<=1)){var te=this.quill.getLine(V.index),oe=o(te,1),he=oe[0],Ce={};if(ee.offset===0){var Fe=this.quill.getLine(V.index-1),Ae=o(Fe,1),Ne=Ae[0];if(Ne!=null&&Ne.length()>1){var Be=he.formats(),St=this.quill.getFormat(V.index-1,1);Ce=_.default.attributes.diff(Be,St)||{}}}var ut=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(ee.prefix)?2:1;this.quill.deleteText(V.index-ut,ut,N.default.sources.USER),Object.keys(Ce).length>0&&this.quill.formatLine(V.index-ut,ut,Ce,N.default.sources.USER),this.quill.focus()}}function H(V,ee){var te=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(ee.suffix)?2:1;if(!(V.index>=this.quill.getLength()-te)){var oe={},he=0,Ce=this.quill.getLine(V.index),Fe=o(Ce,1),Ae=Fe[0];if(ee.offset>=Ae.length()-1){var Ne=this.quill.getLine(V.index+1),Be=o(Ne,1),St=Be[0];if(St){var ut=Ae.formats(),fe=this.quill.getFormat(V.index,1);oe=_.default.attributes.diff(ut,fe)||{},he=St.length()}}this.quill.deleteText(V.index,te,N.default.sources.USER),Object.keys(oe).length>0&&this.quill.formatLine(V.index+he-1,te,oe,N.default.sources.USER)}}function L(V){var ee=this.quill.getLines(V),te={};if(ee.length>1){var oe=ee[0].formats(),he=ee[ee.length-1].formats();te=_.default.attributes.diff(he,oe)||{}}this.quill.deleteText(V,N.default.sources.USER),Object.keys(te).length>0&&this.quill.formatLine(V.index,1,te,N.default.sources.USER),this.quill.setSelection(V.index,N.default.sources.SILENT),this.quill.focus()}function q(V,ee){var te=this;V.length>0&&this.quill.scroll.deleteAt(V.index,V.length);var oe=Object.keys(ee.format).reduce(function(he,Ce){return S.default.query(Ce,S.default.Scope.BLOCK)&&!Array.isArray(ee.format[Ce])&&(he[Ce]=ee.format[Ce]),he},{});this.quill.insertText(V.index,`
`,oe,N.default.sources.USER),this.quill.setSelection(V.index+1,N.default.sources.SILENT),this.quill.focus(),Object.keys(ee.format).forEach(function(he){oe[he]==null&&(Array.isArray(ee.format[he])||he!=="link"&&te.quill.format(he,ee.format[he],N.default.sources.USER))})}function z(V){return{key:W.keys.TAB,shiftKey:!V,format:{"code-block":!0},handler:function(te){var oe=S.default.query("code-block"),he=te.index,Ce=te.length,Fe=this.quill.scroll.descendant(oe,he),Ae=o(Fe,2),Ne=Ae[0],Be=Ae[1];if(Ne!=null){var St=this.quill.getIndex(Ne),ut=Ne.newlineIndex(Be,!0)+1,fe=Ne.newlineIndex(St+Be+Ce),xe=Ne.domNode.textContent.slice(ut,fe).split(`
`);Be=0,xe.forEach(function(ye,Se){V?(Ne.insertAt(ut+Be,oe.TAB),Be+=oe.TAB.length,Se===0?he+=oe.TAB.length:Ce+=oe.TAB.length):ye.startsWith(oe.TAB)&&(Ne.deleteAt(ut+Be,oe.TAB.length),Be-=oe.TAB.length,Se===0?he-=oe.TAB.length:Ce-=oe.TAB.length),Be+=ye.length+1}),this.quill.update(N.default.sources.USER),this.quill.setSelection(he,Ce,N.default.sources.SILENT)}}}}function Q(V){return{key:V[0].toUpperCase(),shortKey:!0,handler:function(te,oe){this.quill.format(V,!oe.format[V],N.default.sources.USER)}}}function J(V){if(typeof V=="string"||typeof V=="number")return J({key:V});if((typeof V>"u"?"undefined":i(V))==="object"&&(V=(0,d.default)(V,!1)),typeof V.key=="string")if(W.keys[V.key.toUpperCase()]!=null)V.key=W.keys[V.key.toUpperCase()];else if(V.key.length===1)V.key=V.key.toUpperCase().charCodeAt(0);else return null;return V.shortKey&&(V[Y]=V.shortKey,delete V.shortKey),V}s.default=W,s.SHORTKEY=Y}),(function(r,s,a){Object.defineProperty(s,"__esModule",{value:!0});var i=(function(){function _(w,S){var j=[],N=!0,C=!1,E=void 0;try{for(var T=w[Symbol.iterator](),I;!(N=(I=T.next()).done)&&(j.push(I.value),!(S&&j.length===S));N=!0);}catch(A){C=!0,E=A}finally{try{!N&&T.return&&T.return()}finally{if(C)throw E}}return j}return function(w,S){if(Array.isArray(w))return w;if(Symbol.iterator in Object(w))return _(w,S);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=function _(w,S,j){w===null&&(w=Function.prototype);var N=Object.getOwnPropertyDescriptor(w,S);if(N===void 0){var C=Object.getPrototypeOf(w);return C===null?void 0:_(C,S,j)}else{if("value"in N)return N.value;var E=N.get;return E===void 0?void 0:E.call(j)}},l=(function(){function _(w,S){for(var j=0;j<S.length;j++){var N=S[j];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(w,N.key,N)}}return function(w,S,j){return S&&_(w.prototype,S),j&&_(w,j),w}})(),u=a(0),d=m(u),p=a(7),f=m(p);function m(_){return _&&_.__esModule?_:{default:_}}function x(_,w){if(!(_ instanceof w))throw new TypeError("Cannot call a class as a function")}function y(_,w){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:_}function g(_,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);_.prototype=Object.create(w&&w.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(_,w):_.__proto__=w)}var b=(function(_){g(w,_),l(w,null,[{key:"value",value:function(){}}]);function w(S,j){x(this,w);var N=y(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,S));return N.selection=j,N.textNode=document.createTextNode(w.CONTENTS),N.domNode.appendChild(N.textNode),N._length=0,N}return l(w,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(j,N){if(this._length!==0)return o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"format",this).call(this,j,N);for(var C=this,E=0;C!=null&&C.statics.scope!==d.default.Scope.BLOCK_BLOT;)E+=C.offset(C.parent),C=C.parent;C!=null&&(this._length=w.CONTENTS.length,C.optimize(),C.formatAt(E,w.CONTENTS.length,j,N),this._length=0)}},{key:"index",value:function(j,N){return j===this.textNode?0:o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"index",this).call(this,j,N)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var j=this.textNode,N=this.selection.getNativeRange(),C=void 0,E=void 0,T=void 0;if(N!=null&&N.start.node===j&&N.end.node===j){var I=[j,N.start.offset,N.end.offset];C=I[0],E=I[1],T=I[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==w.CONTENTS){var A=this.textNode.data.split(w.CONTENTS).join("");this.next instanceof f.default?(C=this.next.domNode,this.next.insertAt(0,A),this.textNode.data=w.CONTENTS):(this.textNode.data=A,this.parent.insertBefore(d.default.create(this.textNode),this),this.textNode=document.createTextNode(w.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),E!=null){var R=[E,T].map(function(M){return Math.max(0,Math.min(C.data.length,M-1))}),O=i(R,2);return E=O[0],T=O[1],{startNode:C,startOffset:E,endNode:C,endOffset:T}}}}},{key:"update",value:function(j,N){var C=this;if(j.some(function(T){return T.type==="characterData"&&T.target===C.textNode})){var E=this.restore();E&&(N.range=E)}}},{key:"value",value:function(){return""}}]),w})(d.default.Embed);b.blotName="cursor",b.className="ql-cursor",b.tagName="span",b.CONTENTS="\uFEFF",s.default=b}),(function(r,s,a){Object.defineProperty(s,"__esModule",{value:!0});var i=a(0),o=d(i),l=a(4),u=d(l);function d(y){return y&&y.__esModule?y:{default:y}}function p(y,g){if(!(y instanceof g))throw new TypeError("Cannot call a class as a function")}function f(y,g){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:y}function m(y,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);y.prototype=Object.create(g&&g.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(y,g):y.__proto__=g)}var x=(function(y){m(g,y);function g(){return p(this,g),f(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return g})(o.default.Container);x.allowedChildren=[u.default,l.BlockEmbed,x],s.default=x}),(function(r,s,a){Object.defineProperty(s,"__esModule",{value:!0}),s.ColorStyle=s.ColorClass=s.ColorAttributor=void 0;var i=(function(){function b(_,w){for(var S=0;S<w.length;S++){var j=w[S];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(_,j.key,j)}}return function(_,w,S){return w&&b(_.prototype,w),S&&b(_,S),_}})(),o=function b(_,w,S){_===null&&(_=Function.prototype);var j=Object.getOwnPropertyDescriptor(_,w);if(j===void 0){var N=Object.getPrototypeOf(_);return N===null?void 0:b(N,w,S)}else{if("value"in j)return j.value;var C=j.get;return C===void 0?void 0:C.call(S)}},l=a(0),u=d(l);function d(b){return b&&b.__esModule?b:{default:b}}function p(b,_){if(!(b instanceof _))throw new TypeError("Cannot call a class as a function")}function f(b,_){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:b}function m(b,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);b.prototype=Object.create(_&&_.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(b,_):b.__proto__=_)}var x=(function(b){m(_,b);function _(){return p(this,_),f(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return i(_,[{key:"value",value:function(S){var j=o(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"value",this).call(this,S);return j.startsWith("rgb(")?(j=j.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+j.split(",").map(function(N){return("00"+parseInt(N).toString(16)).slice(-2)}).join("")):j}}]),_})(u.default.Attributor.Style),y=new u.default.Attributor.Class("color","ql-color",{scope:u.default.Scope.INLINE}),g=new x("color","color",{scope:u.default.Scope.INLINE});s.ColorAttributor=x,s.ColorClass=y,s.ColorStyle=g}),(function(r,s,a){Object.defineProperty(s,"__esModule",{value:!0}),s.sanitize=s.default=void 0;var i=(function(){function g(b,_){for(var w=0;w<_.length;w++){var S=_[w];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(b,S.key,S)}}return function(b,_,w){return _&&g(b.prototype,_),w&&g(b,w),b}})(),o=function g(b,_,w){b===null&&(b=Function.prototype);var S=Object.getOwnPropertyDescriptor(b,_);if(S===void 0){var j=Object.getPrototypeOf(b);return j===null?void 0:g(j,_,w)}else{if("value"in S)return S.value;var N=S.get;return N===void 0?void 0:N.call(w)}},l=a(6),u=d(l);function d(g){return g&&g.__esModule?g:{default:g}}function p(g,b){if(!(g instanceof b))throw new TypeError("Cannot call a class as a function")}function f(g,b){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:g}function m(g,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);g.prototype=Object.create(b&&b.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(g,b):g.__proto__=b)}var x=(function(g){m(b,g);function b(){return p(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return i(b,[{key:"format",value:function(w,S){if(w!==this.statics.blotName||!S)return o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"format",this).call(this,w,S);S=this.constructor.sanitize(S),this.domNode.setAttribute("href",S)}}],[{key:"create",value:function(w){var S=o(b.__proto__||Object.getPrototypeOf(b),"create",this).call(this,w);return w=this.sanitize(w),S.setAttribute("href",w),S.setAttribute("rel","noopener noreferrer"),S.setAttribute("target","_blank"),S}},{key:"formats",value:function(w){return w.getAttribute("href")}},{key:"sanitize",value:function(w){return y(w,this.PROTOCOL_WHITELIST)?w:this.SANITIZED_URL}}]),b})(u.default);x.blotName="link",x.tagName="A",x.SANITIZED_URL="about:blank",x.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function y(g,b){var _=document.createElement("a");_.href=g;var w=_.href.slice(0,_.href.indexOf(":"));return b.indexOf(w)>-1}s.default=x,s.sanitize=y}),(function(r,s,a){Object.defineProperty(s,"__esModule",{value:!0});var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},o=(function(){function b(_,w){for(var S=0;S<w.length;S++){var j=w[S];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(_,j.key,j)}}return function(_,w,S){return w&&b(_.prototype,w),S&&b(_,S),_}})(),l=a(23),u=f(l),d=a(107),p=f(d);function f(b){return b&&b.__esModule?b:{default:b}}function m(b,_){if(!(b instanceof _))throw new TypeError("Cannot call a class as a function")}var x=0;function y(b,_){b.setAttribute(_,b.getAttribute(_)!=="true")}var g=(function(){function b(_){var w=this;m(this,b),this.select=_,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){w.togglePicker()}),this.label.addEventListener("keydown",function(S){switch(S.keyCode){case u.default.keys.ENTER:w.togglePicker();break;case u.default.keys.ESCAPE:w.escape(),S.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return o(b,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),y(this.label,"aria-expanded"),y(this.options,"aria-hidden")}},{key:"buildItem",value:function(w){var S=this,j=document.createElement("span");return j.tabIndex="0",j.setAttribute("role","button"),j.classList.add("ql-picker-item"),w.hasAttribute("value")&&j.setAttribute("data-value",w.getAttribute("value")),w.textContent&&j.setAttribute("data-label",w.textContent),j.addEventListener("click",function(){S.selectItem(j,!0)}),j.addEventListener("keydown",function(N){switch(N.keyCode){case u.default.keys.ENTER:S.selectItem(j,!0),N.preventDefault();break;case u.default.keys.ESCAPE:S.escape(),N.preventDefault();break}}),j}},{key:"buildLabel",value:function(){var w=document.createElement("span");return w.classList.add("ql-picker-label"),w.innerHTML=p.default,w.tabIndex="0",w.setAttribute("role","button"),w.setAttribute("aria-expanded","false"),this.container.appendChild(w),w}},{key:"buildOptions",value:function(){var w=this,S=document.createElement("span");S.classList.add("ql-picker-options"),S.setAttribute("aria-hidden","true"),S.tabIndex="-1",S.id="ql-picker-options-"+x,x+=1,this.label.setAttribute("aria-controls",S.id),this.options=S,[].slice.call(this.select.options).forEach(function(j){var N=w.buildItem(j);S.appendChild(N),j.selected===!0&&w.selectItem(N)}),this.container.appendChild(S)}},{key:"buildPicker",value:function(){var w=this;[].slice.call(this.select.attributes).forEach(function(S){w.container.setAttribute(S.name,S.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var w=this;this.close(),setTimeout(function(){return w.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(w){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,j=this.container.querySelector(".ql-selected");if(w!==j&&(j!=null&&j.classList.remove("ql-selected"),w!=null&&(w.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(w.parentNode.children,w),w.hasAttribute("data-value")?this.label.setAttribute("data-value",w.getAttribute("data-value")):this.label.removeAttribute("data-value"),w.hasAttribute("data-label")?this.label.setAttribute("data-label",w.getAttribute("data-label")):this.label.removeAttribute("data-label"),S))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":i(Event))==="object"){var N=document.createEvent("Event");N.initEvent("change",!0,!0),this.select.dispatchEvent(N)}this.close()}}},{key:"update",value:function(){var w=void 0;if(this.select.selectedIndex>-1){var S=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];w=this.select.options[this.select.selectedIndex],this.selectItem(S)}else this.selectItem(null);var j=w!=null&&w!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",j)}}]),b})();s.default=g}),(function(r,s,a){Object.defineProperty(s,"__esModule",{value:!0});var i=a(0),o=U(i),l=a(5),u=U(l),d=a(4),p=U(d),f=a(16),m=U(f),x=a(25),y=U(x),g=a(24),b=U(g),_=a(35),w=U(_),S=a(6),j=U(S),N=a(22),C=U(N),E=a(7),T=U(E),I=a(55),A=U(I),R=a(42),O=U(R),M=a(23),B=U(M);function U(Y){return Y&&Y.__esModule?Y:{default:Y}}u.default.register({"blots/block":p.default,"blots/block/embed":d.BlockEmbed,"blots/break":m.default,"blots/container":y.default,"blots/cursor":b.default,"blots/embed":w.default,"blots/inline":j.default,"blots/scroll":C.default,"blots/text":T.default,"modules/clipboard":A.default,"modules/history":O.default,"modules/keyboard":B.default}),o.default.register(p.default,m.default,b.default,j.default,C.default,T.default),s.default=u.default}),(function(r,s,a){Object.defineProperty(s,"__esModule",{value:!0});var i=a(1),o=(function(){function l(u){this.domNode=u,this.domNode[i.DATA_KEY]={blot:this}}return Object.defineProperty(l.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),l.create=function(u){if(this.tagName==null)throw new i.ParchmentError("Blot definition missing tagName");var d;return Array.isArray(this.tagName)?(typeof u=="string"&&(u=u.toUpperCase(),parseInt(u).toString()===u&&(u=parseInt(u))),typeof u=="number"?d=document.createElement(this.tagName[u-1]):this.tagName.indexOf(u)>-1?d=document.createElement(u):d=document.createElement(this.tagName[0])):d=document.createElement(this.tagName),this.className&&d.classList.add(this.className),d},l.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},l.prototype.clone=function(){var u=this.domNode.cloneNode(!1);return i.create(u)},l.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[i.DATA_KEY]},l.prototype.deleteAt=function(u,d){var p=this.isolate(u,d);p.remove()},l.prototype.formatAt=function(u,d,p,f){var m=this.isolate(u,d);if(i.query(p,i.Scope.BLOT)!=null&&f)m.wrap(p,f);else if(i.query(p,i.Scope.ATTRIBUTE)!=null){var x=i.create(this.statics.scope);m.wrap(x),x.format(p,f)}},l.prototype.insertAt=function(u,d,p){var f=p==null?i.create("text",d):i.create(d,p),m=this.split(u);this.parent.insertBefore(f,m)},l.prototype.insertInto=function(u,d){d===void 0&&(d=null),this.parent!=null&&this.parent.children.remove(this);var p=null;u.children.insertBefore(this,d),d!=null&&(p=d.domNode),(this.domNode.parentNode!=u.domNode||this.domNode.nextSibling!=p)&&u.domNode.insertBefore(this.domNode,p),this.parent=u,this.attach()},l.prototype.isolate=function(u,d){var p=this.split(u);return p.split(d),p},l.prototype.length=function(){return 1},l.prototype.offset=function(u){return u===void 0&&(u=this.parent),this.parent==null||this==u?0:this.parent.children.offset(this)+this.parent.offset(u)},l.prototype.optimize=function(u){this.domNode[i.DATA_KEY]!=null&&delete this.domNode[i.DATA_KEY].mutations},l.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},l.prototype.replace=function(u){u.parent!=null&&(u.parent.insertBefore(this,u.next),u.remove())},l.prototype.replaceWith=function(u,d){var p=typeof u=="string"?i.create(u,d):u;return p.replace(this),p},l.prototype.split=function(u,d){return u===0?this:this.next},l.prototype.update=function(u,d){},l.prototype.wrap=function(u,d){var p=typeof u=="string"?i.create(u,d):u;return this.parent!=null&&this.parent.insertBefore(p,this.next),p.appendChild(this),p},l.blotName="abstract",l})();s.default=o}),(function(r,s,a){Object.defineProperty(s,"__esModule",{value:!0});var i=a(12),o=a(32),l=a(33),u=a(1),d=(function(){function p(f){this.attributes={},this.domNode=f,this.build()}return p.prototype.attribute=function(f,m){m?f.add(this.domNode,m)&&(f.value(this.domNode)!=null?this.attributes[f.attrName]=f:delete this.attributes[f.attrName]):(f.remove(this.domNode),delete this.attributes[f.attrName])},p.prototype.build=function(){var f=this;this.attributes={};var m=i.default.keys(this.domNode),x=o.default.keys(this.domNode),y=l.default.keys(this.domNode);m.concat(x).concat(y).forEach(function(g){var b=u.query(g,u.Scope.ATTRIBUTE);b instanceof i.default&&(f.attributes[b.attrName]=b)})},p.prototype.copy=function(f){var m=this;Object.keys(this.attributes).forEach(function(x){var y=m.attributes[x].value(m.domNode);f.format(x,y)})},p.prototype.move=function(f){var m=this;this.copy(f),Object.keys(this.attributes).forEach(function(x){m.attributes[x].remove(m.domNode)}),this.attributes={}},p.prototype.values=function(){var f=this;return Object.keys(this.attributes).reduce(function(m,x){return m[x]=f.attributes[x].value(f.domNode),m},{})},p})();s.default=d}),(function(r,s,a){var i=this&&this.__extends||(function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,f){p.__proto__=f}||function(p,f){for(var m in f)f.hasOwnProperty(m)&&(p[m]=f[m])};return function(p,f){d(p,f);function m(){this.constructor=p}p.prototype=f===null?Object.create(f):(m.prototype=f.prototype,new m)}})();Object.defineProperty(s,"__esModule",{value:!0});var o=a(12);function l(d,p){var f=d.getAttribute("class")||"";return f.split(/\s+/).filter(function(m){return m.indexOf(p+"-")===0})}var u=(function(d){i(p,d);function p(){return d!==null&&d.apply(this,arguments)||this}return p.keys=function(f){return(f.getAttribute("class")||"").split(/\s+/).map(function(m){return m.split("-").slice(0,-1).join("-")})},p.prototype.add=function(f,m){return this.canAdd(f,m)?(this.remove(f),f.classList.add(this.keyName+"-"+m),!0):!1},p.prototype.remove=function(f){var m=l(f,this.keyName);m.forEach(function(x){f.classList.remove(x)}),f.classList.length===0&&f.removeAttribute("class")},p.prototype.value=function(f){var m=l(f,this.keyName)[0]||"",x=m.slice(this.keyName.length+1);return this.canAdd(f,x)?x:""},p})(o.default);s.default=u}),(function(r,s,a){var i=this&&this.__extends||(function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,f){p.__proto__=f}||function(p,f){for(var m in f)f.hasOwnProperty(m)&&(p[m]=f[m])};return function(p,f){d(p,f);function m(){this.constructor=p}p.prototype=f===null?Object.create(f):(m.prototype=f.prototype,new m)}})();Object.defineProperty(s,"__esModule",{value:!0});var o=a(12);function l(d){var p=d.split("-"),f=p.slice(1).map(function(m){return m[0].toUpperCase()+m.slice(1)}).join("");return p[0]+f}var u=(function(d){i(p,d);function p(){return d!==null&&d.apply(this,arguments)||this}return p.keys=function(f){return(f.getAttribute("style")||"").split(";").map(function(m){var x=m.split(":");return x[0].trim()})},p.prototype.add=function(f,m){return this.canAdd(f,m)?(f.style[l(this.keyName)]=m,!0):!1},p.prototype.remove=function(f){f.style[l(this.keyName)]="",f.getAttribute("style")||f.removeAttribute("style")},p.prototype.value=function(f){var m=f.style[l(this.keyName)];return this.canAdd(f,m)?m:""},p})(o.default);s.default=u}),(function(r,s,a){Object.defineProperty(s,"__esModule",{value:!0});var i=(function(){function u(d,p){for(var f=0;f<p.length;f++){var m=p[f];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(d,m.key,m)}}return function(d,p,f){return p&&u(d.prototype,p),f&&u(d,f),d}})();function o(u,d){if(!(u instanceof d))throw new TypeError("Cannot call a class as a function")}var l=(function(){function u(d,p){o(this,u),this.quill=d,this.options=p,this.modules={}}return i(u,[{key:"init",value:function(){var p=this;Object.keys(this.options.modules).forEach(function(f){p.modules[f]==null&&p.addModule(f)})}},{key:"addModule",value:function(p){var f=this.quill.constructor.import("modules/"+p);return this.modules[p]=new f(this.quill,this.options.modules[p]||{}),this.modules[p]}}]),u})();l.DEFAULTS={modules:{}},l.themes={default:l},s.default=l}),(function(r,s,a){Object.defineProperty(s,"__esModule",{value:!0});var i=(function(){function _(w,S){for(var j=0;j<S.length;j++){var N=S[j];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(w,N.key,N)}}return function(w,S,j){return S&&_(w.prototype,S),j&&_(w,j),w}})(),o=function _(w,S,j){w===null&&(w=Function.prototype);var N=Object.getOwnPropertyDescriptor(w,S);if(N===void 0){var C=Object.getPrototypeOf(w);return C===null?void 0:_(C,S,j)}else{if("value"in N)return N.value;var E=N.get;return E===void 0?void 0:E.call(j)}},l=a(0),u=f(l),d=a(7),p=f(d);function f(_){return _&&_.__esModule?_:{default:_}}function m(_,w){if(!(_ instanceof w))throw new TypeError("Cannot call a class as a function")}function x(_,w){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:_}function y(_,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);_.prototype=Object.create(w&&w.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(_,w):_.__proto__=w)}var g="\uFEFF",b=(function(_){y(w,_);function w(S){m(this,w);var j=x(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,S));return j.contentNode=document.createElement("span"),j.contentNode.setAttribute("contenteditable",!1),[].slice.call(j.domNode.childNodes).forEach(function(N){j.contentNode.appendChild(N)}),j.leftGuard=document.createTextNode(g),j.rightGuard=document.createTextNode(g),j.domNode.appendChild(j.leftGuard),j.domNode.appendChild(j.contentNode),j.domNode.appendChild(j.rightGuard),j}return i(w,[{key:"index",value:function(j,N){return j===this.leftGuard?0:j===this.rightGuard?1:o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"index",this).call(this,j,N)}},{key:"restore",value:function(j){var N=void 0,C=void 0,E=j.data.split(g).join("");if(j===this.leftGuard)if(this.prev instanceof p.default){var T=this.prev.length();this.prev.insertAt(T,E),N={startNode:this.prev.domNode,startOffset:T+E.length}}else C=document.createTextNode(E),this.parent.insertBefore(u.default.create(C),this),N={startNode:C,startOffset:E.length};else j===this.rightGuard&&(this.next instanceof p.default?(this.next.insertAt(0,E),N={startNode:this.next.domNode,startOffset:E.length}):(C=document.createTextNode(E),this.parent.insertBefore(u.default.create(C),this.next),N={startNode:C,startOffset:E.length}));return j.data=g,N}},{key:"update",value:function(j,N){var C=this;j.forEach(function(E){if(E.type==="characterData"&&(E.target===C.leftGuard||E.target===C.rightGuard)){var T=C.restore(E.target);T&&(N.range=T)}})}}]),w})(u.default.Embed);s.default=b}),(function(r,s,a){Object.defineProperty(s,"__esModule",{value:!0}),s.AlignStyle=s.AlignClass=s.AlignAttribute=void 0;var i=a(0),o=l(i);function l(m){return m&&m.__esModule?m:{default:m}}var u={scope:o.default.Scope.BLOCK,whitelist:["right","center","justify"]},d=new o.default.Attributor.Attribute("align","align",u),p=new o.default.Attributor.Class("align","ql-align",u),f=new o.default.Attributor.Style("align","text-align",u);s.AlignAttribute=d,s.AlignClass=p,s.AlignStyle=f}),(function(r,s,a){Object.defineProperty(s,"__esModule",{value:!0}),s.BackgroundStyle=s.BackgroundClass=void 0;var i=a(0),o=u(i),l=a(26);function u(f){return f&&f.__esModule?f:{default:f}}var d=new o.default.Attributor.Class("background","ql-bg",{scope:o.default.Scope.INLINE}),p=new l.ColorAttributor("background","background-color",{scope:o.default.Scope.INLINE});s.BackgroundClass=d,s.BackgroundStyle=p}),(function(r,s,a){Object.defineProperty(s,"__esModule",{value:!0}),s.DirectionStyle=s.DirectionClass=s.DirectionAttribute=void 0;var i=a(0),o=l(i);function l(m){return m&&m.__esModule?m:{default:m}}var u={scope:o.default.Scope.BLOCK,whitelist:["rtl"]},d=new o.default.Attributor.Attribute("direction","dir",u),p=new o.default.Attributor.Class("direction","ql-direction",u),f=new o.default.Attributor.Style("direction","direction",u);s.DirectionAttribute=d,s.DirectionClass=p,s.DirectionStyle=f}),(function(r,s,a){Object.defineProperty(s,"__esModule",{value:!0}),s.FontClass=s.FontStyle=void 0;var i=(function(){function _(w,S){for(var j=0;j<S.length;j++){var N=S[j];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(w,N.key,N)}}return function(w,S,j){return S&&_(w.prototype,S),j&&_(w,j),w}})(),o=function _(w,S,j){w===null&&(w=Function.prototype);var N=Object.getOwnPropertyDescriptor(w,S);if(N===void 0){var C=Object.getPrototypeOf(w);return C===null?void 0:_(C,S,j)}else{if("value"in N)return N.value;var E=N.get;return E===void 0?void 0:E.call(j)}},l=a(0),u=d(l);function d(_){return _&&_.__esModule?_:{default:_}}function p(_,w){if(!(_ instanceof w))throw new TypeError("Cannot call a class as a function")}function f(_,w){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:_}function m(_,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);_.prototype=Object.create(w&&w.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(_,w):_.__proto__=w)}var x={scope:u.default.Scope.INLINE,whitelist:["serif","monospace"]},y=new u.default.Attributor.Class("font","ql-font",x),g=(function(_){m(w,_);function w(){return p(this,w),f(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return i(w,[{key:"value",value:function(j){return o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"value",this).call(this,j).replace(/["']/g,"")}}]),w})(u.default.Attributor.Style),b=new g("font","font-family",x);s.FontStyle=b,s.FontClass=y}),(function(r,s,a){Object.defineProperty(s,"__esModule",{value:!0}),s.SizeStyle=s.SizeClass=void 0;var i=a(0),o=l(i);function l(p){return p&&p.__esModule?p:{default:p}}var u=new o.default.Attributor.Class("size","ql-size",{scope:o.default.Scope.INLINE,whitelist:["small","large","huge"]}),d=new o.default.Attributor.Style("size","font-size",{scope:o.default.Scope.INLINE,whitelist:["10px","18px","32px"]});s.SizeClass=u,s.SizeStyle=d}),(function(r,s,a){r.exports={align:{"":a(76),center:a(77),right:a(78),justify:a(79)},background:a(80),blockquote:a(81),bold:a(82),clean:a(83),code:a(58),"code-block":a(58),color:a(84),direction:{"":a(85),rtl:a(86)},float:{center:a(87),full:a(88),left:a(89),right:a(90)},formula:a(91),header:{1:a(92),2:a(93)},italic:a(94),image:a(95),indent:{"+1":a(96),"-1":a(97)},link:a(98),list:{ordered:a(99),bullet:a(100),check:a(101)},script:{sub:a(102),super:a(103)},strike:a(104),underline:a(105),video:a(106)}}),(function(r,s,a){Object.defineProperty(s,"__esModule",{value:!0}),s.getLastChangeIndex=s.default=void 0;var i=(function(){function S(j,N){for(var C=0;C<N.length;C++){var E=N[C];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(j,E.key,E)}}return function(j,N,C){return N&&S(j.prototype,N),C&&S(j,C),j}})(),o=a(0),l=m(o),u=a(5),d=m(u),p=a(9),f=m(p);function m(S){return S&&S.__esModule?S:{default:S}}function x(S,j){if(!(S instanceof j))throw new TypeError("Cannot call a class as a function")}function y(S,j){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j&&(typeof j=="object"||typeof j=="function")?j:S}function g(S,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof j);S.prototype=Object.create(j&&j.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(S,j):S.__proto__=j)}var b=(function(S){g(j,S);function j(N,C){x(this,j);var E=y(this,(j.__proto__||Object.getPrototypeOf(j)).call(this,N,C));return E.lastRecorded=0,E.ignoreChange=!1,E.clear(),E.quill.on(d.default.events.EDITOR_CHANGE,function(T,I,A,R){T!==d.default.events.TEXT_CHANGE||E.ignoreChange||(!E.options.userOnly||R===d.default.sources.USER?E.record(I,A):E.transform(I))}),E.quill.keyboard.addBinding({key:"Z",shortKey:!0},E.undo.bind(E)),E.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},E.redo.bind(E)),/Win/i.test(navigator.platform)&&E.quill.keyboard.addBinding({key:"Y",shortKey:!0},E.redo.bind(E)),E}return i(j,[{key:"change",value:function(C,E){if(this.stack[C].length!==0){var T=this.stack[C].pop();this.stack[E].push(T),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(T[C],d.default.sources.USER),this.ignoreChange=!1;var I=w(T[C]);this.quill.setSelection(I)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(C,E){if(C.ops.length!==0){this.stack.redo=[];var T=this.quill.getContents().diff(E),I=Date.now();if(this.lastRecorded+this.options.delay>I&&this.stack.undo.length>0){var A=this.stack.undo.pop();T=T.compose(A.undo),C=A.redo.compose(C)}else this.lastRecorded=I;this.stack.undo.push({redo:C,undo:T}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(C){this.stack.undo.forEach(function(E){E.undo=C.transform(E.undo,!0),E.redo=C.transform(E.redo,!0)}),this.stack.redo.forEach(function(E){E.undo=C.transform(E.undo,!0),E.redo=C.transform(E.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),j})(f.default);b.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function _(S){var j=S.ops[S.ops.length-1];return j==null?!1:j.insert!=null?typeof j.insert=="string"&&j.insert.endsWith(`
`):j.attributes!=null?Object.keys(j.attributes).some(function(N){return l.default.query(N,l.default.Scope.BLOCK)!=null}):!1}function w(S){var j=S.reduce(function(C,E){return C+=E.delete||0,C},0),N=S.length()-j;return _(S)&&(N-=1),N}s.default=b,s.getLastChangeIndex=w}),(function(r,s,a){Object.defineProperty(s,"__esModule",{value:!0}),s.default=s.BaseTooltip=void 0;var i=(function(){function q(z,Q){for(var J=0;J<Q.length;J++){var V=Q[J];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(z,V.key,V)}}return function(z,Q,J){return Q&&q(z.prototype,Q),J&&q(z,J),z}})(),o=function q(z,Q,J){z===null&&(z=Function.prototype);var V=Object.getOwnPropertyDescriptor(z,Q);if(V===void 0){var ee=Object.getPrototypeOf(z);return ee===null?void 0:q(ee,Q,J)}else{if("value"in V)return V.value;var te=V.get;return te===void 0?void 0:te.call(J)}},l=a(3),u=I(l),d=a(2),p=I(d),f=a(8),m=I(f),x=a(23),y=I(x),g=a(34),b=I(g),_=a(59),w=I(_),S=a(60),j=I(S),N=a(28),C=I(N),E=a(61),T=I(E);function I(q){return q&&q.__esModule?q:{default:q}}function A(q,z){if(!(q instanceof z))throw new TypeError("Cannot call a class as a function")}function R(q,z){if(!q)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return z&&(typeof z=="object"||typeof z=="function")?z:q}function O(q,z){if(typeof z!="function"&&z!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof z);q.prototype=Object.create(z&&z.prototype,{constructor:{value:q,enumerable:!1,writable:!0,configurable:!0}}),z&&(Object.setPrototypeOf?Object.setPrototypeOf(q,z):q.__proto__=z)}var M=[!1,"center","right","justify"],B=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],U=[!1,"serif","monospace"],Y=["1","2","3",!1],W=["small",!1,"large","huge"],K=(function(q){O(z,q);function z(Q,J){A(this,z);var V=R(this,(z.__proto__||Object.getPrototypeOf(z)).call(this,Q,J)),ee=function te(oe){if(!document.body.contains(Q.root))return document.body.removeEventListener("click",te);V.tooltip!=null&&!V.tooltip.root.contains(oe.target)&&document.activeElement!==V.tooltip.textbox&&!V.quill.hasFocus()&&V.tooltip.hide(),V.pickers!=null&&V.pickers.forEach(function(he){he.container.contains(oe.target)||he.close()})};return Q.emitter.listenDOM("click",document.body,ee),V}return i(z,[{key:"addModule",value:function(J){var V=o(z.prototype.__proto__||Object.getPrototypeOf(z.prototype),"addModule",this).call(this,J);return J==="toolbar"&&this.extendToolbar(V),V}},{key:"buildButtons",value:function(J,V){J.forEach(function(ee){var te=ee.getAttribute("class")||"";te.split(/\s+/).forEach(function(oe){if(oe.startsWith("ql-")&&(oe=oe.slice(3),V[oe]!=null))if(oe==="direction")ee.innerHTML=V[oe][""]+V[oe].rtl;else if(typeof V[oe]=="string")ee.innerHTML=V[oe];else{var he=ee.value||"";he!=null&&V[oe][he]&&(ee.innerHTML=V[oe][he])}})})}},{key:"buildPickers",value:function(J,V){var ee=this;this.pickers=J.map(function(oe){if(oe.classList.contains("ql-align"))return oe.querySelector("option")==null&&L(oe,M),new j.default(oe,V.align);if(oe.classList.contains("ql-background")||oe.classList.contains("ql-color")){var he=oe.classList.contains("ql-background")?"background":"color";return oe.querySelector("option")==null&&L(oe,B,he==="background"?"#ffffff":"#000000"),new w.default(oe,V[he])}else return oe.querySelector("option")==null&&(oe.classList.contains("ql-font")?L(oe,U):oe.classList.contains("ql-header")?L(oe,Y):oe.classList.contains("ql-size")&&L(oe,W)),new C.default(oe)});var te=function(){ee.pickers.forEach(function(he){he.update()})};this.quill.on(m.default.events.EDITOR_CHANGE,te)}}]),z})(b.default);K.DEFAULTS=(0,u.default)(!0,{},b.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var z=this,Q=this.container.querySelector("input.ql-image[type=file]");Q==null&&(Q=document.createElement("input"),Q.setAttribute("type","file"),Q.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),Q.classList.add("ql-image"),Q.addEventListener("change",function(){if(Q.files!=null&&Q.files[0]!=null){var J=new FileReader;J.onload=function(V){var ee=z.quill.getSelection(!0);z.quill.updateContents(new p.default().retain(ee.index).delete(ee.length).insert({image:V.target.result}),m.default.sources.USER),z.quill.setSelection(ee.index+1,m.default.sources.SILENT),Q.value=""},J.readAsDataURL(Q.files[0])}}),this.container.appendChild(Q)),Q.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var F=(function(q){O(z,q);function z(Q,J){A(this,z);var V=R(this,(z.__proto__||Object.getPrototypeOf(z)).call(this,Q,J));return V.textbox=V.root.querySelector('input[type="text"]'),V.listen(),V}return i(z,[{key:"listen",value:function(){var J=this;this.textbox.addEventListener("keydown",function(V){y.default.match(V,"enter")?(J.save(),V.preventDefault()):y.default.match(V,"escape")&&(J.cancel(),V.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),V!=null?this.textbox.value=V:J!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+J)||""),this.root.setAttribute("data-mode",J)}},{key:"restoreFocus",value:function(){var J=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=J}},{key:"save",value:function(){var J=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var V=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",J,m.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",J,m.default.sources.USER)),this.quill.root.scrollTop=V;break}case"video":J=H(J);case"formula":{if(!J)break;var ee=this.quill.getSelection(!0);if(ee!=null){var te=ee.index+ee.length;this.quill.insertEmbed(te,this.root.getAttribute("data-mode"),J,m.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(te+1," ",m.default.sources.USER),this.quill.setSelection(te+2,m.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),z})(T.default);function H(q){var z=q.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||q.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return z?(z[1]||"https")+"://www.youtube.com/embed/"+z[2]+"?showinfo=0":(z=q.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(z[1]||"https")+"://player.vimeo.com/video/"+z[2]+"/":q}function L(q,z){var Q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;z.forEach(function(J){var V=document.createElement("option");J===Q?V.setAttribute("selected","selected"):V.setAttribute("value",J),q.appendChild(V)})}s.BaseTooltip=F,s.default=K}),(function(r,s,a){Object.defineProperty(s,"__esModule",{value:!0});var i=(function(){function o(){this.head=this.tail=null,this.length=0}return o.prototype.append=function(){for(var l=[],u=0;u<arguments.length;u++)l[u]=arguments[u];this.insertBefore(l[0],null),l.length>1&&this.append.apply(this,l.slice(1))},o.prototype.contains=function(l){for(var u,d=this.iterator();u=d();)if(u===l)return!0;return!1},o.prototype.insertBefore=function(l,u){l&&(l.next=u,u!=null?(l.prev=u.prev,u.prev!=null&&(u.prev.next=l),u.prev=l,u===this.head&&(this.head=l)):this.tail!=null?(this.tail.next=l,l.prev=this.tail,this.tail=l):(l.prev=null,this.head=this.tail=l),this.length+=1)},o.prototype.offset=function(l){for(var u=0,d=this.head;d!=null;){if(d===l)return u;u+=d.length(),d=d.next}return-1},o.prototype.remove=function(l){this.contains(l)&&(l.prev!=null&&(l.prev.next=l.next),l.next!=null&&(l.next.prev=l.prev),l===this.head&&(this.head=l.next),l===this.tail&&(this.tail=l.prev),this.length-=1)},o.prototype.iterator=function(l){return l===void 0&&(l=this.head),function(){var u=l;return l!=null&&(l=l.next),u}},o.prototype.find=function(l,u){u===void 0&&(u=!1);for(var d,p=this.iterator();d=p();){var f=d.length();if(l<f||u&&l===f&&(d.next==null||d.next.length()!==0))return[d,l];l-=f}return[null,0]},o.prototype.forEach=function(l){for(var u,d=this.iterator();u=d();)l(u)},o.prototype.forEachAt=function(l,u,d){if(!(u<=0))for(var p=this.find(l),f=p[0],m=p[1],x,y=l-m,g=this.iterator(f);(x=g())&&y<l+u;){var b=x.length();l>y?d(x,l-y,Math.min(u,y+b-l)):d(x,0,Math.min(b,l+u-y)),y+=b}},o.prototype.map=function(l){return this.reduce(function(u,d){return u.push(l(d)),u},[])},o.prototype.reduce=function(l,u){for(var d,p=this.iterator();d=p();)u=l(u,d);return u},o})();s.default=i}),(function(r,s,a){var i=this&&this.__extends||(function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,x){m.__proto__=x}||function(m,x){for(var y in x)x.hasOwnProperty(y)&&(m[y]=x[y])};return function(m,x){f(m,x);function y(){this.constructor=m}m.prototype=x===null?Object.create(x):(y.prototype=x.prototype,new y)}})();Object.defineProperty(s,"__esModule",{value:!0});var o=a(17),l=a(1),u={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},d=100,p=(function(f){i(m,f);function m(x){var y=f.call(this,x)||this;return y.scroll=y,y.observer=new MutationObserver(function(g){y.update(g)}),y.observer.observe(y.domNode,u),y.attach(),y}return m.prototype.detach=function(){f.prototype.detach.call(this),this.observer.disconnect()},m.prototype.deleteAt=function(x,y){this.update(),x===0&&y===this.length()?this.children.forEach(function(g){g.remove()}):f.prototype.deleteAt.call(this,x,y)},m.prototype.formatAt=function(x,y,g,b){this.update(),f.prototype.formatAt.call(this,x,y,g,b)},m.prototype.insertAt=function(x,y,g){this.update(),f.prototype.insertAt.call(this,x,y,g)},m.prototype.optimize=function(x,y){var g=this;x===void 0&&(x=[]),y===void 0&&(y={}),f.prototype.optimize.call(this,y);for(var b=[].slice.call(this.observer.takeRecords());b.length>0;)x.push(b.pop());for(var _=function(N,C){C===void 0&&(C=!0),!(N==null||N===g)&&N.domNode.parentNode!=null&&(N.domNode[l.DATA_KEY].mutations==null&&(N.domNode[l.DATA_KEY].mutations=[]),C&&_(N.parent))},w=function(N){N.domNode[l.DATA_KEY]==null||N.domNode[l.DATA_KEY].mutations==null||(N instanceof o.default&&N.children.forEach(w),N.optimize(y))},S=x,j=0;S.length>0;j+=1){if(j>=d)throw new Error("[Parchment] Maximum optimize iterations reached");for(S.forEach(function(N){var C=l.find(N.target,!0);C!=null&&(C.domNode===N.target&&(N.type==="childList"?(_(l.find(N.previousSibling,!1)),[].forEach.call(N.addedNodes,function(E){var T=l.find(E,!1);_(T,!1),T instanceof o.default&&T.children.forEach(function(I){_(I,!1)})})):N.type==="attributes"&&_(C.prev)),_(C))}),this.children.forEach(w),S=[].slice.call(this.observer.takeRecords()),b=S.slice();b.length>0;)x.push(b.pop())}},m.prototype.update=function(x,y){var g=this;y===void 0&&(y={}),x=x||this.observer.takeRecords(),x.map(function(b){var _=l.find(b.target,!0);return _==null?null:_.domNode[l.DATA_KEY].mutations==null?(_.domNode[l.DATA_KEY].mutations=[b],_):(_.domNode[l.DATA_KEY].mutations.push(b),null)}).forEach(function(b){b==null||b===g||b.domNode[l.DATA_KEY]==null||b.update(b.domNode[l.DATA_KEY].mutations||[],y)}),this.domNode[l.DATA_KEY].mutations!=null&&f.prototype.update.call(this,this.domNode[l.DATA_KEY].mutations,y),this.optimize(x,y)},m.blotName="scroll",m.defaultChild="block",m.scope=l.Scope.BLOCK_BLOT,m.tagName="DIV",m})(o.default);s.default=p}),(function(r,s,a){var i=this&&this.__extends||(function(){var p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,m){f.__proto__=m}||function(f,m){for(var x in m)m.hasOwnProperty(x)&&(f[x]=m[x])};return function(f,m){p(f,m);function x(){this.constructor=f}f.prototype=m===null?Object.create(m):(x.prototype=m.prototype,new x)}})();Object.defineProperty(s,"__esModule",{value:!0});var o=a(18),l=a(1);function u(p,f){if(Object.keys(p).length!==Object.keys(f).length)return!1;for(var m in p)if(p[m]!==f[m])return!1;return!0}var d=(function(p){i(f,p);function f(){return p!==null&&p.apply(this,arguments)||this}return f.formats=function(m){if(m.tagName!==f.tagName)return p.formats.call(this,m)},f.prototype.format=function(m,x){var y=this;m===this.statics.blotName&&!x?(this.children.forEach(function(g){g instanceof o.default||(g=g.wrap(f.blotName,!0)),y.attributes.copy(g)}),this.unwrap()):p.prototype.format.call(this,m,x)},f.prototype.formatAt=function(m,x,y,g){if(this.formats()[y]!=null||l.query(y,l.Scope.ATTRIBUTE)){var b=this.isolate(m,x);b.format(y,g)}else p.prototype.formatAt.call(this,m,x,y,g)},f.prototype.optimize=function(m){p.prototype.optimize.call(this,m);var x=this.formats();if(Object.keys(x).length===0)return this.unwrap();var y=this.next;y instanceof f&&y.prev===this&&u(x,y.formats())&&(y.moveChildren(this),y.remove())},f.blotName="inline",f.scope=l.Scope.INLINE_BLOT,f.tagName="SPAN",f})(o.default);s.default=d}),(function(r,s,a){var i=this&&this.__extends||(function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,f){p.__proto__=f}||function(p,f){for(var m in f)f.hasOwnProperty(m)&&(p[m]=f[m])};return function(p,f){d(p,f);function m(){this.constructor=p}p.prototype=f===null?Object.create(f):(m.prototype=f.prototype,new m)}})();Object.defineProperty(s,"__esModule",{value:!0});var o=a(18),l=a(1),u=(function(d){i(p,d);function p(){return d!==null&&d.apply(this,arguments)||this}return p.formats=function(f){var m=l.query(p.blotName).tagName;if(f.tagName!==m)return d.formats.call(this,f)},p.prototype.format=function(f,m){l.query(f,l.Scope.BLOCK)!=null&&(f===this.statics.blotName&&!m?this.replaceWith(p.blotName):d.prototype.format.call(this,f,m))},p.prototype.formatAt=function(f,m,x,y){l.query(x,l.Scope.BLOCK)!=null?this.format(x,y):d.prototype.formatAt.call(this,f,m,x,y)},p.prototype.insertAt=function(f,m,x){if(x==null||l.query(m,l.Scope.INLINE)!=null)d.prototype.insertAt.call(this,f,m,x);else{var y=this.split(f),g=l.create(m,x);y.parent.insertBefore(g,y)}},p.prototype.update=function(f,m){navigator.userAgent.match(/Trident/)?this.build():d.prototype.update.call(this,f,m)},p.blotName="block",p.scope=l.Scope.BLOCK_BLOT,p.tagName="P",p})(o.default);s.default=u}),(function(r,s,a){var i=this&&this.__extends||(function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,p){d.__proto__=p}||function(d,p){for(var f in p)p.hasOwnProperty(f)&&(d[f]=p[f])};return function(d,p){u(d,p);function f(){this.constructor=d}d.prototype=p===null?Object.create(p):(f.prototype=p.prototype,new f)}})();Object.defineProperty(s,"__esModule",{value:!0});var o=a(19),l=(function(u){i(d,u);function d(){return u!==null&&u.apply(this,arguments)||this}return d.formats=function(p){},d.prototype.format=function(p,f){u.prototype.formatAt.call(this,0,this.length(),p,f)},d.prototype.formatAt=function(p,f,m,x){p===0&&f===this.length()?this.format(m,x):u.prototype.formatAt.call(this,p,f,m,x)},d.prototype.formats=function(){return this.statics.formats(this.domNode)},d})(o.default);s.default=l}),(function(r,s,a){var i=this&&this.__extends||(function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,f){p.__proto__=f}||function(p,f){for(var m in f)f.hasOwnProperty(m)&&(p[m]=f[m])};return function(p,f){d(p,f);function m(){this.constructor=p}p.prototype=f===null?Object.create(f):(m.prototype=f.prototype,new m)}})();Object.defineProperty(s,"__esModule",{value:!0});var o=a(19),l=a(1),u=(function(d){i(p,d);function p(f){var m=d.call(this,f)||this;return m.text=m.statics.value(m.domNode),m}return p.create=function(f){return document.createTextNode(f)},p.value=function(f){var m=f.data;return m.normalize&&(m=m.normalize()),m},p.prototype.deleteAt=function(f,m){this.domNode.data=this.text=this.text.slice(0,f)+this.text.slice(f+m)},p.prototype.index=function(f,m){return this.domNode===f?m:-1},p.prototype.insertAt=function(f,m,x){x==null?(this.text=this.text.slice(0,f)+m+this.text.slice(f),this.domNode.data=this.text):d.prototype.insertAt.call(this,f,m,x)},p.prototype.length=function(){return this.text.length},p.prototype.optimize=function(f){d.prototype.optimize.call(this,f),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof p&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},p.prototype.position=function(f,m){return[this.domNode,f]},p.prototype.split=function(f,m){if(m===void 0&&(m=!1),!m){if(f===0)return this;if(f===this.length())return this.next}var x=l.create(this.domNode.splitText(f));return this.parent.insertBefore(x,this.next),this.text=this.statics.value(this.domNode),x},p.prototype.update=function(f,m){var x=this;f.some(function(y){return y.type==="characterData"&&y.target===x.domNode})&&(this.text=this.statics.value(this.domNode))},p.prototype.value=function(){return this.text},p.blotName="text",p.scope=l.Scope.INLINE_BLOT,p})(o.default);s.default=u}),(function(r,s,a){var i=document.createElement("div");if(i.classList.toggle("test-class",!1),i.classList.contains("test-class")){var o=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(l,u){return arguments.length>1&&!this.contains(l)==!u?u:o.call(this,l)}}String.prototype.startsWith||(String.prototype.startsWith=function(l,u){return u=u||0,this.substr(u,l.length)===l}),String.prototype.endsWith||(String.prototype.endsWith=function(l,u){var d=this.toString();(typeof u!="number"||!isFinite(u)||Math.floor(u)!==u||u>d.length)&&(u=d.length),u-=l.length;var p=d.indexOf(l,u);return p!==-1&&p===u}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(u){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof u!="function")throw new TypeError("predicate must be a function");for(var d=Object(this),p=d.length>>>0,f=arguments[1],m,x=0;x<p;x++)if(m=d[x],u.call(f,m,x,d))return m}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})}),(function(r,s){var a=-1,i=1,o=0;function l(j,N,C){if(j==N)return j?[[o,j]]:[];(C<0||j.length<C)&&(C=null);var E=f(j,N),T=j.substring(0,E);j=j.substring(E),N=N.substring(E),E=m(j,N);var I=j.substring(j.length-E);j=j.substring(0,j.length-E),N=N.substring(0,N.length-E);var A=u(j,N);return T&&A.unshift([o,T]),I&&A.push([o,I]),y(A),C!=null&&(A=_(A,C)),A=w(A),A}function u(j,N){var C;if(!j)return[[i,N]];if(!N)return[[a,j]];var E=j.length>N.length?j:N,T=j.length>N.length?N:j,I=E.indexOf(T);if(I!=-1)return C=[[i,E.substring(0,I)],[o,T],[i,E.substring(I+T.length)]],j.length>N.length&&(C[0][0]=C[2][0]=a),C;if(T.length==1)return[[a,j],[i,N]];var A=x(j,N);if(A){var R=A[0],O=A[1],M=A[2],B=A[3],U=A[4],Y=l(R,M),W=l(O,B);return Y.concat([[o,U]],W)}return d(j,N)}function d(j,N){for(var C=j.length,E=N.length,T=Math.ceil((C+E)/2),I=T,A=2*T,R=new Array(A),O=new Array(A),M=0;M<A;M++)R[M]=-1,O[M]=-1;R[I+1]=0,O[I+1]=0;for(var B=C-E,U=B%2!=0,Y=0,W=0,K=0,F=0,H=0;H<T;H++){for(var L=-H+Y;L<=H-W;L+=2){var q=I+L,z;L==-H||L!=H&&R[q-1]<R[q+1]?z=R[q+1]:z=R[q-1]+1;for(var Q=z-L;z<C&&Q<E&&j.charAt(z)==N.charAt(Q);)z++,Q++;if(R[q]=z,z>C)W+=2;else if(Q>E)Y+=2;else if(U){var J=I+B-L;if(J>=0&&J<A&&O[J]!=-1){var V=C-O[J];if(z>=V)return p(j,N,z,Q)}}}for(var ee=-H+K;ee<=H-F;ee+=2){var J=I+ee,V;ee==-H||ee!=H&&O[J-1]<O[J+1]?V=O[J+1]:V=O[J-1]+1;for(var te=V-ee;V<C&&te<E&&j.charAt(C-V-1)==N.charAt(E-te-1);)V++,te++;if(O[J]=V,V>C)F+=2;else if(te>E)K+=2;else if(!U){var q=I+B-ee;if(q>=0&&q<A&&R[q]!=-1){var z=R[q],Q=I+z-q;if(V=C-V,z>=V)return p(j,N,z,Q)}}}}return[[a,j],[i,N]]}function p(j,N,C,E){var T=j.substring(0,C),I=N.substring(0,E),A=j.substring(C),R=N.substring(E),O=l(T,I),M=l(A,R);return O.concat(M)}function f(j,N){if(!j||!N||j.charAt(0)!=N.charAt(0))return 0;for(var C=0,E=Math.min(j.length,N.length),T=E,I=0;C<T;)j.substring(I,T)==N.substring(I,T)?(C=T,I=C):E=T,T=Math.floor((E-C)/2+C);return T}function m(j,N){if(!j||!N||j.charAt(j.length-1)!=N.charAt(N.length-1))return 0;for(var C=0,E=Math.min(j.length,N.length),T=E,I=0;C<T;)j.substring(j.length-T,j.length-I)==N.substring(N.length-T,N.length-I)?(C=T,I=C):E=T,T=Math.floor((E-C)/2+C);return T}function x(j,N){var C=j.length>N.length?j:N,E=j.length>N.length?N:j;if(C.length<4||E.length*2<C.length)return null;function T(W,K,F){for(var H=W.substring(F,F+Math.floor(W.length/4)),L=-1,q="",z,Q,J,V;(L=K.indexOf(H,L+1))!=-1;){var ee=f(W.substring(F),K.substring(L)),te=m(W.substring(0,F),K.substring(0,L));q.length<te+ee&&(q=K.substring(L-te,L)+K.substring(L,L+ee),z=W.substring(0,F-te),Q=W.substring(F+ee),J=K.substring(0,L-te),V=K.substring(L+ee))}return q.length*2>=W.length?[z,Q,J,V,q]:null}var I=T(C,E,Math.ceil(C.length/4)),A=T(C,E,Math.ceil(C.length/2)),R;if(!I&&!A)return null;A?I?R=I[4].length>A[4].length?I:A:R=A:R=I;var O,M,B,U;j.length>N.length?(O=R[0],M=R[1],B=R[2],U=R[3]):(B=R[0],U=R[1],O=R[2],M=R[3]);var Y=R[4];return[O,M,B,U,Y]}function y(j){j.push([o,""]);for(var N=0,C=0,E=0,T="",I="",A;N<j.length;)switch(j[N][0]){case i:E++,I+=j[N][1],N++;break;case a:C++,T+=j[N][1],N++;break;case o:C+E>1?(C!==0&&E!==0&&(A=f(I,T),A!==0&&(N-C-E>0&&j[N-C-E-1][0]==o?j[N-C-E-1][1]+=I.substring(0,A):(j.splice(0,0,[o,I.substring(0,A)]),N++),I=I.substring(A),T=T.substring(A)),A=m(I,T),A!==0&&(j[N][1]=I.substring(I.length-A)+j[N][1],I=I.substring(0,I.length-A),T=T.substring(0,T.length-A))),C===0?j.splice(N-E,C+E,[i,I]):E===0?j.splice(N-C,C+E,[a,T]):j.splice(N-C-E,C+E,[a,T],[i,I]),N=N-C-E+(C?1:0)+(E?1:0)+1):N!==0&&j[N-1][0]==o?(j[N-1][1]+=j[N][1],j.splice(N,1)):N++,E=0,C=0,T="",I="";break}j[j.length-1][1]===""&&j.pop();var R=!1;for(N=1;N<j.length-1;)j[N-1][0]==o&&j[N+1][0]==o&&(j[N][1].substring(j[N][1].length-j[N-1][1].length)==j[N-1][1]?(j[N][1]=j[N-1][1]+j[N][1].substring(0,j[N][1].length-j[N-1][1].length),j[N+1][1]=j[N-1][1]+j[N+1][1],j.splice(N-1,1),R=!0):j[N][1].substring(0,j[N+1][1].length)==j[N+1][1]&&(j[N-1][1]+=j[N+1][1],j[N][1]=j[N][1].substring(j[N+1][1].length)+j[N+1][1],j.splice(N+1,1),R=!0)),N++;R&&y(j)}var g=l;g.INSERT=i,g.DELETE=a,g.EQUAL=o,r.exports=g;function b(j,N){if(N===0)return[o,j];for(var C=0,E=0;E<j.length;E++){var T=j[E];if(T[0]===a||T[0]===o){var I=C+T[1].length;if(N===I)return[E+1,j];if(N<I){j=j.slice();var A=N-C,R=[T[0],T[1].slice(0,A)],O=[T[0],T[1].slice(A)];return j.splice(E,1,R,O),[E+1,j]}else C=I}}throw new Error("cursor_pos is out of bounds!")}function _(j,N){var C=b(j,N),E=C[1],T=C[0],I=E[T],A=E[T+1];if(I==null)return j;if(I[0]!==o)return j;if(A!=null&&I[1]+A[1]===A[1]+I[1])return E.splice(T,2,A,I),S(E,T,2);if(A!=null&&A[1].indexOf(I[1])===0){E.splice(T,2,[A[0],I[1]],[0,I[1]]);var R=A[1].slice(I[1].length);return R.length>0&&E.splice(T+2,0,[A[0],R]),S(E,T,3)}else return j}function w(j){for(var N=!1,C=function(A){return A.charCodeAt(0)>=56320&&A.charCodeAt(0)<=57343},E=function(A){return A.charCodeAt(A.length-1)>=55296&&A.charCodeAt(A.length-1)<=56319},T=2;T<j.length;T+=1)j[T-2][0]===o&&E(j[T-2][1])&&j[T-1][0]===a&&C(j[T-1][1])&&j[T][0]===i&&C(j[T][1])&&(N=!0,j[T-1][1]=j[T-2][1].slice(-1)+j[T-1][1],j[T][1]=j[T-2][1].slice(-1)+j[T][1],j[T-2][1]=j[T-2][1].slice(0,-1));if(!N)return j;for(var I=[],T=0;T<j.length;T+=1)j[T][1].length>0&&I.push(j[T]);return I}function S(j,N,C){for(var E=N+C-1;E>=0&&E>=N-1;E--)if(E+1<j.length){var T=j[E],I=j[E+1];T[0]===I[1]&&j.splice(E,2,[T[0],T[1]+I[1]])}return j}}),(function(r,s){s=r.exports=typeof Object.keys=="function"?Object.keys:a,s.shim=a;function a(i){var o=[];for(var l in i)o.push(l);return o}}),(function(r,s){var a=(function(){return Object.prototype.toString.call(arguments)})()=="[object Arguments]";s=r.exports=a?i:o,s.supported=i;function i(l){return Object.prototype.toString.call(l)=="[object Arguments]"}s.unsupported=o;function o(l){return l&&typeof l=="object"&&typeof l.length=="number"&&Object.prototype.hasOwnProperty.call(l,"callee")&&!Object.prototype.propertyIsEnumerable.call(l,"callee")||!1}}),(function(r,s){var a=Object.prototype.hasOwnProperty,i="~";function o(){}Object.create&&(o.prototype=Object.create(null),new o().__proto__||(i=!1));function l(d,p,f){this.fn=d,this.context=p,this.once=f||!1}function u(){this._events=new o,this._eventsCount=0}u.prototype.eventNames=function(){var p=[],f,m;if(this._eventsCount===0)return p;for(m in f=this._events)a.call(f,m)&&p.push(i?m.slice(1):m);return Object.getOwnPropertySymbols?p.concat(Object.getOwnPropertySymbols(f)):p},u.prototype.listeners=function(p,f){var m=i?i+p:p,x=this._events[m];if(f)return!!x;if(!x)return[];if(x.fn)return[x.fn];for(var y=0,g=x.length,b=new Array(g);y<g;y++)b[y]=x[y].fn;return b},u.prototype.emit=function(p,f,m,x,y,g){var b=i?i+p:p;if(!this._events[b])return!1;var _=this._events[b],w=arguments.length,S,j;if(_.fn){switch(_.once&&this.removeListener(p,_.fn,void 0,!0),w){case 1:return _.fn.call(_.context),!0;case 2:return _.fn.call(_.context,f),!0;case 3:return _.fn.call(_.context,f,m),!0;case 4:return _.fn.call(_.context,f,m,x),!0;case 5:return _.fn.call(_.context,f,m,x,y),!0;case 6:return _.fn.call(_.context,f,m,x,y,g),!0}for(j=1,S=new Array(w-1);j<w;j++)S[j-1]=arguments[j];_.fn.apply(_.context,S)}else{var N=_.length,C;for(j=0;j<N;j++)switch(_[j].once&&this.removeListener(p,_[j].fn,void 0,!0),w){case 1:_[j].fn.call(_[j].context);break;case 2:_[j].fn.call(_[j].context,f);break;case 3:_[j].fn.call(_[j].context,f,m);break;case 4:_[j].fn.call(_[j].context,f,m,x);break;default:if(!S)for(C=1,S=new Array(w-1);C<w;C++)S[C-1]=arguments[C];_[j].fn.apply(_[j].context,S)}}return!0},u.prototype.on=function(p,f,m){var x=new l(f,m||this),y=i?i+p:p;return this._events[y]?this._events[y].fn?this._events[y]=[this._events[y],x]:this._events[y].push(x):(this._events[y]=x,this._eventsCount++),this},u.prototype.once=function(p,f,m){var x=new l(f,m||this,!0),y=i?i+p:p;return this._events[y]?this._events[y].fn?this._events[y]=[this._events[y],x]:this._events[y].push(x):(this._events[y]=x,this._eventsCount++),this},u.prototype.removeListener=function(p,f,m,x){var y=i?i+p:p;if(!this._events[y])return this;if(!f)return--this._eventsCount===0?this._events=new o:delete this._events[y],this;var g=this._events[y];if(g.fn)g.fn===f&&(!x||g.once)&&(!m||g.context===m)&&(--this._eventsCount===0?this._events=new o:delete this._events[y]);else{for(var b=0,_=[],w=g.length;b<w;b++)(g[b].fn!==f||x&&!g[b].once||m&&g[b].context!==m)&&_.push(g[b]);_.length?this._events[y]=_.length===1?_[0]:_:--this._eventsCount===0?this._events=new o:delete this._events[y]}return this},u.prototype.removeAllListeners=function(p){var f;return p?(f=i?i+p:p,this._events[f]&&(--this._eventsCount===0?this._events=new o:delete this._events[f])):(this._events=new o,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prototype.setMaxListeners=function(){return this},u.prefixed=i,u.EventEmitter=u,typeof r<"u"&&(r.exports=u)}),(function(r,s,a){Object.defineProperty(s,"__esModule",{value:!0}),s.matchText=s.matchSpacing=s.matchNewline=s.matchBlot=s.matchAttributor=s.default=void 0;var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(fe){return typeof fe}:function(fe){return fe&&typeof Symbol=="function"&&fe.constructor===Symbol&&fe!==Symbol.prototype?"symbol":typeof fe},o=(function(){function fe(xe,ye){var Se=[],pe=!0,Ge=!1,Qe=void 0;try{for(var Me=xe[Symbol.iterator](),Cn;!(pe=(Cn=Me.next()).done)&&(Se.push(Cn.value),!(ye&&Se.length===ye));pe=!0);}catch(Or){Ge=!0,Qe=Or}finally{try{!pe&&Me.return&&Me.return()}finally{if(Ge)throw Qe}}return Se}return function(xe,ye){if(Array.isArray(xe))return xe;if(Symbol.iterator in Object(xe))return fe(xe,ye);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),l=(function(){function fe(xe,ye){for(var Se=0;Se<ye.length;Se++){var pe=ye[Se];pe.enumerable=pe.enumerable||!1,pe.configurable=!0,"value"in pe&&(pe.writable=!0),Object.defineProperty(xe,pe.key,pe)}}return function(xe,ye,Se){return ye&&fe(xe.prototype,ye),Se&&fe(xe,Se),xe}})(),u=a(3),d=O(u),p=a(2),f=O(p),m=a(0),x=O(m),y=a(5),g=O(y),b=a(10),_=O(b),w=a(9),S=O(w),j=a(36),N=a(37),C=a(13),E=O(C),T=a(26),I=a(38),A=a(39),R=a(40);function O(fe){return fe&&fe.__esModule?fe:{default:fe}}function M(fe,xe,ye){return xe in fe?Object.defineProperty(fe,xe,{value:ye,enumerable:!0,configurable:!0,writable:!0}):fe[xe]=ye,fe}function B(fe,xe){if(!(fe instanceof xe))throw new TypeError("Cannot call a class as a function")}function U(fe,xe){if(!fe)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return xe&&(typeof xe=="object"||typeof xe=="function")?xe:fe}function Y(fe,xe){if(typeof xe!="function"&&xe!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof xe);fe.prototype=Object.create(xe&&xe.prototype,{constructor:{value:fe,enumerable:!1,writable:!0,configurable:!0}}),xe&&(Object.setPrototypeOf?Object.setPrototypeOf(fe,xe):fe.__proto__=xe)}var W=(0,_.default)("quill:clipboard"),K="__ql-matcher",F=[[Node.TEXT_NODE,ut],[Node.TEXT_NODE,Ne],["br",Ce],[Node.ELEMENT_NODE,Ne],[Node.ELEMENT_NODE,he],[Node.ELEMENT_NODE,Be],[Node.ELEMENT_NODE,oe],[Node.ELEMENT_NODE,St],["li",Ae],["b",te.bind(te,"bold")],["i",te.bind(te,"italic")],["style",Fe]],H=[j.AlignAttribute,I.DirectionAttribute].reduce(function(fe,xe){return fe[xe.keyName]=xe,fe},{}),L=[j.AlignStyle,N.BackgroundStyle,T.ColorStyle,I.DirectionStyle,A.FontStyle,R.SizeStyle].reduce(function(fe,xe){return fe[xe.keyName]=xe,fe},{}),q=(function(fe){Y(xe,fe);function xe(ye,Se){B(this,xe);var pe=U(this,(xe.__proto__||Object.getPrototypeOf(xe)).call(this,ye,Se));return pe.quill.root.addEventListener("paste",pe.onPaste.bind(pe)),pe.container=pe.quill.addContainer("ql-clipboard"),pe.container.setAttribute("contenteditable",!0),pe.container.setAttribute("tabindex",-1),pe.matchers=[],F.concat(pe.options.matchers).forEach(function(Ge){var Qe=o(Ge,2),Me=Qe[0],Cn=Qe[1];!Se.matchVisual&&Cn===Be||pe.addMatcher(Me,Cn)}),pe}return l(xe,[{key:"addMatcher",value:function(Se,pe){this.matchers.push([Se,pe])}},{key:"convert",value:function(Se){if(typeof Se=="string")return this.container.innerHTML=Se.replace(/\>\r?\n +\</g,"><"),this.convert();var pe=this.quill.getFormat(this.quill.selection.savedRange.index);if(pe[E.default.blotName]){var Ge=this.container.innerText;return this.container.innerHTML="",new f.default().insert(Ge,M({},E.default.blotName,pe[E.default.blotName]))}var Qe=this.prepareMatching(),Me=o(Qe,2),Cn=Me[0],Or=Me[1],Dt=ee(this.container,Cn,Or);return J(Dt,`
`)&&Dt.ops[Dt.ops.length-1].attributes==null&&(Dt=Dt.compose(new f.default().retain(Dt.length()-1).delete(1))),W.log("convert",this.container.innerHTML,Dt),this.container.innerHTML="",Dt}},{key:"dangerouslyPasteHTML",value:function(Se,pe){var Ge=arguments.length>2&&arguments[2]!==void 0?arguments[2]:g.default.sources.API;if(typeof Se=="string")this.quill.setContents(this.convert(Se),pe),this.quill.setSelection(0,g.default.sources.SILENT);else{var Qe=this.convert(pe);this.quill.updateContents(new f.default().retain(Se).concat(Qe),Ge),this.quill.setSelection(Se+Qe.length(),g.default.sources.SILENT)}}},{key:"onPaste",value:function(Se){var pe=this;if(!(Se.defaultPrevented||!this.quill.isEnabled())){var Ge=this.quill.getSelection(),Qe=new f.default().retain(Ge.index),Me=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(g.default.sources.SILENT),setTimeout(function(){Qe=Qe.concat(pe.convert()).delete(Ge.length),pe.quill.updateContents(Qe,g.default.sources.USER),pe.quill.setSelection(Qe.length()-Ge.length,g.default.sources.SILENT),pe.quill.scrollingContainer.scrollTop=Me,pe.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var Se=this,pe=[],Ge=[];return this.matchers.forEach(function(Qe){var Me=o(Qe,2),Cn=Me[0],Or=Me[1];switch(Cn){case Node.TEXT_NODE:Ge.push(Or);break;case Node.ELEMENT_NODE:pe.push(Or);break;default:[].forEach.call(Se.container.querySelectorAll(Cn),function(Dt){Dt[K]=Dt[K]||[],Dt[K].push(Or)});break}}),[pe,Ge]}}]),xe})(S.default);q.DEFAULTS={matchers:[],matchVisual:!0};function z(fe,xe,ye){return(typeof xe>"u"?"undefined":i(xe))==="object"?Object.keys(xe).reduce(function(Se,pe){return z(Se,pe,xe[pe])},fe):fe.reduce(function(Se,pe){return pe.attributes&&pe.attributes[xe]?Se.push(pe):Se.insert(pe.insert,(0,d.default)({},M({},xe,ye),pe.attributes))},new f.default)}function Q(fe){if(fe.nodeType!==Node.ELEMENT_NODE)return{};var xe="__ql-computed-style";return fe[xe]||(fe[xe]=window.getComputedStyle(fe))}function J(fe,xe){for(var ye="",Se=fe.ops.length-1;Se>=0&&ye.length<xe.length;--Se){var pe=fe.ops[Se];if(typeof pe.insert!="string")break;ye=pe.insert+ye}return ye.slice(-1*xe.length)===xe}function V(fe){if(fe.childNodes.length===0)return!1;var xe=Q(fe);return["block","list-item"].indexOf(xe.display)>-1}function ee(fe,xe,ye){return fe.nodeType===fe.TEXT_NODE?ye.reduce(function(Se,pe){return pe(fe,Se)},new f.default):fe.nodeType===fe.ELEMENT_NODE?[].reduce.call(fe.childNodes||[],function(Se,pe){var Ge=ee(pe,xe,ye);return pe.nodeType===fe.ELEMENT_NODE&&(Ge=xe.reduce(function(Qe,Me){return Me(pe,Qe)},Ge),Ge=(pe[K]||[]).reduce(function(Qe,Me){return Me(pe,Qe)},Ge)),Se.concat(Ge)},new f.default):new f.default}function te(fe,xe,ye){return z(ye,fe,!0)}function oe(fe,xe){var ye=x.default.Attributor.Attribute.keys(fe),Se=x.default.Attributor.Class.keys(fe),pe=x.default.Attributor.Style.keys(fe),Ge={};return ye.concat(Se).concat(pe).forEach(function(Qe){var Me=x.default.query(Qe,x.default.Scope.ATTRIBUTE);Me!=null&&(Ge[Me.attrName]=Me.value(fe),Ge[Me.attrName])||(Me=H[Qe],Me!=null&&(Me.attrName===Qe||Me.keyName===Qe)&&(Ge[Me.attrName]=Me.value(fe)||void 0),Me=L[Qe],Me!=null&&(Me.attrName===Qe||Me.keyName===Qe)&&(Me=L[Qe],Ge[Me.attrName]=Me.value(fe)||void 0))}),Object.keys(Ge).length>0&&(xe=z(xe,Ge)),xe}function he(fe,xe){var ye=x.default.query(fe);if(ye==null)return xe;if(ye.prototype instanceof x.default.Embed){var Se={},pe=ye.value(fe);pe!=null&&(Se[ye.blotName]=pe,xe=new f.default().insert(Se,ye.formats(fe)))}else typeof ye.formats=="function"&&(xe=z(xe,ye.blotName,ye.formats(fe)));return xe}function Ce(fe,xe){return J(xe,`
`)||xe.insert(`
`),xe}function Fe(){return new f.default}function Ae(fe,xe){var ye=x.default.query(fe);if(ye==null||ye.blotName!=="list-item"||!J(xe,`
`))return xe;for(var Se=-1,pe=fe.parentNode;!pe.classList.contains("ql-clipboard");)(x.default.query(pe)||{}).blotName==="list"&&(Se+=1),pe=pe.parentNode;return Se<=0?xe:xe.compose(new f.default().retain(xe.length()-1).retain(1,{indent:Se}))}function Ne(fe,xe){return J(xe,`
`)||(V(fe)||xe.length()>0&&fe.nextSibling&&V(fe.nextSibling))&&xe.insert(`
`),xe}function Be(fe,xe){if(V(fe)&&fe.nextElementSibling!=null&&!J(xe,`

`)){var ye=fe.offsetHeight+parseFloat(Q(fe).marginTop)+parseFloat(Q(fe).marginBottom);fe.nextElementSibling.offsetTop>fe.offsetTop+ye*1.5&&xe.insert(`
`)}return xe}function St(fe,xe){var ye={},Se=fe.style||{};return Se.fontStyle&&Q(fe).fontStyle==="italic"&&(ye.italic=!0),Se.fontWeight&&(Q(fe).fontWeight.startsWith("bold")||parseInt(Q(fe).fontWeight)>=700)&&(ye.bold=!0),Object.keys(ye).length>0&&(xe=z(xe,ye)),parseFloat(Se.textIndent||0)>0&&(xe=new f.default().insert("	").concat(xe)),xe}function ut(fe,xe){var ye=fe.data;if(fe.parentNode.tagName==="O:P")return xe.insert(ye.trim());if(ye.trim().length===0&&fe.parentNode.classList.contains("ql-clipboard"))return xe;if(!Q(fe.parentNode).whiteSpace.startsWith("pre")){var Se=function(Ge,Qe){return Qe=Qe.replace(/[^\u00a0]/g,""),Qe.length<1&&Ge?" ":Qe};ye=ye.replace(/\r\n/g," ").replace(/\n/g," "),ye=ye.replace(/\s\s+/g,Se.bind(Se,!0)),(fe.previousSibling==null&&V(fe.parentNode)||fe.previousSibling!=null&&V(fe.previousSibling))&&(ye=ye.replace(/^\s+/,Se.bind(Se,!1))),(fe.nextSibling==null&&V(fe.parentNode)||fe.nextSibling!=null&&V(fe.nextSibling))&&(ye=ye.replace(/\s+$/,Se.bind(Se,!1)))}return xe.insert(ye)}s.default=q,s.matchAttributor=oe,s.matchBlot=he,s.matchNewline=Ne,s.matchSpacing=Be,s.matchText=ut}),(function(r,s,a){Object.defineProperty(s,"__esModule",{value:!0});var i=(function(){function y(g,b){for(var _=0;_<b.length;_++){var w=b[_];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(g,w.key,w)}}return function(g,b,_){return b&&y(g.prototype,b),_&&y(g,_),g}})(),o=function y(g,b,_){g===null&&(g=Function.prototype);var w=Object.getOwnPropertyDescriptor(g,b);if(w===void 0){var S=Object.getPrototypeOf(g);return S===null?void 0:y(S,b,_)}else{if("value"in w)return w.value;var j=w.get;return j===void 0?void 0:j.call(_)}},l=a(6),u=d(l);function d(y){return y&&y.__esModule?y:{default:y}}function p(y,g){if(!(y instanceof g))throw new TypeError("Cannot call a class as a function")}function f(y,g){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:y}function m(y,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);y.prototype=Object.create(g&&g.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(y,g):y.__proto__=g)}var x=(function(y){m(g,y);function g(){return p(this,g),f(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return i(g,[{key:"optimize",value:function(_){o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"optimize",this).call(this,_),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return o(g.__proto__||Object.getPrototypeOf(g),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),g})(u.default);x.blotName="bold",x.tagName=["STRONG","B"],s.default=x}),(function(r,s,a){Object.defineProperty(s,"__esModule",{value:!0}),s.addControls=s.default=void 0;var i=(function(){function R(O,M){var B=[],U=!0,Y=!1,W=void 0;try{for(var K=O[Symbol.iterator](),F;!(U=(F=K.next()).done)&&(B.push(F.value),!(M&&B.length===M));U=!0);}catch(H){Y=!0,W=H}finally{try{!U&&K.return&&K.return()}finally{if(Y)throw W}}return B}return function(O,M){if(Array.isArray(O))return O;if(Symbol.iterator in Object(O))return R(O,M);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=(function(){function R(O,M){for(var B=0;B<M.length;B++){var U=M[B];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(O,U.key,U)}}return function(O,M,B){return M&&R(O.prototype,M),B&&R(O,B),O}})(),l=a(2),u=_(l),d=a(0),p=_(d),f=a(5),m=_(f),x=a(10),y=_(x),g=a(9),b=_(g);function _(R){return R&&R.__esModule?R:{default:R}}function w(R,O,M){return O in R?Object.defineProperty(R,O,{value:M,enumerable:!0,configurable:!0,writable:!0}):R[O]=M,R}function S(R,O){if(!(R instanceof O))throw new TypeError("Cannot call a class as a function")}function j(R,O){if(!R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O&&(typeof O=="object"||typeof O=="function")?O:R}function N(R,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof O);R.prototype=Object.create(O&&O.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),O&&(Object.setPrototypeOf?Object.setPrototypeOf(R,O):R.__proto__=O)}var C=(0,y.default)("quill:toolbar"),E=(function(R){N(O,R);function O(M,B){S(this,O);var U=j(this,(O.__proto__||Object.getPrototypeOf(O)).call(this,M,B));if(Array.isArray(U.options.container)){var Y=document.createElement("div");I(Y,U.options.container),M.container.parentNode.insertBefore(Y,M.container),U.container=Y}else typeof U.options.container=="string"?U.container=document.querySelector(U.options.container):U.container=U.options.container;if(!(U.container instanceof HTMLElement)){var W;return W=C.error("Container required for toolbar",U.options),j(U,W)}return U.container.classList.add("ql-toolbar"),U.controls=[],U.handlers={},Object.keys(U.options.handlers).forEach(function(K){U.addHandler(K,U.options.handlers[K])}),[].forEach.call(U.container.querySelectorAll("button, select"),function(K){U.attach(K)}),U.quill.on(m.default.events.EDITOR_CHANGE,function(K,F){K===m.default.events.SELECTION_CHANGE&&U.update(F)}),U.quill.on(m.default.events.SCROLL_OPTIMIZE,function(){var K=U.quill.selection.getRange(),F=i(K,1),H=F[0];U.update(H)}),U}return o(O,[{key:"addHandler",value:function(B,U){this.handlers[B]=U}},{key:"attach",value:function(B){var U=this,Y=[].find.call(B.classList,function(K){return K.indexOf("ql-")===0});if(Y){if(Y=Y.slice(3),B.tagName==="BUTTON"&&B.setAttribute("type","button"),this.handlers[Y]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[Y]==null){C.warn("ignoring attaching to disabled format",Y,B);return}if(p.default.query(Y)==null){C.warn("ignoring attaching to nonexistent format",Y,B);return}}var W=B.tagName==="SELECT"?"change":"click";B.addEventListener(W,function(K){var F=void 0;if(B.tagName==="SELECT"){if(B.selectedIndex<0)return;var H=B.options[B.selectedIndex];H.hasAttribute("selected")?F=!1:F=H.value||!1}else B.classList.contains("ql-active")?F=!1:F=B.value||!B.hasAttribute("value"),K.preventDefault();U.quill.focus();var L=U.quill.selection.getRange(),q=i(L,1),z=q[0];if(U.handlers[Y]!=null)U.handlers[Y].call(U,F);else if(p.default.query(Y).prototype instanceof p.default.Embed){if(F=prompt("Enter "+Y),!F)return;U.quill.updateContents(new u.default().retain(z.index).delete(z.length).insert(w({},Y,F)),m.default.sources.USER)}else U.quill.format(Y,F,m.default.sources.USER);U.update(z)}),this.controls.push([Y,B])}}},{key:"update",value:function(B){var U=B==null?{}:this.quill.getFormat(B);this.controls.forEach(function(Y){var W=i(Y,2),K=W[0],F=W[1];if(F.tagName==="SELECT"){var H=void 0;if(B==null)H=null;else if(U[K]==null)H=F.querySelector("option[selected]");else if(!Array.isArray(U[K])){var L=U[K];typeof L=="string"&&(L=L.replace(/\"/g,'\\"')),H=F.querySelector('option[value="'+L+'"]')}H==null?(F.value="",F.selectedIndex=-1):H.selected=!0}else if(B==null)F.classList.remove("ql-active");else if(F.hasAttribute("value")){var q=U[K]===F.getAttribute("value")||U[K]!=null&&U[K].toString()===F.getAttribute("value")||U[K]==null&&!F.getAttribute("value");F.classList.toggle("ql-active",q)}else F.classList.toggle("ql-active",U[K]!=null)})}}]),O})(b.default);E.DEFAULTS={};function T(R,O,M){var B=document.createElement("button");B.setAttribute("type","button"),B.classList.add("ql-"+O),M!=null&&(B.value=M),R.appendChild(B)}function I(R,O){Array.isArray(O[0])||(O=[O]),O.forEach(function(M){var B=document.createElement("span");B.classList.add("ql-formats"),M.forEach(function(U){if(typeof U=="string")T(B,U);else{var Y=Object.keys(U)[0],W=U[Y];Array.isArray(W)?A(B,Y,W):T(B,Y,W)}}),R.appendChild(B)})}function A(R,O,M){var B=document.createElement("select");B.classList.add("ql-"+O),M.forEach(function(U){var Y=document.createElement("option");U!==!1?Y.setAttribute("value",U):Y.setAttribute("selected","selected"),B.appendChild(Y)}),R.appendChild(B)}E.DEFAULTS={container:null,handlers:{clean:function(){var O=this,M=this.quill.getSelection();if(M!=null)if(M.length==0){var B=this.quill.getFormat();Object.keys(B).forEach(function(U){p.default.query(U,p.default.Scope.INLINE)!=null&&O.quill.format(U,!1)})}else this.quill.removeFormat(M,m.default.sources.USER)},direction:function(O){var M=this.quill.getFormat().align;O==="rtl"&&M==null?this.quill.format("align","right",m.default.sources.USER):!O&&M==="right"&&this.quill.format("align",!1,m.default.sources.USER),this.quill.format("direction",O,m.default.sources.USER)},indent:function(O){var M=this.quill.getSelection(),B=this.quill.getFormat(M),U=parseInt(B.indent||0);if(O==="+1"||O==="-1"){var Y=O==="+1"?1:-1;B.direction==="rtl"&&(Y*=-1),this.quill.format("indent",U+Y,m.default.sources.USER)}},link:function(O){O===!0&&(O=prompt("Enter link URL:")),this.quill.format("link",O,m.default.sources.USER)},list:function(O){var M=this.quill.getSelection(),B=this.quill.getFormat(M);O==="check"?B.list==="checked"||B.list==="unchecked"?this.quill.format("list",!1,m.default.sources.USER):this.quill.format("list","unchecked",m.default.sources.USER):this.quill.format("list",O,m.default.sources.USER)}}},s.default=E,s.addControls=I}),(function(r,s){r.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'}),(function(r,s,a){Object.defineProperty(s,"__esModule",{value:!0});var i=(function(){function y(g,b){for(var _=0;_<b.length;_++){var w=b[_];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(g,w.key,w)}}return function(g,b,_){return b&&y(g.prototype,b),_&&y(g,_),g}})(),o=function y(g,b,_){g===null&&(g=Function.prototype);var w=Object.getOwnPropertyDescriptor(g,b);if(w===void 0){var S=Object.getPrototypeOf(g);return S===null?void 0:y(S,b,_)}else{if("value"in w)return w.value;var j=w.get;return j===void 0?void 0:j.call(_)}},l=a(28),u=d(l);function d(y){return y&&y.__esModule?y:{default:y}}function p(y,g){if(!(y instanceof g))throw new TypeError("Cannot call a class as a function")}function f(y,g){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:y}function m(y,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);y.prototype=Object.create(g&&g.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(y,g):y.__proto__=g)}var x=(function(y){m(g,y);function g(b,_){p(this,g);var w=f(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,b));return w.label.innerHTML=_,w.container.classList.add("ql-color-picker"),[].slice.call(w.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(S){S.classList.add("ql-primary")}),w}return i(g,[{key:"buildItem",value:function(_){var w=o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"buildItem",this).call(this,_);return w.style.backgroundColor=_.getAttribute("value")||"",w}},{key:"selectItem",value:function(_,w){o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"selectItem",this).call(this,_,w);var S=this.label.querySelector(".ql-color-label"),j=_&&_.getAttribute("data-value")||"";S&&(S.tagName==="line"?S.style.stroke=j:S.style.fill=j)}}]),g})(u.default);s.default=x}),(function(r,s,a){Object.defineProperty(s,"__esModule",{value:!0});var i=(function(){function y(g,b){for(var _=0;_<b.length;_++){var w=b[_];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(g,w.key,w)}}return function(g,b,_){return b&&y(g.prototype,b),_&&y(g,_),g}})(),o=function y(g,b,_){g===null&&(g=Function.prototype);var w=Object.getOwnPropertyDescriptor(g,b);if(w===void 0){var S=Object.getPrototypeOf(g);return S===null?void 0:y(S,b,_)}else{if("value"in w)return w.value;var j=w.get;return j===void 0?void 0:j.call(_)}},l=a(28),u=d(l);function d(y){return y&&y.__esModule?y:{default:y}}function p(y,g){if(!(y instanceof g))throw new TypeError("Cannot call a class as a function")}function f(y,g){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:y}function m(y,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);y.prototype=Object.create(g&&g.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(y,g):y.__proto__=g)}var x=(function(y){m(g,y);function g(b,_){p(this,g);var w=f(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,b));return w.container.classList.add("ql-icon-picker"),[].forEach.call(w.container.querySelectorAll(".ql-picker-item"),function(S){S.innerHTML=_[S.getAttribute("data-value")||""]}),w.defaultItem=w.container.querySelector(".ql-selected"),w.selectItem(w.defaultItem),w}return i(g,[{key:"selectItem",value:function(_,w){o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"selectItem",this).call(this,_,w),_=_||this.defaultItem,this.label.innerHTML=_.innerHTML}}]),g})(u.default);s.default=x}),(function(r,s,a){Object.defineProperty(s,"__esModule",{value:!0});var i=(function(){function u(d,p){for(var f=0;f<p.length;f++){var m=p[f];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(d,m.key,m)}}return function(d,p,f){return p&&u(d.prototype,p),f&&u(d,f),d}})();function o(u,d){if(!(u instanceof d))throw new TypeError("Cannot call a class as a function")}var l=(function(){function u(d,p){var f=this;o(this,u),this.quill=d,this.boundsContainer=p||document.body,this.root=d.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){f.root.style.marginTop=-1*f.quill.root.scrollTop+"px"}),this.hide()}return i(u,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(p){var f=p.left+p.width/2-this.root.offsetWidth/2,m=p.bottom+this.quill.root.scrollTop;this.root.style.left=f+"px",this.root.style.top=m+"px",this.root.classList.remove("ql-flip");var x=this.boundsContainer.getBoundingClientRect(),y=this.root.getBoundingClientRect(),g=0;if(y.right>x.right&&(g=x.right-y.right,this.root.style.left=f+g+"px"),y.left<x.left&&(g=x.left-y.left,this.root.style.left=f+g+"px"),y.bottom>x.bottom){var b=y.bottom-y.top,_=p.bottom-p.top+b;this.root.style.top=m-_+"px",this.root.classList.add("ql-flip")}return g}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),u})();s.default=l}),(function(r,s,a){Object.defineProperty(s,"__esModule",{value:!0});var i=(function(){function A(R,O){var M=[],B=!0,U=!1,Y=void 0;try{for(var W=R[Symbol.iterator](),K;!(B=(K=W.next()).done)&&(M.push(K.value),!(O&&M.length===O));B=!0);}catch(F){U=!0,Y=F}finally{try{!B&&W.return&&W.return()}finally{if(U)throw Y}}return M}return function(R,O){if(Array.isArray(R))return R;if(Symbol.iterator in Object(R))return A(R,O);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=function A(R,O,M){R===null&&(R=Function.prototype);var B=Object.getOwnPropertyDescriptor(R,O);if(B===void 0){var U=Object.getPrototypeOf(R);return U===null?void 0:A(U,O,M)}else{if("value"in B)return B.value;var Y=B.get;return Y===void 0?void 0:Y.call(M)}},l=(function(){function A(R,O){for(var M=0;M<O.length;M++){var B=O[M];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(R,B.key,B)}}return function(R,O,M){return O&&A(R.prototype,O),M&&A(R,M),R}})(),u=a(3),d=S(u),p=a(8),f=S(p),m=a(43),x=S(m),y=a(27),g=S(y),b=a(15),_=a(41),w=S(_);function S(A){return A&&A.__esModule?A:{default:A}}function j(A,R){if(!(A instanceof R))throw new TypeError("Cannot call a class as a function")}function N(A,R){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R&&(typeof R=="object"||typeof R=="function")?R:A}function C(A,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof R);A.prototype=Object.create(R&&R.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),R&&(Object.setPrototypeOf?Object.setPrototypeOf(A,R):A.__proto__=R)}var E=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],T=(function(A){C(R,A);function R(O,M){j(this,R),M.modules.toolbar!=null&&M.modules.toolbar.container==null&&(M.modules.toolbar.container=E);var B=N(this,(R.__proto__||Object.getPrototypeOf(R)).call(this,O,M));return B.quill.container.classList.add("ql-snow"),B}return l(R,[{key:"extendToolbar",value:function(M){M.container.classList.add("ql-snow"),this.buildButtons([].slice.call(M.container.querySelectorAll("button")),w.default),this.buildPickers([].slice.call(M.container.querySelectorAll("select")),w.default),this.tooltip=new I(this.quill,this.options.bounds),M.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(B,U){M.handlers.link.call(M,!U.format.link)})}}]),R})(x.default);T.DEFAULTS=(0,d.default)(!0,{},x.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(R){if(R){var O=this.quill.getSelection();if(O==null||O.length==0)return;var M=this.quill.getText(O);/^\S+@\S+\.\S+$/.test(M)&&M.indexOf("mailto:")!==0&&(M="mailto:"+M);var B=this.quill.theme.tooltip;B.edit("link",M)}else this.quill.format("link",!1)}}}}});var I=(function(A){C(R,A);function R(O,M){j(this,R);var B=N(this,(R.__proto__||Object.getPrototypeOf(R)).call(this,O,M));return B.preview=B.root.querySelector("a.ql-preview"),B}return l(R,[{key:"listen",value:function(){var M=this;o(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(B){M.root.classList.contains("ql-editing")?M.save():M.edit("link",M.preview.textContent),B.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(B){if(M.linkRange!=null){var U=M.linkRange;M.restoreFocus(),M.quill.formatText(U,"link",!1,f.default.sources.USER),delete M.linkRange}B.preventDefault(),M.hide()}),this.quill.on(f.default.events.SELECTION_CHANGE,function(B,U,Y){if(B!=null){if(B.length===0&&Y===f.default.sources.USER){var W=M.quill.scroll.descendant(g.default,B.index),K=i(W,2),F=K[0],H=K[1];if(F!=null){M.linkRange=new b.Range(B.index-H,F.length());var L=g.default.formats(F.domNode);M.preview.textContent=L,M.preview.setAttribute("href",L),M.show(),M.position(M.quill.getBounds(M.linkRange));return}}else delete M.linkRange;M.hide()}})}},{key:"show",value:function(){o(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),R})(m.BaseTooltip);I.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),s.default=T}),(function(r,s,a){Object.defineProperty(s,"__esModule",{value:!0});var i=a(29),o=pe(i),l=a(36),u=a(38),d=a(64),p=a(65),f=pe(p),m=a(66),x=pe(m),y=a(67),g=pe(y),b=a(37),_=a(26),w=a(39),S=a(40),j=a(56),N=pe(j),C=a(68),E=pe(C),T=a(27),I=pe(T),A=a(69),R=pe(A),O=a(70),M=pe(O),B=a(71),U=pe(B),Y=a(72),W=pe(Y),K=a(73),F=pe(K),H=a(13),L=pe(H),q=a(74),z=pe(q),Q=a(75),J=pe(Q),V=a(57),ee=pe(V),te=a(41),oe=pe(te),he=a(28),Ce=pe(he),Fe=a(59),Ae=pe(Fe),Ne=a(60),Be=pe(Ne),St=a(61),ut=pe(St),fe=a(108),xe=pe(fe),ye=a(62),Se=pe(ye);function pe(Ge){return Ge&&Ge.__esModule?Ge:{default:Ge}}o.default.register({"attributors/attribute/direction":u.DirectionAttribute,"attributors/class/align":l.AlignClass,"attributors/class/background":b.BackgroundClass,"attributors/class/color":_.ColorClass,"attributors/class/direction":u.DirectionClass,"attributors/class/font":w.FontClass,"attributors/class/size":S.SizeClass,"attributors/style/align":l.AlignStyle,"attributors/style/background":b.BackgroundStyle,"attributors/style/color":_.ColorStyle,"attributors/style/direction":u.DirectionStyle,"attributors/style/font":w.FontStyle,"attributors/style/size":S.SizeStyle},!0),o.default.register({"formats/align":l.AlignClass,"formats/direction":u.DirectionClass,"formats/indent":d.IndentClass,"formats/background":b.BackgroundStyle,"formats/color":_.ColorStyle,"formats/font":w.FontClass,"formats/size":S.SizeClass,"formats/blockquote":f.default,"formats/code-block":L.default,"formats/header":x.default,"formats/list":g.default,"formats/bold":N.default,"formats/code":H.Code,"formats/italic":E.default,"formats/link":I.default,"formats/script":R.default,"formats/strike":M.default,"formats/underline":U.default,"formats/image":W.default,"formats/video":F.default,"formats/list/item":y.ListItem,"modules/formula":z.default,"modules/syntax":J.default,"modules/toolbar":ee.default,"themes/bubble":xe.default,"themes/snow":Se.default,"ui/icons":oe.default,"ui/picker":Ce.default,"ui/icon-picker":Be.default,"ui/color-picker":Ae.default,"ui/tooltip":ut.default},!0),s.default=o.default}),(function(r,s,a){Object.defineProperty(s,"__esModule",{value:!0}),s.IndentClass=void 0;var i=(function(){function g(b,_){for(var w=0;w<_.length;w++){var S=_[w];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(b,S.key,S)}}return function(b,_,w){return _&&g(b.prototype,_),w&&g(b,w),b}})(),o=function g(b,_,w){b===null&&(b=Function.prototype);var S=Object.getOwnPropertyDescriptor(b,_);if(S===void 0){var j=Object.getPrototypeOf(b);return j===null?void 0:g(j,_,w)}else{if("value"in S)return S.value;var N=S.get;return N===void 0?void 0:N.call(w)}},l=a(0),u=d(l);function d(g){return g&&g.__esModule?g:{default:g}}function p(g,b){if(!(g instanceof b))throw new TypeError("Cannot call a class as a function")}function f(g,b){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:g}function m(g,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);g.prototype=Object.create(b&&b.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(g,b):g.__proto__=b)}var x=(function(g){m(b,g);function b(){return p(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return i(b,[{key:"add",value:function(w,S){if(S==="+1"||S==="-1"){var j=this.value(w)||0;S=S==="+1"?j+1:j-1}return S===0?(this.remove(w),!0):o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"add",this).call(this,w,S)}},{key:"canAdd",value:function(w,S){return o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"canAdd",this).call(this,w,S)||o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"canAdd",this).call(this,w,parseInt(S))}},{key:"value",value:function(w){return parseInt(o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"value",this).call(this,w))||void 0}}]),b})(u.default.Attributor.Class),y=new x("indent","ql-indent",{scope:u.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});s.IndentClass=y}),(function(r,s,a){Object.defineProperty(s,"__esModule",{value:!0});var i=a(4),o=l(i);function l(m){return m&&m.__esModule?m:{default:m}}function u(m,x){if(!(m instanceof x))throw new TypeError("Cannot call a class as a function")}function d(m,x){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:m}function p(m,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);m.prototype=Object.create(x&&x.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(m,x):m.__proto__=x)}var f=(function(m){p(x,m);function x(){return u(this,x),d(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return x})(o.default);f.blotName="blockquote",f.tagName="blockquote",s.default=f}),(function(r,s,a){Object.defineProperty(s,"__esModule",{value:!0});var i=(function(){function x(y,g){for(var b=0;b<g.length;b++){var _=g[b];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(y,_.key,_)}}return function(y,g,b){return g&&x(y.prototype,g),b&&x(y,b),y}})(),o=a(4),l=u(o);function u(x){return x&&x.__esModule?x:{default:x}}function d(x,y){if(!(x instanceof y))throw new TypeError("Cannot call a class as a function")}function p(x,y){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:x}function f(x,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);x.prototype=Object.create(y&&y.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(x,y):x.__proto__=y)}var m=(function(x){f(y,x);function y(){return d(this,y),p(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return i(y,null,[{key:"formats",value:function(b){return this.tagName.indexOf(b.tagName)+1}}]),y})(l.default);m.blotName="header",m.tagName=["H1","H2","H3","H4","H5","H6"],s.default=m}),(function(r,s,a){Object.defineProperty(s,"__esModule",{value:!0}),s.default=s.ListItem=void 0;var i=(function(){function j(N,C){for(var E=0;E<C.length;E++){var T=C[E];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(N,T.key,T)}}return function(N,C,E){return C&&j(N.prototype,C),E&&j(N,E),N}})(),o=function j(N,C,E){N===null&&(N=Function.prototype);var T=Object.getOwnPropertyDescriptor(N,C);if(T===void 0){var I=Object.getPrototypeOf(N);return I===null?void 0:j(I,C,E)}else{if("value"in T)return T.value;var A=T.get;return A===void 0?void 0:A.call(E)}},l=a(0),u=x(l),d=a(4),p=x(d),f=a(25),m=x(f);function x(j){return j&&j.__esModule?j:{default:j}}function y(j,N,C){return N in j?Object.defineProperty(j,N,{value:C,enumerable:!0,configurable:!0,writable:!0}):j[N]=C,j}function g(j,N){if(!(j instanceof N))throw new TypeError("Cannot call a class as a function")}function b(j,N){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:j}function _(j,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);j.prototype=Object.create(N&&N.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(j,N):j.__proto__=N)}var w=(function(j){_(N,j);function N(){return g(this,N),b(this,(N.__proto__||Object.getPrototypeOf(N)).apply(this,arguments))}return i(N,[{key:"format",value:function(E,T){E===S.blotName&&!T?this.replaceWith(u.default.create(this.statics.scope)):o(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"format",this).call(this,E,T)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():o(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(E,T){return this.parent.isolate(this.offset(this.parent),this.length()),E===this.parent.statics.blotName?(this.parent.replaceWith(E,T),this):(this.parent.unwrap(),o(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"replaceWith",this).call(this,E,T))}}],[{key:"formats",value:function(E){return E.tagName===this.tagName?void 0:o(N.__proto__||Object.getPrototypeOf(N),"formats",this).call(this,E)}}]),N})(p.default);w.blotName="list-item",w.tagName="LI";var S=(function(j){_(N,j),i(N,null,[{key:"create",value:function(E){var T=E==="ordered"?"OL":"UL",I=o(N.__proto__||Object.getPrototypeOf(N),"create",this).call(this,T);return(E==="checked"||E==="unchecked")&&I.setAttribute("data-checked",E==="checked"),I}},{key:"formats",value:function(E){if(E.tagName==="OL")return"ordered";if(E.tagName==="UL")return E.hasAttribute("data-checked")?E.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function N(C){g(this,N);var E=b(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,C)),T=function(A){if(A.target.parentNode===C){var R=E.statics.formats(C),O=u.default.find(A.target);R==="checked"?O.format("list","unchecked"):R==="unchecked"&&O.format("list","checked")}};return C.addEventListener("touchstart",T),C.addEventListener("mousedown",T),E}return i(N,[{key:"format",value:function(E,T){this.children.length>0&&this.children.tail.format(E,T)}},{key:"formats",value:function(){return y({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(E,T){if(E instanceof w)o(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"insertBefore",this).call(this,E,T);else{var I=T==null?this.length():T.offset(this),A=this.split(I);A.parent.insertBefore(E,A)}}},{key:"optimize",value:function(E){o(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"optimize",this).call(this,E);var T=this.next;T!=null&&T.prev===this&&T.statics.blotName===this.statics.blotName&&T.domNode.tagName===this.domNode.tagName&&T.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(T.moveChildren(this),T.remove())}},{key:"replace",value:function(E){if(E.statics.blotName!==this.statics.blotName){var T=u.default.create(this.statics.defaultChild);E.moveChildren(T),this.appendChild(T)}o(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"replace",this).call(this,E)}}]),N})(m.default);S.blotName="list",S.scope=u.default.Scope.BLOCK_BLOT,S.tagName=["OL","UL"],S.defaultChild="list-item",S.allowedChildren=[w],s.ListItem=w,s.default=S}),(function(r,s,a){Object.defineProperty(s,"__esModule",{value:!0});var i=a(56),o=l(i);function l(m){return m&&m.__esModule?m:{default:m}}function u(m,x){if(!(m instanceof x))throw new TypeError("Cannot call a class as a function")}function d(m,x){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:m}function p(m,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);m.prototype=Object.create(x&&x.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(m,x):m.__proto__=x)}var f=(function(m){p(x,m);function x(){return u(this,x),d(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return x})(o.default);f.blotName="italic",f.tagName=["EM","I"],s.default=f}),(function(r,s,a){Object.defineProperty(s,"__esModule",{value:!0});var i=(function(){function y(g,b){for(var _=0;_<b.length;_++){var w=b[_];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(g,w.key,w)}}return function(g,b,_){return b&&y(g.prototype,b),_&&y(g,_),g}})(),o=function y(g,b,_){g===null&&(g=Function.prototype);var w=Object.getOwnPropertyDescriptor(g,b);if(w===void 0){var S=Object.getPrototypeOf(g);return S===null?void 0:y(S,b,_)}else{if("value"in w)return w.value;var j=w.get;return j===void 0?void 0:j.call(_)}},l=a(6),u=d(l);function d(y){return y&&y.__esModule?y:{default:y}}function p(y,g){if(!(y instanceof g))throw new TypeError("Cannot call a class as a function")}function f(y,g){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:y}function m(y,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);y.prototype=Object.create(g&&g.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(y,g):y.__proto__=g)}var x=(function(y){m(g,y);function g(){return p(this,g),f(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return i(g,null,[{key:"create",value:function(_){return _==="super"?document.createElement("sup"):_==="sub"?document.createElement("sub"):o(g.__proto__||Object.getPrototypeOf(g),"create",this).call(this,_)}},{key:"formats",value:function(_){if(_.tagName==="SUB")return"sub";if(_.tagName==="SUP")return"super"}}]),g})(u.default);x.blotName="script",x.tagName=["SUB","SUP"],s.default=x}),(function(r,s,a){Object.defineProperty(s,"__esModule",{value:!0});var i=a(6),o=l(i);function l(m){return m&&m.__esModule?m:{default:m}}function u(m,x){if(!(m instanceof x))throw new TypeError("Cannot call a class as a function")}function d(m,x){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:m}function p(m,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);m.prototype=Object.create(x&&x.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(m,x):m.__proto__=x)}var f=(function(m){p(x,m);function x(){return u(this,x),d(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return x})(o.default);f.blotName="strike",f.tagName="S",s.default=f}),(function(r,s,a){Object.defineProperty(s,"__esModule",{value:!0});var i=a(6),o=l(i);function l(m){return m&&m.__esModule?m:{default:m}}function u(m,x){if(!(m instanceof x))throw new TypeError("Cannot call a class as a function")}function d(m,x){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:m}function p(m,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);m.prototype=Object.create(x&&x.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(m,x):m.__proto__=x)}var f=(function(m){p(x,m);function x(){return u(this,x),d(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return x})(o.default);f.blotName="underline",f.tagName="U",s.default=f}),(function(r,s,a){Object.defineProperty(s,"__esModule",{value:!0});var i=(function(){function b(_,w){for(var S=0;S<w.length;S++){var j=w[S];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(_,j.key,j)}}return function(_,w,S){return w&&b(_.prototype,w),S&&b(_,S),_}})(),o=function b(_,w,S){_===null&&(_=Function.prototype);var j=Object.getOwnPropertyDescriptor(_,w);if(j===void 0){var N=Object.getPrototypeOf(_);return N===null?void 0:b(N,w,S)}else{if("value"in j)return j.value;var C=j.get;return C===void 0?void 0:C.call(S)}},l=a(0),u=p(l),d=a(27);function p(b){return b&&b.__esModule?b:{default:b}}function f(b,_){if(!(b instanceof _))throw new TypeError("Cannot call a class as a function")}function m(b,_){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:b}function x(b,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);b.prototype=Object.create(_&&_.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(b,_):b.__proto__=_)}var y=["alt","height","width"],g=(function(b){x(_,b);function _(){return f(this,_),m(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return i(_,[{key:"format",value:function(S,j){y.indexOf(S)>-1?j?this.domNode.setAttribute(S,j):this.domNode.removeAttribute(S):o(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"format",this).call(this,S,j)}}],[{key:"create",value:function(S){var j=o(_.__proto__||Object.getPrototypeOf(_),"create",this).call(this,S);return typeof S=="string"&&j.setAttribute("src",this.sanitize(S)),j}},{key:"formats",value:function(S){return y.reduce(function(j,N){return S.hasAttribute(N)&&(j[N]=S.getAttribute(N)),j},{})}},{key:"match",value:function(S){return/\.(jpe?g|gif|png)$/.test(S)||/^data:image\/.+;base64/.test(S)}},{key:"sanitize",value:function(S){return(0,d.sanitize)(S,["http","https","data"])?S:"//:0"}},{key:"value",value:function(S){return S.getAttribute("src")}}]),_})(u.default.Embed);g.blotName="image",g.tagName="IMG",s.default=g}),(function(r,s,a){Object.defineProperty(s,"__esModule",{value:!0});var i=(function(){function b(_,w){for(var S=0;S<w.length;S++){var j=w[S];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(_,j.key,j)}}return function(_,w,S){return w&&b(_.prototype,w),S&&b(_,S),_}})(),o=function b(_,w,S){_===null&&(_=Function.prototype);var j=Object.getOwnPropertyDescriptor(_,w);if(j===void 0){var N=Object.getPrototypeOf(_);return N===null?void 0:b(N,w,S)}else{if("value"in j)return j.value;var C=j.get;return C===void 0?void 0:C.call(S)}},l=a(4),u=a(27),d=p(u);function p(b){return b&&b.__esModule?b:{default:b}}function f(b,_){if(!(b instanceof _))throw new TypeError("Cannot call a class as a function")}function m(b,_){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:b}function x(b,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);b.prototype=Object.create(_&&_.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(b,_):b.__proto__=_)}var y=["height","width"],g=(function(b){x(_,b);function _(){return f(this,_),m(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return i(_,[{key:"format",value:function(S,j){y.indexOf(S)>-1?j?this.domNode.setAttribute(S,j):this.domNode.removeAttribute(S):o(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"format",this).call(this,S,j)}}],[{key:"create",value:function(S){var j=o(_.__proto__||Object.getPrototypeOf(_),"create",this).call(this,S);return j.setAttribute("frameborder","0"),j.setAttribute("allowfullscreen",!0),j.setAttribute("src",this.sanitize(S)),j}},{key:"formats",value:function(S){return y.reduce(function(j,N){return S.hasAttribute(N)&&(j[N]=S.getAttribute(N)),j},{})}},{key:"sanitize",value:function(S){return d.default.sanitize(S)}},{key:"value",value:function(S){return S.getAttribute("src")}}]),_})(l.BlockEmbed);g.blotName="video",g.className="ql-video",g.tagName="IFRAME",s.default=g}),(function(r,s,a){Object.defineProperty(s,"__esModule",{value:!0}),s.default=s.FormulaBlot=void 0;var i=(function(){function S(j,N){for(var C=0;C<N.length;C++){var E=N[C];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(j,E.key,E)}}return function(j,N,C){return N&&S(j.prototype,N),C&&S(j,C),j}})(),o=function S(j,N,C){j===null&&(j=Function.prototype);var E=Object.getOwnPropertyDescriptor(j,N);if(E===void 0){var T=Object.getPrototypeOf(j);return T===null?void 0:S(T,N,C)}else{if("value"in E)return E.value;var I=E.get;return I===void 0?void 0:I.call(C)}},l=a(35),u=x(l),d=a(5),p=x(d),f=a(9),m=x(f);function x(S){return S&&S.__esModule?S:{default:S}}function y(S,j){if(!(S instanceof j))throw new TypeError("Cannot call a class as a function")}function g(S,j){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j&&(typeof j=="object"||typeof j=="function")?j:S}function b(S,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof j);S.prototype=Object.create(j&&j.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(S,j):S.__proto__=j)}var _=(function(S){b(j,S);function j(){return y(this,j),g(this,(j.__proto__||Object.getPrototypeOf(j)).apply(this,arguments))}return i(j,null,[{key:"create",value:function(C){var E=o(j.__proto__||Object.getPrototypeOf(j),"create",this).call(this,C);return typeof C=="string"&&(window.katex.render(C,E,{throwOnError:!1,errorColor:"#f00"}),E.setAttribute("data-value",C)),E}},{key:"value",value:function(C){return C.getAttribute("data-value")}}]),j})(u.default);_.blotName="formula",_.className="ql-formula",_.tagName="SPAN";var w=(function(S){b(j,S),i(j,null,[{key:"register",value:function(){p.default.register(_,!0)}}]);function j(){y(this,j);var N=g(this,(j.__proto__||Object.getPrototypeOf(j)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return N}return j})(m.default);s.FormulaBlot=_,s.default=w}),(function(r,s,a){Object.defineProperty(s,"__esModule",{value:!0}),s.default=s.CodeToken=s.CodeBlock=void 0;var i=(function(){function C(E,T){for(var I=0;I<T.length;I++){var A=T[I];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(E,A.key,A)}}return function(E,T,I){return T&&C(E.prototype,T),I&&C(E,I),E}})(),o=function C(E,T,I){E===null&&(E=Function.prototype);var A=Object.getOwnPropertyDescriptor(E,T);if(A===void 0){var R=Object.getPrototypeOf(E);return R===null?void 0:C(R,T,I)}else{if("value"in A)return A.value;var O=A.get;return O===void 0?void 0:O.call(I)}},l=a(0),u=g(l),d=a(5),p=g(d),f=a(9),m=g(f),x=a(13),y=g(x);function g(C){return C&&C.__esModule?C:{default:C}}function b(C,E){if(!(C instanceof E))throw new TypeError("Cannot call a class as a function")}function _(C,E){if(!C)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:C}function w(C,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);C.prototype=Object.create(E&&E.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(C,E):C.__proto__=E)}var S=(function(C){w(E,C);function E(){return b(this,E),_(this,(E.__proto__||Object.getPrototypeOf(E)).apply(this,arguments))}return i(E,[{key:"replaceWith",value:function(I){this.domNode.textContent=this.domNode.textContent,this.attach(),o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"replaceWith",this).call(this,I)}},{key:"highlight",value:function(I){var A=this.domNode.textContent;this.cachedText!==A&&((A.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=I(A),this.domNode.normalize(),this.attach()),this.cachedText=A)}}]),E})(y.default);S.className="ql-syntax";var j=new u.default.Attributor.Class("token","hljs",{scope:u.default.Scope.INLINE}),N=(function(C){w(E,C),i(E,null,[{key:"register",value:function(){p.default.register(j,!0),p.default.register(S,!0)}}]);function E(T,I){b(this,E);var A=_(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,T,I));if(typeof A.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var R=null;return A.quill.on(p.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(R),R=setTimeout(function(){A.highlight(),R=null},A.options.interval)}),A.highlight(),A}return i(E,[{key:"highlight",value:function(){var I=this;if(!this.quill.selection.composing){this.quill.update(p.default.sources.USER);var A=this.quill.getSelection();this.quill.scroll.descendants(S).forEach(function(R){R.highlight(I.options.highlight)}),this.quill.update(p.default.sources.SILENT),A!=null&&this.quill.setSelection(A,p.default.sources.SILENT)}}}]),E})(m.default);N.DEFAULTS={highlight:(function(){return window.hljs==null?null:function(C){var E=window.hljs.highlightAuto(C);return E.value}})(),interval:1e3},s.CodeBlock=S,s.CodeToken=j,s.default=N}),(function(r,s){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'}),(function(r,s){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'}),(function(r,s){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'}),(function(r,s){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'}),(function(r,s){r.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'}),(function(r,s){r.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'}),(function(r,s){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'}),(function(r,s){r.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'}),(function(r,s){r.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'}),(function(r,s){r.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'}),(function(r,s){r.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'}),(function(r,s){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'}),(function(r,s){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'}),(function(r,s){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'}),(function(r,s){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'}),(function(r,s){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'}),(function(r,s){r.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'}),(function(r,s){r.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'}),(function(r,s){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'}),(function(r,s){r.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'}),(function(r,s){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'}),(function(r,s){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'}),(function(r,s){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'}),(function(r,s){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'}),(function(r,s){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'}),(function(r,s){r.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'}),(function(r,s){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'}),(function(r,s){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'}),(function(r,s){r.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'}),(function(r,s){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'}),(function(r,s){r.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'}),(function(r,s){r.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'}),(function(r,s,a){Object.defineProperty(s,"__esModule",{value:!0}),s.default=s.BubbleTooltip=void 0;var i=function E(T,I,A){T===null&&(T=Function.prototype);var R=Object.getOwnPropertyDescriptor(T,I);if(R===void 0){var O=Object.getPrototypeOf(T);return O===null?void 0:E(O,I,A)}else{if("value"in R)return R.value;var M=R.get;return M===void 0?void 0:M.call(A)}},o=(function(){function E(T,I){for(var A=0;A<I.length;A++){var R=I[A];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(T,R.key,R)}}return function(T,I,A){return I&&E(T.prototype,I),A&&E(T,A),T}})(),l=a(3),u=b(l),d=a(8),p=b(d),f=a(43),m=b(f),x=a(15),y=a(41),g=b(y);function b(E){return E&&E.__esModule?E:{default:E}}function _(E,T){if(!(E instanceof T))throw new TypeError("Cannot call a class as a function")}function w(E,T){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:E}function S(E,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);E.prototype=Object.create(T&&T.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(E,T):E.__proto__=T)}var j=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],N=(function(E){S(T,E);function T(I,A){_(this,T),A.modules.toolbar!=null&&A.modules.toolbar.container==null&&(A.modules.toolbar.container=j);var R=w(this,(T.__proto__||Object.getPrototypeOf(T)).call(this,I,A));return R.quill.container.classList.add("ql-bubble"),R}return o(T,[{key:"extendToolbar",value:function(A){this.tooltip=new C(this.quill,this.options.bounds),this.tooltip.root.appendChild(A.container),this.buildButtons([].slice.call(A.container.querySelectorAll("button")),g.default),this.buildPickers([].slice.call(A.container.querySelectorAll("select")),g.default)}}]),T})(m.default);N.DEFAULTS=(0,u.default)(!0,{},m.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(T){T?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var C=(function(E){S(T,E);function T(I,A){_(this,T);var R=w(this,(T.__proto__||Object.getPrototypeOf(T)).call(this,I,A));return R.quill.on(p.default.events.EDITOR_CHANGE,function(O,M,B,U){if(O===p.default.events.SELECTION_CHANGE)if(M!=null&&M.length>0&&U===p.default.sources.USER){R.show(),R.root.style.left="0px",R.root.style.width="",R.root.style.width=R.root.offsetWidth+"px";var Y=R.quill.getLines(M.index,M.length);if(Y.length===1)R.position(R.quill.getBounds(M));else{var W=Y[Y.length-1],K=R.quill.getIndex(W),F=Math.min(W.length()-1,M.index+M.length-K),H=R.quill.getBounds(new x.Range(K,F));R.position(H)}}else document.activeElement!==R.textbox&&R.quill.hasFocus()&&R.hide()}),R}return o(T,[{key:"listen",value:function(){var A=this;i(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){A.root.classList.remove("ql-editing")}),this.quill.on(p.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!A.root.classList.contains("ql-hidden")){var R=A.quill.getSelection();R!=null&&A.position(A.quill.getBounds(R))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(A){var R=i(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"position",this).call(this,A),O=this.root.querySelector(".ql-tooltip-arrow");if(O.style.marginLeft="",R===0)return R;O.style.marginLeft=-1*R-O.offsetWidth/2+"px"}}]),T})(f.BaseTooltip);C.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),s.BubbleTooltip=C,s.default=N}),(function(r,s,a){r.exports=a(63)})]).default})})(Tm)),Tm.exports}var js,sC;function Uce(){if(sC)return js;sC=1;var e=js&&js.__extends||(function(){var p=function(f,m){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,y){x.__proto__=y}||function(x,y){for(var g in y)y.hasOwnProperty(g)&&(x[g]=y[g])},p(f,m)};return function(f,m){p(f,m);function x(){this.constructor=f}f.prototype=m===null?Object.create(m):(x.prototype=m.prototype,new x)}})(),t=js&&js.__assign||function(){return t=Object.assign||function(p){for(var f,m=1,x=arguments.length;m<x;m++){f=arguments[m];for(var y in f)Object.prototype.hasOwnProperty.call(f,y)&&(p[y]=f[y])}return p},t.apply(this,arguments)},r=js&&js.__spreadArrays||function(){for(var p=0,f=0,m=arguments.length;f<m;f++)p+=arguments[f].length;for(var x=Array(p),y=0,f=0;f<m;f++)for(var g=arguments[f],b=0,_=g.length;b<_;b++,y++)x[y]=g[b];return x},s=js&&js.__importDefault||function(p){return p&&p.__esModule?p:{default:p}},a=s(gp()),i=s(kC()),o=s($ce()),l=s(Fce()),u=(function(p){e(f,p);function f(m){var x=p.call(this,m)||this;x.dirtyProps=["modules","formats","bounds","theme","children"],x.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],x.state={generation:0},x.selection=null,x.onEditorChange=function(g,b,_,w){var S,j,N,C;g==="text-change"?(j=(S=x).onEditorChangeText)===null||j===void 0||j.call(S,x.editor.root.innerHTML,b,w,x.unprivilegedEditor):g==="selection-change"&&((C=(N=x).onEditorChangeSelection)===null||C===void 0||C.call(N,b,w,x.unprivilegedEditor))};var y=x.isControlled()?m.value:m.defaultValue;return x.value=y??"",x}return f.prototype.validateProps=function(m){var x;if(a.default.Children.count(m.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(a.default.Children.count(m.children)){var y=a.default.Children.only(m.children);if(((x=y)===null||x===void 0?void 0:x.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&m.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},f.prototype.shouldComponentUpdate=function(m,x){var y=this,g;if(this.validateProps(m),!this.editor||this.state.generation!==x.generation)return!0;if("value"in m){var b=this.getEditorContents(),_=(g=m.value,g??"");this.isEqualValue(_,b)||this.setEditorContents(this.editor,_)}return m.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,m.readOnly),r(this.cleanProps,this.dirtyProps).some(function(w){return!o.default(m[w],y.props[w])})},f.prototype.shouldComponentRegenerate=function(m){var x=this;return this.dirtyProps.some(function(y){return!o.default(m[y],x.props[y])})},f.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},f.prototype.componentWillUnmount=function(){this.destroyEditor()},f.prototype.componentDidUpdate=function(m,x){var y=this;if(this.editor&&this.shouldComponentRegenerate(m)){var g=this.editor.getContents(),b=this.editor.getSelection();this.regenerationSnapshot={delta:g,selection:b},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==x.generation){var _=this.regenerationSnapshot,g=_.delta,w=_.selection;delete this.regenerationSnapshot,this.instantiateEditor();var S=this.editor;S.setContents(g),d(function(){return y.setEditorSelection(S,w)})}},f.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},f.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},f.prototype.isControlled=function(){return"value"in this.props},f.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},f.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},f.prototype.createEditor=function(m,x){var y=new l.default(m,x);return x.tabIndex!=null&&this.setEditorTabIndex(y,x.tabIndex),this.hookEditor(y),y},f.prototype.hookEditor=function(m){this.unprivilegedEditor=this.makeUnprivilegedEditor(m),m.on("editor-change",this.onEditorChange)},f.prototype.unhookEditor=function(m){m.off("editor-change",this.onEditorChange)},f.prototype.getEditorContents=function(){return this.value},f.prototype.getEditorSelection=function(){return this.selection},f.prototype.isDelta=function(m){return m&&m.ops},f.prototype.isEqualValue=function(m,x){return this.isDelta(m)&&this.isDelta(x)?o.default(m.ops,x.ops):o.default(m,x)},f.prototype.setEditorContents=function(m,x){var y=this;this.value=x;var g=this.getEditorSelection();typeof x=="string"?m.setContents(m.clipboard.convert(x)):m.setContents(x),d(function(){return y.setEditorSelection(m,g)})},f.prototype.setEditorSelection=function(m,x){if(this.selection=x,x){var y=m.getLength();x.index=Math.max(0,Math.min(x.index,y-1)),x.length=Math.max(0,Math.min(x.length,y-1-x.index)),m.setSelection(x)}},f.prototype.setEditorTabIndex=function(m,x){var y,g;!((g=(y=m)===null||y===void 0?void 0:y.scroll)===null||g===void 0)&&g.domNode&&(m.scroll.domNode.tabIndex=x)},f.prototype.setEditorReadOnly=function(m,x){x?m.disable():m.enable()},f.prototype.makeUnprivilegedEditor=function(m){var x=m;return{getHTML:function(){return x.root.innerHTML},getLength:x.getLength.bind(x),getText:x.getText.bind(x),getContents:x.getContents.bind(x),getSelection:x.getSelection.bind(x),getBounds:x.getBounds.bind(x)}},f.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var m=i.default.findDOMNode(this.editingArea);if(!m)throw new Error("Cannot find element for editing area");if(m.nodeType===3)throw new Error("Editing area cannot be a text node");return m},f.prototype.renderEditingArea=function(){var m=this,x=this.props,y=x.children,g=x.preserveWhitespace,b=this.state.generation,_={key:b,ref:function(w){m.editingArea=w}};return a.default.Children.count(y)?a.default.cloneElement(a.default.Children.only(y),_):g?a.default.createElement("pre",t({},_)):a.default.createElement("div",t({},_))},f.prototype.render=function(){var m;return a.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(m=this.props.className,m??""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},f.prototype.onEditorChangeText=function(m,x,y,g){var b,_;if(this.editor){var w=this.isDelta(this.value)?g.getContents():g.getHTML();w!==this.getEditorContents()&&(this.lastDeltaChangeSet=x,this.value=w,(_=(b=this.props).onChange)===null||_===void 0||_.call(b,m,x,y,g))}},f.prototype.onEditorChangeSelection=function(m,x,y){var g,b,_,w,S,j;if(this.editor){var N=this.getEditorSelection(),C=!N&&m,E=N&&!m;o.default(m,N)||(this.selection=m,(b=(g=this.props).onChangeSelection)===null||b===void 0||b.call(g,m,x,y),C?(w=(_=this.props).onFocus)===null||w===void 0||w.call(_,m,x,y):E&&((j=(S=this.props).onBlur)===null||j===void 0||j.call(S,N,x,y)))}},f.prototype.focus=function(){this.editor&&this.editor.focus()},f.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},f.displayName="React Quill",f.Quill=l.default,f.defaultProps={theme:"snow",modules:{},readOnly:!1},f})(a.default.Component);function d(p){Promise.resolve().then(p)}return js=u,js}var Bce=Uce();const iu=ww(Bce),Hce={toolbar:[["bold","italic","underline"],[{list:"ordered"},{list:"bullet"}],["link"],["clean"]]},Kce=["bold","italic","underline","list","bullet","link"];function zce({formData:e,onFormChange:t,onSave:r,onCancel:s,isPending:a,tribes:i}){var o;return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated max-w-lg w-full p-6 animate-slide-up my-8",children:[n.jsx("h3",{className:"text-xl font-display text-neutral-800 mb-6",children:"Edit Castaway"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Photo URL"}),n.jsx("input",{type:"url",value:e.photo_url,onChange:l=>t({...e,photo_url:l.target.value}),placeholder:"https://example.com/photo.jpg",className:"w-full p-3 border border-cream-200 rounded-xl focus:ring-2 focus:ring-burgundy-500"}),e.photo_url&&n.jsxs("div",{className:"mt-2 flex items-center gap-3",children:[n.jsx("img",{src:e.photo_url,alt:"Preview",className:"w-16 h-16 rounded-xl object-cover border border-cream-200",onError:l=>{l.target.style.display="none"}}),n.jsx("span",{className:"text-xs text-green-600",children:"Preview"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Name"}),n.jsx("input",{type:"text",value:e.name,onChange:l=>t({...e,name:l.target.value}),className:"w-full p-3 border border-cream-200 rounded-xl focus:ring-2 focus:ring-burgundy-500"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Age"}),n.jsx("input",{type:"number",value:e.age,onChange:l=>t({...e,age:l.target.value}),className:"w-full p-3 border border-cream-200 rounded-xl focus:ring-2 focus:ring-burgundy-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Hometown"}),n.jsx("input",{type:"text",value:e.hometown,onChange:l=>t({...e,hometown:l.target.value}),className:"w-full p-3 border border-cream-200 rounded-xl focus:ring-2 focus:ring-burgundy-500"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Occupation"}),n.jsx("input",{type:"text",value:e.occupation,onChange:l=>t({...e,occupation:l.target.value}),className:"w-full p-3 border border-cream-200 rounded-xl focus:ring-2 focus:ring-burgundy-500"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-neutral-700 mb-1 flex items-center gap-2",children:[n.jsx(Ke,{className:"h-4 w-4 text-teal-500"}),"Original Tribe"]}),i&&i.length>0?n.jsxs("div",{className:"space-y-2",children:[n.jsxs("select",{value:e.tribe_original,onChange:l=>t({...e,tribe_original:l.target.value}),className:"w-full p-3 border border-cream-200 rounded-xl focus:ring-2 focus:ring-burgundy-500",children:[n.jsx("option",{value:"",children:"Select a tribe..."}),i.map(l=>n.jsx("option",{value:l.name,children:l.name},l.id))]}),e.tribe_original&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-4 h-4 rounded-full border",style:{backgroundColor:((o=i.find(l=>l.name===e.tribe_original))==null?void 0:o.color)||"#888"}}),n.jsx("span",{className:"text-sm text-neutral-600",children:e.tribe_original})]})]}):n.jsx("input",{type:"text",value:e.tribe_original,onChange:l=>t({...e,tribe_original:l.target.value}),placeholder:"e.g., Vatu",className:"w-full p-3 border border-cream-200 rounded-xl focus:ring-2 focus:ring-burgundy-500"})]}),n.jsxs("div",{className:"border-t border-cream-200 pt-4 mt-4",children:[n.jsxs("h4",{className:"font-medium text-neutral-800 mb-3 flex items-center gap-2",children:[n.jsx(Pd,{className:"h-4 w-4 text-purple-500"}),"Returning Player Info"]}),n.jsxs("div",{className:"mb-4",children:[n.jsxs("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:["Previous Seasons"," ",n.jsx("span",{className:"text-neutral-400 font-normal",children:"(comma-separated)"})]}),n.jsx("input",{type:"text",value:e.previous_seasons,onChange:l=>t({...e,previous_seasons:l.target.value}),placeholder:"Heroes vs. Villains, Winners at War",className:"w-full p-3 border border-cream-200 rounded-xl focus:ring-2 focus:ring-burgundy-500"})]}),n.jsxs("div",{className:"mb-4",children:[n.jsxs("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:["Best Placement ",n.jsx("span",{className:"text-neutral-400 font-normal",children:"(1 = winner)"})]}),n.jsx("input",{type:"number",min:"1",value:e.best_placement,onChange:l=>t({...e,best_placement:l.target.value}),placeholder:"1",className:"w-full p-3 border border-cream-200 rounded-xl focus:ring-2 focus:ring-burgundy-500"}),e.best_placement==="1"&&n.jsxs("p",{className:"text-xs text-yellow-600 mt-1 flex items-center gap-1",children:[n.jsx(ot,{className:"h-3 w-3"})," Will show winner badge"]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Fun Fact"}),n.jsx("div",{className:"border border-cream-200 rounded-xl overflow-hidden",children:n.jsx(iu,{theme:"snow",value:e.fun_fact,onChange:l=>t({...e,fun_fact:l}),modules:Hce,formats:Kce,placeholder:"Interesting trivia about this castaway...",className:"quill-castaway"})}),n.jsx("p",{className:"text-xs text-neutral-500 mt-1",children:"Use the toolbar to format text with bold, italic, lists, and links."})]})]}),n.jsxs("div",{className:"flex gap-3 mt-6",children:[n.jsx("button",{onClick:s,className:"flex-1 btn bg-cream-100 text-neutral-700 hover:bg-cream-200",children:"Cancel"}),n.jsx("button",{onClick:r,disabled:a||!e.name,className:"flex-1 btn bg-burgundy-600 text-white hover:bg-burgundy-700 disabled:opacity-50",children:a?"Saving...":"Save Changes"})]})]})})}function Wce({missingPhotosCount:e,onAutoPopulatePhotos:t,isPending:r}){return e===0?null:n.jsx("button",{onClick:t,disabled:r,className:"btn bg-purple-600 text-white hover:bg-purple-700 disabled:opacity-50 flex items-center gap-2",children:r?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Populating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(zn,{className:"h-4 w-4"}),"Auto-Populate ",e," Photos"]})})}const Gce="https://rgfl-api-production.up.railway.app";async function Zf(e,t){var i;const s=(i=(await X.auth.getSession()).data.session)==null?void 0:i.access_token;if(!s)throw new Error("Not authenticated");const a=await fetch(`${Gce}${e}`,{...t,headers:{...t==null?void 0:t.headers,Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});if(!a.ok){const o=await a.json().catch(()=>({}));throw new Error(o.error||`API error: ${a.status}`)}return a.json()}function aC(){var A;const{user:e}=Et(),t=at(),[r,s]=$.useState(null),[a,i]=$.useState(null),[o,l]=$.useState(""),[u,d]=$.useState({name:"",age:"",hometown:"",occupation:"",photo_url:"",tribe_original:"",previous_seasons:"",best_placement:"",fun_fact:""}),{data:p}=ie({queryKey:["profile",e==null?void 0:e.id],queryFn:async()=>{const{data:R,error:O}=await X.from("users").select("id, display_name, role").eq("id",e.id).single();if(O)throw O;return R},enabled:!!(e!=null&&e.id)}),{data:f}=ie({queryKey:["activeSeason"],queryFn:async()=>{const{data:R,error:O}=await X.from("seasons").select("*").eq("is_active",!0).single();if(O&&O.code!=="PGRST116")throw O;return R}}),{data:m,isLoading:x}=ie({queryKey:["castaways",f==null?void 0:f.id],queryFn:async()=>{if(!(f!=null&&f.id))return[];const{data:R,error:O}=await X.from("castaways").select("*").eq("season_id",f.id).order("name");if(O)throw O;return R},enabled:!!(f!=null&&f.id)}),{data:y}=ie({queryKey:["episodes",f==null?void 0:f.id],queryFn:async()=>{if(!(f!=null&&f.id))return[];const{data:R,error:O}=await X.from("episodes").select("id, number, title").eq("season_id",f.id).order("number");if(O)throw O;return R},enabled:!!(f!=null&&f.id)}),{data:g}=ie({queryKey:["tribes",f==null?void 0:f.id],queryFn:async()=>{if(!(f!=null&&f.id))return[];const{data:R,error:O}=await X.from("tribes").select("*").eq("season_id",f.id).eq("is_active",!0).order("display_order");if(O)throw O;return R},enabled:!!(f!=null&&f.id)}),b=ke({mutationFn:async({castawayId:R,episodeId:O,placement:M})=>Zf(`/api/admin/castaways/${R}/eliminate`,{method:"POST",body:JSON.stringify({episode_id:O,placement:M})}),onSuccess:()=>{t.invalidateQueries({queryKey:["castaways"]}),i(null),l("")}}),_=ke({mutationFn:async R=>Zf(`/api/admin/castaways/${R}`,{method:"PATCH",body:JSON.stringify({status:"active",eliminated_episode_id:null,placement:null})}),onSuccess:()=>{t.invalidateQueries({queryKey:["castaways"]})}}),w=ke({mutationFn:async({castawayId:R,data:O})=>Zf(`/api/admin/castaways/${R}`,{method:"PATCH",body:JSON.stringify(O)}),onSuccess:()=>{t.invalidateQueries({queryKey:["castaways"]}),s(null)}}),S=R=>{var O,M,B;s(R.id),d({name:R.name,age:((O=R.age)==null?void 0:O.toString())||"",hometown:R.hometown||"",occupation:R.occupation||"",photo_url:R.photo_url||"",tribe_original:R.tribe_original||"",previous_seasons:((M=R.previous_seasons)==null?void 0:M.join(", "))||"",best_placement:((B=R.best_placement)==null?void 0:B.toString())||"",fun_fact:R.fun_fact||""})},j=()=>{if(!r)return;const R=u.previous_seasons?u.previous_seasons.split(",").map(B=>B.trim()).filter(B=>B):null,O=u.age?parseInt(u.age):null;if(O!==null&&(isNaN(O)||O<1||O>120)){alert("Age must be a valid number between 1 and 120");return}const M=u.best_placement?parseInt(u.best_placement):null;if(M!==null&&(isNaN(M)||M<1||M>24)){alert("Best placement must be between 1 and 24");return}w.mutate({castawayId:r,data:{name:u.name,age:O,hometown:u.hometown||null,occupation:u.occupation||null,photo_url:u.photo_url||null,tribe_original:u.tribe_original||null,previous_seasons:R,best_placement:M,fun_fact:u.fun_fact||null}})},N=R=>`https://api.dicebear.com/7.x/initials/svg?seed=${encodeURIComponent(R)}&backgroundColor=8B0000&textColor=ffffff&fontSize=40`,C=ke({mutationFn:async()=>{if(!m)return{updated:0};const R=m.filter(O=>!O.photo_url).map(O=>({id:O.id,photo_url:N(O.name)}));for(const O of R)await Zf(`/api/admin/castaways/${O.id}`,{method:"PATCH",body:JSON.stringify({photo_url:O.photo_url})});return{updated:R.length}},onSuccess:()=>{t.invalidateQueries({queryKey:["castaways"]})}}),E=(m==null?void 0:m.filter(R=>!R.photo_url).length)||0,T=(m==null?void 0:m.filter(R=>R.status==="active"))||[],I=(m==null?void 0:m.filter(R=>R.status==="eliminated"))||[];return p&&p.role!=="admin"?n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200",children:[n.jsx(_e,{}),n.jsx(dt,{}),n.jsx("main",{className:"max-w-4xl mx-auto px-4 py-16 text-center",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated p-12",children:[n.jsx("h1",{className:"text-2xl font-display text-neutral-800 mb-3",children:"Access Denied"}),n.jsx(se,{to:"/dashboard",className:"btn btn-primary",children:"Back to Dashboard"})]})})]}):n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200",children:[n.jsx(_e,{}),n.jsx(dt,{}),n.jsxs("main",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"flex items-center justify-between mb-8 animate-fade-in",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(se,{to:"/admin",className:"text-neutral-400 hover:text-neutral-600 transition-colors",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),n.jsx("h1",{className:"text-2xl font-display text-neutral-800",children:"Manage Castaways"})]}),n.jsxs("p",{className:"text-neutral-500",children:[T.length," active, ",I.length," eliminated"]})]}),n.jsx(Wce,{missingPhotosCount:E,onAutoPopulatePhotos:()=>C.mutate(),isPending:C.isPending})]}),n.jsx("div",{className:"mb-8",children:n.jsx(w5,{castaways:T,isLoading:x,variant:"active",onEdit:S,onEliminate:R=>i(R)})}),n.jsx("div",{style:{animationDelay:"0.1s"},children:n.jsx(w5,{castaways:I,variant:"eliminated",onEdit:S,onReactivate:R=>_.mutate(R),isReactivating:_.isPending})}),a&&n.jsx(Nle,{castawayName:((A=m==null?void 0:m.find(R=>R.id===a))==null?void 0:A.name)||"",episodes:y||[],selectedEpisodeId:o,onEpisodeChange:l,onConfirm:()=>{o&&b.mutate({castawayId:a,episodeId:o})},onCancel:()=>{i(null),l("")},isPending:b.isPending}),r&&n.jsx(zce,{formData:u,onFormChange:d,onSave:j,onCancel:()=>s(null),isPending:w.isPending,tribes:g})]})]})}function iC(){const e=at(),[t,r]=$.useState(!1),[s,a]=$.useState(null),[i,o]=$.useState({number:"",name:"",registration_opens_at:"",draft_order_deadline:"",registration_closes_at:"",premiere_at:"",draft_deadline:"",finale_at:""}),[l,u]=$.useState([]),d=()=>{const S=[],j=i.registration_opens_at?new Date(i.registration_opens_at):null,N=i.draft_order_deadline?new Date(i.draft_order_deadline):null,C=i.registration_closes_at?new Date(i.registration_closes_at):null,E=i.premiere_at?new Date(i.premiere_at):null,T=i.draft_deadline?new Date(i.draft_deadline):null,I=i.finale_at?new Date(i.finale_at):null;return i.number||S.push("Season number is required"),i.name||S.push("Season name is required"),j||S.push("Registration opens date is required"),N||S.push("Draft order deadline is required"),C||S.push("Registration closes date is required"),E||S.push("Premiere date is required"),T||S.push("Draft deadline is required"),j&&N&&j>=N&&S.push("Registration must open before draft order deadline"),N&&C&&N>=C&&S.push("Draft order deadline must be before registration closes"),C&&E&&C>E&&S.push("Registration must close before or on premiere date"),E&&T&&E>T&&S.push("Premiere must be before or on draft deadline"),T&&I&&T>=I&&S.push("Draft deadline must be before finale"),E&&I&&E>=I&&S.push("Premiere must be before finale"),u(S),S.length===0},{data:p,isLoading:f}=ie({queryKey:["admin-seasons"],queryFn:async()=>{const{data:S,error:j}=await X.from("seasons").select("*").order("number",{ascending:!1});if(j)throw j;return S}}),m=ke({mutationFn:async()=>{const S={number:parseInt(i.number),name:i.name,registration_opens_at:i.registration_opens_at,draft_order_deadline:i.draft_order_deadline,registration_closes_at:i.registration_closes_at,premiere_at:i.premiere_at,draft_deadline:i.draft_deadline,finale_at:i.finale_at||null};if(s){const{error:j}=await X.from("seasons").update(S).eq("id",s);if(j)throw j}else{const{error:j}=await X.from("seasons").insert(S);if(j)throw j}},onSuccess:()=>{e.invalidateQueries({queryKey:["admin-seasons"]}),g()}}),x=ke({mutationFn:async S=>{const{error:j}=await X.from("seasons").update({is_active:!1}).neq("id",S);if(j)throw j;const{error:N}=await X.from("seasons").update({is_active:!0}).eq("id",S);if(N)throw N},onSuccess:()=>{e.invalidateQueries({queryKey:["admin-seasons"]})}}),y=ke({mutationFn:async S=>{const{error:j}=await X.from("seasons").delete().eq("id",S);if(j)throw j},onSuccess:()=>{e.invalidateQueries({queryKey:["admin-seasons"]})}}),g=()=>{r(!1),a(null),u([]),o({number:"",name:"",registration_opens_at:"",draft_order_deadline:"",registration_closes_at:"",premiere_at:"",draft_deadline:"",finale_at:""})},b=()=>{d()&&m.mutate()},_=S=>{var j,N,C,E,T,I;u([]),a(S.id),o({number:S.number.toString(),name:S.name,registration_opens_at:((j=S.registration_opens_at)==null?void 0:j.slice(0,16))||"",draft_order_deadline:((N=S.draft_order_deadline)==null?void 0:N.slice(0,16))||"",registration_closes_at:((C=S.registration_closes_at)==null?void 0:C.slice(0,16))||"",premiere_at:((E=S.premiere_at)==null?void 0:E.slice(0,16))||"",draft_deadline:((T=S.draft_deadline)==null?void 0:T.slice(0,16))||"",finale_at:((I=S.finale_at)==null?void 0:I.slice(0,16))||""}),r(!0)},w=S=>S?new Date(S).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"-";return f?n.jsxs(n.Fragment,{children:[n.jsx(_e,{}),n.jsx(dt,{}),n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center",children:n.jsx(be,{className:"h-8 w-8 text-burgundy-500 animate-spin"})})]}):n.jsxs(n.Fragment,{children:[n.jsx(_e,{}),n.jsx(dt,{}),n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 p-4 pb-24",children:n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(se,{to:"/admin",className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:n.jsx(ht,{className:"h-5 w-5 text-neutral-600"})}),n.jsxs("div",{children:[n.jsxs("h1",{className:"text-2xl font-display font-bold text-neutral-800 flex items-center gap-2",children:[n.jsx(wn,{className:"h-6 w-6 text-orange-500"}),"Manage Seasons"]}),n.jsxs("p",{className:"text-neutral-500",children:[(p==null?void 0:p.length)||0," seasons"]})]})]}),n.jsxs("button",{onClick:()=>r(!0),className:"btn btn-primary flex items-center gap-2",children:[n.jsx(tr,{className:"h-5 w-5"}),"New Season"]})]}),t&&n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200 mb-6",children:[n.jsx("h3",{className:"text-lg font-display font-bold text-neutral-800 mb-4",children:s?"Edit Season":"Create Season"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[n.jsxs("label",{className:"block",children:[n.jsx("span",{className:"text-neutral-500 text-sm",children:"Season Number"}),n.jsx("input",{type:"number",value:i.number,onChange:S=>o({...i,number:S.target.value}),className:"input mt-1"})]}),n.jsxs("label",{className:"block",children:[n.jsx("span",{className:"text-neutral-500 text-sm",children:"Season Name"}),n.jsx("input",{type:"text",value:i.name,onChange:S=>o({...i,name:S.target.value}),placeholder:"Survivor 50",className:"input mt-1"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[n.jsxs("label",{className:"block",children:[n.jsx("span",{className:"text-neutral-500 text-sm",children:"Registration Opens"}),n.jsx("input",{type:"datetime-local",value:i.registration_opens_at,onChange:S=>o({...i,registration_opens_at:S.target.value}),className:"input mt-1"})]}),n.jsxs("label",{className:"block",children:[n.jsx("span",{className:"text-neutral-500 text-sm",children:"Registration Closes"}),n.jsx("input",{type:"datetime-local",value:i.registration_closes_at,onChange:S=>o({...i,registration_closes_at:S.target.value}),className:"input mt-1"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[n.jsxs("label",{className:"block",children:[n.jsx("span",{className:"text-neutral-500 text-sm",children:"Draft Order Deadline"}),n.jsx("input",{type:"datetime-local",value:i.draft_order_deadline,onChange:S=>o({...i,draft_order_deadline:S.target.value}),className:"input mt-1"})]}),n.jsxs("label",{className:"block",children:[n.jsx("span",{className:"text-neutral-500 text-sm",children:"Draft Deadline"}),n.jsx("input",{type:"datetime-local",value:i.draft_deadline,onChange:S=>o({...i,draft_deadline:S.target.value}),className:"input mt-1"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[n.jsxs("label",{className:"block",children:[n.jsx("span",{className:"text-neutral-500 text-sm",children:"Premiere Date"}),n.jsx("input",{type:"datetime-local",value:i.premiere_at,onChange:S=>o({...i,premiere_at:S.target.value}),className:"input mt-1"})]}),n.jsxs("label",{className:"block",children:[n.jsx("span",{className:"text-neutral-500 text-sm",children:"Finale Date"}),n.jsx("input",{type:"datetime-local",value:i.finale_at,onChange:S=>o({...i,finale_at:S.target.value}),className:"input mt-1"})]})]}),l.length>0&&n.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-xl",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(yt,{className:"h-5 w-5 text-red-500 flex-shrink-0 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-red-800",children:"Please fix the following errors:"}),n.jsx("ul",{className:"mt-2 space-y-1 text-sm text-red-600",children:l.map((S,j)=>n.jsx("li",{children:S},j))})]})]})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:b,disabled:m.isPending,className:"flex-1 bg-orange-500 hover:bg-orange-600 text-white py-2 px-4 rounded-xl font-medium transition-colors flex items-center justify-center gap-2",children:m.isPending?n.jsx(be,{className:"h-4 w-4 animate-spin"}):n.jsxs(n.Fragment,{children:[n.jsx(Ot,{className:"h-4 w-4"}),s?"Update":"Create"]})}),n.jsx("button",{onClick:g,className:"bg-cream-100 hover:bg-cream-200 text-neutral-700 py-2 px-4 rounded-xl font-medium transition-colors",children:"Cancel"})]})]}),n.jsxs("div",{className:"space-y-3",children:[p==null?void 0:p.map(S=>n.jsxs("div",{className:`bg-white rounded-2xl shadow-card p-4 border ${S.is_active?"border-orange-300 ring-2 ring-orange-100":"border-cream-200"}`,children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("h3",{className:"text-lg font-display font-bold text-neutral-800",children:["Season ",S.number]}),S.is_active&&n.jsxs("span",{className:"px-2 py-0.5 bg-orange-100 text-orange-600 text-xs rounded-full flex items-center gap-1",children:[n.jsx(zn,{className:"h-3 w-3"})," Active"]})]}),n.jsx("p",{className:"text-neutral-500",children:S.name})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("button",{onClick:()=>_(S),className:"p-2 hover:bg-cream-100 rounded-xl transition-colors",children:n.jsx(fp,{className:"h-4 w-4 text-neutral-500"})}),!S.is_active&&n.jsx("button",{onClick:()=>{confirm("Delete this season? This cannot be undone.")&&y.mutate(S.id)},className:"p-2 hover:bg-red-50 rounded-xl transition-colors",children:n.jsx(ms,{className:"h-4 w-4 text-red-500"})})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm mb-3",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-neutral-400",children:"Premiere:"}),n.jsx("span",{className:"text-neutral-700 ml-2",children:w(S.premiere_at)})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-neutral-400",children:"Finale:"}),n.jsx("span",{className:"text-neutral-700 ml-2",children:w(S.finale_at)})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-neutral-400",children:"Registration:"}),n.jsx("span",{className:"text-neutral-700 ml-2",children:w(S.registration_opens_at)})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-neutral-400",children:"Draft Deadline:"}),n.jsx("span",{className:"text-neutral-700 ml-2",children:w(S.draft_deadline)})]})]}),n.jsxs("div",{className:"flex gap-2",children:[!S.is_active&&n.jsx("button",{onClick:()=>x.mutate(S.id),disabled:x.isPending,className:"flex-1 bg-orange-50 hover:bg-orange-100 text-orange-600 py-2 rounded-xl text-sm font-medium transition-colors",children:"Set as Active"}),n.jsx(se,{to:`/admin/seasons/${S.id}/episodes`,className:"flex-1 bg-cream-100 hover:bg-cream-200 text-neutral-700 py-2 rounded-xl text-sm font-medium text-center transition-colors",children:"Manage Episodes"}),n.jsx(se,{to:`/admin/seasons/${S.id}/castaways`,className:"flex-1 bg-cream-100 hover:bg-cream-200 text-neutral-700 py-2 rounded-xl text-sm font-medium text-center transition-colors",children:"Castaways"})]})]},S.id)),(p==null?void 0:p.length)===0&&n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-8 border border-cream-200 text-center",children:[n.jsx(wn,{className:"h-12 w-12 text-neutral-400 mx-auto mb-4"}),n.jsx("p",{className:"text-neutral-500",children:"No seasons yet. Create your first season!"})]})]})]})})]})}function Vce(){const{seasonId:e}=Wn(),t=at(),[r,s]=$.useState(!1),[a,i]=$.useState(null),[o,l]=$.useState({number:"",title:"",air_date:"",picks_lock_at:"",results_posted_at:"",is_finale:!1}),{data:u}=ie({queryKey:["season",e],queryFn:async()=>{if(!e)throw new Error("No season ID");const{data:j,error:N}=await X.from("seasons").select("*").eq("id",e).single();if(N)throw N;return j},enabled:!!e}),{data:d,isLoading:p}=ie({queryKey:["admin-episodes",e],queryFn:async()=>{if(!e)throw new Error("No season ID");const{data:j,error:N}=await X.from("episodes").select("*, users!results_released_by(display_name)").eq("season_id",e).order("number",{ascending:!0});if(N)throw N;return j},enabled:!!e}),f=ke({mutationFn:async()=>{if(!e)throw new Error("No season ID");const j={season_id:e,number:parseInt(o.number),week_number:parseInt(o.number),title:o.title||null,air_date:o.air_date,picks_lock_at:o.picks_lock_at,results_posted_at:o.results_posted_at||null,is_finale:o.is_finale};if(a){const{error:N}=await X.from("episodes").update(j).eq("id",a);if(N)throw N}else{const{error:N}=await X.from("episodes").insert(j);if(N)throw N}},onSuccess:()=>{t.invalidateQueries({queryKey:["admin-episodes",e]}),b()}}),m=ke({mutationFn:async j=>{const{error:N}=await X.from("episodes").delete().eq("id",j);if(N)throw N},onSuccess:()=>{t.invalidateQueries({queryKey:["admin-episodes",e]})}}),x=ke({mutationFn:async j=>{const{data:{session:N}}=await X.auth.getSession();if(!N)throw new Error("Not authenticated");const E=await fetch(`/api/admin/episodes/${j}/lock`,{method:"POST",headers:{Authorization:`Bearer ${N.access_token}`,"Content-Type":"application/json"}}),T=await E.json();if(!E.ok)throw new Error(T.error||"Failed to lock results");return T},onSuccess:j=>{t.invalidateQueries({queryKey:["admin-episodes",e]}),alert(j.message||"Results locked! They will be released automatically.")},onError:j=>{alert(`Error: ${j.message}`)}}),y=ke({mutationFn:async j=>{const{data:{session:N}}=await X.auth.getSession();if(!N)throw new Error("Not authenticated");const E=await fetch(`/api/admin/episodes/${j}/release-results`,{method:"POST",headers:{Authorization:`Bearer ${N.access_token}`,"Content-Type":"application/json"}}),T=await E.json();if(!E.ok)throw new Error(T.error||"Failed to release results");return T},onSuccess:j=>{t.invalidateQueries({queryKey:["admin-episodes",e]}),alert(`Results released! Sent ${j.notifications_sent} spoiler-safe notifications.`)},onError:j=>{alert(`Error: ${j.message}`)}}),g=ke({mutationFn:async()=>{if(!u)throw new Error("No season");const j=new Date(u.premiere_at),N=[];for(let E=1;E<=14;E++){const T=new Date(j);T.setDate(j.getDate()+(E-1)*7);const I=new Date(T);I.setHours(15,0,0,0);const A=new Date(T);A.setDate(A.getDate()+2),A.setHours(12,0,0,0),N.push({season_id:e,number:E,week_number:E,title:E===14?"Finale":`Episode ${E}`,air_date:T.toISOString(),picks_lock_at:I.toISOString(),results_posted_at:A.toISOString(),is_finale:E===14})}const{error:C}=await X.from("episodes").insert(N);if(C)throw C},onSuccess:()=>{t.invalidateQueries({queryKey:["admin-episodes",e]})}}),b=()=>{s(!1),i(null),l({number:"",title:"",air_date:"",picks_lock_at:"",results_posted_at:"",is_finale:!1})},_=j=>{var N,C,E;i(j.id),l({number:j.number.toString(),title:j.title||"",air_date:((N=j.air_date)==null?void 0:N.slice(0,16))||"",picks_lock_at:((C=j.picks_lock_at)==null?void 0:C.slice(0,16))||"",results_posted_at:((E=j.results_posted_at)==null?void 0:E.slice(0,16))||"",is_finale:j.is_finale||!1}),s(!0)},w=j=>j?new Date(j).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}):"-",S=j=>j?new Date(j).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}):"";return p?n.jsxs(n.Fragment,{children:[n.jsx(_e,{}),n.jsx(dt,{}),n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center",children:n.jsx(be,{className:"h-8 w-8 text-burgundy-500 animate-spin"})})]}):n.jsxs(n.Fragment,{children:[n.jsx(_e,{}),n.jsx(dt,{}),n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 p-4 pb-24",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(se,{to:"/admin/seasons",className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:n.jsx(ht,{className:"h-5 w-5 text-neutral-600"})}),n.jsxs("div",{children:[n.jsxs("h1",{className:"text-2xl font-display font-bold text-neutral-800 flex items-center gap-2",children:[n.jsx(yw,{className:"h-6 w-6 text-burgundy-500"}),"Episodes"]}),n.jsxs("p",{className:"text-neutral-500",children:["Season ",u==null?void 0:u.number,": ",u==null?void 0:u.name]})]})]}),n.jsx("button",{onClick:()=>s(!0),className:"p-2 bg-burgundy-500 hover:bg-burgundy-600 rounded-xl transition-colors shadow-card",children:n.jsx(tr,{className:"h-5 w-5 text-white"})})]}),(d==null?void 0:d.length)===0&&n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200 mb-6 text-center",children:[n.jsx(yw,{className:"h-12 w-12 text-neutral-400 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-display font-bold text-neutral-800 mb-2",children:"No Episodes Yet"}),n.jsx("p",{className:"text-neutral-500 mb-4",children:"Generate all 14 episodes based on the premiere date, or add them manually."}),n.jsx("button",{onClick:()=>g.mutate(),disabled:g.isPending,className:"btn btn-primary",children:g.isPending?n.jsx(be,{className:"h-4 w-4 animate-spin"}):n.jsxs(n.Fragment,{children:[n.jsx(tr,{className:"h-4 w-4"}),"Generate All Episodes"]})})]}),r&&n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200 mb-6",children:[n.jsx("h3",{className:"text-lg font-display font-bold text-neutral-800 mb-4",children:a?"Edit Episode":"Add Episode"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[n.jsxs("label",{className:"block",children:[n.jsx("span",{className:"text-neutral-500 text-sm",children:"Episode Number"}),n.jsx("input",{type:"number",value:o.number,onChange:j=>l({...o,number:j.target.value}),className:"input mt-1"})]}),n.jsxs("label",{className:"block",children:[n.jsx("span",{className:"text-neutral-500 text-sm",children:"Title (Optional)"}),n.jsx("input",{type:"text",value:o.title,onChange:j=>l({...o,title:j.target.value}),placeholder:"Episode Title",className:"input mt-1"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[n.jsxs("label",{className:"block",children:[n.jsx("span",{className:"text-neutral-500 text-sm",children:"Air Date"}),n.jsx("input",{type:"datetime-local",value:o.air_date,onChange:j=>l({...o,air_date:j.target.value}),className:"input mt-1"})]}),n.jsxs("label",{className:"block",children:[n.jsx("span",{className:"text-neutral-500 text-sm",children:"Picks Lock At"}),n.jsx("input",{type:"datetime-local",value:o.picks_lock_at,onChange:j=>l({...o,picks_lock_at:j.target.value}),className:"input mt-1"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[n.jsxs("label",{className:"block",children:[n.jsx("span",{className:"text-neutral-500 text-sm",children:"Results Posted At"}),n.jsx("input",{type:"datetime-local",value:o.results_posted_at,onChange:j=>l({...o,results_posted_at:j.target.value}),className:"input mt-1"})]}),n.jsxs("label",{className:"flex items-center gap-2 mt-6",children:[n.jsx("input",{type:"checkbox",checked:o.is_finale,onChange:j=>l({...o,is_finale:j.target.checked}),className:"w-5 h-5 rounded bg-cream-100 border-cream-300 text-burgundy-500"}),n.jsx("span",{className:"text-neutral-700",children:"Is Finale"})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>f.mutate(),disabled:f.isPending,className:"btn btn-primary flex-1",children:f.isPending?n.jsx(be,{className:"h-4 w-4 animate-spin"}):n.jsxs(n.Fragment,{children:[n.jsx(Ot,{className:"h-4 w-4"}),a?"Update":"Create"]})}),n.jsx("button",{onClick:b,className:"btn btn-secondary",children:"Cancel"})]})]}),n.jsx("div",{className:"space-y-3",children:d==null?void 0:d.map(j=>n.jsxs("div",{className:`bg-white rounded-2xl shadow-card p-4 border ${j.is_scored?"border-green-300":"border-cream-200"}`,children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-cream-100 rounded-full flex items-center justify-center border border-cream-200",children:n.jsx("span",{className:"text-burgundy-500 font-bold",children:j.number})}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h3",{className:"text-neutral-800 font-medium",children:j.title||`Episode ${j.number}`}),j.is_finale&&n.jsx(zn,{className:"h-4 w-4 text-burgundy-500"}),j.is_scored&&n.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-600 text-xs rounded-full",children:"Scored"})]}),n.jsxs("p",{className:"text-neutral-500 text-sm",children:[w(j.air_date)," at ",S(j.air_date)]})]})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("button",{onClick:()=>_(j),className:"p-2 hover:bg-cream-100 rounded-xl transition-colors",children:n.jsx(fp,{className:"h-4 w-4 text-neutral-500"})}),n.jsx("button",{onClick:()=>{confirm("Delete this episode?")&&m.mutate(j.id)},className:"p-2 hover:bg-red-50 rounded-xl transition-colors",children:n.jsx(ms,{className:"h-4 w-4 text-red-500"})})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-neutral-500 mb-3",children:[n.jsxs("div",{children:["Picks Lock: ",w(j.picks_lock_at)," ",S(j.picks_lock_at)]}),n.jsxs("div",{children:["Results: ",w(j.results_posted_at)," ",S(j.results_posted_at)]})]}),j.is_scored?j.results_released_at?n.jsxs("div",{className:"flex items-center justify-center gap-2 text-green-600 text-sm py-2",children:[n.jsx(xt,{className:"h-4 w-4"}),n.jsxs("span",{children:["Results Released ",new Date(j.results_released_at).toLocaleDateString()]})]}):j.results_locked_at?n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsxs("div",{className:"flex items-center justify-center gap-2 text-amber-600 text-sm py-2",children:[n.jsx(mr,{className:"h-4 w-4"}),n.jsx("span",{children:"Locked - releasing automatically"})]}),n.jsx("button",{onClick:()=>{confirm("Release results immediately? This will send spoiler-safe notifications to all users.")&&y.mutate(j.id)},disabled:y.isPending,className:"w-full bg-blue-50 hover:bg-blue-100 text-blue-600 py-2 rounded-xl text-sm font-medium flex items-center justify-center gap-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:y.isPending?n.jsxs(n.Fragment,{children:[n.jsx(be,{className:"h-4 w-4 animate-spin"}),n.jsx("span",{children:"Releasing..."})]}):n.jsxs(n.Fragment,{children:[n.jsx(Jn,{className:"h-4 w-4"}),n.jsx("span",{children:"Release Now"})]})})]}):n.jsx("button",{onClick:()=>{confirm("Lock results for release? They will be sent automatically within 15 minutes.")&&x.mutate(j.id)},disabled:x.isPending,className:"w-full bg-amber-50 hover:bg-amber-100 text-amber-600 py-2 rounded-xl text-sm font-medium flex items-center justify-center gap-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:x.isPending?n.jsxs(n.Fragment,{children:[n.jsx(be,{className:"h-4 w-4 animate-spin"}),n.jsx("span",{children:"Locking..."})]}):n.jsxs(n.Fragment,{children:[n.jsx(mr,{className:"h-4 w-4"}),n.jsx("span",{children:"Lock Results for Release"})]})}):n.jsx(se,{to:`/admin/episodes/${j.id}/scoring`,className:"block w-full bg-burgundy-50 hover:bg-burgundy-100 text-burgundy-600 py-2 rounded-xl text-sm font-medium text-center transition-colors",children:"Enter Scores"})]},j.id))})]})]})}const Qce="https://rgfl-api-production.up.railway.app";async function oC(e,t){var i;const s=(i=(await X.auth.getSession()).data.session)==null?void 0:i.access_token;if(!s)throw new Error("Not authenticated");const a=await fetch(`${Qce}${e}`,{...t,headers:{...t==null?void 0:t.headers,Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});if(!a.ok){const o=await a.json().catch(()=>({}));throw new Error(o.error||`API error: ${a.status}`)}return a.json()}function Yce(){const e=at(),[t,r]=$.useState(""),[s,a]=$.useState("all"),[i,o]=$.useState("all"),[l,u]=$.useState("created"),[d,p]=$.useState(!1),[f,m]=$.useState(null),[x,y]=$.useState(null),{data:g,isLoading:b}=ie({queryKey:["admin-leagues-enhanced",s,i,l],queryFn:async()=>{const T=new URLSearchParams({limit:"100",sort:l});return s!=="all"&&T.append("status",s),i==="paid"&&T.append("type","paid"),i==="free"&&T.append("type","free"),await oC(`/api/admin/leagues?${T.toString()}`)}}),_=ke({mutationFn:async T=>oC(`/api/admin/leagues/${T}`,{method:"DELETE"}),onSuccess:()=>{e.invalidateQueries({queryKey:["admin-leagues-enhanced"]}),y(null)}}),w=(g==null?void 0:g.leagues)||[],S=w.filter(T=>{var A,R;return!t||T.name.toLowerCase().includes(t.toLowerCase())||T.code.toLowerCase().includes(t.toLowerCase())||((R=(A=T.users)==null?void 0:A.display_name)==null?void 0:R.toLowerCase().includes(t.toLowerCase()))}).sort((T,I)=>{var R,O;let A=0;switch(l){case"name":A=T.name.localeCompare(I.name);break;case"members":A=(T.member_count||0)-(I.member_count||0);break;case"revenue":A=(((R=T.revenue)==null?void 0:R.gross)||0)-(((O=I.revenue)==null?void 0:O.gross)||0);break;default:A=new Date(I.created_at).getTime()-new Date(T.created_at).getTime()}return d?A:-A}),j={total:w.length,active:w.filter(T=>T.status==="active").length,paid:w.filter(T=>T.entry_fee>0).length,totalRevenue:w.reduce((T,I)=>{var A;return T+(((A=I.revenue)==null?void 0:A.gross)||0)},0)},N=T=>{l===T?p(!d):(u(T),p(!1))},C=({field:T})=>l!==T?null:d?n.jsx(fs,{className:"h-4 w-4"}):n.jsx(en,{className:"h-4 w-4"}),E=T=>T>=70?"text-green-600 bg-green-100":T>=40?"text-yellow-600 bg-yellow-100":"text-red-600 bg-red-100";return b?n.jsxs(n.Fragment,{children:[n.jsx(_e,{}),n.jsx(dt,{}),n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center",children:n.jsx(be,{className:"h-8 w-8 text-burgundy-500 animate-spin"})})]}):n.jsxs(n.Fragment,{children:[n.jsx(_e,{}),n.jsx(dt,{}),n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 p-4 pb-24",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx(se,{to:"/admin",className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:n.jsx(ht,{className:"h-5 w-5 text-neutral-600"})}),n.jsxs("div",{children:[n.jsxs("h1",{className:"text-2xl font-display font-bold text-neutral-800 flex items-center gap-2",children:[n.jsx(Ke,{className:"h-6 w-6 text-burgundy-500"}),"League Management"]}),n.jsxs("p",{className:"text-neutral-500",children:[j.total," total leagues"]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-6",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-card p-4 border border-cream-200",children:[n.jsx("p",{className:"text-2xl font-bold text-neutral-800",children:j.total}),n.jsx("p",{className:"text-xs text-neutral-500",children:"Total Leagues"})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-card p-4 border border-cream-200",children:[n.jsx("p",{className:"text-2xl font-bold text-green-600",children:j.active}),n.jsx("p",{className:"text-xs text-neutral-500",children:"Active"})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-card p-4 border border-cream-200",children:[n.jsx("p",{className:"text-2xl font-bold text-blue-600",children:j.paid}),n.jsx("p",{className:"text-xs text-neutral-500",children:"Paid Leagues"})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-card p-4 border border-cream-200",children:[n.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["$",j.totalRevenue.toFixed(2)]}),n.jsx("p",{className:"text-xs text-neutral-500",children:"Total Revenue"})]})]}),n.jsx("div",{className:"bg-white rounded-xl shadow-card p-4 border border-cream-200 mb-6",children:n.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[n.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[n.jsx(Ka,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-neutral-400"}),n.jsx("input",{type:"text",placeholder:"Search by name, code, or commissioner...",value:t,onChange:T=>r(T.target.value),className:"w-full pl-10 pr-4 py-2 border border-cream-200 rounded-lg focus:ring-2 focus:ring-burgundy-500"})]}),n.jsxs("select",{value:s,onChange:T=>a(T.target.value),className:"px-3 py-2 border border-cream-200 rounded-lg",children:[n.jsx("option",{value:"all",children:"All Status"}),n.jsx("option",{value:"forming",children:"Forming"}),n.jsx("option",{value:"drafting",children:"Drafting"}),n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"completed",children:"Completed"})]}),n.jsxs("select",{value:i,onChange:T=>o(T.target.value),className:"px-3 py-2 border border-cream-200 rounded-lg",children:[n.jsx("option",{value:"all",children:"All Types"}),n.jsx("option",{value:"paid",children:"Paid"}),n.jsx("option",{value:"free",children:"Free"})]})]})}),n.jsxs("div",{className:"bg-white rounded-xl shadow-card border border-cream-200 overflow-hidden",children:[n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-cream-50 border-b border-cream-200",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider cursor-pointer hover:bg-cream-100",onClick:()=>N("name"),children:n.jsxs("div",{className:"flex items-center gap-1",children:["League",n.jsx(C,{field:"name"})]})}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider cursor-pointer hover:bg-cream-100",onClick:()=>N("members"),children:n.jsxs("div",{className:"flex items-center gap-1",children:["Members",n.jsx(C,{field:"members"})]})}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider",children:"Picks"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider cursor-pointer hover:bg-cream-100",onClick:()=>N("revenue"),children:n.jsxs("div",{className:"flex items-center gap-1",children:["Revenue",n.jsx(C,{field:"revenue"})]})}),n.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-neutral-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"divide-y divide-cream-100",children:S.map(T=>{var I,A,R,O,M,B,U,Y;return n.jsxs(n.Fragment,{children:[n.jsxs("tr",{className:"hover:bg-cream-50 transition-colors cursor-pointer",onClick:()=>m(f===T.id?null:T.id),children:[n.jsx("td",{className:"px-4 py-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[T.is_global&&n.jsx(us,{className:"h-4 w-4 text-burgundy-500"}),!T.is_public&&n.jsx(mr,{className:"h-4 w-4 text-neutral-400"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-neutral-800",children:T.name}),n.jsxs("p",{className:"text-xs text-neutral-500",children:[(I=T.users)==null?void 0:I.display_name,"  ",T.code]})]})]})}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("span",{className:"text-neutral-800",children:[T.member_count,"/",T.max_players]})}),n.jsx("td",{className:"px-4 py-3",children:T.pick_stats&&n.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${E(T.pick_stats.percentage)}`,children:[T.pick_stats.percentage,"%"]})}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs ${T.status==="active"?"bg-green-100 text-green-600":T.status==="drafting"?"bg-amber-100 text-amber-600":T.status==="completed"?"bg-neutral-100 text-neutral-600":"bg-blue-100 text-blue-600"}`,children:T.status}),T.entry_fee>0&&n.jsxs("span",{className:"px-2 py-0.5 rounded-full text-xs bg-green-100 text-green-600",children:["$",T.entry_fee]})]})}),n.jsx("td",{className:"px-4 py-3",children:T.entry_fee>0?n.jsxs("div",{children:[n.jsxs("p",{className:"text-green-600 font-medium",children:["$",((R=(A=T.revenue)==null?void 0:A.gross)==null?void 0:R.toFixed(2))||"0.00"]}),n.jsxs("p",{className:"text-xs text-neutral-500",children:["Net: $",((M=(O=T.revenue)==null?void 0:O.net)==null?void 0:M.toFixed(2))||"0.00"]})]}):n.jsx("span",{className:"text-neutral-400",children:"-"})}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("div",{className:"flex items-center justify-end gap-1",children:[n.jsx(se,{to:`/leagues/${T.id}`,onClick:W=>W.stopPropagation(),className:"p-1.5 text-neutral-400 hover:text-burgundy-500 hover:bg-cream-100 rounded",title:"View",children:n.jsx(Ha,{className:"h-4 w-4"})}),n.jsxs("div",{className:"relative",children:[n.jsx("button",{onClick:W=>{W.stopPropagation(),y(x===T.id?null:T.id)},className:"p-1.5 text-neutral-400 hover:text-neutral-600 hover:bg-cream-100 rounded",children:n.jsx(Rte,{className:"h-4 w-4"})}),x===T.id&&n.jsxs("div",{className:"absolute right-0 top-full mt-1 bg-white border border-cream-200 rounded-lg shadow-lg z-10 min-w-[160px]",children:[n.jsxs("button",{onClick:W=>{var K;W.stopPropagation(),window.location.href=`mailto:${(K=T.users)==null?void 0:K.email}`,y(null)},className:"w-full px-3 py-2 text-left text-sm hover:bg-cream-50 flex items-center gap-2",children:[n.jsx(sn,{className:"h-4 w-4"})," Message League Creator"]}),n.jsxs("button",{onClick:W=>{W.stopPropagation(),confirm(`Delete "${T.name}"? This cannot be undone.`)&&_.mutate(T.id)},className:"w-full px-3 py-2 text-left text-sm text-red-600 hover:bg-red-50 flex items-center gap-2",children:[n.jsx(ms,{className:"h-4 w-4"})," Delete League"]})]})]})]})})]},T.id),f===T.id&&n.jsx("tr",{children:n.jsxs("td",{colSpan:6,className:"px-4 py-4 bg-cream-50",children:[n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-neutral-500 uppercase",children:"League Creator"}),n.jsx("p",{className:"font-medium text-neutral-800",children:(B=T.users)==null?void 0:B.display_name}),n.jsx("p",{className:"text-xs text-neutral-500",children:(U=T.users)==null?void 0:U.email})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-neutral-500 uppercase",children:"Code"}),n.jsx("p",{className:"font-mono text-burgundy-500",children:T.code})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-neutral-500 uppercase",children:"Season"}),n.jsx("p",{className:"text-neutral-800",children:((Y=T.seasons)==null?void 0:Y.name)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-neutral-500 uppercase",children:"Created"}),n.jsx("p",{className:"text-neutral-800",children:new Date(T.created_at).toLocaleDateString()})]})]}),T.entry_fee>0&&T.revenue&&n.jsxs("div",{className:"mt-4 p-3 bg-white rounded-lg border border-cream-200",children:[n.jsx("p",{className:"text-xs text-neutral-500 uppercase mb-2",children:"Revenue Breakdown"}),n.jsxs("div",{className:"grid grid-cols-4 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-neutral-500",children:"Gross"}),n.jsxs("p",{className:"font-medium text-neutral-800",children:["$",T.revenue.gross.toFixed(2)]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-neutral-500",children:"Stripe Fee"}),n.jsxs("p",{className:"font-medium text-red-600",children:["-$",(T.revenue.gross*.029+.3).toFixed(2)]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-neutral-500",children:"RGFL Fee (7%)"}),n.jsxs("p",{className:"font-medium text-orange-600",children:["-$",(T.revenue.gross*.07).toFixed(2)]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-neutral-500",children:"Net to League"}),n.jsxs("p",{className:"font-medium text-green-600",children:["$",T.revenue.net.toFixed(2)]})]})]})]})]})},`${T.id}-expanded`)]})})})]})}),S.length===0&&n.jsxs("div",{className:"text-center py-12",children:[n.jsx(Ke,{className:"h-12 w-12 text-neutral-300 mx-auto mb-4"}),n.jsx("p",{className:"text-neutral-500",children:"No leagues found matching your filters."})]})]})]})]})}const Jce="https://rgfl-api-production.up.railway.app";async function Qb(e,t){var i;const s=(i=(await X.auth.getSession()).data.session)==null?void 0:i.access_token;if(!s)throw new Error("Not authenticated");const a=await fetch(`${Jce}${e}`,{...t,headers:{...t==null?void 0:t.headers,Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});if(!a.ok){const o=await a.json().catch(()=>({}));throw new Error(o.error||`API error: ${a.status}`)}return a.json()}function Xce(){const e=at(),[t,r]=$.useState(""),[s,a]=$.useState("all"),[i,o]=$.useState("all"),[l,u]=$.useState("all"),[d,p]=$.useState(!0),[f,m]=$.useState(null),[x,y]=$.useState(!1),[g,b]=$.useState(null),[_,w]=$.useState(null),S=$.useRef(null);$.useEffect(()=>{function U(Y){S.current&&!S.current.contains(Y.target)&&w(null)}return document.addEventListener("mousedown",U),()=>document.removeEventListener("mousedown",U)},[]);const{data:j,isLoading:N,error:C}=ie({queryKey:["admin-users-enhanced",i,l],queryFn:async()=>{const U=new URLSearchParams({limit:"1000"});return i!=="all"&&U.append("segment",i),l!=="all"&&U.append("status",l),await Qb(`/api/admin/users?${U.toString()}`)}}),E=ke({mutationFn:async U=>Qb(`/api/admin/users/${U}/impersonate`,{method:"POST"}),onSuccess:U=>{U!=null&&U.impersonationUrl&&window.open(U.impersonationUrl,"_blank"),y(!1)},onError:U=>{b(U.message)}}),T=ke({mutationFn:async({userId:U,role:Y})=>Qb(`/api/admin/users/${U}`,{method:"PATCH",body:JSON.stringify({role:Y})}),onSuccess:()=>{e.invalidateQueries({queryKey:["admin-users-enhanced"]}),w(null)},onError:U=>{b(U.message)}}),I=(j==null?void 0:j.users)||[],A=I.filter(U=>{var K,F,H,L,q;if(d&&(((K=U.display_name)==null?void 0:K.toLowerCase().includes("test"))||((F=U.email)==null?void 0:F.toLowerCase().includes("test"))||((H=U.display_name)==null?void 0:H.match(/^user\d+$/i))))return!1;const Y=!t||((L=U.display_name)==null?void 0:L.toLowerCase().includes(t.toLowerCase()))||((q=U.email)==null?void 0:q.toLowerCase().includes(t.toLowerCase())),W=s==="all"||U.role===s;return Y&&W}),R={total:I.length,power:I.filter(U=>U.segment==="power").length,casual:I.filter(U=>U.segment==="casual").length,dormant:I.filter(U=>U.segment==="dormant").length,churned:I.filter(U=>U.segment==="churned").length,new:I.filter(U=>U.segment==="new").length,healthy:I.filter(U=>U.health==="healthy").length,warning:I.filter(U=>U.health==="warning").length,critical:I.filter(U=>U.health==="critical").length},O=U=>{switch(U){case"power":return n.jsxs("span",{className:"px-2 py-0.5 rounded-full text-xs bg-green-100 text-green-700 flex items-center gap-1",children:[n.jsx(ds,{className:"h-3 w-3"})," Power"]});case"casual":return n.jsxs("span",{className:"px-2 py-0.5 rounded-full text-xs bg-blue-100 text-blue-700 flex items-center gap-1",children:[n.jsx(fr,{className:"h-3 w-3"})," Casual"]});case"dormant":return n.jsxs("span",{className:"px-2 py-0.5 rounded-full text-xs bg-yellow-100 text-yellow-700 flex items-center gap-1",children:[n.jsx(Nt,{className:"h-3 w-3"})," Dormant"]});case"churned":return n.jsxs("span",{className:"px-2 py-0.5 rounded-full text-xs bg-red-100 text-red-700 flex items-center gap-1",children:[n.jsx(Hi,{className:"h-3 w-3"})," Churned"]});default:return n.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs bg-neutral-100 text-neutral-600",children:"New"})}},M=U=>{switch(U){case"healthy":return n.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500",title:"Active"});case"warning":return n.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-500",title:"3-7 days inactive"});case"critical":return n.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500",title:"7+ days inactive"});default:return n.jsx("div",{className:"w-2 h-2 rounded-full bg-neutral-300"})}},B=U=>{switch(U){case"admin":return n.jsx(FE,{className:"h-4 w-4 text-red-500"});case"commissioner":return n.jsx(UE,{className:"h-4 w-4 text-burgundy-500"});default:return n.jsx(Aa,{className:"h-4 w-4 text-neutral-400"})}};return C?n.jsxs(n.Fragment,{children:[n.jsx(_e,{}),n.jsx(dt,{}),n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-8 border border-red-200 text-center max-w-md",children:[n.jsx(yt,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),n.jsx("h2",{className:"text-xl font-bold text-neutral-800 mb-2",children:"Access Denied"}),n.jsx("p",{className:"text-neutral-600 mb-4",children:C instanceof Error?C.message:"You do not have permission."}),n.jsx(se,{to:"/admin",className:"inline-block px-4 py-2 bg-burgundy-500 text-white rounded-lg hover:bg-burgundy-600",children:"Back to Admin"})]})})]}):n.jsxs(n.Fragment,{children:[n.jsx(_e,{}),n.jsx(dt,{}),n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 p-4 pb-24",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx(se,{to:"/admin",className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:n.jsx(ht,{className:"h-5 w-5 text-neutral-600"})}),n.jsxs("div",{children:[n.jsxs("h1",{className:"text-2xl font-display font-bold text-neutral-800 flex items-center gap-2",children:[n.jsx(Ke,{className:"h-6 w-6 text-burgundy-500"}),"User Management"]}),n.jsxs("p",{className:"text-neutral-500",children:[I.length," registered users"]})]})]}),g&&n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 mb-4 flex items-center gap-3",children:[n.jsx(yt,{className:"h-5 w-5 text-red-500 flex-shrink-0"}),n.jsx("p",{className:"text-red-700",children:g}),n.jsx("button",{onClick:()=>b(null),className:"ml-auto text-red-500 hover:text-red-700",children:""})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-6",children:[n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-card border border-cream-200",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-neutral-500 text-sm",children:"Total Users"}),n.jsx(Ke,{className:"h-5 w-5 text-burgundy-500"})]}),n.jsx("p",{className:"text-2xl font-bold text-neutral-800 mt-1",children:R.total})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-card border border-cream-200",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-neutral-500 text-sm",children:"Power Users"}),n.jsx(ds,{className:"h-5 w-5 text-green-500"})]}),n.jsx("p",{className:"text-2xl font-bold text-green-600 mt-1",children:R.power})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-card border border-cream-200",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-neutral-500 text-sm",children:"At Risk"}),n.jsx(Tt,{className:"h-5 w-5 text-yellow-500"})]}),n.jsx("p",{className:"text-2xl font-bold text-yellow-600 mt-1",children:R.dormant+R.churned})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-card border border-cream-200",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-neutral-500 text-sm",children:"Active (24h)"}),n.jsx(Di,{className:"h-5 w-5 text-blue-500"})]}),n.jsx("p",{className:"text-2xl font-bold text-blue-600 mt-1",children:R.healthy})]})]}),n.jsx("div",{className:"bg-white rounded-xl p-4 shadow-card border border-cream-200 mb-6",children:n.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[n.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[n.jsx(Ka,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-neutral-400"}),n.jsx("input",{type:"text",placeholder:"Search by name or email...",value:t,onChange:U=>r(U.target.value),className:"w-full pl-10 pr-4 py-2 border border-cream-200 rounded-lg focus:ring-2 focus:ring-burgundy-500 focus:border-transparent"})]}),n.jsxs("select",{value:s,onChange:U=>a(U.target.value),className:"px-3 py-2 border border-cream-200 rounded-lg focus:ring-2 focus:ring-burgundy-500",children:[n.jsx("option",{value:"all",children:"All Roles"}),n.jsx("option",{value:"player",children:"Players"}),n.jsx("option",{value:"commissioner",children:"Commissioners"}),n.jsx("option",{value:"admin",children:"Admins"})]}),n.jsxs("select",{value:i,onChange:U=>o(U.target.value),className:"px-3 py-2 border border-cream-200 rounded-lg focus:ring-2 focus:ring-burgundy-500",children:[n.jsx("option",{value:"all",children:"All Segments"}),n.jsx("option",{value:"power",children:"Power Users"}),n.jsx("option",{value:"casual",children:"Casual"}),n.jsx("option",{value:"dormant",children:"Dormant"}),n.jsx("option",{value:"churned",children:"Churned"}),n.jsx("option",{value:"new",children:"New"})]}),n.jsxs("select",{value:l,onChange:U=>u(U.target.value),className:"px-3 py-2 border border-cream-200 rounded-lg focus:ring-2 focus:ring-burgundy-500",children:[n.jsx("option",{value:"all",children:"All Status"}),n.jsx("option",{value:"healthy",children:"Healthy"}),n.jsx("option",{value:"warning",children:"Warning"}),n.jsx("option",{value:"critical",children:"Critical"})]}),n.jsxs("label",{className:"flex items-center gap-2 text-sm text-neutral-600 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:d,onChange:U=>p(U.target.checked),className:"rounded border-cream-200"}),"Hide test accounts"]})]})}),N?n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx(be,{className:"h-8 w-8 text-burgundy-500 animate-spin"})}):n.jsxs("div",{className:"bg-white rounded-xl shadow-card border border-cream-200 overflow-hidden",children:[n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-cream-50 border-b border-cream-200",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider",children:"User"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider",children:"Segment"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider",children:"Role"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider",children:"Leagues"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider",children:"Picks"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider",children:"Last Active"}),n.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-neutral-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"divide-y divide-cream-100",children:A.map(U=>n.jsxs("tr",{className:"hover:bg-cream-50 transition-colors",children:[n.jsx("td",{className:"px-4 py-3",children:n.jsxs("div",{className:"flex items-center gap-3",children:[M(U.health),U.avatar_url?n.jsx("img",{src:U.avatar_url,alt:"",className:"w-8 h-8 rounded-full object-cover"}):n.jsx("div",{className:"w-8 h-8 bg-cream-100 rounded-full flex items-center justify-center",children:n.jsx(Ke,{className:"h-4 w-4 text-neutral-400"})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-neutral-800",children:U.display_name}),n.jsx("p",{className:"text-xs text-neutral-500",children:U.email})]})]})}),n.jsx("td",{className:"px-4 py-3",children:O(U.segment)}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("div",{className:"flex items-center gap-1",children:[B(U.role),n.jsx("span",{className:"text-sm text-neutral-600 capitalize",children:U.role})]})}),n.jsx("td",{className:"px-4 py-3 text-sm text-neutral-600",children:U.league_count||0}),n.jsx("td",{className:"px-4 py-3 text-sm text-neutral-600",children:U.pick_count||0}),n.jsx("td",{className:"px-4 py-3 text-sm text-neutral-500",children:U.last_active_at?new Date(U.last_active_at).toLocaleDateString():"Never"}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("div",{className:"flex items-center justify-end gap-1",children:[n.jsx("button",{onClick:()=>{m(U),y(!0)},className:"p-1.5 text-neutral-400 hover:text-burgundy-500 hover:bg-cream-100 rounded",title:"Impersonate",children:n.jsx(Ha,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>{window.location.href=`mailto:${U.email}`},className:"p-1.5 text-neutral-400 hover:text-green-500 hover:bg-cream-100 rounded",title:"Send Email",children:n.jsx(sn,{className:"h-4 w-4"})}),n.jsxs("div",{className:"relative",ref:_===U.id?S:null,children:[n.jsx("button",{onClick:()=>w(_===U.id?null:U.id),className:`p-1.5 hover:bg-cream-100 rounded ${_===U.id?"text-burgundy-500 bg-cream-100":"text-neutral-400 hover:text-neutral-600"}`,title:"Change Role",children:n.jsx(Aa,{className:"h-4 w-4"})}),_===U.id&&n.jsxs("div",{className:"absolute right-0 top-full mt-1 bg-white border border-cream-200 rounded-lg shadow-lg z-20 min-w-[140px]",children:[n.jsxs("button",{onClick:()=>T.mutate({userId:U.id,role:"player"}),className:`w-full px-3 py-2 text-left text-sm hover:bg-cream-50 flex items-center gap-2 ${U.role==="player"?"bg-cream-100 font-medium":""}`,children:[n.jsx(Aa,{className:"h-4 w-4"})," Player"]}),n.jsxs("button",{onClick:()=>T.mutate({userId:U.id,role:"commissioner"}),className:`w-full px-3 py-2 text-left text-sm hover:bg-cream-50 flex items-center gap-2 ${U.role==="commissioner"?"bg-cream-100 font-medium":""}`,children:[n.jsx(UE,{className:"h-4 w-4"})," Commissioner"]}),n.jsxs("button",{onClick:()=>T.mutate({userId:U.id,role:"admin"}),className:`w-full px-3 py-2 text-left text-sm hover:bg-cream-50 flex items-center gap-2 ${U.role==="admin"?"bg-cream-100 font-medium":""}`,children:[n.jsx(FE,{className:"h-4 w-4"})," Admin"]})]})]})]})})]},U.id))})]})}),A.length===0&&n.jsxs("div",{className:"text-center py-12",children:[n.jsx(Ke,{className:"h-12 w-12 text-neutral-300 mx-auto mb-4"}),n.jsx("p",{className:"text-neutral-500",children:"No users found matching your filters."})]})]})]}),x&&f&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full p-6",children:[n.jsx("h3",{className:"text-xl font-bold text-neutral-800 mb-4",children:"Impersonate User"}),n.jsxs("p",{className:"text-neutral-600 mb-4",children:["You are about to log in as ",n.jsx("strong",{children:f.display_name})," (",f.email,"). This will open in a new tab."]}),n.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-4",children:n.jsxs("p",{className:"text-yellow-800 text-sm flex items-center gap-2",children:[n.jsx(Tt,{className:"h-4 w-4"}),"Use with caution. All actions will be logged."]})}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:()=>y(!1),className:"flex-1 px-4 py-2 border border-cream-200 rounded-lg hover:bg-cream-50",children:"Cancel"}),n.jsxs("button",{onClick:()=>E.mutate(f.id),disabled:E.isPending,className:"flex-1 px-4 py-2 bg-burgundy-500 text-white rounded-lg hover:bg-burgundy-600 flex items-center justify-center gap-2",children:[E.isPending?n.jsx(be,{className:"h-4 w-4 animate-spin"}):n.jsx(Ad,{className:"h-4 w-4"}),"Open as User"]})]})]})})]})}function Zce(){var S;const e=at(),[t,r]=$.useState(""),[s,a]=$.useState("all"),[i,o]=$.useState("all"),[l,u]=$.useState(null),{data:d,isLoading:p}=ie({queryKey:["admin-payments"],queryFn:async()=>{const{data:j,error:N}=await X.from("payments").select("*, users(display_name, email), leagues(name)").order("created_at",{ascending:!1});if(N)throw N;return j||[]}}),f=$.useMemo(()=>{if(!d)return[];const j=new Map;return d.forEach(N=>{var C;N.league_id&&((C=N.leagues)!=null&&C.name)&&!j.has(N.league_id)&&j.set(N.league_id,{id:N.league_id,name:N.leagues.name})}),Array.from(j.values()).sort((N,C)=>N.name.localeCompare(C.name))},[d]),m=ke({mutationFn:async j=>{const{error:N}=await X.from("payments").update({status:"refunded",refunded_at:new Date().toISOString()}).eq("id",j);if(N)throw N},onSuccess:()=>{e.invalidateQueries({queryKey:["admin-payments"]}),u(null)}}),x=d==null?void 0:d.filter(j=>{var T,I,A,R,O,M,B;const N=((I=(T=j.users)==null?void 0:T.display_name)==null?void 0:I.toLowerCase().includes(t.toLowerCase()))||((R=(A=j.users)==null?void 0:A.email)==null?void 0:R.toLowerCase().includes(t.toLowerCase()))||((M=(O=j.leagues)==null?void 0:O.name)==null?void 0:M.toLowerCase().includes(t.toLowerCase()))||((B=j.stripe_payment_intent_id)==null?void 0:B.includes(t)),C=s==="all"||j.status===s,E=i==="all"||j.league_id===i;return N&&C&&E}),y=i==="all"?d:d==null?void 0:d.filter(j=>j.league_id===i),g={total:(y==null?void 0:y.length)||0,completed:(y==null?void 0:y.filter(j=>j.status==="completed").length)||0,refunded:(y==null?void 0:y.filter(j=>j.status==="refunded").length)||0,pending:(y==null?void 0:y.filter(j=>j.status==="pending").length)||0,totalRevenue:(y==null?void 0:y.filter(j=>j.status==="completed").reduce((j,N)=>j+parseFloat(String(N.amount)||"0"),0))||0,totalRefunded:(y==null?void 0:y.filter(j=>j.status==="refunded").reduce((j,N)=>j+parseFloat(String(N.amount)||"0"),0))||0},b=$.useMemo(()=>{if(!d)return new Map;const j=new Map;return d.forEach(N=>{const C=N.league_id,E=j.get(C)||{count:0,revenue:0};E.count+=1,N.status==="completed"&&(E.revenue+=parseFloat(String(N.amount)||"0")),j.set(C,E)}),j},[d]),_=j=>{switch(j){case"completed":return n.jsx(xt,{className:"h-4 w-4 text-green-500"});case"refunded":return n.jsx(an,{className:"h-4 w-4 text-amber-500"});case"failed":return n.jsx(Tr,{className:"h-4 w-4 text-red-500"});default:return n.jsx(yt,{className:"h-4 w-4 text-neutral-400"})}},w=j=>{switch(j){case"completed":return"bg-green-100 text-green-600";case"refunded":return"bg-amber-100 text-amber-600";case"failed":return"bg-red-100 text-red-600";default:return"bg-neutral-100 text-neutral-600"}};return p?n.jsxs(n.Fragment,{children:[n.jsx(_e,{}),n.jsx(dt,{}),n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center",children:n.jsx(be,{className:"h-8 w-8 text-burgundy-500 animate-spin"})})]}):n.jsxs(n.Fragment,{children:[n.jsx(_e,{}),n.jsx(dt,{}),n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 p-4 pb-24",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx(se,{to:"/admin",className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:n.jsx(ht,{className:"h-5 w-5 text-neutral-600"})}),n.jsxs("div",{children:[n.jsxs("h1",{className:"text-2xl font-display font-bold text-neutral-800 flex items-center gap-2",children:[n.jsx(Zo,{className:"h-6 w-6 text-burgundy-500"}),i==="all"?"All Payments":`${((S=f.find(j=>j.id===i))==null?void 0:S.name)||"League"} Payments`]}),n.jsx("p",{className:"text-neutral-500",children:i==="all"?`${(d==null?void 0:d.length)||0} total transactions`:`${(y==null?void 0:y.length)||0} transactions in this league`})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[n.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-2xl p-4",children:[n.jsx("p",{className:"text-green-600 text-sm mb-1",children:"Total Revenue"}),n.jsxs("p",{className:"text-2xl font-bold text-green-700",children:["$",g.totalRevenue.toFixed(2)]}),n.jsxs("p",{className:"text-green-500 text-sm",children:[g.completed," payments"]})]}),n.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-2xl p-4",children:[n.jsx("p",{className:"text-amber-600 text-sm mb-1",children:"Total Refunded"}),n.jsxs("p",{className:"text-2xl font-bold text-amber-700",children:["$",g.totalRefunded.toFixed(2)]}),n.jsxs("p",{className:"text-amber-500 text-sm",children:[g.refunded," refunds"]})]})]}),n.jsxs("div",{className:"grid grid-cols-4 gap-2 mb-6",children:[n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-3 border border-cream-200 text-center",children:[n.jsx("p",{className:"text-xl font-bold text-neutral-800",children:g.total}),n.jsx("p",{className:"text-neutral-500 text-xs",children:"Total"})]}),n.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-2xl p-3 text-center",children:[n.jsx("p",{className:"text-xl font-bold text-green-600",children:g.completed}),n.jsx("p",{className:"text-neutral-500 text-xs",children:"Completed"})]}),n.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-2xl p-3 text-center",children:[n.jsx("p",{className:"text-xl font-bold text-amber-600",children:g.refunded}),n.jsx("p",{className:"text-neutral-500 text-xs",children:"Refunded"})]}),n.jsxs("div",{className:"bg-neutral-50 border border-neutral-200 rounded-2xl p-3 text-center",children:[n.jsx("p",{className:"text-xl font-bold text-neutral-600",children:g.pending}),n.jsx("p",{className:"text-neutral-500 text-xs",children:"Pending"})]})]}),f.length>0&&n.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 mb-6 overflow-hidden",children:[n.jsxs("div",{className:"p-3 border-b border-cream-200 flex items-center gap-2",children:[n.jsx(ot,{className:"h-5 w-5 text-burgundy-500"}),n.jsx("h3",{className:"font-display font-bold text-neutral-800",children:"Filter by League"})]}),n.jsxs("div",{className:"flex flex-wrap gap-2 p-3",children:[n.jsxs("button",{onClick:()=>o("all"),className:`px-4 py-2 rounded-xl text-sm font-medium transition-all flex items-center gap-2 ${i==="all"?"bg-burgundy-500 text-white shadow-md":"bg-cream-100 text-neutral-700 hover:bg-cream-200"}`,children:[n.jsx(Ke,{className:"h-4 w-4"}),"All Leagues",n.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs ${i==="all"?"bg-burgundy-600":"bg-cream-200"}`,children:(d==null?void 0:d.length)||0})]}),f.map(j=>{const N=b.get(j.id);return n.jsxs("button",{onClick:()=>o(j.id),className:`px-4 py-2 rounded-xl text-sm font-medium transition-all flex items-center gap-2 ${i===j.id?"bg-burgundy-500 text-white shadow-md":"bg-cream-100 text-neutral-700 hover:bg-cream-200"}`,children:[j.name,n.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs ${i===j.id?"bg-burgundy-600":"bg-cream-200"}`,children:(N==null?void 0:N.count)||0}),N&&N.revenue>0&&n.jsxs("span",{className:`px-2 py-0.5 rounded-full text-xs ${i===j.id?"bg-green-600":"bg-green-100 text-green-700"}`,children:["$",N.revenue.toFixed(0)]})]},j.id)})]})]}),n.jsxs("div",{className:"flex gap-2 mb-6",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx(Ka,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-neutral-400"}),n.jsx("input",{type:"text",value:t,onChange:j=>r(j.target.value),placeholder:"Search payments...",className:"input pl-10"})]}),n.jsxs("select",{value:s,onChange:j=>a(j.target.value),className:"input px-3 py-2 w-36",children:[n.jsx("option",{value:"all",children:"All Status"}),n.jsx("option",{value:"completed",children:"Completed"}),n.jsx("option",{value:"pending",children:"Pending"}),n.jsx("option",{value:"refunded",children:"Refunded"}),n.jsx("option",{value:"failed",children:"Failed"})]})]}),n.jsxs("div",{className:"space-y-3",children:[x==null?void 0:x.map(j=>{var N,C,E;return n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-4 border border-cream-200",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-neutral-800 font-medium",children:(N=j.users)==null?void 0:N.display_name}),n.jsx("p",{className:"text-neutral-500 text-sm",children:(C=j.users)==null?void 0:C.email})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("p",{className:"text-xl font-bold text-neutral-800",children:["$",parseFloat(String(j.amount)).toFixed(2)]}),n.jsxs("span",{className:`px-2 py-0.5 rounded-full text-xs inline-flex items-center gap-1 ${w(j.status)}`,children:[_(j.status),j.status]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm text-neutral-500 mb-3",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-neutral-400",children:"League:"})," ",n.jsx("span",{children:(E=j.leagues)==null?void 0:E.name})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-neutral-400",children:"Date:"})," ",n.jsx("span",{children:new Date(j.created_at).toLocaleDateString()})]}),j.stripe_payment_intent_id&&n.jsxs("div",{className:"col-span-2",children:[n.jsx("span",{className:"text-neutral-400",children:"Stripe ID:"})," ",n.jsx("span",{className:"font-mono text-xs",children:j.stripe_payment_intent_id})]})]}),j.status==="completed"&&n.jsx("div",{className:"flex gap-2",children:l===j.id?n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>m.mutate(j.id),disabled:m.isPending,className:"btn flex-1 bg-red-100 text-red-600 hover:bg-red-200",children:m.isPending?n.jsx(be,{className:"h-4 w-4 animate-spin"}):"Confirm Refund"}),n.jsx("button",{onClick:()=>u(null),className:"btn btn-secondary px-4",children:"Cancel"})]}):n.jsxs("button",{onClick:()=>u(j.id),className:"btn btn-secondary flex-1",children:[n.jsx(an,{className:"h-4 w-4"}),"Issue Refund"]})}),j.status==="refunded"&&j.refunded_at&&n.jsxs("p",{className:"text-amber-600 text-sm",children:["Refunded on ",new Date(j.refunded_at).toLocaleDateString()]})]},j.id)}),(x==null?void 0:x.length)===0&&n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-8 border border-cream-200 text-center",children:[n.jsx(hp,{className:"h-12 w-12 text-neutral-400 mx-auto mb-4"}),n.jsx("p",{className:"text-neutral-500",children:"No payments found."})]})]})]})]})}const eue="https://rgfl-api-production.up.railway.app";async function lC(e,t){var i;const s=(i=(await X.auth.getSession()).data.session)==null?void 0:i.access_token;if(!s)throw new Error("Not authenticated");const a=await fetch(`${eue}${e}`,{...t,headers:{...t==null?void 0:t.headers,Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});if(!a.ok){const o=await a.json().catch(()=>({}));throw new Error(o.error||`API error: ${a.status}`)}return a.json()}const tue={"draft-finalize":{description:"Auto-complete incomplete drafts",schedule:"One-time (from database)"},"lock-picks":{description:"Lock all pending weekly picks when episode airs",schedule:"Wed 5pm PST (weekly)"},"auto-pick":{description:"Fill missing picks with auto-select",schedule:"Wed 5:05pm PST (weekly)"},"pick-reminders":{description:"Send pick reminder notifications (3 hours before lock)",schedule:"Wed 2pm PST (weekly)"},"results-notification":{description:"Send scoring results to players (when picks open)",schedule:"Fri 8am PST (weekly)"},"weekly-summary":{description:"Send weekly standings summary",schedule:"Sun 10am PST (weekly)"},"draft-reminders":{description:"Send draft reminder notifications",schedule:"Daily 9am PST"},"release-results":{description:"Release spoiler-safe results (checks for finalized episodes)",schedule:"Every 10 minutes"},"email-queue-processor":{description:"Process pending emails from queue",schedule:"Every 5 minutes"},"nurture-trivia-completers":{description:"Send nurture emails to trivia completers",schedule:"Daily 11am PST"}},nue=Object.entries(tue).map(([e,t])=>({name:e,description:t.description,schedule:t.schedule,lastRun:null,nextRun:null,status:"pending",enabled:!0}));function rue(){at();const[e,t]=$.useState(null),[r,s]=$.useState({}),{data:a,isLoading:i,refetch:o}=ie({queryKey:["admin-jobs"],queryFn:async()=>(await lC("/api/admin/jobs")).jobs||[]}),l=nue.map(m=>{const x=a==null?void 0:a.find(g=>g.name===m.name),y=r[m.name];return{...m,lastRun:(y==null?void 0:y.lastRun)||(x==null?void 0:x.lastRun)||m.lastRun,nextRun:(x==null?void 0:x.nextRun)||m.nextRun,status:e===m.name?"running":(y==null?void 0:y.status)||(x==null?void 0:x.status)||m.status,enabled:(x==null?void 0:x.enabled)??m.enabled}}),u=ke({mutationFn:async m=>lC(`/api/admin/jobs/${m}/run`,{method:"POST"}),onMutate:m=>{t(m)},onSuccess:(m,x)=>{s(y=>({...y,[x]:{status:"success",lastRun:new Date().toISOString(),message:m.result?JSON.stringify(m.result):void 0}})),t(null),o()},onError:(m,x)=>{s(y=>({...y,[x]:{status:"failed",lastRun:new Date().toISOString(),message:m.message}})),t(null)}}),d=m=>{switch(m){case"success":return n.jsx(xt,{className:"h-5 w-5 text-green-500"});case"failed":return n.jsx(Tr,{className:"h-5 w-5 text-red-500"});case"running":return n.jsx(be,{className:"h-5 w-5 text-burgundy-500 animate-spin"});default:return n.jsx(Nt,{className:"h-5 w-5 text-neutral-400"})}},p=m=>{switch(m){case"success":return"bg-green-100 text-green-600";case"failed":return"bg-red-100 text-red-600";case"running":return"bg-burgundy-100 text-burgundy-600";default:return"bg-neutral-100 text-neutral-600"}},f={total:l.length,enabled:l.filter(m=>m.enabled).length,success:l.filter(m=>m.status==="success").length,failed:l.filter(m=>m.status==="failed").length};return n.jsxs(n.Fragment,{children:[n.jsx(_e,{}),n.jsx(dt,{}),n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 p-4 pb-24",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx(se,{to:"/admin",className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:n.jsx(ht,{className:"h-5 w-5 text-neutral-600"})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("h1",{className:"text-2xl font-display font-bold text-neutral-800 flex items-center gap-2",children:[n.jsx(ds,{className:"h-6 w-6 text-burgundy-500"}),"System Jobs"]}),n.jsxs("p",{className:"text-neutral-500",children:[l.length," scheduled jobs"]})]}),n.jsx("button",{onClick:()=>o(),disabled:i,className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:n.jsx(an,{className:`h-5 w-5 text-neutral-600 ${i?"animate-spin":""}`})})]}),n.jsxs("div",{className:"grid grid-cols-4 gap-2 mb-6",children:[n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-3 border border-cream-200 text-center",children:[n.jsx("p",{className:"text-xl font-bold text-neutral-800",children:f.total}),n.jsx("p",{className:"text-neutral-500 text-xs",children:"Total"})]}),n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-2xl p-3 text-center",children:[n.jsx("p",{className:"text-xl font-bold text-blue-600",children:f.enabled}),n.jsx("p",{className:"text-neutral-500 text-xs",children:"Enabled"})]}),n.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-2xl p-3 text-center",children:[n.jsx("p",{className:"text-xl font-bold text-green-600",children:f.success}),n.jsx("p",{className:"text-neutral-500 text-xs",children:"Success"})]}),n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-3 text-center",children:[n.jsx("p",{className:"text-xl font-bold text-red-600",children:f.failed}),n.jsx("p",{className:"text-neutral-500 text-xs",children:"Failed"})]})]}),n.jsx("div",{className:"space-y-3",children:l.map(m=>{var x;return n.jsxs("div",{className:`bg-white rounded-2xl shadow-card p-4 border transition-opacity ${m.enabled?"border-cream-200":"border-cream-100 opacity-50"}`,children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[d(e===m.name?"running":m.status),n.jsxs("div",{children:[n.jsx("h3",{className:"text-neutral-800 font-medium font-mono",children:m.name}),n.jsx("p",{className:"text-neutral-500 text-sm",children:m.description})]})]}),n.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs ${p(e===m.name?"running":m.status)}`,children:e===m.name?"running":m.status})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm text-neutral-500 mb-3",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(wn,{className:"h-4 w-4"}),n.jsx("span",{children:m.schedule})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(an,{className:"h-4 w-4"}),n.jsxs("span",{children:["Last:"," ",m.lastRun?new Date(m.lastRun).toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"}):"Never"]})]})]}),((x=r[m.name])==null?void 0:x.message)&&n.jsxs("div",{className:`text-xs p-2 rounded-lg mb-3 ${r[m.name].status==="success"?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:[r[m.name].status==="success"?" ":" ",r[m.name].message]}),n.jsx("div",{className:"flex gap-2",children:n.jsx("button",{onClick:()=>u.mutate(m.name),disabled:e===m.name,className:"btn btn-primary flex-1 disabled:opacity-50 disabled:cursor-not-allowed",children:e===m.name?n.jsxs(n.Fragment,{children:[n.jsx(be,{className:"h-4 w-4 animate-spin"}),"Running..."]}):n.jsxs(n.Fragment,{children:[n.jsx(fx,{className:"h-4 w-4"}),"Run Now"]})})})]},m.name)})}),n.jsx("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-2xl p-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(yt,{className:"h-5 w-5 text-blue-500 flex-shrink-0 mt-0.5"}),n.jsxs("div",{className:"text-sm text-blue-800",children:[n.jsx("p",{className:"font-medium mb-1",children:"About System Jobs"}),n.jsx("p",{className:"text-blue-600",children:"Jobs are scheduled using Supabase pg_cron. Manual runs are useful for testing or recovering from failures. All times are in PST."})]})]})})]})]})}function sue(){var o,l;const{data:e,isLoading:t}=ie({queryKey:["global-league"],queryFn:async()=>{const{data:u,error:d}=await X.from("leagues").select("*, seasons(*)").eq("is_global",!0).single();if(d&&d.code!=="PGRST116")throw d;return u}}),{data:r,isLoading:s}=ie({queryKey:["global-standings",e==null?void 0:e.id],queryFn:async()=>{if(!(e!=null&&e.id))throw new Error("No global league");const{data:u,error:d}=await X.from("league_members").select("*, users(display_name, avatar_url)").eq("league_id",e.id).order("total_points",{ascending:!1}).limit(100);if(d)throw d;return u||[]},enabled:!!(e!=null&&e.id)}),{data:a}=ie({queryKey:["global-stats",e==null?void 0:e.id],queryFn:async()=>{var m;if(!(e!=null&&e.id))throw new Error("No global league");const{count:u}=await X.from("league_members").select("*",{count:"exact",head:!0}).eq("league_id",e.id),{data:d}=await X.from("league_members").select("total_points, users(display_name)").eq("league_id",e.id).order("total_points",{ascending:!1}).limit(1).single(),{data:p}=await X.from("league_members").select("total_points").eq("league_id",e.id),f=p!=null&&p.length?p.reduce((x,y)=>x+(y.total_points||0),0)/p.length:0;return{totalPlayers:u||0,topScore:(d==null?void 0:d.total_points)||0,topScorer:((m=d==null?void 0:d.users)==null?void 0:m.display_name)||"N/A",averageScore:Math.round(f)}},enabled:!!(e!=null&&e.id)});return t||s?n.jsxs(n.Fragment,{children:[n.jsx(_e,{}),n.jsx(dt,{}),n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center",children:n.jsx(be,{className:"h-8 w-8 text-burgundy-500 animate-spin"})})]}):e?n.jsxs(n.Fragment,{children:[n.jsx(_e,{}),n.jsx(dt,{}),n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 p-4 pb-24",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx(se,{to:"/admin",className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:n.jsx(ht,{className:"h-5 w-5 text-neutral-600"})}),n.jsxs("div",{children:[n.jsxs("h1",{className:"text-2xl font-display font-bold text-neutral-800 flex items-center gap-2",children:[n.jsx(us,{className:"h-6 w-6 text-burgundy-500"}),"Global League"]}),n.jsxs("p",{className:"text-neutral-500",children:["Season ",(o=e.seasons)==null?void 0:o.number,": ",(l=e.seasons)==null?void 0:l.name]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[n.jsxs("div",{className:"bg-burgundy-50 border border-burgundy-200 rounded-2xl p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Ke,{className:"h-5 w-5 text-burgundy-500"}),n.jsx("span",{className:"text-burgundy-600 text-sm",children:"Total Players"})]}),n.jsx("p",{className:"text-3xl font-bold text-neutral-800",children:(a==null?void 0:a.totalPlayers)||0})]}),n.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-2xl p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(fr,{className:"h-5 w-5 text-green-500"}),n.jsx("span",{className:"text-green-600 text-sm",children:"Average Score"})]}),n.jsx("p",{className:"text-3xl font-bold text-neutral-800",children:(a==null?void 0:a.averageScore)||0})]})]}),n.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-amber-100 border border-amber-200 rounded-2xl p-4 mb-6",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-16 h-16 bg-amber-200 rounded-full flex items-center justify-center",children:n.jsx(er,{className:"h-8 w-8 text-amber-600"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-amber-700 text-sm",children:"Current Leader"}),n.jsx("p",{className:"text-2xl font-bold text-neutral-800",children:a==null?void 0:a.topScorer}),n.jsxs("p",{className:"text-amber-600 font-medium",children:[a==null?void 0:a.topScore," points"]})]}),n.jsx(zn,{className:"h-8 w-8 text-amber-500"})]})}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200",children:[n.jsx("div",{className:"px-4 py-3 border-b border-cream-200 flex items-center justify-between",children:n.jsxs("h2",{className:"text-lg font-display font-bold text-neutral-800 flex items-center gap-2",children:[n.jsx(ot,{className:"h-5 w-5 text-burgundy-500"}),"Top 100 Global Rankings"]})}),n.jsx("div",{className:"divide-y divide-cream-100",children:r==null?void 0:r.map((u,d)=>{var p,f;return n.jsxs("div",{className:`flex items-center gap-3 px-4 py-3 ${d<3?"bg-amber-50":""}`,children:[n.jsx("div",{className:"w-8 h-8 flex items-center justify-center",children:d===0?n.jsx("span",{className:"text-2xl",children:""}):d===1?n.jsx("span",{className:"text-2xl",children:""}):d===2?n.jsx("span",{className:"text-2xl",children:""}):n.jsx("span",{className:`font-bold ${d<10?"text-burgundy-500":"text-neutral-400"}`,children:d+1})}),(p=u.users)!=null&&p.avatar_url?n.jsx("img",{src:u.users.avatar_url,alt:"",className:"w-8 h-8 rounded-full object-cover"}):n.jsx("div",{className:"w-8 h-8 bg-cream-100 rounded-full flex items-center justify-center border border-cream-200",children:n.jsx(Ke,{className:"h-4 w-4 text-neutral-400"})}),n.jsx("div",{className:"flex-1 min-w-0",children:n.jsx("p",{className:"text-neutral-800 font-medium truncate",children:(f=u.users)==null?void 0:f.display_name})}),n.jsx("p",{className:`font-bold ${d===0?"text-amber-600 text-lg":d<3?"text-amber-600":"text-neutral-800"}`,children:u.total_points||0})]},u.id)})}),(!r||r.length===0)&&n.jsxs("div",{className:"p-8 text-center",children:[n.jsx(Er,{className:"h-12 w-12 text-neutral-400 mx-auto mb-4"}),n.jsx("p",{className:"text-neutral-500",children:"No rankings yet. Scoring will begin after the premiere."})]})]}),n.jsxs("div",{className:"mt-6 bg-white rounded-2xl shadow-card p-4 border border-cream-200",children:[n.jsx("h3",{className:"text-neutral-800 font-medium mb-3",children:"League Details"}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-neutral-400",children:"Code:"})," ",n.jsx("span",{className:"text-neutral-800 font-mono",children:e.code})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-neutral-400",children:"Status:"})," ",n.jsx("span",{className:"text-neutral-800",children:e.status})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-neutral-400",children:"Created:"})," ",n.jsx("span",{className:"text-neutral-800",children:e.created_at?new Date(e.created_at).toLocaleDateString():"N/A"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-neutral-400",children:"Max Players:"})," ",n.jsx("span",{className:"text-neutral-800",children:e.max_players})]})]})]})]})]}):n.jsxs(n.Fragment,{children:[n.jsx(_e,{}),n.jsx(dt,{}),n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 p-4 pb-24",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx(se,{to:"/admin",className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:n.jsx(ht,{className:"h-5 w-5 text-neutral-600"})}),n.jsx("h1",{className:"text-2xl font-display font-bold text-neutral-800",children:"Global League"})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-8 border border-cream-200 text-center",children:[n.jsx(us,{className:"h-16 w-16 text-neutral-400 mx-auto mb-4"}),n.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-2",children:"No Global League Found"}),n.jsx("p",{className:"text-neutral-500 mb-4",children:"A global league enables cross-league rankings for all players."}),n.jsx("p",{className:"text-sm text-neutral-400",children:"Contact a database administrator to create a global league for the active season."})]})]})]})}const aue="https://rgfl-api-production.up.railway.app";async function Yu(e,t){var i;const s=(i=(await X.auth.getSession()).data.session)==null?void 0:i.access_token;if(!s)throw new Error("Not authenticated");const a=await fetch(`${aue}${e}`,{...t,headers:{...t==null?void 0:t.headers,Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});if(!a.ok){const o=await a.json().catch(()=>({}));throw new Error(o.error||`API error: ${a.status}`)}return a.json()}const FP=[{value:"low",label:"Low",color:"bg-green-100 text-green-700 border-green-200"},{value:"medium",label:"Medium",color:"bg-blue-100 text-blue-700 border-blue-200"},{value:"high",label:"High",color:"bg-amber-100 text-amber-700 border-amber-200"},{value:"urgent",label:"Urgent",color:"bg-red-100 text-red-700 border-red-200"}],iue=e=>{const t=FP.find(r=>r.value===e);return(t==null?void 0:t.color)||"bg-gray-100 text-gray-700"},oue=e=>{switch(e){case"urgent":return n.jsx(Tt,{className:"h-4 w-4"});case"high":return n.jsx(Od,{className:"h-4 w-4"});case"medium":return n.jsx(dx,{className:"h-4 w-4"});default:return n.jsx(dj,{className:"h-4 w-4"})}};function lue(){const e=at(),[t,r]=$.useState(!1),[s,a]=$.useState(null),[i,o]=$.useState(null),[l,u]=$.useState({title:"",body:"",priority:"medium",is_active:!0,expires_at:""}),{data:d,isLoading:p}=ie({queryKey:["admin-announcements"],queryFn:async()=>await Yu("/api/admin/announcements")}),f=ke({mutationFn:async N=>Yu("/api/admin/announcements",{method:"POST",body:JSON.stringify({...N,expires_at:N.expires_at||null})}),onSuccess:()=>{e.invalidateQueries({queryKey:["admin-announcements"]}),e.invalidateQueries({queryKey:["announcements"]}),r(!1),g()},onError:N=>o(N.message)}),m=ke({mutationFn:async({id:N,data:C})=>Yu(`/api/admin/announcements/${N}`,{method:"PATCH",body:JSON.stringify({...C,expires_at:C.expires_at||null})}),onSuccess:()=>{e.invalidateQueries({queryKey:["admin-announcements"]}),e.invalidateQueries({queryKey:["announcements"]}),a(null),g()},onError:N=>o(N.message)}),x=ke({mutationFn:async N=>Yu(`/api/admin/announcements/${N}/toggle`,{method:"POST"}),onSuccess:()=>{e.invalidateQueries({queryKey:["admin-announcements"]}),e.invalidateQueries({queryKey:["announcements"]})},onError:N=>o(N.message)}),y=ke({mutationFn:async N=>Yu(`/api/admin/announcements/${N}`,{method:"DELETE"}),onSuccess:()=>{e.invalidateQueries({queryKey:["admin-announcements"]}),e.invalidateQueries({queryKey:["announcements"]})},onError:N=>o(N.message)}),g=()=>{u({title:"",body:"",priority:"medium",is_active:!0,expires_at:""})},b=N=>{a(N.id),u({title:N.title,body:N.body,priority:N.priority,is_active:N.is_active,expires_at:N.expires_at?XE(new Date(N.expires_at),"yyyy-MM-dd'T'HH:mm"):""})},_=N=>{if(N.preventDefault(),o(null),!l.title.trim()||!l.body.trim()){o("Title and body are required");return}s?m.mutate({id:s,data:l}):f.mutate(l)},w=(N,C)=>{confirm(`Are you sure you want to delete "${C}"?`)&&y.mutate(N)},S=(d==null?void 0:d.announcements)||[],j=S.filter(N=>N.is_active).length;return n.jsxs("div",{className:"min-h-screen bg-cream-50",children:[n.jsx(_e,{}),n.jsx(dt,{}),n.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-8",children:[n.jsxs("div",{className:"flex items-center justify-between mb-8",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(se,{to:"/admin",className:"p-2 hover:bg-cream-200 rounded-lg transition-colors",children:n.jsx(ht,{className:"h-5 w-5 text-neutral-600"})}),n.jsxs("div",{children:[n.jsxs("h1",{className:"text-2xl font-display font-bold text-neutral-800 flex items-center gap-2",children:[n.jsx(Od,{className:"h-6 w-6 text-burgundy-500"}),"Announcements"]}),n.jsxs("p",{className:"text-neutral-500 text-sm",children:[S.length," total  ",j," active"]})]})]}),!t&&!s&&n.jsxs("button",{onClick:()=>r(!0),className:"btn btn-primary flex items-center gap-2",children:[n.jsx(tr,{className:"h-4 w-4"}),"New Announcement"]})]}),i&&n.jsxs("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-xl p-4 flex items-center gap-3",children:[n.jsx(Tt,{className:"h-5 w-5 text-red-500 flex-shrink-0"}),n.jsx("p",{className:"text-red-700",children:i}),n.jsx("button",{onClick:()=>o(null),className:"ml-auto text-red-500 hover:text-red-700",children:n.jsx(It,{className:"h-4 w-4"})})]}),(t||s)&&n.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 p-6 mb-8",children:[n.jsx("h2",{className:"font-display font-bold text-lg text-neutral-800 mb-4",children:s?"Edit Announcement":"New Announcement"}),n.jsxs("form",{onSubmit:_,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Title *"}),n.jsx("input",{type:"text",value:l.title,onChange:N=>u({...l,title:N.target.value}),className:"w-full px-4 py-2 border border-cream-200 rounded-lg focus:ring-2 focus:ring-burgundy-500 focus:border-burgundy-500",placeholder:"Announcement title..."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Body *"}),n.jsx("textarea",{value:l.body,onChange:N=>u({...l,body:N.target.value}),rows:3,className:"w-full px-4 py-2 border border-cream-200 rounded-lg focus:ring-2 focus:ring-burgundy-500 focus:border-burgundy-500",placeholder:"Announcement body..."})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Priority"}),n.jsx("select",{value:l.priority,onChange:N=>u({...l,priority:N.target.value}),className:"w-full px-4 py-2 border border-cream-200 rounded-lg focus:ring-2 focus:ring-burgundy-500 focus:border-burgundy-500",children:FP.map(N=>n.jsx("option",{value:N.value,children:N.label},N.value))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Expires At (optional)"}),n.jsx("input",{type:"datetime-local",value:l.expires_at,onChange:N=>u({...l,expires_at:N.target.value}),className:"w-full px-4 py-2 border border-cream-200 rounded-lg focus:ring-2 focus:ring-burgundy-500 focus:border-burgundy-500"})]}),n.jsx("div",{className:"flex items-end",children:n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:l.is_active,onChange:N=>u({...l,is_active:N.target.checked}),className:"w-4 h-4 text-burgundy-500 border-cream-300 rounded focus:ring-burgundy-500"}),n.jsx("span",{className:"text-sm text-neutral-700",children:"Active immediately"})]})})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsxs("button",{type:"submit",disabled:f.isPending||m.isPending,className:"btn btn-primary flex items-center gap-2",children:[f.isPending||m.isPending?n.jsx(be,{className:"h-4 w-4 animate-spin"}):n.jsx(Ar,{className:"h-4 w-4"}),s?"Update":"Create"]}),n.jsx("button",{type:"button",onClick:()=>{r(!1),a(null),g()},className:"btn btn-secondary",children:"Cancel"})]})]})]}),p?n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx(be,{className:"h-8 w-8 animate-spin text-burgundy-500"})}):S.length===0?n.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 p-12 text-center",children:[n.jsx(Od,{className:"h-12 w-12 text-neutral-300 mx-auto mb-4"}),n.jsx("h3",{className:"font-semibold text-neutral-800 mb-2",children:"No announcements yet"}),n.jsx("p",{className:"text-neutral-500 mb-6",children:"Create your first announcement to display on user dashboards."}),!t&&n.jsx("button",{onClick:()=>r(!0),className:"btn btn-primary",children:"Create Announcement"})]}):n.jsx("div",{className:"space-y-4",children:S.map(N=>n.jsx("div",{className:`bg-white rounded-2xl shadow-card border overflow-hidden ${N.is_active?"border-cream-200":"border-neutral-200 opacity-60"}`,children:n.jsx("div",{className:"p-5",children:n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium border ${iue(N.priority)}`,children:[oue(N.priority),N.priority.charAt(0).toUpperCase()+N.priority.slice(1)]}),!N.is_active&&n.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium bg-neutral-100 text-neutral-600",children:"Inactive"}),N.expires_at&&new Date(N.expires_at)<new Date&&n.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-600",children:"Expired"})]}),n.jsx("h3",{className:"font-semibold text-neutral-800 mb-1",children:N.title}),n.jsx("p",{className:"text-neutral-600 text-sm mb-3",children:N.body}),n.jsxs("div",{className:"flex items-center gap-4 text-xs text-neutral-400",children:[n.jsxs("span",{children:["Created"," ",bP(new Date(N.created_at),{addSuffix:!0})]}),N.expires_at&&n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(Nt,{className:"h-3 w-3"}),"Expires"," ",XE(new Date(N.expires_at),"MMM d, yyyy h:mm a")]})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>x.mutate(N.id),disabled:x.isPending,className:"p-2 hover:bg-cream-100 rounded-lg transition-colors",title:N.is_active?"Deactivate":"Activate",children:N.is_active?n.jsx(uP,{className:"h-5 w-5 text-green-500"}):n.jsx(cP,{className:"h-5 w-5 text-neutral-400"})}),n.jsx("button",{onClick:()=>b(N),className:"p-2 hover:bg-cream-100 rounded-lg transition-colors",title:"Edit",children:n.jsx(ru,{className:"h-4 w-4 text-neutral-500"})}),n.jsx("button",{onClick:()=>w(N.id,N.title),disabled:y.isPending,className:"p-2 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:n.jsx(ms,{className:"h-4 w-4 text-red-500"})})]})]})})},N.id))})]})]})}const zl=["Pre-Merge Challenges","Post-Merge Challenges","Tribal Council","Strategic Play","Social Game","Idols & Advantages","Survival","Confessionals","Bonus","Penalties"];function cue(){const e=at(),[t,r]=$.useState(""),[s,a]=$.useState("all"),[i,o]=$.useState(null),[l,u]=$.useState(!1),[d,p]=$.useState(new Set(zl)),[f,m]=$.useState({code:"",name:"",description:"",points:0,category:zl[0],is_negative:!1,is_active:!0}),{data:x,isLoading:y}=ie({queryKey:["admin-scoring-rules"],queryFn:async()=>{const{data:W,error:K}=await X.from("scoring_rules").select("*").order("category").order("sort_order");if(K)throw K;return(W||[]).map(F=>({...F,effective_from_episode_id:F.effective_from_episode_id??null}))}}),{data:g,isLoading:b}=ie({queryKey:["admin","scoring-categories"],queryFn:async()=>{const{data:W,error:K}=await X.from("site_copy").select("*").eq("page","scoring_categories").eq("is_active",!0).order("sort_order",{ascending:!0});if(K)throw K;return W||[]}});$.useEffect(()=>{g&&g.length===0&&Promise.all(zl.map((W,K)=>X.from("site_copy").insert({page:"scoring_categories",key:`scoring_category_${W.toLowerCase().replace(/\s+/g,"_")}`,content:W,sort_order:K,is_active:!0}))).then(()=>{e.invalidateQueries({queryKey:["admin","scoring-categories"]})})},[g,e]);const _=(g==null?void 0:g.map(W=>W.content))||zl,w=ke({mutationFn:async W=>{const{error:K}=await X.from("scoring_rules").insert(W);if(K)throw K},onSuccess:()=>{e.invalidateQueries({queryKey:["admin-scoring-rules"]}),u(!1),I()}}),S=ke({mutationFn:async({id:W,...K})=>{const{error:F}=await X.from("scoring_rules").update(K).eq("id",W);if(F)throw F},onSuccess:()=>{e.invalidateQueries({queryKey:["admin-scoring-rules"]}),o(null),I()}}),j=ke({mutationFn:async W=>{const{error:K}=await X.from("scoring_rules").delete().eq("id",W);if(K)throw K},onSuccess:()=>{e.invalidateQueries({queryKey:["admin-scoring-rules"]})}}),N=ke({mutationFn:async({id:W,is_active:K})=>{const{error:F}=await X.from("scoring_rules").update({is_active:K}).eq("id",W);if(F)throw F},onSuccess:()=>{e.invalidateQueries({queryKey:["admin-scoring-rules"]})}}),C=ke({mutationFn:async W=>{const K=(g==null?void 0:g.reduce((H,L)=>Math.max(H,L.sort_order||0),0))||0,{error:F}=await X.from("site_copy").insert({page:"scoring_categories",key:`scoring_category_${Date.now()}`,content:W,sort_order:K+1,is_active:!0});if(F)throw F},onSuccess:()=>{e.invalidateQueries({queryKey:["admin","scoring-categories"]})}}),E=ke({mutationFn:async({id:W,name:K})=>{const{error:F}=await X.from("site_copy").update({content:K}).eq("id",W);if(F)throw F},onSuccess:()=>{e.invalidateQueries({queryKey:["admin","scoring-categories"]})}}),T=ke({mutationFn:async W=>{var L;const K=(L=g==null?void 0:g.find(q=>q.id===W))==null?void 0:L.content,F=(x==null?void 0:x.filter(q=>q.category===K).length)||0;if(F>0)throw new Error(`Cannot delete category with ${F} rules. Reassign them first.`);const{error:H}=await X.from("site_copy").delete().eq("id",W);if(H)throw H},onSuccess:()=>{e.invalidateQueries({queryKey:["admin","scoring-categories"]})}}),I=()=>{m({code:"",name:"",description:"",points:0,category:zl[0],is_negative:!1,is_active:!0})},A=W=>{o(W),m({code:W.code,name:W.name,description:W.description||"",points:W.points,category:W.category||zl[0],is_negative:!!W.is_negative,is_active:!!W.is_active}),u(!1)},R=()=>{u(!0),o(null),I()},O=()=>{const W={code:f.code,name:f.name,description:f.description||null,points:f.points,category:f.category,is_negative:f.is_negative,is_active:f.is_active,sort_order:0};i?S.mutate({id:i.id,...W}):w.mutate(W)},M=W=>{p(K=>{const F=new Set(K);return F.has(W)?F.delete(W):F.add(W),F})},B=x==null?void 0:x.filter(W=>{var H;const K=W.code.toLowerCase().includes(t.toLowerCase())||W.name.toLowerCase().includes(t.toLowerCase())||((H=W.description)==null?void 0:H.toLowerCase().includes(t.toLowerCase())),F=s==="all"||W.category===s;return K&&F}),U=_.reduce((W,K)=>(W[K]=(B==null?void 0:B.filter(F=>F.category===K))||[],W),{}),Y={total:(x==null?void 0:x.length)||0,active:(x==null?void 0:x.filter(W=>!!W.is_active&&!W.effective_from_episode_id).length)||0,inactive:(x==null?void 0:x.filter(W=>!W.is_active).length)||0,pending:(x==null?void 0:x.filter(W=>!!W.effective_from_episode_id).length)||0};return y?n.jsxs(n.Fragment,{children:[n.jsx(_e,{}),n.jsx(dt,{}),n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center",children:n.jsx(be,{className:"h-8 w-8 text-burgundy-500 animate-spin"})})]}):n.jsxs(n.Fragment,{children:[n.jsx(_e,{}),n.jsx(dt,{}),n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 p-4 pb-24",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx(se,{to:"/admin",className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:n.jsx(ht,{className:"h-5 w-5 text-neutral-600"})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("h1",{className:"text-2xl font-display font-bold text-neutral-800 flex items-center gap-2",children:[n.jsx($c,{className:"h-6 w-6 text-burgundy-500"}),"Scoring Rules"]}),n.jsxs("p",{className:"text-neutral-500",children:[(x==null?void 0:x.length)||0," rules defined"]})]}),n.jsxs("button",{onClick:R,className:"btn btn-primary",children:[n.jsx(tr,{className:"h-4 w-4"}),"Add Rule"]})]}),n.jsxs("div",{className:"grid grid-cols-4 gap-2 mb-6",children:[n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-3 border border-cream-200 text-center",children:[n.jsx("p",{className:"text-xl font-bold text-neutral-800",children:Y.total}),n.jsx("p",{className:"text-neutral-500 text-xs",children:"Total"})]}),n.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-2xl p-3 text-center",children:[n.jsx("p",{className:"text-xl font-bold text-green-600",children:Y.active}),n.jsx("p",{className:"text-neutral-500 text-xs",children:"Active"})]}),n.jsxs("div",{className:"bg-neutral-100 border border-neutral-200 rounded-2xl p-3 text-center",children:[n.jsx("p",{className:"text-xl font-bold text-neutral-500",children:Y.inactive}),n.jsx("p",{className:"text-neutral-500 text-xs",children:"Inactive"})]}),n.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-2xl p-3 text-center",children:[n.jsx("p",{className:"text-xl font-bold text-amber-600",children:Y.pending}),n.jsx("p",{className:"text-neutral-500 text-xs",children:"Pending"})]})]}),!l&&!i&&n.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 p-4 mb-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-lg font-semibold text-neutral-800",children:"Categories"}),n.jsxs("button",{onClick:()=>{const W=prompt("Enter category name:");W&&C.mutate(W)},className:"flex items-center gap-2 text-burgundy-500 hover:text-burgundy-600 transition-colors",children:[n.jsx(tr,{className:"h-4 w-4"}),"Add Category"]})]}),b?n.jsx("div",{className:"flex justify-center py-4",children:n.jsx(be,{className:"h-5 w-5 text-burgundy-500 animate-spin"})}):n.jsxs("div",{className:"flex flex-wrap gap-2",children:[g==null?void 0:g.map(W=>n.jsxs("div",{className:"flex items-center gap-1 bg-cream-100 px-3 py-1.5 rounded-lg",children:[n.jsx("span",{className:"text-sm text-neutral-700",children:W.content}),n.jsx("button",{onClick:()=>{const K=prompt("Edit category name:",W.content);K&&K!==W.content&&E.mutate({id:W.id,name:K})},className:"text-neutral-400 hover:text-burgundy-500 transition-colors p-1",title:"Edit category",children:n.jsx(fp,{className:"h-3 w-3"})}),n.jsx("button",{onClick:()=>{confirm(`Delete category "${W.content}"?`)&&T.mutate(W.id).catch(K=>alert(K.message))},className:"text-neutral-400 hover:text-red-500 transition-colors p-1",title:"Delete category",children:n.jsx(It,{className:"h-3 w-3"})})]},W.id)),(g==null?void 0:g.length)===0&&n.jsx("p",{className:"text-sm text-neutral-500",children:"No categories yet. Add one to get started."})]})]}),(l||i)&&n.jsxs("div",{className:"bg-burgundy-50 border border-burgundy-200 rounded-2xl p-4 mb-6",children:[n.jsx("h3",{className:"text-neutral-800 font-medium mb-4",children:i?"Edit Rule":"Add New Rule"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-neutral-500 text-sm mb-1 block",children:"Code"}),n.jsx("input",{type:"text",value:f.code,onChange:W=>m({...f,code:W.target.value.toUpperCase()}),placeholder:"VOTE_CORRECT",className:"input font-mono"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-neutral-500 text-sm mb-1 block",children:"Points"}),n.jsx("input",{type:"number",value:f.points,onChange:W=>m({...f,points:parseInt(W.target.value)||0}),className:"input"})]}),n.jsxs("div",{className:"col-span-2",children:[n.jsx("label",{className:"text-neutral-500 text-sm mb-1 block",children:"Name"}),n.jsx("input",{type:"text",value:f.name,onChange:W=>m({...f,name:W.target.value}),placeholder:"Voted correctly",className:"input"})]}),n.jsxs("div",{className:"col-span-2",children:[n.jsx("label",{className:"text-neutral-500 text-sm mb-1 block",children:"Description"}),n.jsx("input",{type:"text",value:f.description,onChange:W=>m({...f,description:W.target.value}),placeholder:"Points for voting with the majority",className:"input"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-neutral-500 text-sm mb-1 block",children:"Category"}),n.jsx("select",{value:f.category,onChange:W=>m({...f,category:W.target.value}),className:"input",children:_.map(W=>n.jsx("option",{value:W,children:W},W))})]}),n.jsxs("div",{className:"flex items-center gap-4 pt-6",children:[n.jsxs("label",{className:"flex items-center gap-2 text-neutral-800",children:[n.jsx("input",{type:"checkbox",checked:f.is_negative,onChange:W=>m({...f,is_negative:W.target.checked}),className:"w-4 h-4 rounded border-cream-300 text-burgundy-500"}),"Negative Points"]}),n.jsxs("label",{className:"flex items-center gap-2 text-neutral-800",children:[n.jsx("input",{type:"checkbox",checked:f.is_active,onChange:W=>m({...f,is_active:W.target.checked}),className:"w-4 h-4 rounded border-cream-300 text-burgundy-500"}),"Active"]})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:O,disabled:w.isPending||S.isPending,className:"btn btn-primary flex-1",children:w.isPending||S.isPending?n.jsx(be,{className:"h-4 w-4 animate-spin"}):n.jsxs(n.Fragment,{children:[n.jsx(Ar,{className:"h-4 w-4"}),i?"Update Rule":"Create Rule"]})}),n.jsx("button",{onClick:()=>{u(!1),o(null),I()},className:"btn btn-secondary px-4",children:n.jsx(It,{className:"h-4 w-4"})})]})]}),n.jsxs("div",{className:"flex gap-2 mb-6",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx(Ka,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-neutral-400"}),n.jsx("input",{type:"text",value:t,onChange:W=>r(W.target.value),placeholder:"Search rules...",className:"input pl-10"})]}),n.jsxs("select",{value:s,onChange:W=>a(W.target.value),className:"input px-3 py-2 w-40",children:[n.jsx("option",{value:"all",children:"All Categories"}),_.map(W=>n.jsx("option",{value:W,children:W},W))]})]}),n.jsx("div",{className:"space-y-4",children:_.map(W=>{const K=U[W];return K.length===0?null:n.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 overflow-hidden",children:[n.jsxs("button",{onClick:()=>M(W),className:"w-full px-4 py-3 flex items-center justify-between hover:bg-cream-50 transition-colors",children:[n.jsx("h3",{className:"text-neutral-800 font-medium",children:W}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("span",{className:"text-neutral-500 text-sm",children:[K.length," rules"]}),d.has(W)?n.jsx(fs,{className:"h-4 w-4 text-neutral-400"}):n.jsx(en,{className:"h-4 w-4 text-neutral-400"})]})]}),d.has(W)&&n.jsx("div",{className:"border-t border-cream-200 divide-y divide-cream-100",children:K.map(F=>{const H=!!F.effective_from_episode_id;return n.jsxs("div",{className:`px-4 py-3 flex items-center gap-3 ${F.is_active?"":"bg-neutral-50"}`,children:[n.jsx("button",{onClick:()=>N.mutate({id:F.id,is_active:!F.is_active}),disabled:N.isPending,className:"flex-shrink-0",title:F.is_active?"Click to deactivate":"Click to activate",children:F.is_active?n.jsx(uP,{className:"h-6 w-6 text-green-500"}):n.jsx(cP,{className:"h-6 w-6 text-neutral-300"})}),n.jsxs("span",{className:`font-mono text-xs px-2 py-0.5 rounded ${F.is_negative?"bg-red-100 text-red-600":"bg-green-100 text-green-600"}`,children:[F.is_negative?"-":"+",Math.abs(F.points)]}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("p",{className:`font-medium truncate ${F.is_active?"text-neutral-800":"text-neutral-400"}`,children:F.name}),H&&n.jsxs("span",{className:"flex items-center gap-1 text-xs bg-amber-100 text-amber-700 px-2 py-0.5 rounded-full",children:[n.jsx(Nt,{className:"h-3 w-3"}),"Pending"]})]}),n.jsx("p",{className:"text-neutral-400 text-xs font-mono",children:F.code})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("button",{onClick:()=>A(F),className:"p-2 hover:bg-cream-100 rounded-xl transition-colors",children:n.jsx(fp,{className:"h-4 w-4 text-neutral-500"})}),n.jsx("button",{onClick:()=>{confirm("Delete this rule?")&&j.mutate(F.id)},className:"p-2 hover:bg-red-50 rounded-xl transition-colors",children:n.jsx(ms,{className:"h-4 w-4 text-red-500"})})]})]},F.id)})})]},W)})})]})]})}async function uue(e,t){var u,d,p;const r="https://rgfl-api-production.up.railway.app",s=async f=>await fetch(`${r}${e}`,{...t,headers:{...t==null?void 0:t.headers,Authorization:`Bearer ${f}`,"Content-Type":"application/json"}}),{data:a,error:i}=await X.auth.getSession();if(i)throw console.error("Session error:",i),new Error("Session error - please refresh the page");let o=(u=a.session)==null?void 0:u.access_token;if(!o){const{data:f,error:m}=await X.auth.refreshSession();if(m||!((d=f.session)!=null&&d.access_token))throw new Error("Not authenticated - please log in again");o=f.session.access_token}let l=await s(o);if(l.status===401||l.status===403){console.log("Auth error, attempting token refresh...");const{data:f,error:m}=await X.auth.refreshSession();!m&&((p=f.session)!=null&&p.access_token)&&(l=await s(f.session.access_token))}if(!l.ok){const f=await l.json().catch(()=>({}));throw new Error(f.error||`API error: ${l.status}`)}return l.json()}function due(){const{user:e}=Et(),t=at(),[r]=Hd(),s=r.get("episode"),[a,i]=$.useState(s),[o,l]=$.useState({}),[u,d]=$.useState(null),[p,f]=$.useState(!1),[m,x]=$.useState(!1),[y,g]=$.useState(null),[b,_]=$.useState("Most Scored Rules"),[w,S]=$.useState(!1),j=$.useRef(null),{data:N}=wP(e==null?void 0:e.id),{data:C}=_P(),{data:E}=jP(C==null?void 0:C.id),{data:T}=NP(C==null?void 0:C.id),{data:I}=SP(C==null?void 0:C.id),{data:A}=kP(a),{data:R}=EP(a),O=$.useMemo(()=>CP(I),[I]),M=$.useMemo(()=>{const F=new Set(I==null?void 0:I.map(H=>H.category||"Other"));return["Most Scored Rules",...Array.from(F)]},[I]),B=$.useMemo(()=>b?b==="Most Scored Rules"?O:(I==null?void 0:I.filter(F=>(F.category||"Other")===b))||[]:I||[],[I,b,O]),U=$.useMemo(()=>(T==null?void 0:T.filter(F=>F.status==="active"))||[],[T]);$.useEffect(()=>{if(!m){if(w){S(!1);return}if(A&&U.length>0){const F={};U.forEach(H=>{F[H.id]={}}),A.forEach(H=>{F[H.castaway_id]&&(F[H.castaway_id][H.scoring_rule_id]=H.quantity)}),l(F),f(!1)}}},[A,U,m,w]);const Y=$.useCallback(async()=>{if(!(!a||!(e!=null&&e.id)||!I)){x(!0),g(null);try{const F=[];Object.entries(o).forEach(([H,L])=>{Object.entries(L).forEach(([q,z])=>{z>0&&F.push({castaway_id:H,scoring_rule_id:q,quantity:z})})}),await uue(`/api/episodes/${a}/scoring/save`,{method:"POST",body:JSON.stringify({scores:F})}),d(new Date),f(!1),S(!0),t.invalidateQueries({queryKey:["episodeScores",a]}),t.invalidateQueries({queryKey:["episodeScores"]}),t.invalidateQueries({queryKey:["scoringStatus",a]}),t.invalidateQueries({queryKey:["scoringStatus"]})}catch(F){g(F instanceof Error?F.message:"Failed to save scores")}finally{x(!1)}}},[a,e==null?void 0:e.id,o,I,t]);$.useEffect(()=>{if(!(!p||!a))return j.current&&clearTimeout(j.current),j.current=setTimeout(()=>{Y()},3e3),()=>{j.current&&clearTimeout(j.current)}},[o,p,a,Y]);const W=(F,H,L)=>{l(q=>({...q,[F]:{...q[F],[H]:Math.max(0,L)}})),f(!0)},K=F=>{const H=o[F]||{};return Object.entries(H).reduce((L,[q,z])=>{const Q=I==null?void 0:I.find(J=>J.id===q);return L+((Q==null?void 0:Q.points)||0)*z},0)};return N&&N.role!=="admin"?n.jsxs("div",{className:"min-h-screen bg-cream-50",children:[n.jsx(dt,{}),n.jsx("main",{className:"max-w-4xl mx-auto px-4 py-16 text-center",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated p-12",children:[n.jsx("h1",{className:"text-2xl font-display text-neutral-800 mb-3",children:"Access Denied"}),n.jsx("p",{className:"text-neutral-500 mb-8",children:"You don't have permission to access this page."}),n.jsx(se,{to:"/dashboard",className:"btn btn-primary",children:"Back to Dashboard"})]})})]}):n.jsxs("div",{className:"min-h-screen bg-cream-50",children:[n.jsx(dt,{}),n.jsxs("main",{className:"max-w-full mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(se,{to:"/admin",className:"text-neutral-400 hover:text-neutral-600 transition-colors","aria-label":"Back to admin",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),n.jsxs("div",{children:[n.jsxs("h1",{className:"text-2xl font-display text-neutral-800 flex items-center gap-2",children:[n.jsx(iP,{className:"h-6 w-6 text-burgundy-500"}),"Grid Scoring"]}),n.jsx("p",{className:"text-neutral-500 text-sm",children:"Score all castaways at once"})]})]}),n.jsxs("div",{className:"flex items-center gap-4",children:[R&&a&&!R.is_finalized&&n.jsxs("div",{className:`px-4 py-2 rounded-xl flex items-center gap-2 ${R.is_complete?"bg-green-100 text-green-700":"bg-amber-100 text-amber-700"}`,children:[R.is_complete?n.jsx(xt,{className:"h-5 w-5"}):n.jsx(Tt,{className:"h-5 w-5"}),n.jsxs("span",{className:"font-medium",children:[R.scored_castaways,"/",R.total_castaways," castaways scored"]})]}),n.jsxs(se,{to:`/admin/scoring${a?`?episode=${a}`:""}`,className:"btn btn-secondary flex items-center gap-2",children:[n.jsx(hne,{className:"h-4 w-4"}),"List View"]}),p&&n.jsxs("button",{onClick:Y,disabled:m,className:"btn btn-primary flex items-center gap-2",children:[m?n.jsx(be,{className:"h-4 w-4 animate-spin"}):n.jsx(Ar,{className:"h-4 w-4"}),"Save All"]})]})]}),y&&n.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl flex items-start gap-3",children:[n.jsx(yt,{className:"h-5 w-5 text-red-500 flex-shrink-0 mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-red-800 font-medium",children:"Save Error"}),n.jsx("p",{className:"text-red-600 text-sm",children:y})]}),n.jsx("button",{onClick:()=>g(null),className:"text-red-400 hover:text-red-600",children:n.jsx(It,{className:"h-5 w-5"})})]}),n.jsx("div",{className:"bg-white rounded-2xl shadow-elevated p-5 mb-6",children:n.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{className:"font-medium text-neutral-700",children:"Episode:"}),n.jsxs("select",{value:a||"",onChange:F=>i(F.target.value||null),className:"p-2 border border-cream-200 rounded-xl focus:ring-2 focus:ring-burgundy-500",children:[n.jsx("option",{value:"",children:"Choose episode..."}),E==null?void 0:E.filter(F=>F.number>1).map(F=>n.jsxs("option",{value:F.id,children:["Ep ",F.number,": ",F.title||"TBD"," ",F.is_scored?"":""]},F.id))]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{className:"font-medium text-neutral-700",children:"Category:"}),n.jsxs("select",{value:b||"",onChange:F=>_(F.target.value||null),className:"p-2 border border-cream-200 rounded-xl focus:ring-2 focus:ring-burgundy-500",children:[n.jsx("option",{value:"",children:"All Categories"}),M.map(F=>n.jsx("option",{value:F,children:F},F))]})]}),n.jsx("div",{className:"flex-1"}),m&&n.jsxs("span",{className:"text-sm text-neutral-500 flex items-center gap-1",children:[n.jsx(be,{className:"h-4 w-4 animate-spin"}),"Saving..."]}),u&&!p&&!m&&n.jsxs("span",{className:"text-sm text-green-600 flex items-center gap-1",children:[n.jsx(Ar,{className:"h-4 w-4"}),"Saved at ",u.toLocaleTimeString()]}),p&&!m&&n.jsx("span",{className:"text-sm text-amber-600",children:"Unsaved changes (auto-saves in 3s)"})]})}),a?n.jsx("div",{className:"bg-white rounded-2xl shadow-elevated overflow-hidden",children:n.jsx("div",{className:"overflow-auto max-h-[calc(100vh-280px)]",children:n.jsxs("table",{className:"w-full border-collapse",children:[n.jsx("thead",{className:"sticky top-0 z-20",children:n.jsxs("tr",{className:"bg-cream-50",children:[n.jsxs("th",{className:"sticky left-0 top-0 bg-cream-50 z-30 p-3 text-left font-semibold text-neutral-700 border-b border-r border-cream-200 min-w-[200px]",children:["Rule (",B.length,")"]}),U.map(F=>n.jsx("th",{className:"p-2 text-center border-b border-cream-200 min-w-[80px] bg-cream-50",children:n.jsxs("div",{className:"flex flex-col items-center gap-1",children:[F.photo_url?n.jsx("img",{src:F.photo_url,alt:F.name,className:"w-10 h-10 rounded-full object-cover border border-cream-200"}):n.jsx("div",{className:"w-10 h-10 bg-cream-200 rounded-full flex items-center justify-center",children:n.jsx("span",{className:"text-xs font-bold text-neutral-500",children:F.name.charAt(0)})}),n.jsx("span",{className:"text-xs font-medium text-neutral-700 max-w-[70px] truncate",children:F.name.split(" ")[0]})]})},F.id))]})}),n.jsxs("tbody",{children:[B.map((F,H)=>n.jsxs("tr",{className:H%2===0?"bg-white":"bg-cream-50/50",children:[n.jsx("td",{className:"sticky left-0 bg-inherit z-10 p-3 border-r border-cream-200",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("span",{className:`px-2 py-0.5 rounded text-xs font-bold ${F.is_negative?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:[F.points>=0?"+":"",F.points]}),n.jsx("span",{className:"text-sm font-medium text-neutral-800",children:F.name})]})}),U.map(L=>{var z;const q=((z=o[L.id])==null?void 0:z[F.id])||0;return n.jsx("td",{className:"p-1 text-center",children:n.jsx("input",{type:"number",min:"0",value:q||"",onChange:Q=>W(L.id,F.id,parseInt(Q.target.value)||0),className:`w-12 h-8 text-center text-sm border rounded focus:ring-2 focus:ring-burgundy-500 focus:border-burgundy-500 ${q>0?"border-burgundy-300 bg-burgundy-50":"border-cream-200"}`,placeholder:"0"})},L.id)})]},F.id)),n.jsxs("tr",{className:"bg-burgundy-50 border-t-2 border-burgundy-200",children:[n.jsx("td",{className:"sticky left-0 bg-burgundy-50 z-10 p-3 font-bold text-burgundy-700 border-r border-burgundy-200",children:"TOTAL"}),U.map(F=>{const H=K(F.id);return n.jsx("td",{className:"p-2 text-center",children:n.jsx("span",{className:`font-bold text-lg ${H>0?"text-green-600":H<0?"text-red-600":"text-neutral-400"}`,children:H!==0?(H>0?"+":"")+H:""})},F.id)})]})]})]})})}):n.jsx("div",{className:"bg-white rounded-2xl shadow-elevated p-12 text-center",children:n.jsx("p",{className:"text-neutral-500",children:"Select an episode to begin scoring"})})]})]})}const hue="https://rgfl-api-production.up.railway.app";async function Yb(e,t){var i;const s=(i=(await X.auth.getSession()).data.session)==null?void 0:i.access_token;if(!s)throw new Error("Not authenticated");const a=await fetch(`${hue}${e}`,{...t,headers:{...t==null?void 0:t.headers,Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});if(!a.ok){const o=await a.json().catch(()=>({}));throw new Error(o.error||`API error: ${a.status}`)}return a.json()}function fue(){var m,x,y;const e=at(),[t,r]=$.useState(null),{data:s,isLoading:a}=ie({queryKey:["admin-email-stats"],queryFn:async()=>await Yb("/api/admin/email-queue/stats")||{pending:0,processing:0,failed_today:0,sent_today:0,total_sent:0},refetchInterval:3e4}),{data:i,isLoading:o,refetch:l}=ie({queryKey:["admin-failed-emails"],queryFn:async()=>await Yb("/api/admin/failed-emails")||{failed_emails:[],total:0},refetchInterval:3e4}),u=ke({mutationFn:async g=>Yb(`/api/admin/failed-emails/${g}/retry`,{method:"POST"}),onMutate:g=>{r(g)},onSuccess:()=>{e.invalidateQueries({queryKey:["admin-failed-emails"]}),e.invalidateQueries({queryKey:["admin-email-stats"]}),r(null)},onError:()=>{r(null)}}),d=a||o,p=((m=i==null?void 0:i.failed_emails)==null?void 0:m.filter(g=>!g.retry_attempted))||[],f=((x=i==null?void 0:i.failed_emails)==null?void 0:x.filter(g=>g.retry_attempted))||[];return n.jsxs(n.Fragment,{children:[n.jsx(dt,{}),n.jsxs("div",{className:"min-h-screen bg-neutral-900 p-4 pb-24",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx(se,{to:"/admin",className:"p-2 bg-neutral-800 rounded-xl hover:bg-neutral-700 transition-all border border-neutral-700",children:n.jsx(ht,{className:"h-5 w-5 text-neutral-400"})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("h1",{className:"text-2xl font-display font-bold text-white flex items-center gap-2",children:[n.jsx(sn,{className:"h-6 w-6 text-orange-400"}),"Email Dashboard"]}),n.jsx("p",{className:"text-neutral-400",children:"Track outgoing messages"})]}),n.jsx("button",{onClick:()=>l(),disabled:d,className:"p-2 bg-neutral-800 rounded-xl hover:bg-neutral-700 transition-all border border-neutral-700",children:n.jsx(an,{className:`h-5 w-5 text-neutral-400 ${d?"animate-spin":""}`})})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[n.jsxs("div",{className:"bg-neutral-800 rounded-2xl p-4 border border-neutral-700",children:[n.jsxs("div",{className:"flex items-center gap-2 text-neutral-400 text-sm mb-1",children:[n.jsx(Nt,{className:"h-4 w-4"}),"Waiting"]}),n.jsx("p",{className:"text-2xl font-bold text-white",children:(s==null?void 0:s.pending)||0})]}),n.jsxs("div",{className:"bg-neutral-800 rounded-2xl p-4 border border-neutral-700",children:[n.jsxs("div",{className:"flex items-center gap-2 text-neutral-400 text-sm mb-1",children:[n.jsx(be,{className:"h-4 w-4"}),"Sending"]}),n.jsx("p",{className:"text-2xl font-bold text-white",children:(s==null?void 0:s.processing)||0})]}),n.jsxs("div",{className:"bg-green-900/30 rounded-2xl border border-green-700/50 p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 text-green-400 text-sm mb-1",children:[n.jsx(Jn,{className:"h-4 w-4"}),"Delivered Today"]}),n.jsx("p",{className:"text-2xl font-bold text-green-400",children:(s==null?void 0:s.sent_today)||0})]}),n.jsxs("div",{className:"bg-red-900/30 rounded-2xl border border-red-700/50 p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 text-red-400 text-sm mb-1",children:[n.jsx(Tr,{className:"h-4 w-4"}),"Issues Today"]}),n.jsx("p",{className:"text-2xl font-bold text-red-400",children:(s==null?void 0:s.failed_today)||0})]})]}),n.jsx("div",{className:"bg-gradient-to-r from-orange-600/20 to-burgundy-600/20 rounded-2xl border border-orange-500/30 p-4 mb-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-orange-300 text-sm mb-1",children:"All-Time Delivered"}),n.jsx("p",{className:"text-3xl font-bold text-white",children:((y=s==null?void 0:s.total_sent)==null?void 0:y.toLocaleString())||0})]}),n.jsx(su,{className:"h-8 w-8 text-orange-400"})]})}),p.length>0&&n.jsxs("div",{className:"mb-6",children:[n.jsxs("h2",{className:"text-lg font-display font-bold text-white mb-3 flex items-center gap-2",children:[n.jsx(Tt,{className:"h-5 w-5 text-amber-400"}),"Needs Attention (",p.length,")"]}),n.jsx("div",{className:"space-y-3",children:p.map(g=>n.jsxs("div",{className:"bg-neutral-800 rounded-2xl p-4 border border-amber-500/50",children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"font-medium text-white truncate",children:g.email_job.subject}),n.jsxs("p",{className:"text-sm text-neutral-400 truncate",children:["To: ",g.email_job.to_email]})]}),n.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs bg-amber-500/20 text-amber-400 border border-amber-500/30",children:"Needs Retry"})]}),n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsx("span",{className:"text-neutral-500",children:new Date(g.failed_at).toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})}),n.jsx("button",{onClick:()=>u.mutate(g.id),disabled:t===g.id,className:"flex items-center gap-2 bg-orange-500 hover:bg-orange-600 text-white py-1.5 px-3 rounded-lg text-sm font-medium transition-colors",children:t===g.id?n.jsxs(n.Fragment,{children:[n.jsx(be,{className:"h-4 w-4 animate-spin"}),"Sending..."]}):n.jsxs(n.Fragment,{children:[n.jsx(mj,{className:"h-4 w-4"}),"Resend"]})})]}),g.notes&&n.jsx("p",{className:"mt-2 text-xs text-red-400 bg-red-900/30 rounded-lg p-2 border border-red-700/50",children:g.notes})]},g.id))})]}),f.length>0&&n.jsxs("div",{className:"mb-6",children:[n.jsxs("h2",{className:"text-lg font-display font-bold text-white mb-3 flex items-center gap-2",children:[n.jsx(xt,{className:"h-5 w-5 text-green-400"}),"Recent Retries (",f.length,")"]}),n.jsx("div",{className:"space-y-2",children:f.map(g=>n.jsx("div",{className:`bg-neutral-800 rounded-xl p-3 border ${g.retry_succeeded?"border-green-700/50":"border-red-700/50"}`,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[g.retry_succeeded?n.jsx(xt,{className:"h-5 w-5 text-green-400"}):n.jsx(Tr,{className:"h-5 w-5 text-red-400"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-white text-sm",children:g.email_job.subject}),n.jsx("p",{className:"text-xs text-neutral-500",children:g.email_job.to_email})]})]}),n.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs ${g.retry_succeeded?"bg-green-900/50 text-green-400 border border-green-700/50":"bg-red-900/50 text-red-400 border border-red-700/50"}`,children:g.retry_succeeded?"Delivered":"Failed"})]})},g.id))})]}),!d&&p.length===0&&f.length===0&&n.jsxs("div",{className:"bg-neutral-800 rounded-2xl p-8 border border-neutral-700 text-center",children:[n.jsx(xt,{className:"h-12 w-12 text-green-400 mx-auto mb-3"}),n.jsx("h3",{className:"text-lg font-display font-bold text-white mb-1",children:"All Clear!"}),n.jsx("p",{className:"text-neutral-400",children:"All emails have been delivered successfully."})]})]})]})}const mue="https://rgfl-api-production.up.railway.app";async function em(e){var a;const r=(a=(await X.auth.getSession()).data.session)==null?void 0:a.access_token;if(!r)throw new Error("Not authenticated");const s=await fetch(`${mue}${e}`,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}});if(!s.ok){const i=await s.json().catch(()=>({}));throw new Error(i.error||`API error: ${s.status}`)}return s.json()}function pue(){const[e,t]=$.useState("executive"),{data:r,isLoading:s,refetch:a}=ie({queryKey:["admin-analytics-executive"],queryFn:()=>em("/api/admin/analytics/executive"),enabled:e==="executive",staleTime:300*1e3}),{data:i,isLoading:o,refetch:l}=ie({queryKey:["admin-analytics-engagement"],queryFn:()=>em("/api/admin/analytics/engagement"),enabled:e==="engagement",staleTime:300*1e3}),{data:u,isLoading:d,refetch:p}=ie({queryKey:["admin-analytics-operations"],queryFn:()=>em("/api/admin/analytics/operations"),enabled:e==="operations",staleTime:30*1e3}),[f,m]=$.useState(30),{data:x,isLoading:y,refetch:g}=ie({queryKey:["admin-analytics-history",f],queryFn:()=>em(`/api/admin/analytics/history?days=${f}`),enabled:e==="history",staleTime:300*1e3}),b=()=>{e==="executive"?a():e==="engagement"?l():e==="operations"?p():g()},_=e==="executive"&&s||e==="engagement"&&o||e==="operations"&&d||e==="history"&&y;return n.jsxs(n.Fragment,{children:[n.jsx(_e,{}),n.jsx(dt,{}),n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 p-4 pb-24",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(se,{to:"/admin",className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:n.jsx(ht,{className:"h-5 w-5 text-neutral-600"})}),n.jsxs("div",{children:[n.jsxs("h1",{className:"text-2xl font-display font-bold text-neutral-800 flex items-center gap-2",children:[n.jsx(Rd,{className:"h-6 w-6 text-burgundy-500"}),"Analytics"]}),n.jsx("p",{className:"text-neutral-500",children:"Business intelligence & metrics"})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(se,{to:"/admin/fun-stats",className:"px-4 py-2 bg-burgundy-500 text-white rounded-lg shadow-card hover:bg-burgundy-600 flex items-center gap-2 text-sm font-medium",children:[n.jsx(Rd,{className:"h-4 w-4"}),"Fun Stats"]}),n.jsxs("button",{onClick:b,disabled:_,className:"px-4 py-2 bg-white rounded-lg shadow-card hover:shadow-card-hover flex items-center gap-2",children:[n.jsx(an,{className:`h-4 w-4 ${_?"animate-spin":""}`}),"Refresh"]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-card border border-cream-200 p-1 mb-6 flex",children:[n.jsx("button",{onClick:()=>t("executive"),className:`flex-1 px-4 py-2 rounded-lg text-sm font-medium transition-colors ${e==="executive"?"bg-burgundy-500 text-white":"text-neutral-600 hover:bg-cream-100"}`,children:"Executive"}),n.jsx("button",{onClick:()=>t("engagement"),className:`flex-1 px-4 py-2 rounded-lg text-sm font-medium transition-colors ${e==="engagement"?"bg-burgundy-500 text-white":"text-neutral-600 hover:bg-cream-100"}`,children:"Engagement"}),n.jsx("button",{onClick:()=>t("operations"),className:`flex-1 px-4 py-2 rounded-lg text-sm font-medium transition-colors ${e==="operations"?"bg-burgundy-500 text-white":"text-neutral-600 hover:bg-cream-100"}`,children:"Operations"}),n.jsx("button",{onClick:()=>t("history"),className:`flex-1 px-4 py-2 rounded-lg text-sm font-medium transition-colors ${e==="history"?"bg-burgundy-500 text-white":"text-neutral-600 hover:bg-cream-100"}`,children:"History"})]}),_&&n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx(be,{className:"h-8 w-8 text-burgundy-500 animate-spin"})}),e==="executive"&&r&&!_&&n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"bg-white rounded-xl shadow-card p-6 border border-cream-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-neutral-800",children:"Health Score"}),n.jsx("p",{className:"text-sm text-neutral-500",children:"Composite: retention 50%, activation 30%, growth 20%"})]}),n.jsx("div",{className:`text-4xl font-bold ${r.healthScore>=70?"text-green-600":r.healthScore>=40?"text-yellow-600":"text-red-600"}`,children:r.healthScore})]})}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-card border border-cream-200",children:[n.jsx(Ke,{className:"h-5 w-5 text-blue-500 mb-2"}),n.jsx("p",{className:"text-2xl font-bold text-neutral-800",children:r.vitals.totalUsers}),n.jsx("p",{className:"text-xs text-neutral-500",children:"Total Users"})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-card border border-cream-200",children:[n.jsx(Di,{className:"h-5 w-5 text-green-500 mb-2"}),n.jsx("p",{className:"text-2xl font-bold text-neutral-800",children:r.vitals.activeUsers}),n.jsx("p",{className:"text-xs text-neutral-500",children:"Active (7d)"})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-card border border-cream-200",children:[n.jsx(fr,{className:"h-5 w-5 text-purple-500 mb-2"}),n.jsxs("p",{className:"text-2xl font-bold text-neutral-800",children:[r.vitals.retentionRate,"%"]}),n.jsx("p",{className:"text-xs text-neutral-500",children:"Retention"})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-card border border-cream-200",children:[n.jsx(kn,{className:"h-5 w-5 text-orange-500 mb-2"}),n.jsxs("p",{className:"text-2xl font-bold text-neutral-800",children:[r.vitals.activationRate,"%"]}),n.jsx("p",{className:"text-xs text-neutral-500",children:"Activation"})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-card border border-cream-200",children:[n.jsx(fr,{className:"h-5 w-5 text-teal-500 mb-2"}),n.jsxs("p",{className:"text-2xl font-bold text-neutral-800",children:[r.vitals.growthRate,"%"]}),n.jsx("p",{className:"text-xs text-neutral-500",children:"Growth Rate"})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-card border border-cream-200",children:[n.jsx(wn,{className:"h-5 w-5 text-pink-500 mb-2"}),n.jsx("p",{className:"text-2xl font-bold text-neutral-800",children:r.vitals.newUsersThisWeek}),n.jsx("p",{className:"text-xs text-neutral-500",children:"New This Week"})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-card p-6 border border-cream-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-neutral-800 mb-4",children:"User Funnel"}),n.jsx("div",{className:"space-y-3",children:[{label:"Signups",value:r.funnel.signups,color:"bg-blue-500"},{label:"Profile Complete",value:r.funnel.profileComplete,color:"bg-green-500"},{label:"Joined League",value:r.funnel.joinedLeague,color:"bg-purple-500"},{label:"Made Pick",value:r.funnel.madePick,color:"bg-orange-500"},{label:"Week 2 Retention",value:r.funnel.week2Retention,color:"bg-teal-500"}].map(w=>n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[n.jsx("span",{className:"text-neutral-600",children:w.label}),n.jsx("span",{className:"font-mono text-neutral-800",children:w.value})]}),n.jsx("div",{className:"h-2 bg-cream-200 rounded-full overflow-hidden",children:n.jsx("div",{className:`h-full ${w.color} transition-all`,style:{width:`${r.funnel.signups>0?w.value/r.funnel.signups*100:0}%`}})})]},w.label))})]}),r.donations.totalGross>0&&n.jsxs("div",{className:"bg-white rounded-xl shadow-card p-6 border border-cream-200",children:[n.jsxs("h3",{className:"text-lg font-semibold text-neutral-800 mb-4 flex items-center gap-2",children:[n.jsx(Zo,{className:"h-5 w-5 text-green-500"}),"Donations"]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-neutral-500",children:"Gross"}),n.jsxs("p",{className:"text-xl font-bold text-neutral-800",children:["$",r.donations.totalGross.toFixed(2)]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-neutral-500",children:"Stripe Fee"}),n.jsxs("p",{className:"text-xl font-bold text-red-600",children:["-$",r.donations.totalStripeFee.toFixed(2)]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-neutral-500",children:"RGFL Fee (7%)"}),n.jsxs("p",{className:"text-xl font-bold text-orange-600",children:["-$",r.donations.totalRgflFee.toFixed(2)]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-neutral-500",children:"Net to Leagues"}),n.jsxs("p",{className:"text-xl font-bold text-green-600",children:["$",r.donations.totalNetToLeagues.toFixed(2)]})]})]})]})]}),e==="engagement"&&i&&!_&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-card p-6 border border-cream-200",children:[n.jsxs("h3",{className:"text-lg font-semibold text-neutral-800 mb-4",children:["Episode ",i.episodeStatus.episode," Pick Status"]}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsx("div",{className:"h-4 bg-cream-200 rounded-full overflow-hidden",children:n.jsx("div",{className:`h-full transition-all ${i.episodeStatus.percentage>=70?"bg-green-500":i.episodeStatus.percentage>=40?"bg-yellow-500":"bg-red-500"}`,style:{width:`${i.episodeStatus.percentage}%`}})})}),n.jsxs("span",{className:"text-lg font-bold text-neutral-800",children:[i.episodeStatus.submitted,"/",i.episodeStatus.total," (",i.episodeStatus.percentage,"%)"]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-card p-6 border border-cream-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-neutral-800 mb-4",children:"User Segments"}),n.jsxs("div",{className:"grid grid-cols-5 gap-4",children:[n.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[n.jsx(ds,{className:"h-6 w-6 text-green-500 mx-auto mb-2"}),n.jsx("p",{className:"text-2xl font-bold text-green-600",children:i.segments.power}),n.jsx("p",{className:"text-xs text-neutral-500",children:"Power"})]}),n.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[n.jsx(fr,{className:"h-6 w-6 text-blue-500 mx-auto mb-2"}),n.jsx("p",{className:"text-2xl font-bold text-blue-600",children:i.segments.casual}),n.jsx("p",{className:"text-xs text-neutral-500",children:"Casual"})]}),n.jsxs("div",{className:"text-center p-4 bg-yellow-50 rounded-lg",children:[n.jsx(Nt,{className:"h-6 w-6 text-yellow-500 mx-auto mb-2"}),n.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:i.segments.dormant}),n.jsx("p",{className:"text-xs text-neutral-500",children:"Dormant"})]}),n.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-lg",children:[n.jsx(Hi,{className:"h-6 w-6 text-red-500 mx-auto mb-2"}),n.jsx("p",{className:"text-2xl font-bold text-red-600",children:i.segments.churned}),n.jsx("p",{className:"text-xs text-neutral-500",children:"Churned"})]}),n.jsxs("div",{className:"text-center p-4 bg-neutral-50 rounded-lg",children:[n.jsx(Ke,{className:"h-6 w-6 text-neutral-500 mx-auto mb-2"}),n.jsx("p",{className:"text-2xl font-bold text-neutral-600",children:i.segments.new}),n.jsx("p",{className:"text-xs text-neutral-500",children:"New"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-card p-6 border border-cream-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-neutral-800 mb-4",children:"Pick Patterns by Day"}),n.jsx("div",{className:"flex items-end gap-2 h-32",children:i.pickPatterns.byDay.map((w,S)=>{const j=Math.max(...i.pickPatterns.byDay,1);return n.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[n.jsx("div",{className:"w-full bg-burgundy-500 rounded-t transition-all hover:bg-burgundy-600",style:{height:`${w/j*100}%`,minHeight:w>0?"4px":"0"},title:`${i.pickPatterns.dayLabels[S]}: ${w}`}),n.jsx("span",{className:"text-xs text-neutral-500 mt-1",children:i.pickPatterns.dayLabels[S]})]},S)})})]}),i.atRiskUsers.length>0&&n.jsxs("div",{className:"bg-white rounded-xl shadow-card p-6 border border-cream-200",children:[n.jsxs("h3",{className:"text-lg font-semibold text-neutral-800 mb-4 flex items-center gap-2",children:[n.jsx(Tt,{className:"h-5 w-5 text-yellow-500"}),"At-Risk Users (7+ days inactive)"]}),n.jsx("div",{className:"space-y-2",children:i.atRiskUsers.slice(0,10).map(w=>n.jsxs("div",{className:"flex items-center justify-between p-2 bg-cream-50 rounded-lg",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-neutral-800",children:w.display_name}),n.jsx("p",{className:"text-xs text-neutral-500",children:w.email})]}),n.jsxs("span",{className:"text-xs text-neutral-500",children:["Last active:"," ",w.last_active_at?new Date(w.last_active_at).toLocaleDateString():"Never"]})]},w.id))})]}),i.cohorts.length>0&&n.jsxs("div",{className:"bg-white rounded-xl shadow-card p-6 border border-cream-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-neutral-800 mb-4",children:"Retention Cohorts"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"text-neutral-500",children:[n.jsx("th",{className:"text-left py-2",children:"Cohort"}),n.jsx("th",{className:"text-center py-2",children:"Size"}),n.jsx("th",{className:"text-center py-2",children:"Week 0"}),n.jsx("th",{className:"text-center py-2",children:"Week 1"}),n.jsx("th",{className:"text-center py-2",children:"Week 2"}),n.jsx("th",{className:"text-center py-2",children:"Week 3"}),n.jsx("th",{className:"text-center py-2",children:"Week 4"})]})}),n.jsx("tbody",{children:i.cohorts.map((w,S)=>n.jsxs("tr",{className:"border-t border-cream-100",children:[n.jsx("td",{className:"py-2 font-mono text-xs",children:new Date(w.cohort_week).toLocaleDateString()}),n.jsx("td",{className:"text-center py-2",children:w.cohort_size}),n.jsx("td",{className:"text-center py-2",children:w.week_0}),n.jsx("td",{className:"text-center py-2",children:w.week_1}),n.jsx("td",{className:"text-center py-2",children:w.week_2}),n.jsx("td",{className:"text-center py-2",children:w.week_3}),n.jsx("td",{className:"text-center py-2",children:w.week_4})]},w.cohort_week))})]})})]})]}),e==="operations"&&u&&!_&&n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:`rounded-xl shadow-card p-6 border ${u.systemStatus==="healthy"?"bg-green-50 border-green-200":u.systemStatus==="warning"?"bg-yellow-50 border-yellow-200":"bg-red-50 border-red-200"}`,children:n.jsxs("div",{className:"flex items-center gap-3",children:[u.systemStatus==="healthy"?n.jsx(xt,{className:"h-8 w-8 text-green-500"}):u.systemStatus==="warning"?n.jsx(Tt,{className:"h-8 w-8 text-yellow-500"}):n.jsx(Tr,{className:"h-8 w-8 text-red-500"}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-semibold text-neutral-800",children:["System Status: ",u.systemStatus.toUpperCase()]}),n.jsxs("p",{className:"text-sm text-neutral-600",children:[u.emailPerformance.failedCount," failed emails,"," ",u.jobHistory.failedCount," failed jobs (24h)"]})]})]})}),n.jsxs("div",{className:"bg-white rounded-xl shadow-card p-6 border border-cream-200",children:[n.jsxs("h3",{className:"text-lg font-semibold text-neutral-800 mb-4 flex items-center gap-2",children:[n.jsx(sn,{className:"h-5 w-5 text-blue-500"}),"Email Performance (7d)"]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-neutral-500",children:"Sent"}),n.jsx("p",{className:"text-xl font-bold text-neutral-800",children:u.emailPerformance.total_sent})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-neutral-500",children:"Delivered"}),n.jsx("p",{className:"text-xl font-bold text-green-600",children:u.emailPerformance.total_delivered})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-neutral-500",children:"Failed"}),n.jsx("p",{className:"text-xl font-bold text-red-600",children:u.emailPerformance.total_failed})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-neutral-500",children:"Delivery Rate"}),n.jsxs("p",{className:`text-xl font-bold ${u.emailPerformance.delivery_rate>=.9?"text-green-600":"text-yellow-600"}`,children:[(u.emailPerformance.delivery_rate*100).toFixed(1),"%"]})]})]}),u.emailPerformance.recentFailures.length>0&&n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-medium text-neutral-700 mb-2",children:"Recent Failures"}),n.jsx("div",{className:"space-y-2",children:u.emailPerformance.recentFailures.slice(0,5).map(w=>n.jsxs("div",{className:"p-2 bg-red-50 rounded-lg text-sm",children:[n.jsx("p",{className:"font-medium text-neutral-800",children:w.to_email}),n.jsx("p",{className:"text-xs text-neutral-500",children:w.subject}),n.jsx("p",{className:"text-xs text-red-600",children:w.error_message})]},w.id))})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-card p-6 border border-cream-200",children:[n.jsxs("h3",{className:"text-lg font-semibold text-neutral-800 mb-4 flex items-center gap-2",children:[n.jsx(Di,{className:"h-5 w-5 text-purple-500"}),"Recent Job Runs"]}),n.jsx("div",{className:"space-y-2",children:u.jobHistory.recent.slice(0,10).map(w=>n.jsxs("div",{className:"flex items-center justify-between p-2 bg-cream-50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[w.status==="success"?n.jsx(xt,{className:"h-4 w-4 text-green-500"}):w.status==="failed"?n.jsx(Tr,{className:"h-4 w-4 text-red-500"}):n.jsx(be,{className:"h-4 w-4 text-blue-500 animate-spin"}),n.jsx("span",{className:"font-medium text-neutral-800",children:w.job_name})]}),n.jsxs("div",{className:"flex items-center gap-4 text-xs text-neutral-500",children:[n.jsxs("span",{children:[w.duration_ms,"ms"]}),n.jsx("span",{children:new Date(w.started_at).toLocaleTimeString()})]})]},w.id))})]}),u.errorLog.length>0&&n.jsxs("div",{className:"bg-white rounded-xl shadow-card p-6 border border-cream-200",children:[n.jsxs("h3",{className:"text-lg font-semibold text-neutral-800 mb-4 flex items-center gap-2",children:[n.jsx(Tt,{className:"h-5 w-5 text-red-500"}),"Error Log"]}),n.jsx("div",{className:"space-y-2",children:u.errorLog.map((w,S)=>n.jsxs("div",{className:"p-2 bg-red-50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"font-medium text-neutral-800",children:w.job_name}),n.jsx("span",{className:"text-xs text-neutral-500",children:new Date(w.started_at).toLocaleString()})]}),n.jsx("p",{className:"text-sm text-red-600 mt-1",children:w.error_message})]},S))})]})]}),e==="history"&&x&&!_&&n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"bg-white rounded-xl shadow-card p-4 border border-cream-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("h3",{className:"text-lg font-semibold text-neutral-800 flex items-center gap-2",children:[n.jsx(wn,{className:"h-5 w-5 text-burgundy-500"}),"Historical Trends"]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-sm text-neutral-500",children:"Period:"}),n.jsxs("select",{value:f,onChange:w=>m(Number(w.target.value)),className:"px-3 py-1.5 border border-cream-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-burgundy-500",children:[n.jsx("option",{value:7,children:"Last 7 days"}),n.jsx("option",{value:14,children:"Last 14 days"}),n.jsx("option",{value:30,children:"Last 30 days"}),n.jsx("option",{value:60,children:"Last 60 days"}),n.jsx("option",{value:90,children:"Last 90 days"})]})]})]})}),n.jsxs("div",{className:"bg-white rounded-xl shadow-card p-6 border border-cream-200",children:[n.jsxs("h3",{className:"text-lg font-semibold text-neutral-800 mb-4 flex items-center gap-2",children:[n.jsx(Ke,{className:"h-5 w-5 text-blue-500"}),"User Metrics Over Time"]}),n.jsx("div",{className:"space-y-6",children:["total_users","active_users_7d","new_users_today"].map(w=>{var T,I;const S=x.history[w]||[];if(S.length===0)return null;const j=Math.max(...S.map(A=>A.value),1),N=((T=S[S.length-1])==null?void 0:T.value)||0,C=((I=S[0])==null?void 0:I.value)||0,E=C>0?(N-C)/C*100:0;return n.jsxs("div",{className:"border-b border-cream-100 pb-4 last:border-0 last:pb-0",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"font-medium text-neutral-700 capitalize",children:w.replace(/_/g," ")}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-lg font-bold text-neutral-800",children:N}),E!==0&&n.jsxs("span",{className:`flex items-center text-xs ${E>0?"text-green-600":"text-red-600"}`,children:[E>0?n.jsx(fr,{className:"h-3 w-3 mr-0.5"}):n.jsx(Hi,{className:"h-3 w-3 mr-0.5"}),Math.abs(E).toFixed(1),"%"]})]})]}),n.jsx("div",{className:"flex items-end gap-1 h-16",children:S.map((A,R)=>n.jsx("div",{className:"flex-1 bg-blue-500 rounded-t transition-all hover:bg-blue-600",style:{height:`${A.value/j*100}%`,minHeight:A.value>0?"2px":"0"},title:`${new Date(A.date).toLocaleDateString()}: ${A.value}`},R))})]},w)})})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-card p-6 border border-cream-200",children:[n.jsxs("h3",{className:"text-lg font-semibold text-neutral-800 mb-4 flex items-center gap-2",children:[n.jsx(Di,{className:"h-5 w-5 text-green-500"}),"Engagement Metrics Over Time"]}),n.jsx("div",{className:"space-y-6",children:["total_picks","picks_today","total_trivia_answers"].map(w=>{var C;const S=x.history[w]||[];if(S.length===0)return null;const j=Math.max(...S.map(E=>E.value),1),N=((C=S[S.length-1])==null?void 0:C.value)||0;return n.jsxs("div",{className:"border-b border-cream-100 pb-4 last:border-0 last:pb-0",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"font-medium text-neutral-700 capitalize",children:w.replace(/_/g," ")}),n.jsx("span",{className:"text-lg font-bold text-neutral-800",children:N})]}),n.jsx("div",{className:"flex items-end gap-1 h-16",children:S.map((E,T)=>n.jsx("div",{className:"flex-1 bg-green-500 rounded-t transition-all hover:bg-green-600",style:{height:`${E.value/j*100}%`,minHeight:E.value>0?"2px":"0"},title:`${new Date(E.date).toLocaleDateString()}: ${E.value}`},T))})]},w)})})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-card p-6 border border-cream-200",children:[n.jsxs("h3",{className:"text-lg font-semibold text-neutral-800 mb-4 flex items-center gap-2",children:[n.jsx(ds,{className:"h-5 w-5 text-purple-500"}),"Operations Metrics Over Time"]}),n.jsx("div",{className:"space-y-6",children:["emails_sent_today","emails_failed_today","jobs_run_today","jobs_failed_today"].map(w=>{var E;const S=x.history[w]||[];if(S.length===0)return null;const j=Math.max(...S.map(T=>T.value),1),N=((E=S[S.length-1])==null?void 0:E.value)||0,C=w.includes("failed");return n.jsxs("div",{className:"border-b border-cream-100 pb-4 last:border-0 last:pb-0",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"font-medium text-neutral-700 capitalize",children:w.replace(/_/g," ")}),n.jsx("span",{className:`text-lg font-bold ${C&&N>0?"text-red-600":"text-neutral-800"}`,children:N})]}),n.jsx("div",{className:"flex items-end gap-1 h-16",children:S.map((T,I)=>n.jsx("div",{className:`flex-1 rounded-t transition-all ${C?"bg-red-500 hover:bg-red-600":"bg-purple-500 hover:bg-purple-600"}`,style:{height:`${T.value/j*100}%`,minHeight:T.value>0?"2px":"0"},title:`${new Date(T.date).toLocaleDateString()}: ${T.value}`},I))})]},w)})})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-card p-6 border border-cream-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-neutral-800 mb-4",children:"Recent Snapshots"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"text-neutral-500 border-b border-cream-100",children:[n.jsx("th",{className:"text-left py-2 pr-4",children:"Date"}),n.jsx("th",{className:"text-left py-2 pr-4",children:"Metric"}),n.jsx("th",{className:"text-left py-2 pr-4",children:"Category"}),n.jsx("th",{className:"text-right py-2",children:"Value"})]})}),n.jsx("tbody",{children:x.stats.slice(-20).reverse().map(w=>n.jsxs("tr",{className:"border-b border-cream-50 hover:bg-cream-50",children:[n.jsx("td",{className:"py-2 pr-4 font-mono text-xs",children:new Date(w.recorded_at).toLocaleString()}),n.jsx("td",{className:"py-2 pr-4 capitalize",children:w.stat_name.replace(/_/g," ")}),n.jsx("td",{className:"py-2 pr-4",children:n.jsx("span",{className:`px-2 py-0.5 text-xs rounded-full ${w.stat_category==="executive"?"bg-blue-100 text-blue-700":w.stat_category==="engagement"?"bg-green-100 text-green-700":"bg-purple-100 text-purple-700"}`,children:w.stat_category})}),n.jsx("td",{className:"py-2 text-right font-bold",children:w.stat_value})]},w.id))})]})})]})]})]})]})}const xue="https://rgfl-api-production.up.railway.app";async function cC(e){var a;const r=(a=(await X.auth.getSession()).data.session)==null?void 0:a.access_token;if(!r)throw new Error("Not authenticated");const s=await fetch(`${xue}${e}`,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}});if(!s.ok){const i=await s.json().catch(()=>({}));throw new Error(i.error||`API error: ${s.status}`)}return s.json()}function gue(){var l,u,d;const{data:e,isLoading:t,error:r,refetch:s}=ie({queryKey:["admin","system-health"],queryFn:()=>cC("/api/admin/dashboard/system-health"),refetchInterval:3e4}),{data:a}=ie({queryKey:["admin","analytics","operations"],queryFn:()=>cC("/api/admin/analytics/operations"),refetchInterval:6e4}),i=p=>{switch(p){case"pass":case"healthy":return n.jsx(xt,{className:"h-5 w-5 text-green-500"});case"warn":case"degraded":return n.jsx(Tt,{className:"h-5 w-5 text-yellow-500"});case"fail":case"unhealthy":return n.jsx(Tr,{className:"h-5 w-5 text-red-500"});default:return n.jsx(Di,{className:"h-5 w-5 text-neutral-400"})}},o=p=>{switch(p){case"pass":case"healthy":return"bg-green-500/10 border-green-500/30 text-green-400";case"warn":case"degraded":return"bg-yellow-500/10 border-yellow-500/30 text-yellow-400";case"fail":case"unhealthy":return"bg-red-500/10 border-red-500/30 text-red-400";default:return"bg-neutral-500/10 border-neutral-500/30 text-neutral-400"}};return n.jsxs("div",{className:"min-h-screen bg-neutral-950 text-white",children:[n.jsx(_e,{}),n.jsx(dt,{}),n.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"flex items-center justify-between mb-8",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold",children:"System Health"}),n.jsx("p",{className:"text-neutral-400 mt-1",children:"Monitor system status and service health"})]}),n.jsxs("button",{onClick:()=>s(),className:"flex items-center gap-2 px-4 py-2 bg-neutral-800 hover:bg-neutral-700 rounded-lg transition-colors",children:[n.jsx(an,{className:`h-4 w-4 ${t?"animate-spin":""}`}),"Refresh"]})]}),r&&n.jsx("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-4 mb-6",children:n.jsx("p",{className:"text-red-400",children:"Failed to load system health data"})}),e&&n.jsx("div",{className:`rounded-lg border p-6 mb-8 ${o(e.status)}`,children:n.jsxs("div",{className:"flex items-center gap-4",children:[i(e.status),n.jsxs("div",{children:[n.jsxs("h2",{className:"text-xl font-semibold capitalize",children:["System ",e.status]}),n.jsxs("p",{className:"text-sm opacity-75",children:["Last checked: ",new Date(e.timestamp).toLocaleString()]})]})]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[n.jsxs("div",{className:"bg-neutral-900 rounded-lg border border-neutral-800 p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx(sP,{className:"h-5 w-5 text-blue-400"}),n.jsx("h3",{className:"font-semibold",children:"Database"})]}),(l=e==null?void 0:e.checks)!=null&&l.database?n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-neutral-400",children:"Status"}),n.jsxs("div",{className:"flex items-center gap-2",children:[i(e.checks.database.status),n.jsx("span",{className:"capitalize",children:e.checks.database.status})]})]}),e.checks.database.latencyMs!==void 0&&n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-neutral-400",children:"Latency"}),n.jsxs("span",{children:[e.checks.database.latencyMs,"ms"]})]}),e.checks.database.error&&n.jsx("p",{className:"text-red-400 text-sm",children:e.checks.database.error})]}):n.jsx("p",{className:"text-neutral-500",children:"Loading..."})]}),n.jsxs("div",{className:"bg-neutral-900 rounded-lg border border-neutral-800 p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx(Nt,{className:"h-5 w-5 text-purple-400"}),n.jsx("h3",{className:"font-semibold",children:"Scheduler"})]}),(u=e==null?void 0:e.checks)!=null&&u.scheduler?n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-neutral-400",children:"Status"}),n.jsxs("div",{className:"flex items-center gap-2",children:[i(e.checks.scheduler.status),n.jsx("span",{className:"capitalize",children:e.checks.scheduler.status})]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-neutral-400",children:"Running"}),n.jsx("span",{children:e.checks.scheduler.running?"Yes":"No"})]}),e.checks.scheduler.error&&n.jsx("p",{className:"text-red-400 text-sm",children:e.checks.scheduler.error})]}):n.jsx("p",{className:"text-neutral-500",children:"Loading..."})]}),n.jsxs("div",{className:"bg-neutral-900 rounded-lg border border-neutral-800 p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx(Tt,{className:"h-5 w-5 text-orange-400"}),n.jsx("h3",{className:"font-semibold",children:"Job Failures (24h)"})]}),(d=e==null?void 0:e.checks)!=null&&d.recentJobFailures?n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-neutral-400",children:"Status"}),n.jsxs("div",{className:"flex items-center gap-2",children:[i(e.checks.recentJobFailures.status),n.jsx("span",{className:"capitalize",children:e.checks.recentJobFailures.status})]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-neutral-400",children:"Failed Jobs"}),n.jsx("span",{className:e.checks.recentJobFailures.count>0?"text-red-400":"text-green-400",children:e.checks.recentJobFailures.count})]})]}):n.jsx("p",{className:"text-neutral-500",children:"Loading..."})]})]}),(a==null?void 0:a.emailPerformance)&&n.jsxs("div",{className:"bg-neutral-900 rounded-lg border border-neutral-800 p-6 mb-8",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx(sn,{className:"h-5 w-5 text-teal-400"}),n.jsx("h3",{className:"font-semibold text-lg",children:"Email Performance"})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-neutral-400 text-sm mb-1",children:"Delivery Rate"}),n.jsxs("p",{className:`text-2xl font-bold ${(a.emailPerformance.delivery_rate||0)>=.9?"text-green-400":(a.emailPerformance.delivery_rate||0)>=.7?"text-yellow-400":"text-red-400"}`,children:[Math.round((a.emailPerformance.delivery_rate||0)*100),"%"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-neutral-400 text-sm mb-1",children:"Total Sent"}),n.jsx("p",{className:"text-2xl font-bold",children:a.emailPerformance.total_sent||0})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-neutral-400 text-sm mb-1",children:"Failed"}),n.jsx("p",{className:"text-2xl font-bold text-red-400",children:a.emailPerformance.failedCount||0})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-neutral-400 text-sm mb-1",children:"Pending"}),n.jsx("p",{className:"text-2xl font-bold text-yellow-400",children:a.emailPerformance.pendingCount||0})]})]})]}),(a==null?void 0:a.errorLog)&&a.errorLog.length>0&&n.jsxs("div",{className:"bg-neutral-900 rounded-lg border border-neutral-800 p-6",children:[n.jsx("h3",{className:"font-semibold text-lg mb-4",children:"Recent Errors"}),n.jsx("div",{className:"space-y-3",children:a.errorLog.map((p,f)=>n.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"font-medium text-red-400",children:p.job_name}),n.jsx("span",{className:"text-neutral-500 text-sm",children:new Date(p.started_at).toLocaleString()})]}),n.jsx("p",{className:"text-sm text-neutral-300",children:p.error_message})]},f))})]})]}),n.jsx(tn,{})]})}const yue="https://rgfl-api-production.up.railway.app";async function ma(e,t){var i;const s=(i=(await X.auth.getSession()).data.session)==null?void 0:i.access_token,a=await fetch(`${yue}${e}`,{...t,headers:{...t==null?void 0:t.headers,Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});if(!a.ok){const o=await a.json().catch(()=>({}));throw new Error(o.error||`API error: ${a.status}`)}return a.json()}const bue=[{id:"home",label:"Home"},{id:"dashboard",label:"Dashboard"},{id:"leagues",label:"Leagues"},{id:"castaways",label:"Castaways"},{id:"how-to-play",label:"How to Play"},{id:"scoring",label:"Scoring"},{id:"timeline",label:"Timeline"},{id:"draft-rankings",label:"Draft Rankings"},{id:"leaderboard",label:"Leaderboard"},{id:"profile",label:"Profile"},{id:"contact",label:"Contact"},{id:"faq",label:"FAQ"}];function vue(){var L;const[e,t]=$.useState("pages"),[r,s]=$.useState("home"),[a,i]=$.useState(null),[o,l]=$.useState(null),[u,d]=$.useState(null),[p,f]=$.useState(!1),[m,x]=$.useState(!1),[y,g]=$.useState(!1),[b,_]=$.useState(""),[w,S]=$.useState("all"),j=at(),{data:N,isLoading:C}=ie({queryKey:["admin","email-templates",w],queryFn:async()=>(await ma(`/api/admin/content/email-templates?category=${w}`)).data||[]}),{data:E,isLoading:T}=ie({queryKey:["admin","page-content",r],queryFn:async()=>{const{data:q,error:z}=await X.from("site_copy").select("*").eq("page",r).order("section").order("key");if(z)throw z;return q||[]},enabled:e==="pages"}),{data:I,isLoading:A}=ie({queryKey:["admin","castaways-content"],queryFn:async()=>{const{data:q}=await X.from("seasons").select("id").eq("number",50).single();if(!q)return[];const{data:z,error:Q}=await X.from("castaways").select("id, name, photo_url, fun_fact, status, age, hometown, occupation, tribe_original, previous_seasons, best_placement").eq("season_id",q.id).order("name");if(Q)throw Q;return z||[]},enabled:e==="castaways"}),R=ke({mutationFn:async q=>{const{id:z,previous_seasons:Q,...J}=q,V={...J,previous_seasons:Q??void 0},{error:ee}=await X.from("castaways").update(V).eq("id",z);if(ee)throw ee},onSuccess:()=>{j.invalidateQueries({queryKey:["admin","castaways-content"]}),f(!1)}}),O=ke({mutationFn:async q=>ma(`/api/admin/content/email-templates/${q.slug}`,{method:"PUT",body:JSON.stringify(q)}),onSuccess:()=>{j.invalidateQueries({queryKey:["admin","email-templates"]}),f(!1)}}),M=ke({mutationFn:async q=>ma("/api/admin/content/email-templates",{method:"POST",body:JSON.stringify(q)}),onSuccess:q=>{j.invalidateQueries({queryKey:["admin","email-templates"]}),g(!1),q!=null&&q.data&&i(q.data)}}),B=ke({mutationFn:async q=>ma(`/api/admin/content/email-templates/${q}`,{method:"DELETE"}),onSuccess:()=>{j.invalidateQueries({queryKey:["admin","email-templates"]}),i(null)}}),U=ke({mutationFn:async q=>ma(`/api/admin/content/site-copy/${encodeURIComponent(q.key)}`,{method:"PUT",body:JSON.stringify(q)}),onSuccess:()=>{j.invalidateQueries({queryKey:["admin","site-copy"]}),j.invalidateQueries({queryKey:["admin","page-content"]}),j.invalidateQueries({queryKey:["site-copy"]}),ma("/api/site-copy/clear-cache",{method:"POST"}).catch(()=>{}),f(!1)}}),Y=ke({mutationFn:async({slug:q,email:z})=>ma(`/api/admin/content/email-templates/${q}/send-test`,{method:"POST",body:JSON.stringify({email:z,variables:K((a==null?void 0:a.available_variables)||[])})})}),W=ke({mutationFn:async()=>{await Promise.all([ma("/api/admin/content/clear-cache",{method:"POST"}),ma("/api/site-copy/clear-cache",{method:"POST"}).catch(()=>{})])},onSuccess:()=>{j.invalidateQueries({queryKey:["admin","email-templates"]}),j.invalidateQueries({queryKey:["admin","site-copy"]}),j.invalidateQueries({queryKey:["admin","page-content"]}),j.invalidateQueries({queryKey:["site-copy"]})}}),K=q=>{const z={displayName:"John Doe",email:"john@example.com",leagueName:"Survivor Superfans",seasonName:"Season 50: In the Hands of the Fans",seasonNumber:"50",episodeNumber:"5",hoursRemaining:"3",daysRemaining:"7",daysUntilPremiere:"14",daysSinceSignup:"3",daysSinceLastActivity:"7",missedEpisodes:"2",commissionerName:"Blake",memberCount:"8",maxMembers:"12",totalPoints:"156",bestRank:"3",winnerName:"Mark the Chicken",percentComplete:"75",accuracy:"85",dashboardUrl:"https://survivor.realitygamesfantasyleague.com/dashboard",leagueUrl:"https://survivor.realitygamesfantasyleague.com/leagues/123",browseLeaguesUrl:"https://survivor.realitygamesfantasyleague.com/leagues/browse",triviaUrl:"https://survivor.realitygamesfantasyleague.com/trivia"};return q.reduce((Q,J)=>({...Q,[J]:z[J]||`{{${J}}}`}),{})},F=(N||[]).filter(q=>q.name.toLowerCase().includes(b.toLowerCase())||q.slug.toLowerCase().includes(b.toLowerCase())),H=(I||[]).filter(q=>q.name.toLowerCase().includes(b.toLowerCase()));return n.jsxs("div",{className:"min-h-screen bg-cream-50",children:[n.jsx(dt,{}),n.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[n.jsxs("div",{className:"flex items-center justify-between mb-8",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-display font-bold text-neutral-800",children:"Content Management"}),n.jsx("p",{className:"text-neutral-600 mt-1",children:"Edit email templates and site copy"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("a",{href:"/admin/social",className:"flex items-center gap-2 px-4 py-2 bg-white text-neutral-700 rounded-xl hover:bg-cream-100 border border-cream-200 transition-colors",children:[n.jsx(Jn,{className:"h-4 w-4"}),"Social Media"]}),n.jsxs("a",{href:"/admin/campaigns",className:"flex items-center gap-2 px-4 py-2 bg-burgundy-500 text-white rounded-xl hover:bg-burgundy-600 transition-colors",children:[n.jsx(sn,{className:"h-4 w-4"}),"Send Campaigns"]}),n.jsxs("button",{onClick:()=>W.mutate(),disabled:W.isPending,className:"flex items-center gap-2 px-4 py-2 bg-cream-100 text-neutral-700 rounded-xl hover:bg-cream-200 transition-colors disabled:opacity-50",children:[n.jsx(an,{className:`h-4 w-4 ${W.isPending?"animate-spin":""}`}),W.isPending?"Clearing...":"Clear Cache"]})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsxs("div",{className:"flex items-center justify-between border-b border-cream-200 pb-4 mb-4",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:()=>{t("pages"),i(null),l(null),d(null),f(!1),g(!1)},className:`flex items-center gap-2 px-4 py-2.5 rounded-xl font-medium transition-all ${e==="pages"?"bg-burgundy-500 text-white shadow-md":"bg-white text-neutral-700 hover:bg-cream-100 border border-cream-200"}`,children:[n.jsx(Fc,{className:"h-4 w-4"}),"Page Content"]}),n.jsxs("button",{onClick:()=>{t("castaways"),i(null),l(null),d(null),f(!1),g(!1)},className:`flex items-center gap-2 px-4 py-2.5 rounded-xl font-medium transition-all ${e==="castaways"?"bg-burgundy-500 text-white shadow-md":"bg-white text-neutral-700 hover:bg-cream-100 border border-cream-200"}`,children:[n.jsx(Ke,{className:"h-4 w-4"}),"Castaways"]}),n.jsxs("button",{onClick:()=>{t("emails"),i(null),l(null),d(null),f(!1),g(!1)},className:`flex items-center gap-2 px-4 py-2.5 rounded-xl font-medium transition-all ${e==="emails"?"bg-burgundy-500 text-white shadow-md":"bg-white text-neutral-700 hover:bg-cream-100 border border-cream-200"}`,children:[n.jsx(sn,{className:"h-4 w-4"}),"Emails"]}),n.jsxs("button",{onClick:()=>{t("sms"),i(null),l(null),d(null),f(!1),g(!1)},className:`flex items-center gap-2 px-4 py-2.5 rounded-xl font-medium transition-all ${e==="sms"?"bg-burgundy-500 text-white shadow-md":"bg-white text-neutral-700 hover:bg-cream-100 border border-cream-200"}`,children:[n.jsx(Jn,{className:"h-4 w-4"}),"SMS"]})]}),e==="emails"&&n.jsxs("button",{onClick:()=>{g(!0),i(null),f(!1)},className:"flex items-center gap-2 px-4 py-2 bg-green-500 text-white rounded-xl hover:bg-green-600 transition-all",children:[n.jsx(tr,{className:"h-4 w-4"}),"New Template"]})]}),e==="pages"&&n.jsx("div",{className:"flex gap-2 flex-wrap",children:bue.map(q=>n.jsx("button",{onClick:()=>{s(q.id),l(null),f(!1)},className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all ${r===q.id?"bg-teal-500 text-white":"bg-cream-100 text-neutral-600 hover:bg-cream-200"}`,children:q.label},q.id))})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsx("div",{className:"lg:col-span-1",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 overflow-hidden",children:[n.jsxs("div",{className:"p-4 border-b border-cream-200",children:[n.jsxs("div",{className:"relative",children:[n.jsx(Ka,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-neutral-400"}),n.jsx("input",{type:"text",placeholder:e==="emails"?"Search templates...":e==="castaways"?"Search castaways...":"Search content...",value:b,onChange:q=>_(q.target.value),className:"w-full pl-10 pr-4 py-2 border border-cream-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-burgundy-500"})]}),e==="emails"&&n.jsx("div",{className:"flex gap-2 mt-3 flex-wrap",children:["all","transactional","lifecycle","marketing"].map(q=>n.jsx("button",{onClick:()=>S(q),className:`px-3 py-1 text-xs rounded-full transition-all ${w===q?"bg-burgundy-500 text-white":"bg-cream-100 text-neutral-600 hover:bg-cream-200"}`,children:q.charAt(0).toUpperCase()+q.slice(1)},q))})]}),n.jsx("div",{className:"max-h-[600px] overflow-y-auto",children:e==="sms"?n.jsxs("div",{className:"p-8 text-center",children:[n.jsx(Jn,{className:"h-12 w-12 text-neutral-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-neutral-700 mb-2",children:"SMS Templates"}),n.jsx("p",{className:"text-neutral-500 text-sm mb-4",children:"SMS message templates are managed through the campaigns system."}),n.jsxs("a",{href:"/admin/campaigns",className:"inline-flex items-center gap-2 px-4 py-2 bg-burgundy-500 text-white rounded-xl hover:bg-burgundy-600 transition-colors",children:[n.jsx(Jn,{className:"h-4 w-4"}),"Go to Campaigns"]})]}):e==="pages"?T?n.jsx("div",{className:"p-8 text-center text-neutral-500",children:"Loading..."}):!E||E.length===0?n.jsx("div",{className:"p-8 text-center text-neutral-500",children:"No content found for this page"}):n.jsx("div",{className:"divide-y divide-cream-100",children:E.map(q=>{var z;return n.jsxs("button",{onClick:()=>{l(q),i(null),d(null),f(!1)},className:`w-full text-left p-4 hover:bg-cream-50 transition-all ${(o==null?void 0:o.id)===q.id?"bg-cream-100":""}`,children:[n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"font-medium text-neutral-800",children:q.key.split(".").slice(1).join("  ")||q.key}),q.section&&n.jsxs("p",{className:"text-xs text-teal-600 mt-0.5",children:["Section: ",q.section]})]}),n.jsx("span",{className:`px-2 py-0.5 text-xs rounded-full flex-shrink-0 ml-2 ${q.is_active?"bg-green-100 text-green-700":"bg-neutral-100 text-neutral-500"}`,children:q.content_type||"text"})]}),n.jsx("p",{className:"text-sm text-neutral-500 mt-2 line-clamp-2",children:((z=q.content)==null?void 0:z.replace(/<[^>]*>/g,"").substring(0,100))||"No content"})]},q.id)})}):e==="emails"?C?n.jsx("div",{className:"p-8 text-center text-neutral-500",children:"Loading..."}):F.length===0?n.jsx("div",{className:"p-8 text-center text-neutral-500",children:"No templates found"}):n.jsx("div",{className:"divide-y divide-cream-100",children:F.map(q=>n.jsxs("button",{onClick:()=>{i(q),l(null),d(null),f(!1),x(!1)},className:`w-full text-left p-4 hover:bg-cream-50 transition-all ${(a==null?void 0:a.id)===q.id?"bg-cream-100":""}`,children:[n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-neutral-800",children:q.name}),n.jsx("p",{className:"text-xs text-neutral-500 mt-1",children:q.slug})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[q.is_system&&n.jsx("span",{className:"px-2 py-0.5 text-xs bg-blue-100 text-blue-700 rounded-full",children:"System"}),n.jsx("span",{className:`px-2 py-0.5 text-xs rounded-full ${q.is_active?"bg-green-100 text-green-700":"bg-neutral-100 text-neutral-500"}`,children:q.is_active?"Active":"Inactive"})]})]}),n.jsx("p",{className:"text-sm text-neutral-600 mt-2 line-clamp-1",children:q.subject}),q.send_frequency&&n.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:[" ",q.send_frequency,q.send_time&&`  ${q.send_time}`,q.send_day&&`  ${q.send_day}`]})]},q.id))}):e==="castaways"?A?n.jsx("div",{className:"p-8 text-center text-neutral-500",children:"Loading..."}):H.length===0?n.jsx("div",{className:"p-8 text-center text-neutral-500",children:"No castaways found"}):n.jsx("div",{className:"divide-y divide-cream-100",children:H.map(q=>n.jsx("button",{onClick:()=>{d(q),i(null),l(null),f(!1)},className:`w-full text-left p-4 hover:bg-cream-50 transition-all ${(u==null?void 0:u.id)===q.id?"bg-cream-100":""}`,children:n.jsxs("div",{className:"flex items-center gap-3",children:[q.photo_url&&n.jsx("img",{src:q.photo_url,alt:q.name,className:"w-10 h-10 rounded-full object-cover"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"font-medium text-neutral-800",children:q.name}),n.jsx("p",{className:"text-xs text-neutral-500 mt-0.5 truncate",children:q.fun_fact?" Has fun fact":" No fun fact"})]}),n.jsx("span",{className:`px-2 py-0.5 text-xs rounded-full flex-shrink-0 ${q.status==="active"?"bg-green-100 text-green-700":"bg-neutral-100 text-neutral-500"}`,children:q.status})]})},q.id))}):null})]})}),n.jsx("div",{className:"lg:col-span-2",children:y?n.jsx(jue,{onSave:q=>M.mutate(q),onCancel:()=>g(!1),saving:M.isPending,error:(L=M.error)==null?void 0:L.message}):a?n.jsx(wue,{template:a,editMode:p,previewMode:m,setEditMode:f,setPreviewMode:x,onSave:q=>O.mutate({...q,slug:a.slug}),onSendTest:q=>Y.mutate({slug:a.slug,email:q}),onDelete:()=>{confirm(`Delete "${a.name}"? This cannot be undone.`)&&B.mutate(a.slug)},saving:O.isPending,sendingTest:Y.isPending,deleting:B.isPending,getSampleVariables:K}):o?n.jsx(_ue,{copy:o,editMode:p,setEditMode:f,onSave:q=>U.mutate({...q,key:o.key}),saving:U.isPending,onCancel:()=>{f(!1),j.invalidateQueries({queryKey:["admin","page-content",r]})}}):u?n.jsx(Sue,{castaway:u,editMode:p,setEditMode:f,onSave:q=>R.mutate({id:u.id,...q}),saving:R.isPending}):n.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 p-12 text-center",children:[n.jsx("div",{className:"text-neutral-400 mb-4",children:e==="emails"?n.jsx(sn,{className:"h-16 w-16 mx-auto"}):e==="castaways"?n.jsx(Ke,{className:"h-16 w-16 mx-auto"}):n.jsx(Fc,{className:"h-16 w-16 mx-auto"})}),n.jsxs("h3",{className:"text-lg font-medium text-neutral-700 mb-2",children:["Select"," ",e==="emails"?"a template":e==="castaways"?"a castaway":"content"," ","to edit"]}),n.jsx("p",{className:"text-neutral-500",children:e==="emails"?"Choose an email template from the list to view or edit it.":e==="castaways"?"Choose a castaway from the list to edit their fun fact.":"Choose a content item from the list to view or edit it."})]})})]})]})]})}function wue({template:e,editMode:t,previewMode:r,setEditMode:s,setPreviewMode:a,onSave:i,onSendTest:o,onDelete:l,saving:u,sendingTest:d,deleting:p,getSampleVariables:f}){const[m,x]=$.useState(e.subject),[y,g]=$.useState(e.html_body),[b,_]=$.useState(e.is_active),[w,S]=$.useState(""),[j,N]=$.useState("wysiwyg");$.useState(()=>{x(e.subject),g(e.html_body),_(e.is_active)});const C=$.useMemo(()=>({toolbar:[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike"],[{color:[]},{background:[]}],[{list:"ordered"},{list:"bullet"}],[{align:[]}],["link","image"],["blockquote","code-block"],["clean"]]}),[]),E=["header","bold","italic","underline","strike","color","background","list","bullet","align","link","image","blockquote","code-block"],T=()=>{let A=y;const R=f(e.available_variables);for(const[O,M]of Object.entries(R))A=A.replace(new RegExp(`{{${O}}}`,"g"),M);return A},I=A=>{const R=`{{${A}}}`;g(O=>O+R)};return n.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 overflow-hidden",children:[n.jsxs("div",{className:"p-4 border-b border-cream-200 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-bold text-neutral-800",children:e.name}),n.jsx("p",{className:"text-sm text-neutral-500",children:e.description})]}),n.jsx("div",{className:"flex items-center gap-2",children:t?n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:()=>s(!1),className:"flex items-center gap-2 px-3 py-2 bg-cream-100 text-neutral-700 rounded-xl hover:bg-cream-200 transition-all",children:[n.jsx(It,{className:"h-4 w-4"}),"Cancel"]}),n.jsxs("button",{onClick:()=>i({subject:m,html_body:y,is_active:b}),disabled:u,className:"flex items-center gap-2 px-3 py-2 bg-green-500 text-white rounded-xl hover:bg-green-600 transition-all disabled:opacity-50",children:[n.jsx(Ar,{className:"h-4 w-4"}),u?"Saving...":"Save"]})]}):n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:()=>a(!r),className:`flex items-center gap-2 px-3 py-2 rounded-xl transition-all ${r?"bg-burgundy-100 text-burgundy-700":"bg-cream-100 text-neutral-700 hover:bg-cream-200"}`,children:[n.jsx(Ha,{className:"h-4 w-4"}),"Preview"]}),n.jsxs("button",{onClick:()=>{s(!0),x(e.subject),g(e.html_body),_(e.is_active)},className:"flex items-center gap-2 px-3 py-2 bg-burgundy-500 text-white rounded-xl hover:bg-burgundy-600 transition-all",children:[n.jsx(tl,{className:"h-4 w-4"}),"Edit"]}),!e.is_system&&n.jsx("button",{onClick:l,disabled:p,className:"flex items-center gap-2 px-3 py-2 bg-red-100 text-red-700 rounded-xl hover:bg-red-200 transition-all disabled:opacity-50",title:"Delete Template",children:n.jsx(ms,{className:"h-4 w-4"})})]})})]}),n.jsxs("div",{className:"p-4 bg-cream-50 border-b border-cream-200 flex flex-wrap gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-neutral-500",children:"Category:"})," ",n.jsx("span",{className:"font-medium text-neutral-700 capitalize",children:e.category})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-neutral-500",children:"Trigger:"})," ",n.jsx("span",{className:"font-medium text-neutral-700 capitalize",children:e.trigger_type||"Manual"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-neutral-500",children:"Version:"})," ",n.jsx("span",{className:"font-medium text-neutral-700",children:e.version})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-neutral-500",children:"Variables:"})," ",n.jsx("span",{className:"font-medium text-neutral-700",children:e.available_variables.length})]})]}),(e.send_frequency||e.send_time||e.send_day)&&n.jsxs("div",{className:"p-4 bg-blue-50 border-b border-blue-200 flex flex-wrap gap-4 text-sm",children:[n.jsx("div",{className:"flex items-center gap-2",children:n.jsx("span",{className:"text-blue-600 font-semibold",children:" Schedule:"})}),e.send_frequency&&n.jsxs("div",{children:[n.jsx("span",{className:"text-blue-500",children:"Frequency:"})," ",n.jsx("span",{className:"font-medium text-blue-700",children:e.send_frequency})]}),e.send_day&&n.jsxs("div",{children:[n.jsx("span",{className:"text-blue-500",children:"Day:"})," ",n.jsx("span",{className:"font-medium text-blue-700",children:e.send_day})]}),e.send_time&&n.jsxs("div",{children:[n.jsx("span",{className:"text-blue-500",children:"Time:"})," ",n.jsx("span",{className:"font-medium text-blue-700",children:e.send_time})]})]}),n.jsxs("div",{className:"p-4",children:[t?n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Subject Line"}),n.jsx("input",{type:"text",value:m,onChange:A=>x(A.target.value),className:"w-full px-4 py-2 border border-cream-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-burgundy-500"})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("label",{className:"block text-sm font-medium text-neutral-700",children:"Email Body"}),n.jsxs("div",{className:"flex items-center gap-1 bg-cream-100 rounded-lg p-1",children:[n.jsxs("button",{onClick:()=>N("wysiwyg"),className:`flex items-center gap-1 px-3 py-1.5 text-xs font-medium rounded-md transition-all ${j==="wysiwyg"?"bg-white text-burgundy-700 shadow-sm":"text-neutral-600 hover:text-neutral-800"}`,children:[n.jsx(dP,{className:"h-3.5 w-3.5"}),"Visual"]}),n.jsxs("button",{onClick:()=>N("code"),className:`flex items-center gap-1 px-3 py-1.5 text-xs font-medium rounded-md transition-all ${j==="code"?"bg-white text-burgundy-700 shadow-sm":"text-neutral-600 hover:text-neutral-800"}`,children:[n.jsx(_te,{className:"h-3.5 w-3.5"}),"HTML"]})]})]}),j==="wysiwyg"?n.jsx("div",{className:"border border-cream-200 rounded-xl overflow-hidden",children:n.jsx(iu,{theme:"snow",value:y,onChange:g,modules:C,formats:E,className:"bg-white",style:{minHeight:"400px"}})}):n.jsx("textarea",{value:y,onChange:A=>g(A.target.value),rows:20,className:"w-full px-4 py-2 border border-cream-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-burgundy-500 font-mono text-sm",placeholder:"Enter HTML email content..."})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",id:"is_active",checked:b,onChange:A=>_(A.target.checked),className:"rounded border-cream-300 text-burgundy-500 focus:ring-burgundy-500"}),n.jsx("label",{htmlFor:"is_active",className:"text-sm text-neutral-700",children:"Active"})]}),n.jsxs("div",{className:"bg-cream-50 rounded-xl p-4",children:[n.jsxs("p",{className:"text-sm font-medium text-neutral-700 mb-2",children:["Available Variables:"," ",n.jsx("span",{className:"font-normal text-neutral-500",children:"(click to insert)"})]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:e.available_variables.map(A=>n.jsx("button",{onClick:()=>I(A),className:"px-2 py-1 bg-white text-xs rounded border border-cream-200 hover:bg-burgundy-50 hover:border-burgundy-300 hover:text-burgundy-700 transition-colors cursor-pointer",children:`{{${A}}}`},A))})]})]}):r?n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"bg-neutral-100 rounded-xl p-4",children:[n.jsx("p",{className:"text-sm text-neutral-500 mb-1",children:"Subject:"}),n.jsx("p",{className:"font-medium text-neutral-800",children:m.replace(/{{(\w+)}}/g,(A,R)=>f(e.available_variables)[R]||`{{${R}}}`)})]}),n.jsxs("div",{className:"border border-cream-200 rounded-xl overflow-hidden",children:[n.jsx("div",{className:"bg-neutral-800 text-white text-xs px-4 py-2",children:"Email Preview"}),n.jsx("iframe",{srcDoc:T(),className:"w-full h-[500px] bg-white",title:"Email Preview"})]})]}):n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-neutral-500 mb-1",children:"Subject:"}),n.jsx("p",{className:"font-medium text-neutral-800",children:e.subject})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-neutral-500 mb-1",children:"HTML Body:"}),n.jsx("pre",{className:"text-xs bg-cream-50 p-4 rounded-xl overflow-auto max-h-[400px] font-mono",children:e.html_body})]})]}),!t&&n.jsxs("div",{className:"mt-6 pt-6 border-t border-cream-200",children:[n.jsx("p",{className:"text-sm font-medium text-neutral-700 mb-2",children:"Send Test Email"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"email",placeholder:"Enter email address",value:w,onChange:A=>S(A.target.value),className:"flex-1 px-4 py-2 border border-cream-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-burgundy-500"}),n.jsxs("button",{onClick:()=>{o(w),S("")},disabled:!w||d,className:"flex items-center gap-2 px-4 py-2 bg-burgundy-500 text-white rounded-xl hover:bg-burgundy-600 disabled:opacity-50 transition-all",children:[n.jsx(Jn,{className:"h-4 w-4"}),d?"Sending...":"Send Test"]})]})]})]})]})}function _ue({copy:e,editMode:t,setEditMode:r,onSave:s,saving:a,onCancel:i}){var y;const[o,l]=$.useState(e.content),[u,d]=$.useState(e.is_active??!0);$.useEffect(()=>{l(e.content),d(e.is_active??!0)},[e]);const p=e.content_type==="html"||((y=e.content)==null?void 0:y.includes("<")),f=$.useMemo(()=>({toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike"],[{color:[]},{background:[]}],[{list:"ordered"},{list:"bullet"}],[{align:[]}],["link"],["blockquote"],["clean"]]}),[]),m=["header","bold","italic","underline","strike","color","background","list","bullet","align","link","blockquote"],x=e.key.split(".").slice(1).join("  ")||e.key;return n.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 overflow-hidden",children:[n.jsxs("div",{className:"p-4 border-b border-cream-200 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-bold text-neutral-800 capitalize",children:x}),n.jsx("p",{className:"text-sm text-neutral-500",children:e.description||`Edit ${e.page} content`})]}),n.jsx("div",{className:"flex items-center gap-2",children:t?n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:()=>{r(!1),i()},className:"flex items-center gap-2 px-3 py-2 bg-cream-100 text-neutral-700 rounded-xl hover:bg-cream-200 transition-all",children:[n.jsx(It,{className:"h-4 w-4"}),"Cancel"]}),n.jsxs("button",{onClick:()=>s({content:o,is_active:u}),disabled:a,className:"flex items-center gap-2 px-3 py-2 bg-green-500 text-white rounded-xl hover:bg-green-600 transition-all disabled:opacity-50",children:[n.jsx(Ar,{className:"h-4 w-4"}),a?"Saving...":"Save"]})]}):n.jsxs("button",{onClick:()=>{r(!0),l(e.content),d(e.is_active??!0)},className:"flex items-center gap-2 px-3 py-2 bg-burgundy-500 text-white rounded-xl hover:bg-burgundy-600 transition-all",children:[n.jsx(tl,{className:"h-4 w-4"}),"Edit"]})})]}),n.jsxs("div",{className:"p-4 bg-cream-50 border-b border-cream-200 flex flex-wrap gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-neutral-500",children:"Page:"})," ",n.jsx("span",{className:"font-medium text-neutral-700 capitalize",children:e.page})]}),e.section&&n.jsxs("div",{children:[n.jsx("span",{className:"text-neutral-500",children:"Section:"})," ",n.jsx("span",{className:"font-medium text-neutral-700 capitalize",children:e.section})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-neutral-500",children:"Type:"})," ",n.jsx("span",{className:"font-medium text-neutral-700",children:e.content_type||"text"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-neutral-500",children:"Key:"})," ",n.jsx("span",{className:"font-mono text-xs text-neutral-600",children:e.key})]})]}),n.jsx("div",{className:"p-4",children:t?n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Content"}),p?n.jsx("div",{className:"border border-cream-200 rounded-xl overflow-hidden",children:n.jsx(iu,{theme:"snow",value:o,onChange:l,modules:f,formats:m,className:"bg-white",style:{minHeight:"200px"},placeholder:"Enter content..."})}):n.jsx("textarea",{value:o,onChange:g=>l(g.target.value),rows:6,className:"w-full px-4 py-3 border border-cream-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-burgundy-500 resize-none",placeholder:"Enter content..."})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",id:"page_content_is_active",checked:u,onChange:g=>d(g.target.checked),className:"rounded border-cream-300 text-burgundy-500 focus:ring-burgundy-500"}),n.jsx("label",{htmlFor:"page_content_is_active",className:"text-sm text-neutral-700",children:"Active"})]})]}):n.jsx("div",{className:"space-y-4",children:n.jsx("div",{className:"bg-cream-50 rounded-xl p-6",children:p?n.jsx("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:o}}):n.jsx("p",{className:"text-neutral-700 whitespace-pre-wrap",children:o})})})}),t&&p&&o&&n.jsxs("div",{className:"p-4 border-t border-cream-200 bg-cream-50",children:[n.jsx("p",{className:"text-sm text-neutral-600 mb-2 font-medium",children:"Preview:"}),n.jsx("div",{className:"bg-white rounded-xl p-4 border border-cream-200",children:n.jsx("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:o}})})]})]})}function jue({onSave:e,onCancel:t,saving:r,error:s}){const[a,i]=$.useState(""),[o,l]=$.useState(""),[u,d]=$.useState(""),[p,f]=$.useState("transactional"),[m,x]=$.useState(""),[y,g]=$.useState(Nue),[b,_]=$.useState("displayName"),[w,S]=$.useState("manual"),j=C=>{l(C);const E=C.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,"");i(E)},N=()=>{if(!a||!o||!m||!y){alert("Please fill in all required fields");return}const C=b.split(",").map(E=>E.trim()).filter(Boolean);e({slug:a,name:o,description:u,category:p,subject:m,html_body:y,available_variables:C,trigger_type:w==="manual"?void 0:w,is_active:!0})};return n.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 overflow-hidden",children:[n.jsxs("div",{className:"p-4 border-b border-cream-200 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-bold text-neutral-800",children:"Create New Email Template"}),n.jsx("p",{className:"text-sm text-neutral-500",children:"Build a new email from scratch"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("button",{onClick:t,className:"flex items-center gap-2 px-3 py-2 bg-cream-100 text-neutral-700 rounded-xl hover:bg-cream-200 transition-all",children:[n.jsx(It,{className:"h-4 w-4"}),"Cancel"]}),n.jsxs("button",{onClick:N,disabled:r||!a||!o||!m,className:"flex items-center gap-2 px-3 py-2 bg-green-500 text-white rounded-xl hover:bg-green-600 transition-all disabled:opacity-50",children:[n.jsx(Ar,{className:"h-4 w-4"}),r?"Creating...":"Create Template"]})]})]}),s&&n.jsx("div",{className:"p-4 bg-red-50 border-b border-red-200",children:n.jsxs("p",{className:"text-red-700 text-sm flex items-center gap-2",children:[n.jsx(yt,{className:"h-4 w-4"}),s]})}),n.jsxs("div",{className:"p-4 space-y-4 max-h-[70vh] overflow-y-auto",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:["Template Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",value:o,onChange:C=>j(C.target.value),placeholder:"e.g., Weekly Summary",className:"w-full px-4 py-2 border border-cream-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-burgundy-500"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:["Slug ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",value:a,onChange:C=>i(C.target.value.toLowerCase().replace(/[^a-z0-9-]/g,"")),placeholder:"weekly-summary",className:"w-full px-4 py-2 border border-cream-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-burgundy-500 font-mono"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Description"}),n.jsx("input",{type:"text",value:u,onChange:C=>d(C.target.value),placeholder:"Brief description of when this email is sent",className:"w-full px-4 py-2 border border-cream-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-burgundy-500"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Category"}),n.jsxs("select",{value:p,onChange:C=>f(C.target.value),className:"w-full px-4 py-2 border border-cream-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-burgundy-500",children:[n.jsx("option",{value:"transactional",children:"Transactional"}),n.jsx("option",{value:"lifecycle",children:"Lifecycle"}),n.jsx("option",{value:"marketing",children:"Marketing"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Trigger Type"}),n.jsxs("select",{value:w,onChange:C=>S(C.target.value),className:"w-full px-4 py-2 border border-cream-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-burgundy-500",children:[n.jsx("option",{value:"manual",children:"Manual / API"}),n.jsx("option",{value:"event",children:"Event-based"}),n.jsx("option",{value:"scheduled",children:"Scheduled"})]})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:["Subject Line ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",value:m,onChange:C=>x(C.target.value),placeholder:"e.g., Your weekly Survivor Fantasy update",className:"w-full px-4 py-2 border border-cream-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-burgundy-500"}),n.jsxs("p",{className:"text-xs text-neutral-500 mt-1",children:["Use ","{{variableName}}"," for dynamic content"]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Available Variables"}),n.jsx("input",{type:"text",value:b,onChange:C=>_(C.target.value),placeholder:"displayName, leagueName, episodeNumber",className:"w-full px-4 py-2 border border-cream-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-burgundy-500"}),n.jsx("p",{className:"text-xs text-neutral-500 mt-1",children:"Comma-separated list of variable names"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:["HTML Body ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("textarea",{value:y,onChange:C=>g(C.target.value),rows:16,className:"w-full px-4 py-2 border border-cream-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-burgundy-500 font-mono text-sm"})]})]})]})}const Nue=`<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Email</title>
</head>
<body style="margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background-color: #FDF8F3;">
  <table width="100%" cellpadding="0" cellspacing="0" style="background-color: #FDF8F3; padding: 40px 20px;">
    <tr>
      <td align="center">
        <table width="600" cellpadding="0" cellspacing="0" style="background-color: #ffffff; border-radius: 16px; overflow: hidden; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);">
          <!-- Header -->
          <tr>
            <td style="background: linear-gradient(135deg, #8B0000 0%, #6B0000 100%); padding: 32px; text-align: center;">
              <h1 style="margin: 0; color: #ffffff; font-size: 28px; font-weight: 700;">
                 Survivor Fantasy
              </h1>
            </td>
          </tr>
          
          <!-- Content -->
          <tr>
            <td style="padding: 32px;">
              <h2 style="margin: 0 0 16px 0; color: #1a1a1a; font-size: 24px;">
                Hello {{displayName}}!
              </h2>
              <p style="margin: 0 0 16px 0; color: #4a4a4a; font-size: 16px; line-height: 1.6;">
                Your email content goes here. Use {{variableName}} for dynamic content.
              </p>
              
              <!-- CTA Button -->
              <table width="100%" cellpadding="0" cellspacing="0" style="margin: 24px 0;">
                <tr>
                  <td align="center">
                    <a href="{{dashboardUrl}}" style="display: inline-block; padding: 14px 32px; background-color: #8B0000; color: #ffffff; text-decoration: none; border-radius: 8px; font-weight: 600; font-size: 16px;">
                      Go to Dashboard
                    </a>
                  </td>
                </tr>
              </table>
            </td>
          </tr>
          
          <!-- Footer -->
          <tr>
            <td style="padding: 24px 32px; background-color: #f5f0eb; text-align: center;">
              <p style="margin: 0; color: #6a6a6a; font-size: 14px;">
                Reality Games Fantasy League
              </p>
              <p style="margin: 8px 0 0 0; color: #9a9a9a; font-size: 12px;">
                You're receiving this because you signed up at realitygamesfantasyleague.com
              </p>
            </td>
          </tr>
        </table>
      </td>
    </tr>
  </table>
</body>
</html>`;function Sue({castaway:e,editMode:t,setEditMode:r,onSave:s,saving:a}){var C,E,T;const[i,o]=$.useState(e.age),[l,u]=$.useState(e.hometown||""),[d,p]=$.useState(e.occupation||""),[f,m]=$.useState(e.tribe_original||""),[x,y]=$.useState(((C=e.previous_seasons)==null?void 0:C.join(", "))||""),[g,b]=$.useState(e.best_placement),[_,w]=$.useState(e.fun_fact||"");$.useEffect(()=>{var I;o(e.age),u(e.hometown||""),p(e.occupation||""),m(e.tribe_original||""),y(((I=e.previous_seasons)==null?void 0:I.join(", "))||""),b(e.best_placement),w(e.fun_fact||"")},[e]);const S=$.useMemo(()=>({toolbar:[["bold","italic","underline"],[{list:"ordered"},{list:"bullet"}],["link"],["clean"]]}),[]),j=["bold","italic","underline","list","bullet","link"],N=()=>{const I=x.split(",").map(A=>A.trim()).filter(Boolean);s({age:i||null,hometown:l||null,occupation:d||null,tribe_original:f||null,previous_seasons:I.length>0?I:null,best_placement:g||null,fun_fact:_||null})};return n.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 overflow-hidden",children:[n.jsxs("div",{className:"p-4 border-b border-cream-200 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[e.photo_url&&n.jsx("img",{src:e.photo_url,alt:e.name,className:"w-16 h-16 rounded-xl object-cover border border-cream-200"}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-bold text-neutral-800",children:e.name}),n.jsx("p",{className:"text-sm text-neutral-500",children:"Edit castaway profile"})]})]}),n.jsx("div",{className:"flex items-center gap-2",children:t?n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:()=>r(!1),className:"flex items-center gap-2 px-3 py-2 bg-cream-100 text-neutral-700 rounded-xl hover:bg-cream-200 transition-all",children:[n.jsx(It,{className:"h-4 w-4"}),"Cancel"]}),n.jsxs("button",{onClick:N,disabled:a,className:"flex items-center gap-2 px-3 py-2 bg-green-500 text-white rounded-xl hover:bg-green-600 transition-all disabled:opacity-50",children:[n.jsx(Ar,{className:"h-4 w-4"}),a?"Saving...":"Save"]})]}):n.jsxs("button",{onClick:()=>r(!0),className:"flex items-center gap-2 px-3 py-2 bg-burgundy-500 text-white rounded-xl hover:bg-burgundy-600 transition-all",children:[n.jsx(tl,{className:"h-4 w-4"}),"Edit"]})})]}),n.jsxs("div",{className:"p-4 bg-cream-50 border-b border-cream-200 flex items-center gap-4 text-sm",children:[n.jsx("span",{className:`px-2 py-0.5 text-xs rounded-full ${e.status==="active"?"bg-green-100 text-green-700":"bg-neutral-100 text-neutral-500"}`,children:e.status}),e.tribe_original&&n.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-blue-100 text-blue-700",children:e.tribe_original})]}),n.jsx("div",{className:"p-4 max-h-[60vh] overflow-y-auto",children:t?n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Age"}),n.jsx("input",{type:"number",value:i||"",onChange:I=>o(I.target.value?parseInt(I.target.value):null),className:"w-full px-3 py-2 border border-cream-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-burgundy-500",placeholder:"35"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Tribe"}),n.jsx("input",{type:"text",value:f,onChange:I=>m(I.target.value),className:"w-full px-3 py-2 border border-cream-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-burgundy-500",placeholder:"Soka"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Hometown"}),n.jsx("input",{type:"text",value:l,onChange:I=>u(I.target.value),className:"w-full px-3 py-2 border border-cream-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-burgundy-500",placeholder:"Los Angeles, CA"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Occupation"}),n.jsx("input",{type:"text",value:d,onChange:I=>p(I.target.value),className:"w-full px-3 py-2 border border-cream-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-burgundy-500",placeholder:"Software Engineer"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Previous Seasons"}),n.jsx("input",{type:"text",value:x,onChange:I=>y(I.target.value),className:"w-full px-3 py-2 border border-cream-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-burgundy-500",placeholder:"Season 20, Season 40"}),n.jsx("p",{className:"text-xs text-neutral-500 mt-1",children:"Comma-separated list"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Best Placement"}),n.jsx("input",{type:"number",value:g||"",onChange:I=>b(I.target.value?parseInt(I.target.value):null),className:"w-full px-3 py-2 border border-cream-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-burgundy-500",placeholder:"1",min:"1",max:"20"}),n.jsx("p",{className:"text-xs text-neutral-500 mt-1",children:"1 = Winner"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Fun Fact"}),n.jsx("div",{className:"border border-cream-200 rounded-xl overflow-hidden",children:n.jsx(iu,{theme:"snow",value:_,onChange:w,modules:S,formats:j,className:"bg-white",style:{minHeight:"150px"},placeholder:"Enter interesting trivia about this castaway..."})})]})]}):n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"bg-cream-50 rounded-xl p-4",children:[n.jsx("p",{className:"text-xs text-neutral-500 uppercase tracking-wider mb-1",children:"Age"}),n.jsx("p",{className:"text-lg font-semibold text-neutral-800",children:e.age||""})]}),n.jsxs("div",{className:"bg-cream-50 rounded-xl p-4",children:[n.jsx("p",{className:"text-xs text-neutral-500 uppercase tracking-wider mb-1",children:"Tribe"}),n.jsx("p",{className:"text-lg font-semibold text-neutral-800",children:e.tribe_original||""})]})]}),n.jsxs("div",{className:"bg-cream-50 rounded-xl p-4",children:[n.jsx("p",{className:"text-xs text-neutral-500 uppercase tracking-wider mb-1",children:"Hometown"}),n.jsx("p",{className:"text-lg font-semibold text-neutral-800",children:e.hometown||""})]}),n.jsxs("div",{className:"bg-cream-50 rounded-xl p-4",children:[n.jsx("p",{className:"text-xs text-neutral-500 uppercase tracking-wider mb-1",children:"Occupation"}),n.jsx("p",{className:"text-lg font-semibold text-neutral-800",children:e.occupation||""})]}),(((E=e.previous_seasons)==null?void 0:E.length)||e.best_placement)&&n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[(T=e.previous_seasons)!=null&&T.length?n.jsxs("div",{className:"bg-cream-50 rounded-xl p-4",children:[n.jsx("p",{className:"text-xs text-neutral-500 uppercase tracking-wider mb-1",children:"Previous Seasons"}),n.jsx("p",{className:"text-sm font-medium text-neutral-800",children:e.previous_seasons.join(", ")})]}):null,e.best_placement&&n.jsxs("div",{className:"bg-cream-50 rounded-xl p-4",children:[n.jsx("p",{className:"text-xs text-neutral-500 uppercase tracking-wider mb-1",children:"Best Placement"}),n.jsx("p",{className:"text-lg font-semibold text-neutral-800",children:e.best_placement===1?" Winner":`#${e.best_placement}`})]})]}),e.fun_fact?n.jsxs("div",{className:"bg-gradient-to-r from-amber-50 to-yellow-50 border border-amber-200 rounded-xl p-5",children:[n.jsxs("p",{className:"text-xs text-amber-600 uppercase tracking-wider mb-2 flex items-center gap-1",children:[n.jsx(zn,{className:"h-3 w-3"})," Fun Fact"]}),n.jsx("div",{className:"text-amber-700 leading-relaxed prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:e.fun_fact}})]}):n.jsxs("div",{className:"bg-cream-50 rounded-xl p-6 text-center",children:[n.jsx(zn,{className:"h-8 w-8 text-neutral-300 mx-auto mb-2"}),n.jsx("p",{className:"text-neutral-500 text-sm",children:"No fun fact yet"})]})]})})]})}const kue="https://rgfl-api-production.up.railway.app";async function wo(e,t){var i;const s=(i=(await X.auth.getSession()).data.session)==null?void 0:i.access_token,a=await fetch(`${kue}${e}`,{...t,headers:{...t==null?void 0:t.headers,Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});if(!a.ok){const o=await a.json().catch(()=>({}));throw new Error(o.error||`API error: ${a.status}`)}return a.json()}const Eue=[{value:"all",label:"All Users",description:"Everyone with notifications enabled"},{value:"active",label:"Active Players",description:"Users playing this season"},{value:"commissioners",label:"Commissioners",description:"League commissioners only"},{value:"picked",label:"Already Picked",description:"Users who made their pick"},{value:"not_picked",label:"Not Picked Yet",description:"Users who need to pick"},{value:"custom",label:"Custom List",description:"Enter specific addresses"}],Cue=[{value:"all",label:"All Phone Verified",description:"Everyone with SMS enabled"},{value:"active",label:"Active Players",description:"Users playing this season"},{value:"commissioners",label:"Commissioners",description:"League commissioners only"},{value:"custom",label:"Custom List",description:"Enter specific numbers"}];function Tue(){const e=at(),[t,r]=$.useState("email"),[s,a]=$.useState("all"),[i,o]=$.useState(!1),[l,u]=$.useState(null),[d,p]=$.useState(null),{data:f,isLoading:m}=ie({queryKey:["admin","campaigns","email",s],queryFn:()=>wo(`/api/admin/campaigns/email?status=${s}`),enabled:t==="email"}),{data:x,isLoading:y}=ie({queryKey:["admin","campaigns","sms",s],queryFn:()=>wo(`/api/admin/campaigns/sms?status=${s}`),enabled:t==="sms"}),g=ke({mutationFn:async({type:N,id:C})=>wo(`/api/admin/campaigns/${N}/${C}/send`,{method:"POST"}),onSuccess:()=>{e.invalidateQueries({queryKey:["admin","campaigns"]})}}),b=ke({mutationFn:async({type:N,id:C})=>wo(`/api/admin/campaigns/${N}/${C}/archive`,{method:"POST"}),onSuccess:()=>{e.invalidateQueries({queryKey:["admin","campaigns"]})}}),_=ke({mutationFn:async({type:N,id:C})=>wo(`/api/admin/campaigns/${N}/${C}`,{method:"DELETE"}),onSuccess:()=>{e.invalidateQueries({queryKey:["admin","campaigns"]})}}),w=t==="email"?m:y,S=t==="email"?(f==null?void 0:f.campaigns)||[]:(x==null?void 0:x.campaigns)||[],j=N=>{switch(N){case"draft":return n.jsxs("span",{className:"px-2 py-1 text-xs font-medium bg-neutral-100 text-neutral-600 rounded-full flex items-center gap-1",children:[n.jsx(tl,{className:"h-3 w-3"})," Draft"]});case"scheduled":return n.jsxs("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-700 rounded-full flex items-center gap-1",children:[n.jsx(Nt,{className:"h-3 w-3"})," Scheduled"]});case"sending":return n.jsxs("span",{className:"px-2 py-1 text-xs font-medium bg-amber-100 text-amber-700 rounded-full flex items-center gap-1",children:[n.jsx(be,{className:"h-3 w-3 animate-spin"})," Sending"]});case"sent":return n.jsxs("span",{className:"px-2 py-1 text-xs font-medium bg-green-100 text-green-700 rounded-full flex items-center gap-1",children:[n.jsx(xt,{className:"h-3 w-3"})," Sent"]});case"failed":return n.jsxs("span",{className:"px-2 py-1 text-xs font-medium bg-red-100 text-red-700 rounded-full flex items-center gap-1",children:[n.jsx(Tr,{className:"h-3 w-3"})," Failed"]});case"archived":return n.jsxs("span",{className:"px-2 py-1 text-xs font-medium bg-neutral-100 text-neutral-500 rounded-full flex items-center gap-1",children:[n.jsx($E,{className:"h-3 w-3"})," Archived"]})}};return n.jsxs("div",{className:"min-h-screen bg-cream-50",children:[n.jsx(dt,{}),n.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[n.jsxs("div",{className:"flex items-center justify-between mb-8",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(se,{to:"/admin/content",className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:n.jsx(ht,{className:"h-5 w-5 text-neutral-600"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-display font-bold text-neutral-800",children:"Campaigns"}),n.jsx("p",{className:"text-neutral-600 mt-1",children:"Send email and SMS campaigns to users"})]})]}),n.jsxs("button",{onClick:()=>o(!0),className:"flex items-center gap-2 px-4 py-2 bg-burgundy-500 text-white rounded-xl hover:bg-burgundy-600 transition-colors",children:[n.jsx(tr,{className:"h-5 w-5"}),"New Campaign"]})]}),n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:()=>r("email"),className:`flex items-center gap-2 px-4 py-2 rounded-xl font-medium transition-all ${t==="email"?"bg-burgundy-500 text-white":"bg-white text-neutral-700 hover:bg-cream-100"}`,children:[n.jsx(sn,{className:"h-4 w-4"}),"Email Campaigns"]}),n.jsxs("button",{onClick:()=>r("sms"),className:`flex items-center gap-2 px-4 py-2 rounded-xl font-medium transition-all ${t==="sms"?"bg-burgundy-500 text-white":"bg-white text-neutral-700 hover:bg-cream-100"}`,children:[n.jsx(el,{className:"h-4 w-4"}),"SMS Campaigns"]})]}),n.jsx("div",{className:"flex gap-2",children:["all","draft","scheduled","sent","archived"].map(N=>n.jsx("button",{onClick:()=>a(N),className:`px-3 py-1.5 text-sm rounded-lg transition-all ${s===N?"bg-neutral-800 text-white":"bg-white text-neutral-600 hover:bg-cream-100"}`,children:N.charAt(0).toUpperCase()+N.slice(1)},N))})]}),n.jsx("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 overflow-hidden",children:w?n.jsxs("div",{className:"p-12 text-center",children:[n.jsx(be,{className:"h-8 w-8 animate-spin text-burgundy-500 mx-auto mb-3"}),n.jsx("p",{className:"text-neutral-500",children:"Loading campaigns..."})]}):S.length===0?n.jsxs("div",{className:"p-12 text-center",children:[n.jsx("div",{className:"text-neutral-300 mb-4",children:t==="email"?n.jsx(sn,{className:"h-16 w-16 mx-auto"}):n.jsx(el,{className:"h-16 w-16 mx-auto"})}),n.jsx("h3",{className:"text-lg font-medium text-neutral-700 mb-2",children:"No campaigns found"}),n.jsx("p",{className:"text-neutral-500 mb-4",children:s==="all"?"Create your first campaign to get started":`No ${s} campaigns`}),n.jsxs("button",{onClick:()=>o(!0),className:"inline-flex items-center gap-2 px-4 py-2 bg-burgundy-500 text-white rounded-xl hover:bg-burgundy-600",children:[n.jsx(tr,{className:"h-4 w-4"}),"Create Campaign"]})]}):n.jsx("div",{className:"divide-y divide-cream-100",children:S.map(N=>n.jsxs("div",{className:"p-4 hover:bg-cream-50 transition-colors",children:[n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("h3",{className:"font-semibold text-neutral-800 truncate",children:N.name}),j(N.status)]}),n.jsx("p",{className:"text-sm text-neutral-600 truncate mb-2",children:"subject"in N?N.subject:N.message}),n.jsxs("div",{className:"flex items-center gap-4 text-xs text-neutral-500",children:[n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(Ke,{className:"h-3 w-3"}),N.recipient_segment]}),N.sent_at&&n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(wn,{className:"h-3 w-3"}),"Sent ",new Date(N.sent_at).toLocaleDateString()]}),N.scheduled_at&&N.status==="scheduled"&&n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(Nt,{className:"h-3 w-3"}),"Scheduled for ",new Date(N.scheduled_at).toLocaleString()]}),N.sent_count!==void 0&&n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(xt,{className:"h-3 w-3 text-green-500"}),N.sent_count," sent",N.failed_count?n.jsxs("span",{className:"text-red-500",children:[", ",N.failed_count," failed"]}):null]})]})]}),n.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[n.jsx("button",{onClick:()=>p(N),className:"p-2 text-neutral-400 hover:text-neutral-600 hover:bg-cream-100 rounded-lg transition-colors",title:"Preview",children:n.jsx(Ha,{className:"h-4 w-4"})}),(N.status==="draft"||N.status==="scheduled")&&n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>u(N),className:"p-2 text-neutral-400 hover:text-neutral-600 hover:bg-cream-100 rounded-lg transition-colors",title:"Edit",children:n.jsx(tl,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>{confirm("Send this campaign now?")&&g.mutate({type:t,id:N.id})},disabled:g.isPending,className:"p-2 text-green-500 hover:text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Send Now",children:n.jsx(Jn,{className:"h-4 w-4"})})]}),N.status!=="archived"&&N.status!=="sending"&&n.jsx("button",{onClick:()=>b.mutate({type:t,id:N.id}),disabled:b.isPending,className:"p-2 text-neutral-400 hover:text-neutral-600 hover:bg-cream-100 rounded-lg transition-colors",title:"Archive",children:n.jsx($E,{className:"h-4 w-4"})}),(N.status==="draft"||N.status==="archived")&&n.jsx("button",{onClick:()=>{confirm("Delete this campaign?")&&_.mutate({type:t,id:N.id})},disabled:_.isPending,className:"p-2 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:n.jsx(ms,{className:"h-4 w-4"})})]})]}),N.error_message&&n.jsxs("div",{className:"mt-2 p-2 bg-red-50 border border-red-200 rounded-lg text-xs text-red-700",children:[n.jsx(yt,{className:"h-3 w-3 inline mr-1"}),N.error_message]})]},N.id))})})]}),(i||l)&&n.jsx(Rue,{type:t,campaign:l,onClose:()=>{o(!1),u(null)},onSuccess:()=>{o(!1),u(null),e.invalidateQueries({queryKey:["admin","campaigns"]})}}),d&&n.jsx(Aue,{campaign:d,type:t,onClose:()=>p(null)})]})}function Rue({type:e,campaign:t,onClose:r,onSuccess:s}){var R;const[a,i]=$.useState((t==null?void 0:t.name)||""),[o,l]=$.useState(t&&"subject"in t?t.subject:""),[u,d]=$.useState(t&&"html_body"in t?t.html_body:""),[p,f]=$.useState(t&&"message"in t?t.message:""),[m,x]=$.useState((t==null?void 0:t.recipient_segment)||"all"),[y,g]=$.useState(((R=t==null?void 0:t.custom_recipients)==null?void 0:R.join(`
`))||""),[b,_]=$.useState(t!=null&&t.scheduled_at?new Date(t.scheduled_at).toISOString().slice(0,16):""),[w,S]=$.useState(!1),[j,N]=$.useState(!1),[C,E]=$.useState(null),{data:T}=ie({queryKey:["recipients-preview",e,m],queryFn:()=>wo(`/api/admin/campaigns/${e}/recipients/${m}`),enabled:m!=="custom"}),I=async()=>{N(!0),E(null);try{const O={name:a,recipient_segment:m,send_immediately:w,scheduled_at:b||null};m==="custom"&&(O.custom_recipients=y.split(`
`).map(U=>U.trim()).filter(Boolean)),e==="email"?(O.subject=o,O.html_body=u):O.message=p;const M=t?`/api/admin/campaigns/${e}/${t.id}`:`/api/admin/campaigns/${e}`;await wo(M,{method:t?"PUT":"POST",body:JSON.stringify(O)}),s()}catch(O){E(O instanceof Error?O.message:"Failed to save campaign")}finally{N(!1)}},A=e==="email"?Eue:Cue;return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-3xl w-full max-h-[90vh] overflow-hidden",children:[n.jsxs("div",{className:"p-4 border-b border-cream-200 flex items-center justify-between",children:[n.jsxs("h2",{className:"text-lg font-display font-bold text-neutral-800",children:[t?"Edit":"Create"," ",e==="email"?"Email":"SMS"," Campaign"]}),n.jsx("button",{onClick:r,className:"p-2 text-neutral-400 hover:text-neutral-600 hover:bg-cream-100 rounded-lg",children:n.jsx(It,{className:"h-5 w-5"})})]}),n.jsxs("div",{className:"p-4 space-y-4 max-h-[calc(90vh-140px)] overflow-y-auto",children:[C&&n.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-xl text-red-700 text-sm flex items-center gap-2",children:[n.jsx(yt,{className:"h-4 w-4"}),C]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Campaign Name"}),n.jsx("input",{type:"text",value:a,onChange:O=>i(O.target.value),placeholder:"e.g., Weekly Pick Reminder",className:"w-full px-4 py-2 border border-cream-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-burgundy-500"})]}),e==="email"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Subject Line"}),n.jsx("input",{type:"text",value:o,onChange:O=>l(O.target.value),placeholder:"Don't forget to make your pick!",className:"w-full px-4 py-2 border border-cream-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-burgundy-500"}),n.jsxs("p",{className:"text-xs text-neutral-500 mt-1",children:["Use ","{{displayName}}"," for personalization"]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Email Body"}),n.jsx("div",{className:"border border-cream-200 rounded-xl overflow-hidden",children:n.jsx(iu,{theme:"snow",value:u,onChange:d,className:"bg-white",style:{minHeight:"250px"}})})]})]}),e==="sms"&&n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:["Message (",p.length,"/1600 characters)"]}),n.jsx("textarea",{value:p,onChange:O=>f(O.target.value.slice(0,1600)),placeholder:"Don't forget to make your pick this week!",rows:4,className:"w-full px-4 py-2 border border-cream-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-burgundy-500"}),n.jsxs("p",{className:"text-xs text-neutral-500 mt-1",children:["Use ","{{displayName}}"," for personalization. Will be sent from your Twilio number."]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Recipients"}),n.jsx("div",{className:"grid grid-cols-2 gap-2",children:A.map(O=>n.jsxs("button",{onClick:()=>x(O.value),className:`p-3 text-left border rounded-xl transition-all ${m===O.value?"border-burgundy-500 bg-burgundy-50":"border-cream-200 hover:border-cream-300"}`,children:[n.jsx("p",{className:"font-medium text-sm text-neutral-800",children:O.label}),n.jsx("p",{className:"text-xs text-neutral-500",children:O.description})]},O.value))}),m!=="custom"&&T&&n.jsx("div",{className:"mt-3 p-3 bg-cream-50 rounded-xl",children:n.jsxs("p",{className:"text-sm text-neutral-600",children:[n.jsx(Ke,{className:"h-4 w-4 inline mr-1"}),T.count," recipients will receive this campaign"]})}),m==="custom"&&n.jsx("div",{className:"mt-3",children:n.jsx("textarea",{value:y,onChange:O=>g(O.target.value),placeholder:e==="email"?"Enter email addresses, one per line":"Enter phone numbers, one per line",rows:4,className:"w-full px-4 py-2 border border-cream-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-burgundy-500 font-mono text-sm"})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Scheduling"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:w,onChange:O=>{S(O.target.checked),O.target.checked&&_("")},className:"rounded border-cream-300 text-burgundy-500 focus:ring-burgundy-500"}),n.jsx("span",{className:"text-sm text-neutral-700",children:"Send immediately after saving"})]}),!w&&n.jsxs("div",{children:[n.jsx("input",{type:"datetime-local",value:b,onChange:O=>_(O.target.value),className:"w-full px-4 py-2 border border-cream-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-burgundy-500"}),n.jsx("p",{className:"text-xs text-neutral-500 mt-1",children:"Leave empty to save as draft"})]})]})]})]}),n.jsxs("div",{className:"p-4 border-t border-cream-200 flex items-center justify-end gap-3",children:[n.jsx("button",{onClick:r,className:"px-4 py-2 text-neutral-600 hover:bg-cream-100 rounded-xl transition-colors",children:"Cancel"}),n.jsxs("button",{onClick:I,disabled:j||!a||(e==="email"?!o||!u:!p),className:"flex items-center gap-2 px-4 py-2 bg-burgundy-500 text-white rounded-xl hover:bg-burgundy-600 disabled:opacity-50 transition-colors",children:[j?n.jsx(be,{className:"h-4 w-4 animate-spin"}):w?n.jsx(Jn,{className:"h-4 w-4"}):n.jsx(Ar,{className:"h-4 w-4"}),j?"Saving...":w?"Send Now":"Save Campaign"]})]})]})})}function Aue({campaign:e,type:t,onClose:r}){return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-hidden",children:[n.jsxs("div",{className:"p-4 border-b border-cream-200 flex items-center justify-between",children:[n.jsxs("h2",{className:"text-lg font-display font-bold text-neutral-800",children:["Preview: ",e.name]}),n.jsx("button",{onClick:r,className:"p-2 text-neutral-400 hover:text-neutral-600 hover:bg-cream-100 rounded-lg",children:n.jsx(It,{className:"h-5 w-5"})})]}),n.jsxs("div",{className:"p-4 max-h-[calc(90vh-100px)] overflow-y-auto",children:[t==="email"&&"subject"in e&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"mb-4 p-3 bg-cream-50 rounded-xl",children:[n.jsx("p",{className:"text-sm text-neutral-500",children:"Subject:"}),n.jsx("p",{className:"font-medium text-neutral-800",children:e.subject})]}),n.jsxs("div",{className:"border border-cream-200 rounded-xl overflow-hidden",children:[n.jsx("div",{className:"bg-neutral-800 text-white text-xs px-4 py-2",children:"Email Preview"}),n.jsx("iframe",{srcDoc:e.html_body,className:"w-full h-[400px] bg-white",title:"Email Preview"})]})]}),t==="sms"&&"message"in e&&n.jsx("div",{className:"max-w-sm mx-auto",children:n.jsxs("div",{className:"bg-neutral-100 rounded-2xl p-4",children:[n.jsx("div",{className:"bg-green-500 text-white rounded-2xl rounded-bl-none p-3",children:n.jsx("p",{className:"text-sm",children:e.message})}),n.jsxs("p",{className:"text-xs text-neutral-500 mt-2",children:["SMS Preview (",e.message.length," chars)"]})]})})]})]})})}const Pue="https://rgfl-api-production.up.railway.app";async function Xl(e,t){var i;const s=(i=(await X.auth.getSession()).data.session)==null?void 0:i.access_token,a=await fetch(`${Pue}${e}`,{...t,headers:{...t==null?void 0:t.headers,Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});if(!a.ok){const o=await a.json().catch(()=>({}));throw new Error(o.error||`API error: ${a.status}`)}return a.json()}const UP={twitter:px,facebook:aP,instagram:Jte,linkedin:lne},BP={twitter:"bg-sky-100 text-sky-600",facebook:"bg-blue-100 text-blue-600",instagram:"bg-pink-100 text-pink-600",linkedin:"bg-indigo-100 text-indigo-600"};function Oue(){var w,S,j,N;const e=at(),[t,r]=$.useState([]),[s,a]=$.useState(!1),[i,o]=$.useState("pending"),{data:l,isLoading:u}=ie({queryKey:["admin","social","status"],queryFn:()=>Xl("/api/admin/social/status")}),{data:d,isLoading:p}=ie({queryKey:["admin","social","profiles"],queryFn:()=>Xl("/api/admin/social/profiles"),enabled:l==null?void 0:l.configured}),f=t[0]||((S=(w=d==null?void 0:d.profiles)==null?void 0:w[0])==null?void 0:S.id),{data:m,isLoading:x}=ie({queryKey:["admin","social","posts",f,i],queryFn:()=>Xl(`/api/admin/social/profiles/${f}/${i}`),enabled:!!f&&(l==null?void 0:l.configured)}),y=ke({mutationFn:C=>Xl(`/api/admin/social/posts/${C}/share`,{method:"POST"}),onSuccess:()=>{e.invalidateQueries({queryKey:["admin","social","posts"]})}}),g=ke({mutationFn:C=>Xl(`/api/admin/social/posts/${C}`,{method:"DELETE"}),onSuccess:()=>{e.invalidateQueries({queryKey:["admin","social","posts"]})}}),b=(d==null?void 0:d.profiles)||[],_=(m==null?void 0:m.posts)||[];return u?n.jsxs("div",{className:"min-h-screen bg-cream-50",children:[n.jsx(_e,{}),n.jsx(dt,{}),n.jsx("div",{className:"flex items-center justify-center h-96",children:n.jsx(be,{className:"h-8 w-8 animate-spin text-burgundy-500"})})]}):l!=null&&l.configured?n.jsxs("div",{className:"min-h-screen bg-cream-50",children:[n.jsx(_e,{}),n.jsx(dt,{}),n.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[n.jsxs("div",{className:"flex items-center justify-between mb-8",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(se,{to:"/admin/content",className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:n.jsx(ht,{className:"h-5 w-5 text-neutral-600"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-display font-bold text-neutral-800",children:"Social Media"}),n.jsxs("p",{className:"text-neutral-600 mt-1",children:["Manage posts via Buffer  Connected as ",(j=l.user)==null?void 0:j.name]})]})]}),n.jsxs("button",{onClick:()=>a(!0),className:"flex items-center gap-2 px-4 py-2 bg-burgundy-500 text-white rounded-xl hover:bg-burgundy-600 transition-colors",children:[n.jsx(tr,{className:"h-5 w-5"}),"New Post"]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[n.jsx("div",{className:"lg:col-span-1",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 overflow-hidden",children:[n.jsx("div",{className:"p-4 border-b border-cream-200",children:n.jsx("h2",{className:"font-semibold text-neutral-800",children:"Connected Accounts"})}),p?n.jsx("div",{className:"p-8 text-center",children:n.jsx(be,{className:"h-6 w-6 animate-spin text-burgundy-500 mx-auto"})}):b.length===0?n.jsxs("div",{className:"p-6 text-center text-neutral-500",children:[n.jsx("p",{children:"No profiles connected"}),n.jsx("a",{href:"https://buffer.com/app",target:"_blank",rel:"noopener noreferrer",className:"text-burgundy-600 hover:underline text-sm",children:"Connect accounts in Buffer "})]}):n.jsx("div",{className:"divide-y divide-cream-100",children:b.map(C=>{var A;const E=UP[C.service]||px,T=BP[C.service]||"bg-neutral-100 text-neutral-600",I=t.includes(C.id)||t.length===0&&C.id===((A=b[0])==null?void 0:A.id);return n.jsxs("button",{onClick:()=>{t.includes(C.id)?r(t.filter(R=>R!==C.id)):r([...t,C.id])},className:`w-full p-3 flex items-center gap-3 hover:bg-cream-50 transition-colors ${I?"bg-cream-100":""}`,children:[n.jsx("div",{className:`p-2 rounded-lg ${T}`,children:n.jsx(E,{className:"h-4 w-4"})}),n.jsxs("div",{className:"text-left flex-1 min-w-0",children:[n.jsx("p",{className:"font-medium text-neutral-800 truncate",children:C.formattedUsername}),n.jsx("p",{className:"text-xs text-neutral-500 capitalize",children:C.service})]}),I&&n.jsx(xt,{className:"h-4 w-4 text-green-500 flex-shrink-0"})]},C.id)})})]})}),n.jsxs("div",{className:"lg:col-span-3",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsxs("button",{onClick:()=>o("pending"),className:`px-4 py-2 rounded-xl font-medium transition-all ${i==="pending"?"bg-burgundy-500 text-white":"bg-white text-neutral-700 hover:bg-cream-100"}`,children:[n.jsx(Nt,{className:"h-4 w-4 inline mr-2"}),"Pending"]}),n.jsxs("button",{onClick:()=>o("sent"),className:`px-4 py-2 rounded-xl font-medium transition-all ${i==="sent"?"bg-burgundy-500 text-white":"bg-white text-neutral-700 hover:bg-cream-100"}`,children:[n.jsx(xt,{className:"h-4 w-4 inline mr-2"}),"Sent"]}),n.jsx("button",{onClick:()=>e.invalidateQueries({queryKey:["admin","social","posts"]}),className:"ml-auto p-2 text-neutral-400 hover:text-neutral-600 hover:bg-white rounded-lg transition-colors",children:n.jsx(an,{className:"h-4 w-4"})})]}),n.jsx("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 overflow-hidden",children:x?n.jsxs("div",{className:"p-12 text-center",children:[n.jsx(be,{className:"h-8 w-8 animate-spin text-burgundy-500 mx-auto mb-3"}),n.jsx("p",{className:"text-neutral-500",children:"Loading posts..."})]}):_.length===0?n.jsxs("div",{className:"p-12 text-center",children:[n.jsx(wn,{className:"h-16 w-16 text-neutral-300 mx-auto mb-4"}),n.jsxs("h3",{className:"text-lg font-medium text-neutral-700 mb-2",children:["No ",i," posts"]}),n.jsx("p",{className:"text-neutral-500 mb-4",children:i==="pending"?"Create a post to schedule it":"Posts you send will appear here"}),i==="pending"&&n.jsxs("button",{onClick:()=>a(!0),className:"inline-flex items-center gap-2 px-4 py-2 bg-burgundy-500 text-white rounded-xl hover:bg-burgundy-600",children:[n.jsx(tr,{className:"h-4 w-4"}),"Create Post"]})]}):n.jsx("div",{className:"divide-y divide-cream-100",children:_.map(C=>n.jsx("div",{className:"p-4 hover:bg-cream-50 transition-colors",children:n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-neutral-800 whitespace-pre-wrap",children:C.text}),n.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-neutral-500",children:[C.scheduled_at&&n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(Nt,{className:"h-3 w-3"}),new Date(C.scheduled_at*1e3).toLocaleString()]}),n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(wn,{className:"h-3 w-3"}),"Created ",new Date(C.created_at*1e3).toLocaleDateString()]})]})]}),i==="pending"&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("button",{onClick:()=>{confirm("Share this post now?")&&y.mutate(C.id)},disabled:y.isPending,className:"p-2 text-green-500 hover:text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Share Now",children:n.jsx(Jn,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>{confirm("Delete this post?")&&g.mutate(C.id)},disabled:g.isPending,className:"p-2 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:n.jsx(ms,{className:"h-4 w-4"})})]})]})},C.id))})})]})]})]}),s&&n.jsx(Iue,{profiles:b,selectedProfiles:t.length>0?t:[(N=b[0])==null?void 0:N.id],onClose:()=>a(!1),onSuccess:()=>{a(!1),e.invalidateQueries({queryKey:["admin","social","posts"]})}})]}):n.jsxs("div",{className:"min-h-screen bg-cream-50",children:[n.jsx(_e,{}),n.jsx(dt,{}),n.jsx("div",{className:"max-w-2xl mx-auto px-4 py-12",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 p-8 text-center",children:[n.jsx("div",{className:"w-16 h-16 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(dh,{className:"h-8 w-8 text-amber-600"})}),n.jsx("h1",{className:"text-2xl font-display font-bold text-neutral-800 mb-2",children:"Social Media Not Configured"}),n.jsx("p",{className:"text-neutral-600 mb-6",children:"Choose how you want to manage social media posts."}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-6",children:[n.jsxs("div",{className:"bg-orange-50 rounded-xl p-6 text-left border border-orange-200",children:[n.jsxs("h3",{className:"font-semibold text-neutral-800 mb-2 flex items-center gap-2",children:[n.jsx("span",{className:"text-orange-500",children:""})," Zapier + Buffer"]}),n.jsx("p",{className:"text-sm text-neutral-600 mb-4",children:"Use Zapier to connect to Buffer. Easy setup, no coding required."}),n.jsxs("ol",{className:"space-y-1 text-xs text-neutral-500 mb-4",children:[n.jsx("li",{children:"1. Create a Zapier webhook trigger"}),n.jsx("li",{children:"2. Connect it to Buffer"}),n.jsx("li",{children:"3. Add webhook URL to env"})]}),n.jsxs("a",{href:"https://zapier.com/apps/buffer/integrations/webhook",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 text-sm",children:[n.jsx(Ad,{className:"h-3 w-3"}),"Setup Zapier"]})]}),n.jsxs("div",{className:"bg-blue-50 rounded-xl p-6 text-left border border-blue-200",children:[n.jsxs("h3",{className:"font-semibold text-neutral-800 mb-2 flex items-center gap-2",children:[n.jsx("span",{className:"text-blue-500",children:""})," Direct Buffer API"]}),n.jsx("p",{className:"text-sm text-neutral-600 mb-4",children:"Connect directly to Buffer for more control and features."}),n.jsxs("ol",{className:"space-y-1 text-xs text-neutral-500 mb-4",children:[n.jsx("li",{children:"1. Create Buffer developer app"}),n.jsx("li",{children:"2. Get access token"}),n.jsx("li",{children:"3. Add to BUFFER_ACCESS_TOKEN"})]}),n.jsxs("a",{href:"https://buffer.com/developers/apps",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 text-sm",children:[n.jsx(Ad,{className:"h-3 w-3"}),"Setup Buffer"]})]})]}),n.jsxs("p",{className:"text-xs text-neutral-400",children:["Add ",n.jsx("code",{className:"bg-neutral-100 px-1 rounded",children:"VITE_ZAPIER_WEBHOOK_URL"})," or ",n.jsx("code",{className:"bg-neutral-100 px-1 rounded",children:"BUFFER_ACCESS_TOKEN"})," to your environment"]})]})})]})}function Iue({profiles:e,selectedProfiles:t,onClose:r,onSuccess:s}){const[a,i]=$.useState(""),[o,l]=$.useState(t),[u,d]=$.useState(""),[p,f]=$.useState(!1),[m,x]=$.useState(""),[y,g]=$.useState(!1),[b,_]=$.useState(null),w=async()=>{if(!a.trim()||o.length===0){_("Please enter text and select at least one profile");return}g(!0),_(null);try{await Xl("/api/admin/social/posts",{method:"POST",body:JSON.stringify({text:a,profile_ids:o,scheduled_at:u||void 0,now:p,media:m?{photo:m}:void 0})}),s()}catch(C){_(C instanceof Error?C.message:"Failed to create post")}finally{g(!1)}},S={twitter:280,facebook:63206,instagram:2200,linkedin:3e3},j=e.filter(C=>o.includes(C.id)).map(C=>C.service),N=Math.min(...j.map(C=>S[C]||2048));return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-hidden",children:[n.jsxs("div",{className:"p-4 border-b border-cream-200 flex items-center justify-between",children:[n.jsx("h2",{className:"text-lg font-display font-bold text-neutral-800",children:"Create Post"}),n.jsx("button",{onClick:r,className:"p-2 text-neutral-400 hover:text-neutral-600 hover:bg-cream-100 rounded-lg",children:n.jsx(It,{className:"h-5 w-5"})})]}),n.jsxs("div",{className:"p-4 space-y-4 max-h-[calc(90vh-140px)] overflow-y-auto",children:[b&&n.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-xl text-red-700 text-sm flex items-center gap-2",children:[n.jsx(yt,{className:"h-4 w-4"}),b]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:["Post Content (",a.length,"/",N,")"]}),n.jsx("textarea",{value:a,onChange:C=>i(C.target.value.slice(0,N)),placeholder:"What's happening?",rows:5,className:"w-full px-4 py-3 border border-cream-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-burgundy-500 resize-none"}),a.length>N*.9&&n.jsxs("p",{className:"text-xs text-amber-600 mt-1",children:["Approaching character limit for ",j.find(C=>S[C]===N)]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Image URL (optional)"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"url",value:m,onChange:C=>x(C.target.value),placeholder:"https://...",className:"flex-1 px-4 py-2 border border-cream-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-burgundy-500"}),m&&n.jsx("button",{onClick:()=>x(""),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg",children:n.jsx(It,{className:"h-4 w-4"})})]}),m&&n.jsx("div",{className:"mt-2 rounded-xl overflow-hidden border border-cream-200",children:n.jsx("img",{src:m,alt:"Preview",className:"max-h-40 object-cover",onError:C=>{C.target.style.display="none"}})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Post to"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:e.map(C=>{const E=UP[C.service]||px,T=BP[C.service]||"bg-neutral-100 text-neutral-600",I=o.includes(C.id);return n.jsxs("button",{onClick:()=>{I&&o.length>1?l(o.filter(A=>A!==C.id)):I||l([...o,C.id])},className:`flex items-center gap-2 px-3 py-2 rounded-xl border transition-all ${I?"border-burgundy-500 bg-burgundy-50":"border-cream-200 hover:border-cream-300"}`,children:[n.jsx("div",{className:`p-1 rounded ${T}`,children:n.jsx(E,{className:"h-3 w-3"})}),n.jsx("span",{className:"text-sm",children:C.formattedUsername})]},C.id)})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"When to post"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:p,onChange:C=>{f(C.target.checked),C.target.checked&&d("")},className:"rounded border-cream-300 text-burgundy-500 focus:ring-burgundy-500"}),n.jsx("span",{className:"text-sm text-neutral-700",children:"Post immediately"})]}),!p&&n.jsx("input",{type:"datetime-local",value:u,onChange:C=>d(C.target.value),className:"w-full px-4 py-2 border border-cream-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-burgundy-500"}),!p&&!u&&n.jsx("p",{className:"text-xs text-neutral-500",children:"Leave empty to add to Buffer's queue"})]})]})]}),n.jsxs("div",{className:"p-4 border-t border-cream-200 flex items-center justify-end gap-3",children:[n.jsx("button",{onClick:r,className:"px-4 py-2 text-neutral-600 hover:bg-cream-100 rounded-xl transition-colors",children:"Cancel"}),n.jsxs("button",{onClick:w,disabled:y||!a.trim()||o.length===0,className:"flex items-center gap-2 px-4 py-2 bg-burgundy-500 text-white rounded-xl hover:bg-burgundy-600 disabled:opacity-50 transition-colors",children:[y?n.jsx(be,{className:"h-4 w-4 animate-spin"}):p?n.jsx(Jn,{className:"h-4 w-4"}):n.jsx(Nt,{className:"h-4 w-4"}),y?"Posting...":p?"Post Now":"Schedule"]})]})]})})}function Lue(){const e=at(),[t,r]=$.useState(null),[s,a]=$.useState(!1),[i,o]=$.useState(""),[l,u]=$.useState(""),[d,p]=$.useState("Getting Started"),{data:f,isLoading:m}=ie({queryKey:["admin","faqs"],queryFn:async()=>{const{data:R,error:O}=await X.from("site_copy").select("*").eq("page","faq").order("sort_order",{ascending:!0});if(O)throw O;return R}}),{data:x,isLoading:y}=ie({queryKey:["admin","faq-categories"],queryFn:async()=>{const{data:R,error:O}=await X.from("site_copy").select("*").eq("page","faq_categories").eq("is_active",!0).order("sort_order",{ascending:!0});if(O)throw O;return R||[]}});$.useEffect(()=>{if(x&&x.length===0){const R=["Getting Started","Gameplay","Leagues","Scoring","Support","Other"];Promise.all(R.map((O,M)=>X.from("site_copy").insert({page:"faq_categories",key:`faq_category_${O.toLowerCase().replace(/\s+/g,"_")}`,content:O,sort_order:M,is_active:!0}))).then(()=>{e.invalidateQueries({queryKey:["admin","faq-categories"]})})}},[x,e]);const g=ke({mutationFn:async()=>{const R=`faq.${i.toLowerCase().replace(/[^a-z0-9]+/g,"_").slice(0,50)}`,O=(f==null?void 0:f.reduce((B,U)=>Math.max(B,U.sort_order||0),0))||0,{error:M}=await X.from("site_copy").insert({key:R,page:"faq",section:d,content_type:"html",content:l,description:i,sort_order:O+1,is_active:!0});if(M)throw M},onSuccess:()=>{e.invalidateQueries({queryKey:["admin","faqs"]}),C()}}),b=ke({mutationFn:async({id:R,updates:O})=>{const{error:M}=await X.from("site_copy").update(O).eq("id",R);if(M)throw M},onSuccess:()=>{e.invalidateQueries({queryKey:["admin","faqs"]}),r(null)}}),_=ke({mutationFn:async R=>{const{error:O}=await X.from("site_copy").delete().eq("id",R);if(O)throw O},onSuccess:()=>{e.invalidateQueries({queryKey:["admin","faqs"]})}}),w=ke({mutationFn:async({id:R,direction:O})=>{if(!f)return;const M=f.findIndex(W=>W.id===R);if(M===-1)return;const B=O==="up"?M-1:M+1;if(B<0||B>=f.length)return;const U=f[M],Y=f[B];await X.from("site_copy").update({sort_order:Y.sort_order}).eq("id",U.id),await X.from("site_copy").update({sort_order:U.sort_order}).eq("id",Y.id)},onSuccess:()=>{e.invalidateQueries({queryKey:["admin","faqs"]})}}),S=ke({mutationFn:async R=>{const O=(x==null?void 0:x.reduce((B,U)=>Math.max(B,U.sort_order||0),0))||0,{error:M}=await X.from("site_copy").insert({page:"faq_categories",key:`faq_category_${Date.now()}`,content:R,sort_order:O+1,is_active:!0});if(M)throw M},onSuccess:()=>{e.invalidateQueries({queryKey:["admin","faq-categories"]})}}),j=ke({mutationFn:async({id:R,name:O})=>{const{error:M}=await X.from("site_copy").update({content:O}).eq("id",R);if(M)throw M},onSuccess:()=>{e.invalidateQueries({queryKey:["admin","faq-categories"]})}}),N=ke({mutationFn:async R=>{var U;const O=(U=x==null?void 0:x.find(Y=>Y.id===R))==null?void 0:U.content,M=(f==null?void 0:f.filter(Y=>Y.section===O).length)||0;if(M>0)throw new Error(`Cannot delete category with ${M} FAQs. Reassign them first.`);const{error:B}=await X.from("site_copy").delete().eq("id",R);if(B)throw B},onSuccess:()=>{e.invalidateQueries({queryKey:["admin","faq-categories"]})}}),C=()=>{o(""),u(""),p("Getting Started"),a(!1),r(null)},E=R=>{r(R.id),o(R.description||""),u(R.content),p(R.section||"Getting Started")},T=$.useMemo(()=>({toolbar:[["bold","italic","underline"],[{list:"ordered"},{list:"bullet"}],["link"],["clean"]]}),[]),I=["bold","italic","underline","list","bullet","link"],A=f==null?void 0:f.reduce((R,O)=>{const M=O.section||"Other";return R[M]||(R[M]=[]),R[M].push(O),R},{});return n.jsxs("div",{className:"min-h-screen bg-cream-50",children:[n.jsx(dt,{}),n.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-8",children:[n.jsxs("div",{className:"flex items-center justify-between mb-8",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-12 h-12 bg-burgundy-100 rounded-xl flex items-center justify-center",children:n.jsx(qc,{className:"h-6 w-6 text-burgundy-600"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-display font-bold text-neutral-800",children:"FAQ Manager"}),n.jsx("p",{className:"text-sm text-neutral-500",children:"Create and manage FAQ content"})]})]}),!s&&n.jsxs("button",{onClick:()=>a(!0),className:"flex items-center gap-2 bg-burgundy-500 text-white px-4 py-2 rounded-xl hover:bg-burgundy-600 transition-colors",children:[n.jsx(tr,{className:"h-4 w-4"}),"Add FAQ"]})]}),(s||t)&&n.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 p-6 mb-8",children:[n.jsx("h2",{className:"text-lg font-semibold text-neutral-800 mb-4",children:s?"New FAQ":"Edit FAQ"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Question"}),n.jsx("input",{type:"text",value:i,onChange:R=>o(R.target.value),className:"w-full px-4 py-2 border border-cream-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-burgundy-500",placeholder:"How do I join a league?"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Category"}),n.jsx("select",{value:d,onChange:R=>p(R.target.value),className:"w-full px-4 py-2 border border-cream-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-burgundy-500",children:x==null?void 0:x.map(R=>n.jsx("option",{value:R.content,children:R.content},R.id))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Answer"}),n.jsx("div",{className:"border border-cream-200 rounded-xl overflow-hidden",children:n.jsx(iu,{theme:"snow",value:l,onChange:u,modules:T,formats:I,className:"bg-white",style:{minHeight:"150px"}})})]}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsxs("button",{onClick:C,className:"px-4 py-2 bg-cream-100 text-neutral-700 rounded-xl hover:bg-cream-200 transition-colors",children:[n.jsx(It,{className:"h-4 w-4 inline mr-1"}),"Cancel"]}),n.jsxs("button",{onClick:()=>{t?b.mutate({id:t,updates:{content:l,description:i,section:d}}):g.mutate()},disabled:!i||!l,className:"px-4 py-2 bg-green-500 text-white rounded-xl hover:bg-green-600 transition-colors disabled:opacity-50",children:[n.jsx(Ar,{className:"h-4 w-4 inline mr-1"}),t?"Save Changes":"Create FAQ"]})]})]})]}),!s&&!t&&n.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 p-6 mb-8",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-lg font-semibold text-neutral-800",children:"Categories"}),n.jsxs("button",{onClick:()=>{const R=prompt("Enter category name:");R&&S.mutate(R)},className:"flex items-center gap-2 text-burgundy-500 hover:text-burgundy-600 transition-colors",children:[n.jsx(tr,{className:"h-4 w-4"}),"Add Category"]})]}),y?n.jsx("div",{className:"flex justify-center py-4",children:n.jsx(be,{className:"h-5 w-5 text-burgundy-500 animate-spin"})}):n.jsxs("div",{className:"flex flex-wrap gap-2",children:[x==null?void 0:x.map(R=>n.jsxs("div",{className:"flex items-center gap-1 bg-cream-100 px-3 py-1.5 rounded-lg",children:[n.jsx("span",{className:"text-sm text-neutral-700",children:R.content}),n.jsx("button",{onClick:()=>{const O=prompt("Edit category name:",R.content);O&&O!==R.content&&j.mutate({id:R.id,name:O})},className:"text-neutral-400 hover:text-burgundy-500 transition-colors p-1",title:"Edit category",children:n.jsx(tl,{className:"h-3 w-3"})}),n.jsx("button",{onClick:()=>{confirm(`Delete category "${R.content}"?`)&&N.mutate(R.id).catch(O=>alert(O.message))},className:"text-neutral-400 hover:text-red-500 transition-colors p-1",title:"Delete category",children:n.jsx(It,{className:"h-3 w-3"})})]},R.id)),(x==null?void 0:x.length)===0&&n.jsx("p",{className:"text-sm text-neutral-500",children:"No categories yet. Add one to get started."})]})]}),m?n.jsx("div",{className:"flex justify-center py-12",children:n.jsx(be,{className:"h-8 w-8 text-burgundy-500 animate-spin"})}):n.jsxs("div",{className:"space-y-6",children:[A&&Object.entries(A).map(([R,O])=>n.jsxs("div",{children:[n.jsxs("h3",{className:"text-sm font-semibold text-neutral-500 uppercase tracking-wider mb-3",children:[R," (",O.length,")"]}),n.jsx("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 divide-y divide-cream-100",children:O.map((M,B)=>n.jsxs("div",{className:"p-4 flex items-start gap-4 hover:bg-cream-50 transition-colors",children:[n.jsxs("div",{className:"flex flex-col gap-1 pt-1",children:[n.jsx("button",{onClick:()=>w.mutate({id:M.id,direction:"up"}),disabled:B===0,className:"p-1 text-neutral-400 hover:text-neutral-600 disabled:opacity-30",children:n.jsx(fs,{className:"h-4 w-4"})}),n.jsx(cx,{className:"h-4 w-4 text-neutral-300"}),n.jsx("button",{onClick:()=>w.mutate({id:M.id,direction:"down"}),disabled:B===O.length-1,className:"p-1 text-neutral-400 hover:text-neutral-600 disabled:opacity-30",children:n.jsx(en,{className:"h-4 w-4"})})]}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-neutral-800 mb-1",children:M.description}),n.jsx("div",{className:"text-sm text-neutral-500 line-clamp-2 prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:M.content}})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>E(M),className:"p-2 text-neutral-400 hover:text-burgundy-500 transition-colors",children:n.jsx(tl,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>{confirm("Delete this FAQ?")&&_.mutate(M.id)},className:"p-2 text-neutral-400 hover:text-red-500 transition-colors",children:n.jsx(ms,{className:"h-4 w-4"})})]})]},M.id))})]},R)),(!f||f.length===0)&&n.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 p-12 text-center",children:[n.jsx(qc,{className:"h-12 w-12 text-neutral-300 mx-auto mb-4"}),n.jsx("p",{className:"text-neutral-500",children:'No FAQs yet. Click "Add FAQ" to create one.'})]})]})]})]})}class Mue extends $.Component{constructor(r){super(r);Pl(this,"handleReload",()=>{window.location.reload()});Pl(this,"handleGoBack",()=>{window.location.href="/admin"});Pl(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null})});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(r){return{hasError:!0,error:r,errorInfo:null}}componentDidCatch(r,s){this.setState({errorInfo:s}),console.error("Admin Error Boundary caught error:",r,s),Ct(r,{contexts:{react:{componentStack:s.componentStack}},tags:{boundary:"admin",area:"admin-panel"},level:"error"})}render(){return this.state.hasError?n.jsxs(n.Fragment,{children:[n.jsx(_e,{}),n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated p-8 max-w-lg w-full border border-cream-200",children:[n.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6",children:n.jsx(Tt,{className:"h-8 w-8 text-red-500"})}),n.jsx("h1",{className:"text-2xl font-display font-bold text-neutral-800 mb-2 text-center",children:"Admin Error"}),n.jsx("p",{className:"text-neutral-500 mb-6 text-center",children:"Something went wrong while loading this admin page. This error has been logged for review."}),!1,n.jsxs("div",{className:"flex flex-col gap-3",children:[n.jsxs("button",{onClick:this.handleReset,className:"btn btn-primary w-full flex items-center justify-center gap-2",children:[n.jsx(an,{className:"h-4 w-4"}),"Try Again"]}),n.jsxs("button",{onClick:this.handleGoBack,className:"btn btn-secondary w-full flex items-center justify-center gap-2",children:[n.jsx(ht,{className:"h-4 w-4"}),"Back to Admin Dashboard"]})]})]})})]}):this.props.children}}function Due(){const{isAdmin:e}=Et(),{isEditMode:t,toggleEditMode:r}=ol();return e?n.jsxs(n.Fragment,{children:[t&&n.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-[90] bg-burgundy-600 text-white text-center py-2 text-sm font-medium shadow-lg",children:"EDIT MODE ON - Click any underlined text to edit"}),n.jsx("button",{onClick:r,className:`fixed bottom-24 right-4 z-[100] flex items-center gap-2 px-4 py-3 rounded-full shadow-xl transition-all ${t?"bg-burgundy-500 text-white ring-4 ring-burgundy-300 animate-pulse":"bg-white text-neutral-700 hover:bg-cream-50 border-2 border-neutral-300"}`,title:t?"Exit edit mode":"Enter edit mode",children:t?n.jsxs(n.Fragment,{children:[n.jsx(Pne,{className:"h-5 w-5"}),n.jsx("span",{className:"font-medium",children:"Exit Edit"})]}):n.jsxs(n.Fragment,{children:[n.jsx(ru,{className:"h-5 w-5"}),n.jsx("span",{className:"font-medium",children:"Edit Page"})]})})]}):null}const Vt=e=>n.jsx(Mue,{children:n.jsx(e,{})});function $ue(){return n.jsx(hP,{children:n.jsx(zre,{children:n.jsxs(kee,{children:[n.jsxs(TM,{children:[n.jsx(Te,{path:"/",element:n.jsx(Yre,{})}),n.jsx(Te,{path:"/login",element:n.jsx(Jre,{})}),n.jsx(Te,{path:"/signup",element:n.jsx(zE,{})}),n.jsx(Te,{path:"/register",element:n.jsx(zE,{})}),n.jsx(Te,{path:"/how-to-play",element:n.jsx(eie,{})}),n.jsx(Te,{path:"/scoring",element:n.jsx(ZE,{})}),n.jsx(Te,{path:"/scoring-rules",element:n.jsx(ZE,{})}),n.jsx(Te,{path:"/timeline",element:n.jsx(nie,{})}),n.jsx(Te,{path:"/sms",element:n.jsx(Gie,{})}),n.jsx(Te,{path:"/l/:code",element:n.jsx(Xie,{})}),n.jsx(Te,{path:"/contact",element:n.jsx(ioe,{})}),n.jsx(Te,{path:"/faq",element:n.jsx(ooe,{})}),n.jsx(Te,{path:"/trivia",element:n.jsx(_oe,{})}),n.jsx(Te,{path:"/castaways",element:n.jsx(soe,{})}),n.jsx(Te,{path:"/castaways/:id",element:n.jsx(aoe,{})}),n.jsx(Te,{path:"/privacy",element:n.jsx(foe,{})}),n.jsx(Te,{path:"/terms",element:n.jsx(moe,{})}),n.jsx(Te,{path:"/results/:weekNumber",element:n.jsx(Oie,{})}),n.jsxs(Te,{element:n.jsx(Ure,{}),children:[n.jsx(Te,{path:"/profile/setup",element:n.jsx(fie,{})}),n.jsxs(Te,{element:n.jsx(Fre,{}),children:[n.jsx(Te,{path:"/dashboard",element:n.jsx(Cae,{})}),n.jsx(Te,{path:"/profile",element:n.jsx(die,{})}),n.jsx(Te,{path:"/leagues/:leagueId/leaderboard",element:n.jsx(Xae,{})}),n.jsx(Te,{path:"/leaderboard",element:n.jsx(eoe,{})}),n.jsx(Te,{path:"/leagues",element:n.jsx(toe,{})})]}),n.jsx(Te,{path:"/join",element:n.jsx(Js,{to:"/signup",replace:!0})}),n.jsx(Te,{path:"/join/:code",element:n.jsx(rie,{})}),n.jsx(Te,{path:"/leagues/create",element:n.jsx($ie,{})}),n.jsx(Te,{path:"/leagues/:id",element:n.jsx(Eie,{})}),n.jsx(Te,{path:"/leagues/:leagueId/draft",element:n.jsx(Bae,{})}),n.jsx(Te,{path:"/leagues/:leagueId/draft/settings",element:n.jsx(uoe,{})}),n.jsx(Te,{path:"/draft/rankings",element:n.jsx(doe,{})}),n.jsx(Te,{path:"/leagues/:leagueId/pick",element:n.jsx(Jae,{})}),n.jsx(Te,{path:"/leagues/:leagueId/team",element:n.jsx(Cie,{})}),n.jsx(Te,{path:"/leagues/:leagueId/settings",element:n.jsx(Wie,{})}),n.jsx(Te,{path:"/leagues/:leagueId/invite",element:n.jsx(hoe,{})}),n.jsx(Te,{path:"/leagues/:leagueId/history",element:n.jsx(loe,{})}),n.jsx(Te,{path:"/leagues/:leagueId/episodes/:episodeId",element:n.jsx(Rie,{})}),n.jsx(Te,{path:"/profile/payments",element:n.jsx(Jie,{})}),n.jsx(Te,{path:"/profile/notifications",element:n.jsx(coe,{})}),n.jsx(Te,{path:"/seasons/:seasonId/schedule",element:n.jsx(Vie,{})}),n.jsx(Te,{path:"/seasons/:seasonId/castaways",element:n.jsx(Qie,{})})]}),n.jsxs(Te,{element:n.jsx(Bre,{}),children:[n.jsx(Te,{path:"/admin",element:n.jsx(Js,{to:"/admin/command-center",replace:!0})}),n.jsx(Te,{path:"/admin/command-center",element:Vt(dle)}),n.jsx(Te,{path:"/admin/dashboard",element:Vt(qoe)}),n.jsx(Te,{path:"/admin/picks",element:Vt(fle)}),n.jsx(Te,{path:"/admin/drafts",element:Vt(ple)}),n.jsx(Te,{path:"/admin/scoring",element:Vt(v5)}),n.jsx(Te,{path:"/admin/castaways",element:Vt(aC)}),n.jsx(Te,{path:"/admin/seasons",element:Vt(iC)}),n.jsx(Te,{path:"/admin/seasons/:seasonId",element:Vt(iC)}),n.jsx(Te,{path:"/admin/seasons/:seasonId/episodes",element:Vt(Vce)}),n.jsx(Te,{path:"/admin/seasons/:seasonId/castaways",element:Vt(aC)}),n.jsx(Te,{path:"/admin/episodes/:episodeId/scoring",element:Vt(v5)}),n.jsx(Te,{path:"/admin/leagues",element:Vt(Yce)}),n.jsx(Te,{path:"/admin/users",element:Vt(Xce)}),n.jsx(Te,{path:"/admin/payments",element:Vt(Zce)}),n.jsx(Te,{path:"/admin/jobs",element:Vt(rue)}),n.jsx(Te,{path:"/admin/global",element:Vt(sue)}),n.jsx(Te,{path:"/admin/announcements",element:Vt(lue)}),n.jsx(Te,{path:"/admin/scoring-rules",element:Vt(cue)}),n.jsx(Te,{path:"/admin/scoring/grid",element:Vt(due)}),n.jsx(Te,{path:"/admin/stats",element:Vt(pue)}),n.jsx(Te,{path:"/admin/analytics",element:n.jsx(Js,{to:"/admin/stats",replace:!0})}),n.jsx(Te,{path:"/admin/email-queue",element:Vt(fue)}),n.jsx(Te,{path:"/admin/health",element:Vt(gue)}),n.jsx(Te,{path:"/admin/content",element:Vt(vue)}),n.jsx(Te,{path:"/admin/campaigns",element:Vt(Tue)}),n.jsx(Te,{path:"/admin/social",element:Vt(Oue)}),n.jsx(Te,{path:"/admin/faq",element:Vt(Lue)}),n.jsx(Te,{path:"/admin/fun-stats",element:n.jsx(Noe,{})}),n.jsx(Te,{path:"/admin/fun-stats/players",element:n.jsx(Roe,{})}),n.jsx(Te,{path:"/admin/fun-stats/castaways",element:n.jsx(Aoe,{})}),n.jsx(Te,{path:"/admin/fun-stats/leagues",element:n.jsx(Poe,{})})]}),n.jsx(Te,{path:"*",element:n.jsx(Zae,{})})]}),n.jsx(Due,{})]})})})}function que(){const{pathname:e}=Gr();return $.useEffect(()=>{"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual")},[]),$.useLayoutEffect(()=>{window.scrollTo({top:0,left:0,behavior:"instant"})},[e]),null}See();const uC=(e,t)=>{if(e>=3)return!1;if(t instanceof TypeError&&t.message.includes("fetch"))return!0;if(t instanceof Error){const r=t.message.toLowerCase();if(r.includes("network")||r.includes("timeout")||r.includes("503")||r.includes("502")||r.includes("504"))return!0}return!1},dC=e=>Math.min(1e3*Math.pow(2,e),8e3),Fue=new yL({defaultOptions:{queries:{staleTime:1e3*60,retry:uC,retryDelay:dC},mutations:{retry:uC,retryDelay:dC}}});QI.createRoot(document.getElementById("root")).render(n.jsx($.StrictMode,{children:n.jsx(hP,{children:n.jsx(bL,{client:Fue,children:n.jsxs(e8,{children:[n.jsx(que,{}),n.jsx($ue,{})]})})})}));export{iu as R,n as j,$ as r};
