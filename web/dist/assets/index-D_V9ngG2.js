var DI=Object.defineProperty;var Pj=e=>{throw TypeError(e)};var FI=(e,t,n)=>t in e?DI(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ul=(e,t,n)=>FI(e,typeof t!="symbol"?t+"":t,n),Nx=(e,t,n)=>t.has(e)||Pj("Cannot "+n);var q=(e,t,n)=>(Nx(e,t,"read from private field"),n?n.call(e):t.get(e)),Re=(e,t,n)=>t.has(e)?Pj("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),xe=(e,t,n,s)=>(Nx(e,t,"write to private field"),s?s.call(e,n):t.set(e,n),n),Je=(e,t,n)=>(Nx(e,t,"access private method"),n);var qh=(e,t,n,s)=>({set _(a){xe(e,t,a,n)},get _(){return q(e,t,s)}});function UI(e,t){for(var n=0;n<t.length;n++){const s=t[n];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(s,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();function qI(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Sx={exports:{}},mu={},kx={exports:{}},et={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Aj;function BI(){if(Aj)return et;Aj=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.iterator;function g($){return $===null||typeof $!="object"?null:($=m&&$[m]||$["@@iterator"],typeof $=="function"?$:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,w={};function v($,J,le){this.props=$,this.context=J,this.refs=w,this.updater=le||y}v.prototype.isReactComponent={},v.prototype.setState=function($,J){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,J,"setState")},v.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function j(){}j.prototype=v.prototype;function E($,J,le){this.props=$,this.context=J,this.refs=w,this.updater=le||y}var k=E.prototype=new j;k.constructor=E,b(k,v.prototype),k.isPureReactComponent=!0;var S=Array.isArray,P=Object.prototype.hasOwnProperty,A={current:null},T={key:!0,ref:!0,__self:!0,__source:!0};function L($,J,le){var ve,Ee={},De=null,Fe=null;if(J!=null)for(ve in J.ref!==void 0&&(Fe=J.ref),J.key!==void 0&&(De=""+J.key),J)P.call(J,ve)&&!T.hasOwnProperty(ve)&&(Ee[ve]=J[ve]);var re=arguments.length-2;if(re===1)Ee.children=le;else if(1<re){for(var me=Array(re),Le=0;Le<re;Le++)me[Le]=arguments[Le+2];Ee.children=me}if($&&$.defaultProps)for(ve in re=$.defaultProps,re)Ee[ve]===void 0&&(Ee[ve]=re[ve]);return{$$typeof:e,type:$,key:De,ref:Fe,props:Ee,_owner:A.current}}function H($,J){return{$$typeof:e,type:$.type,key:J,ref:$.ref,props:$.props,_owner:$._owner}}function R($){return typeof $=="object"&&$!==null&&$.$$typeof===e}function M($){var J={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(le){return J[le]})}var O=/\/+/g;function F($,J){return typeof $=="object"&&$!==null&&$.key!=null?M(""+$.key):J.toString(36)}function K($,J,le,ve,Ee){var De=typeof $;(De==="undefined"||De==="boolean")&&($=null);var Fe=!1;if($===null)Fe=!0;else switch(De){case"string":case"number":Fe=!0;break;case"object":switch($.$$typeof){case e:case t:Fe=!0}}if(Fe)return Fe=$,Ee=Ee(Fe),$=ve===""?"."+F(Fe,0):ve,S(Ee)?(le="",$!=null&&(le=$.replace(O,"$&/")+"/"),K(Ee,J,le,"",function(Le){return Le})):Ee!=null&&(R(Ee)&&(Ee=H(Ee,le+(!Ee.key||Fe&&Fe.key===Ee.key?"":(""+Ee.key).replace(O,"$&/")+"/")+$)),J.push(Ee)),1;if(Fe=0,ve=ve===""?".":ve+":",S($))for(var re=0;re<$.length;re++){De=$[re];var me=ve+F(De,re);Fe+=K(De,J,le,me,Ee)}else if(me=g($),typeof me=="function")for($=me.call($),re=0;!(De=$.next()).done;)De=De.value,me=ve+F(De,re++),Fe+=K(De,J,le,me,Ee);else if(De==="object")throw J=String($),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.");return Fe}function ae($,J,le){if($==null)return $;var ve=[],Ee=0;return K($,ve,"","",function(De){return J.call(le,De,Ee++)}),ve}function X($){if($._status===-1){var J=$._result;J=J(),J.then(function(le){($._status===0||$._status===-1)&&($._status=1,$._result=le)},function(le){($._status===0||$._status===-1)&&($._status=2,$._result=le)}),$._status===-1&&($._status=0,$._result=J)}if($._status===1)return $._result.default;throw $._result}var ee={current:null},D={transition:null},te={ReactCurrentDispatcher:ee,ReactCurrentBatchConfig:D,ReactCurrentOwner:A};function V(){throw Error("act(...) is not supported in production builds of React.")}return et.Children={map:ae,forEach:function($,J,le){ae($,function(){J.apply(this,arguments)},le)},count:function($){var J=0;return ae($,function(){J++}),J},toArray:function($){return ae($,function(J){return J})||[]},only:function($){if(!R($))throw Error("React.Children.only expected to receive a single React element child.");return $}},et.Component=v,et.Fragment=n,et.Profiler=a,et.PureComponent=E,et.StrictMode=s,et.Suspense=d,et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=te,et.act=V,et.cloneElement=function($,J,le){if($==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+$+".");var ve=b({},$.props),Ee=$.key,De=$.ref,Fe=$._owner;if(J!=null){if(J.ref!==void 0&&(De=J.ref,Fe=A.current),J.key!==void 0&&(Ee=""+J.key),$.type&&$.type.defaultProps)var re=$.type.defaultProps;for(me in J)P.call(J,me)&&!T.hasOwnProperty(me)&&(ve[me]=J[me]===void 0&&re!==void 0?re[me]:J[me])}var me=arguments.length-2;if(me===1)ve.children=le;else if(1<me){re=Array(me);for(var Le=0;Le<me;Le++)re[Le]=arguments[Le+2];ve.children=re}return{$$typeof:e,type:$.type,key:Ee,ref:De,props:ve,_owner:Fe}},et.createContext=function($){return $={$$typeof:l,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},$.Provider={$$typeof:i,_context:$},$.Consumer=$},et.createElement=L,et.createFactory=function($){var J=L.bind(null,$);return J.type=$,J},et.createRef=function(){return{current:null}},et.forwardRef=function($){return{$$typeof:u,render:$}},et.isValidElement=R,et.lazy=function($){return{$$typeof:p,_payload:{_status:-1,_result:$},_init:X}},et.memo=function($,J){return{$$typeof:h,type:$,compare:J===void 0?null:J}},et.startTransition=function($){var J=D.transition;D.transition={};try{$()}finally{D.transition=J}},et.unstable_act=V,et.useCallback=function($,J){return ee.current.useCallback($,J)},et.useContext=function($){return ee.current.useContext($)},et.useDebugValue=function(){},et.useDeferredValue=function($){return ee.current.useDeferredValue($)},et.useEffect=function($,J){return ee.current.useEffect($,J)},et.useId=function(){return ee.current.useId()},et.useImperativeHandle=function($,J,le){return ee.current.useImperativeHandle($,J,le)},et.useInsertionEffect=function($,J){return ee.current.useInsertionEffect($,J)},et.useLayoutEffect=function($,J){return ee.current.useLayoutEffect($,J)},et.useMemo=function($,J){return ee.current.useMemo($,J)},et.useReducer=function($,J,le){return ee.current.useReducer($,J,le)},et.useRef=function($){return ee.current.useRef($)},et.useState=function($){return ee.current.useState($)},et.useSyncExternalStore=function($,J,le){return ee.current.useSyncExternalStore($,J,le)},et.useTransition=function(){return ee.current.useTransition()},et.version="18.3.1",et}var Oj;function Jy(){return Oj||(Oj=1,kx.exports=BI()),kx.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mj;function HI(){if(Mj)return mu;Mj=1;var e=Jy(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function l(u,d,h){var p,m={},g=null,y=null;h!==void 0&&(g=""+h),d.key!==void 0&&(g=""+d.key),d.ref!==void 0&&(y=d.ref);for(p in d)s.call(d,p)&&!i.hasOwnProperty(p)&&(m[p]=d[p]);if(u&&u.defaultProps)for(p in d=u.defaultProps,d)m[p]===void 0&&(m[p]=d[p]);return{$$typeof:t,type:u,key:g,ref:y,props:m,_owner:a.current}}return mu.Fragment=n,mu.jsx=l,mu.jsxs=l,mu}var Lj;function zI(){return Lj||(Lj=1,Sx.exports=HI()),Sx.exports}var r=zI(),C=Jy(),Bh={},Ex={exports:{}},nr={},Cx={exports:{}},Tx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $j;function WI(){return $j||($j=1,(function(e){function t(D,te){var V=D.length;D.push(te);e:for(;0<V;){var $=V-1>>>1,J=D[$];if(0<a(J,te))D[$]=te,D[V]=J,V=$;else break e}}function n(D){return D.length===0?null:D[0]}function s(D){if(D.length===0)return null;var te=D[0],V=D.pop();if(V!==te){D[0]=V;e:for(var $=0,J=D.length,le=J>>>1;$<le;){var ve=2*($+1)-1,Ee=D[ve],De=ve+1,Fe=D[De];if(0>a(Ee,V))De<J&&0>a(Fe,Ee)?(D[$]=Fe,D[De]=V,$=De):(D[$]=Ee,D[ve]=V,$=ve);else if(De<J&&0>a(Fe,V))D[$]=Fe,D[De]=V,$=De;else break e}}return te}function a(D,te){var V=D.sortIndex-te.sortIndex;return V!==0?V:D.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,u=l.now();e.unstable_now=function(){return l.now()-u}}var d=[],h=[],p=1,m=null,g=3,y=!1,b=!1,w=!1,v=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(D){for(var te=n(h);te!==null;){if(te.callback===null)s(h);else if(te.startTime<=D)s(h),te.sortIndex=te.expirationTime,t(d,te);else break;te=n(h)}}function S(D){if(w=!1,k(D),!b)if(n(d)!==null)b=!0,X(P);else{var te=n(h);te!==null&&ee(S,te.startTime-D)}}function P(D,te){b=!1,w&&(w=!1,j(L),L=-1),y=!0;var V=g;try{for(k(te),m=n(d);m!==null&&(!(m.expirationTime>te)||D&&!M());){var $=m.callback;if(typeof $=="function"){m.callback=null,g=m.priorityLevel;var J=$(m.expirationTime<=te);te=e.unstable_now(),typeof J=="function"?m.callback=J:m===n(d)&&s(d),k(te)}else s(d);m=n(d)}if(m!==null)var le=!0;else{var ve=n(h);ve!==null&&ee(S,ve.startTime-te),le=!1}return le}finally{m=null,g=V,y=!1}}var A=!1,T=null,L=-1,H=5,R=-1;function M(){return!(e.unstable_now()-R<H)}function O(){if(T!==null){var D=e.unstable_now();R=D;var te=!0;try{te=T(!0,D)}finally{te?F():(A=!1,T=null)}}else A=!1}var F;if(typeof E=="function")F=function(){E(O)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,ae=K.port2;K.port1.onmessage=O,F=function(){ae.postMessage(null)}}else F=function(){v(O,0)};function X(D){T=D,A||(A=!0,F())}function ee(D,te){L=v(function(){D(e.unstable_now())},te)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(D){D.callback=null},e.unstable_continueExecution=function(){b||y||(b=!0,X(P))},e.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<D?Math.floor(1e3/D):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return n(d)},e.unstable_next=function(D){switch(g){case 1:case 2:case 3:var te=3;break;default:te=g}var V=g;g=te;try{return D()}finally{g=V}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(D,te){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var V=g;g=D;try{return te()}finally{g=V}},e.unstable_scheduleCallback=function(D,te,V){var $=e.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?$+V:$):V=$,D){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=V+J,D={id:p++,callback:te,priorityLevel:D,startTime:V,expirationTime:J,sortIndex:-1},V>$?(D.sortIndex=V,t(h,D),n(d)===null&&D===n(h)&&(w?(j(L),L=-1):w=!0,ee(S,V-$))):(D.sortIndex=J,t(d,D),b||y||(b=!0,X(P))),D},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(D){var te=g;return function(){var V=g;g=te;try{return D.apply(this,arguments)}finally{g=V}}}})(Tx)),Tx}var Dj;function GI(){return Dj||(Dj=1,Cx.exports=WI()),Cx.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fj;function VI(){if(Fj)return nr;Fj=1;var e=Jy(),t=GI();function n(o){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+o,f=1;f<arguments.length;f++)c+="&args[]="+encodeURIComponent(arguments[f]);return"Minified React error #"+o+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function i(o,c){l(o,c),l(o+"Capture",c)}function l(o,c){for(a[o]=c,o=0;o<c.length;o++)s.add(c[o])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},m={};function g(o){return d.call(m,o)?!0:d.call(p,o)?!1:h.test(o)?m[o]=!0:(p[o]=!0,!1)}function y(o,c,f,x){if(f!==null&&f.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return x?!1:f!==null?!f.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function b(o,c,f,x){if(c===null||typeof c>"u"||y(o,c,f,x))return!0;if(x)return!1;if(f!==null)switch(f.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function w(o,c,f,x,_,N,I){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=x,this.attributeNamespace=_,this.mustUseProperty=f,this.propertyName=o,this.type=c,this.sanitizeURL=N,this.removeEmptyString=I}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){v[o]=new w(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var c=o[0];v[c]=new w(c,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){v[o]=new w(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){v[o]=new w(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){v[o]=new w(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){v[o]=new w(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){v[o]=new w(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){v[o]=new w(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){v[o]=new w(o,5,!1,o.toLowerCase(),null,!1,!1)});var j=/[\-:]([a-z])/g;function E(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var c=o.replace(j,E);v[c]=new w(c,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var c=o.replace(j,E);v[c]=new w(c,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var c=o.replace(j,E);v[c]=new w(c,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){v[o]=new w(o,1,!1,o.toLowerCase(),null,!1,!1)}),v.xlinkHref=new w("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){v[o]=new w(o,1,!1,o.toLowerCase(),null,!0,!0)});function k(o,c,f,x){var _=v.hasOwnProperty(c)?v[c]:null;(_!==null?_.type!==0:x||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(b(c,f,_,x)&&(f=null),x||_===null?g(c)&&(f===null?o.removeAttribute(c):o.setAttribute(c,""+f)):_.mustUseProperty?o[_.propertyName]=f===null?_.type===3?!1:"":f:(c=_.attributeName,x=_.attributeNamespace,f===null?o.removeAttribute(c):(_=_.type,f=_===3||_===4&&f===!0?"":""+f,x?o.setAttributeNS(x,c,f):o.setAttribute(c,f))))}var S=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,P=Symbol.for("react.element"),A=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),H=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),M=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),K=Symbol.for("react.suspense_list"),ae=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),ee=Symbol.for("react.offscreen"),D=Symbol.iterator;function te(o){return o===null||typeof o!="object"?null:(o=D&&o[D]||o["@@iterator"],typeof o=="function"?o:null)}var V=Object.assign,$;function J(o){if($===void 0)try{throw Error()}catch(f){var c=f.stack.trim().match(/\n( *(at )?)/);$=c&&c[1]||""}return`
`+$+o}var le=!1;function ve(o,c){if(!o||le)return"";le=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(ne){var x=ne}Reflect.construct(o,[],c)}else{try{c.call()}catch(ne){x=ne}o.call(c.prototype)}else{try{throw Error()}catch(ne){x=ne}o()}}catch(ne){if(ne&&x&&typeof ne.stack=="string"){for(var _=ne.stack.split(`
`),N=x.stack.split(`
`),I=_.length-1,U=N.length-1;1<=I&&0<=U&&_[I]!==N[U];)U--;for(;1<=I&&0<=U;I--,U--)if(_[I]!==N[U]){if(I!==1||U!==1)do if(I--,U--,0>U||_[I]!==N[U]){var B=`
`+_[I].replace(" at new "," at ");return o.displayName&&B.includes("<anonymous>")&&(B=B.replace("<anonymous>",o.displayName)),B}while(1<=I&&0<=U);break}}}finally{le=!1,Error.prepareStackTrace=f}return(o=o?o.displayName||o.name:"")?J(o):""}function Ee(o){switch(o.tag){case 5:return J(o.type);case 16:return J("Lazy");case 13:return J("Suspense");case 19:return J("SuspenseList");case 0:case 2:case 15:return o=ve(o.type,!1),o;case 11:return o=ve(o.type.render,!1),o;case 1:return o=ve(o.type,!0),o;default:return""}}function De(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case T:return"Fragment";case A:return"Portal";case H:return"Profiler";case L:return"StrictMode";case F:return"Suspense";case K:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case M:return(o.displayName||"Context")+".Consumer";case R:return(o._context.displayName||"Context")+".Provider";case O:var c=o.render;return o=o.displayName,o||(o=c.displayName||c.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case ae:return c=o.displayName||null,c!==null?c:De(o.type)||"Memo";case X:c=o._payload,o=o._init;try{return De(o(c))}catch{}}return null}function Fe(o){var c=o.type;switch(o.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=c.render,o=o.displayName||o.name||"",c.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return De(c);case 8:return c===L?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function re(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function me(o){var c=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function Le(o){var c=me(o)?"checked":"value",f=Object.getOwnPropertyDescriptor(o.constructor.prototype,c),x=""+o[c];if(!o.hasOwnProperty(c)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var _=f.get,N=f.set;return Object.defineProperty(o,c,{configurable:!0,get:function(){return _.call(this)},set:function(I){x=""+I,N.call(this,I)}}),Object.defineProperty(o,c,{enumerable:f.enumerable}),{getValue:function(){return x},setValue:function(I){x=""+I},stopTracking:function(){o._valueTracker=null,delete o[c]}}}}function En(o){o._valueTracker||(o._valueTracker=Le(o))}function Tr(o){if(!o)return!1;var c=o._valueTracker;if(!c)return!0;var f=c.getValue(),x="";return o&&(x=me(o)?o.checked?"true":"false":o.value),o=x,o!==f?(c.setValue(o),!0):!1}function fr(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function Ve(o,c){var f=c.checked;return V({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:f??o._wrapperState.initialChecked})}function xt(o,c){var f=c.defaultValue==null?"":c.defaultValue,x=c.checked!=null?c.checked:c.defaultChecked;f=re(c.value!=null?c.value:f),o._wrapperState={initialChecked:x,initialValue:f,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function yn(o,c){c=c.checked,c!=null&&k(o,"checked",c,!1)}function Xt(o,c){yn(o,c);var f=re(c.value),x=c.type;if(f!=null)x==="number"?(f===0&&o.value===""||o.value!=f)&&(o.value=""+f):o.value!==""+f&&(o.value=""+f);else if(x==="submit"||x==="reset"){o.removeAttribute("value");return}c.hasOwnProperty("value")?tn(o,c.type,f):c.hasOwnProperty("defaultValue")&&tn(o,c.type,re(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(o.defaultChecked=!!c.defaultChecked)}function bt(o,c,f){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var x=c.type;if(!(x!=="submit"&&x!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+o._wrapperState.initialValue,f||c===o.value||(o.value=c),o.defaultValue=c}f=o.name,f!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,f!==""&&(o.name=f)}function tn(o,c,f){(c!=="number"||fr(o.ownerDocument)!==o)&&(f==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+f&&(o.defaultValue=""+f))}var Ke=Array.isArray;function $t(o,c,f,x){if(o=o.options,c){c={};for(var _=0;_<f.length;_++)c["$"+f[_]]=!0;for(f=0;f<o.length;f++)_=c.hasOwnProperty("$"+o[f].value),o[f].selected!==_&&(o[f].selected=_),_&&x&&(o[f].defaultSelected=!0)}else{for(f=""+re(f),c=null,_=0;_<o.length;_++){if(o[_].value===f){o[_].selected=!0,x&&(o[_].defaultSelected=!0);return}c!==null||o[_].disabled||(c=o[_])}c!==null&&(c.selected=!0)}}function Qe(o,c){if(c.dangerouslySetInnerHTML!=null)throw Error(n(91));return V({},c,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function bn(o,c){var f=c.value;if(f==null){if(f=c.children,c=c.defaultValue,f!=null){if(c!=null)throw Error(n(92));if(Ke(f)){if(1<f.length)throw Error(n(93));f=f[0]}c=f}c==null&&(c=""),f=c}o._wrapperState={initialValue:re(f)}}function Un(o,c){var f=re(c.value),x=re(c.defaultValue);f!=null&&(f=""+f,f!==o.value&&(o.value=f),c.defaultValue==null&&o.defaultValue!==f&&(o.defaultValue=f)),x!=null&&(o.defaultValue=""+x)}function lt(o){var c=o.textContent;c===o._wrapperState.initialValue&&c!==""&&c!==null&&(o.value=c)}function Fo(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Mp(o,c){return o==null||o==="http://www.w3.org/1999/xhtml"?Fo(c):o==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var Ad,Gv=(function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,f,x,_){MSApp.execUnsafeLocalFunction(function(){return o(c,f,x,_)})}:o})(function(o,c){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=c;else{for(Ad=Ad||document.createElement("div"),Ad.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=Ad.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;c.firstChild;)o.appendChild(c.firstChild)}});function Rc(o,c){if(c){var f=o.firstChild;if(f&&f===o.lastChild&&f.nodeType===3){f.nodeValue=c;return}}o.textContent=c}var Ic={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},B4=["Webkit","ms","Moz","O"];Object.keys(Ic).forEach(function(o){B4.forEach(function(c){c=c+o.charAt(0).toUpperCase()+o.substring(1),Ic[c]=Ic[o]})});function Vv(o,c,f){return c==null||typeof c=="boolean"||c===""?"":f||typeof c!="number"||c===0||Ic.hasOwnProperty(o)&&Ic[o]?(""+c).trim():c+"px"}function Kv(o,c){o=o.style;for(var f in c)if(c.hasOwnProperty(f)){var x=f.indexOf("--")===0,_=Vv(f,c[f],x);f==="float"&&(f="cssFloat"),x?o.setProperty(f,_):o[f]=_}}var H4=V({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Lp(o,c){if(c){if(H4[o]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(n(137,o));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(n(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(n(61))}if(c.style!=null&&typeof c.style!="object")throw Error(n(62))}}function $p(o,c){if(o.indexOf("-")===-1)return typeof c.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Dp=null;function Fp(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Up=null,Uo=null,qo=null;function Yv(o){if(o=Zc(o)){if(typeof Up!="function")throw Error(n(280));var c=o.stateNode;c&&(c=nh(c),Up(o.stateNode,o.type,c))}}function Jv(o){Uo?qo?qo.push(o):qo=[o]:Uo=o}function Qv(){if(Uo){var o=Uo,c=qo;if(qo=Uo=null,Yv(o),c)for(o=0;o<c.length;o++)Yv(c[o])}}function Xv(o,c){return o(c)}function Zv(){}var qp=!1;function ew(o,c,f){if(qp)return o(c,f);qp=!0;try{return Xv(o,c,f)}finally{qp=!1,(Uo!==null||qo!==null)&&(Zv(),Qv())}}function Pc(o,c){var f=o.stateNode;if(f===null)return null;var x=nh(f);if(x===null)return null;f=x[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(x=!x.disabled)||(o=o.type,x=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!x;break e;default:o=!1}if(o)return null;if(f&&typeof f!="function")throw Error(n(231,c,typeof f));return f}var Bp=!1;if(u)try{var Ac={};Object.defineProperty(Ac,"passive",{get:function(){Bp=!0}}),window.addEventListener("test",Ac,Ac),window.removeEventListener("test",Ac,Ac)}catch{Bp=!1}function z4(o,c,f,x,_,N,I,U,B){var ne=Array.prototype.slice.call(arguments,3);try{c.apply(f,ne)}catch(oe){this.onError(oe)}}var Oc=!1,Od=null,Md=!1,Hp=null,W4={onError:function(o){Oc=!0,Od=o}};function G4(o,c,f,x,_,N,I,U,B){Oc=!1,Od=null,z4.apply(W4,arguments)}function V4(o,c,f,x,_,N,I,U,B){if(G4.apply(this,arguments),Oc){if(Oc){var ne=Od;Oc=!1,Od=null}else throw Error(n(198));Md||(Md=!0,Hp=ne)}}function Ci(o){var c=o,f=o;if(o.alternate)for(;c.return;)c=c.return;else{o=c;do c=o,(c.flags&4098)!==0&&(f=c.return),o=c.return;while(o)}return c.tag===3?f:null}function tw(o){if(o.tag===13){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function nw(o){if(Ci(o)!==o)throw Error(n(188))}function K4(o){var c=o.alternate;if(!c){if(c=Ci(o),c===null)throw Error(n(188));return c!==o?null:o}for(var f=o,x=c;;){var _=f.return;if(_===null)break;var N=_.alternate;if(N===null){if(x=_.return,x!==null){f=x;continue}break}if(_.child===N.child){for(N=_.child;N;){if(N===f)return nw(_),o;if(N===x)return nw(_),c;N=N.sibling}throw Error(n(188))}if(f.return!==x.return)f=_,x=N;else{for(var I=!1,U=_.child;U;){if(U===f){I=!0,f=_,x=N;break}if(U===x){I=!0,x=_,f=N;break}U=U.sibling}if(!I){for(U=N.child;U;){if(U===f){I=!0,f=N,x=_;break}if(U===x){I=!0,x=N,f=_;break}U=U.sibling}if(!I)throw Error(n(189))}}if(f.alternate!==x)throw Error(n(190))}if(f.tag!==3)throw Error(n(188));return f.stateNode.current===f?o:c}function rw(o){return o=K4(o),o!==null?sw(o):null}function sw(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var c=sw(o);if(c!==null)return c;o=o.sibling}return null}var aw=t.unstable_scheduleCallback,iw=t.unstable_cancelCallback,Y4=t.unstable_shouldYield,J4=t.unstable_requestPaint,Zt=t.unstable_now,Q4=t.unstable_getCurrentPriorityLevel,zp=t.unstable_ImmediatePriority,ow=t.unstable_UserBlockingPriority,Ld=t.unstable_NormalPriority,X4=t.unstable_LowPriority,lw=t.unstable_IdlePriority,$d=null,vs=null;function Z4(o){if(vs&&typeof vs.onCommitFiberRoot=="function")try{vs.onCommitFiberRoot($d,o,void 0,(o.current.flags&128)===128)}catch{}}var Yr=Math.clz32?Math.clz32:nR,eR=Math.log,tR=Math.LN2;function nR(o){return o>>>=0,o===0?32:31-(eR(o)/tR|0)|0}var Dd=64,Fd=4194304;function Mc(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function Ud(o,c){var f=o.pendingLanes;if(f===0)return 0;var x=0,_=o.suspendedLanes,N=o.pingedLanes,I=f&268435455;if(I!==0){var U=I&~_;U!==0?x=Mc(U):(N&=I,N!==0&&(x=Mc(N)))}else I=f&~_,I!==0?x=Mc(I):N!==0&&(x=Mc(N));if(x===0)return 0;if(c!==0&&c!==x&&(c&_)===0&&(_=x&-x,N=c&-c,_>=N||_===16&&(N&4194240)!==0))return c;if((x&4)!==0&&(x|=f&16),c=o.entangledLanes,c!==0)for(o=o.entanglements,c&=x;0<c;)f=31-Yr(c),_=1<<f,x|=o[f],c&=~_;return x}function rR(o,c){switch(o){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sR(o,c){for(var f=o.suspendedLanes,x=o.pingedLanes,_=o.expirationTimes,N=o.pendingLanes;0<N;){var I=31-Yr(N),U=1<<I,B=_[I];B===-1?((U&f)===0||(U&x)!==0)&&(_[I]=rR(U,c)):B<=c&&(o.expiredLanes|=U),N&=~U}}function Wp(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function cw(){var o=Dd;return Dd<<=1,(Dd&4194240)===0&&(Dd=64),o}function Gp(o){for(var c=[],f=0;31>f;f++)c.push(o);return c}function Lc(o,c,f){o.pendingLanes|=c,c!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,c=31-Yr(c),o[c]=f}function aR(o,c){var f=o.pendingLanes&~c;o.pendingLanes=c,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=c,o.mutableReadLanes&=c,o.entangledLanes&=c,c=o.entanglements;var x=o.eventTimes;for(o=o.expirationTimes;0<f;){var _=31-Yr(f),N=1<<_;c[_]=0,x[_]=-1,o[_]=-1,f&=~N}}function Vp(o,c){var f=o.entangledLanes|=c;for(o=o.entanglements;f;){var x=31-Yr(f),_=1<<x;_&c|o[x]&c&&(o[x]|=c),f&=~_}}var pt=0;function uw(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var dw,Kp,hw,fw,mw,Yp=!1,qd=[],_a=null,ja=null,Na=null,$c=new Map,Dc=new Map,Sa=[],iR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pw(o,c){switch(o){case"focusin":case"focusout":_a=null;break;case"dragenter":case"dragleave":ja=null;break;case"mouseover":case"mouseout":Na=null;break;case"pointerover":case"pointerout":$c.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dc.delete(c.pointerId)}}function Fc(o,c,f,x,_,N){return o===null||o.nativeEvent!==N?(o={blockedOn:c,domEventName:f,eventSystemFlags:x,nativeEvent:N,targetContainers:[_]},c!==null&&(c=Zc(c),c!==null&&Kp(c)),o):(o.eventSystemFlags|=x,c=o.targetContainers,_!==null&&c.indexOf(_)===-1&&c.push(_),o)}function oR(o,c,f,x,_){switch(c){case"focusin":return _a=Fc(_a,o,c,f,x,_),!0;case"dragenter":return ja=Fc(ja,o,c,f,x,_),!0;case"mouseover":return Na=Fc(Na,o,c,f,x,_),!0;case"pointerover":var N=_.pointerId;return $c.set(N,Fc($c.get(N)||null,o,c,f,x,_)),!0;case"gotpointercapture":return N=_.pointerId,Dc.set(N,Fc(Dc.get(N)||null,o,c,f,x,_)),!0}return!1}function gw(o){var c=Ti(o.target);if(c!==null){var f=Ci(c);if(f!==null){if(c=f.tag,c===13){if(c=tw(f),c!==null){o.blockedOn=c,mw(o.priority,function(){hw(f)});return}}else if(c===3&&f.stateNode.current.memoizedState.isDehydrated){o.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Bd(o){if(o.blockedOn!==null)return!1;for(var c=o.targetContainers;0<c.length;){var f=Qp(o.domEventName,o.eventSystemFlags,c[0],o.nativeEvent);if(f===null){f=o.nativeEvent;var x=new f.constructor(f.type,f);Dp=x,f.target.dispatchEvent(x),Dp=null}else return c=Zc(f),c!==null&&Kp(c),o.blockedOn=f,!1;c.shift()}return!0}function xw(o,c,f){Bd(o)&&f.delete(c)}function lR(){Yp=!1,_a!==null&&Bd(_a)&&(_a=null),ja!==null&&Bd(ja)&&(ja=null),Na!==null&&Bd(Na)&&(Na=null),$c.forEach(xw),Dc.forEach(xw)}function Uc(o,c){o.blockedOn===c&&(o.blockedOn=null,Yp||(Yp=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,lR)))}function qc(o){function c(_){return Uc(_,o)}if(0<qd.length){Uc(qd[0],o);for(var f=1;f<qd.length;f++){var x=qd[f];x.blockedOn===o&&(x.blockedOn=null)}}for(_a!==null&&Uc(_a,o),ja!==null&&Uc(ja,o),Na!==null&&Uc(Na,o),$c.forEach(c),Dc.forEach(c),f=0;f<Sa.length;f++)x=Sa[f],x.blockedOn===o&&(x.blockedOn=null);for(;0<Sa.length&&(f=Sa[0],f.blockedOn===null);)gw(f),f.blockedOn===null&&Sa.shift()}var Bo=S.ReactCurrentBatchConfig,Hd=!0;function cR(o,c,f,x){var _=pt,N=Bo.transition;Bo.transition=null;try{pt=1,Jp(o,c,f,x)}finally{pt=_,Bo.transition=N}}function uR(o,c,f,x){var _=pt,N=Bo.transition;Bo.transition=null;try{pt=4,Jp(o,c,f,x)}finally{pt=_,Bo.transition=N}}function Jp(o,c,f,x){if(Hd){var _=Qp(o,c,f,x);if(_===null)mg(o,c,x,zd,f),pw(o,x);else if(oR(_,o,c,f,x))x.stopPropagation();else if(pw(o,x),c&4&&-1<iR.indexOf(o)){for(;_!==null;){var N=Zc(_);if(N!==null&&dw(N),N=Qp(o,c,f,x),N===null&&mg(o,c,x,zd,f),N===_)break;_=N}_!==null&&x.stopPropagation()}else mg(o,c,x,null,f)}}var zd=null;function Qp(o,c,f,x){if(zd=null,o=Fp(x),o=Ti(o),o!==null)if(c=Ci(o),c===null)o=null;else if(f=c.tag,f===13){if(o=tw(c),o!==null)return o;o=null}else if(f===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;o=null}else c!==o&&(o=null);return zd=o,null}function yw(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Q4()){case zp:return 1;case ow:return 4;case Ld:case X4:return 16;case lw:return 536870912;default:return 16}default:return 16}}var ka=null,Xp=null,Wd=null;function bw(){if(Wd)return Wd;var o,c=Xp,f=c.length,x,_="value"in ka?ka.value:ka.textContent,N=_.length;for(o=0;o<f&&c[o]===_[o];o++);var I=f-o;for(x=1;x<=I&&c[f-x]===_[N-x];x++);return Wd=_.slice(o,1<x?1-x:void 0)}function Gd(o){var c=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&c===13&&(o=13)):o=c,o===10&&(o=13),32<=o||o===13?o:0}function Vd(){return!0}function vw(){return!1}function mr(o){function c(f,x,_,N,I){this._reactName=f,this._targetInst=_,this.type=x,this.nativeEvent=N,this.target=I,this.currentTarget=null;for(var U in o)o.hasOwnProperty(U)&&(f=o[U],this[U]=f?f(N):N[U]);return this.isDefaultPrevented=(N.defaultPrevented!=null?N.defaultPrevented:N.returnValue===!1)?Vd:vw,this.isPropagationStopped=vw,this}return V(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Vd)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Vd)},persist:function(){},isPersistent:Vd}),c}var Ho={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zp=mr(Ho),Bc=V({},Ho,{view:0,detail:0}),dR=mr(Bc),eg,tg,Hc,Kd=V({},Bc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rg,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Hc&&(Hc&&o.type==="mousemove"?(eg=o.screenX-Hc.screenX,tg=o.screenY-Hc.screenY):tg=eg=0,Hc=o),eg)},movementY:function(o){return"movementY"in o?o.movementY:tg}}),ww=mr(Kd),hR=V({},Kd,{dataTransfer:0}),fR=mr(hR),mR=V({},Bc,{relatedTarget:0}),ng=mr(mR),pR=V({},Ho,{animationName:0,elapsedTime:0,pseudoElement:0}),gR=mr(pR),xR=V({},Ho,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),yR=mr(xR),bR=V({},Ho,{data:0}),_w=mr(bR),vR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_R={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jR(o){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(o):(o=_R[o])?!!c[o]:!1}function rg(){return jR}var NR=V({},Bc,{key:function(o){if(o.key){var c=vR[o.key]||o.key;if(c!=="Unidentified")return c}return o.type==="keypress"?(o=Gd(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?wR[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rg,charCode:function(o){return o.type==="keypress"?Gd(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Gd(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),SR=mr(NR),kR=V({},Kd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jw=mr(kR),ER=V({},Bc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rg}),CR=mr(ER),TR=V({},Ho,{propertyName:0,elapsedTime:0,pseudoElement:0}),RR=mr(TR),IR=V({},Kd,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),PR=mr(IR),AR=[9,13,27,32],sg=u&&"CompositionEvent"in window,zc=null;u&&"documentMode"in document&&(zc=document.documentMode);var OR=u&&"TextEvent"in window&&!zc,Nw=u&&(!sg||zc&&8<zc&&11>=zc),Sw=" ",kw=!1;function Ew(o,c){switch(o){case"keyup":return AR.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Cw(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var zo=!1;function MR(o,c){switch(o){case"compositionend":return Cw(c);case"keypress":return c.which!==32?null:(kw=!0,Sw);case"textInput":return o=c.data,o===Sw&&kw?null:o;default:return null}}function LR(o,c){if(zo)return o==="compositionend"||!sg&&Ew(o,c)?(o=bw(),Wd=Xp=ka=null,zo=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return Nw&&c.locale!=="ko"?null:c.data;default:return null}}var $R={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Tw(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c==="input"?!!$R[o.type]:c==="textarea"}function Rw(o,c,f,x){Jv(x),c=Zd(c,"onChange"),0<c.length&&(f=new Zp("onChange","change",null,f,x),o.push({event:f,listeners:c}))}var Wc=null,Gc=null;function DR(o){Kw(o,0)}function Yd(o){var c=Yo(o);if(Tr(c))return o}function FR(o,c){if(o==="change")return c}var Iw=!1;if(u){var ag;if(u){var ig="oninput"in document;if(!ig){var Pw=document.createElement("div");Pw.setAttribute("oninput","return;"),ig=typeof Pw.oninput=="function"}ag=ig}else ag=!1;Iw=ag&&(!document.documentMode||9<document.documentMode)}function Aw(){Wc&&(Wc.detachEvent("onpropertychange",Ow),Gc=Wc=null)}function Ow(o){if(o.propertyName==="value"&&Yd(Gc)){var c=[];Rw(c,Gc,o,Fp(o)),ew(DR,c)}}function UR(o,c,f){o==="focusin"?(Aw(),Wc=c,Gc=f,Wc.attachEvent("onpropertychange",Ow)):o==="focusout"&&Aw()}function qR(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Yd(Gc)}function BR(o,c){if(o==="click")return Yd(c)}function HR(o,c){if(o==="input"||o==="change")return Yd(c)}function zR(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}var Jr=typeof Object.is=="function"?Object.is:zR;function Vc(o,c){if(Jr(o,c))return!0;if(typeof o!="object"||o===null||typeof c!="object"||c===null)return!1;var f=Object.keys(o),x=Object.keys(c);if(f.length!==x.length)return!1;for(x=0;x<f.length;x++){var _=f[x];if(!d.call(c,_)||!Jr(o[_],c[_]))return!1}return!0}function Mw(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Lw(o,c){var f=Mw(o);o=0;for(var x;f;){if(f.nodeType===3){if(x=o+f.textContent.length,o<=c&&x>=c)return{node:f,offset:c-o};o=x}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=Mw(f)}}function $w(o,c){return o&&c?o===c?!0:o&&o.nodeType===3?!1:c&&c.nodeType===3?$w(o,c.parentNode):"contains"in o?o.contains(c):o.compareDocumentPosition?!!(o.compareDocumentPosition(c)&16):!1:!1}function Dw(){for(var o=window,c=fr();c instanceof o.HTMLIFrameElement;){try{var f=typeof c.contentWindow.location.href=="string"}catch{f=!1}if(f)o=c.contentWindow;else break;c=fr(o.document)}return c}function og(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c&&(c==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||c==="textarea"||o.contentEditable==="true")}function WR(o){var c=Dw(),f=o.focusedElem,x=o.selectionRange;if(c!==f&&f&&f.ownerDocument&&$w(f.ownerDocument.documentElement,f)){if(x!==null&&og(f)){if(c=x.start,o=x.end,o===void 0&&(o=c),"selectionStart"in f)f.selectionStart=c,f.selectionEnd=Math.min(o,f.value.length);else if(o=(c=f.ownerDocument||document)&&c.defaultView||window,o.getSelection){o=o.getSelection();var _=f.textContent.length,N=Math.min(x.start,_);x=x.end===void 0?N:Math.min(x.end,_),!o.extend&&N>x&&(_=x,x=N,N=_),_=Lw(f,N);var I=Lw(f,x);_&&I&&(o.rangeCount!==1||o.anchorNode!==_.node||o.anchorOffset!==_.offset||o.focusNode!==I.node||o.focusOffset!==I.offset)&&(c=c.createRange(),c.setStart(_.node,_.offset),o.removeAllRanges(),N>x?(o.addRange(c),o.extend(I.node,I.offset)):(c.setEnd(I.node,I.offset),o.addRange(c)))}}for(c=[],o=f;o=o.parentNode;)o.nodeType===1&&c.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof f.focus=="function"&&f.focus(),f=0;f<c.length;f++)o=c[f],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var GR=u&&"documentMode"in document&&11>=document.documentMode,Wo=null,lg=null,Kc=null,cg=!1;function Fw(o,c,f){var x=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;cg||Wo==null||Wo!==fr(x)||(x=Wo,"selectionStart"in x&&og(x)?x={start:x.selectionStart,end:x.selectionEnd}:(x=(x.ownerDocument&&x.ownerDocument.defaultView||window).getSelection(),x={anchorNode:x.anchorNode,anchorOffset:x.anchorOffset,focusNode:x.focusNode,focusOffset:x.focusOffset}),Kc&&Vc(Kc,x)||(Kc=x,x=Zd(lg,"onSelect"),0<x.length&&(c=new Zp("onSelect","select",null,c,f),o.push({event:c,listeners:x}),c.target=Wo)))}function Jd(o,c){var f={};return f[o.toLowerCase()]=c.toLowerCase(),f["Webkit"+o]="webkit"+c,f["Moz"+o]="moz"+c,f}var Go={animationend:Jd("Animation","AnimationEnd"),animationiteration:Jd("Animation","AnimationIteration"),animationstart:Jd("Animation","AnimationStart"),transitionend:Jd("Transition","TransitionEnd")},ug={},Uw={};u&&(Uw=document.createElement("div").style,"AnimationEvent"in window||(delete Go.animationend.animation,delete Go.animationiteration.animation,delete Go.animationstart.animation),"TransitionEvent"in window||delete Go.transitionend.transition);function Qd(o){if(ug[o])return ug[o];if(!Go[o])return o;var c=Go[o],f;for(f in c)if(c.hasOwnProperty(f)&&f in Uw)return ug[o]=c[f];return o}var qw=Qd("animationend"),Bw=Qd("animationiteration"),Hw=Qd("animationstart"),zw=Qd("transitionend"),Ww=new Map,Gw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ea(o,c){Ww.set(o,c),i(c,[o])}for(var dg=0;dg<Gw.length;dg++){var hg=Gw[dg],VR=hg.toLowerCase(),KR=hg[0].toUpperCase()+hg.slice(1);Ea(VR,"on"+KR)}Ea(qw,"onAnimationEnd"),Ea(Bw,"onAnimationIteration"),Ea(Hw,"onAnimationStart"),Ea("dblclick","onDoubleClick"),Ea("focusin","onFocus"),Ea("focusout","onBlur"),Ea(zw,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),YR=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yc));function Vw(o,c,f){var x=o.type||"unknown-event";o.currentTarget=f,V4(x,c,void 0,o),o.currentTarget=null}function Kw(o,c){c=(c&4)!==0;for(var f=0;f<o.length;f++){var x=o[f],_=x.event;x=x.listeners;e:{var N=void 0;if(c)for(var I=x.length-1;0<=I;I--){var U=x[I],B=U.instance,ne=U.currentTarget;if(U=U.listener,B!==N&&_.isPropagationStopped())break e;Vw(_,U,ne),N=B}else for(I=0;I<x.length;I++){if(U=x[I],B=U.instance,ne=U.currentTarget,U=U.listener,B!==N&&_.isPropagationStopped())break e;Vw(_,U,ne),N=B}}}if(Md)throw o=Hp,Md=!1,Hp=null,o}function It(o,c){var f=c[vg];f===void 0&&(f=c[vg]=new Set);var x=o+"__bubble";f.has(x)||(Yw(c,o,2,!1),f.add(x))}function fg(o,c,f){var x=0;c&&(x|=4),Yw(f,o,x,c)}var Xd="_reactListening"+Math.random().toString(36).slice(2);function Jc(o){if(!o[Xd]){o[Xd]=!0,s.forEach(function(f){f!=="selectionchange"&&(YR.has(f)||fg(f,!1,o),fg(f,!0,o))});var c=o.nodeType===9?o:o.ownerDocument;c===null||c[Xd]||(c[Xd]=!0,fg("selectionchange",!1,c))}}function Yw(o,c,f,x){switch(yw(c)){case 1:var _=cR;break;case 4:_=uR;break;default:_=Jp}f=_.bind(null,c,f,o),_=void 0,!Bp||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(_=!0),x?_!==void 0?o.addEventListener(c,f,{capture:!0,passive:_}):o.addEventListener(c,f,!0):_!==void 0?o.addEventListener(c,f,{passive:_}):o.addEventListener(c,f,!1)}function mg(o,c,f,x,_){var N=x;if((c&1)===0&&(c&2)===0&&x!==null)e:for(;;){if(x===null)return;var I=x.tag;if(I===3||I===4){var U=x.stateNode.containerInfo;if(U===_||U.nodeType===8&&U.parentNode===_)break;if(I===4)for(I=x.return;I!==null;){var B=I.tag;if((B===3||B===4)&&(B=I.stateNode.containerInfo,B===_||B.nodeType===8&&B.parentNode===_))return;I=I.return}for(;U!==null;){if(I=Ti(U),I===null)return;if(B=I.tag,B===5||B===6){x=N=I;continue e}U=U.parentNode}}x=x.return}ew(function(){var ne=N,oe=Fp(f),ue=[];e:{var ie=Ww.get(o);if(ie!==void 0){var we=Zp,je=o;switch(o){case"keypress":if(Gd(f)===0)break e;case"keydown":case"keyup":we=SR;break;case"focusin":je="focus",we=ng;break;case"focusout":je="blur",we=ng;break;case"beforeblur":case"afterblur":we=ng;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":we=ww;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":we=fR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":we=CR;break;case qw:case Bw:case Hw:we=gR;break;case zw:we=RR;break;case"scroll":we=dR;break;case"wheel":we=PR;break;case"copy":case"cut":case"paste":we=yR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":we=jw}var Ne=(c&4)!==0,en=!Ne&&o==="scroll",Q=Ne?ie!==null?ie+"Capture":null:ie;Ne=[];for(var z=ne,Z;z!==null;){Z=z;var he=Z.stateNode;if(Z.tag===5&&he!==null&&(Z=he,Q!==null&&(he=Pc(z,Q),he!=null&&Ne.push(Qc(z,he,Z)))),en)break;z=z.return}0<Ne.length&&(ie=new we(ie,je,null,f,oe),ue.push({event:ie,listeners:Ne}))}}if((c&7)===0){e:{if(ie=o==="mouseover"||o==="pointerover",we=o==="mouseout"||o==="pointerout",ie&&f!==Dp&&(je=f.relatedTarget||f.fromElement)&&(Ti(je)||je[$s]))break e;if((we||ie)&&(ie=oe.window===oe?oe:(ie=oe.ownerDocument)?ie.defaultView||ie.parentWindow:window,we?(je=f.relatedTarget||f.toElement,we=ne,je=je?Ti(je):null,je!==null&&(en=Ci(je),je!==en||je.tag!==5&&je.tag!==6)&&(je=null)):(we=null,je=ne),we!==je)){if(Ne=ww,he="onMouseLeave",Q="onMouseEnter",z="mouse",(o==="pointerout"||o==="pointerover")&&(Ne=jw,he="onPointerLeave",Q="onPointerEnter",z="pointer"),en=we==null?ie:Yo(we),Z=je==null?ie:Yo(je),ie=new Ne(he,z+"leave",we,f,oe),ie.target=en,ie.relatedTarget=Z,he=null,Ti(oe)===ne&&(Ne=new Ne(Q,z+"enter",je,f,oe),Ne.target=Z,Ne.relatedTarget=en,he=Ne),en=he,we&&je)t:{for(Ne=we,Q=je,z=0,Z=Ne;Z;Z=Vo(Z))z++;for(Z=0,he=Q;he;he=Vo(he))Z++;for(;0<z-Z;)Ne=Vo(Ne),z--;for(;0<Z-z;)Q=Vo(Q),Z--;for(;z--;){if(Ne===Q||Q!==null&&Ne===Q.alternate)break t;Ne=Vo(Ne),Q=Vo(Q)}Ne=null}else Ne=null;we!==null&&Jw(ue,ie,we,Ne,!1),je!==null&&en!==null&&Jw(ue,en,je,Ne,!0)}}e:{if(ie=ne?Yo(ne):window,we=ie.nodeName&&ie.nodeName.toLowerCase(),we==="select"||we==="input"&&ie.type==="file")var ke=FR;else if(Tw(ie))if(Iw)ke=HR;else{ke=qR;var Ie=UR}else(we=ie.nodeName)&&we.toLowerCase()==="input"&&(ie.type==="checkbox"||ie.type==="radio")&&(ke=BR);if(ke&&(ke=ke(o,ne))){Rw(ue,ke,f,oe);break e}Ie&&Ie(o,ie,ne),o==="focusout"&&(Ie=ie._wrapperState)&&Ie.controlled&&ie.type==="number"&&tn(ie,"number",ie.value)}switch(Ie=ne?Yo(ne):window,o){case"focusin":(Tw(Ie)||Ie.contentEditable==="true")&&(Wo=Ie,lg=ne,Kc=null);break;case"focusout":Kc=lg=Wo=null;break;case"mousedown":cg=!0;break;case"contextmenu":case"mouseup":case"dragend":cg=!1,Fw(ue,f,oe);break;case"selectionchange":if(GR)break;case"keydown":case"keyup":Fw(ue,f,oe)}var Pe;if(sg)e:{switch(o){case"compositionstart":var Ue="onCompositionStart";break e;case"compositionend":Ue="onCompositionEnd";break e;case"compositionupdate":Ue="onCompositionUpdate";break e}Ue=void 0}else zo?Ew(o,f)&&(Ue="onCompositionEnd"):o==="keydown"&&f.keyCode===229&&(Ue="onCompositionStart");Ue&&(Nw&&f.locale!=="ko"&&(zo||Ue!=="onCompositionStart"?Ue==="onCompositionEnd"&&zo&&(Pe=bw()):(ka=oe,Xp="value"in ka?ka.value:ka.textContent,zo=!0)),Ie=Zd(ne,Ue),0<Ie.length&&(Ue=new _w(Ue,o,null,f,oe),ue.push({event:Ue,listeners:Ie}),Pe?Ue.data=Pe:(Pe=Cw(f),Pe!==null&&(Ue.data=Pe)))),(Pe=OR?MR(o,f):LR(o,f))&&(ne=Zd(ne,"onBeforeInput"),0<ne.length&&(oe=new _w("onBeforeInput","beforeinput",null,f,oe),ue.push({event:oe,listeners:ne}),oe.data=Pe))}Kw(ue,c)})}function Qc(o,c,f){return{instance:o,listener:c,currentTarget:f}}function Zd(o,c){for(var f=c+"Capture",x=[];o!==null;){var _=o,N=_.stateNode;_.tag===5&&N!==null&&(_=N,N=Pc(o,f),N!=null&&x.unshift(Qc(o,N,_)),N=Pc(o,c),N!=null&&x.push(Qc(o,N,_))),o=o.return}return x}function Vo(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function Jw(o,c,f,x,_){for(var N=c._reactName,I=[];f!==null&&f!==x;){var U=f,B=U.alternate,ne=U.stateNode;if(B!==null&&B===x)break;U.tag===5&&ne!==null&&(U=ne,_?(B=Pc(f,N),B!=null&&I.unshift(Qc(f,B,U))):_||(B=Pc(f,N),B!=null&&I.push(Qc(f,B,U)))),f=f.return}I.length!==0&&o.push({event:c,listeners:I})}var JR=/\r\n?/g,QR=/\u0000|\uFFFD/g;function Qw(o){return(typeof o=="string"?o:""+o).replace(JR,`
`).replace(QR,"")}function eh(o,c,f){if(c=Qw(c),Qw(o)!==c&&f)throw Error(n(425))}function th(){}var pg=null,gg=null;function xg(o,c){return o==="textarea"||o==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var yg=typeof setTimeout=="function"?setTimeout:void 0,XR=typeof clearTimeout=="function"?clearTimeout:void 0,Xw=typeof Promise=="function"?Promise:void 0,ZR=typeof queueMicrotask=="function"?queueMicrotask:typeof Xw<"u"?function(o){return Xw.resolve(null).then(o).catch(eI)}:yg;function eI(o){setTimeout(function(){throw o})}function bg(o,c){var f=c,x=0;do{var _=f.nextSibling;if(o.removeChild(f),_&&_.nodeType===8)if(f=_.data,f==="/$"){if(x===0){o.removeChild(_),qc(c);return}x--}else f!=="$"&&f!=="$?"&&f!=="$!"||x++;f=_}while(f);qc(c)}function Ca(o){for(;o!=null;o=o.nextSibling){var c=o.nodeType;if(c===1||c===3)break;if(c===8){if(c=o.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return o}function Zw(o){o=o.previousSibling;for(var c=0;o;){if(o.nodeType===8){var f=o.data;if(f==="$"||f==="$!"||f==="$?"){if(c===0)return o;c--}else f==="/$"&&c++}o=o.previousSibling}return null}var Ko=Math.random().toString(36).slice(2),ws="__reactFiber$"+Ko,Xc="__reactProps$"+Ko,$s="__reactContainer$"+Ko,vg="__reactEvents$"+Ko,tI="__reactListeners$"+Ko,nI="__reactHandles$"+Ko;function Ti(o){var c=o[ws];if(c)return c;for(var f=o.parentNode;f;){if(c=f[$s]||f[ws]){if(f=c.alternate,c.child!==null||f!==null&&f.child!==null)for(o=Zw(o);o!==null;){if(f=o[ws])return f;o=Zw(o)}return c}o=f,f=o.parentNode}return null}function Zc(o){return o=o[ws]||o[$s],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function Yo(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(n(33))}function nh(o){return o[Xc]||null}var wg=[],Jo=-1;function Ta(o){return{current:o}}function Pt(o){0>Jo||(o.current=wg[Jo],wg[Jo]=null,Jo--)}function Nt(o,c){Jo++,wg[Jo]=o.current,o.current=c}var Ra={},Cn=Ta(Ra),Qn=Ta(!1),Ri=Ra;function Qo(o,c){var f=o.type.contextTypes;if(!f)return Ra;var x=o.stateNode;if(x&&x.__reactInternalMemoizedUnmaskedChildContext===c)return x.__reactInternalMemoizedMaskedChildContext;var _={},N;for(N in f)_[N]=c[N];return x&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=c,o.__reactInternalMemoizedMaskedChildContext=_),_}function Xn(o){return o=o.childContextTypes,o!=null}function rh(){Pt(Qn),Pt(Cn)}function e_(o,c,f){if(Cn.current!==Ra)throw Error(n(168));Nt(Cn,c),Nt(Qn,f)}function t_(o,c,f){var x=o.stateNode;if(c=c.childContextTypes,typeof x.getChildContext!="function")return f;x=x.getChildContext();for(var _ in x)if(!(_ in c))throw Error(n(108,Fe(o)||"Unknown",_));return V({},f,x)}function sh(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||Ra,Ri=Cn.current,Nt(Cn,o),Nt(Qn,Qn.current),!0}function n_(o,c,f){var x=o.stateNode;if(!x)throw Error(n(169));f?(o=t_(o,c,Ri),x.__reactInternalMemoizedMergedChildContext=o,Pt(Qn),Pt(Cn),Nt(Cn,o)):Pt(Qn),Nt(Qn,f)}var Ds=null,ah=!1,_g=!1;function r_(o){Ds===null?Ds=[o]:Ds.push(o)}function rI(o){ah=!0,r_(o)}function Ia(){if(!_g&&Ds!==null){_g=!0;var o=0,c=pt;try{var f=Ds;for(pt=1;o<f.length;o++){var x=f[o];do x=x(!0);while(x!==null)}Ds=null,ah=!1}catch(_){throw Ds!==null&&(Ds=Ds.slice(o+1)),aw(zp,Ia),_}finally{pt=c,_g=!1}}return null}var Xo=[],Zo=0,ih=null,oh=0,Rr=[],Ir=0,Ii=null,Fs=1,Us="";function Pi(o,c){Xo[Zo++]=oh,Xo[Zo++]=ih,ih=o,oh=c}function s_(o,c,f){Rr[Ir++]=Fs,Rr[Ir++]=Us,Rr[Ir++]=Ii,Ii=o;var x=Fs;o=Us;var _=32-Yr(x)-1;x&=~(1<<_),f+=1;var N=32-Yr(c)+_;if(30<N){var I=_-_%5;N=(x&(1<<I)-1).toString(32),x>>=I,_-=I,Fs=1<<32-Yr(c)+_|f<<_|x,Us=N+o}else Fs=1<<N|f<<_|x,Us=o}function jg(o){o.return!==null&&(Pi(o,1),s_(o,1,0))}function Ng(o){for(;o===ih;)ih=Xo[--Zo],Xo[Zo]=null,oh=Xo[--Zo],Xo[Zo]=null;for(;o===Ii;)Ii=Rr[--Ir],Rr[Ir]=null,Us=Rr[--Ir],Rr[Ir]=null,Fs=Rr[--Ir],Rr[Ir]=null}var pr=null,gr=null,Mt=!1,Qr=null;function a_(o,c){var f=Mr(5,null,null,0);f.elementType="DELETED",f.stateNode=c,f.return=o,c=o.deletions,c===null?(o.deletions=[f],o.flags|=16):c.push(f)}function i_(o,c){switch(o.tag){case 5:var f=o.type;return c=c.nodeType!==1||f.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(o.stateNode=c,pr=o,gr=Ca(c.firstChild),!0):!1;case 6:return c=o.pendingProps===""||c.nodeType!==3?null:c,c!==null?(o.stateNode=c,pr=o,gr=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(f=Ii!==null?{id:Fs,overflow:Us}:null,o.memoizedState={dehydrated:c,treeContext:f,retryLane:1073741824},f=Mr(18,null,null,0),f.stateNode=c,f.return=o,o.child=f,pr=o,gr=null,!0):!1;default:return!1}}function Sg(o){return(o.mode&1)!==0&&(o.flags&128)===0}function kg(o){if(Mt){var c=gr;if(c){var f=c;if(!i_(o,c)){if(Sg(o))throw Error(n(418));c=Ca(f.nextSibling);var x=pr;c&&i_(o,c)?a_(x,f):(o.flags=o.flags&-4097|2,Mt=!1,pr=o)}}else{if(Sg(o))throw Error(n(418));o.flags=o.flags&-4097|2,Mt=!1,pr=o}}}function o_(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;pr=o}function lh(o){if(o!==pr)return!1;if(!Mt)return o_(o),Mt=!0,!1;var c;if((c=o.tag!==3)&&!(c=o.tag!==5)&&(c=o.type,c=c!=="head"&&c!=="body"&&!xg(o.type,o.memoizedProps)),c&&(c=gr)){if(Sg(o))throw l_(),Error(n(418));for(;c;)a_(o,c),c=Ca(c.nextSibling)}if(o_(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(317));e:{for(o=o.nextSibling,c=0;o;){if(o.nodeType===8){var f=o.data;if(f==="/$"){if(c===0){gr=Ca(o.nextSibling);break e}c--}else f!=="$"&&f!=="$!"&&f!=="$?"||c++}o=o.nextSibling}gr=null}}else gr=pr?Ca(o.stateNode.nextSibling):null;return!0}function l_(){for(var o=gr;o;)o=Ca(o.nextSibling)}function el(){gr=pr=null,Mt=!1}function Eg(o){Qr===null?Qr=[o]:Qr.push(o)}var sI=S.ReactCurrentBatchConfig;function eu(o,c,f){if(o=f.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(f._owner){if(f=f._owner,f){if(f.tag!==1)throw Error(n(309));var x=f.stateNode}if(!x)throw Error(n(147,o));var _=x,N=""+o;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===N?c.ref:(c=function(I){var U=_.refs;I===null?delete U[N]:U[N]=I},c._stringRef=N,c)}if(typeof o!="string")throw Error(n(284));if(!f._owner)throw Error(n(290,o))}return o}function ch(o,c){throw o=Object.prototype.toString.call(c),Error(n(31,o==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":o))}function c_(o){var c=o._init;return c(o._payload)}function u_(o){function c(Q,z){if(o){var Z=Q.deletions;Z===null?(Q.deletions=[z],Q.flags|=16):Z.push(z)}}function f(Q,z){if(!o)return null;for(;z!==null;)c(Q,z),z=z.sibling;return null}function x(Q,z){for(Q=new Map;z!==null;)z.key!==null?Q.set(z.key,z):Q.set(z.index,z),z=z.sibling;return Q}function _(Q,z){return Q=Fa(Q,z),Q.index=0,Q.sibling=null,Q}function N(Q,z,Z){return Q.index=Z,o?(Z=Q.alternate,Z!==null?(Z=Z.index,Z<z?(Q.flags|=2,z):Z):(Q.flags|=2,z)):(Q.flags|=1048576,z)}function I(Q){return o&&Q.alternate===null&&(Q.flags|=2),Q}function U(Q,z,Z,he){return z===null||z.tag!==6?(z=yx(Z,Q.mode,he),z.return=Q,z):(z=_(z,Z),z.return=Q,z)}function B(Q,z,Z,he){var ke=Z.type;return ke===T?oe(Q,z,Z.props.children,he,Z.key):z!==null&&(z.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===X&&c_(ke)===z.type)?(he=_(z,Z.props),he.ref=eu(Q,z,Z),he.return=Q,he):(he=Ah(Z.type,Z.key,Z.props,null,Q.mode,he),he.ref=eu(Q,z,Z),he.return=Q,he)}function ne(Q,z,Z,he){return z===null||z.tag!==4||z.stateNode.containerInfo!==Z.containerInfo||z.stateNode.implementation!==Z.implementation?(z=bx(Z,Q.mode,he),z.return=Q,z):(z=_(z,Z.children||[]),z.return=Q,z)}function oe(Q,z,Z,he,ke){return z===null||z.tag!==7?(z=Ui(Z,Q.mode,he,ke),z.return=Q,z):(z=_(z,Z),z.return=Q,z)}function ue(Q,z,Z){if(typeof z=="string"&&z!==""||typeof z=="number")return z=yx(""+z,Q.mode,Z),z.return=Q,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case P:return Z=Ah(z.type,z.key,z.props,null,Q.mode,Z),Z.ref=eu(Q,null,z),Z.return=Q,Z;case A:return z=bx(z,Q.mode,Z),z.return=Q,z;case X:var he=z._init;return ue(Q,he(z._payload),Z)}if(Ke(z)||te(z))return z=Ui(z,Q.mode,Z,null),z.return=Q,z;ch(Q,z)}return null}function ie(Q,z,Z,he){var ke=z!==null?z.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number")return ke!==null?null:U(Q,z,""+Z,he);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case P:return Z.key===ke?B(Q,z,Z,he):null;case A:return Z.key===ke?ne(Q,z,Z,he):null;case X:return ke=Z._init,ie(Q,z,ke(Z._payload),he)}if(Ke(Z)||te(Z))return ke!==null?null:oe(Q,z,Z,he,null);ch(Q,Z)}return null}function we(Q,z,Z,he,ke){if(typeof he=="string"&&he!==""||typeof he=="number")return Q=Q.get(Z)||null,U(z,Q,""+he,ke);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case P:return Q=Q.get(he.key===null?Z:he.key)||null,B(z,Q,he,ke);case A:return Q=Q.get(he.key===null?Z:he.key)||null,ne(z,Q,he,ke);case X:var Ie=he._init;return we(Q,z,Z,Ie(he._payload),ke)}if(Ke(he)||te(he))return Q=Q.get(Z)||null,oe(z,Q,he,ke,null);ch(z,he)}return null}function je(Q,z,Z,he){for(var ke=null,Ie=null,Pe=z,Ue=z=0,pn=null;Pe!==null&&Ue<Z.length;Ue++){Pe.index>Ue?(pn=Pe,Pe=null):pn=Pe.sibling;var ct=ie(Q,Pe,Z[Ue],he);if(ct===null){Pe===null&&(Pe=pn);break}o&&Pe&&ct.alternate===null&&c(Q,Pe),z=N(ct,z,Ue),Ie===null?ke=ct:Ie.sibling=ct,Ie=ct,Pe=pn}if(Ue===Z.length)return f(Q,Pe),Mt&&Pi(Q,Ue),ke;if(Pe===null){for(;Ue<Z.length;Ue++)Pe=ue(Q,Z[Ue],he),Pe!==null&&(z=N(Pe,z,Ue),Ie===null?ke=Pe:Ie.sibling=Pe,Ie=Pe);return Mt&&Pi(Q,Ue),ke}for(Pe=x(Q,Pe);Ue<Z.length;Ue++)pn=we(Pe,Q,Ue,Z[Ue],he),pn!==null&&(o&&pn.alternate!==null&&Pe.delete(pn.key===null?Ue:pn.key),z=N(pn,z,Ue),Ie===null?ke=pn:Ie.sibling=pn,Ie=pn);return o&&Pe.forEach(function(Ua){return c(Q,Ua)}),Mt&&Pi(Q,Ue),ke}function Ne(Q,z,Z,he){var ke=te(Z);if(typeof ke!="function")throw Error(n(150));if(Z=ke.call(Z),Z==null)throw Error(n(151));for(var Ie=ke=null,Pe=z,Ue=z=0,pn=null,ct=Z.next();Pe!==null&&!ct.done;Ue++,ct=Z.next()){Pe.index>Ue?(pn=Pe,Pe=null):pn=Pe.sibling;var Ua=ie(Q,Pe,ct.value,he);if(Ua===null){Pe===null&&(Pe=pn);break}o&&Pe&&Ua.alternate===null&&c(Q,Pe),z=N(Ua,z,Ue),Ie===null?ke=Ua:Ie.sibling=Ua,Ie=Ua,Pe=pn}if(ct.done)return f(Q,Pe),Mt&&Pi(Q,Ue),ke;if(Pe===null){for(;!ct.done;Ue++,ct=Z.next())ct=ue(Q,ct.value,he),ct!==null&&(z=N(ct,z,Ue),Ie===null?ke=ct:Ie.sibling=ct,Ie=ct);return Mt&&Pi(Q,Ue),ke}for(Pe=x(Q,Pe);!ct.done;Ue++,ct=Z.next())ct=we(Pe,Q,Ue,ct.value,he),ct!==null&&(o&&ct.alternate!==null&&Pe.delete(ct.key===null?Ue:ct.key),z=N(ct,z,Ue),Ie===null?ke=ct:Ie.sibling=ct,Ie=ct);return o&&Pe.forEach(function($I){return c(Q,$I)}),Mt&&Pi(Q,Ue),ke}function en(Q,z,Z,he){if(typeof Z=="object"&&Z!==null&&Z.type===T&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case P:e:{for(var ke=Z.key,Ie=z;Ie!==null;){if(Ie.key===ke){if(ke=Z.type,ke===T){if(Ie.tag===7){f(Q,Ie.sibling),z=_(Ie,Z.props.children),z.return=Q,Q=z;break e}}else if(Ie.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===X&&c_(ke)===Ie.type){f(Q,Ie.sibling),z=_(Ie,Z.props),z.ref=eu(Q,Ie,Z),z.return=Q,Q=z;break e}f(Q,Ie);break}else c(Q,Ie);Ie=Ie.sibling}Z.type===T?(z=Ui(Z.props.children,Q.mode,he,Z.key),z.return=Q,Q=z):(he=Ah(Z.type,Z.key,Z.props,null,Q.mode,he),he.ref=eu(Q,z,Z),he.return=Q,Q=he)}return I(Q);case A:e:{for(Ie=Z.key;z!==null;){if(z.key===Ie)if(z.tag===4&&z.stateNode.containerInfo===Z.containerInfo&&z.stateNode.implementation===Z.implementation){f(Q,z.sibling),z=_(z,Z.children||[]),z.return=Q,Q=z;break e}else{f(Q,z);break}else c(Q,z);z=z.sibling}z=bx(Z,Q.mode,he),z.return=Q,Q=z}return I(Q);case X:return Ie=Z._init,en(Q,z,Ie(Z._payload),he)}if(Ke(Z))return je(Q,z,Z,he);if(te(Z))return Ne(Q,z,Z,he);ch(Q,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"?(Z=""+Z,z!==null&&z.tag===6?(f(Q,z.sibling),z=_(z,Z),z.return=Q,Q=z):(f(Q,z),z=yx(Z,Q.mode,he),z.return=Q,Q=z),I(Q)):f(Q,z)}return en}var tl=u_(!0),d_=u_(!1),uh=Ta(null),dh=null,nl=null,Cg=null;function Tg(){Cg=nl=dh=null}function Rg(o){var c=uh.current;Pt(uh),o._currentValue=c}function Ig(o,c,f){for(;o!==null;){var x=o.alternate;if((o.childLanes&c)!==c?(o.childLanes|=c,x!==null&&(x.childLanes|=c)):x!==null&&(x.childLanes&c)!==c&&(x.childLanes|=c),o===f)break;o=o.return}}function rl(o,c){dh=o,Cg=nl=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&c)!==0&&(Zn=!0),o.firstContext=null)}function Pr(o){var c=o._currentValue;if(Cg!==o)if(o={context:o,memoizedValue:c,next:null},nl===null){if(dh===null)throw Error(n(308));nl=o,dh.dependencies={lanes:0,firstContext:o}}else nl=nl.next=o;return c}var Ai=null;function Pg(o){Ai===null?Ai=[o]:Ai.push(o)}function h_(o,c,f,x){var _=c.interleaved;return _===null?(f.next=f,Pg(c)):(f.next=_.next,_.next=f),c.interleaved=f,qs(o,x)}function qs(o,c){o.lanes|=c;var f=o.alternate;for(f!==null&&(f.lanes|=c),f=o,o=o.return;o!==null;)o.childLanes|=c,f=o.alternate,f!==null&&(f.childLanes|=c),f=o,o=o.return;return f.tag===3?f.stateNode:null}var Pa=!1;function Ag(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function f_(o,c){o=o.updateQueue,c.updateQueue===o&&(c.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function Bs(o,c){return{eventTime:o,lane:c,tag:0,payload:null,callback:null,next:null}}function Aa(o,c,f){var x=o.updateQueue;if(x===null)return null;if(x=x.shared,(it&2)!==0){var _=x.pending;return _===null?c.next=c:(c.next=_.next,_.next=c),x.pending=c,qs(o,f)}return _=x.interleaved,_===null?(c.next=c,Pg(x)):(c.next=_.next,_.next=c),x.interleaved=c,qs(o,f)}function hh(o,c,f){if(c=c.updateQueue,c!==null&&(c=c.shared,(f&4194240)!==0)){var x=c.lanes;x&=o.pendingLanes,f|=x,c.lanes=f,Vp(o,f)}}function m_(o,c){var f=o.updateQueue,x=o.alternate;if(x!==null&&(x=x.updateQueue,f===x)){var _=null,N=null;if(f=f.firstBaseUpdate,f!==null){do{var I={eventTime:f.eventTime,lane:f.lane,tag:f.tag,payload:f.payload,callback:f.callback,next:null};N===null?_=N=I:N=N.next=I,f=f.next}while(f!==null);N===null?_=N=c:N=N.next=c}else _=N=c;f={baseState:x.baseState,firstBaseUpdate:_,lastBaseUpdate:N,shared:x.shared,effects:x.effects},o.updateQueue=f;return}o=f.lastBaseUpdate,o===null?f.firstBaseUpdate=c:o.next=c,f.lastBaseUpdate=c}function fh(o,c,f,x){var _=o.updateQueue;Pa=!1;var N=_.firstBaseUpdate,I=_.lastBaseUpdate,U=_.shared.pending;if(U!==null){_.shared.pending=null;var B=U,ne=B.next;B.next=null,I===null?N=ne:I.next=ne,I=B;var oe=o.alternate;oe!==null&&(oe=oe.updateQueue,U=oe.lastBaseUpdate,U!==I&&(U===null?oe.firstBaseUpdate=ne:U.next=ne,oe.lastBaseUpdate=B))}if(N!==null){var ue=_.baseState;I=0,oe=ne=B=null,U=N;do{var ie=U.lane,we=U.eventTime;if((x&ie)===ie){oe!==null&&(oe=oe.next={eventTime:we,lane:0,tag:U.tag,payload:U.payload,callback:U.callback,next:null});e:{var je=o,Ne=U;switch(ie=c,we=f,Ne.tag){case 1:if(je=Ne.payload,typeof je=="function"){ue=je.call(we,ue,ie);break e}ue=je;break e;case 3:je.flags=je.flags&-65537|128;case 0:if(je=Ne.payload,ie=typeof je=="function"?je.call(we,ue,ie):je,ie==null)break e;ue=V({},ue,ie);break e;case 2:Pa=!0}}U.callback!==null&&U.lane!==0&&(o.flags|=64,ie=_.effects,ie===null?_.effects=[U]:ie.push(U))}else we={eventTime:we,lane:ie,tag:U.tag,payload:U.payload,callback:U.callback,next:null},oe===null?(ne=oe=we,B=ue):oe=oe.next=we,I|=ie;if(U=U.next,U===null){if(U=_.shared.pending,U===null)break;ie=U,U=ie.next,ie.next=null,_.lastBaseUpdate=ie,_.shared.pending=null}}while(!0);if(oe===null&&(B=ue),_.baseState=B,_.firstBaseUpdate=ne,_.lastBaseUpdate=oe,c=_.shared.interleaved,c!==null){_=c;do I|=_.lane,_=_.next;while(_!==c)}else N===null&&(_.shared.lanes=0);Li|=I,o.lanes=I,o.memoizedState=ue}}function p_(o,c,f){if(o=c.effects,c.effects=null,o!==null)for(c=0;c<o.length;c++){var x=o[c],_=x.callback;if(_!==null){if(x.callback=null,x=f,typeof _!="function")throw Error(n(191,_));_.call(x)}}}var tu={},_s=Ta(tu),nu=Ta(tu),ru=Ta(tu);function Oi(o){if(o===tu)throw Error(n(174));return o}function Og(o,c){switch(Nt(ru,c),Nt(nu,o),Nt(_s,tu),o=c.nodeType,o){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:Mp(null,"");break;default:o=o===8?c.parentNode:c,c=o.namespaceURI||null,o=o.tagName,c=Mp(c,o)}Pt(_s),Nt(_s,c)}function sl(){Pt(_s),Pt(nu),Pt(ru)}function g_(o){Oi(ru.current);var c=Oi(_s.current),f=Mp(c,o.type);c!==f&&(Nt(nu,o),Nt(_s,f))}function Mg(o){nu.current===o&&(Pt(_s),Pt(nu))}var Dt=Ta(0);function mh(o){for(var c=o;c!==null;){if(c.tag===13){var f=c.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||f.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var Lg=[];function $g(){for(var o=0;o<Lg.length;o++)Lg[o]._workInProgressVersionPrimary=null;Lg.length=0}var ph=S.ReactCurrentDispatcher,Dg=S.ReactCurrentBatchConfig,Mi=0,Ft=null,on=null,fn=null,gh=!1,su=!1,au=0,aI=0;function Tn(){throw Error(n(321))}function Fg(o,c){if(c===null)return!1;for(var f=0;f<c.length&&f<o.length;f++)if(!Jr(o[f],c[f]))return!1;return!0}function Ug(o,c,f,x,_,N){if(Mi=N,Ft=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,ph.current=o===null||o.memoizedState===null?cI:uI,o=f(x,_),su){N=0;do{if(su=!1,au=0,25<=N)throw Error(n(301));N+=1,fn=on=null,c.updateQueue=null,ph.current=dI,o=f(x,_)}while(su)}if(ph.current=bh,c=on!==null&&on.next!==null,Mi=0,fn=on=Ft=null,gh=!1,c)throw Error(n(300));return o}function qg(){var o=au!==0;return au=0,o}function js(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fn===null?Ft.memoizedState=fn=o:fn=fn.next=o,fn}function Ar(){if(on===null){var o=Ft.alternate;o=o!==null?o.memoizedState:null}else o=on.next;var c=fn===null?Ft.memoizedState:fn.next;if(c!==null)fn=c,on=o;else{if(o===null)throw Error(n(310));on=o,o={memoizedState:on.memoizedState,baseState:on.baseState,baseQueue:on.baseQueue,queue:on.queue,next:null},fn===null?Ft.memoizedState=fn=o:fn=fn.next=o}return fn}function iu(o,c){return typeof c=="function"?c(o):c}function Bg(o){var c=Ar(),f=c.queue;if(f===null)throw Error(n(311));f.lastRenderedReducer=o;var x=on,_=x.baseQueue,N=f.pending;if(N!==null){if(_!==null){var I=_.next;_.next=N.next,N.next=I}x.baseQueue=_=N,f.pending=null}if(_!==null){N=_.next,x=x.baseState;var U=I=null,B=null,ne=N;do{var oe=ne.lane;if((Mi&oe)===oe)B!==null&&(B=B.next={lane:0,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null}),x=ne.hasEagerState?ne.eagerState:o(x,ne.action);else{var ue={lane:oe,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null};B===null?(U=B=ue,I=x):B=B.next=ue,Ft.lanes|=oe,Li|=oe}ne=ne.next}while(ne!==null&&ne!==N);B===null?I=x:B.next=U,Jr(x,c.memoizedState)||(Zn=!0),c.memoizedState=x,c.baseState=I,c.baseQueue=B,f.lastRenderedState=x}if(o=f.interleaved,o!==null){_=o;do N=_.lane,Ft.lanes|=N,Li|=N,_=_.next;while(_!==o)}else _===null&&(f.lanes=0);return[c.memoizedState,f.dispatch]}function Hg(o){var c=Ar(),f=c.queue;if(f===null)throw Error(n(311));f.lastRenderedReducer=o;var x=f.dispatch,_=f.pending,N=c.memoizedState;if(_!==null){f.pending=null;var I=_=_.next;do N=o(N,I.action),I=I.next;while(I!==_);Jr(N,c.memoizedState)||(Zn=!0),c.memoizedState=N,c.baseQueue===null&&(c.baseState=N),f.lastRenderedState=N}return[N,x]}function x_(){}function y_(o,c){var f=Ft,x=Ar(),_=c(),N=!Jr(x.memoizedState,_);if(N&&(x.memoizedState=_,Zn=!0),x=x.queue,zg(w_.bind(null,f,x,o),[o]),x.getSnapshot!==c||N||fn!==null&&fn.memoizedState.tag&1){if(f.flags|=2048,ou(9,v_.bind(null,f,x,_,c),void 0,null),mn===null)throw Error(n(349));(Mi&30)!==0||b_(f,c,_)}return _}function b_(o,c,f){o.flags|=16384,o={getSnapshot:c,value:f},c=Ft.updateQueue,c===null?(c={lastEffect:null,stores:null},Ft.updateQueue=c,c.stores=[o]):(f=c.stores,f===null?c.stores=[o]:f.push(o))}function v_(o,c,f,x){c.value=f,c.getSnapshot=x,__(c)&&j_(o)}function w_(o,c,f){return f(function(){__(c)&&j_(o)})}function __(o){var c=o.getSnapshot;o=o.value;try{var f=c();return!Jr(o,f)}catch{return!0}}function j_(o){var c=qs(o,1);c!==null&&ts(c,o,1,-1)}function N_(o){var c=js();return typeof o=="function"&&(o=o()),c.memoizedState=c.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:iu,lastRenderedState:o},c.queue=o,o=o.dispatch=lI.bind(null,Ft,o),[c.memoizedState,o]}function ou(o,c,f,x){return o={tag:o,create:c,destroy:f,deps:x,next:null},c=Ft.updateQueue,c===null?(c={lastEffect:null,stores:null},Ft.updateQueue=c,c.lastEffect=o.next=o):(f=c.lastEffect,f===null?c.lastEffect=o.next=o:(x=f.next,f.next=o,o.next=x,c.lastEffect=o)),o}function S_(){return Ar().memoizedState}function xh(o,c,f,x){var _=js();Ft.flags|=o,_.memoizedState=ou(1|c,f,void 0,x===void 0?null:x)}function yh(o,c,f,x){var _=Ar();x=x===void 0?null:x;var N=void 0;if(on!==null){var I=on.memoizedState;if(N=I.destroy,x!==null&&Fg(x,I.deps)){_.memoizedState=ou(c,f,N,x);return}}Ft.flags|=o,_.memoizedState=ou(1|c,f,N,x)}function k_(o,c){return xh(8390656,8,o,c)}function zg(o,c){return yh(2048,8,o,c)}function E_(o,c){return yh(4,2,o,c)}function C_(o,c){return yh(4,4,o,c)}function T_(o,c){if(typeof c=="function")return o=o(),c(o),function(){c(null)};if(c!=null)return o=o(),c.current=o,function(){c.current=null}}function R_(o,c,f){return f=f!=null?f.concat([o]):null,yh(4,4,T_.bind(null,c,o),f)}function Wg(){}function I_(o,c){var f=Ar();c=c===void 0?null:c;var x=f.memoizedState;return x!==null&&c!==null&&Fg(c,x[1])?x[0]:(f.memoizedState=[o,c],o)}function P_(o,c){var f=Ar();c=c===void 0?null:c;var x=f.memoizedState;return x!==null&&c!==null&&Fg(c,x[1])?x[0]:(o=o(),f.memoizedState=[o,c],o)}function A_(o,c,f){return(Mi&21)===0?(o.baseState&&(o.baseState=!1,Zn=!0),o.memoizedState=f):(Jr(f,c)||(f=cw(),Ft.lanes|=f,Li|=f,o.baseState=!0),c)}function iI(o,c){var f=pt;pt=f!==0&&4>f?f:4,o(!0);var x=Dg.transition;Dg.transition={};try{o(!1),c()}finally{pt=f,Dg.transition=x}}function O_(){return Ar().memoizedState}function oI(o,c,f){var x=$a(o);if(f={lane:x,action:f,hasEagerState:!1,eagerState:null,next:null},M_(o))L_(c,f);else if(f=h_(o,c,f,x),f!==null){var _=Bn();ts(f,o,x,_),$_(f,c,x)}}function lI(o,c,f){var x=$a(o),_={lane:x,action:f,hasEagerState:!1,eagerState:null,next:null};if(M_(o))L_(c,_);else{var N=o.alternate;if(o.lanes===0&&(N===null||N.lanes===0)&&(N=c.lastRenderedReducer,N!==null))try{var I=c.lastRenderedState,U=N(I,f);if(_.hasEagerState=!0,_.eagerState=U,Jr(U,I)){var B=c.interleaved;B===null?(_.next=_,Pg(c)):(_.next=B.next,B.next=_),c.interleaved=_;return}}catch{}finally{}f=h_(o,c,_,x),f!==null&&(_=Bn(),ts(f,o,x,_),$_(f,c,x))}}function M_(o){var c=o.alternate;return o===Ft||c!==null&&c===Ft}function L_(o,c){su=gh=!0;var f=o.pending;f===null?c.next=c:(c.next=f.next,f.next=c),o.pending=c}function $_(o,c,f){if((f&4194240)!==0){var x=c.lanes;x&=o.pendingLanes,f|=x,c.lanes=f,Vp(o,f)}}var bh={readContext:Pr,useCallback:Tn,useContext:Tn,useEffect:Tn,useImperativeHandle:Tn,useInsertionEffect:Tn,useLayoutEffect:Tn,useMemo:Tn,useReducer:Tn,useRef:Tn,useState:Tn,useDebugValue:Tn,useDeferredValue:Tn,useTransition:Tn,useMutableSource:Tn,useSyncExternalStore:Tn,useId:Tn,unstable_isNewReconciler:!1},cI={readContext:Pr,useCallback:function(o,c){return js().memoizedState=[o,c===void 0?null:c],o},useContext:Pr,useEffect:k_,useImperativeHandle:function(o,c,f){return f=f!=null?f.concat([o]):null,xh(4194308,4,T_.bind(null,c,o),f)},useLayoutEffect:function(o,c){return xh(4194308,4,o,c)},useInsertionEffect:function(o,c){return xh(4,2,o,c)},useMemo:function(o,c){var f=js();return c=c===void 0?null:c,o=o(),f.memoizedState=[o,c],o},useReducer:function(o,c,f){var x=js();return c=f!==void 0?f(c):c,x.memoizedState=x.baseState=c,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:c},x.queue=o,o=o.dispatch=oI.bind(null,Ft,o),[x.memoizedState,o]},useRef:function(o){var c=js();return o={current:o},c.memoizedState=o},useState:N_,useDebugValue:Wg,useDeferredValue:function(o){return js().memoizedState=o},useTransition:function(){var o=N_(!1),c=o[0];return o=iI.bind(null,o[1]),js().memoizedState=o,[c,o]},useMutableSource:function(){},useSyncExternalStore:function(o,c,f){var x=Ft,_=js();if(Mt){if(f===void 0)throw Error(n(407));f=f()}else{if(f=c(),mn===null)throw Error(n(349));(Mi&30)!==0||b_(x,c,f)}_.memoizedState=f;var N={value:f,getSnapshot:c};return _.queue=N,k_(w_.bind(null,x,N,o),[o]),x.flags|=2048,ou(9,v_.bind(null,x,N,f,c),void 0,null),f},useId:function(){var o=js(),c=mn.identifierPrefix;if(Mt){var f=Us,x=Fs;f=(x&~(1<<32-Yr(x)-1)).toString(32)+f,c=":"+c+"R"+f,f=au++,0<f&&(c+="H"+f.toString(32)),c+=":"}else f=aI++,c=":"+c+"r"+f.toString(32)+":";return o.memoizedState=c},unstable_isNewReconciler:!1},uI={readContext:Pr,useCallback:I_,useContext:Pr,useEffect:zg,useImperativeHandle:R_,useInsertionEffect:E_,useLayoutEffect:C_,useMemo:P_,useReducer:Bg,useRef:S_,useState:function(){return Bg(iu)},useDebugValue:Wg,useDeferredValue:function(o){var c=Ar();return A_(c,on.memoizedState,o)},useTransition:function(){var o=Bg(iu)[0],c=Ar().memoizedState;return[o,c]},useMutableSource:x_,useSyncExternalStore:y_,useId:O_,unstable_isNewReconciler:!1},dI={readContext:Pr,useCallback:I_,useContext:Pr,useEffect:zg,useImperativeHandle:R_,useInsertionEffect:E_,useLayoutEffect:C_,useMemo:P_,useReducer:Hg,useRef:S_,useState:function(){return Hg(iu)},useDebugValue:Wg,useDeferredValue:function(o){var c=Ar();return on===null?c.memoizedState=o:A_(c,on.memoizedState,o)},useTransition:function(){var o=Hg(iu)[0],c=Ar().memoizedState;return[o,c]},useMutableSource:x_,useSyncExternalStore:y_,useId:O_,unstable_isNewReconciler:!1};function Xr(o,c){if(o&&o.defaultProps){c=V({},c),o=o.defaultProps;for(var f in o)c[f]===void 0&&(c[f]=o[f]);return c}return c}function Gg(o,c,f,x){c=o.memoizedState,f=f(x,c),f=f==null?c:V({},c,f),o.memoizedState=f,o.lanes===0&&(o.updateQueue.baseState=f)}var vh={isMounted:function(o){return(o=o._reactInternals)?Ci(o)===o:!1},enqueueSetState:function(o,c,f){o=o._reactInternals;var x=Bn(),_=$a(o),N=Bs(x,_);N.payload=c,f!=null&&(N.callback=f),c=Aa(o,N,_),c!==null&&(ts(c,o,_,x),hh(c,o,_))},enqueueReplaceState:function(o,c,f){o=o._reactInternals;var x=Bn(),_=$a(o),N=Bs(x,_);N.tag=1,N.payload=c,f!=null&&(N.callback=f),c=Aa(o,N,_),c!==null&&(ts(c,o,_,x),hh(c,o,_))},enqueueForceUpdate:function(o,c){o=o._reactInternals;var f=Bn(),x=$a(o),_=Bs(f,x);_.tag=2,c!=null&&(_.callback=c),c=Aa(o,_,x),c!==null&&(ts(c,o,x,f),hh(c,o,x))}};function D_(o,c,f,x,_,N,I){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(x,N,I):c.prototype&&c.prototype.isPureReactComponent?!Vc(f,x)||!Vc(_,N):!0}function F_(o,c,f){var x=!1,_=Ra,N=c.contextType;return typeof N=="object"&&N!==null?N=Pr(N):(_=Xn(c)?Ri:Cn.current,x=c.contextTypes,N=(x=x!=null)?Qo(o,_):Ra),c=new c(f,N),o.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=vh,o.stateNode=c,c._reactInternals=o,x&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=_,o.__reactInternalMemoizedMaskedChildContext=N),c}function U_(o,c,f,x){o=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(f,x),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(f,x),c.state!==o&&vh.enqueueReplaceState(c,c.state,null)}function Vg(o,c,f,x){var _=o.stateNode;_.props=f,_.state=o.memoizedState,_.refs={},Ag(o);var N=c.contextType;typeof N=="object"&&N!==null?_.context=Pr(N):(N=Xn(c)?Ri:Cn.current,_.context=Qo(o,N)),_.state=o.memoizedState,N=c.getDerivedStateFromProps,typeof N=="function"&&(Gg(o,c,N,f),_.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(c=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),c!==_.state&&vh.enqueueReplaceState(_,_.state,null),fh(o,f,_,x),_.state=o.memoizedState),typeof _.componentDidMount=="function"&&(o.flags|=4194308)}function al(o,c){try{var f="",x=c;do f+=Ee(x),x=x.return;while(x);var _=f}catch(N){_=`
Error generating stack: `+N.message+`
`+N.stack}return{value:o,source:c,stack:_,digest:null}}function Kg(o,c,f){return{value:o,source:null,stack:f??null,digest:c??null}}function Yg(o,c){try{console.error(c.value)}catch(f){setTimeout(function(){throw f})}}var hI=typeof WeakMap=="function"?WeakMap:Map;function q_(o,c,f){f=Bs(-1,f),f.tag=3,f.payload={element:null};var x=c.value;return f.callback=function(){Eh||(Eh=!0,ux=x),Yg(o,c)},f}function B_(o,c,f){f=Bs(-1,f),f.tag=3;var x=o.type.getDerivedStateFromError;if(typeof x=="function"){var _=c.value;f.payload=function(){return x(_)},f.callback=function(){Yg(o,c)}}var N=o.stateNode;return N!==null&&typeof N.componentDidCatch=="function"&&(f.callback=function(){Yg(o,c),typeof x!="function"&&(Ma===null?Ma=new Set([this]):Ma.add(this));var I=c.stack;this.componentDidCatch(c.value,{componentStack:I!==null?I:""})}),f}function H_(o,c,f){var x=o.pingCache;if(x===null){x=o.pingCache=new hI;var _=new Set;x.set(c,_)}else _=x.get(c),_===void 0&&(_=new Set,x.set(c,_));_.has(f)||(_.add(f),o=kI.bind(null,o,c,f),c.then(o,o))}function z_(o){do{var c;if((c=o.tag===13)&&(c=o.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return o;o=o.return}while(o!==null);return null}function W_(o,c,f,x,_){return(o.mode&1)===0?(o===c?o.flags|=65536:(o.flags|=128,f.flags|=131072,f.flags&=-52805,f.tag===1&&(f.alternate===null?f.tag=17:(c=Bs(-1,1),c.tag=2,Aa(f,c,1))),f.lanes|=1),o):(o.flags|=65536,o.lanes=_,o)}var fI=S.ReactCurrentOwner,Zn=!1;function qn(o,c,f,x){c.child=o===null?d_(c,null,f,x):tl(c,o.child,f,x)}function G_(o,c,f,x,_){f=f.render;var N=c.ref;return rl(c,_),x=Ug(o,c,f,x,N,_),f=qg(),o!==null&&!Zn?(c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~_,Hs(o,c,_)):(Mt&&f&&jg(c),c.flags|=1,qn(o,c,x,_),c.child)}function V_(o,c,f,x,_){if(o===null){var N=f.type;return typeof N=="function"&&!xx(N)&&N.defaultProps===void 0&&f.compare===null&&f.defaultProps===void 0?(c.tag=15,c.type=N,K_(o,c,N,x,_)):(o=Ah(f.type,null,x,c,c.mode,_),o.ref=c.ref,o.return=c,c.child=o)}if(N=o.child,(o.lanes&_)===0){var I=N.memoizedProps;if(f=f.compare,f=f!==null?f:Vc,f(I,x)&&o.ref===c.ref)return Hs(o,c,_)}return c.flags|=1,o=Fa(N,x),o.ref=c.ref,o.return=c,c.child=o}function K_(o,c,f,x,_){if(o!==null){var N=o.memoizedProps;if(Vc(N,x)&&o.ref===c.ref)if(Zn=!1,c.pendingProps=x=N,(o.lanes&_)!==0)(o.flags&131072)!==0&&(Zn=!0);else return c.lanes=o.lanes,Hs(o,c,_)}return Jg(o,c,f,x,_)}function Y_(o,c,f){var x=c.pendingProps,_=x.children,N=o!==null?o.memoizedState:null;if(x.mode==="hidden")if((c.mode&1)===0)c.memoizedState={baseLanes:0,cachePool:null,transitions:null},Nt(ol,xr),xr|=f;else{if((f&1073741824)===0)return o=N!==null?N.baseLanes|f:f,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:o,cachePool:null,transitions:null},c.updateQueue=null,Nt(ol,xr),xr|=o,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},x=N!==null?N.baseLanes:f,Nt(ol,xr),xr|=x}else N!==null?(x=N.baseLanes|f,c.memoizedState=null):x=f,Nt(ol,xr),xr|=x;return qn(o,c,_,f),c.child}function J_(o,c){var f=c.ref;(o===null&&f!==null||o!==null&&o.ref!==f)&&(c.flags|=512,c.flags|=2097152)}function Jg(o,c,f,x,_){var N=Xn(f)?Ri:Cn.current;return N=Qo(c,N),rl(c,_),f=Ug(o,c,f,x,N,_),x=qg(),o!==null&&!Zn?(c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~_,Hs(o,c,_)):(Mt&&x&&jg(c),c.flags|=1,qn(o,c,f,_),c.child)}function Q_(o,c,f,x,_){if(Xn(f)){var N=!0;sh(c)}else N=!1;if(rl(c,_),c.stateNode===null)_h(o,c),F_(c,f,x),Vg(c,f,x,_),x=!0;else if(o===null){var I=c.stateNode,U=c.memoizedProps;I.props=U;var B=I.context,ne=f.contextType;typeof ne=="object"&&ne!==null?ne=Pr(ne):(ne=Xn(f)?Ri:Cn.current,ne=Qo(c,ne));var oe=f.getDerivedStateFromProps,ue=typeof oe=="function"||typeof I.getSnapshotBeforeUpdate=="function";ue||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(U!==x||B!==ne)&&U_(c,I,x,ne),Pa=!1;var ie=c.memoizedState;I.state=ie,fh(c,x,I,_),B=c.memoizedState,U!==x||ie!==B||Qn.current||Pa?(typeof oe=="function"&&(Gg(c,f,oe,x),B=c.memoizedState),(U=Pa||D_(c,f,U,x,ie,B,ne))?(ue||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount()),typeof I.componentDidMount=="function"&&(c.flags|=4194308)):(typeof I.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=x,c.memoizedState=B),I.props=x,I.state=B,I.context=ne,x=U):(typeof I.componentDidMount=="function"&&(c.flags|=4194308),x=!1)}else{I=c.stateNode,f_(o,c),U=c.memoizedProps,ne=c.type===c.elementType?U:Xr(c.type,U),I.props=ne,ue=c.pendingProps,ie=I.context,B=f.contextType,typeof B=="object"&&B!==null?B=Pr(B):(B=Xn(f)?Ri:Cn.current,B=Qo(c,B));var we=f.getDerivedStateFromProps;(oe=typeof we=="function"||typeof I.getSnapshotBeforeUpdate=="function")||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(U!==ue||ie!==B)&&U_(c,I,x,B),Pa=!1,ie=c.memoizedState,I.state=ie,fh(c,x,I,_);var je=c.memoizedState;U!==ue||ie!==je||Qn.current||Pa?(typeof we=="function"&&(Gg(c,f,we,x),je=c.memoizedState),(ne=Pa||D_(c,f,ne,x,ie,je,B)||!1)?(oe||typeof I.UNSAFE_componentWillUpdate!="function"&&typeof I.componentWillUpdate!="function"||(typeof I.componentWillUpdate=="function"&&I.componentWillUpdate(x,je,B),typeof I.UNSAFE_componentWillUpdate=="function"&&I.UNSAFE_componentWillUpdate(x,je,B)),typeof I.componentDidUpdate=="function"&&(c.flags|=4),typeof I.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof I.componentDidUpdate!="function"||U===o.memoizedProps&&ie===o.memoizedState||(c.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||U===o.memoizedProps&&ie===o.memoizedState||(c.flags|=1024),c.memoizedProps=x,c.memoizedState=je),I.props=x,I.state=je,I.context=B,x=ne):(typeof I.componentDidUpdate!="function"||U===o.memoizedProps&&ie===o.memoizedState||(c.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||U===o.memoizedProps&&ie===o.memoizedState||(c.flags|=1024),x=!1)}return Qg(o,c,f,x,N,_)}function Qg(o,c,f,x,_,N){J_(o,c);var I=(c.flags&128)!==0;if(!x&&!I)return _&&n_(c,f,!1),Hs(o,c,N);x=c.stateNode,fI.current=c;var U=I&&typeof f.getDerivedStateFromError!="function"?null:x.render();return c.flags|=1,o!==null&&I?(c.child=tl(c,o.child,null,N),c.child=tl(c,null,U,N)):qn(o,c,U,N),c.memoizedState=x.state,_&&n_(c,f,!0),c.child}function X_(o){var c=o.stateNode;c.pendingContext?e_(o,c.pendingContext,c.pendingContext!==c.context):c.context&&e_(o,c.context,!1),Og(o,c.containerInfo)}function Z_(o,c,f,x,_){return el(),Eg(_),c.flags|=256,qn(o,c,f,x),c.child}var Xg={dehydrated:null,treeContext:null,retryLane:0};function Zg(o){return{baseLanes:o,cachePool:null,transitions:null}}function ej(o,c,f){var x=c.pendingProps,_=Dt.current,N=!1,I=(c.flags&128)!==0,U;if((U=I)||(U=o!==null&&o.memoizedState===null?!1:(_&2)!==0),U?(N=!0,c.flags&=-129):(o===null||o.memoizedState!==null)&&(_|=1),Nt(Dt,_&1),o===null)return kg(c),o=c.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((c.mode&1)===0?c.lanes=1:o.data==="$!"?c.lanes=8:c.lanes=1073741824,null):(I=x.children,o=x.fallback,N?(x=c.mode,N=c.child,I={mode:"hidden",children:I},(x&1)===0&&N!==null?(N.childLanes=0,N.pendingProps=I):N=Oh(I,x,0,null),o=Ui(o,x,f,null),N.return=c,o.return=c,N.sibling=o,c.child=N,c.child.memoizedState=Zg(f),c.memoizedState=Xg,o):ex(c,I));if(_=o.memoizedState,_!==null&&(U=_.dehydrated,U!==null))return mI(o,c,I,x,U,_,f);if(N){N=x.fallback,I=c.mode,_=o.child,U=_.sibling;var B={mode:"hidden",children:x.children};return(I&1)===0&&c.child!==_?(x=c.child,x.childLanes=0,x.pendingProps=B,c.deletions=null):(x=Fa(_,B),x.subtreeFlags=_.subtreeFlags&14680064),U!==null?N=Fa(U,N):(N=Ui(N,I,f,null),N.flags|=2),N.return=c,x.return=c,x.sibling=N,c.child=x,x=N,N=c.child,I=o.child.memoizedState,I=I===null?Zg(f):{baseLanes:I.baseLanes|f,cachePool:null,transitions:I.transitions},N.memoizedState=I,N.childLanes=o.childLanes&~f,c.memoizedState=Xg,x}return N=o.child,o=N.sibling,x=Fa(N,{mode:"visible",children:x.children}),(c.mode&1)===0&&(x.lanes=f),x.return=c,x.sibling=null,o!==null&&(f=c.deletions,f===null?(c.deletions=[o],c.flags|=16):f.push(o)),c.child=x,c.memoizedState=null,x}function ex(o,c){return c=Oh({mode:"visible",children:c},o.mode,0,null),c.return=o,o.child=c}function wh(o,c,f,x){return x!==null&&Eg(x),tl(c,o.child,null,f),o=ex(c,c.pendingProps.children),o.flags|=2,c.memoizedState=null,o}function mI(o,c,f,x,_,N,I){if(f)return c.flags&256?(c.flags&=-257,x=Kg(Error(n(422))),wh(o,c,I,x)):c.memoizedState!==null?(c.child=o.child,c.flags|=128,null):(N=x.fallback,_=c.mode,x=Oh({mode:"visible",children:x.children},_,0,null),N=Ui(N,_,I,null),N.flags|=2,x.return=c,N.return=c,x.sibling=N,c.child=x,(c.mode&1)!==0&&tl(c,o.child,null,I),c.child.memoizedState=Zg(I),c.memoizedState=Xg,N);if((c.mode&1)===0)return wh(o,c,I,null);if(_.data==="$!"){if(x=_.nextSibling&&_.nextSibling.dataset,x)var U=x.dgst;return x=U,N=Error(n(419)),x=Kg(N,x,void 0),wh(o,c,I,x)}if(U=(I&o.childLanes)!==0,Zn||U){if(x=mn,x!==null){switch(I&-I){case 4:_=2;break;case 16:_=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:_=32;break;case 536870912:_=268435456;break;default:_=0}_=(_&(x.suspendedLanes|I))!==0?0:_,_!==0&&_!==N.retryLane&&(N.retryLane=_,qs(o,_),ts(x,o,_,-1))}return gx(),x=Kg(Error(n(421))),wh(o,c,I,x)}return _.data==="$?"?(c.flags|=128,c.child=o.child,c=EI.bind(null,o),_._reactRetry=c,null):(o=N.treeContext,gr=Ca(_.nextSibling),pr=c,Mt=!0,Qr=null,o!==null&&(Rr[Ir++]=Fs,Rr[Ir++]=Us,Rr[Ir++]=Ii,Fs=o.id,Us=o.overflow,Ii=c),c=ex(c,x.children),c.flags|=4096,c)}function tj(o,c,f){o.lanes|=c;var x=o.alternate;x!==null&&(x.lanes|=c),Ig(o.return,c,f)}function tx(o,c,f,x,_){var N=o.memoizedState;N===null?o.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:x,tail:f,tailMode:_}:(N.isBackwards=c,N.rendering=null,N.renderingStartTime=0,N.last=x,N.tail=f,N.tailMode=_)}function nj(o,c,f){var x=c.pendingProps,_=x.revealOrder,N=x.tail;if(qn(o,c,x.children,f),x=Dt.current,(x&2)!==0)x=x&1|2,c.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=c.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&tj(o,f,c);else if(o.tag===19)tj(o,f,c);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===c)break e;for(;o.sibling===null;){if(o.return===null||o.return===c)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}x&=1}if(Nt(Dt,x),(c.mode&1)===0)c.memoizedState=null;else switch(_){case"forwards":for(f=c.child,_=null;f!==null;)o=f.alternate,o!==null&&mh(o)===null&&(_=f),f=f.sibling;f=_,f===null?(_=c.child,c.child=null):(_=f.sibling,f.sibling=null),tx(c,!1,_,f,N);break;case"backwards":for(f=null,_=c.child,c.child=null;_!==null;){if(o=_.alternate,o!==null&&mh(o)===null){c.child=_;break}o=_.sibling,_.sibling=f,f=_,_=o}tx(c,!0,f,null,N);break;case"together":tx(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function _h(o,c){(c.mode&1)===0&&o!==null&&(o.alternate=null,c.alternate=null,c.flags|=2)}function Hs(o,c,f){if(o!==null&&(c.dependencies=o.dependencies),Li|=c.lanes,(f&c.childLanes)===0)return null;if(o!==null&&c.child!==o.child)throw Error(n(153));if(c.child!==null){for(o=c.child,f=Fa(o,o.pendingProps),c.child=f,f.return=c;o.sibling!==null;)o=o.sibling,f=f.sibling=Fa(o,o.pendingProps),f.return=c;f.sibling=null}return c.child}function pI(o,c,f){switch(c.tag){case 3:X_(c),el();break;case 5:g_(c);break;case 1:Xn(c.type)&&sh(c);break;case 4:Og(c,c.stateNode.containerInfo);break;case 10:var x=c.type._context,_=c.memoizedProps.value;Nt(uh,x._currentValue),x._currentValue=_;break;case 13:if(x=c.memoizedState,x!==null)return x.dehydrated!==null?(Nt(Dt,Dt.current&1),c.flags|=128,null):(f&c.child.childLanes)!==0?ej(o,c,f):(Nt(Dt,Dt.current&1),o=Hs(o,c,f),o!==null?o.sibling:null);Nt(Dt,Dt.current&1);break;case 19:if(x=(f&c.childLanes)!==0,(o.flags&128)!==0){if(x)return nj(o,c,f);c.flags|=128}if(_=c.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),Nt(Dt,Dt.current),x)break;return null;case 22:case 23:return c.lanes=0,Y_(o,c,f)}return Hs(o,c,f)}var rj,nx,sj,aj;rj=function(o,c){for(var f=c.child;f!==null;){if(f.tag===5||f.tag===6)o.appendChild(f.stateNode);else if(f.tag!==4&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return;f=f.return}f.sibling.return=f.return,f=f.sibling}},nx=function(){},sj=function(o,c,f,x){var _=o.memoizedProps;if(_!==x){o=c.stateNode,Oi(_s.current);var N=null;switch(f){case"input":_=Ve(o,_),x=Ve(o,x),N=[];break;case"select":_=V({},_,{value:void 0}),x=V({},x,{value:void 0}),N=[];break;case"textarea":_=Qe(o,_),x=Qe(o,x),N=[];break;default:typeof _.onClick!="function"&&typeof x.onClick=="function"&&(o.onclick=th)}Lp(f,x);var I;f=null;for(ne in _)if(!x.hasOwnProperty(ne)&&_.hasOwnProperty(ne)&&_[ne]!=null)if(ne==="style"){var U=_[ne];for(I in U)U.hasOwnProperty(I)&&(f||(f={}),f[I]="")}else ne!=="dangerouslySetInnerHTML"&&ne!=="children"&&ne!=="suppressContentEditableWarning"&&ne!=="suppressHydrationWarning"&&ne!=="autoFocus"&&(a.hasOwnProperty(ne)?N||(N=[]):(N=N||[]).push(ne,null));for(ne in x){var B=x[ne];if(U=_!=null?_[ne]:void 0,x.hasOwnProperty(ne)&&B!==U&&(B!=null||U!=null))if(ne==="style")if(U){for(I in U)!U.hasOwnProperty(I)||B&&B.hasOwnProperty(I)||(f||(f={}),f[I]="");for(I in B)B.hasOwnProperty(I)&&U[I]!==B[I]&&(f||(f={}),f[I]=B[I])}else f||(N||(N=[]),N.push(ne,f)),f=B;else ne==="dangerouslySetInnerHTML"?(B=B?B.__html:void 0,U=U?U.__html:void 0,B!=null&&U!==B&&(N=N||[]).push(ne,B)):ne==="children"?typeof B!="string"&&typeof B!="number"||(N=N||[]).push(ne,""+B):ne!=="suppressContentEditableWarning"&&ne!=="suppressHydrationWarning"&&(a.hasOwnProperty(ne)?(B!=null&&ne==="onScroll"&&It("scroll",o),N||U===B||(N=[])):(N=N||[]).push(ne,B))}f&&(N=N||[]).push("style",f);var ne=N;(c.updateQueue=ne)&&(c.flags|=4)}},aj=function(o,c,f,x){f!==x&&(c.flags|=4)};function lu(o,c){if(!Mt)switch(o.tailMode){case"hidden":c=o.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?o.tail=null:f.sibling=null;break;case"collapsed":f=o.tail;for(var x=null;f!==null;)f.alternate!==null&&(x=f),f=f.sibling;x===null?c||o.tail===null?o.tail=null:o.tail.sibling=null:x.sibling=null}}function Rn(o){var c=o.alternate!==null&&o.alternate.child===o.child,f=0,x=0;if(c)for(var _=o.child;_!==null;)f|=_.lanes|_.childLanes,x|=_.subtreeFlags&14680064,x|=_.flags&14680064,_.return=o,_=_.sibling;else for(_=o.child;_!==null;)f|=_.lanes|_.childLanes,x|=_.subtreeFlags,x|=_.flags,_.return=o,_=_.sibling;return o.subtreeFlags|=x,o.childLanes=f,c}function gI(o,c,f){var x=c.pendingProps;switch(Ng(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rn(c),null;case 1:return Xn(c.type)&&rh(),Rn(c),null;case 3:return x=c.stateNode,sl(),Pt(Qn),Pt(Cn),$g(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(o===null||o.child===null)&&(lh(c)?c.flags|=4:o===null||o.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,Qr!==null&&(fx(Qr),Qr=null))),nx(o,c),Rn(c),null;case 5:Mg(c);var _=Oi(ru.current);if(f=c.type,o!==null&&c.stateNode!=null)sj(o,c,f,x,_),o.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!x){if(c.stateNode===null)throw Error(n(166));return Rn(c),null}if(o=Oi(_s.current),lh(c)){x=c.stateNode,f=c.type;var N=c.memoizedProps;switch(x[ws]=c,x[Xc]=N,o=(c.mode&1)!==0,f){case"dialog":It("cancel",x),It("close",x);break;case"iframe":case"object":case"embed":It("load",x);break;case"video":case"audio":for(_=0;_<Yc.length;_++)It(Yc[_],x);break;case"source":It("error",x);break;case"img":case"image":case"link":It("error",x),It("load",x);break;case"details":It("toggle",x);break;case"input":xt(x,N),It("invalid",x);break;case"select":x._wrapperState={wasMultiple:!!N.multiple},It("invalid",x);break;case"textarea":bn(x,N),It("invalid",x)}Lp(f,N),_=null;for(var I in N)if(N.hasOwnProperty(I)){var U=N[I];I==="children"?typeof U=="string"?x.textContent!==U&&(N.suppressHydrationWarning!==!0&&eh(x.textContent,U,o),_=["children",U]):typeof U=="number"&&x.textContent!==""+U&&(N.suppressHydrationWarning!==!0&&eh(x.textContent,U,o),_=["children",""+U]):a.hasOwnProperty(I)&&U!=null&&I==="onScroll"&&It("scroll",x)}switch(f){case"input":En(x),bt(x,N,!0);break;case"textarea":En(x),lt(x);break;case"select":case"option":break;default:typeof N.onClick=="function"&&(x.onclick=th)}x=_,c.updateQueue=x,x!==null&&(c.flags|=4)}else{I=_.nodeType===9?_:_.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=Fo(f)),o==="http://www.w3.org/1999/xhtml"?f==="script"?(o=I.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof x.is=="string"?o=I.createElement(f,{is:x.is}):(o=I.createElement(f),f==="select"&&(I=o,x.multiple?I.multiple=!0:x.size&&(I.size=x.size))):o=I.createElementNS(o,f),o[ws]=c,o[Xc]=x,rj(o,c,!1,!1),c.stateNode=o;e:{switch(I=$p(f,x),f){case"dialog":It("cancel",o),It("close",o),_=x;break;case"iframe":case"object":case"embed":It("load",o),_=x;break;case"video":case"audio":for(_=0;_<Yc.length;_++)It(Yc[_],o);_=x;break;case"source":It("error",o),_=x;break;case"img":case"image":case"link":It("error",o),It("load",o),_=x;break;case"details":It("toggle",o),_=x;break;case"input":xt(o,x),_=Ve(o,x),It("invalid",o);break;case"option":_=x;break;case"select":o._wrapperState={wasMultiple:!!x.multiple},_=V({},x,{value:void 0}),It("invalid",o);break;case"textarea":bn(o,x),_=Qe(o,x),It("invalid",o);break;default:_=x}Lp(f,_),U=_;for(N in U)if(U.hasOwnProperty(N)){var B=U[N];N==="style"?Kv(o,B):N==="dangerouslySetInnerHTML"?(B=B?B.__html:void 0,B!=null&&Gv(o,B)):N==="children"?typeof B=="string"?(f!=="textarea"||B!=="")&&Rc(o,B):typeof B=="number"&&Rc(o,""+B):N!=="suppressContentEditableWarning"&&N!=="suppressHydrationWarning"&&N!=="autoFocus"&&(a.hasOwnProperty(N)?B!=null&&N==="onScroll"&&It("scroll",o):B!=null&&k(o,N,B,I))}switch(f){case"input":En(o),bt(o,x,!1);break;case"textarea":En(o),lt(o);break;case"option":x.value!=null&&o.setAttribute("value",""+re(x.value));break;case"select":o.multiple=!!x.multiple,N=x.value,N!=null?$t(o,!!x.multiple,N,!1):x.defaultValue!=null&&$t(o,!!x.multiple,x.defaultValue,!0);break;default:typeof _.onClick=="function"&&(o.onclick=th)}switch(f){case"button":case"input":case"select":case"textarea":x=!!x.autoFocus;break e;case"img":x=!0;break e;default:x=!1}}x&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return Rn(c),null;case 6:if(o&&c.stateNode!=null)aj(o,c,o.memoizedProps,x);else{if(typeof x!="string"&&c.stateNode===null)throw Error(n(166));if(f=Oi(ru.current),Oi(_s.current),lh(c)){if(x=c.stateNode,f=c.memoizedProps,x[ws]=c,(N=x.nodeValue!==f)&&(o=pr,o!==null))switch(o.tag){case 3:eh(x.nodeValue,f,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&eh(x.nodeValue,f,(o.mode&1)!==0)}N&&(c.flags|=4)}else x=(f.nodeType===9?f:f.ownerDocument).createTextNode(x),x[ws]=c,c.stateNode=x}return Rn(c),null;case 13:if(Pt(Dt),x=c.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(Mt&&gr!==null&&(c.mode&1)!==0&&(c.flags&128)===0)l_(),el(),c.flags|=98560,N=!1;else if(N=lh(c),x!==null&&x.dehydrated!==null){if(o===null){if(!N)throw Error(n(318));if(N=c.memoizedState,N=N!==null?N.dehydrated:null,!N)throw Error(n(317));N[ws]=c}else el(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Rn(c),N=!1}else Qr!==null&&(fx(Qr),Qr=null),N=!0;if(!N)return c.flags&65536?c:null}return(c.flags&128)!==0?(c.lanes=f,c):(x=x!==null,x!==(o!==null&&o.memoizedState!==null)&&x&&(c.child.flags|=8192,(c.mode&1)!==0&&(o===null||(Dt.current&1)!==0?ln===0&&(ln=3):gx())),c.updateQueue!==null&&(c.flags|=4),Rn(c),null);case 4:return sl(),nx(o,c),o===null&&Jc(c.stateNode.containerInfo),Rn(c),null;case 10:return Rg(c.type._context),Rn(c),null;case 17:return Xn(c.type)&&rh(),Rn(c),null;case 19:if(Pt(Dt),N=c.memoizedState,N===null)return Rn(c),null;if(x=(c.flags&128)!==0,I=N.rendering,I===null)if(x)lu(N,!1);else{if(ln!==0||o!==null&&(o.flags&128)!==0)for(o=c.child;o!==null;){if(I=mh(o),I!==null){for(c.flags|=128,lu(N,!1),x=I.updateQueue,x!==null&&(c.updateQueue=x,c.flags|=4),c.subtreeFlags=0,x=f,f=c.child;f!==null;)N=f,o=x,N.flags&=14680066,I=N.alternate,I===null?(N.childLanes=0,N.lanes=o,N.child=null,N.subtreeFlags=0,N.memoizedProps=null,N.memoizedState=null,N.updateQueue=null,N.dependencies=null,N.stateNode=null):(N.childLanes=I.childLanes,N.lanes=I.lanes,N.child=I.child,N.subtreeFlags=0,N.deletions=null,N.memoizedProps=I.memoizedProps,N.memoizedState=I.memoizedState,N.updateQueue=I.updateQueue,N.type=I.type,o=I.dependencies,N.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),f=f.sibling;return Nt(Dt,Dt.current&1|2),c.child}o=o.sibling}N.tail!==null&&Zt()>ll&&(c.flags|=128,x=!0,lu(N,!1),c.lanes=4194304)}else{if(!x)if(o=mh(I),o!==null){if(c.flags|=128,x=!0,f=o.updateQueue,f!==null&&(c.updateQueue=f,c.flags|=4),lu(N,!0),N.tail===null&&N.tailMode==="hidden"&&!I.alternate&&!Mt)return Rn(c),null}else 2*Zt()-N.renderingStartTime>ll&&f!==1073741824&&(c.flags|=128,x=!0,lu(N,!1),c.lanes=4194304);N.isBackwards?(I.sibling=c.child,c.child=I):(f=N.last,f!==null?f.sibling=I:c.child=I,N.last=I)}return N.tail!==null?(c=N.tail,N.rendering=c,N.tail=c.sibling,N.renderingStartTime=Zt(),c.sibling=null,f=Dt.current,Nt(Dt,x?f&1|2:f&1),c):(Rn(c),null);case 22:case 23:return px(),x=c.memoizedState!==null,o!==null&&o.memoizedState!==null!==x&&(c.flags|=8192),x&&(c.mode&1)!==0?(xr&1073741824)!==0&&(Rn(c),c.subtreeFlags&6&&(c.flags|=8192)):Rn(c),null;case 24:return null;case 25:return null}throw Error(n(156,c.tag))}function xI(o,c){switch(Ng(c),c.tag){case 1:return Xn(c.type)&&rh(),o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 3:return sl(),Pt(Qn),Pt(Cn),$g(),o=c.flags,(o&65536)!==0&&(o&128)===0?(c.flags=o&-65537|128,c):null;case 5:return Mg(c),null;case 13:if(Pt(Dt),o=c.memoizedState,o!==null&&o.dehydrated!==null){if(c.alternate===null)throw Error(n(340));el()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 19:return Pt(Dt),null;case 4:return sl(),null;case 10:return Rg(c.type._context),null;case 22:case 23:return px(),null;case 24:return null;default:return null}}var jh=!1,In=!1,yI=typeof WeakSet=="function"?WeakSet:Set,_e=null;function il(o,c){var f=o.ref;if(f!==null)if(typeof f=="function")try{f(null)}catch(x){Wt(o,c,x)}else f.current=null}function rx(o,c,f){try{f()}catch(x){Wt(o,c,x)}}var ij=!1;function bI(o,c){if(pg=Hd,o=Dw(),og(o)){if("selectionStart"in o)var f={start:o.selectionStart,end:o.selectionEnd};else e:{f=(f=o.ownerDocument)&&f.defaultView||window;var x=f.getSelection&&f.getSelection();if(x&&x.rangeCount!==0){f=x.anchorNode;var _=x.anchorOffset,N=x.focusNode;x=x.focusOffset;try{f.nodeType,N.nodeType}catch{f=null;break e}var I=0,U=-1,B=-1,ne=0,oe=0,ue=o,ie=null;t:for(;;){for(var we;ue!==f||_!==0&&ue.nodeType!==3||(U=I+_),ue!==N||x!==0&&ue.nodeType!==3||(B=I+x),ue.nodeType===3&&(I+=ue.nodeValue.length),(we=ue.firstChild)!==null;)ie=ue,ue=we;for(;;){if(ue===o)break t;if(ie===f&&++ne===_&&(U=I),ie===N&&++oe===x&&(B=I),(we=ue.nextSibling)!==null)break;ue=ie,ie=ue.parentNode}ue=we}f=U===-1||B===-1?null:{start:U,end:B}}else f=null}f=f||{start:0,end:0}}else f=null;for(gg={focusedElem:o,selectionRange:f},Hd=!1,_e=c;_e!==null;)if(c=_e,o=c.child,(c.subtreeFlags&1028)!==0&&o!==null)o.return=c,_e=o;else for(;_e!==null;){c=_e;try{var je=c.alternate;if((c.flags&1024)!==0)switch(c.tag){case 0:case 11:case 15:break;case 1:if(je!==null){var Ne=je.memoizedProps,en=je.memoizedState,Q=c.stateNode,z=Q.getSnapshotBeforeUpdate(c.elementType===c.type?Ne:Xr(c.type,Ne),en);Q.__reactInternalSnapshotBeforeUpdate=z}break;case 3:var Z=c.stateNode.containerInfo;Z.nodeType===1?Z.textContent="":Z.nodeType===9&&Z.documentElement&&Z.removeChild(Z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(he){Wt(c,c.return,he)}if(o=c.sibling,o!==null){o.return=c.return,_e=o;break}_e=c.return}return je=ij,ij=!1,je}function cu(o,c,f){var x=c.updateQueue;if(x=x!==null?x.lastEffect:null,x!==null){var _=x=x.next;do{if((_.tag&o)===o){var N=_.destroy;_.destroy=void 0,N!==void 0&&rx(c,f,N)}_=_.next}while(_!==x)}}function Nh(o,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var f=c=c.next;do{if((f.tag&o)===o){var x=f.create;f.destroy=x()}f=f.next}while(f!==c)}}function sx(o){var c=o.ref;if(c!==null){var f=o.stateNode;switch(o.tag){case 5:o=f;break;default:o=f}typeof c=="function"?c(o):c.current=o}}function oj(o){var c=o.alternate;c!==null&&(o.alternate=null,oj(c)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(c=o.stateNode,c!==null&&(delete c[ws],delete c[Xc],delete c[vg],delete c[tI],delete c[nI])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function lj(o){return o.tag===5||o.tag===3||o.tag===4}function cj(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||lj(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function ax(o,c,f){var x=o.tag;if(x===5||x===6)o=o.stateNode,c?f.nodeType===8?f.parentNode.insertBefore(o,c):f.insertBefore(o,c):(f.nodeType===8?(c=f.parentNode,c.insertBefore(o,f)):(c=f,c.appendChild(o)),f=f._reactRootContainer,f!=null||c.onclick!==null||(c.onclick=th));else if(x!==4&&(o=o.child,o!==null))for(ax(o,c,f),o=o.sibling;o!==null;)ax(o,c,f),o=o.sibling}function ix(o,c,f){var x=o.tag;if(x===5||x===6)o=o.stateNode,c?f.insertBefore(o,c):f.appendChild(o);else if(x!==4&&(o=o.child,o!==null))for(ix(o,c,f),o=o.sibling;o!==null;)ix(o,c,f),o=o.sibling}var vn=null,Zr=!1;function Oa(o,c,f){for(f=f.child;f!==null;)uj(o,c,f),f=f.sibling}function uj(o,c,f){if(vs&&typeof vs.onCommitFiberUnmount=="function")try{vs.onCommitFiberUnmount($d,f)}catch{}switch(f.tag){case 5:In||il(f,c);case 6:var x=vn,_=Zr;vn=null,Oa(o,c,f),vn=x,Zr=_,vn!==null&&(Zr?(o=vn,f=f.stateNode,o.nodeType===8?o.parentNode.removeChild(f):o.removeChild(f)):vn.removeChild(f.stateNode));break;case 18:vn!==null&&(Zr?(o=vn,f=f.stateNode,o.nodeType===8?bg(o.parentNode,f):o.nodeType===1&&bg(o,f),qc(o)):bg(vn,f.stateNode));break;case 4:x=vn,_=Zr,vn=f.stateNode.containerInfo,Zr=!0,Oa(o,c,f),vn=x,Zr=_;break;case 0:case 11:case 14:case 15:if(!In&&(x=f.updateQueue,x!==null&&(x=x.lastEffect,x!==null))){_=x=x.next;do{var N=_,I=N.destroy;N=N.tag,I!==void 0&&((N&2)!==0||(N&4)!==0)&&rx(f,c,I),_=_.next}while(_!==x)}Oa(o,c,f);break;case 1:if(!In&&(il(f,c),x=f.stateNode,typeof x.componentWillUnmount=="function"))try{x.props=f.memoizedProps,x.state=f.memoizedState,x.componentWillUnmount()}catch(U){Wt(f,c,U)}Oa(o,c,f);break;case 21:Oa(o,c,f);break;case 22:f.mode&1?(In=(x=In)||f.memoizedState!==null,Oa(o,c,f),In=x):Oa(o,c,f);break;default:Oa(o,c,f)}}function dj(o){var c=o.updateQueue;if(c!==null){o.updateQueue=null;var f=o.stateNode;f===null&&(f=o.stateNode=new yI),c.forEach(function(x){var _=CI.bind(null,o,x);f.has(x)||(f.add(x),x.then(_,_))})}}function es(o,c){var f=c.deletions;if(f!==null)for(var x=0;x<f.length;x++){var _=f[x];try{var N=o,I=c,U=I;e:for(;U!==null;){switch(U.tag){case 5:vn=U.stateNode,Zr=!1;break e;case 3:vn=U.stateNode.containerInfo,Zr=!0;break e;case 4:vn=U.stateNode.containerInfo,Zr=!0;break e}U=U.return}if(vn===null)throw Error(n(160));uj(N,I,_),vn=null,Zr=!1;var B=_.alternate;B!==null&&(B.return=null),_.return=null}catch(ne){Wt(_,c,ne)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)hj(c,o),c=c.sibling}function hj(o,c){var f=o.alternate,x=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(es(c,o),Ns(o),x&4){try{cu(3,o,o.return),Nh(3,o)}catch(Ne){Wt(o,o.return,Ne)}try{cu(5,o,o.return)}catch(Ne){Wt(o,o.return,Ne)}}break;case 1:es(c,o),Ns(o),x&512&&f!==null&&il(f,f.return);break;case 5:if(es(c,o),Ns(o),x&512&&f!==null&&il(f,f.return),o.flags&32){var _=o.stateNode;try{Rc(_,"")}catch(Ne){Wt(o,o.return,Ne)}}if(x&4&&(_=o.stateNode,_!=null)){var N=o.memoizedProps,I=f!==null?f.memoizedProps:N,U=o.type,B=o.updateQueue;if(o.updateQueue=null,B!==null)try{U==="input"&&N.type==="radio"&&N.name!=null&&yn(_,N),$p(U,I);var ne=$p(U,N);for(I=0;I<B.length;I+=2){var oe=B[I],ue=B[I+1];oe==="style"?Kv(_,ue):oe==="dangerouslySetInnerHTML"?Gv(_,ue):oe==="children"?Rc(_,ue):k(_,oe,ue,ne)}switch(U){case"input":Xt(_,N);break;case"textarea":Un(_,N);break;case"select":var ie=_._wrapperState.wasMultiple;_._wrapperState.wasMultiple=!!N.multiple;var we=N.value;we!=null?$t(_,!!N.multiple,we,!1):ie!==!!N.multiple&&(N.defaultValue!=null?$t(_,!!N.multiple,N.defaultValue,!0):$t(_,!!N.multiple,N.multiple?[]:"",!1))}_[Xc]=N}catch(Ne){Wt(o,o.return,Ne)}}break;case 6:if(es(c,o),Ns(o),x&4){if(o.stateNode===null)throw Error(n(162));_=o.stateNode,N=o.memoizedProps;try{_.nodeValue=N}catch(Ne){Wt(o,o.return,Ne)}}break;case 3:if(es(c,o),Ns(o),x&4&&f!==null&&f.memoizedState.isDehydrated)try{qc(c.containerInfo)}catch(Ne){Wt(o,o.return,Ne)}break;case 4:es(c,o),Ns(o);break;case 13:es(c,o),Ns(o),_=o.child,_.flags&8192&&(N=_.memoizedState!==null,_.stateNode.isHidden=N,!N||_.alternate!==null&&_.alternate.memoizedState!==null||(cx=Zt())),x&4&&dj(o);break;case 22:if(oe=f!==null&&f.memoizedState!==null,o.mode&1?(In=(ne=In)||oe,es(c,o),In=ne):es(c,o),Ns(o),x&8192){if(ne=o.memoizedState!==null,(o.stateNode.isHidden=ne)&&!oe&&(o.mode&1)!==0)for(_e=o,oe=o.child;oe!==null;){for(ue=_e=oe;_e!==null;){switch(ie=_e,we=ie.child,ie.tag){case 0:case 11:case 14:case 15:cu(4,ie,ie.return);break;case 1:il(ie,ie.return);var je=ie.stateNode;if(typeof je.componentWillUnmount=="function"){x=ie,f=ie.return;try{c=x,je.props=c.memoizedProps,je.state=c.memoizedState,je.componentWillUnmount()}catch(Ne){Wt(x,f,Ne)}}break;case 5:il(ie,ie.return);break;case 22:if(ie.memoizedState!==null){pj(ue);continue}}we!==null?(we.return=ie,_e=we):pj(ue)}oe=oe.sibling}e:for(oe=null,ue=o;;){if(ue.tag===5){if(oe===null){oe=ue;try{_=ue.stateNode,ne?(N=_.style,typeof N.setProperty=="function"?N.setProperty("display","none","important"):N.display="none"):(U=ue.stateNode,B=ue.memoizedProps.style,I=B!=null&&B.hasOwnProperty("display")?B.display:null,U.style.display=Vv("display",I))}catch(Ne){Wt(o,o.return,Ne)}}}else if(ue.tag===6){if(oe===null)try{ue.stateNode.nodeValue=ne?"":ue.memoizedProps}catch(Ne){Wt(o,o.return,Ne)}}else if((ue.tag!==22&&ue.tag!==23||ue.memoizedState===null||ue===o)&&ue.child!==null){ue.child.return=ue,ue=ue.child;continue}if(ue===o)break e;for(;ue.sibling===null;){if(ue.return===null||ue.return===o)break e;oe===ue&&(oe=null),ue=ue.return}oe===ue&&(oe=null),ue.sibling.return=ue.return,ue=ue.sibling}}break;case 19:es(c,o),Ns(o),x&4&&dj(o);break;case 21:break;default:es(c,o),Ns(o)}}function Ns(o){var c=o.flags;if(c&2){try{e:{for(var f=o.return;f!==null;){if(lj(f)){var x=f;break e}f=f.return}throw Error(n(160))}switch(x.tag){case 5:var _=x.stateNode;x.flags&32&&(Rc(_,""),x.flags&=-33);var N=cj(o);ix(o,N,_);break;case 3:case 4:var I=x.stateNode.containerInfo,U=cj(o);ax(o,U,I);break;default:throw Error(n(161))}}catch(B){Wt(o,o.return,B)}o.flags&=-3}c&4096&&(o.flags&=-4097)}function vI(o,c,f){_e=o,fj(o)}function fj(o,c,f){for(var x=(o.mode&1)!==0;_e!==null;){var _=_e,N=_.child;if(_.tag===22&&x){var I=_.memoizedState!==null||jh;if(!I){var U=_.alternate,B=U!==null&&U.memoizedState!==null||In;U=jh;var ne=In;if(jh=I,(In=B)&&!ne)for(_e=_;_e!==null;)I=_e,B=I.child,I.tag===22&&I.memoizedState!==null?gj(_):B!==null?(B.return=I,_e=B):gj(_);for(;N!==null;)_e=N,fj(N),N=N.sibling;_e=_,jh=U,In=ne}mj(o)}else(_.subtreeFlags&8772)!==0&&N!==null?(N.return=_,_e=N):mj(o)}}function mj(o){for(;_e!==null;){var c=_e;if((c.flags&8772)!==0){var f=c.alternate;try{if((c.flags&8772)!==0)switch(c.tag){case 0:case 11:case 15:In||Nh(5,c);break;case 1:var x=c.stateNode;if(c.flags&4&&!In)if(f===null)x.componentDidMount();else{var _=c.elementType===c.type?f.memoizedProps:Xr(c.type,f.memoizedProps);x.componentDidUpdate(_,f.memoizedState,x.__reactInternalSnapshotBeforeUpdate)}var N=c.updateQueue;N!==null&&p_(c,N,x);break;case 3:var I=c.updateQueue;if(I!==null){if(f=null,c.child!==null)switch(c.child.tag){case 5:f=c.child.stateNode;break;case 1:f=c.child.stateNode}p_(c,I,f)}break;case 5:var U=c.stateNode;if(f===null&&c.flags&4){f=U;var B=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":B.autoFocus&&f.focus();break;case"img":B.src&&(f.src=B.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var ne=c.alternate;if(ne!==null){var oe=ne.memoizedState;if(oe!==null){var ue=oe.dehydrated;ue!==null&&qc(ue)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}In||c.flags&512&&sx(c)}catch(ie){Wt(c,c.return,ie)}}if(c===o){_e=null;break}if(f=c.sibling,f!==null){f.return=c.return,_e=f;break}_e=c.return}}function pj(o){for(;_e!==null;){var c=_e;if(c===o){_e=null;break}var f=c.sibling;if(f!==null){f.return=c.return,_e=f;break}_e=c.return}}function gj(o){for(;_e!==null;){var c=_e;try{switch(c.tag){case 0:case 11:case 15:var f=c.return;try{Nh(4,c)}catch(B){Wt(c,f,B)}break;case 1:var x=c.stateNode;if(typeof x.componentDidMount=="function"){var _=c.return;try{x.componentDidMount()}catch(B){Wt(c,_,B)}}var N=c.return;try{sx(c)}catch(B){Wt(c,N,B)}break;case 5:var I=c.return;try{sx(c)}catch(B){Wt(c,I,B)}}}catch(B){Wt(c,c.return,B)}if(c===o){_e=null;break}var U=c.sibling;if(U!==null){U.return=c.return,_e=U;break}_e=c.return}}var wI=Math.ceil,Sh=S.ReactCurrentDispatcher,ox=S.ReactCurrentOwner,Or=S.ReactCurrentBatchConfig,it=0,mn=null,nn=null,wn=0,xr=0,ol=Ta(0),ln=0,uu=null,Li=0,kh=0,lx=0,du=null,er=null,cx=0,ll=1/0,zs=null,Eh=!1,ux=null,Ma=null,Ch=!1,La=null,Th=0,hu=0,dx=null,Rh=-1,Ih=0;function Bn(){return(it&6)!==0?Zt():Rh!==-1?Rh:Rh=Zt()}function $a(o){return(o.mode&1)===0?1:(it&2)!==0&&wn!==0?wn&-wn:sI.transition!==null?(Ih===0&&(Ih=cw()),Ih):(o=pt,o!==0||(o=window.event,o=o===void 0?16:yw(o.type)),o)}function ts(o,c,f,x){if(50<hu)throw hu=0,dx=null,Error(n(185));Lc(o,f,x),((it&2)===0||o!==mn)&&(o===mn&&((it&2)===0&&(kh|=f),ln===4&&Da(o,wn)),tr(o,x),f===1&&it===0&&(c.mode&1)===0&&(ll=Zt()+500,ah&&Ia()))}function tr(o,c){var f=o.callbackNode;sR(o,c);var x=Ud(o,o===mn?wn:0);if(x===0)f!==null&&iw(f),o.callbackNode=null,o.callbackPriority=0;else if(c=x&-x,o.callbackPriority!==c){if(f!=null&&iw(f),c===1)o.tag===0?rI(yj.bind(null,o)):r_(yj.bind(null,o)),ZR(function(){(it&6)===0&&Ia()}),f=null;else{switch(uw(x)){case 1:f=zp;break;case 4:f=ow;break;case 16:f=Ld;break;case 536870912:f=lw;break;default:f=Ld}f=kj(f,xj.bind(null,o))}o.callbackPriority=c,o.callbackNode=f}}function xj(o,c){if(Rh=-1,Ih=0,(it&6)!==0)throw Error(n(327));var f=o.callbackNode;if(cl()&&o.callbackNode!==f)return null;var x=Ud(o,o===mn?wn:0);if(x===0)return null;if((x&30)!==0||(x&o.expiredLanes)!==0||c)c=Ph(o,x);else{c=x;var _=it;it|=2;var N=vj();(mn!==o||wn!==c)&&(zs=null,ll=Zt()+500,Di(o,c));do try{NI();break}catch(U){bj(o,U)}while(!0);Tg(),Sh.current=N,it=_,nn!==null?c=0:(mn=null,wn=0,c=ln)}if(c!==0){if(c===2&&(_=Wp(o),_!==0&&(x=_,c=hx(o,_))),c===1)throw f=uu,Di(o,0),Da(o,x),tr(o,Zt()),f;if(c===6)Da(o,x);else{if(_=o.current.alternate,(x&30)===0&&!_I(_)&&(c=Ph(o,x),c===2&&(N=Wp(o),N!==0&&(x=N,c=hx(o,N))),c===1))throw f=uu,Di(o,0),Da(o,x),tr(o,Zt()),f;switch(o.finishedWork=_,o.finishedLanes=x,c){case 0:case 1:throw Error(n(345));case 2:Fi(o,er,zs);break;case 3:if(Da(o,x),(x&130023424)===x&&(c=cx+500-Zt(),10<c)){if(Ud(o,0)!==0)break;if(_=o.suspendedLanes,(_&x)!==x){Bn(),o.pingedLanes|=o.suspendedLanes&_;break}o.timeoutHandle=yg(Fi.bind(null,o,er,zs),c);break}Fi(o,er,zs);break;case 4:if(Da(o,x),(x&4194240)===x)break;for(c=o.eventTimes,_=-1;0<x;){var I=31-Yr(x);N=1<<I,I=c[I],I>_&&(_=I),x&=~N}if(x=_,x=Zt()-x,x=(120>x?120:480>x?480:1080>x?1080:1920>x?1920:3e3>x?3e3:4320>x?4320:1960*wI(x/1960))-x,10<x){o.timeoutHandle=yg(Fi.bind(null,o,er,zs),x);break}Fi(o,er,zs);break;case 5:Fi(o,er,zs);break;default:throw Error(n(329))}}}return tr(o,Zt()),o.callbackNode===f?xj.bind(null,o):null}function hx(o,c){var f=du;return o.current.memoizedState.isDehydrated&&(Di(o,c).flags|=256),o=Ph(o,c),o!==2&&(c=er,er=f,c!==null&&fx(c)),o}function fx(o){er===null?er=o:er.push.apply(er,o)}function _I(o){for(var c=o;;){if(c.flags&16384){var f=c.updateQueue;if(f!==null&&(f=f.stores,f!==null))for(var x=0;x<f.length;x++){var _=f[x],N=_.getSnapshot;_=_.value;try{if(!Jr(N(),_))return!1}catch{return!1}}}if(f=c.child,c.subtreeFlags&16384&&f!==null)f.return=c,c=f;else{if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Da(o,c){for(c&=~lx,c&=~kh,o.suspendedLanes|=c,o.pingedLanes&=~c,o=o.expirationTimes;0<c;){var f=31-Yr(c),x=1<<f;o[f]=-1,c&=~x}}function yj(o){if((it&6)!==0)throw Error(n(327));cl();var c=Ud(o,0);if((c&1)===0)return tr(o,Zt()),null;var f=Ph(o,c);if(o.tag!==0&&f===2){var x=Wp(o);x!==0&&(c=x,f=hx(o,x))}if(f===1)throw f=uu,Di(o,0),Da(o,c),tr(o,Zt()),f;if(f===6)throw Error(n(345));return o.finishedWork=o.current.alternate,o.finishedLanes=c,Fi(o,er,zs),tr(o,Zt()),null}function mx(o,c){var f=it;it|=1;try{return o(c)}finally{it=f,it===0&&(ll=Zt()+500,ah&&Ia())}}function $i(o){La!==null&&La.tag===0&&(it&6)===0&&cl();var c=it;it|=1;var f=Or.transition,x=pt;try{if(Or.transition=null,pt=1,o)return o()}finally{pt=x,Or.transition=f,it=c,(it&6)===0&&Ia()}}function px(){xr=ol.current,Pt(ol)}function Di(o,c){o.finishedWork=null,o.finishedLanes=0;var f=o.timeoutHandle;if(f!==-1&&(o.timeoutHandle=-1,XR(f)),nn!==null)for(f=nn.return;f!==null;){var x=f;switch(Ng(x),x.tag){case 1:x=x.type.childContextTypes,x!=null&&rh();break;case 3:sl(),Pt(Qn),Pt(Cn),$g();break;case 5:Mg(x);break;case 4:sl();break;case 13:Pt(Dt);break;case 19:Pt(Dt);break;case 10:Rg(x.type._context);break;case 22:case 23:px()}f=f.return}if(mn=o,nn=o=Fa(o.current,null),wn=xr=c,ln=0,uu=null,lx=kh=Li=0,er=du=null,Ai!==null){for(c=0;c<Ai.length;c++)if(f=Ai[c],x=f.interleaved,x!==null){f.interleaved=null;var _=x.next,N=f.pending;if(N!==null){var I=N.next;N.next=_,x.next=I}f.pending=x}Ai=null}return o}function bj(o,c){do{var f=nn;try{if(Tg(),ph.current=bh,gh){for(var x=Ft.memoizedState;x!==null;){var _=x.queue;_!==null&&(_.pending=null),x=x.next}gh=!1}if(Mi=0,fn=on=Ft=null,su=!1,au=0,ox.current=null,f===null||f.return===null){ln=1,uu=c,nn=null;break}e:{var N=o,I=f.return,U=f,B=c;if(c=wn,U.flags|=32768,B!==null&&typeof B=="object"&&typeof B.then=="function"){var ne=B,oe=U,ue=oe.tag;if((oe.mode&1)===0&&(ue===0||ue===11||ue===15)){var ie=oe.alternate;ie?(oe.updateQueue=ie.updateQueue,oe.memoizedState=ie.memoizedState,oe.lanes=ie.lanes):(oe.updateQueue=null,oe.memoizedState=null)}var we=z_(I);if(we!==null){we.flags&=-257,W_(we,I,U,N,c),we.mode&1&&H_(N,ne,c),c=we,B=ne;var je=c.updateQueue;if(je===null){var Ne=new Set;Ne.add(B),c.updateQueue=Ne}else je.add(B);break e}else{if((c&1)===0){H_(N,ne,c),gx();break e}B=Error(n(426))}}else if(Mt&&U.mode&1){var en=z_(I);if(en!==null){(en.flags&65536)===0&&(en.flags|=256),W_(en,I,U,N,c),Eg(al(B,U));break e}}N=B=al(B,U),ln!==4&&(ln=2),du===null?du=[N]:du.push(N),N=I;do{switch(N.tag){case 3:N.flags|=65536,c&=-c,N.lanes|=c;var Q=q_(N,B,c);m_(N,Q);break e;case 1:U=B;var z=N.type,Z=N.stateNode;if((N.flags&128)===0&&(typeof z.getDerivedStateFromError=="function"||Z!==null&&typeof Z.componentDidCatch=="function"&&(Ma===null||!Ma.has(Z)))){N.flags|=65536,c&=-c,N.lanes|=c;var he=B_(N,U,c);m_(N,he);break e}}N=N.return}while(N!==null)}_j(f)}catch(ke){c=ke,nn===f&&f!==null&&(nn=f=f.return);continue}break}while(!0)}function vj(){var o=Sh.current;return Sh.current=bh,o===null?bh:o}function gx(){(ln===0||ln===3||ln===2)&&(ln=4),mn===null||(Li&268435455)===0&&(kh&268435455)===0||Da(mn,wn)}function Ph(o,c){var f=it;it|=2;var x=vj();(mn!==o||wn!==c)&&(zs=null,Di(o,c));do try{jI();break}catch(_){bj(o,_)}while(!0);if(Tg(),it=f,Sh.current=x,nn!==null)throw Error(n(261));return mn=null,wn=0,ln}function jI(){for(;nn!==null;)wj(nn)}function NI(){for(;nn!==null&&!Y4();)wj(nn)}function wj(o){var c=Sj(o.alternate,o,xr);o.memoizedProps=o.pendingProps,c===null?_j(o):nn=c,ox.current=null}function _j(o){var c=o;do{var f=c.alternate;if(o=c.return,(c.flags&32768)===0){if(f=gI(f,c,xr),f!==null){nn=f;return}}else{if(f=xI(f,c),f!==null){f.flags&=32767,nn=f;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{ln=6,nn=null;return}}if(c=c.sibling,c!==null){nn=c;return}nn=c=o}while(c!==null);ln===0&&(ln=5)}function Fi(o,c,f){var x=pt,_=Or.transition;try{Or.transition=null,pt=1,SI(o,c,f,x)}finally{Or.transition=_,pt=x}return null}function SI(o,c,f,x){do cl();while(La!==null);if((it&6)!==0)throw Error(n(327));f=o.finishedWork;var _=o.finishedLanes;if(f===null)return null;if(o.finishedWork=null,o.finishedLanes=0,f===o.current)throw Error(n(177));o.callbackNode=null,o.callbackPriority=0;var N=f.lanes|f.childLanes;if(aR(o,N),o===mn&&(nn=mn=null,wn=0),(f.subtreeFlags&2064)===0&&(f.flags&2064)===0||Ch||(Ch=!0,kj(Ld,function(){return cl(),null})),N=(f.flags&15990)!==0,(f.subtreeFlags&15990)!==0||N){N=Or.transition,Or.transition=null;var I=pt;pt=1;var U=it;it|=4,ox.current=null,bI(o,f),hj(f,o),WR(gg),Hd=!!pg,gg=pg=null,o.current=f,vI(f),J4(),it=U,pt=I,Or.transition=N}else o.current=f;if(Ch&&(Ch=!1,La=o,Th=_),N=o.pendingLanes,N===0&&(Ma=null),Z4(f.stateNode),tr(o,Zt()),c!==null)for(x=o.onRecoverableError,f=0;f<c.length;f++)_=c[f],x(_.value,{componentStack:_.stack,digest:_.digest});if(Eh)throw Eh=!1,o=ux,ux=null,o;return(Th&1)!==0&&o.tag!==0&&cl(),N=o.pendingLanes,(N&1)!==0?o===dx?hu++:(hu=0,dx=o):hu=0,Ia(),null}function cl(){if(La!==null){var o=uw(Th),c=Or.transition,f=pt;try{if(Or.transition=null,pt=16>o?16:o,La===null)var x=!1;else{if(o=La,La=null,Th=0,(it&6)!==0)throw Error(n(331));var _=it;for(it|=4,_e=o.current;_e!==null;){var N=_e,I=N.child;if((_e.flags&16)!==0){var U=N.deletions;if(U!==null){for(var B=0;B<U.length;B++){var ne=U[B];for(_e=ne;_e!==null;){var oe=_e;switch(oe.tag){case 0:case 11:case 15:cu(8,oe,N)}var ue=oe.child;if(ue!==null)ue.return=oe,_e=ue;else for(;_e!==null;){oe=_e;var ie=oe.sibling,we=oe.return;if(oj(oe),oe===ne){_e=null;break}if(ie!==null){ie.return=we,_e=ie;break}_e=we}}}var je=N.alternate;if(je!==null){var Ne=je.child;if(Ne!==null){je.child=null;do{var en=Ne.sibling;Ne.sibling=null,Ne=en}while(Ne!==null)}}_e=N}}if((N.subtreeFlags&2064)!==0&&I!==null)I.return=N,_e=I;else e:for(;_e!==null;){if(N=_e,(N.flags&2048)!==0)switch(N.tag){case 0:case 11:case 15:cu(9,N,N.return)}var Q=N.sibling;if(Q!==null){Q.return=N.return,_e=Q;break e}_e=N.return}}var z=o.current;for(_e=z;_e!==null;){I=_e;var Z=I.child;if((I.subtreeFlags&2064)!==0&&Z!==null)Z.return=I,_e=Z;else e:for(I=z;_e!==null;){if(U=_e,(U.flags&2048)!==0)try{switch(U.tag){case 0:case 11:case 15:Nh(9,U)}}catch(ke){Wt(U,U.return,ke)}if(U===I){_e=null;break e}var he=U.sibling;if(he!==null){he.return=U.return,_e=he;break e}_e=U.return}}if(it=_,Ia(),vs&&typeof vs.onPostCommitFiberRoot=="function")try{vs.onPostCommitFiberRoot($d,o)}catch{}x=!0}return x}finally{pt=f,Or.transition=c}}return!1}function jj(o,c,f){c=al(f,c),c=q_(o,c,1),o=Aa(o,c,1),c=Bn(),o!==null&&(Lc(o,1,c),tr(o,c))}function Wt(o,c,f){if(o.tag===3)jj(o,o,f);else for(;c!==null;){if(c.tag===3){jj(c,o,f);break}else if(c.tag===1){var x=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(Ma===null||!Ma.has(x))){o=al(f,o),o=B_(c,o,1),c=Aa(c,o,1),o=Bn(),c!==null&&(Lc(c,1,o),tr(c,o));break}}c=c.return}}function kI(o,c,f){var x=o.pingCache;x!==null&&x.delete(c),c=Bn(),o.pingedLanes|=o.suspendedLanes&f,mn===o&&(wn&f)===f&&(ln===4||ln===3&&(wn&130023424)===wn&&500>Zt()-cx?Di(o,0):lx|=f),tr(o,c)}function Nj(o,c){c===0&&((o.mode&1)===0?c=1:(c=Fd,Fd<<=1,(Fd&130023424)===0&&(Fd=4194304)));var f=Bn();o=qs(o,c),o!==null&&(Lc(o,c,f),tr(o,f))}function EI(o){var c=o.memoizedState,f=0;c!==null&&(f=c.retryLane),Nj(o,f)}function CI(o,c){var f=0;switch(o.tag){case 13:var x=o.stateNode,_=o.memoizedState;_!==null&&(f=_.retryLane);break;case 19:x=o.stateNode;break;default:throw Error(n(314))}x!==null&&x.delete(c),Nj(o,f)}var Sj;Sj=function(o,c,f){if(o!==null)if(o.memoizedProps!==c.pendingProps||Qn.current)Zn=!0;else{if((o.lanes&f)===0&&(c.flags&128)===0)return Zn=!1,pI(o,c,f);Zn=(o.flags&131072)!==0}else Zn=!1,Mt&&(c.flags&1048576)!==0&&s_(c,oh,c.index);switch(c.lanes=0,c.tag){case 2:var x=c.type;_h(o,c),o=c.pendingProps;var _=Qo(c,Cn.current);rl(c,f),_=Ug(null,c,x,o,_,f);var N=qg();return c.flags|=1,typeof _=="object"&&_!==null&&typeof _.render=="function"&&_.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,Xn(x)?(N=!0,sh(c)):N=!1,c.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,Ag(c),_.updater=vh,c.stateNode=_,_._reactInternals=c,Vg(c,x,o,f),c=Qg(null,c,x,!0,N,f)):(c.tag=0,Mt&&N&&jg(c),qn(null,c,_,f),c=c.child),c;case 16:x=c.elementType;e:{switch(_h(o,c),o=c.pendingProps,_=x._init,x=_(x._payload),c.type=x,_=c.tag=RI(x),o=Xr(x,o),_){case 0:c=Jg(null,c,x,o,f);break e;case 1:c=Q_(null,c,x,o,f);break e;case 11:c=G_(null,c,x,o,f);break e;case 14:c=V_(null,c,x,Xr(x.type,o),f);break e}throw Error(n(306,x,""))}return c;case 0:return x=c.type,_=c.pendingProps,_=c.elementType===x?_:Xr(x,_),Jg(o,c,x,_,f);case 1:return x=c.type,_=c.pendingProps,_=c.elementType===x?_:Xr(x,_),Q_(o,c,x,_,f);case 3:e:{if(X_(c),o===null)throw Error(n(387));x=c.pendingProps,N=c.memoizedState,_=N.element,f_(o,c),fh(c,x,null,f);var I=c.memoizedState;if(x=I.element,N.isDehydrated)if(N={element:x,isDehydrated:!1,cache:I.cache,pendingSuspenseBoundaries:I.pendingSuspenseBoundaries,transitions:I.transitions},c.updateQueue.baseState=N,c.memoizedState=N,c.flags&256){_=al(Error(n(423)),c),c=Z_(o,c,x,f,_);break e}else if(x!==_){_=al(Error(n(424)),c),c=Z_(o,c,x,f,_);break e}else for(gr=Ca(c.stateNode.containerInfo.firstChild),pr=c,Mt=!0,Qr=null,f=d_(c,null,x,f),c.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(el(),x===_){c=Hs(o,c,f);break e}qn(o,c,x,f)}c=c.child}return c;case 5:return g_(c),o===null&&kg(c),x=c.type,_=c.pendingProps,N=o!==null?o.memoizedProps:null,I=_.children,xg(x,_)?I=null:N!==null&&xg(x,N)&&(c.flags|=32),J_(o,c),qn(o,c,I,f),c.child;case 6:return o===null&&kg(c),null;case 13:return ej(o,c,f);case 4:return Og(c,c.stateNode.containerInfo),x=c.pendingProps,o===null?c.child=tl(c,null,x,f):qn(o,c,x,f),c.child;case 11:return x=c.type,_=c.pendingProps,_=c.elementType===x?_:Xr(x,_),G_(o,c,x,_,f);case 7:return qn(o,c,c.pendingProps,f),c.child;case 8:return qn(o,c,c.pendingProps.children,f),c.child;case 12:return qn(o,c,c.pendingProps.children,f),c.child;case 10:e:{if(x=c.type._context,_=c.pendingProps,N=c.memoizedProps,I=_.value,Nt(uh,x._currentValue),x._currentValue=I,N!==null)if(Jr(N.value,I)){if(N.children===_.children&&!Qn.current){c=Hs(o,c,f);break e}}else for(N=c.child,N!==null&&(N.return=c);N!==null;){var U=N.dependencies;if(U!==null){I=N.child;for(var B=U.firstContext;B!==null;){if(B.context===x){if(N.tag===1){B=Bs(-1,f&-f),B.tag=2;var ne=N.updateQueue;if(ne!==null){ne=ne.shared;var oe=ne.pending;oe===null?B.next=B:(B.next=oe.next,oe.next=B),ne.pending=B}}N.lanes|=f,B=N.alternate,B!==null&&(B.lanes|=f),Ig(N.return,f,c),U.lanes|=f;break}B=B.next}}else if(N.tag===10)I=N.type===c.type?null:N.child;else if(N.tag===18){if(I=N.return,I===null)throw Error(n(341));I.lanes|=f,U=I.alternate,U!==null&&(U.lanes|=f),Ig(I,f,c),I=N.sibling}else I=N.child;if(I!==null)I.return=N;else for(I=N;I!==null;){if(I===c){I=null;break}if(N=I.sibling,N!==null){N.return=I.return,I=N;break}I=I.return}N=I}qn(o,c,_.children,f),c=c.child}return c;case 9:return _=c.type,x=c.pendingProps.children,rl(c,f),_=Pr(_),x=x(_),c.flags|=1,qn(o,c,x,f),c.child;case 14:return x=c.type,_=Xr(x,c.pendingProps),_=Xr(x.type,_),V_(o,c,x,_,f);case 15:return K_(o,c,c.type,c.pendingProps,f);case 17:return x=c.type,_=c.pendingProps,_=c.elementType===x?_:Xr(x,_),_h(o,c),c.tag=1,Xn(x)?(o=!0,sh(c)):o=!1,rl(c,f),F_(c,x,_),Vg(c,x,_,f),Qg(null,c,x,!0,o,f);case 19:return nj(o,c,f);case 22:return Y_(o,c,f)}throw Error(n(156,c.tag))};function kj(o,c){return aw(o,c)}function TI(o,c,f,x){this.tag=o,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mr(o,c,f,x){return new TI(o,c,f,x)}function xx(o){return o=o.prototype,!(!o||!o.isReactComponent)}function RI(o){if(typeof o=="function")return xx(o)?1:0;if(o!=null){if(o=o.$$typeof,o===O)return 11;if(o===ae)return 14}return 2}function Fa(o,c){var f=o.alternate;return f===null?(f=Mr(o.tag,c,o.key,o.mode),f.elementType=o.elementType,f.type=o.type,f.stateNode=o.stateNode,f.alternate=o,o.alternate=f):(f.pendingProps=c,f.type=o.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=o.flags&14680064,f.childLanes=o.childLanes,f.lanes=o.lanes,f.child=o.child,f.memoizedProps=o.memoizedProps,f.memoizedState=o.memoizedState,f.updateQueue=o.updateQueue,c=o.dependencies,f.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},f.sibling=o.sibling,f.index=o.index,f.ref=o.ref,f}function Ah(o,c,f,x,_,N){var I=2;if(x=o,typeof o=="function")xx(o)&&(I=1);else if(typeof o=="string")I=5;else e:switch(o){case T:return Ui(f.children,_,N,c);case L:I=8,_|=8;break;case H:return o=Mr(12,f,c,_|2),o.elementType=H,o.lanes=N,o;case F:return o=Mr(13,f,c,_),o.elementType=F,o.lanes=N,o;case K:return o=Mr(19,f,c,_),o.elementType=K,o.lanes=N,o;case ee:return Oh(f,_,N,c);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case R:I=10;break e;case M:I=9;break e;case O:I=11;break e;case ae:I=14;break e;case X:I=16,x=null;break e}throw Error(n(130,o==null?o:typeof o,""))}return c=Mr(I,f,c,_),c.elementType=o,c.type=x,c.lanes=N,c}function Ui(o,c,f,x){return o=Mr(7,o,x,c),o.lanes=f,o}function Oh(o,c,f,x){return o=Mr(22,o,x,c),o.elementType=ee,o.lanes=f,o.stateNode={isHidden:!1},o}function yx(o,c,f){return o=Mr(6,o,null,c),o.lanes=f,o}function bx(o,c,f){return c=Mr(4,o.children!==null?o.children:[],o.key,c),c.lanes=f,c.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},c}function II(o,c,f,x,_){this.tag=c,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Gp(0),this.expirationTimes=Gp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gp(0),this.identifierPrefix=x,this.onRecoverableError=_,this.mutableSourceEagerHydrationData=null}function vx(o,c,f,x,_,N,I,U,B){return o=new II(o,c,f,U,B),c===1?(c=1,N===!0&&(c|=8)):c=0,N=Mr(3,null,null,c),o.current=N,N.stateNode=o,N.memoizedState={element:x,isDehydrated:f,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ag(N),o}function PI(o,c,f){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:A,key:x==null?null:""+x,children:o,containerInfo:c,implementation:f}}function Ej(o){if(!o)return Ra;o=o._reactInternals;e:{if(Ci(o)!==o||o.tag!==1)throw Error(n(170));var c=o;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(Xn(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(n(171))}if(o.tag===1){var f=o.type;if(Xn(f))return t_(o,f,c)}return c}function Cj(o,c,f,x,_,N,I,U,B){return o=vx(f,x,!0,o,_,N,I,U,B),o.context=Ej(null),f=o.current,x=Bn(),_=$a(f),N=Bs(x,_),N.callback=c??null,Aa(f,N,_),o.current.lanes=_,Lc(o,_,x),tr(o,x),o}function Mh(o,c,f,x){var _=c.current,N=Bn(),I=$a(_);return f=Ej(f),c.context===null?c.context=f:c.pendingContext=f,c=Bs(N,I),c.payload={element:o},x=x===void 0?null:x,x!==null&&(c.callback=x),o=Aa(_,c,I),o!==null&&(ts(o,_,I,N),hh(o,_,I)),I}function Lh(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function Tj(o,c){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var f=o.retryLane;o.retryLane=f!==0&&f<c?f:c}}function wx(o,c){Tj(o,c),(o=o.alternate)&&Tj(o,c)}function AI(){return null}var Rj=typeof reportError=="function"?reportError:function(o){console.error(o)};function _x(o){this._internalRoot=o}$h.prototype.render=_x.prototype.render=function(o){var c=this._internalRoot;if(c===null)throw Error(n(409));Mh(o,c,null,null)},$h.prototype.unmount=_x.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var c=o.containerInfo;$i(function(){Mh(null,o,null,null)}),c[$s]=null}};function $h(o){this._internalRoot=o}$h.prototype.unstable_scheduleHydration=function(o){if(o){var c=fw();o={blockedOn:null,target:o,priority:c};for(var f=0;f<Sa.length&&c!==0&&c<Sa[f].priority;f++);Sa.splice(f,0,o),f===0&&gw(o)}};function jx(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function Dh(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function Ij(){}function OI(o,c,f,x,_){if(_){if(typeof x=="function"){var N=x;x=function(){var ne=Lh(I);N.call(ne)}}var I=Cj(c,x,o,0,null,!1,!1,"",Ij);return o._reactRootContainer=I,o[$s]=I.current,Jc(o.nodeType===8?o.parentNode:o),$i(),I}for(;_=o.lastChild;)o.removeChild(_);if(typeof x=="function"){var U=x;x=function(){var ne=Lh(B);U.call(ne)}}var B=vx(o,0,!1,null,null,!1,!1,"",Ij);return o._reactRootContainer=B,o[$s]=B.current,Jc(o.nodeType===8?o.parentNode:o),$i(function(){Mh(c,B,f,x)}),B}function Fh(o,c,f,x,_){var N=f._reactRootContainer;if(N){var I=N;if(typeof _=="function"){var U=_;_=function(){var B=Lh(I);U.call(B)}}Mh(c,I,o,_)}else I=OI(f,c,o,_,x);return Lh(I)}dw=function(o){switch(o.tag){case 3:var c=o.stateNode;if(c.current.memoizedState.isDehydrated){var f=Mc(c.pendingLanes);f!==0&&(Vp(c,f|1),tr(c,Zt()),(it&6)===0&&(ll=Zt()+500,Ia()))}break;case 13:$i(function(){var x=qs(o,1);if(x!==null){var _=Bn();ts(x,o,1,_)}}),wx(o,1)}},Kp=function(o){if(o.tag===13){var c=qs(o,134217728);if(c!==null){var f=Bn();ts(c,o,134217728,f)}wx(o,134217728)}},hw=function(o){if(o.tag===13){var c=$a(o),f=qs(o,c);if(f!==null){var x=Bn();ts(f,o,c,x)}wx(o,c)}},fw=function(){return pt},mw=function(o,c){var f=pt;try{return pt=o,c()}finally{pt=f}},Up=function(o,c,f){switch(c){case"input":if(Xt(o,f),c=f.name,f.type==="radio"&&c!=null){for(f=o;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<f.length;c++){var x=f[c];if(x!==o&&x.form===o.form){var _=nh(x);if(!_)throw Error(n(90));Tr(x),Xt(x,_)}}}break;case"textarea":Un(o,f);break;case"select":c=f.value,c!=null&&$t(o,!!f.multiple,c,!1)}},Xv=mx,Zv=$i;var MI={usingClientEntryPoint:!1,Events:[Zc,Yo,nh,Jv,Qv,mx]},fu={findFiberByHostInstance:Ti,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},LI={bundleType:fu.bundleType,version:fu.version,rendererPackageName:fu.rendererPackageName,rendererConfig:fu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:S.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=rw(o),o===null?null:o.stateNode},findFiberByHostInstance:fu.findFiberByHostInstance||AI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Uh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Uh.isDisabled&&Uh.supportsFiber)try{$d=Uh.inject(LI),vs=Uh}catch{}}return nr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=MI,nr.createPortal=function(o,c){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!jx(c))throw Error(n(200));return PI(o,c,null,f)},nr.createRoot=function(o,c){if(!jx(o))throw Error(n(299));var f=!1,x="",_=Rj;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(x=c.identifierPrefix),c.onRecoverableError!==void 0&&(_=c.onRecoverableError)),c=vx(o,1,!1,null,null,f,!1,x,_),o[$s]=c.current,Jc(o.nodeType===8?o.parentNode:o),new _x(c)},nr.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var c=o._reactInternals;if(c===void 0)throw typeof o.render=="function"?Error(n(188)):(o=Object.keys(o).join(","),Error(n(268,o)));return o=rw(c),o=o===null?null:o.stateNode,o},nr.flushSync=function(o){return $i(o)},nr.hydrate=function(o,c,f){if(!Dh(c))throw Error(n(200));return Fh(null,o,c,!0,f)},nr.hydrateRoot=function(o,c,f){if(!jx(o))throw Error(n(405));var x=f!=null&&f.hydratedSources||null,_=!1,N="",I=Rj;if(f!=null&&(f.unstable_strictMode===!0&&(_=!0),f.identifierPrefix!==void 0&&(N=f.identifierPrefix),f.onRecoverableError!==void 0&&(I=f.onRecoverableError)),c=Cj(c,null,o,1,f??null,_,!1,N,I),o[$s]=c.current,Jc(o),x)for(o=0;o<x.length;o++)f=x[o],_=f._getVersion,_=_(f._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[f,_]:c.mutableSourceEagerHydrationData.push(f,_);return new $h(c)},nr.render=function(o,c,f){if(!Dh(c))throw Error(n(200));return Fh(null,o,c,!1,f)},nr.unmountComponentAtNode=function(o){if(!Dh(o))throw Error(n(40));return o._reactRootContainer?($i(function(){Fh(null,null,o,!1,function(){o._reactRootContainer=null,o[$s]=null})}),!0):!1},nr.unstable_batchedUpdates=mx,nr.unstable_renderSubtreeIntoContainer=function(o,c,f,x){if(!Dh(f))throw Error(n(200));if(o==null||o._reactInternals===void 0)throw Error(n(38));return Fh(o,c,f,!1,x)},nr.version="18.3.1-next-f1338f8080-20240426",nr}var Uj;function KI(){if(Uj)return Ex.exports;Uj=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Ex.exports=VI(),Ex.exports}var qj;function YI(){if(qj)return Bh;qj=1;var e=KI();return Bh.createRoot=e.createRoot,Bh.hydrateRoot=e.hydrateRoot,Bh}var JI=YI(),mc=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},QI={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},Ya,Yy,Ok,XI=(Ok=class{constructor(){Re(this,Ya,QI);Re(this,Yy,!1)}setTimeoutProvider(e){xe(this,Ya,e)}setTimeout(e,t){return q(this,Ya).setTimeout(e,t)}clearTimeout(e){q(this,Ya).clearTimeout(e)}setInterval(e,t){return q(this,Ya).setInterval(e,t)}clearInterval(e){q(this,Ya).clearInterval(e)}},Ya=new WeakMap,Yy=new WeakMap,Ok),Qi=new XI;function ZI(e){setTimeout(e,0)}var xo=typeof window>"u"||"Deno"in globalThis;function Gn(){}function e3(e,t){return typeof e=="function"?e(t):e}function C0(e){return typeof e=="number"&&e>=0&&e!==1/0}function Kk(e,t){return Math.max(e+(t||0)-Date.now(),0)}function ai(e,t){return typeof e=="function"?e(t):e}function Fr(e,t){return typeof e=="function"?e(t):e}function Bj(e,t){const{type:n="all",exact:s,fetchStatus:a,predicate:i,queryKey:l,stale:u}=e;if(l){if(s){if(t.queryHash!==Qy(l,t.options))return!1}else if(!Mu(t.queryKey,l))return!1}if(n!=="all"){const d=t.isActive();if(n==="active"&&!d||n==="inactive"&&d)return!1}return!(typeof u=="boolean"&&t.isStale()!==u||a&&a!==t.state.fetchStatus||i&&!i(t))}function Hj(e,t){const{exact:n,status:s,predicate:a,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(n){if(yo(t.options.mutationKey)!==yo(i))return!1}else if(!Mu(t.options.mutationKey,i))return!1}return!(s&&t.state.status!==s||a&&!a(t))}function Qy(e,t){return((t==null?void 0:t.queryKeyHashFn)||yo)(e)}function yo(e){return JSON.stringify(e,(t,n)=>T0(n)?Object.keys(n).sort().reduce((s,a)=>(s[a]=n[a],s),{}):n)}function Mu(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>Mu(e[n],t[n])):!1}var t3=Object.prototype.hasOwnProperty;function Yk(e,t){if(e===t)return e;const n=zj(e)&&zj(t);if(!n&&!(T0(e)&&T0(t)))return t;const a=(n?e:Object.keys(e)).length,i=n?t:Object.keys(t),l=i.length,u=n?new Array(l):{};let d=0;for(let h=0;h<l;h++){const p=n?h:i[h],m=e[p],g=t[p];if(m===g){u[p]=m,(n?h<a:t3.call(e,p))&&d++;continue}if(m===null||g===null||typeof m!="object"||typeof g!="object"){u[p]=g;continue}const y=Yk(m,g);u[p]=y,y===m&&d++}return a===l&&d===a?e:u}function zf(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function zj(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function T0(e){if(!Wj(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!Wj(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Wj(e){return Object.prototype.toString.call(e)==="[object Object]"}function n3(e){return new Promise(t=>{Qi.setTimeout(t,e)})}function R0(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?Yk(e,t):t}function r3(e,t,n=0){const s=[...e,t];return n&&s.length>n?s.slice(1):s}function s3(e,t,n=0){const s=[t,...e];return n&&s.length>n?s.slice(0,-1):s}var Xy=Symbol();function Jk(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Xy?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function Qk(e,t){return typeof e=="function"?e(...t):!!e}var ro,Ja,Ul,Mk,a3=(Mk=class extends mc{constructor(){super();Re(this,ro);Re(this,Ja);Re(this,Ul);xe(this,Ul,t=>{if(!xo&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){q(this,Ja)||this.setEventListener(q(this,Ul))}onUnsubscribe(){var t;this.hasListeners()||((t=q(this,Ja))==null||t.call(this),xe(this,Ja,void 0))}setEventListener(t){var n;xe(this,Ul,t),(n=q(this,Ja))==null||n.call(this),xe(this,Ja,t(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(t){q(this,ro)!==t&&(xe(this,ro,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof q(this,ro)=="boolean"?q(this,ro):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},ro=new WeakMap,Ja=new WeakMap,Ul=new WeakMap,Mk),Zy=new a3;function I0(){let e,t;const n=new Promise((a,i)=>{e=a,t=i});n.status="pending",n.catch(()=>{});function s(a){Object.assign(n,a),delete n.resolve,delete n.reject}return n.resolve=a=>{s({status:"fulfilled",value:a}),e(a)},n.reject=a=>{s({status:"rejected",reason:a}),t(a)},n}var i3=ZI;function o3(){let e=[],t=0,n=u=>{u()},s=u=>{u()},a=i3;const i=u=>{t?e.push(u):a(()=>{n(u)})},l=()=>{const u=e;e=[],u.length&&a(()=>{s(()=>{u.forEach(d=>{n(d)})})})};return{batch:u=>{let d;t++;try{d=u()}finally{t--,t||l()}return d},batchCalls:u=>(...d)=>{i(()=>{u(...d)})},schedule:i,setNotifyFunction:u=>{n=u},setBatchNotifyFunction:u=>{s=u},setScheduler:u=>{a=u}}}var un=o3(),ql,Qa,Bl,Lk,l3=(Lk=class extends mc{constructor(){super();Re(this,ql,!0);Re(this,Qa);Re(this,Bl);xe(this,Bl,t=>{if(!xo&&window.addEventListener){const n=()=>t(!0),s=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",s)}}})}onSubscribe(){q(this,Qa)||this.setEventListener(q(this,Bl))}onUnsubscribe(){var t;this.hasListeners()||((t=q(this,Qa))==null||t.call(this),xe(this,Qa,void 0))}setEventListener(t){var n;xe(this,Bl,t),(n=q(this,Qa))==null||n.call(this),xe(this,Qa,t(this.setOnline.bind(this)))}setOnline(t){q(this,ql)!==t&&(xe(this,ql,t),this.listeners.forEach(s=>{s(t)}))}isOnline(){return q(this,ql)}},ql=new WeakMap,Qa=new WeakMap,Bl=new WeakMap,Lk),Wf=new l3;function c3(e){return Math.min(1e3*2**e,3e4)}function Xk(e){return(e??"online")==="online"?Wf.isOnline():!0}var P0=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Zk(e){let t=!1,n=0,s;const a=I0(),i=()=>a.status!=="pending",l=w=>{var v;if(!i()){const j=new P0(w);g(j),(v=e.onCancel)==null||v.call(e,j)}},u=()=>{t=!0},d=()=>{t=!1},h=()=>Zy.isFocused()&&(e.networkMode==="always"||Wf.isOnline())&&e.canRun(),p=()=>Xk(e.networkMode)&&e.canRun(),m=w=>{i()||(s==null||s(),a.resolve(w))},g=w=>{i()||(s==null||s(),a.reject(w))},y=()=>new Promise(w=>{var v;s=j=>{(i()||h())&&w(j)},(v=e.onPause)==null||v.call(e)}).then(()=>{var w;s=void 0,i()||(w=e.onContinue)==null||w.call(e)}),b=()=>{if(i())return;let w;const v=n===0?e.initialPromise:void 0;try{w=v??e.fn()}catch(j){w=Promise.reject(j)}Promise.resolve(w).then(m).catch(j=>{var A;if(i())return;const E=e.retry??(xo?0:3),k=e.retryDelay??c3,S=typeof k=="function"?k(n,j):k,P=E===!0||typeof E=="number"&&n<E||typeof E=="function"&&E(n,j);if(t||!P){g(j);return}n++,(A=e.onFail)==null||A.call(e,n,j),n3(S).then(()=>h()?void 0:y()).then(()=>{t?g(j):b()})})};return{promise:a,status:()=>a.status,cancel:l,continue:()=>(s==null||s(),a),cancelRetry:u,continueRetry:d,canStart:p,start:()=>(p()?b():y().then(b),a)}}var so,$k,e2=($k=class{constructor(){Re(this,so)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),C0(this.gcTime)&&xe(this,so,Qi.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(xo?1/0:300*1e3))}clearGcTimeout(){q(this,so)&&(Qi.clearTimeout(q(this,so)),xe(this,so,void 0))}},so=new WeakMap,$k),ao,Hl,Dr,io,gn,nd,oo,is,Vs,Dk,u3=(Dk=class extends e2{constructor(t){super();Re(this,is);Re(this,ao);Re(this,Hl);Re(this,Dr);Re(this,io);Re(this,gn);Re(this,nd);Re(this,oo);xe(this,oo,!1),xe(this,nd,t.defaultOptions),this.setOptions(t.options),this.observers=[],xe(this,io,t.client),xe(this,Dr,q(this,io).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,xe(this,ao,Vj(this.options)),this.state=t.state??q(this,ao),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=q(this,gn))==null?void 0:t.promise}setOptions(t){if(this.options={...q(this,nd),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=Vj(this.options);n.data!==void 0&&(this.setState(Gj(n.data,n.dataUpdatedAt)),xe(this,ao,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&q(this,Dr).remove(this)}setData(t,n){const s=R0(this.state.data,t,this.options);return Je(this,is,Vs).call(this,{data:s,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),s}setState(t,n){Je(this,is,Vs).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var s,a;const n=(s=q(this,gn))==null?void 0:s.promise;return(a=q(this,gn))==null||a.cancel(t),n?n.then(Gn).catch(Gn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(q(this,ao))}isActive(){return this.observers.some(t=>Fr(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Xy||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>ai(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!Kk(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(s=>s.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=q(this,gn))==null||n.continue()}onOnline(){var n;const t=this.observers.find(s=>s.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=q(this,gn))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),q(this,Dr).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(q(this,gn)&&(q(this,oo)?q(this,gn).cancel({revert:!0}):q(this,gn).cancelRetry()),this.scheduleGc()),q(this,Dr).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Je(this,is,Vs).call(this,{type:"invalidate"})}async fetch(t,n){var d,h,p,m,g,y,b,w,v,j,E,k;if(this.state.fetchStatus!=="idle"&&((d=q(this,gn))==null?void 0:d.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(q(this,gn))return q(this,gn).continueRetry(),q(this,gn).promise}if(t&&this.setOptions(t),!this.options.queryFn){const S=this.observers.find(P=>P.options.queryFn);S&&this.setOptions(S.options)}const s=new AbortController,a=S=>{Object.defineProperty(S,"signal",{enumerable:!0,get:()=>(xe(this,oo,!0),s.signal)})},i=()=>{const S=Jk(this.options,n),A=(()=>{const T={client:q(this,io),queryKey:this.queryKey,meta:this.meta};return a(T),T})();return xe(this,oo,!1),this.options.persister?this.options.persister(S,A,this):S(A)},u=(()=>{const S={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:q(this,io),state:this.state,fetchFn:i};return a(S),S})();(h=this.options.behavior)==null||h.onFetch(u,this),xe(this,Hl,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((p=u.fetchOptions)==null?void 0:p.meta))&&Je(this,is,Vs).call(this,{type:"fetch",meta:(m=u.fetchOptions)==null?void 0:m.meta}),xe(this,gn,Zk({initialPromise:n==null?void 0:n.initialPromise,fn:u.fetchFn,onCancel:S=>{S instanceof P0&&S.revert&&this.setState({...q(this,Hl),fetchStatus:"idle"}),s.abort()},onFail:(S,P)=>{Je(this,is,Vs).call(this,{type:"failed",failureCount:S,error:P})},onPause:()=>{Je(this,is,Vs).call(this,{type:"pause"})},onContinue:()=>{Je(this,is,Vs).call(this,{type:"continue"})},retry:u.options.retry,retryDelay:u.options.retryDelay,networkMode:u.options.networkMode,canRun:()=>!0}));try{const S=await q(this,gn).start();if(S===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(S),(y=(g=q(this,Dr).config).onSuccess)==null||y.call(g,S,this),(w=(b=q(this,Dr).config).onSettled)==null||w.call(b,S,this.state.error,this),S}catch(S){if(S instanceof P0){if(S.silent)return q(this,gn).promise;if(S.revert){if(this.state.data===void 0)throw S;return this.state.data}}throw Je(this,is,Vs).call(this,{type:"error",error:S}),(j=(v=q(this,Dr).config).onError)==null||j.call(v,S,this),(k=(E=q(this,Dr).config).onSettled)==null||k.call(E,this.state.data,S,this),S}finally{this.scheduleGc()}}},ao=new WeakMap,Hl=new WeakMap,Dr=new WeakMap,io=new WeakMap,gn=new WeakMap,nd=new WeakMap,oo=new WeakMap,is=new WeakSet,Vs=function(t){const n=s=>{switch(t.type){case"failed":return{...s,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...t2(s.data,this.options),fetchMeta:t.meta??null};case"success":const a={...s,...Gj(t.data,t.dataUpdatedAt),dataUpdateCount:s.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return xe(this,Hl,t.manual?a:void 0),a;case"error":const i=t.error;return{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...t.state}}};this.state=n(this.state),un.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),q(this,Dr).notify({query:this,type:"updated",action:t})})},Dk);function t2(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Xk(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Gj(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Vj(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,s=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var sr,tt,rd,zn,lo,zl,Js,Xa,sd,Wl,Gl,co,uo,Za,Vl,mt,_u,A0,O0,M0,L0,$0,D0,F0,n2,Fk,d3=(Fk=class extends mc{constructor(t,n){super();Re(this,mt);Re(this,sr);Re(this,tt);Re(this,rd);Re(this,zn);Re(this,lo);Re(this,zl);Re(this,Js);Re(this,Xa);Re(this,sd);Re(this,Wl);Re(this,Gl);Re(this,co);Re(this,uo);Re(this,Za);Re(this,Vl,new Set);this.options=n,xe(this,sr,t),xe(this,Xa,null),xe(this,Js,I0()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(q(this,tt).addObserver(this),Kj(q(this,tt),this.options)?Je(this,mt,_u).call(this):this.updateResult(),Je(this,mt,L0).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return U0(q(this,tt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return U0(q(this,tt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Je(this,mt,$0).call(this),Je(this,mt,D0).call(this),q(this,tt).removeObserver(this)}setOptions(t){const n=this.options,s=q(this,tt);if(this.options=q(this,sr).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Fr(this.options.enabled,q(this,tt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Je(this,mt,F0).call(this),q(this,tt).setOptions(this.options),n._defaulted&&!zf(this.options,n)&&q(this,sr).getQueryCache().notify({type:"observerOptionsUpdated",query:q(this,tt),observer:this});const a=this.hasListeners();a&&Yj(q(this,tt),s,this.options,n)&&Je(this,mt,_u).call(this),this.updateResult(),a&&(q(this,tt)!==s||Fr(this.options.enabled,q(this,tt))!==Fr(n.enabled,q(this,tt))||ai(this.options.staleTime,q(this,tt))!==ai(n.staleTime,q(this,tt)))&&Je(this,mt,A0).call(this);const i=Je(this,mt,O0).call(this);a&&(q(this,tt)!==s||Fr(this.options.enabled,q(this,tt))!==Fr(n.enabled,q(this,tt))||i!==q(this,Za))&&Je(this,mt,M0).call(this,i)}getOptimisticResult(t){const n=q(this,sr).getQueryCache().build(q(this,sr),t),s=this.createResult(n,t);return f3(this,s)&&(xe(this,zn,s),xe(this,zl,this.options),xe(this,lo,q(this,tt).state)),s}getCurrentResult(){return q(this,zn)}trackResult(t,n){return new Proxy(t,{get:(s,a)=>(this.trackProp(a),n==null||n(a),a==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&q(this,Js).status==="pending"&&q(this,Js).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(s,a))})}trackProp(t){q(this,Vl).add(t)}getCurrentQuery(){return q(this,tt)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=q(this,sr).defaultQueryOptions(t),s=q(this,sr).getQueryCache().build(q(this,sr),n);return s.fetch().then(()=>this.createResult(s,n))}fetch(t){return Je(this,mt,_u).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),q(this,zn)))}createResult(t,n){var H;const s=q(this,tt),a=this.options,i=q(this,zn),l=q(this,lo),u=q(this,zl),h=t!==s?t.state:q(this,rd),{state:p}=t;let m={...p},g=!1,y;if(n._optimisticResults){const R=this.hasListeners(),M=!R&&Kj(t,n),O=R&&Yj(t,s,n,a);(M||O)&&(m={...m,...t2(p.data,t.options)}),n._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:b,errorUpdatedAt:w,status:v}=m;y=m.data;let j=!1;if(n.placeholderData!==void 0&&y===void 0&&v==="pending"){let R;i!=null&&i.isPlaceholderData&&n.placeholderData===(u==null?void 0:u.placeholderData)?(R=i.data,j=!0):R=typeof n.placeholderData=="function"?n.placeholderData((H=q(this,Gl))==null?void 0:H.state.data,q(this,Gl)):n.placeholderData,R!==void 0&&(v="success",y=R0(i==null?void 0:i.data,R,n),g=!0)}if(n.select&&y!==void 0&&!j)if(i&&y===(l==null?void 0:l.data)&&n.select===q(this,sd))y=q(this,Wl);else try{xe(this,sd,n.select),y=n.select(y),y=R0(i==null?void 0:i.data,y,n),xe(this,Wl,y),xe(this,Xa,null)}catch(R){xe(this,Xa,R)}q(this,Xa)&&(b=q(this,Xa),y=q(this,Wl),w=Date.now(),v="error");const E=m.fetchStatus==="fetching",k=v==="pending",S=v==="error",P=k&&E,A=y!==void 0,L={status:v,fetchStatus:m.fetchStatus,isPending:k,isSuccess:v==="success",isError:S,isInitialLoading:P,isLoading:P,data:y,dataUpdatedAt:m.dataUpdatedAt,error:b,errorUpdatedAt:w,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>h.dataUpdateCount||m.errorUpdateCount>h.errorUpdateCount,isFetching:E,isRefetching:E&&!k,isLoadingError:S&&!A,isPaused:m.fetchStatus==="paused",isPlaceholderData:g,isRefetchError:S&&A,isStale:eb(t,n),refetch:this.refetch,promise:q(this,Js),isEnabled:Fr(n.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const R=F=>{L.status==="error"?F.reject(L.error):L.data!==void 0&&F.resolve(L.data)},M=()=>{const F=xe(this,Js,L.promise=I0());R(F)},O=q(this,Js);switch(O.status){case"pending":t.queryHash===s.queryHash&&R(O);break;case"fulfilled":(L.status==="error"||L.data!==O.value)&&M();break;case"rejected":(L.status!=="error"||L.error!==O.reason)&&M();break}}return L}updateResult(){const t=q(this,zn),n=this.createResult(q(this,tt),this.options);if(xe(this,lo,q(this,tt).state),xe(this,zl,this.options),q(this,lo).data!==void 0&&xe(this,Gl,q(this,tt)),zf(n,t))return;xe(this,zn,n);const s=()=>{if(!t)return!0;const{notifyOnChangeProps:a}=this.options,i=typeof a=="function"?a():a;if(i==="all"||!i&&!q(this,Vl).size)return!0;const l=new Set(i??q(this,Vl));return this.options.throwOnError&&l.add("error"),Object.keys(q(this,zn)).some(u=>{const d=u;return q(this,zn)[d]!==t[d]&&l.has(d)})};Je(this,mt,n2).call(this,{listeners:s()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Je(this,mt,L0).call(this)}},sr=new WeakMap,tt=new WeakMap,rd=new WeakMap,zn=new WeakMap,lo=new WeakMap,zl=new WeakMap,Js=new WeakMap,Xa=new WeakMap,sd=new WeakMap,Wl=new WeakMap,Gl=new WeakMap,co=new WeakMap,uo=new WeakMap,Za=new WeakMap,Vl=new WeakMap,mt=new WeakSet,_u=function(t){Je(this,mt,F0).call(this);let n=q(this,tt).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(Gn)),n},A0=function(){Je(this,mt,$0).call(this);const t=ai(this.options.staleTime,q(this,tt));if(xo||q(this,zn).isStale||!C0(t))return;const s=Kk(q(this,zn).dataUpdatedAt,t)+1;xe(this,co,Qi.setTimeout(()=>{q(this,zn).isStale||this.updateResult()},s))},O0=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(q(this,tt)):this.options.refetchInterval)??!1},M0=function(t){Je(this,mt,D0).call(this),xe(this,Za,t),!(xo||Fr(this.options.enabled,q(this,tt))===!1||!C0(q(this,Za))||q(this,Za)===0)&&xe(this,uo,Qi.setInterval(()=>{(this.options.refetchIntervalInBackground||Zy.isFocused())&&Je(this,mt,_u).call(this)},q(this,Za)))},L0=function(){Je(this,mt,A0).call(this),Je(this,mt,M0).call(this,Je(this,mt,O0).call(this))},$0=function(){q(this,co)&&(Qi.clearTimeout(q(this,co)),xe(this,co,void 0))},D0=function(){q(this,uo)&&(Qi.clearInterval(q(this,uo)),xe(this,uo,void 0))},F0=function(){const t=q(this,sr).getQueryCache().build(q(this,sr),this.options);if(t===q(this,tt))return;const n=q(this,tt);xe(this,tt,t),xe(this,rd,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},n2=function(t){un.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(q(this,zn))}),q(this,sr).getQueryCache().notify({query:q(this,tt),type:"observerResultsUpdated"})})},Fk);function h3(e,t){return Fr(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Kj(e,t){return h3(e,t)||e.state.data!==void 0&&U0(e,t,t.refetchOnMount)}function U0(e,t,n){if(Fr(t.enabled,e)!==!1&&ai(t.staleTime,e)!=="static"){const s=typeof n=="function"?n(e):n;return s==="always"||s!==!1&&eb(e,t)}return!1}function Yj(e,t,n,s){return(e!==t||Fr(s.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&eb(e,n)}function eb(e,t){return Fr(t.enabled,e)!==!1&&e.isStaleByTime(ai(t.staleTime,e))}function f3(e,t){return!zf(e.getCurrentResult(),t)}function Jj(e){return{onFetch:(t,n)=>{var p,m,g,y,b;const s=t.options,a=(g=(m=(p=t.fetchOptions)==null?void 0:p.meta)==null?void 0:m.fetchMore)==null?void 0:g.direction,i=((y=t.state.data)==null?void 0:y.pages)||[],l=((b=t.state.data)==null?void 0:b.pageParams)||[];let u={pages:[],pageParams:[]},d=0;const h=async()=>{let w=!1;const v=k=>{Object.defineProperty(k,"signal",{enumerable:!0,get:()=>(t.signal.aborted?w=!0:t.signal.addEventListener("abort",()=>{w=!0}),t.signal)})},j=Jk(t.options,t.fetchOptions),E=async(k,S,P)=>{if(w)return Promise.reject();if(S==null&&k.pages.length)return Promise.resolve(k);const T=(()=>{const M={client:t.client,queryKey:t.queryKey,pageParam:S,direction:P?"backward":"forward",meta:t.options.meta};return v(M),M})(),L=await j(T),{maxPages:H}=t.options,R=P?s3:r3;return{pages:R(k.pages,L,H),pageParams:R(k.pageParams,S,H)}};if(a&&i.length){const k=a==="backward",S=k?m3:Qj,P={pages:i,pageParams:l},A=S(s,P);u=await E(P,A,k)}else{const k=e??i.length;do{const S=d===0?l[0]??s.initialPageParam:Qj(s,u);if(d>0&&S==null)break;u=await E(u,S),d++}while(d<k)}return u};t.options.persister?t.fetchFn=()=>{var w,v;return(v=(w=t.options).persister)==null?void 0:v.call(w,h,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=h}}}function Qj(e,{pages:t,pageParams:n}){const s=t.length-1;return t.length>0?e.getNextPageParam(t[s],t,n[s],n):void 0}function m3(e,{pages:t,pageParams:n}){var s;return t.length>0?(s=e.getPreviousPageParam)==null?void 0:s.call(e,t[0],t,n[0],n):void 0}var ad,ks,Wn,ho,Es,Ha,Uk,p3=(Uk=class extends e2{constructor(t){super();Re(this,Es);Re(this,ad);Re(this,ks);Re(this,Wn);Re(this,ho);xe(this,ad,t.client),this.mutationId=t.mutationId,xe(this,Wn,t.mutationCache),xe(this,ks,[]),this.state=t.state||r2(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){q(this,ks).includes(t)||(q(this,ks).push(t),this.clearGcTimeout(),q(this,Wn).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){xe(this,ks,q(this,ks).filter(n=>n!==t)),this.scheduleGc(),q(this,Wn).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){q(this,ks).length||(this.state.status==="pending"?this.scheduleGc():q(this,Wn).remove(this))}continue(){var t;return((t=q(this,ho))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var l,u,d,h,p,m,g,y,b,w,v,j,E,k,S,P,A,T,L,H;const n=()=>{Je(this,Es,Ha).call(this,{type:"continue"})},s={client:q(this,ad),meta:this.options.meta,mutationKey:this.options.mutationKey};xe(this,ho,Zk({fn:()=>this.options.mutationFn?this.options.mutationFn(t,s):Promise.reject(new Error("No mutationFn found")),onFail:(R,M)=>{Je(this,Es,Ha).call(this,{type:"failed",failureCount:R,error:M})},onPause:()=>{Je(this,Es,Ha).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>q(this,Wn).canRun(this)}));const a=this.state.status==="pending",i=!q(this,ho).canStart();try{if(a)n();else{Je(this,Es,Ha).call(this,{type:"pending",variables:t,isPaused:i}),await((u=(l=q(this,Wn).config).onMutate)==null?void 0:u.call(l,t,this,s));const M=await((h=(d=this.options).onMutate)==null?void 0:h.call(d,t,s));M!==this.state.context&&Je(this,Es,Ha).call(this,{type:"pending",context:M,variables:t,isPaused:i})}const R=await q(this,ho).start();return await((m=(p=q(this,Wn).config).onSuccess)==null?void 0:m.call(p,R,t,this.state.context,this,s)),await((y=(g=this.options).onSuccess)==null?void 0:y.call(g,R,t,this.state.context,s)),await((w=(b=q(this,Wn).config).onSettled)==null?void 0:w.call(b,R,null,this.state.variables,this.state.context,this,s)),await((j=(v=this.options).onSettled)==null?void 0:j.call(v,R,null,t,this.state.context,s)),Je(this,Es,Ha).call(this,{type:"success",data:R}),R}catch(R){try{throw await((k=(E=q(this,Wn).config).onError)==null?void 0:k.call(E,R,t,this.state.context,this,s)),await((P=(S=this.options).onError)==null?void 0:P.call(S,R,t,this.state.context,s)),await((T=(A=q(this,Wn).config).onSettled)==null?void 0:T.call(A,void 0,R,this.state.variables,this.state.context,this,s)),await((H=(L=this.options).onSettled)==null?void 0:H.call(L,void 0,R,t,this.state.context,s)),R}finally{Je(this,Es,Ha).call(this,{type:"error",error:R})}}finally{q(this,Wn).runNext(this)}}},ad=new WeakMap,ks=new WeakMap,Wn=new WeakMap,ho=new WeakMap,Es=new WeakSet,Ha=function(t){const n=s=>{switch(t.type){case"failed":return{...s,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...s,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:t.error,failureCount:s.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),un.batch(()=>{q(this,ks).forEach(s=>{s.onMutationUpdate(t)}),q(this,Wn).notify({mutation:this,type:"updated",action:t})})},Uk);function r2(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Qs,os,id,qk,g3=(qk=class extends mc{constructor(t={}){super();Re(this,Qs);Re(this,os);Re(this,id);this.config=t,xe(this,Qs,new Set),xe(this,os,new Map),xe(this,id,0)}build(t,n,s){const a=new p3({client:t,mutationCache:this,mutationId:++qh(this,id)._,options:t.defaultMutationOptions(n),state:s});return this.add(a),a}add(t){q(this,Qs).add(t);const n=Hh(t);if(typeof n=="string"){const s=q(this,os).get(n);s?s.push(t):q(this,os).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(q(this,Qs).delete(t)){const n=Hh(t);if(typeof n=="string"){const s=q(this,os).get(n);if(s)if(s.length>1){const a=s.indexOf(t);a!==-1&&s.splice(a,1)}else s[0]===t&&q(this,os).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=Hh(t);if(typeof n=="string"){const s=q(this,os).get(n),a=s==null?void 0:s.find(i=>i.state.status==="pending");return!a||a===t}else return!0}runNext(t){var s;const n=Hh(t);if(typeof n=="string"){const a=(s=q(this,os).get(n))==null?void 0:s.find(i=>i!==t&&i.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){un.batch(()=>{q(this,Qs).forEach(t=>{this.notify({type:"removed",mutation:t})}),q(this,Qs).clear(),q(this,os).clear()})}getAll(){return Array.from(q(this,Qs))}find(t){const n={exact:!0,...t};return this.getAll().find(s=>Hj(n,s))}findAll(t={}){return this.getAll().filter(n=>Hj(t,n))}notify(t){un.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return un.batch(()=>Promise.all(t.map(n=>n.continue().catch(Gn))))}},Qs=new WeakMap,os=new WeakMap,id=new WeakMap,qk);function Hh(e){var t;return(t=e.options.scope)==null?void 0:t.id}var Xs,ei,ar,Zs,ca,xf,q0,Bk,x3=(Bk=class extends mc{constructor(n,s){super();Re(this,ca);Re(this,Xs);Re(this,ei);Re(this,ar);Re(this,Zs);xe(this,Xs,n),this.setOptions(s),this.bindMethods(),Je(this,ca,xf).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var a;const s=this.options;this.options=q(this,Xs).defaultMutationOptions(n),zf(this.options,s)||q(this,Xs).getMutationCache().notify({type:"observerOptionsUpdated",mutation:q(this,ar),observer:this}),s!=null&&s.mutationKey&&this.options.mutationKey&&yo(s.mutationKey)!==yo(this.options.mutationKey)?this.reset():((a=q(this,ar))==null?void 0:a.state.status)==="pending"&&q(this,ar).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=q(this,ar))==null||n.removeObserver(this)}onMutationUpdate(n){Je(this,ca,xf).call(this),Je(this,ca,q0).call(this,n)}getCurrentResult(){return q(this,ei)}reset(){var n;(n=q(this,ar))==null||n.removeObserver(this),xe(this,ar,void 0),Je(this,ca,xf).call(this),Je(this,ca,q0).call(this)}mutate(n,s){var a;return xe(this,Zs,s),(a=q(this,ar))==null||a.removeObserver(this),xe(this,ar,q(this,Xs).getMutationCache().build(q(this,Xs),this.options)),q(this,ar).addObserver(this),q(this,ar).execute(n)}},Xs=new WeakMap,ei=new WeakMap,ar=new WeakMap,Zs=new WeakMap,ca=new WeakSet,xf=function(){var s;const n=((s=q(this,ar))==null?void 0:s.state)??r2();xe(this,ei,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},q0=function(n){un.batch(()=>{var s,a,i,l,u,d,h,p;if(q(this,Zs)&&this.hasListeners()){const m=q(this,ei).variables,g=q(this,ei).context,y={client:q(this,Xs),meta:this.options.meta,mutationKey:this.options.mutationKey};(n==null?void 0:n.type)==="success"?((a=(s=q(this,Zs)).onSuccess)==null||a.call(s,n.data,m,g,y),(l=(i=q(this,Zs)).onSettled)==null||l.call(i,n.data,null,m,g,y)):(n==null?void 0:n.type)==="error"&&((d=(u=q(this,Zs)).onError)==null||d.call(u,n.error,m,g,y),(p=(h=q(this,Zs)).onSettled)==null||p.call(h,void 0,n.error,m,g,y))}this.listeners.forEach(m=>{m(q(this,ei))})})},Bk),Cs,Hk,y3=(Hk=class extends mc{constructor(t={}){super();Re(this,Cs);this.config=t,xe(this,Cs,new Map)}build(t,n,s){const a=n.queryKey,i=n.queryHash??Qy(a,n);let l=this.get(i);return l||(l=new u3({client:t,queryKey:a,queryHash:i,options:t.defaultQueryOptions(n),state:s,defaultOptions:t.getQueryDefaults(a)}),this.add(l)),l}add(t){q(this,Cs).has(t.queryHash)||(q(this,Cs).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=q(this,Cs).get(t.queryHash);n&&(t.destroy(),n===t&&q(this,Cs).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){un.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return q(this,Cs).get(t)}getAll(){return[...q(this,Cs).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(s=>Bj(n,s))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(s=>Bj(t,s)):n}notify(t){un.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){un.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){un.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Cs=new WeakMap,Hk),Vt,ti,ni,Kl,Yl,ri,Jl,Ql,zk,b3=(zk=class{constructor(e={}){Re(this,Vt);Re(this,ti);Re(this,ni);Re(this,Kl);Re(this,Yl);Re(this,ri);Re(this,Jl);Re(this,Ql);xe(this,Vt,e.queryCache||new y3),xe(this,ti,e.mutationCache||new g3),xe(this,ni,e.defaultOptions||{}),xe(this,Kl,new Map),xe(this,Yl,new Map),xe(this,ri,0)}mount(){qh(this,ri)._++,q(this,ri)===1&&(xe(this,Jl,Zy.subscribe(async e=>{e&&(await this.resumePausedMutations(),q(this,Vt).onFocus())})),xe(this,Ql,Wf.subscribe(async e=>{e&&(await this.resumePausedMutations(),q(this,Vt).onOnline())})))}unmount(){var e,t;qh(this,ri)._--,q(this,ri)===0&&((e=q(this,Jl))==null||e.call(this),xe(this,Jl,void 0),(t=q(this,Ql))==null||t.call(this),xe(this,Ql,void 0))}isFetching(e){return q(this,Vt).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return q(this,ti).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=q(this,Vt).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=q(this,Vt).build(this,t),s=n.state.data;return s===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(ai(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(s))}getQueriesData(e){return q(this,Vt).findAll(e).map(({queryKey:t,state:n})=>{const s=n.data;return[t,s]})}setQueryData(e,t,n){const s=this.defaultQueryOptions({queryKey:e}),a=q(this,Vt).get(s.queryHash),i=a==null?void 0:a.state.data,l=e3(t,i);if(l!==void 0)return q(this,Vt).build(this,s).setData(l,{...n,manual:!0})}setQueriesData(e,t,n){return un.batch(()=>q(this,Vt).findAll(e).map(({queryKey:s})=>[s,this.setQueryData(s,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=q(this,Vt).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=q(this,Vt);un.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=q(this,Vt);return un.batch(()=>(n.findAll(e).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},s=un.batch(()=>q(this,Vt).findAll(e).map(a=>a.cancel(n)));return Promise.all(s).then(Gn).catch(Gn)}invalidateQueries(e,t={}){return un.batch(()=>(q(this,Vt).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},s=un.batch(()=>q(this,Vt).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let i=a.fetch(void 0,n);return n.throwOnError||(i=i.catch(Gn)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(s).then(Gn)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=q(this,Vt).build(this,t);return n.isStaleByTime(ai(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Gn).catch(Gn)}fetchInfiniteQuery(e){return e.behavior=Jj(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Gn).catch(Gn)}ensureInfiniteQueryData(e){return e.behavior=Jj(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Wf.isOnline()?q(this,ti).resumePausedMutations():Promise.resolve()}getQueryCache(){return q(this,Vt)}getMutationCache(){return q(this,ti)}getDefaultOptions(){return q(this,ni)}setDefaultOptions(e){xe(this,ni,e)}setQueryDefaults(e,t){q(this,Kl).set(yo(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...q(this,Kl).values()],n={};return t.forEach(s=>{Mu(e,s.queryKey)&&Object.assign(n,s.defaultOptions)}),n}setMutationDefaults(e,t){q(this,Yl).set(yo(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...q(this,Yl).values()],n={};return t.forEach(s=>{Mu(e,s.mutationKey)&&Object.assign(n,s.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...q(this,ni).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Qy(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Xy&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...q(this,ni).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){q(this,Vt).clear(),q(this,ti).clear()}},Vt=new WeakMap,ti=new WeakMap,ni=new WeakMap,Kl=new WeakMap,Yl=new WeakMap,ri=new WeakMap,Jl=new WeakMap,Ql=new WeakMap,zk),s2=C.createContext(void 0),zt=e=>{const t=C.useContext(s2);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},v3=({client:e,children:t})=>(C.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),r.jsx(s2.Provider,{value:e,children:t})),a2=C.createContext(!1),w3=()=>C.useContext(a2);a2.Provider;function _3(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var j3=C.createContext(_3()),N3=()=>C.useContext(j3),S3=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},k3=e=>{C.useEffect(()=>{e.clearReset()},[e])},E3=({result:e,errorResetBoundary:t,throwOnError:n,query:s,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&s&&(a&&e.data===void 0||Qk(n,[e.error,s])),C3=e=>{if(e.suspense){const n=a=>a==="static"?a:Math.max(a??1e3,1e3),s=e.staleTime;e.staleTime=typeof s=="function"?(...a)=>n(s(...a)):n(s),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},T3=(e,t)=>e.isLoading&&e.isFetching&&!t,R3=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,Xj=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function I3(e,t,n){var m,g,y,b,w;const s=w3(),a=N3(),i=zt(),l=i.defaultQueryOptions(e);(g=(m=i.getDefaultOptions().queries)==null?void 0:m._experimental_beforeQuery)==null||g.call(m,l),l._optimisticResults=s?"isRestoring":"optimistic",C3(l),S3(l,a),k3(a);const u=!i.getQueryCache().get(l.queryHash),[d]=C.useState(()=>new t(i,l)),h=d.getOptimisticResult(l),p=!s&&e.subscribed!==!1;if(C.useSyncExternalStore(C.useCallback(v=>{const j=p?d.subscribe(un.batchCalls(v)):Gn;return d.updateResult(),j},[d,p]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),C.useEffect(()=>{d.setOptions(l)},[l,d]),R3(l,h))throw Xj(l,d,a);if(E3({result:h,errorResetBoundary:a,throwOnError:l.throwOnError,query:i.getQueryCache().get(l.queryHash),suspense:l.suspense}))throw h.error;if((b=(y=i.getDefaultOptions().queries)==null?void 0:y._experimental_afterQuery)==null||b.call(y,l,h),l.experimental_prefetchInRender&&!xo&&T3(h,s)){const v=u?Xj(l,d,a):(w=i.getQueryCache().get(l.queryHash))==null?void 0:w.promise;v==null||v.catch(Gn).finally(()=>{d.updateResult()})}return l.notifyOnChangeProps?h:d.trackResult(h)}function se(e,t){return I3(e,d3)}function $e(e,t){const n=zt(),[s]=C.useState(()=>new x3(n,e));C.useEffect(()=>{s.setOptions(e)},[s,e]);const a=C.useSyncExternalStore(C.useCallback(l=>s.subscribe(un.batchCalls(l)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),i=C.useCallback((l,u)=>{s.mutate(l,u).catch(Gn)},[s]);if(a.error&&Qk(s.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:i,mutateAsync:a.mutate}}/**
 * react-router v7.11.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Zj="popstate";function P3(e={}){function t(s,a){let{pathname:i,search:l,hash:u}=s.location;return B0("",{pathname:i,search:l,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(s,a){return typeof a=="string"?a:Lu(a)}return O3(t,n,null,e)}function Lt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Er(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function A3(){return Math.random().toString(36).substring(2,10)}function eN(e,t){return{usr:e.state,key:e.key,idx:t}}function B0(e,t,n=null,s){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?pc(t):t,state:n,key:t&&t.key||s||A3()}}function Lu({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function pc(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let s=e.indexOf("?");s>=0&&(t.search=e.substring(s),e=e.substring(0,s)),e&&(t.pathname=e)}return t}function O3(e,t,n,s={}){let{window:a=document.defaultView,v5Compat:i=!1}=s,l=a.history,u="POP",d=null,h=p();h==null&&(h=0,l.replaceState({...l.state,idx:h},""));function p(){return(l.state||{idx:null}).idx}function m(){u="POP";let v=p(),j=v==null?null:v-h;h=v,d&&d({action:u,location:w.location,delta:j})}function g(v,j){u="PUSH";let E=B0(w.location,v,j);h=p()+1;let k=eN(E,h),S=w.createHref(E);try{l.pushState(k,"",S)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;a.location.assign(S)}i&&d&&d({action:u,location:w.location,delta:1})}function y(v,j){u="REPLACE";let E=B0(w.location,v,j);h=p();let k=eN(E,h),S=w.createHref(E);l.replaceState(k,"",S),i&&d&&d({action:u,location:w.location,delta:0})}function b(v){return M3(v)}let w={get action(){return u},get location(){return e(a,l)},listen(v){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(Zj,m),d=v,()=>{a.removeEventListener(Zj,m),d=null}},createHref(v){return t(a,v)},createURL:b,encodeLocation(v){let j=b(v);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:g,replace:y,go(v){return l.go(v)}};return w}function M3(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Lt(n,"No window.location.(origin|href) available to create URL");let s=typeof e=="string"?e:Lu(e);return s=s.replace(/ $/,"%20"),!t&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function i2(e,t,n="/"){return L3(e,t,n,!1)}function L3(e,t,n,s){let a=typeof t=="string"?pc(t):t,i=ua(a.pathname||"/",n);if(i==null)return null;let l=o2(e);$3(l);let u=null;for(let d=0;u==null&&d<l.length;++d){let h=K3(i);u=G3(l[d],h,s)}return u}function o2(e,t=[],n=[],s="",a=!1){let i=(l,u,d=a,h)=>{let p={relativePath:h===void 0?l.path||"":h,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(s)&&d)return;Lt(p.relativePath.startsWith(s),`Absolute route path "${p.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(s.length)}let m=ra([s,p.relativePath]),g=n.concat(p);l.children&&l.children.length>0&&(Lt(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),o2(l.children,t,g,m,d)),!(l.path==null&&!l.index)&&t.push({path:m,score:z3(m,l.index),routesMeta:g})};return e.forEach((l,u)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))i(l,u);else for(let h of l2(l.path))i(l,u,!0,h)}),t}function l2(e){let t=e.split("/");if(t.length===0)return[];let[n,...s]=t,a=n.endsWith("?"),i=n.replace(/\?$/,"");if(s.length===0)return a?[i,""]:[i];let l=l2(s.join("/")),u=[];return u.push(...l.map(d=>d===""?i:[i,d].join("/"))),a&&u.push(...l),u.map(d=>e.startsWith("/")&&d===""?"/":d)}function $3(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:W3(t.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var D3=/^:[\w-]+$/,F3=3,U3=2,q3=1,B3=10,H3=-2,tN=e=>e==="*";function z3(e,t){let n=e.split("/"),s=n.length;return n.some(tN)&&(s+=H3),t&&(s+=U3),n.filter(a=>!tN(a)).reduce((a,i)=>a+(D3.test(i)?F3:i===""?q3:B3),s)}function W3(e,t){return e.length===t.length&&e.slice(0,-1).every((s,a)=>s===t[a])?e[e.length-1]-t[t.length-1]:0}function G3(e,t,n=!1){let{routesMeta:s}=e,a={},i="/",l=[];for(let u=0;u<s.length;++u){let d=s[u],h=u===s.length-1,p=i==="/"?t:t.slice(i.length)||"/",m=Gf({path:d.relativePath,caseSensitive:d.caseSensitive,end:h},p),g=d.route;if(!m&&h&&n&&!s[s.length-1].route.index&&(m=Gf({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},p)),!m)return null;Object.assign(a,m.params),l.push({params:a,pathname:ra([i,m.pathname]),pathnameBase:X3(ra([i,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(i=ra([i,m.pathnameBase]))}return l}function Gf(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,s]=V3(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let i=a[0],l=i.replace(/(.)\/+$/,"$1"),u=a.slice(1);return{params:s.reduce((h,{paramName:p,isOptional:m},g)=>{if(p==="*"){let b=u[g]||"";l=i.slice(0,i.length-b.length).replace(/(.)\/+$/,"$1")}const y=u[g];return m&&!y?h[p]=void 0:h[p]=(y||"").replace(/%2F/g,"/"),h},{}),pathname:i,pathnameBase:l,pattern:e}}function V3(e,t=!1,n=!0){Er(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let s=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,d)=>(s.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(s.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),s]}function K3(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Er(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function ua(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,s=e.charAt(n);return s&&s!=="/"?null:e.slice(n)||"/"}var c2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Y3=e=>c2.test(e);function J3(e,t="/"){let{pathname:n,search:s="",hash:a=""}=typeof e=="string"?pc(e):e,i;if(n)if(Y3(n))i=n;else{if(n.includes("//")){let l=n;n=n.replace(/\/\/+/g,"/"),Er(!1,`Pathnames cannot have embedded double slashes - normalizing ${l} -> ${n}`)}n.startsWith("/")?i=nN(n.substring(1),"/"):i=nN(n,t)}else i=t;return{pathname:i,search:Z3(s),hash:eP(a)}}function nN(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function Rx(e,t,n,s){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Q3(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function tb(e){let t=Q3(e);return t.map((n,s)=>s===t.length-1?n.pathname:n.pathnameBase)}function nb(e,t,n,s=!1){let a;typeof e=="string"?a=pc(e):(a={...e},Lt(!a.pathname||!a.pathname.includes("?"),Rx("?","pathname","search",a)),Lt(!a.pathname||!a.pathname.includes("#"),Rx("#","pathname","hash",a)),Lt(!a.search||!a.search.includes("#"),Rx("#","search","hash",a)));let i=e===""||a.pathname==="",l=i?"/":a.pathname,u;if(l==null)u=n;else{let m=t.length-1;if(!s&&l.startsWith("..")){let g=l.split("/");for(;g[0]==="..";)g.shift(),m-=1;a.pathname=g.join("/")}u=m>=0?t[m]:"/"}let d=J3(a,u),h=l&&l!=="/"&&l.endsWith("/"),p=(i||l===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(h||p)&&(d.pathname+="/"),d}var ra=e=>e.join("/").replace(/\/\/+/g,"/"),X3=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Z3=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,eP=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,tP=class{constructor(e,t,n,s=!1){this.status=e,this.statusText=t||"",this.internal=s,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function nP(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function rP(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var u2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function d2(e,t){let n=e;if(typeof n!="string"||!c2.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let s=n,a=!1;if(u2)try{let i=new URL(window.location.href),l=n.startsWith("//")?new URL(i.protocol+n):new URL(n),u=ua(l.pathname,t);l.origin===i.origin&&u!=null?n=u+l.search+l.hash:a=!0}catch{Er(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:s,isExternal:a,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var h2=["POST","PUT","PATCH","DELETE"];new Set(h2);var sP=["GET",...h2];new Set(sP);var gc=C.createContext(null);gc.displayName="DataRouter";var Am=C.createContext(null);Am.displayName="DataRouterState";var aP=C.createContext(!1),f2=C.createContext({isTransitioning:!1});f2.displayName="ViewTransition";var iP=C.createContext(new Map);iP.displayName="Fetchers";var oP=C.createContext(null);oP.displayName="Await";var Cr=C.createContext(null);Cr.displayName="Navigation";var od=C.createContext(null);od.displayName="Location";var Vr=C.createContext({outlet:null,matches:[],isDataRoute:!1});Vr.displayName="Route";var rb=C.createContext(null);rb.displayName="RouteError";var m2="REACT_ROUTER_ERROR",lP="REDIRECT",cP="ROUTE_ERROR_RESPONSE";function uP(e){if(e.startsWith(`${m2}:${lP}:{`))try{let t=JSON.parse(e.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function dP(e){if(e.startsWith(`${m2}:${cP}:{`))try{let t=JSON.parse(e.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new tP(t.status,t.statusText,t.data)}catch{}}function hP(e,{relative:t}={}){Lt(xc(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=C.useContext(Cr),{hash:a,pathname:i,search:l}=ld(e,{relative:t}),u=i;return n!=="/"&&(u=i==="/"?n:ra([n,i])),s.createHref({pathname:u,search:l,hash:a})}function xc(){return C.useContext(od)!=null}function ys(){return Lt(xc(),"useLocation() may be used only in the context of a <Router> component."),C.useContext(od).location}var p2="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function g2(e){C.useContext(Cr).static||C.useLayoutEffect(e)}function Kr(){let{isDataRoute:e}=C.useContext(Vr);return e?EP():fP()}function fP(){Lt(xc(),"useNavigate() may be used only in the context of a <Router> component.");let e=C.useContext(gc),{basename:t,navigator:n}=C.useContext(Cr),{matches:s}=C.useContext(Vr),{pathname:a}=ys(),i=JSON.stringify(tb(s)),l=C.useRef(!1);return g2(()=>{l.current=!0}),C.useCallback((d,h={})=>{if(Er(l.current,p2),!l.current)return;if(typeof d=="number"){n.go(d);return}let p=nb(d,JSON.parse(i),a,h.relative==="path");e==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:ra([t,p.pathname])),(h.replace?n.replace:n.push)(p,h.state,h)},[t,n,i,a,e])}var mP=C.createContext(null);function pP(e){let t=C.useContext(Vr).outlet;return C.useMemo(()=>t&&C.createElement(mP.Provider,{value:e},t),[t,e])}function kn(){let{matches:e}=C.useContext(Vr),t=e[e.length-1];return t?t.params:{}}function ld(e,{relative:t}={}){let{matches:n}=C.useContext(Vr),{pathname:s}=ys(),a=JSON.stringify(tb(n));return C.useMemo(()=>nb(e,JSON.parse(a),s,t==="path"),[e,a,s,t])}function gP(e,t){return x2(e,t)}function x2(e,t,n,s,a){var E;Lt(xc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=C.useContext(Cr),{matches:l}=C.useContext(Vr),u=l[l.length-1],d=u?u.params:{},h=u?u.pathname:"/",p=u?u.pathnameBase:"/",m=u&&u.route;{let k=m&&m.path||"";b2(h,!m||k.endsWith("*")||k.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${k}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${k}"> to <Route path="${k==="/"?"*":`${k}/*`}">.`)}let g=ys(),y;if(t){let k=typeof t=="string"?pc(t):t;Lt(p==="/"||((E=k.pathname)==null?void 0:E.startsWith(p)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${k.pathname}" was given in the \`location\` prop.`),y=k}else y=g;let b=y.pathname||"/",w=b;if(p!=="/"){let k=p.replace(/^\//,"").split("/");w="/"+b.replace(/^\//,"").split("/").slice(k.length).join("/")}let v=i2(e,{pathname:w});Er(m||v!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),Er(v==null||v[v.length-1].route.element!==void 0||v[v.length-1].route.Component!==void 0||v[v.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let j=wP(v&&v.map(k=>Object.assign({},k,{params:Object.assign({},d,k.params),pathname:ra([p,i.encodeLocation?i.encodeLocation(k.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?p:ra([p,i.encodeLocation?i.encodeLocation(k.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:k.pathnameBase])})),l,n,s,a);return t&&j?C.createElement(od.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},j):j}function xP(){let e=kP(),t=nP(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:s},i={padding:"2px 4px",backgroundColor:s},l=null;return console.error("Error handled by React Router default ErrorBoundary:",e),l=C.createElement(C.Fragment,null,C.createElement("p",null," Hey developer "),C.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",C.createElement("code",{style:i},"ErrorBoundary")," or"," ",C.createElement("code",{style:i},"errorElement")," prop on your route.")),C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},t),n?C.createElement("pre",{style:a},n):null,l)}var yP=C.createElement(xP,null),y2=class extends C.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){const n=dP(e.digest);n&&(e=n)}let t=e!==void 0?C.createElement(Vr.Provider,{value:this.props.routeContext},C.createElement(rb.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?C.createElement(bP,{error:e},t):t}};y2.contextType=aP;var Ix=new WeakMap;function bP({children:e,error:t}){let{basename:n}=C.useContext(Cr);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let s=uP(t.digest);if(s){let a=Ix.get(t);if(a)throw a;let i=d2(s.location,n);if(u2&&!Ix.get(t))if(i.isExternal||s.reloadDocument)window.location.href=i.absoluteURL||i.to;else{const l=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(i.to,{replace:s.replace}));throw Ix.set(t,l),l}return C.createElement("meta",{httpEquiv:"refresh",content:`0;url=${i.absoluteURL||i.to}`})}}return e}function vP({routeContext:e,match:t,children:n}){let s=C.useContext(gc);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),C.createElement(Vr.Provider,{value:e},n)}function wP(e,t=[],n=null,s=null,a=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let i=e,l=n==null?void 0:n.errors;if(l!=null){let p=i.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);Lt(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),i=i.slice(0,Math.min(i.length,p+1))}let u=!1,d=-1;if(n)for(let p=0;p<i.length;p++){let m=i[p];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=p),m.route.id){let{loaderData:g,errors:y}=n,b=m.route.loader&&!g.hasOwnProperty(m.route.id)&&(!y||y[m.route.id]===void 0);if(m.route.lazy||b){u=!0,d>=0?i=i.slice(0,d+1):i=[i[0]];break}}}let h=n&&s?(p,m)=>{var g,y;s(p,{location:n.location,params:((y=(g=n.matches)==null?void 0:g[0])==null?void 0:y.params)??{},unstable_pattern:rP(n.matches),errorInfo:m})}:void 0;return i.reduceRight((p,m,g)=>{let y,b=!1,w=null,v=null;n&&(y=l&&m.route.id?l[m.route.id]:void 0,w=m.route.errorElement||yP,u&&(d<0&&g===0?(b2("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,v=null):d===g&&(b=!0,v=m.route.hydrateFallbackElement||null)));let j=t.concat(i.slice(0,g+1)),E=()=>{let k;return y?k=w:b?k=v:m.route.Component?k=C.createElement(m.route.Component,null):m.route.element?k=m.route.element:k=p,C.createElement(vP,{match:m,routeContext:{outlet:p,matches:j,isDataRoute:n!=null},children:k})};return n&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?C.createElement(y2,{location:n.location,revalidation:n.revalidation,component:w,error:y,children:E(),routeContext:{outlet:null,matches:j,isDataRoute:!0},onError:h}):E()},null)}function sb(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function _P(e){let t=C.useContext(gc);return Lt(t,sb(e)),t}function jP(e){let t=C.useContext(Am);return Lt(t,sb(e)),t}function NP(e){let t=C.useContext(Vr);return Lt(t,sb(e)),t}function ab(e){let t=NP(e),n=t.matches[t.matches.length-1];return Lt(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function SP(){return ab("useRouteId")}function kP(){var s;let e=C.useContext(rb),t=jP("useRouteError"),n=ab("useRouteError");return e!==void 0?e:(s=t.errors)==null?void 0:s[n]}function EP(){let{router:e}=_P("useNavigate"),t=ab("useNavigate"),n=C.useRef(!1);return g2(()=>{n.current=!0}),C.useCallback(async(a,i={})=>{Er(n.current,p2),n.current&&(typeof a=="number"?await e.navigate(a):await e.navigate(a,{fromRouteId:t,...i}))},[e,t])}var rN={};function b2(e,t,n){!t&&!rN[e]&&(rN[e]=!0,Er(!1,n))}C.memo(CP);function CP({routes:e,future:t,state:n,onError:s}){return x2(e,void 0,n,s,t)}function Xl({to:e,replace:t,state:n,relative:s}){Lt(xc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=C.useContext(Cr);Er(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=C.useContext(Vr),{pathname:l}=ys(),u=Kr(),d=nb(e,tb(i),l,s==="path"),h=JSON.stringify(d);return C.useEffect(()=>{u(JSON.parse(h),{replace:t,state:n,relative:s})},[u,h,s,t,n]),null}function ib(e){return pP(e.context)}function Se(e){Lt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function TP({basename:e="/",children:t=null,location:n,navigationType:s="POP",navigator:a,static:i=!1,unstable_useTransitions:l}){Lt(!xc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=e.replace(/^\/*/,"/"),d=C.useMemo(()=>({basename:u,navigator:a,static:i,unstable_useTransitions:l,future:{}}),[u,a,i,l]);typeof n=="string"&&(n=pc(n));let{pathname:h="/",search:p="",hash:m="",state:g=null,key:y="default"}=n,b=C.useMemo(()=>{let w=ua(h,u);return w==null?null:{location:{pathname:w,search:p,hash:m,state:g,key:y},navigationType:s}},[u,h,p,m,g,y,s]);return Er(b!=null,`<Router basename="${u}"> is not able to match the URL "${h}${p}${m}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:C.createElement(Cr.Provider,{value:d},C.createElement(od.Provider,{children:t,value:b}))}function RP({children:e,location:t}){return gP(H0(e),t)}function H0(e,t=[]){let n=[];return C.Children.forEach(e,(s,a)=>{if(!C.isValidElement(s))return;let i=[...t,a];if(s.type===C.Fragment){n.push.apply(n,H0(s.props.children,i));return}Lt(s.type===Se,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Lt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let l={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(l.children=H0(s.props.children,i)),n.push(l)}),n}var yf="get",bf="application/x-www-form-urlencoded";function Om(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function IP(e){return Om(e)&&e.tagName.toLowerCase()==="button"}function PP(e){return Om(e)&&e.tagName.toLowerCase()==="form"}function AP(e){return Om(e)&&e.tagName.toLowerCase()==="input"}function OP(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function MP(e,t){return e.button===0&&(!t||t==="_self")&&!OP(e)}function z0(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let s=e[n];return t.concat(Array.isArray(s)?s.map(a=>[n,a]):[[n,s]])},[]))}function LP(e,t){let n=z0(e);return t&&t.forEach((s,a)=>{n.has(a)||t.getAll(a).forEach(i=>{n.append(a,i)})}),n}var zh=null;function $P(){if(zh===null)try{new FormData(document.createElement("form"),0),zh=!1}catch{zh=!0}return zh}var DP=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Px(e){return e!=null&&!DP.has(e)?(Er(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${bf}"`),null):e}function FP(e,t){let n,s,a,i,l;if(PP(e)){let u=e.getAttribute("action");s=u?ua(u,t):null,n=e.getAttribute("method")||yf,a=Px(e.getAttribute("enctype"))||bf,i=new FormData(e)}else if(IP(e)||AP(e)&&(e.type==="submit"||e.type==="image")){let u=e.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=e.getAttribute("formaction")||u.getAttribute("action");if(s=d?ua(d,t):null,n=e.getAttribute("formmethod")||u.getAttribute("method")||yf,a=Px(e.getAttribute("formenctype"))||Px(u.getAttribute("enctype"))||bf,i=new FormData(u,e),!$P()){let{name:h,type:p,value:m}=e;if(p==="image"){let g=h?`${h}.`:"";i.append(`${g}x`,"0"),i.append(`${g}y`,"0")}else h&&i.append(h,m)}}else{if(Om(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=yf,s=null,a=bf,l=e}return i&&a==="text/plain"&&(l=i,i=void 0),{action:s,method:n.toLowerCase(),encType:a,formData:i,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function ob(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function UP(e,t,n){let s=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return s.pathname==="/"?s.pathname=`_root.${n}`:t&&ua(s.pathname,t)==="/"?s.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${n}`,s}async function qP(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function BP(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function HP(e,t,n){let s=await Promise.all(e.map(async a=>{let i=t.routes[a.route.id];if(i){let l=await qP(i,n);return l.links?l.links():[]}return[]}));return VP(s.flat(1).filter(BP).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function sN(e,t,n,s,a,i){let l=(d,h)=>n[h]?d.route.id!==n[h].route.id:!0,u=(d,h)=>{var p;return n[h].pathname!==d.pathname||((p=n[h].route.path)==null?void 0:p.endsWith("*"))&&n[h].params["*"]!==d.params["*"]};return i==="assets"?t.filter((d,h)=>l(d,h)||u(d,h)):i==="data"?t.filter((d,h)=>{var m;let p=s.routes[d.route.id];if(!p||!p.hasLoader)return!1;if(l(d,h)||u(d,h))return!0;if(d.route.shouldRevalidate){let g=d.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((m=n[0])==null?void 0:m.params)||{},nextUrl:new URL(e,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function zP(e,t,{includeHydrateFallback:n}={}){return WP(e.map(s=>{let a=t.routes[s.route.id];if(!a)return[];let i=[a.module];return a.clientActionModule&&(i=i.concat(a.clientActionModule)),a.clientLoaderModule&&(i=i.concat(a.clientLoaderModule)),n&&a.hydrateFallbackModule&&(i=i.concat(a.hydrateFallbackModule)),a.imports&&(i=i.concat(a.imports)),i}).flat(1))}function WP(e){return[...new Set(e)]}function GP(e){let t={},n=Object.keys(e).sort();for(let s of n)t[s]=e[s];return t}function VP(e,t){let n=new Set;return new Set(t),e.reduce((s,a)=>{let i=JSON.stringify(GP(a));return n.has(i)||(n.add(i),s.push({key:i,link:a})),s},[])}function v2(){let e=C.useContext(gc);return ob(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function KP(){let e=C.useContext(Am);return ob(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var lb=C.createContext(void 0);lb.displayName="FrameworkContext";function w2(){let e=C.useContext(lb);return ob(e,"You must render this element inside a <HydratedRouter> element"),e}function YP(e,t){let n=C.useContext(lb),[s,a]=C.useState(!1),[i,l]=C.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:h,onMouseLeave:p,onTouchStart:m}=t,g=C.useRef(null);C.useEffect(()=>{if(e==="render"&&l(!0),e==="viewport"){let w=j=>{j.forEach(E=>{l(E.isIntersecting)})},v=new IntersectionObserver(w,{threshold:.5});return g.current&&v.observe(g.current),()=>{v.disconnect()}}},[e]),C.useEffect(()=>{if(s){let w=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(w)}}},[s]);let y=()=>{a(!0)},b=()=>{a(!1),l(!1)};return n?e!=="intent"?[i,g,{}]:[i,g,{onFocus:pu(u,y),onBlur:pu(d,b),onMouseEnter:pu(h,y),onMouseLeave:pu(p,b),onTouchStart:pu(m,y)}]:[!1,g,{}]}function pu(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function JP({page:e,...t}){let{router:n}=v2(),s=C.useMemo(()=>i2(n.routes,e,n.basename),[n.routes,e,n.basename]);return s?C.createElement(XP,{page:e,matches:s,...t}):null}function QP(e){let{manifest:t,routeModules:n}=w2(),[s,a]=C.useState([]);return C.useEffect(()=>{let i=!1;return HP(e,t,n).then(l=>{i||a(l)}),()=>{i=!0}},[e,t,n]),s}function XP({page:e,matches:t,...n}){let s=ys(),{manifest:a,routeModules:i}=w2(),{basename:l}=v2(),{loaderData:u,matches:d}=KP(),h=C.useMemo(()=>sN(e,t,d,a,s,"data"),[e,t,d,a,s]),p=C.useMemo(()=>sN(e,t,d,a,s,"assets"),[e,t,d,a,s]),m=C.useMemo(()=>{if(e===s.pathname+s.search+s.hash)return[];let b=new Set,w=!1;if(t.forEach(j=>{var k;let E=a.routes[j.route.id];!E||!E.hasLoader||(!h.some(S=>S.route.id===j.route.id)&&j.route.id in u&&((k=i[j.route.id])!=null&&k.shouldRevalidate)||E.hasClientLoader?w=!0:b.add(j.route.id))}),b.size===0)return[];let v=UP(e,l,"data");return w&&b.size>0&&v.searchParams.set("_routes",t.filter(j=>b.has(j.route.id)).map(j=>j.route.id).join(",")),[v.pathname+v.search]},[l,u,s,a,h,t,e,i]),g=C.useMemo(()=>zP(p,a),[p,a]),y=QP(p);return C.createElement(C.Fragment,null,m.map(b=>C.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...n})),g.map(b=>C.createElement("link",{key:b,rel:"modulepreload",href:b,...n})),y.map(({key:b,link:w})=>C.createElement("link",{key:b,nonce:n.nonce,...w})))}function ZP(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var e6=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{e6&&(window.__reactRouterVersion="7.11.0")}catch{}function t6({basename:e,children:t,unstable_useTransitions:n,window:s}){let a=C.useRef();a.current==null&&(a.current=P3({window:s,v5Compat:!0}));let i=a.current,[l,u]=C.useState({action:i.action,location:i.location}),d=C.useCallback(h=>{n===!1?u(h):C.startTransition(()=>u(h))},[n]);return C.useLayoutEffect(()=>i.listen(d),[i,d]),C.createElement(TP,{basename:e,children:t,location:l.location,navigationType:l.action,navigator:i,unstable_useTransitions:n})}var _2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Y=C.forwardRef(function({onClick:t,discover:n="render",prefetch:s="none",relative:a,reloadDocument:i,replace:l,state:u,target:d,to:h,preventScrollReset:p,viewTransition:m,unstable_defaultShouldRevalidate:g,...y},b){let{basename:w,unstable_useTransitions:v}=C.useContext(Cr),j=typeof h=="string"&&_2.test(h),E=d2(h,w);h=E.to;let k=hP(h,{relative:a}),[S,P,A]=YP(s,y),T=a6(h,{replace:l,state:u,target:d,preventScrollReset:p,relative:a,viewTransition:m,unstable_defaultShouldRevalidate:g,unstable_useTransitions:v});function L(R){t&&t(R),R.defaultPrevented||T(R)}let H=C.createElement("a",{...y,...A,href:E.absoluteURL||k,onClick:E.isExternal||i?t:L,ref:ZP(b,P),target:d,"data-discover":!j&&n==="render"?"true":void 0});return S&&!j?C.createElement(C.Fragment,null,H,C.createElement(JP,{page:k})):H});Y.displayName="Link";var n6=C.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:s="",end:a=!1,style:i,to:l,viewTransition:u,children:d,...h},p){let m=ld(l,{relative:h.relative}),g=ys(),y=C.useContext(Am),{navigator:b,basename:w}=C.useContext(Cr),v=y!=null&&u6(m)&&u===!0,j=b.encodeLocation?b.encodeLocation(m).pathname:m.pathname,E=g.pathname,k=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;n||(E=E.toLowerCase(),k=k?k.toLowerCase():null,j=j.toLowerCase()),k&&w&&(k=ua(k,w)||k);const S=j!=="/"&&j.endsWith("/")?j.length-1:j.length;let P=E===j||!a&&E.startsWith(j)&&E.charAt(S)==="/",A=k!=null&&(k===j||!a&&k.startsWith(j)&&k.charAt(j.length)==="/"),T={isActive:P,isPending:A,isTransitioning:v},L=P?t:void 0,H;typeof s=="function"?H=s(T):H=[s,P?"active":null,A?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let R=typeof i=="function"?i(T):i;return C.createElement(Y,{...h,"aria-current":L,className:H,ref:p,style:R,to:l,viewTransition:u},typeof d=="function"?d(T):d)});n6.displayName="NavLink";var r6=C.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:s,replace:a,state:i,method:l=yf,action:u,onSubmit:d,relative:h,preventScrollReset:p,viewTransition:m,unstable_defaultShouldRevalidate:g,...y},b)=>{let{unstable_useTransitions:w}=C.useContext(Cr),v=l6(),j=c6(u,{relative:h}),E=l.toLowerCase()==="get"?"get":"post",k=typeof u=="string"&&_2.test(u),S=P=>{if(d&&d(P),P.defaultPrevented)return;P.preventDefault();let A=P.nativeEvent.submitter,T=(A==null?void 0:A.getAttribute("formmethod"))||l,L=()=>v(A||P.currentTarget,{fetcherKey:t,method:T,navigate:n,replace:a,state:i,relative:h,preventScrollReset:p,viewTransition:m,unstable_defaultShouldRevalidate:g});w&&n!==!1?C.startTransition(()=>L()):L()};return C.createElement("form",{ref:b,method:E,action:j,onSubmit:s?d:S,...y,"data-discover":!k&&e==="render"?"true":void 0})});r6.displayName="Form";function s6(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function j2(e){let t=C.useContext(gc);return Lt(t,s6(e)),t}function a6(e,{target:t,replace:n,state:s,preventScrollReset:a,relative:i,viewTransition:l,unstable_defaultShouldRevalidate:u,unstable_useTransitions:d}={}){let h=Kr(),p=ys(),m=ld(e,{relative:i});return C.useCallback(g=>{if(MP(g,t)){g.preventDefault();let y=n!==void 0?n:Lu(p)===Lu(m),b=()=>h(e,{replace:y,state:s,preventScrollReset:a,relative:i,viewTransition:l,unstable_defaultShouldRevalidate:u});d?C.startTransition(()=>b()):b()}},[p,h,m,n,s,t,e,a,i,l,u,d])}function cd(e){Er(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=C.useRef(z0(e)),n=C.useRef(!1),s=ys(),a=C.useMemo(()=>LP(s.search,n.current?null:t.current),[s.search]),i=Kr(),l=C.useCallback((u,d)=>{const h=z0(typeof u=="function"?u(new URLSearchParams(a)):u);n.current=!0,i("?"+h,d)},[i,a]);return[a,l]}var i6=0,o6=()=>`__${String(++i6)}__`;function l6(){let{router:e}=j2("useSubmit"),{basename:t}=C.useContext(Cr),n=SP(),s=e.fetch,a=e.navigate;return C.useCallback(async(i,l={})=>{let{action:u,method:d,encType:h,formData:p,body:m}=FP(i,t);if(l.navigate===!1){let g=l.fetcherKey||o6();await s(g,n,l.action||u,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:p,body:m,formMethod:l.method||d,formEncType:l.encType||h,flushSync:l.flushSync})}else await a(l.action||u,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:p,body:m,formMethod:l.method||d,formEncType:l.encType||h,replace:l.replace,state:l.state,fromRouteId:n,flushSync:l.flushSync,viewTransition:l.viewTransition})},[s,a,t,n])}function c6(e,{relative:t}={}){let{basename:n}=C.useContext(Cr),s=C.useContext(Vr);Lt(s,"useFormAction must be used inside a RouteContext");let[a]=s.matches.slice(-1),i={...ld(e||".",{relative:t})},l=ys();if(e==null){i.search=l.search;let u=new URLSearchParams(i.search),d=u.getAll("index");if(d.some(p=>p==="")){u.delete("index"),d.filter(m=>m).forEach(m=>u.append("index",m));let p=u.toString();i.search=p?`?${p}`:""}}return(!e||e===".")&&a.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:ra([n,i.pathname])),Lu(i)}function u6(e,{relative:t}={}){let n=C.useContext(f2);Lt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=j2("useViewTransitionState"),a=ld(e,{relative:t});if(!n.isTransitioning)return!1;let i=ua(n.currentLocation.pathname,s)||n.currentLocation.pathname,l=ua(n.nextLocation.pathname,s)||n.nextLocation.pathname;return Gf(a.pathname,l)!=null||Gf(a.pathname,i)!=null}function Mm(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(n[s[a]]=e[s[a]]);return n}function d6(e,t,n,s){function a(i){return i instanceof n?i:new n(function(l){l(i)})}return new(n||(n=Promise))(function(i,l){function u(p){try{h(s.next(p))}catch(m){l(m)}}function d(p){try{h(s.throw(p))}catch(m){l(m)}}function h(p){p.done?i(p.value):a(p.value).then(u,d)}h((s=s.apply(e,t||[])).next())})}const h6=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class cb extends Error{constructor(t,n="FunctionsError",s){super(t),this.name=n,this.context=s}}class f6 extends cb{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class aN extends cb{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class iN extends cb{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var W0;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(W0||(W0={}));class m6{constructor(t,{headers:n={},customFetch:s,region:a=W0.Any}={}){this.url=t,this.headers=n,this.region=a,this.fetch=h6(s)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return d6(this,arguments,void 0,function*(n,s={}){var a;let i,l;try{const{headers:u,method:d,body:h,signal:p,timeout:m}=s;let g={},{region:y}=s;y||(y=this.region);const b=new URL(`${this.url}/${n}`);y&&y!=="any"&&(g["x-region"]=y,b.searchParams.set("forceFunctionRegion",y));let w;h&&(u&&!Object.prototype.hasOwnProperty.call(u,"Content-Type")||!u)?typeof Blob<"u"&&h instanceof Blob||h instanceof ArrayBuffer?(g["Content-Type"]="application/octet-stream",w=h):typeof h=="string"?(g["Content-Type"]="text/plain",w=h):typeof FormData<"u"&&h instanceof FormData?w=h:(g["Content-Type"]="application/json",w=JSON.stringify(h)):w=h;let v=p;m&&(l=new AbortController,i=setTimeout(()=>l.abort(),m),p?(v=l.signal,p.addEventListener("abort",()=>l.abort())):v=l.signal);const j=yield this.fetch(b.toString(),{method:d||"POST",headers:Object.assign(Object.assign(Object.assign({},g),this.headers),u),body:w,signal:v}).catch(P=>{throw new f6(P)}),E=j.headers.get("x-relay-error");if(E&&E==="true")throw new aN(j);if(!j.ok)throw new iN(j);let k=((a=j.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),S;return k==="application/json"?S=yield j.json():k==="application/octet-stream"||k==="application/pdf"?S=yield j.blob():k==="text/event-stream"?S=j:k==="multipart/form-data"?S=yield j.formData():S=yield j.text(),{data:S,error:null,response:j}}catch(u){return{data:null,error:u,response:u instanceof iN||u instanceof aN?u.context:void 0}}finally{i&&clearTimeout(i)}})}}var p6=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},g6=class{constructor(e){var t,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(n=e.isMaybeSingle)!==null&&n!==void 0?n:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let a=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let l=null,u=null,d=null,h=i.status,p=i.statusText;if(i.ok){var m,g;if(n.method!=="HEAD"){var y;const j=await i.text();j===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((y=n.headers.get("Accept"))===null||y===void 0)&&y.includes("application/vnd.pgrst.plan+text"))?u=j:u=JSON.parse(j))}const w=(m=n.headers.get("Prefer"))===null||m===void 0?void 0:m.match(/count=(exact|planned|estimated)/),v=(g=i.headers.get("content-range"))===null||g===void 0?void 0:g.split("/");w&&v&&v.length>1&&(d=parseInt(v[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(u)&&(u.length>1?(l={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,d=null,h=406,p="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{var b;const w=await i.text();try{l=JSON.parse(w),Array.isArray(l)&&i.status===404&&(u=[],l=null,h=200,p="OK")}catch{i.status===404&&w===""?(h=204,p="No Content"):l={message:w}}if(l&&n.isMaybeSingle&&(!(l==null||(b=l.details)===null||b===void 0)&&b.includes("0 rows"))&&(l=null,h=200,p="OK"),l&&n.shouldThrowOnError)throw new p6(l)}return{error:l,data:u,count:d,status:h,statusText:p}});return this.shouldThrowOnError||(a=a.catch(i=>{var l;let u="";const d=i==null?void 0:i.cause;if(d){var h,p,m,g;const b=(h=d==null?void 0:d.message)!==null&&h!==void 0?h:"",w=(p=d==null?void 0:d.code)!==null&&p!==void 0?p:"";u=`${(m=i==null?void 0:i.name)!==null&&m!==void 0?m:"FetchError"}: ${i==null?void 0:i.message}`,u+=`

Caused by: ${(g=d==null?void 0:d.name)!==null&&g!==void 0?g:"Error"}: ${b}`,w&&(u+=` (${w})`),d!=null&&d.stack&&(u+=`
${d.stack}`)}else{var y;u=(y=i==null?void 0:i.stack)!==null&&y!==void 0?y:""}return{error:{message:`${(l=i==null?void 0:i.name)!==null&&l!==void 0?l:"FetchError"}: ${i==null?void 0:i.message}`,details:u,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),a.then(e,t)}returns(){return this}overrideTypes(){return this}},x6=class extends g6{select(e){let t=!1;const n=(e??"*").split("").map(s=>/\s/.test(s)&&!t?"":(s==='"'&&(t=!t),s)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:s,referencedTable:a=s}={}){const i=a?`${a}.order`:"order",l=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${l?`${l},`:""}${e}.${t?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:s=n}={}){const a=typeof s>"u"?"offset":`${s}.offset`,i=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(i,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:s=!1,wal:a=!1,format:i="text"}={}){var l;const u=[e?"analyze":null,t?"verbose":null,n?"settings":null,s?"buffers":null,a?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${d}"; options=${u};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const oN=new RegExp("[,()]");var wl=class extends x6{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map(s=>typeof s=="string"&&oN.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}notIn(e,t){const n=Array.from(new Set(t)).map(s=>typeof s=="string"&&oN.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`not.in.(${n})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:s}={}){let a="";s==="plain"?a="pl":s==="phrase"?a="ph":s==="websearch"&&(a="w");const i=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${a}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach(([t,n])=>{this.url.searchParams.append(t,`eq.${n}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}},y6=class{constructor(e,{headers:t={},schema:n,fetch:s}){this.url=e,this.headers=new Headers(t),this.schema=n,this.fetch=s}select(e,t){const{head:n=!1,count:s}=t??{},a=n?"HEAD":"GET";let i=!1;const l=(e??"*").split("").map(u=>/\s/.test(u)&&!i?"":(u==='"'&&(i=!i),u)).join("");return this.url.searchParams.set("select",l),s&&this.headers.append("Prefer",`count=${s}`),new wl({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:n=!0}={}){var s;const a="POST";if(t&&this.headers.append("Prefer",`count=${t}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const i=e.reduce((l,u)=>l.concat(Object.keys(u)),[]);if(i.length>0){const l=[...new Set(i)].map(u=>`"${u}"`);this.url.searchParams.set("columns",l.join(","))}}return new wl({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:s,defaultToNull:a=!0}={}){var i;const l="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),t!==void 0&&this.url.searchParams.set("on_conflict",t),s&&this.headers.append("Prefer",`count=${s}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const u=e.reduce((d,h)=>d.concat(Object.keys(h)),[]);if(u.length>0){const d=[...new Set(u)].map(h=>`"${h}"`);this.url.searchParams.set("columns",d.join(","))}}return new wl({method:l,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(e,{count:t}={}){var n;const s="PATCH";return t&&this.headers.append("Prefer",`count=${t}`),new wl({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:e}={}){var t;const n="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new wl({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},b6=class N2{constructor(t,{headers:n={},schema:s,fetch:a}={}){this.url=t,this.headers=new Headers(n),this.schemaName=s,this.fetch=a}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new y6(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new N2(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:s=!1,get:a=!1,count:i}={}){var l;let u;const d=new URL(`${this.url}/rpc/${t}`);let h;s||a?(u=s?"HEAD":"GET",Object.entries(n).filter(([m,g])=>g!==void 0).map(([m,g])=>[m,Array.isArray(g)?`{${g.join(",")}}`:`${g}`]).forEach(([m,g])=>{d.searchParams.append(m,g)})):(u="POST",h=n);const p=new Headers(this.headers);return i&&p.set("Prefer",`count=${i}`),new wl({method:u,url:d,headers:p,schema:this.schemaName,body:h,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}};class v6{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const s=n.node,a=parseInt(s.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const s=this.getWebSocketConstructor();return new s(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const w6="2.89.0",_6=`realtime-js/${w6}`,S2="1.0.0",j6="2.0.0",lN=S2,G0=1e4,N6=1e3,S6=100;var za;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(za||(za={}));var cn;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(cn||(cn={}));var ls;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(ls||(ls={}));var V0;(function(e){e.websocket="websocket"})(V0||(V0={}));var Gi;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Gi||(Gi={}));class k6{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,n){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(t));let s=[t.join_ref,t.ref,t.topic,t.event,t.payload];return n(JSON.stringify(s))}_binaryEncodeUserBroadcastPush(t){var n;return this._isArrayBuffer((n=t.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var n,s;const a=(s=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&s!==void 0?s:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(t){var n,s;const a=(s=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&s!==void 0?s:{},l=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,l)}_encodeUserBroadcastPush(t,n,s){var a,i;const l=t.topic,u=(a=t.ref)!==null&&a!==void 0?a:"",d=(i=t.join_ref)!==null&&i!==void 0?i:"",h=t.payload.event,p=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},m=Object.keys(p).length===0?"":JSON.stringify(p);if(d.length>255)throw new Error(`joinRef length ${d.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`ref length ${u.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`topic length ${l.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`userEvent length ${h.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`metadata length ${m.length} exceeds maximum of 255`);const g=this.USER_BROADCAST_PUSH_META_LENGTH+d.length+u.length+l.length+h.length+m.length,y=new ArrayBuffer(this.HEADER_LENGTH+g);let b=new DataView(y),w=0;b.setUint8(w++,this.KINDS.userBroadcastPush),b.setUint8(w++,d.length),b.setUint8(w++,u.length),b.setUint8(w++,l.length),b.setUint8(w++,h.length),b.setUint8(w++,m.length),b.setUint8(w++,n),Array.from(d,j=>b.setUint8(w++,j.charCodeAt(0))),Array.from(u,j=>b.setUint8(w++,j.charCodeAt(0))),Array.from(l,j=>b.setUint8(w++,j.charCodeAt(0))),Array.from(h,j=>b.setUint8(w++,j.charCodeAt(0))),Array.from(m,j=>b.setUint8(w++,j.charCodeAt(0)));var v=new Uint8Array(y.byteLength+s.byteLength);return v.set(new Uint8Array(y),0),v.set(new Uint8Array(s),y.byteLength),v.buffer}decode(t,n){if(this._isArrayBuffer(t)){let s=this._binaryDecode(t);return n(s)}if(typeof t=="string"){const s=JSON.parse(t),[a,i,l,u,d]=s;return n({join_ref:a,ref:i,topic:l,event:u,payload:d})}return n({})}_binaryDecode(t){const n=new DataView(t),s=n.getUint8(0),a=new TextDecoder;switch(s){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,n,a)}}_decodeUserBroadcast(t,n,s){const a=n.getUint8(1),i=n.getUint8(2),l=n.getUint8(3),u=n.getUint8(4);let d=this.HEADER_LENGTH+4;const h=s.decode(t.slice(d,d+a));d=d+a;const p=s.decode(t.slice(d,d+i));d=d+i;const m=s.decode(t.slice(d,d+l));d=d+l;const g=t.slice(d,t.byteLength),y=u===this.JSON_ENCODING?JSON.parse(s.decode(g)):g,b={type:this.BROADCAST_EVENT,event:p,payload:y};return l>0&&(b.meta=JSON.parse(m)),{join_ref:null,ref:null,topic:h,event:this.BROADCAST_EVENT,payload:b}}_isArrayBuffer(t){var n;return t instanceof ArrayBuffer||((n=t==null?void 0:t.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(t,n){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([s])=>n.includes(s)))}}class k2{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var kt;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(kt||(kt={}));const cN=(e,t,n={})=>{var s;const a=(s=n.skipTypes)!==null&&s!==void 0?s:[];return t?Object.keys(t).reduce((i,l)=>(i[l]=E6(l,e,t,a),i),{}):{}},E6=(e,t,n,s)=>{const a=t.find(u=>u.name===e),i=a==null?void 0:a.type,l=n[e];return i&&!s.includes(i)?E2(i,l):K0(l)},E2=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return I6(t,n)}switch(e){case kt.bool:return C6(t);case kt.float4:case kt.float8:case kt.int2:case kt.int4:case kt.int8:case kt.numeric:case kt.oid:return T6(t);case kt.json:case kt.jsonb:return R6(t);case kt.timestamp:return P6(t);case kt.abstime:case kt.date:case kt.daterange:case kt.int4range:case kt.int8range:case kt.money:case kt.reltime:case kt.text:case kt.time:case kt.timestamptz:case kt.timetz:case kt.tsrange:case kt.tstzrange:return K0(t);default:return K0(t)}},K0=e=>e,C6=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},T6=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},R6=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},I6=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,s=e[n];if(e[0]==="{"&&s==="}"){let i;const l=e.slice(1,n);try{i=JSON.parse("["+l+"]")}catch{i=l?l.split(","):[]}return i.map(u=>E2(t,u))}return e},P6=e=>typeof e=="string"?e.replace(" ","T"):e,C2=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Ax{constructor(t,n,s={},a=G0){this.channel=t,this.event=n,this.payload=s,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var s;return this._hasReceived(t)&&n((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(s=>s.status===t).forEach(s=>s.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var uN;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(uN||(uN={}));class Eu{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},a=>{const{onJoin:i,onLeave:l,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Eu.syncState(this.state,a,i,l),this.pendingDiffs.forEach(d=>{this.state=Eu.syncDiff(this.state,d,i,l)}),this.pendingDiffs=[],u()}),this.channel._on(s.diff,{},a=>{const{onJoin:i,onLeave:l,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Eu.syncDiff(this.state,a,i,l),u())}),this.onJoin((a,i,l)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:l})}),this.onLeave((a,i,l)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,s,a){const i=this.cloneDeep(t),l=this.transformState(n),u={},d={};return this.map(i,(h,p)=>{l[h]||(d[h]=p)}),this.map(l,(h,p)=>{const m=i[h];if(m){const g=p.map(v=>v.presence_ref),y=m.map(v=>v.presence_ref),b=p.filter(v=>y.indexOf(v.presence_ref)<0),w=m.filter(v=>g.indexOf(v.presence_ref)<0);b.length>0&&(u[h]=b),w.length>0&&(d[h]=w)}else u[h]=p}),this.syncDiff(i,{joins:u,leaves:d},s,a)}static syncDiff(t,n,s,a){const{joins:i,leaves:l}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return s||(s=()=>{}),a||(a=()=>{}),this.map(i,(u,d)=>{var h;const p=(h=t[u])!==null&&h!==void 0?h:[];if(t[u]=this.cloneDeep(d),p.length>0){const m=t[u].map(y=>y.presence_ref),g=p.filter(y=>m.indexOf(y.presence_ref)<0);t[u].unshift(...g)}s(u,p,d)}),this.map(l,(u,d)=>{let h=t[u];if(!h)return;const p=d.map(m=>m.presence_ref);h=h.filter(m=>p.indexOf(m.presence_ref)<0),t[u]=h,a(u,h,d),h.length===0&&delete t[u]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(s=>n(s,t[s]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,s)=>{const a=t[s];return"metas"in a?n[s]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[s]=a,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var dN;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(dN||(dN={}));var Cu;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Cu||(Cu={}));var Ys;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Ys||(Ys={}));class El{constructor(t,n={config:{}},s){var a,i;if(this.topic=t,this.params=n,this.socket=s,this.bindings={},this.state=cn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Ax(this,ls.join,this.params,this.timeout),this.rejoinTimer=new k2(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=cn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=cn.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=cn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=cn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=cn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ls.reply,{},(l,u)=>{this._trigger(this._replyEventName(u),l)}),this.presence=new Eu(this),this.broadcastEndpointURL=C2(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var s,a,i;if(this.socket.isConnected()||this.socket.connect(),this.state==cn.closed){const{config:{broadcast:l,presence:u,private:d}}=this.params,h=(a=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(y=>y.filter))!==null&&a!==void 0?a:[],p=!!this.bindings[Cu.PRESENCE]&&this.bindings[Cu.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,m={},g={broadcast:l,presence:Object.assign(Object.assign({},u),{enabled:p}),postgres_changes:h,private:d};this.socket.accessTokenValue&&(m.access_token=this.socket.accessTokenValue),this._onError(y=>t==null?void 0:t(Ys.CHANNEL_ERROR,y)),this._onClose(()=>t==null?void 0:t(Ys.CLOSED)),this.updateJoinPayload(Object.assign({config:g},m)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:y})=>{var b;if(this.socket._isManualToken()||this.socket.setAuth(),y===void 0){t==null||t(Ys.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,v=(b=w==null?void 0:w.length)!==null&&b!==void 0?b:0,j=[];for(let E=0;E<v;E++){const k=w[E],{filter:{event:S,schema:P,table:A,filter:T}}=k,L=y&&y[E];if(L&&L.event===S&&El.isFilterValueEqual(L.schema,P)&&El.isFilterValueEqual(L.table,A)&&El.isFilterValueEqual(L.filter,T))j.push(Object.assign(Object.assign({},k),{id:L.id}));else{this.unsubscribe(),this.state=cn.errored,t==null||t(Ys.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=j,t&&t(Ys.SUBSCRIBED);return}}).receive("error",y=>{this.state=cn.errored,t==null||t(Ys.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(y).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Ys.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,s){return this.state===cn.joined&&t===Cu.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,n,s)}async httpSend(t,n,s={}){var a;if(n==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:n,private:this.private}]})},u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(a=s.timeout)!==null&&a!==void 0?a:this.timeout);if(u.status===202)return{success:!0};let d=u.statusText;try{const h=await u.json();d=h.error||h.message||d}catch{}return Promise.reject(new Error(d))}async send(t,n={}){var s,a;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:l}=t,u={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(u.Authorization=`Bearer ${this.socket.accessTokenValue}`);const d={method:"POST",headers:u,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:l,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);return await((a=h.body)===null||a===void 0?void 0:a.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var l,u,d;const h=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((d=(u=(l=this.params)===null||l===void 0?void 0:l.config)===null||u===void 0?void 0:u.broadcast)===null||d===void 0)&&d.ack)&&i("ok"),h.receive("ok",()=>i("ok")),h.receive("error",()=>i("error")),h.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=cn.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ls.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(a=>{s=new Ax(this,ls.leave,{},t),s.receive("ok",()=>{n(),a("ok")}).receive("timeout",()=>{n(),a("timed out")}).receive("error",()=>{a("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=cn.closed,this.bindings={}}async _fetchWithTimeout(t,n,s){const a=new AbortController,i=setTimeout(()=>a.abort(),s),l=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:a.signal}));return clearTimeout(i),l}_push(t,n,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Ax(this,t,n,s);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>S6){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,s){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,s){var a,i;const l=t.toLocaleLowerCase(),{close:u,error:d,leave:h,join:p}=ls;if(s&&[u,d,h,p].indexOf(l)>=0&&s!==this._joinRef())return;let g=this._onMessage(l,n,s);if(n&&!g)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(y=>{var b,w,v;return((b=y.filter)===null||b===void 0?void 0:b.event)==="*"||((v=(w=y.filter)===null||w===void 0?void 0:w.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===l}).map(y=>y.callback(g,s)):(i=this.bindings[l])===null||i===void 0||i.filter(y=>{var b,w,v,j,E,k;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in y){const S=y.id,P=(b=y.filter)===null||b===void 0?void 0:b.event;return S&&((w=n.ids)===null||w===void 0?void 0:w.includes(S))&&(P==="*"||(P==null?void 0:P.toLocaleLowerCase())===((v=n.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{const S=(E=(j=y==null?void 0:y.filter)===null||j===void 0?void 0:j.event)===null||E===void 0?void 0:E.toLocaleLowerCase();return S==="*"||S===((k=n==null?void 0:n.event)===null||k===void 0?void 0:k.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===l}).map(y=>{if(typeof g=="object"&&"ids"in g){const b=g.data,{schema:w,table:v,commit_timestamp:j,type:E,errors:k}=b;g=Object.assign(Object.assign({},{schema:w,table:v,commit_timestamp:j,eventType:E,new:{},old:{},errors:k}),this._getPayloadRecords(b))}y.callback(g,s)})}_isClosed(){return this.state===cn.closed}_isJoined(){return this.state===cn.joined}_isJoining(){return this.state===cn.joining}_isLeaving(){return this.state===cn.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,s){const a=t.toLocaleLowerCase(),i={type:a,filter:n,callback:s};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(t,n){const s=t.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===s&&El.isEqual(a.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const s in t)if(t[s]!==n[s])return!1;return!0}static isFilterValueEqual(t,n){return(t??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(ls.close,{},t)}_onError(t){this._on(ls.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=cn.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=cN(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=cN(t.columns,t.old_record)),n}}const Ox=()=>{},Wh={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},A6=[1e3,2e3,5e3,1e4],O6=1e4,M6=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class L6{constructor(t,n){var s;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=G0,this.transport=null,this.heartbeatIntervalMs=Wh.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ox,this.ref=0,this.reconnectTimer=null,this.vsn=lN,this.logger=Ox,this.conn=null,this.sendBuffer=[],this.serializer=new k6,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>a?(...i)=>a(...i):(...i)=>fetch(...i),!(!((s=n==null?void 0:n.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${V0.websocket}`,this.httpEndpoint=C2(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=v6.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,s){this.logger(t,n,s)}connectionState(){switch(this.conn&&this.conn.readyState){case za.connecting:return Gi.Connecting;case za.open:return Gi.Open;case za.closing:return Gi.Closing;default:return Gi.Closed}}isConnected(){return this.connectionState()===Gi.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const s=`realtime:${t}`,a=this.getChannels().find(i=>i.topic===s);if(a)return a;{const i=new El(`realtime:${t}`,n,this);return this.channels.push(i),i}}push(t){const{topic:n,event:s,payload:a,ref:i}=t,l=()=>{this.encode(t,u=>{var d;(d=this.conn)===null||d===void 0||d.send(u)})};this.log("push",`${n} ${s} (${i})`,a),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(N6,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Wh.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(s=>s.topic===t&&(s._isJoined()||s._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(h){this.log("error","error in heartbeat callback",h)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:a,payload:i,ref:l}=n,u=l?`(${l})`:"",d=i.status||"";this.log("receive",`${d} ${s} ${a} ${u}`.trim(),i),this.channels.filter(h=>h._isMember(s)).forEach(h=>h._trigger(a,i,l)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===za.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===za.open||this.conn.readyState===za.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(ls.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const s=t.match(/\?/)?"&":"?",a=new URLSearchParams(n);return`${t}${s}${a}`}_workerObjectUrl(t){let n;if(t)n=t;else{const s=new Blob([M6],{type:"application/javascript"});n=URL.createObjectURL(s)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n,s=!1;if(t)n=t,s=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(a){this.log("error","Error fetching access token from callback",a),n=this.accessTokenValue}else n=this.accessTokenValue;s?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(a=>{const i={access_token:n,version:_6};n&&a.updateJoinPayload(i),a.joinedOnce&&a._isJoined()&&a._push(ls.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(s=>{try{s(n)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(s){this.log("error",`error triggering ${t} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new k2(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Wh.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,s,a,i,l,u,d,h,p,m,g,y;switch(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(s=t==null?void 0:t.timeout)!==null&&s!==void 0?s:G0,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:Wh.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(l=t==null?void 0:t.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(u=t==null?void 0:t.heartbeatCallback)!==null&&u!==void 0?u:Ox,this.vsn=(d=t==null?void 0:t.vsn)!==null&&d!==void 0?d:lN,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(h=t==null?void 0:t.reconnectAfterMs)!==null&&h!==void 0?h:(b=>A6[b-1]||O6),this.vsn){case S2:this.encode=(p=t==null?void 0:t.encode)!==null&&p!==void 0?p:((b,w)=>w(JSON.stringify(b))),this.decode=(m=t==null?void 0:t.decode)!==null&&m!==void 0?m:((b,w)=>w(JSON.parse(b)));break;case j6:this.encode=(g=t==null?void 0:t.encode)!==null&&g!==void 0?g:this.serializer.encode.bind(this.serializer),this.decode=(y=t==null?void 0:t.decode)!==null&&y!==void 0?y:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var $u=class extends Error{constructor(e,t){var n;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((n=t.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function $6(e,t,n){const s=new URL(t,e);if(n)for(const[a,i]of Object.entries(n))i!==void 0&&s.searchParams.set(a,i);return s.toString()}async function D6(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function F6(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:n,path:s,query:a,body:i,headers:l}){const u=$6(e.baseUrl,s,a),d=await D6(e.auth),h=await t(u,{method:n,headers:{...i?{"Content-Type":"application/json"}:{},...d,...l},body:i?JSON.stringify(i):void 0}),p=await h.text(),m=(h.headers.get("content-type")||"").includes("application/json"),g=m&&p?JSON.parse(p):p;if(!h.ok){const y=m?g:void 0,b=y==null?void 0:y.error;throw new $u((b==null?void 0:b.message)??`Request failed with status ${h.status}`,{status:h.status,icebergType:b==null?void 0:b.type,icebergCode:b==null?void 0:b.code,details:y})}return{status:h.status,headers:h.headers,data:g}}}}function Gh(e){return e.join("")}var U6=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:Gh(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(s=>({namespace:s}))}async createNamespace(e,t){const n={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Gh(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Gh(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Gh(e.namespace)}`}),!0}catch(t){if(t instanceof $u&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(n){if(n instanceof $u&&n.status===409)return;throw n}}};function dl(e){return e.join("")}var q6=class{constructor(e,t="",n){this.client=e,this.prefix=t,this.accessDelegation=n}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${dl(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${dl(e.namespace)}/tables`,body:t,headers:n})).data.metadata}async updateTable(e,t){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${dl(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${dl(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${dl(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${dl(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(n){if(n instanceof $u&&n.status===404)return!1;throw n}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(n){if(n instanceof $u&&n.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw n}}},B6=class{constructor(e){var s;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const n=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=F6({baseUrl:n,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(s=e.accessDelegation)==null?void 0:s.join(","),this.namespaceOps=new U6(this.client,t),this.tableOps=new q6(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},Lm=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function Ut(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var H6=class extends Lm{constructor(e,t,n){super(e),this.name="StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Y0=class extends Lm{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}};const ub=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),z6=()=>Response,J0=e=>{if(Array.isArray(e))return e.map(n=>J0(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,s])=>{const a=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[a]=J0(s)}),t},W6=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},G6=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function Du(e){"@babel/helpers - typeof";return Du=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Du(e)}function V6(e,t){if(Du(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Du(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function K6(e){var t=V6(e,"string");return Du(t)=="symbol"?t:t+""}function Y6(e,t,n){return(t=K6(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Me(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?hN(Object(n),!0).forEach(function(s){Y6(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hN(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}const Mx=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},J6=async(e,t,n)=>{e instanceof await z6()&&!(n!=null&&n.noResolveJson)?e.json().then(s=>{const a=e.status||500,i=(s==null?void 0:s.statusCode)||a+"";t(new H6(Mx(s),a,i))}).catch(s=>{t(new Y0(Mx(s),s))}):t(new Y0(Mx(e),e))},Q6=(e,t,n,s)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!s?a:(W6(s)?(a.headers=Me({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(s)):a.body=s,t!=null&&t.duplex&&(a.duplex=t.duplex),Me(Me({},a),n))};async function ud(e,t,n,s,a,i){return new Promise((l,u)=>{e(n,Q6(t,s,a,i)).then(d=>{if(!d.ok)throw d;return s!=null&&s.noResolveJson?d:d.json()}).then(d=>l(d)).catch(d=>J6(d,u,s))})}async function Fu(e,t,n,s){return ud(e,"GET",t,n,s)}async function as(e,t,n,s,a){return ud(e,"POST",t,s,a,n)}async function Q0(e,t,n,s,a){return ud(e,"PUT",t,s,a,n)}async function X6(e,t,n,s){return ud(e,"HEAD",t,Me(Me({},n),{},{noResolveJson:!0}),s)}async function db(e,t,n,s,a){return ud(e,"DELETE",t,s,a,n)}var Z6=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Ut(t))return{data:null,error:t};throw t}}};let T2;T2=Symbol.toStringTag;var eA=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[T2]="BlobDownloadBuilder",this.promise=null}asStream(){return new Z6(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Ut(t))return{data:null,error:t};throw t}}};const tA={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},fN={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var nA=class{constructor(e,t={},n,s){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=n,this.fetch=ub(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(e,t,n,s){var a=this;try{let i;const l=Me(Me({},fN),s);let u=Me(Me({},a.headers),e==="POST"&&{"x-upsert":String(l.upsert)});const d=l.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",l.cacheControl),d&&i.append("metadata",a.encodeMetadata(d)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.has("cacheControl")||i.append("cacheControl",l.cacheControl),d&&!i.has("metadata")&&i.append("metadata",a.encodeMetadata(d))):(i=n,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType,d&&(u["x-metadata"]=a.toBase64(a.encodeMetadata(d))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!l.duplex&&(l.duplex="half")),s!=null&&s.headers&&(u=Me(Me({},u),s.headers));const h=a._removeEmptyFolders(t),p=a._getFinalPath(h),m=await(e=="PUT"?Q0:as)(a.fetch,`${a.url}/object/${p}`,i,Me({headers:u},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{data:{path:h,id:m.Id,fullPath:m.Key},error:null}}catch(i){if(a.shouldThrowOnError)throw i;if(Ut(i))return{data:null,error:i};throw i}}async upload(e,t,n){return this.uploadOrUpdate("POST",e,t,n)}async uploadToSignedUrl(e,t,n,s){var a=this;const i=a._removeEmptyFolders(e),l=a._getFinalPath(i),u=new URL(a.url+`/object/upload/sign/${l}`);u.searchParams.set("token",t);try{let d;const h=Me({upsert:fN.upsert},s),p=Me(Me({},a.headers),{"x-upsert":String(h.upsert)});return typeof Blob<"u"&&n instanceof Blob?(d=new FormData,d.append("cacheControl",h.cacheControl),d.append("",n)):typeof FormData<"u"&&n instanceof FormData?(d=n,d.append("cacheControl",h.cacheControl)):(d=n,p["cache-control"]=`max-age=${h.cacheControl}`,p["content-type"]=h.contentType),{data:{path:i,fullPath:(await Q0(a.fetch,u.toString(),d,{headers:p})).Key},error:null}}catch(d){if(a.shouldThrowOnError)throw d;if(Ut(d))return{data:null,error:d};throw d}}async createSignedUploadUrl(e,t){var n=this;try{let s=n._getFinalPath(e);const a=Me({},n.headers);t!=null&&t.upsert&&(a["x-upsert"]="true");const i=await as(n.fetch,`${n.url}/object/upload/sign/${s}`,{},{headers:a}),l=new URL(n.url+i.url),u=l.searchParams.get("token");if(!u)throw new Lm("No token returned by API");return{data:{signedUrl:l.toString(),path:e,token:u},error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(Ut(s))return{data:null,error:s};throw s}}async update(e,t,n){return this.uploadOrUpdate("PUT",e,t,n)}async move(e,t,n){var s=this;try{return{data:await as(s.fetch,`${s.url}/object/move`,{bucketId:s.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:s.headers}),error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(Ut(a))return{data:null,error:a};throw a}}async copy(e,t,n){var s=this;try{return{data:{path:(await as(s.fetch,`${s.url}/object/copy`,{bucketId:s.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:s.headers})).Key},error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(Ut(a))return{data:null,error:a};throw a}}async createSignedUrl(e,t,n){var s=this;try{let a=s._getFinalPath(e),i=await as(s.fetch,`${s.url}/object/sign/${a}`,Me({expiresIn:t},n!=null&&n.transform?{transform:n.transform}:{}),{headers:s.headers});const l=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${s.url}${i.signedURL}${l}`)},{data:i,error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(Ut(a))return{data:null,error:a};throw a}}async createSignedUrls(e,t,n){var s=this;try{const a=await as(s.fetch,`${s.url}/object/sign/${s.bucketId}`,{expiresIn:t,paths:e},{headers:s.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:a.map(l=>Me(Me({},l),{},{signedUrl:l.signedURL?encodeURI(`${s.url}${l.signedURL}${i}`):null})),error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(Ut(a))return{data:null,error:a};throw a}}download(e,t){const n=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),a=s?`?${s}`:"",i=this._getFinalPath(e),l=()=>Fu(this.fetch,`${this.url}/${n}/${i}${a}`,{headers:this.headers,noResolveJson:!0});return new eA(l,this.shouldThrowOnError)}async info(e){var t=this;const n=t._getFinalPath(e);try{return{data:J0(await Fu(t.fetch,`${t.url}/object/info/${n}`,{headers:t.headers})),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Ut(s))return{data:null,error:s};throw s}}async exists(e){var t=this;const n=t._getFinalPath(e);try{return await X6(t.fetch,`${t.url}/object/${n}`,{headers:t.headers}),{data:!0,error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(Ut(s)&&s instanceof Y0){const a=s.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:s}}throw s}}getPublicUrl(e,t){const n=this._getFinalPath(e),s=[],a=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";a!==""&&s.push(a);const i=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&s.push(l);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${n}${u}`)}}}async remove(e){var t=this;try{return{data:await db(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Ut(n))return{data:null,error:n};throw n}}async list(e,t,n){var s=this;try{const a=Me(Me(Me({},tA),t),{},{prefix:e||""});return{data:await as(s.fetch,`${s.url}/object/list/${s.bucketId}`,a,{headers:s.headers},n),error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(Ut(a))return{data:null,error:a};throw a}}async listV2(e,t){var n=this;try{const s=Me({},e);return{data:await as(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,s,{headers:n.headers},t),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(Ut(s))return{data:null,error:s};throw s}}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const R2="2.89.0",I2={"X-Client-Info":`storage-js/${R2}`};var rA=class{constructor(e,t={},n,s){this.shouldThrowOnError=!1;const a=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=Me(Me({},I2),t),this.fetch=ub(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(e){var t=this;try{const n=t.listBucketOptionsToQueryString(e);return{data:await Fu(t.fetch,`${t.url}/bucket${n}`,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Ut(n))return{data:null,error:n};throw n}}async getBucket(e){var t=this;try{return{data:await Fu(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Ut(n))return{data:null,error:n};throw n}}async createBucket(e,t={public:!1}){var n=this;try{return{data:await as(n.fetch,`${n.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(Ut(s))return{data:null,error:s};throw s}}async updateBucket(e,t){var n=this;try{return{data:await Q0(n.fetch,`${n.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(Ut(s))return{data:null,error:s};throw s}}async emptyBucket(e){var t=this;try{return{data:await as(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Ut(n))return{data:null,error:n};throw n}}async deleteBucket(e){var t=this;try{return{data:await db(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Ut(n))return{data:null,error:n};throw n}}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},sA=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Me(Me({},I2),t),this.fetch=ub(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await as(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Ut(n))return{data:null,error:n};throw n}}async listBuckets(e){var t=this;try{const n=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&n.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&n.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&n.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&n.set("sortOrder",e.sortOrder),e!=null&&e.search&&n.set("search",e.search);const s=n.toString(),a=s?`${t.url}/bucket?${s}`:`${t.url}/bucket`;return{data:await Fu(t.fetch,a,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Ut(n))return{data:null,error:n};throw n}}async deleteBucket(e){var t=this;try{return{data:await db(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Ut(n))return{data:null,error:n};throw n}}from(e){var t=this;if(!G6(e))throw new Lm("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new B6({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),s=this.shouldThrowOnError;return new Proxy(n,{get(a,i){const l=a[i];return typeof l!="function"?l:async(...u)=>{try{return{data:await l.apply(a,u),error:null}}catch(d){if(s)throw d;return{data:null,error:d}}}}})}};const hb={"X-Client-Info":`storage-js/${R2}`,"Content-Type":"application/json"};var P2=class extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function jr(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}var Lx=class extends P2{constructor(e,t,n){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},aA=class extends P2{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}};const fb=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),iA=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},mN=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),oA=async(e,t,n)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(n!=null&&n.noResolveJson)){const s=e.status||500,a=e;if(typeof a.json=="function")a.json().then(i=>{const l=(i==null?void 0:i.statusCode)||(i==null?void 0:i.code)||s+"";t(new Lx(mN(i),s,l))}).catch(()=>{const i=s+"";t(new Lx(a.statusText||`HTTP ${s} error`,s,i))});else{const i=s+"";t(new Lx(a.statusText||`HTTP ${s} error`,s,i))}}else t(new aA(mN(e),e))},lA=(e,t,n,s)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return s?(iA(s)?(a.headers=Me({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(s)):a.body=s,Me(Me({},a),n)):a};async function cA(e,t,n,s,a,i){return new Promise((l,u)=>{e(n,lA(t,s,a,i)).then(d=>{if(!d.ok)throw d;if(s!=null&&s.noResolveJson)return d;const h=d.headers.get("content-type");return!h||!h.includes("application/json")?{}:d.json()}).then(d=>l(d)).catch(d=>oA(d,u,s))})}async function Nr(e,t,n,s,a){return cA(e,"POST",t,s,a,n)}var uA=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Me(Me({},hb),t),this.fetch=fb(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(e){var t=this;try{return{data:await Nr(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(jr(n))return{data:null,error:n};throw n}}async getIndex(e,t){var n=this;try{return{data:await Nr(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers}),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(jr(s))return{data:null,error:s};throw s}}async listIndexes(e){var t=this;try{return{data:await Nr(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(jr(n))return{data:null,error:n};throw n}}async deleteIndex(e,t){var n=this;try{return{data:await Nr(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers})||{},error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(jr(s))return{data:null,error:s};throw s}}},dA=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Me(Me({},hb),t),this.fetch=fb(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(e){var t=this;try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await Nr(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(jr(n))return{data:null,error:n};throw n}}async getVectors(e){var t=this;try{return{data:await Nr(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(jr(n))return{data:null,error:n};throw n}}async listVectors(e){var t=this;try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:await Nr(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(jr(n))return{data:null,error:n};throw n}}async queryVectors(e){var t=this;try{return{data:await Nr(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(jr(n))return{data:null,error:n};throw n}}async deleteVectors(e){var t=this;try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await Nr(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(jr(n))return{data:null,error:n};throw n}}},hA=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Me(Me({},hb),t),this.fetch=fb(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await Nr(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(jr(n))return{data:null,error:n};throw n}}async getBucket(e){var t=this;try{return{data:await Nr(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(jr(n))return{data:null,error:n};throw n}}async listBuckets(e={}){var t=this;try{return{data:await Nr(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(jr(n))return{data:null,error:n};throw n}}async deleteBucket(e){var t=this;try{return{data:await Nr(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(jr(n))return{data:null,error:n};throw n}}},fA=class extends hA{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new mA(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,n=this;return t().call(n,e)}async getBucket(e){var t=()=>super.getBucket,n=this;return t().call(n,e)}async listBuckets(e={}){var t=()=>super.listBuckets,n=this;return t().call(n,e)}async deleteBucket(e){var t=()=>super.deleteBucket,n=this;return t().call(n,e)}},mA=class extends uA{constructor(e,t,n,s){super(e,t,s),this.vectorBucketName=n}async createIndex(e){var t=()=>super.createIndex,n=this;return t().call(n,Me(Me({},e),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,n=this;return t().call(n,Me(Me({},e),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,n=this;return t().call(n,n.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,n=this;return t().call(n,n.vectorBucketName,e)}index(e){return new pA(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},pA=class extends dA{constructor(e,t,n,s,a){super(e,t,a),this.vectorBucketName=n,this.indexName=s}async putVectors(e){var t=()=>super.putVectors,n=this;return t().call(n,Me(Me({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(e){var t=()=>super.getVectors,n=this;return t().call(n,Me(Me({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,n=this;return t().call(n,Me(Me({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,n=this;return t().call(n,Me(Me({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,n=this;return t().call(n,Me(Me({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},gA=class extends rA{constructor(e,t={},n,s){super(e,t,n,s)}from(e){return new nA(this.url,this.headers,e,this.fetch)}get vectors(){return new fA(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new sA(this.url+"/iceberg",this.headers,this.fetch)}};const A2="2.89.0",_l=30*1e3,X0=3,$x=X0*_l,xA="http://localhost:9999",yA="supabase.auth.token",bA={"X-Client-Info":`gotrue-js/${A2}`},Z0="X-Supabase-Api-Version",O2={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},vA=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,wA=600*1e3;class Uu extends Error{constructor(t,n,s){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=s}}function Ce(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class _A extends Uu{constructor(t,n,s){super(t,n,s),this.name="AuthApiError",this.status=n,this.code=s}}function jA(e){return Ce(e)&&e.name==="AuthApiError"}class Vi extends Uu{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class xa extends Uu{constructor(t,n,s,a){super(t,s,a),this.name=n,this.status=s}}class yr extends xa{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function NA(e){return Ce(e)&&e.name==="AuthSessionMissingError"}class hl extends xa{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Vh extends xa{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Kh extends xa{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function SA(e){return Ce(e)&&e.name==="AuthImplicitGrantRedirectError"}class pN extends xa{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class kA extends xa{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class ey extends xa{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function Dx(e){return Ce(e)&&e.name==="AuthRetryableFetchError"}class gN extends xa{constructor(t,n,s){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=s}}class ty extends xa{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Vf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),xN=` 	
\r=`.split(""),EA=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<xN.length;t+=1)e[xN[t].charCodeAt(0)]=-2;for(let t=0;t<Vf.length;t+=1)e[Vf[t].charCodeAt(0)]=t;return e})();function yN(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;n(Vf[s]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;n(Vf[s]),t.queuedBits-=6}}function M2(e,t,n){const s=EA[e];if(s>-1)for(t.queue=t.queue<<6|s,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function bN(e){const t=[],n=l=>{t.push(String.fromCodePoint(l))},s={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=l=>{RA(l,s,n)};for(let l=0;l<e.length;l+=1)M2(e.charCodeAt(l),a,i);return t.join("")}function CA(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function TA(e,t){for(let n=0;n<e.length;n+=1){let s=e.charCodeAt(n);if(s>55295&&s<=56319){const a=(s-55296)*1024&65535;s=(e.charCodeAt(n+1)-56320&65535|a)+65536,n+=1}CA(s,t)}}function RA(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let s=1;s<6;s+=1)if((e>>7-s&1)===0){t.utf8seq=s;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function Ml(e){const t=[],n={queue:0,queuedBits:0},s=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)M2(e.charCodeAt(a),n,s);return new Uint8Array(t)}function IA(e){const t=[];return TA(e,n=>t.push(n)),new Uint8Array(t)}function Xi(e){const t=[],n={queue:0,queuedBits:0},s=a=>{t.push(a)};return e.forEach(a=>yN(a,n,s)),yN(null,n,s),t.join("")}function PA(e){return Math.round(Date.now()/1e3)+e}function AA(){return Symbol("auth-callback")}const jn=()=>typeof window<"u"&&typeof document<"u",qi={tested:!1,writable:!1},L2=()=>{if(!jn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(qi.tested)return qi.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),qi.tested=!0,qi.writable=!0}catch{qi.tested=!0,qi.writable=!1}return qi.writable};function OA(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((a,i)=>{t[i]=a})}catch{}return n.searchParams.forEach((s,a)=>{t[a]=s}),t}const $2=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),MA=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",jl=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Bi=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},_n=async(e,t)=>{await e.removeItem(t)};class $m{constructor(){this.promise=new $m.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}$m.promiseConstructor=Promise;function Fx(e){const t=e.split(".");if(t.length!==3)throw new ty("Invalid JWT structure");for(let s=0;s<t.length;s++)if(!vA.test(t[s]))throw new ty("JWT not in base64url format");return{header:JSON.parse(bN(t[0])),payload:JSON.parse(bN(t[1])),signature:Ml(t[2]),raw:{header:t[0],payload:t[1]}}}async function LA(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function $A(e,t){return new Promise((s,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const l=await e(i);if(!t(i,null,l)){s(l);return}}catch(l){if(!t(i,l)){a(l);return}}})()})}function DA(e){return("0"+e.toString(16)).substr(-2)}function FA(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=n.length;let a="";for(let i=0;i<56;i++)a+=n.charAt(Math.floor(Math.random()*s));return a}return crypto.getRandomValues(t),Array.from(t,DA).join("")}async function UA(e){const n=new TextEncoder().encode(e),s=await crypto.subtle.digest("SHA-256",n),a=new Uint8Array(s);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function qA(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await UA(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function fl(e,t,n=!1){const s=FA();let a=s;n&&(a+="/PASSWORD_RECOVERY"),await jl(e,`${t}-code-verifier`,a);const i=await qA(s);return[i,s===i?"plain":"s256"]}const BA=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function HA(e){const t=e.headers.get(Z0);if(!t||!t.match(BA))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function zA(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function WA(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const GA=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ml(e){if(!GA.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Ux(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const s=n.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function VA(e,t){return new Proxy(e,{get:(n,s,a)=>{if(s==="__isInsecureUserWarningProxy")return!0;if(typeof s=="symbol"){const i=s.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,s,a)}return!t.value&&typeof s=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(n,s,a)}})}function vN(e){return JSON.parse(JSON.stringify(e))}const zi=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),KA=[502,503,504];async function wN(e){var t;if(!MA(e))throw new ey(zi(e),0);if(KA.includes(e.status))throw new ey(zi(e),e.status);let n;try{n=await e.json()}catch(i){throw new Vi(zi(i),i)}let s;const a=HA(e);if(a&&a.getTime()>=O2["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?s=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(s=n.error_code),s){if(s==="weak_password")throw new gN(zi(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(s==="session_not_found")throw new yr}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,l)=>i&&typeof l=="string",!0))throw new gN(zi(n),e.status,n.weak_password.reasons);throw new _A(zi(n),e.status||500,s)}const YA=(e,t,n,s)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(s),Object.assign(Object.assign({},a),n))};async function Oe(e,t,n,s){var a;const i=Object.assign({},s==null?void 0:s.headers);i[Z0]||(i[Z0]=O2["2024-01-01"].name),s!=null&&s.jwt&&(i.Authorization=`Bearer ${s.jwt}`);const l=(a=s==null?void 0:s.query)!==null&&a!==void 0?a:{};s!=null&&s.redirectTo&&(l.redirect_to=s.redirectTo);const u=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",d=await JA(e,t,n+u,{headers:i,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(d):{data:Object.assign({},d),error:null}}async function JA(e,t,n,s,a,i){const l=YA(t,s,a,i);let u;try{u=await e(n,Object.assign({},l))}catch(d){throw console.error(d),new ey(zi(d),0)}if(u.ok||await wN(u),s!=null&&s.noResolveJson)return u;try{return await u.json()}catch(d){await wN(d)}}function rs(e){var t;let n=null;ZA(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=PA(e.expires_in)));const s=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:s},error:null}}function _N(e){const t=rs(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,s)=>n&&typeof s=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Ka(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function QA(e){return{data:e,error:null}}function XA(e){const{action_link:t,email_otp:n,hashed_token:s,redirect_to:a,verification_type:i}=e,l=Mm(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:t,email_otp:n,hashed_token:s,redirect_to:a,verification_type:i},d=Object.assign({},l);return{data:{properties:u,user:d},error:null}}function jN(e){return e}function ZA(e){return e.access_token&&e.refresh_token&&e.expires_in}const qx=["global","local","others"];class eO{constructor({url:t="",headers:n={},fetch:s}){this.url=t,this.headers=n,this.fetch=$2(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=qx[0]){if(qx.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${qx.join(", ")}`);try{return await Oe(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(s){if(Ce(s))return{data:null,error:s};throw s}}async inviteUserByEmail(t,n={}){try{return await Oe(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Ka})}catch(s){if(Ce(s))return{data:{user:null},error:s};throw s}}async generateLink(t){try{const{options:n}=t,s=Mm(t,["options"]),a=Object.assign(Object.assign({},s),n);return"newEmail"in s&&(a.new_email=s==null?void 0:s.newEmail,delete a.newEmail),await Oe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:XA,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Ce(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await Oe(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Ka})}catch(n){if(Ce(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,s,a,i,l,u,d;try{const h={nextPage:null,lastPage:0,total:0},p=await Oe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&s!==void 0?s:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:jN});if(p.error)throw p.error;const m=await p.json(),g=(l=p.headers.get("x-total-count"))!==null&&l!==void 0?l:0,y=(d=(u=p.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&d!==void 0?d:[];return y.length>0&&(y.forEach(b=>{const w=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(b.split(";")[1].split("=")[1]);h[`${v}Page`]=w}),h.total=parseInt(g)),{data:Object.assign(Object.assign({},m),h),error:null}}catch(h){if(Ce(h))return{data:{users:[]},error:h};throw h}}async getUserById(t){ml(t);try{return await Oe(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Ka})}catch(n){if(Ce(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){ml(t);try{return await Oe(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Ka})}catch(s){if(Ce(s))return{data:{user:null},error:s};throw s}}async deleteUser(t,n=!1){ml(t);try{return await Oe(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Ka})}catch(s){if(Ce(s))return{data:{user:null},error:s};throw s}}async _listFactors(t){ml(t.userId);try{const{data:n,error:s}=await Oe(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:n,error:s}}catch(n){if(Ce(n))return{data:null,error:n};throw n}}async _deleteFactor(t){ml(t.userId),ml(t.id);try{return{data:await Oe(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(Ce(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,s,a,i,l,u,d;try{const h={nextPage:null,lastPage:0,total:0},p=await Oe(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&s!==void 0?s:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:jN});if(p.error)throw p.error;const m=await p.json(),g=(l=p.headers.get("x-total-count"))!==null&&l!==void 0?l:0,y=(d=(u=p.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&d!==void 0?d:[];return y.length>0&&(y.forEach(b=>{const w=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(b.split(";")[1].split("=")[1]);h[`${v}Page`]=w}),h.total=parseInt(g)),{data:Object.assign(Object.assign({},m),h),error:null}}catch(h){if(Ce(h))return{data:{clients:[]},error:h};throw h}}async _createOAuthClient(t){try{return await Oe(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ce(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await Oe(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ce(n))return{data:null,error:n};throw n}}async _updateOAuthClient(t,n){try{return await Oe(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:n,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(Ce(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(t){try{return await Oe(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Ce(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await Oe(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ce(n))return{data:null,error:n};throw n}}}function NN(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const pl={debug:!!(globalThis&&L2()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class D2 extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class tO extends D2{}async function nO(e,t,n){pl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const s=new globalThis.AbortController;return t>0&&setTimeout(()=>{s.abort(),pl.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async a=>{if(a){pl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await n()}finally{pl.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw pl.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new tO(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(pl.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function rO(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function F2(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function sO(e){return parseInt(e,16)}function aO(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,s=>s.toString(16).padStart(2,"0")).join("")}function iO(e){var t;const{chainId:n,domain:s,expirationTime:a,issuedAt:i=new Date,nonce:l,notBefore:u,requestId:d,resources:h,scheme:p,uri:m,version:g}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!m)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(g!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${g}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const y=F2(e.address),b=p?`${p}://${s}`:s,w=e.statement?`${e.statement}
`:"",v=`${b} wants you to sign in with your Ethereum account:
${y}

${w}`;let j=`URI: ${m}
Version: ${g}
Chain ID: ${n}${l?`
Nonce: ${l}`:""}
Issued At: ${i.toISOString()}`;if(a&&(j+=`
Expiration Time: ${a.toISOString()}`),u&&(j+=`
Not Before: ${u.toISOString()}`),d&&(j+=`
Request ID: ${d}`),h){let E=`
Resources:`;for(const k of h){if(!k||typeof k!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${k}`);E+=`
- ${k}`}j+=E}return`${v}
${j}`}class rn extends Error{constructor({message:t,code:n,cause:s,name:a}){var i;super(t,{cause:s}),this.__isWebAuthnError=!0,this.name=(i=a??(s instanceof Error?s.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=n}}class Kf extends rn{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function oO({error:e,options:t}){var n,s,a;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new rn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=i.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new rn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new rn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((a=i.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new rn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new rn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new rn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(u=>u.type==="public-key").length===0?new rn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new rn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const l=window.location.hostname;if(U2(l)){if(i.rp.id!==l)return new rn({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new rn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new rn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new rn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new rn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function lO({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new rn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new rn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const s=window.location.hostname;if(U2(s)){if(n.rpId!==s)return new rn({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new rn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new rn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new rn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class cO{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const uO=new cO;function dO(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:s}=e,a=Mm(e,["challenge","user","excludeCredentials"]),i=Ml(t).buffer,l=Object.assign(Object.assign({},n),{id:Ml(n.id).buffer}),u=Object.assign(Object.assign({},a),{challenge:i,user:l});if(s&&s.length>0){u.excludeCredentials=new Array(s.length);for(let d=0;d<s.length;d++){const h=s[d];u.excludeCredentials[d]=Object.assign(Object.assign({},h),{id:Ml(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return u}function hO(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,s=Mm(e,["challenge","allowCredentials"]),a=Ml(t).buffer,i=Object.assign(Object.assign({},s),{challenge:a});if(n&&n.length>0){i.allowCredentials=new Array(n.length);for(let l=0;l<n.length;l++){const u=n[l];i.allowCredentials[l]=Object.assign(Object.assign({},u),{id:Ml(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return i}function fO(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:Xi(new Uint8Array(e.response.attestationObject)),clientDataJSON:Xi(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function mO(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,s=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Xi(new Uint8Array(a.authenticatorData)),clientDataJSON:Xi(new Uint8Array(a.clientDataJSON)),signature:Xi(new Uint8Array(a.signature)),userHandle:a.userHandle?Xi(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function U2(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function SN(){var e,t;return!!(jn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function pO(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Kf("Browser returned unexpected credential type",t)}:{data:null,error:new Kf("Empty credential response",t)}}catch(t){return{data:null,error:oO({error:t,options:e})}}}async function gO(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Kf("Browser returned unexpected credential type",t)}:{data:null,error:new Kf("Empty credential response",t)}}catch(t){return{data:null,error:lO({error:t,options:e})}}}const xO={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},yO={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Yf(...e){const t=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),n=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),s={};for(const a of e)if(a)for(const i in a){const l=a[i];if(l!==void 0)if(Array.isArray(l))s[i]=l;else if(n(l))s[i]=l;else if(t(l)){const u=s[i];t(u)?s[i]=Yf(u,l):s[i]=Yf(l)}else s[i]=l}return s}function bO(e,t){return Yf(xO,e,t||{})}function vO(e,t){return Yf(yO,e,t||{})}class wO{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:s,signal:a},i){try{const{data:l,error:u}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!l)return{data:null,error:u};const d=a??uO.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:h}=l.webauthn.credential_options.publicKey;h.name||(h.name=`${h.id}:${s}`),h.displayName||(h.displayName=h.name)}switch(l.webauthn.type){case"create":{const h=bO(l.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:p,error:m}=await pO({publicKey:h,signal:d});return p?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:p}},error:null}:{data:null,error:m}}case"request":{const h=vO(l.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:p,error:m}=await gO(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:h,signal:d}));return p?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:p}},error:null}:{data:null,error:m}}}}catch(l){return Ce(l)?{data:null,error:l}:{data:null,error:new Vi("Unexpected error in challenge",l)}}}async _verify({challengeId:t,factorId:n,webauthn:s}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:s})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},i){if(!n)return{data:null,error:new Uu("rpId is required for WebAuthn authentication")};try{if(!SN())return{data:null,error:new Vi("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:s},signal:a},{request:i});if(!l)return{data:null,error:u};const{webauthn:d}=l;return this._verify({factorId:t,challengeId:l.challengeId,webauthn:{type:d.type,rpId:n,rpOrigins:s,credential_response:d.credential_response}})}catch(l){return Ce(l)?{data:null,error:l}:{data:null,error:new Vi("Unexpected error in authenticate",l)}}}async _register({friendlyName:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},i){if(!n)return{data:null,error:new Uu("rpId is required for WebAuthn registration")};try{if(!SN())return{data:null,error:new Vi("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this._enroll({friendlyName:t});if(!l)return await this.client.mfa.listFactors().then(p=>{var m;return(m=p.data)===null||m===void 0?void 0:m.all.find(g=>g.factor_type==="webauthn"&&g.friendly_name===t&&g.status!=="unverified")}).then(p=>p?this.client.mfa.unenroll({factorId:p==null?void 0:p.id}):void 0),{data:null,error:u};const{data:d,error:h}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:n,rpOrigins:s},signal:a},{create:i});return d?this._verify({factorId:l.id,challengeId:d.challengeId,webauthn:{rpId:n,rpOrigins:s,type:d.webauthn.type,credential_response:d.webauthn.credential_response}}):{data:null,error:h}}catch(l){return Ce(l)?{data:null,error:l}:{data:null,error:new Vi("Unexpected error in register",l)}}}}rO();const _O={url:xA,storageKey:yA,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:bA,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function kN(e,t,n){return await n()}const gl={};class qu{get jwks(){var t,n;return(n=(t=gl[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){gl[this.storageKey]=Object.assign(Object.assign({},gl[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=gl[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){gl[this.storageKey]=Object.assign(Object.assign({},gl[this.storageKey]),{cachedAt:t})}constructor(t){var n,s,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},_O),t);if(this.storageKey=i.storageKey,this.instanceID=(n=qu.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,qu.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&jn()){const l=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(l),this.logDebugMessages&&console.trace(l)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new eO({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=$2(i.fetch),this.lock=i.lock||kN,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:this.persistSession&&jn()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=nO:this.lock=kN,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new wO(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:L2()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=NN(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=NN(this.memoryStorage)),jn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l),await this._notifyAllSubscribers(l.data.event,l.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${A2}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let n={},s="none";if(jn()&&(n=OA(window.location.href),this._isImplicitGrantCallback(n)?s="implicit":await this._isPKCECallback(n)&&(s="pkce")),jn()&&this.detectSessionInUrl&&s!=="none"){const{data:a,error:i}=await this._getSessionFromURL(n,s);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),SA(i)){const d=(t=i.details)===null||t===void 0?void 0:t.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:l,redirectType:u}=a;return this._debug("#_initialize()","detected session in URL",l,"redirect type",u),await this._saveSession(l),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Ce(n)?this._returnResult({error:n}):this._returnResult({error:new Vi("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,s,a;try{const i=await Oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:rs}),{data:l,error:u}=i;if(u||!l)return this._returnResult({data:{user:null,session:null},error:u});const d=l.session,h=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),this._returnResult({data:{user:h,session:d},error:null})}catch(i){if(Ce(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(t){var n,s,a;try{let i;if("email"in t){const{email:p,password:m,options:g}=t;let y=null,b=null;this.flowType==="pkce"&&([y,b]=await fl(this.storage,this.storageKey)),i=await Oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:g==null?void 0:g.emailRedirectTo,body:{email:p,password:m,data:(n=g==null?void 0:g.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:y,code_challenge_method:b},xform:rs})}else if("phone"in t){const{phone:p,password:m,options:g}=t;i=await Oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:m,data:(s=g==null?void 0:g.data)!==null&&s!==void 0?s:{},channel:(a=g==null?void 0:g.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:rs})}else throw new Vh("You must provide either an email or phone number and a password");const{data:l,error:u}=i;if(u||!l)return await _n(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:u});const d=l.session,h=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),this._returnResult({data:{user:h,session:d},error:null})}catch(i){if(await _n(this.storage,`${this.storageKey}-code-verifier`),Ce(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(t){try{let n;if("email"in t){const{email:i,password:l,options:u}=t;n=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:_N})}else if("phone"in t){const{phone:i,password:l,options:u}=t;n=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:_N})}else throw new Vh("You must provide either an email or phone number and a password");const{data:s,error:a}=n;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!s||!s.session||!s.user){const i=new hl;return this._returnResult({data:{user:null,session:null},error:i})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:a})}catch(n){if(Ce(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(t){var n,s,a,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(s=t.options)===null||s===void 0?void 0:s.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,s,a,i,l,u,d,h,p,m,g;let y,b;if("message"in t)y=t.message,b=t.signature;else{const{chain:w,wallet:v,statement:j,options:E}=t;let k;if(jn())if(typeof v=="object")k=v;else{const H=window;if("ethereum"in H&&typeof H.ethereum=="object"&&"request"in H.ethereum&&typeof H.ethereum.request=="function")k=H.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(E!=null&&E.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=v}const S=new URL((n=E==null?void 0:E.url)!==null&&n!==void 0?n:window.location.href),P=await k.request({method:"eth_requestAccounts"}).then(H=>H).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!P||P.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const A=F2(P[0]);let T=(s=E==null?void 0:E.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!T){const H=await k.request({method:"eth_chainId"});T=sO(H)}const L={domain:S.host,address:A,statement:j,uri:S.href,version:"1",chainId:T,nonce:(a=E==null?void 0:E.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(l=(i=E==null?void 0:E.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(u=E==null?void 0:E.signInWithEthereum)===null||u===void 0?void 0:u.expirationTime,notBefore:(d=E==null?void 0:E.signInWithEthereum)===null||d===void 0?void 0:d.notBefore,requestId:(h=E==null?void 0:E.signInWithEthereum)===null||h===void 0?void 0:h.requestId,resources:(p=E==null?void 0:E.signInWithEthereum)===null||p===void 0?void 0:p.resources};y=iO(L),b=await k.request({method:"personal_sign",params:[aO(y),A]})}try{const{data:w,error:v}=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:y,signature:b},!((m=t.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(g=t.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:rs});if(v)throw v;if(!w||!w.session||!w.user){const j=new hl;return this._returnResult({data:{user:null,session:null},error:j})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:v})}catch(w){if(Ce(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async signInWithSolana(t){var n,s,a,i,l,u,d,h,p,m,g,y;let b,w;if("message"in t)b=t.message,w=t.signature;else{const{chain:v,wallet:j,statement:E,options:k}=t;let S;if(jn())if(typeof j=="object")S=j;else{const A=window;if("solana"in A&&typeof A.solana=="object"&&("signIn"in A.solana&&typeof A.solana.signIn=="function"||"signMessage"in A.solana&&typeof A.solana.signMessage=="function"))S=A.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof j!="object"||!(k!=null&&k.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=j}const P=new URL((n=k==null?void 0:k.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in S&&S.signIn){const A=await S.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},k==null?void 0:k.signInWithSolana),{version:"1",domain:P.host,uri:P.href}),E?{statement:E}:null));let T;if(Array.isArray(A)&&A[0]&&typeof A[0]=="object")T=A[0];else if(A&&typeof A=="object"&&"signedMessage"in A&&"signature"in A)T=A;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in T&&"signature"in T&&(typeof T.signedMessage=="string"||T.signedMessage instanceof Uint8Array)&&T.signature instanceof Uint8Array)b=typeof T.signedMessage=="string"?T.signedMessage:new TextDecoder().decode(T.signedMessage),w=T.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in S)||typeof S.signMessage!="function"||!("publicKey"in S)||typeof S!="object"||!S.publicKey||!("toBase58"in S.publicKey)||typeof S.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");b=[`${P.host} wants you to sign in with your Solana account:`,S.publicKey.toBase58(),...E?["",E,""]:[""],"Version: 1",`URI: ${P.href}`,`Issued At: ${(a=(s=k==null?void 0:k.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=k==null?void 0:k.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${k.signInWithSolana.notBefore}`]:[],...!((l=k==null?void 0:k.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${k.signInWithSolana.expirationTime}`]:[],...!((u=k==null?void 0:k.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${k.signInWithSolana.chainId}`]:[],...!((d=k==null?void 0:k.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${k.signInWithSolana.nonce}`]:[],...!((h=k==null?void 0:k.signInWithSolana)===null||h===void 0)&&h.requestId?[`Request ID: ${k.signInWithSolana.requestId}`]:[],...!((m=(p=k==null?void 0:k.signInWithSolana)===null||p===void 0?void 0:p.resources)===null||m===void 0)&&m.length?["Resources",...k.signInWithSolana.resources.map(T=>`- ${T}`)]:[]].join(`
`);const A=await S.signMessage(new TextEncoder().encode(b),"utf8");if(!A||!(A instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=A}}try{const{data:v,error:j}=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:b,signature:Xi(w)},!((g=t.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(y=t.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:rs});if(j)throw j;if(!v||!v.session||!v.user){const E=new hl;return this._returnResult({data:{user:null,session:null},error:E})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:j})}catch(v){if(Ce(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async _exchangeCodeForSession(t){const n=await Bi(this.storage,`${this.storageKey}-code-verifier`),[s,a]=(n??"").split("/");try{if(!s&&this.flowType==="pkce")throw new kA;const{data:i,error:l}=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:s},xform:rs});if(await _n(this.storage,`${this.storageKey}-code-verifier`),l)throw l;if(!i||!i.session||!i.user){const u=new hl;return this._returnResult({data:{user:null,session:null,redirectType:null},error:u})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:l})}catch(i){if(await _n(this.storage,`${this.storageKey}-code-verifier`),Ce(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(t){try{const{options:n,provider:s,token:a,access_token:i,nonce:l}=t,u=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:a,access_token:i,nonce:l,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:rs}),{data:d,error:h}=u;if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!d||!d.session||!d.user){const p=new hl;return this._returnResult({data:{user:null,session:null},error:p})}return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),this._returnResult({data:d,error:h})}catch(n){if(Ce(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(t){var n,s,a,i,l;try{if("email"in t){const{email:u,options:d}=t;let h=null,p=null;this.flowType==="pkce"&&([h,p]=await fl(this.storage,this.storageKey));const{error:m}=await Oe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(n=d==null?void 0:d.data)!==null&&n!==void 0?n:{},create_user:(s=d==null?void 0:d.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:h,code_challenge_method:p},redirectTo:d==null?void 0:d.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:m})}if("phone"in t){const{phone:u,options:d}=t,{data:h,error:p}=await Oe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(a=d==null?void 0:d.data)!==null&&a!==void 0?a:{},create_user:(i=d==null?void 0:d.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},channel:(l=d==null?void 0:d.channel)!==null&&l!==void 0?l:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:p})}throw new Vh("You must provide either an email or phone number.")}catch(u){if(await _n(this.storage,`${this.storageKey}-code-verifier`),Ce(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async verifyOtp(t){var n,s;try{let a,i;"options"in t&&(a=(n=t.options)===null||n===void 0?void 0:n.redirectTo,i=(s=t.options)===null||s===void 0?void 0:s.captchaToken);const{data:l,error:u}=await Oe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:rs});if(u)throw u;if(!l)throw new Error("An error occurred on token verification.");const d=l.session,h=l.user;return d!=null&&d.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),this._returnResult({data:{user:h,session:d},error:null})}catch(a){if(Ce(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(t){var n,s,a,i,l;try{let u=null,d=null;this.flowType==="pkce"&&([u,d]=await fl(this.storage,this.storageKey));const h=await Oe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(s=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&s!==void 0?s:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:u,code_challenge_method:d}),headers:this.headers,xform:QA});return!((i=h.data)===null||i===void 0)&&i.url&&jn()&&!(!((l=t.options)===null||l===void 0)&&l.skipBrowserRedirect)&&window.location.assign(h.data.url),this._returnResult(h)}catch(u){if(await _n(this.storage,`${this.storageKey}-code-verifier`),Ce(u))return this._returnResult({data:null,error:u});throw u}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:s}=t;if(s)throw s;if(!n)throw new yr;const{error:a}=await Oe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(t){if(Ce(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:s,type:a,options:i}=t,{error:l}=await Oe(this.fetch,"POST",n,{headers:this.headers,body:{email:s,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:l})}else if("phone"in t){const{phone:s,type:a,options:i}=t,{data:l,error:u}=await Oe(this.fetch,"POST",n,{headers:this.headers,body:{phone:s,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u})}throw new Vh("You must provide either an email or phone number and a type")}catch(n){if(Ce(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await s,await n()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=n();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Bi(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const s=t.expires_at?t.expires_at*1e3-Date.now()<$x:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",t.expires_at),!s){if(this.userStorage){const l=await Bi(this.userStorage,this.storageKey+"-user");l!=null&&l.user?t.user=l.user:t.user=Ux()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const l={value:this.suppressGetSessionWarning};t.user=VA(t.user,l),l.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const n=await this._acquireLock(-1,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(t){try{return t?await Oe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Ka}):await this._useSession(async n=>{var s,a,i;const{data:l,error:u}=n;if(u)throw u;return!(!((s=l.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new yr}:await Oe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=l.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:Ka})})}catch(n){if(Ce(n))return NA(n)&&(await this._removeSession(),await _n(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async s=>{const{data:a,error:i}=s;if(i)throw i;if(!a.session)throw new yr;const l=a.session;let u=null,d=null;this.flowType==="pkce"&&t.email!=null&&([u,d]=await fl(this.storage,this.storageKey));const{data:h,error:p}=await Oe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:u,code_challenge_method:d}),jwt:l.access_token,xform:Ka});if(p)throw p;return l.user=h.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),this._returnResult({data:{user:l.user},error:null})})}catch(s){if(await _n(this.storage,`${this.storageKey}-code-verifier`),Ce(s))return this._returnResult({data:{user:null},error:s});throw s}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new yr;const n=Date.now()/1e3;let s=n,a=!0,i=null;const{payload:l}=Fx(t.access_token);if(l.exp&&(s=l.exp,a=s<=n),a){const{data:u,error:d}=await this._callRefreshToken(t.refresh_token);if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!u)return{data:{user:null,session:null},error:null};i=u}else{const{data:u,error:d}=await this._getUser(t.access_token);if(d)throw d;i={access_token:t.access_token,refresh_token:t.refresh_token,user:u.user,token_type:"bearer",expires_in:s-n,expires_at:s},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(n){if(Ce(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var s;if(!t){const{data:l,error:u}=n;if(u)throw u;t=(s=l.session)!==null&&s!==void 0?s:void 0}if(!(t!=null&&t.refresh_token))throw new yr;const{data:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(Ce(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(t,n){try{if(!jn())throw new Kh("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Kh(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new pN("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Kh("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new pN("No code detected.");const{data:E,error:k}=await this._exchangeCodeForSession(t.code);if(k)throw k;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:E.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:a,access_token:i,refresh_token:l,expires_in:u,expires_at:d,token_type:h}=t;if(!i||!u||!l||!h)throw new Kh("No session defined in URL");const p=Math.round(Date.now()/1e3),m=parseInt(u);let g=p+m;d&&(g=parseInt(d));const y=g-p;y*1e3<=_l&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${m}s`);const b=g-m;p-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,g,p):p-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,g,p);const{data:w,error:v}=await this._getUser(i);if(v)throw v;const j={provider_token:s,provider_refresh_token:a,access_token:i,expires_in:m,expires_at:g,refresh_token:l,token_type:h,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:j,redirectType:t.type},error:null})}catch(s){if(Ce(s))return this._returnResult({data:{session:null,redirectType:null},error:s});throw s}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await Bi(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var s;const{data:a,error:i}=n;if(i)return this._returnResult({error:i});const l=(s=a.session)===null||s===void 0?void 0:s.access_token;if(l){const{error:u}=await this.admin.signOut(l,t);if(u&&!(jA(u)&&(u.status===404||u.status===401||u.status===403)))return this._returnResult({error:u})}return t!=="others"&&(await this._removeSession(),await _n(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const n=AA(),s={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:s}}}async _emitInitialSession(t){return await this._useSession(async n=>{var s,a;try{const{data:{session:i},error:l}=n;if(l)throw l;await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,n={}){let s=null,a=null;this.flowType==="pkce"&&([s,a]=await fl(this.storage,this.storageKey,!0));try{return await Oe(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:s,code_challenge_method:a,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(await _n(this.storage,`${this.storageKey}-code-verifier`),Ce(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var t;try{const{data:n,error:s}=await this.getUser();if(s)throw s;return this._returnResult({data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(n){if(Ce(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:s,error:a}=await this._useSession(async i=>{var l,u,d,h,p;const{data:m,error:g}=i;if(g)throw g;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(l=t.options)===null||l===void 0?void 0:l.redirectTo,scopes:(u=t.options)===null||u===void 0?void 0:u.scopes,queryParams:(d=t.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await Oe(this.fetch,"GET",y,{headers:this.headers,jwt:(p=(h=m.session)===null||h===void 0?void 0:h.access_token)!==null&&p!==void 0?p:void 0})});if(a)throw a;return jn()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),this._returnResult({data:{provider:t.provider,url:s==null?void 0:s.url},error:null})}catch(s){if(Ce(s))return this._returnResult({data:{provider:t.provider,url:null},error:s});throw s}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var s;try{const{error:a,data:{session:i}}=n;if(a)throw a;const{options:l,provider:u,token:d,access_token:h,nonce:p}=t,m=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=i==null?void 0:i.access_token)!==null&&s!==void 0?s:void 0,body:{provider:u,id_token:d,access_token:h,nonce:p,link_identity:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:rs}),{data:g,error:y}=m;return y?this._returnResult({data:{user:null,session:null},error:y}):!g||!g.session||!g.user?this._returnResult({data:{user:null,session:null},error:new hl}):(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("USER_UPDATED",g.session)),this._returnResult({data:g,error:y}))}catch(a){if(await _n(this.storage,`${this.storageKey}-code-verifier`),Ce(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var s,a;const{data:i,error:l}=n;if(l)throw l;return await Oe(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0})})}catch(n){if(Ce(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const s=Date.now();return await $A(async a=>(a>0&&await LA(200*Math.pow(2,a-1)),this._debug(n,"refreshing attempt",a),await Oe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:rs})),(a,i)=>{const l=200*Math.pow(2,a);return i&&Dx(i)&&Date.now()+l-s<_l})}catch(s){if(this._debug(n,"error",s),Ce(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const s=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",s),jn()&&!n.skipBrowserRedirect&&window.location.assign(s),{data:{provider:t,url:s},error:null}}async _recoverAndRefresh(){var t,n;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const a=await Bi(this.storage,this.storageKey);if(a&&this.userStorage){let l=await Bi(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:a.user},await jl(this.userStorage,this.storageKey+"-user",l)),a.user=(t=l==null?void 0:l.user)!==null&&t!==void 0?t:Ux()}else if(a&&!a.user&&!a.user){const l=await Bi(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(a.user=l.user,await _n(this.storage,this.storageKey+"-user"),await jl(this.storage,this.storageKey,a)):a.user=Ux()}if(this._debug(s,"session from storage",a),!this._isValidSession(a)){this._debug(s,"session is not valid"),a!==null&&await this._removeSession();return}const i=((n=a.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<$x;if(this._debug(s,`session has${i?"":" not"} expired with margin of ${$x}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:l}=await this._callRefreshToken(a.refresh_token);l&&(console.error(l),Dx(l)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:u}=await this._getUser(a.access_token);!u&&(l!=null&&l.user)?(a.user=l.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(s,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(s,"error",a),console.error(a);return}finally{this._debug(s,"end")}}async _callRefreshToken(t){var n,s;if(!t)throw new yr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new $m;const{data:i,error:l}=await this._refreshAccessToken(t);if(l)throw l;if(!i.session)throw new yr;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const u={data:i.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(i){if(this._debug(a,"error",i),Ce(i)){const l={data:null,error:i};return Dx(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(l),l}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,n,s=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",n,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:t,session:n});const i=[],l=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(t,n)}catch(d){i.push(d)}});if(await Promise.all(l),i.length>0){for(let u=0;u<i.length;u+=1)console.error(i[u]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await _n(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},t),s=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&n.user&&await jl(this.userStorage,this.storageKey+"-user",{user:n.user});const a=Object.assign({},n);delete a.user;const i=vN(a);await jl(this.storage,this.storageKey,i)}else{const a=vN(n);await jl(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await _n(this.storage,this.storageKey),await _n(this.storage,this.storageKey+"-code-verifier"),await _n(this.storage,this.storageKey+"-user"),this.userStorage&&await _n(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&jn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),_l);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:s}}=n;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((s.expires_at*1e3-t)/_l);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${_l}ms, refresh threshold is ${X0} ticks`),a<=X0&&await this._callRefreshToken(s.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof D2)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!jn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,s){const a=[`provider=${encodeURIComponent(n)}`];if(s!=null&&s.redirectTo&&a.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&a.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[i,l]=await fl(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(l)}`});a.push(u.toString())}if(s!=null&&s.queryParams){const i=new URLSearchParams(s.queryParams);a.push(i.toString())}return s!=null&&s.skipBrowserRedirect&&a.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var s;const{data:a,error:i}=n;return i?this._returnResult({data:null,error:i}):await Oe(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token})})}catch(n){if(Ce(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(t){try{return await this._useSession(async n=>{var s,a;const{data:i,error:l}=n;if(l)return this._returnResult({data:null,error:l});const u=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:d,error:h}=await Oe(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token});return h?this._returnResult({data:null,error:h}):(t.factorType==="totp"&&d.type==="totp"&&(!((a=d==null?void 0:d.totp)===null||a===void 0)&&a.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),this._returnResult({data:d,error:null}))})}catch(n){if(Ce(n))return this._returnResult({data:null,error:n});throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var s;const{data:a,error:i}=n;if(i)return this._returnResult({data:null,error:i});const l=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?fO(t.webauthn.credential_response):mO(t.webauthn.credential_response)})}:{code:t.code}),{data:u,error:d}=await Oe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:l,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});return d?this._returnResult({data:null,error:d}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),this._returnResult({data:u,error:d}))})}catch(n){if(Ce(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var s;const{data:a,error:i}=n;if(i)return this._returnResult({data:null,error:i});const l=await Oe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});if(l.error)return l;const{data:u}=l;if(u.type!=="webauthn")return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:dO(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:hO(u.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Ce(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(t){const{data:n,error:s}=await this._challenge({factorId:t.factorId});return s?this._returnResult({data:null,error:s}):await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:s}=await this.getUser();if(s)return{data:null,error:s};const a={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])a.all.push(i),i.status==="verified"&&a[i.factor_type].push(i);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var t,n;const{data:{session:s},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=Fx(s.access_token);let l=null;i.aal&&(l=i.aal);let u=l;((n=(t=s.user.factors)===null||t===void 0?void 0:t.filter(p=>p.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(u="aal2");const h=i.amr||[];return{data:{currentLevel:l,nextLevel:u,currentAuthenticationMethods:h},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async n=>{const{data:{session:s},error:a}=n;return a?this._returnResult({data:null,error:a}):s?await Oe(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:s.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new yr})})}catch(n){if(Ce(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(t,n){try{return await this._useSession(async s=>{const{data:{session:a},error:i}=s;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new yr});const l=await Oe(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:u=>({data:u,error:null})});return l.data&&l.data.redirect_url&&jn()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(s){if(Ce(s))return this._returnResult({data:null,error:s});throw s}}async _denyAuthorization(t,n){try{return await this._useSession(async s=>{const{data:{session:a},error:i}=s;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new yr});const l=await Oe(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:u=>({data:u,error:null})});return l.data&&l.data.redirect_url&&jn()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(s){if(Ce(s))return this._returnResult({data:null,error:s});throw s}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:n},error:s}=t;return s?this._returnResult({data:null,error:s}):n?await Oe(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new yr})})}catch(t){if(Ce(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async n=>{const{data:{session:s},error:a}=n;return a?this._returnResult({data:null,error:a}):s?(await Oe(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new yr})})}catch(n){if(Ce(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(t,n={keys:[]}){let s=n.keys.find(u=>u.kid===t);if(s)return s;const a=Date.now();if(s=this.jwks.keys.find(u=>u.kid===t),s&&this.jwks_cached_at+wA>a)return s;const{data:i,error:l}=await Oe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,s=i.keys.find(u=>u.kid===t),!s)?null:s}async getClaims(t,n={}){try{let s=t;if(!s){const{data:y,error:b}=await this.getSession();if(b||!y.session)return this._returnResult({data:null,error:b});s=y.session.access_token}const{header:a,payload:i,signature:l,raw:{header:u,payload:d}}=Fx(s);n!=null&&n.allowExpired||zA(i.exp);const h=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!h){const{error:y}=await this.getUser(s);if(y)throw y;return{data:{claims:i,header:a,signature:l},error:null}}const p=WA(a.alg),m=await crypto.subtle.importKey("jwk",h,p,!0,["verify"]);if(!await crypto.subtle.verify(p,m,l,IA(`${u}.${d}`)))throw new ty("Invalid JWT signature");return{data:{claims:i,header:a,signature:l},error:null}}catch(s){if(Ce(s))return this._returnResult({data:null,error:s});throw s}}}qu.nextInstanceID={};const jO=qu,NO="2.89.0";let ju="";typeof Deno<"u"?ju="deno":typeof document<"u"?ju="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ju="react-native":ju="node";const SO={"X-Client-Info":`supabase-js-${ju}/${NO}`},kO={headers:SO},EO={schema:"public"},CO={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},TO={};function Bu(e){"@babel/helpers - typeof";return Bu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bu(e)}function RO(e,t){if(Bu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Bu(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function IO(e){var t=RO(e,"string");return Bu(t)=="symbol"?t:t+""}function PO(e,t,n){return(t=IO(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function EN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Yt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?EN(Object(n),!0).forEach(function(s){PO(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EN(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}const AO=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),OO=()=>Headers,MO=(e,t,n)=>{const s=AO(n),a=OO();return async(i,l)=>{var u;const d=(u=await t())!==null&&u!==void 0?u:e;let h=new a(l==null?void 0:l.headers);return h.has("apikey")||h.set("apikey",e),h.has("Authorization")||h.set("Authorization",`Bearer ${d}`),s(i,Yt(Yt({},l),{},{headers:h}))}};function LO(e){return e.endsWith("/")?e:e+"/"}function $O(e,t){var n,s;const{db:a,auth:i,realtime:l,global:u}=e,{db:d,auth:h,realtime:p,global:m}=t,g={db:Yt(Yt({},d),a),auth:Yt(Yt({},h),i),realtime:Yt(Yt({},p),l),storage:{},global:Yt(Yt(Yt({},m),u),{},{headers:Yt(Yt({},(n=m==null?void 0:m.headers)!==null&&n!==void 0?n:{}),(s=u==null?void 0:u.headers)!==null&&s!==void 0?s:{})}),accessToken:async()=>""};return e.accessToken?g.accessToken=e.accessToken:delete g.accessToken,g}function DO(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(LO(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var FO=class extends jO{constructor(e){super(e)}},UO=class{constructor(e,t,n){var s,a;this.supabaseUrl=e,this.supabaseKey=t;const i=DO(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const l=`sb-${i.hostname.split(".")[0]}-auth-token`,u={db:EO,realtime:TO,auth:Yt(Yt({},CO),{},{storageKey:l}),global:kO},d=$O(n??{},u);if(this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(a=d.global.headers)!==null&&a!==void 0?a:{},d.accessToken)this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(p,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}});else{var h;this.auth=this._initSupabaseAuthClient((h=d.auth)!==null&&h!==void 0?h:{},this.headers,d.global.fetch)}this.fetch=MO(t,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Yt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.accessToken&&this.accessToken().then(p=>this.realtime.setAuth(p)).catch(p=>console.warn("Failed to set initial Realtime auth token:",p)),this.rest=new b6(new URL("rest/v1",i).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new gA(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new m6(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,n;if(e.accessToken)return await e.accessToken();const{data:s}=await e.auth.getSession();return(t=(n=s.session)===null||n===void 0?void 0:n.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:s,userStorage:a,storageKey:i,flowType:l,lock:u,debug:d,throwOnError:h},p,m){const g={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new FO({url:this.authUrl.href,headers:Yt(Yt({},g),p),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:s,userStorage:a,flowType:l,lock:u,debug:d,throwOnError:h,fetch:m,hasCustomAuthorizationHeader:Object.keys(this.headers).some(y=>y.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new L6(this.realtimeUrl.href,Yt(Yt({},e),{},{params:Yt(Yt({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const qO=(e,t,n)=>new UO(e,t,n);function BO(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}BO()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const HO=void 0,zO=void 0;throw new Error("Missing Supabase environment variables");const G=qO(HO,zO,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,storageKey:"rgfl-auth-token",storage:window.localStorage}}),pe=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Ae=globalThis,sa="10.32.1";function ya(){return dd(Ae),Ae}function dd(e){const t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||sa,t[sa]=t[sa]||{}}function yc(e,t,n=Ae){const s=n.__SENTRY__=n.__SENTRY__||{},a=s[sa]=s[sa]||{};return a[e]||(a[e]=t())}const mb=["debug","info","warn","error","log","assert","trace"],WO="Sentry Logger ",Jf={};function wi(e){if(!("console"in Ae))return e();const t=Ae.console,n={},s=Object.keys(Jf);s.forEach(a=>{const i=Jf[a];n[a]=t[a],t[a]=i});try{return e()}finally{s.forEach(a=>{t[a]=n[a]})}}function GO(){gb().enabled=!0}function VO(){gb().enabled=!1}function q2(){return gb().enabled}function KO(...e){pb("log",...e)}function YO(...e){pb("warn",...e)}function JO(...e){pb("error",...e)}function pb(e,...t){pe&&q2()&&wi(()=>{Ae.console[e](`${WO}[${e}]:`,...t)})}function gb(){return pe?yc("loggerSettings",()=>({enabled:!1})):{enabled:!1}}const W={enable:GO,disable:VO,isEnabled:q2,log:KO,warn:YO,error:JO},B2=50,Ps="?",CN=/\(error: (.*)\)/,TN=/captureMessage|captureException/;function H2(...e){const t=e.sort((n,s)=>n[0]-s[0]).map(n=>n[1]);return(n,s=0,a=0)=>{const i=[],l=n.split(`
`);for(let u=s;u<l.length;u++){let d=l[u];d.length>1024&&(d=d.slice(0,1024));const h=CN.test(d)?d.replace(CN,"$1"):d;if(!h.match(/\S*Error: /)){for(const p of t){const m=p(h);if(m){i.push(m);break}}if(i.length>=B2+a)break}}return XO(i.slice(a))}}function QO(e){return Array.isArray(e)?H2(...e):e}function XO(e){if(!e.length)return[];const t=Array.from(e);return/sentryWrapped/.test(Yh(t).function||"")&&t.pop(),t.reverse(),TN.test(Yh(t).function||"")&&(t.pop(),TN.test(Yh(t).function||"")&&t.pop()),t.slice(0,B2).map(n=>({...n,filename:n.filename||Yh(t).filename,function:n.function||Ps}))}function Yh(e){return e[e.length-1]||{}}const Bx="<anonymous>";function da(e){try{return!e||typeof e!="function"?Bx:e.name||Bx}catch{return Bx}}function ny(e){const t=e.exception;if(t){const n=[];try{return t.values.forEach(s=>{s.stacktrace.frames&&n.push(...s.stacktrace.frames)}),n}catch{return}}}function z2(e){return"__v_isVNode"in e&&e.__v_isVNode?"[VueVNode]":"[VueViewModel]"}const vf={},RN={};function _i(e,t){vf[e]=vf[e]||[],vf[e].push(t)}function ji(e,t){if(!RN[e]){RN[e]=!0;try{t()}catch(n){pe&&W.error(`Error while instrumenting ${e}`,n)}}}function Br(e,t){const n=e&&vf[e];if(n)for(const s of n)try{s(t)}catch(a){pe&&W.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${da(s)}
Error:`,a)}}let Hx=null;function W2(e){const t="error";_i(t,e),ji(t,ZO)}function ZO(){Hx=Ae.onerror,Ae.onerror=function(e,t,n,s,a){return Br("error",{column:s,error:a,line:n,msg:e,url:t}),Hx?Hx.apply(this,arguments):!1},Ae.onerror.__SENTRY_INSTRUMENTED__=!0}let zx=null;function G2(e){const t="unhandledrejection";_i(t,e),ji(t,eM)}function eM(){zx=Ae.onunhandledrejection,Ae.onunhandledrejection=function(e){return Br("unhandledrejection",e),zx?zx.apply(this,arguments):!0},Ae.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const V2=Object.prototype.toString;function aa(e){switch(V2.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return ha(e,Error)}}function bc(e,t){return V2.call(e)===`[object ${t}]`}function K2(e){return bc(e,"ErrorEvent")}function IN(e){return bc(e,"DOMError")}function tM(e){return bc(e,"DOMException")}function ds(e){return bc(e,"String")}function Dm(e){return typeof e=="object"&&e!==null&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function hi(e){return e===null||Dm(e)||typeof e!="object"&&typeof e!="function"}function Is(e){return bc(e,"Object")}function Fm(e){return typeof Event<"u"&&ha(e,Event)}function nM(e){return typeof Element<"u"&&ha(e,Element)}function rM(e){return bc(e,"RegExp")}function Ao(e){return!!(e!=null&&e.then&&typeof e.then=="function")}function sM(e){return Is(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function ha(e,t){try{return e instanceof t}catch{return!1}}function Y2(e){return!!(typeof e=="object"&&e!==null&&(e.__isVue||e._isVue||e.__v_isVNode))}function xb(e){return typeof Request<"u"&&ha(e,Request)}const yb=Ae,aM=80;function cr(e,t={}){if(!e)return"<unknown>";try{let n=e;const s=5,a=[];let i=0,l=0;const u=" > ",d=u.length;let h;const p=Array.isArray(t)?t:t.keyAttrs,m=!Array.isArray(t)&&t.maxStringLength||aM;for(;n&&i++<s&&(h=iM(n,p),!(h==="html"||i>1&&l+a.length*d+h.length>=m));)a.push(h),l+=h.length,n=n.parentNode;return a.reverse().join(u)}catch{return"<unknown>"}}function iM(e,t){const n=e,s=[];if(!(n!=null&&n.tagName))return"";if(yb.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}s.push(n.tagName.toLowerCase());const a=t!=null&&t.length?t.filter(l=>n.getAttribute(l)).map(l=>[l,n.getAttribute(l)]):null;if(a!=null&&a.length)a.forEach(l=>{s.push(`[${l[0]}="${l[1]}"]`)});else{n.id&&s.push(`#${n.id}`);const l=n.className;if(l&&ds(l)){const u=l.split(/\s+/);for(const d of u)s.push(`.${d}`)}}const i=["aria-label","type","name","title","alt"];for(const l of i){const u=n.getAttribute(l);u&&s.push(`[${l}="${u}"]`)}return s.join("")}function Oo(){try{return yb.document.location.href}catch{return""}}function J2(e){if(!yb.HTMLElement)return null;let t=e;const n=5;for(let s=0;s<n;s++){if(!t)return null;if(t instanceof HTMLElement){if(t.dataset.sentryComponent)return t.dataset.sentryComponent;if(t.dataset.sentryElement)return t.dataset.sentryElement}t=t.parentNode}return null}function Nn(e,t,n){if(!(t in e))return;const s=e[t];if(typeof s!="function")return;const a=n(s);typeof a=="function"&&Q2(a,s);try{e[t]=a}catch{pe&&W.log(`Failed to replace method "${t}" in object`,e)}}function hn(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch{pe&&W.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function Q2(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,hn(e,"__sentry_original__",t)}catch{}}function bb(e){return e.__sentry_original__}function X2(e){if(aa(e))return{message:e.message,name:e.name,stack:e.stack,...AN(e)};if(Fm(e)){const t={type:e.type,target:PN(e.target),currentTarget:PN(e.currentTarget),...AN(e)};return typeof CustomEvent<"u"&&ha(e,CustomEvent)&&(t.detail=e.detail),t}else return e}function PN(e){try{return nM(e)?cr(e):Object.prototype.toString.call(e)}catch{return"<unknown>"}}function AN(e){if(typeof e=="object"&&e!==null){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}else return{}}function oM(e){const t=Object.keys(X2(e));return t.sort(),t[0]?t.join(", "):"[object has no keys]"}function Hu(e,t=0){return typeof e!="string"||t===0||e.length<=t?e:`${e.slice(0,t)}...`}function Wx(e,t){let n=e;const s=n.length;if(s<=150)return n;t>s&&(t=s);let a=Math.max(t-60,0);a<5&&(a=0);let i=Math.min(a+140,s);return i>s-5&&(i=s),i===s&&(a=Math.max(i-140,0)),n=n.slice(a,i),a>0&&(n=`'{snip} ${n}`),i<s&&(n+=" {snip}"),n}function Qf(e,t){if(!Array.isArray(e))return"";const n=[];for(let s=0;s<e.length;s++){const a=e[s];try{Y2(a)?n.push(z2(a)):n.push(String(a))}catch{n.push("[value cannot be serialized]")}}return n.join(t)}function wf(e,t,n=!1){return ds(e)?rM(t)?t.test(e):ds(t)?n?e===t:e.includes(t):!1:!1}function hs(e,t=[],n=!1){return t.some(s=>wf(e,s,n))}function lM(){const e=Ae;return e.crypto||e.msCrypto}let Gx;function cM(){return Math.random()*16}function dn(e=lM()){try{if(e!=null&&e.randomUUID)return e.randomUUID().replace(/-/g,"")}catch{}return Gx||(Gx="10000000100040008000"+1e11),Gx.replace(/[018]/g,t=>(t^(cM()&15)>>t/4).toString(16))}function Z2(e){var t,n;return(n=(t=e.exception)==null?void 0:t.values)==null?void 0:n[0]}function Ki(e){const{message:t,event_id:n}=e;if(t)return t;const s=Z2(e);return s?s.type&&s.value?`${s.type}: ${s.value}`:s.type||s.value||n||"<unknown>":n||"<unknown>"}function ry(e,t,n){const s=e.exception=e.exception||{},a=s.values=s.values||[],i=a[0]=a[0]||{};i.value||(i.value=t||""),i.type||(i.type="Error")}function fa(e,t){const n=Z2(e);if(!n)return;const s={type:"generic",handled:!0},a=n.mechanism;if(n.mechanism={...s,...a,...t},t&&"data"in t){const i={...a==null?void 0:a.data,...t.data};n.mechanism.data=i}}function uM(e,t,n=5){if(t.lineno===void 0)return;const s=e.length,a=Math.max(Math.min(s-1,t.lineno-1),0);t.pre_context=e.slice(Math.max(0,a-n),a).map(l=>Wx(l,0));const i=Math.min(s-1,a);t.context_line=Wx(e[i],t.colno||0),t.post_context=e.slice(Math.min(a+1,s),a+1+n).map(l=>Wx(l,0))}function ON(e){if(dM(e))return!0;try{hn(e,"__sentry_captured__",!0)}catch{}return!1}function dM(e){try{return e.__sentry_captured__}catch{}}const eE=1e3;function Mo(){return Date.now()/eE}function hM(){const{performance:e}=Ae;if(!(e!=null&&e.now)||!e.timeOrigin)return Mo;const t=e.timeOrigin;return()=>(t+e.now())/eE}let MN;function Tt(){return(MN??(MN=hM()))()}let Vx;function fM(){var p;const{performance:e}=Ae;if(!(e!=null&&e.now))return[void 0,"none"];const t=3600*1e3,n=e.now(),s=Date.now(),a=e.timeOrigin?Math.abs(e.timeOrigin+n-s):t,i=a<t,l=(p=e.timing)==null?void 0:p.navigationStart,d=typeof l=="number"?Math.abs(l+n-s):t,h=d<t;return i||h?a<=d?[e.timeOrigin,"timeOrigin"]:[l,"navigationStart"]:[s,"dateNow"]}function Fn(){return Vx||(Vx=fM()),Vx[0]}function mM(e){const t=Tt(),n={sid:dn(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>gM(n)};return e&&Zl(n,e),n}function Zl(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),!e.did&&!t.did&&(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||Tt(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=t.sid.length===32?t.sid:dn()),t.init!==void 0&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),typeof t.started=="number"&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if(typeof t.duration=="number")e.duration=t.duration;else{const n=e.timestamp-e.started;e.duration=n>=0?n:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),typeof t.errors=="number"&&(e.errors=t.errors),t.status&&(e.status=t.status)}function pM(e,t){let n={};e.status==="ok"&&(n={status:"exited"}),Zl(e,n)}function gM(e){return{sid:`${e.sid}`,init:e.init,started:new Date(e.started*1e3).toISOString(),timestamp:new Date(e.timestamp*1e3).toISOString(),status:e.status,errors:e.errors,did:typeof e.did=="number"||typeof e.did=="string"?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}}}function hd(e,t,n=2){if(!t||typeof t!="object"||n<=0)return t;if(e&&Object.keys(t).length===0)return e;const s={...e};for(const a in t)Object.prototype.hasOwnProperty.call(t,a)&&(s[a]=hd(s[a],t[a],n-1));return s}function As(){return dn()}function ia(){return dn().substring(16)}const sy="_sentrySpan";function Os(e,t){t?hn(e,sy,t):delete e[sy]}function ec(e){return e[sy]}const xM=100;class ms{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._attributes={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:As(),sampleRand:Math.random()}}clone(){const t=new ms;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._attributes={...this._attributes},t._extra={...this._extra},t._contexts={...this._contexts},this._contexts.flags&&(t._contexts.flags={values:[...this._contexts.flags.values]}),t._user=this._user,t._level=this._level,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t._lastEventId=this._lastEventId,Os(t,ec(this)),t}setClient(t){this._client=t}setLastEventId(t){this._lastEventId=t}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&Zl(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,n){return this.setTags({[t]:n})}setAttributes(t){return this._attributes={...this._attributes,...t},this._notifyScopeListeners(),this}setAttribute(t,n){return this.setAttributes({[t]:n})}removeAttribute(t){return t in this._attributes&&(delete this._attributes[t],this._notifyScopeListeners()),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,n){return this._extra={...this._extra,[t]:n},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,n){return n===null?delete this._contexts[t]:this._contexts[t]=n,this._notifyScopeListeners(),this}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;const n=typeof t=="function"?t(this):t,s=n instanceof ms?n.getScopeData():Is(n)?t:void 0,{tags:a,attributes:i,extra:l,user:u,contexts:d,level:h,fingerprint:p=[],propagationContext:m}=s||{};return this._tags={...this._tags,...a},this._attributes={...this._attributes,...i},this._extra={...this._extra,...l},this._contexts={...this._contexts,...d},u&&Object.keys(u).length&&(this._user=u),h&&(this._level=h),p.length&&(this._fingerprint=p),m&&(this._propagationContext=m),this}clear(){return this._breadcrumbs=[],this._tags={},this._attributes={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,Os(this,void 0),this._attachments=[],this.setPropagationContext({traceId:As(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(t,n){var i;const s=typeof n=="number"?n:xM;if(s<=0)return this;const a={timestamp:Mo(),...t,message:t.message?Hu(t.message,2048):t.message};return this._breadcrumbs.push(a),this._breadcrumbs.length>s&&(this._breadcrumbs=this._breadcrumbs.slice(-s),(i=this._client)==null||i.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,attributes:this._attributes,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:ec(this)}}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata=hd(this._sdkProcessingMetadata,t,2),this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(t,n){const s=(n==null?void 0:n.event_id)||dn();if(!this._client)return pe&&W.warn("No client configured on scope - will not capture exception!"),s;const a=new Error("Sentry syntheticException");return this._client.captureException(t,{originalException:t,syntheticException:a,...n,event_id:s},this),s}captureMessage(t,n,s){const a=(s==null?void 0:s.event_id)||dn();if(!this._client)return pe&&W.warn("No client configured on scope - will not capture message!"),a;const i=(s==null?void 0:s.syntheticException)??new Error(t);return this._client.captureMessage(t,n,{originalException:t,syntheticException:i,...s,event_id:a},this),a}captureEvent(t,n){const s=(n==null?void 0:n.event_id)||dn();return this._client?(this._client.captureEvent(t,{...n,event_id:s},this),s):(pe&&W.warn("No client configured on scope - will not capture event!"),s)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}}function yM(){return yc("defaultCurrentScope",()=>new ms)}function bM(){return yc("defaultIsolationScope",()=>new ms)}class vM{constructor(t,n){let s;t?s=t:s=new ms;let a;n?a=n:a=new ms,this._stack=[{scope:s}],this._isolationScope=a}withScope(t){const n=this._pushScope();let s;try{s=t(n)}catch(a){throw this._popScope(),a}return Ao(s)?s.then(a=>(this._popScope(),a),a=>{throw this._popScope(),a}):(this._popScope(),s)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const t=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:t}),t}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}}function tc(){const e=ya(),t=dd(e);return t.stack=t.stack||new vM(yM(),bM())}function wM(e){return tc().withScope(e)}function _M(e,t){const n=tc();return n.withScope(()=>(n.getStackTop().scope=e,t(e)))}function LN(e){return tc().withScope(()=>e(tc().getIsolationScope()))}function jM(){return{withIsolationScope:LN,withScope:wM,withSetScope:_M,withSetIsolationScope:(e,t)=>LN(t),getCurrentScope:()=>tc().getScope(),getIsolationScope:()=>tc().getIsolationScope()}}function Ni(e){const t=dd(e);return t.acs?t.acs:jM()}function We(){const e=ya();return Ni(e).getCurrentScope()}function an(){const e=ya();return Ni(e).getIsolationScope()}function oa(){return yc("globalScope",()=>new ms)}function hr(...e){const t=ya(),n=Ni(t);if(e.length===2){const[s,a]=e;return s?n.withSetScope(s,a):n.withScope(a)}return n.withScope(e[0])}function NM(...e){const t=ya(),n=Ni(t);if(e.length===2){const[s,a]=e;return s?n.withSetIsolationScope(s,a):n.withIsolationScope(a)}return n.withIsolationScope(e[0])}function ye(){return We().getClient()}function tE(e){const t=e.getPropagationContext(),{traceId:n,parentSpanId:s,propagationSpanId:a}=t,i={trace_id:n,span_id:a||ia()};return s&&(i.parent_span_id=s),i}const ft="sentry.source",Um="sentry.sample_rate",nE="sentry.previous_trace_sample_rate",_t="sentry.op",Ge="sentry.origin",zu="sentry.idle_span_finish_reason",fd="sentry.measurement_unit",md="sentry.measurement_value",ay="sentry.custom_span_name",vb="sentry.profile_id",vc="sentry.exclusive_time",SM="http.request.method",kM="url.full",EM="sentry.link.type",CM=0,qm=1,nt=2;function rE(e){if(e<400&&e>=100)return{code:qm};if(e>=400&&e<500)switch(e){case 401:return{code:nt,message:"unauthenticated"};case 403:return{code:nt,message:"permission_denied"};case 404:return{code:nt,message:"not_found"};case 409:return{code:nt,message:"already_exists"};case 413:return{code:nt,message:"failed_precondition"};case 429:return{code:nt,message:"resource_exhausted"};case 499:return{code:nt,message:"cancelled"};default:return{code:nt,message:"invalid_argument"}}if(e>=500&&e<600)switch(e){case 501:return{code:nt,message:"unimplemented"};case 503:return{code:nt,message:"unavailable"};case 504:return{code:nt,message:"deadline_exceeded"};default:return{code:nt,message:"internal_error"}}return{code:nt,message:"internal_error"}}function Wu(e,t){e.setAttribute("http.response.status_code",t);const n=rE(t);n.message!=="unknown_error"&&e.setStatus(n)}const sE="_sentryScope",aE="_sentryIsolationScope";function TM(e){try{const t=Ae.WeakRef;if(typeof t=="function")return new t(e)}catch{}return e}function RM(e){if(e){if(typeof e=="object"&&"deref"in e&&typeof e.deref=="function")try{return e.deref()}catch{return}return e}}function IM(e,t,n){e&&(hn(e,aE,TM(n)),hn(e,sE,t))}function Xf(e){const t=e;return{scope:t[sE],isolationScope:RM(t[aE])}}const wb="sentry-",PM=/^sentry-/,AM=8192;function _b(e){const t=OM(e);if(!t)return;const n=Object.entries(t).reduce((s,[a,i])=>{if(a.match(PM)){const l=a.slice(wb.length);s[l]=i}return s},{});if(Object.keys(n).length>0)return n}function iE(e){if(!e)return;const t=Object.entries(e).reduce((n,[s,a])=>(a&&(n[`${wb}${s}`]=a),n),{});return MM(t)}function OM(e){if(!(!e||!ds(e)&&!Array.isArray(e)))return Array.isArray(e)?e.reduce((t,n)=>{const s=$N(n);return Object.entries(s).forEach(([a,i])=>{t[a]=i}),t},{}):$N(e)}function $N(e){return e.split(",").map(t=>{const n=t.indexOf("=");if(n===-1)return[];const s=t.slice(0,n),a=t.slice(n+1);return[s,a].map(i=>{try{return decodeURIComponent(i.trim())}catch{return}})}).reduce((t,[n,s])=>(n&&s&&(t[n]=s),t),{})}function MM(e){if(Object.keys(e).length!==0)return Object.entries(e).reduce((t,[n,s],a)=>{const i=`${encodeURIComponent(n)}=${encodeURIComponent(s)}`,l=a===0?i:`${t},${i}`;return l.length>AM?(pe&&W.warn(`Not adding key: ${n} with val: ${s} to baggage header due to exceeding baggage size limits.`),t):l},"")}const LM=/^o(\d+)\./,$M=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function DM(e){return e==="http"||e==="https"}function ba(e,t=!1){const{host:n,path:s,pass:a,port:i,projectId:l,protocol:u,publicKey:d}=e;return`${u}://${d}${t&&a?`:${a}`:""}@${n}${i?`:${i}`:""}/${s&&`${s}/`}${l}`}function oE(e){const t=$M.exec(e);if(!t){wi(()=>{console.error(`Invalid Sentry Dsn: ${e}`)});return}const[n,s,a="",i="",l="",u=""]=t.slice(1);let d="",h=u;const p=h.split("/");if(p.length>1&&(d=p.slice(0,-1).join("/"),h=p.pop()),h){const m=h.match(/^\d+/);m&&(h=m[0])}return lE({host:i,pass:a,path:d,projectId:h,port:l,protocol:n,publicKey:s})}function lE(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function FM(e){if(!pe)return!0;const{port:t,projectId:n,protocol:s}=e;return["protocol","publicKey","host","projectId"].find(l=>e[l]?!1:(W.error(`Invalid Sentry Dsn: ${l} missing`),!0))?!1:n.match(/^\d+$/)?DM(s)?t&&isNaN(parseInt(t,10))?(W.error(`Invalid Sentry Dsn: Invalid port ${t}`),!1):!0:(W.error(`Invalid Sentry Dsn: Invalid protocol ${s}`),!1):(W.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),!1)}function UM(e){const t=e.match(LM);return t==null?void 0:t[1]}function cE(e){const t=e.getOptions(),{host:n}=e.getDsn()||{};let s;return t.orgId?s=String(t.orgId):n&&(s=UM(n)),s}function uE(e){const t=typeof e=="string"?oE(e):lE(e);if(!(!t||!FM(t)))return t}function bo(e){if(typeof e=="boolean")return Number(e);const t=typeof e=="string"?parseFloat(e):e;if(!(typeof t!="number"||isNaN(t)||t<0||t>1))return t}const dE=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function qM(e){if(!e)return;const t=e.match(dE);if(!t)return;let n;return t[3]==="1"?n=!0:t[3]==="0"&&(n=!1),{traceId:t[1],parentSampled:n,parentSpanId:t[2]}}function hE(e,t){const n=qM(e),s=_b(t);if(!(n!=null&&n.traceId))return{traceId:As(),sampleRand:Math.random()};const a=BM(n,s);s&&(s.sample_rand=a.toString());const{traceId:i,parentSpanId:l,parentSampled:u}=n;return{traceId:i,parentSpanId:l,sampled:u,dsc:s||{},sampleRand:a}}function fE(e=As(),t=ia(),n){let s="";return n!==void 0&&(s=n?"-1":"-0"),`${e}-${t}${s}`}function mE(e=As(),t=ia(),n){return`00-${e}-${t}-${n?"01":"00"}`}function BM(e,t){const n=bo(t==null?void 0:t.sample_rand);if(n!==void 0)return n;const s=bo(t==null?void 0:t.sample_rate);return s&&(e==null?void 0:e.parentSampled)!==void 0?e.parentSampled?Math.random()*s:s+Math.random()*(1-s):Math.random()}function HM(e,t){const n=cE(e);return t&&n&&t!==n?(W.log(`Won't continue trace because org IDs don't match (incoming baggage: ${t}, SDK options: ${n})`),!1):(e.getOptions().strictTraceContinuation||!1)&&(t&&!n||!t&&n)?(W.log(`Starting a new trace because strict trace continuation is enabled but one org ID is missing (incoming baggage: ${t}, Sentry client: ${n})`),!1):!0}const pE=0,jb=1;let DN=!1;function zM(e){const{spanId:t,traceId:n}=e.spanContext(),{data:s,op:a,parent_span_id:i,status:l,origin:u,links:d}=Te(e);return{parent_span_id:i,span_id:t,trace_id:n,data:s,op:a,status:l,origin:u,links:d}}function gE(e){const{spanId:t,traceId:n,isRemote:s}=e.spanContext(),a=s?t:Te(e).parent_span_id,i=Xf(e).scope,l=s?(i==null?void 0:i.getPropagationContext().propagationSpanId)||ia():t;return{parent_span_id:a,span_id:l,trace_id:n}}function xE(e){const{traceId:t,spanId:n}=e.spanContext(),s=Si(e);return fE(t,n,s)}function WM(e){const{traceId:t,spanId:n}=e.spanContext(),s=Si(e);return mE(t,n,s)}function yE(e){if(e&&e.length>0)return e.map(({context:{spanId:t,traceId:n,traceFlags:s,...a},attributes:i})=>({span_id:t,trace_id:n,sampled:s===jb,attributes:i,...a}))}function fo(e){return typeof e=="number"?FN(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?FN(e.getTime()):Tt()}function FN(e){return e>9999999999?e/1e3:e}function Te(e){var s;if(VM(e))return e.getSpanJSON();const{spanId:t,traceId:n}=e.spanContext();if(GM(e)){const{attributes:a,startTime:i,name:l,endTime:u,status:d,links:h}=e,p="parentSpanId"in e?e.parentSpanId:"parentSpanContext"in e?(s=e.parentSpanContext)==null?void 0:s.spanId:void 0;return{span_id:t,trace_id:n,data:a,description:l,parent_span_id:p,start_timestamp:fo(i),timestamp:fo(u)||void 0,status:bE(d),op:a[_t],origin:a[Ge],links:yE(h)}}return{span_id:t,trace_id:n,start_timestamp:0,data:{}}}function GM(e){const t=e;return!!t.attributes&&!!t.startTime&&!!t.name&&!!t.endTime&&!!t.status}function VM(e){return typeof e.getSpanJSON=="function"}function Si(e){const{traceFlags:t}=e.spanContext();return t===jb}function bE(e){if(!(!e||e.code===CM))return e.code===qm?"ok":e.message||"internal_error"}const mo="_sentryChildSpans",iy="_sentryRootSpan";function vE(e,t){const n=e[iy]||e;hn(t,iy,n),e[mo]?e[mo].add(t):hn(e,mo,new Set([t]))}function KM(e,t){e[mo]&&e[mo].delete(t)}function Tu(e){const t=new Set;function n(s){if(!t.has(s)&&Si(s)){t.add(s);const a=s[mo]?Array.from(s[mo]):[];for(const i of a)n(i)}}return n(e),Array.from(t)}function Bt(e){return e[iy]||e}function Ht(){const e=ya(),t=Ni(e);return t.getActiveSpan?t.getActiveSpan():ec(We())}function oy(){DN||(wi(()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly or use `ignoreSpans`.")}),DN=!0)}function YM(e,t){e.updateName(t),e.setAttributes({[ft]:"custom",[ay]:t})}let UN=!1;function wE(){if(UN)return;function e(){const t=Ht(),n=t&&Bt(t);if(n){const s="internal_error";pe&&W.log(`[Tracing] Root span: ${s} -> Global error occurred`),n.setStatus({code:nt,message:s})}}e.tag="sentry_tracingErrorCallback",UN=!0,W2(e),G2(e)}function Hr(e){var n;if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const t=e||((n=ye())==null?void 0:n.getOptions());return!!t&&(t.tracesSampleRate!=null||!!t.tracesSampler)}function qN(e){W.log(`Ignoring span ${e.op} - ${e.description} because it matches \`ignoreSpans\`.`)}function Zf(e,t){if(!(t!=null&&t.length)||!e.description)return!1;for(const n of t){if(QM(n)){if(wf(e.description,n))return pe&&qN(e),!0;continue}if(!n.name&&!n.op)continue;const s=n.name?wf(e.description,n.name):!0,a=n.op?e.op&&wf(e.op,n.op):!0;if(s&&a)return pe&&qN(e),!0}return!1}function JM(e,t){const n=t.parent_span_id,s=t.span_id;if(n)for(const a of e)a.parent_span_id===s&&(a.parent_span_id=n)}function QM(e){return typeof e=="string"||e instanceof RegExp}const Bm="production",_E="_frozenDsc";function _f(e,t){hn(e,_E,t)}function jE(e,t){const n=t.getOptions(),{publicKey:s}=t.getDsn()||{},a={environment:n.environment||Bm,release:n.release,public_key:s,trace_id:e,org_id:cE(t)};return t.emit("createDsc",a),a}function Nb(e,t){const n=t.getPropagationContext();return n.dsc||jE(n.traceId,e)}function ps(e){var b;const t=ye();if(!t)return{};const n=Bt(e),s=Te(n),a=s.data,i=n.spanContext().traceState,l=(i==null?void 0:i.get("sentry.sample_rate"))??a[Um]??a[nE];function u(w){return(typeof l=="number"||typeof l=="string")&&(w.sample_rate=`${l}`),w}const d=n[_E];if(d)return u(d);const h=i==null?void 0:i.get("sentry.dsc"),p=h&&_b(h);if(p)return u(p);const m=jE(e.spanContext().traceId,t),g=a[ft],y=s.description;return g!=="url"&&y&&(m.transaction=y),Hr()&&(m.sampled=String(Si(n)),m.sample_rand=(i==null?void 0:i.get("sentry.sample_rand"))??((b=Xf(n).scope)==null?void 0:b.getPropagationContext().sampleRand.toString())),u(m),t.emit("createDsc",m,n),m}function XM(e){const t=ps(e);return iE(t)}class ma{constructor(t={}){this._traceId=t.traceId||As(),this._spanId=t.spanId||ia()}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:pE}}end(t){}setAttribute(t,n){return this}setAttributes(t){return this}setStatus(t){return this}updateName(t){return this}isRecording(){return!1}addEvent(t,n,s){return this}addLink(t){return this}addLinks(t){return this}recordException(t,n){}}function vr(e,t=100,n=1/0){try{return ly("",e,t,n)}catch(s){return{ERROR:`**non-serializable** (${s})`}}}function NE(e,t=3,n=100*1024){const s=vr(e,t);return nL(s)>n?NE(e,t-1,n):s}function ly(e,t,n=1/0,s=1/0,a=rL()){const[i,l]=a;if(t==null||["boolean","string"].includes(typeof t)||typeof t=="number"&&Number.isFinite(t))return t;const u=ZM(e,t);if(!u.startsWith("[object "))return u;if(t.__sentry_skip_normalization__)return t;const d=typeof t.__sentry_override_normalization_depth__=="number"?t.__sentry_override_normalization_depth__:n;if(d===0)return u.replace("object ","");if(i(t))return"[Circular ~]";const h=t;if(h&&typeof h.toJSON=="function")try{const y=h.toJSON();return ly("",y,d-1,s,a)}catch{}const p=Array.isArray(t)?[]:{};let m=0;const g=X2(t);for(const y in g){if(!Object.prototype.hasOwnProperty.call(g,y))continue;if(m>=s){p[y]="[MaxProperties ~]";break}const b=g[y];p[y]=ly(y,b,d-1,s,a),m++}return l(t),p}function ZM(e,t){try{if(e==="domain"&&t&&typeof t=="object"&&t._events)return"[Domain]";if(e==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&t===global)return"[Global]";if(typeof window<"u"&&t===window)return"[Window]";if(typeof document<"u"&&t===document)return"[Document]";if(Y2(t))return z2(t);if(sM(t))return"[SyntheticEvent]";if(typeof t=="number"&&!Number.isFinite(t))return`[${t}]`;if(typeof t=="function")return`[Function: ${da(t)}]`;if(typeof t=="symbol")return`[${String(t)}]`;if(typeof t=="bigint")return`[BigInt: ${String(t)}]`;const n=eL(t);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(n){return`**non-serializable** (${n})`}}function eL(e){const t=Object.getPrototypeOf(e);return t!=null&&t.constructor?t.constructor.name:"null prototype"}function tL(e){return~-encodeURI(e).split(/%..|./).length}function nL(e){return tL(JSON.stringify(e))}function rL(){const e=new WeakSet;function t(s){return e.has(s)?!0:(e.add(s),!1)}function n(s){e.delete(s)}return[t,n]}function bs(e,t=[]){return[e,t]}function sL(e,t){const[n,s]=e;return[n,[...s,t]]}function vo(e,t){const n=e[1];for(const s of n){const a=s[0].type;if(t(s,a))return!0}return!1}function BN(e,t){return vo(e,(n,s)=>t.includes(s))}function em(e){const t=dd(Ae);return t.encodePolyfill?t.encodePolyfill(e):new TextEncoder().encode(e)}function aL(e){const t=dd(Ae);return t.decodePolyfill?t.decodePolyfill(e):new TextDecoder().decode(e)}function tm(e){const[t,n]=e;let s=JSON.stringify(t);function a(i){typeof s=="string"?s=typeof i=="string"?s+i:[em(s),i]:s.push(typeof i=="string"?em(i):i)}for(const i of n){const[l,u]=i;if(a(`
${JSON.stringify(l)}
`),typeof u=="string"||u instanceof Uint8Array)a(u);else{let d;try{d=JSON.stringify(u)}catch{d=JSON.stringify(vr(u))}a(d)}}return typeof s=="string"?s:iL(s)}function iL(e){const t=e.reduce((a,i)=>a+i.length,0),n=new Uint8Array(t);let s=0;for(const a of e)n.set(a,s),s+=a.length;return n}function oL(e){let t=typeof e=="string"?em(e):e;function n(l){const u=t.subarray(0,l);return t=t.subarray(l+1),u}function s(){let l=t.indexOf(10);return l<0&&(l=t.length),JSON.parse(aL(n(l)))}const a=s(),i=[];for(;t.length;){const l=s(),u=typeof l.length=="number"?l.length:void 0;i.push([l,u?n(u):s()])}return[a,i]}function lL(e){return[{type:"span"},e]}function cL(e){const t=typeof e.data=="string"?em(e.data):e.data;return[{type:"attachment",length:t.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType},t]}const uL={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security",log:"log_item",metric:"metric",trace_metric:"metric"};function HN(e){return uL[e]}function Hm(e){if(!(e!=null&&e.sdk))return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function SE(e,t,n,s){var i;const a=(i=e.sdkProcessingMetadata)==null?void 0:i.dynamicSamplingContext;return{event_id:e.event_id,sent_at:new Date().toISOString(),...t&&{sdk:t},...!!n&&s&&{dsn:ba(s)},...a&&{trace:a}}}function dL(e,t){var s,a,i,l;if(!t)return e;const n=e.sdk||{};return e.sdk={...n,name:n.name||t.name,version:n.version||t.version,integrations:[...((s=e.sdk)==null?void 0:s.integrations)||[],...t.integrations||[]],packages:[...((a=e.sdk)==null?void 0:a.packages)||[],...t.packages||[]],settings:(i=e.sdk)!=null&&i.settings||t.settings?{...(l=e.sdk)==null?void 0:l.settings,...t.settings}:void 0},e}function hL(e,t,n,s){const a=Hm(n),i={sent_at:new Date().toISOString(),...a&&{sdk:a},...!!s&&t&&{dsn:ba(t)}},l="aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()];return bs(i,[l])}function fL(e,t,n,s){const a=Hm(n),i=e.type&&e.type!=="replay_event"?e.type:"event";dL(e,n==null?void 0:n.sdk);const l=SE(e,a,s,t);return delete e.sdkProcessingMetadata,bs(l,[[{type:i},e]])}function mL(e,t){function n(y){return!!y.trace_id&&!!y.public_key}const s=ps(e[0]),a=t==null?void 0:t.getDsn(),i=t==null?void 0:t.getOptions().tunnel,l={sent_at:new Date().toISOString(),...n(s)&&{trace:s},...!!i&&a&&{dsn:ba(a)}},{beforeSendSpan:u,ignoreSpans:d}=(t==null?void 0:t.getOptions())||{},h=d!=null&&d.length?e.filter(y=>!Zf(Te(y),d)):e,p=e.length-h.length;p&&(t==null||t.recordDroppedEvent("before_send","span",p));const m=u?y=>{const b=Te(y),w=u(b);return w||(oy(),b)}:Te,g=[];for(const y of h){const b=m(y);b&&g.push(lL(b))}return bs(l,g)}function pL(e){if(!pe)return;const{description:t="< unknown name >",op:n="< unknown op >",parent_span_id:s}=Te(e),{spanId:a}=e.spanContext(),i=Si(e),l=Bt(e),u=l===e,d=`[Tracing] Starting ${i?"sampled":"unsampled"} ${u?"root ":""}span`,h=[`op: ${n}`,`name: ${t}`,`ID: ${a}`];if(s&&h.push(`parent ID: ${s}`),!u){const{op:p,description:m}=Te(l);h.push(`root ID: ${l.spanContext().spanId}`),p&&h.push(`root op: ${p}`),m&&h.push(`root description: ${m}`)}W.log(`${d}
  ${h.join(`
  `)}`)}function gL(e){if(!pe)return;const{description:t="< unknown name >",op:n="< unknown op >"}=Te(e),{spanId:s}=e.spanContext(),i=Bt(e)===e,l=`[Tracing] Finishing "${n}" ${i?"root ":""}span "${t}" with ID ${s}`;W.log(l)}function kE(e,t,n,s=Ht()){const a=s&&Bt(s);a&&(pe&&W.log(`[Measurement] Setting measurement on root span: ${e} = ${t} ${n}`),a.addEvent(e,{[md]:t,[fd]:n}))}function zN(e){if(!e||e.length===0)return;const t={};return e.forEach(n=>{const s=n.attributes||{},a=s[fd],i=s[md];typeof a=="string"&&typeof i=="number"&&(t[n.name]={value:i,unit:a})}),t}const WN=1e3;class zm{constructor(t={}){this._traceId=t.traceId||As(),this._spanId=t.spanId||ia(),this._startTime=t.startTimestamp||Tt(),this._links=t.links,this._attributes={},this.setAttributes({[Ge]:"manual",[_t]:t.op,...t.attributes}),this._name=t.name,t.parentSpanId&&(this._parentSpanId=t.parentSpanId),"sampled"in t&&(this._sampled=t.sampled),t.endTimestamp&&(this._endTime=t.endTimestamp),this._events=[],this._isStandaloneSpan=t.isStandalone,this._endTime&&this._onSpanEnded()}addLink(t){return this._links?this._links.push(t):this._links=[t],this}addLinks(t){return this._links?this._links.push(...t):this._links=t,this}recordException(t,n){}spanContext(){const{_spanId:t,_traceId:n,_sampled:s}=this;return{spanId:t,traceId:n,traceFlags:s?jb:pE}}setAttribute(t,n){return n===void 0?delete this._attributes[t]:this._attributes[t]=n,this}setAttributes(t){return Object.keys(t).forEach(n=>this.setAttribute(n,t[n])),this}updateStartTime(t){this._startTime=fo(t)}setStatus(t){return this._status=t,this}updateName(t){return this._name=t,this.setAttribute(ft,"custom"),this}end(t){this._endTime||(this._endTime=fo(t),gL(this),this._onSpanEnded())}getSpanJSON(){return{data:this._attributes,description:this._name,op:this._attributes[_t],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:bE(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[Ge],profile_id:this._attributes[vb],exclusive_time:this._attributes[vc],measurements:zN(this._events),is_segment:this._isStandaloneSpan&&Bt(this)===this||void 0,segment_id:this._isStandaloneSpan?Bt(this).spanContext().spanId:void 0,links:yE(this._links)}}isRecording(){return!this._endTime&&!!this._sampled}addEvent(t,n,s){pe&&W.log("[Tracing] Adding an event to span:",t);const a=GN(n)?n:s||Tt(),i=GN(n)?{}:n||{},l={name:t,time:fo(a),attributes:i};return this._events.push(l),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){const t=ye();if(t&&t.emit("spanEnd",this),!(this._isStandaloneSpan||this===Bt(this)))return;if(this._isStandaloneSpan){this._sampled?yL(mL([this],t)):(pe&&W.log("[Tracing] Discarding standalone span because its trace was not chosen to be sampled."),t&&t.recordDroppedEvent("sample_rate","span"));return}const s=this._convertSpanToTransaction();s&&(Xf(this).scope||We()).captureEvent(s)}_convertSpanToTransaction(){var p;if(!VN(Te(this)))return;this._name||(pe&&W.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");const{scope:t,isolationScope:n}=Xf(this),s=(p=t==null?void 0:t.getScopeData().sdkProcessingMetadata)==null?void 0:p.normalizedRequest;if(this._sampled!==!0)return;const i=Tu(this).filter(m=>m!==this&&!xL(m)).map(m=>Te(m)).filter(VN),l=this._attributes[ft];delete this._attributes[ay],i.forEach(m=>{delete m.data[ay]});const u={contexts:{trace:zM(this)},spans:i.length>WN?i.sort((m,g)=>m.start_timestamp-g.start_timestamp).slice(0,WN):i,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:t,capturedSpanIsolationScope:n,dynamicSamplingContext:ps(this)},request:s,...l&&{transaction_info:{source:l}}},d=zN(this._events);return d&&Object.keys(d).length&&(pe&&W.log("[Measurements] Adding measurements to transaction event",JSON.stringify(d,void 0,2)),u.measurements=d),u}}function GN(e){return e&&typeof e=="number"||e instanceof Date||Array.isArray(e)}function VN(e){return!!e.start_timestamp&&!!e.timestamp&&!!e.span_id&&!!e.trace_id}function xL(e){return e instanceof zm&&e.isStandaloneSpan()}function yL(e){const t=ye();if(!t)return;const n=e[1];if(!n||n.length===0){t.recordDroppedEvent("before_send","span");return}t.sendEnvelope(e)}function Wm(e,t,n=()=>{},s=()=>{}){let a;try{a=e()}catch(i){throw t(i),n(),i}return bL(a,t,n,s)}function bL(e,t,n,s){return Ao(e)?e.then(a=>(n(),s(a),a),a=>{throw t(a),n(),a}):(n(),s(e),e)}function vL(e,t,n){if(!Hr(e))return[!1];let s,a;typeof e.tracesSampler=="function"?(a=e.tracesSampler({...t,inheritOrSampleWith:u=>typeof t.parentSampleRate=="number"?t.parentSampleRate:typeof t.parentSampled=="boolean"?Number(t.parentSampled):u}),s=!0):t.parentSampled!==void 0?a=t.parentSampled:typeof e.tracesSampleRate<"u"&&(a=e.tracesSampleRate,s=!0);const i=bo(a);if(i===void 0)return pe&&W.warn(`[Tracing] Discarding root span because of invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(a)} of type ${JSON.stringify(typeof a)}.`),[!1];if(!i)return pe&&W.log(`[Tracing] Discarding transaction because ${typeof e.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),[!1,i,s];const l=n<i;return l||pe&&W.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(a)})`),[l,i,s]}const nm="__SENTRY_SUPPRESS_TRACING__";function Ms(e,t){const n=pd();if(n.startSpan)return n.startSpan(e,t);const s=kb(e),{forceTransaction:a,parentSpan:i,scope:l}=e,u=l==null?void 0:l.clone();return hr(u,()=>TE(i)(()=>{const h=We(),p=Eb(h,i),g=e.onlyIfParent&&!p?new ma:Sb({parentSpan:p,spanArguments:s,forceTransaction:a,scope:h});return Os(h,g),Wm(()=>t(g),()=>{const{status:y}=Te(g);g.isRecording()&&(!y||y==="ok")&&g.setStatus({code:nt,message:"internal_error"})},()=>{g.end()})}))}function ta(e,t){const n=pd();if(n.startSpanManual)return n.startSpanManual(e,t);const s=kb(e),{forceTransaction:a,parentSpan:i,scope:l}=e,u=l==null?void 0:l.clone();return hr(u,()=>TE(i)(()=>{const h=We(),p=Eb(h,i),g=e.onlyIfParent&&!p?new ma:Sb({parentSpan:p,spanArguments:s,forceTransaction:a,scope:h});return Os(h,g),Wm(()=>t(g,()=>g.end()),()=>{const{status:y}=Te(g);g.isRecording()&&(!y||y==="ok")&&g.setStatus({code:nt,message:"internal_error"})})}))}function zr(e){const t=pd();if(t.startInactiveSpan)return t.startInactiveSpan(e);const n=kb(e),{forceTransaction:s,parentSpan:a}=e;return(e.scope?l=>hr(e.scope,l):a!==void 0?l=>wo(a,l):l=>l())(()=>{const l=We(),u=Eb(l,a);return e.onlyIfParent&&!u?new ma:Sb({parentSpan:u,spanArguments:n,forceTransaction:s,scope:l})})}const wL=(e,t)=>{const n=ya(),s=Ni(n);if(s.continueTrace)return s.continueTrace(e,t);const{sentryTrace:a,baggage:i}=e,l=ye(),u=_b(i);return l&&!HM(l,u==null?void 0:u.org_id)?CE(t):hr(d=>{const h=hE(a,i);return d.setPropagationContext(h),Os(d,void 0),t()})};function wo(e,t){const n=pd();return n.withActiveSpan?n.withActiveSpan(e,t):hr(s=>(Os(s,e||void 0),t(s)))}function EE(e){const t=pd();return t.suppressTracing?t.suppressTracing(e):hr(n=>{n.setSDKProcessingMetadata({[nm]:!0});const s=e();return n.setSDKProcessingMetadata({[nm]:void 0}),s})}function CE(e){return hr(t=>(t.setPropagationContext({traceId:As(),sampleRand:Math.random()}),pe&&W.log(`Starting a new trace with id ${t.getPropagationContext().traceId}`),wo(null,e)))}function Sb({parentSpan:e,spanArguments:t,forceTransaction:n,scope:s}){if(!Hr()){const l=new ma;if(n||!e){const u={sampled:"false",sample_rate:"0",transaction:t.name,...ps(l)};_f(l,u)}return l}const a=an();let i;if(e&&!n)i=_L(e,s,t),vE(e,i);else if(e){const l=ps(e),{traceId:u,spanId:d}=e.spanContext(),h=Si(e);i=KN({traceId:u,parentSpanId:d,...t},s,h),_f(i,l)}else{const{traceId:l,dsc:u,parentSpanId:d,sampled:h}={...a.getPropagationContext(),...s.getPropagationContext()};i=KN({traceId:l,parentSpanId:d,...t},s,h),u&&_f(i,u)}return pL(i),IM(i,s,a),i}function kb(e){const n={isStandalone:(e.experimental||{}).standalone,...e};if(e.startTime){const s={...n};return s.startTimestamp=fo(e.startTime),delete s.startTime,s}return n}function pd(){const e=ya();return Ni(e)}function KN(e,t,n){var b;const s=ye(),a=(s==null?void 0:s.getOptions())||{},{name:i=""}=e,l={spanAttributes:{...e.attributes},spanName:i,parentSampled:n};s==null||s.emit("beforeSampling",l,{decision:!1});const u=l.parentSampled??n,d=l.spanAttributes,h=t.getPropagationContext(),[p,m,g]=t.getScopeData().sdkProcessingMetadata[nm]?[!1]:vL(a,{name:i,parentSampled:u,attributes:d,parentSampleRate:bo((b=h.dsc)==null?void 0:b.sample_rate)},h.sampleRand),y=new zm({...e,attributes:{[ft]:"custom",[Um]:m!==void 0&&g?m:void 0,...d},sampled:p});return!p&&s&&(pe&&W.log("[Tracing] Discarding root span because its trace was not chosen to be sampled."),s.recordDroppedEvent("sample_rate","transaction")),s&&s.emit("spanStart",y),y}function _L(e,t,n){const{spanId:s,traceId:a}=e.spanContext(),i=t.getScopeData().sdkProcessingMetadata[nm]?!1:Si(e),l=i?new zm({...n,parentSpanId:s,traceId:a,sampled:i}):new ma({traceId:a});vE(e,l);const u=ye();return u&&(u.emit("spanStart",l),n.endTimestamp&&u.emit("spanEnd",l)),l}function Eb(e,t){if(t)return t;if(t===null)return;const n=ec(e);if(!n)return;const s=ye();return(s?s.getOptions():{}).parentSpanIsAlwaysRootSpan?Bt(n):n}function TE(e){return e!==void 0?t=>wo(e,t):t=>t()}const jf={idleTimeout:1e3,finalTimeout:3e4,childSpanTimeout:15e3},jL="heartbeatFailed",NL="idleTimeout",SL="finalTimeout",kL="externalFinish";function RE(e,t={}){const n=new Map;let s=!1,a,i=kL,l=!t.disableAutoFinish;const u=[],{idleTimeout:d=jf.idleTimeout,finalTimeout:h=jf.finalTimeout,childSpanTimeout:p=jf.childSpanTimeout,beforeSpanEnd:m,trimIdleSpanEndTimestamp:g=!0}=t,y=ye();if(!y||!Hr()){const T=new ma,L={sample_rate:"0",sampled:"false",...ps(T)};return _f(T,L),T}const b=We(),w=Ht(),v=EL(e);v.end=new Proxy(v.end,{apply(T,L,H){if(m&&m(v),L instanceof ma)return;const[R,...M]=H,O=R||Tt(),F=fo(O),K=Tu(v).filter(V=>V!==v),ae=Te(v);if(!K.length||!g)return A(F),Reflect.apply(T,L,[F,...M]);const X=y.getOptions().ignoreSpans,ee=K==null?void 0:K.reduce((V,$)=>{const J=Te($);return!J.timestamp||X&&Zf(J,X)?V:V?Math.max(V,J.timestamp):J.timestamp},void 0),D=ae.start_timestamp,te=Math.min(D?D+h/1e3:1/0,Math.max(D||-1/0,Math.min(F,ee||1/0)));return A(te),Reflect.apply(T,L,[te,...M])}});function j(){a&&(clearTimeout(a),a=void 0)}function E(T){j(),a=setTimeout(()=>{!s&&n.size===0&&l&&(i=NL,v.end(T))},d)}function k(T){a=setTimeout(()=>{!s&&l&&(i=jL,v.end(T))},p)}function S(T){j(),n.set(T,!0);const L=Tt();k(L+p/1e3)}function P(T){if(n.has(T)&&n.delete(T),n.size===0){const L=Tt();E(L+d/1e3)}}function A(T){s=!0,n.clear(),u.forEach(K=>K()),Os(b,w);const L=Te(v),{start_timestamp:H}=L;if(!H)return;L.data[zu]||v.setAttribute(zu,i);const M=L.status;(!M||M==="unknown")&&v.setStatus({code:qm}),W.log(`[Tracing] Idle span "${L.op}" finished`);const O=Tu(v).filter(K=>K!==v);let F=0;O.forEach(K=>{K.isRecording()&&(K.setStatus({code:nt,message:"cancelled"}),K.end(T),pe&&W.log("[Tracing] Cancelling span since span ended early",JSON.stringify(K,void 0,2)));const ae=Te(K),{timestamp:X=0,start_timestamp:ee=0}=ae,D=ee<=T,te=(h+d)/1e3,V=X-ee<=te;if(pe){const $=JSON.stringify(K,void 0,2);D?V||W.log("[Tracing] Discarding span since it finished after idle span final timeout",$):W.log("[Tracing] Discarding span since it happened after idle span was finished",$)}(!V||!D)&&(KM(v,K),F++)}),F>0&&v.setAttribute("sentry.idle_span_discarded_spans",F)}return u.push(y.on("spanStart",T=>{if(s||T===v||Te(T).timestamp||T instanceof zm&&T.isStandaloneSpan())return;Tu(v).includes(T)&&S(T.spanContext().spanId)})),u.push(y.on("spanEnd",T=>{s||P(T.spanContext().spanId)})),u.push(y.on("idleSpanEnableAutoFinish",T=>{T===v&&(l=!0,E(),n.size&&k())})),t.disableAutoFinish||E(),setTimeout(()=>{s||(v.setStatus({code:nt,message:"deadline_exceeded"}),i=SL,v.end())},h),v}function EL(e){const t=zr(e);return Os(We(),t),pe&&W.log("[Tracing] Started span is an idle span"),t}const Kx=0,YN=1,JN=2;function Gm(e){return new Gu(t=>{t(e)})}function Cb(e){return new Gu((t,n)=>{n(e)})}class Gu{constructor(t){this._state=Kx,this._handlers=[],this._runExecutor(t)}then(t,n){return new Gu((s,a)=>{this._handlers.push([!1,i=>{if(!t)s(i);else try{s(t(i))}catch(l){a(l)}},i=>{if(!n)a(i);else try{s(n(i))}catch(l){a(l)}}]),this._executeHandlers()})}catch(t){return this.then(n=>n,t)}finally(t){return new Gu((n,s)=>{let a,i;return this.then(l=>{i=!1,a=l,t&&t()},l=>{i=!0,a=l,t&&t()}).then(()=>{if(i){s(a);return}n(a)})})}_executeHandlers(){if(this._state===Kx)return;const t=this._handlers.slice();this._handlers=[],t.forEach(n=>{n[0]||(this._state===YN&&n[1](this._value),this._state===JN&&n[2](this._value),n[0]=!0)})}_runExecutor(t){const n=(i,l)=>{if(this._state===Kx){if(Ao(l)){l.then(s,a);return}this._state=i,this._value=l,this._executeHandlers()}},s=i=>{n(YN,i)},a=i=>{n(JN,i)};try{t(s,a)}catch(i){a(i)}}}function CL(e,t,n,s=0){try{const a=cy(t,n,e,s);return Ao(a)?a:Gm(a)}catch(a){return Cb(a)}}function cy(e,t,n,s){const a=n[s];if(!e||!a)return e;const i=a({...e},t);return pe&&i===null&&W.log(`Event processor "${a.id||"?"}" dropped event`),Ao(i)?i.then(l=>cy(l,t,n,s+1)):cy(i,t,n,s+1)}function TL(e,t){const{fingerprint:n,span:s,breadcrumbs:a,sdkProcessingMetadata:i}=t;RL(e,t),s&&AL(e,s),OL(e,n),IL(e,a),PL(e,i)}function nc(e,t){const{extra:n,tags:s,attributes:a,user:i,contexts:l,level:u,sdkProcessingMetadata:d,breadcrumbs:h,fingerprint:p,eventProcessors:m,attachments:g,propagationContext:y,transactionName:b,span:w}=t;gu(e,"extra",n),gu(e,"tags",s),gu(e,"attributes",a),gu(e,"user",i),gu(e,"contexts",l),e.sdkProcessingMetadata=hd(e.sdkProcessingMetadata,d,2),u&&(e.level=u),b&&(e.transactionName=b),w&&(e.span=w),h.length&&(e.breadcrumbs=[...e.breadcrumbs,...h]),p.length&&(e.fingerprint=[...e.fingerprint,...p]),m.length&&(e.eventProcessors=[...e.eventProcessors,...m]),g.length&&(e.attachments=[...e.attachments,...g]),e.propagationContext={...e.propagationContext,...y}}function gu(e,t,n){e[t]=hd(e[t],n,1)}function RL(e,t){const{extra:n,tags:s,user:a,contexts:i,level:l,transactionName:u}=t;Object.keys(n).length&&(e.extra={...n,...e.extra}),Object.keys(s).length&&(e.tags={...s,...e.tags}),Object.keys(a).length&&(e.user={...a,...e.user}),Object.keys(i).length&&(e.contexts={...i,...e.contexts}),l&&(e.level=l),u&&e.type!=="transaction"&&(e.transaction=u)}function IL(e,t){const n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}function PL(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}function AL(e,t){e.contexts={trace:gE(t),...e.contexts},e.sdkProcessingMetadata={dynamicSamplingContext:ps(t),...e.sdkProcessingMetadata};const n=Bt(t),s=Te(n).description;s&&!e.transaction&&e.type==="transaction"&&(e.transaction=s)}function OL(e,t){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],t&&(e.fingerprint=e.fingerprint.concat(t)),e.fingerprint.length||delete e.fingerprint}let Ws,QN,XN,qa;function IE(e){const t=Ae._sentryDebugIds,n=Ae._debugIds;if(!t&&!n)return{};const s=t?Object.keys(t):[],a=n?Object.keys(n):[];if(qa&&s.length===QN&&a.length===XN)return qa;QN=s.length,XN=a.length,qa={},Ws||(Ws={});const i=(l,u)=>{for(const d of l){const h=u[d],p=Ws==null?void 0:Ws[d];if(p&&qa&&h)qa[p[0]]=h,Ws&&(Ws[d]=[p[0],h]);else if(h){const m=e(d);for(let g=m.length-1;g>=0;g--){const y=m[g],b=y==null?void 0:y.filename;if(b&&qa&&Ws){qa[b]=h,Ws[d]=[b,h];break}}}}};return t&&i(s,t),n&&i(a,n),qa}function ML(e,t){const n=IE(e);if(!n)return[];const s=[];for(const a of t)a&&n[a]&&s.push({type:"sourcemap",code_file:a,debug_id:n[a]});return s}function PE(e,t,n,s,a,i){const{normalizeDepth:l=3,normalizeMaxBreadth:u=1e3}=e,d={...t,event_id:t.event_id||n.event_id||dn(),timestamp:t.timestamp||Mo()},h=n.integrations||e.integrations.map(v=>v.name);LL(d,e),FL(d,h),a&&a.emit("applyFrameMetadata",t),t.type===void 0&&$L(d,e.stackParser);const p=qL(s,n.captureContext);n.mechanism&&fa(d,n.mechanism);const m=a?a.getEventProcessors():[],g=oa().getScopeData();if(i){const v=i.getScopeData();nc(g,v)}if(p){const v=p.getScopeData();nc(g,v)}const y=[...n.attachments||[],...g.attachments];y.length&&(n.attachments=y),TL(d,g);const b=[...m,...g.eventProcessors];return CL(b,d,n).then(v=>(v&&DL(v),typeof l=="number"&&l>0?UL(v,l,u):v))}function LL(e,t){var u,d;const{environment:n,release:s,dist:a,maxValueLength:i}=t;e.environment=e.environment||n||Bm,!e.release&&s&&(e.release=s),!e.dist&&a&&(e.dist=a);const l=e.request;l!=null&&l.url&&i&&(l.url=Hu(l.url,i)),i&&((d=(u=e.exception)==null?void 0:u.values)==null||d.forEach(h=>{h.value&&(h.value=Hu(h.value,i))}))}function $L(e,t){var s,a;const n=IE(t);(a=(s=e.exception)==null?void 0:s.values)==null||a.forEach(i=>{var l,u;(u=(l=i.stacktrace)==null?void 0:l.frames)==null||u.forEach(d=>{d.filename&&(d.debug_id=n[d.filename])})})}function DL(e){var s,a;const t={};if((a=(s=e.exception)==null?void 0:s.values)==null||a.forEach(i=>{var l,u;(u=(l=i.stacktrace)==null?void 0:l.frames)==null||u.forEach(d=>{d.debug_id&&(d.abs_path?t[d.abs_path]=d.debug_id:d.filename&&(t[d.filename]=d.debug_id),delete d.debug_id)})}),Object.keys(t).length===0)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.entries(t).forEach(([i,l])=>{n.push({type:"sourcemap",code_file:i,debug_id:l})})}function FL(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}function UL(e,t,n){var a,i;if(!e)return null;const s={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(l=>({...l,...l.data&&{data:vr(l.data,t,n)}}))},...e.user&&{user:vr(e.user,t,n)},...e.contexts&&{contexts:vr(e.contexts,t,n)},...e.extra&&{extra:vr(e.extra,t,n)}};return(a=e.contexts)!=null&&a.trace&&s.contexts&&(s.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(s.contexts.trace.data=vr(e.contexts.trace.data,t,n))),e.spans&&(s.spans=e.spans.map(l=>({...l,...l.data&&{data:vr(l.data,t,n)}}))),(i=e.contexts)!=null&&i.flags&&s.contexts&&(s.contexts.flags=vr(e.contexts.flags,3,n)),s}function qL(e,t){if(!t)return e;const n=e?e.clone():new ms;return n.update(t),n}function BL(e){if(e)return HL(e)?{captureContext:e}:WL(e)?{captureContext:e}:e}function HL(e){return e instanceof ms||typeof e=="function"}const zL=["user","level","extra","contexts","tags","fingerprint","propagationContext"];function WL(e){return Object.keys(e).some(t=>zL.includes(t))}function dt(e,t){return We().captureException(e,BL(t))}function AE(e,t){const n=typeof t=="string"?t:void 0,s=typeof t!="string"?{captureContext:t}:void 0;return We().captureMessage(e,n,s)}function wc(e,t){return We().captureEvent(e,t)}function Tb(e,t){an().setContext(e,t)}function GL(e){an().setExtras(e)}function VL(e,t){an().setExtra(e,t)}function KL(e){an().setTags(e)}function YL(e,t){an().setTag(e,t)}function JL(e){an().setUser(e)}function OE(){return an().lastEventId()}async function QL(e){const t=ye();return t?t.flush(e):(pe&&W.warn("Cannot flush events. No client defined."),Promise.resolve(!1))}async function XL(e){const t=ye();return t?t.close(e):(pe&&W.warn("Cannot flush events and disable SDK. No client defined."),Promise.resolve(!1))}function ZL(){return!!ye()}function ME(){const e=ye();return(e==null?void 0:e.getOptions().enabled)!==!1&&!!(e!=null&&e.getTransport())}function LE(e){an().addEventProcessor(e)}function uy(e){const t=an(),n=We(),{userAgent:s}=Ae.navigator||{},a=mM({user:n.getUser()||t.getUser(),...s&&{userAgent:s},...e}),i=t.getSession();return(i==null?void 0:i.status)==="ok"&&Zl(i,{status:"exited"}),Rb(),t.setSession(a),a}function Rb(){const e=an(),n=We().getSession()||e.getSession();n&&pM(n),$E(),e.setSession()}function $E(){const e=an(),t=ye(),n=e.getSession();n&&t&&t.captureSession(n)}function dy(e=!1){if(e){Rb();return}$E()}const e$="7";function DE(e){const t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function t$(e){return`${DE(e)}${e.projectId}/envelope/`}function n$(e,t){const n={sentry_version:e$};return e.publicKey&&(n.sentry_key=e.publicKey),t&&(n.sentry_client=`${t.name}/${t.version}`),new URLSearchParams(n).toString()}function FE(e,t,n){return t||`${t$(e)}?${n$(e,n)}`}function r$(e,t){const n=uE(e);if(!n)return"";const s=`${DE(n)}embed/error-page/`;let a=`dsn=${ba(n)}`;for(const i in t)if(i!=="dsn"&&i!=="onClose")if(i==="user"){const l=t.user;if(!l)continue;l.name&&(a+=`&name=${encodeURIComponent(l.name)}`),l.email&&(a+=`&email=${encodeURIComponent(l.email)}`)}else a+=`&${encodeURIComponent(i)}=${encodeURIComponent(t[i])}`;return`${s}?${a}`}const ZN=[];function s$(e){const t={};return e.forEach(n=>{const{name:s}=n,a=t[s];a&&!a.isDefaultInstance&&n.isDefaultInstance||(t[s]=n)}),Object.values(t)}function a$(e){const t=e.defaultIntegrations||[],n=e.integrations;t.forEach(a=>{a.isDefaultInstance=!0});let s;if(Array.isArray(n))s=[...t,...n];else if(typeof n=="function"){const a=n(t);s=Array.isArray(a)?a:[a]}else s=t;return s$(s)}function i$(e,t){const n={};return t.forEach(s=>{s&&UE(e,s,n)}),n}function e1(e,t){for(const n of t)n!=null&&n.afterAllSetup&&n.afterAllSetup(e)}function UE(e,t,n){if(n[t.name]){pe&&W.log(`Integration skipped because it was already installed: ${t.name}`);return}if(n[t.name]=t,!ZN.includes(t.name)&&typeof t.setupOnce=="function"&&(t.setupOnce(),ZN.push(t.name)),t.setup&&typeof t.setup=="function"&&t.setup(e),typeof t.preprocessEvent=="function"){const s=t.preprocessEvent.bind(t);e.on("preprocessEvent",(a,i)=>s(a,i,e))}if(typeof t.processEvent=="function"){const s=t.processEvent.bind(t),a=Object.assign((i,l)=>s(i,l,e),{id:t.name});e.addEventProcessor(a)}pe&&W.log(`Integration installed: ${t.name}`)}function hy(e){const t=ye();if(!t){pe&&W.warn(`Cannot add integration "${e.name}" because no SDK Client is available.`);return}t.addIntegration(e)}function o$(e){return typeof e=="object"&&e!=null&&!Array.isArray(e)&&Object.keys(e).includes("value")}function l$(e,t){const{value:n,unit:s}=o$(e)?e:{value:e,unit:void 0},a=c$(n),i=s&&typeof s=="string"?{unit:s}:{};if(a)return{...a,...i};if(!t)return;let l="";try{l=JSON.stringify(n)??""}catch{}return{value:l,type:"string",...i}}function t1(e,t=!1){const n={};for(const[s,a]of Object.entries(e)){const i=l$(a,t);i&&(n[s]=i)}return n}function c$(e){const t=typeof e=="string"?"string":typeof e=="boolean"?"boolean":typeof e=="number"&&!Number.isNaN(e)?Number.isInteger(e)?"integer":"double":null;if(t)return{value:e,type:t}}function qE(e,t){return t?hr(t,()=>{const n=Ht(),s=n?gE(n):tE(t);return[n?ps(n):Nb(e,t),s]}):[void 0,void 0]}const u$={trace:1,debug:5,info:9,warn:13,error:17,fatal:21};function d$(e){return[{type:"log",item_count:e.length,content_type:"application/vnd.sentry.items.log+json"},{items:e}]}function h$(e,t,n,s){const a={};return t!=null&&t.sdk&&(a.sdk={name:t.sdk.name,version:t.sdk.version}),n&&s&&(a.dsn=ba(s)),bs(a,[d$(e)])}const f$=100;function Ss(e,t,n,s=!0){n&&(!e[t]||s)&&(e[t]=n)}function m$(e,t){const n=Pb(),s=BE(e);s===void 0?n.set(e,[t]):s.length>=f$?(Ib(e,s),n.set(e,[t])):n.set(e,[...s,t])}function rm(e,t=We(),n=m$){var M;const s=(t==null?void 0:t.getClient())??ye();if(!s){pe&&W.warn("No client available to capture log.");return}const{release:a,environment:i,enableLogs:l=!1,beforeSendLog:u}=s.getOptions();if(!l){pe&&W.warn("logging option not enabled, log will not be captured.");return}const[,d]=qE(s,t),h={...e.attributes},{user:{id:p,email:m,username:g},attributes:y={}}=p$(t);Ss(h,"user.id",p,!1),Ss(h,"user.email",m,!1),Ss(h,"user.name",g,!1),Ss(h,"sentry.release",a),Ss(h,"sentry.environment",i);const{name:b,version:w}=((M=s.getSdkMetadata())==null?void 0:M.sdk)??{};Ss(h,"sentry.sdk.name",b),Ss(h,"sentry.sdk.version",w);const v=s.getIntegrationByName("Replay"),j=v==null?void 0:v.getReplayId(!0);Ss(h,"sentry.replay_id",j),j&&(v==null?void 0:v.getRecordingMode())==="buffer"&&Ss(h,"sentry._internal.replay_is_buffering",!0);const E=e.message;if(Dm(E)){const{__sentry_template_string__:O,__sentry_template_values__:F=[]}=E;F!=null&&F.length&&(h["sentry.message.template"]=O),F.forEach((K,ae)=>{h[`sentry.message.parameter.${ae}`]=K})}const k=ec(t);Ss(h,"sentry.trace.parent_span_id",k==null?void 0:k.spanContext().spanId);const S={...e,attributes:h};s.emit("beforeCaptureLog",S);const P=u?wi(()=>u(S)):S;if(!P){s.recordDroppedEvent("before_send","log_item",1),pe&&W.warn("beforeSendLog returned null, log will not be captured.");return}const{level:A,message:T,attributes:L={},severityNumber:H}=P,R={timestamp:Tt(),level:A,body:T,trace_id:d==null?void 0:d.trace_id,severity_number:H??u$[A],attributes:{...t1(y),...t1(L,!0)}};n(s,R),s.emit("afterCaptureLog",P)}function Ib(e,t){const n=t??BE(e)??[];if(n.length===0)return;const s=e.getOptions(),a=h$(n,s._metadata,s.tunnel,e.getDsn());Pb().set(e,[]),e.emit("flushLogs"),e.sendEnvelope(a)}function BE(e){return Pb().get(e)}function p$(e){const t=oa().getScopeData();return nc(t,an().getScopeData()),nc(t,e.getScopeData()),t}function Pb(){return yc("clientToLogBufferMap",()=>new WeakMap)}function g$(e){return[{type:"trace_metric",item_count:e.length,content_type:"application/vnd.sentry.items.trace-metric+json"},{items:e}]}function x$(e,t,n,s){const a={};return t!=null&&t.sdk&&(a.sdk={name:t.sdk.name,version:t.sdk.version}),n&&s&&(a.dsn=ba(s)),bs(a,[g$(e)])}const y$=1e3;function b$(e){switch(typeof e){case"number":return Number.isInteger(e)?{value:e,type:"integer"}:{value:e,type:"double"};case"boolean":return{value:e,type:"boolean"};case"string":return{value:e,type:"string"};default:{let t="";try{t=JSON.stringify(e)??""}catch{}return{value:t,type:"string"}}}}function Gs(e,t,n,s=!0){n&&(s||!(t in e))&&(e[t]=n)}function v$(e,t){const n=Ob(),s=HE(e);s===void 0?n.set(e,[t]):s.length>=y$?(Ab(e,s),n.set(e,[t])):n.set(e,[...s,t])}function w$(e,t,n){var y;const{release:s,environment:a}=t.getOptions(),i={...e.attributes},{user:{id:l,email:u,username:d}}=N$(n);Gs(i,"user.id",l,!1),Gs(i,"user.email",u,!1),Gs(i,"user.name",d,!1),Gs(i,"sentry.release",s),Gs(i,"sentry.environment",a);const{name:h,version:p}=((y=t.getSdkMetadata())==null?void 0:y.sdk)??{};Gs(i,"sentry.sdk.name",h),Gs(i,"sentry.sdk.version",p);const m=t.getIntegrationByName("Replay"),g=m==null?void 0:m.getReplayId(!0);return Gs(i,"sentry.replay_id",g),g&&(m==null?void 0:m.getRecordingMode())==="buffer"&&Gs(i,"sentry._internal.replay_is_buffering",!0),{...e,attributes:i}}function _$(e,t,n){const s={};for(const d in e.attributes)e.attributes[d]!==void 0&&(s[d]=b$(e.attributes[d]));const[,a]=qE(t,n),i=ec(n),l=i?i.spanContext().traceId:a==null?void 0:a.trace_id,u=i?i.spanContext().spanId:void 0;return{timestamp:Tt(),trace_id:l??"",span_id:u,name:e.name,type:e.type,unit:e.unit,value:e.value,attributes:s}}function j$(e,t){const n=(t==null?void 0:t.scope)??We(),s=(t==null?void 0:t.captureSerializedMetric)??v$,a=(n==null?void 0:n.getClient())??ye();if(!a){pe&&W.warn("No client available to capture metric.");return}const{_experiments:i,enableMetrics:l,beforeSendMetric:u}=a.getOptions();if(!(l??(i==null?void 0:i.enableMetrics)??!0)){pe&&W.warn("metrics option not enabled, metric will not be captured.");return}const h=w$(e,a,n);a.emit("processMetric",h);const p=u||(i==null?void 0:i.beforeSendMetric),m=p?p(h):h;if(!m){pe&&W.log("`beforeSendMetric` returned `null`, will not send metric.");return}const g=_$(m,a,n);pe&&W.log("[Metric]",g),s(a,g),a.emit("afterCaptureMetric",m)}function Ab(e,t){const n=t??HE(e)??[];if(n.length===0)return;const s=e.getOptions(),a=x$(n,s._metadata,s.tunnel,e.getDsn());Ob().set(e,[]),e.emit("flushMetrics"),e.sendEnvelope(a)}function HE(e){return Ob().get(e)}function N$(e){const t=oa().getScopeData();return nc(t,an().getScopeData()),nc(t,e.getScopeData()),t}function Ob(){return yc("clientToMetricBufferMap",()=>new WeakMap)}const Mb=Symbol.for("SentryBufferFullError");function Lb(e=100){const t=new Set;function n(){return t.size<e}function s(l){t.delete(l)}function a(l){if(!n())return Cb(Mb);const u=l();return t.add(u),u.then(()=>s(u),()=>s(u)),u}function i(l){if(!t.size)return Gm(!0);const u=Promise.allSettled(Array.from(t)).then(()=>!0);if(!l)return u;const d=[u,new Promise(h=>setTimeout(()=>h(!1),l))];return Promise.race(d)}return{get $(){return Array.from(t)},add:a,drain:i}}const S$=60*1e3;function zE(e,t=Date.now()){const n=parseInt(`${e}`,10);if(!isNaN(n))return n*1e3;const s=Date.parse(`${e}`);return isNaN(s)?S$:s-t}function k$(e,t){return e[t]||e.all||0}function WE(e,t,n=Date.now()){return k$(e,t)>n}function GE(e,{statusCode:t,headers:n},s=Date.now()){const a={...e},i=n==null?void 0:n["x-sentry-rate-limits"],l=n==null?void 0:n["retry-after"];if(i)for(const u of i.trim().split(",")){const[d,h,,,p]=u.split(":",5),m=parseInt(d,10),g=(isNaN(m)?60:m)*1e3;if(!h)a.all=s+g;else for(const y of h.split(";"))y==="metric_bucket"?(!p||p.split(";").includes("custom"))&&(a[y]=s+g):a[y]=s+g}else l?a.all=s+zE(l,s):t===429&&(a.all=s+60*1e3);return a}const VE=64;function KE(e,t,n=Lb(e.bufferSize||VE)){let s={};const a=l=>n.drain(l);function i(l){const u=[];if(vo(l,(m,g)=>{const y=HN(g);WE(s,y)?e.recordDroppedEvent("ratelimit_backoff",y):u.push(m)}),u.length===0)return Promise.resolve({});const d=bs(l[0],u),h=m=>{vo(d,(g,y)=>{e.recordDroppedEvent(m,HN(y))})},p=()=>t({body:tm(d)}).then(m=>(m.statusCode!==void 0&&(m.statusCode<200||m.statusCode>=300)&&pe&&W.warn(`Sentry responded with status code ${m.statusCode} to sent event.`),s=GE(s,m),m),m=>{throw h("network_error"),pe&&W.error("Encountered error running transport request:",m),m});return n.add(p).then(m=>m,m=>{if(m===Mb)return pe&&W.error("Skipped sending event because buffer is full."),h("queue_overflow"),Promise.resolve({});throw m})}return{send:i,flush:a}}function E$(e,t,n){const s=[{type:"client_report"},{timestamp:Mo(),discarded_events:e}];return bs(t?{dsn:t}:{},[s])}function YE(e){const t=[];e.message&&t.push(e.message);try{const n=e.exception.values[e.exception.values.length-1];n!=null&&n.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`))}catch{}return t}function C$(e){var d;const{trace_id:t,parent_span_id:n,span_id:s,status:a,origin:i,data:l,op:u}=((d=e.contexts)==null?void 0:d.trace)??{};return{data:l??{},description:e.transaction,op:u,parent_span_id:n,span_id:s??"",start_timestamp:e.start_timestamp??0,status:a,timestamp:e.timestamp,trace_id:t??"",origin:i,profile_id:l==null?void 0:l[vb],exclusive_time:l==null?void 0:l[vc],measurements:e.measurements,is_segment:!0}}function T$(e){return{type:"transaction",timestamp:e.timestamp,start_timestamp:e.start_timestamp,transaction:e.description,contexts:{trace:{trace_id:e.trace_id,span_id:e.span_id,parent_span_id:e.parent_span_id,op:e.op,status:e.status,origin:e.origin,data:{...e.data,...e.profile_id&&{[vb]:e.profile_id},...e.exclusive_time&&{[vc]:e.exclusive_time}}}},measurements:e.measurements}}const n1="Not capturing exception because it's already been captured.",r1="Discarded session because of missing or non-string release",JE=Symbol.for("SentryInternalError"),QE=Symbol.for("SentryDoNotSendEventError"),R$=5e3;function Nf(e){return{message:e,[JE]:!0}}function Yx(e){return{message:e,[QE]:!0}}function s1(e){return!!e&&typeof e=="object"&&JE in e}function a1(e){return!!e&&typeof e=="object"&&QE in e}function i1(e,t,n,s,a){let i=0,l,u=!1;e.on(n,()=>{i=0,clearTimeout(l),u=!1}),e.on(t,d=>{i+=s(d),i>=8e5?a(e):u||(u=!0,l=setTimeout(()=>{a(e)},R$))}),e.on("flush",()=>{a(e)})}class I${constructor(t){var s,a,i;if(this._options=t,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],this._promiseBuffer=Lb(((s=t.transportOptions)==null?void 0:s.bufferSize)??VE),t.dsn?this._dsn=uE(t.dsn):pe&&W.warn("No DSN provided, client will not send events."),this._dsn){const l=FE(this._dsn,t.tunnel,t._metadata?t._metadata.sdk:void 0);this._transport=t.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:l})}this._options.enableLogs=this._options.enableLogs??((a=this._options._experiments)==null?void 0:a.enableLogs),this._options.enableLogs&&i1(this,"afterCaptureLog","flushLogs",M$,Ib),(this._options.enableMetrics??((i=this._options._experiments)==null?void 0:i.enableMetrics)??!0)&&i1(this,"afterCaptureMetric","flushMetrics",O$,Ab)}captureException(t,n,s){const a=dn();if(ON(t))return pe&&W.log(n1),a;const i={event_id:a,...n};return this._process(()=>this.eventFromException(t,i).then(l=>this._captureEvent(l,i,s)).then(l=>l),"error"),i.event_id}captureMessage(t,n,s,a){const i={event_id:dn(),...s},l=Dm(t)?t:String(t),u=hi(t),d=u?this.eventFromMessage(l,n,i):this.eventFromException(t,i);return this._process(()=>d.then(h=>this._captureEvent(h,i,a)),u?"unknown":"error"),i.event_id}captureEvent(t,n,s){const a=dn();if(n!=null&&n.originalException&&ON(n.originalException))return pe&&W.log(n1),a;const i={event_id:a,...n},l=t.sdkProcessingMetadata||{},u=l.capturedSpanScope,d=l.capturedSpanIsolationScope,h=o1(t.type);return this._process(()=>this._captureEvent(t,i,u||s,d),h),i.event_id}captureSession(t){this.sendSession(t),Zl(t,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}async flush(t){const n=this._transport;if(!n)return!0;this.emit("flush");const s=await this._isClientDoneProcessing(t),a=await n.flush(t);return s&&a}async close(t){const n=await this.flush(t);return this.getOptions().enabled=!1,this.emit("close"),n}getEventProcessors(){return this._eventProcessors}addEventProcessor(t){this._eventProcessors.push(t)}init(){(this._isEnabled()||this._options.integrations.some(({name:t})=>t.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(t){return this._integrations[t]}addIntegration(t){const n=this._integrations[t.name];UE(this,t,this._integrations),n||e1(this,[t])}sendEvent(t,n={}){this.emit("beforeSendEvent",t,n);let s=fL(t,this._dsn,this._options._metadata,this._options.tunnel);for(const a of n.attachments||[])s=sL(s,cL(a));this.sendEnvelope(s).then(a=>this.emit("afterSendEvent",t,a))}sendSession(t){const{release:n,environment:s=Bm}=this._options;if("aggregates"in t){const i=t.attrs||{};if(!i.release&&!n){pe&&W.warn(r1);return}i.release=i.release||n,i.environment=i.environment||s,t.attrs=i}else{if(!t.release&&!n){pe&&W.warn(r1);return}t.release=t.release||n,t.environment=t.environment||s}this.emit("beforeSendSession",t);const a=hL(t,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(a)}recordDroppedEvent(t,n,s=1){if(this._options.sendClientReports){const a=`${t}:${n}`;pe&&W.log(`Recording outcome: "${a}"${s>1?` (${s} times)`:""}`),this._outcomes[a]=(this._outcomes[a]||0)+s}}on(t,n){const s=this._hooks[t]=this._hooks[t]||new Set,a=(...i)=>n(...i);return s.add(a),()=>{s.delete(a)}}emit(t,...n){const s=this._hooks[t];s&&s.forEach(a=>a(...n))}async sendEnvelope(t){if(this.emit("beforeEnvelope",t),this._isEnabled()&&this._transport)try{return await this._transport.send(t)}catch(n){return pe&&W.error("Error while sending envelope:",n),{}}return pe&&W.error("Transport disabled"),{}}_setupIntegrations(){const{integrations:t}=this._options;this._integrations=i$(this,t),e1(this,t)}_updateSessionFromEvent(t,n){var d,h;let s=n.level==="fatal",a=!1;const i=(d=n.exception)==null?void 0:d.values;if(i){a=!0,s=!1;for(const p of i)if(((h=p.mechanism)==null?void 0:h.handled)===!1){s=!0;break}}const l=t.status==="ok";(l&&t.errors===0||l&&s)&&(Zl(t,{...s&&{status:"crashed"},errors:t.errors||Number(a||s)}),this.captureSession(t))}async _isClientDoneProcessing(t){let n=0;for(;!t||n<t;){if(await new Promise(s=>setTimeout(s,1)),!this._numProcessing)return!0;n++}return!1}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(t,n,s,a){const i=this.getOptions(),l=Object.keys(this._integrations);return!n.integrations&&(l!=null&&l.length)&&(n.integrations=l),this.emit("preprocessEvent",t,n),t.type||a.setLastEventId(t.event_id||n.event_id),PE(i,t,n,s,this,a).then(u=>{if(u===null)return u;this.emit("postprocessEvent",u,n),u.contexts={trace:tE(s),...u.contexts};const d=Nb(this,s);return u.sdkProcessingMetadata={dynamicSamplingContext:d,...u.sdkProcessingMetadata},u})}_captureEvent(t,n={},s=We(),a=an()){return pe&&fy(t)&&W.log(`Captured error event \`${YE(t)[0]||"<unknown>"}\``),this._processEvent(t,n,s,a).then(i=>i.event_id,i=>{pe&&(a1(i)?W.log(i.message):s1(i)?W.warn(i.message):W.warn(i))})}_processEvent(t,n,s,a){const i=this.getOptions(),{sampleRate:l}=i,u=XE(t),d=fy(t),p=`before send for type \`${t.type||"error"}\``,m=typeof l>"u"?void 0:bo(l);if(d&&typeof m=="number"&&Math.random()>m)return this.recordDroppedEvent("sample_rate","error"),Cb(Yx(`Discarding event because it's not included in the random sample (sampling rate = ${l})`));const g=o1(t.type);return this._prepareEvent(t,n,s,a).then(y=>{if(y===null)throw this.recordDroppedEvent("event_processor",g),Yx("An event processor returned `null`, will not send event.");if(n.data&&n.data.__sentry__===!0)return y;const w=A$(this,i,y,n);return P$(w,p)}).then(y=>{var v;if(y===null){if(this.recordDroppedEvent("before_send",g),u){const E=1+(t.spans||[]).length;this.recordDroppedEvent("before_send","span",E)}throw Yx(`${p} returned \`null\`, will not send event.`)}const b=s.getSession()||a.getSession();if(d&&b&&this._updateSessionFromEvent(b,y),u){const j=((v=y.sdkProcessingMetadata)==null?void 0:v.spanCountBeforeProcessing)||0,E=y.spans?y.spans.length:0,k=j-E;k>0&&this.recordDroppedEvent("before_send","span",k)}const w=y.transaction_info;if(u&&w&&y.transaction!==t.transaction){const j="custom";y.transaction_info={...w,source:j}}return this.sendEvent(y,n),y}).then(null,y=>{throw a1(y)||s1(y)?y:(this.captureException(y,{mechanism:{handled:!1,type:"internal"},data:{__sentry__:!0},originalException:y}),Nf(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${y}`))})}_process(t,n){this._numProcessing++,this._promiseBuffer.add(t).then(s=>(this._numProcessing--,s),s=>(this._numProcessing--,s===Mb&&this.recordDroppedEvent("queue_overflow",n),s))}_clearOutcomes(){const t=this._outcomes;return this._outcomes={},Object.entries(t).map(([n,s])=>{const[a,i]=n.split(":");return{reason:a,category:i,quantity:s}})}_flushOutcomes(){pe&&W.log("Flushing outcomes...");const t=this._clearOutcomes();if(t.length===0){pe&&W.log("No outcomes to send");return}if(!this._dsn){pe&&W.log("No dsn provided, will not send outcomes");return}pe&&W.log("Sending outcomes:",t);const n=E$(t,this._options.tunnel&&ba(this._dsn));this.sendEnvelope(n)}}function o1(e){return e==="replay_event"?"replay":e||"error"}function P$(e,t){const n=`${t} must return \`null\` or a valid event.`;if(Ao(e))return e.then(s=>{if(!Is(s)&&s!==null)throw Nf(n);return s},s=>{throw Nf(`${t} rejected with ${s}`)});if(!Is(e)&&e!==null)throw Nf(n);return e}function A$(e,t,n,s){const{beforeSend:a,beforeSendTransaction:i,beforeSendSpan:l,ignoreSpans:u}=t;let d=n;if(fy(d)&&a)return a(d,s);if(XE(d)){if(l||u){const h=C$(d);if(u!=null&&u.length&&Zf(h,u))return null;if(l){const p=l(h);p?d=hd(n,T$(p)):oy()}if(d.spans){const p=[],m=d.spans;for(const y of m){if(u!=null&&u.length&&Zf(y,u)){JM(m,y);continue}if(l){const b=l(y);b?p.push(b):(oy(),p.push(y))}else p.push(y)}const g=d.spans.length-p.length;g&&e.recordDroppedEvent("before_send","span",g),d.spans=p}}if(i){if(d.spans){const h=d.spans.length;d.sdkProcessingMetadata={...n.sdkProcessingMetadata,spanCountBeforeProcessing:h}}return i(d,s)}}return d}function fy(e){return e.type===void 0}function XE(e){return e.type==="transaction"}function O$(e){let t=0;return e.name&&(t+=e.name.length*2),t+=8,t+ZE(e.attributes)}function M$(e){let t=0;return e.message&&(t+=e.message.length*2),t+ZE(e.attributes)}function ZE(e){if(!e)return 0;let t=0;return Object.values(e).forEach(n=>{Array.isArray(n)?t+=n.length*l1(n[0]):hi(n)?t+=l1(n):t+=100}),t}function l1(e){return typeof e=="string"?e.length*2:typeof e=="number"?8:typeof e=="boolean"?4:0}function L$(e,t){t.debug===!0&&(pe?W.enable():wi(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),We().update(t.initialScope);const s=new e(t);return eC(s),s.init(),s}function eC(e){We().setClient(e)}const Jx=100,Qx=5e3,$$=36e5;function D$(e){function t(...n){pe&&W.log("[Offline]:",...n)}return n=>{const s=e(n);if(!n.createStore)throw new Error("No `createStore` function was provided");const a=n.createStore(n);let i=Qx,l;function u(m,g,y){return BN(m,["client_report"])?!1:n.shouldStore?n.shouldStore(m,g,y):!0}function d(m){l&&clearTimeout(l),l=setTimeout(async()=>{l=void 0;const g=await a.shift();g&&(t("Attempting to send previously queued event"),g[0].sent_at=new Date().toISOString(),p(g,!0).catch(y=>{t("Failed to retry sending",y)}))},m),typeof l!="number"&&l.unref&&l.unref()}function h(){l||(d(i),i=Math.min(i*2,$$))}async function p(m,g=!1){var y,b;if(!g&&BN(m,["replay_event","replay_recording"]))return await a.push(m),d(Jx),{};try{if(n.shouldSend&&await n.shouldSend(m)===!1)throw new Error("Envelope not sent because `shouldSend` callback returned false");const w=await s.send(m);let v=Jx;if(w){if((y=w.headers)!=null&&y["retry-after"])v=zE(w.headers["retry-after"]);else if((b=w.headers)!=null&&b["x-sentry-rate-limits"])v=6e4;else if((w.statusCode||0)>=400)return w}return d(v),i=Qx,w}catch(w){if(await u(m,w,i))return g?await a.unshift(m):await a.push(m),h(),t("Error sending. Event queued.",w),{};throw w}}return n.flushAtStartup&&h(),{send:p,flush:m=>(m===void 0&&(i=Qx,d(Jx)),s.flush(m))}}}const Sf="MULTIPLEXED_TRANSPORT_EXTRA_KEY";function tC(e,t){let n;return vo(e,(s,a)=>(t.includes(a)&&(n=Array.isArray(s)?s[1]:void 0),!!n)),n}function F$(e,t){return n=>{const s=e(n);return{...s,send:async a=>{const i=tC(a,["event","transaction","profile","replay_event"]);return i&&(i.release=t),s.send(a)}}}}function U$(e,t){return bs(t?{...e[0],dsn:t}:e[0],e[1])}function q$(e,t){return n=>{const s=e(n),a=new Map,i=t||(h=>{var m;const p=h.getEvent();return(m=p==null?void 0:p.extra)!=null&&m[Sf]&&Array.isArray(p.extra[Sf])?p.extra[Sf]:[]});function l(h,p){const m=p?`${h}:${p}`:h;let g=a.get(m);if(!g){const y=oE(h);if(!y)return;const b=FE(y,n.tunnel);g=p?F$(e,p)({...n,url:b}):e({...n,url:b}),a.set(m,g)}return[h,g]}async function u(h){function p(b){const w=b!=null&&b.length?b:["event"];return tC(h,w)}const m=i({envelope:h,getEvent:p}).map(b=>typeof b=="string"?l(b,void 0):l(b.dsn,b.release)).filter(b=>!!b),g=m.length?m:[["",s]];return(await Promise.all(g.map(([b,w])=>w.send(U$(h,b)))))[0]}async function d(h){const p=[...a.values(),s];return(await Promise.all(p.map(g=>g.flush(h)))).every(g=>g)}return{send:u,flush:d}}}const B$="thismessage:/";function $b(e){return"isRelative"in e}function Db(e,t){const n=e.indexOf("://")<=0&&e.indexOf("//")!==0,s=n?B$:void 0;try{if("canParse"in URL&&!URL.canParse(e,s))return;const a=new URL(e,s);return n?{isRelative:n,pathname:a.pathname,search:a.search,hash:a.hash}:a}catch{}}function H$(e){if($b(e))return e.pathname;const t=new URL(e);return t.search="",t.hash="",["80","443"].includes(t.port)&&(t.port=""),t.password&&(t.password="%filtered%"),t.username&&(t.username="%filtered%"),t.toString()}function po(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",s=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:s,relative:t[5]+n+s}}function nC(e){return e.split(/[?#]/,1)[0]}function rC(e,t){const n=t==null?void 0:t.getDsn(),s=t==null?void 0:t.getOptions().tunnel;return W$(e,n)||z$(e,s)}function z$(e,t){return t?c1(e)===c1(t):!1}function W$(e,t){const n=Db(e);return!n||$b(n)?!1:t?n.host.includes(t.host)&&/(^|&|\?)sentry_key=/.test(n.search):!1}function c1(e){return e[e.length-1]==="/"?e.slice(0,-1):e}function sC(e,...t){const n=new String(String.raw(e,...t));return n.__sentry_template_string__=e.join("\0").replace(/%/g,"%%").replace(/\0/g,"%s"),n.__sentry_template_values__=t,n}const G$=sC;function V$(e){var t;"aggregates"in e?((t=e.attrs)==null?void 0:t.ip_address)===void 0&&(e.attrs={...e.attrs,ip_address:"{{auto}}"}):e.ipAddress===void 0&&(e.ipAddress="{{auto}}")}function aC(e,t,n=[t],s="npm"){const a=e._metadata||{};a.sdk||(a.sdk={name:`sentry.javascript.${t}`,packages:n.map(i=>({name:`${s}:@sentry/${i}`,version:sa})),version:sa}),e._metadata=a}function Fb(e={}){const t=e.client||ye();if(!ME()||!t)return{};const n=ya(),s=Ni(n);if(s.getTraceData)return s.getTraceData(e);const a=e.scope||We(),i=e.span||Ht(),l=i?xE(i):K$(a),u=i?ps(i):Nb(t,a),d=iE(u);if(!dE.test(l))return W.warn("Invalid sentry-trace data. Cannot generate trace data"),{};const p={"sentry-trace":l,baggage:d};return e.propagateTraceparent&&(p.traceparent=i?WM(i):Y$(a)),p}function K$(e){const{traceId:t,sampled:n,propagationSpanId:s}=e.getPropagationContext();return fE(t,s,n)}function Y$(e){const{traceId:t,sampled:n,propagationSpanId:s}=e.getPropagationContext();return mE(t,s,n)}function J$(e,t,n){let s,a,i;const l=n!=null&&n.maxWait?Math.max(n.maxWait,t):0,u=(n==null?void 0:n.setTimeoutImpl)||setTimeout;function d(){return h(),s=e(),s}function h(){a!==void 0&&clearTimeout(a),i!==void 0&&clearTimeout(i),a=i=void 0}function p(){return a!==void 0||i!==void 0?d():s}function m(){return a&&clearTimeout(a),a=u(d,t),l&&i===void 0&&(i=u(d,l)),s}return m.cancel=h,m.flush=p,m}const Q$=100;function gs(e,t){const n=ye(),s=an();if(!n)return;const{beforeBreadcrumb:a=null,maxBreadcrumbs:i=Q$}=n.getOptions();if(i<=0)return;const u={timestamp:Mo(),...e},d=a?wi(()=>a(u,t)):u;d!==null&&(n.emit&&n.emit("beforeAddBreadcrumb",d,t),s.addBreadcrumb(d,i))}let u1;const X$="FunctionToString",d1=new WeakMap,Z$=(()=>({name:X$,setupOnce(){u1=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=bb(this),n=d1.has(ye())&&t!==void 0?t:this;return u1.apply(n,e)}}catch{}},setup(e){d1.set(e,!0)}})),iC=Z$,e8=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,/^Can't find variable: gmo$/,/^undefined is not an object \(evaluating 'a\.[A-Z]'\)$/,`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/,/^Java exception was raised during method invocation$/],t8="EventFilters",oC=(e={})=>{let t;return{name:t8,setup(n){const s=n.getOptions();t=h1(e,s)},processEvent(n,s,a){if(!t){const i=a.getOptions();t=h1(e,i)}return n8(n,t)?null:n}}},lC=((e={})=>({...oC(e),name:"InboundFilters"}));function h1(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:e8],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[]]}}function n8(e,t){if(e.type){if(e.type==="transaction"&&s8(e,t.ignoreTransactions))return pe&&W.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${Ki(e)}`),!0}else{if(r8(e,t.ignoreErrors))return pe&&W.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${Ki(e)}`),!0;if(l8(e))return pe&&W.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${Ki(e)}`),!0;if(a8(e,t.denyUrls))return pe&&W.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${Ki(e)}.
Url: ${sm(e)}`),!0;if(!i8(e,t.allowUrls))return pe&&W.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${Ki(e)}.
Url: ${sm(e)}`),!0}return!1}function r8(e,t){return t!=null&&t.length?YE(e).some(n=>hs(n,t)):!1}function s8(e,t){if(!(t!=null&&t.length))return!1;const n=e.transaction;return n?hs(n,t):!1}function a8(e,t){if(!(t!=null&&t.length))return!1;const n=sm(e);return n?hs(n,t):!1}function i8(e,t){if(!(t!=null&&t.length))return!0;const n=sm(e);return n?hs(n,t):!0}function o8(e=[]){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&n.filename!=="<anonymous>"&&n.filename!=="[native code]")return n.filename||null}return null}function sm(e){var t,n;try{const s=[...((t=e.exception)==null?void 0:t.values)??[]].reverse().find(i=>{var l,u,d;return((l=i.mechanism)==null?void 0:l.parent_id)===void 0&&((d=(u=i.stacktrace)==null?void 0:u.frames)==null?void 0:d.length)}),a=(n=s==null?void 0:s.stacktrace)==null?void 0:n.frames;return a?o8(a):null}catch{return pe&&W.error(`Cannot extract url for event ${Ki(e)}`),null}}function l8(e){var t,n;return(n=(t=e.exception)==null?void 0:t.values)!=null&&n.length?!e.message&&!e.exception.values.some(s=>s.stacktrace||s.type&&s.type!=="Error"||s.value):!1}function c8(e,t,n,s,a,i){var u;if(!((u=a.exception)!=null&&u.values)||!i||!ha(i.originalException,Error))return;const l=a.exception.values.length>0?a.exception.values[a.exception.values.length-1]:void 0;l&&(a.exception.values=my(e,t,s,i.originalException,n,a.exception.values,l,0))}function my(e,t,n,s,a,i,l,u){if(i.length>=n+1)return i;let d=[...i];if(ha(s[a],Error)){f1(l,u);const h=e(t,s[a]),p=d.length;m1(h,a,p,u),d=my(e,t,n,s[a],a,[h,...d],h,p)}return Array.isArray(s.errors)&&s.errors.forEach((h,p)=>{if(ha(h,Error)){f1(l,u);const m=e(t,h),g=d.length;m1(m,`errors[${p}]`,g,u),d=my(e,t,n,h,a,[m,...d],m,g)}}),d}function f1(e,t){e.mechanism={handled:!0,type:"auto.core.linked_errors",...e.mechanism,...e.type==="AggregateError"&&{is_exception_group:!0},exception_id:t}}function m1(e,t,n,s){e.mechanism={handled:!0,...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:s}}const cC=new Map,p1=new Set;function u8(e){if(Ae._sentryModuleMetadata)for(const t of Object.keys(Ae._sentryModuleMetadata)){const n=Ae._sentryModuleMetadata[t];if(p1.has(t))continue;p1.add(t);const s=e(t);for(const a of s.reverse())if(a.filename){cC.set(a.filename,n);break}}}function d8(e,t){return u8(e),cC.get(t)}function uC(e,t){var n,s;(s=(n=t.exception)==null?void 0:n.values)==null||s.forEach(a=>{var i,l;(l=(i=a.stacktrace)==null?void 0:i.frames)==null||l.forEach(u=>{if(!u.filename||u.module_metadata)return;const d=d8(e,u.filename);d&&(u.module_metadata=d)})})}function dC(e){var t,n;(n=(t=e.exception)==null?void 0:t.values)==null||n.forEach(s=>{var a,i;(i=(a=s.stacktrace)==null?void 0:a.frames)==null||i.forEach(l=>{delete l.module_metadata})})}const h8=()=>({name:"ModuleMetadata",setup(e){e.on("beforeEnvelope",t=>{vo(t,(n,s)=>{if(s==="event"){const a=Array.isArray(n)?n[1]:void 0;a&&(dC(a),n[1]=a)}})}),e.on("applyFrameMetadata",t=>{if(t.type)return;const n=e.getOptions().stackParser;uC(n,t)})}});function Ub(e){const t="console";_i(t,e),ji(t,f8)}function f8(){"console"in Ae&&mb.forEach(function(e){e in Ae.console&&Nn(Ae.console,e,function(t){return Jf[e]=t,function(...n){Br("console",{args:n,level:e});const a=Jf[e];a==null||a.apply(Ae.console,n)}})})}function am(e){return e==="warn"?"warning":["fatal","error","warning","log","info","debug"].includes(e)?e:"log"}const m8="CaptureConsole",p8=((e={})=>{const t=e.levels||mb,n=e.handled??!0;return{name:m8,setup(s){"console"in Ae&&Ub(({args:a,level:i})=>{ye()!==s||!t.includes(i)||x8(a,i,n)})}}}),g8=p8;function x8(e,t,n){const s=am(t),a=new Error,i={level:am(t),extra:{arguments:e}};hr(l=>{if(l.addEventProcessor(h=>(h.logger="console",fa(h,{handled:n,type:"auto.core.capture_console"}),h)),t==="assert"){if(!e[0]){const h=`Assertion failed: ${Qf(e.slice(1)," ")||"console.assert"}`;l.setExtra("arguments",e.slice(1)),l.captureMessage(h,s,{captureContext:i,syntheticException:a})}return}const u=e.find(h=>h instanceof Error);if(u){dt(u,i);return}const d=Qf(e," ");l.captureMessage(d,s,{captureContext:i,syntheticException:a})})}const y8="Dedupe",b8=(()=>{let e;return{name:y8,processEvent(t){if(t.type)return t;try{if(v8(t,e))return pe&&W.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return e=t}}}),hC=b8;function v8(e,t){return t?!!(w8(e,t)||_8(e,t)):!1}function w8(e,t){const n=e.message,s=t.message;return!(!n&&!s||n&&!s||!n&&s||n!==s||!mC(e,t)||!fC(e,t))}function _8(e,t){const n=g1(t),s=g1(e);return!(!n||!s||n.type!==s.type||n.value!==s.value||!mC(e,t)||!fC(e,t))}function fC(e,t){let n=ny(e),s=ny(t);if(!n&&!s)return!0;if(n&&!s||!n&&s||(n=n,s=s,s.length!==n.length))return!1;for(let a=0;a<s.length;a++){const i=s[a],l=n[a];if(i.filename!==l.filename||i.lineno!==l.lineno||i.colno!==l.colno||i.function!==l.function)return!1}return!0}function mC(e,t){let n=e.fingerprint,s=t.fingerprint;if(!n&&!s)return!0;if(n&&!s||!n&&s)return!1;n=n,s=s;try{return n.join("")===s.join("")}catch{return!1}}function g1(e){var t,n;return(n=(t=e.exception)==null?void 0:t.values)==null?void 0:n[0]}const j8="ExtraErrorData",N8=((e={})=>{const{depth:t=3,captureErrorCause:n=!0}=e;return{name:j8,processEvent(s,a,i){const{maxValueLength:l}=i.getOptions();return k8(s,a,t,n,l)}}}),S8=N8;function k8(e,t={},n,s,a){if(!t.originalException||!aa(t.originalException))return e;const i=t.originalException.name||t.originalException.constructor.name,l=pC(t.originalException,s,a);if(l){const u={...e.contexts},d=vr(l,n);return Is(d)&&(hn(d,"__sentry_skip_normalization__",!0),u[i]=d),{...e,contexts:u}}return e}function pC(e,t,n){try{const s=["name","message","stack","line","column","fileName","lineNumber","columnNumber","toJSON"],a={};for(const i of Object.keys(e)){if(s.indexOf(i)!==-1)continue;const l=e[i];a[i]=aa(l)||typeof l=="string"?n?Hu(`${l}`,n):`${l}`:l}if(t&&e.cause!==void 0)if(aa(e.cause)){const i=e.cause.name||e.cause.constructor.name;a.cause={[i]:pC(e.cause,!1,n)}}else a.cause=e.cause;if(typeof e.toJSON=="function"){const i=e.toJSON();for(const l of Object.keys(i)){const u=i[l];a[l]=aa(u)?u.toString():u}}return a}catch(s){pe&&W.error("Unable to extract extra data from the Error object:",s)}return null}function E8(e,t){let n=0;for(let s=e.length-1;s>=0;s--){const a=e[s];a==="."?e.splice(s,1):a===".."?(e.splice(s,1),n++):n&&(e.splice(s,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}const C8=/^(\S+:\\|\/?)([\s\S]*?)((?:\.{1,2}|[^/\\]+?|)(\.[^./\\]*|))(?:[/\\]*)$/;function T8(e){const t=e.length>1024?`<truncated>${e.slice(-1024)}`:e,n=C8.exec(t);return n?n.slice(1):[]}function x1(...e){let t="",n=!1;for(let s=e.length-1;s>=-1&&!n;s--){const a=s>=0?e[s]:"/";a&&(t=`${a}/${t}`,n=a.charAt(0)==="/")}return t=E8(t.split("/").filter(s=>!!s),!n).join("/"),(n?"/":"")+t||"."}function y1(e){let t=0;for(;t<e.length&&e[t]==="";t++);let n=e.length-1;for(;n>=0&&e[n]==="";n--);return t>n?[]:e.slice(t,n-t+1)}function R8(e,t){e=x1(e).slice(1),t=x1(t).slice(1);const n=y1(e.split("/")),s=y1(t.split("/")),a=Math.min(n.length,s.length);let i=a;for(let u=0;u<a;u++)if(n[u]!==s[u]){i=u;break}let l=[];for(let u=i;u<n.length;u++)l.push("..");return l=l.concat(s.slice(i)),l.join("/")}function I8(e,t){return T8(e)[2]||""}const P8="RewriteFrames",A8=(e={})=>{const t=e.root,n=e.prefix||"app:///",s="window"in Ae&&!!Ae.window,a=e.iteratee||O8({isBrowser:s,root:t,prefix:n});function i(u){try{return{...u,exception:{...u.exception,values:u.exception.values.map(d=>({...d,...d.stacktrace&&{stacktrace:l(d.stacktrace)}}))}}}catch{return u}}function l(u){var d;return{...u,frames:(d=u==null?void 0:u.frames)==null?void 0:d.map(h=>a(h))}}return{name:P8,processEvent(u){let d=u;return u.exception&&Array.isArray(u.exception.values)&&(d=i(d)),d}}};function O8({isBrowser:e,root:t,prefix:n}){return s=>{if(!s.filename)return s;const a=/^[a-zA-Z]:\\/.test(s.filename)||s.filename.includes("\\")&&!s.filename.includes("/"),i=/^\//.test(s.filename);if(e){if(t){const l=s.filename;l.indexOf(t)===0&&(s.filename=l.replace(t,n))}}else if(a||i){const l=a?s.filename.replace(/^[a-zA-Z]:/,"").replace(/\\/g,"/"):s.filename,u=t?R8(t,l):I8(l);s.filename=`${n}${u}`}return s}}const M8=["reauthenticate","signInAnonymously","signInWithOAuth","signInWithIdToken","signInWithOtp","signInWithPassword","signInWithSSO","signOut","signUp","verifyOtp"],L8=["createUser","deleteUser","listUsers","getUserById","updateUserById","inviteUserByEmail"],$8={eq:"eq",neq:"neq",gt:"gt",gte:"gte",lt:"lt",lte:"lte",like:"like","like(all)":"likeAllOf","like(any)":"likeAnyOf",ilike:"ilike","ilike(all)":"ilikeAllOf","ilike(any)":"ilikeAnyOf",is:"is",in:"in",cs:"contains",cd:"containedBy",sr:"rangeGt",nxl:"rangeGte",sl:"rangeLt",nxr:"rangeLte",adj:"rangeAdjacent",ov:"overlaps",fts:"",plfts:"plain",phfts:"phrase",wfts:"websearch",not:"not"},gC=["select","insert","upsert","update","delete"];function Vm(e){try{e.__SENTRY_INSTRUMENTED__=!0}catch{}}function Km(e){try{return e.__SENTRY_INSTRUMENTED__}catch{return!1}}function D8(e,t={}){var n;switch(e){case"GET":return"select";case"POST":return(n=t.Prefer)!=null&&n.includes("resolution=")?"upsert":"insert";case"PATCH":return"update";case"DELETE":return"delete";default:return"<unknown-op>"}}function F8(e,t){if(t===""||t==="*")return"select(*)";if(e==="select")return`select(${t})`;if(e==="or"||e.endsWith(".or"))return`${e}${t}`;const[n,...s]=t.split(".");let a;return n!=null&&n.startsWith("fts")?a="textSearch":n!=null&&n.startsWith("plfts")?a="textSearch[plain]":n!=null&&n.startsWith("phfts")?a="textSearch[phrase]":n!=null&&n.startsWith("wfts")?a="textSearch[websearch]":a=n&&$8[n]||"filter",`${a}(${e}, ${s.join(".")})`}function b1(e,t=!1){return new Proxy(e,{apply(n,s,a){return Ms({name:`auth ${t?"(admin) ":""}${e.name}`,attributes:{[Ge]:"auto.db.supabase",[_t]:"db","db.system":"postgresql","db.operation":`auth.${t?"admin.":""}${e.name}`}},i=>Reflect.apply(n,s,a).then(l=>(l&&typeof l=="object"&&"error"in l&&l.error?(i.setStatus({code:nt}),dt(l.error,{mechanism:{handled:!1,type:"auto.db.supabase.auth"}})):i.setStatus({code:qm}),i.end(),l)).catch(l=>{throw i.setStatus({code:nt}),i.end(),dt(l,{mechanism:{handled:!1,type:"auto.db.supabase.auth"}}),l}).then(...a))}})}function U8(e){const t=e.auth;if(!(!t||Km(e.auth))){for(const n of M8){const s=t[n];s&&typeof e.auth[n]=="function"&&(e.auth[n]=b1(s))}for(const n of L8){const s=t.admin[n];s&&typeof e.auth.admin[n]=="function"&&(e.auth.admin[n]=b1(s,!0))}Vm(e.auth)}}function q8(e){Km(e.prototype.from)||(e.prototype.from=new Proxy(e.prototype.from,{apply(t,n,s){const a=Reflect.apply(t,n,s),i=a.constructor;return H8(i),a}}),Vm(e.prototype.from))}function B8(e){Km(e.prototype.then)||(e.prototype.then=new Proxy(e.prototype.then,{apply(t,n,s){var y;const a=gC,i=n,l=D8(i.method,i.headers);if(!a.includes(l)||!((y=i==null?void 0:i.url)!=null&&y.pathname)||typeof i.url.pathname!="string")return Reflect.apply(t,n,s);const u=i.url.pathname.split("/"),d=u.length>0?u[u.length-1]:"",h=[];for(const[b,w]of i.url.searchParams.entries())h.push(F8(b,w));const p=Object.create(null);if(Is(i.body))for(const[b,w]of Object.entries(i.body))p[b]=w;const m=`${l==="select"?"":`${l}${p?"(...) ":""}`}${h.join(" ")} from(${d})`,g={"db.table":d,"db.schema":i.schema,"db.url":i.url.origin,"db.sdk":i.headers["X-Client-Info"],"db.system":"postgresql","db.operation":l,[Ge]:"auto.db.supabase",[_t]:"db"};return h.length&&(g["db.query"]=h),Object.keys(p).length&&(g["db.body"]=p),Ms({name:m,attributes:g},b=>Reflect.apply(t,n,[]).then(w=>{if(b&&(w&&typeof w=="object"&&"status"in w&&Wu(b,w.status||500),b.end()),w.error){const E=new Error(w.error.message);w.error.code&&(E.code=w.error.code),w.error.details&&(E.details=w.error.details);const k={};h.length&&(k.query=h),Object.keys(p).length&&(k.body=p),dt(E,S=>(S.addEventProcessor(P=>(fa(P,{handled:!1,type:"auto.db.supabase.postgres"}),P)),S.setContext("supabase",k),S))}const v={type:"supabase",category:`db.${l}`,message:m},j={};return h.length&&(j.query=h),Object.keys(p).length&&(j.body=p),Object.keys(j).length&&(v.data=j),gs(v),w},w=>{throw b&&(Wu(b,500),b.end()),w}).then(...s))}}),Vm(e.prototype.then))}function H8(e){for(const t of gC)Km(e.prototype[t])||(e.prototype[t]=new Proxy(e.prototype[t],{apply(n,s,a){const i=Reflect.apply(n,s,a),l=i.constructor;return pe&&W.log(`Instrumenting ${t} operation's PostgRESTFilterBuilder`),B8(l),i}}),Vm(e.prototype[t]))}const xC=e=>{if(!e){pe&&W.warn("Supabase integration was not installed because no Supabase client was provided.");return}const t=e.constructor===Function?e:e.constructor;q8(t),U8(e)},z8="Supabase",W8=(e=>({setupOnce(){xC(e)},name:z8})),G8=e=>W8(e.supabaseClient),V8=10,K8="ZodErrors";function Y8(e){return aa(e)&&e.name==="ZodError"&&Array.isArray(e.issues)}function J8(e){return{...e,path:"path"in e&&Array.isArray(e.path)?e.path.join("."):void 0,keys:"keys"in e?JSON.stringify(e.keys):void 0,unionErrors:"unionErrors"in e?JSON.stringify(e.unionErrors):void 0}}function Q8(e){return e.map(t=>typeof t=="number"?"<array>":t).join(".")}function X8(e){const t=new Set;for(const s of e.issues){const a=Q8(s.path);a.length>0&&t.add(a)}const n=Array.from(t);if(n.length===0){let s="variable";if(e.issues.length>0){const a=e.issues[0];a!==void 0&&"expected"in a&&typeof a.expected=="string"&&(s=a.expected)}return`Failed to validate ${s}`}return`Failed to validate keys: ${Hu(n.join(", "),100)}`}function Z8(e,t=!1,n,s){var a;if(!((a=n.exception)!=null&&a.values)||!s.originalException||!Y8(s.originalException)||s.originalException.issues.length===0)return n;try{const l=(t?s.originalException.issues:s.originalException.issues.slice(0,e)).map(J8);return t&&(Array.isArray(s.attachments)||(s.attachments=[]),s.attachments.push({filename:"zod_issues.json",data:JSON.stringify({issues:l})})),{...n,exception:{...n.exception,values:[{...n.exception.values[0],value:X8(s.originalException)},...n.exception.values.slice(1)]},extra:{...n.extra,"zoderror.issues":l.slice(0,e)}}}catch(i){return{...n,extra:{...n.extra,"zoderrors sentry integration parse error":{message:"an exception was thrown while processing ZodError within applyZodErrorsToEvent()",error:i instanceof Error?`${i.name}: ${i.message}
${i.stack}`:"unknown"}}}}}const eD=((e={})=>{const t=e.limit??V8;return{name:K8,processEvent(n,s){return Z8(t,e.saveZodIssuesAsAttachment,n,s)}}}),tD=eD,nD=e=>({name:"ThirdPartyErrorsFilter",setup(t){t.on("beforeEnvelope",n=>{vo(n,(s,a)=>{if(a==="event"){const i=Array.isArray(s)?s[1]:void 0;i&&(dC(i),s[1]=i)}})}),t.on("applyFrameMetadata",n=>{if(n.type)return;const s=t.getOptions().stackParser;uC(s,n)})},processEvent(t){const n=rD(t);if(n){const s=e.behaviour==="drop-error-if-contains-third-party-frames"||e.behaviour==="apply-tag-if-contains-third-party-frames"?"some":"every";if(n[s](i=>!i.some(l=>e.filterKeys.includes(l)))){if(e.behaviour==="drop-error-if-contains-third-party-frames"||e.behaviour==="drop-error-if-exclusively-contains-third-party-frames")return null;t.tags={...t.tags,third_party_code:!0}}}return t}});function rD(e){const t=ny(e);if(t)return t.filter(n=>!!n.filename&&(n.lineno??n.colno)!=null).map(n=>n.module_metadata?Object.keys(n.module_metadata).filter(s=>s.startsWith(v1)).map(s=>s.slice(v1.length)):[])}const v1="_sentryBundlerPluginAppKey:",sD=100,aD=10,Jh="flag.evaluation.";function _c(e){const n=We().getScopeData().contexts.flags,s=n?n.values:[];return s.length&&(e.contexts===void 0&&(e.contexts={}),e.contexts.flags={values:[...s]}),e}function _o(e,t,n=sD){const s=We().getScopeData().contexts;s.flags||(s.flags={values:[]});const a=s.flags.values;iD(a,e,t,n)}function iD(e,t,n,s){if(typeof n!="boolean")return;if(e.length>s){pe&&W.error(`[Feature Flags] insertToFlagBuffer called on a buffer larger than maxSize=${s}`);return}const a=e.findIndex(i=>i.flag===t);a!==-1&&e.splice(a,1),e.length===s&&e.shift(),e.push({flag:t,result:n})}function jo(e,t,n=aD){if(typeof t!="boolean")return;const s=Ht();if(!s)return;const a=Te(s).data;if(`${Jh}${e}`in a){s.setAttribute(`${Jh}${e}`,t);return}Object.keys(a).filter(l=>l.startsWith(Jh)).length<n&&s.setAttribute(`${Jh}${e}`,t)}const oD=()=>({name:"FeatureFlags",processEvent(e,t,n){return _c(e)},addFeatureFlag(e,t){_o(e,t),jo(e,t)}}),lD=({growthbookClass:e})=>({name:"GrowthBook",setupOnce(){const t=e.prototype;typeof t.isOn=="function"&&Nn(t,"isOn",w1),typeof t.getFeatureValue=="function"&&Nn(t,"getFeatureValue",w1)},processEvent(t,n,s){return _c(t)}});function w1(e){return function(...t){const n=t[0],s=e.apply(this,t);return typeof n=="string"&&typeof s=="boolean"&&(_o(n,s),jo(n,s)),s}}function cD(e,t,n,s,a){if(!e.fetchData)return;const{method:i,url:l}=e.fetchData,u=Hr()&&t(l);if(e.endTimestamp&&u){const y=e.fetchData.__span;if(!y)return;const b=s[y];b&&(hD(b,e),uD(b,e,a),delete s[y]);return}const{spanOrigin:d="auto.http.browser",propagateTraceparent:h=!1}=typeof a=="object"?a:{spanOrigin:a},p=!!Ht(),m=u&&p?zr(mD(l,i,d)):new ma;if(e.fetchData.__span=m.spanContext().spanId,s[m.spanContext().spanId]=m,n(e.fetchData.url)){const y=e.args[0],b=e.args[1]||{},w=dD(y,b,Hr()&&p?m:void 0,h);w&&(e.args[1]=b,b.headers=w)}const g=ye();if(g){const y={input:e.args,response:e.response,startTimestamp:e.startTimestamp,endTimestamp:e.endTimestamp};g.emit("beforeOutgoingRequestSpan",m,y)}return m}function uD(e,t,n){var a;const s=typeof n=="object"&&n!==null?n.onRequestSpanEnd:void 0;s==null||s(e,{headers:(a=t.response)==null?void 0:a.headers,error:t.error})}function dD(e,t,n,s){const a=Fb({span:n,propagateTraceparent:s}),i=a["sentry-trace"],l=a.baggage,u=a.traceparent;if(!i)return;const d=t.headers||(xb(e)?e.headers:void 0);if(d)if(fD(d)){const h=new Headers(d);if(h.get("sentry-trace")||h.set("sentry-trace",i),s&&u&&!h.get("traceparent")&&h.set("traceparent",u),l){const p=h.get("baggage");p?Qh(p)||h.set("baggage",`${p},${l}`):h.set("baggage",l)}return h}else if(Array.isArray(d)){const h=[...d];d.find(m=>m[0]==="sentry-trace")||h.push(["sentry-trace",i]),s&&u&&!d.find(m=>m[0]==="traceparent")&&h.push(["traceparent",u]);const p=d.find(m=>m[0]==="baggage"&&Qh(m[1]));return l&&!p&&h.push(["baggage",l]),h}else{const h="sentry-trace"in d?d["sentry-trace"]:void 0,p="traceparent"in d?d.traceparent:void 0,m="baggage"in d?d.baggage:void 0,g=m?Array.isArray(m)?[...m]:[m]:[],y=m&&(Array.isArray(m)?m.find(w=>Qh(w)):Qh(m));l&&!y&&g.push(l);const b={...d,"sentry-trace":h??i,baggage:g.length>0?g.join(","):void 0};return s&&u&&!p&&(b.traceparent=u),b}else return{...a}}function hD(e,t){var n,s;if(t.response){Wu(e,t.response.status);const a=(s=(n=t.response)==null?void 0:n.headers)==null?void 0:s.get("content-length");if(a){const i=parseInt(a);i>0&&e.setAttribute("http.response_content_length",i)}}else t.error&&e.setStatus({code:nt,message:"internal_error"});e.end()}function Qh(e){return e.split(",").some(t=>t.trim().startsWith(wb))}function fD(e){return typeof Headers<"u"&&ha(e,Headers)}function mD(e,t,n){const s=Db(e);return{name:s?`${t} ${H$(s)}`:t,attributes:pD(e,s,t,n)}}function pD(e,t,n,s){const a={url:e,type:"fetch","http.method":n,[Ge]:s,[_t]:"http.client"};return t&&($b(t)||(a["http.url"]=t.href,a["server.address"]=t.host),t.search&&(a["http.query"]=t.search),t.hash&&(a["http.fragment"]=t.hash)),a}function yC(e,t={},n=We()){const{message:s,name:a,email:i,url:l,source:u,associatedEventId:d,tags:h}=e,p={contexts:{feedback:{contact_email:i,name:a,message:s,url:l,source:u,associated_event_id:d}},type:"feedback",level:"info",tags:h},m=(n==null?void 0:n.getClient())||ye();return m&&m.emit("beforeSendFeedback",p,t),n.captureEvent(p,t)}function jc(e,t,n,s,a){rm({level:e,message:t,attributes:n,severityNumber:a},s)}function gD(e,t,{scope:n}={}){jc("trace",e,t,n)}function xD(e,t,{scope:n}={}){jc("debug",e,t,n)}function yD(e,t,{scope:n}={}){jc("info",e,t,n)}function bD(e,t,{scope:n}={}){jc("warn",e,t,n)}function vD(e,t,{scope:n}={}){jc("error",e,t,n)}function wD(e,t,{scope:n}={}){jc("fatal",e,t,n)}const _D=Object.freeze(Object.defineProperty({__proto__:null,debug:xD,error:vD,fatal:wD,fmt:G$,info:yD,trace:gD,warn:bD},Symbol.toStringTag,{value:"Module"}));function py(e,t,n){return"util"in Ae&&typeof Ae.util.format=="function"?Ae.util.format(...e):jD(e,t,n)}function jD(e,t,n){return e.map(s=>hi(s)?String(s):JSON.stringify(vr(s,t,n))).join(" ")}function ND(e){return/%[sdifocO]/.test(e)}function SD(e,t){const n={},s=new Array(t.length).fill("{}").join(" ");return n["sentry.message.template"]=`${e} ${s}`,t.forEach((a,i)=>{n[`sentry.message.parameter.${i}`]=a}),n}const kD="ConsoleLogs",_1={[Ge]:"auto.log.console"},ED=((e={})=>{const t=e.levels||mb;return{name:kD,setup(n){const{enableLogs:s,normalizeDepth:a=3,normalizeMaxBreadth:i=1e3}=n.getOptions();if(!s){pe&&W.warn("`enableLogs` is not enabled, ConsoleLogs integration disabled");return}Ub(({args:l,level:u})=>{if(ye()!==n||!t.includes(u))return;const d=l[0],h=l.slice(1);if(u==="assert"){if(!d){const y=h.length>0?`Assertion failed: ${py(h,a,i)}`:"Assertion failed";rm({level:"error",message:y,attributes:_1})}return}const p=u==="log",m=l.length>1&&typeof l[0]=="string"&&!ND(l[0]),g={..._1,...m?SD(d,h):{}};rm({level:p?"info":u,message:py(l,a,i),severityNumber:p?10:void 0,attributes:g})})}}}),bC=ED;function qb(e,t,n,s){j$({type:e,name:t,value:n,unit:s==null?void 0:s.unit,attributes:s==null?void 0:s.attributes},{scope:s==null?void 0:s.scope})}function CD(e,t=1,n){qb("counter",e,t,n)}function TD(e,t,n){qb("gauge",e,t,n)}function RD(e,t,n){qb("distribution",e,t,n)}const ID=Object.freeze(Object.defineProperty({__proto__:null,count:CD,distribution:RD,gauge:TD},Symbol.toStringTag,{value:"Module"})),PD=["trace","debug","info","warn","error","fatal"];function AD(e={}){const t=new Set(e.levels??PD),n=e.client;return{log(s){const{type:a,level:i,message:l,args:u,tag:d,date:h,...p}=s,m=n||ye();if(!m)return;const g=LD(a,i);if(!t.has(g))return;const{normalizeDepth:y=3,normalizeMaxBreadth:b=1e3}=m.getOptions(),w=[];l&&w.push(l),u&&u.length>0&&w.push(py(u,y,b));const v=w.join(" ");p["sentry.origin"]="auto.log.consola",d&&(p["consola.tag"]=d),a&&(p["consola.type"]=a),i!=null&&typeof i=="number"&&(p["consola.level"]=i),rm({level:g,message:v,attributes:p})}}}const OD={silent:"trace",fatal:"fatal",error:"error",warn:"warn",log:"info",info:"info",success:"info",fail:"error",ready:"info",start:"info",box:"info",debug:"debug",trace:"trace",verbose:"debug",critical:"fatal",notice:"info"},MD={0:"fatal",1:"warn",2:"info",3:"info",4:"debug",5:"trace"};function LD(e,t){if(e==="verbose")return"debug";if(e==="silent")return"trace";if(e){const n=OD[e];if(n)return n}if(typeof t=="number"){const n=MD[t];if(n)return n}return"info"}const $D="gen_ai.prompt",Ym="gen_ai.system",or="gen_ai.request.model",Bb="gen_ai.request.stream",Jm="gen_ai.request.temperature",Hb="gen_ai.request.max_tokens",Qm="gen_ai.request.frequency_penalty",zb="gen_ai.request.presence_penalty",Xm="gen_ai.request.top_p",vC="gen_ai.request.top_k",DD="gen_ai.request.encoding_format",FD="gen_ai.request.dimensions",ki="gen_ai.response.finish_reasons",va="gen_ai.response.model",Nc="gen_ai.response.id",UD="gen_ai.response.stop_reason",No="gen_ai.usage.input_tokens",So="gen_ai.usage.output_tokens",ko="gen_ai.usage.total_tokens",fi="gen_ai.operation.name",mi="gen_ai.request.messages",Wr="gen_ai.response.text",Zm="gen_ai.request.available_tools",ep="gen_ai.response.streaming",Ls="gen_ai.response.tool_calls",wC="gen_ai.agent.name",qD="gen_ai.pipeline.name",BD="gen_ai.usage.cache_creation_input_tokens",HD="gen_ai.usage.cache_read_input_tokens",zD="gen_ai.invoke_agent",WD="openai.response.id",_C="openai.response.model",GD="openai.response.timestamp",VD="openai.usage.completion_tokens",KD="openai.usage.prompt_tokens",Xx={CHAT:"chat",RESPONSES:"responses",EMBEDDINGS:"embeddings"},j1="anthropic.response.timestamp",jC=2e4,im=e=>new TextEncoder().encode(e).length,om=e=>im(JSON.stringify(e));function Wb(e,t){if(im(e)<=t)return e;let n=0,s=e.length,a="";for(;n<=s;){const i=Math.floor((n+s)/2),l=e.slice(0,i);im(l)<=t?(a=l,n=i+1):s=i-1}return a}function YD(e){return typeof e=="string"?e:"text"in e?e.text:""}function N1(e,t){return typeof e=="string"?t:{...e,text:t}}function JD(e){return e!==null&&typeof e=="object"&&"content"in e&&typeof e.content=="string"}function QD(e){return e!==null&&typeof e=="object"&&"content"in e&&Array.isArray(e.content)}function Ru(e){return!e||typeof e!="object"?!1:XD(e)||NC(e)||"media_type"in e&&typeof e.media_type=="string"&&"data"in e||"image_url"in e&&typeof e.image_url=="string"&&e.image_url.startsWith("data:")||"type"in e&&(e.type==="blob"||e.type==="base64")||"b64_json"in e||"type"in e&&"result"in e&&e.type==="image_generation"||"uri"in e&&typeof e.uri=="string"&&e.uri.startsWith("data:")}function XD(e){return"type"in e&&typeof e.type=="string"&&"source"in e&&Ru(e.source)}function NC(e){return"inlineData"in e&&!!e.inlineData&&typeof e.inlineData=="object"&&"data"in e.inlineData&&typeof e.inlineData.data=="string"}function SC(e){return e!==null&&typeof e=="object"&&"parts"in e&&Array.isArray(e.parts)&&e.parts.length>0}function ZD(e,t){const n={...e,content:""},s=om(n),a=t-s;if(a<=0)return[];const i=Wb(e.content,a);return[{...e,content:i}]}function eF(e,t){const{parts:n}=e,s=n.map(u=>N1(u,"")),a=om({...e,parts:s});let i=t-a;if(i<=0)return[];const l=[];for(const u of n){const d=YD(u),h=im(d);if(h<=i)l.push(u),i-=h;else if(l.length===0){const p=Wb(d,i);p&&l.push(N1(u,p));break}else break}return l.length<=0?[]:[{...e,parts:l}]}function tF(e,t){return!e||typeof e!="object"?[]:JD(e)?ZD(e,t):SC(e)?eF(e,t):[]}const S1="[Filtered]",nF=["image_url","data","content","b64_json","result","uri"];function kf(e){const t={...e};Ru(t.source)&&(t.source=kf(t.source)),NC(e)&&(t.inlineData={...e.inlineData,data:S1});for(const n of nF)typeof t[n]=="string"&&(t[n]=S1);return t}function gy(e){return e.map(n=>{let s;return n&&typeof n=="object"&&(QD(n)?s={...n,content:gy(n.content)}:"content"in n&&Ru(n.content)&&(s={...n,content:kf(n.content)}),SC(n)&&(s={...s??n,parts:gy(n.parts)}),Ru(s)?s=kf(s):Ru(n)&&(s=kf(n))),s??n})}function rF(e,t){if(!Array.isArray(e)||e.length===0)return e;const n=gy(e);if(om(n)<=t)return n;const a=n.map(om);let i=0,l=n.length;for(let u=n.length-1;u>=0;u--){const d=a[u];if(d&&i+d>t)break;d&&(i+=d),l=u}if(l===n.length){const u=n[n.length-1];return tF(u,t)}return n.slice(l)}function tp(e){return rF(e,jC)}function sF(e){return Wb(e,jC)}function gd(e){return e.includes("messages")?"messages":e.includes("completions")?"completions":e.includes("models")?"models":e.includes("chat")?"chat":e.split(".").pop()||"unknown"}function lm(e){return`gen_ai.${gd(e)}`}function kC(e,t){return e?`${e}.${t}`:t}function Gb(e,t,n,s,a){if(t!==void 0&&e.setAttributes({[No]:t}),n!==void 0&&e.setAttributes({[So]:n}),t!==void 0||n!==void 0||s!==void 0||a!==void 0){const i=(t??0)+(n??0)+(s??0)+(a??0);e.setAttributes({[ko]:i})}}function cm(e){if(typeof e=="string")return sF(e);if(Array.isArray(e)){const t=tp(e);return JSON.stringify(t)}return JSON.stringify(e)}const aF=["responses.create","chat.completions.create","embeddings.create"],iF=["response.output_item.added","response.function_call_arguments.delta","response.function_call_arguments.done","response.output_item.done"],oF=["response.created","response.in_progress","response.failed","response.completed","response.incomplete","response.queued","response.output_text.delta",...iF];function Vb(e){return e.includes("chat.completions")?Xx.CHAT:e.includes("responses")?Xx.RESPONSES:e.includes("embeddings")?Xx.EMBEDDINGS:e.split(".").pop()||"unknown"}function k1(e){return`gen_ai.${Vb(e)}`}function lF(e){return aF.includes(e)}function cF(e,t){return e?`${e}.${t}`:t}function uF(e){return e!==null&&typeof e=="object"&&"object"in e&&e.object==="chat.completion"}function dF(e){return e!==null&&typeof e=="object"&&"object"in e&&e.object==="response"}function hF(e){if(e===null||typeof e!="object"||!("object"in e))return!1;const t=e;return t.object==="list"&&typeof t.model=="string"&&t.model.toLowerCase().includes("embedding")}function fF(e){return e!==null&&typeof e=="object"&&"type"in e&&typeof e.type=="string"&&e.type.startsWith("response.")}function mF(e){return e!==null&&typeof e=="object"&&"object"in e&&e.object==="chat.completion.chunk"}function pF(e,t,n){if(Kb(e,t.id,t.model,t.created),t.usage&&np(e,t.usage.prompt_tokens,t.usage.completion_tokens,t.usage.total_tokens),Array.isArray(t.choices)){const s=t.choices.map(a=>a.finish_reason).filter(a=>a!==null);if(s.length>0&&e.setAttributes({[ki]:JSON.stringify(s)}),n){const a=t.choices.map(i=>{var l;return(l=i.message)==null?void 0:l.tool_calls}).filter(i=>Array.isArray(i)&&i.length>0).flat();a.length>0&&e.setAttributes({[Ls]:JSON.stringify(a)})}}}function gF(e,t,n){if(Kb(e,t.id,t.model,t.created_at),t.status&&e.setAttributes({[ki]:JSON.stringify([t.status])}),t.usage&&np(e,t.usage.input_tokens,t.usage.output_tokens,t.usage.total_tokens),n){const s=t;if(Array.isArray(s.output)&&s.output.length>0){const a=s.output.filter(i=>typeof i=="object"&&i!==null&&i.type==="function_call");a.length>0&&e.setAttributes({[Ls]:JSON.stringify(a)})}}}function xF(e,t){e.setAttributes({[_C]:t.model,[va]:t.model}),t.usage&&np(e,t.usage.prompt_tokens,void 0,t.usage.total_tokens)}function np(e,t,n,s){t!==void 0&&e.setAttributes({[KD]:t,[No]:t}),n!==void 0&&e.setAttributes({[VD]:n,[So]:n}),s!==void 0&&e.setAttributes({[ko]:s})}function Kb(e,t,n,s){e.setAttributes({[WD]:t,[Nc]:t}),e.setAttributes({[_C]:n,[va]:n}),e.setAttributes({[GD]:new Date(s*1e3).toISOString()})}function yF(e,t){for(const n of e){const s=n.index;if(!(s===void 0||!n.function))if(!(s in t.chatCompletionToolCalls))t.chatCompletionToolCalls[s]={...n,function:{name:n.function.name,arguments:n.function.arguments||""}};else{const a=t.chatCompletionToolCalls[s];n.function.arguments&&(a!=null&&a.function)&&(a.function.arguments+=n.function.arguments)}}}function bF(e,t,n){var s,a;t.responseId=e.id??t.responseId,t.responseModel=e.model??t.responseModel,t.responseTimestamp=e.created??t.responseTimestamp,e.usage&&(t.promptTokens=e.usage.prompt_tokens,t.completionTokens=e.usage.completion_tokens,t.totalTokens=e.usage.total_tokens);for(const i of e.choices??[])n&&((s=i.delta)!=null&&s.content&&t.responseTexts.push(i.delta.content),(a=i.delta)!=null&&a.tool_calls&&yF(i.delta.tool_calls,t)),i.finish_reason&&t.finishReasons.push(i.finish_reason)}function vF(e,t,n,s){if(!(e&&typeof e=="object")){t.eventTypes.push("unknown:non-object");return}if(e instanceof Error){s.setStatus({code:nt,message:"internal_error"}),dt(e,{mechanism:{handled:!1,type:"auto.ai.openai.stream-response"}});return}if(!("type"in e))return;const a=e;if(!oF.includes(a.type)){t.eventTypes.push(a.type);return}if(n&&(a.type==="response.output_item.done"&&"item"in a&&t.responsesApiToolCalls.push(a.item),a.type==="response.output_text.delta"&&"delta"in a&&a.delta)){t.responseTexts.push(a.delta);return}if("response"in a){const{response:i}=a;t.responseId=i.id??t.responseId,t.responseModel=i.model??t.responseModel,t.responseTimestamp=i.created_at??t.responseTimestamp,i.usage&&(t.promptTokens=i.usage.input_tokens,t.completionTokens=i.usage.output_tokens,t.totalTokens=i.usage.total_tokens),i.status&&t.finishReasons.push(i.status),n&&i.output_text&&t.responseTexts.push(i.output_text)}}async function*wF(e,t,n){const s={eventTypes:[],responseTexts:[],finishReasons:[],responseId:"",responseModel:"",responseTimestamp:0,promptTokens:void 0,completionTokens:void 0,totalTokens:void 0,chatCompletionToolCalls:{},responsesApiToolCalls:[]};try{for await(const a of e)mF(a)?bF(a,s,n):fF(a)&&vF(a,s,n,t),yield a}finally{Kb(t,s.responseId,s.responseModel,s.responseTimestamp),np(t,s.promptTokens,s.completionTokens,s.totalTokens),t.setAttributes({[ep]:!0}),s.finishReasons.length&&t.setAttributes({[ki]:JSON.stringify(s.finishReasons)}),n&&s.responseTexts.length&&t.setAttributes({[Wr]:s.responseTexts.join("")});const i=[...Object.values(s.chatCompletionToolCalls),...s.responsesApiToolCalls];i.length>0&&t.setAttributes({[Ls]:JSON.stringify(i)}),t.end()}}function _F(e,t){const n={[Ym]:"openai",[fi]:Vb(t),[Ge]:"auto.ai.openai"};if(e.length>0&&typeof e[0]=="object"&&e[0]!==null){const s=e[0],a=Array.isArray(s.tools)?s.tools:[],l=s.web_search_options&&typeof s.web_search_options=="object"?[{type:"web_search_options",...s.web_search_options}]:[],u=[...a,...l];u.length>0&&(n[Zm]=JSON.stringify(u))}if(e.length>0&&typeof e[0]=="object"&&e[0]!==null){const s=e[0];n[or]=s.model??"unknown","temperature"in s&&(n[Jm]=s.temperature),"top_p"in s&&(n[Xm]=s.top_p),"frequency_penalty"in s&&(n[Qm]=s.frequency_penalty),"presence_penalty"in s&&(n[zb]=s.presence_penalty),"stream"in s&&(n[Bb]=s.stream),"encoding_format"in s&&(n[DD]=s.encoding_format),"dimensions"in s&&(n[FD]=s.dimensions)}else n[or]="unknown";return n}function jF(e,t,n){var a;if(!t||typeof t!="object")return;const s=t;if(uF(s)){if(pF(e,s,n),n&&((a=s.choices)!=null&&a.length)){const i=s.choices.map(l=>{var u;return((u=l.message)==null?void 0:u.content)||""});e.setAttributes({[Wr]:JSON.stringify(i)})}}else dF(s)?(gF(e,s,n),n&&s.output_text&&e.setAttributes({[Wr]:s.output_text})):hF(s)&&xF(e,s)}function E1(e,t){if("messages"in t){const n=cm(t.messages);e.setAttributes({[mi]:n})}if("input"in t){const n=cm(t.input);e.setAttributes({[mi]:n})}}function NF(e,t,n,s){return async function(...i){const l=_F(i,t),u=l[or]||"unknown",d=Vb(t),h=i[0];return h&&typeof h=="object"&&h.stream===!0?ta({name:`${d} ${u} stream-response`,op:k1(t),attributes:l},async m=>{try{s.recordInputs&&h&&E1(m,h);const g=await e.apply(n,i);return wF(g,m,s.recordOutputs??!1)}catch(g){throw m.setStatus({code:nt,message:"internal_error"}),dt(g,{mechanism:{handled:!1,type:"auto.ai.openai.stream",data:{function:t}}}),m.end(),g}}):Ms({name:`${d} ${u}`,op:k1(t),attributes:l},async m=>{try{s.recordInputs&&h&&E1(m,h);const g=await e.apply(n,i);return jF(m,g,s.recordOutputs),g}catch(g){throw dt(g,{mechanism:{handled:!1,type:"auto.ai.openai",data:{function:t}}}),g}})}}function EC(e,t="",n){return new Proxy(e,{get(s,a){const i=s[a],l=cF(t,String(a));return typeof i=="function"&&lF(l)?NF(i,l,s,n):typeof i=="function"?i.bind(s):i&&typeof i=="object"?EC(i,l,n):i}})}function SF(e,t){var a;const n=!!((a=ye())!=null&&a.getOptions().sendDefaultPii),s={recordInputs:n,recordOutputs:n,...t};return EC(e,"",s)}function kF(e,t){var n;return"type"in e&&typeof e.type=="string"&&e.type==="error"?(t.setStatus({code:nt,message:((n=e.error)==null?void 0:n.type)??"internal_error"}),dt(e.error,{mechanism:{handled:!1,type:"auto.ai.anthropic.anthropic_error"}}),!0):!1}function EF(e,t){if(e.type==="message_delta"&&e.usage&&"output_tokens"in e.usage&&typeof e.usage.output_tokens=="number"&&(t.completionTokens=e.usage.output_tokens),e.message){const n=e.message;n.id&&(t.responseId=n.id),n.model&&(t.responseModel=n.model),n.stop_reason&&t.finishReasons.push(n.stop_reason),n.usage&&(typeof n.usage.input_tokens=="number"&&(t.promptTokens=n.usage.input_tokens),typeof n.usage.cache_creation_input_tokens=="number"&&(t.cacheCreationInputTokens=n.usage.cache_creation_input_tokens),typeof n.usage.cache_read_input_tokens=="number"&&(t.cacheReadInputTokens=n.usage.cache_read_input_tokens))}}function CF(e,t){e.type!=="content_block_start"||typeof e.index!="number"||!e.content_block||(e.content_block.type==="tool_use"||e.content_block.type==="server_tool_use")&&(t.activeToolBlocks[e.index]={id:e.content_block.id,name:e.content_block.name,inputJsonParts:[]})}function TF(e,t,n){if(!(e.type!=="content_block_delta"||!e.delta)){if(typeof e.index=="number"&&"partial_json"in e.delta&&typeof e.delta.partial_json=="string"){const s=t.activeToolBlocks[e.index];s&&s.inputJsonParts.push(e.delta.partial_json)}n&&typeof e.delta.text=="string"&&t.responseTexts.push(e.delta.text)}}function RF(e,t){if(e.type!=="content_block_stop"||typeof e.index!="number")return;const n=t.activeToolBlocks[e.index];if(!n)return;const s=n.inputJsonParts.join("");let a;try{a=s?JSON.parse(s):{}}catch{a={__unparsed:s}}t.toolCalls.push({type:"tool_use",id:n.id,name:n.name,input:a}),delete t.activeToolBlocks[e.index]}function CC(e,t,n,s){!(e&&typeof e=="object")||kF(e,s)||(EF(e,t),CF(e,t),TF(e,t,n),RF(e,t))}function IF(e,t,n){t.isRecording()&&(e.responseId&&t.setAttributes({[Nc]:e.responseId}),e.responseModel&&t.setAttributes({[va]:e.responseModel}),Gb(t,e.promptTokens,e.completionTokens,e.cacheCreationInputTokens,e.cacheReadInputTokens),t.setAttributes({[ep]:!0}),e.finishReasons.length>0&&t.setAttributes({[ki]:JSON.stringify(e.finishReasons)}),n&&e.responseTexts.length>0&&t.setAttributes({[Wr]:e.responseTexts.join("")}),n&&e.toolCalls.length>0&&t.setAttributes({[Ls]:JSON.stringify(e.toolCalls)}),t.end())}async function*PF(e,t,n){const s={responseTexts:[],finishReasons:[],responseId:"",responseModel:"",promptTokens:void 0,completionTokens:void 0,cacheCreationInputTokens:void 0,cacheReadInputTokens:void 0,toolCalls:[],activeToolBlocks:{}};try{for await(const a of e)CC(a,s,n,t),yield a}finally{s.responseId&&t.setAttributes({[Nc]:s.responseId}),s.responseModel&&t.setAttributes({[va]:s.responseModel}),Gb(t,s.promptTokens,s.completionTokens,s.cacheCreationInputTokens,s.cacheReadInputTokens),t.setAttributes({[ep]:!0}),s.finishReasons.length>0&&t.setAttributes({[ki]:JSON.stringify(s.finishReasons)}),n&&s.responseTexts.length>0&&t.setAttributes({[Wr]:s.responseTexts.join("")}),n&&s.toolCalls.length>0&&t.setAttributes({[Ls]:JSON.stringify(s.toolCalls)}),t.end()}}function AF(e,t,n){const s={responseTexts:[],finishReasons:[],responseId:"",responseModel:"",promptTokens:void 0,completionTokens:void 0,cacheCreationInputTokens:void 0,cacheReadInputTokens:void 0,toolCalls:[],activeToolBlocks:{}};return e.on("streamEvent",a=>{CC(a,s,n,t)}),e.on("message",()=>{IF(s,t,n)}),e.on("error",a=>{dt(a,{mechanism:{handled:!1,type:"auto.ai.anthropic.stream_error"}}),t.isRecording()&&(t.setStatus({code:nt,message:"stream_error"}),t.end())}),e}const OF=["messages.create","messages.stream","messages.countTokens","models.get","completions.create","models.retrieve","beta.messages.create"];function MF(e){return OF.includes(e)}function LF(e,t){t.error&&(e.setStatus({code:nt,message:t.error.type||"internal_error"}),dt(t.error,{mechanism:{handled:!1,type:"auto.ai.anthropic.anthropic_error"}}))}function $F(e){const{system:t,messages:n}=e,s=typeof t=="string"?[{role:"system",content:e.system}]:[],a=Array.isArray(n)?n:n!=null?[n]:[];return[...s,...a]}function DF(e,t){const n={[Ym]:"anthropic",[fi]:gd(t),[Ge]:"auto.ai.anthropic"};if(e.length>0&&typeof e[0]=="object"&&e[0]!==null){const s=e[0];s.tools&&Array.isArray(s.tools)&&(n[Zm]=JSON.stringify(s.tools)),n[or]=s.model??"unknown","temperature"in s&&(n[Jm]=s.temperature),"top_p"in s&&(n[Xm]=s.top_p),"stream"in s&&(n[Bb]=s.stream),"top_k"in s&&(n[vC]=s.top_k),"frequency_penalty"in s&&(n[Qm]=s.frequency_penalty),"max_tokens"in s&&(n[Hb]=s.max_tokens)}else t==="models.retrieve"||t==="models.get"?n[or]=e[0]:n[or]="unknown";return n}function xy(e,t){const n=$F(t);if(n.length){const s=cm(n);e.setAttributes({[mi]:s})}if("input"in t){const s=cm(t.input);e.setAttributes({[mi]:s})}"prompt"in t&&e.setAttributes({[$D]:JSON.stringify(t.prompt)})}function FF(e,t){if("content"in t&&Array.isArray(t.content)){e.setAttributes({[Wr]:t.content.map(s=>s.text).filter(s=>!!s).join("")});const n=[];for(const s of t.content)(s.type==="tool_use"||s.type==="server_tool_use")&&n.push(s);n.length>0&&e.setAttributes({[Ls]:JSON.stringify(n)})}"completion"in t&&e.setAttributes({[Wr]:t.completion}),"input_tokens"in t&&e.setAttributes({[Wr]:JSON.stringify(t.input_tokens)})}function UF(e,t){"id"in t&&"model"in t&&(e.setAttributes({[Nc]:t.id,[va]:t.model}),"created"in t&&typeof t.created=="number"&&e.setAttributes({[j1]:new Date(t.created*1e3).toISOString()}),"created_at"in t&&typeof t.created_at=="number"&&e.setAttributes({[j1]:new Date(t.created_at*1e3).toISOString()}),"usage"in t&&t.usage&&Gb(e,t.usage.input_tokens,t.usage.output_tokens,t.usage.cache_creation_input_tokens,t.usage.cache_read_input_tokens))}function qF(e,t,n){if(!(!t||typeof t!="object")){if("type"in t&&t.type==="error"){LF(e,t);return}n&&FF(e,t),UF(e,t)}}function C1(e,t,n){throw dt(e,{mechanism:{handled:!1,type:"auto.ai.anthropic",data:{function:n}}}),t.isRecording()&&(t.setStatus({code:nt,message:"internal_error"}),t.end()),e}function BF(e,t,n,s,a,i,l,u,d,h,p){const m=a[or]??"unknown",g={name:`${i} ${m} stream-response`,op:lm(l),attributes:a};return h&&!p?ta(g,async y=>{try{d.recordInputs&&u&&xy(y,u);const b=await e.apply(n,s);return PF(b,y,d.recordOutputs??!1)}catch(b){return C1(b,y,l)}}):ta(g,y=>{try{d.recordInputs&&u&&xy(y,u);const b=t.apply(n,s);return AF(b,y,d.recordOutputs??!1)}catch(b){return C1(b,y,l)}})}function HF(e,t,n,s){return new Proxy(e,{apply(a,i,l){const u=DF(l,t),d=u[or]??"unknown",h=gd(t),p=typeof l[0]=="object"?l[0]:void 0,m=!!(p!=null&&p.stream),g=t==="messages.stream";return m||g?BF(e,a,n,l,u,h,t,p,s,m,g):Ms({name:`${h} ${d}`,op:lm(t),attributes:u},y=>(s.recordInputs&&p&&xy(y,p),Wm(()=>a.apply(n,l),b=>{dt(b,{mechanism:{handled:!1,type:"auto.ai.anthropic",data:{function:t}}})},()=>{},b=>qF(y,b,s.recordOutputs))))}})}function TC(e,t="",n){return new Proxy(e,{get(s,a){const i=s[a],l=kC(t,String(a));return typeof i=="function"&&MF(l)?HF(i,l,s,n):typeof i=="function"?i.bind(s):i&&typeof i=="object"?TC(i,l,n):i}})}function zF(e,t){var a;const n=!!((a=ye())!=null&&a.getOptions().sendDefaultPii),s={recordInputs:n,recordOutputs:n,...t};return TC(e,"",s)}const T1=["models.generateContent","models.generateContentStream","chats.create","sendMessage","sendMessageStream"],WF="google_genai",RC="chats.create",GF="chat";function VF(e,t){const n=e==null?void 0:e.promptFeedback;if(n!=null&&n.blockReason){const s=n.blockReasonMessage??n.blockReason;return t.setStatus({code:nt,message:`Content blocked: ${s}`}),dt(`Content blocked: ${s}`,{mechanism:{handled:!1,type:"auto.ai.google_genai"}}),!0}return!1}function KF(e,t){typeof e.responseId=="string"&&(t.responseId=e.responseId),typeof e.modelVersion=="string"&&(t.responseModel=e.modelVersion);const n=e.usageMetadata;n&&(typeof n.promptTokenCount=="number"&&(t.promptTokens=n.promptTokenCount),typeof n.candidatesTokenCount=="number"&&(t.completionTokens=n.candidatesTokenCount),typeof n.totalTokenCount=="number"&&(t.totalTokens=n.totalTokenCount))}function YF(e,t,n){var s;Array.isArray(e.functionCalls)&&t.toolCalls.push(...e.functionCalls);for(const a of e.candidates??[]){a!=null&&a.finishReason&&!t.finishReasons.includes(a.finishReason)&&t.finishReasons.push(a.finishReason);for(const i of((s=a==null?void 0:a.content)==null?void 0:s.parts)??[])n&&i.text&&t.responseTexts.push(i.text),i.functionCall&&t.toolCalls.push({type:"function",id:i.functionCall.id,name:i.functionCall.name,arguments:i.functionCall.args})}}function JF(e,t,n,s){!e||VF(e,s)||(KF(e,t),YF(e,t,n))}async function*QF(e,t,n){const s={responseTexts:[],finishReasons:[],toolCalls:[]};try{for await(const a of e)JF(a,s,n,t),yield a}finally{const a={[ep]:!0};s.responseId&&(a[Nc]=s.responseId),s.responseModel&&(a[va]=s.responseModel),s.promptTokens!==void 0&&(a[No]=s.promptTokens),s.completionTokens!==void 0&&(a[So]=s.completionTokens),s.totalTokens!==void 0&&(a[ko]=s.totalTokens),s.finishReasons.length&&(a[ki]=JSON.stringify(s.finishReasons)),n&&s.responseTexts.length&&(a[Wr]=s.responseTexts.join("")),n&&s.toolCalls.length&&(a[Ls]=JSON.stringify(s.toolCalls)),t.setAttributes(a),t.end()}}function XF(e){if(T1.includes(e))return!0;const t=e.split(".").pop();return T1.includes(t)}function ZF(e){return e.includes("Stream")}function Nu(e,t="user"){return typeof e=="string"?[{role:t,content:e}]:Array.isArray(e)?e.flatMap(n=>Nu(n,t)):typeof e!="object"||!e?[]:"role"in e&&typeof e.role=="string"?[e]:"parts"in e?[{...e,role:t}]:[{role:t,content:e}]}function R1(e,t){if("model"in e&&typeof e.model=="string")return e.model;if(t&&typeof t=="object"){const n=t;if("model"in n&&typeof n.model=="string")return n.model;if("modelVersion"in n&&typeof n.modelVersion=="string")return n.modelVersion}return"unknown"}function eU(e){const t={};return"temperature"in e&&typeof e.temperature=="number"&&(t[Jm]=e.temperature),"topP"in e&&typeof e.topP=="number"&&(t[Xm]=e.topP),"topK"in e&&typeof e.topK=="number"&&(t[vC]=e.topK),"maxOutputTokens"in e&&typeof e.maxOutputTokens=="number"&&(t[Hb]=e.maxOutputTokens),"frequencyPenalty"in e&&typeof e.frequencyPenalty=="number"&&(t[Qm]=e.frequencyPenalty),"presencePenalty"in e&&typeof e.presencePenalty=="number"&&(t[zb]=e.presencePenalty),t}function tU(e,t,n){const s={[Ym]:WF,[fi]:gd(e),[Ge]:"auto.ai.google_genai"};if(t){if(s[or]=R1(t,n),"config"in t&&typeof t.config=="object"&&t.config){const a=t.config;if(Object.assign(s,eU(a)),"tools"in a&&Array.isArray(a.tools)){const i=a.tools.flatMap(l=>l.functionDeclarations);s[Zm]=JSON.stringify(i)}}}else s[or]=R1({},n);return s}function I1(e,t){const n=[];"config"in t&&t.config&&typeof t.config=="object"&&"systemInstruction"in t.config&&t.config.systemInstruction&&n.push(...Nu(t.config.systemInstruction,"system")),"history"in t&&n.push(...Nu(t.history,"user")),"contents"in t&&n.push(...Nu(t.contents,"user")),"message"in t&&n.push(...Nu(t.message,"user")),n.length&&e.setAttributes({[mi]:JSON.stringify(tp(n))})}function nU(e,t,n){if(!(!t||typeof t!="object")){if(t.modelVersion&&e.setAttribute(va,t.modelVersion),t.usageMetadata&&typeof t.usageMetadata=="object"){const s=t.usageMetadata;typeof s.promptTokenCount=="number"&&e.setAttributes({[No]:s.promptTokenCount}),typeof s.candidatesTokenCount=="number"&&e.setAttributes({[So]:s.candidatesTokenCount}),typeof s.totalTokenCount=="number"&&e.setAttributes({[ko]:s.totalTokenCount})}if(n&&Array.isArray(t.candidates)&&t.candidates.length>0){const s=t.candidates.map(a=>{var i;return(i=a.content)!=null&&i.parts&&Array.isArray(a.content.parts)?a.content.parts.map(l=>typeof l.text=="string"?l.text:"").filter(l=>l.length>0).join(""):""}).filter(a=>a.length>0);s.length>0&&e.setAttributes({[Wr]:s.join("")})}if(n&&t.functionCalls){const s=t.functionCalls;Array.isArray(s)&&s.length>0&&e.setAttributes({[Ls]:JSON.stringify(s)})}}}function P1(e,t,n,s){const a=t===RC;return new Proxy(e,{apply(i,l,u){const d=u[0],h=tU(t,d,n),p=h[or]??"unknown",m=gd(t);return ZF(t)?ta({name:`${m} ${p} stream-response`,op:lm(t),attributes:h},async g=>{try{s.recordInputs&&d&&I1(g,d);const y=await i.apply(n,u);return QF(y,g,!!s.recordOutputs)}catch(y){throw g.setStatus({code:nt,message:"internal_error"}),dt(y,{mechanism:{handled:!1,type:"auto.ai.google_genai",data:{function:t}}}),g.end(),y}}):Ms({name:a?`${m} ${p} create`:`${m} ${p}`,op:lm(t),attributes:h},g=>(s.recordInputs&&d&&I1(g,d),Wm(()=>i.apply(n,u),y=>{dt(y,{mechanism:{handled:!1,type:"auto.ai.google_genai",data:{function:t}}})},()=>{},y=>{a||nU(g,y,s.recordOutputs)})))}})}function yy(e,t="",n){return new Proxy(e,{get:(s,a,i)=>{const l=Reflect.get(s,a,i),u=kC(t,String(a));if(typeof l=="function"&&XF(u)){if(u===RC){const d=P1(l,u,s,n);return function(...p){const m=d(...p);return m&&typeof m=="object"?yy(m,GF,n):m}}return P1(l,u,s,n)}return typeof l=="function"?l.bind(s):l&&typeof l=="object"?yy(l,u,n):l}})}function rU(e,t){var a;const n=!!((a=ye())!=null&&a.getOptions().sendDefaultPii),s={recordInputs:n,recordOutputs:n,...t};return yy(e,"",s)}const Su="auto.ai.langchain",sU={human:"user",ai:"assistant",assistant:"assistant",system:"system",function:"function",tool:"tool"},ea=(e,t,n)=>{n!=null&&(e[t]=n)},br=(e,t,n)=>{const s=Number(n);Number.isNaN(s)||(e[t]=s)};function ir(e){if(typeof e=="string")return e;try{return JSON.stringify(e)}catch{return String(e)}}function xu(e){const t=e.toLowerCase();return sU[t]??t}function A1(e){return e.includes("System")?"system":e.includes("Human")?"user":e.includes("AI")||e.includes("Assistant")?"assistant":e.includes("Function")?"function":e.includes("Tool")?"tool":"user"}function O1(e){if(!(!e||Array.isArray(e)))return e.invocation_params}function Yb(e){return e.map(t=>{var a,i;const n=t._getType;if(typeof n=="function"){const l=n.call(t);return{role:xu(l),content:ir(t.content)}}const s=(a=t.constructor)==null?void 0:a.name;if(s)return{role:xu(A1(s)),content:ir(t.content)};if(t.type){const l=String(t.type).toLowerCase();return{role:xu(l),content:ir(t.content)}}if(t.role)return{role:xu(String(t.role)),content:ir(t.content)};if(t.lc===1&&t.kwargs){const l=t.id,u=Array.isArray(l)&&l.length>0?l[l.length-1]:"",d=typeof u=="string"?A1(u):"user";return{role:xu(d),content:ir((i=t.kwargs)==null?void 0:i.content)}}return{role:"user",content:ir(t.content)}})}function aU(e,t,n){const s={},a="kwargs"in e?e.kwargs:void 0,i=(t==null?void 0:t.temperature)??(n==null?void 0:n.ls_temperature)??(a==null?void 0:a.temperature);br(s,Jm,i);const l=(t==null?void 0:t.max_tokens)??(n==null?void 0:n.ls_max_tokens)??(a==null?void 0:a.max_tokens);br(s,Hb,l);const u=(t==null?void 0:t.top_p)??(a==null?void 0:a.top_p);br(s,Xm,u);const d=t==null?void 0:t.frequency_penalty;br(s,Qm,d);const h=t==null?void 0:t.presence_penalty;return br(s,zb,h),t&&"stream"in t&&ea(s,Bb,!!t.stream),s}function IC(e,t,n,s,a,i){return{[Ym]:ir(e??"langchain"),[fi]:n,[or]:ir(t),[Ge]:Su,...aU(s,a,i)}}function iU(e,t,n,s,a){const i=a==null?void 0:a.ls_provider,l=(s==null?void 0:s.model)??(a==null?void 0:a.ls_model_name)??"unknown",u=IC(i,l,"pipeline",e,s,a);if(n&&Array.isArray(t)&&t.length>0){const d=t.map(h=>({role:"user",content:h}));ea(u,mi,ir(d))}return u}function oU(e,t,n,s,a){var d;const i=(a==null?void 0:a.ls_provider)??((d=e.id)==null?void 0:d[2]),l=(s==null?void 0:s.model)??(a==null?void 0:a.ls_model_name)??"unknown",u=IC(i,l,"chat",e,s,a);if(n&&Array.isArray(t)&&t.length>0){const h=Yb(t.flat()),p=tp(h);ea(u,mi,ir(p))}return u}function lU(e,t){var a;const n=[],s=e.flat();for(const i of s){const l=(a=i.message)==null?void 0:a.content;if(Array.isArray(l))for(const u of l){const d=u;d.type==="tool_use"&&n.push(d)}}n.length>0&&ea(t,Ls,ir(n))}function cU(e,t){if(!e)return;const n=e.tokenUsage,s=e.usage;if(n)br(t,No,n.promptTokens),br(t,So,n.completionTokens),br(t,ko,n.totalTokens);else if(s){br(t,No,s.input_tokens),br(t,So,s.output_tokens);const a=Number(s.input_tokens),i=Number(s.output_tokens),l=(Number.isNaN(a)?0:a)+(Number.isNaN(i)?0:i);l>0&&br(t,ko,l),s.cache_creation_input_tokens!==void 0&&br(t,BD,s.cache_creation_input_tokens),s.cache_read_input_tokens!==void 0&&br(t,HD,s.cache_read_input_tokens)}}function uU(e,t){var h,p,m,g;if(!e)return;const n={};if(Array.isArray(e.generations)){const y=e.generations.flat().map(b=>{var w,v;return(w=b.generationInfo)!=null&&w.finish_reason?b.generationInfo.finish_reason:(v=b.generation_info)!=null&&v.finish_reason?b.generation_info.finish_reason:null}).filter(b=>typeof b=="string");if(y.length>0&&ea(n,ki,ir(y)),lU(e.generations,n),t){const b=e.generations.flat().map(w=>{var v;return w.text??((v=w.message)==null?void 0:v.content)}).filter(w=>typeof w=="string");b.length>0&&ea(n,Wr,ir(b))}}cU(e.llmOutput,n);const s=e.llmOutput,a=(p=(h=e.generations)==null?void 0:h[0])==null?void 0:p[0],i=a==null?void 0:a.message,l=(s==null?void 0:s.model_name)??(s==null?void 0:s.model)??((m=i==null?void 0:i.response_metadata)==null?void 0:m.model_name);l&&ea(n,va,l);const u=(s==null?void 0:s.id)??(i==null?void 0:i.id);u&&ea(n,Nc,u);const d=(s==null?void 0:s.stop_reason)??((g=i==null?void 0:i.response_metadata)==null?void 0:g.finish_reason);return d&&ea(n,UD,ir(d)),n}function dU(e={}){const t=e.recordInputs??!1,n=e.recordOutputs??!1,s=new Map,a=l=>{const u=s.get(l);u!=null&&u.isRecording()&&(u.end(),s.delete(l))},i={lc_serializable:!1,lc_namespace:["langchain_core","callbacks","sentry"],lc_secrets:void 0,lc_attributes:void 0,lc_aliases:void 0,lc_serializable_keys:void 0,lc_id:["langchain_core","callbacks","sentry"],lc_kwargs:{},name:"SentryCallbackHandler",ignoreLLM:!1,ignoreChain:!1,ignoreAgent:!1,ignoreRetriever:!1,ignoreCustomEvent:!1,raiseError:!1,awaitHandlers:!0,handleLLMStart(l,u,d,h,p,m,g,y){const b=O1(m),w=iU(l,u,t,b,g),v=w[or],j=w[fi];ta({name:`${j} ${v}`,op:"gen_ai.pipeline",attributes:{...w,[_t]:"gen_ai.pipeline"}},E=>(s.set(d,E),E))},handleChatModelStart(l,u,d,h,p,m,g,y){const b=O1(m),w=oU(l,u,t,b,g),v=w[or],j=w[fi];ta({name:`${j} ${v}`,op:"gen_ai.chat",attributes:{...w,[_t]:"gen_ai.chat"}},E=>(s.set(d,E),E))},handleLLMEnd(l,u,d,h,p){const m=s.get(u);if(m!=null&&m.isRecording()){const g=uU(l,n);g&&m.setAttributes(g),a(u)}},handleLLMError(l,u){const d=s.get(u);d!=null&&d.isRecording()&&(d.setStatus({code:nt,message:"llm_error"}),a(u)),dt(l,{mechanism:{handled:!1,type:`${Su}.llm_error_handler`}})},handleChainStart(l,u,d,h){const p=l.name||"unknown_chain",m={[Ge]:"auto.ai.langchain","langchain.chain.name":p};t&&(m["langchain.chain.inputs"]=JSON.stringify(u)),ta({name:`chain ${p}`,op:"gen_ai.invoke_agent",attributes:{...m,[_t]:"gen_ai.invoke_agent"}},g=>(s.set(d,g),g))},handleChainEnd(l,u){const d=s.get(u);d!=null&&d.isRecording()&&(n&&d.setAttributes({"langchain.chain.outputs":JSON.stringify(l)}),a(u))},handleChainError(l,u){const d=s.get(u);d!=null&&d.isRecording()&&(d.setStatus({code:nt,message:"chain_error"}),a(u)),dt(l,{mechanism:{handled:!1,type:`${Su}.chain_error_handler`}})},handleToolStart(l,u,d,h){const p=l.name||"unknown_tool",m={[Ge]:Su,"gen_ai.tool.name":p};t&&(m["gen_ai.tool.input"]=u),ta({name:`execute_tool ${p}`,op:"gen_ai.execute_tool",attributes:{...m,[_t]:"gen_ai.execute_tool"}},g=>(s.set(d,g),g))},handleToolEnd(l,u){const d=s.get(u);d!=null&&d.isRecording()&&(n&&d.setAttributes({"gen_ai.tool.output":JSON.stringify(l)}),a(u))},handleToolError(l,u){const d=s.get(u);d!=null&&d.isRecording()&&(d.setStatus({code:nt,message:"tool_error"}),a(u)),dt(l,{mechanism:{handled:!1,type:`${Su}.tool_error_handler`}})},copy(){return i},toJSON(){return{lc:1,type:"not_implemented",id:i.lc_id}},toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:i.lc_id}}};return i}const PC="auto.ai.langgraph";function hU(e){if(!e||e.length===0)return null;const t=[];for(const n of e)if(n&&typeof n=="object"){const s=n.tool_calls;s&&Array.isArray(s)&&t.push(...s)}return t.length>0?t:null}function fU(e){const t=e;let n=0,s=0,a=0;if(t.usage_metadata&&typeof t.usage_metadata=="object"){const i=t.usage_metadata;return typeof i.input_tokens=="number"&&(n=i.input_tokens),typeof i.output_tokens=="number"&&(s=i.output_tokens),typeof i.total_tokens=="number"&&(a=i.total_tokens),{inputTokens:n,outputTokens:s,totalTokens:a}}if(t.response_metadata&&typeof t.response_metadata=="object"){const i=t.response_metadata;if(i.tokenUsage&&typeof i.tokenUsage=="object"){const l=i.tokenUsage;typeof l.promptTokens=="number"&&(n=l.promptTokens),typeof l.completionTokens=="number"&&(s=l.completionTokens),typeof l.totalTokens=="number"&&(a=l.totalTokens)}}return{inputTokens:n,outputTokens:s,totalTokens:a}}function mU(e,t){const n=t;if(n.response_metadata&&typeof n.response_metadata=="object"){const s=n.response_metadata;s.model_name&&typeof s.model_name=="string"&&e.setAttribute(va,s.model_name),s.finish_reason&&typeof s.finish_reason=="string"&&e.setAttribute(ki,[s.finish_reason])}}function pU(e){var n,s,a,i,l,u,d,h;if(!((i=(a=(s=(n=e.builder)==null?void 0:n.nodes)==null?void 0:s.tools)==null?void 0:a.runnable)!=null&&i.tools))return null;const t=(h=(d=(u=(l=e.builder)==null?void 0:l.nodes)==null?void 0:u.tools)==null?void 0:d.runnable)==null?void 0:h.tools;return!t||!Array.isArray(t)||t.length===0?null:t.map(p=>{var m,g,y;return{name:(m=p.lc_kwargs)==null?void 0:m.name,description:(g=p.lc_kwargs)==null?void 0:g.description,schema:(y=p.lc_kwargs)==null?void 0:y.schema}})}function gU(e,t,n){const s=n,a=s==null?void 0:s.messages;if(!a||!Array.isArray(a))return;const i=(t==null?void 0:t.length)??0,l=a.length>i?a.slice(i):[];if(l.length===0)return;const u=hU(l);u&&e.setAttribute(Ls,JSON.stringify(u));const d=Yb(l);e.setAttribute(Wr,JSON.stringify(d));let h=0,p=0,m=0;for(const g of l){const y=fU(g);h+=y.inputTokens,p+=y.outputTokens,m+=y.totalTokens,mU(e,g)}h>0&&e.setAttribute(No,h),p>0&&e.setAttribute(So,p),m>0&&e.setAttribute(ko,m)}function xU(e,t){return new Proxy(e,{apply(n,s,a){return Ms({op:"gen_ai.create_agent",name:"create_agent",attributes:{[Ge]:PC,[_t]:"gen_ai.create_agent",[fi]:"create_agent"}},i=>{try{const l=Reflect.apply(n,s,a),u=a.length>0?a[0]:{};u!=null&&u.name&&typeof u.name=="string"&&(i.setAttribute(wC,u.name),i.updateName(`create_agent ${u.name}`));const d=l.invoke;return d&&typeof d=="function"&&(l.invoke=yU(d.bind(l),l,u,t)),l}catch(l){throw i.setStatus({code:nt,message:"internal_error"}),dt(l,{mechanism:{handled:!1,type:"auto.ai.langgraph.error"}}),l}})}})}function yU(e,t,n,s){return new Proxy(e,{apply(a,i,l){return Ms({op:"gen_ai.invoke_agent",name:"invoke_agent",attributes:{[Ge]:PC,[_t]:zD,[fi]:"invoke_agent"}},async u=>{try{const d=n==null?void 0:n.name;d&&typeof d=="string"&&(u.setAttribute(qD,d),u.setAttribute(wC,d),u.updateName(`invoke_agent ${d}`));const h=pU(t);h&&u.setAttribute(Zm,JSON.stringify(h));const p=s.recordInputs,m=s.recordOutputs,g=l.length>0?l[0].messages??[]:[];if(g&&p){const b=Yb(g),w=tp(b);u.setAttribute(mi,JSON.stringify(w))}const y=await Reflect.apply(a,i,l);return m&&gU(u,g??null,y),y}catch(d){throw u.setStatus({code:nt,message:"internal_error"}),dt(d,{mechanism:{handled:!1,type:"auto.ai.langgraph.error"}}),d}})}})}function bU(e,t){const n=t||{};return e.compile=xU(e.compile.bind(e),n),e}function AC(e){if(e!==void 0)return e>=400&&e<500?"warning":e>=500?"error":void 0}const rc=Ae;function vU(){return"history"in rc&&!!rc.history}function wU(){if(!("fetch"in rc))return!1;try{return new Headers,new Request("data:,"),new Response,!0}catch{return!1}}function by(e){return e&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function OC(){var n;if(typeof EdgeRuntime=="string")return!0;if(!wU())return!1;if(by(rc.fetch))return!0;let e=!1;const t=rc.document;if(t&&typeof t.createElement=="function")try{const s=t.createElement("iframe");s.hidden=!0,t.head.appendChild(s),(n=s.contentWindow)!=null&&n.fetch&&(e=by(s.contentWindow.fetch)),t.head.removeChild(s)}catch(s){pe&&W.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",s)}return e}function _U(){return"ReportingObserver"in rc}function Jb(e,t){const n="fetch";_i(n,e),ji(n,()=>MC(void 0,t))}function jU(e){const t="fetch-body-resolved";_i(t,e),ji(t,()=>MC(SU))}function MC(e,t=!1){t&&!OC()||Nn(Ae,"fetch",function(n){return function(...s){const a=new Error,{method:i,url:l}=kU(s),u={args:s,fetchData:{method:i,url:l},startTimestamp:Tt()*1e3,virtualError:a,headers:EU(s)};return e||Br("fetch",{...u}),n.apply(Ae,s).then(async d=>(e?e(d):Br("fetch",{...u,endTimestamp:Tt()*1e3,response:d}),d),d=>{if(Br("fetch",{...u,endTimestamp:Tt()*1e3,error:d}),aa(d)&&d.stack===void 0&&(d.stack=a.stack,hn(d,"framesToPop",1)),d instanceof TypeError&&(d.message==="Failed to fetch"||d.message==="Load failed"||d.message==="NetworkError when attempting to fetch resource."))try{const h=new URL(u.fetchData.url);d.message=`${d.message} (${h.host})`}catch{}throw d})}})}async function NU(e,t){if(e!=null&&e.body){const n=e.body,s=n.getReader(),a=setTimeout(()=>{n.cancel().then(null,()=>{})},90*1e3);let i=!0;for(;i;){let l;try{l=setTimeout(()=>{n.cancel().then(null,()=>{})},5e3);const{done:u}=await s.read();clearTimeout(l),u&&(t(),i=!1)}catch{i=!1}finally{clearTimeout(l)}}clearTimeout(a),s.releaseLock(),n.cancel().then(null,()=>{})}}function SU(e){let t;try{t=e.clone()}catch{return}NU(t,()=>{Br("fetch-body-resolved",{endTimestamp:Tt()*1e3,response:e})})}function Ef(e,t){return!!e&&typeof e=="object"&&!!e[t]}function M1(e){return typeof e=="string"?e:e?Ef(e,"url")?e.url:e.toString?e.toString():"":""}function kU(e){if(e.length===0)return{method:"GET",url:""};if(e.length===2){const[n,s]=e;return{url:M1(n),method:Ef(s,"method")?String(s.method).toUpperCase():xb(n)&&Ef(n,"method")?String(n.method).toUpperCase():"GET"}}const t=e[0];return{url:M1(t),method:Ef(t,"method")?String(t.method).toUpperCase():"GET"}}function EU(e){const[t,n]=e;try{if(typeof n=="object"&&n!==null&&"headers"in n&&n.headers)return new Headers(n.headers);if(xb(t))return new Headers(t.headers)}catch{}}function CU(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}function TU(){return"npm"}function RU(){return!CU()&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function um(){return typeof window<"u"&&(!RU()||IU())}function IU(){const e=Ae.process;return(e==null?void 0:e.type)==="renderer"}const us=Ae,vt=us.document,ku=us.navigator,LC="Report a Bug",PU="Cancel",AU="Send Bug Report",OU="Confirm",MU="Report a Bug",LU="your.email@example.org",$U="Email",DU="What's the bug? What did you expect?",FU="Description",UU="Your Name",qU="Name",BU="Thank you for your report!",HU="(required)",zU="Add a screenshot",WU="Remove screenshot",GU="Highlight",VU="Hide",KU="Remove",YU="widget",JU="api",QU=5e3,$C=(e,t={includeReplay:!0})=>{if(!e.message)throw new Error("Unable to submit feedback with empty message");const n=ye();if(!n)throw new Error("No client setup, cannot send feedback.");e.tags&&Object.keys(e.tags).length&&We().setTags(e.tags);const s=yC({source:JU,url:Oo(),...e},t);return new Promise((a,i)=>{const l=setTimeout(()=>i("Unable to determine if Feedback was correctly sent."),3e4),u=n.on("afterSendEvent",(d,h)=>{if(d.event_id===s)return clearTimeout(l),u(),h!=null&&h.statusCode&&h.statusCode>=200&&h.statusCode<300?a(s):(h==null?void 0:h.statusCode)===403?i("Unable to send feedback. This could be because this domain is not in your list of allowed domains."):i("Unable to send feedback. This could be because of network issues, or because you are using an ad-blocker.")})})},Cf=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function XU(){return!(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(ku.userAgent)||/Macintosh/i.test(ku.userAgent)&&ku.maxTouchPoints&&ku.maxTouchPoints>1||!isSecureContext)}function Xh(e,t){return{...e,...t,tags:{...e.tags,...t.tags},onFormOpen:()=>{var n,s;(n=t.onFormOpen)==null||n.call(t),(s=e.onFormOpen)==null||s.call(e)},onFormClose:()=>{var n,s;(n=t.onFormClose)==null||n.call(t),(s=e.onFormClose)==null||s.call(e)},onSubmitSuccess:(n,s)=>{var a,i;(a=t.onSubmitSuccess)==null||a.call(t,n,s),(i=e.onSubmitSuccess)==null||i.call(e,n,s)},onSubmitError:n=>{var s,a;(s=t.onSubmitError)==null||s.call(t,n),(a=e.onSubmitError)==null||a.call(e,n)},onFormSubmitted:()=>{var n,s;(n=t.onFormSubmitted)==null||n.call(t),(s=e.onFormSubmitted)==null||s.call(e)},themeDark:{...e.themeDark,...t.themeDark},themeLight:{...e.themeLight,...t.themeLight}}}function ZU(e){const t=vt.createElement("style");return t.textContent=`
.widget__actor {
  position: fixed;
  z-index: var(--z-index);
  margin: var(--page-margin);
  inset: var(--actor-inset);

  display: flex;
  align-items: center;
  gap: 8px;
  padding: 16px;

  font-family: inherit;
  font-size: var(--font-size);
  font-weight: 600;
  line-height: 1.14em;
  text-decoration: none;

  background: var(--actor-background, var(--background));
  border-radius: var(--actor-border-radius, 1.7em/50%);
  border: var(--actor-border, var(--border));
  box-shadow: var(--actor-box-shadow, var(--box-shadow));
  color: var(--actor-color, var(--foreground));
  fill: var(--actor-color, var(--foreground));
  cursor: pointer;
  opacity: 1;
  transition: transform 0.2s ease-in-out;
  transform: translate(0, 0) scale(1);
}
.widget__actor[aria-hidden="true"] {
  opacity: 0;
  pointer-events: none;
  visibility: hidden;
  transform: translate(0, 16px) scale(0.98);
}

.widget__actor:hover {
  background: var(--actor-hover-background, var(--background));
  filter: var(--interactive-filter);
}

.widget__actor svg {
  width: 1.14em;
  height: 1.14em;
}

@media (max-width: 600px) {
  .widget__actor span {
    display: none;
  }
}
`,e&&t.setAttribute("nonce",e),t}function _r(e,t){return Object.entries(t).forEach(([n,s])=>{e.setAttributeNS(null,n,s)}),e}const xl=20,e7="http://www.w3.org/2000/svg";function t7(){const e=u=>us.document.createElementNS(e7,u),t=_r(e("svg"),{width:`${xl}`,height:`${xl}`,viewBox:`0 0 ${xl} ${xl}`,fill:"var(--actor-color, var(--foreground))"}),n=_r(e("g"),{clipPath:"url(#clip0_57_80)"}),s=_r(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.6622 15H12.3997C12.2129 14.9959 12.031 14.9396 11.8747 14.8375L8.04965 12.2H7.49956V19.1C7.4875 19.3348 7.3888 19.5568 7.22256 19.723C7.05632 19.8892 6.83435 19.9879 6.59956 20H2.04956C1.80193 19.9968 1.56535 19.8969 1.39023 19.7218C1.21511 19.5467 1.1153 19.3101 1.11206 19.0625V12.2H0.949652C0.824431 12.2017 0.700142 12.1783 0.584123 12.1311C0.468104 12.084 0.362708 12.014 0.274155 11.9255C0.185602 11.8369 0.115689 11.7315 0.0685419 11.6155C0.0213952 11.4995 -0.00202913 11.3752 -0.00034808 11.25V3.75C-0.00900498 3.62067 0.0092504 3.49095 0.0532651 3.36904C0.0972798 3.24712 0.166097 3.13566 0.255372 3.04168C0.344646 2.94771 0.452437 2.87327 0.571937 2.82307C0.691437 2.77286 0.82005 2.74798 0.949652 2.75H8.04965L11.8747 0.1625C12.031 0.0603649 12.2129 0.00407221 12.3997 0H15.6622C15.9098 0.00323746 16.1464 0.103049 16.3215 0.278167C16.4966 0.453286 16.5964 0.689866 16.5997 0.9375V3.25269C17.3969 3.42959 18.1345 3.83026 18.7211 4.41679C19.5322 5.22788 19.9878 6.32796 19.9878 7.47502C19.9878 8.62209 19.5322 9.72217 18.7211 10.5333C18.1345 11.1198 17.3969 11.5205 16.5997 11.6974V14.0125C16.6047 14.1393 16.5842 14.2659 16.5395 14.3847C16.4948 14.5035 16.4268 14.6121 16.3394 14.7042C16.252 14.7962 16.147 14.8698 16.0307 14.9206C15.9144 14.9714 15.7891 14.9984 15.6622 15ZM1.89695 10.325H1.88715V4.625H8.33715C8.52423 4.62301 8.70666 4.56654 8.86215 4.4625L12.6872 1.875H14.7247V13.125H12.6872L8.86215 10.4875C8.70666 10.3835 8.52423 10.327 8.33715 10.325H2.20217C2.15205 10.3167 2.10102 10.3125 2.04956 10.3125C1.9981 10.3125 1.94708 10.3167 1.89695 10.325ZM2.98706 12.2V18.1625H5.66206V12.2H2.98706ZM16.5997 9.93612V5.01393C16.6536 5.02355 16.7072 5.03495 16.7605 5.04814C17.1202 5.13709 17.4556 5.30487 17.7425 5.53934C18.0293 5.77381 18.2605 6.06912 18.4192 6.40389C18.578 6.73866 18.6603 7.10452 18.6603 7.47502C18.6603 7.84552 18.578 8.21139 18.4192 8.54616C18.2605 8.88093 18.0293 9.17624 17.7425 9.41071C17.4556 9.64518 17.1202 9.81296 16.7605 9.90191C16.7072 9.91509 16.6536 9.9265 16.5997 9.93612Z"});t.appendChild(n).appendChild(s);const a=e("defs"),i=_r(e("clipPath"),{id:"clip0_57_80"}),l=_r(e("rect"),{width:`${xl}`,height:`${xl}`,fill:"white"});return i.appendChild(l),a.appendChild(i),t.appendChild(a).appendChild(i).appendChild(l),t}function n7({triggerLabel:e,triggerAriaLabel:t,shadow:n,styleNonce:s}){const a=vt.createElement("button");if(a.type="button",a.className="widget__actor",a.ariaHidden="false",a.ariaLabel=t||e||LC,a.appendChild(t7()),e){const l=vt.createElement("span");l.appendChild(vt.createTextNode(e)),a.appendChild(l)}const i=ZU(s);return{el:a,appendToDom(){n.appendChild(i),n.appendChild(a)},removeFromDom(){a.remove(),i.remove()},show(){a.ariaHidden="false"},hide(){a.ariaHidden="true"}}}const DC="rgba(88, 74, 192, 1)",r7={foreground:"#2b2233",background:"#ffffff",accentForeground:"white",accentBackground:DC,successColor:"#268d75",errorColor:"#df3338",border:"1.5px solid rgba(41, 35, 47, 0.13)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(95%)"},L1={foreground:"#ebe6ef",background:"#29232f",accentForeground:"white",accentBackground:DC,successColor:"#2da98c",errorColor:"#f55459",border:"1.5px solid rgba(235, 230, 239, 0.15)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(150%)"};function $1(e){return`
  --foreground: ${e.foreground};
  --background: ${e.background};
  --accent-foreground: ${e.accentForeground};
  --accent-background: ${e.accentBackground};
  --success-color: ${e.successColor};
  --error-color: ${e.errorColor};
  --border: ${e.border};
  --box-shadow: ${e.boxShadow};
  --outline: ${e.outline};
  --interactive-filter: ${e.interactiveFilter};
  `}function s7({colorScheme:e,themeDark:t,themeLight:n,styleNonce:s}){const a=vt.createElement("style");return a.textContent=`
:host {
  --font-family: system-ui, 'Helvetica Neue', Arial, sans-serif;
  --font-size: 14px;
  --z-index: 100000;

  --page-margin: 16px;
  --inset: auto 0 0 auto;
  --actor-inset: var(--inset);

  font-family: var(--font-family);
  font-size: var(--font-size);

  ${e!=="system"?"color-scheme: only light;":""}

  ${$1(e==="dark"?{...L1,...t}:{...r7,...n})}
}

${e==="system"?`
@media (prefers-color-scheme: dark) {
  :host {
    ${$1({...L1,...t})}
  }
}`:""}
}
`,s&&a.setAttribute("nonce",s),a}const FC=({lazyLoadIntegration:e,getModalIntegration:t,getScreenshotIntegration:n})=>(({id:a="sentry-feedback",autoInject:i=!0,showBranding:l=!0,isEmailRequired:u=!1,isNameRequired:d=!1,showEmail:h=!0,showName:p=!0,enableScreenshot:m=!0,useSentryUser:g={email:"email",name:"username"},tags:y,styleNonce:b,scriptNonce:w,colorScheme:v="system",themeLight:j={},themeDark:E={},addScreenshotButtonLabel:k=zU,cancelButtonLabel:S=PU,confirmButtonLabel:P=OU,emailLabel:A=$U,emailPlaceholder:T=LU,formTitle:L=MU,isRequiredLabel:H=HU,messageLabel:R=FU,messagePlaceholder:M=DU,nameLabel:O=qU,namePlaceholder:F=UU,removeScreenshotButtonLabel:K=WU,submitButtonLabel:ae=AU,successMessageText:X=BU,triggerLabel:ee=LC,triggerAriaLabel:D="",highlightToolText:te=GU,hideToolText:V=VU,removeHighlightText:$=KU,onFormOpen:J,onFormClose:le,onSubmitSuccess:ve,onSubmitError:Ee,onFormSubmitted:De}={})=>{const Fe={id:a,autoInject:i,showBranding:l,isEmailRequired:u,isNameRequired:d,showEmail:h,showName:p,enableScreenshot:m,useSentryUser:g,tags:y,styleNonce:b,scriptNonce:w,colorScheme:v,themeDark:E,themeLight:j,triggerLabel:ee,triggerAriaLabel:D,cancelButtonLabel:S,submitButtonLabel:ae,confirmButtonLabel:P,formTitle:L,emailLabel:A,emailPlaceholder:T,messageLabel:R,messagePlaceholder:M,nameLabel:O,namePlaceholder:F,successMessageText:X,isRequiredLabel:H,addScreenshotButtonLabel:k,removeScreenshotButtonLabel:K,highlightToolText:te,hideToolText:V,removeHighlightText:$,onFormClose:le,onFormOpen:J,onSubmitError:Ee,onSubmitSuccess:ve,onFormSubmitted:De};let re=null,me=[];const Le=Ve=>{if(!re){const xt=vt.createElement("div");xt.id=String(Ve.id),vt.body.appendChild(xt),re=xt.attachShadow({mode:"open"}),re.appendChild(s7(Ve))}return re},En=async Ve=>{const xt=Ve.enableScreenshot&&XU();let yn,Xt;try{yn=(t?t():await e("feedbackModalIntegration",w))(),hy(yn)}catch{throw Cf&&W.error("[Feedback] Error when trying to load feedback integrations. Try using `feedbackSyncIntegration` in your `Sentry.init`."),new Error("[Feedback] Missing feedback modal integration!")}try{const tn=xt?n?n():await e("feedbackScreenshotIntegration",w):void 0;tn&&(Xt=tn(),hy(Xt))}catch{Cf&&W.error("[Feedback] Missing feedback screenshot integration. Proceeding without screenshots.")}const bt=yn.createDialog({options:{...Ve,onFormClose:()=>{var tn;bt==null||bt.close(),(tn=Ve.onFormClose)==null||tn.call(Ve)},onFormSubmitted:()=>{var tn;bt==null||bt.close(),(tn=Ve.onFormSubmitted)==null||tn.call(Ve)}},screenshotIntegration:Xt,sendFeedback:$C,shadow:Le(Ve)});return bt},Tr=(Ve,xt={})=>{const yn=Xh(Fe,xt),Xt=typeof Ve=="string"?vt.querySelector(Ve):typeof Ve.addEventListener=="function"?Ve:null;if(!Xt)throw Cf&&W.error("[Feedback] Unable to attach to target element"),new Error("Unable to attach to target element");let bt=null;const tn=async()=>{bt||(bt=await En({...yn,onFormSubmitted:()=>{var $t;bt==null||bt.removeFromDom(),($t=yn.onFormSubmitted)==null||$t.call(yn)}})),bt.appendToDom(),bt.open()};Xt.addEventListener("click",tn);const Ke=()=>{me=me.filter($t=>$t!==Ke),bt==null||bt.removeFromDom(),bt=null,Xt.removeEventListener("click",tn)};return me.push(Ke),Ke},fr=(Ve={})=>{const xt=Xh(Fe,Ve),yn=Le(xt),Xt=n7({triggerLabel:xt.triggerLabel,triggerAriaLabel:xt.triggerAriaLabel,shadow:yn,styleNonce:b});return Tr(Xt.el,{...xt,onFormOpen(){Xt.hide()},onFormClose(){Xt.show()},onFormSubmitted(){Xt.show()}}),Xt};return{name:"Feedback",setupOnce(){!um()||!Fe.autoInject||(vt.readyState==="loading"?vt.addEventListener("DOMContentLoaded",()=>fr().appendToDom()):fr().appendToDom())},attachTo:Tr,createWidget(Ve={}){const xt=fr(Xh(Fe,Ve));return xt.appendToDom(),xt},async createForm(Ve={}){return En(Xh(Fe,Ve))},remove(){var Ve;re&&((Ve=re.parentElement)==null||Ve.remove(),re=null),me.forEach(xt=>xt()),me=[]}}});function a7(){const e=ye();return e==null?void 0:e.getIntegrationByName("Feedback")}var rp,jt,UC,Yi,D1,qC,vy,Vu={},Qb=[],i7=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Xb=Array.isArray;function si(e,t){for(var n in t)e[n]=t[n];return e}function BC(e){var t=e.parentNode;t&&t.removeChild(e)}function Ze(e,t,n){var s,a,i,l={};for(i in t)i=="key"?s=t[i]:i=="ref"?a=t[i]:l[i]=t[i];if(arguments.length>2&&(l.children=arguments.length>3?rp.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(i in e.defaultProps)l[i]===void 0&&(l[i]=e.defaultProps[i]);return Tf(e,l,s,a,null)}function Tf(e,t,n,s,a){var i={type:e,props:t,key:n,ref:s,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:a??++UC,__i:-1,__u:0};return a==null&&jt.vnode!=null&&jt.vnode(i),i}function xd(e){return e.children}function Rf(e,t){this.props=e,this.context=t}function sc(e,t){if(t==null)return e.__?sc(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?sc(e):null}function o7(e,t,n){var s,a=e.__v,i=a.__e,l=e.__P;if(l)return(s=si({},a)).__v=a.__v+1,jt.vnode&&jt.vnode(s),Zb(l,s,a,e.__n,l.ownerSVGElement!==void 0,32&a.__u?[i]:null,t,i??sc(a),!!(32&a.__u),n),s.__.__k[s.__i]=s,s.__d=void 0,s.__e!=i&&HC(s),s}function HC(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return HC(e)}}function F1(e){(!e.__d&&(e.__d=!0)&&Yi.push(e)&&!dm.__r++||D1!==jt.debounceRendering)&&((D1=jt.debounceRendering)||qC)(dm)}function dm(){var e,t,n,s=[],a=[];for(Yi.sort(vy);e=Yi.shift();)e.__d&&(n=Yi.length,t=o7(e,s,a)||t,n===0||Yi.length>n?(wy(s,t,a),a.length=s.length=0,t=void 0,Yi.sort(vy)):t&&jt.__c&&jt.__c(t,Qb));t&&wy(s,t,a),dm.__r=0}function zC(e,t,n,s,a,i,l,u,d,h,p){var m,g,y,b,w,v=s&&s.__k||Qb,j=t.length;for(n.__d=d,l7(n,t,v),d=n.__d,m=0;m<j;m++)(y=n.__k[m])!=null&&typeof y!="boolean"&&typeof y!="function"&&(g=y.__i===-1?Vu:v[y.__i]||Vu,y.__i=m,Zb(e,y,g,a,i,l,u,d,h,p),b=y.__e,y.ref&&g.ref!=y.ref&&(g.ref&&ev(g.ref,null,y),p.push(y.ref,y.__c||b,y)),w==null&&b!=null&&(w=b),65536&y.__u||g.__k===y.__k?d=WC(y,d,e):typeof y.type=="function"&&y.__d!==void 0?d=y.__d:b&&(d=b.nextSibling),y.__d=void 0,y.__u&=-196609);n.__d=d,n.__e=w}function l7(e,t,n){var s,a,i,l,u,d=t.length,h=n.length,p=h,m=0;for(e.__k=[],s=0;s<d;s++)(a=e.__k[s]=(a=t[s])==null||typeof a=="boolean"||typeof a=="function"?null:typeof a=="string"||typeof a=="number"||typeof a=="bigint"||a.constructor==String?Tf(null,a,null,null,a):Xb(a)?Tf(xd,{children:a},null,null,null):a.constructor===void 0&&a.__b>0?Tf(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):a)!=null?(a.__=e,a.__b=e.__b+1,u=c7(a,n,l=s+m,p),a.__i=u,i=null,u!==-1&&(p--,(i=n[u])&&(i.__u|=131072)),i==null||i.__v===null?(u==-1&&m--,typeof a.type!="function"&&(a.__u|=65536)):u!==l&&(u===l+1?m++:u>l?p>d-l?m+=u-l:m--:m=u<l&&u==l-1?u-l:0,u!==s+m&&(a.__u|=65536))):(i=n[s])&&i.key==null&&i.__e&&(i.__e==e.__d&&(e.__d=sc(i)),_y(i,i,!1),n[s]=null,p--);if(p)for(s=0;s<h;s++)(i=n[s])!=null&&(131072&i.__u)==0&&(i.__e==e.__d&&(e.__d=sc(i)),_y(i,i))}function WC(e,t,n){var s,a;if(typeof e.type=="function"){for(s=e.__k,a=0;s&&a<s.length;a++)s[a]&&(s[a].__=e,t=WC(s[a],t,n));return t}e.__e!=t&&(n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType===8);return t}function c7(e,t,n,s){var a=e.key,i=e.type,l=n-1,u=n+1,d=t[n];if(d===null||d&&a==d.key&&i===d.type)return n;if(s>(d!=null&&(131072&d.__u)==0?1:0))for(;l>=0||u<t.length;){if(l>=0){if((d=t[l])&&(131072&d.__u)==0&&a==d.key&&i===d.type)return l;l--}if(u<t.length){if((d=t[u])&&(131072&d.__u)==0&&a==d.key&&i===d.type)return u;u++}}return-1}function U1(e,t,n){t[0]==="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||i7.test(t)?n:n+"px"}function Zh(e,t,n,s,a){var i;e:if(t==="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof s=="string"&&(e.style.cssText=s=""),s)for(t in s)n&&t in n||U1(e.style,t,"");if(n)for(t in n)s&&n[t]===s[t]||U1(e.style,t,n[t])}else if(t[0]==="o"&&t[1]==="n")i=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=n,n?s?n.u=s.u:(n.u=Date.now(),e.addEventListener(t,i?B1:q1,i)):e.removeEventListener(t,i?B1:q1,i);else{if(a)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!=="width"&&t!=="height"&&t!=="href"&&t!=="list"&&t!=="form"&&t!=="tabIndex"&&t!=="download"&&t!=="rowSpan"&&t!=="colSpan"&&t!=="role"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!=="-"?e.removeAttribute(t):e.setAttribute(t,n))}}function q1(e){if(this.l){var t=this.l[e.type+!1];if(e.t){if(e.t<=t.u)return}else e.t=Date.now();return t(jt.event?jt.event(e):e)}}function B1(e){if(this.l)return this.l[e.type+!0](jt.event?jt.event(e):e)}function Zb(e,t,n,s,a,i,l,u,d,h){var p,m,g,y,b,w,v,j,E,k,S,P,A,T,L,H=t.type;if(t.constructor!==void 0)return null;128&n.__u&&(d=!!(32&n.__u),i=[u=t.__e=n.__e]),(p=jt.__b)&&p(t);e:if(typeof H=="function")try{if(j=t.props,E=(p=H.contextType)&&s[p.__c],k=p?E?E.props.value:p.__:s,n.__c?v=(m=t.__c=n.__c).__=m.__E:("prototype"in H&&H.prototype.render?t.__c=m=new H(j,k):(t.__c=m=new Rf(j,k),m.constructor=H,m.render=d7),E&&E.sub(m),m.props=j,m.state||(m.state={}),m.context=k,m.__n=s,g=m.__d=!0,m.__h=[],m._sb=[]),m.__s==null&&(m.__s=m.state),H.getDerivedStateFromProps!=null&&(m.__s==m.state&&(m.__s=si({},m.__s)),si(m.__s,H.getDerivedStateFromProps(j,m.__s))),y=m.props,b=m.state,m.__v=t,g)H.getDerivedStateFromProps==null&&m.componentWillMount!=null&&m.componentWillMount(),m.componentDidMount!=null&&m.__h.push(m.componentDidMount);else{if(H.getDerivedStateFromProps==null&&j!==y&&m.componentWillReceiveProps!=null&&m.componentWillReceiveProps(j,k),!m.__e&&(m.shouldComponentUpdate!=null&&m.shouldComponentUpdate(j,m.__s,k)===!1||t.__v===n.__v)){for(t.__v!==n.__v&&(m.props=j,m.state=m.__s,m.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.forEach(function(R){R&&(R.__=t)}),S=0;S<m._sb.length;S++)m.__h.push(m._sb[S]);m._sb=[],m.__h.length&&l.push(m);break e}m.componentWillUpdate!=null&&m.componentWillUpdate(j,m.__s,k),m.componentDidUpdate!=null&&m.__h.push(function(){m.componentDidUpdate(y,b,w)})}if(m.context=k,m.props=j,m.__P=e,m.__e=!1,P=jt.__r,A=0,"prototype"in H&&H.prototype.render){for(m.state=m.__s,m.__d=!1,P&&P(t),p=m.render(m.props,m.state,m.context),T=0;T<m._sb.length;T++)m.__h.push(m._sb[T]);m._sb=[]}else do m.__d=!1,P&&P(t),p=m.render(m.props,m.state,m.context),m.state=m.__s;while(m.__d&&++A<25);m.state=m.__s,m.getChildContext!=null&&(s=si(si({},s),m.getChildContext())),g||m.getSnapshotBeforeUpdate==null||(w=m.getSnapshotBeforeUpdate(y,b)),zC(e,Xb(L=p!=null&&p.type===xd&&p.key==null?p.props.children:p)?L:[L],t,n,s,a,i,l,u,d,h),m.base=t.__e,t.__u&=-161,m.__h.length&&l.push(m),v&&(m.__E=m.__=null)}catch(R){t.__v=null,d||i!=null?(t.__e=u,t.__u|=d?160:32,i[i.indexOf(u)]=null):(t.__e=n.__e,t.__k=n.__k),jt.__e(R,t,n)}else i==null&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=u7(n.__e,t,n,s,a,i,l,d,h);(p=jt.diffed)&&p(t)}function wy(e,t,n){for(var s=0;s<n.length;s++)ev(n[s],n[++s],n[++s]);jt.__c&&jt.__c(t,e),e.some(function(a){try{e=a.__h,a.__h=[],e.some(function(i){i.call(a)})}catch(i){jt.__e(i,a.__v)}})}function u7(e,t,n,s,a,i,l,u,d){var h,p,m,g,y,b,w,v=n.props,j=t.props,E=t.type;if(E==="svg"&&(a=!0),i!=null){for(h=0;h<i.length;h++)if((y=i[h])&&"setAttribute"in y==!!E&&(E?y.localName===E:y.nodeType===3)){e=y,i[h]=null;break}}if(e==null){if(E===null)return document.createTextNode(j);e=a?document.createElementNS("http://www.w3.org/2000/svg",E):document.createElement(E,j.is&&j),i=null,u=!1}if(E===null)v===j||u&&e.data===j||(e.data=j);else{if(i=i&&rp.call(e.childNodes),v=n.props||Vu,!u&&i!=null)for(v={},h=0;h<e.attributes.length;h++)v[(y=e.attributes[h]).name]=y.value;for(h in v)y=v[h],h=="children"||(h=="dangerouslySetInnerHTML"?m=y:h==="key"||h in j||Zh(e,h,null,y,a));for(h in j)y=j[h],h=="children"?g=y:h=="dangerouslySetInnerHTML"?p=y:h=="value"?b=y:h=="checked"?w=y:h==="key"||u&&typeof y!="function"||v[h]===y||Zh(e,h,y,v[h],a);if(p)u||m&&(p.__html===m.__html||p.__html===e.innerHTML)||(e.innerHTML=p.__html),t.__k=[];else if(m&&(e.innerHTML=""),zC(e,Xb(g)?g:[g],t,n,s,a&&E!=="foreignObject",i,l,i?i[0]:n.__k&&sc(n,0),u,d),i!=null)for(h=i.length;h--;)i[h]!=null&&BC(i[h]);u||(h="value",b!==void 0&&(b!==e[h]||E==="progress"&&!b||E==="option"&&b!==v[h])&&Zh(e,h,b,v[h],!1),h="checked",w!==void 0&&w!==e[h]&&Zh(e,h,w,v[h],!1))}return e}function ev(e,t,n){try{typeof e=="function"?e(t):e.current=t}catch(s){jt.__e(s,n)}}function _y(e,t,n){var s,a;if(jt.unmount&&jt.unmount(e),(s=e.ref)&&(s.current&&s.current!==e.__e||ev(s,null,t)),(s=e.__c)!=null){if(s.componentWillUnmount)try{s.componentWillUnmount()}catch(i){jt.__e(i,t)}s.base=s.__P=null,e.__c=void 0}if(s=e.__k)for(a=0;a<s.length;a++)s[a]&&_y(s[a],t,n||typeof e.type!="function");n||e.__e==null||BC(e.__e),e.__=e.__e=e.__d=void 0}function d7(e,t,n){return this.constructor(e,n)}function h7(e,t,n){var s,a,i,l;jt.__&&jt.__(e,t),a=(s=!1)?null:t.__k,i=[],l=[],Zb(t,e=t.__k=Ze(xd,null,[e]),a||Vu,Vu,t.ownerSVGElement!==void 0,a?null:t.firstChild?rp.call(t.childNodes):null,i,a?a.__e:t.firstChild,s,l),e.__d=void 0,wy(i,e,l)}rp=Qb.slice,jt={__e:function(e,t,n,s){for(var a,i,l;t=t.__;)if((a=t.__c)&&!a.__)try{if((i=a.constructor)&&i.getDerivedStateFromError!=null&&(a.setState(i.getDerivedStateFromError(e)),l=a.__d),a.componentDidCatch!=null&&(a.componentDidCatch(e,s||{}),l=a.__d),l)return a.__E=a}catch(u){e=u}throw e}},UC=0,Rf.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=si({},this.state),typeof e=="function"&&(e=e(si({},n),this.props)),e&&si(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),F1(this))},Rf.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),F1(this))},Rf.prototype.render=xd,Yi=[],qC=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,vy=function(e,t){return e.__v.__b-t.__v.__b},dm.__r=0;var pa,wt,Zx,H1,ac=0,GC=[],If=[],qt=jt,z1=qt.__b,W1=qt.__r,G1=qt.diffed,V1=qt.__c,K1=qt.unmount,Y1=qt.__;function Lo(e,t){qt.__h&&qt.__h(wt,e,ac||t),ac=0;var n=wt.__H||(wt.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({__V:If}),n.__[e]}function Zi(e){return ac=1,VC(YC,e)}function VC(e,t,n){var s=Lo(pa++,2);if(s.t=e,!s.__c&&(s.__=[n?n(t):YC(void 0,t),function(u){var d=s.__N?s.__N[0]:s.__[0],h=s.t(d,u);d!==h&&(s.__N=[h,s.__[1]],s.__c.setState({}))}],s.__c=wt,!wt.u)){var a=function(u,d,h){if(!s.__c.__H)return!0;var p=s.__c.__H.__.filter(function(g){return!!g.__c});if(p.every(function(g){return!g.__N}))return!i||i.call(this,u,d,h);var m=!1;return p.forEach(function(g){if(g.__N){var y=g.__[0];g.__=g.__N,g.__N=void 0,y!==g.__[0]&&(m=!0)}}),!(!m&&s.__c.props===u)&&(!i||i.call(this,u,d,h))};wt.u=!0;var i=wt.shouldComponentUpdate,l=wt.componentWillUpdate;wt.componentWillUpdate=function(u,d,h){if(this.__e){var p=i;i=void 0,a(u,d,h),i=p}l&&l.call(this,u,d,h)},wt.shouldComponentUpdate=a}return s.__N||s.__}function f7(e,t){var n=Lo(pa++,3);!qt.__s&&tv(n.__H,t)&&(n.__=e,n.i=t,wt.__H.__h.push(n))}function KC(e,t){var n=Lo(pa++,4);!qt.__s&&tv(n.__H,t)&&(n.__=e,n.i=t,wt.__h.push(n))}function m7(e){return ac=5,yd(function(){return{current:e}},[])}function p7(e,t,n){ac=6,KC(function(){return typeof e=="function"?(e(t()),function(){return e(null)}):e?(e.current=t(),function(){return e.current=null}):void 0},n==null?n:n.concat(e))}function yd(e,t){var n=Lo(pa++,7);return tv(n.__H,t)?(n.__V=e(),n.i=t,n.__h=e,n.__V):n.__}function Ll(e,t){return ac=8,yd(function(){return e},t)}function g7(e){var t=wt.context[e.__c],n=Lo(pa++,9);return n.c=e,t?(n.__==null&&(n.__=!0,t.sub(wt)),t.props.value):e.__}function x7(e,t){qt.useDebugValue&&qt.useDebugValue(t?t(e):e)}function y7(e){var t=Lo(pa++,10),n=Zi();return t.__=e,wt.componentDidCatch||(wt.componentDidCatch=function(s,a){t.__&&t.__(s,a),n[1](s)}),[n[0],function(){n[1](void 0)}]}function b7(){var e=Lo(pa++,11);if(!e.__){for(var t=wt.__v;t!==null&&!t.__m&&t.__!==null;)t=t.__;var n=t.__m||(t.__m=[0,0]);e.__="P"+n[0]+"-"+n[1]++}return e.__}function v7(){for(var e;e=GC.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(Pf),e.__H.__h.forEach(jy),e.__H.__h=[]}catch(t){e.__H.__h=[],qt.__e(t,e.__v)}}qt.__b=function(e){wt=null,z1&&z1(e)},qt.__=function(e,t){t.__k&&t.__k.__m&&(e.__m=t.__k.__m),Y1&&Y1(e,t)},qt.__r=function(e){W1&&W1(e),pa=0;var t=(wt=e.__c).__H;t&&(Zx===wt?(t.__h=[],wt.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=If,n.__N=n.i=void 0})):(t.__h.forEach(Pf),t.__h.forEach(jy),t.__h=[],pa=0)),Zx=wt},qt.diffed=function(e){G1&&G1(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(GC.push(t)!==1&&H1===qt.requestAnimationFrame||((H1=qt.requestAnimationFrame)||w7)(v7)),t.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==If&&(n.__=n.__V),n.i=void 0,n.__V=If})),Zx=wt=null},qt.__c=function(e,t){t.some(function(n){try{n.__h.forEach(Pf),n.__h=n.__h.filter(function(s){return!s.__||jy(s)})}catch(s){t.some(function(a){a.__h&&(a.__h=[])}),t=[],qt.__e(s,n.__v)}}),V1&&V1(e,t)},qt.unmount=function(e){K1&&K1(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(s){try{Pf(s)}catch(a){t=a}}),n.__H=void 0,t&&qt.__e(t,n.__v))};var J1=typeof requestAnimationFrame=="function";function w7(e){var t,n=function(){clearTimeout(s),J1&&cancelAnimationFrame(t),setTimeout(e)},s=setTimeout(n,100);J1&&(t=requestAnimationFrame(n))}function Pf(e){var t=wt,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),wt=t}function jy(e){var t=wt;e.__c=e.__(),wt=t}function tv(e,t){return!e||e.length!==t.length||t.some(function(n,s){return n!==e[s]})}function YC(e,t){return typeof t=="function"?t(e):t}const _7=Object.defineProperty({__proto__:null,useCallback:Ll,useContext:g7,useDebugValue:x7,useEffect:f7,useErrorBoundary:y7,useId:b7,useImperativeHandle:p7,useLayoutEffect:KC,useMemo:yd,useReducer:VC,useRef:m7,useState:Zi},Symbol.toStringTag,{value:"Module"}),j7="http://www.w3.org/2000/svg";function N7(){const e=s=>vt.createElementNS(j7,s),t=_r(e("svg"),{width:"32",height:"30",viewBox:"0 0 72 66",fill:"inherit"}),n=_r(e("path"),{transform:"translate(11, 11)",d:"M29,2.26a4.67,4.67,0,0,0-8,0L14.42,13.53A32.21,32.21,0,0,1,32.17,40.19H27.55A27.68,27.68,0,0,0,12.09,17.47L6,28a15.92,15.92,0,0,1,9.23,12.17H4.62A.76.76,0,0,1,4,39.06l2.94-5a10.74,10.74,0,0,0-3.36-1.9l-2.91,5a4.54,4.54,0,0,0,1.69,6.24A4.66,4.66,0,0,0,4.62,44H19.15a19.4,19.4,0,0,0-8-17.31l2.31-4A23.87,23.87,0,0,1,23.76,44H36.07a35.88,35.88,0,0,0-16.41-31.8l4.67-8a.77.77,0,0,1,1.05-.27c.53.29,20.29,34.77,20.66,35.17a.76.76,0,0,1-.68,1.13H40.6q.09,1.91,0,3.81h4.78A4.59,4.59,0,0,0,50,39.43a4.49,4.49,0,0,0-.62-2.28Z"});return t.appendChild(n),t}function S7({options:e}){const t=yd(()=>({__html:N7().outerHTML}),[]);return Ze("h2",{class:"dialog__header"},Ze("span",{class:"dialog__title"},e.formTitle),e.showBranding?Ze("a",{class:"brand-link",target:"_blank",href:"https://sentry.io/welcome/",title:"Powered by Sentry",rel:"noopener noreferrer",dangerouslySetInnerHTML:t}):null)}function k7(e,t){const n=[];return t.isNameRequired&&!e.name&&n.push(t.nameLabel),t.isEmailRequired&&!e.email&&n.push(t.emailLabel),e.message||n.push(t.messageLabel),n}function e0(e,t){const n=e.get(t);return typeof n=="string"?n.trim():""}function E7({options:e,defaultEmail:t,defaultName:n,onFormClose:s,onSubmit:a,onSubmitSuccess:i,onSubmitError:l,showEmail:u,showName:d,screenshotInput:h}){const{tags:p,addScreenshotButtonLabel:m,removeScreenshotButtonLabel:g,cancelButtonLabel:y,emailLabel:b,emailPlaceholder:w,isEmailRequired:v,isNameRequired:j,messageLabel:E,messagePlaceholder:k,nameLabel:S,namePlaceholder:P,submitButtonLabel:A,isRequiredLabel:T}=e,[L,H]=Zi(!1),[R,M]=Zi(null),[O,F]=Zi(!1),K=h==null?void 0:h.input,[ae,X]=Zi(null),ee=Ll(V=>{X(V),F(!1)},[]),D=Ll(V=>{const $=k7(V,{emailLabel:b,isEmailRequired:v,isNameRequired:j,messageLabel:E,nameLabel:S});return $.length>0?M(`Please enter in the following required fields: ${$.join(", ")}`):M(null),$.length===0},[b,v,j,E,S]),te=Ll(async V=>{H(!0);try{if(V.preventDefault(),!(V.target instanceof HTMLFormElement))return;const $=new FormData(V.target),J=await(h&&O?h.value():void 0),le={name:e0($,"name"),email:e0($,"email"),message:e0($,"message"),attachments:J?[J]:void 0};if(!D(le))return;try{const ve=await a({name:le.name,email:le.email,message:le.message,source:YU,tags:p},{attachments:le.attachments});i(le,ve)}catch(ve){Cf&&W.error(ve),M(ve),l(ve)}}finally{H(!1)}},[h&&O,i,l]);return Ze("form",{class:"form",onSubmit:te},K&&O?Ze(K,{onError:ee}):null,Ze("fieldset",{class:"form__right","data-sentry-feedback":!0,disabled:L},Ze("div",{class:"form__top"},R?Ze("div",{class:"form__error-container"},R):null,d?Ze("label",{for:"name",class:"form__label"},Ze(t0,{label:S,isRequiredLabel:T,isRequired:j}),Ze("input",{class:"form__input",defaultValue:n,id:"name",name:"name",placeholder:P,required:j,type:"text"})):Ze("input",{"aria-hidden":!0,value:n,name:"name",type:"hidden"}),u?Ze("label",{for:"email",class:"form__label"},Ze(t0,{label:b,isRequiredLabel:T,isRequired:v}),Ze("input",{class:"form__input",defaultValue:t,id:"email",name:"email",placeholder:w,required:v,type:"email"})):Ze("input",{"aria-hidden":!0,value:t,name:"email",type:"hidden"}),Ze("label",{for:"message",class:"form__label"},Ze(t0,{label:E,isRequiredLabel:T,isRequired:!0}),Ze("textarea",{autoFocus:!0,class:"form__input form__input--textarea",id:"message",name:"message",placeholder:k,required:!0,rows:5})),K?Ze("label",{for:"screenshot",class:"form__label"},Ze("button",{class:"btn btn--default",disabled:L,type:"button",onClick:()=>{X(null),F(V=>!V)}},O?g:m),ae?Ze("div",{class:"form__error-container"},ae.message):null):null),Ze("div",{class:"btn-group"},Ze("button",{class:"btn btn--primary",disabled:L,type:"submit"},A),Ze("button",{class:"btn btn--default",disabled:L,type:"button",onClick:s},y))))}function t0({label:e,isRequired:t,isRequiredLabel:n}){return Ze("span",{class:"form__label__text"},e,t&&Ze("span",{class:"form__label__text--required"},n))}const ef=16,Q1=17,C7="http://www.w3.org/2000/svg";function T7(){const e=d=>us.document.createElementNS(C7,d),t=_r(e("svg"),{width:`${ef}`,height:`${Q1}`,viewBox:`0 0 ${ef} ${Q1}`,fill:"inherit"}),n=_r(e("g"),{clipPath:"url(#clip0_57_156)"}),s=_r(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.55544 15.1518C4.87103 16.0308 6.41775 16.5 8 16.5C10.1217 16.5 12.1566 15.6571 13.6569 14.1569C15.1571 12.6566 16 10.6217 16 8.5C16 6.91775 15.5308 5.37103 14.6518 4.05544C13.7727 2.73985 12.5233 1.71447 11.0615 1.10897C9.59966 0.503466 7.99113 0.34504 6.43928 0.653721C4.88743 0.962403 3.46197 1.72433 2.34315 2.84315C1.22433 3.96197 0.462403 5.38743 0.153721 6.93928C-0.15496 8.49113 0.00346625 10.0997 0.608967 11.5615C1.21447 13.0233 2.23985 14.2727 3.55544 15.1518ZM4.40546 3.1204C5.46945 2.40946 6.72036 2.03 8 2.03C9.71595 2.03 11.3616 2.71166 12.575 3.92502C13.7883 5.13838 14.47 6.78405 14.47 8.5C14.47 9.77965 14.0905 11.0306 13.3796 12.0945C12.6687 13.1585 11.6582 13.9878 10.476 14.4775C9.29373 14.9672 7.99283 15.0953 6.73777 14.8457C5.48271 14.596 4.32987 13.9798 3.42502 13.075C2.52018 12.1701 1.90397 11.0173 1.65432 9.76224C1.40468 8.50718 1.5328 7.20628 2.0225 6.02404C2.5122 4.8418 3.34148 3.83133 4.40546 3.1204Z"}),a=_r(e("path"),{d:"M6.68775 12.4297C6.78586 12.4745 6.89218 12.4984 7 12.5C7.11275 12.4955 7.22315 12.4664 7.32337 12.4145C7.4236 12.3627 7.51121 12.2894 7.58 12.2L12 5.63999C12.0848 5.47724 12.1071 5.28902 12.0625 5.11098C12.0178 4.93294 11.9095 4.77744 11.7579 4.67392C11.6064 4.57041 11.4221 4.52608 11.24 4.54931C11.0579 4.57254 10.8907 4.66173 10.77 4.79999L6.88 10.57L5.13 8.56999C5.06508 8.49566 4.98613 8.43488 4.89768 8.39111C4.80922 8.34735 4.713 8.32148 4.61453 8.31498C4.51605 8.30847 4.41727 8.32147 4.32382 8.35322C4.23038 8.38497 4.14413 8.43484 4.07 8.49999C3.92511 8.63217 3.83692 8.81523 3.82387 9.01092C3.81083 9.2066 3.87393 9.39976 4 9.54999L6.43 12.24C6.50187 12.3204 6.58964 12.385 6.68775 12.4297Z"});t.appendChild(n).append(a,s);const i=e("defs"),l=_r(e("clipPath"),{id:"clip0_57_156"}),u=_r(e("rect"),{width:`${ef}`,height:`${ef}`,fill:"white",transform:"translate(0 0.5)"});return l.appendChild(u),i.appendChild(l),t.appendChild(i).appendChild(l).appendChild(u),t}function R7({open:e,onFormSubmitted:t,...n}){const s=n.options,a=yd(()=>({__html:T7().outerHTML}),[]),[i,l]=Zi(null),u=Ll(()=>{i&&(clearTimeout(i),l(null)),t()},[i]),d=Ll((h,p)=>{n.onSubmitSuccess(h,p),l(setTimeout(()=>{t(),l(null)},QU))},[t]);return Ze(xd,null,i?Ze("div",{class:"success__position",onClick:u},Ze("div",{class:"success__content"},s.successMessageText,Ze("span",{class:"success__icon",dangerouslySetInnerHTML:a}))):Ze("dialog",{class:"dialog",onClick:s.onFormClose,open:e},Ze("div",{class:"dialog__position"},Ze("div",{class:"dialog__content",onClick:h=>{h.stopPropagation()}},Ze(S7,{options:s}),Ze(E7,{...n,onSubmitSuccess:d})))))}const I7=`
.dialog {
  position: fixed;
  z-index: var(--z-index);
  margin: 0;
  inset: 0;

  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0;
  height: 100vh;
  width: 100vw;

  color: var(--dialog-color, var(--foreground));
  fill: var(--dialog-color, var(--foreground));
  line-height: 1.75em;

  background-color: rgba(0, 0, 0, 0.05);
  border: none;
  inset: 0;
  opacity: 1;
  transition: opacity 0.2s ease-in-out;
}

.dialog__position {
  position: fixed;
  z-index: var(--z-index);
  inset: var(--dialog-inset);
  padding: var(--page-margin);
  display: flex;
  max-height: calc(100vh - (2 * var(--page-margin)));
}
@media (max-width: 600px) {
  .dialog__position {
    inset: var(--page-margin);
    padding: 0;
  }
}

.dialog__position:has(.editor) {
  inset: var(--page-margin);
  padding: 0;
}

.dialog:not([open]) {
  opacity: 0;
  pointer-events: none;
  visibility: hidden;
}
.dialog:not([open]) .dialog__content {
  transform: translate(0, -16px) scale(0.98);
}

.dialog__content {
  display: flex;
  flex-direction: column;
  gap: 16px;
  padding: var(--dialog-padding, 24px);
  max-width: 100%;
  width: 100%;
  max-height: 100%;
  overflow: auto;

  background: var(--dialog-background, var(--background));
  border-radius: var(--dialog-border-radius, 20px);
  border: var(--dialog-border, var(--border));
  box-shadow: var(--dialog-box-shadow, var(--box-shadow));
  transform: translate(0, 0) scale(1);
  transition: transform 0.2s ease-in-out;
}

`,P7=`
.dialog__header {
  display: flex;
  gap: 4px;
  justify-content: space-between;
  font-weight: var(--dialog-header-weight, 600);
  margin: 0;
}
.dialog__title {
  align-self: center;
  width: var(--form-width, 272px);
}

@media (max-width: 600px) {
  .dialog__title {
    width: auto;
  }
}

.dialog__position:has(.editor) .dialog__title {
  width: auto;
}


.brand-link {
  display: inline-flex;
}
.brand-link:focus-visible {
  outline: var(--outline);
}
`,A7=`
.form {
  display: flex;
  overflow: auto;
  flex-direction: row;
  gap: 16px;
  flex: 1 0;
}

.form fieldset {
  border: none;
  margin: 0;
  padding: 0;
}

.form__right {
  flex: 0 0 auto;
  display: flex;
  overflow: auto;
  flex-direction: column;
  justify-content: space-between;
  gap: 20px;
  width: var(--form-width, 100%);
}

.dialog__position:has(.editor) .form__right {
  width: var(--form-width, 272px);
}

.form__top {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.form__error-container {
  color: var(--error-color);
  fill: var(--error-color);
}

.form__label {
  display: flex;
  flex-direction: column;
  gap: 4px;
  margin: 0px;
}

.form__label__text {
  display: flex;
  gap: 4px;
  align-items: center;
}

.form__label__text--required {
  font-size: 0.85em;
}

.form__input {
  font-family: inherit;
  line-height: inherit;
  background: transparent;
  box-sizing: border-box;
  border: var(--input-border, var(--border));
  border-radius: var(--input-border-radius, 6px);
  color: var(--input-color, inherit);
  fill: var(--input-color, inherit);
  font-size: var(--input-font-size, inherit);
  font-weight: var(--input-font-weight, 500);
  padding: 6px 12px;
}

.form__input::placeholder {
  opacity: 0.65;
  color: var(--input-placeholder-color, inherit);
  filter: var(--interactive-filter);
}

.form__input:focus-visible {
  outline: var(--input-focus-outline, var(--outline));
}

.form__input--textarea {
  font-family: inherit;
  resize: vertical;
}

.error {
  color: var(--error-color);
  fill: var(--error-color);
}
`,O7=`
.btn-group {
  display: grid;
  gap: 8px;
}

.btn {
  line-height: inherit;
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  cursor: pointer;
  font-family: inherit;
  font-size: var(--button-font-size, inherit);
  font-weight: var(--button-font-weight, 600);
  padding: var(--button-padding, 6px 16px);
}
.btn[disabled] {
  opacity: 0.6;
  pointer-events: none;
}

.btn--primary {
  color: var(--button-primary-color, var(--accent-foreground));
  fill: var(--button-primary-color, var(--accent-foreground));
  background: var(--button-primary-background, var(--accent-background));
  border: var(--button-primary-border, var(--border));
  border-radius: var(--button-primary-border-radius, 6px);
  font-weight: var(--button-primary-font-weight, 500);
}
.btn--primary:hover {
  color: var(--button-primary-hover-color, var(--accent-foreground));
  fill: var(--button-primary-hover-color, var(--accent-foreground));
  background: var(--button-primary-hover-background, var(--accent-background));
  filter: var(--interactive-filter);
}
.btn--primary:focus-visible {
  background: var(--button-primary-hover-background, var(--accent-background));
  filter: var(--interactive-filter);
  outline: var(--button-primary-focus-outline, var(--outline));
}

.btn--default {
  color: var(--button-color, var(--foreground));
  fill: var(--button-color, var(--foreground));
  background: var(--button-background, var(--background));
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  font-weight: var(--button-font-weight, 500);
}
.btn--default:hover {
  color: var(--button-color, var(--foreground));
  fill: var(--button-color, var(--foreground));
  background: var(--button-hover-background, var(--background));
  filter: var(--interactive-filter);
}
.btn--default:focus-visible {
  background: var(--button-hover-background, var(--background));
  filter: var(--interactive-filter);
  outline: var(--button-focus-outline, var(--outline));
}
`,M7=`
.success__position {
  position: fixed;
  inset: var(--dialog-inset);
  padding: var(--page-margin);
  z-index: var(--z-index);
}
.success__content {
  background: var(--success-background, var(--background));
  border: var(--success-border, var(--border));
  border-radius: var(--success-border-radius, 1.7em/50%);
  box-shadow: var(--success-box-shadow, var(--box-shadow));
  font-weight: var(--success-font-weight, 600);
  color: var(--success-color);
  fill: var(--success-color);
  padding: 12px 24px;
  line-height: 1.75em;

  display: grid;
  align-items: center;
  grid-auto-flow: column;
  gap: 6px;
  cursor: default;
}

.success__icon {
  display: flex;
}
`;function L7(e){const t=vt.createElement("style");return t.textContent=`
:host {
  --dialog-inset: var(--inset);
}

${I7}
${P7}
${A7}
${O7}
${M7}
`,e&&t.setAttribute("nonce",e),t}function $7(){const e=We().getUser(),t=an().getUser(),n=oa().getUser();return e&&Object.keys(e).length?e:t&&Object.keys(t).length?t:n}const D7=(()=>({name:"FeedbackModal",setupOnce(){},createDialog:({options:e,screenshotIntegration:t,sendFeedback:n,shadow:s})=>{const a=s,i=e.useSentryUser,l=$7(),u=vt.createElement("div"),d=L7(e.styleNonce);let h="";const p={get el(){return u},appendToDom(){!a.contains(d)&&!a.contains(u)&&(a.appendChild(d),a.appendChild(u))},removeFromDom(){u.remove(),d.remove(),vt.body.style.overflow=h},open(){var y,b;g(!0),(y=e.onFormOpen)==null||y.call(e),(b=ye())==null||b.emit("openFeedbackWidget"),h=vt.body.style.overflow,vt.body.style.overflow="hidden"},close(){g(!1),vt.body.style.overflow=h}},m=t==null?void 0:t.createInput({h:Ze,hooks:_7,dialog:p,options:e}),g=y=>{h7(Ze(R7,{options:e,screenshotInput:m,showName:e.showName||e.isNameRequired,showEmail:e.showEmail||e.isEmailRequired,defaultName:String(i&&(l==null?void 0:l[i.name])||""),defaultEmail:String(i&&(l==null?void 0:l[i.email])||""),onFormClose:()=>{var b;g(!1),(b=e.onFormClose)==null||b.call(e)},onSubmit:n,onSubmitSuccess:(b,w)=>{var v;g(!1),(v=e.onSubmitSuccess)==null||v.call(e,b,w)},onSubmitError:b=>{var w;(w=e.onSubmitError)==null||w.call(e,b)},onFormSubmitted:()=>{var b;(b=e.onFormSubmitted)==null||b.call(e)},open:y}),u)};return p}}));function F7({h:e}){return function(){return e("svg",{"data-test-id":"icon-close",viewBox:"0 0 16 16",fill:"#2B2233",height:"25px",width:"25px"},e("circle",{r:"7",cx:"8",cy:"8",fill:"white"}),e("path",{strokeWidth:"1.5",d:"M8,16a8,8,0,1,1,8-8A8,8,0,0,1,8,16ZM8,1.53A6.47,6.47,0,1,0,14.47,8,6.47,6.47,0,0,0,8,1.53Z"}),e("path",{strokeWidth:"1.5",d:"M5.34,11.41a.71.71,0,0,1-.53-.22.74.74,0,0,1,0-1.06l5.32-5.32a.75.75,0,0,1,1.06,1.06L5.87,11.19A.74.74,0,0,1,5.34,11.41Z"}),e("path",{strokeWidth:"1.5",d:"M10.66,11.41a.74.74,0,0,1-.53-.22L4.81,5.87A.75.75,0,0,1,5.87,4.81l5.32,5.32a.74.74,0,0,1,0,1.06A.71.71,0,0,1,10.66,11.41Z"}))}}function U7(e){const t=vt.createElement("style"),n="#1A141F",s="#302735";return t.textContent=`
.editor {
  display: flex;
  flex-grow: 1;
  flex-direction: column;
}

.editor__image-container {
  justify-items: center;
  padding: 15px;
  position: relative;
  height: 100%;
  border-radius: var(--menu-border-radius, 6px);

  background-color: ${n};
  background-image: repeating-linear-gradient(
      -145deg,
      transparent,
      transparent 8px,
      ${n} 8px,
      ${n} 11px
    ),
    repeating-linear-gradient(
      -45deg,
      transparent,
      transparent 15px,
      ${s} 15px,
      ${s} 16px
    );
}

.editor__canvas-container {
  width: 100%;
  height: 100%;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
}

.editor__canvas-container > * {
  object-fit: contain;
  position: absolute;
}

.editor__tool-container {
  padding-top: 8px;
  display: flex;
  justify-content: center;
}

.editor__tool-bar {
  display: flex;
  gap: 8px;
}

.editor__tool {
  display: flex;
  padding: 8px 12px;
  justify-content: center;
  align-items: center;
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  background: var(--button-background, var(--background));
  color: var(--button-color, var(--foreground));
}

.editor__tool--active {
  background: var(--button-primary-background, var(--accent-background));
  color: var(--button-primary-color, var(--accent-foreground));
}

.editor__rect {
  position: absolute;
  z-index: 2;
}

.editor__rect button {
  opacity: 0;
  position: absolute;
  top: -12px;
  right: -12px;
  cursor: pointer;
  padding: 0;
  z-index: 3;
  border: none;
  background: none;
}

.editor__rect:hover button {
  opacity: 1;
}
`,e&&t.setAttribute("nonce",e),t}function q7({h:e}){return function({action:n,setAction:s,options:a}){return e("div",{class:"editor__tool-container"},e("div",{class:"editor__tool-bar"},e("button",{type:"button",class:`editor__tool ${n==="highlight"?"editor__tool--active":""}`,onClick:()=>{s(n==="highlight"?"":"highlight")}},a.highlightToolText),e("button",{type:"button",class:`editor__tool ${n==="hide"?"editor__tool--active":""}`,onClick:()=>{s(n==="hide"?"":"hide")}},a.hideToolText)))}}function B7({hooks:e}){function t(){const[n,s]=e.useState(us.devicePixelRatio??1);return e.useEffect(()=>{const a=()=>{s(us.devicePixelRatio)},i=matchMedia(`(resolution: ${us.devicePixelRatio}dppx)`);return i.addEventListener("change",a),()=>{i.removeEventListener("change",a)}},[]),n}return function({onBeforeScreenshot:s,onScreenshot:a,onAfterScreenshot:i,onError:l}){const u=t();e.useEffect(()=>{(async()=>{s();const h=await ku.mediaDevices.getDisplayMedia({video:{width:us.innerWidth*u,height:us.innerHeight*u},audio:!1,monitorTypeSurfaces:"exclude",preferCurrentTab:!0,selfBrowserSurface:"include",surfaceSwitching:"exclude"}),p=vt.createElement("video");await new Promise((m,g)=>{p.srcObject=h,p.onloadedmetadata=()=>{a(p,u),h.getTracks().forEach(y=>y.stop()),m()},p.play().catch(g)}),i()})().catch(l)},[])}}function H7(e,t,n){switch(e.type){case"highlight":{t.shadowColor="rgba(0, 0, 0, 0.7)",t.shadowBlur=50,t.fillStyle=n,t.fillRect(e.x-1,e.y-1,e.w+2,e.h+2),t.clearRect(e.x,e.y,e.w,e.h);break}case"hide":t.fillStyle="rgb(0, 0, 0)",t.fillRect(e.x,e.y,e.w,e.h);break}}function Wa(e,t,n){if(!e)return;const s=e.getContext("2d",t);s&&n(e,s)}function n0(e,t){Wa(e,{alpha:!0},(n,s)=>{s.drawImage(t,0,0,t.width,t.height,0,0,n.width,n.height)})}function r0(e,t,n){Wa(e,{alpha:!0},(s,a)=>{n.length&&(a.fillStyle="rgba(0, 0, 0, 0.25)",a.fillRect(0,0,s.width,s.height)),n.forEach(i=>{H7(i,a,t)})})}function z7({h:e,hooks:t,outputBuffer:n,dialog:s,options:a}){const i=B7({hooks:t}),l=q7({h:e}),u=F7({h:e}),d={__html:U7(a.styleNonce).innerText},h=s.el.style,p=({screenshot:m})=>{const[g,y]=t.useState("highlight"),[b,w]=t.useState([]),v=t.useRef(null),j=t.useRef(null),E=t.useRef(null),k=t.useRef(null),[S,P]=t.useState(1),A=t.useMemo(()=>{const O=vt.getElementById(a.id);if(!O)return"white";const F=getComputedStyle(O);return F.getPropertyValue("--button-primary-background")||F.getPropertyValue("--accent-background")},[a.id]);t.useLayoutEffect(()=>{const O=()=>{const F=v.current;F&&(Wa(m.canvas,{alpha:!1},K=>{const ae=Math.min(F.clientWidth/K.width,F.clientHeight/K.height);P(ae)}),(F.clientHeight===0||F.clientWidth===0)&&setTimeout(O,0))};return O(),us.addEventListener("resize",O),()=>{us.removeEventListener("resize",O)}},[m]);const T=t.useCallback((O,F)=>{Wa(O,{alpha:!0},(K,ae)=>{ae.scale(F,F),K.width=m.canvas.width,K.height=m.canvas.height})},[m]);t.useEffect(()=>{T(j.current,m.dpi),n0(j.current,m.canvas)},[m]),t.useEffect(()=>{T(E.current,m.dpi),Wa(E.current,{alpha:!0},(O,F)=>{F.clearRect(0,0,O.width,O.height)}),r0(E.current,A,b)},[b,A]),t.useEffect(()=>{T(n,m.dpi),n0(n,m.canvas),Wa(vt.createElement("canvas"),{alpha:!0},(O,F)=>{F.scale(m.dpi,m.dpi),O.width=m.canvas.width,O.height=m.canvas.height,r0(O,A,b),n0(n,O)})},[b,m,A]);const L=O=>{if(!g||!k.current)return;const F=k.current.getBoundingClientRect(),K={type:g,x:O.offsetX/S,y:O.offsetY/S},ae=(D,te)=>{const V=(te.clientX-F.x)/S,$=(te.clientY-F.y)/S;return{type:D.type,x:Math.min(D.x,V),y:Math.min(D.y,$),w:Math.abs(V-D.x),h:Math.abs($-D.y)}},X=D=>{Wa(E.current,{alpha:!0},(te,V)=>{V.clearRect(0,0,te.width,te.height)}),r0(E.current,A,[...b,ae(K,D)])},ee=D=>{const te=ae(K,D);te.w*S>=1&&te.h*S>=1&&w(V=>[...V,te]),vt.removeEventListener("mousemove",X),vt.removeEventListener("mouseup",ee)};vt.addEventListener("mousemove",X),vt.addEventListener("mouseup",ee)},H=t.useCallback(O=>F=>{F.preventDefault(),F.stopPropagation(),w(K=>{const ae=[...K];return ae.splice(O,1),ae})},[]),R={width:`${m.canvas.width*S}px`,height:`${m.canvas.height*S}px`},M=O=>{O.stopPropagation()};return e("div",{class:"editor"},e("style",{nonce:a.styleNonce,dangerouslySetInnerHTML:d}),e("div",{class:"editor__image-container"},e("div",{class:"editor__canvas-container",ref:v},e("canvas",{ref:j,id:"background",style:R}),e("canvas",{ref:E,id:"foreground",style:R}),e("div",{ref:k,onMouseDown:L,style:R},b.map((O,F)=>e("div",{key:F,class:"editor__rect",style:{top:`${O.y*S}px`,left:`${O.x*S}px`,width:`${O.w*S}px`,height:`${O.h*S}px`}},e("button",{"aria-label":a.removeHighlightText,onClick:H(F),onMouseDown:M,onMouseUp:M,type:"button"},e(u,null))))))),e(l,{options:a,action:g,setAction:y}))};return function({onError:g}){const[y,b]=t.useState();return i({onBeforeScreenshot:t.useCallback(()=>{h.display="none"},[]),onScreenshot:t.useCallback((w,v)=>{Wa(vt.createElement("canvas"),{alpha:!1},(j,E)=>{E.scale(v,v),j.width=w.videoWidth,j.height=w.videoHeight,E.drawImage(w,0,0,j.width,j.height),b({canvas:j,dpi:v})}),n.width=w.videoWidth,n.height=w.videoHeight},[]),onAfterScreenshot:t.useCallback(()=>{h.display="block"},[]),onError:t.useCallback(w=>{h.display="block",g(w)},[])}),y?e(p,{screenshot:y}):e("div",null)}}const W7=(()=>({name:"FeedbackScreenshot",setupOnce(){},createInput:({h:e,hooks:t,dialog:n,options:s})=>{const a=vt.createElement("canvas");return{input:z7({h:e,hooks:t,outputBuffer:a,dialog:n,options:s}),value:async()=>{const i=await new Promise(l=>{a.toBlob(l,"image/png")});if(i)return{data:new Uint8Array(await i.arrayBuffer()),filename:"screenshot.png",contentType:"application/png"}}}}})),be=Ae;let Ny=0;function JC(){return Ny>0}function G7(){Ny++,setTimeout(()=>{Ny--})}function ic(e,t={}){function n(a){return typeof a=="function"}if(!n(e))return e;try{const a=e.__sentry_wrapped__;if(a)return typeof a=="function"?a:e;if(bb(e))return e}catch{return e}const s=function(...a){try{const i=a.map(l=>ic(l,t));return e.apply(this,i)}catch(i){throw G7(),hr(l=>{l.addEventProcessor(u=>(t.mechanism&&(ry(u,void 0),fa(u,t.mechanism)),u.extra={...u.extra,arguments:a},u)),dt(i)}),i}};try{for(const a in e)Object.prototype.hasOwnProperty.call(e,a)&&(s[a]=e[a])}catch{}Q2(s,e),hn(e,"__sentry_wrapped__",s);try{Object.getOwnPropertyDescriptor(s,"name").configurable&&Object.defineProperty(s,"name",{get(){return e.name}})}catch{}return s}function nv(){const e=Oo(),{referrer:t}=be.document||{},{userAgent:n}=be.navigator||{},s={...t&&{Referer:t},...n&&{"User-Agent":n}};return{url:e,headers:s}}const V7={replayIntegration:"replay",replayCanvasIntegration:"replay-canvas",feedbackIntegration:"feedback",feedbackModalIntegration:"feedback-modal",feedbackScreenshotIntegration:"feedback-screenshot",captureConsoleIntegration:"captureconsole",contextLinesIntegration:"contextlines",linkedErrorsIntegration:"linkederrors",dedupeIntegration:"dedupe",extraErrorDataIntegration:"extraerrordata",graphqlClientIntegration:"graphqlclient",httpClientIntegration:"httpclient",reportingObserverIntegration:"reportingobserver",rewriteFramesIntegration:"rewriteframes",browserProfilingIntegration:"browserprofiling",moduleMetadataIntegration:"modulemetadata",instrumentAnthropicAiClient:"instrumentanthropicaiclient",instrumentOpenAiClient:"instrumentopenaiclient",instrumentGoogleGenAIClient:"instrumentgooglegenaiclient",instrumentLangGraph:"instrumentlanggraph",createLangChainCallbackHandler:"createlangchaincallbackhandler"},X1=be;async function QC(e,t){const n=V7[e],s=X1.Sentry=X1.Sentry||{};if(!n)throw new Error(`Cannot lazy load integration: ${e}`);const a=s[e];if(typeof a=="function"&&!("_isShim"in a))return a;const i=K7(n),l=be.document.createElement("script");l.src=i,l.crossOrigin="anonymous",l.referrerPolicy="strict-origin",t&&l.setAttribute("nonce",t);const u=new Promise((m,g)=>{l.addEventListener("load",()=>m()),l.addEventListener("error",g)}),d=be.document.currentScript,h=be.document.body||be.document.head||(d==null?void 0:d.parentElement);if(h)h.appendChild(l);else throw new Error(`Could not find parent element to insert lazy-loaded ${e} script`);try{await u}catch{throw new Error(`Error when loading integration: ${e}`)}const p=s[e];if(typeof p!="function")throw new Error(`Could not load integration: ${e}`);return p}function K7(e){var s;const t=ye(),n=((s=t==null?void 0:t.getOptions())==null?void 0:s.cdnBaseUrl)||"https://browser.sentry-cdn.com";return new URL(`/${sa}/${e}.min.js`,n).toString()}const Y7=FC({lazyLoadIntegration:QC}),Z1=FC({getModalIntegration:()=>D7,getScreenshotIntegration:()=>W7});function sp(e,t){const n=rv(e,t),s={type:eq(t),value:tq(t)};return n.length&&(s.stacktrace={frames:n}),s.type===void 0&&s.value===""&&(s.value="Unrecoverable error caught"),s}function J7(e,t,n,s){const a=ye(),i=a==null?void 0:a.getOptions().normalizeDepth,l=sq(t),u={__serialized__:NE(t,i)};if(l)return{exception:{values:[sp(e,l)]},extra:u};const d={exception:{values:[{type:Fm(t)?t.constructor.name:s?"UnhandledRejection":"Error",value:nq(t,{isUnhandledRejection:s})}]},extra:u};if(n){const h=rv(e,n);h.length&&(d.exception.values[0].stacktrace={frames:h})}return d}function s0(e,t){return{exception:{values:[sp(e,t)]}}}function rv(e,t){const n=t.stacktrace||t.stack||"",s=X7(t),a=Z7(t);try{return e(n,s,a)}catch{}return[]}const Q7=/Minified React error #\d+;/i;function X7(e){return e&&Q7.test(e.message)?1:0}function Z7(e){return typeof e.framesToPop=="number"?e.framesToPop:0}function XC(e){return typeof WebAssembly<"u"&&typeof WebAssembly.Exception<"u"?e instanceof WebAssembly.Exception:!1}function eq(e){const t=e==null?void 0:e.name;return!t&&XC(e)?e.message&&Array.isArray(e.message)&&e.message.length==2?e.message[0]:"WebAssembly.Exception":t}function tq(e){const t=e==null?void 0:e.message;return XC(e)?Array.isArray(e.message)&&e.message.length==2?e.message[1]:"wasm exception":t?t.error&&typeof t.error.message=="string"?t.error.message:t:"No error message"}function ZC(e,t,n,s){const a=(n==null?void 0:n.syntheticException)||void 0,i=ap(e,t,a,s);return fa(i),i.level="error",n!=null&&n.event_id&&(i.event_id=n.event_id),Gm(i)}function eT(e,t,n="info",s,a){const i=(s==null?void 0:s.syntheticException)||void 0,l=Sy(e,t,i,a);return l.level=n,s!=null&&s.event_id&&(l.event_id=s.event_id),Gm(l)}function ap(e,t,n,s,a){let i;if(K2(t)&&t.error)return s0(e,t.error);if(IN(t)||tM(t)){const l=t;if("stack"in t)i=s0(e,t);else{const u=l.name||(IN(l)?"DOMError":"DOMException"),d=l.message?`${u}: ${l.message}`:u;i=Sy(e,d,n,s),ry(i,d)}return"code"in l&&(i.tags={...i.tags,"DOMException.code":`${l.code}`}),i}return aa(t)?s0(e,t):Is(t)||Fm(t)?(i=J7(e,t,n,a),fa(i,{synthetic:!0}),i):(i=Sy(e,t,n,s),ry(i,`${t}`),fa(i,{synthetic:!0}),i)}function Sy(e,t,n,s){const a={};if(s&&n){const i=rv(e,n);i.length&&(a.exception={values:[{value:t,stacktrace:{frames:i}}]}),fa(a,{synthetic:!0})}if(Dm(t)){const{__sentry_template_string__:i,__sentry_template_values__:l}=t;return a.logentry={message:i,params:l},a}return a.message=t,a}function nq(e,{isUnhandledRejection:t}){const n=oM(e),s=t?"promise rejection":"exception";return K2(e)?`Event \`ErrorEvent\` captured as ${s} with message \`${e.message}\``:Fm(e)?`Event \`${rq(e)}\` (type=${e.type}) captured as ${s}`:`Object captured as ${s} with keys: ${n}`}function rq(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch{}}function sq(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const n=e[t];if(n instanceof Error)return n}}class tT extends I${constructor(t){var p;const n=aq(t),s=be.SENTRY_SDK_SOURCE||TU();aC(n,"browser",["browser"],s),(p=n._metadata)!=null&&p.sdk&&(n._metadata.sdk.settings={infer_ip:n.sendDefaultPii?"auto":"never",...n._metadata.sdk.settings}),super(n);const{sendDefaultPii:a,sendClientReports:i,enableLogs:l,_experiments:u,enableMetrics:d}=this._options,h=d??(u==null?void 0:u.enableMetrics)??!0;be.document&&(i||l||h)&&be.document.addEventListener("visibilitychange",()=>{be.document.visibilityState==="hidden"&&(i&&this._flushOutcomes(),l&&Ib(this),h&&Ab(this))}),a&&this.on("beforeSendSession",V$)}eventFromException(t,n){return ZC(this._options.stackParser,t,n,this._options.attachStacktrace)}eventFromMessage(t,n="info",s){return eT(this._options.stackParser,t,n,s,this._options.attachStacktrace)}_prepareEvent(t,n,s,a){return t.platform=t.platform||"javascript",super._prepareEvent(t,n,s,a)}}function aq(e){var t;return{release:typeof __SENTRY_RELEASE__=="string"?__SENTRY_RELEASE__:(t=be.SENTRY_RELEASE)==null?void 0:t.id,sendClientReports:!0,parentSpanIsAlwaysRootSpan:!0,...e}}const Eo=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,He=Ae,iq=(e,t)=>e>t[1]?"poor":e>t[0]?"needs-improvement":"good",bd=(e,t,n,s)=>{let a,i;return l=>{t.value>=0&&(l||s)&&(i=t.value-(a??0),(i||a===void 0)&&(a=t.value,t.delta=i,t.rating=iq(t.value,n),e(t)))}},vd=(e=!0)=>{var n,s;const t=(s=(n=He.performance)==null?void 0:n.getEntriesByType)==null?void 0:s.call(n,"navigation")[0];if(!e||t&&t.responseStart>0&&t.responseStart<performance.now())return t},Sc=()=>{const e=vd();return(e==null?void 0:e.activationStart)??0};function go(e,t,n){He.document&&He.addEventListener(e,t,n)}function sv(e,t,n){He.document&&He.removeEventListener(e,t,n)}let $l=-1;const nT=new Set,oq=()=>{var e,t;return((e=He.document)==null?void 0:e.visibilityState)==="hidden"&&!((t=He.document)!=null&&t.prerendering)?0:1/0},Af=e=>{if(lq(e)&&$l>-1){if(e.type==="visibilitychange"||e.type==="pagehide")for(const t of nT)t();isFinite($l)||($l=e.type==="visibilitychange"?e.timeStamp:0,sv("prerenderingchange",Af,!0))}},wd=()=>{var e;if(He.document&&$l<0){const t=Sc();$l=(He.document.prerendering||(e=globalThis.performance.getEntriesByType("visibility-state").filter(s=>s.name==="hidden"&&s.startTime>t)[0])==null?void 0:e.startTime)??oq(),go("visibilitychange",Af,!0),go("pagehide",Af,!0),go("prerenderingchange",Af,!0)}return{get firstHiddenTime(){return $l},onHidden(t){nT.add(t)}}};function lq(e){var t;return e.type==="pagehide"||((t=He.document)==null?void 0:t.visibilityState)==="hidden"}const cq=()=>`v5-${Date.now()}-${Math.floor(Math.random()*(9e12-1))+1e12}`,_d=(e,t=-1)=>{var i,l;const n=vd();let s="navigate";return n&&((i=He.document)!=null&&i.prerendering||Sc()>0?s="prerender":(l=He.document)!=null&&l.wasDiscarded?s="restore":n.type&&(s=n.type.replace(/_/g,"-"))),{name:e,value:t,rating:"good",delta:0,entries:[],id:cq(),navigationType:s}},a0=new WeakMap;function av(e,t){return a0.get(e)||a0.set(e,new t),a0.get(e)}class hm{constructor(){hm.prototype.__init.call(this),hm.prototype.__init2.call(this)}__init(){this._sessionValue=0}__init2(){this._sessionEntries=[]}_processEntry(t){var a;if(t.hadRecentInput)return;const n=this._sessionEntries[0],s=this._sessionEntries[this._sessionEntries.length-1];this._sessionValue&&n&&s&&t.startTime-s.startTime<1e3&&t.startTime-n.startTime<5e3?(this._sessionValue+=t.value,this._sessionEntries.push(t)):(this._sessionValue=t.value,this._sessionEntries=[t]),(a=this._onAfterProcessingUnexpectedShift)==null||a.call(this,t)}}const kc=(e,t,n={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const s=new PerformanceObserver(a=>{Promise.resolve().then(()=>{t(a.getEntries())})});return s.observe({type:e,buffered:!0,...n}),s}}catch{}},iv=e=>{let t=!1;return()=>{t||(e(),t=!0)}},ip=e=>{var t;(t=He.document)!=null&&t.prerendering?addEventListener("prerenderingchange",()=>e(),!0):e()},uq=[1800,3e3],dq=(e,t={})=>{ip(()=>{const n=wd(),s=_d("FCP");let a;const l=kc("paint",u=>{for(const d of u)d.name==="first-contentful-paint"&&(l.disconnect(),d.startTime<n.firstHiddenTime&&(s.value=Math.max(d.startTime-Sc(),0),s.entries.push(d),a(!0)))});l&&(a=bd(e,s,uq,t.reportAllChanges))})},hq=[.1,.25],fq=(e,t={})=>{dq(iv(()=>{var d;const n=_d("CLS",0);let s;const a=wd(),i=av(t,hm),l=h=>{for(const p of h)i._processEntry(p);i._sessionValue>n.value&&(n.value=i._sessionValue,n.entries=i._sessionEntries,s())},u=kc("layout-shift",l);u&&(s=bd(e,n,hq,t.reportAllChanges),a.onHidden(()=>{l(u.takeRecords()),s(!0)}),(d=He==null?void 0:He.setTimeout)==null||d.call(He,s))}))};let rT=0,i0=1/0,tf=0;const mq=e=>{e.forEach(t=>{t.interactionId&&(i0=Math.min(i0,t.interactionId),tf=Math.max(tf,t.interactionId),rT=tf?(tf-i0)/7+1:0)})};let ky;const sT=()=>ky?rT:performance.interactionCount||0,pq=()=>{"interactionCount"in performance||ky||(ky=kc("event",mq,{type:"event",buffered:!0,durationThreshold:0}))},o0=10;let aT=0;const gq=()=>sT()-aT;class fm{constructor(){fm.prototype.__init.call(this),fm.prototype.__init2.call(this)}__init(){this._longestInteractionList=[]}__init2(){this._longestInteractionMap=new Map}_resetInteractions(){aT=sT(),this._longestInteractionList.length=0,this._longestInteractionMap.clear()}_estimateP98LongestInteraction(){const t=Math.min(this._longestInteractionList.length-1,Math.floor(gq()/50));return this._longestInteractionList[t]}_processEntry(t){var a,i;if((a=this._onBeforeProcessingEntry)==null||a.call(this,t),!(t.interactionId||t.entryType==="first-input"))return;const n=this._longestInteractionList.at(-1);let s=this._longestInteractionMap.get(t.interactionId);if(s||this._longestInteractionList.length<o0||t.duration>n._latency){if(s?t.duration>s._latency?(s.entries=[t],s._latency=t.duration):t.duration===s._latency&&t.startTime===s.entries[0].startTime&&s.entries.push(t):(s={id:t.interactionId,entries:[t],_latency:t.duration},this._longestInteractionMap.set(s.id,s),this._longestInteractionList.push(s)),this._longestInteractionList.sort((l,u)=>u._latency-l._latency),this._longestInteractionList.length>o0){const l=this._longestInteractionList.splice(o0);for(const u of l)this._longestInteractionMap.delete(u.id)}(i=this._onAfterProcessingINPCandidate)==null||i.call(this,s)}}}const iT=e=>{const t=n=>{var s;(n.type==="pagehide"||((s=He.document)==null?void 0:s.visibilityState)==="hidden")&&e(n)};go("visibilitychange",t,!0),go("pagehide",t,!0)},oT=e=>{var n;const t=He.requestIdleCallback||He.setTimeout;((n=He.document)==null?void 0:n.visibilityState)==="hidden"?e():(e=iv(e),go("visibilitychange",e,{once:!0,capture:!0}),t(()=>{e(),sv("visibilitychange",e,{capture:!0})}),iT(e))},xq=[200,500],yq=40,bq=(e,t={})=>{if(!(globalThis.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype))return;const n=wd();ip(()=>{pq();const s=_d("INP");let a;const i=av(t,fm),l=d=>{oT(()=>{for(const p of d)i._processEntry(p);const h=i._estimateP98LongestInteraction();h&&h._latency!==s.value&&(s.value=h._latency,s.entries=h.entries,a())})},u=kc("event",l,{durationThreshold:t.durationThreshold??yq});a=bd(e,s,xq,t.reportAllChanges),u&&(u.observe({type:"first-input",buffered:!0}),n.onHidden(()=>{l(u.takeRecords()),a(!0)}))})};class vq{_processEntry(t){var n;(n=this._onBeforeProcessingEntry)==null||n.call(this,t)}}const wq=[2500,4e3],_q=(e,t={})=>{ip(()=>{const n=wd(),s=_d("LCP");let a;const i=av(t,vq),l=d=>{t.reportAllChanges||(d=d.slice(-1));for(const h of d)i._processEntry(h),h.startTime<n.firstHiddenTime&&(s.value=Math.max(h.startTime-Sc(),0),s.entries=[h],a())},u=kc("largest-contentful-paint",l);if(u){a=bd(e,s,wq,t.reportAllChanges);const d=iv(()=>{l(u.takeRecords()),u.disconnect(),a(!0)}),h=p=>{p.isTrusted&&(oT(d),sv(p.type,h,{capture:!0}))};for(const p of["keydown","click","visibilitychange"])go(p,h,{capture:!0})}})},jq=[800,1800],Ey=e=>{var t,n;(t=He.document)!=null&&t.prerendering?ip(()=>Ey(e)):((n=He.document)==null?void 0:n.readyState)!=="complete"?addEventListener("load",()=>Ey(e),!0):setTimeout(e)},Nq=(e,t={})=>{const n=_d("TTFB"),s=bd(e,n,jq,t.reportAllChanges);Ey(()=>{const a=vd();a&&(n.value=Math.max(a.responseStart-Sc(),0),n.entries=[a],s(!0))})},Iu={},mm={};let lT,cT,uT,dT;function ov(e,t=!1){return op("cls",e,kq,lT,t)}function lv(e,t=!1){return op("lcp",e,Eq,cT,t)}function Sq(e){return op("ttfb",e,Cq,uT)}function hT(e){return op("inp",e,Tq,dT)}function Co(e,t){return fT(e,t),mm[e]||(Rq(e),mm[e]=!0),mT(e,t)}function jd(e,t){const n=Iu[e];if(n!=null&&n.length)for(const s of n)try{s(t)}catch(a){Eo&&W.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${da(s)}
Error:`,a)}}function kq(){return fq(e=>{jd("cls",{metric:e}),lT=e},{reportAllChanges:!0})}function Eq(){return _q(e=>{jd("lcp",{metric:e}),cT=e},{reportAllChanges:!0})}function Cq(){return Nq(e=>{jd("ttfb",{metric:e}),uT=e})}function Tq(){return bq(e=>{jd("inp",{metric:e}),dT=e})}function op(e,t,n,s,a=!1){fT(e,t);let i;return mm[e]||(i=n(),mm[e]=!0),s&&t({metric:s}),mT(e,t,a?i:void 0)}function Rq(e){const t={};e==="event"&&(t.durationThreshold=0),kc(e,n=>{jd(e,{entries:n})},t)}function fT(e,t){Iu[e]=Iu[e]||[],Iu[e].push(t)}function mT(e,t,n){return()=>{n&&n();const s=Iu[e];if(!s)return;const a=s.indexOf(t);a!==-1&&s.splice(a,1)}}function Iq(e){return"duration"in e}function l0(e){return typeof e=="number"&&isFinite(e)}function pi(e,t,n,{...s}){const a=Te(e).start_timestamp;return a&&a>t&&typeof e.updateStartTime=="function"&&e.updateStartTime(t),wo(e,()=>{const i=zr({startTime:t,...s});return i&&i.end(n),i})}function cv(e){var v;const t=ye();if(!t)return;const{name:n,transaction:s,attributes:a,startTime:i}=e,{release:l,environment:u,sendDefaultPii:d}=t.getOptions(),h=t.getIntegrationByName("Replay"),p=h==null?void 0:h.getReplayId(),m=We(),g=m.getUser(),y=g!==void 0?g.email||g.id||g.ip_address:void 0;let b;try{b=m.getScopeData().contexts.profile.profile_id}catch{}const w={release:l,environment:u,user:y||void 0,profile_id:b||void 0,replay_id:p||void 0,transaction:s,"user_agent.original":(v=He.navigator)==null?void 0:v.userAgent,"client.address":d?"{{auto}}":void 0,...a};return zr({name:n,attributes:w,startTime:i,experimental:{standalone:!0}})}function Nd(){return He.addEventListener&&He.performance}function Jt(e){return e/1e3}function Pq(e){let t="unknown",n="unknown",s="";for(const a of e){if(a==="/"){[t,n]=e.split("/");break}if(!isNaN(Number(a))){t=s==="h"?"http":s,n=e.split(s)[1];break}s+=a}return s===e&&(t=s),{name:t,version:n}}function pT(e){try{return PerformanceObserver.supportedEntryTypes.includes(e)}catch{return!1}}function gT(e,t){let n,s=!1;function a(u){!s&&n&&t(u,n),s=!0}iT(()=>{a("pagehide")});const i=e.on("beforeStartNavigationSpan",(u,d)=>{d!=null&&d.isRedirect||(a("navigation"),i(),l())}),l=e.on("afterStartPageLoadSpan",u=>{n=u.spanContext().spanId,l()})}function Aq(e){let t=0,n;if(!pT("layout-shift"))return;const s=ov(({metric:a})=>{const i=a.entries[a.entries.length-1];i&&(t=a.value,n=i)},!0);gT(e,(a,i)=>{Oq(t,n,i,a),s()})}function Oq(e,t,n,s){var h;Eo&&W.log(`Sending CLS span (${e})`);const a=t?Jt((Fn()||0)+t.startTime):Tt(),i=We().getScopeData().transactionName,l=t?cr((h=t.sources[0])==null?void 0:h.node):"Layout shift",u={[Ge]:"auto.http.browser.cls",[_t]:"ui.webvital.cls",[vc]:0,"sentry.pageload.span_id":n,"sentry.report_event":s};t!=null&&t.sources&&t.sources.forEach((p,m)=>{u[`cls.source.${m+1}`]=cr(p.node)});const d=cv({name:l,transaction:i,attributes:u,startTime:a});d&&(d.addEvent("cls",{[fd]:"",[md]:e}),d.end(a))}function Mq(e){let t=0,n;if(!pT("largest-contentful-paint"))return;const s=lv(({metric:a})=>{const i=a.entries[a.entries.length-1];i&&(t=a.value,n=i)},!0);gT(e,(a,i)=>{Lq(t,n,i,a),s()})}function Lq(e,t,n,s){Eo&&W.log(`Sending LCP span (${e})`);const a=Jt((Fn()||0)+((t==null?void 0:t.startTime)||0)),i=We().getScopeData().transactionName,l=t?cr(t.element):"Largest contentful paint",u={[Ge]:"auto.http.browser.lcp",[_t]:"ui.webvital.lcp",[vc]:0,"sentry.pageload.span_id":n,"sentry.report_event":s};t&&(t.element&&(u["lcp.element"]=cr(t.element)),t.id&&(u["lcp.id"]=t.id),t.url&&(u["lcp.url"]=t.url),t.loadTime!=null&&(u["lcp.loadTime"]=t.loadTime),t.renderTime!=null&&(u["lcp.renderTime"]=t.renderTime),t.size!=null&&(u["lcp.size"]=t.size));const d=cv({name:l,transaction:i,attributes:u,startTime:a});d&&(d.addEvent("lcp",{[fd]:"millisecond",[md]:e}),d.end(a))}function Lr(e){return e&&((Fn()||performance.timeOrigin)+e)/1e3}function xT(e){var n;const t={};if(e.nextHopProtocol!=null){const{name:s,version:a}=Pq(e.nextHopProtocol);t["network.protocol.version"]=a,t["network.protocol.name"]=s}return Fn()||(n=Nd())!=null&&n.timeOrigin?$q({...t,"http.request.redirect_start":Lr(e.redirectStart),"http.request.redirect_end":Lr(e.redirectEnd),"http.request.worker_start":Lr(e.workerStart),"http.request.fetch_start":Lr(e.fetchStart),"http.request.domain_lookup_start":Lr(e.domainLookupStart),"http.request.domain_lookup_end":Lr(e.domainLookupEnd),"http.request.connect_start":Lr(e.connectStart),"http.request.secure_connection_start":Lr(e.secureConnectionStart),"http.request.connection_end":Lr(e.connectEnd),"http.request.request_start":Lr(e.requestStart),"http.request.response_start":Lr(e.responseStart),"http.request.response_end":Lr(e.responseEnd),"http.request.time_to_first_byte":e.responseStart!=null?e.responseStart/1e3:void 0}):t}function $q(e){return Object.fromEntries(Object.entries(e).filter(([,t])=>t!=null))}const Dq=2147483647;let eS=0,cs={},rr,Cl;function Fq({recordClsStandaloneSpans:e,recordLcpStandaloneSpans:t,client:n}){const s=Nd();if(s&&Fn()){s.mark&&He.performance.mark("sentry-tracing-init");const a=t?Mq(n):zq(),i=Wq(),l=e?Aq(n):Hq();return()=>{a==null||a(),i(),l==null||l()}}return()=>{}}function Uq(){Co("longtask",({entries:e})=>{const t=Ht();if(!t)return;const{op:n,start_timestamp:s}=Te(t);for(const a of e){const i=Jt(Fn()+a.startTime),l=Jt(a.duration);n==="navigation"&&s&&i<s||pi(t,i,i+l,{name:"Main UI thread blocked",op:"ui.long-task",attributes:{[Ge]:"auto.ui.browser.metrics"}})}})}function qq(){new PerformanceObserver(t=>{const n=Ht();if(n)for(const s of t.getEntries()){if(!s.scripts[0])continue;const a=Jt(Fn()+s.startTime),{start_timestamp:i,op:l}=Te(n);if(l==="navigation"&&i&&a<i)continue;const u=Jt(s.duration),d={[Ge]:"auto.ui.browser.metrics"},h=s.scripts[0],{invoker:p,invokerType:m,sourceURL:g,sourceFunctionName:y,sourceCharPosition:b}=h;d["browser.script.invoker"]=p,d["browser.script.invoker_type"]=m,g&&(d["code.filepath"]=g),y&&(d["code.function"]=y),b!==-1&&(d["browser.script.source_char_position"]=b),pi(n,a,a+u,{name:"Main UI thread blocked",op:"ui.long-animation-frame",attributes:d})}}).observe({type:"long-animation-frame",buffered:!0})}function Bq(){Co("event",({entries:e})=>{const t=Ht();if(t){for(const n of e)if(n.name==="click"){const s=Jt(Fn()+n.startTime),a=Jt(n.duration),i={name:cr(n.target),op:`ui.interaction.${n.name}`,startTime:s,attributes:{[Ge]:"auto.ui.browser.metrics"}},l=J2(n.target);l&&(i.attributes["ui.component_name"]=l),pi(t,s,s+a,i)}}})}function Hq(){return ov(({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(cs.cls={value:e.value,unit:""},Cl=t)},!0)}function zq(){return lv(({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(cs.lcp={value:e.value,unit:"millisecond"},rr=t)},!0)}function Wq(){return Sq(({metric:e})=>{e.entries[e.entries.length-1]&&(cs.ttfb={value:e.value,unit:"millisecond"})})}function Gq(e,t){const n=Nd(),s=Fn();if(!(n!=null&&n.getEntries)||!s)return;const a=Jt(s),i=n.getEntries(),{op:l,start_timestamp:u}=Te(e);i.slice(eS).forEach(d=>{const h=Jt(d.startTime),p=Jt(Math.max(0,d.duration));if(!(l==="navigation"&&u&&a+h<u))switch(d.entryType){case"navigation":{Jq(e,d,a);break}case"mark":case"paint":case"measure":{Kq(e,d,h,p,a,t.ignorePerformanceApiSpans);const m=wd(),g=d.startTime<m.firstHiddenTime;d.name==="first-paint"&&g&&(cs.fp={value:d.startTime,unit:"millisecond"}),d.name==="first-contentful-paint"&&g&&(cs.fcp={value:d.startTime,unit:"millisecond"});break}case"resource":{Zq(e,d,d.name,h,p,a,t.ignoreResourceSpans);break}}}),eS=Math.max(i.length-1,0),eB(e),l==="pageload"&&(rB(cs),t.recordClsOnPageloadSpan||delete cs.cls,t.recordLcpOnPageloadSpan||delete cs.lcp,Object.entries(cs).forEach(([d,h])=>{kE(d,h.value,h.unit)}),e.setAttribute("performance.timeOrigin",a),e.setAttribute("performance.activationStart",Sc()),tB(e,t)),rr=void 0,Cl=void 0,cs={}}function Vq(e){if((e==null?void 0:e.entryType)==="measure")try{return e.detail.devtools.track==="Components "}catch{return}}function Kq(e,t,n,s,a,i){if(Vq(t)||["mark","measure"].includes(t.entryType)&&hs(t.name,i))return;const l=vd(!1),u=Jt(l?l.requestStart:0),d=a+Math.max(n,u),h=a+n,p=h+s,m={[Ge]:"auto.resource.browser.metrics"};d!==h&&(m["sentry.browser.measure_happened_before_request"]=!0,m["sentry.browser.measure_start_time"]=d),Yq(m,t),d<=p&&pi(e,d,p,{name:t.name,op:t.entryType,attributes:m})}function Yq(e,t){try{const n=t.detail;if(!n)return;if(typeof n=="object"){for(const[s,a]of Object.entries(n))if(a&&hi(a))e[`sentry.browser.measure.detail.${s}`]=a;else if(a!==void 0)try{e[`sentry.browser.measure.detail.${s}`]=JSON.stringify(a)}catch{}return}if(hi(n)){e["sentry.browser.measure.detail"]=n;return}try{e["sentry.browser.measure.detail"]=JSON.stringify(n)}catch{}}catch{}}function Jq(e,t,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(s=>{nf(e,t,s,n)}),nf(e,t,"secureConnection",n,"TLS/SSL"),nf(e,t,"fetch",n,"cache"),nf(e,t,"domainLookup",n,"DNS"),Xq(e,t,n)}function nf(e,t,n,s,a=n){const i=Qq(n),l=t[i],u=t[`${n}Start`];!u||!l||pi(e,s+Jt(u),s+Jt(l),{op:`browser.${a}`,name:t.name,attributes:{[Ge]:"auto.ui.browser.metrics",...n==="redirect"&&t.redirectCount!=null?{"http.redirect_count":t.redirectCount}:{}}})}function Qq(e){return e==="secureConnection"?"connectEnd":e==="fetch"?"domainLookupStart":`${e}End`}function Xq(e,t,n){const s=n+Jt(t.requestStart),a=n+Jt(t.responseEnd),i=n+Jt(t.responseStart);t.responseEnd&&(pi(e,s,a,{op:"browser.request",name:t.name,attributes:{[Ge]:"auto.ui.browser.metrics"}}),pi(e,i,a,{op:"browser.response",name:t.name,attributes:{[Ge]:"auto.ui.browser.metrics"}}))}function Zq(e,t,n,s,a,i,l){if(t.initiatorType==="xmlhttprequest"||t.initiatorType==="fetch")return;const u=t.initiatorType?`resource.${t.initiatorType}`:"resource.other";if(l!=null&&l.includes(u))return;const d={[Ge]:"auto.resource.browser.metrics"},h=po(n);h.protocol&&(d["url.scheme"]=h.protocol.split(":").pop()),h.host&&(d["server.address"]=h.host),d["url.same_origin"]=n.includes(He.location.origin),nB(t,d,[["responseStatus","http.response.status_code"],["transferSize","http.response_transfer_size"],["encodedBodySize","http.response_content_length"],["decodedBodySize","http.decoded_response_content_length"],["renderBlockingStatus","resource.render_blocking_status"],["deliveryType","http.response_delivery_type"]]);const p={...d,...xT(t)},m=i+s,g=m+a;pi(e,m,g,{name:n.replace(He.location.origin,""),op:u,attributes:p})}function eB(e){const t=He.navigator;if(!t)return;const n=t.connection;n&&(n.effectiveType&&e.setAttribute("effectiveConnectionType",n.effectiveType),n.type&&e.setAttribute("connectionType",n.type),l0(n.rtt)&&(cs["connection.rtt"]={value:n.rtt,unit:"millisecond"})),l0(t.deviceMemory)&&e.setAttribute("deviceMemory",`${t.deviceMemory} GB`),l0(t.hardwareConcurrency)&&e.setAttribute("hardwareConcurrency",String(t.hardwareConcurrency))}function tB(e,t){rr&&t.recordLcpOnPageloadSpan&&(rr.element&&e.setAttribute("lcp.element",cr(rr.element)),rr.id&&e.setAttribute("lcp.id",rr.id),rr.url&&e.setAttribute("lcp.url",rr.url.trim().slice(0,200)),rr.loadTime!=null&&e.setAttribute("lcp.loadTime",rr.loadTime),rr.renderTime!=null&&e.setAttribute("lcp.renderTime",rr.renderTime),e.setAttribute("lcp.size",rr.size)),Cl!=null&&Cl.sources&&t.recordClsOnPageloadSpan&&Cl.sources.forEach((n,s)=>e.setAttribute(`cls.source.${s+1}`,cr(n.node)))}function nB(e,t,n){n.forEach(([s,a])=>{const i=e[s];i!=null&&(typeof i=="number"&&i<Dq||typeof i=="string")&&(t[a]=i)})}function rB(e){const t=vd(!1);if(!t)return;const{responseStart:n,requestStart:s}=t;s<=n&&(e["ttfb.requestTime"]={value:n-s,unit:"millisecond"})}function sB(){return Nd()&&Fn()?Co("element",aB):()=>{}}const aB=({entries:e})=>{const t=Ht(),n=t?Bt(t):void 0,s=n?Te(n).description:We().getScopeData().transactionName;e.forEach(a=>{var y,b;const i=a;if(!i.identifier)return;const l=i.name,u=i.renderTime,d=i.loadTime,[h,p]=d?[Jt(d),"load-time"]:u?[Jt(u),"render-time"]:[Tt(),"entry-emission"],m=l==="image-paint"?Jt(Math.max(0,(u??0)-(d??0))):0,g={[Ge]:"auto.ui.browser.elementtiming",[_t]:"ui.elementtiming",[ft]:"component","sentry.span_start_time_source":p,"sentry.transaction_name":s,"element.id":i.id,"element.type":((b=(y=i.element)==null?void 0:y.tagName)==null?void 0:b.toLowerCase())||"unknown","element.size":i.naturalWidth&&i.naturalHeight?`${i.naturalWidth}x${i.naturalHeight}`:void 0,"element.render_time":u,"element.load_time":d,"element.url":i.url||void 0,"element.identifier":i.identifier,"element.paint_type":l};Ms({name:`element[${i.identifier}]`,attributes:g,startTime:h,onlyIfParent:!0},w=>{w.end(h+m)})})},iB=1e3;let tS,Cy,Ty;function yT(e){_i("dom",e),ji("dom",oB)}function oB(){if(!He.document)return;const e=Br.bind(null,"dom"),t=nS(e,!0);He.document.addEventListener("click",t,!1),He.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(n=>{var i,l;const a=(i=He[n])==null?void 0:i.prototype;(l=a==null?void 0:a.hasOwnProperty)!=null&&l.call(a,"addEventListener")&&(Nn(a,"addEventListener",function(u){return function(d,h,p){if(d==="click"||d=="keypress")try{const m=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},g=m[d]=m[d]||{refCount:0};if(!g.handler){const y=nS(e);g.handler=y,u.call(this,d,y,p)}g.refCount++}catch{}return u.call(this,d,h,p)}}),Nn(a,"removeEventListener",function(u){return function(d,h,p){if(d==="click"||d=="keypress")try{const m=this.__sentry_instrumentation_handlers__||{},g=m[d];g&&(g.refCount--,g.refCount<=0&&(u.call(this,d,g.handler,p),g.handler=void 0,delete m[d]),Object.keys(m).length===0&&delete this.__sentry_instrumentation_handlers__)}catch{}return u.call(this,d,h,p)}}))})}function lB(e){if(e.type!==Cy)return!1;try{if(!e.target||e.target._sentryId!==Ty)return!1}catch{}return!0}function cB(e,t){return e!=="keypress"?!1:t!=null&&t.tagName?!(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable):!0}function nS(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;const s=uB(n);if(cB(n.type,s))return;hn(n,"_sentryCaptured",!0),s&&!s._sentryId&&hn(s,"_sentryId",dn());const a=n.type==="keypress"?"input":n.type;lB(n)||(e({event:n,name:a,global:t}),Cy=n.type,Ty=s?s._sentryId:void 0),clearTimeout(tS),tS=He.setTimeout(()=>{Ty=void 0,Cy=void 0},iB)}}function uB(e){try{return e.target}catch{return null}}let rf;function lp(e){const t="history";_i(t,e),ji(t,dB)}function dB(){if(He.addEventListener("popstate",()=>{const t=He.location.href,n=rf;if(rf=t,n===t)return;Br("history",{from:n,to:t})}),!vU())return;function e(t){return function(...n){const s=n.length>2?n[2]:void 0;if(s){const a=rf,i=hB(String(s));if(rf=i,a===i)return t.apply(this,n);Br("history",{from:a,to:i})}return t.apply(this,n)}}Nn(He.history,"pushState",e),Nn(He.history,"replaceState",e)}function hB(e){try{return new URL(e,He.location.origin).toString()}catch{return e}}const Of={};function uv(e){const t=Of[e];if(t)return t;let n=He[e];if(by(n))return Of[e]=n.bind(He);const s=He.document;if(s&&typeof s.createElement=="function")try{const a=s.createElement("iframe");a.hidden=!0,s.head.appendChild(a);const i=a.contentWindow;i!=null&&i[e]&&(n=i[e]),s.head.removeChild(a)}catch(a){Eo&&W.warn(`Could not create sandbox iframe for ${e} check, bailing to window.${e}: `,a)}return n&&(Of[e]=n.bind(He))}function fB(e){Of[e]=void 0}function Sd(...e){return uv("setTimeout")(...e)}const na="__sentry_xhr_v3__";function dv(e){_i("xhr",e),ji("xhr",mB)}function mB(){if(!He.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;e.open=new Proxy(e.open,{apply(t,n,s){const a=new Error,i=Tt()*1e3,l=ds(s[0])?s[0].toUpperCase():void 0,u=pB(s[1]);if(!l||!u)return t.apply(n,s);n[na]={method:l,url:u,request_headers:{}},l==="POST"&&u.match(/sentry_key/)&&(n.__sentry_own_request__=!0);const d=()=>{const h=n[na];if(h&&n.readyState===4){try{h.status_code=n.status}catch{}const p={endTimestamp:Tt()*1e3,startTimestamp:i,xhr:n,virtualError:a};Br("xhr",p)}};return"onreadystatechange"in n&&typeof n.onreadystatechange=="function"?n.onreadystatechange=new Proxy(n.onreadystatechange,{apply(h,p,m){return d(),h.apply(p,m)}}):n.addEventListener("readystatechange",d),n.setRequestHeader=new Proxy(n.setRequestHeader,{apply(h,p,m){const[g,y]=m,b=p[na];return b&&ds(g)&&ds(y)&&(b.request_headers[g.toLowerCase()]=y),h.apply(p,m)}}),t.apply(n,s)}}),e.send=new Proxy(e.send,{apply(t,n,s){const a=n[na];if(!a)return t.apply(n,s);s[0]!==void 0&&(a.body=s[0]);const i={startTimestamp:Tt()*1e3,xhr:n};return Br("xhr",i),t.apply(n,s)}})}function pB(e){if(ds(e))return e;try{return e.toString()}catch{}}const gB=Symbol.for("sentry__originalRequestBody");function bT(e){return new URLSearchParams(e).toString()}function pm(e,t=W){try{if(typeof e=="string")return[e];if(e instanceof URLSearchParams)return[e.toString()];if(e instanceof FormData)return[bT(e)];if(!e)return[void 0]}catch(n){return Eo&&t.error(n,"Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return Eo&&t.log("Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function hv(e=[]){if(e.length>=2&&e[1]&&typeof e[1]=="object"&&"body"in e[1])return e[1].body;if(e.length>=1&&e[0]instanceof Request){const n=e[0][gB];return n!==void 0?n:void 0}}function vT(e){let t;try{t=e.getAllResponseHeaders()}catch(n){return Eo&&W.error(n,"Failed to get xhr response headers",e),{}}return t?t.split(`\r
`).reduce((n,s)=>{const[a,i]=s.split(": ");return i&&(n[a.toLowerCase()]=i),n},{}):{}}const c0=[],Mf=new Map,yl=new Map,xB=60;function yB(){if(Nd()&&Fn()){const t=bB();return()=>{t()}}return()=>{}}const Ry={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};function bB(){return hT(vB)}const vB=({metric:e})=>{if(e.value==null)return;const t=Jt(e.value);if(t>xB)return;const n=e.entries.find(b=>b.duration===e.value&&Ry[b.name]);if(!n)return;const{interactionId:s}=n,a=Ry[n.name],i=Jt(Fn()+n.startTime),l=Ht(),u=l?Bt(l):void 0,d=s!=null?Mf.get(s):void 0,h=(d==null?void 0:d.span)||u,p=h?Te(h).description:We().getScopeData().transactionName,m=(d==null?void 0:d.elementName)||cr(n.target),g={[Ge]:"auto.http.browser.inp",[_t]:`ui.interaction.${a}`,[vc]:n.duration},y=cv({name:m,transaction:p,attributes:g,startTime:i});y&&(y.addEvent("inp",{[fd]:"millisecond",[md]:e.value}),y.end(i+t))};function wB(){const e=Object.keys(Ry);um()&&e.forEach(a=>{He.addEventListener(a,t,{capture:!0,passive:!0})});function t(a){const i=a.target;if(!i)return;const l=cr(i),u=Math.round(a.timeStamp);if(yl.set(u,l),yl.size>50){const d=yl.keys().next().value;d!==void 0&&yl.delete(d)}}function n(a){const i=Math.round(a.startTime);let l=yl.get(i);if(!l)for(let u=-5;u<=5;u++){const d=yl.get(i+u);if(d){l=d;break}}return l||"<unknown>"}const s=({entries:a})=>{const i=Ht(),l=i&&Bt(i);a.forEach(u=>{if(!Iq(u))return;const d=u.interactionId;if(d==null||Mf.has(d))return;const h=u.target?cr(u.target):n(u);if(c0.length>10){const p=c0.shift();Mf.delete(p)}c0.push(d),Mf.set(d,{span:l,elementName:h})})};Co("event",s),Co("first-input",s)}const _B=40;function fv(e,t=uv("fetch")){let n=0,s=0;async function a(i){const l=i.body.length;n+=l,s++;const u={body:i.body,method:"POST",referrerPolicy:"strict-origin",headers:e.headers,keepalive:n<=6e4&&s<15,...e.fetchOptions};try{const d=await t(e.url,u);return{statusCode:d.status,headers:{"x-sentry-rate-limits":d.headers.get("X-Sentry-Rate-Limits"),"retry-after":d.headers.get("Retry-After")}}}catch(d){throw fB("fetch"),d}finally{n-=l,s--}}return KE(e,a,Lb(e.bufferSize||_B))}const fe=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function jB(){const e=ye();if(!e){fe&&W.warn("No Sentry client available, profiling is not started");return}if(!e.getIntegrationByName("BrowserProfiling")){fe&&W.warn("BrowserProfiling integration is not available");return}e.emit("startUIProfiler")}function NB(){const e=ye();if(!e){fe&&W.warn("No Sentry client available, profiling is not started");return}if(!e.getIntegrationByName("BrowserProfiling")){fe&&W.warn("ProfilingIntegration is not available");return}e.emit("stopUIProfiler")}const SB={startProfiler:jB,stopProfiler:NB},kB=10,EB=20,CB=30,TB=40,RB=50;function oc(e,t,n,s){const a={filename:e,function:t==="<anonymous>"?Ps:t,in_app:!0};return n!==void 0&&(a.lineno=n),s!==void 0&&(a.colno=s),a}const IB=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,PB=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,AB=/\((\S*)(?::(\d+))(?::(\d+))\)/,OB=/at (.+?) ?\(data:(.+?),/,MB=e=>{const t=e.match(OB);if(t)return{filename:`<data:${t[2]}>`,function:t[1]};const n=IB.exec(e);if(n){const[,a,i,l]=n;return oc(a,Ps,+i,+l)}const s=PB.exec(e);if(s){if(s[2]&&s[2].indexOf("eval")===0){const u=AB.exec(s[2]);u&&(s[2]=u[1],s[3]=u[2],s[4]=u[3])}const[i,l]=ST(s[1]||Ps,s[2]);return oc(l,i,s[3]?+s[3]:void 0,s[4]?+s[4]:void 0)}},wT=[CB,MB],LB=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,$B=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,DB=e=>{const t=LB.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const i=$B.exec(t[3]);i&&(t[1]=t[1]||"eval",t[3]=i[1],t[4]=i[2],t[5]="")}let s=t[3],a=t[1]||Ps;return[a,s]=ST(a,s),oc(s,a,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}},_T=[RB,DB],FB=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,UB=e=>{const t=FB.exec(e);return t?oc(t[2],t[1]||Ps,+t[3],t[4]?+t[4]:void 0):void 0},qB=[TB,UB],BB=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,HB=e=>{const t=BB.exec(e);return t?oc(t[2],t[3]||Ps,+t[1]):void 0},zB=[kB,HB],WB=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,GB=e=>{const t=WB.exec(e);return t?oc(t[5],t[3]||t[4]||Ps,+t[1],+t[2]):void 0},VB=[EB,GB],jT=[wT,_T],NT=H2(...jT),ST=(e,t)=>{const n=e.indexOf("safari-extension")!==-1,s=e.indexOf("safari-web-extension")!==-1;return n||s?[e.indexOf("@")!==-1?e.split("@")[0]:Ps,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]};function KB(e,{metadata:t,tunnel:n,dsn:s}){const a={event_id:e.event_id,sent_at:new Date().toISOString(),...(t==null?void 0:t.sdk)&&{sdk:{name:t.sdk.name,version:t.sdk.version}},...!!n&&!!s&&{dsn:ba(s)}},i=YB(e);return bs(a,[i])}function YB(e){return[{type:"user_report"},e]}const sf=1024,JB="Breadcrumbs",QB=((e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:JB,setup(n){t.console&&Ub(e9(n)),t.dom&&yT(ZB(n,t.dom)),t.xhr&&dv(t9(n)),t.fetch&&Jb(n9(n)),t.history&&lp(r9(n)),t.sentry&&n.on("beforeSendEvent",XB(n))}}}),kT=QB;function XB(e){return function(n){ye()===e&&gs({category:`sentry.${n.type==="transaction"?"transaction":"event"}`,event_id:n.event_id,level:n.level,message:Ki(n)},{event:n})}}function ZB(e,t){return function(s){if(ye()!==e)return;let a,i,l=typeof t=="object"?t.serializeAttribute:void 0,u=typeof t=="object"&&typeof t.maxStringLength=="number"?t.maxStringLength:void 0;u&&u>sf&&(fe&&W.warn(`\`dom.maxStringLength\` cannot exceed ${sf}, but a value of ${u} was configured. Sentry will use ${sf} instead.`),u=sf),typeof l=="string"&&(l=[l]);try{const h=s.event,p=s9(h)?h.target:h;a=cr(p,{keyAttrs:l,maxStringLength:u}),i=J2(p)}catch{a="<unknown>"}if(a.length===0)return;const d={category:`ui.${s.name}`,message:a};i&&(d.data={"ui.component_name":i}),gs(d,{event:s.event,name:s.name,global:s.global})}}function e9(e){return function(n){if(ye()!==e)return;const s={category:"console",data:{arguments:n.args,logger:"console"},level:am(n.level),message:Qf(n.args," ")};if(n.level==="assert")if(n.args[0]===!1)s.message=`Assertion failed: ${Qf(n.args.slice(1)," ")||"console.assert"}`,s.data.arguments=n.args.slice(1);else return;gs(s,{input:n.args,level:n.level})}}function t9(e){return function(n){if(ye()!==e)return;const{startTimestamp:s,endTimestamp:a}=n,i=n.xhr[na];if(!s||!a||!i)return;const{method:l,url:u,status_code:d,body:h}=i,p={method:l,url:u,status_code:d},m={xhr:n.xhr,input:h,startTimestamp:s,endTimestamp:a},g={category:"xhr",data:p,type:"http",level:AC(d)};e.emit("beforeOutgoingRequestBreadcrumb",g,m),gs(g,m)}}function n9(e){return function(n){if(ye()!==e)return;const{startTimestamp:s,endTimestamp:a}=n;if(a&&!(n.fetchData.url.match(/sentry_key/)&&n.fetchData.method==="POST"))if(n.fetchData.method,n.fetchData.url,n.error){const i=n.fetchData,l={data:n.error,input:n.args,startTimestamp:s,endTimestamp:a},u={category:"fetch",data:i,level:"error",type:"http"};e.emit("beforeOutgoingRequestBreadcrumb",u,l),gs(u,l)}else{const i=n.response,l={...n.fetchData,status_code:i==null?void 0:i.status};n.fetchData.request_body_size,n.fetchData.response_body_size,i==null||i.status;const u={input:n.args,response:i,startTimestamp:s,endTimestamp:a},d={category:"fetch",data:l,type:"http",level:AC(l.status_code)};e.emit("beforeOutgoingRequestBreadcrumb",d,u),gs(d,u)}}}function r9(e){return function(n){if(ye()!==e)return;let s=n.from,a=n.to;const i=po(be.location.href);let l=s?po(s):void 0;const u=po(a);l!=null&&l.path||(l=i),i.protocol===u.protocol&&i.host===u.host&&(a=u.relative),i.protocol===l.protocol&&i.host===l.host&&(s=l.relative),gs({category:"navigation",data:{from:s,to:a}})}}function s9(e){return!!e&&!!e.target}const a9=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],i9="BrowserApiErrors",o9=((e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,unregisterOriginalCallbacks:!1,...e};return{name:i9,setupOnce(){t.setTimeout&&Nn(be,"setTimeout",rS),t.setInterval&&Nn(be,"setInterval",rS),t.requestAnimationFrame&&Nn(be,"requestAnimationFrame",l9),t.XMLHttpRequest&&"XMLHttpRequest"in be&&Nn(XMLHttpRequest.prototype,"send",c9);const n=t.eventTarget;n&&(Array.isArray(n)?n:a9).forEach(a=>u9(a,t))}}}),ET=o9;function rS(e){return function(...t){const n=t[0];return t[0]=ic(n,{mechanism:{handled:!1,type:`auto.browser.browserapierrors.${da(e)}`}}),e.apply(this,t)}}function l9(e){return function(t){return e.apply(this,[ic(t,{mechanism:{data:{handler:da(e)},handled:!1,type:"auto.browser.browserapierrors.requestAnimationFrame"}})])}}function c9(e){return function(...t){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(a=>{a in n&&typeof n[a]=="function"&&Nn(n,a,function(i){const l={mechanism:{data:{handler:da(i)},handled:!1,type:`auto.browser.browserapierrors.xhr.${a}`}},u=bb(i);return u&&(l.mechanism.data.handler=da(u)),ic(i,l)})}),e.apply(this,t)}}function u9(e,t){var a,i;const s=(a=be[e])==null?void 0:a.prototype;(i=s==null?void 0:s.hasOwnProperty)!=null&&i.call(s,"addEventListener")&&(Nn(s,"addEventListener",function(l){return function(u,d,h){try{d9(d)&&(d.handleEvent=ic(d.handleEvent,{mechanism:{data:{handler:da(d),target:e},handled:!1,type:"auto.browser.browserapierrors.handleEvent"}}))}catch{}return t.unregisterOriginalCallbacks&&h9(this,u,d),l.apply(this,[u,ic(d,{mechanism:{data:{handler:da(d),target:e},handled:!1,type:"auto.browser.browserapierrors.addEventListener"}}),h])}}),Nn(s,"removeEventListener",function(l){return function(u,d,h){try{const p=d.__sentry_wrapped__;p&&l.call(this,u,p,h)}catch{}return l.call(this,u,d,h)}}))}function d9(e){return typeof e.handleEvent=="function"}function h9(e,t,n){e&&typeof e=="object"&&"removeEventListener"in e&&typeof e.removeEventListener=="function"&&e.removeEventListener(t,n)}const CT=()=>({name:"BrowserSession",setupOnce(){if(typeof be.document>"u"){fe&&W.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.");return}uy({ignoreDuration:!0}),dy(),lp(({from:e,to:t})=>{e!==void 0&&e!==t&&(uy({ignoreDuration:!0}),dy())})}}),f9="GlobalHandlers",m9=((e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:f9,setupOnce(){Error.stackTraceLimit=50},setup(n){t.onerror&&(p9(n),sS("onerror")),t.onunhandledrejection&&(g9(n),sS("onunhandledrejection"))}}}),TT=m9;function p9(e){W2(t=>{const{stackParser:n,attachStacktrace:s}=PT();if(ye()!==e||JC())return;const{msg:a,url:i,line:l,column:u,error:d}=t,h=x9(ap(n,d||a,void 0,s,!1),i,l,u);h.level="error",wc(h,{originalException:d,mechanism:{handled:!1,type:"auto.browser.global_handlers.onerror"}})})}function g9(e){G2(t=>{const{stackParser:n,attachStacktrace:s}=PT();if(ye()!==e||JC())return;const a=RT(t),i=hi(a)?IT(a):ap(n,a,void 0,s,!0);i.level="error",wc(i,{originalException:a,mechanism:{handled:!1,type:"auto.browser.global_handlers.onunhandledrejection"}})})}function RT(e){if(hi(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch{}return e}function IT(e){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(e)}`}]}}}function x9(e,t,n,s){const a=e.exception=e.exception||{},i=a.values=a.values||[],l=i[0]=i[0]||{},u=l.stacktrace=l.stacktrace||{},d=u.frames=u.frames||[],h=s,p=n,m=y9(t)??Oo();return d.length===0&&d.push({colno:h,filename:m,function:Ps,in_app:!0,lineno:p}),e}function sS(e){fe&&W.log(`Global Handler attached: ${e}`)}function PT(){const e=ye();return(e==null?void 0:e.getOptions())||{stackParser:()=>[],attachStacktrace:!1}}function y9(e){if(!(!ds(e)||e.length===0)){if(e.startsWith("data:")){const t=e.match(/^data:([^;]+)/),n=t?t[1]:"text/javascript",s=e.includes("base64,");return`<data:${n}${s?",base64":""}>`}return e}}const AT=()=>({name:"HttpContext",preprocessEvent(e){var s;if(!be.navigator&&!be.location&&!be.document)return;const t=nv(),n={...t.headers,...(s=e.request)==null?void 0:s.headers};e.request={...t,...e.request,headers:n}}}),b9="cause",v9=5,w9="LinkedErrors",_9=((e={})=>{const t=e.limit||v9,n=e.key||b9;return{name:w9,preprocessEvent(s,a,i){const l=i.getOptions();c8(sp,l.stackParser,n,t,s,a)}}}),OT=_9,j9="SpotlightBrowser",N9=((e={})=>{const t=e.sidecarUrl||"http://localhost:8969/stream";return{name:j9,setup:()=>{fe&&W.log("Using Sidecar URL",t)},processEvent:n=>E9(n)?null:n,afterAllSetup:n=>{S9(n,t)}}});function S9(e,t){const n=uv("fetch");let s=0;e.on("beforeEnvelope",a=>{if(s>3){W.warn("[Spotlight] Disabled Sentry -> Spotlight integration due to too many failed requests:",s);return}n(t,{method:"POST",body:tm(a),headers:{"Content-Type":"application/x-sentry-envelope"},mode:"cors"}).then(i=>{i.status>=200&&i.status<400&&(s=0)},i=>{s++,W.error("Sentry SDK can't connect to Sidecar is it running? See: https://spotlightjs.com/sidecar/npx/",i)})})}const k9=N9;function E9(e){var t;return!!(e.type==="transaction"&&e.spans&&((t=e.contexts)!=null&&t.trace)&&e.contexts.trace.op==="ui.action.click"&&e.spans.some(({description:n})=>n==null?void 0:n.includes("#sentry-spotlight")))}function C9(){return T9()?(fe&&wi(()=>{console.error("[Sentry] You cannot use Sentry.init() in a browser extension, see: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")}),!0):!1}function T9(){var i;if(typeof be.window>"u")return!1;const e=be;if(e.nw)return!1;const t=e.chrome||e.browser;if(!((i=t==null?void 0:t.runtime)!=null&&i.id))return!1;const n=Oo(),s=["chrome-extension","moz-extension","ms-browser-extension","safari-web-extension"];return!(be===be.top&&s.some(l=>n.startsWith(`${l}://`)))}function MT(e){return[lC(),iC(),ET(),kT(),TT(),OT(),hC(),AT(),CT()]}function R9(e={}){const t=!e.skipBrowserExtensionCheck&&C9();let n=e.defaultIntegrations==null?MT():e.defaultIntegrations;const s={...e,enabled:t?!1:e.enabled,stackParser:QO(e.stackParser||NT),integrations:a$({integrations:e.integrations,defaultIntegrations:n}),transport:e.transport||fv};return L$(tT,s)}function I9(){}function P9(e){e()}function Iy(e={}){const t=be.document,n=(t==null?void 0:t.head)||(t==null?void 0:t.body);if(!n){fe&&W.error("[showReportDialog] Global document not defined");return}const s=We(),a=ye(),i=a==null?void 0:a.getDsn();if(!i){fe&&W.error("[showReportDialog] DSN not configured");return}const l={...e,user:{...s.getUser(),...e.user},eventId:e.eventId||OE()},u=be.document.createElement("script");u.async=!0,u.crossOrigin="anonymous",u.src=r$(i,l);const{onLoad:d,onClose:h}=l;if(d&&(u.onload=d),h){const p=m=>{if(m.data==="__sentry_reportdialog_closed__")try{h()}finally{be.removeEventListener("message",p)}};be.addEventListener("message",p)}n.appendChild(u)}const A9=Ae,O9="ReportingObserver",aS=new WeakMap,M9=((e={})=>{const t=e.types||["crash","deprecation","intervention"];function n(s){if(aS.has(ye()))for(const a of s)hr(i=>{i.setExtra("url",a.url);const l=`ReportingObserver [${a.type}]`;let u="No details available";if(a.body){const d={};for(const h in a.body)d[h]=a.body[h];if(i.setExtra("body",d),a.type==="crash"){const h=a.body;u=[h.crashId||"",h.reason||""].join(" ").trim()||u}else u=a.body.message||u}AE(`${l}: ${u}`)})}return{name:O9,setupOnce(){if(!_U())return;new A9.ReportingObserver(n,{buffered:!0,types:t}).observe()},setup(s){aS.set(s,!0)}}}),L9=M9,$9="HttpClient",D9=((e={})=>{const t={failedRequestStatusCodes:[[500,599]],failedRequestTargets:[/.*/],...e};return{name:$9,setup(n){V9(n,t),K9(n,t)}}}),F9=D9;function U9(e,t,n,s,a){if($T(e,n.status,n.url)){const i=Y9(t,s);let l,u,d,h;FT()&&([l,d]=iS("Cookie",i),[u,h]=iS("Set-Cookie",n));const p=DT({url:i.url,method:i.method,status:n.status,requestHeaders:l,responseHeaders:u,requestCookies:d,responseCookies:h,error:a,type:"fetch"});wc(p)}}function iS(e,t){const n=H9(t.headers);let s;try{const a=n[e]||n[e.toLowerCase()]||void 0;a&&(s=LT(a))}catch{}return[n,s]}function q9(e,t,n,s,a){if($T(e,t.status,t.responseURL)){let i,l,u;if(FT()){try{const h=t.getResponseHeader("Set-Cookie")||t.getResponseHeader("set-cookie")||void 0;h&&(l=LT(h))}catch{}try{u=z9(t)}catch{}i=s}const d=DT({url:t.responseURL,method:n,status:t.status,requestHeaders:i,responseHeaders:u,responseCookies:l,error:a,type:"xhr"});wc(d)}}function B9(e){if(e){const t=e["Content-Length"]||e["content-length"];if(t)return parseInt(t,10)}}function LT(e){return e.split("; ").reduce((t,n)=>{const[s,a]=n.split("=");return s&&a&&(t[s]=a),t},{})}function H9(e){const t={};return e.forEach((n,s)=>{t[s]=n}),t}function z9(e){const t=e.getAllResponseHeaders();return t?t.split(`\r
`).reduce((n,s)=>{const[a,i]=s.split(": ");return a&&i&&(n[a]=i),n},{}):{}}function W9(e,t){return e.some(n=>typeof n=="string"?t.includes(n):n.test(t))}function G9(e,t){return e.some(n=>typeof n=="number"?n===t:t>=n[0]&&t<=n[1])}function V9(e,t){OC()&&Jb(n=>{if(ye()!==e)return;const{response:s,args:a,error:i,virtualError:l}=n,[u,d]=a;s&&U9(t,u,s,d,i||l)},!1)}function K9(e,t){"XMLHttpRequest"in Ae&&dv(n=>{if(ye()!==e)return;const{error:s,virtualError:a}=n,i=n.xhr,l=i[na];if(!l)return;const{method:u,request_headers:d}=l;try{q9(t,i,u,d,s||a)}catch(h){fe&&W.warn("Error while extracting response event form XHR response",h)}})}function $T(e,t,n){return G9(e.failedRequestStatusCodes,t)&&W9(e.failedRequestTargets,n)&&!rC(n,ye())}function DT(e){const t=ye(),n=t&&e.error&&e.error instanceof Error?e.error.stack:void 0,s=n&&t?t.getOptions().stackParser(n,0,1):void 0,a=`HTTP Client Error with status code: ${e.status}`,i={message:a,exception:{values:[{type:"Error",value:a,stacktrace:s?{frames:s}:void 0}]},request:{url:e.url,method:e.method,headers:e.requestHeaders,cookies:e.requestCookies},contexts:{response:{status_code:e.status,headers:e.responseHeaders,cookies:e.responseCookies,body_size:B9(e.responseHeaders)}}};return fa(i,{type:`auto.http.client.${e.type}`,handled:!1}),i}function Y9(e,t){return!t&&e instanceof Request||e instanceof Request&&e.bodyUsed?e:new Request(e,t)}function FT(){const e=ye();return e?!!e.getOptions().sendDefaultPii:!1}const u0=Ae,J9=7,Q9="ContextLines",X9=((e={})=>{const t=e.frameContextLines!=null?e.frameContextLines:J9;return{name:Q9,processEvent(n){return eH(n,t)}}}),Z9=X9;function eH(e,t){var u;const n=u0.document,s=u0.location&&nC(u0.location.href);if(!n||!s)return e;const a=(u=e.exception)==null?void 0:u.values;if(!(a!=null&&a.length))return e;const i=n.documentElement.innerHTML;if(!i)return e;const l=["<!DOCTYPE html>","<html>",...i.split(`
`),"</html>"];return a.forEach(d=>{const h=d.stacktrace;h!=null&&h.frames&&(h.frames=h.frames.map(p=>tH(p,l,s,t)))}),e}function tH(e,t,n,s){return e.filename!==n||!e.lineno||!t.length||uM(t,e,s),e}const nH="GraphQLClient",rH=(e=>({name:nH,setup(t){sH(t,e),aH(t,e)}}));function sH(e,t){e.on("beforeOutgoingRequestSpan",(n,s)=>{const i=Te(n).data||{};if(!(i[_t]==="http.client"))return;const d=i[kM]||i["http.url"],h=i[SM]||i["http.method"];if(!ds(d)||!ds(h))return;const{endpoints:p}=t,m=hs(d,p),g=qT(s);if(m&&g){const y=BT(g);if(y){const b=UT(y);n.updateName(`${h} ${d} (${b})`),cp(y)&&n.setAttribute("graphql.document",y.query),up(y)&&(n.setAttribute("graphql.persisted_query.hash.sha256",y.extensions.persistedQuery.sha256Hash),n.setAttribute("graphql.persisted_query.version",y.extensions.persistedQuery.version))}}})}function aH(e,t){e.on("beforeOutgoingRequestBreadcrumb",(n,s)=>{const{category:a,type:i,data:l}=n;if(i==="http"&&(a==="fetch"||a==="xhr")){const p=l==null?void 0:l.url,{endpoints:m}=t,g=hs(p,m),y=qT(s);if(g&&l&&y){const b=BT(y);if(!l.graphql&&b){const w=UT(b);l["graphql.operation"]=w,cp(b)&&(l["graphql.document"]=b.query),up(b)&&(l["graphql.persisted_query.hash.sha256"]=b.extensions.persistedQuery.sha256Hash,l["graphql.persisted_query.version"]=b.extensions.persistedQuery.version)}}}})}function UT(e){if(up(e))return`persisted ${e.operationName}`;if(cp(e)){const{query:t,operationName:n}=e,{operationName:s=n,operationType:a}=iH(t);return s?`${a} ${s}`:`${a}`}return"unknown"}function qT(e){const t="xhr"in e;let n;if(t){const s=e.xhr[na];n=s&&pm(s.body)[0]}else{const s=hv(e.input);n=pm(s)[0]}return n}function iH(e){const t=/^(?:\s*)(query|mutation|subscription)(?:\s*)(\w+)(?:\s*)[{(]/,n=/^(?:\s*)(query|mutation|subscription)(?:\s*)[{(]/,s=e.match(t);if(s)return{operationType:s[1],operationName:s[2]};const a=e.match(n);return a?{operationType:a[1],operationName:void 0}:{operationType:void 0,operationName:void 0}}function Lf(e){return typeof e=="object"&&e!==null}function cp(e){return Lf(e)&&typeof e.query=="string"}function up(e){return Lf(e)&&typeof e.operationName=="string"&&Lf(e.extensions)&&Lf(e.extensions.persistedQuery)&&typeof e.extensions.persistedQuery.sha256Hash=="string"&&typeof e.extensions.persistedQuery.version=="number"}function BT(e){try{const t=JSON.parse(e);return cp(t)||up(t)?t:void 0}catch{return}}const oH=rH,Et=Ae,mv="sentryReplaySession",lH="replay_event",pv="Unable to send Replay",cH=3e5,uH=9e5,dH=5e3,hH=5500,fH=6e4,mH=5e3,pH=3,oS=15e4,af=5e3,gH=3e3,xH=300,gv=2e7,yH=4999,bH=5e4,lS=36e5;var vH=Object.defineProperty,wH=(e,t,n)=>t in e?vH(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,cS=(e,t,n)=>wH(e,typeof t!="symbol"?t+"":t,n),sn=(e=>(e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e))(sn||{});function _H(e){return e.nodeType===e.ELEMENT_NODE}function Pu(e){const t=e==null?void 0:e.host;return(t==null?void 0:t.shadowRoot)===e}function Au(e){return Object.prototype.toString.call(e)==="[object ShadowRoot]"}function jH(e){return e.includes(" background-clip: text;")&&!e.includes(" -webkit-background-clip: text;")&&(e=e.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),e}function NH(e){const{cssText:t}=e;if(t.split('"').length<3)return t;const n=["@import",`url(${JSON.stringify(e.href)})`];return e.layerName===""?n.push("layer"):e.layerName&&n.push(`layer(${e.layerName})`),e.supportsText&&n.push(`supports(${e.supportsText})`),e.media.length&&n.push(e.media.mediaText),n.join(" ")+";"}function gm(e){try{const t=e.rules||e.cssRules;return t?jH(Array.from(t,HT).join("")):null}catch{return null}}function SH(e){let t="";for(let n=0;n<e.style.length;n++){const s=e.style,a=s[n],i=s.getPropertyPriority(a);t+=`${a}:${s.getPropertyValue(a)}${i?" !important":""};`}return`${e.selectorText} { ${t} }`}function HT(e){let t;if(EH(e))try{t=gm(e.styleSheet)||NH(e)}catch{}else if(CH(e)){let n=e.cssText;const s=e.selectorText.includes(":"),a=typeof e.style.all=="string"&&e.style.all;if(a&&(n=SH(e)),s&&(n=kH(n)),s||a)return n}return t||e.cssText}function kH(e){const t=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return e.replace(t,"$1\\$2")}function EH(e){return"styleSheet"in e}function CH(e){return"selectorText"in e}let zT=class{constructor(){cS(this,"idNodeMap",new Map),cS(this,"nodeMetaMap",new WeakMap)}getId(t){var s;return t?((s=this.getMeta(t))==null?void 0:s.id)??-1:-1}getNode(t){return this.idNodeMap.get(t)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(t){return this.nodeMetaMap.get(t)||null}removeNodeFromMap(t){const n=this.getId(t);this.idNodeMap.delete(n),t.childNodes&&t.childNodes.forEach(s=>this.removeNodeFromMap(s))}has(t){return this.idNodeMap.has(t)}hasNode(t){return this.nodeMetaMap.has(t)}add(t,n){const s=n.id;this.idNodeMap.set(s,t),this.nodeMetaMap.set(t,n)}replace(t,n){const s=this.getNode(t);if(s){const a=this.nodeMetaMap.get(s);a&&this.nodeMetaMap.set(n,a)}this.idNodeMap.set(t,n)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}};function TH(){return new zT}function dp({maskInputOptions:e,tagName:t,type:n}){return t==="OPTION"&&(t="SELECT"),!!(e[t.toLowerCase()]||n&&e[n]||n==="password"||t==="INPUT"&&!n&&e.text)}function Ku({isMasked:e,element:t,value:n,maskInputFn:s}){let a=n||"";return e?(s&&(a=s(a,t)),"*".repeat(a.length)):a}function lc(e){return e.toLowerCase()}function Py(e){return e.toUpperCase()}const uS="__rrweb_original__";function RH(e){const t=e.getContext("2d");if(!t)return!0;const n=50;for(let s=0;s<e.width;s+=n)for(let a=0;a<e.height;a+=n){const i=t.getImageData,l=uS in i?i[uS]:i;if(new Uint32Array(l.call(t,s,a,Math.min(n,e.width-s),Math.min(n,e.height-a)).data.buffer).some(d=>d!==0))return!1}return!0}function xv(e){const t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?lc(t):null}function xm(e,t,n){return t==="INPUT"&&(n==="radio"||n==="checkbox")?e.getAttribute("value")||"":e.value}function WT(e,t){let n;try{n=new URL(e,t??window.location.href)}catch{return null}const s=/\.([0-9a-z]+)(?:$)/i,a=n.pathname.match(s);return(a==null?void 0:a[1])??null}const dS={};function GT(e){const t=dS[e];if(t)return t;const n=window.document;let s=window[e];if(n&&typeof n.createElement=="function")try{const a=n.createElement("iframe");a.hidden=!0,n.head.appendChild(a);const i=a.contentWindow;i&&i[e]&&(s=i[e]),n.head.removeChild(a)}catch{}return dS[e]=s.bind(window)}function Ay(...e){return GT("setTimeout")(...e)}function VT(...e){return GT("clearTimeout")(...e)}function KT(e){try{return e.contentDocument}catch{}}let IH=1;const PH=new RegExp("[^a-z0-9-_:]"),Yu=-2;function yv(){return IH++}function AH(e){if(e instanceof HTMLFormElement)return"form";const t=lc(e.tagName);return PH.test(t)?"div":t}function OH(e){let t="";return e.indexOf("//")>-1?t=e.split("/").slice(0,3).join("/"):t=e.split("/")[0],t=t.split("?")[0],t}let bl,hS;const MH=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,LH=/^(?:[a-z+]+:)?\/\//i,$H=/^www\..*/i,DH=/^(data:)([^,]*),(.*)/i;function FH(e,t){if(!e||t.size===0)return e;try{const n=e.split(";"),s=[];for(let a of n){if(a=a.trim(),!a)continue;const i=a.indexOf(":");if(i===-1){s.push(a);continue}const l=a.slice(0,i).trim();t.has(l)||s.push(a)}return s.join("; ")+(s.length>0&&e.endsWith(";")?";":"")}catch(n){return console.warn("Error filtering CSS properties:",n),e}}function ym(e,t){return(e||"").replace(MH,(n,s,a,i,l,u)=>{const d=a||l||u,h=s||i||"";if(!d)return n;if(LH.test(d)||$H.test(d))return`url(${h}${d}${h})`;if(DH.test(d))return`url(${h}${d}${h})`;if(d[0]==="/")return`url(${h}${OH(t)+d}${h})`;const p=t.split("/"),m=d.split("/");p.pop();for(const g of m)g!=="."&&(g===".."?p.pop():p.push(g));return`url(${h}${p.join("/")}${h})`})}const UH=/^[^ \t\n\r\u000c]+/,qH=/^[, \t\n\r\u000c]+/;function BH(e,t){if(t.trim()==="")return t;let n=0;function s(i){let l;const u=i.exec(t.substring(n));return u?(l=u[0],n+=l.length,l):""}const a=[];for(;s(qH),!(n>=t.length);){let i=s(UH);if(i.slice(-1)===",")i=Tl(e,i.substring(0,i.length-1)),a.push(i);else{let l="";i=Tl(e,i);let u=!1;for(;;){const d=t.charAt(n);if(d===""){a.push((i+l).trim());break}else if(u)d===")"&&(u=!1);else if(d===","){n+=1,a.push((i+l).trim());break}else d==="("&&(u=!0);l+=d,n+=1}}}return a.join(", ")}const fS=new WeakMap;function Tl(e,t){return!t||t.trim()===""?t:hp(e,t)}function HH(e){return!!(e.tagName==="svg"||e.ownerSVGElement)}function hp(e,t){let n=fS.get(e);if(n||(n=e.createElement("a"),fS.set(e,n)),!t)t="";else if(t.startsWith("blob:")||t.startsWith("data:"))return t;return n.setAttribute("href",t),n.href}function YT(e,t,n,s,a,i,l){if(!s)return s;if(n==="src"||n==="href"&&!(t==="use"&&s[0]==="#"))return Tl(e,s);if(n==="xlink:href"&&s[0]!=="#")return Tl(e,s);if(n==="background"&&(t==="table"||t==="td"||t==="th"))return Tl(e,s);if(n==="srcset")return BH(e,s);if(n==="style"){let u=ym(s,hp(e));return l&&l.size>0&&(u=FH(u,l)),u}else if(t==="object"&&n==="data")return Tl(e,s);return typeof i=="function"?i(n,s,a):s}function JT(e,t,n){return(e==="video"||e==="audio")&&t==="autoplay"}function zH(e,t,n,s){try{if(s&&e.matches(s))return!1;if(typeof t=="string"){if(e.classList.contains(t))return!0}else for(let a=e.classList.length;a--;){const i=e.classList[a];if(t.test(i))return!0}if(n)return e.matches(n)}catch{}return!1}function WH(e,t){for(let n=e.classList.length;n--;){const s=e.classList[n];if(t.test(s))return!0}return!1}function eo(e,t,n=1/0,s=0){return!e||e.nodeType!==e.ELEMENT_NODE||s>n?-1:t(e)?s:eo(e.parentNode,t,n,s+1)}function Rl(e,t){return n=>{const s=n;if(s===null)return!1;try{if(e){if(typeof e=="string"){if(s.matches(`.${e}`))return!0}else if(WH(s,e))return!0}return!!(t&&s.matches(t))}catch{return!1}}}function cc(e,t,n,s,a,i){try{const l=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(l===null)return!1;if(l.tagName==="INPUT"){const h=l.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(h))return!0}let u=-1,d=-1;if(i){if(d=eo(l,Rl(s,a)),d<0)return!0;u=eo(l,Rl(t,n),d>=0?d:1/0)}else{if(u=eo(l,Rl(t,n)),u<0)return!1;d=eo(l,Rl(s,a),u>=0?u:1/0)}return u>=0?d>=0?u<=d:!0:d>=0?!1:!!i}catch{}return!!i}function GH(e,t,n){const s=e.contentWindow;if(!s)return;let a=!1,i;try{i=s.document.readyState}catch{return}if(i!=="complete"){const u=Ay(()=>{a||(t(),a=!0)},n);e.addEventListener("load",()=>{VT(u),a=!0,t()});return}const l="about:blank";if(s.location.href!==l||e.src===l||e.src==="")return Ay(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}function VH(e,t,n){let s=!1,a;try{a=e.sheet}catch{return}if(a)return;const i=Ay(()=>{s||(t(),s=!0)},n);e.addEventListener("load",()=>{VT(i),s=!0,t()})}function KH(e,t){const{doc:n,mirror:s,blockClass:a,blockSelector:i,unblockSelector:l,maskAllText:u,maskAttributeFn:d,maskTextClass:h,unmaskTextClass:p,maskTextSelector:m,unmaskTextSelector:g,inlineStylesheet:y,maskInputOptions:b={},maskTextFn:w,maskInputFn:v,dataURLOptions:j={},inlineImages:E,recordCanvas:k,keepIframeSrcFn:S,newlyAddedElement:P=!1,ignoreCSSAttributes:A}=t,T=YH(n,s);switch(e.nodeType){case e.DOCUMENT_NODE:return e.compatMode!=="CSS1Compat"?{type:sn.Document,childNodes:[],compatMode:e.compatMode}:{type:sn.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:sn.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:T};case e.ELEMENT_NODE:return QH(e,{doc:n,blockClass:a,blockSelector:i,unblockSelector:l,inlineStylesheet:y,maskAttributeFn:d,maskInputOptions:b,maskInputFn:v,dataURLOptions:j,inlineImages:E,recordCanvas:k,keepIframeSrcFn:S,newlyAddedElement:P,rootId:T,maskTextClass:h,unmaskTextClass:p,maskTextSelector:m,unmaskTextSelector:g,ignoreCSSAttributes:A});case e.TEXT_NODE:return JH(e,{doc:n,maskAllText:u,maskTextClass:h,unmaskTextClass:p,maskTextSelector:m,unmaskTextSelector:g,maskTextFn:w,maskInputOptions:b,maskInputFn:v,rootId:T});case e.CDATA_SECTION_NODE:return{type:sn.CDATA,textContent:"",rootId:T};case e.COMMENT_NODE:return{type:sn.Comment,textContent:e.textContent||"",rootId:T};default:return!1}}function YH(e,t){if(!t.hasNode(e))return;const n=t.getId(e);return n===1?void 0:n}function JH(e,t){var j;const{maskAllText:n,maskTextClass:s,unmaskTextClass:a,maskTextSelector:i,unmaskTextSelector:l,maskTextFn:u,maskInputOptions:d,maskInputFn:h,rootId:p}=t,m=e.parentNode&&e.parentNode.tagName;let g=e.textContent;const y=m==="STYLE"?!0:void 0,b=m==="SCRIPT"?!0:void 0,w=m==="TEXTAREA"?!0:void 0;if(y&&g){try{e.nextSibling||e.previousSibling||(j=e.parentNode.sheet)!=null&&j.cssRules&&(g=gm(e.parentNode.sheet))}catch(E){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${E}`,e)}g=ym(g,hp(t.doc))}b&&(g="SCRIPT_PLACEHOLDER");const v=cc(e,s,i,a,l,n);if(!y&&!b&&!w&&g&&v&&(g=u?u(g,e.parentElement):g.replace(/[\S]/g,"*")),w&&g&&(d.textarea||v)&&(g=h?h(g,e.parentNode):g.replace(/[\S]/g,"*")),m==="OPTION"&&g){const E=dp({type:null,tagName:m,maskInputOptions:d});g=Ku({isMasked:cc(e,s,i,a,l,E),element:e,value:g,maskInputFn:h})}return{type:sn.Text,textContent:g||"",isStyle:y,rootId:p}}function QH(e,t){const{doc:n,blockClass:s,blockSelector:a,unblockSelector:i,inlineStylesheet:l,maskInputOptions:u={},maskAttributeFn:d,maskInputFn:h,dataURLOptions:p={},inlineImages:m,recordCanvas:g,keepIframeSrcFn:y,newlyAddedElement:b=!1,rootId:w,maskTextClass:v,unmaskTextClass:j,maskTextSelector:E,unmaskTextSelector:k,ignoreCSSAttributes:S}=t,P=zH(e,s,a,i),A=AH(e);let T={};const L=e.attributes.length;for(let R=0;R<L;R++){const M=e.attributes[R];M.name&&!JT(A,M.name,M.value)&&(T[M.name]=YT(n,A,lc(M.name),M.value,e,d,S))}if(A==="link"&&l){const R=Array.from(n.styleSheets).find(O=>O.href===e.href);let M=null;R&&(M=gm(R)),M&&(T.rel=null,T.href=null,T.crossorigin=null,T._cssText=ym(M,R.href))}if(A==="style"&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){const R=gm(e.sheet);R&&(T._cssText=ym(R,hp(n)))}if(A==="input"||A==="textarea"||A==="select"||A==="option"){const R=e,M=xv(R),O=xm(R,Py(A),M),F=R.checked;if(M!=="submit"&&M!=="button"&&O){const K=cc(R,v,E,j,k,dp({type:M,tagName:Py(A),maskInputOptions:u}));T.value=Ku({isMasked:K,element:R,value:O,maskInputFn:h})}F&&(T.checked=F)}if(A==="option"&&(e.selected&&!u.select?T.selected=!0:delete T.selected),A==="canvas"&&g){if(e.__context==="2d")RH(e)||(T.rr_dataURL=e.toDataURL(p.type,p.quality));else if(!("__context"in e)){const R=e.toDataURL(p.type,p.quality),M=n.createElement("canvas");M.width=e.width,M.height=e.height;const O=M.toDataURL(p.type,p.quality);R!==O&&(T.rr_dataURL=R)}}if(A==="img"&&m){bl||(bl=n.createElement("canvas"),hS=bl.getContext("2d"));const R=e,M=R.currentSrc||R.getAttribute("src")||"<unknown-src>",O=R.crossOrigin,F=()=>{R.removeEventListener("load",F);try{bl.width=R.naturalWidth,bl.height=R.naturalHeight,hS.drawImage(R,0,0),T.rr_dataURL=bl.toDataURL(p.type,p.quality)}catch(K){if(R.crossOrigin!=="anonymous"){R.crossOrigin="anonymous",R.complete&&R.naturalWidth!==0?F():R.addEventListener("load",F);return}else console.warn(`Cannot inline img src=${M}! Error: ${K}`)}R.crossOrigin==="anonymous"&&(O?T.crossOrigin=O:R.removeAttribute("crossorigin"))};R.complete&&R.naturalWidth!==0?F():R.addEventListener("load",F)}if((A==="audio"||A==="video")&&(T.rr_mediaState=e.paused?"paused":"played",T.rr_mediaCurrentTime=e.currentTime),b||(e.scrollLeft&&(T.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(T.rr_scrollTop=e.scrollTop)),P){const{width:R,height:M}=e.getBoundingClientRect();T={class:T.class,rr_width:`${R}px`,rr_height:`${M}px`}}A==="iframe"&&!y(T.src)&&(!P&&!KT(e)&&(T.rr_src=T.src),delete T.src);let H;try{customElements.get(A)&&(H=!0)}catch{}return{type:sn.Element,tagName:A,attributes:T,childNodes:[],isSVG:HH(e)||void 0,needBlock:P,rootId:w,isCustom:H}}function St(e){return e==null?"":e.toLowerCase()}function XH(e,t){if(t.comment&&e.type===sn.Comment)return!0;if(e.type===sn.Element){if(t.script&&(e.tagName==="script"||e.tagName==="link"&&(e.attributes.rel==="preload"||e.attributes.rel==="modulepreload")||e.tagName==="link"&&e.attributes.rel==="prefetch"&&typeof e.attributes.href=="string"&&WT(e.attributes.href)==="js"))return!0;if(t.headFavicon&&(e.tagName==="link"&&e.attributes.rel==="shortcut icon"||e.tagName==="meta"&&(St(e.attributes.name).match(/^msapplication-tile(image|color)$/)||St(e.attributes.name)==="application-name"||St(e.attributes.rel)==="icon"||St(e.attributes.rel)==="apple-touch-icon"||St(e.attributes.rel)==="shortcut icon")))return!0;if(e.tagName==="meta"){if(t.headMetaDescKeywords&&St(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(St(e.attributes.property).match(/^(og|twitter|fb):/)||St(e.attributes.name).match(/^(og|twitter):/)||St(e.attributes.name)==="pinterest"))return!0;if(t.headMetaRobots&&(St(e.attributes.name)==="robots"||St(e.attributes.name)==="googlebot"||St(e.attributes.name)==="bingbot"))return!0;if(t.headMetaHttpEquiv&&e.attributes["http-equiv"]!==void 0)return!0;if(t.headMetaAuthorship&&(St(e.attributes.name)==="author"||St(e.attributes.name)==="generator"||St(e.attributes.name)==="framework"||St(e.attributes.name)==="publisher"||St(e.attributes.name)==="progid"||St(e.attributes.property).match(/^article:/)||St(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&(St(e.attributes.name)==="google-site-verification"||St(e.attributes.name)==="yandex-verification"||St(e.attributes.name)==="csrf-token"||St(e.attributes.name)==="p:domain_verify"||St(e.attributes.name)==="verify-v1"||St(e.attributes.name)==="verification"||St(e.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}function Il(e,t){const{doc:n,mirror:s,blockClass:a,blockSelector:i,unblockSelector:l,maskAllText:u,maskTextClass:d,unmaskTextClass:h,maskTextSelector:p,unmaskTextSelector:m,skipChild:g=!1,inlineStylesheet:y=!0,maskInputOptions:b={},maskAttributeFn:w,maskTextFn:v,maskInputFn:j,slimDOMOptions:E,dataURLOptions:k={},inlineImages:S=!1,recordCanvas:P=!1,onSerialize:A,onIframeLoad:T,iframeLoadTimeout:L=5e3,onBlockedImageLoad:H,onStylesheetLoad:R,stylesheetLoadTimeout:M=5e3,keepIframeSrcFn:O=()=>!1,newlyAddedElement:F=!1,ignoreCSSAttributes:K}=t;let{preserveWhiteSpace:ae=!0}=t;const X=KH(e,{doc:n,mirror:s,blockClass:a,blockSelector:i,maskAllText:u,unblockSelector:l,maskTextClass:d,unmaskTextClass:h,maskTextSelector:p,unmaskTextSelector:m,inlineStylesheet:y,maskInputOptions:b,maskAttributeFn:w,maskTextFn:v,maskInputFn:j,dataURLOptions:k,inlineImages:S,recordCanvas:P,keepIframeSrcFn:O,newlyAddedElement:F,ignoreCSSAttributes:K});if(!X)return console.warn(e,"not serialized"),null;let ee;s.hasNode(e)?ee=s.getId(e):XH(X,E)||!ae&&X.type===sn.Text&&!X.isStyle&&!X.textContent.replace(/^\s+|\s+$/gm,"").length?ee=Yu:ee=yv();const D=Object.assign(X,{id:ee});if(s.add(e,D),ee===Yu)return null;A&&A(e);let te=!g;if(D.type===sn.Element){te=te&&!D.needBlock;const V=e.shadowRoot;V&&Au(V)&&(D.isShadowHost=!0)}if((D.type===sn.Document||D.type===sn.Element)&&te){E.headWhitespace&&D.type===sn.Element&&D.tagName==="head"&&(ae=!1);const V={doc:n,mirror:s,blockClass:a,blockSelector:i,maskAllText:u,unblockSelector:l,maskTextClass:d,unmaskTextClass:h,maskTextSelector:p,unmaskTextSelector:m,skipChild:g,inlineStylesheet:y,maskInputOptions:b,maskAttributeFn:w,maskTextFn:v,maskInputFn:j,slimDOMOptions:E,dataURLOptions:k,inlineImages:S,recordCanvas:P,preserveWhiteSpace:ae,onSerialize:A,onIframeLoad:T,iframeLoadTimeout:L,onBlockedImageLoad:H,onStylesheetLoad:R,stylesheetLoadTimeout:M,keepIframeSrcFn:O,ignoreCSSAttributes:K},$=e.childNodes?Array.from(e.childNodes):[];for(const J of $){const le=Il(J,V);le&&D.childNodes.push(le)}if(_H(e)&&e.shadowRoot)for(const J of Array.from(e.shadowRoot.childNodes)){const le=Il(J,V);le&&(Au(e.shadowRoot)&&(le.isShadow=!0),D.childNodes.push(le))}}if(e.parentNode&&Pu(e.parentNode)&&Au(e.parentNode)&&(D.isShadow=!0),D.type===sn.Element&&D.tagName==="iframe"&&!D.needBlock&&GH(e,()=>{const V=KT(e);if(V&&T){const $=Il(V,{doc:V,mirror:s,blockClass:a,blockSelector:i,unblockSelector:l,maskAllText:u,maskTextClass:d,unmaskTextClass:h,maskTextSelector:p,unmaskTextSelector:m,skipChild:!1,inlineStylesheet:y,maskInputOptions:b,maskAttributeFn:w,maskTextFn:v,maskInputFn:j,slimDOMOptions:E,dataURLOptions:k,inlineImages:S,recordCanvas:P,preserveWhiteSpace:ae,onSerialize:A,onIframeLoad:T,iframeLoadTimeout:L,onStylesheetLoad:R,stylesheetLoadTimeout:M,keepIframeSrcFn:O,ignoreCSSAttributes:K});$&&T(e,$)}},L),D.type===sn.Element&&D.tagName==="img"&&!e.complete&&D.needBlock){const V=e,$=()=>{if(V.isConnected&&!V.complete&&H)try{const J=V.getBoundingClientRect();J.width>0&&J.height>0&&H(V,D,J)}catch{}V.removeEventListener("load",$)};V.isConnected&&V.addEventListener("load",$)}return D.type===sn.Element&&D.tagName==="link"&&typeof D.attributes.rel=="string"&&(D.attributes.rel==="stylesheet"||D.attributes.rel==="preload"&&typeof D.attributes.href=="string"&&WT(D.attributes.href)==="css")&&VH(e,()=>{if(R){const V=Il(e,{doc:n,mirror:s,blockClass:a,blockSelector:i,unblockSelector:l,maskAllText:u,maskTextClass:d,unmaskTextClass:h,maskTextSelector:p,unmaskTextSelector:m,skipChild:!1,inlineStylesheet:y,maskInputOptions:b,maskAttributeFn:w,maskTextFn:v,maskInputFn:j,slimDOMOptions:E,dataURLOptions:k,inlineImages:S,recordCanvas:P,preserveWhiteSpace:ae,onSerialize:A,onIframeLoad:T,iframeLoadTimeout:L,onStylesheetLoad:R,stylesheetLoadTimeout:M,keepIframeSrcFn:O,ignoreCSSAttributes:K});V&&R(e,V)}},M),D.type===sn.Element&&delete D.needBlock,D}function ZH(e,t){const{mirror:n=new zT,blockClass:s="rr-block",blockSelector:a=null,unblockSelector:i=null,maskAllText:l=!1,maskTextClass:u="rr-mask",unmaskTextClass:d=null,maskTextSelector:h=null,unmaskTextSelector:p=null,inlineStylesheet:m=!0,inlineImages:g=!1,recordCanvas:y=!1,maskAllInputs:b=!1,maskAttributeFn:w,maskTextFn:v,maskInputFn:j,slimDOM:E=!1,dataURLOptions:k,preserveWhiteSpace:S,onSerialize:P,onIframeLoad:A,iframeLoadTimeout:T,onBlockedImageLoad:L,onStylesheetLoad:H,stylesheetLoadTimeout:R,keepIframeSrcFn:M=()=>!1,ignoreCSSAttributes:O=new Set([])}=t||{};return Il(e,{doc:e,mirror:n,blockClass:s,blockSelector:a,unblockSelector:i,maskAllText:l,maskTextClass:u,unmaskTextClass:d,maskTextSelector:h,unmaskTextSelector:p,skipChild:!1,inlineStylesheet:m,maskInputOptions:b===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:b===!1?{}:b,maskAttributeFn:w,maskTextFn:v,maskInputFn:j,slimDOMOptions:E===!0||E==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:E==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:E===!1?{}:E,dataURLOptions:k,inlineImages:g,recordCanvas:y,preserveWhiteSpace:S,onSerialize:P,onIframeLoad:A,iframeLoadTimeout:T,onBlockedImageLoad:L,onStylesheetLoad:H,stylesheetLoadTimeout:R,keepIframeSrcFn:M,newlyAddedElement:!1,ignoreCSSAttributes:O})}function Vn(e,t,n=document){const s={capture:!0,passive:!0};return n.addEventListener(e,t,s),()=>n.removeEventListener(e,t,s)}const Nl=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let mS={map:{},getId(){return console.error(Nl),-1},getNode(){return console.error(Nl),null},removeNodeFromMap(){console.error(Nl)},has(){return console.error(Nl),!1},reset(){console.error(Nl)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(mS=new Proxy(mS,{get(e,t,n){return t==="map"&&console.error(Nl),Reflect.get(e,t,n)}}));function Ju(e,t,n={}){let s=null,a=0;return function(...i){const l=Date.now();!a&&n.leading===!1&&(a=l);const u=t-(l-a),d=this;u<=0||u>t?(s&&(iz(s),s=null),a=l,e.apply(d,i)):!s&&n.trailing!==!1&&(s=fp(()=>{a=n.leading===!1?0:Date.now(),s=null,e.apply(d,i)},u))}}function QT(e,t,n,s,a=window){const i=a.Object.getOwnPropertyDescriptor(e,t);return a.Object.defineProperty(e,t,s?n:{set(l){fp(()=>{n.set.call(this,l)},0),i&&i.set&&i.set.call(this,l)}}),()=>QT(e,t,i||{},!0)}function bv(e,t,n){try{if(!(t in e))return()=>{};const s=e[t],a=n(s);return typeof a=="function"&&(a.prototype=a.prototype||{},Object.defineProperties(a,{__rrweb_original__:{enumerable:!1,value:s}})),e[t]=a,()=>{e[t]=s}}catch{return()=>{}}}let bm=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||(bm=()=>new Date().getTime());function XT(e){var n,s,a,i,l,u;const t=e.document;return{left:t.scrollingElement?t.scrollingElement.scrollLeft:e.pageXOffset!==void 0?e.pageXOffset:(t==null?void 0:t.documentElement.scrollLeft)||((s=(n=t==null?void 0:t.body)==null?void 0:n.parentElement)==null?void 0:s.scrollLeft)||((a=t==null?void 0:t.body)==null?void 0:a.scrollLeft)||0,top:t.scrollingElement?t.scrollingElement.scrollTop:e.pageYOffset!==void 0?e.pageYOffset:(t==null?void 0:t.documentElement.scrollTop)||((l=(i=t==null?void 0:t.body)==null?void 0:i.parentElement)==null?void 0:l.scrollTop)||((u=t==null?void 0:t.body)==null?void 0:u.scrollTop)||0}}function ZT(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function e5(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function t5(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch{return null}}function wr(e,t,n,s,a){if(!e)return!1;const i=t5(e);if(!i)return!1;const l=Rl(t,n);if(!a){const h=s&&i.matches(s);return l(i)&&!h}const u=eo(i,l);let d=-1;return u<0?!1:(s&&(d=eo(i,Rl(null,s))),u>-1&&d<0?!0:u<d)}function ez(e,t){return t.getId(e)!==-1}function d0(e,t){return t.getId(e)===Yu}function n5(e,t){if(Pu(e))return!1;const n=t.getId(e);return t.has(n)?e.parentNode&&e.parentNode.nodeType===e.DOCUMENT_NODE?!1:e.parentNode?n5(e.parentNode,t):!0:!0}function Oy(e){return!!e.changedTouches}function tz(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...t)=>{let n=t[0];if(!(0 in t))throw new TypeError("1 argument is required");do if(this===n)return!0;while(n=n&&n.parentNode);return!1})}function r5(e,t){return!!(e.nodeName==="IFRAME"&&t.getMeta(e))}function s5(e,t){return!!(e.nodeName==="LINK"&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&e.getAttribute("rel")==="stylesheet"&&t.getMeta(e))}function My(e){return!!(e!=null&&e.shadowRoot)}class nz{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(t){return this.styleIDMap.get(t)??-1}has(t){return this.styleIDMap.has(t)}add(t,n){if(this.has(t))return this.getId(t);let s;return n===void 0?s=this.id++:s=n,this.styleIDMap.set(t,s),this.idStyleMap.set(s,t),s}getStyle(t){return this.idStyleMap.get(t)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function a5(e){var n,s;let t=null;return((s=(n=e.getRootNode)==null?void 0:n.call(e))==null?void 0:s.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(t=e.getRootNode().host),t}function rz(e){let t=e,n;for(;n=a5(t);)t=n;return t}function sz(e){const t=e.ownerDocument;if(!t)return!1;const n=rz(e);return t.contains(n)}function i5(e){const t=e.ownerDocument;return t?t.contains(e)||sz(e):!1}const pS={};function vv(e){const t=pS[e];if(t)return t;const n=window.document;let s=window[e];if(n&&typeof n.createElement=="function")try{const a=n.createElement("iframe");a.hidden=!0,n.head.appendChild(a);const i=a.contentWindow;i&&i[e]&&(s=i[e]),n.head.removeChild(a)}catch{}return pS[e]=s.bind(window)}function az(...e){return vv("requestAnimationFrame")(...e)}function fp(...e){return vv("setTimeout")(...e)}function iz(...e){return vv("clearTimeout")(...e)}var Xe=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(Xe||{}),ze=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(ze||{}),Hn=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(Hn||{}),Ks=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(Ks||{}),Sl=(e=>(e[e.Play=0]="Play",e[e.Pause=1]="Pause",e[e.Seeked=2]="Seeked",e[e.VolumeChange=3]="VolumeChange",e[e.RateChange=4]="RateChange",e))(Sl||{});function wv(e){try{return e.contentDocument}catch{}}function oz(e){try{return e.contentWindow}catch{}}function gS(e){return"__ln"in e}class lz{constructor(){this.length=0,this.head=null,this.tail=null}get(t){if(t>=this.length)throw new Error("Position outside of list range");let n=this.head;for(let s=0;s<t;s++)n=(n==null?void 0:n.next)||null;return n}addNode(t){const n={value:t,previous:null,next:null};if(t.__ln=n,t.previousSibling&&gS(t.previousSibling)){const s=t.previousSibling.__ln.next;n.next=s,n.previous=t.previousSibling.__ln,t.previousSibling.__ln.next=n,s&&(s.previous=n)}else if(t.nextSibling&&gS(t.nextSibling)&&t.nextSibling.__ln.previous){const s=t.nextSibling.__ln.previous;n.previous=s,n.next=t.nextSibling.__ln,t.nextSibling.__ln.previous=n,s&&(s.next=n)}else this.head&&(this.head.previous=n),n.next=this.head,this.head=n;n.next===null&&(this.tail=n),this.length++}removeNode(t){const n=t.__ln;this.head&&(n.previous?(n.previous.next=n.next,n.next?n.next.previous=n.previous:this.tail=n.previous):(this.head=n.next,this.head?this.head.previous=null:this.tail=null),t.__ln&&delete t.__ln,this.length--)}}const xS=(e,t)=>`${e}@${t}`;class cz{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=t=>{t.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const t=[],n=new Set,s=new lz,a=d=>{let h=d,p=Yu;for(;p===Yu;)h=h&&h.nextSibling,p=h&&this.mirror.getId(h);return p},i=d=>{if(!d.parentNode||!i5(d))return;const h=Pu(d.parentNode)?this.mirror.getId(a5(d)):this.mirror.getId(d.parentNode),p=a(d);if(h===-1||p===-1)return s.addNode(d);const m=Il(d,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:g=>{r5(g,this.mirror)&&!wr(g,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&this.iframeManager.addIframe(g),s5(g,this.mirror)&&this.stylesheetManager.trackLinkElement(g),My(d)&&this.shadowDomManager.addShadowRoot(d.shadowRoot,this.doc)},onIframeLoad:(g,y)=>{wr(g,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(this.iframeManager.attachIframe(g,y),g.contentWindow&&this.canvasManager.addWindow(g.contentWindow),this.shadowDomManager.observeAttachShadow(g))},onStylesheetLoad:(g,y)=>{this.stylesheetManager.attachLinkElement(g,y)},onBlockedImageLoad:(g,y,{width:b,height:w})=>{this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:y.id,attributes:{style:{width:`${b}px`,height:`${w}px`}}}]})},ignoreCSSAttributes:this.ignoreCSSAttributes});m&&(t.push({parentId:h,nextId:p,node:m}),n.add(m.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const d of this.movedSet)yS(this.removes,d,this.mirror)&&!this.movedSet.has(d.parentNode)||i(d);for(const d of this.addedSet)!bS(this.droppedSet,d)&&!yS(this.removes,d,this.mirror)||bS(this.movedSet,d)?i(d):this.droppedSet.add(d);let l=null;for(;s.length;){let d=null;if(l){const h=this.mirror.getId(l.value.parentNode),p=a(l.value);h!==-1&&p!==-1&&(d=l)}if(!d){let h=s.tail;for(;h;){const p=h;if(h=h.previous,p){const m=this.mirror.getId(p.value.parentNode);if(a(p.value)===-1)continue;if(m!==-1){d=p;break}else{const y=p.value;if(y.parentNode&&y.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const b=y.parentNode.host;if(this.mirror.getId(b)!==-1){d=p;break}}}}}}if(!d){for(;s.head;)s.removeNode(s.head.value);break}l=d.previous,s.removeNode(d.value),i(d.value)}const u={texts:this.texts.map(d=>({id:this.mirror.getId(d.node),value:d.value})).filter(d=>!n.has(d.id)).filter(d=>this.mirror.has(d.id)),attributes:this.attributes.map(d=>{const{attributes:h}=d;if(typeof h.style=="string"){const p=JSON.stringify(d.styleDiff),m=JSON.stringify(d._unchangedStyles);p.length<h.style.length&&(p+m).split("var(").length===h.style.split("var(").length&&(h.style=d.styleDiff)}return{id:this.mirror.getId(d.node),attributes:h}}).filter(d=>!n.has(d.id)).filter(d=>this.mirror.has(d.id)),removes:this.removes,adds:t};!u.texts.length&&!u.attributes.length&&!u.removes.length&&!u.adds.length||(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(u))},this.processMutation=t=>{if(!d0(t.target,this.mirror))switch(t.type){case"characterData":{const n=t.target.textContent;!wr(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&n!==t.oldValue&&this.texts.push({value:cc(t.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&n?this.maskTextFn?this.maskTextFn(n,t5(t.target)):n.replace(/[\S]/g,"*"):n,node:t.target});break}case"attributes":{const n=t.target;let s=t.attributeName,a=t.target.getAttribute(s);if(s==="value"){const l=xv(n),u=n.tagName;a=xm(n,u,l);const d=dp({maskInputOptions:this.maskInputOptions,tagName:u,type:l}),h=cc(t.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,d);a=Ku({isMasked:h,element:n,value:a,maskInputFn:this.maskInputFn})}if(wr(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||a===t.oldValue)return;let i=this.attributeMap.get(t.target);if(n.tagName==="IFRAME"&&s==="src"&&!this.keepIframeSrcFn(a))if(!wv(n))s="rr_src";else return;if(i||(i={node:t.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(i),this.attributeMap.set(t.target,i)),s==="type"&&n.tagName==="INPUT"&&(t.oldValue||"").toLowerCase()==="password"&&n.setAttribute("data-rr-is-password","true"),!JT(n.tagName,s)&&(i.attributes[s]=YT(this.doc,lc(n.tagName),lc(s),a,n,this.maskAttributeFn),s==="style")){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch{this.unattachedDoc=this.doc}const l=this.unattachedDoc.createElement("span");t.oldValue&&l.setAttribute("style",t.oldValue);for(const u of Array.from(n.style)){const d=n.style.getPropertyValue(u),h=n.style.getPropertyPriority(u);d!==l.style.getPropertyValue(u)||h!==l.style.getPropertyPriority(u)?h===""?i.styleDiff[u]=d:i.styleDiff[u]=[d,h]:i._unchangedStyles[u]=[d,h]}for(const u of Array.from(l.style))n.style.getPropertyValue(u)===""&&(i.styleDiff[u]=!1)}break}case"childList":{if(wr(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;t.addedNodes.forEach(n=>this.genAdds(n,t.target)),t.removedNodes.forEach(n=>{const s=this.mirror.getId(n),a=Pu(t.target)?this.mirror.getId(t.target.host):this.mirror.getId(t.target);wr(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||d0(n,this.mirror)||!ez(n,this.mirror)||(this.addedSet.has(n)?(Ly(this.addedSet,n),this.droppedSet.add(n)):this.addedSet.has(t.target)&&s===-1||n5(t.target,this.mirror)||(this.movedSet.has(n)&&this.movedMap[xS(s,a)]?Ly(this.movedSet,n):this.removes.push({parentId:a,id:s,isShadow:Pu(t.target)&&Au(t.target)?!0:void 0})),this.mapRemoves.push(n))});break}}},this.genAdds=(t,n)=>{if(!this.processedNodeManager.inOtherBuffer(t,this)&&!(this.addedSet.has(t)||this.movedSet.has(t))){if(this.mirror.hasNode(t)){if(d0(t,this.mirror))return;this.movedSet.add(t);let s=null;n&&this.mirror.hasNode(n)&&(s=this.mirror.getId(n)),s&&s!==-1&&(this.movedMap[xS(this.mirror.getId(t),s)]=!0)}else this.addedSet.add(t),this.droppedSet.delete(t);wr(t,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(t.childNodes&&t.childNodes.forEach(s=>this.genAdds(s)),My(t)&&t.shadowRoot.childNodes.forEach(s=>{this.processedNodeManager.add(s,this),this.genAdds(s,t)}))}}}init(t){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager","ignoreCSSAttributes"].forEach(n=>{this[n]=t[n]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function Ly(e,t){var n;e.delete(t),(n=t.childNodes)==null||n.forEach(s=>Ly(e,s))}function yS(e,t,n){return e.length===0?!1:uz(e,t,n)}function uz(e,t,n){let s=t.parentNode;for(;s;){const a=n.getId(s);if(e.some(i=>i.id===a))return!0;s=s.parentNode}return!1}function bS(e,t){return e.size===0?!1:o5(e,t)}function o5(e,t){const{parentNode:n}=t;return n?e.has(n)?!0:o5(e,n):!1}let Ou;function dz(e){Ou=e}function hz(){Ou=void 0}const st=e=>Ou?(...n)=>{try{return e(...n)}catch(s){if(Ou&&Ou(s)===!0)return()=>{};throw s}}:e,Pl=[];function kd(e){try{if("composedPath"in e){const t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch{}return e&&e.target}function l5(e,t){var l,u;const n=new cz;Pl.push(n),n.init(e);let s=window.MutationObserver||window.__rrMutationObserver;const a=(u=(l=window==null?void 0:window.Zone)==null?void 0:l.__symbol__)==null?void 0:u.call(l,"MutationObserver");a&&window[a]&&(s=window[a]);const i=new s(st(d=>{e.onMutation&&e.onMutation(d)===!1||n.processMutations.bind(n)(d)}));return i.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),i}function fz({mousemoveCb:e,sampling:t,doc:n,mirror:s}){if(t.mousemove===!1)return()=>{};const a=typeof t.mousemove=="number"?t.mousemove:50,i=typeof t.mousemoveCallback=="number"?t.mousemoveCallback:500;let l=[],u;const d=Ju(st(m=>{const g=Date.now()-u;e(l.map(y=>(y.timeOffset-=g,y)),m),l=[],u=null}),i),h=st(Ju(st(m=>{const g=kd(m),{clientX:y,clientY:b}=Oy(m)?m.changedTouches[0]:m;u||(u=bm()),l.push({x:y,y:b,id:s.getId(g),timeOffset:bm()-u}),d(typeof DragEvent<"u"&&m instanceof DragEvent?ze.Drag:m instanceof MouseEvent?ze.MouseMove:ze.TouchMove)}),a,{trailing:!1})),p=[Vn("mousemove",h,n),Vn("touchmove",h,n),Vn("drag",h,n)];return st(()=>{p.forEach(m=>m())})}function mz({mouseInteractionCb:e,doc:t,mirror:n,blockClass:s,blockSelector:a,unblockSelector:i,sampling:l}){if(l.mouseInteraction===!1)return()=>{};const u=l.mouseInteraction===!0||l.mouseInteraction===void 0?{}:l.mouseInteraction,d=[];let h=null;const p=m=>g=>{const y=kd(g);if(wr(y,s,a,i,!0))return;let b=null,w=m;if("pointerType"in g){switch(g.pointerType){case"mouse":b=Ks.Mouse;break;case"touch":b=Ks.Touch;break;case"pen":b=Ks.Pen;break}b===Ks.Touch?Hn[m]===Hn.MouseDown?w="TouchStart":Hn[m]===Hn.MouseUp&&(w="TouchEnd"):Ks.Pen}else Oy(g)&&(b=Ks.Touch);b!==null?(h=b,(w.startsWith("Touch")&&b===Ks.Touch||w.startsWith("Mouse")&&b===Ks.Mouse)&&(b=null)):Hn[m]===Hn.Click&&(b=h,h=null);const v=Oy(g)?g.changedTouches[0]:g;if(!v)return;const j=n.getId(y),{clientX:E,clientY:k}=v;st(e)({type:Hn[w],id:j,x:E,y:k,...b!==null&&{pointerType:b}})};return Object.keys(Hn).filter(m=>Number.isNaN(Number(m))&&!m.endsWith("_Departed")&&u[m]!==!1).forEach(m=>{let g=lc(m);const y=p(m);if(window.PointerEvent)switch(Hn[m]){case Hn.MouseDown:case Hn.MouseUp:g=g.replace("mouse","pointer");break;case Hn.TouchStart:case Hn.TouchEnd:return}d.push(Vn(g,y,t))}),st(()=>{d.forEach(m=>m())})}function c5({scrollCb:e,doc:t,mirror:n,blockClass:s,blockSelector:a,unblockSelector:i,sampling:l}){const u=st(Ju(st(d=>{const h=kd(d);if(!h||wr(h,s,a,i,!0))return;const p=n.getId(h);if(h===t&&t.defaultView){const m=XT(t.defaultView);e({id:p,x:m.left,y:m.top})}else e({id:p,x:h.scrollLeft,y:h.scrollTop})}),l.scroll||100));return Vn("scroll",u,t)}function pz({viewportResizeCb:e},{win:t}){let n=-1,s=-1;const a=st(Ju(st(()=>{const i=ZT(),l=e5();(n!==i||s!==l)&&(e({width:Number(l),height:Number(i)}),n=i,s=l)}),200));return Vn("resize",a,t)}const gz=["INPUT","TEXTAREA","SELECT"],vS=new WeakMap;function xz({inputCb:e,doc:t,mirror:n,blockClass:s,blockSelector:a,unblockSelector:i,ignoreClass:l,ignoreSelector:u,maskInputOptions:d,maskInputFn:h,sampling:p,userTriggeredOnInput:m,maskTextClass:g,unmaskTextClass:y,maskTextSelector:b,unmaskTextSelector:w}){function v(T){let L=kd(T);const H=T.isTrusted,R=L&&Py(L.tagName);if(R==="OPTION"&&(L=L.parentElement),!L||!R||gz.indexOf(R)<0||wr(L,s,a,i,!0))return;const M=L;if(M.classList.contains(l)||u&&M.matches(u))return;const O=xv(L);let F=xm(M,R,O),K=!1;const ae=dp({maskInputOptions:d,tagName:R,type:O}),X=cc(L,g,b,y,w,ae);(O==="radio"||O==="checkbox")&&(K=L.checked),F=Ku({isMasked:X,element:L,value:F,maskInputFn:h}),j(L,m?{text:F,isChecked:K,userTriggered:H}:{text:F,isChecked:K});const ee=L.name;O==="radio"&&ee&&K&&t.querySelectorAll(`input[type="radio"][name="${ee}"]`).forEach(D=>{if(D!==L){const te=Ku({isMasked:X,element:D,value:xm(D,R,O),maskInputFn:h});j(D,m?{text:te,isChecked:!K,userTriggered:!1}:{text:te,isChecked:!K})}})}function j(T,L){const H=vS.get(T);if(!H||H.text!==L.text||H.isChecked!==L.isChecked){vS.set(T,L);const R=n.getId(T);st(e)({...L,id:R})}}const k=(p.input==="last"?["change"]:["input","change"]).map(T=>Vn(T,st(v),t)),S=t.defaultView;if(!S)return()=>{k.forEach(T=>T())};const P=S.Object.getOwnPropertyDescriptor(S.HTMLInputElement.prototype,"value"),A=[[S.HTMLInputElement.prototype,"value"],[S.HTMLInputElement.prototype,"checked"],[S.HTMLSelectElement.prototype,"value"],[S.HTMLTextAreaElement.prototype,"value"],[S.HTMLSelectElement.prototype,"selectedIndex"],[S.HTMLOptionElement.prototype,"selected"]];return P&&P.set&&k.push(...A.map(T=>QT(T[0],T[1],{set(){st(v)({target:this,isTrusted:!1})}},!1,S))),st(()=>{k.forEach(T=>T())})}function vm(e){const t=[];function n(s,a){if(of("CSSGroupingRule")&&s.parentRule instanceof CSSGroupingRule||of("CSSMediaRule")&&s.parentRule instanceof CSSMediaRule||of("CSSSupportsRule")&&s.parentRule instanceof CSSSupportsRule||of("CSSConditionRule")&&s.parentRule instanceof CSSConditionRule){const l=Array.from(s.parentRule.cssRules).indexOf(s);a.unshift(l)}else if(s.parentStyleSheet){const l=Array.from(s.parentStyleSheet.cssRules).indexOf(s);a.unshift(l)}return a}return n(e,t)}function Ga(e,t,n){let s,a;return e?(e.ownerNode?s=t.getId(e.ownerNode):a=n.getId(e),{styleId:a,id:s}):{}}function yz({styleSheetRuleCb:e,mirror:t,stylesheetManager:n},{win:s}){if(!s.CSSStyleSheet||!s.CSSStyleSheet.prototype)return()=>{};const a=s.CSSStyleSheet.prototype.insertRule;s.CSSStyleSheet.prototype.insertRule=new Proxy(a,{apply:st((p,m,g)=>{const[y,b]=g,{id:w,styleId:v}=Ga(m,t,n.styleMirror);return(w&&w!==-1||v&&v!==-1)&&e({id:w,styleId:v,adds:[{rule:y,index:b}]}),p.apply(m,g)})});const i=s.CSSStyleSheet.prototype.deleteRule;s.CSSStyleSheet.prototype.deleteRule=new Proxy(i,{apply:st((p,m,g)=>{const[y]=g,{id:b,styleId:w}=Ga(m,t,n.styleMirror);return(b&&b!==-1||w&&w!==-1)&&e({id:b,styleId:w,removes:[{index:y}]}),p.apply(m,g)})});let l;s.CSSStyleSheet.prototype.replace&&(l=s.CSSStyleSheet.prototype.replace,s.CSSStyleSheet.prototype.replace=new Proxy(l,{apply:st((p,m,g)=>{const[y]=g,{id:b,styleId:w}=Ga(m,t,n.styleMirror);return(b&&b!==-1||w&&w!==-1)&&e({id:b,styleId:w,replace:y}),p.apply(m,g)})}));let u;s.CSSStyleSheet.prototype.replaceSync&&(u=s.CSSStyleSheet.prototype.replaceSync,s.CSSStyleSheet.prototype.replaceSync=new Proxy(u,{apply:st((p,m,g)=>{const[y]=g,{id:b,styleId:w}=Ga(m,t,n.styleMirror);return(b&&b!==-1||w&&w!==-1)&&e({id:b,styleId:w,replaceSync:y}),p.apply(m,g)})}));const d={};lf("CSSGroupingRule")?d.CSSGroupingRule=s.CSSGroupingRule:(lf("CSSMediaRule")&&(d.CSSMediaRule=s.CSSMediaRule),lf("CSSConditionRule")&&(d.CSSConditionRule=s.CSSConditionRule),lf("CSSSupportsRule")&&(d.CSSSupportsRule=s.CSSSupportsRule));const h={};return Object.entries(d).forEach(([p,m])=>{h[p]={insertRule:m.prototype.insertRule,deleteRule:m.prototype.deleteRule},m.prototype.insertRule=new Proxy(h[p].insertRule,{apply:st((g,y,b)=>{const[w,v]=b,{id:j,styleId:E}=Ga(y.parentStyleSheet,t,n.styleMirror);return(j&&j!==-1||E&&E!==-1)&&e({id:j,styleId:E,adds:[{rule:w,index:[...vm(y),v||0]}]}),g.apply(y,b)})}),m.prototype.deleteRule=new Proxy(h[p].deleteRule,{apply:st((g,y,b)=>{const[w]=b,{id:v,styleId:j}=Ga(y.parentStyleSheet,t,n.styleMirror);return(v&&v!==-1||j&&j!==-1)&&e({id:v,styleId:j,removes:[{index:[...vm(y),w]}]}),g.apply(y,b)})})}),st(()=>{s.CSSStyleSheet.prototype.insertRule=a,s.CSSStyleSheet.prototype.deleteRule=i,l&&(s.CSSStyleSheet.prototype.replace=l),u&&(s.CSSStyleSheet.prototype.replaceSync=u),Object.entries(d).forEach(([p,m])=>{m.prototype.insertRule=h[p].insertRule,m.prototype.deleteRule=h[p].deleteRule})})}function u5({mirror:e,stylesheetManager:t},n){var l,u,d;let s=null;n.nodeName==="#document"?s=e.getId(n):s=e.getId(n.host);const a=n.nodeName==="#document"?(l=n.defaultView)==null?void 0:l.Document:(d=(u=n.ownerDocument)==null?void 0:u.defaultView)==null?void 0:d.ShadowRoot,i=a!=null&&a.prototype?Object.getOwnPropertyDescriptor(a==null?void 0:a.prototype,"adoptedStyleSheets"):void 0;return s===null||s===-1||!a||!i?()=>{}:(Object.defineProperty(n,"adoptedStyleSheets",{configurable:i.configurable,enumerable:i.enumerable,get(){var h;return(h=i.get)==null?void 0:h.call(this)},set(h){var m;const p=(m=i.set)==null?void 0:m.call(this,h);if(s!==null&&s!==-1)try{t.adoptStyleSheets(h,s)}catch{}return p}}),st(()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:i.configurable,enumerable:i.enumerable,get:i.get,set:i.set})}))}function bz({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:n,stylesheetManager:s},{win:a}){const i=a.CSSStyleDeclaration.prototype.setProperty;a.CSSStyleDeclaration.prototype.setProperty=new Proxy(i,{apply:st((u,d,h)=>{var w;const[p,m,g]=h;if(n.has(p))return i.apply(d,[p,m,g]);const{id:y,styleId:b}=Ga((w=d.parentRule)==null?void 0:w.parentStyleSheet,t,s.styleMirror);return(y&&y!==-1||b&&b!==-1)&&e({id:y,styleId:b,set:{property:p,value:m,priority:g},index:vm(d.parentRule)}),u.apply(d,h)})});const l=a.CSSStyleDeclaration.prototype.removeProperty;return a.CSSStyleDeclaration.prototype.removeProperty=new Proxy(l,{apply:st((u,d,h)=>{var y;const[p]=h;if(n.has(p))return l.apply(d,[p]);const{id:m,styleId:g}=Ga((y=d.parentRule)==null?void 0:y.parentStyleSheet,t,s.styleMirror);return(m&&m!==-1||g&&g!==-1)&&e({id:m,styleId:g,remove:{property:p},index:vm(d.parentRule)}),u.apply(d,h)})}),st(()=>{a.CSSStyleDeclaration.prototype.setProperty=i,a.CSSStyleDeclaration.prototype.removeProperty=l})}function vz({mediaInteractionCb:e,blockClass:t,blockSelector:n,unblockSelector:s,mirror:a,sampling:i,doc:l}){const u=st(h=>Ju(st(p=>{const m=kd(p);if(!m||wr(m,t,n,s,!0))return;const{currentTime:g,volume:y,muted:b,playbackRate:w}=m;e({type:h,id:a.getId(m),currentTime:g,volume:y,muted:b,playbackRate:w})}),i.media||500)),d=[Vn("play",u(Sl.Play),l),Vn("pause",u(Sl.Pause),l),Vn("seeked",u(Sl.Seeked),l),Vn("volumechange",u(Sl.VolumeChange),l),Vn("ratechange",u(Sl.RateChange),l)];return st(()=>{d.forEach(h=>h())})}function wz({fontCb:e,doc:t}){const n=t.defaultView;if(!n)return()=>{};const s=[],a=new WeakMap,i=n.FontFace;n.FontFace=function(d,h,p){const m=new i(d,h,p);return a.set(m,{family:d,buffer:typeof h!="string",descriptors:p,fontSource:typeof h=="string"?h:JSON.stringify(Array.from(new Uint8Array(h)))}),m};const l=bv(t.fonts,"add",function(u){return function(d){return fp(st(()=>{const h=a.get(d);h&&(e(h),a.delete(d))}),0),u.apply(this,[d])}});return s.push(()=>{n.FontFace=i}),s.push(l),st(()=>{s.forEach(u=>u())})}function _z(e){const{doc:t,mirror:n,blockClass:s,blockSelector:a,unblockSelector:i,selectionCb:l}=e;let u=!0;const d=st(()=>{const h=t.getSelection();if(!h||u&&(h!=null&&h.isCollapsed))return;u=h.isCollapsed||!1;const p=[],m=h.rangeCount||0;for(let g=0;g<m;g++){const y=h.getRangeAt(g),{startContainer:b,startOffset:w,endContainer:v,endOffset:j}=y;wr(b,s,a,i,!0)||wr(v,s,a,i,!0)||p.push({start:n.getId(b),startOffset:w,end:n.getId(v),endOffset:j})}l({ranges:p})});return d(),Vn("selectionchange",d)}function jz({doc:e,customElementCb:t}){const n=e.defaultView;return!n||!n.customElements?()=>{}:bv(n.customElements,"define",function(a){return function(i,l,u){try{t({define:{name:i}})}catch{}return a.apply(this,[i,l,u])}})}function Nz(e,t={}){const n=e.doc.defaultView;if(!n)return()=>{};let s;e.recordDOM&&(s=l5(e,e.doc));const a=fz(e),i=mz(e),l=c5(e),u=pz(e,{win:n}),d=xz(e),h=vz(e);let p=()=>{},m=()=>{},g=()=>{},y=()=>{};e.recordDOM&&(p=yz(e,{win:n}),m=u5(e,e.doc),g=bz(e,{win:n}),e.collectFonts&&(y=wz(e)));const b=_z(e),w=jz(e),v=[];for(const j of e.plugins)v.push(j.observer(j.callback,n,j.options));return st(()=>{Pl.forEach(j=>j.reset()),s==null||s.disconnect(),a(),i(),l(),u(),d(),h(),p(),m(),g(),y(),b(),w(),v.forEach(j=>j())})}function of(e){return typeof window[e]<"u"}function lf(e){return!!(typeof window[e]<"u"&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}class $y{constructor(t){this.generateIdFn=t,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(t,n,s,a){const i=s||this.getIdToRemoteIdMap(t),l=a||this.getRemoteIdToIdMap(t);let u=i.get(n);return u||(u=this.generateIdFn(),i.set(n,u),l.set(u,n)),u}getIds(t,n){const s=this.getIdToRemoteIdMap(t),a=this.getRemoteIdToIdMap(t);return n.map(i=>this.getId(t,i,s,a))}getRemoteId(t,n,s){const a=s||this.getRemoteIdToIdMap(t);if(typeof n!="number")return n;const i=a.get(n);return i||-1}getRemoteIds(t,n){const s=this.getRemoteIdToIdMap(t);return n.map(a=>this.getRemoteId(t,a,s))}reset(t){if(!t){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(t),this.iframeRemoteIdToIdMap.delete(t)}getIdToRemoteIdMap(t){let n=this.iframeIdToRemoteIdMap.get(t);return n||(n=new Map,this.iframeIdToRemoteIdMap.set(t,n)),n}getRemoteIdToIdMap(t){let n=this.iframeRemoteIdToIdMap.get(t);return n||(n=new Map,this.iframeRemoteIdToIdMap.set(t,n)),n}}class Sz{constructor(){this.crossOriginIframeMirror=new $y(yv),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}}class kz{constructor(t){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new $y(yv),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=t.mutationCb,this.wrappedEmit=t.wrappedEmit,this.stylesheetManager=t.stylesheetManager,this.recordCrossOriginIframes=t.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new $y(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=t.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(t){this.iframes.set(t,!0),t.contentWindow&&this.crossOriginIframeMap.set(t.contentWindow,t)}addLoadListener(t){this.loadListener=t}attachIframe(t,n){var a,i;this.mutationCb({adds:[{parentId:this.mirror.getId(t),nextId:null,node:n}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),this.recordCrossOriginIframes&&((a=t.contentWindow)==null||a.addEventListener("message",this.handleMessage.bind(this))),(i=this.loadListener)==null||i.call(this,t);const s=wv(t);s&&s.adoptedStyleSheets&&s.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(s.adoptedStyleSheets,this.mirror.getId(s))}handleMessage(t){const n=t;if(n.data.type!=="rrweb"||n.origin!==n.data.origin||!t.source)return;const a=this.crossOriginIframeMap.get(t.source);if(!a)return;const i=this.transformCrossOriginEvent(a,n.data.event);i&&this.wrappedEmit(i,n.data.isCheckout)}transformCrossOriginEvent(t,n){var s;switch(n.type){case Xe.FullSnapshot:{this.crossOriginIframeMirror.reset(t),this.crossOriginIframeStyleMirror.reset(t),this.replaceIdOnNode(n.data.node,t);const a=n.data.node.id;return this.crossOriginIframeRootIdMap.set(t,a),this.patchRootIdOnNode(n.data.node,a),{timestamp:n.timestamp,type:Xe.IncrementalSnapshot,data:{source:ze.Mutation,adds:[{parentId:this.mirror.getId(t),nextId:null,node:n.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case Xe.Meta:case Xe.Load:case Xe.DomContentLoaded:return!1;case Xe.Plugin:return n;case Xe.Custom:return this.replaceIds(n.data.payload,t,["id","parentId","previousId","nextId"]),n;case Xe.IncrementalSnapshot:switch(n.data.source){case ze.Mutation:return n.data.adds.forEach(a=>{this.replaceIds(a,t,["parentId","nextId","previousId"]),this.replaceIdOnNode(a.node,t);const i=this.crossOriginIframeRootIdMap.get(t);i&&this.patchRootIdOnNode(a.node,i)}),n.data.removes.forEach(a=>{this.replaceIds(a,t,["parentId","id"])}),n.data.attributes.forEach(a=>{this.replaceIds(a,t,["id"])}),n.data.texts.forEach(a=>{this.replaceIds(a,t,["id"])}),n;case ze.Drag:case ze.TouchMove:case ze.MouseMove:return n.data.positions.forEach(a=>{this.replaceIds(a,t,["id"])}),n;case ze.ViewportResize:return!1;case ze.MediaInteraction:case ze.MouseInteraction:case ze.Scroll:case ze.CanvasMutation:case ze.Input:return this.replaceIds(n.data,t,["id"]),n;case ze.StyleSheetRule:case ze.StyleDeclaration:return this.replaceIds(n.data,t,["id"]),this.replaceStyleIds(n.data,t,["styleId"]),n;case ze.Font:return n;case ze.Selection:return n.data.ranges.forEach(a=>{this.replaceIds(a,t,["start","end"])}),n;case ze.AdoptedStyleSheet:return this.replaceIds(n.data,t,["id"]),this.replaceStyleIds(n.data,t,["styleIds"]),(s=n.data.styles)==null||s.forEach(a=>{this.replaceStyleIds(a,t,["styleId"])}),n}}return!1}replace(t,n,s,a){for(const i of a)!Array.isArray(n[i])&&typeof n[i]!="number"||(Array.isArray(n[i])?n[i]=t.getIds(s,n[i]):n[i]=t.getId(s,n[i]));return n}replaceIds(t,n,s){return this.replace(this.crossOriginIframeMirror,t,n,s)}replaceStyleIds(t,n,s){return this.replace(this.crossOriginIframeStyleMirror,t,n,s)}replaceIdOnNode(t,n){this.replaceIds(t,n,["id","rootId"]),"childNodes"in t&&t.childNodes.forEach(s=>{this.replaceIdOnNode(s,n)})}patchRootIdOnNode(t,n){t.type!==sn.Document&&!t.rootId&&(t.rootId=n),"childNodes"in t&&t.childNodes.forEach(s=>{this.patchRootIdOnNode(s,n)})}}class Ez{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}class Cz{constructor(t){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=t.mutationCb,this.scrollCb=t.scrollCb,this.bypassOptions=t.bypassOptions,this.mirror=t.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(t,n){if(!Au(t)||this.shadowDoms.has(t))return;this.shadowDoms.add(t),this.bypassOptions.canvasManager.addShadowRoot(t);const s=l5({...this.bypassOptions,doc:n,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},t);this.restoreHandlers.push(()=>s.disconnect()),this.restoreHandlers.push(c5({...this.bypassOptions,scrollCb:this.scrollCb,doc:t,mirror:this.mirror})),fp(()=>{t.adoptedStyleSheets&&t.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(t.adoptedStyleSheets,this.mirror.getId(t.host)),this.restoreHandlers.push(u5({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},t))},0)}observeAttachShadow(t){const n=wv(t),s=oz(t);!n||!s||this.patchAttachShadow(s.Element,n)}patchAttachShadow(t,n){const s=this;this.restoreHandlers.push(bv(t.prototype,"attachShadow",function(a){return function(i){const l=a.call(this,i);return this.shadowRoot&&i5(this)&&s.addShadowRoot(this.shadowRoot,n),l}}))}reset(){this.restoreHandlers.forEach(t=>{try{t()}catch{}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet,this.bypassOptions.canvasManager.resetShadowRoots()}}var wS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Tz=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var cf=0;cf<wS.length;cf++)Tz[wS.charCodeAt(cf)]=cf;class _S{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}addWindow(){}addShadowRoot(){}resetShadowRoots(){}}class Rz{constructor(t){this.trackedLinkElements=new WeakSet,this.styleMirror=new nz,this.mutationCb=t.mutationCb,this.adoptedStyleSheetCb=t.adoptedStyleSheetCb}attachLinkElement(t,n){"_cssText"in n.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:n.id,attributes:n.attributes}]}),this.trackLinkElement(t)}trackLinkElement(t){this.trackedLinkElements.has(t)||(this.trackedLinkElements.add(t),this.trackStylesheetInLinkElement(t))}adoptStyleSheets(t,n){if(t.length===0)return;const s={id:n,styleIds:[]},a=[];for(const i of t){let l;this.styleMirror.has(i)?l=this.styleMirror.getId(i):(l=this.styleMirror.add(i),a.push({styleId:l,rules:Array.from(i.rules||CSSRule,(u,d)=>({rule:HT(u),index:d}))})),s.styleIds.push(l)}a.length>0&&(s.styles=a),this.adoptedStyleSheetCb(s)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(t){}}class Iz{constructor(){this.nodeMap=new WeakMap,this.active=!1}inOtherBuffer(t,n){const s=this.nodeMap.get(t);return s&&Array.from(s).some(a=>a!==n)}add(t,n){this.active||(this.active=!0,az(()=>{this.nodeMap=new WeakMap,this.active=!1})),this.nodeMap.set(t,(this.nodeMap.get(t)||new Set).add(n))}destroy(){}}let Gt,wm;var Wk;try{if(Array.from([1],e=>e*2)[0]!==2){const e=document.createElement("iframe");document.body.appendChild(e),Array.from=((Wk=e.contentWindow)==null?void 0:Wk.Array.from)||Array.from,document.body.removeChild(e)}}catch(e){console.debug("Unable to override Array.from",e)}const ss=TH();function la(e={}){const{emit:t,checkoutEveryNms:n,checkoutEveryNth:s,blockClass:a="rr-block",blockSelector:i=null,unblockSelector:l=null,ignoreClass:u="rr-ignore",ignoreSelector:d=null,maskAllText:h=!1,maskTextClass:p="rr-mask",unmaskTextClass:m=null,maskTextSelector:g=null,unmaskTextSelector:y=null,inlineStylesheet:b=!0,maskAllInputs:w,maskInputOptions:v,slimDOMOptions:j,maskAttributeFn:E,maskInputFn:k,maskTextFn:S,maxCanvasSize:P=null,packFn:A,sampling:T={},dataURLOptions:L={},mousemoveWait:H,recordDOM:R=!0,recordCanvas:M=!1,recordCrossOriginIframes:O=!1,recordAfter:F=e.recordAfter==="DOMContentLoaded"?e.recordAfter:"load",userTriggeredOnInput:K=!1,collectFonts:ae=!1,inlineImages:X=!1,plugins:ee,keepIframeSrcFn:D=()=>!1,ignoreCSSAttributes:te=new Set([]),errorHandler:V,onMutation:$,getCanvasManager:J}=e;dz(V);const le=O?window.parent===window:!0;let ve=!1;if(!le)try{window.parent.document&&(ve=!1)}catch{ve=!0}if(le&&!t)throw new Error("emit function is required");if(!le&&!ve)return()=>{};H!==void 0&&T.mousemove===void 0&&(T.mousemove=H),ss.reset();const Ee=w===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:v!==void 0?v:{},De=j===!0||j==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:j==="all",headMetaDescKeywords:j==="all"}:j||{};tz();let Fe,re=0;const me=Ke=>{for(const $t of ee||[])$t.eventProcessor&&(Ke=$t.eventProcessor(Ke));return A&&!ve&&(Ke=A(Ke)),Ke};Gt=(Ke,$t)=>{var bn;const Qe=Ke;if(Qe.timestamp=bm(),(bn=Pl[0])!=null&&bn.isFrozen()&&Qe.type!==Xe.FullSnapshot&&!(Qe.type===Xe.IncrementalSnapshot&&Qe.data.source===ze.Mutation)&&Pl.forEach(Un=>Un.unfreeze()),le)t==null||t(me(Qe),$t);else if(ve){const Un={type:"rrweb",event:me(Qe),origin:window.location.origin,isCheckout:$t};window.parent.postMessage(Un,"*")}if(Qe.type===Xe.FullSnapshot)Fe=Qe,re=0;else if(Qe.type===Xe.IncrementalSnapshot){if(Qe.data.source===ze.Mutation&&Qe.data.isAttachIframe)return;re++;const Un=s&&re>=s,lt=n&&Fe&&Qe.timestamp-Fe.timestamp>n;(Un||lt)&&tn(!0)}};const Le=Ke=>{Gt({type:Xe.IncrementalSnapshot,data:{source:ze.Mutation,...Ke}})},En=Ke=>Gt({type:Xe.IncrementalSnapshot,data:{source:ze.Scroll,...Ke}}),Tr=Ke=>Gt({type:Xe.IncrementalSnapshot,data:{source:ze.CanvasMutation,...Ke}}),fr=Ke=>Gt({type:Xe.IncrementalSnapshot,data:{source:ze.AdoptedStyleSheet,...Ke}}),Ve=new Rz({mutationCb:Le,adoptedStyleSheetCb:fr}),xt=typeof __RRWEB_EXCLUDE_IFRAME__=="boolean"&&__RRWEB_EXCLUDE_IFRAME__?new Sz:new kz({mirror:ss,mutationCb:Le,stylesheetManager:Ve,recordCrossOriginIframes:O,wrappedEmit:Gt});for(const Ke of ee||[])Ke.getMirror&&Ke.getMirror({nodeMirror:ss,crossOriginIframeMirror:xt.crossOriginIframeMirror,crossOriginIframeStyleMirror:xt.crossOriginIframeStyleMirror});const yn=new Iz,Xt=Az(J,{mirror:ss,win:window,mutationCb:Ke=>Gt({type:Xe.IncrementalSnapshot,data:{source:ze.CanvasMutation,...Ke}}),recordCanvas:M,blockClass:a,blockSelector:i,unblockSelector:l,maxCanvasSize:P,sampling:T.canvas,dataURLOptions:L,errorHandler:V}),bt=typeof __RRWEB_EXCLUDE_SHADOW_DOM__=="boolean"&&__RRWEB_EXCLUDE_SHADOW_DOM__?new Ez:new Cz({mutationCb:Le,scrollCb:En,bypassOptions:{onMutation:$,blockClass:a,blockSelector:i,unblockSelector:l,maskAllText:h,maskTextClass:p,unmaskTextClass:m,maskTextSelector:g,unmaskTextSelector:y,inlineStylesheet:b,maskInputOptions:Ee,dataURLOptions:L,maskAttributeFn:E,maskTextFn:S,maskInputFn:k,recordCanvas:M,inlineImages:X,sampling:T,slimDOMOptions:De,iframeManager:xt,stylesheetManager:Ve,canvasManager:Xt,keepIframeSrcFn:D,processedNodeManager:yn,ignoreCSSAttributes:te},mirror:ss}),tn=(Ke=!1)=>{if(!R)return;Gt({type:Xe.Meta,data:{href:window.location.href,width:e5(),height:ZT()}},Ke),Ve.reset(),bt.init(),Pl.forEach(Qe=>Qe.lock());const $t=ZH(document,{mirror:ss,blockClass:a,blockSelector:i,unblockSelector:l,maskAllText:h,maskTextClass:p,unmaskTextClass:m,maskTextSelector:g,unmaskTextSelector:y,inlineStylesheet:b,maskAllInputs:Ee,maskAttributeFn:E,maskInputFn:k,maskTextFn:S,slimDOM:De,dataURLOptions:L,recordCanvas:M,inlineImages:X,onSerialize:Qe=>{r5(Qe,ss)&&xt.addIframe(Qe),s5(Qe,ss)&&Ve.trackLinkElement(Qe),My(Qe)&&bt.addShadowRoot(Qe.shadowRoot,document)},onIframeLoad:(Qe,bn)=>{xt.attachIframe(Qe,bn),Qe.contentWindow&&Xt.addWindow(Qe.contentWindow),bt.observeAttachShadow(Qe)},onStylesheetLoad:(Qe,bn)=>{Ve.attachLinkElement(Qe,bn)},onBlockedImageLoad:(Qe,bn,{width:Un,height:lt})=>{Le({adds:[],removes:[],texts:[],attributes:[{id:bn.id,attributes:{style:{width:`${Un}px`,height:`${lt}px`}}}]})},keepIframeSrcFn:D,ignoreCSSAttributes:te});if(!$t)return console.warn("Failed to snapshot the document");Gt({type:Xe.FullSnapshot,data:{node:$t,initialOffset:XT(window)}}),Pl.forEach(Qe=>Qe.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&Ve.adoptStyleSheets(document.adoptedStyleSheets,ss.getId(document))};wm=tn;try{const Ke=[],$t=bn=>{var Un;return st(Nz)({onMutation:$,mutationCb:Le,mousemoveCb:(lt,Fo)=>Gt({type:Xe.IncrementalSnapshot,data:{source:Fo,positions:lt}}),mouseInteractionCb:lt=>Gt({type:Xe.IncrementalSnapshot,data:{source:ze.MouseInteraction,...lt}}),scrollCb:En,viewportResizeCb:lt=>Gt({type:Xe.IncrementalSnapshot,data:{source:ze.ViewportResize,...lt}}),inputCb:lt=>Gt({type:Xe.IncrementalSnapshot,data:{source:ze.Input,...lt}}),mediaInteractionCb:lt=>Gt({type:Xe.IncrementalSnapshot,data:{source:ze.MediaInteraction,...lt}}),styleSheetRuleCb:lt=>Gt({type:Xe.IncrementalSnapshot,data:{source:ze.StyleSheetRule,...lt}}),styleDeclarationCb:lt=>Gt({type:Xe.IncrementalSnapshot,data:{source:ze.StyleDeclaration,...lt}}),canvasMutationCb:Tr,fontCb:lt=>Gt({type:Xe.IncrementalSnapshot,data:{source:ze.Font,...lt}}),selectionCb:lt=>{Gt({type:Xe.IncrementalSnapshot,data:{source:ze.Selection,...lt}})},customElementCb:lt=>{Gt({type:Xe.IncrementalSnapshot,data:{source:ze.CustomElement,...lt}})},blockClass:a,ignoreClass:u,ignoreSelector:d,maskAllText:h,maskTextClass:p,unmaskTextClass:m,maskTextSelector:g,unmaskTextSelector:y,maskInputOptions:Ee,inlineStylesheet:b,sampling:T,recordDOM:R,recordCanvas:M,inlineImages:X,userTriggeredOnInput:K,collectFonts:ae,doc:bn,maskAttributeFn:E,maskInputFn:k,maskTextFn:S,keepIframeSrcFn:D,blockSelector:i,unblockSelector:l,slimDOMOptions:De,dataURLOptions:L,mirror:ss,iframeManager:xt,stylesheetManager:Ve,shadowDomManager:bt,processedNodeManager:yn,canvasManager:Xt,ignoreCSSAttributes:te,plugins:((Un=ee==null?void 0:ee.filter(lt=>lt.observer))==null?void 0:Un.map(lt=>({observer:lt.observer,options:lt.options,callback:Fo=>Gt({type:Xe.Plugin,data:{plugin:lt.name,payload:Fo}})})))||[]},{})};xt.addLoadListener(bn=>{try{Ke.push($t(bn.contentDocument))}catch(Un){console.warn(Un)}});const Qe=()=>{tn(),Ke.push($t(document))};return document.readyState==="interactive"||document.readyState==="complete"?Qe():(Ke.push(Vn("DOMContentLoaded",()=>{Gt({type:Xe.DomContentLoaded,data:{}}),F==="DOMContentLoaded"&&Qe()})),Ke.push(Vn("load",()=>{Gt({type:Xe.Load,data:{}}),F==="load"&&Qe()},window))),()=>{Ke.forEach(bn=>bn()),yn.destroy(),wm=void 0,hz()}}catch(Ke){console.warn(Ke)}}function Pz(e){if(!wm)throw new Error("please take full snapshot after start recording");wm(e)}la.mirror=ss;la.takeFullSnapshot=Pz;function Az(e,t){try{return e?e(t):new _S}catch{return console.warn("Unable to initialize CanvasManager"),new _S}}var jS;(function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"})(jS||(jS={}));const Oz=3,Mz=5;function _v(e){return e>9999999999?e:e*1e3}function h0(e){return e>9999999999?e/1e3:e}function Ed(e,t){t.category!=="sentry.transaction"&&(["ui.click","ui.input"].includes(t.category)?e.triggerUserActivity():e.checkAndHandleExpiredSession(),e.addUpdate(()=>(e.throttledAddEvent({type:Xe.Custom,timestamp:(t.timestamp||0)*1e3,data:{tag:"breadcrumb",payload:vr(t,10,1e3)}}),t.category==="console")))}const Lz="button,a";function d5(e){return e.closest(Lz)||e}function h5(e){const t=f5(e);return!t||!(t instanceof Element)?t:d5(t)}function f5(e){return $z(e)?e.target:e}function $z(e){return typeof e=="object"&&!!e&&"target"in e}let Va;function Dz(e){return Va||(Va=[],Fz()),Va.push(e),()=>{const t=Va?Va.indexOf(e):-1;t>-1&&Va.splice(t,1)}}function Fz(){Nn(Et,"open",function(e){return function(...t){if(Va)try{Va.forEach(n=>n())}catch{}return e.apply(Et,t)}})}const Uz=new Set([ze.Mutation,ze.StyleSheetRule,ze.StyleDeclaration,ze.AdoptedStyleSheet,ze.CanvasMutation,ze.Selection,ze.MediaInteraction]);function qz(e,t,n){e.handleClick(t,n)}class Bz{constructor(t,n,s=Ed){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=n.timeout/1e3,this._threshold=n.threshold/1e3,this._scrollTimeout=n.scrollTimeout/1e3,this._replay=t,this._ignoreSelector=n.ignoreSelector,this._addBreadcrumbEvent=s}addListeners(){const t=Dz(()=>{this._lastMutation=NS()});this._teardown=()=>{t(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(t,n){if(zz(n,this._ignoreSelector)||!Wz(t))return;const s={timestamp:h0(t.timestamp),clickBreadcrumb:t,clickCount:0,node:n};this._clicks.some(a=>a.node===s.node&&Math.abs(a.timestamp-s.timestamp)<1)||(this._clicks.push(s),this._clicks.length===1&&this._scheduleCheckClicks())}registerMutation(t=Date.now()){this._lastMutation=h0(t)}registerScroll(t=Date.now()){this._lastScroll=h0(t)}registerClick(t){const n=d5(t);this._handleMultiClick(n)}_handleMultiClick(t){this._getClicks(t).forEach(n=>{n.clickCount++})}_getClicks(t){return this._clicks.filter(n=>n.node===t)}_checkClicks(){const t=[],n=NS();this._clicks.forEach(s=>{!s.mutationAfter&&this._lastMutation&&(s.mutationAfter=s.timestamp<=this._lastMutation?this._lastMutation-s.timestamp:void 0),!s.scrollAfter&&this._lastScroll&&(s.scrollAfter=s.timestamp<=this._lastScroll?this._lastScroll-s.timestamp:void 0),s.timestamp+this._timeout<=n&&t.push(s)});for(const s of t){const a=this._clicks.indexOf(s);a>-1&&(this._generateBreadcrumbs(s),this._clicks.splice(a,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(t){const n=this._replay,s=t.scrollAfter&&t.scrollAfter<=this._scrollTimeout,a=t.mutationAfter&&t.mutationAfter<=this._threshold,i=!s&&!a,{clickCount:l,clickBreadcrumb:u}=t;if(i){const d=Math.min(t.mutationAfter||this._timeout,this._timeout)*1e3,h=d<this._timeout*1e3?"mutation":"timeout",p={type:"default",message:u.message,timestamp:u.timestamp,category:"ui.slowClickDetected",data:{...u.data,url:Et.location.href,route:n.getCurrentRoute(),timeAfterClickMs:d,endReason:h,clickCount:l||1}};this._addBreadcrumbEvent(n,p);return}if(l>1){const d={type:"default",message:u.message,timestamp:u.timestamp,category:"ui.multiClick",data:{...u.data,url:Et.location.href,route:n.getCurrentRoute(),clickCount:l,metric:!0}};this._addBreadcrumbEvent(n,d)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=Sd(()=>this._checkClicks(),1e3)}}const Hz=["A","BUTTON","INPUT"];function zz(e,t){return!!(!Hz.includes(e.tagName)||e.tagName==="INPUT"&&!["submit","button"].includes(e.getAttribute("type")||"")||e.tagName==="A"&&(e.hasAttribute("download")||e.hasAttribute("target")&&e.getAttribute("target")!=="_self")||t&&e.matches(t))}function Wz(e){return!!(e.data&&typeof e.data.nodeId=="number"&&e.timestamp)}function NS(){return Date.now()/1e3}function Gz(e,t){try{if(!Vz(t))return;const{source:n}=t.data;if(Uz.has(n)&&e.registerMutation(t.timestamp),n===ze.Scroll&&e.registerScroll(t.timestamp),Kz(t)){const{type:s,id:a}=t.data,i=la.mirror.getNode(a);i instanceof HTMLElement&&s===Hn.Click&&e.registerClick(i)}}catch{}}function Vz(e){return e.type===Oz}function Kz(e){return e.data.source===ze.MouseInteraction}function Ts(e){return{timestamp:Date.now()/1e3,type:"default",...e}}var jv=(e=>(e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e))(jv||{});const Yz=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function Jz(e){const t={};!e["data-sentry-component"]&&e["data-sentry-element"]&&(e["data-sentry-component"]=e["data-sentry-element"]);for(const n in e)if(Yz.has(n)){let s=n;(n==="data-testid"||n==="data-test-id")&&(s="testId"),t[s]=e[n]}return t}const Qz=e=>t=>{if(!e.isEnabled())return;const n=Xz(t);if(!n)return;const s=t.name==="click",a=s?t.event:void 0;s&&e.clickDetector&&(a!=null&&a.target)&&!a.altKey&&!a.metaKey&&!a.ctrlKey&&!a.shiftKey&&qz(e.clickDetector,n,h5(t.event)),Ed(e,n)};function m5(e,t){const n=la.mirror.getId(e),s=n&&la.mirror.getNode(n),a=s&&la.mirror.getMeta(s),i=a&&eW(a)?a:null;return{message:t,data:i?{nodeId:n,node:{id:n,tagName:i.tagName,textContent:Array.from(i.childNodes).map(l=>l.type===jv.Text&&l.textContent).filter(Boolean).map(l=>l.trim()).join(""),attributes:Jz(i.attributes)}}:{}}}function Xz(e){const{target:t,message:n}=Zz(e);return Ts({category:`ui.${e.name}`,...m5(t,n)})}function Zz(e){const t=e.name==="click";let n,s=null;try{s=t?h5(e.event):f5(e.event),n=cr(s,{maxStringLength:200})||"<unknown>"}catch{n="<unknown>"}return{target:s,message:n}}function eW(e){return e.type===jv.Element}function tW(e,t){if(!e.isEnabled())return;e.updateUserActivity();const n=nW(t);n&&Ed(e,n)}function nW(e){const{metaKey:t,shiftKey:n,ctrlKey:s,altKey:a,key:i,target:l}=e;if(!l||rW(l)||!i)return null;const u=t||s||a,d=i.length===1;if(!u&&d)return null;const h=cr(l,{maxStringLength:200})||"<unknown>",p=m5(l,h);return Ts({category:"ui.keyDown",message:h,data:{...p.data,metaKey:t,shiftKey:n,ctrlKey:s,altKey:a,key:i}})}function rW(e){return e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.isContentEditable}const sW={resource:cW,paint:oW,navigation:lW};function f0(e,t){return({metric:n})=>void t.replayPerformanceEntries.push(e(n))}function aW(e){return e.map(iW).filter(Boolean)}function iW(e){const t=sW[e.entryType];return t?t(e):null}function uc(e){return((Fn()||Et.performance.timeOrigin)+e)/1e3}function oW(e){const{duration:t,entryType:n,name:s,startTime:a}=e,i=uc(a);return{type:n,name:s,start:i,end:i+t,data:void 0}}function lW(e){const{entryType:t,name:n,decodedBodySize:s,duration:a,domComplete:i,encodedBodySize:l,domContentLoadedEventStart:u,domContentLoadedEventEnd:d,domInteractive:h,loadEventStart:p,loadEventEnd:m,redirectCount:g,startTime:y,transferSize:b,type:w}=e;return a===0?null:{type:`${t}.${w}`,start:uc(y),end:uc(i),name:n,data:{size:b,decodedBodySize:s,encodedBodySize:l,duration:a,domInteractive:h,domContentLoadedEventStart:u,domContentLoadedEventEnd:d,loadEventStart:p,loadEventEnd:m,domComplete:i,redirectCount:g}}}function cW(e){const{entryType:t,initiatorType:n,name:s,responseEnd:a,startTime:i,decodedBodySize:l,encodedBodySize:u,responseStatus:d,transferSize:h}=e;return["fetch","xmlhttprequest"].includes(n)?null:{type:`${t}.${n}`,start:uc(i),end:uc(a),name:s,data:{size:h,statusCode:d,decodedBodySize:l,encodedBodySize:u}}}function uW(e){const t=e.entries[e.entries.length-1],n=t!=null&&t.element?[t.element]:void 0;return Nv(e,"largest-contentful-paint",n)}function dW(e){return e.sources!==void 0}function hW(e){const t=[],n=[];for(const s of e.entries)if(dW(s)){const a=[];for(const i of s.sources)if(i.node){n.push(i.node);const l=la.mirror.getId(i.node);l&&a.push(l)}t.push({value:s.value,nodeIds:a.length?a:void 0})}return Nv(e,"cumulative-layout-shift",n,t)}function fW(e){const t=e.entries[e.entries.length-1],n=t!=null&&t.target?[t.target]:void 0;return Nv(e,"interaction-to-next-paint",n)}function Nv(e,t,n,s){const a=e.value,i=e.rating,l=uc(a);return{type:"web-vital",name:t,start:l,end:l,data:{value:a,size:a,rating:i,nodeIds:n?n.map(u=>la.mirror.getId(u)):void 0,attributions:s}}}function mW(e){function t(a){e.performanceEntries.includes(a)||e.performanceEntries.push(a)}function n({entries:a}){a.forEach(t)}const s=[];return["navigation","paint","resource"].forEach(a=>{s.push(Co(a,n))}),s.push(lv(f0(uW,e)),ov(f0(hW,e)),hT(f0(fW,e))),()=>{s.forEach(a=>a())}}const qe=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,pW='var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),s=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=function(t,e){for(var i=new n(31),s=0;s<31;++s)i[s]=e+=1<<t[s-1];var a=new r(i[30]);for(s=1;s<30;++s)for(var o=i[s];o<i[s+1];++o)a[o]=o-i[s]<<5|s;return{b:i,r:a}},o=a(e,2),h=o.b,f=o.r;h[28]=258,f[258]=28;for(var l=a(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,s=0,a=new n(r);s<i;++s)t[s]&&++a[t[s]-1];var o,h=new n(r);for(s=1;s<r;++s)h[s]=h[s-1]+a[s-1]<<1;if(e){o=new n(1<<r);var f=15-r;for(s=0;s<i;++s)if(t[s])for(var l=s<<4|t[s],c=r-t[s],v=h[t[s]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>f]=l}else for(o=new n(i),s=0;s<i;++s)t[s]&&(o[s]=u[h[t[s]-1]++]>>15-t[s]);return o},p=new t(288);for(c=0;c<144;++c)p[c]=8;for(c=144;c<256;++c)p[c]=9;for(c=256;c<280;++c)p[c]=7;for(c=280;c<288;++c)p[c]=8;var g=new t(32);for(c=0;c<32;++c)g[c]=5;var w=d(p,9,0),y=d(g,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},_=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},x=function(r,e){for(var i=[],s=0;s<r.length;++s)r[s]&&i.push({s:s,f:r[s]});var a=i.length,o=i.slice();if(!a)return{t:F,l:0};if(1==a){var h=new t(i[0].s+1);return h[i[0].s]=1,{t:h,l:1}}i.sort(function(t,n){return t.f-n.f}),i.push({s:-1,f:25001});var f=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:f.f+l.f,l:f,r:l};c!=a-1;)f=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:f.f+l.f,l:f,r:l};var d=o[0].s;for(s=1;s<a;++s)o[s].s>d&&(d=o[s].s);var p=new n(d+1),g=A(i[c-1],p,0);if(g>e){s=0;var w=0,y=g-e,m=1<<y;for(o.sort(function(t,n){return p[n.s]-p[t.s]||t.f-n.f});s<a;++s){var b=o[s].s;if(!(p[b]>e))break;w+=m-(1<<g-p[b]),p[b]=e}for(w>>=y;w>0;){var M=o[s].s;p[M]<e?w-=1<<e-p[M]++-1:++s}for(;s>=0&&w;--s){var E=o[s].s;p[E]==e&&(--p[E],++w)}g=e}return{t:new t(p),l:g}},A=function(t,n,r){return-1==t.s?Math.max(A(t.l,n,r+1),A(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,s=t[0],a=1,o=function(t){e[i++]=t},h=1;h<=r;++h)if(t[h]==s&&h!=r)++a;else{if(!s&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(s),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(s);a=1,s=t[h]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var s=0;s<e;++s)t[i+s+4]=r[s];return 8*(i+4+e)},U=function(t,r,a,o,h,f,l,u,c,v,m){z(r,m++,a),++h[256];for(var b=x(h,15),M=b.t,E=b.l,A=x(f,15),U=A.t,C=A.l,F=D(M),I=F.c,S=F.n,L=D(U),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=x(q,7),H=G.t,J=G.l,K=19;K>4&&!H[s[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(h,p)+T(f,g)+l,X=T(h,M)+T(f,U)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(U,C,0),R=U;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[s[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=w,P=p,Q=y,R=g;for(B=0;B<u;++B){var rt=o[B];if(rt>255){_(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;_(r,m,Q[et]),m+=R[et],et>3&&(_(r,m,rt>>5&8191),m+=i[et])}else _(r,m,N[rt]),m+=P[rt]}return _(r,m,N[256]),m+P[256]},C=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,s=0|r.length,a=0;a!=s;){for(var o=Math.min(a+2655,s);a<o;++a)i+=e+=r[a];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},L=function(s,a,o,h,u){if(!u&&(u={l:1},a.dictionary)){var c=a.dictionary.subarray(-32768),v=new t(c.length+s.length);v.set(c),v.set(s,c.length),s=v,u.w=c.length}return function(s,a,o,h,u,c){var v=c.z||s.length,d=new t(h+v+5*(1+Math.ceil(v/7e3))+u),p=d.subarray(h,d.length-u),g=c.l,w=7&(c.r||0);if(a){w&&(p[0]=c.r>>3);for(var y=C[a-1],M=y>>13,E=8191&y,z=(1<<o)-1,_=c.p||new n(32768),x=c.h||new n(z+1),A=Math.ceil(o/3),D=2*A,T=function(t){return(s[t]^s[t+1]<<A^s[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=x[H];if(_[J]=K,x[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!g)){w=U(s,p,0,F,I,S,O,q,G,j-G,w),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(s[j+Q]==s[j+Q-W]){for(var $=0;$<Z&&s[j+$]==s[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-_[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=_[J])&32767}if(R){F[q++]=268435456|f[Q]<<18|l[R];var it=31&f[Q],st=31&l[R];O+=e[it]+i[st],++I[257+it],++S[st],B=j+Q,++L}else F[q++]=s[j],++I[s[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=s[j],++I[s[j]];w=U(s,p,g,F,I,S,O,q,G,j-G,w),g||(c.r=7&w|p[w/8|0]<<3,w-=7,c.h=x,c.p=_,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+g;j+=65535){var at=j+65535;at>=v&&(p[w/8|0]=g,at=v),w=k(p,w+1,s.subarray(j,at))}c.i=v}return b(d,0,h+m(w)+u)}(s,null==a.level?6:a.level,null==a.mem?u.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(s.length)))):20:12+a.mem,o,h,u)},O=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},j=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(L(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var s=this.b.length-this.s.z;this.b.set(n.subarray(0,s),this.s.z),this.s.z=this.b.length,this.p(this.b,!1),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(s),32768),this.s.z=n.length-s+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n.prototype.flush=function(){this.ondata||E(5),this.s.l&&E(4),this.p(this.b,!1),this.s.w=this.s.i,this.s.i-=2},n}();function q(t,n){n||(n={});var r=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}}(),e=t.length;r.p(t);var i,s=L(t,n,10+((i=n).filename?i.filename.length+1:0),8),a=s.length;return function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&O(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}}(s,n),O(s,a-8,r.d()),O(s,a-4,e),s}var B=function(){function t(t,n){this.c=S(),this.v=1,j.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),j.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=L(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=S();i.p(n.dictionary),O(t,2,i.d())}}(r,this.o),this.v=0),n&&O(r,r.length-4,this.c.d()),this.ondata(r,n)},t.prototype.flush=function(){j.prototype.flush.call(this)},t}(),G="undefined"!=typeof TextEncoder&&new TextEncoder,H="undefined"!=typeof TextDecoder&&new TextDecoder;try{H.decode(F,{stream:!0})}catch(t){}var J=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(K(t),this.d=n||!1)},t}();function K(n,r){if(G)return G.encode(n);for(var e=n.length,i=new t(n.length+(n.length>>1)),s=0,a=function(t){i[s++]=t},o=0;o<e;++o){if(s+5>i.length){var h=new t(s+8+(e-o<<1));h.set(i),i=h}var f=n.charCodeAt(o);f<128||r?a(f):f<2048?(a(192|f>>6),a(128|63&f)):f>55295&&f<57344?(a(240|(f=65536+(1047552&f)|1023&n.charCodeAt(++o))>>18),a(128|f>>12&63),a(128|f>>6&63),a(128|63&f)):(a(224|f>>12),a(128|f>>6&63),a(128|63&f))}return b(i,0,s)}const N=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(const r of t)n+=r.length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new B,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new J((t,n)=>{this.deflate.push(t,n)}),this.stream.push("[")}},P={clear:()=>{N.clear()},addEvent:t=>N.addEvent(t),finish:()=>N.finish(),compress:t=>function(t){return q(K(t))}(t)};addEventListener("message",function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in P&&"function"==typeof P[n])try{const t=P[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}}),postMessage({id:void 0,method:"init",success:!0,response:void 0});';function gW(){const e=new Blob([pW]);return URL.createObjectURL(e)}const SS=["log","warn","error"],$f="[Replay] ";function m0(e,t="info"){gs({category:"console",data:{logger:"replay"},level:t,message:`${$f}${e}`},{level:t})}function xW(){let e=!1,t=!1;const n={exception:()=>{},infoTick:()=>{},setConfig:s=>{e=!!s.captureExceptions,t=!!s.traceInternals}};return qe?(SS.forEach(s=>{n[s]=(...a)=>{W[s]($f,...a),t&&m0(a.join(""),am(s))}}),n.exception=(s,...a)=>{a.length&&n.error&&n.error(...a),W.error($f,s),e?dt(s,{mechanism:{handled:!0,type:"auto.function.replay.debug"}}):t&&m0(s,"error")},n.infoTick=(...s)=>{W.log($f,...s),t&&setTimeout(()=>m0(s[0]),0)}):SS.forEach(s=>{n[s]=()=>{}}),n}const Be=xW();class Sv extends Error{constructor(){super(`Event buffer exceeded maximum size of ${gv}.`)}}class p5{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1,this.waitForCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(t){const n=JSON.stringify(t).length;if(this._totalSize+=n,this._totalSize>gv)throw new Sv;this.events.push(t)}finish(){return new Promise(t=>{const n=this.events;this.clear(),t(JSON.stringify(n))})}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){const t=this.events.map(n=>n.timestamp).sort()[0];return t?_v(t):null}}class yW{constructor(t){this._worker=t,this._id=0}ensureReady(){return this._ensureReadyPromise?this._ensureReadyPromise:(this._ensureReadyPromise=new Promise((t,n)=>{this._worker.addEventListener("message",({data:s})=>{s.success?t():n()},{once:!0}),this._worker.addEventListener("error",s=>{n(s)},{once:!0})}),this._ensureReadyPromise)}destroy(){qe&&Be.log("Destroying compression worker"),this._worker.terminate()}postMessage(t,n){const s=this._getAndIncrementId();return new Promise((a,i)=>{const l=({data:u})=>{const d=u;if(d.method===t&&d.id===s){if(this._worker.removeEventListener("message",l),!d.success){qe&&Be.error("Error in compression worker: ",d.response),i(new Error("Error in compression worker"));return}a(d.response)}};this._worker.addEventListener("message",l),this._worker.postMessage({id:s,method:t,arg:n})})}_getAndIncrementId(){return this._id++}}class bW{constructor(t){this._worker=new yW(t),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this.waitForCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(t){const n=_v(t.timestamp);(!this._earliestTimestamp||n<this._earliestTimestamp)&&(this._earliestTimestamp=n);const s=JSON.stringify(t);return this._totalSize+=s.length,this._totalSize>gv?Promise.reject(new Sv):this._sendEventToWorker(s)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,t=>{qe&&Be.exception(t,'Sending "clear" message to worker failed',t)})}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(t){return this._worker.postMessage("addEvent",t)}async _finishRequest(){const t=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,t}}class vW{constructor(t){this._fallback=new p5,this._compression=new bW(t),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get waitForCheckout(){return this._used.waitForCheckout}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(t){this._used.hasCheckout=t}set waitForCheckout(t){this._used.waitForCheckout=t}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(t){return this._used.addEvent(t)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch(t){qe&&Be.exception(t,"Failed to load the compression worker, falling back to simple buffer");return}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){const{events:t,hasCheckout:n,waitForCheckout:s}=this._fallback,a=[];for(const i of t)a.push(this._compression.addEvent(i));this._compression.hasCheckout=n,this._compression.waitForCheckout=s,this._used=this._compression;try{await Promise.all(a),this._fallback.clear()}catch(i){qe&&Be.exception(i,"Failed to add events when switching buffers.")}}}function wW({useCompression:e,workerUrl:t}){if(e&&window.Worker){const n=_W(t);if(n)return n}return qe&&Be.log("Using simple buffer"),new p5}function _W(e){try{const t=e||jW();if(!t)return;qe&&Be.log(`Using compression worker${e?` from ${e}`:""}`);const n=new Worker(t);return new vW(n)}catch(t){qe&&Be.exception(t,"Failed to create compression worker")}}function jW(){return typeof __SENTRY_EXCLUDE_REPLAY_WORKER__>"u"||!__SENTRY_EXCLUDE_REPLAY_WORKER__?gW():""}function kv(){try{return"sessionStorage"in Et&&!!Et.sessionStorage}catch{return!1}}function NW(e){SW(),e.session=void 0}function SW(){if(kv())try{Et.sessionStorage.removeItem(mv)}catch{}}function g5(e){return e===void 0?!1:Math.random()<e}function mp(e){if(kv())try{Et.sessionStorage.setItem(mv,JSON.stringify(e))}catch{}}function x5(e){const t=Date.now(),n=e.id||dn(),s=e.started||t,a=e.lastActivity||t,i=e.segmentId||0,l=e.sampled,u=e.previousSessionId,d=e.dirty||!1;return{id:n,started:s,lastActivity:a,segmentId:i,sampled:l,previousSessionId:u,dirty:d}}function kW(e,t){return g5(e)?"session":t?"buffer":!1}function kS({sessionSampleRate:e,allowBuffering:t,stickySession:n=!1},{previousSessionId:s}={}){const a=kW(e,t),i=x5({sampled:a,previousSessionId:s});return n&&mp(i),i}function EW(){if(!kv())return null;try{const e=Et.sessionStorage.getItem(mv);if(!e)return null;const t=JSON.parse(e);return qe&&Be.infoTick("Loading existing session"),x5(t)}catch{return null}}function Dy(e,t,n=+new Date){return e===null||t===void 0||t<0?!0:t===0?!1:e+t<=n}function y5(e,{maxReplayDuration:t,sessionIdleExpire:n,targetTime:s=Date.now()}){return Dy(e.started,t,s)||Dy(e.lastActivity,n,s)}function b5(e,{sessionIdleExpire:t,maxReplayDuration:n}){return!(!y5(e,{sessionIdleExpire:t,maxReplayDuration:n})||e.sampled==="buffer"&&e.segmentId===0)}function p0({sessionIdleExpire:e,maxReplayDuration:t,previousSessionId:n},s){const a=s.stickySession&&EW();return a?b5(a,{sessionIdleExpire:e,maxReplayDuration:t})?(qe&&Be.infoTick("Session in sessionStorage is expired, creating new one..."),kS(s,{previousSessionId:a.id})):a:(qe&&Be.infoTick("Creating new session"),kS(s,{previousSessionId:n}))}function CW(e){return e.type===Xe.Custom}function Ev(e,t,n){return w5(e,t)?(v5(e,t,n),!0):!1}function TW(e,t,n){return w5(e,t)?v5(e,t,n):Promise.resolve(null)}async function v5(e,t,n){const{eventBuffer:s}=e;if(!s||s.waitForCheckout&&!n)return null;const a=e.recordingMode==="buffer";try{n&&a&&s.clear(),n&&(s.hasCheckout=!0,s.waitForCheckout=!1);const i=e.getOptions(),l=RW(t,i.beforeAddRecordingEvent);return l?await s.addEvent(l):void 0}catch(i){const l=i&&i instanceof Sv,u=l?"addEventSizeExceeded":"addEvent",d=ye();if(d){const h=l?"buffer_overflow":"internal_sdk_error";d.recordDroppedEvent(h,"replay")}if(l&&a)return s.clear(),s.waitForCheckout=!0,null;e.handleException(i),await e.stop({reason:u})}}function w5(e,t){if(!e.eventBuffer||e.isPaused()||!e.isEnabled())return!1;const n=_v(t.timestamp);return n+e.timeouts.sessionIdlePause<Date.now()?!1:n>e.getContext().initialTimestamp+e.getOptions().maxReplayDuration?(qe&&Be.infoTick(`Skipping event with timestamp ${n} because it is after maxReplayDuration`),!1):!0}function RW(e,t){try{if(typeof t=="function"&&CW(e))return t(e)}catch(n){return qe&&Be.exception(n,"An error occurred in the `beforeAddRecordingEvent` callback, skipping the event..."),null}return e}function Cv(e){return!e.type}function Fy(e){return e.type==="transaction"}function IW(e){return e.type==="replay_event"}function ES(e){return e.type==="feedback"}function PW(e){return(t,n)=>{if(!e.isEnabled()||!Cv(t)&&!Fy(t))return;const s=n.statusCode;if(!(!s||s<200||s>=300)){if(Fy(t)){AW(e,t);return}OW(e,t)}}}function AW(e,t){var s,a;const n=e.getContext();(a=(s=t.contexts)==null?void 0:s.trace)!=null&&a.trace_id&&n.traceIds.size<100&&n.traceIds.add(t.contexts.trace.trace_id)}function OW(e,t){const n=e.getContext();if(t.event_id&&n.errorIds.size<100&&n.errorIds.add(t.event_id),e.recordingMode!=="buffer"||!t.tags||!t.tags.replayId)return;const{beforeErrorSampling:s}=e.getOptions();typeof s=="function"&&!s(t)||Sd(async()=>{try{await e.sendBufferedReplayOrFlush()}catch(a){e.handleException(a)}})}function MW(e){return t=>{!e.isEnabled()||!Cv(t)||LW(e,t)}}function LW(e,t){var s,a,i;const n=(i=(a=(s=t.exception)==null?void 0:s.values)==null?void 0:a[0])==null?void 0:i.value;if(typeof n=="string"&&(n.match(/(reactjs\.org\/docs\/error-decoder\.html\?invariant=|react\.dev\/errors\/)(418|419|422|423|425)/)||n.match(/(does not match server-rendered HTML|Hydration failed because)/i))){const l=Ts({category:"replay.hydrate-error",data:{url:Oo()}});Ed(e,l)}}function $W(e){const t=ye();t&&t.on("beforeAddBreadcrumb",n=>DW(e,n))}function DW(e,t){if(!e.isEnabled()||!_5(t))return;const n=FW(t);n&&Ed(e,n)}function FW(e){return!_5(e)||["fetch","xhr","sentry.event","sentry.transaction"].includes(e.category)||e.category.startsWith("ui.")?null:e.category==="console"?UW(e):Ts(e)}function UW(e){var a;const t=(a=e.data)==null?void 0:a.arguments;if(!Array.isArray(t)||t.length===0)return Ts(e);let n=!1;const s=t.map(i=>{if(!i)return i;if(typeof i=="string")return i.length>af?(n=!0,`${i.slice(0,af)}`):i;if(typeof i=="object")try{const l=vr(i,7);return JSON.stringify(l).length>af?(n=!0,`${JSON.stringify(l,null,2).slice(0,af)}`):l}catch{}return i});return Ts({...e,data:{...e.data,arguments:s,...n?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}function _5(e){return!!e.category}function qW(e,t){var n,s,a;return e.type||!((s=(n=e.exception)==null?void 0:n.values)!=null&&s.length)?!1:!!((a=t.originalException)!=null&&a.__rrweb__)}function j5(){const e=We().getPropagationContext().dsc;e&&delete e.replay_id;const t=Ht();if(t){const n=ps(t);delete n.replay_id}}function BW(e,t){e.triggerUserActivity(),e.addUpdate(()=>t.timestamp?(e.throttledAddEvent({type:Xe.Custom,timestamp:t.timestamp*1e3,data:{tag:"breadcrumb",payload:{timestamp:t.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:t.event_id}}}}),!1):!0)}function HW(e,t){return e.recordingMode!=="buffer"||t.message===pv||!t.exception||t.type?!1:g5(e.getOptions().errorSampleRate)}function zW(e){return Object.assign((t,n)=>{var l;if(!e.isEnabled()||e.isPaused())return t;if(IW(t))return delete t.breadcrumbs,t;if(!Cv(t)&&!Fy(t)&&!ES(t))return t;if(!e.checkAndHandleExpiredSession())return j5(),t;if(ES(t))return e.flush(),t.contexts.feedback.replay_id=e.getSessionId(),BW(e,t),t;if(qW(t,n)&&!e.getOptions()._experiments.captureExceptions)return qe&&Be.log("Ignoring error from rrweb internals",t),null;const a=HW(e,t);if((a||e.recordingMode==="session")&&(t.tags={...t.tags,replayId:e.getSessionId()}),a&&e.recordingMode==="buffer"&&((l=e.session)==null?void 0:l.sampled)==="buffer"){const u=e.session;u.dirty=!0,e.getOptions().stickySession&&mp(u)}return t},{id:"Replay"})}function pp(e,t){return t.map(({type:n,start:s,end:a,name:i,data:l})=>{const u=e.throttledAddEvent({type:Xe.Custom,timestamp:s,data:{tag:"performanceSpan",payload:{op:n,description:i,startTimestamp:s,endTimestamp:a,data:l}}});return typeof u=="string"?Promise.resolve(null):u})}function WW(e){const{from:t,to:n}=e,s=Date.now()/1e3;return{type:"navigation.push",start:s,end:s,name:n,data:{previous:t}}}function GW(e){return t=>{if(!e.isEnabled())return;const n=WW(t);n!==null&&(e.getContext().urls.push(n.name),e.triggerUserActivity(),e.addUpdate(()=>(pp(e,[n]),!1)))}}function VW(e,t){return qe&&e.getOptions()._experiments.traceInternals?!1:rC(t,ye())}function N5(e,t){e.isEnabled()&&t!==null&&(VW(e,t.name)||e.addUpdate(()=>(pp(e,[t]),!0)))}function gp(e){if(!e)return;const t=new TextEncoder;try{if(typeof e=="string")return t.encode(e).length;if(e instanceof URLSearchParams)return t.encode(e.toString()).length;if(e instanceof FormData){const n=bT(e);return t.encode(n).length}if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength}catch{}}function S5(e){if(!e)return;const t=parseInt(e,10);return isNaN(t)?void 0:t}function _m(e,t){if(!e)return{headers:{},size:void 0,_meta:{warnings:[t]}};const n={...e._meta},s=n.warnings||[];return n.warnings=[...s,t],e._meta=n,e}function k5(e,t){if(!t)return null;const{startTimestamp:n,endTimestamp:s,url:a,method:i,statusCode:l,request:u,response:d}=t;return{type:e,start:n/1e3,end:s/1e3,name:a,data:{method:i,statusCode:l,request:u,response:d}}}function Qu(e){return{headers:{},size:e,_meta:{warnings:["URL_SKIPPED"]}}}function ii(e,t,n){if(!t&&Object.keys(e).length===0)return;if(!t)return{headers:e};if(!n)return{headers:e,size:t};const s={headers:e,size:t},{body:a,warnings:i}=KW(n);return s.body=a,i!=null&&i.length&&(s._meta={warnings:i}),s}function Uy(e,t){return Object.entries(e).reduce((n,[s,a])=>{const i=s.toLowerCase();return t.includes(i)&&e[s]&&(n[i]=a),n},{})}function KW(e){if(!e||typeof e!="string")return{body:e};const t=e.length>oS,n=YW(e);if(t){const s=e.slice(0,oS);return n?{body:s,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${s}`,warnings:["TEXT_TRUNCATED"]}}if(n)try{return{body:JSON.parse(e)}}catch{}return{body:e}}function YW(e){const t=e[0],n=e[e.length-1];return t==="["&&n==="]"||t==="{"&&n==="}"}function jm(e,t){const n=JW(e);return hs(n,t)}function JW(e,t=Et.document.baseURI){if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith(Et.location.origin))return e;const n=new URL(e,t);if(n.origin!==new URL(t).origin)return e;const s=n.href;return!e.endsWith("/")&&s.endsWith("/")?s.slice(0,-1):s}async function QW(e,t,n){try{const s=await ZW(e,t,n),a=k5("resource.fetch",s);N5(n.replay,a)}catch(s){qe&&Be.exception(s,"Failed to capture fetch breadcrumb")}}function XW(e,t){const{input:n,response:s}=t,a=n?hv(n):void 0,i=gp(a),l=s?S5(s.headers.get("content-length")):void 0;i!==void 0&&(e.data.request_body_size=i),l!==void 0&&(e.data.response_body_size=l)}async function ZW(e,t,n){const s=Date.now(),{startTimestamp:a=s,endTimestamp:i=s}=t,{url:l,method:u,status_code:d=0,request_body_size:h,response_body_size:p}=e.data,m=jm(l,n.networkDetailAllowUrls)&&!jm(l,n.networkDetailDenyUrls),g=m?eG(n,t.input,h):Qu(h),y=await tG(m,n,t.response,p);return{startTimestamp:a,endTimestamp:i,url:l,method:u,statusCode:d,request:g,response:y}}function eG({networkCaptureBodies:e,networkRequestHeaders:t},n,s){const a=n?sG(n,t):{};if(!e)return ii(a,s,void 0);const i=hv(n),[l,u]=pm(i,Be),d=ii(a,s,l);return u?_m(d,u):d}async function tG(e,{networkCaptureBodies:t,networkResponseHeaders:n},s,a){if(!e&&a!==void 0)return Qu(a);const i=s?E5(s.headers,n):{};if(!s||!t&&a!==void 0)return ii(i,a,void 0);const[l,u]=await rG(s),d=nG(l,{networkCaptureBodies:t,responseBodySize:a,captureDetails:e,headers:i});return u?_m(d,u):d}function nG(e,{networkCaptureBodies:t,responseBodySize:n,captureDetails:s,headers:a}){try{const i=e!=null&&e.length&&n===void 0?gp(e):n;return s?t?ii(a,i,e):ii(a,i,void 0):Qu(i)}catch(i){return qe&&Be.exception(i,"Failed to serialize response body"),ii(a,n,void 0)}}async function rG(e){const t=aG(e);if(!t)return[void 0,"BODY_PARSE_ERROR"];try{return[await iG(t)]}catch(n){return n instanceof Error&&n.message.indexOf("Timeout")>-1?(qe&&Be.warn("Parsing text body from response timed out"),[void 0,"BODY_PARSE_TIMEOUT"]):(qe&&Be.exception(n,"Failed to get text body from response"),[void 0,"BODY_PARSE_ERROR"])}}function E5(e,t){const n={};return t.forEach(s=>{e.get(s)&&(n[s]=e.get(s))}),n}function sG(e,t){return e.length===1&&typeof e[0]!="string"?CS(e[0],t):e.length===2?CS(e[1],t):{}}function CS(e,t){if(!e)return{};const n=e.headers;return n?n instanceof Headers?E5(n,t):Array.isArray(n)?{}:Uy(n,t):{}}function aG(e){try{return e.clone()}catch(t){qe&&Be.exception(t,"Failed to clone response body")}}function iG(e){return new Promise((t,n)=>{const s=Sd(()=>n(new Error("Timeout while trying to read response body")),500);oG(e).then(a=>t(a),a=>n(a)).finally(()=>clearTimeout(s))})}async function oG(e){return await e.text()}async function lG(e,t,n){try{const s=uG(e,t,n),a=k5("resource.xhr",s);N5(n.replay,a)}catch(s){qe&&Be.exception(s,"Failed to capture xhr breadcrumb")}}function cG(e,t){const{xhr:n,input:s}=t;if(!n)return;const a=gp(s),i=n.getResponseHeader("content-length")?S5(n.getResponseHeader("content-length")):fG(n.response,n.responseType);a!==void 0&&(e.data.request_body_size=a),i!==void 0&&(e.data.response_body_size=i)}function uG(e,t,n){const s=Date.now(),{startTimestamp:a=s,endTimestamp:i=s,input:l,xhr:u}=t,{url:d,method:h,status_code:p=0,request_body_size:m,response_body_size:g}=e.data;if(!d)return null;if(!u||!jm(d,n.networkDetailAllowUrls)||jm(d,n.networkDetailDenyUrls)){const A=Qu(m),T=Qu(g);return{startTimestamp:a,endTimestamp:i,url:d,method:h,statusCode:p,request:A,response:T}}const y=u[na],b=y?Uy(y.request_headers,n.networkRequestHeaders):{},w=Uy(vT(u),n.networkResponseHeaders),[v,j]=n.networkCaptureBodies?pm(l,Be):[void 0],[E,k]=n.networkCaptureBodies?dG(u):[void 0],S=ii(b,m,v),P=ii(w,g,E);return{startTimestamp:a,endTimestamp:i,url:d,method:h,statusCode:p,request:j?_m(S,j):S,response:k?_m(P,k):P}}function dG(e){const t=[];try{return[e.responseText]}catch(n){t.push(n)}try{return hG(e.response,e.responseType)}catch(n){t.push(n)}return qe&&Be.warn("Failed to get xhr response body",...t),[void 0]}function hG(e,t){try{if(typeof e=="string")return[e];if(e instanceof Document)return[e.body.outerHTML];if(t==="json"&&e&&typeof e=="object")return[JSON.stringify(e)];if(!e)return[void 0]}catch(n){return qe&&Be.exception(n,"Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return qe&&Be.log("Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function fG(e,t){try{const n=t==="json"&&e&&typeof e=="object"?JSON.stringify(e):e;return gp(n)}catch{return}}function mG(e){const t=ye();try{const{networkDetailAllowUrls:n,networkDetailDenyUrls:s,networkCaptureBodies:a,networkRequestHeaders:i,networkResponseHeaders:l}=e.getOptions(),u={replay:e,networkDetailAllowUrls:n,networkDetailDenyUrls:s,networkCaptureBodies:a,networkRequestHeaders:i,networkResponseHeaders:l};t&&t.on("beforeAddBreadcrumb",(d,h)=>pG(u,d,h))}catch{}}function pG(e,t,n){if(t.data)try{gG(t)&&yG(n)&&(cG(t,n),lG(t,n,e)),xG(t)&&bG(n)&&(XW(t,n),QW(t,n,e))}catch(s){qe&&Be.exception(s,"Error when enriching network breadcrumb")}}function gG(e){return e.category==="xhr"}function xG(e){return e.category==="fetch"}function yG(e){return e==null?void 0:e.xhr}function bG(e){return e==null?void 0:e.response}function vG(e){const t=ye();yT(Qz(e)),lp(GW(e)),$W(e),mG(e);const n=zW(e);LE(n),t&&(t.on("beforeSendEvent",MW(e)),t.on("afterSendEvent",PW(e)),t.on("createDsc",s=>{const a=e.getSessionId();a&&e.isEnabled()&&e.recordingMode==="session"&&e.checkAndHandleExpiredSession()&&(s.replay_id=a)}),t.on("spanStart",s=>{e.lastActiveSpan=s}),t.on("spanEnd",s=>{e.lastActiveSpan=s}),t.on("beforeSendFeedback",async(s,a)=>{var l;const i=e.getSessionId();a!=null&&a.includeReplay&&e.isEnabled()&&i&&((l=s.contexts)!=null&&l.feedback)&&(s.contexts.feedback.source==="api"&&await e.sendBufferedReplayOrFlush(),s.contexts.feedback.replay_id=i)}),t.on("openFeedbackWidget",async()=>{await e.sendBufferedReplayOrFlush()}))}async function wG(e){try{return Promise.all(pp(e,[_G(Et.performance.memory)]))}catch{return[]}}function _G(e){const{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:s}=e,a=Date.now()/1e3;return{type:"memory",name:"memory",start:a,end:a,data:{memory:{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:s}}}}function jG(e,t,n){return J$(e,t,{...n,setTimeoutImpl:Sd})}const $r=Ae.navigator;function NG(){return/iPhone|iPad|iPod/i.test(($r==null?void 0:$r.userAgent)??"")||/Macintosh/i.test(($r==null?void 0:$r.userAgent)??"")&&($r!=null&&$r.maxTouchPoints)&&($r==null?void 0:$r.maxTouchPoints)>1?{sampling:{mousemove:!1}}:{}}function SG(e){let t=!1;return(n,s)=>{if(!e.checkAndHandleExpiredSession()){qe&&Be.warn("Received replay event after session expired.");return}const a=s||!t;t=!0,e.clickDetector&&Gz(e.clickDetector,n),e.addUpdate(()=>{if(e.recordingMode==="buffer"&&a&&e.setInitialState(),!Ev(e,n,a))return!0;if(!a)return!1;const i=e.session;if(EG(e,a),e.recordingMode==="buffer"&&i&&e.eventBuffer&&!i.dirty){const l=e.eventBuffer.getEarliestTimestamp();l&&(qe&&Be.log(`Updating session start time to earliest event in buffer to ${new Date(l)}`),i.started=l,e.getOptions().stickySession&&mp(i))}return i!=null&&i.previousSessionId||e.recordingMode==="session"&&e.flush(),!0})}}function kG(e){const t=e.getOptions();return{type:Xe.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:e.isRecordingCanvas(),sessionSampleRate:t.sessionSampleRate,errorSampleRate:t.errorSampleRate,useCompressionOption:t.useCompression,blockAllMedia:t.blockAllMedia,maskAllText:t.maskAllText,maskAllInputs:t.maskAllInputs,useCompression:e.eventBuffer?e.eventBuffer.type==="worker":!1,networkDetailHasUrls:t.networkDetailAllowUrls.length>0,networkCaptureBodies:t.networkCaptureBodies,networkRequestHasHeaders:t.networkRequestHeaders.length>0,networkResponseHasHeaders:t.networkResponseHeaders.length>0}}}}function EG(e,t){!t||!e.session||e.session.segmentId!==0||Ev(e,kG(e),!1)}function CG(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch{return null}}function TG(e,t,n,s){return bs(SE(e,Hm(e),s,n),[[{type:"replay_event"},e],[{type:"replay_recording",length:typeof t=="string"?new TextEncoder().encode(t).length:t.length},t]])}function RG({recordingData:e,headers:t}){let n;const s=`${JSON.stringify(t)}
`;if(typeof e=="string")n=`${s}${e}`;else{const i=new TextEncoder().encode(s);n=new Uint8Array(i.length+e.length),n.set(i),n.set(e,i.length)}return n}async function IG({client:e,scope:t,replayId:n,event:s}){const a=typeof e._integrations=="object"&&e._integrations!==null&&!Array.isArray(e._integrations)?Object.keys(e._integrations):void 0,i={event_id:n,integrations:a};e.emit("preprocessEvent",s,i);const l=await PE(e.getOptions(),s,i,t,e,an());if(!l)return null;e.emit("postprocessEvent",l,i),l.platform=l.platform||"javascript";const u=e.getSdkMetadata(),{name:d,version:h,settings:p}=(u==null?void 0:u.sdk)||{};return l.sdk={...l.sdk,name:d||"sentry.javascript.unknown",version:h||"0.0.0",settings:p},l}async function PG({recordingData:e,replayId:t,segmentId:n,eventContext:s,timestamp:a,session:i}){const l=RG({recordingData:e,headers:{segment_id:n}}),{urls:u,errorIds:d,traceIds:h,initialTimestamp:p}=s,m=ye(),g=We(),y=m==null?void 0:m.getTransport(),b=m==null?void 0:m.getDsn();if(!m||!y||!b||!i.sampled)return Promise.resolve({});const w={type:lH,replay_start_timestamp:p/1e3,timestamp:a/1e3,error_ids:d,trace_ids:h,urls:u,replay_id:t,segment_id:n,replay_type:i.sampled},v=await IG({scope:g,client:m,replayId:t,event:w});if(!v)return m.recordDroppedEvent("event_processor","replay"),qe&&Be.log("An event processor returned `null`, will not send event."),Promise.resolve({});delete v.sdkProcessingMetadata;const j=TG(v,l,b,m.getOptions().tunnel);let E;try{E=await y.send(j)}catch(S){const P=new Error(pv);try{P.cause=S}catch{}throw P}if(typeof E.statusCode=="number"&&(E.statusCode<200||E.statusCode>=300))throw new C5(E.statusCode);const k=GE({},E);if(WE(k,"replay"))throw new Tv(k);return E}class C5 extends Error{constructor(t){super(`Transport returned status code ${t}`)}}class Tv extends Error{constructor(t){super("Rate limit hit"),this.rateLimits=t}}async function T5(e,t={count:0,interval:mH}){const{recordingData:n,onError:s}=e;if(n.length)try{return await PG(e),!0}catch(a){if(a instanceof C5||a instanceof Tv)throw a;if(Tb("Replays",{_retryCount:t.count}),s&&s(a),t.count>=pH){const i=new Error(`${pv} - max retries exceeded`);try{i.cause=a}catch{}throw i}return t.interval*=++t.count,new Promise((i,l)=>{Sd(async()=>{try{await T5(e,t),i(!0)}catch(u){l(u)}},t.interval)})}}const R5="__THROTTLED",AG="__SKIPPED";function OG(e,t,n){const s=new Map,a=u=>{const d=u-n;s.forEach((h,p)=>{p<d&&s.delete(p)})},i=()=>[...s.values()].reduce((u,d)=>u+d,0);let l=!1;return(...u)=>{const d=Math.floor(Date.now()/1e3);if(a(d),i()>=t){const p=l;return l=!0,p?AG:R5}l=!1;const h=s.get(d)||0;return s.set(d,h+1),e(...u)}}class MG{constructor({options:t,recordingOptions:n}){this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:cH,sessionIdleExpire:uH},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._requiresManualStart=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=n,this._options=t,this._debouncedFlush=jG(()=>this._flush(),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=OG((l,u)=>TW(this,l,u),300,5);const{slowClickTimeout:s,slowClickIgnoreSelectors:a}=this.getOptions(),i=s?{threshold:Math.min(gH,s),timeout:s,scrollTimeout:xH,ignoreSelector:a?a.join(","):""}:void 0;if(i&&(this.clickDetector=new Bz(this,i)),qe){const l=t._experiments;Be.setConfig({captureExceptions:!!l.captureExceptions,traceInternals:!!l.traceInternals})}this._handleVisibilityChange=()=>{Et.document.visibilityState==="visible"?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()},this._handleWindowBlur=()=>{const l=Ts({category:"ui.blur"});this._doChangeToBackgroundTasks(l)},this._handleWindowFocus=()=>{const l=Ts({category:"ui.focus"});this._doChangeToForegroundTasks(l)},this._handleKeyboardEvent=l=>{tW(this,l)}}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return!!this._canvas}getOptions(){return this._options}handleException(t){qe&&Be.exception(t),this._options.onError&&this._options.onError(t)}initializeSampling(t){const{errorSampleRate:n,sessionSampleRate:s}=this._options,a=n<=0&&s<=0;if(this._requiresManualStart=a,!a){if(this._initializeSessionForSampling(t),!this.session){qe&&Be.exception(new Error("Unable to initialize and create session"));return}this.session.sampled!==!1&&(this.recordingMode=this.session.sampled==="buffer"&&this.session.segmentId===0?"buffer":"session",qe&&Be.infoTick(`Starting replay in ${this.recordingMode} mode`),this._initializeRecording())}}start(){if(this._isEnabled&&this.recordingMode==="session"){qe&&Be.log("Recording is already in progress");return}if(this._isEnabled&&this.recordingMode==="buffer"){qe&&Be.log("Buffering is in progress, call `flush()` to save the replay");return}qe&&Be.infoTick("Starting replay in session mode"),this._updateUserActivity();const t=p0({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=t,this.recordingMode="session",this._initializeRecording()}startBuffering(){if(this._isEnabled){qe&&Be.log("Buffering is in progress, call `flush()` to save the replay");return}qe&&Be.infoTick("Starting replay in buffer mode");const t=p0({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=t,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{const t=this._canvas;this._stopRecording=la({...this._recordingOptions,...this.recordingMode==="buffer"?{checkoutEveryNms:fH}:this._options._experiments.continuousCheckout&&{checkoutEveryNms:Math.max(36e4,this._options._experiments.continuousCheckout)},emit:SG(this),...NG(),onMutation:this._onMutationHandler.bind(this),...t?{recordCanvas:t.recordCanvas,getCanvasManager:t.getCanvasManager,sampling:t.sampling,dataURLOptions:t.dataURLOptions}:{}})}catch(t){this.handleException(t)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(t){return this.handleException(t),!1}}async stop({forceFlush:t=!1,reason:n}={}){var s;if(this._isEnabled){this._isEnabled=!1,this.recordingMode="buffer";try{qe&&Be.log(`Stopping Replay${n?` triggered by ${n}`:""}`),j5(),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),t&&await this._flush({force:!0}),(s=this.eventBuffer)==null||s.destroy(),this.eventBuffer=null,NW(this)}catch(a){this.handleException(a)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),qe&&Be.log("Pausing replay"))}resume(){!this._isPaused||!this._checkSession()||(this._isPaused=!1,this.startRecording(),qe&&Be.log("Resuming replay"))}async sendBufferedReplayOrFlush({continueRecording:t=!0}={}){if(this.recordingMode==="session")return this.flushImmediate();const n=Date.now();qe&&Be.log("Converting buffer to session"),await this.flushImmediate();const s=this.stopRecording();!t||!s||this.recordingMode!=="session"&&(this.recordingMode="session",this.session&&(this.session.dirty=!1,this._updateUserActivity(n),this._updateSessionActivity(n),this._maybeSaveSession()),this.startRecording())}addUpdate(t){const n=t();this.recordingMode==="buffer"||!this._isEnabled||n!==!0&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),!this._stopRecording){if(!this._checkSession())return;this.resume();return}this.checkAndHandleExpiredSession(),this._updateSessionActivity()}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return this.recordingMode==="buffer"?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(t){var n,s;if(!(t&&((n=this.session)==null?void 0:n.sampled)===!1))return(s=this.session)==null?void 0:s.id}checkAndHandleExpiredSession(){if(this._lastActivity&&Dy(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&this.session.sampled==="session"){this.pause();return}return!!this._checkSession()}setInitialState(){const t=`${Et.location.pathname}${Et.location.hash}${Et.location.search}`,n=`${Et.location.origin}${t}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=n,this._context.initialTimestamp=Date.now(),this._context.urls.push(n)}throttledAddEvent(t,n){const s=this._throttledAddEvent(t,n);if(s===R5){const a=Ts({category:"replay.throttled"});this.addUpdate(()=>!Ev(this,{type:Mz,timestamp:a.timestamp||0,data:{tag:"breadcrumb",payload:a,metric:!0}}))}return s}getCurrentRoute(){const t=this.lastActiveSpan||Ht(),n=t&&Bt(t),a=(n&&Te(n).data||{})[ft];if(!(!n||!a||!["route","custom"].includes(a)))return Te(n).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=wW({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_initializeSessionForSampling(t){const n=this._options.errorSampleRate>0,s=p0({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,previousSessionId:t},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:n});this.session=s}_checkSession(){if(!this.session)return!1;const t=this.session;return b5(t,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})?(this._refreshSession(t),!1):!0}async _refreshSession(t){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(t.id))}_addListeners(){try{Et.document.addEventListener("visibilitychange",this._handleVisibilityChange),Et.addEventListener("blur",this._handleWindowBlur),Et.addEventListener("focus",this._handleWindowFocus),Et.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(vG(this),this._hasInitializedCoreListeners=!0)}catch(t){this.handleException(t)}this._performanceCleanupCallback=mW(this)}_removeListeners(){try{Et.document.removeEventListener("visibilitychange",this._handleVisibilityChange),Et.removeEventListener("blur",this._handleWindowBlur),Et.removeEventListener("focus",this._handleWindowFocus),Et.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(t){this.handleException(t)}}_doChangeToBackgroundTasks(t){!this.session||y5(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(t&&this._createCustomBreadcrumb(t),this.conditionalFlush())}_doChangeToForegroundTasks(t){if(!this.session)return;if(!this.checkAndHandleExpiredSession()){qe&&Be.log("Document has become active, but session has expired");return}t&&this._createCustomBreadcrumb(t)}_updateUserActivity(t=Date.now()){this._lastActivity=t}_updateSessionActivity(t=Date.now()){this.session&&(this.session.lastActivity=t,this._maybeSaveSession())}_createCustomBreadcrumb(t){this.addUpdate(()=>{this.throttledAddEvent({type:Xe.Custom,timestamp:t.timestamp||0,data:{tag:"breadcrumb",payload:t}})})}_addPerformanceEntries(){let t=aW(this.performanceEntries).concat(this.replayPerformanceEntries);if(this.performanceEntries=[],this.replayPerformanceEntries=[],this._requiresManualStart){const n=this._context.initialTimestamp/1e3;t=t.filter(s=>s.start>=n)}return Promise.all(pp(this,t))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:t,eventBuffer:n}=this;if(!t||!n||this._requiresManualStart||t.segmentId)return;const s=n.getEarliestTimestamp();s&&s<this._context.initialTimestamp&&(this._context.initialTimestamp=s)}_popEventContext(){const t={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),t}async _runFlush(){var n;const t=this.getSessionId();if(!this.session||!this.eventBuffer||!t){qe&&Be.error("No session or eventBuffer found to flush.");return}if(await this._addPerformanceEntries(),!!((n=this.eventBuffer)!=null&&n.hasEvents)&&(await wG(this),!!this.eventBuffer&&t===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();const s=Date.now();if(s-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");const a=this._popEventContext(),i=this.session.segmentId++;this._maybeSaveSession();const l=await this.eventBuffer.finish();await T5({replayId:t,recordingData:l,segmentId:i,eventContext:a,session:this.session,timestamp:s,onError:u=>this.handleException(u)})}catch(s){this.handleException(s),this.stop({reason:"sendReplay"});const a=ye();if(a){const i=s instanceof Tv?"ratelimit_backoff":"send_error";a.recordDroppedEvent(i,"replay")}}}async _flush({force:t=!1}={}){if(!this._isEnabled&&!t)return;if(!this.checkAndHandleExpiredSession()){qe&&Be.error("Attempting to finish replay event after session expired.");return}if(!this.session)return;const n=this.session.started,a=Date.now()-n;this._debouncedFlush.cancel();const i=a<this._options.minReplayDuration,l=a>this._options.maxReplayDuration+5e3;if(i||l){qe&&Be.log(`Session duration (${Math.floor(a/1e3)}s) is too ${i?"short":"long"}, not sending replay.`),i&&this._debouncedFlush();return}const u=this.eventBuffer;u&&this.session.segmentId===0&&!u.hasCheckout&&qe&&Be.log("Flushing initial segment without checkout.");const d=!!this._flushLock;this._flushLock||(this._flushLock=this._runFlush());try{await this._flushLock}catch(h){this.handleException(h)}finally{this._flushLock=void 0,d&&this._debouncedFlush()}}_maybeSaveSession(){this.session&&this._options.stickySession&&mp(this.session)}_onMutationHandler(t){const{ignoreMutations:n}=this._options._experiments;if(n!=null&&n.length&&t.some(u=>{const d=CG(u.target),h=n.join(",");return d==null?void 0:d.matches(h)}))return!1;const s=t.length,a=this._options.mutationLimit,i=this._options.mutationBreadcrumbLimit,l=a&&s>a;if(s>i||l){const u=Ts({category:"replay.mutations",data:{count:s,limit:l}});this._createCustomBreadcrumb(u)}return l?(this.stop({reason:"mutationLimit",forceFlush:this.recordingMode==="session"}),!1):!0}}function yu(e,t){return[...e,...t].join(",")}function LG({mask:e,unmask:t,block:n,unblock:s,ignore:a}){const i=["base","iframe[srcdoc]:not([src])"],l=yu(e,[".sentry-mask","[data-sentry-mask]"]),u=yu(t,[]);return{maskTextSelector:l,unmaskTextSelector:u,blockSelector:yu(n,[".sentry-block","[data-sentry-block]",...i]),unblockSelector:yu(s,[]),ignoreSelector:yu(a,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'])}}function $G({el:e,key:t,maskAttributes:n,maskAllText:s,privacyOptions:a,value:i}){return!s||a.unmaskTextSelector&&e.matches(a.unmaskTextSelector)?i:n.includes(t)||t==="value"&&e.tagName==="INPUT"&&["submit","button"].includes(e.getAttribute("type")||"")?i.replace(/[\S]/g,"*"):i}const TS='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',DG=["content-length","content-type","accept"],FG=Symbol.for("sentry__originalRequestBody");let RS=!1,IS=!1;function UG(){if(typeof Request>"u"||IS)return;const e=Request;try{const t=function(n,s){const a=new e(n,s);return(s==null?void 0:s.body)!=null&&(a[FG]=s.body),a};t.prototype=e.prototype,Ae.Request=t,IS=!0}catch{}}const I5=(e=>new qG(e));class qG{constructor({flushMinDelay:t=dH,flushMaxDelay:n=hH,minReplayDuration:s=yH,maxReplayDuration:a=lS,stickySession:i=!0,useCompression:l=!0,workerUrl:u,_experiments:d={},maskAllText:h=!0,maskAllInputs:p=!0,blockAllMedia:m=!0,mutationBreadcrumbLimit:g=750,mutationLimit:y=1e4,slowClickTimeout:b=7e3,slowClickIgnoreSelectors:w=[],networkDetailAllowUrls:v=[],networkDetailDenyUrls:j=[],networkCaptureBodies:E=!0,networkRequestHeaders:k=[],networkResponseHeaders:S=[],mask:P=[],maskAttributes:A=["title","placeholder","aria-label"],unmask:T=[],block:L=[],unblock:H=[],ignore:R=[],maskFn:M,beforeAddRecordingEvent:O,beforeErrorSampling:F,onError:K,attachRawBodyFromRequest:ae=!1}={}){this.name="Replay";const X=LG({mask:P,unmask:T,block:L,unblock:H,ignore:R});if(this._recordingOptions={maskAllInputs:p,maskAllText:h,maskInputOptions:{password:!0},maskTextFn:M,maskInputFn:M,maskAttributeFn:(ee,D,te)=>$G({maskAttributes:A,maskAllText:h,privacyOptions:X,key:ee,value:D,el:te}),...X,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:ee=>{try{ee.__rrweb__=!0}catch{}},recordCrossOriginIframes:!!d.recordCrossOriginIframes},this._initialOptions={flushMinDelay:t,flushMaxDelay:n,minReplayDuration:Math.min(s,bH),maxReplayDuration:Math.min(a,lS),stickySession:i,useCompression:l,workerUrl:u,blockAllMedia:m,maskAllInputs:p,maskAllText:h,mutationBreadcrumbLimit:g,mutationLimit:y,slowClickTimeout:b,slowClickIgnoreSelectors:w,networkDetailAllowUrls:v,networkDetailDenyUrls:j,networkCaptureBodies:E,networkRequestHeaders:PS(k),networkResponseHeaders:PS(S),beforeAddRecordingEvent:O,beforeErrorSampling:F,onError:K,attachRawBodyFromRequest:ae,_experiments:d},this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${TS}`:TS,this._recordingOptions.ignoreCSSAttributes=new Set(["background-image"])),this._isInitialized&&um())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return RS}set _isInitialized(t){RS=t}afterAllSetup(t){!um()||this._replay||(this._initialOptions.attachRawBodyFromRequest&&UG(),this._setup(t),this._initialize(t))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:this._replay.recordingMode==="session"}):Promise.resolve()}flush(t){return this._replay?this._replay.isEnabled()?this._replay.sendBufferedReplayOrFlush(t):(this._replay.start(),Promise.resolve()):Promise.resolve()}getReplayId(t){var n;if((n=this._replay)!=null&&n.isEnabled())return this._replay.getSessionId(t)}getRecordingMode(){var t;if((t=this._replay)!=null&&t.isEnabled())return this._replay.recordingMode}_initialize(t){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(t),this._replay.initializeSampling())}_setup(t){const n=BG(this._initialOptions,t);this._replay=new MG({options:n,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(t){try{const n=t.getIntegrationByName("ReplayCanvas");if(!n)return;this._replay._canvas=n.getOptions()}catch{}}}function BG(e,t){const n=t.getOptions(),s={sessionSampleRate:0,errorSampleRate:0,...e},a=bo(n.replaysSessionSampleRate),i=bo(n.replaysOnErrorSampleRate);return a==null&&i==null&&wi(()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")}),a!=null&&(s.sessionSampleRate=a),i!=null&&(s.errorSampleRate=i),s}function PS(e){return[...DG,...e.map(t=>t.toLowerCase())]}function HG(){const e=ye();return e==null?void 0:e.getIntegrationByName("Replay")}var zG=Object.defineProperty,WG=(e,t,n)=>t in e?zG(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,AS=(e,t,n)=>WG(e,typeof t!="symbol"?t+"":t,n);class GG{constructor(){AS(this,"idNodeMap",new Map),AS(this,"nodeMetaMap",new WeakMap)}getId(t){var s;return t?((s=this.getMeta(t))==null?void 0:s.id)??-1:-1}getNode(t){return this.idNodeMap.get(t)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(t){return this.nodeMetaMap.get(t)||null}removeNodeFromMap(t){const n=this.getId(t);this.idNodeMap.delete(n),t.childNodes&&t.childNodes.forEach(s=>this.removeNodeFromMap(s))}has(t){return this.idNodeMap.has(t)}hasNode(t){return this.nodeMetaMap.has(t)}add(t,n){const s=n.id;this.idNodeMap.set(s,t),this.nodeMetaMap.set(t,n)}replace(t,n){const s=this.getNode(t);if(s){const a=this.nodeMetaMap.get(s);a&&this.nodeMetaMap.set(n,a)}this.idNodeMap.set(t,n)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function VG(){return new GG}function KG(e,t){for(let n=e.classList.length;n--;){const s=e.classList[n];if(t.test(s))return!0}return!1}function qy(e,t,n=1/0,s=0){return!e||e.nodeType!==e.ELEMENT_NODE||s>n?-1:t(e)?s:qy(e.parentNode,t,n,s+1)}function OS(e,t){return n=>{const s=n;if(s===null)return!1;try{if(e){if(typeof e=="string"){if(s.matches(`.${e}`))return!0}else if(KG(s,e))return!0}return!!(t&&s.matches(t))}catch{return!1}}}const kl=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let MS={map:{},getId(){return console.error(kl),-1},getNode(){return console.error(kl),null},removeNodeFromMap(){console.error(kl)},has(){return console.error(kl),!1},reset(){console.error(kl)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(MS=new Proxy(MS,{get(e,t,n){return t==="map"&&console.error(kl),Reflect.get(e,t,n)}}));function Rv(e,t,n,s,a=window){const i=a.Object.getOwnPropertyDescriptor(e,t);return a.Object.defineProperty(e,t,s?n:{set(l){A5(()=>{n.set.call(this,l)},0),i&&i.set&&i.set.call(this,l)}}),()=>Rv(e,t,i||{},!0)}function Iv(e,t,n){try{if(!(t in e))return()=>{};const s=e[t],a=n(s);return typeof a=="function"&&(a.prototype=a.prototype||{},Object.defineProperties(a,{__rrweb_original__:{enumerable:!1,value:s}})),e[t]=a,()=>{e[t]=s}}catch{return()=>{}}}Date.now().toString();function YG(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch{return null}}function xp(e,t,n,s,a){if(!e)return!1;const i=YG(e);if(!i)return!1;const l=OS(t,n),u=qy(i,l);let d=-1;return u<0?!1:(s&&(d=qy(i,OS(null,s))),u>-1&&d<0?!0:u<d)}const LS={};function P5(e){const t=LS[e];if(t)return t;const n=window.document;let s=window[e];if(n&&typeof n.createElement=="function")try{const a=n.createElement("iframe");a.hidden=!0,n.head.appendChild(a);const i=a.contentWindow;i&&i[e]&&(s=i[e]),n.head.removeChild(a)}catch{}return LS[e]=s.bind(window)}function Hi(...e){return P5("requestAnimationFrame")(...e)}function A5(...e){return P5("setTimeout")(...e)}var dc=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(dc||{});let Df;function JG(e){Df=e}const g0=e=>Df?(...n)=>{try{return e(...n)}catch(s){if(Df&&Df(s)===!0)return()=>{};throw s}}:e;var Al="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",QG=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var uf=0;uf<Al.length;uf++)QG[Al.charCodeAt(uf)]=uf;var XG=function(e){var t=new Uint8Array(e),n,s=t.length,a="";for(n=0;n<s;n+=3)a+=Al[t[n]>>2],a+=Al[(t[n]&3)<<4|t[n+1]>>4],a+=Al[(t[n+1]&15)<<2|t[n+2]>>6],a+=Al[t[n+2]&63];return s%3===2?a=a.substring(0,a.length-1)+"=":s%3===1&&(a=a.substring(0,a.length-2)+"=="),a};const $S=new Map;function ZG(e,t){let n=$S.get(e);return n||(n=new Map,$S.set(e,n)),n.has(t)||n.set(t,[]),n.get(t)}const O5=(e,t,n)=>{if(!e||!(L5(e,t)||typeof e=="object"))return;const s=e.constructor.name,a=ZG(n,s);let i=a.indexOf(e);return i===-1&&(i=a.length,a.push(e)),i};function Ff(e,t,n){if(e instanceof Array)return e.map(s=>Ff(s,t,n));if(e===null)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray)return{rr_type:e.constructor.name,args:[Object.values(e)]};if(e instanceof ArrayBuffer){const s=e.constructor.name,a=XG(e);return{rr_type:s,base64:a}}else{if(e instanceof DataView)return{rr_type:e.constructor.name,args:[Ff(e.buffer,t,n),e.byteOffset,e.byteLength]};if(e instanceof HTMLImageElement){const s=e.constructor.name,{src:a}=e;return{rr_type:s,src:a}}else if(e instanceof HTMLCanvasElement){const s="HTMLImageElement",a=e.toDataURL();return{rr_type:s,src:a}}else{if(e instanceof ImageData)return{rr_type:e.constructor.name,args:[Ff(e.data,t,n),e.width,e.height]};if(L5(e,t)||typeof e=="object"){const s=e.constructor.name,a=O5(e,t,n);return{rr_type:s,index:a}}}}return e}const M5=(e,t,n)=>e.map(s=>Ff(s,t,n)),L5=(e,t)=>!!["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(a=>typeof t[a]=="function").find(a=>e instanceof t[a]);function eV(e,t,n,s,a){const i=[],l=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);for(const u of l)try{if(typeof t.CanvasRenderingContext2D.prototype[u]!="function")continue;const d=Iv(t.CanvasRenderingContext2D.prototype,u,function(h){return function(...p){return xp(this.canvas,n,s,a,!0)||A5(()=>{const m=M5(p,t,this);e(this.canvas,{type:dc["2D"],property:u,args:m})},0),h.apply(this,p)}});i.push(d)}catch{const d=Rv(t.CanvasRenderingContext2D.prototype,u,{set(h){e(this.canvas,{type:dc["2D"],property:u,args:[h],setter:!0})}});i.push(d)}return()=>{i.forEach(u=>u())}}function tV(e){return e==="experimental-webgl"?"webgl":e}function DS(e,t,n,s,a){const i=[];try{const l=Iv(e.HTMLCanvasElement.prototype,"getContext",function(u){return function(d,...h){if(!xp(this,t,n,s,!0)){const p=tV(d);if("__context"in this||(this.__context=p),a&&["webgl","webgl2"].includes(p))if(h[0]&&typeof h[0]=="object"){const m=h[0];m.preserveDrawingBuffer||(m.preserveDrawingBuffer=!0)}else h.splice(0,1,{preserveDrawingBuffer:!0})}return u.apply(this,[d,...h])}});i.push(l)}catch{console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{i.forEach(l=>l())}}function FS(e,t,n,s,a,i,l,u){const d=[],h=Object.getOwnPropertyNames(e);for(const p of h)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(p))try{if(typeof e[p]!="function")continue;const m=Iv(e,p,function(g){return function(...y){const b=g.apply(this,y);if(O5(b,u,this),"tagName"in this.canvas&&!xp(this.canvas,s,a,i,!0)){const w=M5(y,u,this),v={type:t,property:p,args:w};n(this.canvas,v)}return b}});d.push(m)}catch{const m=Rv(e,p,{set(g){n(this.canvas,{type:t,property:p,args:[g],setter:!0})}});d.push(m)}return d}function nV(e,t,n,s,a,i){const l=[];return l.push(...FS(t.WebGLRenderingContext.prototype,dc.WebGL,e,n,s,a,i,t)),typeof t.WebGL2RenderingContext<"u"&&l.push(...FS(t.WebGL2RenderingContext.prototype,dc.WebGL2,e,n,s,a,i,t)),()=>{l.forEach(u=>u())}}const rV='for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t="undefined"==typeof Uint8Array?[]:new Uint8Array(256),a=0;a<64;a++)t[e.charCodeAt(a)]=a;var n=function(t){var a,n=new Uint8Array(t),r=n.length,s="";for(a=0;a<r;a+=3)s+=e[n[a]>>2],s+=e[(3&n[a])<<4|n[a+1]>>4],s+=e[(15&n[a+1])<<2|n[a+2]>>6],s+=e[63&n[a+2]];return r%3==2?s=s.substring(0,s.length-1)+"=":r%3==1&&(s=s.substring(0,s.length-2)+"=="),s};const r=new Map,s=new Map;const i=self;i.onmessage=async function(e){if(!("OffscreenCanvas"in globalThis))return i.postMessage({id:e.data.id});{const{id:t,bitmap:a,width:o,height:f,maxCanvasSize:c,dataURLOptions:g}=e.data,u=async function(e,t,a){const r=e+"-"+t;if("OffscreenCanvas"in globalThis){if(s.has(r))return s.get(r);const i=new OffscreenCanvas(e,t);i.getContext("2d");const o=await i.convertToBlob(a),f=await o.arrayBuffer(),c=n(f);return s.set(r,c),c}return""}(o,f,g),[h,d]=function(e,t,a){if(!a)return[e,t];const[n,r]=a;if(e<=n&&t<=r)return[e,t];let s=e,i=t;return s>n&&(i=Math.floor(n*t/e),s=n),i>r&&(s=Math.floor(r*e/t),i=r),[s,i]}(o,f,c),l=new OffscreenCanvas(h,d),w=l.getContext("bitmaprenderer"),p=h===o&&d===f?a:await createImageBitmap(a,{resizeWidth:h,resizeHeight:d,resizeQuality:"low"});w?.transferFromImageBitmap(p),a.close();const y=await l.convertToBlob(g),v=y.type,b=await y.arrayBuffer(),m=n(b);if(p.close(),!r.has(t)&&await u===m)return r.set(t,m),i.postMessage({id:t});if(r.get(t)===m)return i.postMessage({id:t});i.postMessage({id:t,type:v,base64:m,width:o,height:f}),r.set(t,m)}};';function sV(){const e=new Blob([rV]);return URL.createObjectURL(e)}class aV{constructor(t){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.shadowDoms=new Set,this.windowsSet=new WeakSet,this.windows=[],this.restoreHandlers=[],this.frozen=!1,this.locked=!1,this.snapshotInProgressMap=new Map,this.worker=null,this.lastSnapshotTime=0,this.processMutation=(u,d)=>{(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId||!this.rafStamps.invokeId)&&(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(u)||this.pendingCanvasMutations.set(u,[]),this.pendingCanvasMutations.get(u).push(d)};const{enableManualSnapshot:n,sampling:s="all",win:a,recordCanvas:i,errorHandler:l}=t;t.sampling=s,this.mutationCb=t.mutationCb,this.mirror=t.mirror,this.options=t,l&&JG(l),(i&&typeof s=="number"||n)&&(this.worker=this.initFPSWorker()),this.addWindow(a),!n&&g0(()=>{i&&s==="all"&&(this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher()),i&&typeof s=="number"&&this.initCanvasFPSObserver()})()}reset(){var t;this.pendingCanvasMutations.clear(),this.restoreHandlers.forEach(n=>{try{n()}catch{}}),this.restoreHandlers=[],this.windowsSet=new WeakSet,this.windows=[],this.shadowDoms=new Set,(t=this.worker)==null||t.terminate(),this.worker=null,this.snapshotInProgressMap=new Map}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}addWindow(t){const{sampling:n="all",blockClass:s,blockSelector:a,unblockSelector:i,recordCanvas:l,enableManualSnapshot:u}=this.options;if(!this.windowsSet.has(t)){if(u){this.windowsSet.add(t),this.windows.push(new WeakRef(t));return}g0(()=>{if(l&&n==="all"&&this.initCanvasMutationObserver(t,s,a,i),l&&typeof n=="number"){const d=DS(t,s,a,i,!0);this.restoreHandlers.push(()=>{d()})}})(),this.windowsSet.add(t),this.windows.push(new WeakRef(t))}}addShadowRoot(t){this.shadowDoms.add(new WeakRef(t))}resetShadowRoots(){this.shadowDoms=new Set}snapshot(t,n){if(n!=null&&n.skipRequestAnimationFrame){this.takeSnapshot(performance.now(),!0,t);return}Hi(s=>this.takeSnapshot(s,!0,t))}initFPSWorker(){const t=new Worker(sV());return t.onmessage=n=>{const s=n.data,{id:a}=s;if(this.snapshotInProgressMap.set(a,!1),!("base64"in s))return;const{base64:i,type:l,width:u,height:d}=s;this.mutationCb({id:a,type:dc["2D"],commands:[{property:"clearRect",args:[0,0,u,d]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:i}],type:l}]},0,0,u,d]}]})},t}initCanvasFPSObserver(){let t;if(!this.windows.length&&!this.shadowDoms.size)return;const n=s=>{this.takeSnapshot(s,!1),t=Hi(n)};t=Hi(n),this.restoreHandlers.push(()=>{t&&cancelAnimationFrame(t)})}initCanvasMutationObserver(t,n,s,a){const i=DS(t,n,s,a,!1),l=eV(this.processMutation.bind(this),t,n,s,a),u=nV(this.processMutation.bind(this),t,n,s,a,this.mirror);this.restoreHandlers.push(()=>{i(),l(),u()})}getCanvasElements(t,n,s){const a=[],i=l=>{l.querySelectorAll("canvas").forEach(u=>{xp(u,t,n,s)||a.push(u)})};for(const l of this.windows){const u=l.deref();let d;try{d=u&&u.document}catch{}d&&i(d)}for(const l of this.shadowDoms){const u=l.deref();u&&i(u)}return a}takeSnapshot(t,n,s){const{sampling:a,blockClass:i,blockSelector:l,unblockSelector:u,dataURLOptions:d,maxCanvasSize:h}=this.options,m=1e3/(a==="all"?2:a||2);return this.lastSnapshotTime&&t-this.lastSnapshotTime<m?!1:(this.lastSnapshotTime=t,(s?[s]:this.getCanvasElements(i,l,u)).forEach(b=>{var v;const w=this.mirror.getId(b);if(!(!this.mirror.hasNode(b)||!b.width||!b.height||this.snapshotInProgressMap.get(w))){if(this.snapshotInProgressMap.set(w,!0),!n&&["webgl","webgl2"].includes(b.__context)){const j=b.getContext(b.__context);((v=j==null?void 0:j.getContextAttributes())==null?void 0:v.preserveDrawingBuffer)===!1&&j.clear(j.COLOR_BUFFER_BIT)}createImageBitmap(b).then(j=>{var E;(E=this.worker)==null||E.postMessage({id:w,bitmap:j,width:b.width,height:b.height,dataURLOptions:d,maxCanvasSize:h},[j])}).catch(j=>{g0(()=>{throw this.snapshotInProgressMap.delete(w),j})()})}}),!0)}startPendingCanvasMutationFlusher(){Hi(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){const t=n=>{this.rafStamps.latestId=n,Hi(t)};Hi(t)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((t,n)=>{const s=this.mirror.getId(n);this.flushPendingCanvasMutationFor(n,s)}),Hi(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(t,n){if(this.frozen||this.locked)return;const s=this.pendingCanvasMutations.get(t);if(!s||n===-1)return;const a=s.map(l=>{const{type:u,...d}=l;return d}),{type:i}=s[0];this.mutationCb({id:n,type:i,commands:a}),this.pendingCanvasMutations.delete(t)}}var Gk;try{if(Array.from([1],e=>e*2)[0]!==2){const e=document.createElement("iframe");document.body.appendChild(e),Array.from=((Gk=e.contentWindow)==null?void 0:Gk.Array.from)||Array.from,document.body.removeChild(e)}}catch(e){console.debug("Unable to override Array.from",e)}VG();var US;(function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"})(US||(US={}));const qS={low:{sampling:{canvas:1},dataURLOptions:{type:"image/webp",quality:.25}},medium:{sampling:{canvas:2},dataURLOptions:{type:"image/webp",quality:.4}},high:{sampling:{canvas:4},dataURLOptions:{type:"image/webp",quality:.5}}},iV="ReplayCanvas",df=1280,oV=((e={})=>{const[t,n]=e.maxCanvasSize||[],s={quality:e.quality||"medium",enableManualSnapshot:e.enableManualSnapshot,maxCanvasSize:[t?Math.min(t,df):df,n?Math.min(n,df):df]};let a;const i=new Promise(l=>a=l);return{name:iV,getOptions(){const{quality:l,enableManualSnapshot:u,maxCanvasSize:d}=s;return{enableManualSnapshot:u,recordCanvas:!0,getCanvasManager:h=>{const p=new aV({...h,enableManualSnapshot:u,maxCanvasSize:d,errorHandler:m=>{try{typeof m=="object"&&(m.__rrweb__=!0)}catch{}}});return a(p),p},...qS[l]||qS.medium}},async snapshot(l,u){(await i).snapshot(l,u)}}}),lV=oV;function cV(e){return e.split(",").some(t=>t.trim().startsWith("sentry-"))}function $5(e){try{return new URL(e,be.location.origin).href}catch{return}}function uV(e){return e.entryType==="resource"&&"initiatorType"in e&&typeof e.nextHopProtocol=="string"&&(e.initiatorType==="fetch"||e.initiatorType==="xmlhttprequest")}function D5(e){try{return new Headers(e)}catch{return}}const BS=new WeakMap,x0=new Map,Pv={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,trackFetchStreamPerformance:!1};function F5(e,t){const{traceFetch:n,traceXHR:s,trackFetchStreamPerformance:a,shouldCreateSpanForRequest:i,enableHTTPTimings:l,tracePropagationTargets:u,onRequestSpanStart:d,onRequestSpanEnd:h}={...Pv,...t},p=typeof i=="function"?i:b=>!0,m=b=>dV(b,u),g={},y=e.getOptions().propagateTraceparent;n&&(e.addEventProcessor(b=>(b.type==="transaction"&&b.spans&&b.spans.forEach(w=>{if(w.op==="http.client"){const v=x0.get(w.span_id);v&&(w.timestamp=v/1e3,x0.delete(w.span_id))}}),b)),a&&jU(b=>{if(b.response){const w=BS.get(b.response);w&&b.endTimestamp&&x0.set(w,b.endTimestamp)}}),Jb(b=>{const w=cD(b,p,m,g,{propagateTraceparent:y,onRequestSpanEnd:h});if(b.response&&b.fetchData.__span&&BS.set(b.response,b.fetchData.__span),w){const v=$5(b.fetchData.url),j=v?po(v).host:void 0;w.setAttributes({"http.url":v,"server.address":j}),l&&HS(w),d==null||d(w,{headers:b.headers})}})),s&&dv(b=>{var v;const w=hV(b,p,m,g,y,h);w&&(l&&HS(w),d==null||d(w,{headers:D5((v=b.xhr.__sentry_xhr_v3__)==null?void 0:v.request_headers)}))})}function HS(e){const{url:t}=Te(e).data;if(!t||typeof t!="string")return;const n=Co("resource",({entries:s})=>{s.forEach(a=>{uV(a)&&a.name.endsWith(t)&&(e.setAttributes(xT(a)),setTimeout(n))})})}function dV(e,t){const n=Oo();if(n){let s,a;try{s=new URL(e,n),a=new URL(n).origin}catch{return!1}const i=s.origin===a;return t?hs(s.toString(),t)||i&&hs(s.pathname,t):i}else{const s=!!e.match(/^\/(?!\/)/);return t?hs(e,t):s}}function hV(e,t,n,s,a,i){const l=e.xhr,u=l==null?void 0:l[na];if(!l||l.__sentry_own_request__||!u)return;const{url:d,method:h}=u,p=Hr()&&t(d);if(e.endTimestamp&&p){const j=l.__sentry_xhr_span_id__;if(!j)return;const E=s[j];E&&u.status_code!==void 0&&(Wu(E,u.status_code),E.end(),i==null||i(E,{headers:D5(vT(l)),error:e.error}),delete s[j]);return}const m=$5(d),g=po(m||d),y=nC(d),b=!!Ht(),w=p&&b?zr({name:`${h} ${y}`,attributes:{url:d,type:"xhr","http.method":h,"http.url":m,"server.address":g==null?void 0:g.host,[Ge]:"auto.http.browser",[_t]:"http.client",...(g==null?void 0:g.search)&&{"http.query":g==null?void 0:g.search},...(g==null?void 0:g.hash)&&{"http.fragment":g==null?void 0:g.hash}}}):new ma;l.__sentry_xhr_span_id__=w.spanContext().spanId,s[l.__sentry_xhr_span_id__]=w,n(d)&&fV(l,Hr()&&b?w:void 0,a);const v=ye();return v&&v.emit("beforeOutgoingRequestSpan",w,e),w}function fV(e,t,n){const{"sentry-trace":s,baggage:a,traceparent:i}=Fb({span:t,propagateTraceparent:n});s&&mV(e,s,a,i)}function mV(e,t,n,s){var i;const a=(i=e.__sentry_xhr_v3__)==null?void 0:i.request_headers;if(!(a!=null&&a["sentry-trace"]||!e.setRequestHeader))try{if(e.setRequestHeader("sentry-trace",t),s&&!(a!=null&&a.traceparent)&&e.setRequestHeader("traceparent",s),n){const l=a==null?void 0:a.baggage;(!l||!cV(l))&&e.setRequestHeader("baggage",n)}}catch{}}function pV(){be.document?be.document.addEventListener("visibilitychange",()=>{const e=Ht();if(!e)return;const t=Bt(e);if(be.document.hidden&&t){const n="cancelled",{op:s,status:a}=Te(t);fe&&W.log(`[Tracing] Transaction: ${n} -> since tab moved to the background, op: ${s}`),a||t.setStatus({code:nt,message:n}),t.setAttribute("sentry.cancellation_reason","document.hidden"),t.end()}}):fe&&W.warn("[Tracing] Could not set up background tab detection due to lack of global document")}const gV=3600,U5="sentry_previous_trace",xV="sentry.previous_trace";function yV(e,{linkPreviousTrace:t,consistentTraceSampling:n}){const s=t==="session-storage";let a=s?wV():void 0;e.on("spanStart",l=>{if(Bt(l)!==l)return;const u=We().getPropagationContext();a=bV(a,l,u),s&&vV(a)});let i=!0;n&&e.on("beforeSampling",l=>{if(!a)return;const u=We(),d=u.getPropagationContext();if(i&&d.parentSpanId){i=!1;return}u.setPropagationContext({...d,dsc:{...d.dsc,sample_rate:String(a.sampleRate),sampled:String(By(a.spanContext))},sampleRand:a.sampleRand}),l.parentSampled=By(a.spanContext),l.parentSampleRate=a.sampleRate,l.spanAttributes={...l.spanAttributes,[nE]:a.sampleRate}})}function bV(e,t,n){const s=Te(t);function a(){var u,d;try{return Number((u=n.dsc)==null?void 0:u.sample_rate)??Number((d=s.data)==null?void 0:d[Um])}catch{return 0}}const i={spanContext:t.spanContext(),startTimestamp:s.start_timestamp,sampleRate:a(),sampleRand:n.sampleRand};if(!e)return i;const l=e.spanContext;return l.traceId===s.trace_id?e:(Date.now()/1e3-e.startTimestamp<=gV&&(fe&&W.log(`Adding previous_trace \`${JSON.stringify(l)}\` link to span \`${JSON.stringify({op:s.op,...t.spanContext()})}\``),t.addLink({context:l,attributes:{[EM]:"previous_trace"}}),t.setAttribute(xV,`${l.traceId}-${l.spanId}-${By(l)?1:0}`)),i)}function vV(e){try{be.sessionStorage.setItem(U5,JSON.stringify(e))}catch(t){fe&&W.warn("Could not store previous trace in sessionStorage",t)}}function wV(){var e;try{const t=(e=be.sessionStorage)==null?void 0:e.getItem(U5);return JSON.parse(t)}catch{return}}function By(e){return e.traceFlags===1}const _V="BrowserTracing",jV={...jf,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableLongAnimationFrame:!0,enableInp:!0,enableElementTiming:!0,ignoreResourceSpans:[],ignorePerformanceApiSpans:[],detectRedirects:!0,linkPreviousTrace:"in-memory",consistentTraceSampling:!1,enableReportPageLoaded:!1,_experiments:{},...Pv},$o=((e={})=>{const t={name:void 0,source:void 0},n=be.document,{enableInp:s,enableElementTiming:a,enableLongTask:i,enableLongAnimationFrame:l,_experiments:{enableInteractions:u,enableStandaloneClsSpans:d,enableStandaloneLcpSpans:h},beforeStartSpan:p,idleTimeout:m,finalTimeout:g,childSpanTimeout:y,markBackgroundSpan:b,traceFetch:w,traceXHR:v,trackFetchStreamPerformance:j,shouldCreateSpanForRequest:E,enableHTTPTimings:k,ignoreResourceSpans:S,ignorePerformanceApiSpans:P,instrumentPageLoad:A,instrumentNavigation:T,detectRedirects:L,linkPreviousTrace:H,consistentTraceSampling:R,enableReportPageLoaded:M,onRequestSpanStart:O,onRequestSpanEnd:F}={...jV,...e};let K,ae,X;function ee(D,te,V=!0){const $=te.op==="pageload",J=te.name,le=p?p(te):te,ve=le.attributes||{};if(J!==le.name&&(ve[ft]="custom",le.attributes=ve),!V){const Fe=Mo();zr({...le,startTime:Fe}).end(Fe);return}t.name=le.name,t.source=ve[ft];const Ee=RE(le,{idleTimeout:m,finalTimeout:g,childSpanTimeout:y,disableAutoFinish:$,beforeSpanEnd:Fe=>{K==null||K(),Gq(Fe,{recordClsOnPageloadSpan:!d,recordLcpOnPageloadSpan:!h,ignoreResourceSpans:S,ignorePerformanceApiSpans:P}),WS(D,void 0);const re=We(),me=re.getPropagationContext();re.setPropagationContext({...me,traceId:Ee.spanContext().traceId,sampled:Si(Ee),dsc:ps(Fe)}),$&&(X=void 0)},trimIdleSpanEndTimestamp:!M});$&&M&&(X=Ee),WS(D,Ee);function De(){n&&["interactive","complete"].includes(n.readyState)&&D.emit("idleSpanEnableAutoFinish",Ee)}$&&!M&&n&&(n.addEventListener("readystatechange",()=>{De()}),De())}return{name:_V,setup(D){if(wE(),K=Fq({recordClsStandaloneSpans:d||!1,recordLcpStandaloneSpans:h||!1,client:D}),s&&yB(),a&&sB(),l&&Ae.PerformanceObserver&&PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes("long-animation-frame")?qq():i&&Uq(),u&&Bq(),L&&n){const V=()=>{ae=Tt()};addEventListener("click",V,{capture:!0}),addEventListener("keydown",V,{capture:!0,passive:!0})}function te(){const V=Xu(D);V&&!Te(V).timestamp&&(fe&&W.log(`[Tracing] Finishing current active span with op: ${Te(V).op}`),V.setAttribute(zu,"cancelled"),V.end())}D.on("startNavigationSpan",(V,$)=>{if(ye()!==D)return;if($!=null&&$.isRedirect){fe&&W.warn("[Tracing] Detected redirect, navigation span will not be the root span, but a child span."),ee(D,{op:"navigation.redirect",...V},!1);return}ae=void 0,te(),an().setPropagationContext({traceId:As(),sampleRand:Math.random(),propagationSpanId:Hr()?void 0:ia()});const J=We();J.setPropagationContext({traceId:As(),sampleRand:Math.random(),propagationSpanId:Hr()?void 0:ia()}),J.setSDKProcessingMetadata({normalizedRequest:void 0}),ee(D,{op:"navigation",...V,parentSpan:null,forceTransaction:!0})}),D.on("startPageLoadSpan",(V,$={})=>{if(ye()!==D)return;te();const J=$.sentryTrace||zS("sentry-trace"),le=$.baggage||zS("baggage"),ve=hE(J,le),Ee=We();Ee.setPropagationContext(ve),Hr()||(Ee.getPropagationContext().propagationSpanId=ia()),Ee.setSDKProcessingMetadata({normalizedRequest:nv()}),ee(D,{op:"pageload",...V})}),D.on("endPageloadSpan",()=>{M&&X&&(X.setAttribute(zu,"reportPageLoaded"),X.end())})},afterAllSetup(D){let te=Oo();if(H!=="off"&&yV(D,{linkPreviousTrace:H,consistentTraceSampling:R}),be.location){if(A){const V=Fn();Ec(D,{name:be.location.pathname,startTime:V?V/1e3:void 0,attributes:{[ft]:"url",[Ge]:"auto.pageload.browser"}})}T&&lp(({to:V,from:$})=>{if($===void 0&&(te==null?void 0:te.indexOf(V))!==-1){te=void 0;return}te=void 0;const J=Db(V),le=Xu(D),ve=le&&L&&SV(le,ae);Cc(D,{name:(J==null?void 0:J.pathname)||be.location.pathname,attributes:{[ft]:"url",[Ge]:"auto.navigation.browser"}},{url:V,isRedirect:ve})})}b&&pV(),u&&NV(D,m,g,y,t),s&&wB(),F5(D,{traceFetch:w,traceXHR:v,trackFetchStreamPerformance:j,tracePropagationTargets:D.getOptions().tracePropagationTargets,shouldCreateSpanForRequest:E,enableHTTPTimings:k,onRequestSpanStart:O,onRequestSpanEnd:F})}}});function Ec(e,t,n){e.emit("startPageLoadSpan",t,n),We().setTransactionName(t.name);const s=Xu(e);return s&&e.emit("afterStartPageLoadSpan",s),s}function Cc(e,t,n){const{url:s,isRedirect:a}=n||{};e.emit("beforeStartNavigationSpan",t,{isRedirect:a}),e.emit("startNavigationSpan",t,{isRedirect:a});const i=We();return i.setTransactionName(t.name),s&&!a&&i.setSDKProcessingMetadata({normalizedRequest:{...nv(),url:s}}),Xu(e)}function zS(e){const t=be.document,n=t==null?void 0:t.querySelector(`meta[name=${e}]`);return(n==null?void 0:n.getAttribute("content"))||void 0}function NV(e,t,n,s,a){const i=be.document;let l;const u=()=>{const d="ui.action.click",h=Xu(e);if(h){const p=Te(h).op;if(["navigation","pageload"].includes(p)){fe&&W.warn(`[Tracing] Did not create ${d} span because a pageload or navigation span is in progress.`);return}}if(l&&(l.setAttribute(zu,"interactionInterrupted"),l.end(),l=void 0),!a.name){fe&&W.warn(`[Tracing] Did not create ${d} transaction because _latestRouteName is missing.`);return}l=RE({name:a.name,op:d,attributes:{[ft]:a.source||"url"}},{idleTimeout:t,finalTimeout:n,childSpanTimeout:s})};i&&addEventListener("click",u,{capture:!0})}const q5="_sentry_idleSpan";function Xu(e){return e[q5]}function WS(e,t){hn(e,q5,t)}const GS=1.5;function SV(e,t){const n=Te(e),s=Mo(),a=n.start_timestamp;return!(s-a>GS||t&&s-t<=GS)}function kV(e=ye()){e==null||e.emit("endPageloadSpan")}function EV(e){const t=Ht();if(t===e)return;const n=We();e.end=new Proxy(e.end,{apply(s,a,i){return Os(n,t),Reflect.apply(s,a,i)}}),Os(n,e)}function hc(e){return new Promise((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)})}function CV(e,t){const n=indexedDB.open(e);n.onupgradeneeded=()=>n.result.createObjectStore(t);const s=hc(n);return a=>s.then(i=>a(i.transaction(t,"readwrite").objectStore(t)))}function Av(e){return hc(e.getAllKeys())}function TV(e,t,n){return e(s=>Av(s).then(a=>{if(!(a.length>=n))return s.put(t,Math.max(...a,0)+1),hc(s.transaction)}))}function RV(e,t,n){return e(s=>Av(s).then(a=>{if(!(a.length>=n))return s.put(t,Math.min(...a,0)-1),hc(s.transaction)}))}function IV(e){return e(t=>Av(t).then(n=>{const s=n[0];if(s!=null)return hc(t.get(s)).then(a=>(t.delete(s),hc(t.transaction).then(()=>a)))}))}function PV(e){let t;function n(){return t==null&&(t=CV(e.dbName||"sentry-offline",e.storeName||"queue")),t}return{push:async s=>{try{const a=await tm(s);await TV(n(),a,e.maxQueueSize||30)}catch{}},unshift:async s=>{try{const a=await tm(s);await RV(n(),a,e.maxQueueSize||30)}catch{}},shift:async()=>{try{const s=await IV(n());if(s)return oL(s)}catch{}}}}function AV(e){return t=>{const n=e({...t,createStore:PV});return be.addEventListener("online",async s=>{await n.flush()}),n}}function OV(e=fv){return AV(D$(e))}const VS=1e6,MV="window"in Ae&&Ae.window===Ae&&typeof importScripts>"u",oi=String(0),Nm=MV?"main":"worker",Ur=be.navigator;let B5="",H5="",z5="",Hy=(Ur==null?void 0:Ur.userAgent)||"",W5="";var Vk;const LV=(Ur==null?void 0:Ur.language)||((Vk=Ur==null?void 0:Ur.languages)==null?void 0:Vk[0])||"";function $V(e){return typeof e=="object"&&e!==null&&"getHighEntropyValues"in e}const KS=Ur==null?void 0:Ur.userAgentData;$V(KS)&&KS.getHighEntropyValues(["architecture","model","platform","platformVersion","fullVersionList"]).then(e=>{var t;if(B5=e.platform||"",z5=e.architecture||"",W5=e.model||"",H5=e.platformVersion||"",(t=e.fullVersionList)!=null&&t.length){const n=e.fullVersionList[e.fullVersionList.length-1];Hy=`${n.brand} ${n.version}`}}).catch(e=>{});function DV(e){return!("thread_metadata"in e)}function FV(e){return DV(e)?WV(e):e}function UV(e){var n,s;const t=(s=(n=e.contexts)==null?void 0:n.trace)==null?void 0:s.trace_id;return typeof t=="string"&&t.length!==32&&fe&&W.log(`[Profiling] Invalid traceId: ${t} on profiled event`),typeof t!="string"?"":t}function qV(e,t,n,s){if(s.type!=="transaction")throw new TypeError("Profiling events may only be attached to transactions, this should never occur.");if(n==null)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${n} instead.`);const a=UV(s),i=FV(n),l=t||(typeof s.start_timestamp=="number"?s.start_timestamp*1e3:Tt()*1e3),u=typeof s.timestamp=="number"?s.timestamp*1e3:Tt()*1e3;return{event_id:e,timestamp:new Date(l).toISOString(),platform:"javascript",version:"1",release:s.release||"",environment:s.environment||Bm,runtime:{name:"javascript",version:be.navigator.userAgent},os:{name:B5,version:H5,build_number:Hy},device:{locale:LV,model:W5,manufacturer:Hy,architecture:z5,is_emulator:!1},debug_meta:{images:V5(n.resources)},profile:i,transactions:[{name:s.transaction||"",id:s.event_id||dn(),trace_id:a,active_thread_id:oi,relative_start_ns:"0",relative_end_ns:((u-l)*1e6).toFixed(0)}]}}function BV(e,t,n){var l,u;if(e==null)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${e} instead.`);const s=zV(e),a=t.getOptions(),i=(u=(l=t.getSdkMetadata)==null?void 0:l.call(t))==null?void 0:u.sdk;return{chunk_id:dn(),client_sdk:{name:(i==null?void 0:i.name)??"sentry.javascript.browser",version:(i==null?void 0:i.version)??"0.0.0"},profiler_id:n||dn(),platform:"javascript",version:"2",release:a.release??"",environment:a.environment??"production",debug_meta:{images:V5(e.resources)},profile:s}}function HV(e){try{if(!e||typeof e!="object")return{reason:"chunk is not an object"};const t=s=>typeof s=="string"&&/^[a-f0-9]{32}$/.test(s);if(!t(e.profiler_id))return{reason:"missing or invalid profiler_id"};if(!t(e.chunk_id))return{reason:"missing or invalid chunk_id"};if(!e.client_sdk)return{reason:"missing client_sdk metadata"};const n=e.profile;return n?!Array.isArray(n.frames)||!n.frames.length?{reason:"profile has no frames"}:!Array.isArray(n.stacks)||!n.stacks.length?{reason:"profile has no stacks"}:!Array.isArray(n.samples)||!n.samples.length?{reason:"profile has no samples"}:{valid:!0}:{reason:"missing profile data"}}catch(t){return{reason:`unknown validation error: ${t}`}}}function zV(e){const t=[];for(let u=0;u<e.frames.length;u++){const d=e.frames[u];d&&(t[u]={function:d.name,abs_path:typeof d.resourceId=="number"?e.resources[d.resourceId]:void 0,lineno:d.line,colno:d.column})}const n=[];for(let u=0;u<e.stacks.length;u++){const d=e.stacks[u];if(!d)continue;const h=[];let p=d;for(;p;)h.push(p.frameId),p=p.parentId===void 0?void 0:e.stacks[p.parentId];n[u]=h}const s=Fn(),a=typeof performance.timeOrigin=="number"?performance.timeOrigin:s||0,i=a-(s||a),l=[];for(let u=0;u<e.samples.length;u++){const d=e.samples[u];if(!d)continue;const h=(a+(d.timestamp-i))/1e3;l[u]={stack_id:d.stackId??0,thread_id:oi,timestamp:h}}return{frames:t,stacks:n,samples:l,thread_metadata:{[oi]:{name:Nm}}}}function G5(e){return Te(e).op==="pageload"}function WV(e){let t,n=0;const s={samples:[],stacks:[],frames:[],thread_metadata:{[oi]:{name:Nm}}},a=e.samples[0];if(!a)return s;const i=a.timestamp,l=Fn(),u=typeof performance.timeOrigin=="number"?performance.timeOrigin:l||0,d=u-(l||u);return e.samples.forEach((h,p)=>{if(h.stackId===void 0){t===void 0&&(t=n,s.stacks[t]=[],n++),s.samples[p]={elapsed_since_start_ns:((h.timestamp+d-i)*VS).toFixed(0),stack_id:t,thread_id:oi};return}let m=e.stacks[h.stackId];const g=[];for(;m;){g.push(m.frameId);const b=e.frames[m.frameId];b&&s.frames[m.frameId]===void 0&&(s.frames[m.frameId]={function:b.name,abs_path:typeof b.resourceId=="number"?e.resources[b.resourceId]:void 0,lineno:b.line,colno:b.column}),m=m.parentId===void 0?void 0:e.stacks[m.parentId]}const y={elapsed_since_start_ns:((h.timestamp+d-i)*VS).toFixed(0),stack_id:n,thread_id:oi};s.stacks[n]=g,s.samples[p]=y,n++}),s}function GV(e,t){if(!t.length)return e;for(const n of t)e[1].push([{type:"profile"},n]);return e}function VV(e){const t=[];return vo(e,(n,s)=>{var a,i;if(s==="transaction")for(let l=1;l<n.length;l++){const u=n[l];(i=(a=u==null?void 0:u.contexts)==null?void 0:a.profile)!=null&&i.profile_id&&t.push(n[l])}}),t}function V5(e){const t=ye(),n=t==null?void 0:t.getOptions(),s=n==null?void 0:n.stackParser;return s?ML(s,e):[]}function K5(e){return typeof e!="number"&&typeof e!="boolean"||typeof e=="number"&&isNaN(e)?(fe&&W.warn(`[Profiling] Invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(e)} of type ${JSON.stringify(typeof e)}.`),!1):e===!0||e===!1?!0:e<0||e>1?(fe&&W.warn(`[Profiling] Invalid sample rate. Sample rate must be between 0 and 1. Got ${e}.`),!1):!0}function KV(e){return e.samples.length<2?(fe&&W.log("[Profiling] Discarding profile because it contains less than 2 samples"),!1):e.frames.length?!0:(fe&&W.log("[Profiling] Discarding profile because it contains no frames"),!1)}let Ov=!1;const Y5=3e4;function YV(e){return typeof e=="function"}function J5(){const e=be.Profiler;if(!YV(e)){fe&&W.log("[Profiling] Profiling is not supported by this browser, Profiler interface missing on window object.");return}const t=10,n=Math.floor(Y5/t);try{return new e({sampleInterval:t,maxBufferSize:n})}catch{fe&&(W.log("[Profiling] Failed to initialize the Profiling constructor, this is likely due to a missing 'Document-Policy': 'js-profiling' header."),W.log("[Profiling] Disabling profiling for current user session.")),Ov=!0}}function YS(e){if(Ov)return fe&&W.log("[Profiling] Profiling has been disabled for the duration of the current user session."),!1;if(!e.isRecording())return fe&&W.log("[Profiling] Discarding profile because root span was not sampled."),!1;const t=ye(),n=t==null?void 0:t.getOptions();if(!n)return fe&&W.log("[Profiling] Profiling disabled, no options found."),!1;const s=n.profilesSampleRate;return K5(s)?s?(s===!0?!0:Math.random()<s)?!0:(fe&&W.log(`[Profiling] Discarding profile because it's not included in the random sample (sampling rate = ${Number(s)})`),!1):(fe&&W.log("[Profiling] Discarding profile because a negative sampling decision was inherited or profileSampleRate is set to 0"),!1):(fe&&W.warn("[Profiling] Discarding profile because of invalid sample rate."),!1)}function JV(e){if(Ov)return fe&&W.log("[Profiling] Profiling has been disabled for the duration of the current user session as the JS Profiler could not be started."),!1;if(e.profileLifecycle!=="trace"&&e.profileLifecycle!=="manual")return fe&&W.warn("[Profiling] Session not sampled. Invalid `profileLifecycle` option."),!1;const t=e.profileSessionSampleRate;return K5(t)?t?Math.random()<=t:(fe&&W.log("[Profiling] Discarding profile because profileSessionSampleRate is not defined or set to 0"),!1):(fe&&W.warn("[Profiling] Discarding profile because of invalid profileSessionSampleRate."),!1)}function hf(e){return typeof e.profilesSampleRate<"u"}function QV(e,t,n,s){return KV(n)?qV(e,t,n,s):null}const to=new Map;function XV(){return to.size}function ZV(e){const t=to.get(e);return t&&to.delete(e),t}function eK(e,t){if(to.set(e,t),to.size>30){const n=to.keys().next().value;n!==void 0&&to.delete(n)}}function tK(e){var t,n,s,a,i;return!((t=e==null?void 0:e.contexts)!=null&&t.profile)||!e.contexts||(e.contexts.trace={...((n=e.contexts)==null?void 0:n.trace)??{},data:{...((a=(s=e.contexts)==null?void 0:s.trace)==null?void 0:a.data)??{},"thread.id":oi,"thread.name":Nm}},(i=e.spans)==null||i.forEach(l=>{l.data={...l.data||{},"thread.id":oi,"thread.name":Nm}})),e}function JS(e){let t;G5(e)&&(t=Tt()*1e3);const n=J5();if(!n)return;fe&&W.log(`[Profiling] started profiling span: ${Te(e).description}`);const s=dn();let a=null;We().setContext("profile",{profile_id:s,start_timestamp:t});async function i(){if(e&&n){if(a){fe&&W.log("[Profiling] profile for:",Te(e).description,"already exists, returning early");return}return n.stop().then(h=>{if(l&&(be.clearTimeout(l),l=void 0),fe&&W.log(`[Profiling] stopped profiling of span: ${Te(e).description}`),!h){fe&&W.log(`[Profiling] profiler returned null profile for: ${Te(e).description}`,"this may indicate an overlapping span or a call to stopProfiling with a profile title that was never started");return}a=h,eK(s,h)}).catch(h=>{fe&&W.log("[Profiling] error while stopping profiler:",h)})}}let l=be.setTimeout(()=>{fe&&W.log("[Profiling] max profile duration elapsed, stopping profiling for:",Te(e).description),i()},Y5);const u=e.end.bind(e);function d(){return e?(i().then(()=>{u()},()=>{u()}),e):u()}e.end=d}const nK=6e4,rK=3e5;class sK{constructor(){this._client=void 0,this._profiler=void 0,this._chunkTimer=void 0,this._profilerId=void 0,this._isRunning=!1,this._sessionSampled=!1,this._lifecycleMode=void 0,this._activeRootSpanIds=new Set,this._rootSpanTimeouts=new Map}initialize(t){const n=t.getOptions().profileLifecycle,s=JV(t.getOptions());fe&&W.log(`[Profiling] Initializing profiler (lifecycle='${n}').`),s||fe&&W.log("[Profiling] Session not sampled. Skipping lifecycle profiler initialization."),this._profilerId=dn(),this._client=t,this._sessionSampled=s,this._lifecycleMode=n,n==="trace"&&this._setupTraceLifecycleListeners(t)}start(){if(this._lifecycleMode==="trace"){fe&&W.warn('[Profiling] `profileLifecycle` is set to "trace". Calls to `uiProfiler.start()` are ignored in trace mode.');return}if(this._isRunning){fe&&W.warn("[Profiling] Profile session is already running, `uiProfiler.start()` is a no-op.");return}if(!this._sessionSampled){fe&&W.warn("[Profiling] Session is not sampled, `uiProfiler.start()` is a no-op.");return}this._beginProfiling()}stop(){if(this._lifecycleMode==="trace"){fe&&W.warn('[Profiling] `profileLifecycle` is set to "trace". Calls to `uiProfiler.stop()` are ignored in trace mode.');return}if(!this._isRunning){fe&&W.warn("[Profiling] Profiler is not running, `uiProfiler.stop()` is a no-op.");return}this._endProfiling()}notifyRootSpanActive(t){if(this._lifecycleMode!=="trace"||!this._sessionSampled)return;const n=t.spanContext().spanId;if(!n||this._activeRootSpanIds.has(n))return;this._registerTraceRootSpan(n);const s=this._activeRootSpanIds.size;s===1&&(fe&&W.log("[Profiling] Detected already active root span during setup. Active root spans now:",s),this._beginProfiling())}_beginProfiling(){if(!this._isRunning){if(this._isRunning=!0,fe&&W.log("[Profiling] Started profiling with profiler ID:",this._profilerId),oa().setContext("profile",{profiler_id:this._profilerId}),this._startProfilerInstance(),!this._profiler){fe&&W.log("[Profiling] Failed to start JS Profiler; stopping."),this._resetProfilerInfo();return}this._startPeriodicChunking()}}_endProfiling(){this._isRunning&&(this._isRunning=!1,this._chunkTimer&&(clearTimeout(this._chunkTimer),this._chunkTimer=void 0),this._clearAllRootSpanTimeouts(),this._collectCurrentChunk().catch(t=>{fe&&W.error("[Profiling] Failed to collect current profile chunk on `stop()`:",t)}),this._lifecycleMode==="manual"&&oa().setContext("profile",{}))}_setupTraceLifecycleListeners(t){t.on("spanStart",n=>{if(!this._sessionSampled){fe&&W.log("[Profiling] Span not profiled because of negative sampling decision for user session.");return}if(n!==Bt(n))return;if(!n.isRecording()){fe&&W.log("[Profiling] Discarding profile because root span was not sampled.");return}const s=n.spanContext().spanId;if(!s||this._activeRootSpanIds.has(s))return;this._registerTraceRootSpan(s);const a=this._activeRootSpanIds.size;a===1&&(fe&&W.log(`[Profiling] Root span ${s} started. Profiling active while there are active root spans (count=${a}).`),this._beginProfiling())}),t.on("spanEnd",n=>{if(!this._sessionSampled)return;const s=n.spanContext().spanId;if(!s||!this._activeRootSpanIds.has(s))return;this._activeRootSpanIds.delete(s);const a=this._activeRootSpanIds.size;fe&&W.log(`[Profiling] Root span with ID ${s} ended. Will continue profiling for as long as there are active root spans (currently: ${a}).`),a===0&&(this._collectCurrentChunk().catch(i=>{fe&&W.error("[Profiling] Failed to collect current profile chunk on last `spanEnd`:",i)}),this._endProfiling())})}_resetProfilerInfo(){this._isRunning=!1,oa().setContext("profile",{})}_clearAllRootSpanTimeouts(){this._rootSpanTimeouts.forEach(t=>clearTimeout(t)),this._rootSpanTimeouts.clear()}_registerTraceRootSpan(t){this._activeRootSpanIds.add(t);const n=setTimeout(()=>this._onRootSpanTimeout(t),rK);this._rootSpanTimeouts.set(t,n)}_startProfilerInstance(){var n;if(((n=this._profiler)==null?void 0:n.stopped)===!1)return;const t=J5();if(!t){fe&&W.log("[Profiling] Failed to start JS Profiler.");return}this._profiler=t}_startPeriodicChunking(){this._isRunning&&(this._chunkTimer=setTimeout(()=>{if(this._collectCurrentChunk().catch(t=>{fe&&W.error("[Profiling] Failed to collect current profile chunk during periodic chunking:",t)}),this._isRunning){if(this._startProfilerInstance(),!this._profiler){this._resetProfilerInfo();return}this._startPeriodicChunking()}},nK))}_onRootSpanTimeout(t){this._rootSpanTimeouts.has(t)&&(this._rootSpanTimeouts.delete(t),this._activeRootSpanIds.has(t)&&(fe&&W.log(`[Profiling] Reached 5-minute timeout for root span ${t}. You likely started a manual root span that never called \`.end()\`.`),this._activeRootSpanIds.delete(t),this._activeRootSpanIds.size===0&&this._endProfiling()))}async _collectCurrentChunk(){const t=this._profiler;if(this._profiler=void 0,!!t)try{const n=await t.stop(),s=BV(n,this._client,this._profilerId),a=HV(s);if("reason"in a){fe&&W.log("[Profiling] Discarding invalid profile chunk (this is probably a bug in the SDK):",a.reason);return}this._sendProfileChunk(s),fe&&W.log("[Profiling] Collected browser profile chunk.")}catch(n){fe&&W.log("[Profiling] Error while stopping JS Profiler for chunk:",n)}}_sendProfileChunk(t){var u;const n=this._client,s=Hm((u=n.getSdkMetadata)==null?void 0:u.call(n)),a=n.getDsn(),i=n.getOptions().tunnel,l=bs({event_id:dn(),sent_at:new Date().toISOString(),...s&&{sdk:s},...!!i&&a&&{dsn:ba(a)}},[[{type:"profile_chunk"},t]]);n.sendEnvelope(l).then(null,d=>{fe&&W.error("Error while sending profile chunk envelope:",d)})}}const aK="BrowserProfiling",iK=(()=>({name:aK,setup(e){const t=e.getOptions(),n=new sK;if(!hf(t)&&!t.profileLifecycle&&(t.profileLifecycle="manual"),hf(t)&&!t.profilesSampleRate){fe&&W.log("[Profiling] Profiling disabled, no profiling options found.");return}const s=Ht(),a=s&&Bt(s);if(hf(t)&&t.profileSessionSampleRate!==void 0&&fe&&W.warn("[Profiling] Both legacy profiling (`profilesSampleRate`) and UI profiling settings are defined. `profileSessionSampleRate` has no effect when legacy profiling is enabled."),hf(t))a&&G5(a)&&YS(a)&&JS(a),e.on("spanStart",i=>{i===Bt(i)&&YS(i)&&JS(i)}),e.on("beforeEnvelope",i=>{var d,h;if(!XV())return;const l=VV(i);if(!l.length)return;const u=[];for(const p of l){const m=p==null?void 0:p.contexts,g=(d=m==null?void 0:m.profile)==null?void 0:d.profile_id,y=(h=m==null?void 0:m.profile)==null?void 0:h.start_timestamp;if(typeof g!="string"){fe&&W.log("[Profiling] cannot find profile for a span without a profile context");continue}if(!g){fe&&W.log("[Profiling] cannot find profile for a span without a profile context");continue}m!=null&&m.profile&&delete m.profile;const b=ZV(g);if(!b){fe&&W.log(`[Profiling] Could not retrieve profile for span: ${g}`);continue}const w=QV(g,y,b,p);w&&u.push(w)}GV(i,u)});else{const i=t.profileLifecycle;if(e.on("startUIProfiler",()=>n.start()),e.on("stopUIProfiler",()=>n.stop()),i==="manual")n.initialize(e);else if(i==="trace"){if(!Hr(t)){fe&&W.warn("[Profiling] `profileLifecycle` is 'trace' but tracing is disabled. Set a `tracesSampleRate` or `tracesSampler` to enable span tracing.");return}n.initialize(e),a&&n.notifyRootSpanActive(a),be.setTimeout(()=>{const l=Ht(),u=l&&Bt(l);u&&n.notifyRootSpanActive(u)},0)}}},processEvent(e){return tK(e)}})),oK=iK,lK=()=>({name:"LaunchDarkly",processEvent(e,t,n){return _c(e)}});function cK(){return{name:"sentry-flag-auditor",type:"flag-used",synchronous:!0,method:(e,t,n)=>{_o(e,t.value),jo(e,t.value)}}}const uK=()=>({name:"OpenFeature",processEvent(e,t,n){return _c(e)}});class dK{after(t,n){_o(n.flagKey,n.value),jo(n.flagKey,n.value)}error(t,n,s){_o(t.flagKey,t.defaultValue),jo(t.flagKey,t.defaultValue)}}const hK=({featureFlagClientClass:e})=>({name:"Unleash",setupOnce(){const t=e.prototype;Nn(t,"isEnabled",fK)},processEvent(t,n,s){return _c(t)}});function fK(e){return function(...t){const n=t[0],s=e.apply(this,t);return typeof n=="string"&&typeof s=="boolean"?(_o(n,s),jo(n,s)):fe&&W.error(`[Feature Flags] UnleashClient.isEnabled does not match expected signature. arg0: ${n} (${typeof n}), result: ${s} (${typeof s})`),s}}const mK=(({growthbookClass:e})=>lD({growthbookClass:e})),pK=({featureFlagClient:e})=>({name:"Statsig",setup(t){e.on("gate_evaluation",n=>{_o(n.gate.name,n.gate.value),jo(n.gate.name,n.gate.value)})},processEvent(t,n,s){return _c(t)}});async function gK(){const e=ye();if(!e)return"no-client-active";if(!e.getDsn())return"no-dsn-configured";try{await EE(()=>fetch("https://o447951.ingest.sentry.io/api/4509632503087104/envelope/?sentry_version=7&sentry_key=c1dfb07d783ad5325c245c1fd3725390&sentry_client=sentry.javascript.browser%2F1.33.7",{body:"{}",method:"POST",mode:"cors",credentials:"omit"}))}catch{return"sentry-unreachable"}}const xK="WebWorker",yK=({worker:e})=>({name:xK,setupOnce:()=>{(Array.isArray(e)?e:[e]).forEach(t=>QS(t))},addWorker:t=>QS(t)});function QS(e){e.addEventListener("message",t=>{wK(t.data)&&(t.stopImmediatePropagation(),t.data._sentryDebugIds&&(fe&&W.log("Sentry debugId web worker message received",t.data),be._sentryDebugIds={...t.data._sentryDebugIds,...be._sentryDebugIds}),t.data._sentryWorkerError&&(fe&&W.log("Sentry worker rejection message received",t.data._sentryWorkerError),bK(t.data._sentryWorkerError)))})}function bK(e){const t=ye();if(!t)return;const n=t.getOptions().stackParser,s=t.getOptions().attachStacktrace,a=e.reason,i=hi(a)?IT(a):ap(n,a,void 0,s,!0);i.level="error",e.filename&&(i.contexts={...i.contexts,worker:{filename:e.filename}}),wc(i,{originalException:a,mechanism:{handled:!1,type:"auto.browser.web_worker.onunhandledrejection"}}),fe&&W.log("Captured worker unhandled rejection",a)}function vK({self:e}){e.postMessage({_sentryMessage:!0,_sentryDebugIds:e._sentryDebugIds??void 0}),e.addEventListener("unhandledrejection",t=>{var a;const s={reason:RT(t),filename:(a=e.location)==null?void 0:a.href};e.postMessage({_sentryMessage:!0,_sentryWorkerError:s}),fe&&W.log("[Sentry Worker] Forwarding unhandled rejection to parent",s)}),fe&&W.log("[Sentry Worker] Registered worker with unhandled rejection handling")}function wK(e){if(!Is(e)||e._sentryMessage!==!0)return!1;const t="_sentryDebugIds"in e,n="_sentryWorkerError"in e;return!(!t&&!n||t&&!(Is(e._sentryDebugIds)||e._sentryDebugIds===void 0)||n&&!Is(e._sentryWorkerError))}function Q5(e){const t={...e};return aC(t,"react"),Tb("react",{version:C.version}),R9(t)}function _K(e){const t=e.match(/^([^.]+)/);return t!==null&&parseInt(t[0])>=17}function jK(e,t){const n=new WeakSet;function s(a,i){if(!n.has(a)){if(a.cause)return n.add(a),s(a.cause,i);a.cause=i}}s(e,t)}function Mv(e,{componentStack:t},n){if(_K(C.version)&&aa(e)&&t){const s=new Error(e.message);s.name=`React ErrorBoundary ${e.name}`,s.stack=t,jK(e,s)}return hr(s=>(s.setContext("react",{componentStack:t}),dt(e,n)))}function NK(e){return(t,n)=>{const s=!!e,a=Mv(t,n,{mechanism:{handled:s,type:"auto.function.react.error_handler"}});s&&e(t,n,a)}}const X5="ui.react.render",SK="ui.react.update",Z5="ui.react.mount";var y0={exports:{}},ht={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XS;function kK(){if(XS)return ht;XS=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,n=e?Symbol.for("react.portal"):60106,s=e?Symbol.for("react.fragment"):60107,a=e?Symbol.for("react.strict_mode"):60108,i=e?Symbol.for("react.profiler"):60114,l=e?Symbol.for("react.provider"):60109,u=e?Symbol.for("react.context"):60110,d=e?Symbol.for("react.async_mode"):60111,h=e?Symbol.for("react.concurrent_mode"):60111,p=e?Symbol.for("react.forward_ref"):60112,m=e?Symbol.for("react.suspense"):60113,g=e?Symbol.for("react.suspense_list"):60120,y=e?Symbol.for("react.memo"):60115,b=e?Symbol.for("react.lazy"):60116,w=e?Symbol.for("react.block"):60121,v=e?Symbol.for("react.fundamental"):60117,j=e?Symbol.for("react.responder"):60118,E=e?Symbol.for("react.scope"):60119;function k(P){if(typeof P=="object"&&P!==null){var A=P.$$typeof;switch(A){case t:switch(P=P.type,P){case d:case h:case s:case i:case a:case m:return P;default:switch(P=P&&P.$$typeof,P){case u:case p:case b:case y:case l:return P;default:return A}}case n:return A}}}function S(P){return k(P)===h}return ht.AsyncMode=d,ht.ConcurrentMode=h,ht.ContextConsumer=u,ht.ContextProvider=l,ht.Element=t,ht.ForwardRef=p,ht.Fragment=s,ht.Lazy=b,ht.Memo=y,ht.Portal=n,ht.Profiler=i,ht.StrictMode=a,ht.Suspense=m,ht.isAsyncMode=function(P){return S(P)||k(P)===d},ht.isConcurrentMode=S,ht.isContextConsumer=function(P){return k(P)===u},ht.isContextProvider=function(P){return k(P)===l},ht.isElement=function(P){return typeof P=="object"&&P!==null&&P.$$typeof===t},ht.isForwardRef=function(P){return k(P)===p},ht.isFragment=function(P){return k(P)===s},ht.isLazy=function(P){return k(P)===b},ht.isMemo=function(P){return k(P)===y},ht.isPortal=function(P){return k(P)===n},ht.isProfiler=function(P){return k(P)===i},ht.isStrictMode=function(P){return k(P)===a},ht.isSuspense=function(P){return k(P)===m},ht.isValidElementType=function(P){return typeof P=="string"||typeof P=="function"||P===s||P===h||P===i||P===a||P===m||P===g||typeof P=="object"&&P!==null&&(P.$$typeof===b||P.$$typeof===y||P.$$typeof===l||P.$$typeof===u||P.$$typeof===p||P.$$typeof===v||P.$$typeof===j||P.$$typeof===E||P.$$typeof===w)},ht.typeOf=k,ht}var ZS;function EK(){return ZS||(ZS=1,y0.exports=kK()),y0.exports}var b0,ek;function CK(){if(ek)return b0;ek=1;var e=EK(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},i={};i[e.ForwardRef]=s,i[e.Memo]=a;function l(b){return e.isMemo(b)?a:i[b.$$typeof]||t}var u=Object.defineProperty,d=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,p=Object.getOwnPropertyDescriptor,m=Object.getPrototypeOf,g=Object.prototype;function y(b,w,v){if(typeof w!="string"){if(g){var j=m(w);j&&j!==g&&y(b,j,v)}var E=d(w);h&&(E=E.concat(h(w)));for(var k=l(b),S=l(w),P=0;P<E.length;++P){var A=E[P];if(!n[A]&&!(v&&v[A])&&!(S&&S[A])&&!(k&&k[A])){var T=p(w,A);try{u(b,A,T)}catch{}}}}return b}return b0=y,b0}var e4=CK();const t4=qI(e4),TK=UI({__proto__:null,default:t4},[e4]),yp=t4||TK,RK="unknown";class Lv extends C.Component{constructor(t){super(t);const{name:n,disabled:s=!1}=this.props;s||(this._mountSpan=zr({name:`<${n}>`,onlyIfParent:!0,op:Z5,attributes:{[Ge]:"auto.ui.react.profiler","ui.component_name":n}}))}componentDidMount(){this._mountSpan&&this._mountSpan.end()}shouldComponentUpdate({updateProps:t,includeUpdates:n=!0}){if(n&&this._mountSpan&&t!==this.props.updateProps){const s=Object.keys(t).filter(a=>t[a]!==this.props.updateProps[a]);if(s.length>0){const a=Tt();this._updateSpan=wo(this._mountSpan,()=>zr({name:`<${this.props.name}>`,onlyIfParent:!0,op:SK,startTime:a,attributes:{[Ge]:"auto.ui.react.profiler","ui.component_name":this.props.name,"ui.react.changed_props":s}}))}}return!0}componentDidUpdate(){this._updateSpan&&(this._updateSpan.end(),this._updateSpan=void 0)}componentWillUnmount(){const t=Tt(),{name:n,includeRender:s=!0}=this.props;if(this._mountSpan&&s){const a=Te(this._mountSpan).timestamp;wo(this._mountSpan,()=>{const i=zr({onlyIfParent:!0,name:`<${n}>`,op:X5,startTime:a,attributes:{[Ge]:"auto.ui.react.profiler","ui.component_name":n}});i&&i.end(t)})}}render(){return this.props.children}}Object.assign(Lv,{defaultProps:{disabled:!1,includeRender:!0,includeUpdates:!0}});function IK(e,t){const n=(t==null?void 0:t.name)||e.displayName||e.name||RK,s=a=>C.createElement(Lv,{...t,name:n,updateProps:a},C.createElement(e,{...a}));return s.displayName=`profiler(${n})`,yp(s,e),s}function PK(e,t={disabled:!1,hasRenderSpan:!0}){const[n]=C.useState(()=>{if(!(t!=null&&t.disabled))return zr({name:`<${e}>`,onlyIfParent:!0,op:Z5,attributes:{[Ge]:"auto.ui.react.profiler","ui.component_name":e}})});C.useEffect(()=>(n&&n.end(),()=>{if(n&&t.hasRenderSpan){const s=Te(n).timestamp,a=Tt(),i=zr({name:`<${e}>`,onlyIfParent:!0,op:X5,startTime:s,attributes:{[Ge]:"auto.ui.react.profiler","ui.component_name":e}});i&&i.end(a)}}),[])}const On=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,AK="unknown",v0={componentStack:null,error:null,eventId:null};let n4=class extends C.Component{constructor(t){super(t),this.state=v0,this._openFallbackReportDialog=!0;const n=ye();n&&t.showDialog&&(this._openFallbackReportDialog=!1,this._cleanupHook=n.on("afterSendEvent",s=>{!s.type&&this._lastEventId&&s.event_id===this._lastEventId&&Iy({...t.dialogOptions,eventId:this._lastEventId})}))}componentDidCatch(t,n){const{componentStack:s}=n,{beforeCapture:a,onError:i,showDialog:l,dialogOptions:u}=this.props;hr(d=>{a&&a(d,t,s);const h=this.props.handled!=null?this.props.handled:!!this.props.fallback,p=Mv(t,n,{mechanism:{handled:h,type:"auto.function.react.error_boundary"}});i&&i(t,s,p),l&&(this._lastEventId=p,this._openFallbackReportDialog&&Iy({...u,eventId:p})),this.setState({error:t,componentStack:s,eventId:p})})}componentDidMount(){const{onMount:t}=this.props;t&&t()}componentWillUnmount(){const{error:t,componentStack:n,eventId:s}=this.state,{onUnmount:a}=this.props;a&&(this.state===v0?a(null,null,null):a(t,n,s)),this._cleanupHook&&(this._cleanupHook(),this._cleanupHook=void 0)}resetErrorBoundary(){const{onReset:t}=this.props,{error:n,componentStack:s,eventId:a}=this.state;t&&t(n,s,a),this.setState(v0)}render(){const{fallback:t,children:n}=this.props,s=this.state;if(s.componentStack===null)return typeof n=="function"?n():n;const a=typeof t=="function"?C.createElement(t,{error:s.error,componentStack:s.componentStack,resetError:()=>this.resetErrorBoundary(),eventId:s.eventId}):t;return C.isValidElement(a)?a:(t&&On&&W.warn("fallback did not produce a valid ReactElement"),null)}};function OK(e,t){const n=e.displayName||e.name||AK,s=C.memo(a=>C.createElement(n4,{...t},C.createElement(e,{...a})));return s.displayName=`errorBoundary(${n})`,yp(s,e),s}const MK="redux.action",LK="info",$K={attachReduxState:!0,actionTransformer:e=>e,stateTransformer:e=>e||null};function DK(e){const t={...$K,...e};return n=>(s,a)=>{t.attachReduxState&&oa().addEventProcessor((u,d)=>{try{u.type===void 0&&u.contexts.state.state.type==="redux"&&(d.attachments=[...d.attachments||[],{filename:"redux_state.json",data:JSON.stringify(u.contexts.state.state.value)}])}catch{}return u});function i(u){return(d,h)=>{const p=u(d,h),m=We(),g=t.actionTransformer(h);typeof g<"u"&&g!==null&&gs({category:MK,data:g,type:LK});const y=t.stateTransformer(p);if(typeof y<"u"&&y!==null){const w=ye(),v=w==null?void 0:w.getOptions(),j=(v==null?void 0:v.normalizeDepth)||3,E={state:{type:"redux",value:y}};hn(E,"__sentry_override_normalization_depth__",3+j),m.setContext("state",E)}else m.setContext("state",null);const{configureScopeWithState:b}=t;return typeof b=="function"&&b(m,p),p}}const l=n(i(s),a);return l.replaceReducer=new Proxy(l.replaceReducer,{apply:function(u,d,h){u.apply(d,[i(h[0])])}}),l}}function FK(e){const t=$o({...e,instrumentPageLoad:!1,instrumentNavigation:!1}),{history:n,routes:s,match:a,instrumentPageLoad:i=!0,instrumentNavigation:l=!0}=e;return{...t,afterAllSetup(u){t.afterAllSetup(u),i&&be.location&&tk(s,be.location,a,(d,h="url")=>{Ec(u,{name:d,attributes:{[_t]:"pageload",[Ge]:"auto.pageload.react.reactrouter_v3",[ft]:h}})}),l&&n.listen&&n.listen(d=>{(d.action==="PUSH"||d.action==="POP")&&tk(s,d,a,(h,p="url")=>{Cc(u,{name:h,attributes:{[_t]:"navigation",[Ge]:"auto.navigation.react.reactrouter_v3",[ft]:p}})})})}}}function tk(e,t,n,s){let a=t.pathname;n({location:t,routes:e},(i,l,u)=>{if(i||!u)return s(a);const d=UK(u.routes||[]);return d.length===0||d==="/*"?s(a):(a=d,s(a,"route"))})}function UK(e){var s;if(!Array.isArray(e)||e.length===0)return"";const t=e.filter(a=>!!a.path);let n=-1;for(let a=t.length-1;a>=0;a--)if((s=t[a].path)!=null&&s.startsWith("/")){n=a;break}return t.slice(n).reduce((a,{path:i})=>{const l=a==="/"||a===""?i:`/${i}`;return`${a}${l}`},"")}function qK(e,t={}){const n=e,s=$o({...t,instrumentNavigation:!1,instrumentPageLoad:!1}),{instrumentPageLoad:a=!0,instrumentNavigation:i=!0}=t;return{...s,afterAllSetup(l){s.afterAllSetup(l);const u=be.location;if(a&&u){const d=n.matchRoutes(u.pathname,n.options.parseSearch(u.search),{preload:!1,throwOnError:!1}),h=d[d.length-1];Ec(l,{name:h?h.routeId:u.pathname,attributes:{[_t]:"pageload",[Ge]:"auto.pageload.react.tanstack_router",[ft]:h?"route":"url",...nk(h)}})}i&&n.subscribe("onBeforeNavigate",d=>{if(!d.fromLocation||d.toLocation.state===d.fromLocation.state)return;const h=n.matchRoutes(d.toLocation.pathname,d.toLocation.search,{preload:!1,throwOnError:!1}),p=h[h.length-1],m=be.location,g=Cc(l,{name:p?p.routeId:m.pathname,attributes:{[_t]:"navigation",[Ge]:"auto.navigation.react.tanstack_router",[ft]:p?"route":"url"}}),y=n.subscribe("onResolved",b=>{if(y(),g){const w=n.matchRoutes(b.toLocation.pathname,b.toLocation.search,{preload:!1,throwOnError:!1}),v=w[w.length-1];v&&(g.updateName(v.routeId),g.setAttribute(ft,"route"),g.setAttributes(nk(v)))}})})}}}function nk(e){if(!e)return{};const t={};return Object.entries(e.params).forEach(([n,s])=>{t[`url.path.params.${n}`]=s,t[`url.path.parameter.${n}`]=s,t[`params.${n}`]=s}),t}function BK(e){const t=$o({...e,instrumentPageLoad:!1,instrumentNavigation:!1}),{history:n,routes:s,matchPath:a,instrumentPageLoad:i=!0,instrumentNavigation:l=!0}=e;return{...t,afterAllSetup(u){t.afterAllSetup(u),r4(u,i,l,n,"reactrouter_v4",s,a)}}}function HK(e){const t=$o({...e,instrumentPageLoad:!1,instrumentNavigation:!1}),{history:n,routes:s,matchPath:a,instrumentPageLoad:i=!0,instrumentNavigation:l=!0}=e;return{...t,afterAllSetup(u){t.afterAllSetup(u),r4(u,i,l,n,"reactrouter_v5",s,a)}}}function r4(e,t,n,s,a,i=[],l){function u(){if(s.location)return s.location.pathname;if(be.location)return be.location.pathname}function d(h){if(i.length===0||!l)return[h,"url"];const p=s4(i,h,l);for(const m of p)if(m.match.isExact)return[m.match.path,"route"];return[h,"url"]}if(t){const h=u();if(h){const[p,m]=d(h);Ec(e,{name:p,attributes:{[_t]:"pageload",[Ge]:`auto.pageload.react.${a}`,[ft]:m}})}}n&&s.listen&&s.listen((h,p)=>{if(p&&(p==="PUSH"||p==="POP")){const[m,g]=d(h.pathname);Cc(e,{name:m,attributes:{[_t]:"navigation",[Ge]:`auto.navigation.react.${a}`,[ft]:g}})}})}function s4(e,t,n,s=[]){return e.some(a=>{const i=a.path?n(t,a):s.length?s[s.length-1].match:zK(t);return i&&(s.push({route:a,match:i}),a.routes&&s4(a.routes,t,n,s)),!!i}),s}function zK(e){return{path:"/",url:"/",params:{},isExact:e==="/"}}function WK(e){const t=e.displayName||e.name,n=s=>{var a;if((a=s==null?void 0:s.computedMatch)!=null&&a.isExact){const i=s.computedMatch.path,l=GK();We().setTransactionName(i),l&&(l.updateName(i),l.setAttribute(ft,"route"))}return C.createElement(e,{...s})};return n.displayName=`sentryRoute(${t})`,yp(n,e),n}function GK(){const e=Ht(),t=e&&Bt(e);if(!t)return;const n=Te(t).op;return n==="navigation"||n==="pageload"?t:void 0}let $v,Dl=!1;const li=[],VK=10;function KK(e,t){const n={};return li.length>=VK&&(On&&W.warn("[React Router] Navigation context stack overflow - removing oldest context"),li.shift()),li.push({token:n,targetPath:e,span:t}),n}function YK(e){const t=li[li.length-1];(t==null?void 0:t.token)===e&&li.pop()}function a4(){const e=li.length;return e>0?li[e-1]??null:null}function JK(e,t=!1){$v=e,Dl=t}function QK(e){return ZK(e.route.path||"")}function XK(e){return e.params["*"]||""}function ZK(e){return e[e.length-1]==="*"?e.slice(0,-1):e}function Fl(e){return e[e.length-1]==="/"?e.slice(0,-1):e}function i4(e){return e.endsWith("*")}function gi(e){return e.includes("/*")||e.endsWith("*")}function rk(e,t){var n;return i4(e)&&!!((n=t.route.children)!=null&&n.length)||!1}function eY(e){var t;return!!(!e.children&&e.element&&((t=e.path)!=null&&t.endsWith("/*")))}function tY(e,t,n){const s=e&&e.length>0?e:Dl?bp(t,n):t;let a=s.slice(-2)==="/*"?s.slice(0,-2):s;return a.length>1&&a[a.length-1]==="/"&&(a=a.slice(0,-1)),[a,"route"]}function sk(e){return e.split(/\\?\//).filter(t=>t.length>0&&t!==",").length}function bp(e,t){if(!t||t==="/"||!e.toLowerCase().startsWith(t.toLowerCase()))return e;const n=t.endsWith("/")?t.length-1:t.length,s=e.charAt(n);return s&&s!=="/"?e:e.slice(n)||"/"}function Sm(e){return e[0]==="/"?e:`/${e}`}function o4(e,t){const n=$v(e,t);if(!n||n.length===0)return"";for(const s of n)if(s.route.path&&s.route.path!=="*"){const a=QK(s),i=bp(t.pathname,Sm(s.pathnameBase));return t.pathname===i?Fl(i):Fl(Fl(a||"")+Sm(o4(e.filter(l=>l!==s.route),{pathname:i})))}return""}function nY(e,t){const n=$v(t,e);if(n){for(const s of n)if(eY(s.route)&&XK(s))return!0}return!1}function ak(e,t){return Dl?bp(e.pathname,t):e.pathname||""}function rY(e,t,n,s=""){if(!e||e.length===0)return[Dl?bp(t.pathname,s):t.pathname,"url"];if(!n)return[ak(t,s),"url"];let a="";for(const i of n){const l=i.route;if(!l)continue;if(l.index)return tY(a,i.pathname,s);const u=l.path;if(!u||rk(u,i))continue;const d=u[0]==="/"||a[a.length-1]==="/"?u:`/${u}`;if(a=Fl(a)+Sm(d),Fl(t.pathname)===Fl(s+i.pathname))return sk(a)!==sk(i.pathname)&&!i4(a)?[(Dl?"":s)+d,"route"]:(rk(a,i)&&(a=a.slice(0,-1)),[(Dl?"":s)+a,"route"])}return[ak(t,s),"url"]}function vp(e,t,n,s,a=""){let i,l="url";const u=nY(e,n);return u&&(i=Sm(o4(n,e)),l="route"),(!u||!i)&&([i,l]=rY(t,e,s,a)),[i||e.pathname,l]}function fs(){const e=Ht(),t=e?Bt(e):void 0;if(!t)return;const n=Te(t).op;return n==="navigation"||n==="pageload"?t:void 0}function sY(){const e=a4();if(e!=null&&e.targetPath)return{pathname:e.targetPath,search:"",hash:"",state:null,key:"default"};if(typeof be<"u")try{const t=be.location;if(t)return{pathname:t.pathname,search:t.search||"",hash:t.hash||"",state:null,key:"default"}}catch{On&&W.warn("[React Router] Could not access window.location")}return null}function aY(){const e=a4();return e?e.span:fs()}function iY(e,t,n,s){const a=new Proxy(e,{apply(i,l,u){const d=sY(),h=aY(),p=i.apply(l,u);return oY(p,t,n,s,d,h),p}});return hn(a,"__sentry_proxied__",!0),a}function oY(e,t,n,s,a,i){Ao(e)?e.then(l=>{Array.isArray(l)&&s(l,t,a??void 0,i)}).catch(l=>{On&&W.warn(`Error resolving async handler '${n}' for route`,t,l)}):Array.isArray(e)&&s(e,t,a??void 0,i)}function wp(e,t){if(e.handle&&typeof e.handle=="object")for(const n of Object.keys(e.handle)){const s=e.handle[n];typeof s=="function"&&!s.__sentry_proxied__&&(e.handle[n]=iY(s,e,n,t))}if(Array.isArray(e.children))for(const n of e.children)wp(n,t)}let ci,ui,di,Uf,Gr,_p=!1,no=3e3;const l4=new WeakSet,Ji=new WeakMap,Kn=new Set,qf=new WeakMap;function lY(e){return be!=null&&be.requestAnimationFrame?be.requestAnimationFrame(e):setTimeout(e,0)}function ik(e){be!=null&&be.cancelAnimationFrame?be.cancelAnimationFrame(e):clearTimeout(e)}function c4(e){return`${e.pathname}${e.search||""}${e.hash||""}`}function ok(e){return e.includes(":")||e.includes("*")}function cY(e,t,n,s){var i;if(!e)return{skip:!1,shouldUpdate:!1};if(e.locationKey===t&&(e.isPlaceholder||!s)){const l=!!e.routeName&&gi(e.routeName),u=gi(n),d=!!e.routeName&&ok(e.routeName),h=ok(n),p=l&&!u,m=!d&&h,g=n!==e.routeName&&n.length>(((i=e.routeName)==null?void 0:i.length)||0)&&!u;return{skip:!0,shouldUpdate:!!(e.routeName&&(p||m||g))}}return{skip:!1,shouldUpdate:!1}}function uY(e,t){const n=t.children||[],s=e.filter(a=>!n.some(i=>i===a||a.path&&i.path===a.path||a.id&&i.id===a.id));s.length>0&&(t.children=[...n,...s])}function dY(e,t){let n=qf.get(e);n||(n=new Set,qf.set(e,n)),n.add(t),t.finally(()=>{const s=qf.get(e);s&&s.delete(t)})}function Dv(e,t,n=null,s){e.forEach(i=>{Kn.add(i),_p&&wp(i,Dv)}),t&&uY(e,t);const a=s??fs();if(a){const i=Te(a);if(i.timestamp){On&&W.warn("[React Router] Lazy handler resolved after span ended - skipping update");return}const l=i.op;let u=n;if(!u&&!s&&typeof be<"u"){const d=be.location;d!=null&&d.pathname&&(u={pathname:d.pathname})}u&&(l==="pageload"?Td({activeRootSpan:a,location:{pathname:u.pathname},routes:Array.from(Kn),allRoutes:Array.from(Kn)}):l==="navigation"&&zy(a,u,Array.from(Kn),!1,Gr))}}function zy(e,t,n,s=!1,a){var p;const i=Te(e),l=i.description,u=e==null?void 0:e.__sentry_navigation_name_set__,d=l&&gi(l);if((!u||s||d)&&!i.timestamp){const m=a(n,t),[g,y]=vp(t,n,n,m||[],""),b=(p=i.data)==null?void 0:p[ft];g&&(!l||!u&&(b!=="route"||y==="route")||b!=="route"&&y==="route"||b==="route"&&y==="route"&&d)&&(e.updateName(g),e.setAttribute(ft,y),!gi(g)&&y==="route"&&hn(e,"__sentry_navigation_name_set__",!0))}}function u4(e,t,n,s,a){let i=!1,l=!!a&&Te(a).op==="pageload",u=!1,d=null,h=null;e.subscribe(p=>{if(!i){const g=fs();g&&Te(g).op==="pageload"?l=!0:l&&(p.historyAction==="POP"&&!u?u=!0:i=!0)}if(p.historyAction==="PUSH"||p.historyAction==="POP"&&i){const g=c4(p.location),y=()=>{h!==g&&(h=g,d=null,Fv({location:p.location,routes:t,navigationType:p.historyAction,version:n,basename:s,allRoutes:Array.from(Kn)}))};p.navigation.state!=="idle"?(h!==g&&(h=null),d!==null&&ik(d),d=lY(y)):(d!==null&&(ik(d),d=null),y())}})}function d4(e,t){return!ci||!ui||!di||!Gr?(On&&W.warn(`reactRouterV${t}Instrumentation was unable to wrap the \`createRouter\` function because of one or more missing parameters.`),e):function(n,s){if(Cd(n),_p)for(const d of n)wp(d,Dv);const a=p4(s),i=e(n,a),l=s==null?void 0:s.basename,u=fs();return i.state.historyAction==="POP"&&u&&Td({activeRootSpan:u,location:i.state.location,routes:n,basename:l,allRoutes:Array.from(Kn)}),u4(i,n,t,l,u),i}}function h4(e,t){return!ci||!ui||!di||!Gr?(On&&W.warn(`reactRouterV${t}Instrumentation was unable to wrap the \`createMemoryRouter\` function because of one or more missing parameters.`),e):function(n,s){if(Cd(n),_p)for(const b of n)wp(b,Dv);const a=p4(s,!0),i=e(n,a),l=s==null?void 0:s.basename;let u;const d=s==null?void 0:s.initialEntries,h=s==null?void 0:s.initialIndex,p=d&&d.length===1,m=h!==void 0&&d&&d[h];u=p?d[0]:m?d[h]:void 0;const g=u?typeof u=="string"?{pathname:u}:u:i.state.location,y=fs();return i.state.historyAction==="POP"&&y&&Td({activeRootSpan:y,location:g,routes:n,basename:l,allRoutes:Array.from(Kn)}),u4(i,n,t,l,y),i}}function f4(e,t){const n=$o({...e,instrumentPageLoad:!1,instrumentNavigation:!1}),{useEffect:s,useLocation:a,useNavigationType:i,createRoutesFromChildren:l,matchRoutes:u,stripBasename:d,enableAsyncRouteHandlers:h=!1,instrumentPageLoad:p=!0,instrumentNavigation:m=!0,lazyRouteTimeout:g}=e;return{...n,setup(y){n.setup(y);const b=e.finalTimeout??3e4,w=(e.idleTimeout??1e3)*3,v=g??w;v===1/0?(no=b,On&&W.log("[React Router] lazyRouteTimeout set to Infinity, capping at finalTimeout:",b,"ms to prevent indefinite hangs")):Number.isNaN(v)?(On&&W.warn("[React Router] lazyRouteTimeout must be a number, falling back to default:",w),no=w):v<0?(On&&W.warn("[React Router] lazyRouteTimeout must be non-negative or Infinity, got:",v,"falling back to:",w),no=w):no=v,ci=s,ui=a,di=i,Gr=u,Uf=l,_p=h,JK(u,d||!1)},afterAllSetup(y){var w;n.afterAllSetup(y);const b=(w=be.location)==null?void 0:w.pathname;p&&b&&Ec(y,{name:b,attributes:{[ft]:"url",[_t]:"pageload",[Ge]:`auto.pageload.react.reactrouter_v${t}`}}),m&&l4.add(y)}}}function m4(e,t){if(!ci||!ui||!di||!Gr)return On&&W.warn("reactRouterV6Instrumentation was unable to wrap `useRoutes` because of one or more missing parameters."),e;const n=s=>{const a=C.useRef(!0),{routes:i,locationArg:l}=s,u=e(i,l),d=ui(),h=di(),p=typeof l=="string"||l!=null&&l.pathname?l:d;return ci(()=>{const m=typeof p=="string"?{pathname:p}:p;a.current?(Cd(i),Td({activeRootSpan:fs(),location:m,routes:i,allRoutes:Array.from(Kn)}),a.current=!1):Fv({location:m,routes:i,navigationType:h,version:t,allRoutes:Array.from(Kn)})},[h,p]),u};return(s,a)=>C.createElement(n,{routes:s,locationArg:a})}function p4(e,t=!1){if(!e||!("patchRoutesOnNavigation"in e)||typeof e.patchRoutesOnNavigation!="function")return e||{};const n=e.patchRoutesOnNavigation;return{...e,patchRoutesOnNavigation:async s=>{const a=s==null?void 0:s.path,i=fs();if(!t){const u=s==null?void 0:s.patch;u&&(s.patch=(d,h)=>{Cd(h);const p=fs();return a&&p&&Te(p).op==="navigation"&&zy(p,{pathname:a,search:"",hash:"",state:null,key:"default"},Array.from(Kn),!0,Gr),u(d,h)})}const l=(async()=>{var p;const u=KK(a,i);let d;try{d=await n(s)}finally{YK(u)}const h=fs();if(h&&Te(h).op==="navigation"){const m=t?a:a||((p=be.location)==null?void 0:p.pathname);m&&zy(h,{pathname:m,search:"",hash:"",state:null,key:"default"},Array.from(Kn),!1,Gr)}return d})();return i&&dY(i,l),l}}}function Fv(e){const{location:t,routes:n,navigationType:s,version:a,matches:i,basename:l,allRoutes:u}=e,d=Array.isArray(i)?i:Gr(u||n,t,l),h=ye();if(!h||!l4.has(h))return;const p=fs();if(!(p&&Te(p).op==="pageload"&&s==="POP")&&(s==="PUSH"||s==="POP")&&d){const[m,g]=vp(t,u||n,u||n,d,l),y=c4(t),b=Ji.get(h),w=b&&!b.isPlaceholder?!!Te(b.span).timestamp:!1,{skip:v,shouldUpdate:j}=cY(b,y,m,w);if(v){if(j&&b){const P=b.routeName;b.isPlaceholder?(b.routeName=m,On&&W.log(`[Tracing] Updated placeholder navigation name from "${P}" to "${m}" (will apply to real span)`)):(b.span.updateName(m),b.span.setAttribute(ft,g),hn(b.span,"__sentry_navigation_name_set__",!0),b.routeName=m,On&&W.log(`[Tracing] Updated navigation span name from "${P}" to "${m}"`))}else On&&W.log(`[Tracing] Skipping duplicate navigation for location: ${y}`);return}const k={span:{end:()=>{}},routeName:m,pathname:t.pathname,locationKey:y,isPlaceholder:!0};Ji.set(h,k);let S;try{S=Cc(h,{name:k.routeName,attributes:{[ft]:g,[_t]:"navigation",[Ge]:`auto.navigation.react.reactrouter_v${a}`}})}catch(P){throw Ji.delete(h),P}S?(Ji.set(h,{span:S,routeName:k.routeName,pathname:t.pathname,locationKey:y}),x4(S,t,n,l,u,"navigation")):Ji.delete(h)}}function Cd(e){e.forEach(t=>{g4(t).forEach(s=>{Kn.add(s)})})}function g4(e,t=new Set){return t.has(e)||(t.add(e),e.children&&!e.index&&e.children.forEach(n=>{g4(n,t).forEach(a=>{t.add(a)})})),t}function Td({activeRootSpan:e,location:t,routes:n,matches:s,basename:a,allRoutes:i}){const l=Array.isArray(s)?s:Gr(i||n,t,a);if(l){const[u,d]=vp(t,i||n,i||n,l,a);We().setTransactionName(u||"/"),e&&(e.updateName(u),e.setAttribute(ft,d),x4(e,t,n,a,i,"pageload"))}}function hY(e,t,n,s,a=!1){return n?!!(!e&&a||e&&gi(e)&&s==="route"&&!gi(n)||t!=="route"&&s==="route"):!1}function w0(e,t,n,s,a,i,l,u){var d;try{const h=(d=t.data)==null?void 0:d[ft];if(h==="route"&&n&&!gi(n))return;const p=Array.from(u),m=p.length>0?p:a,g=Gr(m,s,i);if(!g)return;const[y,b]=vp(s,m,m,g,i),w=hY(n,h,y,b,!0),v=l==="pageload"||!t.timestamp;w&&v&&(e.updateName(y),e.setAttribute(ft,b))}catch(h){On&&W.warn(`Error updating span details before ending: ${h}`)}}function x4(e,t,n,s,a,i){const l=`__sentry_${i}_end_patched__`;if((e==null?void 0:e[l])||!e.end)return;const d=a?new Set(a):Kn,h=e.end.bind(e);let p=!1;e.end=function(...g){var S;if(p)return;p=!0;const y=g.length>0?g[0]:Date.now()/1e3,b=Te(e),w=b.description,v=(S=b.data)==null?void 0:S[ft],j=()=>{const P=ye();if(P&&i==="navigation"){const A=Ji.get(P);A&&A.span===e&&Ji.delete(P)}},E=qf.get(e);if(E&&E.size>0&&w&&(gi(w)||v!=="route")){if(no===0){w0(e,b,w,t,n,s,i,d),j(),h(y);return}const P=Promise.allSettled(E).then(()=>{});(no===1/0?P:Promise.race([P,new Promise(T=>setTimeout(T,no))])).then(()=>{const T=Te(e);w0(e,T,T.description,t,n,s,i,d),j(),h(y)}).catch(()=>{j(),h(y)});return}w0(e,b,w,t,n,s,i,d),j(),h(y)},hn(e,l,!0)}function y4(e,t){if(!ci||!ui||!di||!Uf||!Gr)return On&&W.warn(`reactRouterV6Instrumentation was unable to wrap Routes because of one or more missing parameters.
      useEffect: ${ci}. useLocation: ${ui}. useNavigationType: ${di}.
      createRoutesFromChildren: ${Uf}. matchRoutes: ${Gr}.`),e;const n=s=>{const a=C.useRef(!0),i=ui(),l=di();return ci(()=>{const u=Uf(s.children);a.current?(Cd(u),Td({activeRootSpan:fs(),location:i,routes:u,allRoutes:Array.from(Kn)}),a.current=!1):Fv({location:i,routes:u,navigationType:l,version:t,allRoutes:Array.from(Kn)})},[i,l]),C.createElement(e,{...s})};return yp(n,e),n}function fY(e){return f4(e,"6")}function mY(e){return m4(e,"6")}function pY(e){return d4(e,"6")}function gY(e){return h4(e,"6")}function xY(e){return y4(e,"6")}function yY(e){return f4(e,"7")}function bY(e){return y4(e,"7")}function vY(e){return d4(e,"7")}function wY(e){return h4(e,"7")}function _Y(e){return m4(e,"7")}const jY=Object.freeze(Object.defineProperty({__proto__:null,BrowserClient:tT,ErrorBoundary:n4,MULTIPLEXED_TRANSPORT_EXTRA_KEY:Sf,OpenFeatureIntegrationHook:dK,Profiler:Lv,SDK_VERSION:sa,SEMANTIC_ATTRIBUTE_SENTRY_OP:_t,SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN:Ge,SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE:Um,SEMANTIC_ATTRIBUTE_SENTRY_SOURCE:ft,Scope:ms,WINDOW:be,addBreadcrumb:gs,addEventProcessor:LE,addIntegration:hy,breadcrumbsIntegration:kT,browserApiErrorsIntegration:ET,browserProfilingIntegration:oK,browserSessionIntegration:CT,browserTracingIntegration:$o,buildLaunchDarklyFlagUsedHandler:cK,captureConsoleIntegration:g8,captureEvent:wc,captureException:dt,captureFeedback:yC,captureMessage:AE,captureReactException:Mv,captureSession:dy,chromeStackLineParser:wT,close:XL,consoleLoggingIntegration:bC,contextLinesIntegration:Z9,continueTrace:wL,createConsolaReporter:AD,createLangChainCallbackHandler:dU,createReduxEnhancer:DK,createTransport:KE,createUserFeedbackEnvelope:KB,dedupeIntegration:hC,defaultRequestInstrumentationOptions:Pv,defaultStackLineParsers:jT,defaultStackParser:NT,diagnoseSdkConnectivity:gK,endSession:Rb,eventFiltersIntegration:oC,eventFromException:ZC,eventFromMessage:eT,exceptionFromError:sp,extraErrorDataIntegration:S8,featureFlagsIntegration:oD,feedbackAsyncIntegration:Y7,feedbackIntegration:Z1,feedbackSyncIntegration:Z1,flush:QL,forceLoad:I9,functionToStringIntegration:iC,geckoStackLineParser:_T,getActiveSpan:Ht,getClient:ye,getCurrentScope:We,getDefaultIntegrations:MT,getFeedback:a7,getGlobalScope:oa,getIsolationScope:an,getReplay:HG,getRootSpan:Bt,getSpanDescendants:Tu,getSpanStatusFromHttpCode:rE,getTraceData:Fb,globalHandlersIntegration:TT,graphqlClientIntegration:oH,growthbookIntegration:mK,httpClientIntegration:F9,httpContextIntegration:AT,inboundFiltersIntegration:lC,init:Q5,instrumentAnthropicAiClient:zF,instrumentGoogleGenAIClient:rU,instrumentLangGraph:bU,instrumentOpenAiClient:SF,instrumentOutgoingRequests:F5,instrumentSupabaseClient:xC,isEnabled:ME,isInitialized:ZL,lastEventId:OE,launchDarklyIntegration:lK,lazyLoadIntegration:QC,linkedErrorsIntegration:OT,logger:_D,makeBrowserOfflineTransport:OV,makeFetchTransport:fv,makeMultiplexedTransport:q$,metrics:ID,moduleMetadataIntegration:h8,onLoad:P9,openFeatureIntegration:uK,opera10StackLineParser:zB,opera11StackLineParser:VB,parameterize:sC,reactErrorHandler:NK,reactRouterV3BrowserTracingIntegration:FK,reactRouterV4BrowserTracingIntegration:BK,reactRouterV5BrowserTracingIntegration:HK,reactRouterV6BrowserTracingIntegration:fY,reactRouterV7BrowserTracingIntegration:yY,registerSpanErrorInstrumentation:wE,registerWebWorker:vK,replayCanvasIntegration:lV,replayIntegration:I5,reportPageLoaded:kV,reportingObserverIntegration:L9,rewriteFramesIntegration:A8,sendFeedback:$C,setActiveSpanInBrowser:EV,setContext:Tb,setCurrentClient:eC,setExtra:VL,setExtras:GL,setHttpStatus:Wu,setMeasurement:kE,setTag:YL,setTags:KL,setUser:JL,showReportDialog:Iy,spanToBaggageHeader:XM,spanToJSON:Te,spanToTraceHeader:xE,spotlightBrowserIntegration:k9,startBrowserTracingNavigationSpan:Cc,startBrowserTracingPageLoadSpan:Ec,startInactiveSpan:zr,startNewTrace:CE,startSession:uy,startSpan:Ms,startSpanManual:ta,statsigIntegration:pK,supabaseIntegration:G8,suppressTracing:EE,tanstackRouterBrowserTracingIntegration:qK,thirdPartyErrorFilterIntegration:nD,uiProfiler:SB,unleashIntegration:hK,updateSpanName:YM,useProfiler:PK,webWorkerIntegration:yK,winjsStackLineParser:qB,withActiveSpan:wo,withErrorBoundary:OK,withIsolationScope:NM,withProfiler:IK,withScope:hr,withSentryReactRouterV6Routing:xY,withSentryReactRouterV7Routing:bY,withSentryRouting:WK,wrapCreateBrowserRouterV6:pY,wrapCreateBrowserRouterV7:vY,wrapCreateMemoryRouterV6:gY,wrapCreateMemoryRouterV7:wY,wrapUseRoutesV6:mY,wrapUseRoutesV7:_Y,zodErrorsIntegration:tD},Symbol.toStringTag,{value:"Module"}));function NY(){const e="https://9510dc570d99c3c8c341b7eede7cb2f2@o4510618335903744.ingest.us.sentry.io/4510620242935808";console.log("Initializing Sentry with DSN:",e.substring(0,20)+"..."),Q5({dsn:e,release:"1.0.0",environment:"production",sendDefaultPii:!0,debug:!1,enableLogs:!0,integrations:[$o(),I5({maskAllText:!0,blockAllMedia:!0,unblock:[".error-message","[data-sentry-unmask]"],block:['input[type="password"]','input[type="email"]',".sensitive"]}),bC({levels:["log","error","warn"]})],tracesSampleRate:.1,replaysSessionSampleRate:.1,replaysOnErrorSampleRate:1}),console.log("Sentry initialized successfully"),window.addEventListener("unhandledrejection",t=>{console.error("Unhandled promise rejection:",t.reason),dt(t.reason,{tags:{type:"unhandled-rejection"}})}),window.addEventListener("error",t=>{console.error("Global error:",t.error),dt(t.error||new Error(t.message),{tags:{type:"global-error"},contexts:{error:{filename:t.filename,lineno:t.lineno,colno:t.colno}}})})}const Kt={count:(e,t=1,n)=>{try{console.debug(`[Metric] count: ${e} = ${t}`)}catch{}},gauge:(e,t,n)=>{try{console.debug(`[Metric] gauge: ${e} = ${t}`)}catch{}},distribution:(e,t,n)=>{try{console.debug(`[Metric] distribution: ${e} = ${t}`)}catch{}},set:(e,t,n)=>{try{console.debug(`[Metric] set: ${e} = ${t}`)}catch{}},timing:async(e,t,n)=>{const s=performance.now();try{const a=await t(),i=performance.now()-s;return Kt.distribution(e,i,{...n,status:"success"}),a}catch(a){const i=performance.now()-s;throw Kt.distribution(e,i,{...n,status:"error"}),a}}},b4=C.createContext(null);function SY({children:e}){const[t,n]=C.useState(null),[s,a]=C.useState(null),[i,l]=C.useState(null),[u,d]=C.useState(!0),h=async(j,E=2)=>{for(let k=0;k<E;k++){const{data:S,error:P}=await G.from("users").select("id, email, display_name, role, phone, phone_verified, avatar_url, profile_setup_complete").eq("id",j).single();if(!P&&S)return S;const A=(P==null?void 0:P.code)==="PGRST116"||(P==null?void 0:P.status)===406;if(A&&k<E-1){const T=Math.min(150*(k+1),500);await new Promise(L=>setTimeout(L,T));continue}return A||console.error("Error fetching profile:",P),null}return null},p=async()=>{if(t!=null&&t.id){const j=await h(t.id);a(j)}};C.useEffect(()=>{(async()=>{try{const k=G.auth.getSession(),S=new Promise(A=>setTimeout(()=>A({data:{session:null},error:null}),5e3)),{data:{session:P}}=await Promise.race([k,S]);if(window.location.hash.includes("access_token")&&window.history.replaceState(null,"",window.location.pathname+window.location.search),P){const{data:{user:A},error:T}=await G.auth.getUser();if(T||!A){console.warn("Session invalid, clearing auth state:",T==null?void 0:T.message),await G.auth.signOut(),l(null),n(null),a(null),d(!1);return}if(l(P),n(P.user??null),P.user)try{const H=window.location.hash.includes("access_token")?5:2,R=await h(P.user.id,H);a(R)}catch(L){console.error("Failed to fetch profile:",L)}}else l(null),n(null),a(null);d(!1)}catch(k){console.error("Failed to initialize auth:",k),l(null),n(null),a(null),d(!1)}})();const{data:{subscription:E}}=G.auth.onAuthStateChange(async(k,S)=>{if(k==="SIGNED_IN"&&window.location.hash.includes("access_token")&&window.history.replaceState(null,"",window.location.pathname+window.location.search),l(S),n((S==null?void 0:S.user)??null),S!=null&&S.user){const A=k==="SIGNED_IN"||k==="TOKEN_REFRESHED"?5:2,T=await h(S.user.id,A);a(T)}else a(null)});return()=>E.unsubscribe()},[]),C.useEffect(()=>{const j=async()=>{const{data:{session:E}}=await G.auth.getSession();if(E){if(l(E),n(E.user??null),E.user){const k=await h(E.user.id);a(k)}}else l(null),n(null),a(null)};return window.addEventListener("popstate",j),()=>window.removeEventListener("popstate",j)},[]);const m=async(j,E)=>{const k=performance.now();try{const{error:S}=await G.auth.signInWithPassword({email:j,password:E});if(S)throw Kt.count("auth_signin",1,{method:"password",status:"error"}),S;Kt.count("auth_signin",1,{method:"password",status:"success"}),Kt.distribution("auth_signin_time",performance.now()-k,{method:"password"})}catch(S){throw Kt.count("auth_signin",1,{method:"password",status:"error"}),S}},g=async(j,E,k,S)=>{const P=performance.now();try{const{data:A,error:T}=await G.auth.signUp({email:j,password:E,options:{data:{display_name:k,phone:S==null?void 0:S.phone,hometown:S==null?void 0:S.hometown,favorite_castaway:S==null?void 0:S.favorite_castaway}}});if(T)throw Kt.count("auth_signup",1,{status:"error"}),T;if(A.user&&(S!=null&&S.phone||S!=null&&S.hometown||S!=null&&S.favorite_castaway)){const L={};S!=null&&S.phone&&(L.phone=S.phone),S!=null&&S.hometown&&(L.hometown=S.hometown),S!=null&&S.favorite_castaway&&(L.favorite_castaway=S.favorite_castaway),await G.from("users").update(L).eq("id",A.user.id)}Kt.count("auth_signup",1,{status:"success"}),Kt.distribution("auth_signup_time",performance.now()-P)}catch(A){throw Kt.count("auth_signup",1,{status:"error"}),A}},y=async j=>{try{const{error:E}=await G.auth.signInWithOtp({email:j,options:{emailRedirectTo:`${window.location.origin}/profile/setup`}});if(E)throw Kt.count("auth_signin",1,{method:"magic_link",status:"error"}),E;Kt.count("auth_signin",1,{method:"magic_link",status:"success"})}catch(E){throw Kt.count("auth_signin",1,{method:"magic_link",status:"error"}),E}},b=async()=>{try{const{error:j}=await G.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/profile/setup`}});if(j)throw Kt.count("auth_signin",1,{method:"google",status:"error"}),j;Kt.count("auth_signin",1,{method:"google",status:"initiated"})}catch(j){throw Kt.count("auth_signin",1,{method:"google",status:"error"}),j}},w=async()=>{n(null),a(null),l(null);const{error:j}=await G.auth.signOut();j?(console.error("Supabase signOut error:",j),Kt.count("auth_signout",1,{status:"error"})):Kt.count("auth_signout",1,{status:"success"})},v=(s==null?void 0:s.role)==="admin";return r.jsx(b4.Provider,{value:{user:t,profile:s,session:i,loading:u,isAdmin:v,signIn:m,signUp:g,signInWithMagicLink:y,signInWithGoogle:b,signOut:w,refreshProfile:p},children:e})}function yt(){const e=C.useContext(b4);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e}/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kY=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),EY=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,s)=>s?s.toUpperCase():n.toLowerCase()),lk=e=>{const t=EY(e);return t.charAt(0).toUpperCase()+t.slice(1)},v4=(...e)=>e.filter((t,n,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===n).join(" ").trim(),CY=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var TY={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RY=C.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:a="",children:i,iconNode:l,...u},d)=>C.createElement("svg",{ref:d,...TY,width:t,height:t,stroke:e,strokeWidth:s?Number(n)*24/Number(t):n,className:v4("lucide",a),...!i&&!CY(u)&&{"aria-hidden":"true"},...u},[...l.map(([h,p])=>C.createElement(h,p)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=(e,t)=>{const n=C.forwardRef(({className:s,...a},i)=>C.createElement(RY,{ref:i,iconNode:t,className:v4(`lucide-${kY(lk(e))}`,`lucide-${e}`,s),...a}));return n.displayName=lk(e),n};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IY=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],at=ce("arrow-left",IY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PY=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],AY=ce("arrow-right-left",PY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OY=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Sr=ce("arrow-right",OY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MY=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Uv=ce("award",MY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LY=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Rs=ce("bell",LY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $Y=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Rd=ce("book-open",$Y);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DY=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],FY=ce("brain",DY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UY=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],qY=ce("briefcase",UY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BY=[["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z",key:"uouzyp"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M21 21a4 4 0 0 0-3.81-4",key:"1b0z45"}],["path",{d:"M21 5a4 4 0 0 1-3.55 3.97",key:"5cxbf6"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M3 21a4 4 0 0 1 3.81-4",key:"1fjd4g"}],["path",{d:"M3 5a4 4 0 0 0 3.55 3.97",key:"1d7oge"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M9 7.13V6a3 3 0 1 1 6 0v1.13",key:"1vgav8"}]],HY=ce("bug",BY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zY=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],ur=ce("calendar",zY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WY=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],GY=ce("camera",WY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VY=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],KY=ce("chart-column",VY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YY=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Rt=ce("check",YY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JY=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],xn=ce("chevron-down",JY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QY=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],XY=ce("chevron-left",QY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZY=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],kr=ce("chevron-right",ZY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eJ=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],qr=ce("chevron-up",eJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tJ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ot=ce("circle-alert",tJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nJ=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],At=ce("circle-check-big",nJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rJ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],jp=ce("circle-check",rJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sJ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],aJ=ce("circle-question-mark",sJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iJ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],oJ=ce("circle-user",iJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lJ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],xi=ce("circle-x",lJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cJ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],uJ=ce("circle",cJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dJ=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Ln=ce("clock",dJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hJ=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Np=ce("copy",hJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fJ=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Wy=ce("credit-card",fJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mJ=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],$n=ce("crown",mJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pJ=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],To=ce("dollar-sign",pJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gJ=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],xJ=ce("ellipsis-vertical",gJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yJ=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],bJ=ce("external-link",yJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vJ=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],km=ce("eye-off",vJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wJ=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Em=ce("eye",wJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _J=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],jJ=ce("facebook",_J);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NJ=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Sp=ce("file-text",NJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SJ=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],Mn=ce("flame",SJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kJ=[["path",{d:"M10.5 3 8 9l4 13 4-13-2.5-6",key:"b3dvk1"}],["path",{d:"M17 3a2 2 0 0 1 1.6.8l3 4a2 2 0 0 1 .013 2.382l-7.99 10.986a2 2 0 0 1-3.247 0l-7.99-10.986A2 2 0 0 1 2.4 7.8l2.998-3.997A2 2 0 0 1 7 3z",key:"7w4byz"}],["path",{d:"M2 9h20",key:"16fsjt"}]],EJ=ce("gem",kJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CJ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],yi=ce("globe",CJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TJ=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],w4=ce("grid-3x3",TJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RJ=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],qv=ce("grip-vertical",RJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IJ=[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]],PJ=ce("handshake",IJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AJ=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],kp=ce("heart",AJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OJ=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],Zu=ce("history",OJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MJ=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],_4=ce("house",MJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LJ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Ep=ce("info",LJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $J=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],Ol=ce("lightbulb",$J);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DJ=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],FJ=ce("link-2",DJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UJ=[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}]],qJ=ce("list-checks",UJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BJ=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],HJ=ce("list",BJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zJ=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],ge=ce("loader-circle",zJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WJ=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Dn=ce("lock",WJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GJ=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],VJ=ce("log-in",GJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KJ=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],YJ=ce("log-out",KJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JJ=[["path",{d:"M21.2 8.4c.5.38.8.97.8 1.6v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V10a2 2 0 0 1 .8-1.6l8-6a2 2 0 0 1 2.4 0l8 6Z",key:"1jhwl8"}],["path",{d:"m22 10-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 10",key:"1qfld7"}]],QJ=ce("mail-open",JJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XJ=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],xs=ce("mail",XJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZJ=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Bv=ce("map-pin",ZJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eQ=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],lr=ce("medal",eQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tQ=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],fc=ce("megaphone",tQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nQ=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],_0=ce("menu",nQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rQ=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],Ro=ce("message-circle",rQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sQ=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Cm=ce("message-square",sQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aQ=[["path",{d:"M5 12h14",key:"1ays0h"}]],Cp=ce("minus",aQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iQ=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Tp=ce("pen",iQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oQ=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],j4=ce("pencil",oQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lQ=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],ed=ce("phone",lQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cQ=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],N4=ce("play",cQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uQ=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Io=ce("plus",uQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dQ=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],ck=ce("qr-code",dQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hQ=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],ga=ce("refresh-cw",hQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fQ=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],mQ=ce("rotate-ccw",fQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pQ=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],bi=ce("save",pQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gQ=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Ei=ce("search",gQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xQ=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Rp=ce("send",xQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yQ=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ip=ce("settings",yQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bQ=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],Pp=ce("share-2",bQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vQ=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],uk=ce("shield-alert",vQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wQ=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],dk=ce("shield-check",wQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _Q=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],vi=ce("shield",_Q);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jQ=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],NQ=ce("shuffle",jQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SQ=[["path",{d:"m12.5 17-.5-1-.5 1h1z",key:"3me087"}],["path",{d:"M15 22a1 1 0 0 0 1-1v-1a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20v1a1 1 0 0 0 1 1z",key:"1o5pge"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}]],Gy=ce("skull",SQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kQ=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],td=ce("smartphone",kQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EQ=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],S4=ce("sparkles",EQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CQ=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Yn=ce("star",CQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TQ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],wa=ce("target",TQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RQ=[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],IQ=ce("toggle-left",RQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PQ=[["circle",{cx:"15",cy:"12",r:"3",key:"1afu0r"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],AQ=ce("toggle-right",PQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OQ=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Id=ce("trash-2",OQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MQ=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],Hv=ce("trending-down",MQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LQ=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Do=ce("trending-up",LQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $Q=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],dr=ce("triangle-alert",$Q);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DQ=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],rt=ce("trophy",DQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FQ=[["path",{d:"m17 2-5 5-5-5",key:"16satq"}],["rect",{width:"20",height:"15",x:"2",y:"7",rx:"2",key:"1e6viu"}]],Tm=ce("tv",FQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UQ=[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]],qQ=ce("twitter",UQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BQ=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],HQ=ce("user-minus",BQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zQ=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Ap=ce("user",zQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WQ=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Ye=ce("users",WQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GQ=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Sn=ce("x",GQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VQ=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Tc=ce("zap",VQ);function de(){var E,k;const e=ys(),{user:t,signOut:n}=yt(),[s,a]=C.useState(!1),[i,l]=C.useState(!1),u=C.useRef(null),d=C.useRef(null),[h,p]=C.useState(()=>typeof window<"u"&&localStorage.getItem("adminViewMode")||"admin");C.useEffect(()=>{localStorage.setItem("adminViewMode",h)},[h]),C.useEffect(()=>{a(!1)},[e.pathname]),C.useEffect(()=>{const S=P=>{u.current&&!u.current.contains(P.target)&&a(!1),d.current&&!d.current.contains(P.target)&&l(!1)};return(s||i)&&document.addEventListener("mousedown",S),()=>document.removeEventListener("mousedown",S)},[s,i]);const m=async()=>{try{localStorage.removeItem("adminViewMode"),a(!1),await n()}catch(S){console.error("Sign out failed:",S),window.location.href="/"}},{data:g}=se({queryKey:["profile",t==null?void 0:t.id],queryFn:async()=>{if(!(t!=null&&t.id))return null;const{data:S,error:P}=await G.from("users").select("id, display_name, role, avatar_url").eq("id",t.id).single();if(P)throw P;return S},enabled:!!(t!=null&&t.id)}),y=(g==null?void 0:g.display_name)||((E=t==null?void 0:t.user_metadata)==null?void 0:E.display_name)||((k=t==null?void 0:t.email)==null?void 0:k.split("@")[0])||"",b=S=>{if(!S)return"";const P=S.trim().split(" ").filter(Boolean);return P.length===0?"":P.length===1?P[0].charAt(0).toUpperCase():P[0].charAt(0).toUpperCase()+P[P.length-1].charAt(0).toUpperCase()},w=S=>S==="/"?e.pathname==="/":e.pathname.startsWith(S),v=(g==null?void 0:g.role)==="admin";return t&&(v&&h==="admin")?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"bg-gradient-to-r from-orange-500 via-amber-500 to-orange-400 text-white py-3 px-4 sticky top-0 z-[60]",children:r.jsxs("div",{className:"max-w-6xl mx-auto flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"flex items-center gap-2 bg-white/20 px-3 py-1 rounded-full",children:[r.jsx(vi,{className:"h-4 w-4"}),r.jsx("span",{className:"font-bold text-sm tracking-wide",children:"ADMIN CONTROL PANEL"})]}),r.jsx("span",{className:"text-white/80 text-sm hidden sm:inline",children:"Full system access enabled"})]}),r.jsxs("button",{onClick:()=>p("player"),className:"flex items-center gap-2 bg-white text-orange-600 px-4 py-1.5 rounded-full font-semibold text-sm hover:bg-orange-50 transition-colors",children:[r.jsx(oJ,{className:"h-4 w-4"}),"Switch to Player View"]})]})}),r.jsx("nav",{className:"bg-cream-50 border-b-4 border-orange-400 shadow-lg sticky top-[52px] z-50",children:r.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"flex items-center justify-between h-14",children:[r.jsxs(Y,{to:"/admin",className:"flex items-center gap-3",children:[r.jsx("img",{src:"/logo.png",alt:"RGFL",className:"h-8 w-auto"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-neutral-800 font-bold",children:"RGFL"}),r.jsx("span",{className:"bg-orange-500 text-white text-xs font-bold px-2 py-0.5 rounded",children:"ADMIN"})]})]}),r.jsx("div",{className:"hidden md:flex items-center gap-1",children:[{path:"/admin/seasons",label:"Seasons"},{path:"/admin/leagues",label:"Leagues"},{path:"/admin/users",label:"Users"},{path:"/admin/payments",label:"Payments"},{path:"/admin/scoring-rules",label:"Scoring"},{path:"/admin/jobs",label:"Jobs"}].map(S=>r.jsx(Y,{to:S.path,className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors ${w(S.path)?"bg-orange-500 text-white":"text-neutral-600 hover:text-orange-600 hover:bg-orange-50"}`,children:S.label},S.path))}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{onClick:()=>a(!s),className:"md:hidden p-2 text-neutral-600 hover:text-orange-600","aria-label":s?"Close menu":"Open menu","aria-expanded":s,children:s?r.jsx(Sn,{className:"h-6 w-6"}):r.jsx(_0,{className:"h-6 w-6"})}),r.jsxs("div",{className:"text-right hidden sm:block",children:[r.jsx("p",{className:"text-neutral-800 text-sm font-medium",children:y||"Admin"}),r.jsx("p",{className:"text-orange-600 text-xs font-semibold",children:"Administrator"})]}),r.jsx("button",{onClick:m,className:"text-neutral-500 hover:text-neutral-800 text-sm hidden sm:block",children:"Sign out"})]})]}),s&&r.jsxs("div",{ref:u,className:"md:hidden border-t border-orange-200 py-2",children:[[{path:"/admin/seasons",label:"Seasons"},{path:"/admin/leagues",label:"Leagues"},{path:"/admin/users",label:"Users"},{path:"/admin/payments",label:"Payments"},{path:"/admin/scoring-rules",label:"Scoring"},{path:"/admin/jobs",label:"Jobs"}].map(S=>r.jsx(Y,{to:S.path,className:`block px-4 py-3 text-sm font-medium ${w(S.path)?"bg-orange-500 text-white":"text-neutral-600 hover:bg-orange-50"}`,children:S.label},S.path)),r.jsx("hr",{className:"my-2 border-orange-200"}),r.jsx("button",{onClick:m,className:"w-full text-left px-4 py-3 text-sm text-red-600 hover:bg-red-50",children:"Sign out"})]})]})})]}):t?r.jsx("nav",{className:"bg-white rounded-b-2xl shadow-lg border border-cream-200 sticky top-0 z-50",children:r.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"flex items-center justify-between h-14",children:[r.jsxs(Y,{to:"/dashboard",className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-8 h-8 bg-burgundy-500 rounded-lg flex items-center justify-center",children:r.jsx("img",{src:"/logo.png",alt:"RGFL",className:"h-5 w-auto"})}),r.jsx("span",{className:"font-display text-xl text-burgundy-500 hidden sm:inline",children:"SURVIVOR FL"})]}),r.jsxs("div",{className:"hidden lg:flex items-center gap-0.5",children:[r.jsx(Y,{to:"/dashboard",className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${w("/dashboard")?"text-burgundy-600 bg-burgundy-50":"text-neutral-700 hover:bg-cream-100"}`,children:"Dashboard"}),r.jsx(Y,{to:"/leagues",className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${w("/leagues")&&!e.pathname.includes("/create")?"text-burgundy-600 bg-burgundy-50":"text-neutral-700 hover:bg-cream-100"}`,children:"Leagues"}),r.jsx(Y,{to:"/castaways",className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${w("/castaways")?"text-burgundy-600 bg-burgundy-50":"text-neutral-700 hover:bg-cream-100"}`,children:"Castaways"}),r.jsx(Y,{to:"/leaderboard",className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${w("/leaderboard")?"text-burgundy-600 bg-burgundy-50":"text-neutral-700 hover:bg-cream-100"}`,children:"Leaderboard"}),r.jsxs("div",{className:"relative",ref:d,children:[r.jsxs("button",{onClick:()=>l(!i),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors flex items-center gap-1 ${w("/how-to-play")||w("/scoring")||w("/timeline")?"text-burgundy-600 bg-burgundy-50":"text-neutral-700 hover:bg-cream-100"}`,children:["How to Play",r.jsx(xn,{className:`h-3 w-3 transition-transform ${i?"rotate-180":""}`})]}),i&&r.jsxs("div",{className:"absolute top-full left-0 mt-1 bg-white rounded-lg shadow-lg border border-cream-200 min-w-[200px] z-50",children:[r.jsx(Y,{to:"/how-to-play",onClick:()=>l(!1),className:`block px-4 py-2 text-sm hover:bg-burgundy-50 rounded-t-lg ${w("/how-to-play")&&!w("/scoring")&&!w("/timeline")?"text-burgundy-600 bg-burgundy-50":"text-neutral-600"}`,children:"How to Play"}),r.jsx(Y,{to:"/scoring-rules",onClick:()=>l(!1),className:`block px-4 py-2 text-sm hover:bg-burgundy-50 ${w("/scoring")||w("/scoring-rules")?"text-burgundy-600 bg-burgundy-50":"text-neutral-600"}`,children:"Scoring Rules"}),r.jsx(Y,{to:"/timeline",onClick:()=>l(!1),className:`block px-4 py-2 text-sm hover:bg-burgundy-50 rounded-b-lg ${w("/timeline")?"text-burgundy-600 bg-burgundy-50":"text-neutral-600"}`,children:"Weekly Timeline"})]})]}),r.jsxs(Y,{to:"/trivia",className:"trivia-pulse ml-1.5 px-3 py-1.5 bg-gradient-to-r from-purple-500 to-indigo-500 text-white font-bold rounded-lg text-sm flex items-center gap-1.5 hover:from-purple-600 hover:to-indigo-600 transition-all shadow-lg",children:[r.jsx(Ol,{className:"w-4 h-4"}),"Trivia",r.jsx("span",{className:"bg-white/20 px-1 py-0.5 rounded text-[10px]",children:"NEW"})]})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{onClick:()=>a(!s),className:"lg:hidden p-2 text-neutral-600 hover:text-burgundy-600","aria-label":s?"Close menu":"Open menu","aria-expanded":s,children:s?r.jsx(Sn,{className:"h-6 w-6"}):r.jsx(_0,{className:"h-6 w-6"})}),r.jsx(Y,{to:"/profile/notifications",className:"relative p-1.5 text-neutral-500 hover:text-neutral-700 hidden md:block",title:"Notification Settings",children:r.jsx(Rs,{className:"w-5 h-5"})}),v&&r.jsxs("button",{onClick:()=>p("admin"),className:"hidden sm:flex items-center gap-1 text-xs font-semibold text-orange-600 bg-orange-50 border border-orange-200 px-3 py-1.5 rounded-lg hover:bg-orange-100 transition-colors",children:[r.jsx(vi,{className:"h-3 w-3"}),"Admin"]}),r.jsxs("div",{className:"relative group hidden md:flex items-center gap-1.5 pl-3 border-l border-cream-200",children:[r.jsxs("button",{className:"flex items-center gap-1.5 p-0.5 text-neutral-600 hover:text-neutral-800 transition-all","aria-haspopup":"true",children:[r.jsx("div",{className:"w-7 h-7 bg-burgundy-500 rounded-full flex items-center justify-center text-white text-xs font-bold overflow-hidden",children:g!=null&&g.avatar_url?r.jsx("img",{src:g.avatar_url,alt:y,className:"w-full h-full object-cover"}):b(y)||"?"}),r.jsx("span",{className:"text-neutral-700 text-sm font-medium hidden xl:inline",children:(y==null?void 0:y.split(" ")[0])||"Player"}),r.jsx(xn,{className:"w-3 h-3 text-neutral-400"})]}),r.jsxs("div",{className:"absolute right-0 top-full mt-2 w-56 bg-white rounded-xl shadow-float border border-cream-100 opacity-0 invisible group-hover:opacity-100 group-hover:visible group-focus-within:opacity-100 group-focus-within:visible transition-all",role:"menu",children:[r.jsxs("div",{className:"p-4 border-b border-cream-100",children:[r.jsx("p",{className:"font-semibold text-neutral-800",children:y||"Survivor"}),r.jsx("p",{className:"text-sm text-neutral-400",children:"Fantasy Player"})]}),r.jsxs("div",{className:"p-2",children:[r.jsx(Y,{to:"/profile",className:"block px-3 py-2 text-sm text-neutral-600 hover:bg-burgundy-50 rounded-lg focus:bg-burgundy-50 focus:outline-none",role:"menuitem",children:"Profile Settings"}),r.jsx(Y,{to:"/profile/notifications",className:"block px-3 py-2 text-sm text-neutral-600 hover:bg-burgundy-50 rounded-lg focus:bg-burgundy-50 focus:outline-none",role:"menuitem",children:"Notifications"}),r.jsx(Y,{to:"/profile/payments",className:"block px-3 py-2 text-sm text-neutral-600 hover:bg-burgundy-50 rounded-lg focus:bg-burgundy-50 focus:outline-none",role:"menuitem",children:"Payment History"}),r.jsx("hr",{className:"my-2 border-cream-100"}),r.jsx("button",{onClick:m,className:"w-full text-left px-3 py-2 text-sm text-red-600 hover:bg-red-50 rounded-lg focus:bg-red-50 focus:outline-none",role:"menuitem",children:"Sign out"})]})]})]})]})]}),s&&r.jsxs("div",{ref:u,className:"lg:hidden border-t border-cream-200 py-2 bg-white rounded-b-2xl",children:[r.jsxs("div",{className:"px-4 py-3 border-b border-cream-100",children:[r.jsx("p",{className:"font-semibold text-neutral-800",children:y||"Survivor"}),r.jsx("p",{className:"text-sm text-neutral-400",children:"Fantasy Player"})]}),r.jsxs(Y,{to:"/trivia",onClick:()=>a(!1),className:"mx-4 mt-3 mb-2 px-4 py-3 bg-gradient-to-r from-purple-500 to-indigo-500 text-white font-bold rounded-xl flex items-center justify-center gap-2",children:[r.jsx(Ol,{className:"w-5 h-5"}),"Play Trivia",r.jsx("span",{className:"bg-white/20 px-2 py-0.5 rounded text-xs",children:"NEW"})]}),r.jsx(Y,{to:"/dashboard",className:`block px-4 py-3 text-sm font-semibold ${w("/dashboard")?"text-burgundy-600 bg-burgundy-50":"text-neutral-600"}`,children:"Dashboard"}),r.jsx(Y,{to:"/leagues",className:`block px-4 py-3 text-sm font-semibold ${w("/leagues")?"text-burgundy-600 bg-burgundy-50":"text-neutral-600"}`,children:"Leagues"}),r.jsx(Y,{to:"/castaways",className:`block px-4 py-3 text-sm font-semibold ${w("/castaways")?"text-burgundy-600 bg-burgundy-50":"text-neutral-600"}`,children:"Castaways"}),r.jsx(Y,{to:"/leaderboard",className:`block px-4 py-3 text-sm font-semibold ${w("/leaderboard")?"text-burgundy-600 bg-burgundy-50":"text-neutral-600"}`,children:"Leaderboard"}),r.jsxs("div",{children:[r.jsx("div",{className:"px-4 py-2 text-sm font-semibold text-neutral-800",children:"How to Play"}),r.jsx(Y,{to:"/how-to-play",className:`block px-8 py-2 text-sm ${w("/how-to-play")&&!w("/scoring")&&!w("/timeline")?"text-burgundy-600 bg-burgundy-50":"text-neutral-600"}`,children:"Overview"}),r.jsx(Y,{to:"/scoring-rules",className:`block px-8 py-2 text-sm ${w("/scoring")||w("/scoring-rules")?"text-burgundy-600 bg-burgundy-50":"text-neutral-600"}`,children:"Scoring Rules"}),r.jsx(Y,{to:"/timeline",className:`block px-8 py-2 text-sm ${w("/timeline")?"text-burgundy-600 bg-burgundy-50":"text-neutral-600"}`,children:"Weekly Timeline"})]}),r.jsx("hr",{className:"my-2 border-cream-100"}),r.jsx(Y,{to:"/profile",className:"block px-4 py-3 text-sm text-neutral-600",children:"Profile Settings"}),r.jsx(Y,{to:"/profile/notifications",className:"block px-4 py-3 text-sm text-neutral-600",children:"Notifications"}),v&&r.jsx("button",{onClick:()=>{p("admin"),a(!1)},className:"w-full text-left px-4 py-3 text-sm text-orange-600 font-semibold",children:"Switch to Admin View"}),r.jsx("hr",{className:"my-2 border-cream-100"}),r.jsx("button",{onClick:m,className:"w-full text-left px-4 py-3 text-sm text-red-600",children:"Sign out"})]})]})}):r.jsx("nav",{className:"bg-white border-b-2 border-burgundy-500 shadow-sm sticky top-0 z-50",children:r.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"flex items-center justify-between h-16",children:[r.jsx(Y,{to:"/",className:"flex items-center gap-2",children:r.jsx("img",{src:"/logo.png",alt:"RGFL",className:"h-10 w-auto"})}),r.jsxs("div",{className:"hidden md:flex items-center",children:[r.jsx(Y,{to:"/",className:`px-4 py-2 text-sm font-semibold tracking-wide uppercase transition-all ${e.pathname==="/"?"text-burgundy-600":"text-neutral-600 hover:text-burgundy-600 hover:bg-burgundy-50"}`,children:"Home"}),r.jsx("span",{className:"text-burgundy-300 mx-1",children:"|"}),r.jsx(Y,{to:"/how-to-play",className:`px-4 py-2 text-sm font-semibold tracking-wide uppercase transition-all ${w("/how-to-play")?"text-burgundy-600":"text-neutral-600 hover:text-burgundy-600 hover:bg-burgundy-50"}`,children:"How to Play"}),r.jsx("span",{className:"text-burgundy-300 mx-1",children:"|"}),r.jsx(Y,{to:"/scoring-rules",className:`px-4 py-2 text-sm font-semibold tracking-wide uppercase transition-all ${w("/scoring-rules")||w("/scoring")?"text-burgundy-600":"text-neutral-600 hover:text-burgundy-600 hover:bg-burgundy-50"}`,children:"Scoring Rules"}),r.jsx("span",{className:"text-burgundy-300 mx-1",children:"|"}),r.jsx(Y,{to:"/contact",className:`px-4 py-2 text-sm font-semibold tracking-wide uppercase transition-all ${w("/contact")?"text-burgundy-600":"text-neutral-600 hover:text-burgundy-600 hover:bg-burgundy-50"}`,children:"Contact"})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{onClick:()=>a(!s),className:"md:hidden p-2 text-neutral-600 hover:text-burgundy-600","aria-label":s?"Close menu":"Open menu","aria-expanded":s,children:s?r.jsx(Sn,{className:"h-6 w-6"}):r.jsx(_0,{className:"h-6 w-6"})}),r.jsx(Y,{to:"/login",className:"hidden sm:block text-neutral-600 hover:text-burgundy-600 font-semibold text-sm uppercase tracking-wide",children:"Login"}),r.jsx(Y,{to:"/signup",className:"btn btn-primary shadow-elevated",children:"Sign Up Free"})]})]}),s&&r.jsxs("div",{ref:u,className:"md:hidden border-t border-burgundy-100 py-2 bg-white",children:[r.jsx(Y,{to:"/",className:`block px-4 py-3 text-sm font-semibold ${e.pathname==="/"?"text-burgundy-600 bg-burgundy-50":"text-neutral-600"}`,children:"Home"}),r.jsx(Y,{to:"/how-to-play",className:`block px-4 py-3 text-sm font-semibold ${w("/how-to-play")?"text-burgundy-600 bg-burgundy-50":"text-neutral-600"}`,children:"How to Play"}),r.jsx(Y,{to:"/scoring-rules",className:`block px-4 py-3 text-sm font-semibold ${w("/scoring-rules")||w("/scoring")?"text-burgundy-600 bg-burgundy-50":"text-neutral-600"}`,children:"Scoring Rules"}),r.jsx(Y,{to:"/contact",className:`block px-4 py-3 text-sm font-semibold ${w("/contact")?"text-burgundy-600 bg-burgundy-50":"text-neutral-600"}`,children:"Contact"}),r.jsx("hr",{className:"my-2 border-cream-100"}),r.jsx(Y,{to:"/login",className:"block px-4 py-3 text-sm font-semibold text-neutral-600",children:"Login"})]})]})})}function Qt(){const e=new Date().getFullYear();return r.jsx("footer",{className:"bg-neutral-900 text-white mt-auto",children:r.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[r.jsxs("div",{className:"grid md:grid-cols-4 gap-8",children:[r.jsxs("div",{className:"md:col-span-1",children:[r.jsx(Y,{to:"/",className:"flex items-center gap-2 mb-4",children:r.jsx("img",{src:"/logo.png",alt:"RGFL",className:"h-10 w-auto"})}),r.jsx("p",{className:"text-neutral-400 text-sm",children:"Fantasy Survivor for people who actually watch Survivor."})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-display font-bold text-sm uppercase tracking-wider text-neutral-400 mb-4",children:"Play"}),r.jsxs("ul",{className:"space-y-2",children:[r.jsx("li",{children:r.jsx(Y,{to:"/how-to-play",className:"text-neutral-300 hover:text-burgundy-400 transition-colors text-sm",children:"How to Play"})}),r.jsx("li",{children:r.jsx(Y,{to:"/how-to-play#scoring",className:"text-neutral-300 hover:text-burgundy-400 transition-colors text-sm",children:"Scoring Rules"})}),r.jsx("li",{children:r.jsx(Y,{to:"/castaways",className:"text-neutral-300 hover:text-burgundy-400 transition-colors text-sm",children:"Castaways"})})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-display font-bold text-sm uppercase tracking-wider text-neutral-400 mb-4",children:"Resources"}),r.jsxs("ul",{className:"space-y-2",children:[r.jsx("li",{children:r.jsx(Y,{to:"/sms",className:"text-neutral-300 hover:text-burgundy-400 transition-colors text-sm",children:"SMS Commands"})}),r.jsx("li",{children:r.jsx(Y,{to:"/contact",className:"text-neutral-300 hover:text-burgundy-400 transition-colors text-sm",children:"Contact Us"})}),r.jsx("li",{children:r.jsx(Y,{to:"/privacy",className:"text-neutral-300 hover:text-burgundy-400 transition-colors text-sm",children:"Privacy Policy"})}),r.jsx("li",{children:r.jsx(Y,{to:"/terms",className:"text-neutral-300 hover:text-burgundy-400 transition-colors text-sm",children:"Terms of Service"})})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-display font-bold text-sm uppercase tracking-wider text-neutral-400 mb-4",children:"Contact"}),r.jsx("ul",{className:"space-y-2",children:r.jsx("li",{children:r.jsx("a",{href:"https://twitter.com/realitygamesfl",target:"_blank",rel:"noopener noreferrer",className:"text-neutral-300 hover:text-burgundy-400 transition-colors text-sm",children:"@realitygamesfl"})})})]})]}),r.jsxs("div",{className:"border-t border-neutral-800 mt-4 pt-4 flex flex-col md:flex-row justify-between items-center gap-4",children:[r.jsxs("p",{className:"text-neutral-500 text-sm",children:[" ",e," Reality Games Fantasy League. All rights reserved."]}),r.jsxs("div",{className:"flex items-center gap-4 text-sm text-neutral-500",children:[r.jsx(Y,{to:"/privacy",className:"hover:text-neutral-300 transition-colors",children:"Privacy"}),r.jsx(Y,{to:"/terms",className:"hover:text-neutral-300 transition-colors",children:"Terms"}),r.jsx("span",{children:"Not affiliated with CBS or Survivor."})]})]})]})})}function KQ(){return r.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex flex-col",children:[r.jsx("a",{href:"#main-content",className:"sr-only focus:not-sr-only focus:absolute focus:top-2 focus:left-2 focus:z-[100] focus:bg-burgundy-600 focus:text-white focus:px-4 focus:py-2 focus:rounded-lg focus:font-semibold focus:shadow-lg",children:"Skip to main content"}),r.jsx(de,{}),r.jsx("main",{id:"main-content",className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex-1",tabIndex:-1,children:r.jsx(ib,{})}),r.jsx(Qt,{})]})}function YQ(){const{user:e,profile:t,loading:n}=yt(),s=ys();if(n)return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-cream-200",children:r.jsx(ge,{className:"h-12 w-12 text-burgundy-500 animate-spin"})});if(!e){const a=s.pathname+s.search;return r.jsx(Xl,{to:`/login?redirect=${encodeURIComponent(a)}`,replace:!0})}if(!(t!=null&&t.profile_setup_complete)&&s.pathname!=="/profile/setup"){const a=s.pathname+s.search;return r.jsx(Xl,{to:`/profile/setup?redirect=${encodeURIComponent(a)}`,replace:!0})}return r.jsx(ib,{})}function JQ(){const{user:e,loading:t,isAdmin:n}=yt();return t?r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-cream-200",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-burgundy-500"})}):e?n?r.jsx(ib,{}):r.jsx(Xl,{to:"/dashboard",replace:!0,state:{error:"Access denied. Admin privileges required."}}):r.jsx(Xl,{to:"/login",replace:!0})}class k4 extends C.Component{constructor(n){super(n);ul(this,"handleReload",()=>{window.location.reload()});ul(this,"handleGoHome",()=>{window.location.href="/"});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(n){return{hasError:!0,error:n,errorInfo:null}}componentDidCatch(n,s){this.setState({errorInfo:s}),console.error("Error Boundary caught error:",n,s),jY&&dt(n,{contexts:{react:{componentStack:s.componentStack}},extra:{errorInfo:s.componentStack}})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated p-8 max-w-md w-full text-center border border-cream-200",children:[r.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6",children:r.jsx(dr,{className:"h-8 w-8 text-red-500"})}),r.jsx("h1",{className:"text-2xl font-display font-bold text-neutral-800 mb-2",children:"Something went wrong"}),r.jsx("p",{className:"text-neutral-500 mb-6",children:"We're sorry, but something unexpected happened. Please try refreshing the page or going back to the home page."}),!1,r.jsxs("div",{className:"flex gap-3 justify-center",children:[r.jsxs("button",{onClick:this.handleReload,className:"btn btn-secondary flex items-center gap-2",children:[r.jsx(ga,{className:"h-4 w-4"}),"Refresh Page"]}),r.jsxs("button",{onClick:this.handleGoHome,className:"btn btn-primary flex items-center gap-2",children:[r.jsx(_4,{className:"h-4 w-4"}),"Go Home"]})]})]})}):this.props.children}}const QQ=C.createContext(null),XQ={success:{icon:At,bg:"bg-green-50",border:"border-green-200",text:"text-green-800",iconColor:"text-green-500"},error:{icon:ot,bg:"bg-red-50",border:"border-red-200",text:"text-red-800",iconColor:"text-red-500"},info:{icon:Ep,bg:"bg-blue-50",border:"border-blue-200",text:"text-blue-800",iconColor:"text-blue-500"}};function ZQ({children:e}){const[t,n]=C.useState([]),s=C.useCallback(d=>{n(h=>h.filter(p=>p.id!==d))},[]),a=C.useCallback((d,h="info")=>{const p=Math.random().toString(36).substring(2,9);n(m=>[...m,{id:p,message:d,type:h}]),setTimeout(()=>s(p),5e3)},[s]),i=C.useCallback(d=>a(d,"success"),[a]),l=C.useCallback(d=>a(d,"error"),[a]),u=C.useCallback(d=>a(d,"info"),[a]);return r.jsxs(QQ.Provider,{value:{showToast:a,showSuccess:i,showError:l,showInfo:u},children:[e,r.jsx("div",{className:"fixed bottom-4 right-4 z-50 flex flex-col gap-2 max-w-sm",children:t.map(d=>{const h=XQ[d.type],p=h.icon;return r.jsxs("div",{className:`flex items-start gap-3 p-4 rounded-xl border shadow-lg animate-slide-up ${h.bg} ${h.border}`,children:[r.jsx(p,{className:`h-5 w-5 flex-shrink-0 mt-0.5 ${h.iconColor}`}),r.jsx("p",{className:`text-sm font-medium flex-1 ${h.text}`,children:d.message}),r.jsx("button",{onClick:()=>s(d.id),className:`flex-shrink-0 ${h.text} hover:opacity-70`,children:r.jsx(Sn,{className:"h-4 w-4"})})]},d.id)})})]})}function eX(){const[e,t]=C.useState(""),[n,s]=C.useState(!1),[a,i]=C.useState(!1),[l,u]=C.useState(null),d=async h=>{if(h.preventDefault(),!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)){u("Please enter a valid email address");return}s(!0),u(null);try{const m=JSON.parse(localStorage.getItem("triviaEmails")||"[]");m.includes(e)||(m.push(e),localStorage.setItem("triviaEmails",JSON.stringify(m))),await new Promise(g=>setTimeout(g,500)),i(!0),t("")}catch{u("Something went wrong. Please try again.")}finally{s(!1)}};return r.jsxs("div",{className:"min-h-screen flex flex-col",style:{background:"linear-gradient(180deg, #F5F0E8 0%, #E8E0D5 50%, #DED4C4 100%)"},children:[r.jsx(de,{}),r.jsx("main",{className:"flex-1 max-w-4xl mx-auto px-6 py-8 w-full",children:r.jsxs("div",{className:"text-center",children:[r.jsxs("h1",{className:"text-4xl sm:text-5xl md:text-6xl text-gray-900 leading-[0.95] mb-8",style:{fontFamily:"Georgia, Times New Roman, serif",fontWeight:400},children:["Fantasy Survivor",r.jsx("br",{}),"for People Who",r.jsx("br",{}),r.jsx("span",{className:"italic text-red-800",children:"Actually"})," Watch"]}),r.jsxs("p",{className:"text-xl sm:text-2xl text-gray-600 mb-10 leading-relaxed max-w-2xl mx-auto",children:["100+ scoring rules. Real strategy. No luck required.",r.jsx("br",{}),"Draft your castaways and prove you know the game."]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center items-center mb-8",children:[r.jsxs(Y,{to:"/signup",className:"bg-red-800 hover:bg-red-900 text-white px-6 py-3 rounded-xl font-semibold text-base transition-all shadow-lg hover:shadow-xl flex items-center gap-2",children:["Join Season 50 ",r.jsx("span",{children:""})]}),r.jsx(Y,{to:"/how-to-play",className:"bg-white hover:bg-gray-50 text-gray-800 px-6 py-3 rounded-xl font-semibold text-base border-2 border-gray-300 hover:border-gray-400 transition-all shadow-sm",children:"How It Works"})]}),r.jsxs("div",{className:"flex items-center gap-4 max-w-md mx-auto mb-8",children:[r.jsx("div",{className:"flex-1 h-px bg-gray-300"}),r.jsx("span",{className:"text-gray-400 text-sm font-medium",children:"or"}),r.jsx("div",{className:"flex-1 h-px bg-gray-300"})]}),r.jsx("p",{className:"text-gray-600 text-lg mb-4",children:"Not ready yet? Get weekly trivia featuring the Season 50 cast."}),a?r.jsxs("div",{className:"flex items-center justify-center gap-2 text-green-600 bg-green-50 px-6 py-4 rounded-xl max-w-lg mx-auto",children:[r.jsx(At,{className:"h-5 w-5"}),r.jsx("span",{className:"font-medium",children:"You're subscribed! Check your inbox soon."})]}):r.jsxs("form",{onSubmit:d,className:"max-w-lg mx-auto",children:[r.jsxs("div",{className:"flex gap-3 items-start",children:[r.jsx("input",{type:"email",value:e,onChange:h=>{t(h.target.value),u(null)},placeholder:"Enter your email",className:`flex-1 px-5 py-3 rounded-xl text-base border ${l?"border-red-400":"border-gray-300"} focus:border-red-800 focus:outline-none focus:ring-2 focus:ring-red-800/20 transition-all`,disabled:n,"aria-label":"Email address for trivia newsletter"}),r.jsx("button",{type:"submit",disabled:n||!e,className:"bg-black hover:bg-gray-900 disabled:bg-gray-400 text-white px-6 py-3 rounded-xl font-semibold text-base transition-all shadow-md hover:shadow-lg whitespace-nowrap flex items-center gap-2 shrink-0",children:n?r.jsxs(r.Fragment,{children:[r.jsx(ge,{className:"h-4 w-4 animate-spin"}),r.jsx("span",{children:"Signing up..."})]}):"Get Trivia"})]}),l&&r.jsx("p",{className:"text-red-500 text-sm mt-2 text-left",children:l})]})]})}),r.jsx(Qt,{})]})}function tX(){const{signInWithGoogle:e,signInWithMagicLink:t}=yt(),[n,s]=C.useState(!1),[a,i]=C.useState(!1),[l,u]=C.useState(""),[d,h]=C.useState(!1),[p,m]=C.useState(!1),[g,y]=C.useState(""),b=async()=>{y(""),s(!0);try{await e()}catch(v){y(v instanceof Error?v.message:"Failed to sign in with Google"),s(!1)}},w=async()=>{y(""),m(!0);try{await t(l),h(!0)}catch(v){y(v instanceof Error?v.message:"Failed to send magic link")}finally{m(!1)}};return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b from-cream-100 to-cream-200 px-4 py-12",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-float max-w-md w-full p-8 animate-slide-up",children:[r.jsx("div",{className:"flex justify-center mb-6",children:r.jsx(Y,{to:"/",children:r.jsx("img",{src:"/logo.png",alt:"RGFL",className:"h-24 w-auto"})})}),r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("h1",{className:"font-display text-3xl text-neutral-800",children:"Welcome Back"}),r.jsx("p",{className:"text-neutral-500 mt-2",children:"Log in to continue to your dashboard"})]}),g&&r.jsx("div",{className:"bg-error-50 border border-error-200 rounded-xl p-4 mb-6",children:r.jsx("p",{className:"text-error-600 text-sm",children:g})}),r.jsx("div",{className:"space-y-4 mb-6",children:r.jsx("p",{className:"text-neutral-600 text-center",children:"Log in with your Google account. OAuth is the only authentication method available."})}),r.jsxs("div",{className:"mt-6 space-y-3",children:[r.jsxs("button",{type:"button",onClick:b,disabled:n,className:"btn btn-secondary w-full flex items-center justify-center gap-3 shadow-card hover:shadow-card-hover transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[r.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[r.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),r.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),r.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),r.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),n?"Connecting...":"Continue with Google"]}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-0 flex items-center",children:r.jsx("div",{className:"w-full border-t border-neutral-200"})}),r.jsx("div",{className:"relative flex justify-center text-sm",children:r.jsx("span",{className:"px-2 bg-white text-neutral-400",children:"OR"})})]}),!a&&!d&&r.jsx("button",{type:"button",onClick:()=>i(!0),className:"text-sm text-neutral-500 hover:text-burgundy-500 transition-colors underline",children:"Sign in with email instead"}),a&&!d&&r.jsxs("div",{className:"space-y-3 animate-slide-up",children:[r.jsx("input",{type:"email",value:l,onChange:v=>u(v.target.value),placeholder:"Enter your email",className:"input w-full",disabled:p}),r.jsx("button",{type:"button",onClick:w,disabled:!l||p,className:"btn btn-primary w-full disabled:opacity-50 disabled:cursor-not-allowed",children:p?"Sending...":"Send Magic Link"}),r.jsx("button",{type:"button",onClick:()=>i(!1),className:"text-sm text-neutral-400 hover:text-neutral-600 transition-colors",children:" Back to Google Sign In"})]}),d&&r.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4",children:[r.jsxs("p",{className:"text-green-700 text-sm text-center",children:[" Check your email! We sent a magic link to ",r.jsx("strong",{children:l})]}),r.jsx("p",{className:"text-green-600 text-xs text-center mt-2",children:"Click the link to sign in (check spam if you don't see it)"})]})]}),r.jsx("div",{className:"mt-8 text-center",children:r.jsxs("p",{className:"text-neutral-500 text-sm",children:["Don't have an account?"," ",r.jsx(Y,{to:"/signup",className:"text-burgundy-500 hover:text-burgundy-600 font-semibold",children:"Sign up"})]})}),r.jsx("div",{className:"mt-6 text-center",children:r.jsx(Y,{to:"/",className:"text-sm text-neutral-400 hover:text-neutral-600 transition-colors",children:" Back to home"})})]})})}function hk(){const{signInWithGoogle:e,signInWithMagicLink:t}=yt(),[n,s]=C.useState(!1),[a,i]=C.useState(!1),[l,u]=C.useState(""),[d,h]=C.useState(!1),[p,m]=C.useState(!1),[g,y]=C.useState(""),b=async()=>{y(""),s(!0);try{await e()}catch(v){y(v instanceof Error?v.message:"Failed to sign in with Google"),s(!1)}},w=async()=>{y(""),m(!0);try{await t(l),h(!0)}catch(v){y(v instanceof Error?v.message:"Failed to send magic link")}finally{m(!1)}};return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b from-cream-100 to-cream-200 px-4 py-12",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-float max-w-md w-full p-8 animate-slide-up",children:[r.jsx("div",{className:"flex justify-center mb-6",children:r.jsx(Y,{to:"/",children:r.jsx("img",{src:"/logo.png",alt:"RGFL",className:"h-24 w-auto"})})}),r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("h1",{className:"font-display text-3xl text-neutral-800",children:"Sign up"}),r.jsx("p",{className:"text-neutral-500 mt-2",children:"Free and only takes a minute"})]}),g&&r.jsx("div",{className:"bg-error-50 border border-error-200 rounded-xl p-4 mb-6",children:r.jsx("p",{className:"text-error-600 text-sm",children:g})}),r.jsx("div",{className:"space-y-4",children:r.jsx("p",{className:"text-neutral-600 text-center",children:"Sign up with your Google account. Profile questions will be asked after registration."})}),r.jsxs("div",{className:"mt-6 space-y-3",children:[r.jsxs("button",{type:"button",onClick:b,disabled:n,className:"btn btn-secondary w-full flex items-center justify-center gap-3 shadow-card hover:shadow-card-hover transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[r.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[r.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),r.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),r.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),r.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),n?"Connecting...":"Continue with Google"]}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-0 flex items-center",children:r.jsx("div",{className:"w-full border-t border-neutral-200"})}),r.jsx("div",{className:"relative flex justify-center text-sm",children:r.jsx("span",{className:"px-2 bg-white text-neutral-400",children:"OR"})})]}),!a&&!d&&r.jsx("button",{type:"button",onClick:()=>i(!0),className:"text-sm text-neutral-500 hover:text-burgundy-500 transition-colors underline",children:"Sign up with email instead"}),a&&!d&&r.jsxs("div",{className:"space-y-3 animate-slide-up",children:[r.jsx("input",{type:"email",value:l,onChange:v=>u(v.target.value),placeholder:"Enter your email",className:"input w-full",disabled:p}),r.jsx("button",{type:"button",onClick:w,disabled:!l||p,className:"btn btn-primary w-full disabled:opacity-50 disabled:cursor-not-allowed",children:p?"Sending...":"Send Magic Link"}),r.jsx("button",{type:"button",onClick:()=>i(!1),className:"text-sm text-neutral-400 hover:text-neutral-600 transition-colors",children:" Back to Google Sign Up"})]}),d&&r.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4",children:[r.jsxs("p",{className:"text-green-700 text-sm text-center",children:[" Check your email! We sent a magic link to ",r.jsx("strong",{children:l})]}),r.jsx("p",{className:"text-green-600 text-xs text-center mt-2",children:"Click the link to complete signup (check spam if you don't see it)"})]})]}),r.jsx("div",{className:"mt-8 text-center",children:r.jsxs("p",{className:"text-neutral-500 text-sm",children:["Already have an account?"," ",r.jsx(Y,{to:"/login",className:"text-burgundy-500 hover:text-burgundy-600 font-semibold",children:"Login"})]})}),r.jsx("div",{className:"mt-6 text-center",children:r.jsx(Y,{to:"/",className:"text-sm text-neutral-400 hover:text-neutral-600 transition-colors",children:" Back to home"})})]})})}function Bf(e){return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}function Vy(e){const t=new Date,n=e.getTime()-t.getTime();if(n<=0)return"Now";const s=Math.floor(n/(1e3*60*60*24)),a=Math.floor(n%(1e3*60*60*24)/(1e3*60*60)),i=Math.floor(n%(1e3*60*60)/(1e3*60));return s>0?`${s}d ${a}h`:a>0?`${a}h ${i}m`:`${i}m`}const nX={burgundy:{bg:"bg-gradient-to-r from-burgundy-500 to-burgundy-600",btn:"bg-white text-burgundy-600 hover:bg-cream-100"},orange:{bg:"bg-gradient-to-r from-orange-500 to-orange-600",btn:"bg-white text-orange-600 hover:bg-cream-100"},amber:{bg:"bg-gradient-to-r from-amber-500 to-amber-600",btn:"bg-white text-amber-600 hover:bg-cream-100"},green:{bg:"bg-gradient-to-r from-green-500 to-green-600",btn:"bg-white text-green-600 hover:bg-cream-100"},blue:{bg:"bg-gradient-to-r from-blue-500 to-blue-600",btn:"bg-white text-blue-600 hover:bg-cream-100"}},rX={make_pick:"bg-white animate-pulse",picks_locked:"bg-white/80",awaiting_results:"bg-white/60",results_posted:"bg-white/60"};function sX({weeklyPhase:e,primaryLeagueId:t}){const n=nX[e.color];return r.jsx("div",{className:`rounded-2xl p-6 mb-8 ${n.bg} text-white`,children:r.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("div",{className:`w-3 h-3 rounded-full ${rX[e.phase]}`}),r.jsx("span",{className:"text-sm font-semibold opacity-90 uppercase tracking-wide",children:e.label})]}),r.jsx("p",{className:"text-lg font-medium",children:e.description}),e.countdown&&r.jsxs("p",{className:"text-sm opacity-80 mt-1",children:[e.countdown.label,": ",Vy(e.countdown.targetTime)]})]}),t&&r.jsx(Y,{to:`/leagues/${t}${e.ctaPath}`,className:`btn ${n.btn} font-semibold`,children:e.ctaLabel})]})})}function aX({recentlyEliminated:e,autoPickedLeagues:t}){var a;const n=e&&e.length>0,s=t&&t.length>0;return!n&&!s?null:r.jsxs("div",{className:"space-y-3 mb-6",children:[n&&r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-4 flex items-start gap-3",children:[r.jsx(xi,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-medium text-red-800",children:e.length===1?`${e[0].name} was eliminated!`:`${e.map(i=>i.name).join(" and ")} were eliminated!`}),r.jsx("p",{className:"text-sm text-red-700 mt-1",children:e.length===1?"The tribe has spoken. You still have your other castaway to play for!":"The tribe has spoken. Your season may be impacted by these eliminations."})]})]}),s&&r.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-2xl p-4 flex items-start gap-3",children:[r.jsx(ot,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("p",{className:"font-medium text-amber-800",children:["You were auto-picked in"," ",t.length===1?((a=t[0].leagues)==null?void 0:a.name)||"a league":`${t.length} leagues`]}),r.jsx("p",{className:"text-sm text-amber-700 mt-1",children:"You didn't submit a pick in time last episode. Make sure to pick before the deadline this week!"})]})]})]})}function iX({gamePhase:e,activeSeason:t,nextEpisode:n,primaryLeagueId:s,castawayCount:a}){return r.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[e==="pre_draft"||e==="pre_registration"?r.jsxs(Y,{to:"/draft/rankings",className:"col-span-2 bg-burgundy-500 hover:bg-burgundy-600 text-white rounded-2xl p-6 transition-colors group",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-14 h-14 bg-white/20 rounded-xl flex items-center justify-center",children:r.jsx(qJ,{className:"h-7 w-7"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-bold text-xl",children:"Set Your Draft Rankings"}),r.jsxs("p",{className:"text-burgundy-100 text-sm mt-1",children:["Rank ",a>0?`all ${a}`:"the"," castaways before the draft"]})]}),r.jsx(kr,{className:"h-6 w-6 text-white/60 group-hover:translate-x-1 transition-transform"})]}),t&&r.jsxs("div",{className:"mt-4 pt-4 border-t border-white/20 flex items-center gap-2",children:[r.jsx(Ln,{className:"h-4 w-4 text-burgundy-200"}),r.jsxs("span",{className:"text-sm text-burgundy-100",children:["Premiere in ",Vy(new Date(t.premiere_at))]})]})]}):e==="active"&&n?r.jsxs(Y,{to:s?`/leagues/${s}/pick`:"/leagues",className:"col-span-2 bg-burgundy-500 hover:bg-burgundy-600 text-white rounded-2xl p-6 transition-colors group",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-14 h-14 bg-white/20 rounded-xl flex items-center justify-center",children:r.jsx(wa,{className:"h-7 w-7"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-bold text-xl",children:"Make Your Pick"}),r.jsxs("p",{className:"text-burgundy-100 text-sm mt-1",children:["Episode ",n.number,"  Lock in before Wednesday"]})]}),r.jsx(kr,{className:"h-6 w-6 text-white/60 group-hover:translate-x-1 transition-transform"})]}),r.jsxs("div",{className:"mt-4 pt-4 border-t border-white/20 flex items-center gap-2",children:[r.jsx(Ln,{className:"h-4 w-4 text-burgundy-200"}),r.jsxs("span",{className:"text-sm text-burgundy-100",children:["Picks lock in ",Vy(new Date(n.picks_lock_at))]})]})]}):r.jsx(Y,{to:"/leaderboard",className:"col-span-2 bg-burgundy-500 hover:bg-burgundy-600 text-white rounded-2xl p-6 transition-colors group",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-14 h-14 bg-white/20 rounded-xl flex items-center justify-center",children:r.jsx(rt,{className:"h-7 w-7"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-bold text-xl",children:"View Final Standings"}),r.jsx("p",{className:"text-burgundy-100 text-sm mt-1",children:t?`Season ${t.number} results are in!`:"Results are in!"})]}),r.jsx(kr,{className:"h-6 w-6 text-white/60 group-hover:translate-x-1 transition-transform"})]})}),r.jsxs(Y,{to:"/scoring-rules",className:"bg-white hover:bg-cream-50 border-2 border-cream-200 hover:border-burgundy-300 rounded-2xl p-5 transition-all group",children:[r.jsx("div",{className:"w-12 h-12 bg-burgundy-100 rounded-xl flex items-center justify-center mb-3 group-hover:bg-burgundy-500 transition-colors",children:r.jsx(Rd,{className:"h-6 w-6 text-burgundy-500 group-hover:text-white transition-colors"})}),r.jsx("h3",{className:"font-bold text-neutral-800",children:"Scoring Rules"}),r.jsx("p",{className:"text-neutral-500 text-sm mt-1",children:"See how you score"})]}),r.jsxs(Y,{to:"/castaways",className:"bg-white hover:bg-cream-50 border-2 border-cream-200 hover:border-burgundy-300 rounded-2xl p-5 transition-all group",children:[r.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-xl flex items-center justify-center mb-3 group-hover:bg-orange-500 transition-colors",children:r.jsx(Mn,{className:"h-6 w-6 text-orange-500 group-hover:text-white transition-colors"})}),r.jsxs("h3",{className:"font-bold text-neutral-800",children:[a>0?a:"View"," Castaways"]}),r.jsx("p",{className:"text-neutral-500 text-sm mt-1",children:"Meet the players"})]})]})}function oX({leagueCount:e,activeCastaways:t,totalPoints:n}){return r.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-8",children:[r.jsxs("div",{className:"bg-white rounded-2xl p-5 border border-cream-200 text-center",children:[r.jsx("div",{className:"w-12 h-12 bg-burgundy-100 rounded-xl flex items-center justify-center mx-auto mb-3",children:r.jsx(Ye,{className:"h-6 w-6 text-burgundy-500"})}),r.jsx("p",{className:"text-3xl font-display font-bold text-neutral-800",children:e}),r.jsx("p",{className:"text-sm text-neutral-500 mt-1",children:"My Leagues"})]}),r.jsxs("div",{className:"bg-white rounded-2xl p-5 border border-cream-200 text-center",children:[r.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-xl flex items-center justify-center mx-auto mb-3",children:r.jsx(Mn,{className:"h-6 w-6 text-orange-500"})}),r.jsx("p",{className:"text-3xl font-display font-bold text-neutral-800",children:t}),r.jsx("p",{className:"text-sm text-neutral-500 mt-1",children:"Active Castaways"})]}),r.jsxs("div",{className:"bg-white rounded-2xl p-5 border border-cream-200 text-center",children:[r.jsx("div",{className:"w-12 h-12 bg-amber-100 rounded-xl flex items-center justify-center mx-auto mb-3",children:r.jsx(Tc,{className:"h-6 w-6 text-amber-600"})}),r.jsx("p",{className:"text-3xl font-display font-bold text-neutral-800",children:n}),r.jsx("p",{className:"text-sm text-neutral-500 mt-1",children:"Total Points"})]})]})}function lX({rank:e,totalPoints:t}){return r.jsx(Y,{to:"/leaderboard",className:"block bg-white hover:bg-cream-50 rounded-2xl p-6 border border-cream-200 mb-8 transition-colors group",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-14 h-14 bg-amber-100 rounded-xl flex items-center justify-center group-hover:bg-amber-500 transition-colors",children:r.jsx(Do,{className:"h-7 w-7 text-amber-600 group-hover:text-white transition-colors"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-lg text-neutral-800",children:"Your Global Rank"}),r.jsxs("p",{className:"text-neutral-500 text-sm",children:[t," points earned this season"]})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:"text-4xl font-display font-bold text-burgundy-500",children:["#",e]}),r.jsx("p",{className:"text-xs text-neutral-400 mt-1",children:"out of all players"})]})]})})}function Jn(e,t){return t||`https://api.dicebear.com/7.x/initials/svg?seed=${encodeURIComponent(e)}&backgroundColor=8B0000&textColor=ffffff&fontSize=40`}function cX({leagueId:e,leagueName:t,leagueCode:n,totalPoints:s,rank:a,rosters:i}){return r.jsx(Y,{to:`/leagues/${e}`,className:"block bg-white rounded-2xl hover:bg-cream-50 transition-colors border border-cream-200 overflow-hidden group",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-lg text-neutral-800 group-hover:text-burgundy-600 transition-colors",children:t}),r.jsx("p",{className:"text-sm text-neutral-400 font-mono",children:n})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-2xl font-display text-burgundy-500",children:s}),r.jsx("p",{className:"text-xs text-neutral-400",children:"points"})]})]}),r.jsx("div",{className:"flex gap-3",children:i.length>0?i.map(l=>{var u,d,h,p,m,g,y,b;return r.jsxs("div",{className:`flex items-center gap-3 px-4 py-3 rounded-xl flex-1 ${((u=l.castaway)==null?void 0:u.status)==="eliminated"?"bg-neutral-100 opacity-60":"bg-cream-50"}`,children:[r.jsx("img",{src:Jn(((d=l.castaway)==null?void 0:d.name)||"Unknown",(h=l.castaway)==null?void 0:h.photo_url),alt:((p=l.castaway)==null?void 0:p.name)||"Castaway",className:`w-10 h-10 rounded-full object-cover ${((m=l.castaway)==null?void 0:m.status)==="eliminated"?"grayscale":""}`}),r.jsxs("div",{children:[r.jsx("p",{className:`font-medium text-sm ${((g=l.castaway)==null?void 0:g.status)==="eliminated"?"text-neutral-500 line-through":"text-neutral-800"}`,children:((y=l.castaway)==null?void 0:y.name)||"Unknown"}),r.jsx("p",{className:"text-xs text-neutral-400",children:((b=l.castaway)==null?void 0:b.status)==="eliminated"?"Eliminated":"Active"})]})]},l.castaway_id)}):r.jsx("div",{className:"flex-1 text-center py-4 bg-cream-50 rounded-xl",children:r.jsx("p",{className:"text-sm text-neutral-400",children:"No castaways drafted yet"})})}),a&&r.jsxs("div",{className:"mt-4 pt-4 border-t border-cream-100 flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-neutral-500",children:"Your Rank"}),r.jsxs("span",{className:"font-semibold text-burgundy-500",children:["#",a]})]})]})})}function uX({season:e}){return r.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-cream-200",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{className:"w-10 h-10 bg-burgundy-100 rounded-xl flex items-center justify-center",children:r.jsx(N4,{className:"h-5 w-5 text-burgundy-500"})}),r.jsxs("div",{children:[r.jsxs("h3",{className:"font-semibold text-neutral-800",children:["Season ",e.number]}),r.jsx("p",{className:"text-sm text-neutral-400",children:e.name})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"text-neutral-500",children:"Registration Opens"}),r.jsx("span",{className:"text-burgundy-500 font-semibold",children:Bf(e.registration_opens_at)})]}),r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"text-neutral-500",children:"Premiere"}),r.jsx("span",{className:"text-neutral-800 font-semibold",children:Bf(e.premiere_at)})]}),r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"text-neutral-500",children:"Draft Deadline"}),r.jsx("span",{className:"text-neutral-800 font-semibold",children:Bf(e.draft_deadline)})]})]})]})}function dX(){return r.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-cream-200",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{className:"w-10 h-10 bg-amber-100 rounded-xl flex items-center justify-center",children:r.jsx(ur,{className:"h-5 w-5 text-amber-600"})}),r.jsx("h3",{className:"font-semibold text-neutral-800",children:"Weekly Timeline"})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"w-2 h-2 rounded-full bg-burgundy-500 mt-2 flex-shrink-0"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-neutral-800",children:"Wednesday 3pm PST"}),r.jsx("p",{className:"text-xs text-neutral-500",children:"Picks lock for the week"})]})]}),r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"w-2 h-2 rounded-full bg-orange-500 mt-2 flex-shrink-0"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-neutral-800",children:"Wednesday 8pm EST"}),r.jsx("p",{className:"text-xs text-neutral-500",children:"Episode airs (live scoring!)"})]})]}),r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 mt-2 flex-shrink-0"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-neutral-800",children:"Friday at 2pm PST"}),r.jsx("p",{className:"text-xs text-neutral-500",children:"Results posted (likely Wed 10PM Pacific)"})]})]}),r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500 mt-2 flex-shrink-0"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-neutral-800",children:"Saturday 12pm PST"}),r.jsx("p",{className:"text-xs text-neutral-500",children:"Next week's picks open"})]})]})]})]})}function hX(){const e=Kr(),t=n=>{window.scrollTo({top:0,behavior:"instant"}),e(n)};return r.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-cream-200",children:[r.jsx("h3",{className:"font-semibold text-neutral-800 mb-4",children:"Quick Links"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("button",{onClick:()=>t("/how-to-play"),className:"w-full flex items-center gap-3 p-3 rounded-xl hover:bg-cream-50 transition-colors text-left",children:[r.jsx(Rd,{className:"h-5 w-5 text-neutral-400"}),r.jsx("span",{className:"text-sm text-neutral-700",children:"How to Play"}),r.jsx(kr,{className:"h-4 w-4 text-neutral-300 ml-auto"})]}),r.jsxs("button",{onClick:()=>t("/scoring-rules"),className:"w-full flex items-center gap-3 p-3 rounded-xl hover:bg-cream-50 transition-colors text-left",children:[r.jsx(wa,{className:"h-5 w-5 text-neutral-400"}),r.jsx("span",{className:"text-sm text-neutral-700",children:"Scoring Rules"}),r.jsx(kr,{className:"h-4 w-4 text-neutral-300 ml-auto"})]}),r.jsxs("button",{onClick:()=>t("/castaways"),className:"w-full flex items-center gap-3 p-3 rounded-xl hover:bg-cream-50 transition-colors text-left",children:[r.jsx(Mn,{className:"h-5 w-5 text-neutral-400"}),r.jsx("span",{className:"text-sm text-neutral-700",children:"View Castaways"}),r.jsx(kr,{className:"h-4 w-4 text-neutral-300 ml-auto"})]})]})]})}function fX({seasonStarted:e=!1}){return e?null:r.jsxs("div",{className:"bg-gradient-to-br from-purple-500 via-purple-600 to-indigo-600 rounded-xl p-4 text-white shadow-elevated relative overflow-hidden",children:[r.jsxs("div",{className:"absolute top-3 right-3 flex items-center gap-1 bg-white/20 backdrop-blur-sm px-2 py-1 rounded-full",children:[r.jsx(fc,{className:"h-3 w-3"}),r.jsx("span",{className:"text-xs font-medium",children:"Featured"})]}),r.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -translate-y-1/2 translate-x-1/2"}),r.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-white/5 rounded-full translate-y-1/2 -translate-x-1/2"}),r.jsx("div",{className:"relative",children:r.jsxs("div",{className:"flex items-center justify-between gap-4",children:[r.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[r.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center flex-shrink-0",children:r.jsx(FY,{className:"h-6 w-6 text-white"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"font-display font-bold text-lg",children:"Daily Survivor Trivia"}),r.jsx("p",{className:"text-purple-200 text-sm",children:"24 questions  Test your knowledge!"})]})]}),r.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[r.jsxs("div",{className:"bg-white/10 rounded-lg px-3 py-2 text-center",children:[r.jsx(Tc,{className:"h-4 w-4 mx-auto mb-1 text-yellow-300"}),r.jsx("p",{className:"text-xs text-purple-200",children:"24 Questions"})]}),r.jsxs("div",{className:"bg-white/10 rounded-lg px-3 py-2 text-center",children:[r.jsx(rt,{className:"h-4 w-4 mx-auto mb-1 text-yellow-300"}),r.jsx("p",{className:"text-xs text-purple-200",children:"Leaderboard"})]}),r.jsxs(Y,{to:"/trivia",className:"flex items-center justify-center gap-2 bg-white text-purple-600 font-bold px-4 py-2 rounded-lg hover:bg-purple-50 transition-colors whitespace-nowrap",children:["Play Now",r.jsx(Sr,{className:"h-4 w-4"})]})]})]})})]})}function Rm(e){"@babel/helpers - typeof";return Rm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rm(e)}function Po(e){if(e===null||e===!0||e===!1)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function Ot(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function Ct(e){Ot(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||Rm(e)==="object"&&t==="[object Date]"?new Date(e.getTime()):typeof e=="number"||t==="[object Number]"?new Date(e):((typeof e=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function mX(e,t){Ot(2,arguments);var n=Ct(e).getTime(),s=Po(t);return new Date(n+s)}var pX={};function Pd(){return pX}function Ky(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function Hf(e,t){Ot(2,arguments);var n=Ct(e),s=Ct(t),a=n.getTime()-s.getTime();return a<0?-1:a>0?1:a}function gX(e){return Ot(1,arguments),e instanceof Date||Rm(e)==="object"&&Object.prototype.toString.call(e)==="[object Date]"}function xX(e){if(Ot(1,arguments),!gX(e)&&typeof e!="number")return!1;var t=Ct(e);return!isNaN(Number(t))}function yX(e,t){Ot(2,arguments);var n=Ct(e),s=Ct(t),a=n.getFullYear()-s.getFullYear(),i=n.getMonth()-s.getMonth();return a*12+i}function bX(e,t){return Ot(2,arguments),Ct(e).getTime()-Ct(t).getTime()}var vX={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(t){return t<0?Math.ceil(t):Math.floor(t)}},wX="trunc";function _X(e){return vX[wX]}function jX(e){Ot(1,arguments);var t=Ct(e);return t.setHours(23,59,59,999),t}function NX(e){Ot(1,arguments);var t=Ct(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function SX(e){Ot(1,arguments);var t=Ct(e);return jX(t).getTime()===NX(t).getTime()}function kX(e,t){Ot(2,arguments);var n=Ct(e),s=Ct(t),a=Hf(n,s),i=Math.abs(yX(n,s)),l;if(i<1)l=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-a*i);var u=Hf(n,s)===-a;SX(Ct(e))&&i===1&&Hf(e,s)===1&&(u=!1),l=a*(i-Number(u))}return l===0?0:l}function EX(e,t,n){Ot(2,arguments);var s=bX(e,t)/1e3;return _X()(s)}function CX(e,t){Ot(2,arguments);var n=Po(t);return mX(e,-n)}var TX=864e5;function RX(e){Ot(1,arguments);var t=Ct(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var s=t.getTime(),a=n-s;return Math.floor(a/TX)+1}function Im(e){Ot(1,arguments);var t=1,n=Ct(e),s=n.getUTCDay(),a=(s<t?7:0)+s-t;return n.setUTCDate(n.getUTCDate()-a),n.setUTCHours(0,0,0,0),n}function E4(e){Ot(1,arguments);var t=Ct(e),n=t.getUTCFullYear(),s=new Date(0);s.setUTCFullYear(n+1,0,4),s.setUTCHours(0,0,0,0);var a=Im(s),i=new Date(0);i.setUTCFullYear(n,0,4),i.setUTCHours(0,0,0,0);var l=Im(i);return t.getTime()>=a.getTime()?n+1:t.getTime()>=l.getTime()?n:n-1}function IX(e){Ot(1,arguments);var t=E4(e),n=new Date(0);n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0);var s=Im(n);return s}var PX=6048e5;function AX(e){Ot(1,arguments);var t=Ct(e),n=Im(t).getTime()-IX(t).getTime();return Math.round(n/PX)+1}function Pm(e,t){var n,s,a,i,l,u,d,h;Ot(1,arguments);var p=Pd(),m=Po((n=(s=(a=(i=t==null?void 0:t.weekStartsOn)!==null&&i!==void 0?i:t==null||(l=t.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&a!==void 0?a:p.weekStartsOn)!==null&&s!==void 0?s:(d=p.locale)===null||d===void 0||(h=d.options)===null||h===void 0?void 0:h.weekStartsOn)!==null&&n!==void 0?n:0);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var g=Ct(e),y=g.getUTCDay(),b=(y<m?7:0)+y-m;return g.setUTCDate(g.getUTCDate()-b),g.setUTCHours(0,0,0,0),g}function C4(e,t){var n,s,a,i,l,u,d,h;Ot(1,arguments);var p=Ct(e),m=p.getUTCFullYear(),g=Pd(),y=Po((n=(s=(a=(i=t==null?void 0:t.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(l=t.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&a!==void 0?a:g.firstWeekContainsDate)!==null&&s!==void 0?s:(d=g.locale)===null||d===void 0||(h=d.options)===null||h===void 0?void 0:h.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(y>=1&&y<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var b=new Date(0);b.setUTCFullYear(m+1,0,y),b.setUTCHours(0,0,0,0);var w=Pm(b,t),v=new Date(0);v.setUTCFullYear(m,0,y),v.setUTCHours(0,0,0,0);var j=Pm(v,t);return p.getTime()>=w.getTime()?m+1:p.getTime()>=j.getTime()?m:m-1}function OX(e,t){var n,s,a,i,l,u,d,h;Ot(1,arguments);var p=Pd(),m=Po((n=(s=(a=(i=t==null?void 0:t.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(l=t.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&a!==void 0?a:p.firstWeekContainsDate)!==null&&s!==void 0?s:(d=p.locale)===null||d===void 0||(h=d.options)===null||h===void 0?void 0:h.firstWeekContainsDate)!==null&&n!==void 0?n:1),g=C4(e,t),y=new Date(0);y.setUTCFullYear(g,0,m),y.setUTCHours(0,0,0,0);var b=Pm(y,t);return b}var MX=6048e5;function LX(e,t){Ot(1,arguments);var n=Ct(e),s=Pm(n,t).getTime()-OX(n,t).getTime();return Math.round(s/MX)+1}function gt(e,t){for(var n=e<0?"-":"",s=Math.abs(e).toString();s.length<t;)s="0"+s;return n+s}var Ba={y:function(t,n){var s=t.getUTCFullYear(),a=s>0?s:1-s;return gt(n==="yy"?a%100:a,n.length)},M:function(t,n){var s=t.getUTCMonth();return n==="M"?String(s+1):gt(s+1,2)},d:function(t,n){return gt(t.getUTCDate(),n.length)},a:function(t,n){var s=t.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return s.toUpperCase();case"aaa":return s;case"aaaaa":return s[0];case"aaaa":default:return s==="am"?"a.m.":"p.m."}},h:function(t,n){return gt(t.getUTCHours()%12||12,n.length)},H:function(t,n){return gt(t.getUTCHours(),n.length)},m:function(t,n){return gt(t.getUTCMinutes(),n.length)},s:function(t,n){return gt(t.getUTCSeconds(),n.length)},S:function(t,n){var s=n.length,a=t.getUTCMilliseconds(),i=Math.floor(a*Math.pow(10,s-3));return gt(i,n.length)}},vl={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},$X={G:function(t,n,s){var a=t.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return s.era(a,{width:"abbreviated"});case"GGGGG":return s.era(a,{width:"narrow"});case"GGGG":default:return s.era(a,{width:"wide"})}},y:function(t,n,s){if(n==="yo"){var a=t.getUTCFullYear(),i=a>0?a:1-a;return s.ordinalNumber(i,{unit:"year"})}return Ba.y(t,n)},Y:function(t,n,s,a){var i=C4(t,a),l=i>0?i:1-i;if(n==="YY"){var u=l%100;return gt(u,2)}return n==="Yo"?s.ordinalNumber(l,{unit:"year"}):gt(l,n.length)},R:function(t,n){var s=E4(t);return gt(s,n.length)},u:function(t,n){var s=t.getUTCFullYear();return gt(s,n.length)},Q:function(t,n,s){var a=Math.ceil((t.getUTCMonth()+1)/3);switch(n){case"Q":return String(a);case"QQ":return gt(a,2);case"Qo":return s.ordinalNumber(a,{unit:"quarter"});case"QQQ":return s.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return s.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(a,{width:"wide",context:"formatting"})}},q:function(t,n,s){var a=Math.ceil((t.getUTCMonth()+1)/3);switch(n){case"q":return String(a);case"qq":return gt(a,2);case"qo":return s.ordinalNumber(a,{unit:"quarter"});case"qqq":return s.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return s.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(a,{width:"wide",context:"standalone"})}},M:function(t,n,s){var a=t.getUTCMonth();switch(n){case"M":case"MM":return Ba.M(t,n);case"Mo":return s.ordinalNumber(a+1,{unit:"month"});case"MMM":return s.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return s.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(a,{width:"wide",context:"formatting"})}},L:function(t,n,s){var a=t.getUTCMonth();switch(n){case"L":return String(a+1);case"LL":return gt(a+1,2);case"Lo":return s.ordinalNumber(a+1,{unit:"month"});case"LLL":return s.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return s.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(a,{width:"wide",context:"standalone"})}},w:function(t,n,s,a){var i=LX(t,a);return n==="wo"?s.ordinalNumber(i,{unit:"week"}):gt(i,n.length)},I:function(t,n,s){var a=AX(t);return n==="Io"?s.ordinalNumber(a,{unit:"week"}):gt(a,n.length)},d:function(t,n,s){return n==="do"?s.ordinalNumber(t.getUTCDate(),{unit:"date"}):Ba.d(t,n)},D:function(t,n,s){var a=RX(t);return n==="Do"?s.ordinalNumber(a,{unit:"dayOfYear"}):gt(a,n.length)},E:function(t,n,s){var a=t.getUTCDay();switch(n){case"E":case"EE":case"EEE":return s.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return s.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(a,{width:"short",context:"formatting"});case"EEEE":default:return s.day(a,{width:"wide",context:"formatting"})}},e:function(t,n,s,a){var i=t.getUTCDay(),l=(i-a.weekStartsOn+8)%7||7;switch(n){case"e":return String(l);case"ee":return gt(l,2);case"eo":return s.ordinalNumber(l,{unit:"day"});case"eee":return s.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return s.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(i,{width:"short",context:"formatting"});case"eeee":default:return s.day(i,{width:"wide",context:"formatting"})}},c:function(t,n,s,a){var i=t.getUTCDay(),l=(i-a.weekStartsOn+8)%7||7;switch(n){case"c":return String(l);case"cc":return gt(l,n.length);case"co":return s.ordinalNumber(l,{unit:"day"});case"ccc":return s.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return s.day(i,{width:"narrow",context:"standalone"});case"cccccc":return s.day(i,{width:"short",context:"standalone"});case"cccc":default:return s.day(i,{width:"wide",context:"standalone"})}},i:function(t,n,s){var a=t.getUTCDay(),i=a===0?7:a;switch(n){case"i":return String(i);case"ii":return gt(i,n.length);case"io":return s.ordinalNumber(i,{unit:"day"});case"iii":return s.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return s.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return s.day(a,{width:"short",context:"formatting"});case"iiii":default:return s.day(a,{width:"wide",context:"formatting"})}},a:function(t,n,s){var a=t.getUTCHours(),i=a/12>=1?"pm":"am";switch(n){case"a":case"aa":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return s.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,n,s){var a=t.getUTCHours(),i;switch(a===12?i=vl.noon:a===0?i=vl.midnight:i=a/12>=1?"pm":"am",n){case"b":case"bb":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return s.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,n,s){var a=t.getUTCHours(),i;switch(a>=17?i=vl.evening:a>=12?i=vl.afternoon:a>=4?i=vl.morning:i=vl.night,n){case"B":case"BB":case"BBB":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return s.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,n,s){if(n==="ho"){var a=t.getUTCHours()%12;return a===0&&(a=12),s.ordinalNumber(a,{unit:"hour"})}return Ba.h(t,n)},H:function(t,n,s){return n==="Ho"?s.ordinalNumber(t.getUTCHours(),{unit:"hour"}):Ba.H(t,n)},K:function(t,n,s){var a=t.getUTCHours()%12;return n==="Ko"?s.ordinalNumber(a,{unit:"hour"}):gt(a,n.length)},k:function(t,n,s){var a=t.getUTCHours();return a===0&&(a=24),n==="ko"?s.ordinalNumber(a,{unit:"hour"}):gt(a,n.length)},m:function(t,n,s){return n==="mo"?s.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):Ba.m(t,n)},s:function(t,n,s){return n==="so"?s.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):Ba.s(t,n)},S:function(t,n){return Ba.S(t,n)},X:function(t,n,s,a){var i=a._originalDate||t,l=i.getTimezoneOffset();if(l===0)return"Z";switch(n){case"X":return mk(l);case"XXXX":case"XX":return Wi(l);case"XXXXX":case"XXX":default:return Wi(l,":")}},x:function(t,n,s,a){var i=a._originalDate||t,l=i.getTimezoneOffset();switch(n){case"x":return mk(l);case"xxxx":case"xx":return Wi(l);case"xxxxx":case"xxx":default:return Wi(l,":")}},O:function(t,n,s,a){var i=a._originalDate||t,l=i.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+fk(l,":");case"OOOO":default:return"GMT"+Wi(l,":")}},z:function(t,n,s,a){var i=a._originalDate||t,l=i.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+fk(l,":");case"zzzz":default:return"GMT"+Wi(l,":")}},t:function(t,n,s,a){var i=a._originalDate||t,l=Math.floor(i.getTime()/1e3);return gt(l,n.length)},T:function(t,n,s,a){var i=a._originalDate||t,l=i.getTime();return gt(l,n.length)}};function fk(e,t){var n=e>0?"-":"+",s=Math.abs(e),a=Math.floor(s/60),i=s%60;if(i===0)return n+String(a);var l=t;return n+String(a)+l+gt(i,2)}function mk(e,t){if(e%60===0){var n=e>0?"-":"+";return n+gt(Math.abs(e)/60,2)}return Wi(e,t)}function Wi(e,t){var n=t||"",s=e>0?"-":"+",a=Math.abs(e),i=gt(Math.floor(a/60),2),l=gt(a%60,2);return s+i+n+l}var pk=function(t,n){switch(t){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},T4=function(t,n){switch(t){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},DX=function(t,n){var s=t.match(/(P+)(p+)?/)||[],a=s[1],i=s[2];if(!i)return pk(t,n);var l;switch(a){case"P":l=n.dateTime({width:"short"});break;case"PP":l=n.dateTime({width:"medium"});break;case"PPP":l=n.dateTime({width:"long"});break;case"PPPP":default:l=n.dateTime({width:"full"});break}return l.replace("{{date}}",pk(a,n)).replace("{{time}}",T4(i,n))},FX={p:T4,P:DX},UX=["D","DD"],qX=["YY","YYYY"];function BX(e){return UX.indexOf(e)!==-1}function HX(e){return qX.indexOf(e)!==-1}function gk(e,t,n){if(e==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var zX={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},WX=function(t,n,s){var a,i=zX[t];return typeof i=="string"?a=i:n===1?a=i.one:a=i.other.replace("{{count}}",n.toString()),s!=null&&s.addSuffix?s.comparison&&s.comparison>0?"in "+a:a+" ago":a};function j0(e){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth,s=e.formats[n]||e.formats[e.defaultWidth];return s}}var GX={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},VX={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},KX={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},YX={date:j0({formats:GX,defaultWidth:"full"}),time:j0({formats:VX,defaultWidth:"full"}),dateTime:j0({formats:KX,defaultWidth:"full"})},JX={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},QX=function(t,n,s,a){return JX[t]};function bu(e){return function(t,n){var s=n!=null&&n.context?String(n.context):"standalone",a;if(s==="formatting"&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,l=n!=null&&n.width?String(n.width):i;a=e.formattingValues[l]||e.formattingValues[i]}else{var u=e.defaultWidth,d=n!=null&&n.width?String(n.width):e.defaultWidth;a=e.values[d]||e.values[u]}var h=e.argumentCallback?e.argumentCallback(t):t;return a[h]}}var XX={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},ZX={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},eZ={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},tZ={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},nZ={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},rZ={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},sZ=function(t,n){var s=Number(t),a=s%100;if(a>20||a<10)switch(a%10){case 1:return s+"st";case 2:return s+"nd";case 3:return s+"rd"}return s+"th"},aZ={ordinalNumber:sZ,era:bu({values:XX,defaultWidth:"wide"}),quarter:bu({values:ZX,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:bu({values:eZ,defaultWidth:"wide"}),day:bu({values:tZ,defaultWidth:"wide"}),dayPeriod:bu({values:nZ,defaultWidth:"wide",formattingValues:rZ,defaultFormattingWidth:"wide"})};function vu(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=n.width,a=s&&e.matchPatterns[s]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;var l=i[0],u=s&&e.parsePatterns[s]||e.parsePatterns[e.defaultParseWidth],d=Array.isArray(u)?oZ(u,function(m){return m.test(l)}):iZ(u,function(m){return m.test(l)}),h;h=e.valueCallback?e.valueCallback(d):d,h=n.valueCallback?n.valueCallback(h):h;var p=t.slice(l.length);return{value:h,rest:p}}}function iZ(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n}function oZ(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n}function lZ(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=t.match(e.matchPattern);if(!s)return null;var a=s[0],i=t.match(e.parsePattern);if(!i)return null;var l=e.valueCallback?e.valueCallback(i[0]):i[0];l=n.valueCallback?n.valueCallback(l):l;var u=t.slice(a.length);return{value:l,rest:u}}}var cZ=/^(\d+)(th|st|nd|rd)?/i,uZ=/\d+/i,dZ={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},hZ={any:[/^b/i,/^(a|c)/i]},fZ={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},mZ={any:[/1/i,/2/i,/3/i,/4/i]},pZ={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},gZ={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},xZ={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},yZ={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},bZ={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},vZ={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},wZ={ordinalNumber:lZ({matchPattern:cZ,parsePattern:uZ,valueCallback:function(t){return parseInt(t,10)}}),era:vu({matchPatterns:dZ,defaultMatchWidth:"wide",parsePatterns:hZ,defaultParseWidth:"any"}),quarter:vu({matchPatterns:fZ,defaultMatchWidth:"wide",parsePatterns:mZ,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:vu({matchPatterns:pZ,defaultMatchWidth:"wide",parsePatterns:gZ,defaultParseWidth:"any"}),day:vu({matchPatterns:xZ,defaultMatchWidth:"wide",parsePatterns:yZ,defaultParseWidth:"any"}),dayPeriod:vu({matchPatterns:bZ,defaultMatchWidth:"any",parsePatterns:vZ,defaultParseWidth:"any"})},R4={code:"en-US",formatDistance:WX,formatLong:YX,formatRelative:QX,localize:aZ,match:wZ,options:{weekStartsOn:0,firstWeekContainsDate:1}},_Z=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,jZ=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,NZ=/^'([^]*?)'?$/,SZ=/''/g,kZ=/[a-zA-Z]/;function xk(e,t,n){var s,a,i,l,u,d,h,p,m,g,y,b,w,v;Ot(2,arguments);var j=String(t),E=Pd(),k=(s=(a=void 0)!==null&&a!==void 0?a:E.locale)!==null&&s!==void 0?s:R4,S=Po((i=(l=(u=(d=void 0)!==null&&d!==void 0?d:void 0)!==null&&u!==void 0?u:E.firstWeekContainsDate)!==null&&l!==void 0?l:(h=E.locale)===null||h===void 0||(p=h.options)===null||p===void 0?void 0:p.firstWeekContainsDate)!==null&&i!==void 0?i:1);if(!(S>=1&&S<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var P=Po((m=(g=(y=(b=void 0)!==null&&b!==void 0?b:void 0)!==null&&y!==void 0?y:E.weekStartsOn)!==null&&g!==void 0?g:(w=E.locale)===null||w===void 0||(v=w.options)===null||v===void 0?void 0:v.weekStartsOn)!==null&&m!==void 0?m:0);if(!(P>=0&&P<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!k.localize)throw new RangeError("locale must contain localize property");if(!k.formatLong)throw new RangeError("locale must contain formatLong property");var A=Ct(e);if(!xX(A))throw new RangeError("Invalid time value");var T=Ky(A),L=CX(A,T),H={firstWeekContainsDate:S,weekStartsOn:P,locale:k,_originalDate:A},R=j.match(jZ).map(function(M){var O=M[0];if(O==="p"||O==="P"){var F=FX[O];return F(M,k.formatLong)}return M}).join("").match(_Z).map(function(M){if(M==="''")return"'";var O=M[0];if(O==="'")return EZ(M);var F=$X[O];if(F)return HX(M)&&gk(M,t,String(e)),BX(M)&&gk(M,t,String(e)),F(L,M,k.localize,H);if(O.match(kZ))throw new RangeError("Format string contains an unescaped latin alphabet character `"+O+"`");return M}).join("");return R}function EZ(e){var t=e.match(NZ);return t?t[1].replace(SZ,"'"):e}function I4(e,t){if(e==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function CZ(e){return I4({},e)}var yk=1440,TZ=2520,N0=43200,RZ=86400;function IZ(e,t,n){var s,a;Ot(2,arguments);var i=Pd(),l=(s=(a=n==null?void 0:n.locale)!==null&&a!==void 0?a:i.locale)!==null&&s!==void 0?s:R4;if(!l.formatDistance)throw new RangeError("locale must contain formatDistance property");var u=Hf(e,t);if(isNaN(u))throw new RangeError("Invalid time value");var d=I4(CZ(n),{addSuffix:!!(n!=null&&n.addSuffix),comparison:u}),h,p;u>0?(h=Ct(t),p=Ct(e)):(h=Ct(e),p=Ct(t));var m=EX(p,h),g=(Ky(p)-Ky(h))/1e3,y=Math.round((m-g)/60),b;if(y<2)return n!=null&&n.includeSeconds?m<5?l.formatDistance("lessThanXSeconds",5,d):m<10?l.formatDistance("lessThanXSeconds",10,d):m<20?l.formatDistance("lessThanXSeconds",20,d):m<40?l.formatDistance("halfAMinute",0,d):m<60?l.formatDistance("lessThanXMinutes",1,d):l.formatDistance("xMinutes",1,d):y===0?l.formatDistance("lessThanXMinutes",1,d):l.formatDistance("xMinutes",y,d);if(y<45)return l.formatDistance("xMinutes",y,d);if(y<90)return l.formatDistance("aboutXHours",1,d);if(y<yk){var w=Math.round(y/60);return l.formatDistance("aboutXHours",w,d)}else{if(y<TZ)return l.formatDistance("xDays",1,d);if(y<N0){var v=Math.round(y/yk);return l.formatDistance("xDays",v,d)}else if(y<RZ)return b=Math.round(y/N0),l.formatDistance("aboutXMonths",b,d)}if(b=kX(p,h),b<12){var j=Math.round(y/N0);return l.formatDistance("xMonths",j,d)}else{var E=b%12,k=Math.floor(b/12);return E<3?l.formatDistance("aboutXYears",k,d):E<9?l.formatDistance("overXYears",k,d):l.formatDistance("almostXYears",k+1,d)}}function P4(e,t){return Ot(1,arguments),IZ(e,Date.now(),t)}function PZ(){const{data:e,isLoading:t}=se({queryKey:["announcements"],queryFn:async()=>{const s=new Date().toISOString(),{data:a,error:i}=await G.from("announcements").select("*").eq("is_active",!0).or(`expires_at.is.null,expires_at.gt.${s}`).order("priority",{ascending:!1}).order("created_at",{ascending:!1}).limit(3);if(i)throw i;return a||[]},staleTime:3e5});if(t)return r.jsx("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 p-6",children:r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-5 w-32 bg-cream-200 rounded mb-4"}),r.jsx("div",{className:"h-4 w-full bg-cream-100 rounded mb-2"}),r.jsx("div",{className:"h-4 w-3/4 bg-cream-100 rounded"})]})});if(!e||e.length===0)return null;const n=s=>{switch(s){case"urgent":return{bg:"bg-red-50",border:"border-red-200",icon:dr,iconColor:"text-red-500",titleColor:"text-red-700"};case"high":return{bg:"bg-amber-50",border:"border-amber-200",icon:fc,iconColor:"text-amber-500",titleColor:"text-amber-700"};case"medium":return{bg:"bg-blue-50",border:"border-blue-200",icon:Ep,iconColor:"text-blue-500",titleColor:"text-blue-700"};default:return{bg:"bg-green-50",border:"border-green-200",icon:jp,iconColor:"text-green-500",titleColor:"text-green-700"}}};return r.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 overflow-hidden",children:[r.jsxs("div",{className:"p-4 border-b border-cream-100 flex items-center gap-2",children:[r.jsx(fc,{className:"h-5 w-5 text-burgundy-500"}),r.jsx("h3",{className:"font-display font-bold text-neutral-800",children:"Announcements"})]}),r.jsx("div",{className:"divide-y divide-cream-100",children:e.map(s=>{const a=n(s.priority),i=a.icon;return r.jsx("div",{className:`p-4 ${a.bg} border-l-4 ${a.border}`,children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(i,{className:`h-5 w-5 ${a.iconColor} flex-shrink-0 mt-0.5`}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h4",{className:`font-semibold ${a.titleColor} mb-1`,children:s.title}),r.jsx("p",{className:"text-neutral-600 text-sm line-clamp-2",children:s.content}),r.jsx("p",{className:"text-neutral-400 text-xs mt-2",children:P4(new Date(s.created_at),{addSuffix:!0})})]})]})},s.id)})})]})}function AZ(e,t){if(!e)return"pre_registration";const n=new Date,s=new Date(e.registration_opens_at),a=new Date(e.premiere_at);return n<s?"pre_registration":n<a?"pre_draft":t?"active":"post_season"}function OZ(e,t){if(!e)return null;const n=new Date,s=new Date(e.picks_lock_at),a=new Date(e.air_date),i=new Date(a);i.setDate(i.getDate()+2),i.setHours(12,0,0,0);const l=new Date(i);return l.setDate(l.getDate()+1),l.setHours(12,0,0,0),t!=null&&t.is_scored&&n<l?{phase:"results_posted",label:"Results Posted",description:`Episode ${t.number} scores are in! Check your points.`,ctaLabel:"View Results",ctaPath:"/episodes",color:"green"}:n<s?{phase:"make_pick",label:"Make Your Pick",description:`Choose your castaway for Episode ${e.number}`,ctaLabel:"Make Pick",ctaPath:"/pick",color:"burgundy",countdown:{label:"Picks lock in",targetTime:s}}:n<a?{phase:"picks_locked",label:"Picks Locked",description:"Your pick is locked. Episode airs tonight!",ctaLabel:"View Pick",ctaPath:"/pick",color:"orange",countdown:{label:"Episode airs in",targetTime:a}}:e.is_scored?null:{phase:"awaiting_results",label:"Awaiting Results",description:"Episode has aired. Results coming Friday!",ctaLabel:"View Teams",ctaPath:"/team",color:"amber"}}function MZ(){const{user:e}=yt(),{data:t}=se({queryKey:["profile",e==null?void 0:e.id],queryFn:async()=>{const{data:E,error:k}=await G.from("users").select("*").eq("id",e.id).single();if(k){if(k.code==="PGRST116")return null;throw k}return E},enabled:!!(e!=null&&e.id),retry:3,retryDelay:E=>Math.min(1e3*2**E,3e3)}),{data:n}=se({queryKey:["active-season"],queryFn:async()=>{const{data:E,error:k}=await G.from("seasons").select("*").eq("is_active",!0).single();if(k&&k.code!=="PGRST116")throw k;return E}}),{data:s}=se({queryKey:["my-leagues-detailed",e==null?void 0:e.id],queryFn:async()=>{const{data:E,error:k}=await G.from("league_members").select(`
          league_id,
          total_points,
          rank,
          league:leagues (
            id,
            name,
            code,
            status,
            is_global
          )
        `).eq("user_id",e.id);if(k)throw k;return E.map(S=>({league_id:S.league_id,total_points:S.total_points,rank:S.rank,league:S.league})).filter(S=>S.league!==null)},enabled:!!(e!=null&&e.id)}),{data:a}=se({queryKey:["my-rosters",e==null?void 0:e.id],queryFn:async()=>{const{data:E,error:k}=await G.from("rosters").select(`
          league_id,
          castaway_id,
          castaway:castaways (
            id,
            name,
            photo_url,
            status
          )
        `).eq("user_id",e.id).is("dropped_at",null);if(k)throw k;return E},enabled:!!(e!=null&&e.id)}),{data:i}=se({queryKey:["next-episode",n==null?void 0:n.id],queryFn:async()=>{const{data:E,error:k}=await G.from("episodes").select("*").eq("season_id",n.id).gt("air_date",new Date().toISOString()).order("air_date",{ascending:!0}).limit(1).single();if(k&&k.code!=="PGRST116")throw k;return E},enabled:!!(n!=null&&n.id)}),{data:l}=se({queryKey:["previous-episode",n==null?void 0:n.id],queryFn:async()=>{const{data:E,error:k}=await G.from("episodes").select("*").eq("season_id",n.id).eq("is_scored",!0).order("air_date",{ascending:!1}).limit(1).single();if(k&&k.code!=="PGRST116")throw k;return E},enabled:!!(n!=null&&n.id)}),{data:u}=se({queryKey:["castaway-count",n==null?void 0:n.id],queryFn:async()=>{const{count:E,error:k}=await G.from("castaways").select("*",{count:"exact",head:!0}).eq("season_id",n.id);if(k)throw k;return E||0},enabled:!!(n!=null&&n.id)}),{data:d}=se({queryKey:["recently-eliminated",e==null?void 0:e.id,l==null?void 0:l.id],queryFn:async()=>{if(!a||!l)return[];const{data:E,error:k}=await G.from("castaways").select("id, name").eq("eliminated_episode_id",l.id);if(k)throw k;const S=a.map(P=>P.castaway_id);return(E==null?void 0:E.filter(P=>S.includes(P.id)))||[]},enabled:!!(e!=null&&e.id)&&!!(l!=null&&l.id)&&!!a}),{data:h}=se({queryKey:["auto-picked",e==null?void 0:e.id,l==null?void 0:l.id],queryFn:async()=>{if(!l||!s)return[];const E=s.filter(P=>!P.league.is_global).map(P=>P.league_id);if(E.length===0)return[];const{data:k,error:S}=await G.from("weekly_picks").select("league_id, leagues(name)").eq("user_id",e.id).eq("episode_id",l.id).eq("status","auto_picked").in("league_id",E);if(S)throw S;return k||[]},enabled:!!(e!=null&&e.id)&&!!(l!=null&&l.id)&&!!s}),p=(a==null?void 0:a.reduce((E,k)=>(E[k.league_id]||(E[k.league_id]=[]),E[k.league_id].push(k),E),{}))||{},m=(s==null?void 0:s.filter(E=>!E.league.is_global))||[],g=s==null?void 0:s.find(E=>E.league.is_global),y=AZ(n||null,i||null),b=y==="active"?OZ(i||null,l||null):null,w=(g==null?void 0:g.total_points)||0,v=Object.values(p).flat().filter(E=>{var k;return((k=E.castaway)==null?void 0:k.status)==="active"}).length,j=m.length>0?m[0].league_id:void 0;return r.jsxs("div",{className:"pb-4",children:[r.jsxs("div",{className:"mb-4",children:[r.jsxs("h1",{className:"text-2xl font-display font-bold text-neutral-800",children:["Welcome back",t!=null&&t.display_name?`, ${t.display_name.split(" ")[0]}`:"","."]}),r.jsx("p",{className:"text-neutral-500 mt-1 text-base",children:"Check standings, track scores, and see how your strategy is playing out."})]}),r.jsx("div",{className:"mb-4",children:r.jsx(fX,{seasonStarted:y==="active"||y==="post_season"})}),b&&r.jsx("div",{className:"mb-4",children:r.jsx(sX,{weeklyPhase:b,primaryLeagueId:j})}),r.jsx(aX,{recentlyEliminated:d,autoPickedLeagues:h}),r.jsx("div",{className:"mb-4",children:r.jsx(PZ,{})}),r.jsx("div",{className:"mb-4",children:r.jsx(iX,{gamePhase:y,activeSeason:n||null,nextEpisode:i||null,primaryLeagueId:j,castawayCount:u||0})}),r.jsx("div",{className:"mb-4",children:r.jsx(oX,{leagueCount:m.length,activeCastaways:v,totalPoints:w})}),(g==null?void 0:g.rank)&&r.jsx("div",{className:"mb-4",children:r.jsx(lX,{rank:g.rank,totalPoints:g.total_points})}),r.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-lg font-display font-bold text-neutral-800",children:"My Leagues"}),r.jsxs(Y,{to:"/leagues",className:"text-burgundy-500 hover:text-burgundy-600 text-sm font-semibold flex items-center gap-1",children:["View All ",r.jsx(kr,{className:"h-4 w-4"})]})]}),m.length>0?r.jsx("div",{className:"space-y-3",children:m.map(E=>r.jsx(cX,{leagueId:E.league_id,leagueName:E.league.name,leagueCode:E.league.code,totalPoints:E.total_points,rank:E.rank,rosters:p[E.league_id]||[]},E.league_id))}):r.jsxs("div",{className:"bg-white rounded-2xl p-8 text-center border border-cream-200",children:[r.jsx("div",{className:"w-12 h-12 bg-cream-100 rounded-full flex items-center justify-center mx-auto mb-3",children:r.jsx(Ye,{className:"h-6 w-6 text-neutral-400"})}),r.jsx("h3",{className:"font-semibold text-neutral-800 mb-2",children:"No leagues yet"}),r.jsx("p",{className:"text-neutral-500 mb-4",children:"Join or create a league to start playing!"}),r.jsxs("div",{className:"flex gap-3 justify-center",children:[r.jsx(Y,{to:"/leagues/create",className:"btn btn-primary",children:"Create League"}),r.jsx(Y,{to:"/leagues",className:"btn btn-secondary",children:"Browse Leagues"})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[n&&r.jsx(uX,{season:n}),r.jsx(dX,{}),r.jsx(hX,{})]})]}),r.jsx(Qt,{})]})}function LZ({castaway:e,index:t,totalCount:n,isDragging:s,isLocked:a,onDragStart:i,onDragOver:l,onDragEnd:u,onMoveUp:d,onMoveDown:h}){return r.jsxs("div",{draggable:!a,onDragStart:i,onDragOver:l,onDragEnd:u,className:`p-3 flex items-center gap-3 transition-all ${s?"bg-burgundy-50 opacity-50":"hover:bg-cream-50"} ${a?"cursor-default":"cursor-grab active:cursor-grabbing"}`,children:[r.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${t<2?"bg-burgundy-100 text-burgundy-600":t<5?"bg-amber-100 text-amber-600":"bg-cream-100 text-neutral-600"}`,children:t+1}),!a&&r.jsx(qv,{className:"h-5 w-5 text-neutral-300 flex-shrink-0"}),r.jsx("img",{src:Jn(e.name,e.photo_url),alt:e.name,className:"w-10 h-10 rounded-full object-cover border border-cream-200"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"font-medium text-neutral-800 truncate",children:e.name}),r.jsxs("div",{className:"flex items-center gap-2 text-xs text-neutral-500",children:[e.age&&r.jsxs("span",{children:[e.age," yrs"]}),e.hometown&&r.jsxs(r.Fragment,{children:[e.age&&r.jsx("span",{children:""}),r.jsx("span",{children:e.hometown})]}),e.occupation&&r.jsxs(r.Fragment,{children:[r.jsx("span",{children:""}),r.jsx("span",{className:"truncate",children:e.occupation})]})]})]}),!a&&r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx("button",{onClick:d,disabled:t===0,className:"p-1 hover:bg-cream-100 rounded disabled:opacity-30 disabled:cursor-not-allowed",children:r.jsx(qr,{className:"h-4 w-4 text-neutral-500"})}),r.jsx("button",{onClick:h,disabled:t===n-1,className:"p-1 hover:bg-cream-100 rounded disabled:opacity-30 disabled:cursor-not-allowed",children:r.jsx(xn,{className:"h-4 w-4 text-neutral-500"})})]})]})}function $Z({leagueId:e,league:t,rankings:n,castawayMap:s,onEditRankings:a}){return r.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200",children:[r.jsx(de,{}),r.jsxs("div",{className:"max-w-2xl mx-auto p-4 pb-24",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx(Y,{to:`/leagues/${e}`,className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:r.jsx(at,{className:"h-5 w-5 text-neutral-600"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h1",{className:"text-2xl font-display font-bold text-neutral-800",children:"Rankings Saved!"}),r.jsx("p",{className:"text-neutral-500",children:t==null?void 0:t.name})]})]}),r.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 rounded-2xl p-6 text-white shadow-elevated mb-6",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-14 h-14 bg-white/20 rounded-full flex items-center justify-center",children:r.jsx(Rt,{className:"h-7 w-7"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-display font-bold",children:"Rankings Confirmed!"}),r.jsx("p",{className:"text-green-100",children:"Your draft preferences have been saved for all leagues."})]})]})}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated border border-cream-200 overflow-hidden mb-6",children:[r.jsxs("div",{className:"p-5 border-b border-cream-100",children:[r.jsxs("h2",{className:"text-lg font-display font-bold text-neutral-800 flex items-center gap-2",children:[r.jsx(rt,{className:"h-5 w-5 text-burgundy-500"}),"Your Complete Rankings"]}),r.jsxs("p",{className:"text-sm text-neutral-500 mt-1",children:[n.length," castaways ranked"]})]}),r.jsx("div",{className:"divide-y divide-cream-100 max-h-[60vh] overflow-y-auto",children:n.map((i,l)=>{const u=s.get(i);return u?r.jsxs("div",{className:"p-3 flex items-center gap-3",children:[r.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${l<2?"bg-burgundy-100 text-burgundy-600":l<5?"bg-amber-100 text-amber-600":"bg-cream-100 text-neutral-600"}`,children:l+1}),r.jsx("img",{src:Jn(u.name,u.photo_url),alt:u.name,className:"w-10 h-10 rounded-full object-cover border border-cream-200"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"font-medium text-neutral-800 truncate",children:u.name}),r.jsxs("div",{className:"flex items-center gap-2 text-xs text-neutral-500",children:[u.age&&r.jsxs("span",{children:[u.age," yrs"]}),u.hometown&&r.jsxs(r.Fragment,{children:[u.age&&r.jsx("span",{children:""}),r.jsx("span",{children:u.hometown})]})]})]})]},i):null})})]}),r.jsxs("div",{className:"flex gap-4",children:[r.jsx("button",{onClick:a,className:"flex-1 btn btn-secondary",children:"Edit Rankings"}),r.jsx(Y,{to:`/leagues/${e}`,className:"flex-1 btn btn-primary text-center",children:"Back to League"})]})]})]})}function DZ({leagueId:e,league:t,roster:n}){return r.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200",children:[r.jsx(de,{}),r.jsxs("div",{className:"max-w-2xl mx-auto p-4 pb-24",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx(Y,{to:`/leagues/${e}`,className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:r.jsx(at,{className:"h-5 w-5 text-neutral-600"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-display font-bold text-neutral-800",children:"Draft Results"}),r.jsx("p",{className:"text-neutral-500",children:t==null?void 0:t.name})]})]}),r.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 rounded-2xl p-6 text-white shadow-elevated mb-6",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-14 h-14 bg-white/20 rounded-full flex items-center justify-center",children:r.jsx(rt,{className:"h-7 w-7"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-display font-bold",children:"Draft Complete!"}),r.jsx("p",{className:"text-green-100",children:"Your team has been drafted based on your rankings."})]})]})}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated border border-cream-200 overflow-hidden",children:[r.jsx("div",{className:"p-5 border-b border-cream-100",children:r.jsxs("h2",{className:"text-lg font-display font-bold text-neutral-800 flex items-center gap-2",children:[r.jsx(Ye,{className:"h-5 w-5 text-burgundy-500"}),"Your Team"]})}),r.jsx("div",{className:"divide-y divide-cream-100",children:n.map((s,a)=>{var i,l,u,d,h,p,m,g;return r.jsxs("div",{className:"p-4 flex items-center gap-4",children:[r.jsx("div",{className:"w-10 h-10 bg-burgundy-100 rounded-full flex items-center justify-center",children:r.jsxs("span",{className:"font-bold text-burgundy-600",children:["#",a+1]})}),r.jsx("img",{src:Jn(((i=s.castaways)==null?void 0:i.name)||"Unknown",(l=s.castaways)==null?void 0:l.photo_url),alt:((u=s.castaways)==null?void 0:u.name)||"Castaway",className:"w-14 h-14 rounded-full object-cover border-2 border-cream-200"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-semibold text-neutral-800",children:(d=s.castaways)==null?void 0:d.name}),r.jsxs("div",{className:"flex items-center gap-2 text-sm text-neutral-500",children:[((h=s.castaways)==null?void 0:h.age)&&r.jsxs("span",{children:[s.castaways.age," yrs"]}),((p=s.castaways)==null?void 0:p.hometown)&&r.jsxs(r.Fragment,{children:[((m=s.castaways)==null?void 0:m.age)&&r.jsx("span",{children:""}),r.jsx("span",{children:s.castaways.hometown})]}),((g=s.castaways)==null?void 0:g.occupation)&&r.jsxs(r.Fragment,{children:[r.jsx("span",{children:""}),r.jsx("span",{children:s.castaways.occupation})]})]})]}),r.jsx("div",{className:"text-right",children:r.jsxs("p",{className:"text-xs text-neutral-400",children:["Round ",s.draft_round]})})]},s.id)})})]}),r.jsx("div",{className:"mt-6 text-center",children:r.jsx(Y,{to:`/leagues/${e}`,className:"btn btn-primary",children:"Back to League"})})]})]})}function FZ({rankings:e,castawayMap:t,isPending:n,onConfirm:s,onCancel:a}){return r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated max-w-lg w-full max-h-[90vh] flex flex-col",children:[r.jsxs("div",{className:"p-6 border-b border-cream-100 flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-display font-bold text-neutral-800",children:"Confirm Your Rankings"}),r.jsxs("p",{className:"text-neutral-500 text-sm mt-1",children:["This will apply to ",r.jsx("strong",{className:"text-neutral-700",children:"all your leagues"})," this season"]})]}),r.jsx("button",{onClick:a,className:"p-2 hover:bg-cream-100 rounded-lg transition-colors",children:r.jsx(Sn,{className:"h-5 w-5 text-neutral-400"})})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:r.jsxs("div",{className:"bg-cream-50 rounded-xl p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("p",{className:"text-sm font-medium text-neutral-700",children:"Your Complete Rankings"}),r.jsxs("span",{className:"text-xs text-neutral-500",children:[e.length," castaways"]})]}),r.jsx("div",{className:"space-y-1",children:e.map((i,l)=>{const u=t.get(i);if(!u)return null;const d=l<2,h=l>=2&&l<6;return r.jsxs("div",{className:`flex items-center gap-3 p-2 rounded-lg transition-colors ${d?"bg-burgundy-50 border border-burgundy-100":h?"bg-amber-50/50":"hover:bg-cream-100"}`,children:[r.jsx("span",{className:`w-7 h-7 rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0 ${d?"bg-burgundy-500 text-white":h?"bg-amber-100 text-amber-700":"bg-cream-200 text-neutral-500"}`,children:l+1}),u.photo_url&&r.jsx("img",{src:u.photo_url,alt:u.name,className:"w-8 h-8 rounded-full object-cover flex-shrink-0"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("span",{className:`block truncate ${d?"font-medium text-burgundy-800":"text-neutral-700"}`,children:u.name}),u.tribe_original&&r.jsx("span",{className:"text-xs text-neutral-400",children:u.tribe_original})]}),d&&r.jsx("span",{className:"text-xs font-medium text-burgundy-600 bg-burgundy-100 px-2 py-0.5 rounded-full flex-shrink-0",children:"Top Pick"})]},i)})})]})}),r.jsx("div",{className:"p-4 border-t border-cream-100 bg-cream-50/50",children:r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:a,className:"flex-1 btn btn-secondary",children:"Go Back"}),r.jsxs("button",{onClick:s,disabled:n,className:"flex-1 btn btn-primary flex items-center justify-center gap-2",children:[n?r.jsx(ge,{className:"h-4 w-4 animate-spin"}):r.jsx(Rt,{className:"h-4 w-4"}),"Confirm & Save"]})]})})]})})}function UZ(e){return se({queryKey:["userProfile",e],queryFn:async()=>{if(!e)return null;const{data:t,error:n}=await G.from("users").select("*").eq("id",e).single();if(n)throw n;return t},enabled:!!e,staleTime:300*1e3})}function qZ(e){return se({queryKey:["nextEpisode",e],queryFn:async()=>{if(!e)return null;const{data:t,error:n}=await G.from("episodes").select("*").eq("season_id",e).eq("is_scored",!1).order("number",{ascending:!0}).limit(1).single();if(n&&n.code!=="PGRST116")throw n;return t},enabled:!!e,staleTime:60*1e3})}function A4(e){return se({queryKey:["castaways",e],queryFn:async()=>{if(!e)return[];const{data:t,error:n}=await G.from("castaways").select("*").eq("season_id",e).order("name",{ascending:!0});if(n)throw n;return t},enabled:!!e,staleTime:120*1e3})}function zv(e){return se({queryKey:["league",e],queryFn:async()=>{if(!e)return null;const{data:t,error:n}=await G.from("leagues").select(`
          *,
          seasons(*),
          commissioner:users!leagues_commissioner_id_fkey(id, display_name)
        `).eq("id",e).single();if(n)throw n;return t},enabled:!!e,staleTime:120*1e3})}function BZ(e){return se({queryKey:["leagueMembers",e],queryFn:async()=>{if(!e)return[];const{data:t,error:n}=await G.from("league_members").select(`
          *,
          users (
            id,
            display_name,
            avatar_url
          )
        `).eq("league_id",e).order("rank",{ascending:!0});if(n)throw n;return t},enabled:!!e,staleTime:120*1e3})}function Wv(e,t){return se({queryKey:["roster",e,t],queryFn:async()=>{if(!e||!t)return[];const{data:n,error:s}=await G.from("rosters").select(`
          *,
          castaways (
            id,
            name,
            status,
            tribe_original,
            placement,
            photo_url
          )
        `).eq("league_id",e).eq("user_id",t).is("dropped_at",null).order("draft_pick",{ascending:!0});if(s)throw s;return n},enabled:!!e&&!!t,staleTime:120*1e3})}function HZ(e){return se({queryKey:["leagueRosters",e],queryFn:async()=>{if(!e)return[];const{data:t,error:n}=await G.from("rosters").select(`
          *,
          users (
            id,
            display_name
          ),
          castaways (
            id,
            name,
            status,
            tribe_original,
            placement,
            photo_url
          )
        `).eq("league_id",e).is("dropped_at",null).order("user_id",{ascending:!0}).order("draft_pick",{ascending:!0});if(n)throw n;return t},enabled:!!e,staleTime:120*1e3})}const zZ=e=>e instanceof TypeError,WZ=e=>e===408||e===429||e>=502&&e<=504,bk=e=>new Promise(t=>setTimeout(t,e));async function GZ(e,t={}){const{maxRetries:n=3,retryDelay:s=1e3,...a}=t;let i=null,l=null;for(let u=0;u<=n;u++)try{const d=await fetch(e,a);if(d.ok||!WZ(d.status)||(l=d,u===n))return d;const h=s*Math.pow(2,u);console.warn(`API request to ${e} failed with status ${d.status}, retrying in ${h}ms...`),await bk(h)}catch(d){if(i=d instanceof Error?d:new Error(String(d)),!zZ(d)||u===n)throw i;const h=s*Math.pow(2,u);console.warn(`Network error on ${e}, retrying in ${h}ms...`,d),await bk(h)}if(l)return l;throw i||new Error("Unknown error")}async function Op(e,t={}){const s=e.startsWith("/api")?e:`/api${e}`,a=t.method||"GET",i=performance.now();return Ms({op:"http.client",name:`${a} ${s}`},async l=>{try{l.setAttribute("http.method",a),l.setAttribute("http.url",s);const u=await GZ(s,{...t,headers:{"Content-Type":"application/json",...t.headers}}),d=u.status,h=performance.now()-i;l.setAttribute("http.status_code",d),Kt.distribution("api_response_time",h,{endpoint:s.replace(/\/[a-f0-9-]{36}/g,"/:id"),method:a,status:String(d)});const p=await u.text();if(!p)return{data:null,error:u.ok?null:"Empty response",status:d};let m=null,g=null;try{const y=JSON.parse(p);u.ok?m=y:(g=y.error||y.message||`Request failed with status ${d}`,l.setAttribute("error",g||"Unknown error"),Kt.count("api_error",1,{endpoint:s,status:String(d)}))}catch{g=p,l.setAttribute("error",g)}return{data:m,error:g,status:d}}catch(u){const d=u instanceof Error?u:new Error(String(u)),h=performance.now()-i;return l.setAttribute("error",!0),l.setAttribute("error.message",d.message),Kt.distribution("api_response_time",h,{endpoint:s.replace(/\/[a-f0-9-]{36}/g,"/:id"),method:a,status:"error"}),Kt.count("api_error",1,{endpoint:s,type:"network"}),dt(d,{tags:{api_endpoint:s,http_method:a}}),{data:null,error:d.message,status:0}}})}async function ut(e,t,n={}){return Op(e,{...n,headers:{...n.headers,Authorization:`Bearer ${t}`}})}const VZ=(e,t,n)=>n?ut(e,n,{method:"POST",body:JSON.stringify(t)}):Op(e,{method:"POST",body:JSON.stringify(t)});function O4(e){return se({queryKey:["profile",e],queryFn:async()=>{const{data:t,error:n}=await G.from("users").select("id, display_name, role").eq("id",e).single();if(n)throw n;return t},enabled:!!e})}function M4(){return se({queryKey:["activeSeason"],queryFn:async()=>{const{data:e,error:t}=await G.from("seasons").select("*").eq("is_active",!0).single();if(t&&t.code!=="PGRST116")throw t;return e}})}function L4(e){return se({queryKey:["episodes",e],queryFn:async()=>{if(!e)return[];const{data:t,error:n}=await G.from("episodes").select("*").eq("season_id",e).order("number",{ascending:!0});if(n)throw n;return t},enabled:!!e})}function $4(e){return se({queryKey:["castaways",e],queryFn:async()=>{if(!e)return[];const{data:t,error:n}=await G.from("castaways").select("*").eq("season_id",e).order("name");if(n)throw n;return t},enabled:!!e})}function D4(e){return se({queryKey:["scoringRules",e],queryFn:async()=>{if(!e)return[];const{data:t,error:n}=await G.from("scoring_rules").select("*").eq("season_id",e).eq("is_active",!0).order("sort_order");if(n)throw n;return t},enabled:!!e})}function F4(e){return se({queryKey:["episodeScores",e],queryFn:async()=>{if(!e)return[];const{data:t,error:n}=await G.from("episode_scores").select("*").eq("episode_id",e);if(n)throw n;return t},enabled:!!e})}function U4(e){return se({queryKey:["scoringStatus",e],queryFn:async()=>{if(!e)return null;const{data:{session:t}}=await G.auth.getSession();if(!(t!=null&&t.access_token))throw new Error("Not authenticated");const n=await ut(`/episodes/${e}/scoring/status`,t.access_token);if(n.error)throw new Error(n.error);return n.data},enabled:!!e,refetchInterval:5e3})}function KZ(e){const t=(e==null?void 0:e.reduce((a,i)=>{const l=i.category||"Other";return a[l]||(a[l]=[]),a[l].push(i),a},{}))||{},n=["Survival","Tribal Council","Challenges","Strategy","Social","Advantages","Finale","Other"],s={};return n.forEach(a=>{t[a]&&(s[a]=t[a])}),Object.keys(t).forEach(a=>{s[a]||(s[a]=t[a])}),s}const YZ=["SURVIVED_EPISODE","VOTE_CORRECT","VOTE_RECEIVED","WON_IMMUNITY_IND","WON_IMMUNITY_TRIBE","WON_REWARD","FOUND_IDOL","PLAYED_IDOL_SELF","ELIMINATED","CONFESSIONAL"];function JZ(e){return e?YZ.map(t=>e.find(n=>n.code===t)).filter(t=>t!==void 0):[]}function QZ(){var X;const{leagueId:e}=kn(),{user:t}=yt(),n=zt(),[s,a]=C.useState([]),[i,l]=C.useState(!1),[u,d]=C.useState(null),[h,p]=C.useState(!1),[m,g]=C.useState(!1),{data:y,isLoading:b}=zv(e),{data:w,isLoading:v}=A4(y==null?void 0:y.season_id),{data:j}=Wv(e,t==null?void 0:t.id),{data:E,isLoading:k}=se({queryKey:["draft-rankings",y==null?void 0:y.season_id,t==null?void 0:t.id],queryFn:async()=>{if(!(y!=null&&y.season_id)||!(t!=null&&t.id))return null;const{data:ee,error:D}=await G.from("draft_rankings").select("*").eq("season_id",y.season_id).eq("user_id",t.id).single();return D&&D.code!=="PGRST116"?null:ee},enabled:!!(y!=null&&y.season_id)&&!!(t!=null&&t.id)});C.useEffect(()=>{E!=null&&E.rankings?a(E.rankings):w&&w.length>0&&s.length===0&&a(w.map(ee=>ee.id))},[E,w]);const S=$e({mutationFn:async()=>{if(!(y!=null&&y.season_id)||!(t!=null&&t.id))throw new Error("Missing required data");const{error:ee}=await G.from("draft_rankings").upsert({season_id:y.season_id,user_id:t.id,rankings:s,submitted_at:new Date().toISOString()},{onConflict:"user_id,season_id"});if(ee)throw ee},onSuccess:()=>{n.invalidateQueries({queryKey:["draft-rankings",y==null?void 0:y.season_id,t==null?void 0:t.id]}),l(!1),p(!1),g(!0)}}),P=C.useMemo(()=>{const ee=new Map;return w==null||w.forEach(D=>ee.set(D.id,D)),ee},[w]),A=(X=y==null?void 0:y.seasons)!=null&&X.draft_deadline?new Date(y.seasons.draft_deadline):null,L=A?new Date>A:!1,H=(y==null?void 0:y.draft_status)==="completed",R=ee=>{if(ee===0)return;const D=[...s];[D[ee-1],D[ee]]=[D[ee],D[ee-1]],a(D),l(!0)},M=ee=>{if(ee===s.length-1)return;const D=[...s];[D[ee],D[ee+1]]=[D[ee+1],D[ee]],a(D),l(!0)},O=ee=>d(ee),F=(ee,D)=>{if(ee.preventDefault(),u===null||u===D)return;const te=[...s],[V]=te.splice(u,1);te.splice(D,0,V),a(te),d(D),l(!0)},K=()=>d(null);return b||v||k?r.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200",children:[r.jsx(de,{}),r.jsx("div",{className:"flex items-center justify-center py-24",children:r.jsx(ge,{className:"h-8 w-8 text-burgundy-500 animate-spin"})})]}):m?r.jsx($Z,{leagueId:e,league:y||void 0,rankings:s,castawayMap:P,onEditRankings:()=>g(!1)}):H&&j&&j.length>0?r.jsx(DZ,{leagueId:e,league:y||void 0,roster:j}):r.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200",children:[r.jsx(de,{}),r.jsxs("div",{className:"max-w-3xl mx-auto p-4 pb-24",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx(Y,{to:`/leagues/${e}`,className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:r.jsx(at,{className:"h-5 w-5 text-neutral-600"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h1",{className:"text-2xl font-display font-bold text-neutral-800",children:"Draft Rankings"}),r.jsx("p",{className:"text-neutral-500",children:y==null?void 0:y.name})]}),i&&!L&&r.jsxs("button",{onClick:()=>p(!0),disabled:S.isPending,className:"btn btn-primary flex items-center gap-2",children:[S.isPending?r.jsx(ge,{className:"h-4 w-4 animate-spin"}):r.jsx(bi,{className:"h-4 w-4"}),"Save Rankings"]})]}),r.jsx("div",{className:"bg-gradient-to-r from-burgundy-500 to-burgundy-600 rounded-2xl p-5 text-white shadow-elevated mb-6",children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center flex-shrink-0",children:r.jsx(Ep,{className:"h-6 w-6"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"font-display font-bold text-lg mb-1",children:"How the Draft Works"}),r.jsxs("p",{className:"text-burgundy-100 text-sm",children:["Rank all ",(w==null?void 0:w.length)||18," castaways from your most wanted (#1) to least wanted.",r.jsxs("strong",{className:"text-white",children:[" ","Your rankings apply to ALL your leagues this season."]})," ","At the deadline, the system runs a snake draft using everyone's rankings. You'll get 2 castaways based on your draft position and preferences in each league."]})]})]})}),A&&r.jsxs("div",{className:`rounded-2xl p-4 mb-6 flex items-center gap-4 ${L?"bg-red-50 border border-red-200":"bg-amber-50 border border-amber-200"}`,children:[r.jsx(Ln,{className:`h-6 w-6 ${L?"text-red-500":"text-amber-500"}`}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:`font-medium ${L?"text-red-700":"text-amber-700"}`,children:L?"Draft Deadline Passed":"Draft Deadline"}),r.jsx("p",{className:`text-sm ${L?"text-red-600":"text-amber-600"}`,children:A.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",timeZoneName:"short"})})]}),E&&r.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[r.jsx(Rt,{className:"h-5 w-5"}),r.jsx("span",{className:"text-sm font-medium",children:"Submitted"})]})]}),L&&!H&&r.jsxs("div",{className:"bg-neutral-100 rounded-2xl p-6 text-center mb-6 border border-neutral-200",children:[r.jsx(ot,{className:"h-10 w-10 text-neutral-400 mx-auto mb-3"}),r.jsx("p",{className:"text-neutral-600 font-medium",children:"Rankings are locked"}),r.jsx("p",{className:"text-neutral-500 text-sm mt-1",children:"The draft deadline has passed. The system will process the draft soon."})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated border border-cream-200 overflow-hidden",children:[r.jsxs("div",{className:"p-5 border-b border-cream-100 flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-display font-bold text-neutral-800",children:"Your Rankings"}),r.jsx("p",{className:"text-sm text-neutral-500",children:E?"Last saved "+new Date(E.submitted_at).toLocaleDateString():"Drag to reorder or use arrows"})]}),r.jsxs("div",{className:"text-sm text-neutral-400",children:[s.length," castaways"]})]}),r.jsx("div",{className:"divide-y divide-cream-100",children:s.map((ee,D)=>{const te=P.get(ee);return te?r.jsx(LZ,{castaway:te,index:D,totalCount:s.length,isDragging:u===D,isLocked:L,onDragStart:()=>O(D),onDragOver:V=>F(V,D),onDragEnd:K,onMoveUp:()=>R(D),onMoveDown:()=>M(D)},ee):null})})]}),i&&!L&&r.jsx("div",{className:"fixed bottom-0 left-0 right-0 p-4 bg-white border-t border-cream-200 shadow-elevated",children:r.jsxs("div",{className:"max-w-3xl mx-auto flex items-center justify-between",children:[r.jsx("p",{className:"text-neutral-500 text-sm",children:"You have unsaved changes"}),r.jsxs("button",{onClick:()=>p(!0),disabled:S.isPending,className:"btn btn-primary flex items-center gap-2",children:[S.isPending?r.jsx(ge,{className:"h-4 w-4 animate-spin"}):r.jsx(bi,{className:"h-4 w-4"}),"Save Rankings"]})]})}),h&&r.jsx(FZ,{rankings:s,castawayMap:P,isPending:S.isPending,onConfirm:()=>S.mutate(),onCancel:()=>p(!1)})]})]})}function XZ({episode:e,timeLeft:t}){const n=t.days===0&&t.hours<2;return r.jsx("div",{className:`rounded-2xl p-6 text-white shadow-elevated animate-slide-up ${n?"bg-gradient-to-r from-orange-500 to-red-500":"bg-gradient-to-r from-burgundy-500 to-burgundy-600"}`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:`text-sm font-medium ${n?"text-orange-100":"text-burgundy-100"}`,children:n?"HURRY! Picks Lock In":"Picks Lock In"}),r.jsxs("div",{className:"flex items-baseline gap-2 sm:gap-3 mt-2",children:[t.days>0&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"text-center",children:[r.jsx("span",{className:"text-3xl sm:text-4xl font-display",children:t.days}),r.jsx("p",{className:"text-xs text-burgundy-200 mt-1",children:"days"})]}),r.jsx("span",{className:"text-xl sm:text-2xl text-burgundy-200",children:":"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("span",{className:"text-3xl sm:text-4xl font-display",children:t.hours}),r.jsx("p",{className:"text-xs text-burgundy-200 mt-1",children:"hours"})]}),r.jsx("span",{className:"text-xl sm:text-2xl text-burgundy-200",children:":"}),r.jsxs("div",{className:"text-center",children:[r.jsx("span",{className:"text-3xl sm:text-4xl font-display",children:t.minutes}),r.jsx("p",{className:"text-xs text-burgundy-200 mt-1",children:"min"})]}),n&&r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"text-xl sm:text-2xl text-burgundy-200",children:":"}),r.jsxs("div",{className:"text-center",children:[r.jsx("span",{className:"text-3xl sm:text-4xl font-display",children:t.seconds}),r.jsx("p",{className:"text-xs text-burgundy-200 mt-1",children:"sec"})]})]})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:`text-sm ${n?"text-orange-100":"text-burgundy-100"}`,children:"Episode airs"}),r.jsx("p",{className:"font-semibold text-lg",children:new Date(e.air_date).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]})]})})}function ZZ({wasAutoPicked:e,pickSubmitted:t,isUrgent:n,isVeryUrgent:s}){return r.jsxs(r.Fragment,{children:[e&&r.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-2xl p-4 flex items-start gap-3 animate-slide-up",style:{animationDelay:"0.05s"},children:[r.jsx(ot,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-amber-800",children:"You were auto-picked last episode"}),r.jsx("p",{className:"text-sm text-amber-700",children:"You didn't submit a pick in time, so the system picked for you. Make sure to submit your pick before the deadline!"})]})]}),!t&&!s&&n&&r.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-2xl p-4 flex items-start gap-3 animate-slide-up",style:{animationDelay:"0.05s"},children:[r.jsx(Ln,{className:"w-5 h-5 text-orange-600 flex-shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-orange-800",children:"Don't forget to pick!"}),r.jsx("p",{className:"text-sm text-orange-700",children:"If you don't submit a pick, the system will randomly select one of your active castaways."})]})]}),!t&&s&&r.jsxs("div",{className:"bg-red-50 border border-red-300 rounded-2xl p-4 flex items-start gap-3 animate-pulse",children:[r.jsx(ot,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-red-800",children:"Less than 30 minutes left!"}),r.jsx("p",{className:"text-sm text-red-700",children:"Submit your pick now or you'll be auto-picked!"})]})]})]})}function eee({castaway:e,isSelected:t,stats:n,onSelect:s}){var a;return r.jsxs("button",{onClick:s,className:`w-full p-5 rounded-xl border-2 transition-all text-left flex items-center gap-5 ${t?"border-burgundy-500 bg-burgundy-50 shadow-card":"border-cream-200 bg-cream-50 hover:border-cream-300 hover:shadow-sm"}`,children:[r.jsx("img",{src:Jn(e.name||"Unknown",e.photo_url),alt:e.name||"Castaway",className:"w-16 h-16 rounded-xl object-cover"}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("h3",{className:`font-semibold text-lg ${t?"text-burgundy-700":"text-neutral-800"}`,children:e.name}),r.jsx("span",{className:`badge text-xs ${e.status==="active"?"badge-success":"bg-neutral-100 text-neutral-500"}`,children:(a=e.status)==null?void 0:a.toUpperCase()})]}),n&&n.times_picked>0?r.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[r.jsxs("div",{className:"flex items-center gap-1 text-neutral-500",children:[r.jsx(rt,{className:"w-3.5 h-3.5"}),r.jsxs("span",{children:[n.total_points," pts total"]})]}),r.jsxs("div",{className:"flex items-center gap-1 text-neutral-500",children:[r.jsx(wa,{className:"w-3.5 h-3.5"}),r.jsxs("span",{children:[n.times_picked,"x picked"]})]}),r.jsxs("div",{className:"flex items-center gap-1 text-neutral-500",children:[r.jsx(Do,{className:"w-3.5 h-3.5"}),r.jsxs("span",{children:[n.avg_points," avg"]})]})]}):r.jsx("p",{className:"text-sm text-neutral-400",children:"Not yet picked this season"})]}),r.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center ${t?"border-burgundy-500 bg-burgundy-500":"border-cream-300"}`,children:t&&r.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})})]})}function tee({roster:e,activeCastaways:t,selectedCastaway:n,currentPickCastawayId:s,pickSubmitted:a,showSuccess:i,mutationError:l,isPending:u,castawayStats:d,onSelect:h,onSubmit:p}){var g,y;const m=b=>d==null?void 0:d.find(w=>w.castaway_id===b);return r.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated overflow-hidden animate-slide-up",style:{animationDelay:"0.1s"},children:[r.jsxs("div",{className:"p-6 border-b border-cream-100",children:[r.jsx("h2",{className:"font-semibold text-neutral-800",children:"Select Your Castaway"}),r.jsx("p",{className:"text-sm text-neutral-500 mt-1",children:"Choose which player from your roster to play this week"})]}),r.jsx("div",{className:"p-6 space-y-4",children:t.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-orange-100 rounded-full flex items-center justify-center",children:r.jsx(ot,{className:"w-8 h-8 text-orange-600"})}),r.jsx("h3",{className:"text-lg font-semibold text-neutral-800 mb-2",children:"No Active Castaways"}),r.jsx("p",{className:"text-neutral-500 mb-4",children:e&&e.length>0?"All your castaways have been eliminated. Your season has ended.":"Your roster is empty. This shouldn't happen - please contact support."})]}):t.map(b=>r.jsx(eee,{castaway:b.castaways,isSelected:n===b.castaway_id,stats:m(b.castaway_id),onSelect:()=>h(b.castaway_id)},b.id))}),r.jsxs("div",{className:"p-6 border-t border-cream-100 bg-cream-50/50",children:[i&&r.jsxs("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-xl flex items-center gap-3",children:[r.jsx(At,{className:"h-5 w-5 text-green-600 flex-shrink-0"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-green-800",children:"Pick Saved!"}),r.jsx("p",{className:"text-sm text-green-600",children:"You can change it until picks lock."})]})]}),l&&r.jsxs("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-xl flex items-center gap-3",children:[r.jsx(ot,{className:"h-5 w-5 text-red-600 flex-shrink-0"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-red-800",children:"Failed to Save"}),r.jsx("p",{className:"text-sm text-red-600",children:l})]})]}),r.jsx("button",{onClick:p,disabled:!n||u,className:`w-full btn ${n?"btn-primary shadow-card":"bg-cream-200 text-neutral-400 cursor-not-allowed"}`,children:u?r.jsxs("span",{className:"flex items-center justify-center gap-2",children:[r.jsx(ge,{className:"h-4 w-4 animate-spin"}),"Saving..."]}):a?"Update Pick":n?"Confirm Pick":"Select a Castaway"}),a&&!i&&r.jsxs("p",{className:"text-center text-sm text-neutral-500 mt-3",children:["Current pick:"," ",r.jsx("span",{className:"font-medium text-neutral-700",children:(y=(g=e==null?void 0:e.find(b=>b.castaway_id===s))==null?void 0:g.castaways)==null?void 0:y.name})]})]})]})}function nee({picks:e}){return e.length===0?null:r.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated p-6 animate-slide-up",style:{animationDelay:"0.2s"},children:[r.jsx("h3",{className:"font-semibold text-neutral-800 mb-4",children:"Previous Picks"}),r.jsx("div",{className:"space-y-3",children:e.map(t=>{var n,s;return r.jsxs("div",{className:"flex items-center justify-between p-3 bg-cream-50 rounded-xl",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("span",{className:"text-sm font-medium text-neutral-500",children:["Ep ",(n=t.episodes)==null?void 0:n.number]}),r.jsx("span",{className:"font-medium text-neutral-800",children:((s=t.castaways)==null?void 0:s.name)||"Unknown"})]}),r.jsxs("span",{className:`badge ${t.points_earned>=0?"badge-success":"bg-red-100 text-red-700"}`,children:[t.points_earned>=0?"+":"",t.points_earned," pts"]})]},t.id)})})]})}function ree({leagueId:e}){return r.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated p-12 text-center animate-slide-up",children:[r.jsx("div",{className:"w-20 h-20 mx-auto mb-6 bg-amber-100 rounded-full flex items-center justify-center",children:r.jsx(ot,{className:"w-10 h-10 text-amber-600"})}),r.jsx("h2",{className:"text-2xl font-display text-neutral-800 mb-3",children:"Complete Your Draft First"}),r.jsx("p",{className:"text-neutral-500 mb-8",children:"You need to complete the draft before you can make weekly picks. Head to the draft room to select your castaways!"}),r.jsx(Y,{to:`/leagues/${e}/draft`,className:"btn btn-primary shadow-card",children:"Go to Draft Room"})]})}function see({leagueId:e}){return r.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated p-12 text-center animate-slide-up",children:[r.jsx("div",{className:"w-20 h-20 mx-auto mb-6 bg-cream-100 rounded-full flex items-center justify-center",children:r.jsx(Ln,{className:"w-10 h-10 text-neutral-400"})}),r.jsx("h2",{className:"text-2xl font-display text-neutral-800 mb-3",children:"No Episode Scheduled"}),r.jsx("p",{className:"text-neutral-500 mb-8",children:"There are no upcoming episodes with open picks. Check back later!"}),r.jsx(Y,{to:`/leagues/${e}`,className:"btn btn-primary shadow-card",children:"Back to League"})]})}function aee({leagueId:e,episode:t,roster:n,currentPickCastawayId:s}){var a,i;return r.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated p-12 text-center animate-slide-up",children:[r.jsx("div",{className:"w-20 h-20 mx-auto mb-6 bg-burgundy-100 rounded-full flex items-center justify-center",children:r.jsx(Dn,{className:"w-10 h-10 text-burgundy-600"})}),r.jsx("h2",{className:"text-2xl font-display text-neutral-800 mb-3",children:"Picks Locked"}),r.jsxs("p",{className:"text-neutral-500 mb-2",children:["Your pick for Episode ",t.number," is locked."]}),s?r.jsx("p",{className:"text-lg font-semibold text-burgundy-600 mb-8",children:((i=(a=n==null?void 0:n.find(l=>l.castaway_id===s))==null?void 0:a.castaways)==null?void 0:i.name)||"Unknown"}):r.jsx("p",{className:"text-lg font-semibold text-orange-600 mb-8",children:"No pick submitted - auto-pick will be applied"}),r.jsx(Y,{to:`/leagues/${e}`,className:"btn btn-primary shadow-card",children:"Back to League"})]})}function iee(){var ae;const{leagueId:e}=kn(),{user:t}=yt(),n=zt(),[s,a]=C.useState(null),[i,l]=C.useState({days:0,hours:0,minutes:0,seconds:0}),[u,d]=C.useState(!1),[h,p]=C.useState(null),{data:m}=zv(e),{data:g,isLoading:y}=Wv(e,t==null?void 0:t.id),{data:b}=se({queryKey:["currentEpisode",m==null?void 0:m.season_id],queryFn:async()=>{if(!(m!=null&&m.season_id))throw new Error("No season ID");const X=new Date().toISOString(),{data:ee,error:D}=await G.from("episodes").select("*").eq("season_id",m.season_id).gte("picks_lock_at",X).order("air_date",{ascending:!0}).limit(1).single();if(D&&D.code!=="PGRST116")throw D;return ee},enabled:!!(m!=null&&m.season_id)}),{data:w}=se({queryKey:["draftStatus",e],queryFn:async()=>{if(!e)throw new Error("No league ID");const{data:X,error:ee}=await G.from("leagues").select("draft_status, status").eq("id",e).single();if(ee)throw ee;return X},enabled:!!e}),{data:v}=se({queryKey:["currentPick",e,b==null?void 0:b.id,t==null?void 0:t.id],queryFn:async()=>{if(!e||!(b!=null&&b.id)||!(t!=null&&t.id))throw new Error("Missing data");const{data:X,error:ee}=await G.from("weekly_picks").select("*").eq("league_id",e).eq("episode_id",b.id).eq("user_id",t.id).single();if(ee&&ee.code!=="PGRST116")throw ee;return X},enabled:!!e&&!!(b!=null&&b.id)&&!!(t!=null&&t.id)}),{data:j}=se({queryKey:["previousPicks",e,t==null?void 0:t.id],queryFn:async()=>{if(!e||!(t!=null&&t.id))throw new Error("Missing data");const{data:X,error:ee}=await G.from("weekly_picks").select("id, episode_id, castaway_id, status, points_earned, episodes(number, title), castaways(*)").eq("league_id",e).eq("user_id",t.id).neq("status","pending").order("episodes(number)",{ascending:!1}).limit(10);if(ee)throw ee;return X},enabled:!!e&&!!(t!=null&&t.id)}),{data:E}=se({queryKey:["castawayStats",e,t==null?void 0:t.id],queryFn:async()=>{if(!e||!(t!=null&&t.id)||!g)throw new Error("Missing data");const X=g.map(V=>V.castaway_id),{data:ee,error:D}=await G.from("weekly_picks").select("castaway_id, points_earned").eq("league_id",e).eq("user_id",t.id).in("castaway_id",X).in("status",["locked","auto_picked"]);if(D)throw D;const te=new Map;return X.forEach(V=>{te.set(V,{castaway_id:V,total_points:0,times_picked:0,avg_points:0})}),ee==null||ee.forEach(V=>{if(V.castaway_id){const $=te.get(V.castaway_id);$&&($.total_points+=V.points_earned||0,$.times_picked+=1,$.avg_points=$.times_picked>0?Math.round($.total_points/$.times_picked):0)}}),Array.from(te.values())},enabled:!!e&&!!(t!=null&&t.id)&&!!g&&g.length>0}),k=((ae=j==null?void 0:j[0])==null?void 0:ae.status)==="auto_picked",S=$e({mutationFn:async X=>{if(!e||!(b!=null&&b.id))throw new Error("Missing required data");const{data:{session:ee}}=await G.auth.getSession();if(!(ee!=null&&ee.access_token))throw new Error("Not authenticated");const D=await VZ(`/leagues/${e}/picks`,{castaway_id:X,episode_id:b.id},ee.access_token);if(D.error)throw new Error(D.error);return D.data},onSuccess:()=>{n.invalidateQueries({queryKey:["currentPick",e,b==null?void 0:b.id,t==null?void 0:t.id]}),d(!0),p(null),setTimeout(()=>d(!1),3e3)},onError:X=>{p(X.message||"Failed to save pick. Please try again."),d(!1)}});C.useEffect(()=>{if(!(b!=null&&b.picks_lock_at))return;const X=()=>{const D=new Date(b.picks_lock_at).getTime(),te=Date.now(),V=Math.max(0,D-te);l({days:Math.floor(V/(1e3*60*60*24)),hours:Math.floor(V%(1e3*60*60*24)/(1e3*60*60)),minutes:Math.floor(V%(1e3*60*60)/(1e3*60)),seconds:Math.floor(V%(1e3*60)/1e3)})};X();const ee=setInterval(X,1e3);return()=>clearInterval(ee)},[b==null?void 0:b.picks_lock_at]),C.useEffect(()=>{v!=null&&v.castaway_id&&a(v.castaway_id)},[v==null?void 0:v.castaway_id]);const P=()=>{s&&(p(null),S.mutate(s))},A=!!(v!=null&&v.castaway_id),T=(b==null?void 0:b.picks_lock_at)&&new Date(b.picks_lock_at)<=new Date,L=(v==null?void 0:v.status)==="locked"||T,H=(g==null?void 0:g.filter(X=>{var ee;return((ee=X.castaways)==null?void 0:ee.status)==="active"}))||[],R=!m||y,M=(w==null?void 0:w.draft_status)==="completed",O=i.days*24*60+i.hours*60+i.minutes,F=O<=30&&O>0,K=i.days===0&&i.hours<2;return R?r.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200",children:[r.jsx(de,{}),r.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:r.jsx(ge,{className:"h-8 w-8 text-burgundy-500 animate-spin"})})]}):r.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200",children:[r.jsx(de,{}),r.jsxs("main",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[r.jsx("div",{className:"flex items-center justify-between mb-8 animate-fade-in",children:r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx(Y,{to:`/leagues/${e}`,className:"text-neutral-400 hover:text-neutral-600 transition-colors",children:r.jsx(at,{className:"w-5 h-5"})}),r.jsx("h1",{className:"text-2xl font-display text-neutral-800",children:"Weekly Pick"})]}),r.jsxs("p",{className:"text-neutral-500",children:[b?`Episode ${b.number}`:"Loading..."," "," ",(m==null?void 0:m.name)||"Select your castaway"]})]})}),M?b?L?r.jsx(aee,{leagueId:e,episode:b,roster:g,currentPickCastawayId:v==null?void 0:v.castaway_id}):r.jsxs("div",{className:"space-y-6",children:[r.jsx(XZ,{episode:b,timeLeft:i}),r.jsx(ZZ,{wasAutoPicked:k,pickSubmitted:A,isUrgent:K,isVeryUrgent:F}),r.jsx(tee,{roster:g,activeCastaways:H,selectedCastaway:s,currentPickCastawayId:v==null?void 0:v.castaway_id,pickSubmitted:A,showSuccess:u,mutationError:h,isPending:S.isPending,castawayStats:E,onSelect:a,onSubmit:P}),j&&j.length>0&&r.jsx(nee,{picks:j})]}):r.jsx(see,{leagueId:e}):r.jsx(ree,{leagueId:e})]})]})}const S0=25;function oee(){var w;const{leagueId:e}=kn(),{user:t}=yt(),[n,s]=C.useState(1),{data:a}=se({queryKey:["profile",t==null?void 0:t.id],queryFn:async()=>{const{data:v,error:j}=await G.from("users").select("id, display_name").eq("id",t.id).single();if(j)throw j;return v},enabled:!!(t!=null&&t.id)}),{data:i}=se({queryKey:["league",e],queryFn:async()=>{if(!e)throw new Error("No league ID");const{data:v,error:j}=await G.from("leagues").select("*").eq("id",e).single();if(j)throw j;return v},enabled:!!e}),{data:l,isLoading:u}=se({queryKey:["leaderboard",e],queryFn:async()=>{if(!e)throw new Error("No league ID");const{data:v,error:j}=await G.from("league_members").select("id, user_id, total_points, rank, users(id, display_name)").eq("league_id",e).order("total_points",{ascending:!1});if(j)throw j;return v},enabled:!!e}),d=v=>v===0?{emoji:"",bg:"bg-yellow-100",text:"text-yellow-700"}:v===1?{emoji:"",bg:"bg-gray-100",text:"text-gray-700"}:v===2?{emoji:"",bg:"bg-orange-100",text:"text-orange-700"}:{emoji:null,bg:"bg-cream-50",text:"text-neutral-600"},h=(l==null?void 0:l.length)||0,p=Math.ceil(h/S0),m=(n-1)*S0,g=m+S0,y=(l==null?void 0:l.slice(m,g))||[],b=p>1;return r.jsxs("div",{className:"max-w-4xl mx-auto",children:[r.jsxs("div",{className:"flex items-center justify-between mb-8 animate-fade-in",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx(Y,{to:"/dashboard",className:"text-neutral-400 hover:text-neutral-600 transition-colors",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),r.jsx("h1",{className:"text-2xl font-display text-neutral-800",children:"Leaderboard"})]}),r.jsx("p",{className:"text-neutral-500",children:(i==null?void 0:i.name)||"Loading..."})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-sm text-neutral-500",children:"League Code"}),r.jsx("p",{className:"font-mono font-bold text-burgundy-600",children:i==null?void 0:i.code})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated overflow-hidden animate-slide-up",children:[r.jsxs("div",{className:"p-6 border-b border-cream-100",children:[r.jsx("h2",{className:"font-semibold text-neutral-800",children:"Standings"}),r.jsxs("p",{className:"text-sm text-neutral-500 mt-1",children:[(l==null?void 0:l.length)||0," players"]})]}),u?r.jsxs("div",{className:"p-12 text-center",children:[r.jsx("div",{className:"w-8 h-8 mx-auto border-2 border-burgundy-500 border-t-transparent rounded-full animate-spin"}),r.jsx("p",{className:"text-neutral-500 mt-4",children:"Loading standings..."})]}):(l==null?void 0:l.length)===0?r.jsx("div",{className:"p-12 text-center",children:r.jsx("p",{className:"text-neutral-500",children:"No players in this league yet."})}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"divide-y divide-cream-100",children:y.map((v,j)=>{var A;const E=m+j,k=d(E),S=v.user_id===(t==null?void 0:t.id),P=E+1;return r.jsxs("div",{className:`flex items-center gap-4 p-5 transition-colors ${S?"bg-burgundy-50":"hover:bg-cream-50"}`,children:[r.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold ${k.bg} ${k.text}`,children:k.emoji||P}),r.jsx("div",{className:"flex-1",children:r.jsxs("p",{className:`font-semibold ${S?"text-burgundy-700":"text-neutral-800"}`,children:[(A=v.users)==null?void 0:A.display_name,S&&r.jsx("span",{className:"ml-2 text-xs text-burgundy-500",children:"(You)"})]})}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-2xl font-display text-neutral-800",children:v.total_points}),r.jsx("p",{className:"text-xs text-neutral-400",children:"points"})]})]},v.id)})}),b&&r.jsxs("div",{className:"p-4 border-t border-cream-100 flex items-center justify-between",children:[r.jsxs("p",{className:"text-sm text-neutral-500",children:["Showing ",m+1,"-",Math.min(g,h)," of ",h," ","players"]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>s(v=>Math.max(1,v-1)),disabled:n===1,className:"p-2 rounded-lg border border-cream-200 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-cream-50 transition-colors",children:r.jsx(XY,{className:"h-5 w-5 text-neutral-600"})}),r.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:p},(v,j)=>j+1).map(v=>{const j=v===1||v===p||v>=n-1&&v<=n+1,E=v===2&&n>3||v===p-1&&n<p-2;return!j&&!E?null:E&&!j?r.jsx("span",{className:"px-2 text-neutral-400",children:"..."},v):j?r.jsx("button",{onClick:()=>s(v),className:`w-10 h-10 rounded-lg font-medium transition-colors ${v===n?"bg-burgundy-500 text-white":"border border-cream-200 text-neutral-600 hover:bg-cream-50"}`,children:v},v):null})}),r.jsx("button",{onClick:()=>s(v=>Math.min(p,v+1)),disabled:n===p,className:"p-2 rounded-lg border border-cream-200 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-cream-50 transition-colors",children:r.jsx(kr,{className:"h-5 w-5 text-neutral-600"})})]})]})]})]}),t&&l&&r.jsx("div",{className:"mt-6 bg-gradient-to-r from-burgundy-500 to-burgundy-600 rounded-2xl p-6 text-white shadow-elevated animate-slide-up",style:{animationDelay:"0.1s"},children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-burgundy-100 text-sm",children:"Your Position"}),r.jsxs("p",{className:"text-3xl font-display mt-1",children:["#",l.findIndex(v=>v.user_id===t.id)+1]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-burgundy-100 text-sm",children:"Your Points"}),r.jsx("p",{className:"text-3xl font-display mt-1",children:((w=l.find(v=>v.user_id===t.id))==null?void 0:w.total_points)||0})]})]})})]})}function lee(){return r.jsxs(r.Fragment,{children:[r.jsx(de,{}),r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated p-8 max-w-md w-full text-center border border-cream-200",children:[r.jsx("div",{className:"w-20 h-20 bg-burgundy-100 rounded-full flex items-center justify-center mx-auto mb-6",children:r.jsx(Ei,{className:"h-10 w-10 text-burgundy-500"})}),r.jsx("h1",{className:"text-6xl font-display font-bold text-burgundy-500 mb-2",children:"404"}),r.jsx("h2",{className:"text-xl font-display text-neutral-600 mb-4",children:"Page Not Found"}),r.jsx("p",{className:"text-neutral-500 mb-8",children:"This page has been voted off the island."}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[r.jsxs("button",{onClick:()=>window.history.back(),className:"flex items-center justify-center gap-2 px-6 py-3 bg-cream-100 text-neutral-700 rounded-xl font-medium hover:bg-cream-200 transition-colors",children:[r.jsx(at,{className:"h-5 w-5"}),"Go Back"]}),r.jsxs(Y,{to:"/dashboard",className:"flex items-center justify-center gap-2 px-6 py-3 bg-burgundy-500 text-white rounded-xl font-medium hover:bg-burgundy-600 transition-colors",children:[r.jsx(_4,{className:"h-5 w-5"}),"Dashboard"]})]})]})})]})}function cee(){const{user:e}=yt(),t=[{icon:Ye,title:"Join or Create a League",description:"Play with friends in a private league or join a public one. Each league has its own leaderboard and bragging rights.",details:["Create a private league and invite friends with a code","Join public leagues to compete with the community","Play in multiple leagues with the same roster","Everyone is automatically in the Global League"]},{icon:rt,title:"Rank Your Castaways",description:"Before the draft deadline, rank all castaways from 1-24. This determines who you get in the snake draft.",details:["Rankings apply to ALL your leagues for the season","Rank based on who you think will score the most points, not just who'll win","Consider confessional counts, challenge ability, and edit visibility","Lock in rankings by the deadline (after Episode 1 airs)"]},{icon:wa,title:"Get Your Team",description:"After the deadline, the system runs a snake draft. You get 2 castaways based on your draft position and rankings.",details:["Draft positions are randomly assigned","Snake draft means pick order reverses each round","You'll get your highest-ranked available castaway each pick","Your 2 castaways are your team for the entire season"]},{icon:ur,title:"Make Weekly Picks",description:'Each week, choose which of your 2 castaways to "play" for that episode. Only your picked castaway earns points.',details:["Picks lock Wednesday at 3pm PST before the episode","Analyze the edit, preview clips, and tribal dynamics","If you forget, the system randomly picks from your roster","Both castaways eliminated = torch snuffed (but you can still watch!)"]},{icon:Yn,title:"Earn Points",description:"Your picked castaway earns (or loses) points based on what happens during the episode. See the full scoring rules for details.",details:[],linkTo:"/scoring",linkText:"View Scoring Rules "},{icon:Uv,title:"Win Your League",description:"The player with the most total points at the end of the season wins! Track your progress on the leaderboard.",details:["Points accumulate across all episodes","Leaderboard updates after each episode","Compete for glory in multiple leagues","Bragging rights last until next season!"]}],n=[{icon:Tc,title:"Study the Edit",description:"Castaways with more screen time and confessionals tend to score more points. Pay attention to who the editors are focusing on."},{icon:vi,title:"Balance Risk",description:"Sometimes the safe pick isn't the best pick. A castaway in danger might score big if they survive or play an idol."},{icon:Mn,title:"Know the Meta",description:"Challenge beasts score consistently. Strategic players score in bursts. Social players accumulate over time."},{icon:Ln,title:"Think Long-Term",description:"Don't just think about this week. Consider who will make the merge, who has idol-finding potential, who might win."}];return r.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex flex-col",children:[r.jsx(de,{}),r.jsx("div",{className:"px-6 py-10 text-center bg-gradient-to-b from-burgundy-50 to-transparent",children:r.jsxs("div",{className:"max-w-4xl mx-auto",children:[r.jsxs("div",{className:"flex items-center justify-center gap-3 mb-3",children:[r.jsx(Rd,{className:"h-9 w-9 text-burgundy-500"}),r.jsx("h1",{className:"text-3xl md:text-4xl font-display font-bold text-neutral-800",children:"How to Play"})]}),r.jsx("p",{className:"text-neutral-600 text-lg max-w-2xl mx-auto",children:"Fantasy Survivor for people who actually watch Survivor. Real strategy. No luck required."})]})}),r.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8 flex-1",children:[r.jsxs("section",{className:"mb-16",children:[r.jsx("h2",{className:"text-2xl font-display font-bold text-neutral-800 mb-8 text-center",children:"The Game in 6 Steps"}),r.jsx("div",{className:"space-y-6",children:t.map((s,a)=>r.jsx("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 overflow-hidden",children:r.jsx("div",{className:"p-6 md:p-8",children:r.jsxs("div",{className:"flex items-start gap-4 md:gap-6",children:[r.jsx("div",{className:"flex-shrink-0 w-14 h-14 bg-burgundy-500 rounded-2xl flex items-center justify-center shadow-lg",children:r.jsx(s.icon,{className:"h-7 w-7 text-white"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"flex items-center gap-2 mb-2",children:r.jsxs("span",{className:"text-burgundy-500 font-bold text-sm",children:["Step ",a+1]})}),r.jsx("h3",{className:"text-xl md:text-2xl font-display font-bold text-neutral-800 mb-2",children:s.title}),r.jsx("p",{className:"text-neutral-600 mb-4",children:s.description}),s.details.length>0?r.jsx("ul",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:s.details.map((i,l)=>r.jsxs("li",{className:"flex items-start gap-2 text-sm text-neutral-600",children:[r.jsx(jp,{className:"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0"}),r.jsx("span",{children:i})]},l))}):null,"linkTo"in s&&s.linkTo&&r.jsxs(Y,{to:s.linkTo,className:"inline-flex items-center gap-2 mt-2 text-burgundy-600 hover:text-burgundy-700 font-medium",children:[s.linkText||"Learn more",r.jsx(Sr,{className:"h-4 w-4"})]})]})]})})},s.title))})]}),r.jsxs("section",{className:"mb-16",children:[r.jsx("h2",{className:"text-2xl font-display font-bold text-neutral-800 mb-8 text-center",children:"Strategy Tips"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.map(s=>r.jsx("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 p-6",children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"w-10 h-10 bg-amber-100 rounded-xl flex items-center justify-center flex-shrink-0",children:r.jsx(s.icon,{className:"h-5 w-5 text-amber-600"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-display font-bold text-neutral-800 mb-1",children:s.title}),r.jsx("p",{className:"text-neutral-600 text-sm",children:s.description})]})]})},s.title))})]}),r.jsxs("section",{className:"mb-16",children:[r.jsx("h2",{className:"text-2xl font-display font-bold text-neutral-800 mb-8 text-center",children:"Learn More"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(Y,{to:"/scoring",className:"bg-white rounded-2xl shadow-card border border-cream-200 p-6 hover:shadow-card-hover transition-shadow group",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-12 h-12 bg-burgundy-100 rounded-xl flex items-center justify-center",children:r.jsx(Yn,{className:"h-6 w-6 text-burgundy-600"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-display font-bold text-neutral-800",children:"Scoring Rules"}),r.jsx("p",{className:"text-neutral-500 text-sm",children:"100+ ways to earn points"})]})]}),r.jsx(Sr,{className:"h-5 w-5 text-neutral-400 group-hover:text-burgundy-500 transition-colors"})]})}),r.jsx(Y,{to:"/timeline",className:"bg-white rounded-2xl shadow-card border border-cream-200 p-6 hover:shadow-card-hover transition-shadow group",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-12 h-12 bg-amber-100 rounded-xl flex items-center justify-center",children:r.jsx(ur,{className:"h-6 w-6 text-amber-600"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-display font-bold text-neutral-800",children:"Weekly Timeline"}),r.jsx("p",{className:"text-neutral-500 text-sm",children:"Know every deadline"})]})]}),r.jsx(Sr,{className:"h-5 w-5 text-neutral-400 group-hover:text-amber-500 transition-colors"})]})})]})]}),r.jsx("section",{className:"text-center pb-16",children:r.jsxs("div",{className:"bg-gradient-to-r from-burgundy-500 to-burgundy-600 rounded-2xl p-8 md:p-12 text-white shadow-lg",children:[r.jsx("h2",{className:"text-2xl md:text-3xl font-display font-bold mb-4",children:"Ready to Play?"}),r.jsx("p",{className:"text-burgundy-100 mb-8 max-w-lg mx-auto text-lg",children:"Join Season 50: In the Hands of the Fans and prove you know more about Survivor strategy than your friends."}),e?r.jsxs(Y,{to:"/dashboard",className:"inline-flex items-center gap-2 bg-white text-burgundy-600 font-bold px-8 py-4 rounded-xl hover:bg-cream-100 transition-colors text-lg",children:["Go to Dashboard",r.jsx(Sr,{className:"h-5 w-5"})]}):r.jsxs(Y,{to:"/signup",className:"inline-flex items-center gap-2 bg-white text-burgundy-600 font-bold px-8 py-4 rounded-xl hover:bg-cream-100 transition-colors text-lg",children:["Join Now - It's Free",r.jsx(Sr,{className:"h-5 w-5"})]})]})})]}),r.jsx(Qt,{})]})}const ff=[{name:"Survival",icon:Mn,color:"orange",description:"Points for staying in the game",examples:[{text:"Survive the episode without being voted out",positive:!0},{text:"Make it to the merge",positive:!0},{text:"Reach the Final Tribal Council",positive:!0},{text:"Win the title of Sole Survivor",positive:!0}]},{name:"Tribal Council",icon:Ye,color:"blue",description:"Points through voting and surviving votes",examples:[{text:"Vote for the person who gets eliminated",positive:!0},{text:"Receive votes but survive",positive:!0},{text:"Get blindsided (eliminated with an idol in pocket)",positive:!1},{text:"Vote incorrectly",positive:!1}]},{name:"Pre-Merge Challenges",icon:rt,color:"green",description:"Tribal immunity and reward challenges",examples:[{text:"Tribe wins immunity challenge",positive:!0},{text:"Tribe wins reward challenge",positive:!0},{text:"Individual standout performance in tribal challenge",positive:!0},{text:"Sit out of a challenge",positive:!1}]},{name:"Post-Merge Challenges",icon:Uv,color:"purple",description:"Individual immunity and reward challenges",examples:[{text:"Win individual immunity",positive:!0},{text:"Win individual reward",positive:!0},{text:"Win the final immunity challenge",positive:!0},{text:"Come in second place in individual immunity",positive:!0}]},{name:"Strategic Play",icon:wa,color:"red",description:"Big moves and game manipulation",examples:[{text:"Orchestrate a blindside",positive:!0},{text:"Successfully flip on your alliance",positive:!0},{text:"Convince someone to play (or not play) their idol",positive:!0},{text:"Get caught in a lie",positive:!1}]},{name:"Social Game",icon:Ro,color:"teal",description:"Relationships and jury management",examples:[{text:"Shown building a strong alliance",positive:!0},{text:"Mediate conflict between other players",positive:!0},{text:"Receive votes at Final Tribal Council",positive:!0},{text:"Get into a public argument",positive:!1}]},{name:"Idols & Advantages",icon:EJ,color:"yellow",description:"Finding and playing advantages",examples:[{text:"Find a hidden immunity idol",positive:!0},{text:"Successfully play an idol to save yourself",positive:!0},{text:"Play an idol for another player",positive:!0},{text:"Find or win any advantage",positive:!0},{text:"Waste an idol (play it but no votes against you)",positive:!1}]},{name:"Confessionals & Screen Time",icon:Ro,color:"indigo",description:"On-screen presence and memorable moments",examples:[{text:"Have a confessional during the episode",positive:!0},{text:"Deliver a memorable or viral moment",positive:!0},{text:"Get significant screen time",positive:!0},{text:"Shown crying (context matters!)",positive:!0}]},{name:"Bonus & Special",icon:Yn,color:"gold",description:"Special achievements and milestones",examples:[{text:"Win fan favorite / Sprint Player of the Season",positive:!0},{text:"Make a move that significantly changes the game",positive:!0},{text:"Perfect game (no votes against, unanimous win)",positive:!0}]},{name:"Penalties",icon:Sn,color:"red",description:"Ways to lose points",examples:[{text:"Get voted out",positive:!1},{text:"Quit the game",positive:!1},{text:"Get medically evacuated",positive:!1},{text:"Get removed from the game",positive:!1}]}];function vk(){const{user:e}=yt(),[t,n]=C.useState(()=>ff.reduce((l,u)=>({...l,[u.name]:!0}),{})),s=l=>{n(u=>({...u,[l]:!u[l]}))},a=()=>{n(ff.reduce((l,u)=>({...l,[u.name]:!0}),{}))},i=()=>{n(ff.reduce((l,u)=>({...l,[u.name]:!1}),{}))};return r.jsxs("div",{className:"min-h-screen bg-cream-50 flex flex-col",children:[r.jsx(de,{}),r.jsx("div",{className:"px-6 py-10 text-center bg-gradient-to-b from-burgundy-50 to-transparent",children:r.jsxs("div",{className:"max-w-4xl mx-auto",children:[r.jsxs("div",{className:"flex items-center justify-center gap-3 mb-3",children:[r.jsx(Rd,{className:"h-9 w-9 text-burgundy-500"}),r.jsx("h1",{className:"text-3xl md:text-4xl font-display font-bold text-neutral-800",children:"Scoring Rules"})]}),r.jsx("p",{className:"text-neutral-600 max-w-2xl mx-auto",children:"Earn and lose points based on what your castaways do each episode. With over 100+ rules and a decade of Survivor knowledge, our scoring system is unmatched."})]})}),r.jsx("div",{className:"max-w-6xl mx-auto px-6 mb-6",children:r.jsxs("div",{className:"flex justify-center gap-3",children:[r.jsx("button",{onClick:a,className:"text-sm text-burgundy-600 hover:text-burgundy-700 font-medium",children:"Expand All"}),r.jsx("span",{className:"text-neutral-300",children:"|"}),r.jsx("button",{onClick:i,className:"text-sm text-burgundy-600 hover:text-burgundy-700 font-medium",children:"Collapse All"})]})}),r.jsx("div",{className:"max-w-6xl mx-auto px-6 pb-12",children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:ff.map(l=>{const u=l.icon,d=t[l.name],h=l.color==="orange"?"bg-orange-100":l.color==="blue"?"bg-blue-100":l.color==="green"?"bg-green-100":l.color==="purple"?"bg-purple-100":l.color==="red"?"bg-red-100":l.color==="teal"?"bg-teal-100":l.color==="yellow"?"bg-yellow-100":l.color==="indigo"?"bg-indigo-100":l.color==="gold"?"bg-amber-100":"bg-neutral-100",p=l.color==="orange"?"text-orange-600":l.color==="blue"?"text-blue-600":l.color==="green"?"text-green-600":l.color==="purple"?"text-purple-600":l.color==="red"?"text-red-600":l.color==="teal"?"text-teal-600":l.color==="yellow"?"text-yellow-600":l.color==="indigo"?"text-indigo-600":l.color==="gold"?"text-amber-600":"text-neutral-600";return r.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 overflow-hidden",children:[r.jsxs("button",{onClick:()=>s(l.name),className:"w-full px-5 py-4 flex items-center gap-3 hover:bg-cream-50 transition-colors",children:[r.jsx("div",{className:`p-2 rounded-xl ${h}`,children:r.jsx(u,{className:`h-5 w-5 ${p}`})}),r.jsxs("div",{className:"flex-1 text-left",children:[r.jsx("h3",{className:"text-base font-display font-bold text-neutral-800",children:l.name}),!d&&r.jsx("p",{className:"text-neutral-500 text-xs",children:l.description})]}),d?r.jsx(xn,{className:"h-5 w-5 text-neutral-400"}):r.jsx(kr,{className:"h-5 w-5 text-neutral-400"})]}),d&&r.jsxs("div",{className:"border-t border-cream-200",children:[r.jsx("div",{className:"px-5 py-3 bg-cream-50 border-b border-cream-100",children:r.jsx("p",{className:"text-neutral-600 text-sm",children:l.description})}),r.jsx("div",{className:"divide-y divide-cream-100",children:l.examples.map((m,g)=>r.jsxs("div",{className:"px-5 py-2.5 flex items-center gap-3 hover:bg-cream-50 transition-colors",children:[r.jsx("div",{className:`p-1 rounded-full flex-shrink-0 ${m.positive?"bg-green-100":"bg-red-100"}`,children:m.positive?r.jsx(Rt,{className:"h-3.5 w-3.5 text-green-600"}):r.jsx(Sn,{className:"h-3.5 w-3.5 text-red-600"})}),r.jsx("p",{className:"text-neutral-700 text-sm flex-1",children:m.text})]},g))})]})]},l.name)})})}),r.jsx("div",{className:"max-w-4xl mx-auto px-6 pb-8",children:r.jsxs("div",{className:"bg-cream-100 rounded-2xl p-6 border border-cream-200",children:[r.jsx("h3",{className:"font-display font-bold text-neutral-800 mb-2",children:"Why don't you show exact point values?"}),r.jsx("p",{className:"text-neutral-600 text-sm",children:"Our scoring system is carefully balanced to reward strategic gameplay. We keep the exact point values private to prevent gaming the system and to keep the competition fair. Focus on drafting well-rounded players who are likely to go deep in the game!"})]})}),r.jsx("div",{className:"max-w-4xl mx-auto px-6 pb-16 text-center",children:r.jsxs("div",{className:"bg-burgundy-500 rounded-2xl p-8 text-white",children:[r.jsx("h2",{className:"text-2xl font-display font-bold mb-4",children:"Ready to Put Your Survivor Knowledge to the Test?"}),r.jsx("p",{className:"text-burgundy-100 mb-6 max-w-lg mx-auto",children:"Join Season 50 and prove you know more about Survivor strategy than your friends."}),e?r.jsxs(Y,{to:"/dashboard",className:"inline-flex items-center gap-2 bg-white text-burgundy-600 font-bold px-8 py-3 rounded-xl hover:bg-cream-100 transition-colors",children:["Go to Dashboard",r.jsx(Sr,{className:"h-5 w-5"})]}):r.jsxs(Y,{to:"/signup",className:"inline-flex items-center gap-2 bg-white text-burgundy-600 font-bold px-8 py-3 rounded-xl hover:bg-cream-100 transition-colors",children:["Join Now - It's Free",r.jsx(Sr,{className:"h-5 w-5"})]})]})}),r.jsx(Qt,{})]})}const uee=[{day:"Friday",time:"2:00 PM PST",icon:Dn,color:"burgundy",title:"Picks Lock",description:`All weekly picks are locked in. Make sure you've selected which of your 2 castaways to "play" for this episode before this deadline.`,tip:"Likely Wednesday at 10PM Pacific. Set a reminder! If you forget to pick, the system will randomly select from your available castaways."},{day:"Wednesday",time:"8:00 PM EST",icon:Tm,color:"orange",title:"Episode Airs",description:"Survivor airs on CBS. Watch live or avoid spoilers until you can catch up. Scoring happens in real-time as events unfold.",tip:"Enable spoiler-safe mode in your settings to delay result notifications."},{day:"Thursday",time:"All Day",icon:rt,color:"amber",title:"Scoring Review",description:"Our team reviews the episode and finalizes all scoring events. We catch every confessional, idol play, and strategic move.",tip:"Scores are typically finalized within 24 hours of the episode airing."},{day:"Wed/Thu Night",time:"After Airing",icon:Rs,color:"green",title:"Results Posted",description:"Usually released instantly after it airs on the west coast, but could take up to 8am the next morning to go live.",tip:"Results notifications respect your spoiler delay settings."},{day:"Saturday",time:"12:00 PM PST",icon:ga,color:"blue",title:"Next Week Opens",description:"Picks for the next episode open. You have until Wednesday 3pm PST to decide which of your castaways to play.",tip:"The earlier you pick, the less chance you forget!"}];function dee(){const{user:e}=yt();return r.jsxs("div",{className:"min-h-screen bg-cream-50 flex flex-col",children:[r.jsx(de,{}),r.jsx("div",{className:"px-6 py-10 text-center bg-gradient-to-b from-amber-50 to-transparent",children:r.jsxs("div",{className:"max-w-4xl mx-auto",children:[r.jsxs("div",{className:"flex items-center justify-center gap-3 mb-3",children:[r.jsx(ur,{className:"h-9 w-9 text-amber-600"}),r.jsx("h1",{className:"text-3xl md:text-4xl font-display font-bold text-neutral-800",children:"Weekly Timeline"})]}),r.jsx("p",{className:"text-neutral-600 max-w-2xl mx-auto",children:"Every week follows the same rhythm. Know the schedule, never miss a deadline, and maximize your scoring potential."})]})}),r.jsx("div",{className:"max-w-3xl mx-auto px-6 pb-12",children:r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute left-8 top-0 bottom-0 w-0.5 bg-cream-300"}),r.jsx("div",{className:"space-y-8",children:uee.map((t,n)=>{const s=t.icon,a=t.color==="burgundy"?"bg-burgundy-500":t.color==="orange"?"bg-orange-500":t.color==="amber"?"bg-amber-500":t.color==="green"?"bg-green-500":"bg-blue-500",i=t.color==="burgundy"?"bg-burgundy-50 border-burgundy-200":t.color==="orange"?"bg-orange-50 border-orange-200":t.color==="amber"?"bg-amber-50 border-amber-200":t.color==="green"?"bg-green-50 border-green-200":"bg-blue-50 border-blue-200",l=t.color==="burgundy"?"text-burgundy-700":t.color==="orange"?"text-orange-700":t.color==="amber"?"text-amber-700":t.color==="green"?"text-green-700":"text-blue-700";return r.jsxs("div",{className:"relative flex gap-6",children:[r.jsx("div",{className:`relative z-10 w-16 h-16 ${a} rounded-2xl flex items-center justify-center shadow-lg flex-shrink-0`,children:r.jsx(s,{className:"h-7 w-7 text-white"})}),r.jsxs("div",{className:"flex-1 bg-white rounded-2xl shadow-card border border-cream-200 p-6",children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-2",children:[r.jsx("span",{className:"font-display font-bold text-neutral-800",children:t.day}),r.jsx("span",{className:"text-neutral-400",children:""}),r.jsxs("span",{className:"text-neutral-600 flex items-center gap-1",children:[r.jsx(Ln,{className:"h-4 w-4"}),t.time]})]}),r.jsx("h3",{className:"text-xl font-display font-bold text-neutral-800 mb-2",children:t.title}),r.jsx("p",{className:"text-neutral-600 mb-4",children:t.description}),r.jsx("div",{className:`${i} rounded-xl p-3 border`,children:r.jsxs("p",{className:`text-sm ${l} flex items-start gap-2`,children:[r.jsx(jp,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),r.jsx("span",{children:t.tip})]})})]})]},n)})})]})}),r.jsx("div",{className:"max-w-3xl mx-auto px-6 pb-12",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 p-6",children:[r.jsxs("h3",{className:"font-display font-bold text-lg text-neutral-800 mb-4 flex items-center gap-2",children:[r.jsx(ot,{className:"h-5 w-5 text-amber-500"}),"Important Notes"]}),r.jsxs("ul",{className:"space-y-3 text-neutral-600",children:[r.jsxs("li",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-burgundy-500 mt-2 flex-shrink-0"}),r.jsxs("span",{children:[r.jsx("strong",{children:"All times are in Pacific Standard Time (PST)"})," unless otherwise noted. The episode airs at 8pm Eastern (5pm Pacific)."]})]}),r.jsxs("li",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-burgundy-500 mt-2 flex-shrink-0"}),r.jsxs("span",{children:[r.jsx("strong",{children:"Double episodes"})," may have adjusted schedules. We'll notify you of any changes."]})]}),r.jsxs("li",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-burgundy-500 mt-2 flex-shrink-0"}),r.jsxs("span",{children:[r.jsx("strong",{children:"Forgot to pick?"})," The system randomly selects from your available castaways."]})]}),r.jsxs("li",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-burgundy-500 mt-2 flex-shrink-0"}),r.jsxs("span",{children:[r.jsx("strong",{children:"Both castaways eliminated?"})," Your torch is snuffed for the season, but you can still watch the leaderboard!"]})]})]})]})}),r.jsx("div",{className:"max-w-3xl mx-auto px-6 pb-16 text-center",children:r.jsxs("div",{className:"bg-gradient-to-r from-amber-500 to-orange-500 rounded-2xl p-8 text-white",children:[r.jsx("h2",{className:"text-2xl font-display font-bold mb-4",children:"Never Miss a Deadline"}),r.jsx("p",{className:"text-amber-100 mb-6 max-w-lg mx-auto",children:"Enable notifications to get reminders before picks lock and when results are posted."}),e?r.jsxs(Y,{to:"/settings",className:"inline-flex items-center gap-2 bg-white text-amber-600 font-bold px-8 py-3 rounded-xl hover:bg-cream-100 transition-colors",children:["Manage Notifications",r.jsx(Sr,{className:"h-5 w-5"})]}):r.jsxs(Y,{to:"/signup",className:"inline-flex items-center gap-2 bg-white text-amber-600 font-bold px-8 py-3 rounded-xl hover:bg-cream-100 transition-colors",children:["Join Now - It's Free",r.jsx(Sr,{className:"h-5 w-5"})]})]})}),r.jsx(Qt,{})]})}function hee(){var v;const{code:e}=kn(),t=Kr(),[n,s]=C.useState(""),[a,i]=C.useState(null),{data:l,isLoading:u}=se({queryKey:["session"],queryFn:async()=>{const{data:j}=await G.auth.getSession();return j.session}}),{data:d,isLoading:h,error:p}=se({queryKey:["league-by-code",e],queryFn:async()=>{var k;if(!e)throw new Error("No code provided");const j=e.trim().toUpperCase(),E=await Op(`/leagues/code/${j}`);if(E.error)throw new Error(E.error);if(!((k=E.data)!=null&&k.league))throw new Error("League not found");return E.data.league},enabled:!!e&&e.trim().length>0,retry:3,retryDelay:j=>Math.min(1e3*2**j,3e3),staleTime:3e4}),m=d,g=d==null?void 0:d.member_count,{data:y}=se({queryKey:["is-member",m==null?void 0:m.id,(v=l==null?void 0:l.user)==null?void 0:v.id],queryFn:async()=>{var E;return!(l!=null&&l.access_token)||!(m!=null&&m.id)?!1:((E=(await ut(`/leagues/${m.id}/join/status`,l.access_token)).data)==null?void 0:E.paid)??!1},enabled:!!(l!=null&&l.access_token)&&!!(m!=null&&m.id)}),b=$e({mutationFn:async()=>{var E;if(!(l!=null&&l.access_token)||!m)throw new Error("Not authenticated");const j=await ut(`/leagues/${m.id}/join`,l.access_token,{method:"POST",body:JSON.stringify({password:n})});if(j.status===402){const k=await ut(`/leagues/${m.id}/join/checkout`,l.access_token,{method:"POST"});if(k.error)throw new Error(k.error||"Failed to create checkout session");return(E=k.data)!=null&&E.checkout_url&&(window.location.href=k.data.checkout_url),null}if(j.error)throw new Error(j.error);return j.data},onSuccess:j=>{j&&t(`/leagues/${m.id}`)},onError:j=>{i(j.message),dt(j,{tags:{operation:"join_league",league_code:e},extra:{league_id:m==null?void 0:m.id}})}});if(C.useEffect(()=>{!u&&!l&&e&&t(`/login?redirect=/join/${e}`)},[l,u,e,t]),u||h)return r.jsxs(r.Fragment,{children:[r.jsx(de,{}),r.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex flex-col items-center justify-center px-4",children:[r.jsx("img",{src:"/logo.png",alt:"RGFL",className:"h-16 w-auto mb-6 animate-pulse"}),r.jsx("p",{className:"text-neutral-600 font-medium",children:"Loading league details..."})]})]});if(p||!m)return r.jsxs(r.Fragment,{children:[r.jsx(de,{}),r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center px-4",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated p-8 border border-cream-200 max-w-md text-center",children:[r.jsx(xi,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),r.jsx("h1",{className:"text-2xl font-display font-bold text-neutral-800 mb-2",children:"League Not Found"}),r.jsxs("p",{className:"text-neutral-500 mb-6",children:['The invite code "',e,`" doesn't match any league. Check the code and try again.`]}),r.jsx(Y,{to:"/dashboard",className:"btn btn-primary inline-block",children:"Go to Dashboard"})]})})]});if(y)return r.jsxs(r.Fragment,{children:[r.jsx(de,{}),r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center px-4",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated p-8 border border-cream-200 max-w-md text-center",children:[r.jsx(At,{className:"h-12 w-12 text-green-500 mx-auto mb-4"}),r.jsx("h1",{className:"text-2xl font-display font-bold text-neutral-800 mb-2",children:"Already a Member"}),r.jsxs("p",{className:"text-neutral-500 mb-6",children:["You're already a member of ",m.name,"!"]}),r.jsx(Y,{to:`/leagues/${m.id}`,className:"btn btn-primary inline-block",children:"Go to League"})]})})]});const w=g!==void 0&&g>=m.max_players;return r.jsxs(r.Fragment,{children:[r.jsx(de,{}),r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center px-4",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated p-8 border border-cream-200 max-w-md w-full",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("h1",{className:"text-2xl font-display font-bold text-neutral-800 mb-2",children:m.name}),r.jsxs("p",{className:"text-neutral-500",children:["Season ",m.seasons.number,": ",m.seasons.name]})]}),r.jsxs("div",{className:"flex justify-center gap-6 mb-8",children:[r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"flex items-center justify-center gap-1 text-burgundy-500",children:[r.jsx(Ye,{className:"h-5 w-5"}),r.jsxs("span",{className:"text-xl font-bold",children:[g,"/",m.max_players]})]}),r.jsx("p",{className:"text-neutral-500 text-sm",children:"Players"})]}),m.require_donation&&m.donation_amount&&r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"flex items-center justify-center gap-1 text-burgundy-500",children:[r.jsx(To,{className:"h-5 w-5"}),r.jsx("span",{className:"text-xl font-bold",children:m.donation_amount})]}),r.jsx("p",{className:"text-neutral-500 text-sm",children:"Entry Fee"})]})]}),m.donation_notes&&r.jsx("div",{className:"bg-cream-50 rounded-xl p-4 mb-6 border border-cream-200",children:r.jsx("p",{className:"text-neutral-600 text-sm",children:m.donation_notes})}),w?r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-red-500 mb-4",children:"This league is full."}),r.jsx(Y,{to:"/dashboard",className:"btn btn-secondary inline-block",children:"Back to Dashboard"})]}):r.jsxs("form",{onSubmit:j=>{j.preventDefault(),i(null),b.mutate()},children:[(d==null?void 0:d.has_password)&&r.jsxs("div",{className:"mb-6",children:[r.jsxs("label",{className:"block text-neutral-700 text-sm font-medium mb-2",children:[r.jsx(Dn,{className:"h-4 w-4 inline mr-1"}),"League Password"]}),r.jsx("input",{type:"password",value:n,onChange:j=>s(j.target.value),placeholder:"Enter password",className:"input",required:!0})]}),a&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-3 mb-6",children:r.jsx("p",{className:"text-red-600 text-sm",children:a})}),r.jsx("button",{type:"submit",disabled:b.isPending,className:"w-full btn btn-primary flex items-center justify-center gap-2",children:b.isPending?r.jsxs(r.Fragment,{children:[r.jsx(ge,{className:"h-5 w-5 animate-spin"}),"Joining..."]}):m.require_donation?r.jsxs(r.Fragment,{children:[r.jsx(To,{className:"h-5 w-5"}),"Pay $",m.donation_amount," & Join"]}):"Join League"})]})]})})]})}function fee(){return r.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-2xl p-4 mb-6",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"p-2 bg-amber-100 rounded-full",children:r.jsx(td,{className:"h-5 w-5 text-amber-600"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-bold text-amber-800",children:"Add Your Phone Number"}),r.jsx("p",{className:"text-sm text-amber-700 mt-1",children:'Verify your phone to receive SMS pick reminders and use text commands like "PICK Boston Rob" to submit picks on the go!'}),r.jsxs("a",{href:"#phone-section",className:"inline-flex items-center gap-1 text-sm font-medium text-amber-800 hover:text-amber-900 mt-2",children:[r.jsx(ed,{className:"h-4 w-4"}),"Set up phone below"]})]})]})})}function mee({displayName:e,email:t,avatarUrl:n,userId:s,onUpdateName:a,onUpdateAvatar:i,isUpdating:l,error:u,success:d}){const[h,p]=C.useState(!1),[m,g]=C.useState(""),[y,b]=C.useState(!1),[w,v]=C.useState(null),j=C.useRef(null),E=()=>{m.trim()&&(a(m.trim()),p(!1),g(""))},k=()=>{p(!1),g("")},S=()=>{g(e||""),p(!0)},P=()=>{var T;(T=j.current)==null||T.click()},A=async T=>{var H;const L=(H=T.target.files)==null?void 0:H[0];if(L){if(!L.type.startsWith("image/")){v("Please select an image file");return}if(L.size>2*1024*1024){v("Image must be less than 2MB");return}b(!0),v(null);try{const R=L.name.split(".").pop(),O=`avatars/${`${s}-${Date.now()}.${R}`}`,{error:F}=await G.storage.from("avatars").upload(O,L,{upsert:!0});if(F){F.message.includes("Bucket not found")||F.message.includes("not found")?v("Avatar storage is being set up. Please try again later or contact support."):F.message.includes("exceeded")||F.message.includes("size")?v("Image is too large. Please choose a smaller file (max 2MB)."):F.message.includes("type")||F.message.includes("mime")?v("Invalid file type. Please upload a JPG, PNG, or GIF image."):v("Unable to upload avatar. Please try again."),console.error("Avatar upload error:",F);return}const{data:{publicUrl:K}}=G.storage.from("avatars").getPublicUrl(O);i(K)}catch(R){console.error("Avatar upload error:",R),v("Something went wrong uploading your avatar. Please try again.")}finally{b(!1),j.current&&(j.current.value="")}}};return r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200 mb-6",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[r.jsxs("div",{className:"relative group",children:[r.jsx("div",{className:"w-16 h-16 rounded-full overflow-hidden bg-burgundy-500 flex items-center justify-center cursor-pointer",onClick:P,children:n?r.jsx("img",{src:n,alt:e||"Profile",className:"w-full h-full object-cover"}):r.jsx(Ap,{className:"h-8 w-8 text-white"})}),r.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer",onClick:P,children:y?r.jsx(ge,{className:"h-6 w-6 text-white animate-spin"}):r.jsx(GY,{className:"h-6 w-6 text-white"})}),r.jsx("input",{ref:j,type:"file",accept:"image/*",onChange:A,className:"hidden",disabled:y})]}),r.jsxs("div",{className:"flex-1",children:[h?r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",value:m,onChange:T=>g(T.target.value),placeholder:"Enter display name",className:"input flex-1",autoFocus:!0}),r.jsx("button",{onClick:E,disabled:!m.trim()||l,className:"btn btn-primary",children:l?r.jsx(ge,{className:"h-5 w-5 animate-spin"}):"Save"}),r.jsx("button",{onClick:k,className:"btn btn-secondary",disabled:l,children:"Cancel"})]}):r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800",children:e}),r.jsx("button",{onClick:S,className:"p-1 text-neutral-400 hover:text-burgundy-500 transition-colors",title:"Edit display name",children:r.jsx(j4,{className:"h-4 w-4"})})]}),r.jsx("p",{className:"text-neutral-500",children:t})]})]}),(u||w)&&r.jsxs("div",{className:"mb-4 flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-xl text-red-600 text-sm",children:[r.jsx(ot,{className:"h-4 w-4 flex-shrink-0"}),u||w]}),d&&r.jsxs("div",{className:"mb-4 flex items-center gap-2 p-3 bg-green-50 border border-green-200 rounded-xl text-green-600 text-sm",children:[r.jsx(Rt,{className:"h-4 w-4 flex-shrink-0"}),d]}),r.jsxs("div",{className:"flex items-center gap-3 p-3 bg-cream-50 rounded-xl border border-cream-200",children:[r.jsx(xs,{className:"h-5 w-5 text-burgundy-500"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-neutral-800",children:t}),r.jsx("p",{className:"text-neutral-400 text-sm",children:"Primary email"})]}),r.jsx(Rt,{className:"h-5 w-5 text-green-500"})]})]})}function pee({currentPhone:e,isPhoneVerified:t,onUpdatePhone:n,onVerifyCode:s,onResendCode:a,isUpdating:i,isVerifying:l,isResending:u,error:d,success:h,showVerification:p,onShowVerification:m}){const[g,y]=C.useState(""),[b,w]=C.useState(""),v=()=>{n(g),y("")},j=()=>{s(b),w("")};return r.jsxs("div",{id:"phone-section",className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200 mb-6 scroll-mt-4",children:[r.jsxs("h3",{className:"text-lg font-display font-bold text-neutral-800 mb-4 flex items-center gap-2",children:[r.jsx(ed,{className:"h-5 w-5 text-burgundy-500"}),"Phone Number"]}),r.jsx("p",{className:"text-neutral-500 text-sm mb-4",children:"Add your phone for SMS picks and notifications. Text PICK [name] to make picks!"}),e&&r.jsxs("div",{className:"flex items-center gap-3 p-3 bg-cream-50 rounded-xl border border-cream-200 mb-4",children:[r.jsx(td,{className:"h-5 w-5 text-burgundy-500"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-neutral-800",children:e}),r.jsx("p",{className:`text-sm ${t?"text-green-600":"text-orange-500"}`,children:t?"Verified":"Not verified - enter code below"})]}),t?r.jsx(Rt,{className:"h-5 w-5 text-green-500"}):r.jsx("button",{onClick:()=>m(!0),className:"text-sm text-burgundy-600 hover:text-burgundy-700 font-medium",children:"Verify"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"tel",value:g,onChange:E=>y(E.target.value),placeholder:"(555) 555-5555",className:"input flex-1"}),r.jsx("button",{onClick:v,disabled:!g||i,className:"btn btn-primary",children:i?r.jsx(ge,{className:"h-5 w-5 animate-spin"}):"Update"})]}),d&&r.jsxs("div",{className:"mt-4 flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-xl text-red-600 text-sm",children:[r.jsx(ot,{className:"h-4 w-4 flex-shrink-0"}),d]}),h&&r.jsxs("div",{className:"mt-4 flex items-center gap-2 p-3 bg-green-50 border border-green-200 rounded-xl text-green-600 text-sm",children:[r.jsx(Rt,{className:"h-4 w-4 flex-shrink-0"}),h]}),p&&r.jsxs("div",{className:"mt-4 p-4 bg-cream-50 rounded-xl border border-cream-200",children:[r.jsx("p",{className:"text-neutral-500 text-sm mb-2",children:"Enter the verification code sent to your phone:"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",value:b,onChange:E=>w(E.target.value.replace(/\D/g,"")),placeholder:"123456",maxLength:6,className:"input flex-1 text-center tracking-widest font-mono text-lg"}),r.jsx("button",{onClick:j,disabled:b.length!==6||l,className:"btn btn-primary",children:l?r.jsx(ge,{className:"h-5 w-5 animate-spin"}):"Verify"})]}),r.jsxs("button",{onClick:a,disabled:u,className:"mt-3 flex items-center gap-2 text-sm text-burgundy-600 hover:text-burgundy-700 disabled:opacity-50",children:[u?r.jsx(ge,{className:"h-4 w-4 animate-spin"}):r.jsx(ga,{className:"h-4 w-4"}),"Resend code"]})]})]})}function gee({emailEnabled:e,smsEnabled:t,pushEnabled:n,phoneVerified:s,onEmailChange:a,onSmsChange:i,onPushChange:l}){return r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200 mb-6",children:[r.jsxs("h3",{className:"text-lg font-display font-bold text-neutral-800 mb-4 flex items-center gap-2",children:[r.jsx(Rs,{className:"h-5 w-5 text-burgundy-500"}),"Notifications"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between cursor-pointer p-3 bg-cream-50 rounded-xl border border-cream-200 hover:bg-cream-100 transition-colors",onClick:()=>a(!e),children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(xs,{className:"h-5 w-5 text-neutral-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-neutral-800 font-medium",children:"Email Notifications"}),r.jsx("p",{className:"text-neutral-400 text-sm",children:"Reminders, results, and updates"})]})]}),r.jsx("div",{className:`w-12 h-7 rounded-full p-1 transition-colors ${e?"bg-burgundy-500":"bg-neutral-300"}`,children:r.jsx("div",{className:`w-5 h-5 rounded-full bg-white shadow-md transform transition-transform ${e?"translate-x-5":"translate-x-0"}`})})]}),r.jsxs("div",{className:`flex items-center justify-between p-3 bg-cream-50 rounded-xl border border-cream-200 transition-colors ${s?"cursor-pointer hover:bg-cream-100":"opacity-60 cursor-not-allowed"}`,onClick:()=>s&&i(!t),children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(td,{className:"h-5 w-5 text-neutral-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-neutral-800 font-medium",children:"SMS Notifications"}),r.jsx("p",{className:"text-neutral-400 text-sm",children:s?"Pick reminders and urgent alerts":"Verify phone to enable"})]})]}),r.jsx("div",{className:`w-12 h-7 rounded-full p-1 transition-colors ${t&&s?"bg-burgundy-500":"bg-neutral-300"}`,children:r.jsx("div",{className:`w-5 h-5 rounded-full bg-white shadow-md transform transition-transform ${t&&s?"translate-x-5":"translate-x-0"}`})})]}),r.jsxs("div",{className:"flex items-center justify-between cursor-pointer p-3 bg-cream-50 rounded-xl border border-cream-200 hover:bg-cream-100 transition-colors",onClick:()=>l(!n),children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Rs,{className:"h-5 w-5 text-neutral-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-neutral-800 font-medium",children:"Push Notifications"}),r.jsx("p",{className:"text-neutral-400 text-sm",children:"Real-time updates on your device"})]})]}),r.jsx("div",{className:`w-12 h-7 rounded-full p-1 transition-colors ${n?"bg-burgundy-500":"bg-neutral-300"}`,children:r.jsx("div",{className:`w-5 h-5 rounded-full bg-white shadow-md transform transition-transform ${n?"translate-x-5":"translate-x-0"}`})})]})]})]})}function xee({onChangePassword:e,isChanging:t,error:n,success:s}){const[a,i]=C.useState(!1),[l,u]=C.useState(""),[d,h]=C.useState(""),[p,m]=C.useState(!1),[g,y]=C.useState(!1),[b,w]=C.useState(null),v=()=>{if(l.length<8){w("Password must be at least 8 characters");return}if(l!==d){w("Passwords do not match");return}w(null),e(l)},j=()=>{i(!1),u(""),h(""),w(null)};s&&a&&(i(!1),u(""),h(""));const E=b||n;return r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200 mb-6",children:[r.jsxs("h3",{className:"text-lg font-display font-bold text-neutral-800 mb-4 flex items-center gap-2",children:[r.jsx(Dn,{className:"h-5 w-5 text-burgundy-500"}),"Security"]}),s&&r.jsxs("div",{className:"mb-4 flex items-center gap-2 p-3 bg-green-50 border border-green-200 rounded-xl text-green-600 text-sm",children:[r.jsx(Rt,{className:"h-4 w-4 flex-shrink-0"}),s]}),a?r.jsxs("div",{className:"space-y-4",children:[E&&r.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-xl text-red-600 text-sm",children:[r.jsx(ot,{className:"h-4 w-4 flex-shrink-0"}),E]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"New Password"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:p?"text":"password",value:l,onChange:k=>u(k.target.value),placeholder:"Enter new password",className:"input w-full pr-10"}),r.jsx("button",{type:"button",onClick:()=>m(!p),className:"absolute right-3 top-1/2 -translate-y-1/2 text-neutral-400 hover:text-neutral-600",children:p?r.jsx(km,{className:"h-5 w-5"}):r.jsx(Em,{className:"h-5 w-5"})})]}),r.jsx("p",{className:"text-neutral-400 text-xs mt-1",children:"Must be at least 8 characters"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Confirm Password"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:g?"text":"password",value:d,onChange:k=>h(k.target.value),placeholder:"Confirm new password",className:"input w-full pr-10"}),r.jsx("button",{type:"button",onClick:()=>y(!g),className:"absolute right-3 top-1/2 -translate-y-1/2 text-neutral-400 hover:text-neutral-600",children:g?r.jsx(km,{className:"h-5 w-5"}):r.jsx(Em,{className:"h-5 w-5"})})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:v,disabled:!l||!d||t,className:"btn btn-primary flex-1",children:t?r.jsx(ge,{className:"h-5 w-5 animate-spin"}):"Update Password"}),r.jsx("button",{onClick:j,disabled:t,className:"btn btn-secondary",children:"Cancel"})]})]}):r.jsxs("button",{onClick:()=>i(!0),className:"w-full flex items-center justify-between p-3 bg-cream-50 rounded-xl border border-cream-200 hover:bg-cream-100 transition-colors text-left",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-neutral-800 font-medium",children:"Change Password"}),r.jsx("p",{className:"text-neutral-400 text-sm",children:"Update your account password"})]}),r.jsx(Dn,{className:"h-5 w-5 text-neutral-400"})]})]})}function yee({onLogout:e}){return r.jsxs("button",{onClick:e,className:"w-full flex items-center justify-center gap-2 bg-red-50 hover:bg-red-100 border border-red-200 text-red-600 font-bold py-3 rounded-xl transition-colors",children:[r.jsx(YJ,{className:"h-5 w-5"}),"Log Out"]})}function bee(){const e=Kr(),t=zt(),[n,s]=C.useState(null),[a,i]=C.useState(null),[l,u]=C.useState(null),[d,h]=C.useState(null),[p,m]=C.useState(!1),[g,y]=C.useState(null),[b,w]=C.useState(null),{data:v,isLoading:j,isError:E,error:k,refetch:S}=se({queryKey:["user-profile"],queryFn:async()=>{const{data:{user:O}}=await G.auth.getUser();if(!O)throw new Error("Not authenticated");const{data:F,error:K}=await G.from("users").select("*").eq("id",O.id).single();if(K)throw console.error("Profile query error:",K),K;return F},retry:2,retryDelay:1e3}),P=$e({mutationFn:async O=>{const{data:{user:F}}=await G.auth.getUser();if(!F)throw new Error("Not authenticated");const{error:K}=await G.from("users").update(O).eq("id",F.id);if(K)throw K},onSuccess:()=>{t.invalidateQueries({queryKey:["user-profile"]}),s(null),i("Profile updated successfully!"),setTimeout(()=>i(null),3e3)},onError:O=>{s(O.message),i(null)}}),A=$e({mutationFn:async O=>{const{data:{user:F}}=await G.auth.getUser();if(!F)throw new Error("Not authenticated");const{error:K}=await G.from("users").update(O).eq("id",F.id);if(K)throw K},onSuccess:()=>{t.invalidateQueries({queryKey:["user-profile"]})}}),T=$e({mutationFn:async O=>{const{data:{session:F}}=await G.auth.getSession();if(!(F!=null&&F.access_token))throw new Error("Not authenticated");const K=await ut("/me/phone",F.access_token,{method:"PATCH",body:JSON.stringify({phone:O})});if(K.error)throw new Error(K.error);return K.data},onSuccess:O=>{m(!0),u(null),h((O==null?void 0:O.message)||"Verification code sent!"),t.invalidateQueries({queryKey:["user-profile"]})},onError:O=>{u(O.message),h(null)}}),L=$e({mutationFn:async O=>{const{data:{session:F}}=await G.auth.getSession();if(!(F!=null&&F.access_token))throw new Error("Not authenticated");const K=await ut("/me/verify-phone",F.access_token,{method:"POST",body:JSON.stringify({code:O})});if(K.error)throw new Error(K.error);return K.data},onSuccess:O=>{m(!1),u(null),h((O==null?void 0:O.message)||"Phone verified!"),t.invalidateQueries({queryKey:["user-profile"]})},onError:O=>{u(O.message),h(null)}}),H=$e({mutationFn:async()=>{const{data:{session:O}}=await G.auth.getSession();if(!(O!=null&&O.access_token))throw new Error("Not authenticated");const F=await ut("/me/resend-code",O.access_token,{method:"POST"});if(F.error)throw new Error(F.error);return F.data},onSuccess:O=>{u(null),h((O==null?void 0:O.message)||"New code sent!")},onError:O=>{u(O.message),h(null)}}),R=$e({mutationFn:async O=>{const{error:F}=await G.auth.updateUser({password:O});if(F)throw F},onSuccess:()=>{y(null),w("Password changed successfully!"),setTimeout(()=>w(null),3e3)},onError:O=>{y(O.message),w(null)}}),M=async()=>{try{localStorage.removeItem("adminViewMode"),await G.auth.signOut(),e("/login")}catch(O){console.error("Logout failed:",O),window.location.href="/login"}};return j?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx(ge,{className:"h-8 w-8 text-burgundy-500 animate-spin"})}):E?r.jsx("div",{className:"max-w-2xl mx-auto",children:r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-6 text-center",children:[r.jsx(ot,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),r.jsx("h2",{className:"text-xl font-display font-bold text-red-800 mb-2",children:"Failed to Load Profile"}),r.jsx("p",{className:"text-red-600 mb-4",children:k instanceof Error?k.message:"An unexpected error occurred. Please try again."}),r.jsxs("button",{onClick:()=>S(),className:"inline-flex items-center gap-2 px-4 py-2 bg-burgundy-600 text-white rounded-lg hover:bg-burgundy-700 transition-colors",children:[r.jsx(ga,{className:"h-4 w-4"}),"Try Again"]})]})}):r.jsxs("div",{className:"max-w-2xl mx-auto",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h1",{className:"text-2xl font-display font-bold text-neutral-800",children:"Profile"}),r.jsx("p",{className:"text-neutral-500",children:"Manage your account settings"})]}),!(v!=null&&v.phone_verified)&&r.jsx(fee,{}),r.jsx(mee,{displayName:(v==null?void 0:v.display_name)||"",email:(v==null?void 0:v.email)||"",avatarUrl:(v==null?void 0:v.avatar_url)||null,userId:(v==null?void 0:v.id)||"",onUpdateName:O=>P.mutate({display_name:O}),onUpdateAvatar:O=>P.mutate({avatar_url:O}),isUpdating:P.isPending,error:n,success:a}),r.jsx(pee,{currentPhone:(v==null?void 0:v.phone)||null,isPhoneVerified:(v==null?void 0:v.phone_verified)??!1,onUpdatePhone:O=>T.mutate(O),onVerifyCode:O=>L.mutate(O),onResendCode:()=>H.mutate(),isUpdating:T.isPending,isVerifying:L.isPending,isResending:H.isPending,error:l,success:d,showVerification:p,onShowVerification:m}),r.jsx(gee,{emailEnabled:(v==null?void 0:v.notification_email)??!0,smsEnabled:(v==null?void 0:v.notification_sms)??!1,pushEnabled:(v==null?void 0:v.notification_push)??!0,phoneVerified:(v==null?void 0:v.phone_verified)??!1,onEmailChange:O=>A.mutate({notification_email:O}),onSmsChange:O=>A.mutate({notification_sms:O}),onPushChange:O=>A.mutate({notification_push:O})}),r.jsx(xee,{onChangePassword:O=>R.mutate(O),isChanging:R.isPending,error:g,success:b}),r.jsx(yee,{onLogout:M})]})}const vee=[{value:"",label:"Select a season (optional)"},{value:"borneo",label:"Borneo (S1)"},{value:"australian-outback",label:"The Australian Outback (S2)"},{value:"africa",label:"Africa (S3)"},{value:"marquesas",label:"Marquesas (S4)"},{value:"thailand",label:"Thailand (S5)"},{value:"amazon",label:"The Amazon (S6)"},{value:"pearl-islands",label:"Pearl Islands (S7)"},{value:"all-stars",label:"All-Stars (S8)"},{value:"vanuatu",label:"Vanuatu (S9)"},{value:"palau",label:"Palau (S10)"},{value:"guatemala",label:"Guatemala (S11)"},{value:"panama",label:"Panama (S12)"},{value:"cook-islands",label:"Cook Islands (S13)"},{value:"fiji",label:"Fiji (S14)"},{value:"china",label:"China (S15)"},{value:"micronesia",label:"Micronesia (S16)"},{value:"gabon",label:"Gabon (S17)"},{value:"tocantins",label:"Tocantins (S18)"},{value:"samoa",label:"Samoa (S19)"},{value:"heroes-vs-villains",label:"Heroes vs. Villains (S20)"},{value:"nicaragua",label:"Nicaragua (S21)"},{value:"redemption-island",label:"Redemption Island (S22)"},{value:"south-pacific",label:"South Pacific (S23)"},{value:"one-world",label:"One World (S24)"},{value:"philippines",label:"Philippines (S25)"},{value:"caramoan",label:"Caramoan (S26)"},{value:"blood-vs-water",label:"Blood vs. Water (S27)"},{value:"cagayan",label:"Cagayan (S28)"},{value:"san-juan-del-sur",label:"San Juan del Sur (S29)"},{value:"worlds-apart",label:"Worlds Apart (S30)"},{value:"cambodia",label:"Cambodia (S31)"},{value:"kaoh-rong",label:"Kah Rng (S32)"},{value:"millennials-vs-gen-x",label:"Millennials vs. Gen X (S33)"},{value:"game-changers",label:"Game Changers (S34)"},{value:"heroes-healers-hustlers",label:"Heroes vs. Healers vs. Hustlers (S35)"},{value:"ghost-island",label:"Ghost Island (S36)"},{value:"david-vs-goliath",label:"David vs. Goliath (S37)"},{value:"edge-of-extinction",label:"Edge of Extinction (S38)"},{value:"island-of-the-idols",label:"Island of the Idols (S39)"},{value:"winners-at-war",label:"Winners at War (S40)"},{value:"41",label:"Survivor 41 (S41)"},{value:"42",label:"Survivor 42 (S42)"},{value:"43",label:"Survivor 43 (S43)"},{value:"44",label:"Survivor 44 (S44)"},{value:"45",label:"Survivor 45 (S45)"},{value:"46",label:"Survivor 46 (S46)"},{value:"47",label:"Survivor 47 (S47)"},{value:"48",label:"Survivor 48 (S48)"},{value:"49",label:"Survivor 49 (S49)"},{value:"50",label:"Survivor 50: In the Hands of the Fans (S50)"}];function wee(){const e=Kr(),[t]=cd(),n=zt(),{user:s,profile:a,refreshProfile:i,loading:l}=yt(),[u,d]=C.useState(1),[h,p]=C.useState(""),[m,g]=C.useState(""),[y,b]=C.useState(""),[w,v]=C.useState(""),[j,E]=C.useState(""),[k,S]=C.useState(""),[P,A]=C.useState(!0),[T,L]=C.useState(""),[H,R]=C.useState(!1),{data:M,isFetching:O}=se({queryKey:["season-50-castaways"],queryFn:async()=>{const{data:$}=await G.from("seasons").select("id").eq("number",50).single();if(!$)return[];const{data:J,error:le}=await G.from("castaways").select("id, name").eq("season_id",$.id).eq("status","active").order("name");if(le)throw le;return J||[]},enabled:u>=3}),{data:F}=se({queryKey:["profile-setup-fallback",s==null?void 0:s.id],queryFn:async()=>{if(!(s!=null&&s.id))return null;const{data:$,error:J}=await G.from("users").select("display_name, email, profile_setup_complete").eq("id",s.id).maybeSingle();if(J&&J.code!=="PGRST116"&&(J==null?void 0:J.status)!==406)throw J;return $},enabled:!!s&&!a,staleTime:6e4}),K=C.useMemo(()=>a??F,[a,F]),ae=({className:$=""})=>r.jsx("div",{className:`animate-pulse bg-cream-200 rounded-lg ${$}`}),X=()=>r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b from-cream-100 to-cream-200 px-4 py-12",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-float max-w-md w-full p-8",children:[r.jsx("div",{className:"flex justify-center mb-6",children:r.jsx(ae,{className:"h-16 w-32 rounded-2xl"})}),r.jsx(ae,{className:"h-8 w-40 mx-auto mb-2"}),r.jsx(ae,{className:"h-4 w-56 mx-auto mb-6"}),r.jsx("div",{className:"flex justify-center gap-2 mb-6",children:[1,2,3,4].map($=>r.jsx(ae,{className:"h-3 w-3 rounded-full"},$))}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(ae,{className:"h-4 w-24 mb-2"}),r.jsx(ae,{className:"h-11 w-full"})]}),r.jsx(ae,{className:"h-10 w-full"}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx(ae,{className:"h-10 w-full"}),r.jsx(ae,{className:"h-10 w-full"})]})]})]})}),ee=$e({mutationFn:async $=>{const J={display_name:$.display_name,notification_email:$.notification_email,profile_setup_complete:!0};$.hometown&&(J.hometown=$.hometown),$.favorite_castaway&&(J.favorite_castaway=$.favorite_castaway),$.bio&&(J.bio=$.bio),$.favorite_season&&(J.favorite_season=$.favorite_season),$.season_50_winner_prediction&&(J.season_50_winner_prediction=$.season_50_winner_prediction),console.log("Updating profile with data:",J);const{data:le}=await G.from("users").select("id, role").eq("id",s.id).maybeSingle(),ve={id:s.id,email:s.email||"",display_name:$.display_name,notification_email:$.notification_email,...J};le!=null&&le.role&&(ve.role=le.role);const{error:Ee}=await G.from("users").upsert(ve,{onConflict:"id"});if(Ee)throw console.error("Profile update error:",Ee),new Error(Ee.message||"Update failed")},onSuccess:async()=>{await i(),n.invalidateQueries({queryKey:["profile",s==null?void 0:s.id]});const $=t.get("redirect")||"/dashboard";e($==="/profile/setup"?"/dashboard":$,{replace:!0})}}),D=()=>{if(u===1){if(!h.trim()){L("Please enter a display name");return}if(h.trim().length<2){L("Display name must be at least 2 characters");return}L(""),d(2)}else u===2?(L(""),d(3)):u===3&&(L(""),d(4))},te=()=>{u===2?d(1):u===3?d(2):u===4&&d(3)},V=async $=>{$.preventDefault(),L("");try{localStorage.setItem("storage-test","test"),localStorage.removeItem("storage-test")}catch{L('Your browser is blocking local storage. Please disable "Incognito" mode or allow cookies/storage for this site.');return}R(!0);try{const{data:{session:J}}=await G.auth.getSession();if(!J)throw new Error("Your session has expired. Please log in again.");await ee.mutateAsync({display_name:h.trim(),hometown:m.trim()||void 0,favorite_castaway:y.trim()||void 0,bio:w.trim()||void 0,favorite_season:j||void 0,season_50_winner_prediction:k||void 0,notification_email:P})}catch(J){console.error("Submit error:",J);const le=(J==null?void 0:J.message)||(typeof J=="string"?J:"Unknown error");le.toLowerCase().includes("jwt")||le.toLowerCase().includes("session")||le.toLowerCase().includes("auth")?L("Your login session has expired. Please refresh the page to log in again."):le.includes("check your connection")?L(`Connection issue: ${le}. If this persists, try logging out and back in.`):L(le),R(!1)}};if(l)return X();if(!s)return e("/login?redirect=/profile/setup",{replace:!0}),null;if(K!=null&&K.profile_setup_complete){const $=t.get("redirect")||"/dashboard";return e($==="/profile/setup"?"/dashboard":$,{replace:!0}),null}return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b from-cream-100 to-cream-200 px-4 py-12",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-float max-w-md w-full p-8 animate-slide-up",children:[r.jsx("div",{className:"flex justify-center mb-6",children:r.jsx("img",{src:"/logo.png",alt:"RGFL",className:"h-16 w-auto"})}),r.jsxs("div",{className:"flex justify-center gap-2 mb-6",children:[r.jsx("div",{className:`w-3 h-3 rounded-full ${u>=1?"bg-burgundy-500":"bg-cream-300"}`}),r.jsx("div",{className:`w-3 h-3 rounded-full ${u>=2?"bg-burgundy-500":"bg-cream-300"}`}),r.jsx("div",{className:`w-3 h-3 rounded-full ${u>=3?"bg-burgundy-500":"bg-cream-300"}`}),r.jsx("div",{className:`w-3 h-3 rounded-full ${u>=4?"bg-burgundy-500":"bg-cream-300"}`})]}),u===1&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("div",{className:"w-16 h-16 bg-burgundy-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Ap,{className:"h-8 w-8 text-burgundy-600"})}),r.jsx("h1",{className:"font-display text-3xl text-neutral-800 mb-2",children:"Welcome!"}),r.jsx("p",{className:"text-neutral-500",children:"What is your name? (First Name, Last Initial i.e. Jeff P.)"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"displayName",className:"block text-sm font-medium text-neutral-700 mb-2",children:"Display Name"}),r.jsx("input",{id:"displayName",type:"text",value:h,onChange:$=>p($.target.value),placeholder:"Jeff P.",className:"w-full px-4 py-3 rounded-xl border border-cream-300 focus:border-burgundy-500 focus:ring-2 focus:ring-burgundy-500/20 outline-none transition-all",autoFocus:!0}),r.jsx("p",{className:"text-xs text-neutral-500 mt-1",children:"This is how other players will see you"})]}),T&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-3 text-sm text-red-700",children:T}),r.jsx("button",{type:"button",onClick:D,disabled:!h.trim(),className:"w-full bg-burgundy-500 hover:bg-burgundy-600 text-white font-semibold py-3 rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]}),u===2&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("div",{className:"w-16 h-16 bg-burgundy-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Bv,{className:"h-8 w-8 text-burgundy-600"})}),r.jsx("h1",{className:"font-display text-3xl text-neutral-800 mb-2",children:"Tell Us About You"}),r.jsx("p",{className:"text-neutral-500",children:"Where are you from?"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"hometown",className:"block text-sm font-medium text-neutral-700 mb-2",children:"Hometown (optional)"}),r.jsx("input",{id:"hometown",type:"text",value:m,onChange:$=>g($.target.value),placeholder:"e.g., Los Angeles, CA",className:"w-full px-4 py-3 rounded-xl border border-cream-300 focus:border-burgundy-500 focus:ring-2 focus:ring-burgundy-500/20 outline-none transition-all",autoFocus:!0})]}),T&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-3 text-sm text-red-700",children:T}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{type:"button",onClick:te,className:"flex-1 bg-cream-100 hover:bg-cream-200 text-neutral-700 font-semibold py-3 rounded-xl transition-all",children:"Back"}),r.jsx("button",{type:"button",onClick:D,className:"flex-1 bg-burgundy-500 hover:bg-burgundy-600 text-white font-semibold py-3 rounded-xl transition-all",children:"Next"})]})]})]}),u===3&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("div",{className:"w-16 h-16 bg-burgundy-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Yn,{className:"h-8 w-8 text-burgundy-600"})}),r.jsx("h1",{className:"font-display text-3xl text-neutral-800 mb-2",children:"Your Favorites"}),r.jsx("p",{className:"text-neutral-500",children:"Who's your favorite castaway?"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"favoriteCastaway",className:"block text-sm font-medium text-neutral-700 mb-2",children:"Favorite Castaway (optional)"}),r.jsx("input",{id:"favoriteCastaway",type:"text",value:y,onChange:$=>b($.target.value),placeholder:"e.g., Parvati Shallow",className:"w-full px-4 py-3 rounded-xl border border-cream-300 focus:border-burgundy-500 focus:ring-2 focus:ring-burgundy-500/20 outline-none transition-all",autoFocus:!0})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"favoriteSeason",className:"block text-sm font-medium text-neutral-700 mb-2",children:"Favorite Survivor Season (optional)"}),r.jsx("select",{id:"favoriteSeason",value:j,onChange:$=>E($.target.value),className:"w-full px-4 py-3 rounded-xl border border-cream-300 focus:border-burgundy-500 focus:ring-2 focus:ring-burgundy-500/20 outline-none transition-all bg-white",children:vee.map($=>r.jsx("option",{value:$.value,children:$.label},$.value))})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"season50Winner",className:"block text-sm font-medium text-neutral-700 mb-2",children:" Who Will Win Season 50? (optional)"}),O?r.jsxs("div",{className:"space-y-2",children:[r.jsx(ae,{className:"h-11 w-full"}),r.jsx(ae,{className:"h-3 w-48"})]}):r.jsxs(r.Fragment,{children:[r.jsxs("select",{id:"season50Winner",value:k,onChange:$=>S($.target.value),className:"w-full px-4 py-3 rounded-xl border border-cream-300 focus:border-burgundy-500 focus:ring-2 focus:ring-burgundy-500/20 outline-none transition-all bg-white",children:[r.jsx("option",{value:"",children:"Make your prediction (optional)"}),M==null?void 0:M.map($=>r.jsx("option",{value:$.id,children:$.name},$.id))]}),r.jsx("p",{className:"text-xs text-neutral-500 mt-1",children:"Just for fun! Lock in your prediction before the season starts."})]})]}),T&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-3 text-sm text-red-700",children:T}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{type:"button",onClick:te,className:"flex-1 bg-cream-100 hover:bg-cream-200 text-neutral-700 font-semibold py-3 rounded-xl transition-all",children:"Back"}),r.jsx("button",{type:"button",onClick:D,className:"flex-1 bg-burgundy-500 hover:bg-burgundy-600 text-white font-semibold py-3 rounded-xl transition-all",children:"Next"})]})]})]}),u===4&&r.jsxs("form",{onSubmit:V,children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("div",{className:"w-16 h-16 bg-burgundy-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Sp,{className:"h-8 w-8 text-burgundy-600"})}),r.jsx("h1",{className:"font-display text-3xl text-neutral-800 mb-2",children:"Almost Done!"}),r.jsx("p",{className:"text-neutral-500",children:"Tell us about yourself"})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"bio",className:"block text-sm font-medium text-neutral-700 mb-2",children:"Bio (optional)"}),r.jsx("textarea",{id:"bio",value:w,onChange:$=>v($.target.value),placeholder:"Tell us a bit about yourself...",rows:4,className:"w-full px-4 py-3 rounded-xl border border-cream-300 focus:border-burgundy-500 focus:ring-2 focus:ring-burgundy-500/20 outline-none transition-all resize-none"})]}),r.jsxs("div",{className:"flex items-center justify-between cursor-pointer p-4 bg-cream-50 rounded-xl border border-cream-200 hover:bg-cream-100 transition-colors",onClick:()=>A(!P),children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Rs,{className:"h-5 w-5 text-neutral-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-neutral-800 font-medium",children:"Email Notifications"}),r.jsx("p",{className:"text-neutral-400 text-sm",children:"Get reminders and results"})]})]}),r.jsx("div",{className:`w-12 h-7 rounded-full p-1 transition-colors ${P?"bg-burgundy-500":"bg-neutral-300"}`,children:r.jsx("div",{className:`w-5 h-5 rounded-full bg-white shadow-md transform transition-transform ${P?"translate-x-5":"translate-x-0"}`})})]}),T&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-3 text-sm text-red-700",children:T}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{type:"button",onClick:te,className:"flex-1 bg-cream-100 hover:bg-cream-200 text-neutral-700 font-semibold py-3 rounded-xl transition-all",children:"Back"}),r.jsx("button",{type:"submit",disabled:H,className:"flex-1 bg-burgundy-500 hover:bg-burgundy-600 text-white font-semibold py-3 rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:H?r.jsxs(r.Fragment,{children:[r.jsx(ge,{className:"h-5 w-5 animate-spin"}),"Setting up..."]}):"Let's Play!"})]})]})]})]})})}function _ee({leagueId:e}){const{user:t}=yt(),n=zt(),[s,a]=C.useState(""),i=C.useRef(null),l=C.useRef(null),{data:u,isLoading:d}=se({queryKey:["league-messages",e],queryFn:async()=>{const{data:b,error:w}=await G.from("league_messages").select(`
          id,
          user_id,
          content,
          created_at,
          user:users (
            display_name,
            avatar_url
          )
        `).eq("league_id",e).order("created_at",{ascending:!0}).limit(100);if(w)throw w;return b},refetchInterval:1e4}),h=$e({mutationFn:async b=>{const{error:w}=await G.from("league_messages").insert({league_id:e,user_id:t.id,content:b});if(w)throw w},onSuccess:()=>{var b;a(""),n.invalidateQueries({queryKey:["league-messages",e]}),(b=l.current)==null||b.focus()}});C.useEffect(()=>{const b=G.channel(`league-chat-${e}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"league_messages",filter:`league_id=eq.${e}`},()=>{n.invalidateQueries({queryKey:["league-messages",e]})}).subscribe();return()=>{G.removeChannel(b)}},[e,n]),C.useEffect(()=>{var b;(b=i.current)==null||b.scrollIntoView({behavior:"smooth"})},[u]);const p=b=>{b.preventDefault(),s.trim()&&!h.isPending&&h.mutate(s.trim())},m=b=>new Date(b).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),g=b=>{const w=new Date(b),v=new Date,j=new Date(v);return j.setDate(j.getDate()-1),w.toDateString()===v.toDateString()?"Today":w.toDateString()===j.toDateString()?"Yesterday":w.toLocaleDateString("en-US",{month:"short",day:"numeric"})},y=(u==null?void 0:u.reduce((b,w)=>{const v=new Date(w.created_at).toDateString();return b[v]||(b[v]=[]),b[v].push(w),b},{}))||{};return d?r.jsx("div",{className:"flex items-center justify-center h-96",children:r.jsx(ge,{className:"h-8 w-8 text-burgundy-500 animate-spin"})}):r.jsxs("div",{className:"flex flex-col h-[500px] bg-white rounded-2xl shadow-card border border-cream-200 overflow-hidden",children:[r.jsx("div",{className:"px-6 py-4 border-b border-cream-200 bg-cream-50",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Ro,{className:"h-5 w-5 text-burgundy-500"}),r.jsx("h3",{className:"font-semibold text-neutral-800",children:"League Chat"}),r.jsxs("span",{className:"text-sm text-neutral-400",children:[(u==null?void 0:u.length)||0," messages"]})]})}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[Object.keys(y).length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[r.jsx(Ro,{className:"h-12 w-12 text-neutral-300 mb-3"}),r.jsx("p",{className:"text-neutral-500 font-medium",children:"No messages yet"}),r.jsx("p",{className:"text-sm text-neutral-400",children:"Be the first to say something!"})]}):Object.entries(y).map(([b,w])=>r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-4 my-4",children:[r.jsx("div",{className:"flex-1 h-px bg-cream-200"}),r.jsx("span",{className:"text-xs text-neutral-400 font-medium",children:g(w[0].created_at)}),r.jsx("div",{className:"flex-1 h-px bg-cream-200"})]}),w.map((v,j)=>{var S,P,A,T;const E=v.user_id===(t==null?void 0:t.id),k=j===0||w[j-1].user_id!==v.user_id;return r.jsxs("div",{className:`flex gap-3 ${E?"flex-row-reverse":""} ${k?"mt-4":"mt-1"}`,children:[r.jsx("div",{className:`w-8 flex-shrink-0 ${k?"":"invisible"}`,children:k&&r.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-white text-sm font-semibold ${E?"bg-burgundy-500":"bg-neutral-400"}`,children:((A=(P=(S=v.user)==null?void 0:S.display_name)==null?void 0:P.charAt(0))==null?void 0:A.toUpperCase())||"?"})}),r.jsxs("div",{className:`max-w-[70%] ${E?"items-end":"items-start"}`,children:[k&&!E&&r.jsx("p",{className:"text-xs text-neutral-500 mb-1 ml-1",children:((T=v.user)==null?void 0:T.display_name)||"Unknown"}),r.jsx("div",{className:`px-4 py-2 rounded-2xl ${E?"bg-burgundy-500 text-white rounded-br-md":"bg-cream-100 text-neutral-800 rounded-bl-md"}`,children:r.jsx("p",{className:"text-sm whitespace-pre-wrap break-words",children:v.content})}),r.jsx("p",{className:`text-xs text-neutral-400 mt-1 ${E?"text-right mr-1":"ml-1"}`,children:m(v.created_at)})]})]},v.id)})]},b)),r.jsx("div",{ref:i})]}),r.jsx("form",{onSubmit:p,className:"p-4 border-t border-cream-200 bg-cream-50",children:r.jsxs("div",{className:"flex gap-3",children:[r.jsx("input",{ref:l,type:"text",value:s,onChange:b=>a(b.target.value),placeholder:"Type a message...",className:"flex-1 px-4 py-2 rounded-full border border-cream-300 bg-white focus:outline-none focus:ring-2 focus:ring-burgundy-500 focus:border-transparent",disabled:h.isPending}),r.jsx("button",{type:"submit",disabled:!s.trim()||h.isPending,className:"w-10 h-10 rounded-full bg-burgundy-500 text-white flex items-center justify-center hover:bg-burgundy-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:h.isPending?r.jsx(ge,{className:"h-5 w-5 animate-spin"}):r.jsx(Rp,{className:"h-5 w-5"})})]})})]})}function jee({league:e,members:t,myMembership:n,canManageLeague:s,copied:a,onCopyInvite:i}){var l,u;return r.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated p-6 border border-cream-200 mb-6",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-display font-bold text-neutral-800",children:e.name}),r.jsxs("div",{className:"flex items-center gap-2 mt-1 text-neutral-500",children:[r.jsx($n,{className:"h-4 w-4 text-burgundy-400","aria-hidden":"true"}),r.jsx("span",{className:"text-sm",children:((l=e.commissioner)==null?void 0:l.display_name)||"Unknown Commissioner"}),r.jsx("span",{className:"text-neutral-300","aria-hidden":"true",children:""}),r.jsxs("span",{className:"text-sm",children:["Season ",((u=e.seasons)==null?void 0:u.number)||"N/A"]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:i,className:"p-2 bg-cream-50 rounded-xl hover:bg-cream-100 transition-all border border-cream-200",title:"Copy invite link","aria-label":a?"Invite link copied":"Copy invite link",children:a?r.jsx(Rt,{className:"h-5 w-5 text-green-500","aria-hidden":"true"}):r.jsx(Pp,{className:"h-5 w-5 text-neutral-600","aria-hidden":"true"})}),s&&r.jsx(Y,{to:`/leagues/${e.id}/settings`,className:"p-2 bg-cream-50 rounded-xl hover:bg-cream-100 transition-all border border-cream-200",title:"League Settings","aria-label":"League Settings",children:r.jsx(Ip,{className:"h-5 w-5 text-neutral-600","aria-hidden":"true"})})]})]}),r.jsxs("div",{className:"grid grid-cols-4 gap-4 pt-4 border-t border-cream-100",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-2xl font-bold text-neutral-800",children:(t==null?void 0:t.length)||0}),r.jsx("p",{className:"text-xs text-neutral-500 uppercase tracking-wide",children:"Players"})]}),r.jsxs("div",{className:"text-center",children:[r.jsxs("p",{className:"text-2xl font-bold text-burgundy-600",children:["#",(n==null?void 0:n.rank)||"-"]}),r.jsx("p",{className:"text-xs text-neutral-500 uppercase tracking-wide",children:"Your Rank"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-2xl font-bold text-neutral-800",children:(n==null?void 0:n.total_points)||0}),r.jsx("p",{className:"text-xs text-neutral-500 uppercase tracking-wide",children:"Your Points"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-2xl font-bold text-green-600 capitalize",children:e.status}),r.jsx("p",{className:"text-xs text-neutral-500 uppercase tracking-wide",children:"Status"})]})]}),e.require_donation&&r.jsxs("div",{className:"mt-4 flex items-center gap-3 p-3 bg-gradient-to-r from-burgundy-50 to-cream-50 rounded-xl border border-burgundy-100",children:[r.jsx(kp,{className:"h-5 w-5 text-burgundy-500 flex-shrink-0"}),r.jsxs("div",{children:[r.jsxs("p",{className:"text-burgundy-700 font-medium text-sm",children:["$",e.donation_amount," Charity Entry"]}),r.jsx("p",{className:"text-burgundy-500 text-xs",children:"All proceeds donated to charity chosen by winner"})]})]})]})}function Nee({activeTab:e,onTabChange:t}){const n=[{id:"overview",label:"Overview",icon:r.jsx(KY,{className:"h-4 w-4"})},{id:"players",label:"Players",icon:r.jsx(Ye,{className:"h-4 w-4"})},{id:"standings",label:"Standings",icon:r.jsx(rt,{className:"h-4 w-4"})}];return r.jsx("div",{className:"flex gap-2 mb-6 overflow-x-auto pb-2",children:n.map(s=>r.jsxs("button",{onClick:()=>t(s.id),className:`px-4 py-2 rounded-xl text-sm font-medium whitespace-nowrap transition-all flex items-center gap-2 ${e===s.id?"bg-burgundy-500 text-white shadow-md":"bg-white text-neutral-600 border border-cream-200 hover:border-burgundy-200"}`,children:[s.icon,s.label]},s.id))})}function See({leagueId:e,roster:t,league:n}){return r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-5 border border-cream-200",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("h2",{className:"text-lg font-display font-bold text-neutral-800 flex items-center gap-2",children:[r.jsx(wa,{className:"h-5 w-5 text-burgundy-500"}),"My Team"]}),r.jsxs(Y,{to:`/leagues/${e}/team`,className:"text-burgundy-500 hover:text-burgundy-600 text-sm flex items-center gap-1",children:["View Details ",r.jsx(kr,{className:"h-4 w-4"})]})]}),t&&t.length>0?r.jsx("div",{className:"grid grid-cols-2 gap-4",children:t.map(s=>{var a,i,l,u,d,h,p,m,g,y;return r.jsx("div",{className:`relative rounded-xl overflow-hidden ${((a=s.castaways)==null?void 0:a.status)==="eliminated"?"opacity-60":""}`,children:r.jsx("div",{className:`p-4 ${((i=s.castaways)==null?void 0:i.status)==="eliminated"?"bg-neutral-100 border border-neutral-200":"bg-gradient-to-br from-cream-50 to-cream-100 border border-cream-200"}`,children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("img",{src:Jn(((l=s.castaways)==null?void 0:l.name)||"Unknown",(u=s.castaways)==null?void 0:u.photo_url),alt:((d=s.castaways)==null?void 0:d.name)||"Castaway",className:`w-12 h-12 rounded-full object-cover border-2 ${((h=s.castaways)==null?void 0:h.status)==="eliminated"?"border-neutral-300 grayscale":"border-burgundy-200"}`}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-neutral-800",children:(p=s.castaways)==null?void 0:p.name}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Mn,{className:`h-3 w-3 ${((m=s.castaways)==null?void 0:m.status)==="eliminated"?"text-neutral-400":"text-orange-500"}`}),r.jsx("span",{className:`text-xs capitalize ${((g=s.castaways)==null?void 0:g.status)==="eliminated"?"text-neutral-500":"text-green-600"}`,children:(y=s.castaways)==null?void 0:y.status})]})]})]})})},s.id)})}):r.jsxs("div",{className:"text-center py-8 bg-cream-50 rounded-xl border border-cream-200",children:[r.jsx(Ye,{className:"h-10 w-10 text-neutral-300 mx-auto mb-3"}),r.jsx("p",{className:"text-neutral-500",children:"Draft hasn't started yet"}),n.draft_status==="pending"&&r.jsx(Y,{to:`/leagues/${e}/draft`,className:"text-burgundy-500 hover:text-burgundy-600 text-sm mt-2 inline-block",children:"Submit Draft Rankings "})]})]})}function kee({leagueId:e}){return r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs(Y,{to:`/leagues/${e}/pick`,className:"bg-burgundy-500 hover:bg-burgundy-600 text-white rounded-2xl p-5 shadow-elevated transition-all flex items-center gap-4",children:[r.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:r.jsx(wa,{className:"h-6 w-6"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold",children:"Make Pick"}),r.jsx("p",{className:"text-burgundy-200 text-sm",children:"Choose this week's castaway"})]})]}),r.jsxs(Y,{to:`/leagues/${e}/draft`,className:"bg-white hover:bg-cream-50 text-neutral-800 rounded-2xl p-5 shadow-card border border-cream-200 transition-all flex items-center gap-4",children:[r.jsx("div",{className:"w-12 h-12 bg-cream-100 rounded-xl flex items-center justify-center",children:r.jsx(Ye,{className:"h-6 w-6 text-burgundy-500"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold",children:"Draft Rankings"}),r.jsx("p",{className:"text-neutral-500 text-sm",children:"Rank your castaways"})]})]})]})}function Eee({episode:e}){return r.jsx("div",{className:"bg-gradient-to-r from-burgundy-500 to-burgundy-600 rounded-2xl p-5 text-white shadow-elevated",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Ln,{className:"h-8 w-8 text-burgundy-200"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-burgundy-100 text-sm",children:"Next Episode"}),r.jsxs("p",{className:"font-semibold text-lg",children:["Episode ",e.number]})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-burgundy-100 text-sm",children:"Airs"}),r.jsx("p",{className:"font-semibold",children:new Date(e.air_date).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})})]})]})})}function Cee(e){return e===1?{bg:"bg-yellow-100",text:"text-yellow-700",icon:r.jsx($n,{className:"h-4 w-4 text-yellow-500"})}:e===2?{bg:"bg-gray-100",text:"text-gray-600",icon:r.jsx(lr,{className:"h-4 w-4 text-gray-400"})}:e===3?{bg:"bg-orange-100",text:"text-orange-600",icon:r.jsx(lr,{className:"h-4 w-4 text-orange-400"})}:{bg:"bg-cream-50",text:"text-neutral-600",icon:null}}function Tee({members:e,currentUserId:t,onViewFullStandings:n}){const a=(e?[...e].sort((i,l)=>(l.total_points||0)-(i.total_points||0)):[]).slice(0,3);return r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-5 border border-cream-200",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("h2",{className:"text-lg font-display font-bold text-neutral-800 flex items-center gap-2",children:[r.jsx(rt,{className:"h-5 w-5 text-burgundy-500"}),"Top Performers"]}),e&&e.length>0&&r.jsxs("button",{onClick:n,className:"text-burgundy-500 hover:text-burgundy-600 text-sm flex items-center gap-1",children:["Full Standings ",r.jsx(kr,{className:"h-4 w-4"})]})]}),(!e||e.length===0)&&r.jsxs("div",{className:"text-center py-6",children:[r.jsx(Ye,{className:"h-10 w-10 text-neutral-300 mx-auto mb-2"}),r.jsx("p",{className:"text-neutral-500 text-sm",children:"No standings yet"})]}),a.length>0&&r.jsx("div",{className:"space-y-2",children:a.map((i,l)=>{var h;const u=Cee(l+1),d=i.user_id===t;return r.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl transition-colors ${d?"bg-burgundy-50 border border-burgundy-200":`${u.bg} border border-transparent`}`,children:[r.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${u.bg}`,children:u.icon||r.jsx("span",{className:`font-bold ${u.text}`,children:l+1})}),r.jsx("div",{className:"flex-1",children:r.jsxs("p",{className:"font-medium text-neutral-800",children:[((h=i.users)==null?void 0:h.display_name)||"Unknown",d&&r.jsx("span",{className:"ml-2 text-xs text-burgundy-500",children:"(You)"})]})}),r.jsx("p",{className:"font-bold text-neutral-800",children:i.total_points||0})]},i.id)})})]})}function Ree({members:e,rostersByUser:t,currentUserId:n,commissionerId:s}){return r.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 overflow-hidden",children:[r.jsx("div",{className:"p-5 border-b border-cream-100",children:r.jsxs("h2",{className:"text-lg font-display font-bold text-neutral-800",children:["League Players (",(e==null?void 0:e.length)||0,")"]})}),r.jsx("div",{className:"divide-y divide-cream-100",children:e==null?void 0:e.map((a,i)=>{var p,m,g,y;const l=t==null?void 0:t[a.user_id],u=a.user_id===n,d=((p=a.users)==null?void 0:p.display_name)||((m=a.user)==null?void 0:m.display_name)||"Unknown Player",h=((g=a.users)==null?void 0:g.avatar_url)||null;return r.jsx("div",{className:`p-4 ${u?"bg-burgundy-50":"hover:bg-cream-50"} transition-colors`,children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-cream-100 flex items-center justify-center overflow-hidden",children:h?r.jsx("img",{src:h,alt:d,className:"w-full h-full object-cover"}):r.jsx(Ap,{className:"h-5 w-5 text-neutral-400"})}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("p",{className:"font-semibold text-neutral-800",children:[d,u&&r.jsx("span",{className:"ml-2 text-xs text-burgundy-500",children:"(You)"}),a.user_id===s&&r.jsx("span",{className:"ml-2 text-xs bg-burgundy-100 text-burgundy-600 px-2 py-0.5 rounded-full",children:"Commissioner"})]}),r.jsx("div",{className:"flex items-center gap-2 mt-2",children:((y=l==null?void 0:l.castaways)==null?void 0:y.map(b=>r.jsxs("div",{className:`flex items-center gap-2 px-2 py-1 rounded-lg text-xs ${b.status==="eliminated"?"bg-neutral-100 text-neutral-500":"bg-cream-100 text-neutral-700"}`,children:[r.jsx(Mn,{className:`h-3 w-3 ${b.status==="eliminated"?"text-neutral-400":"text-orange-500"}`}),b.name]},b.id)))||r.jsx("span",{className:"text-neutral-400 text-xs",children:"No castaways drafted"})})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-xl font-bold text-neutral-800",children:a.total_points||0}),r.jsx("p",{className:"text-xs text-neutral-400",children:"points"})]})]})},a.id)})})]})}function Iee(e){return e===1?{bg:"bg-yellow-100",text:"text-yellow-700",icon:r.jsx($n,{className:"h-4 w-4 text-yellow-500"})}:e===2?{bg:"bg-gray-100",text:"text-gray-600",icon:r.jsx(lr,{className:"h-4 w-4 text-gray-400"})}:e===3?{bg:"bg-orange-100",text:"text-orange-600",icon:r.jsx(lr,{className:"h-4 w-4 text-orange-400"})}:{bg:"bg-cream-50",text:"text-neutral-600",icon:null}}function Pee(e){const t=new Map,n=[...e].sort((i,l)=>(l.total_points||0)-(i.total_points||0));let s=1,a=null;return n.forEach((i,l)=>{const u=i.total_points||0;(a===null||u!==a)&&(s=l+1),t.set(i.id,s),a=u}),t}function Aee({members:e,currentUserId:t}){var d,h,p;const n=e?[...e].sort((m,g)=>(g.total_points||0)-(m.total_points||0)):[],s=e?Pee(e):new Map;if(!e||e.length===0)return r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-12 border border-cream-200 text-center",children:[r.jsx(Ye,{className:"h-12 w-12 text-neutral-300 mx-auto mb-4"}),r.jsx("h3",{className:"font-semibold text-neutral-700 mb-2",children:"No Members Yet"}),r.jsx("p",{className:"text-neutral-500",children:"Standings will appear once players join the league."})]});const a=n[0],i=n[1],l=n[2],u=n.length>=3&&a&&i&&l;return r.jsxs("div",{className:"space-y-6",children:[u&&r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"bg-gradient-to-b from-gray-100 to-gray-50 rounded-2xl p-5 border-2 border-gray-200 text-center mt-6",children:[r.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full mx-auto mb-2 flex items-center justify-center",children:r.jsx(lr,{className:"h-5 w-5 text-gray-500"})}),r.jsx("p",{className:"font-semibold text-neutral-800 truncate text-sm",children:((d=i.users)==null?void 0:d.display_name)||"Unknown"}),r.jsx("p",{className:"text-2xl font-display text-gray-600 mt-1",children:i.total_points||0}),r.jsx("p",{className:"text-xs text-neutral-400",children:"pts"})]}),r.jsxs("div",{className:"bg-gradient-to-b from-yellow-100 to-amber-50 rounded-2xl p-5 border-2 border-yellow-300 text-center shadow-elevated",children:[r.jsx("div",{className:"w-12 h-12 bg-yellow-300 rounded-full mx-auto mb-2 flex items-center justify-center",children:r.jsx($n,{className:"h-6 w-6 text-yellow-700"})}),r.jsx("p",{className:"font-bold text-neutral-800 truncate",children:((h=a.users)==null?void 0:h.display_name)||"Unknown"}),r.jsx("p",{className:"text-3xl font-display text-yellow-700 mt-1",children:a.total_points||0}),r.jsx("p",{className:"text-xs text-neutral-500",children:"pts"})]}),r.jsxs("div",{className:"bg-gradient-to-b from-orange-100 to-amber-50 rounded-2xl p-5 border-2 border-orange-200 text-center mt-6",children:[r.jsx("div",{className:"w-10 h-10 bg-orange-200 rounded-full mx-auto mb-2 flex items-center justify-center",children:r.jsx(lr,{className:"h-5 w-5 text-orange-500"})}),r.jsx("p",{className:"font-semibold text-neutral-800 truncate text-sm",children:((p=l.users)==null?void 0:p.display_name)||"Unknown"}),r.jsx("p",{className:"text-2xl font-display text-orange-600 mt-1",children:l.total_points||0}),r.jsx("p",{className:"text-xs text-neutral-400",children:"pts"})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 overflow-hidden",children:[r.jsx("div",{className:"p-5 border-b border-cream-100",children:r.jsx("h2",{className:"text-lg font-display font-bold text-neutral-800",children:"Full Standings"})}),r.jsx("div",{className:"divide-y divide-cream-100",children:n.map(m=>{var w;const g=s.get(m.id)||1,y=Iee(g),b=m.user_id===t;return r.jsxs("div",{className:`flex items-center gap-4 p-4 transition-colors ${b?"bg-burgundy-50 border-l-4 border-burgundy-500":"hover:bg-cream-50"}`,children:[r.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${y.bg}`,children:y.icon||r.jsx("span",{className:`font-bold ${y.text}`,children:g})}),r.jsx("div",{className:"flex-1",children:r.jsxs("p",{className:`font-semibold ${b?"text-burgundy-700":"text-neutral-800"}`,children:[((w=m.users)==null?void 0:w.display_name)||"Unknown",b&&r.jsx("span",{className:"ml-2 text-xs text-burgundy-500 font-normal",children:"(You)"})]})}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-2xl font-display text-neutral-800",children:m.total_points||0}),r.jsx("p",{className:"text-xs text-neutral-400",children:"points"})]})]},m.id)})})]})]})}function Oee({league:e,canManageLeague:t,copied:n,onCopyInvite:s}){return t?r.jsxs("div",{className:"mt-6 bg-white rounded-2xl shadow-card p-5 border border-cream-200",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-neutral-500 text-sm",children:"League Invite Code"}),r.jsx("p",{className:"font-mono text-2xl font-bold text-burgundy-600 tracking-wider",children:e.code})]}),r.jsx("button",{onClick:s,className:"btn btn-secondary flex items-center gap-2",children:n?r.jsxs(r.Fragment,{children:[r.jsx(Rt,{className:"h-5 w-5 text-green-500"}),"Copied!"]}):r.jsxs(r.Fragment,{children:[r.jsx(Np,{className:"h-5 w-5"}),"Copy Invite Link"]})})]}),r.jsxs("p",{className:"text-neutral-400 text-xs mt-2",children:["Share this link:"," ",r.jsxs("code",{className:"select-all bg-cream-50 px-1 py-0.5 rounded text-neutral-600",children:[window.location.origin,"/join/",e.code]})]})]}):r.jsx("div",{className:"mt-6 bg-white rounded-2xl shadow-card p-5 border border-cream-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-neutral-500 text-sm",children:"Invite Friends"}),r.jsx("p",{className:"text-neutral-700 font-medium",children:"Share the invite link to grow your league!"})]}),r.jsx("button",{onClick:s,className:"btn btn-primary flex items-center gap-2",children:n?r.jsxs(r.Fragment,{children:[r.jsx(Rt,{className:"h-5 w-5"}),"Copied!"]}):r.jsxs(r.Fragment,{children:[r.jsx(Pp,{className:"h-5 w-5"}),"Share Link"]})})]})})}function Mee(){const{id:e}=kn(),{user:t,loading:n}=yt(),[s,a]=cd(),[i,l]=C.useState("overview"),[u,d]=C.useState(!1),[h,p]=C.useState(!1),{data:m,isLoading:g,error:y}=zv(e),{data:b,isLoading:w}=BZ(e),{data:v}=HZ(e),{data:j}=Wv(e,t==null?void 0:t.id),{data:E}=UZ(t==null?void 0:t.id),{data:k}=qZ(m==null?void 0:m.season_id);C.useEffect(()=>{if(s.get("joined")==="true"){p(!0),s.delete("joined"),a(s,{replace:!0});const K=setTimeout(()=>p(!1),5e3);return()=>clearTimeout(K)}},[s,a]);const S=async()=>{if(!(m!=null&&m.code))return;const K=`${window.location.origin}/join/${m.code}`;try{if(navigator.clipboard&&window.isSecureContext)await navigator.clipboard.writeText(K);else{const ae=document.createElement("textarea");ae.value=K,ae.style.position="fixed",ae.style.left="-9999px",document.body.appendChild(ae),ae.select(),document.execCommand("copy"),document.body.removeChild(ae)}d(!0),setTimeout(()=>d(!1),2e3)}catch(ae){console.error("Failed to copy:",ae),alert(`Copy this link: ${K}`)}};if(!n&&!t)return r.jsx(Xl,{to:`/login?redirect=/leagues/${e}`,replace:!0});if(g||n)return r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center",children:r.jsx(ge,{className:"h-8 w-8 text-burgundy-500 animate-spin"})});if(y)return r.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200",children:[r.jsx(de,{}),r.jsx("div",{className:"max-w-md mx-auto p-4 pt-16",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-8 text-center border border-red-200",children:[r.jsx(ot,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),r.jsx("h2",{className:"text-xl font-bold text-neutral-800 mb-2",children:"Error Loading League"}),r.jsx("p",{className:"text-neutral-600 mb-4",children:y instanceof Error?y.message:"Failed to load league data"}),r.jsx(Y,{to:"/dashboard",className:"btn btn-primary",children:"Back to Dashboard"})]})})]});if(!m)return r.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200",children:[r.jsx(de,{}),r.jsx("div",{className:"max-w-md mx-auto p-4 pt-16",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-8 text-center",children:[r.jsx(ot,{className:"h-12 w-12 text-neutral-400 mx-auto mb-4"}),r.jsx("h2",{className:"text-xl font-bold text-neutral-800 mb-2",children:"League Not Found"}),r.jsx("p",{className:"text-neutral-600 mb-4",children:"This league may have been deleted or the link is incorrect."}),r.jsx(Y,{to:"/dashboard",className:"btn btn-primary",children:"Back to Dashboard"})]})})]});const P=b==null?void 0:b.find(K=>K.user_id===(t==null?void 0:t.id)),A=(m==null?void 0:m.commissioner_id)===(t==null?void 0:t.id),T=(E==null?void 0:E.role)==="admin",L=A||T;if(!((m==null?void 0:m.is_global)===!0||P||A||T)&&!w)return r.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200",children:[r.jsx(de,{}),r.jsx("div",{className:"max-w-md mx-auto p-4 pt-16",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-8 text-center border border-amber-200",children:[r.jsx(Dn,{className:"h-12 w-12 text-amber-500 mx-auto mb-4"}),r.jsx("h2",{className:"text-xl font-bold text-neutral-800 mb-2",children:"Private League"}),r.jsx("p",{className:"text-neutral-600 mb-4",children:"You need to be a member of this league to view its contents."}),m.code&&r.jsx(Y,{to:`/join/${m.code}`,className:"btn btn-primary mb-3 inline-block",children:"Join This League"}),r.jsx("div",{children:r.jsx(Y,{to:"/dashboard",className:"text-burgundy-500 hover:text-burgundy-600",children:"Back to Dashboard"})})]})})]});const M=!!P;if(!(m.is_public||M||A||T))return r.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200",children:[r.jsx(de,{}),r.jsx("div",{className:"max-w-md mx-auto p-4 pt-16",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-8 border border-cream-200 text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-burgundy-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Dn,{className:"h-8 w-8 text-burgundy-500"})}),r.jsx("h1",{className:"text-2xl font-display font-bold text-neutral-800 mb-2",children:"Private League"}),r.jsx("p",{className:"text-neutral-500 mb-6",children:"This is a private league. You need to be a member to view its content."}),m.password_hash?r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm text-neutral-500 justify-center",children:[r.jsx(ot,{className:"h-4 w-4"}),r.jsx("span",{children:"This league requires a password to join"})]}),r.jsx(Y,{to:`/join/${m.code}`,className:"btn btn-primary w-full",children:"Join with Invite Code"})]}):r.jsx(Y,{to:`/join/${m.code}`,className:"btn btn-primary w-full",children:"Request to Join"}),r.jsx(Y,{to:"/dashboard",className:"block mt-4 text-burgundy-500 hover:text-burgundy-600 text-sm",children:" Back to Dashboard"})]})})]});const F=v==null?void 0:v.reduce((K,ae)=>{const X=ae.user_id;return K[X]||(K[X]={user:ae.users,castaways:[]}),K[X].castaways.push(ae.castaways),K},{});return r.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200",children:[r.jsx(de,{}),r.jsxs("div",{className:"max-w-4xl mx-auto p-4 pb-24",children:[h&&r.jsxs("div",{className:"mb-4 bg-green-50 border border-green-200 rounded-xl p-4 flex items-center gap-3 animate-slide-down",children:[r.jsx(At,{className:"h-5 w-5 text-green-600 flex-shrink-0"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-semibold text-green-800",children:"Successfully joined the league!"}),r.jsx("p",{className:"text-sm text-green-700",children:"Your payment was processed and you're now a member."})]}),r.jsx("button",{onClick:()=>p(!1),className:"text-green-600 hover:text-green-800 text-sm font-medium",children:"Dismiss"})]}),r.jsx(jee,{league:m,members:b,myMembership:P,canManageLeague:L,copied:u,onCopyInvite:S}),r.jsx(Nee,{activeTab:i,onTabChange:l}),i==="overview"&&r.jsxs("div",{className:"space-y-6",children:[r.jsx(See,{leagueId:e,roster:j,league:m}),r.jsx(kee,{leagueId:e}),k&&r.jsx(Eee,{episode:k}),r.jsx(Tee,{members:b,currentUserId:t==null?void 0:t.id,onViewFullStandings:()=>l("standings")}),e&&r.jsx(_ee,{leagueId:e})]}),i==="players"&&r.jsx(Ree,{members:b,rostersByUser:F,currentUserId:t==null?void 0:t.id,commissionerId:m.commissioner_id}),i==="standings"&&r.jsx(Aee,{members:b,currentUserId:t==null?void 0:t.id}),r.jsx(Oee,{league:m,canManageLeague:L,copied:u,onCopyInvite:S})]})]})}function Lee(){const{leagueId:e}=kn(),{data:t}=se({queryKey:["current-user"],queryFn:async()=>{const{data:{user:u}}=await G.auth.getUser();return u}}),{data:n}=se({queryKey:["league",e],queryFn:async()=>{if(!e)throw new Error("No league ID");const{data:u,error:d}=await G.from("leagues").select("*, seasons(*)").eq("id",e).single();if(d)throw d;return u},enabled:!!e}),{data:s}=se({queryKey:["my-roster",e],queryFn:async()=>{if(!e||!t)throw new Error("Missing data");const{data:u,error:d}=await G.from("rosters").select("*, castaways(*)").eq("league_id",e).eq("user_id",t.id).is("dropped_at",null).order("draft_round",{ascending:!0});if(d)throw d;return u||[]},enabled:!!e&&!!t}),{data:a}=se({queryKey:["pick-history",e],queryFn:async()=>{if(!e||!t)throw new Error("Missing data");const{data:u,error:d}=await G.from("weekly_picks").select("*, episodes(*), castaways(*)").eq("league_id",e).eq("user_id",t.id).order("episodes(number)",{ascending:!1});if(d)throw d;return u||[]},enabled:!!e&&!!t}),{data:i}=se({queryKey:["my-membership",e],queryFn:async()=>{if(!e||!t)throw new Error("Missing data");const{data:u,error:d}=await G.from("league_members").select("*").eq("league_id",e).eq("user_id",t.id).single();if(d)throw d;return u},enabled:!!e&&!!t}),l=(a==null?void 0:a.reduce((u,d)=>u+(d.points_earned||0),0))||0;return r.jsxs(r.Fragment,{children:[r.jsx(de,{}),r.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 p-4 pb-24",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx(Y,{to:`/leagues/${e}`,className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:r.jsx(at,{className:"h-5 w-5 text-neutral-600"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-display font-bold text-neutral-800",children:"My Team"}),r.jsx("p",{className:"text-neutral-500",children:n==null?void 0:n.name})]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-6",children:[r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-4 border border-cream-200 text-center",children:[r.jsx(rt,{className:"h-5 w-5 text-burgundy-500 mx-auto mb-1"}),r.jsx("p",{className:"text-xl font-bold text-neutral-800",children:(i==null?void 0:i.rank)||"-"}),r.jsx("p",{className:"text-neutral-500 text-xs",children:"Rank"})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-4 border border-cream-200 text-center",children:[r.jsx(Ye,{className:"h-5 w-5 text-burgundy-500 mx-auto mb-1"}),r.jsx("p",{className:"text-xl font-bold text-neutral-800",children:(s==null?void 0:s.length)||0}),r.jsx("p",{className:"text-neutral-500 text-xs",children:"Castaways"})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-4 border border-cream-200 text-center",children:[r.jsx(ur,{className:"h-5 w-5 text-burgundy-500 mx-auto mb-1"}),r.jsx("p",{className:"text-xl font-bold text-neutral-800",children:l}),r.jsx("p",{className:"text-neutral-500 text-xs",children:"Points"})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-4 border border-cream-200 mb-6",children:[r.jsx("h2",{className:"text-lg font-display font-bold text-neutral-800 mb-4",children:"Current Roster"}),s&&s.length>0?r.jsx("div",{className:"space-y-3",children:s.map(u=>{var d,h,p,m,g,y,b,w,v;return r.jsxs("div",{className:`flex items-center gap-4 p-4 rounded-xl ${((d=u.castaways)==null?void 0:d.status)==="eliminated"?"bg-red-50 border border-red-200":"bg-cream-50 border border-cream-200"}`,children:[r.jsx("img",{src:Jn(((h=u.castaways)==null?void 0:h.name)||"Unknown",(p=u.castaways)==null?void 0:p.photo_url),alt:((m=u.castaways)==null?void 0:m.name)||"Castaway",className:"w-12 h-12 rounded-full object-cover"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-neutral-800 font-medium",children:(g=u.castaways)==null?void 0:g.name}),r.jsxs("p",{className:"text-neutral-500 text-sm",children:["Round ",u.draft_round]})]}),r.jsx("div",{className:"text-right",children:r.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${((y=u.castaways)==null?void 0:y.status)==="eliminated"?"bg-red-100 text-red-700":((b=u.castaways)==null?void 0:b.status)==="winner"?"bg-amber-100 text-amber-700":"bg-green-100 text-green-700"}`,children:(v=(w=u.castaways)==null?void 0:w.status)==null?void 0:v.toUpperCase()})})]},u.id)})}):r.jsx("p",{className:"text-neutral-500 text-center py-8",children:"Draft hasn't started yet. Check back after the draft!"})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-4 border border-cream-200",children:[r.jsx("h2",{className:"text-lg font-display font-bold text-neutral-800 mb-4",children:"Pick History"}),a&&a.length>0?r.jsx("div",{className:"space-y-2",children:a.map(u=>{var d,h,p;return r.jsxs("div",{className:"flex items-center gap-3 p-3 bg-cream-50 rounded-xl border border-cream-200",children:[r.jsx("div",{className:"w-8 h-8 bg-burgundy-500 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-white text-sm font-bold",children:(d=u.episodes)==null?void 0:d.number})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-neutral-800 font-medium",children:((h=u.castaways)==null?void 0:h.name)||"No pick"}),r.jsx("p",{className:"text-neutral-500 text-sm capitalize",children:(p=u.status)==null?void 0:p.replace("_"," ")})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[u.points_earned>0?r.jsx(Do,{className:"h-4 w-4 text-green-500"}):u.points_earned<0?r.jsx(Hv,{className:"h-4 w-4 text-red-500"}):r.jsx(Cp,{className:"h-4 w-4 text-neutral-400"}),r.jsxs("span",{className:`font-bold ${u.points_earned>0?"text-green-600":u.points_earned<0?"text-red-600":"text-neutral-500"}`,children:[u.points_earned>0?"+":"",u.points_earned||0]})]})]},u.id)})}):r.jsx("p",{className:"text-neutral-500 text-center py-8",children:"No picks yet. Season starts soon!"})]})]})]})}const $ee={Challenges:{color:"text-blue-600",bgColor:"bg-blue-50",icon:r.jsx(wa,{className:"h-3 w-3"})},Strategy:{color:"text-purple-600",bgColor:"bg-purple-50",icon:r.jsx(Tc,{className:"h-3 w-3"})},Social:{color:"text-pink-600",bgColor:"bg-pink-50",icon:r.jsx(Ye,{className:"h-3 w-3"})},Survival:{color:"text-green-600",bgColor:"bg-green-50",icon:r.jsx(vi,{className:"h-3 w-3"})},Tribal:{color:"text-orange-600",bgColor:"bg-orange-50",icon:r.jsx(Mn,{className:"h-3 w-3"})},Bonus:{color:"text-amber-600",bgColor:"bg-amber-50",icon:r.jsx(Yn,{className:"h-3 w-3"})}};function Dee(){var b;const{leagueId:e,episodeId:t}=kn(),[n,s]=C.useState(null),{data:a,isLoading:i}=se({queryKey:["episode",t],queryFn:async()=>{if(!t)throw new Error("No episode ID");const{data:w,error:v}=await G.from("episodes").select("*, seasons(*)").eq("id",t).single();if(v)throw v;return w},enabled:!!t}),{data:l}=se({queryKey:["league",e],queryFn:async()=>{if(!e)throw new Error("No league ID");const{data:w,error:v}=await G.from("leagues").select("*").eq("id",e).single();if(v)throw v;return w},enabled:!!e}),{data:u}=se({queryKey:["episode-scores",t],queryFn:async()=>{if(!t)throw new Error("No episode ID");const{data:w,error:v}=await G.from("episode_scores").select("*, castaways(*), scoring_rules(*)").eq("episode_id",t).order("castaways(name)");if(v)throw v;return w||[]},enabled:!!t}),{data:d}=se({queryKey:["episode-picks",e,t],queryFn:async()=>{if(!e||!t)throw new Error("Missing data");const{data:w,error:v}=await G.from("weekly_picks").select("*, users(display_name), castaways(*)").eq("league_id",e).eq("episode_id",t).order("points_earned",{ascending:!1});if(v)throw v;return w||[]},enabled:!!e&&!!t}),{data:h}=se({queryKey:["current-user"],queryFn:async()=>{const{data:{user:w}}=await G.auth.getUser();return w}}),{data:p}=se({queryKey:["eliminated-castaways",t],queryFn:async()=>{if(!t)return[];const{data:w,error:v}=await G.from("castaways").select("id, name, photo_url").eq("eliminated_episode_id",t);if(v)throw v;return w||[]},enabled:!!t}),m=(u==null?void 0:u.reduce((w,v)=>{const j=v.castaway_id;return w[j]||(w[j]={castaway:v.castaways,scores:[],total:0}),w[j].scores.push(v),w[j].total+=v.points,w},{}))||{},g=d==null?void 0:d.find(w=>w.user_id===(h==null?void 0:h.id)),y=g&&(p==null?void 0:p.some(w=>w.id===g.castaway_id));return i?r.jsxs(r.Fragment,{children:[r.jsx(de,{}),r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center",children:r.jsx(ge,{className:"h-8 w-8 text-burgundy-500 animate-spin"})})]}):r.jsxs(r.Fragment,{children:[r.jsx(de,{}),r.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 p-4 pb-24",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx(Y,{to:`/leagues/${e}`,className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:r.jsx(at,{className:"h-5 w-5 text-neutral-600"})}),r.jsxs("div",{children:[r.jsxs("h1",{className:"text-2xl font-display font-bold text-neutral-800",children:["Episode ",a==null?void 0:a.number," Results"]}),r.jsx("p",{className:"text-neutral-500",children:(a==null?void 0:a.title)||(l==null?void 0:l.name)})]})]}),p&&p.length>0&&r.jsx("div",{className:`rounded-xl p-4 mb-6 ${y?"bg-red-50 border-2 border-red-300":"bg-orange-50 border border-orange-200"}`,children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:`p-2 rounded-full ${y?"bg-red-100":"bg-orange-100"}`,children:r.jsx(xi,{className:`h-5 w-5 ${y?"text-red-600":"text-orange-600"}`})}),r.jsxs("div",{children:[r.jsx("p",{className:`font-bold ${y?"text-red-800":"text-orange-800"}`,children:p.length===1?"Castaway Eliminated":`${p.length} Castaways Eliminated`}),r.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:p.map(w=>r.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-full ${(g==null?void 0:g.castaway_id)===w.id?"bg-red-100 border border-red-300":"bg-white border border-orange-200"}`,children:[r.jsx("img",{src:Jn(w.name,w.photo_url),alt:w.name,className:"w-6 h-6 rounded-full object-cover grayscale"}),r.jsxs("span",{className:`text-sm font-medium ${(g==null?void 0:g.castaway_id)===w.id?"text-red-700":"text-neutral-700"}`,children:[w.name,(g==null?void 0:g.castaway_id)===w.id&&r.jsx("span",{className:"ml-1 text-xs text-red-500",children:"(Your Pick)"})]})]},w.id))}),y&&r.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center gap-1",children:[r.jsx(dr,{className:"h-4 w-4"}),"This castaway is no longer available for future picks"]})]})]})}),g&&r.jsx("div",{className:`rounded-xl p-4 mb-6 ${(g.points_earned||0)>0?"bg-green-50 border border-green-200":(g.points_earned||0)<0?"bg-red-50 border border-red-200":"bg-white border border-cream-200"}`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-neutral-500 text-sm",children:"Your Pick"}),r.jsx("p",{className:"text-neutral-800 font-bold text-lg",children:(b=g.castaways)==null?void 0:b.name})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[(g.points_earned||0)>0?r.jsx(Do,{className:"h-5 w-5 text-green-500"}):(g.points_earned||0)<0?r.jsx(Hv,{className:"h-5 w-5 text-red-500"}):r.jsx(Cp,{className:"h-5 w-5 text-neutral-400"}),r.jsxs("span",{className:`text-2xl font-bold ${(g.points_earned||0)>0?"text-green-600":(g.points_earned||0)<0?"text-red-600":"text-neutral-800"}`,children:[(g.points_earned||0)>0?"+":"",g.points_earned||0]})]}),r.jsx("p",{className:"text-neutral-500 text-sm",children:"points"})]})]})}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-4 border border-cream-200 mb-6",children:[r.jsxs("h2",{className:"text-lg font-display font-bold text-neutral-800 mb-4 flex items-center gap-2",children:[r.jsx(rt,{className:"h-5 w-5 text-amber-500"}),"Episode Standings"]}),d&&d.length>0?r.jsx("div",{className:"space-y-2",children:d.map((w,v)=>{var j,E;return r.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl ${w.user_id===(h==null?void 0:h.id)?"bg-burgundy-50 border border-burgundy-200":"bg-cream-50 border border-cream-200"}`,children:[r.jsx("div",{className:"w-8 h-8 flex items-center justify-center",children:v===0?r.jsx(rt,{className:"h-5 w-5 text-amber-500"}):r.jsx("span",{className:"text-neutral-500 font-bold",children:v+1})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-neutral-800 font-medium",children:(j=w.users)==null?void 0:j.display_name}),r.jsx("p",{className:"text-neutral-500 text-sm",children:(E=w.castaways)==null?void 0:E.name})]}),r.jsxs("span",{className:`font-bold ${(w.points_earned||0)>0?"text-green-600":(w.points_earned||0)<0?"text-red-600":"text-neutral-500"}`,children:[(w.points_earned||0)>0?"+":"",w.points_earned||0]})]},w.id)})}):r.jsx("p",{className:"text-neutral-500 text-center py-4",children:"No picks for this episode yet."})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-4 border border-cream-200",children:[r.jsxs("h2",{className:"text-lg font-display font-bold text-neutral-800 mb-4 flex items-center gap-2",children:[r.jsx(Ye,{className:"h-5 w-5 text-burgundy-500"}),"Scoring Breakdown"]}),Object.keys(m).length>0?r.jsx("div",{className:"space-y-3",children:Object.values(m).sort((w,v)=>v.total-w.total).map(w=>{const v=n===w.castaway.id,j=(g==null?void 0:g.castaway_id)===w.castaway.id,E=w.scores.reduce((k,S)=>{var A;const P=((A=S.scoring_rules)==null?void 0:A.category)||"Other";return k[P]||(k[P]=[]),k[P].push(S),k},{});return r.jsxs("div",{className:`rounded-xl border transition-all ${j?"bg-burgundy-50 border-burgundy-200":"bg-cream-50 border-cream-200"}`,children:[r.jsxs("button",{onClick:()=>s(v?null:w.castaway.id),className:"w-full p-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("img",{src:Jn(w.castaway.name,w.castaway.photo_url),alt:w.castaway.name,className:"w-10 h-10 rounded-full object-cover border-2 border-white shadow-sm"}),r.jsxs("div",{className:"text-left",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("p",{className:"text-neutral-800 font-medium",children:w.castaway.name}),j&&r.jsx("span",{className:"text-xs bg-burgundy-100 text-burgundy-700 px-2 py-0.5 rounded-full",children:"Your Pick"})]}),r.jsxs("p",{className:"text-neutral-500 text-sm",children:[w.scores.length," scoring event",w.scores.length!==1?"s":""]})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("span",{className:`text-xl font-bold ${w.total>0?"text-green-600":w.total<0?"text-red-600":"text-neutral-800"}`,children:[w.total>0?"+":"",w.total]}),v?r.jsx(qr,{className:"h-5 w-5 text-neutral-400"}):r.jsx(xn,{className:"h-5 w-5 text-neutral-400"})]})]}),v&&r.jsx("div",{className:"px-4 pb-4 space-y-4",children:Object.entries(E).map(([k,S])=>{const P=$ee[k]||{color:"text-neutral-600",bgColor:"bg-neutral-50",icon:null},A=S.reduce((T,L)=>T+L.points,0);return r.jsxs("div",{children:[r.jsxs("div",{className:`flex items-center gap-2 mb-2 ${P.color}`,children:[P.icon,r.jsx("span",{className:"text-sm font-medium",children:k}),r.jsxs("span",{className:`text-xs px-1.5 py-0.5 rounded ${P.bgColor}`,children:[A>0?"+":"",A]})]}),r.jsx("div",{className:"space-y-1 pl-5",children:S.map(T=>{var L;return r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-neutral-700",children:(L=T.scoring_rules)==null?void 0:L.name}),T.quantity>1&&r.jsxs("span",{className:"text-xs bg-cream-200 text-neutral-600 px-1.5 py-0.5 rounded",children:["",T.quantity]})]}),r.jsxs("span",{className:`font-medium ${T.points>=0?"text-green-600":"text-red-600"}`,children:[T.points>=0?"+":"",T.points]})]},T.id)})})]},k)})})]},w.castaway.id)})}):r.jsx("p",{className:"text-neutral-500 text-center py-8",children:a!=null&&a.is_scored?"No scores recorded for this episode.":"Scoring not yet finalized. Check back after Friday at noon!"})]})]})]})}function Fee({weekNumber:e,onReveal:t,autoReveal:n=!1}){const[s,a]=C.useState(!1);return C.useEffect(()=>{if(n&&!s){const i=setTimeout(()=>{a(!0),t()},1500);return()=>clearTimeout(i)}},[n,s,t]),r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center p-4",children:r.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-elevated p-8 text-center animate-fade-in",children:[r.jsx("div",{className:"w-20 h-20 mx-auto mb-6 bg-amber-100 rounded-full flex items-center justify-center",children:r.jsx(dr,{className:"w-10 h-10 text-amber-600"})}),r.jsxs("h1",{className:"text-2xl font-display font-bold text-neutral-800 mb-3",children:["Week ",e," Results"]}),r.jsxs("div",{className:"bg-amber-50 border-2 border-amber-200 rounded-xl p-4 mb-6",children:[r.jsx("p",{className:"text-amber-900 font-semibold mb-2",children:"Spoiler Warning"}),r.jsx("p",{className:"text-amber-800 text-sm leading-relaxed",children:"This page contains episode spoilers including eliminations, immunity results, and other gameplay events. Click below when you're ready to view your scores and standings."})]}),r.jsxs("label",{className:"flex items-center justify-center gap-3 mb-6 cursor-pointer group",children:[r.jsx("input",{type:"checkbox",checked:s,onChange:i=>a(i.target.checked),className:"w-5 h-5 rounded border-2 border-neutral-300 text-burgundy-600 focus:ring-2 focus:ring-burgundy-500 focus:ring-offset-2 cursor-pointer"}),r.jsx("span",{className:"text-neutral-700 group-hover:text-neutral-900 transition-colors",children:"I understand and want to see results"})]}),r.jsx("button",{onClick:t,disabled:!s,className:`w-full btn ${s?"btn-primary":"bg-neutral-200 text-neutral-400 cursor-not-allowed"} flex items-center justify-center gap-2 transition-all`,children:s?r.jsxs(r.Fragment,{children:[r.jsx(Em,{className:"w-5 h-5"}),"Show Results"]}):r.jsxs(r.Fragment,{children:[r.jsx(km,{className:"w-5 h-5"}),"Confirm to Continue"]})}),r.jsx("p",{className:"text-neutral-500 text-sm mt-4",children:"Not ready yet? You can always come back later."}),n&&r.jsx("p",{className:"text-burgundy-600 text-sm mt-2 animate-pulse",children:"Auto-revealing in a moment..."})]})})}const Uee={Challenges:{color:"text-blue-600",bgColor:"bg-blue-50",icon:r.jsx(wa,{className:"h-3 w-3"})},Strategy:{color:"text-purple-600",bgColor:"bg-purple-50",icon:r.jsx(Tc,{className:"h-3 w-3"})},Social:{color:"text-pink-600",bgColor:"bg-pink-50",icon:r.jsx(Ye,{className:"h-3 w-3"})},Survival:{color:"text-green-600",bgColor:"bg-green-50",icon:r.jsx(vi,{className:"h-3 w-3"})},Tribal:{color:"text-orange-600",bgColor:"bg-orange-50",icon:r.jsx(Mn,{className:"h-3 w-3"})},Bonus:{color:"text-amber-600",bgColor:"bg-amber-50",icon:r.jsx(Yn,{className:"h-3 w-3"})}};function qee(){const{weekNumber:e}=kn(),[t]=cd(),n=t.get("token"),[s,a]=C.useState(!1),[i,l]=C.useState(!1),[u,d]=C.useState(null);C.useEffect(()=>{n&&h(n)},[n]);async function h(v){try{(await(await fetch(`http://localhost:3001/api/results/verify-token?token=${v}`)).json()).valid&&(l(!0),setTimeout(()=>a(!0),2e3))}catch(j){console.error("Token verification failed:",j)}}const{data:p}=se({queryKey:["current-user"],queryFn:async()=>{const{data:{user:v}}=await G.auth.getUser();return v}}),{data:m,isLoading:g}=se({queryKey:["episode-by-week",e],queryFn:async()=>{if(!e)return null;const v=parseInt(e.replace("week-","")),{data:j,error:E}=await G.from("episodes").select("*, seasons(*)").eq("week_number",v).single();if(E)throw E;return j},enabled:!!e&&s}),{data:y}=se({queryKey:["episode-scores",m==null?void 0:m.id],queryFn:async()=>{if(!(m!=null&&m.id))return[];const{data:v,error:j}=await G.from("episode_scores").select("*, castaways(*), scoring_rules(*)").eq("episode_id",m.id).order("castaways(name)");if(j)throw j;return v||[]},enabled:!!(m!=null&&m.id)&&s}),{data:b}=se({queryKey:["eliminated-castaways",m==null?void 0:m.id],queryFn:async()=>{if(!(m!=null&&m.id))return[];const{data:v,error:j}=await G.from("castaways").select("id, name, photo_url").eq("eliminated_episode_id",m.id);if(j)throw j;return v||[]},enabled:!!(m!=null&&m.id)&&s}),w=(y==null?void 0:y.reduce((v,j)=>{const E=j.castaway_id;return v[E]||(v[E]={castaway:j.castaways,scores:[],total:0}),v[E].scores.push(j),v[E].total+=j.points,v},{}))||{};return s?g?r.jsxs(r.Fragment,{children:[r.jsx(de,{}),r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx(ge,{className:"h-8 w-8 text-burgundy-500 animate-spin mx-auto mb-4"}),r.jsx("p",{className:"text-neutral-600",children:"Loading results..."})]})})]}):r.jsxs(r.Fragment,{children:[r.jsx(de,{}),r.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 p-4 pb-24",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx(Y,{to:"/dashboard",className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:r.jsx(at,{className:"h-5 w-5 text-neutral-600"})}),r.jsxs("div",{children:[r.jsxs("h1",{className:"text-2xl font-display font-bold text-neutral-800",children:["Week ",e==null?void 0:e.replace("week-","")," Results"]}),r.jsx("p",{className:"text-neutral-500",children:(m==null?void 0:m.title)||"Episode Results"})]})]}),b&&b.length>0&&r.jsx("div",{className:"rounded-xl p-4 mb-6 bg-orange-50 border border-orange-200",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"p-2 rounded-full bg-orange-100",children:r.jsx(xi,{className:"h-5 w-5 text-orange-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-bold text-orange-800",children:b.length===1?"Castaway Eliminated":`${b.length} Castaways Eliminated`}),r.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:b.map(v=>r.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-full bg-white border border-orange-200",children:[r.jsx("img",{src:Jn(v.name,v.photo_url),alt:v.name,className:"w-6 h-6 rounded-full object-cover grayscale"}),r.jsx("span",{className:"text-sm font-medium text-neutral-700",children:v.name})]},v.id))})]})]})}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-4 border border-cream-200",children:[r.jsxs("h2",{className:"text-lg font-display font-bold text-neutral-800 mb-4 flex items-center gap-2",children:[r.jsx(Ye,{className:"h-5 w-5 text-burgundy-500"}),"Scoring Breakdown"]}),Object.keys(w).length>0?r.jsx("div",{className:"space-y-3",children:Object.values(w).sort((v,j)=>j.total-v.total).map(v=>{const j=u===v.castaway.id,E=v.scores.reduce((k,S)=>{var A;const P=((A=S.scoring_rules)==null?void 0:A.category)||"Other";return k[P]||(k[P]=[]),k[P].push(S),k},{});return r.jsxs("div",{className:"rounded-xl border bg-cream-50 border-cream-200",children:[r.jsxs("button",{onClick:()=>d(j?null:v.castaway.id),className:"w-full p-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("img",{src:Jn(v.castaway.name,v.castaway.photo_url),alt:v.castaway.name,className:"w-10 h-10 rounded-full object-cover border-2 border-white shadow-sm"}),r.jsxs("div",{className:"text-left",children:[r.jsx("p",{className:"text-neutral-800 font-medium",children:v.castaway.name}),r.jsxs("p",{className:"text-neutral-500 text-sm",children:[v.scores.length," scoring event",v.scores.length!==1?"s":""]})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("span",{className:`text-xl font-bold ${v.total>0?"text-green-600":v.total<0?"text-red-600":"text-neutral-800"}`,children:[v.total>0?"+":"",v.total]}),j?r.jsx(qr,{className:"h-5 w-5 text-neutral-400"}):r.jsx(xn,{className:"h-5 w-5 text-neutral-400"})]})]}),j&&r.jsx("div",{className:"px-4 pb-4 space-y-4",children:Object.entries(E).map(([k,S])=>{const P=Uee[k]||{color:"text-neutral-600",bgColor:"bg-neutral-50",icon:null},A=S.reduce((T,L)=>T+L.points,0);return r.jsxs("div",{children:[r.jsxs("div",{className:`flex items-center gap-2 mb-2 ${P.color}`,children:[P.icon,r.jsx("span",{className:"text-sm font-medium",children:k}),r.jsxs("span",{className:`text-xs px-1.5 py-0.5 rounded ${P.bgColor}`,children:[A>0?"+":"",A]})]}),r.jsx("div",{className:"space-y-1 pl-5",children:S.map(T=>{var L;return r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-neutral-700",children:(L=T.scoring_rules)==null?void 0:L.name}),T.quantity>1&&r.jsxs("span",{className:"text-xs bg-cream-200 text-neutral-600 px-1.5 py-0.5 rounded",children:["",T.quantity]})]}),r.jsxs("span",{className:`font-medium ${T.points>=0?"text-green-600":"text-red-600"}`,children:[T.points>=0?"+":"",T.points]})]},T.id)})})]},k)})})]},v.castaway.id)})}):r.jsx("div",{className:"text-center py-8",children:r.jsx("p",{className:"text-neutral-500",children:m!=null&&m.is_scored?"No scores recorded for this episode.":"Scoring not yet finalized. Check back after Friday at noon!"})})]})]})]}):r.jsx(Fee,{weekNumber:parseInt((e==null?void 0:e.replace("week-",""))||"0"),onReveal:()=>a(!0),autoReveal:i})}function Bee({name:e,setName:t,description:n,setDescription:s}){return r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200",children:[r.jsxs("h2",{className:"font-semibold text-neutral-800 mb-4 flex items-center gap-2",children:[r.jsx(Ye,{className:"h-5 w-5 text-burgundy-500"}),"League Details"]}),r.jsxs("label",{className:"block mb-4",children:[r.jsx("span",{className:"text-neutral-700 text-sm font-medium mb-2 block",children:"League Name *"}),r.jsx("input",{type:"text",value:e,onChange:a=>t(a.target.value),placeholder:"The Tribal Council",className:"input",maxLength:50})]}),r.jsxs("label",{className:"block mb-4",children:[r.jsxs("span",{className:"text-neutral-700 text-sm font-medium mb-2 flex items-center gap-2",children:[r.jsx(Sp,{className:"h-4 w-4 text-neutral-400"}),"Description (Optional)"]}),r.jsx("textarea",{value:n,onChange:a=>s(a.target.value),placeholder:"A league for true Survivor superfans...",className:"input min-h-[80px] resize-none",maxLength:200}),r.jsxs("p",{className:"text-neutral-400 text-xs mt-1 text-right",children:[n.length,"/200"]})]})]})}function Hee({isPrivate:e,setIsPrivate:t,joinCode:n,setJoinCode:s}){return r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200",children:[r.jsxs("h2",{className:"font-semibold text-neutral-800 mb-4 flex items-center gap-2",children:[r.jsx(yi,{className:"h-5 w-5 text-burgundy-500"}),"Privacy"]}),r.jsxs("div",{className:"flex gap-3 mb-4",children:[r.jsxs("button",{type:"button",onClick:()=>t(!1),className:`flex-1 p-4 rounded-xl border-2 transition-all ${e?"border-cream-200 bg-white hover:border-cream-300":"border-burgundy-500 bg-burgundy-50"}`,children:[r.jsx(yi,{className:`h-6 w-6 mx-auto mb-2 ${e?"text-neutral-400":"text-burgundy-500"}`}),r.jsx("p",{className:`font-medium text-sm ${e?"text-neutral-600":"text-burgundy-700"}`,children:"Public"}),r.jsx("p",{className:"text-xs text-neutral-400 mt-1",children:"Anyone can join"})]}),r.jsxs("button",{type:"button",onClick:()=>t(!0),className:`flex-1 p-4 rounded-xl border-2 transition-all ${e?"border-burgundy-500 bg-burgundy-50":"border-cream-200 bg-white hover:border-cream-300"}`,children:[r.jsx(Dn,{className:`h-6 w-6 mx-auto mb-2 ${e?"text-burgundy-500":"text-neutral-400"}`}),r.jsx("p",{className:`font-medium text-sm ${e?"text-burgundy-700":"text-neutral-600"}`,children:"Private"}),r.jsx("p",{className:"text-xs text-neutral-400 mt-1",children:"Requires code"})]})]}),e&&r.jsxs("label",{className:"block animate-fade-in",children:[r.jsxs("span",{className:"text-neutral-700 text-sm font-medium mb-2 flex items-center gap-2",children:[r.jsx(Dn,{className:"h-4 w-4 text-neutral-400"}),"Password (Optional)"]}),r.jsx("input",{type:"text",value:n,onChange:a=>s(a.target.value),placeholder:"Enter an optional password",className:"input",maxLength:100}),r.jsx("p",{className:"text-neutral-400 text-xs mt-2",children:"A unique invite code will be auto-generated. Add a password for extra security."})]})]})}const wk=[10,25,50,100];function zee({requireDonation:e,setRequireDonation:t,donationAmount:n,setDonationAmount:s}){const[a,i]=C.useState(!1),l=parseFloat(n)||0,u=wk.includes(l),d=p=>{i(!1),s(p.toString())},h=()=>{i(!0),u&&s("")};return r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200",children:[r.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(kp,{className:"h-5 w-5 text-burgundy-500"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-neutral-800 font-medium",children:"Play for a Cause"}),r.jsx("p",{className:"text-neutral-400 text-sm",children:"Entry fees go to charity"})]})]}),r.jsx("div",{onClick:()=>t(!e),className:`w-12 h-6 rounded-full transition-colors cursor-pointer ${e?"bg-burgundy-500":"bg-neutral-200"}`,children:r.jsx("div",{className:`w-5 h-5 bg-white rounded-full shadow-md transition-transform mt-0.5 ${e?"translate-x-6 ml-0.5":"translate-x-0.5"}`})})]}),e&&r.jsxs("div",{className:"mt-6 pt-4 border-t border-cream-200 animate-fade-in",children:[r.jsx("div",{className:"bg-gradient-to-br from-burgundy-50 to-cream-50 rounded-xl p-4 mb-4 border border-burgundy-100",children:r.jsxs("p",{className:"text-neutral-700 text-sm leading-relaxed",children:[r.jsx("span",{className:"font-semibold text-burgundy-600",children:"The winner of your league will recommend a charity"})," ","of their choice for the full donation pool. Outwit, outplay, outlast  for good."]})}),r.jsx("p",{className:"text-neutral-500 text-sm mb-3 font-medium",children:"Entry fee per player (minimum $10):"}),r.jsxs("div",{className:"grid grid-cols-5 gap-2 mb-3",children:[wk.map(p=>r.jsxs("button",{type:"button",onClick:()=>d(p),className:`py-3 px-2 rounded-xl font-bold text-base transition-all ${n===p.toString()&&!a?"bg-burgundy-500 text-white shadow-elevated":"bg-cream-100 text-neutral-700 hover:bg-cream-200 border border-cream-200"}`,children:["$",p]},p)),r.jsx("button",{type:"button",onClick:h,className:`py-3 px-2 rounded-xl font-bold text-sm transition-all ${a||!u&&n?"bg-burgundy-500 text-white shadow-elevated":"bg-cream-100 text-neutral-700 hover:bg-cream-200 border border-cream-200"}`,children:"Other"})]}),(a||!u&&n)&&r.jsxs("div",{className:"relative mb-3",children:[r.jsx(To,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-neutral-400"}),r.jsx("input",{type:"number",value:n,onChange:p=>s(p.target.value),placeholder:"Enter amount",min:"10",max:"10000",step:"1",className:"input pl-10 text-lg font-semibold",autoFocus:!0})]}),r.jsx("p",{className:"text-neutral-400 text-xs text-center",children:"100% of entry fees are donated  zero platform fees"})]})]})}function Wee({league:e,joinCode:t,isPrivate:n,onClose:s}){const a=Kr(),[i,l]=C.useState(!1),u=()=>`${window.location.origin}/join/${e.code}`,d=()=>{navigator.clipboard.writeText(u()),l(!0),setTimeout(()=>l(!1),2e3)},h=()=>{const y=`Join my Survivor Fantasy League "${e.name}"! `,b=u();window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(y)}&url=${encodeURIComponent(b)}`,"_blank")},p=()=>{const y=u();window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(y)}`,"_blank")},m=()=>{const y=`Join my Survivor Fantasy League! ${u()}`;window.open(`sms:?body=${encodeURIComponent(y)}`,"_blank")},g=()=>{const y=`Join my Survivor Fantasy League: ${e.name}`,b=`Hey!

I created a Survivor Fantasy League and want you to join!

League: ${e.name}
Join here: ${u()}

Let's see who can outwit, outplay, and outlast! `;window.open(`mailto:?subject=${encodeURIComponent(y)}&body=${encodeURIComponent(b)}`,"_blank")};return r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 animate-fade-in",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated max-w-md w-full p-6 animate-slide-up",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800",children:"Share Your League"}),r.jsx("button",{onClick:s,className:"p-2 hover:bg-cream-100 rounded-xl transition-colors",children:r.jsx(Sn,{className:"h-5 w-5 text-neutral-500"})})]}),r.jsxs("div",{className:"text-center mb-6",children:[r.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3",children:r.jsx(Rt,{className:"h-8 w-8 text-green-600"})}),r.jsx("h3",{className:"font-semibold text-neutral-800",children:e.name}),r.jsx("p",{className:"text-neutral-500 text-sm",children:"League created successfully!"})]}),r.jsxs("div",{className:"bg-cream-50 rounded-xl p-4 mb-6 border border-cream-200",children:[r.jsx("p",{className:"text-neutral-500 text-xs mb-1 text-center",children:"Invite Code"}),r.jsx("p",{className:"text-2xl font-mono font-bold text-burgundy-500 tracking-wider text-center",children:e.code}),n&&t&&r.jsxs("p",{className:"text-neutral-400 text-xs mt-2 text-center",children:["Join Password: ",r.jsx("span",{className:"font-mono",children:t})]})]}),r.jsx("button",{onClick:d,className:"w-full btn btn-primary mb-4 flex items-center justify-center gap-2",children:i?r.jsxs(r.Fragment,{children:[r.jsx(Rt,{className:"h-5 w-5"}),"Link Copied!"]}):r.jsxs(r.Fragment,{children:[r.jsx(Np,{className:"h-5 w-5"}),"Copy Invite Link"]})}),r.jsx("p",{className:"text-neutral-500 text-sm text-center mb-3",children:"Or share via:"}),r.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[r.jsxs("button",{onClick:m,className:"flex flex-col items-center gap-1 p-3 rounded-xl bg-green-50 hover:bg-green-100 transition-colors",children:[r.jsx(Ro,{className:"h-6 w-6 text-green-600"}),r.jsx("span",{className:"text-xs text-neutral-600",children:"SMS"})]}),r.jsxs("button",{onClick:g,className:"flex flex-col items-center gap-1 p-3 rounded-xl bg-blue-50 hover:bg-blue-100 transition-colors",children:[r.jsx(xs,{className:"h-6 w-6 text-blue-600"}),r.jsx("span",{className:"text-xs text-neutral-600",children:"Email"})]}),r.jsxs("button",{onClick:h,className:"flex flex-col items-center gap-1 p-3 rounded-xl bg-sky-50 hover:bg-sky-100 transition-colors",children:[r.jsx(qQ,{className:"h-6 w-6 text-sky-500"}),r.jsx("span",{className:"text-xs text-neutral-600",children:"Twitter"})]}),r.jsxs("button",{onClick:p,className:"flex flex-col items-center gap-1 p-3 rounded-xl bg-indigo-50 hover:bg-indigo-100 transition-colors",children:[r.jsx(jJ,{className:"h-6 w-6 text-indigo-600"}),r.jsx("span",{className:"text-xs text-neutral-600",children:"Facebook"})]})]}),r.jsx("button",{onClick:()=>{s(),a(`/leagues/${e.id}`)},className:"w-full btn btn-secondary mt-4",children:"Go to League"})]})})}const ns={name:{min:3,max:50},password:{max:100},donation:{min:0,max:1e4}};function Gee(){const e=Kr(),[t,n]=C.useState(""),[s,a]=C.useState(""),[i,l]=C.useState(!1),[u,d]=C.useState(""),[h,p]=C.useState(!1),[m,g]=C.useState(""),[y,b]=C.useState(!1),[w,v]=C.useState(null),{data:j,isLoading:E}=se({queryKey:["active-season"],queryFn:async()=>{const{data:M,error:O}=await G.from("seasons").select("*").eq("is_active",!0).single();if(O)throw O;return M}}),{data:k,isLoading:S}=se({queryKey:["current-user"],queryFn:async()=>{const{data:{user:M}}=await G.auth.getUser();return M}}),P=E||S,[A,T]=C.useState(null),L=C.useMemo(()=>{const M=[];if(t.trim().length>0&&t.trim().length<ns.name.min&&M.push(`League name must be at least ${ns.name.min} characters`),t.length>ns.name.max&&M.push(`League name must be at most ${ns.name.max} characters`),i&&u&&u.length>ns.password.max&&M.push(`Join code must be at most ${ns.password.max} characters`),h&&m){const O=parseFloat(m);(isNaN(O)||O<ns.donation.min)&&M.push("Donation amount must be a positive number"),O>ns.donation.max&&M.push(`Donation amount cannot exceed $${ns.donation.max.toLocaleString()}`)}return M},[t,i,u,h,m]),H=C.useMemo(()=>t.trim().length>=ns.name.min&&t.length<=ns.name.max&&L.length===0&&(!h||m&&parseFloat(m)>0),[t,L,h,m]),R=$e({mutationFn:async()=>{var K,ae,X;if(!k||!j)throw new Error("Loading season data...");const{data:{session:M}}=await G.auth.getSession();if(!M)throw new Error("Not authenticated");const O=await ut("/leagues",M.access_token,{method:"POST",body:JSON.stringify({name:t,season_id:j.id,password:i&&u?u:null,donation_amount:h&&m?parseFloat(m):null,max_players:12,is_public:!i})});if(O.error)throw new Error(O.error);const F=(K=O.data)==null?void 0:K.league;if(!F)throw new Error("Failed to create league");return(ae=O.data)!=null&&ae.requires_payment&&((X=O.data)!=null&&X.checkout_url)?(window.location.href=O.data.checkout_url,{...F,redirectingToPayment:!0}):F},onSuccess:M=>{T(null),!("redirectingToPayment"in M&&M.redirectingToPayment)&&(v(M),b(!0))},onError:M=>{T(M.message),dt(M,{tags:{operation:"create_league"},extra:{name:t,isPrivate:i,requireDonation:h,donationAmount:m}})}});return P?r.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200",children:[r.jsx(de,{}),r.jsx("div",{className:"flex items-center justify-center py-24",children:r.jsxs("div",{className:"text-center",children:[r.jsx(ge,{className:"h-10 w-10 text-burgundy-500 animate-spin mx-auto mb-4"}),r.jsx("p",{className:"text-neutral-500",children:"Loading season data..."})]})})]}):r.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200",children:[r.jsx(de,{}),r.jsxs("div",{className:"p-4 pb-24",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("button",{onClick:()=>e(-1),className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:r.jsx(at,{className:"h-5 w-5 text-neutral-600"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-display font-bold text-neutral-800",children:"Create League"}),r.jsxs("p",{className:"text-neutral-500",children:["Season ",j==null?void 0:j.number,": ",j==null?void 0:j.name]})]})]}),r.jsxs("div",{className:"max-w-md mx-auto space-y-6",children:[r.jsx(Bee,{name:t,setName:n,description:s,setDescription:a}),r.jsx(Hee,{isPrivate:i,setIsPrivate:l,joinCode:u,setJoinCode:d}),r.jsx(zee,{requireDonation:h,setRequireDonation:p,donationAmount:m,setDonationAmount:g}),L.length>0&&r.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4",children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(ot,{className:"h-5 w-5 text-amber-600 flex-shrink-0 mt-0.5"}),r.jsx("ul",{className:"text-amber-700 text-sm space-y-1",children:L.map((M,O)=>r.jsx("li",{children:M},O))})]})}),r.jsx("button",{onClick:()=>R.mutate(),disabled:!H||R.isPending,className:"w-full btn btn-primary btn-lg flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:R.isPending?r.jsxs(r.Fragment,{children:[r.jsx(ge,{className:"h-5 w-5 animate-spin"}),h?"Redirecting to payment...":"Creating..."]}):h&&m?r.jsxs(r.Fragment,{children:[r.jsx(kp,{className:"h-5 w-5"}),"Create & Pay $",m]}):r.jsxs(r.Fragment,{children:[r.jsx(Ye,{className:"h-5 w-5"}),"Create League"]})}),(R.isError||A)&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(ot,{className:"h-5 w-5 text-red-600 flex-shrink-0 mt-0.5"}),r.jsx("p",{className:"text-red-600 text-sm",children:A||"Error creating league. Please try again."})]})})]})]}),y&&w&&r.jsx(Wee,{league:w,joinCode:u,isPrivate:i,onClose:()=>b(!1)})]})}function Vee({code:e}){const[t,n]=C.useState(!1),s=()=>{const a=`${window.location.origin}/join/${e}`;navigator.clipboard.writeText(a),n(!0),setTimeout(()=>n(!1),2e3)};return r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200",children:[r.jsx("h3",{className:"text-neutral-800 font-medium mb-3",children:"Invite Link"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"flex-1 bg-cream-50 rounded-xl px-4 py-3 text-burgundy-600 font-mono border border-cream-200",children:e}),r.jsx("button",{onClick:s,className:"p-3 bg-burgundy-500 hover:bg-burgundy-600 rounded-xl transition-colors",children:t?r.jsx(Rt,{className:"h-5 w-5 text-white"}):r.jsx(Np,{className:"h-5 w-5 text-white"})})]})]})}function Kee({name:e,password:t,onNameChange:n,onPasswordChange:s}){return r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200",children:[r.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-3 mb-4",children:r.jsx("p",{className:"text-amber-700 text-sm font-medium",children:"Admin-only settings"})}),r.jsxs("label",{className:"block mb-4",children:[r.jsxs("span",{className:"text-neutral-800 font-medium flex items-center gap-2 mb-2",children:[r.jsx(Ye,{className:"h-5 w-5 text-burgundy-500"}),"League Name"]}),r.jsx("input",{type:"text",value:e,onChange:a=>n(a.target.value),className:"input"})]}),r.jsxs("label",{className:"block",children:[r.jsxs("span",{className:"text-neutral-800 font-medium flex items-center gap-2 mb-2",children:[r.jsx(Dn,{className:"h-5 w-5 text-burgundy-500"}),"New Password"]}),r.jsx("input",{type:"password",value:t,onChange:a=>s(a.target.value),placeholder:"Leave blank to keep current",className:"input"})]})]})}function Yee({isPublic:e,maxPlayers:t,currentMemberCount:n,draftStatus:s,onPublicChange:a,onMaxPlayersChange:i}){const l=n===0||s==="pending";return r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200",children:[r.jsxs("h3",{className:"text-neutral-800 font-medium mb-4 flex items-center gap-2",children:[r.jsx(yi,{className:"h-5 w-5 text-burgundy-500"}),"Visibility & Access"]}),r.jsxs("label",{className:"flex items-center justify-between cursor-pointer mb-4 p-3 bg-cream-50 rounded-xl border border-cream-200",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[e?r.jsx(Em,{className:"h-5 w-5 text-burgundy-500"}):r.jsx(km,{className:"h-5 w-5 text-neutral-400"}),r.jsxs("div",{children:[r.jsx("span",{className:"text-neutral-800 font-medium block",children:"Public League"}),r.jsx("span",{className:"text-neutral-500 text-sm",children:"Anyone can view standings"})]})]}),r.jsx("input",{type:"checkbox",checked:e,onChange:u=>a(u.target.checked),className:"w-5 h-5 rounded bg-cream-100 border-cream-300 text-burgundy-500 focus:ring-burgundy-500"})]}),r.jsxs("label",{className:"block",children:[r.jsx("span",{className:"text-neutral-500 text-sm mb-2 block",children:"Max Players"}),r.jsx("select",{value:t,onChange:u=>i(parseInt(u.target.value)),disabled:!l,className:"input disabled:opacity-50",children:[4,6,8,10,12,16,20,24].map(u=>r.jsxs("option",{value:u,disabled:u<n,children:[u," players"]},u))}),n>0&&r.jsxs("p",{className:"text-neutral-400 text-xs mt-1",children:["Currently ",n," of ",t," players"]})]})]})}function Jee({requireDonation:e,donationAmount:t,draftStatus:n,onRequireDonationChange:s,onDonationAmountChange:a}){const i=n==="pending";return r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200",children:[r.jsxs("label",{className:"flex items-center justify-between cursor-pointer mb-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(To,{className:"h-5 w-5 text-burgundy-500"}),r.jsx("span",{className:"text-neutral-800 font-medium",children:"Require Donation"})]}),r.jsx("input",{type:"checkbox",checked:e,onChange:l=>s(l.target.checked),disabled:!i,className:"w-5 h-5 rounded bg-cream-100 border-cream-300 text-burgundy-500 focus:ring-burgundy-500 disabled:opacity-50"})]}),e&&r.jsx("div",{className:"space-y-4 pt-4 border-t border-cream-200",children:r.jsxs("label",{className:"block",children:[r.jsx("span",{className:"text-neutral-500 text-sm mb-2 block",children:"Amount ($)"}),r.jsx("input",{type:"number",value:t,onChange:l=>a(l.target.value),disabled:!i,className:"input disabled:opacity-50"})]})})]})}function Qee({members:e,currentUserId:t,draftStatus:n,onRemoveMember:s,isRemoving:a,removeError:i}){return r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200",children:[r.jsxs("h3",{className:"text-neutral-800 font-medium mb-4 flex items-center gap-2",children:[r.jsx(Ye,{className:"h-5 w-5 text-burgundy-500"}),"Members (",(e==null?void 0:e.length)||0,")"]}),r.jsx("div",{className:"space-y-2",children:e==null?void 0:e.map(l=>{var d;const u=l.user_id===t;return r.jsxs("div",{className:"flex items-center justify-between p-3 bg-cream-50 rounded-xl border border-cream-200",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-neutral-800",children:(d=l.users)==null?void 0:d.display_name}),u&&r.jsxs("span",{className:"inline-flex items-center gap-1 bg-burgundy-100 text-burgundy-600 text-xs px-2 py-0.5 rounded-full",children:[r.jsx($n,{className:"h-3 w-3"}),"You"]})]}),!u&&n==="pending"&&r.jsx("button",{onClick:()=>{var h;return s(l.user_id,((h=l.users)==null?void 0:h.display_name)||"this member")},disabled:a,className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors",title:"Remove member",children:r.jsx(HQ,{className:"h-4 w-4"})})]},l.id)})}),i&&r.jsx("p",{className:"text-red-500 text-sm mt-2",children:"Failed to remove member"})]})}function Xee({otherMembers:e,onTransfer:t,isPending:n,isError:s}){const[a,i]=C.useState(!1),[l,u]=C.useState(null),[d,h]=C.useState(!1);if(e.length===0)return null;const p=()=>{l&&(t(l),i(!1),h(!1),u(null))};return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-6",children:[r.jsxs("h3",{className:"text-amber-700 font-medium mb-2 flex items-center gap-2",children:[r.jsx(AY,{className:"h-5 w-5"}),"Transfer Ownership"]}),r.jsx("p",{className:"text-amber-600 text-sm mb-4",children:"Transfer ownership to another member. You will lose all creator privileges."}),r.jsx("button",{onClick:()=>i(!0),className:"w-full bg-amber-100 hover:bg-amber-200 border border-amber-300 text-amber-800 font-bold py-3 rounded-xl transition-colors",children:"Transfer Ownership"})]}),a&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"bg-white rounded-2xl p-6 max-w-sm w-full border border-cream-200 shadow-elevated",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("h3",{className:"text-neutral-800 font-bold flex items-center gap-2",children:[r.jsx(dr,{className:"h-5 w-5 text-amber-500"}),"Transfer Ownership"]}),r.jsx("button",{onClick:()=>{i(!1),u(null)},className:"text-neutral-400 hover:text-neutral-600",children:r.jsx(Sn,{className:"h-5 w-5"})})]}),r.jsx("p",{className:"text-neutral-500 text-sm mb-4",children:"Select a member to become the new league creator. This action cannot be undone."}),r.jsx("div",{className:"space-y-2 mb-6 max-h-48 overflow-y-auto",children:e.map(m=>{var g;return r.jsxs("label",{className:`flex items-center gap-3 p-3 rounded-xl cursor-pointer transition-colors ${l===m.user_id?"bg-burgundy-50 border-2 border-burgundy-500":"bg-cream-50 border border-cream-200 hover:bg-cream-100"}`,children:[r.jsx("input",{type:"radio",name:"transfer-target",value:m.user_id,checked:l===m.user_id,onChange:y=>u(y.target.value),className:"text-burgundy-500 focus:ring-burgundy-500"}),r.jsx("span",{className:"text-neutral-800",children:(g=m.users)==null?void 0:g.display_name})]},m.id)})}),d?r.jsxs("div",{className:"space-y-3",children:[r.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-xl",children:r.jsx("p",{className:"text-red-700 text-sm font-medium",children:" You will lose all creator privileges. This cannot be undone."})}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>h(!1),className:"flex-1 btn btn-secondary",children:"Go Back"}),r.jsx("button",{onClick:p,disabled:n,className:"flex-1 bg-red-500 hover:bg-red-600 disabled:bg-cream-200 text-white disabled:text-neutral-400 font-bold py-3 rounded-xl transition-colors flex items-center justify-center gap-2",children:n?r.jsx(ge,{className:"h-5 w-5 animate-spin"}):"Confirm Transfer"})]})]}):r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>{i(!1),u(null)},className:"flex-1 btn btn-secondary",children:"Cancel"}),r.jsx("button",{onClick:()=>h(!0),disabled:!l||n,className:"flex-1 bg-amber-500 hover:bg-amber-600 disabled:bg-cream-200 text-white disabled:text-neutral-400 font-bold py-3 rounded-xl transition-colors",children:"Continue"})]}),s&&r.jsx("p",{className:"text-red-500 text-sm mt-3 text-center",children:"Failed to transfer ownership"})]})})]})}function Zee({onDelete:e,isPending:t}){const[n,s]=C.useState(!1),[a,i]=C.useState(""),l=()=>{a.toLowerCase()==="delete"&&(e(),s(!1),i(""))};return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6",children:[r.jsxs("h3",{className:"text-red-600 font-medium mb-2 flex items-center gap-2",children:[r.jsx(Id,{className:"h-5 w-5"}),"Danger Zone"]}),r.jsx("p",{className:"text-red-500 text-sm mb-4",children:"Deleting the league cannot be undone. All members will be removed."}),r.jsx("button",{onClick:()=>s(!0),disabled:t,className:"w-full bg-red-100 hover:bg-red-200 border border-red-300 text-red-700 font-bold py-3 rounded-xl transition-colors",children:t?"Deleting...":"Delete League"})]}),n&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"bg-white rounded-2xl p-6 max-w-sm w-full border border-red-200 shadow-elevated",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("h3",{className:"text-red-600 font-bold flex items-center gap-2",children:[r.jsx(dr,{className:"h-5 w-5"}),"Delete League"]}),r.jsx("button",{onClick:()=>{s(!1),i("")},className:"text-neutral-400 hover:text-neutral-600","aria-label":"Close",children:r.jsx(Sn,{className:"h-5 w-5"})})]}),r.jsx("p",{className:"text-neutral-600 text-sm mb-4",children:"This action cannot be undone. All league data, members, and history will be permanently deleted."}),r.jsxs("label",{className:"block mb-4",children:[r.jsx("span",{className:"text-neutral-700 text-sm font-medium",children:'Type "delete" to confirm:'}),r.jsx("input",{type:"text",value:a,onChange:u=>i(u.target.value),placeholder:"delete",className:"input mt-2",autoComplete:"off"})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>{s(!1),i("")},className:"flex-1 btn btn-secondary",children:"Cancel"}),r.jsx("button",{onClick:l,disabled:a.toLowerCase()!=="delete"||t,className:"flex-1 bg-red-500 hover:bg-red-600 disabled:bg-red-200 text-white disabled:text-red-400 font-bold py-3 rounded-xl transition-colors flex items-center justify-center gap-2",children:t?r.jsx(ge,{className:"h-5 w-5 animate-spin"}):"Delete Forever"})]})]})})]})}function ete(){const{leagueId:e}=kn(),t=Kr(),n=zt(),{session:s}=yt(),[a,i]=C.useState(""),[l,u]=C.useState(""),[d,h]=C.useState(""),[p,m]=C.useState(!1),[g,y]=C.useState(12),[b,w]=C.useState(!1),[v,j]=C.useState(""),[E,k]=C.useState(null),{data:S}=se({queryKey:["current-user"],queryFn:async()=>{const{data:{user:D}}=await G.auth.getUser();return D}}),{data:P}=se({queryKey:["user-profile",S==null?void 0:S.id],queryFn:async()=>{if(!(S!=null&&S.id))return null;const{data:D,error:te}=await G.from("users").select("role").eq("id",S.id).single();if(te)throw te;return D},enabled:!!(S!=null&&S.id)}),{data:A,isLoading:T}=se({queryKey:["league",e],queryFn:async()=>{if(!e)throw new Error("No league ID");const{data:D,error:te}=await G.from("leagues").select("*, seasons(*)").eq("id",e).single();if(te)throw te;return D},enabled:!!e}),{data:L}=se({queryKey:["league-members",e],queryFn:async()=>{if(!e)throw new Error("No league ID");const{data:D,error:te}=await G.from("league_members").select("*, users(id, display_name, email)").eq("league_id",e).order("draft_position",{ascending:!0,nullsFirst:!1});if(te)throw te;return D},enabled:!!e});C.useEffect(()=>{var D;A&&(i(A.name||""),u(A.description||""),m(A.is_public||!1),y(A.max_players||12),w(A.require_donation||!1),j(((D=A.donation_amount)==null?void 0:D.toString())||""))},[A]);const H=(A==null?void 0:A.commissioner_id)===(S==null?void 0:S.id),R=(P==null?void 0:P.role)==="admin",M=H||R,O=$e({mutationFn:async()=>{if(!e)throw new Error("No league ID");if(!(s!=null&&s.access_token))throw new Error("Not authenticated");const D={description:l};R&&(D.name=a,D.is_public=p,D.max_players=g,D.donation_amount=b?parseFloat(v):null,d&&(D.password=d));const te=await ut(`/leagues/${e}/settings`,s.access_token,{method:"PATCH",body:JSON.stringify(D)});if(te.error)throw new Error(te.error);return te.data},onSuccess:()=>{n.invalidateQueries({queryKey:["league",e]}),h(""),k(null)},onError:D=>{k(D.message||"Failed to update league settings")}}),F=$e({mutationFn:async D=>{if(!e)throw new Error("No league ID");if(!(s!=null&&s.access_token))throw new Error("Not authenticated");const te=await ut(`/leagues/${e}/members/${D}`,s.access_token,{method:"DELETE"});if(te.error)throw new Error(te.error);return te.data},onSuccess:()=>{n.invalidateQueries({queryKey:["league-members",e]}),k(null)},onError:D=>{k(D.message||"Failed to remove member")}}),K=$e({mutationFn:async D=>{if(!e)throw new Error("No league ID");if(!(s!=null&&s.access_token))throw new Error("Not authenticated");const te=await ut(`/leagues/${e}/transfer`,s.access_token,{method:"POST",body:JSON.stringify({new_commissioner_id:D})});if(te.error)throw new Error(te.error);return te.data},onSuccess:()=>{n.invalidateQueries({queryKey:["league",e]}),t(`/leagues/${e}`)},onError:D=>{k(D.message||"Failed to transfer ownership")}}),ae=$e({mutationFn:async()=>{if(!e)throw new Error("No league ID");const{error:D}=await G.from("leagues").delete().eq("id",e);if(D)throw D},onSuccess:()=>{t("/dashboard")}}),X=(D,te)=>{confirm(`Remove ${te} from the league?`)&&F.mutate(D)};if(T)return r.jsxs(r.Fragment,{children:[r.jsx(de,{}),r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center",children:r.jsx(ge,{className:"h-8 w-8 text-burgundy-500 animate-spin"})})]});if(!M)return r.jsxs(r.Fragment,{children:[r.jsx(de,{}),r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 p-4 pb-24",children:r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-8 text-center",children:[r.jsx("h1",{className:"text-xl font-display font-bold text-neutral-800 mb-2",children:"Access Denied"}),r.jsx("p",{className:"text-neutral-500 mb-4",children:"Only the league creator or admin can access settings."}),r.jsx(Y,{to:`/leagues/${e}`,className:"text-burgundy-500 hover:text-burgundy-600",children:"Back to League"})]})})]});const ee=(L==null?void 0:L.filter(D=>D.user_id!==(S==null?void 0:S.id)))||[];return r.jsxs(r.Fragment,{children:[r.jsx(de,{}),r.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 p-4 pb-24",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx(Y,{to:`/leagues/${e}`,className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:r.jsx(at,{className:"h-5 w-5 text-neutral-600"})}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("h1",{className:"text-2xl font-display font-bold text-neutral-800 flex items-center gap-2",children:[r.jsx(Ip,{className:"h-6 w-6 text-burgundy-500"}),"League Settings"]}),r.jsxs("p",{className:"text-neutral-500 flex items-center gap-2",children:[A==null?void 0:A.name,r.jsxs("span",{className:"inline-flex items-center gap-1 bg-burgundy-100 text-burgundy-600 text-xs px-2 py-0.5 rounded-full",children:[r.jsx($n,{className:"h-3 w-3"}),H?"Creator":"Admin"]})]})]})]}),r.jsxs("div",{className:"max-w-md mx-auto space-y-6",children:[E&&r.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-xl flex items-start gap-3",children:[r.jsx(ot,{className:"h-5 w-5 text-red-500 flex-shrink-0 mt-0.5"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-red-800 font-medium",children:"Error"}),r.jsx("p",{className:"text-red-600 text-sm",children:E})]}),r.jsx("button",{onClick:()=>k(null),className:"text-red-400 hover:text-red-600",children:""})]}),r.jsx(Vee,{code:A==null?void 0:A.code}),r.jsx("div",{className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200",children:r.jsxs("label",{className:"block",children:[r.jsx("span",{className:"text-neutral-800 font-medium mb-2 block",children:"League Description"}),r.jsx("textarea",{value:l,onChange:D=>u(D.target.value),placeholder:"Tell members what your league is about...",className:"input min-h-[100px] resize-none",maxLength:500}),r.jsxs("p",{className:"text-neutral-400 text-xs mt-1 text-right",children:[l.length,"/500"]})]})}),R&&r.jsxs(r.Fragment,{children:[r.jsx(Kee,{name:a,password:d,onNameChange:i,onPasswordChange:h}),r.jsx(Yee,{isPublic:p,maxPlayers:g,currentMemberCount:(L==null?void 0:L.length)||0,draftStatus:(A==null?void 0:A.draft_status)||"pending",onPublicChange:m,onMaxPlayersChange:y}),r.jsx(Jee,{requireDonation:b,donationAmount:v,draftStatus:(A==null?void 0:A.draft_status)||"pending",onRequireDonationChange:w,onDonationAmountChange:j})]}),r.jsx(Qee,{members:L,currentUserId:S==null?void 0:S.id,draftStatus:(A==null?void 0:A.draft_status)||"pending",onRemoveMember:X,isRemoving:F.isPending,removeError:F.isError}),r.jsx("button",{onClick:()=>O.mutate(),disabled:O.isPending,className:"w-full btn btn-primary flex items-center justify-center gap-2",children:O.isPending?r.jsx(ge,{className:"h-5 w-5 animate-spin"}):"Save Changes"}),O.isSuccess&&r.jsx("p",{className:"text-green-600 text-center",children:"Settings saved!"}),r.jsx(Xee,{otherMembers:ee,onTransfer:D=>K.mutate(D),isPending:K.isPending,isError:K.isError}),(A==null?void 0:A.draft_status)==="pending"&&r.jsx(Zee,{onDelete:()=>ae.mutate(),isPending:ae.isPending})]})]})]})}function tte(){const e=[{command:"PICK [name]",example:"PICK Boston Rob",description:"Submit your weekly pick. Use the castaway's first name or full name."},{command:"STATUS",example:"STATUS",description:"Check your current pick status, deadline, and points for the week."},{command:"TEAM",example:"TEAM",description:"View your current roster and each castaway's status."},{command:"SCORES",example:"SCORES",description:"Get your latest scores and league standings."},{command:"HELP",example:"HELP",description:"Get a list of available commands."}];return r.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200",children:[r.jsx(de,{}),r.jsxs("div",{className:"p-4 pb-24",children:[r.jsx("div",{className:"flex items-center gap-3 mb-6 max-w-4xl mx-auto",children:r.jsxs("div",{children:[r.jsxs("h1",{className:"text-2xl font-display font-bold text-neutral-800 flex items-center gap-2",children:[r.jsx(Cm,{className:"h-6 w-6 text-burgundy-500"}),"SMS Commands"]}),r.jsx("p",{className:"text-neutral-500",children:"Make picks and check status via text"})]})}),r.jsxs("div",{className:"bg-burgundy-50 border border-burgundy-200 rounded-2xl p-6 mb-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx(ed,{className:"h-6 w-6 text-burgundy-500"}),r.jsx("h2",{className:"text-lg font-display font-bold text-neutral-800",children:"Text Us"})]}),r.jsx("p",{className:"text-3xl font-mono font-bold text-burgundy-500 mb-2",children:"(YOUR_NUMBER_HERE)"}),r.jsx("p",{className:"text-neutral-600 text-sm mb-4",children:"Save this number to your contacts for easy access during episodes!"}),r.jsx("p",{className:"text-neutral-600 text-sm font-medium",children:"Make weekly picks and check the leaderboard with just a simple text command."})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200 mb-6",children:[r.jsx("h2",{className:"text-lg font-display font-bold text-neutral-800 mb-4",children:"Setup"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"w-6 h-6 bg-burgundy-500 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:r.jsx("span",{className:"text-white font-bold text-sm",children:"1"})}),r.jsxs("p",{className:"text-neutral-600",children:["Go to your"," ",r.jsx(Y,{to:"/profile",className:"text-burgundy-500 hover:text-burgundy-600 font-medium",children:"Profile"})," ","and add your phone number."]})]}),r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"w-6 h-6 bg-burgundy-500 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:r.jsx("span",{className:"text-white font-bold text-sm",children:"2"})}),r.jsx("p",{className:"text-neutral-600",children:"Verify your phone with the code we text you."})]}),r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"w-6 h-6 bg-burgundy-500 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:r.jsx("span",{className:"text-white font-bold text-sm",children:"3"})}),r.jsx("p",{className:"text-neutral-600",children:"Start texting commands to make picks and check status!"})]})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200",children:[r.jsx("h2",{className:"text-lg font-display font-bold text-neutral-800 mb-4",children:"Available Commands"}),r.jsx("div",{className:"space-y-4",children:e.map(t=>r.jsxs("div",{className:"bg-cream-50 rounded-xl p-4 border border-cream-200",children:[r.jsx("div",{className:"flex items-center justify-between mb-2",children:r.jsx("code",{className:"text-burgundy-500 font-mono font-bold",children:t.command})}),r.jsx("p",{className:"text-neutral-600 text-sm mb-2",children:t.description}),r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx("span",{className:"text-neutral-400",children:"Example:"}),r.jsx("code",{className:"text-neutral-800 bg-cream-100 px-2 py-1 rounded",children:t.example})]})]},t.command))})]}),r.jsxs("div",{className:"mt-6 bg-gradient-to-r from-burgundy-50 to-amber-50 rounded-2xl shadow-card p-6 border border-burgundy-200",children:[r.jsx("h2",{className:"text-lg font-display font-bold text-neutral-800 mb-3",children:"Weekly Pick Reminders"}),r.jsxs("p",{className:"text-neutral-700 mb-4",children:["We can text everyone each week asking who their weekly pick is. All you have to do is text ",r.jsx("strong",{children:"1"})," or ",r.jsx("strong",{children:"2"})," to confirm your pick for that week!"]}),r.jsx("p",{className:"text-neutral-600 text-sm",children:"This feature makes it super easy to make your picks without even opening the app. Just reply with the number of your castaway (1 for your first pick, 2 for your second pick)."})]}),r.jsxs("div",{className:"mt-6 bg-white rounded-2xl shadow-card p-6 border border-cream-200",children:[r.jsx("h2",{className:"text-lg font-display font-bold text-neutral-800 mb-4",children:"Tips"}),r.jsxs("ul",{className:"space-y-2",children:[r.jsxs("li",{className:"flex items-start gap-2 text-neutral-600",children:[r.jsx(At,{className:"h-5 w-5 text-green-500 flex-shrink-0 mt-0.5"}),"Commands are not case-sensitive (PICK = pick = Pick)"]}),r.jsxs("li",{className:"flex items-start gap-2 text-neutral-600",children:[r.jsx(At,{className:"h-5 w-5 text-green-500 flex-shrink-0 mt-0.5"}),"You can use first name only if it's unique"]}),r.jsxs("li",{className:"flex items-start gap-2 text-neutral-600",children:[r.jsx(At,{className:"h-5 w-5 text-green-500 flex-shrink-0 mt-0.5"}),"We'll confirm your pick with a reply text"]}),r.jsxs("li",{className:"flex items-start gap-2 text-neutral-600",children:[r.jsx(At,{className:"h-5 w-5 text-green-500 flex-shrink-0 mt-0.5"}),"Picks lock at 3pm PST on Wednesdays"]})]})]})]}),r.jsx(Qt,{})]})}function nte(){const{seasonId:e}=kn(),{data:t,isLoading:n}=se({queryKey:["season",e],queryFn:async()=>{if(!e)throw new Error("No season ID");const{data:h,error:p}=await G.from("seasons").select("*").eq("id",e).single();if(p)throw p;return h},enabled:!!e}),{data:s,isLoading:a}=se({queryKey:["season-episodes",e],queryFn:async()=>{if(!e)throw new Error("No season ID");const{data:h,error:p}=await G.from("episodes").select("*").eq("season_id",e).order("number",{ascending:!0});if(p)throw p;return h||[]},enabled:!!e}),i=new Date,l=h=>{const p=new Date(h.air_date);return h.is_scored?"scored":p<i?"aired":"upcoming"},u=h=>new Date(h).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),d=h=>new Date(h).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",timeZoneName:"short"});return n||a?r.jsxs(r.Fragment,{children:[r.jsx(de,{}),r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center",children:r.jsx(ge,{className:"h-8 w-8 text-burgundy-500 animate-spin"})})]}):r.jsxs(r.Fragment,{children:[r.jsx(de,{}),r.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 p-4 pb-24",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx(Y,{to:"/dashboard",className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:r.jsx(at,{className:"h-5 w-5 text-neutral-600"})}),r.jsxs("div",{children:[r.jsxs("h1",{className:"text-2xl font-display font-bold text-neutral-800 flex items-center gap-2",children:[r.jsx(ur,{className:"h-6 w-6 text-burgundy-500"}),"Episode Schedule"]}),r.jsxs("p",{className:"text-neutral-500",children:["Season ",t==null?void 0:t.number,": ",t==null?void 0:t.name]})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-4 border border-cream-200 mb-6",children:[r.jsx("h2",{className:"text-lg font-display font-bold text-neutral-800 mb-3",children:"Key Dates"}),r.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[r.jsxs("div",{className:"bg-cream-50 rounded-xl p-3 border border-cream-200",children:[r.jsx("p",{className:"text-neutral-500",children:"Premiere"}),r.jsx("p",{className:"text-neutral-800 font-medium",children:t!=null&&t.premiere_at?u(t.premiere_at):"-"})]}),r.jsxs("div",{className:"bg-cream-50 rounded-xl p-3 border border-cream-200",children:[r.jsx("p",{className:"text-neutral-500",children:"Finale"}),r.jsx("p",{className:"text-neutral-800 font-medium",children:t!=null&&t.finale_at?u(t.finale_at):"-"})]}),r.jsxs("div",{className:"bg-cream-50 rounded-xl p-3 border border-cream-200",children:[r.jsx("p",{className:"text-neutral-500",children:"Draft Deadline"}),r.jsx("p",{className:"text-neutral-800 font-medium",children:t!=null&&t.draft_deadline?u(t.draft_deadline):"-"})]}),r.jsxs("div",{className:"bg-cream-50 rounded-xl p-3 border border-cream-200",children:[r.jsx("p",{className:"text-neutral-500",children:"Registration Closes"}),r.jsx("p",{className:"text-neutral-800 font-medium",children:t!=null&&t.registration_closes_at?u(t.registration_closes_at):"-"})]})]})]}),r.jsxs("div",{className:"bg-burgundy-50 border border-burgundy-200 rounded-2xl p-4 mb-6",children:[r.jsxs("h3",{className:"text-burgundy-500 font-medium mb-2 flex items-center gap-2",children:[r.jsx(Ln,{className:"h-4 w-4"}),"Weekly Rhythm"]}),r.jsxs("div",{className:"text-sm space-y-1 text-neutral-600",children:[r.jsxs("p",{children:[r.jsx("strong",{className:"text-neutral-800",children:"Wed 3:00 PM"}),"  Picks lock"]}),r.jsxs("p",{children:[r.jsx("strong",{className:"text-neutral-800",children:"Wed 8:00 PM"}),"  Episode airs"]}),r.jsxs("p",{children:[r.jsx("strong",{className:"text-neutral-800",children:"Fri 12:00 PM"}),"  Results posted"]})]})]}),r.jsxs("div",{className:"space-y-3",children:[s==null?void 0:s.map(h=>{const p=l(h);return r.jsxs("div",{className:`bg-white rounded-2xl shadow-card p-4 border ${p==="scored"?"border-green-300":p==="aired"?"border-amber-300":"border-cream-200"}`,children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${p==="scored"?"bg-green-100":p==="aired"?"bg-amber-100":"bg-cream-100"}`,children:p==="scored"?r.jsx(At,{className:"h-5 w-5 text-green-600"}):p==="aired"?r.jsx(Tm,{className:"h-5 w-5 text-amber-600"}):r.jsx(uJ,{className:"h-5 w-5 text-neutral-400"})}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("h3",{className:"text-neutral-800 font-medium",children:["Episode ",h.number,h.is_finale&&"  Finale"]}),p==="scored"&&r.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded-full",children:"Scored"})]}),r.jsx("p",{className:"text-neutral-500 text-sm",children:h.title||u(h.air_date)})]})]}),r.jsxs("div",{className:"text-right text-sm",children:[r.jsx("p",{className:"text-neutral-800",children:u(h.air_date)}),r.jsx("p",{className:"text-neutral-500",children:d(h.air_date)})]})]}),p==="upcoming"&&r.jsx("div",{className:"mt-3 pt-3 border-t border-cream-200 text-sm",children:r.jsxs("p",{className:"text-neutral-500",children:["Picks lock:"," ",r.jsxs("span",{className:"text-neutral-800",children:[u(h.picks_lock_at)," at ",d(h.picks_lock_at)]})]})})]},h.id)}),(s==null?void 0:s.length)===0&&r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-8 border border-cream-200 text-center",children:[r.jsx(ur,{className:"h-12 w-12 text-neutral-400 mx-auto mb-4"}),r.jsx("p",{className:"text-neutral-500",children:"Episode schedule not yet available."})]})]})]})]})}function rte(){const{seasonId:e}=kn(),[t,n]=C.useState(""),[s,a]=C.useState("all"),[i,l]=C.useState(null),{data:u,isLoading:d}=se({queryKey:["season",e],queryFn:async()=>{if(!e)throw new Error("No season ID");const{data:v,error:j}=await G.from("seasons").select("*").eq("id",e).single();if(j)throw j;return v},enabled:!!e}),{data:h,isLoading:p}=se({queryKey:["season-castaways",e],queryFn:async()=>{if(!e)throw new Error("No season ID");const{data:v,error:j}=await G.from("castaways").select("*, episodes:eliminated_episode_id(number)").eq("season_id",e).order("name",{ascending:!0});if(j)throw j;return v||[]},enabled:!!e}),{data:m}=se({queryKey:["castaway-scores",e],queryFn:async()=>{if(!e)return[];const{data:v}=await G.from("episodes").select("id").eq("season_id",e);if(!(v!=null&&v.length))return[];const j=v.map(S=>S.id),{data:E,error:k}=await G.from("episode_scores").select(`
          castaway_id,
          episode_id,
          points,
          episode:episodes!episode_id(number, title)
        `).in("episode_id",j);if(k)throw k;return E||[]},enabled:!!e}),g=(m==null?void 0:m.reduce((v,j)=>{var k;v[j.castaway_id]||(v[j.castaway_id]={total:0,byEpisode:{}}),v[j.castaway_id].total+=j.points;const E=(k=j.episode)==null?void 0:k.number;return E&&(v[j.castaway_id].byEpisode[E]||(v[j.castaway_id].byEpisode[E]=0),v[j.castaway_id].byEpisode[E]+=j.points),v},{}))||{},y=h==null?void 0:h.filter(v=>{var k,S;const j=v.name.toLowerCase().includes(t.toLowerCase())||((k=v.occupation)==null?void 0:k.toLowerCase().includes(t.toLowerCase()))||((S=v.hometown)==null?void 0:S.toLowerCase().includes(t.toLowerCase())),E=s==="all"||s==="active"&&v.status==="active"||s==="eliminated"&&v.status==="eliminated";return j&&E}),b=(h==null?void 0:h.filter(v=>v.status==="active").length)||0,w=(h==null?void 0:h.filter(v=>v.status==="eliminated").length)||0;return d||p?r.jsxs(r.Fragment,{children:[r.jsx(de,{}),r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center",children:r.jsx(ge,{className:"h-8 w-8 text-burgundy-500 animate-spin"})})]}):r.jsxs(r.Fragment,{children:[r.jsx(de,{}),r.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 p-4 pb-24",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx(Y,{to:"/dashboard",className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:r.jsx(at,{className:"h-5 w-5 text-neutral-600"})}),r.jsxs("div",{children:[r.jsxs("h1",{className:"text-2xl font-display font-bold text-neutral-800 flex items-center gap-2",children:[r.jsx(Ye,{className:"h-6 w-6 text-burgundy-500"}),"Castaways"]}),r.jsxs("p",{className:"text-neutral-500",children:["Season ",u==null?void 0:u.number,": ",u==null?void 0:u.name]})]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-6",children:[r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-3 border border-cream-200 text-center",children:[r.jsx("p",{className:"text-2xl font-bold text-neutral-800",children:(h==null?void 0:h.length)||0}),r.jsx("p",{className:"text-neutral-500 text-xs",children:"Total"})]}),r.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-2xl p-3 text-center",children:[r.jsx("p",{className:"text-2xl font-bold text-green-600",children:b}),r.jsx("p",{className:"text-neutral-500 text-xs",children:"Active"})]}),r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-3 text-center",children:[r.jsx("p",{className:"text-2xl font-bold text-red-600",children:w}),r.jsx("p",{className:"text-neutral-500 text-xs",children:"Eliminated"})]})]}),r.jsxs("div",{className:"flex gap-2 mb-6",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(Ei,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-neutral-400"}),r.jsx("input",{type:"text",value:t,onChange:v=>n(v.target.value),placeholder:"Search castaways...",className:"input pl-10"})]}),r.jsxs("select",{value:s,onChange:v=>{const j=v.target.value;(j==="all"||j==="active"||j==="eliminated")&&a(j)},className:"input px-3 py-2 w-32",children:[r.jsx("option",{value:"all",children:"All"}),r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"eliminated",children:"Eliminated"})]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:y==null?void 0:y.map(v=>{const j=g[v.id],E=i===v.id;return r.jsxs("div",{className:`bg-white rounded-2xl shadow-card border overflow-hidden ${v.status==="eliminated"?"border-red-200 opacity-75":v.status==="winner"?"border-amber-400":"border-cream-200"}`,children:[r.jsx("button",{onClick:()=>l(E?null:v.id),className:"w-full p-4 text-left",children:r.jsxs("div",{className:"flex items-start gap-3",children:[v.photo_url?r.jsx("img",{src:v.photo_url,alt:v.name,className:`w-14 h-14 rounded-full object-cover ${v.status==="eliminated"?"grayscale":""}`}):r.jsx("div",{className:"w-14 h-14 bg-cream-100 rounded-full flex items-center justify-center border border-cream-200",children:r.jsx(Ye,{className:"h-6 w-6 text-neutral-400"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[v.status==="winner"&&r.jsx(rt,{className:"h-4 w-4 text-amber-500"}),v.status==="eliminated"&&r.jsx(Gy,{className:"h-4 w-4 text-red-500"}),r.jsx("h3",{className:"text-neutral-800 font-medium truncate",children:v.name})]}),v.occupation&&r.jsx("p",{className:"text-neutral-500 text-sm",children:v.occupation}),v.age&&v.hometown&&r.jsxs("p",{className:"text-neutral-400 text-xs truncate",children:[v.age,", ",v.hometown]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[(j==null?void 0:j.total)!==void 0&&r.jsxs("span",{className:`text-lg font-bold ${j.total>=0?"text-green-600":"text-red-600"}`,children:[j.total>=0?"+":"",j.total]}),E?r.jsx(qr,{className:"h-5 w-5 text-neutral-400"}):r.jsx(xn,{className:"h-5 w-5 text-neutral-400"})]})]})}),E&&r.jsxs("div",{className:"px-4 pb-4 border-t border-cream-100",children:[v.status==="eliminated"&&v.episodes&&r.jsx("div",{className:"py-2 border-b border-cream-100",children:r.jsxs("p",{className:"text-red-600 text-sm",children:["Eliminated: Episode ",v.episodes.number,v.placement&&`  ${v.placement}${ste(v.placement)} place`]})}),v.status==="winner"&&r.jsx("div",{className:"py-2 border-b border-amber-100",children:r.jsx("p",{className:"text-amber-600 text-sm font-medium",children:"Sole Survivor"})}),r.jsxs("div",{className:"pt-3",children:[r.jsx("h4",{className:"text-sm font-semibold text-neutral-700 mb-2",children:"Episode Scores"}),j!=null&&j.byEpisode&&Object.keys(j.byEpisode).length>0?r.jsx("div",{className:"grid grid-cols-4 gap-2",children:Object.entries(j.byEpisode).sort(([k],[S])=>Number(k)-Number(S)).map(([k,S])=>r.jsxs("div",{className:"text-center p-2 bg-cream-50 rounded-lg",children:[r.jsxs("p",{className:"text-xs text-neutral-500",children:["Ep ",k]}),r.jsxs("p",{className:`font-bold ${Number(S)>=0?"text-green-600":"text-red-600"}`,children:[Number(S)>=0?"+":"",S]})]},k))}):r.jsx("p",{className:"text-neutral-400 text-sm",children:"No scores yet"})]}),(j==null?void 0:j.total)!==void 0&&r.jsxs("div",{className:"mt-3 pt-3 border-t border-cream-100 flex justify-between items-center",children:[r.jsx("span",{className:"text-sm font-medium text-neutral-600",children:"Total Points"}),r.jsxs("span",{className:`text-xl font-bold ${j.total>=0?"text-green-600":"text-red-600"}`,children:[j.total>=0?"+":"",j.total]})]})]})]},v.id)})}),(y==null?void 0:y.length)===0&&r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-8 border border-cream-200 text-center",children:[r.jsx(Ye,{className:"h-12 w-12 text-neutral-400 mx-auto mb-4"}),r.jsx("p",{className:"text-neutral-500",children:"No castaways found."})]})]})]})}function ste(e){const t=["th","st","nd","rd"],n=e%100;return t[(n-20)%10]||t[n]||t[0]}function ate(){const{data:e}=se({queryKey:["current-user"],queryFn:async()=>{const{data:{user:d}}=await G.auth.getUser();return d}}),{data:t,isLoading:n}=se({queryKey:["my-payments"],queryFn:async()=>{if(!e)return[];const{data:d,error:h}=await G.from("payments").select("*, leagues(name)").eq("user_id",e.id).order("created_at",{ascending:!1});if(h)throw h;return d||[]},enabled:!!e}),s=d=>new Date(d).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),a=(d,h="usd")=>new Intl.NumberFormat("en-US",{style:"currency",currency:h.toUpperCase()}).format(d),i=d=>{switch(d){case"completed":return r.jsx(At,{className:"h-5 w-5 text-green-600"});case"refunded":return r.jsx(xi,{className:"h-5 w-5 text-amber-600"});case"failed":return r.jsx(xi,{className:"h-5 w-5 text-red-600"});default:return r.jsx(Ln,{className:"h-5 w-5 text-neutral-400"})}},l=d=>{switch(d){case"completed":return"Completed";case"refunded":return"Refunded";case"failed":return"Failed";default:return"Pending"}},u=(t==null?void 0:t.filter(d=>d.status==="completed").reduce((d,h)=>d+(h.amount||0),0))||0;return n?r.jsxs(r.Fragment,{children:[r.jsx(de,{}),r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center",children:r.jsx(ge,{className:"h-8 w-8 text-burgundy-500 animate-spin"})})]}):r.jsxs(r.Fragment,{children:[r.jsx(de,{}),r.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 p-4 pb-24",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx(Y,{to:"/profile",className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:r.jsx(at,{className:"h-5 w-5 text-neutral-600"})}),r.jsxs("div",{children:[r.jsxs("h1",{className:"text-2xl font-display font-bold text-neutral-800 flex items-center gap-2",children:[r.jsx(Wy,{className:"h-6 w-6 text-burgundy-500"}),"Payment History"]}),r.jsx("p",{className:"text-neutral-500",children:"Your league payments"})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200 mb-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-neutral-500 text-sm",children:"Total Spent"}),r.jsx("p",{className:"text-3xl font-bold text-neutral-800",children:a(u)})]}),r.jsx("div",{className:"w-12 h-12 bg-burgundy-100 rounded-full flex items-center justify-center",children:r.jsx(To,{className:"h-6 w-6 text-burgundy-500"})})]}),r.jsxs("p",{className:"text-neutral-500 text-sm mt-2",children:[(t==null?void 0:t.length)||0," transaction",(t==null?void 0:t.length)!==1?"s":""]})]}),r.jsxs("div",{className:"space-y-3",children:[t==null?void 0:t.map(d=>{var h;return r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-4 border border-cream-200",children:[r.jsxs("div",{className:"flex items-start justify-between mb-2",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-neutral-800 font-medium",children:(h=d.leagues)==null?void 0:h.name}),r.jsx("p",{className:"text-neutral-500 text-sm",children:"League Entry Fee"})]}),r.jsx("div",{className:"text-right",children:r.jsxs("p",{className:`font-bold ${d.status==="refunded"?"text-amber-600":"text-neutral-800"}`,children:[d.status==="refunded"?"-":"",a(d.amount,d.currency)]})})]}),r.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-cream-200",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[i(d.status),r.jsx("span",{className:`text-sm ${d.status==="completed"?"text-green-600":d.status==="refunded"?"text-amber-600":d.status==="failed"?"text-red-600":"text-neutral-500"}`,children:l(d.status)})]}),r.jsx("p",{className:"text-neutral-400 text-sm",children:s(d.created_at)})]}),d.status==="refunded"&&d.refunded_at&&r.jsxs("p",{className:"text-amber-600 text-xs mt-2",children:["Refunded on ",s(d.refunded_at)]})]},d.id)}),(t==null?void 0:t.length)===0&&r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-8 border border-cream-200 text-center",children:[r.jsx(Wy,{className:"h-12 w-12 text-neutral-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-neutral-800 font-medium mb-2",children:"No Payments Yet"}),r.jsx("p",{className:"text-neutral-500 text-sm",children:"Join a paid league to see your payment history here."})]})]}),r.jsx("div",{className:"mt-6 p-4 bg-cream-50 rounded-2xl border border-cream-200",children:r.jsxs("p",{className:"text-neutral-600 text-sm",children:[r.jsx("strong",{className:"text-neutral-800",children:"Questions about a payment?"})," Contact us at"," ",r.jsx("a",{href:"mailto:support@realitygamesfantasyleague.com",className:"text-burgundy-500",children:"support@realitygamesfantasyleague.com"})]})})]})]})}function ite(){var d,h,p,m,g,y,b,w,v,j,E,k;const{code:e}=kn(),[t,n]=C.useState(!1),{data:s,isLoading:a,error:i}=se({queryKey:["public-league",e],queryFn:async()=>{if(!e)throw new Error("No league code");const{data:S,error:P}=await G.from("leagues").select("*, seasons(*)").eq("code",e).eq("is_public",!0).single();if(P)throw P;return S},enabled:!!e}),{data:l}=se({queryKey:["public-league-members",s==null?void 0:s.id],queryFn:async()=>{if(!(s!=null&&s.id))throw new Error("No league ID");const{data:S,error:P}=await G.from("league_members").select("*, users(display_name, avatar_url)").eq("league_id",s.id).order("total_points",{ascending:!1});if(P)throw P;return S||[]},enabled:!!(s!=null&&s.id)}),u=()=>{navigator.clipboard.writeText(window.location.href),n(!0),setTimeout(()=>n(!1),2e3)};return a?r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center",children:r.jsx(ge,{className:"h-8 w-8 text-burgundy-500 animate-spin"})}):i||!s?r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center p-4",children:r.jsxs("div",{className:"text-center",children:[r.jsx(rt,{className:"h-16 w-16 text-neutral-400 mx-auto mb-4"}),r.jsx("h1",{className:"text-2xl font-display font-bold text-neutral-800 mb-2",children:"Leaderboard Not Found"}),r.jsx("p",{className:"text-neutral-500 mb-6",children:"This league doesn't exist or isn't public."}),r.jsx(Y,{to:"/",className:"btn btn-primary inline-block",children:"Go Home"})]})}):r.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200",children:[r.jsx("div",{className:"bg-white/80 backdrop-blur-sm border-b border-cream-200 sticky top-0 z-10",children:r.jsx("div",{className:"max-w-2xl mx-auto px-4 py-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl font-display font-bold text-neutral-800",children:s.name}),r.jsxs("p",{className:"text-neutral-500 text-sm",children:["Season ",(d=s.seasons)==null?void 0:d.number,"  ",(l==null?void 0:l.length)||0," players"]})]}),r.jsxs("button",{onClick:u,className:"flex items-center gap-2 px-3 py-2 bg-burgundy-100 hover:bg-burgundy-200 text-burgundy-600 rounded-xl transition-colors",children:[r.jsx(Pp,{className:"h-4 w-4"}),t?"Copied!":"Share"]})]})})}),r.jsxs("div",{className:"max-w-2xl mx-auto p-4",children:[l&&l.length>=3&&r.jsxs("div",{className:"flex items-end justify-center gap-2 mb-8 pt-8",children:[r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-full flex items-center justify-center mb-2 border border-gray-300",children:r.jsx("span",{className:"text-2xl",children:""})}),r.jsx("p",{className:"text-neutral-800 font-medium text-sm truncate max-w-20",children:(p=(h=l[1])==null?void 0:h.users)==null?void 0:p.display_name}),r.jsxs("p",{className:"text-neutral-500 text-xs",children:[((m=l[1])==null?void 0:m.total_points)||0," pts"]}),r.jsx("div",{className:"w-20 h-20 bg-gray-200 rounded-t-xl mt-2"})]}),r.jsxs("div",{className:"flex flex-col items-center -mt-8",children:[r.jsx($n,{className:"h-8 w-8 text-burgundy-500 mb-1"}),r.jsx("div",{className:"w-20 h-20 bg-burgundy-100 rounded-full flex items-center justify-center mb-2 border-2 border-burgundy-500",children:r.jsx("span",{className:"text-3xl",children:""})}),r.jsx("p",{className:"text-neutral-800 font-bold text-sm truncate max-w-24",children:(y=(g=l[0])==null?void 0:g.users)==null?void 0:y.display_name}),r.jsxs("p",{className:"text-burgundy-500 text-xs font-medium",children:[((b=l[0])==null?void 0:b.total_points)||0," pts"]}),r.jsx("div",{className:"w-24 h-28 bg-burgundy-100 rounded-t-xl mt-2"})]}),r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("div",{className:"w-16 h-16 bg-amber-100 rounded-full flex items-center justify-center mb-2 border border-amber-300",children:r.jsx("span",{className:"text-2xl",children:""})}),r.jsx("p",{className:"text-neutral-800 font-medium text-sm truncate max-w-20",children:(v=(w=l[2])==null?void 0:w.users)==null?void 0:v.display_name}),r.jsxs("p",{className:"text-neutral-500 text-xs",children:[((j=l[2])==null?void 0:j.total_points)||0," pts"]}),r.jsx("div",{className:"w-20 h-16 bg-amber-100 rounded-t-xl mt-2"})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200",children:[r.jsx("div",{className:"px-4 py-3 border-b border-cream-200",children:r.jsxs("h2",{className:"text-lg font-display font-bold text-neutral-800 flex items-center gap-2",children:[r.jsx(rt,{className:"h-5 w-5 text-burgundy-500"}),"Full Standings"]})}),r.jsx("div",{className:"divide-y divide-cream-100",children:l==null?void 0:l.map((S,P)=>{var A,T;return r.jsxs("div",{className:`flex items-center gap-3 px-4 py-3 ${P<3?"bg-burgundy-50":""}`,children:[r.jsx("div",{className:"w-8 h-8 flex items-center justify-center",children:P===0?r.jsx($n,{className:"h-5 w-5 text-burgundy-500"}):r.jsx("span",{className:`font-bold ${P<3?"text-burgundy-500":"text-neutral-400"}`,children:P+1})}),(A=S.users)!=null&&A.avatar_url?r.jsx("img",{src:S.users.avatar_url,alt:"",className:"w-8 h-8 rounded-full object-cover"}):r.jsx("div",{className:"w-8 h-8 bg-cream-100 rounded-full flex items-center justify-center border border-cream-200",children:r.jsx(Ye,{className:"h-4 w-4 text-neutral-400"})}),r.jsx("div",{className:"flex-1 min-w-0",children:r.jsx("p",{className:"text-neutral-800 font-medium truncate",children:(T=S.users)==null?void 0:T.display_name})}),r.jsx("p",{className:`font-bold ${P===0?"text-burgundy-500":"text-neutral-800"}`,children:S.total_points||0})]},S.id)})})]}),r.jsxs("div",{className:"mt-6 bg-burgundy-50 border border-burgundy-200 rounded-2xl p-6 text-center",children:[r.jsx("h3",{className:"text-neutral-800 font-display font-bold mb-2",children:"Join the Competition"}),r.jsx("p",{className:"text-neutral-600 text-sm mb-4",children:"Create your own league and compete with friends!"}),r.jsx(Y,{to:"/signup",className:"btn btn-primary inline-block",children:"Sign Up Free"})]}),r.jsxs("div",{className:"mt-8 text-center text-neutral-500 text-sm pb-8",children:[r.jsx("p",{children:"Reality Games Fantasy League"}),r.jsxs("p",{children:["Season ",(E=s.seasons)==null?void 0:E.number,": ",(k=s.seasons)==null?void 0:k.name]})]})]})]})}function ote(){const{user:e}=yt(),t=zt(),[n,s]=C.useState(""),[a,i]=C.useState(!0),l=C.useRef(null),u=C.useRef(null),{data:d}=se({queryKey:["global-league"],queryFn:async()=>{const{data:w,error:v}=await G.from("leagues").select("id").eq("is_global",!0).single();if(v)throw v;return w}}),h=d==null?void 0:d.id,{data:p,isLoading:m}=se({queryKey:["global-chat-messages",h],queryFn:async()=>{if(!h)return[];const{data:w,error:v}=await G.from("league_messages").select(`
          id,
          user_id,
          content,
          created_at,
          user:users (
            display_name,
            avatar_url
          )
        `).eq("league_id",h).order("created_at",{ascending:!1}).limit(50);if(v)throw v;return w.reverse()},enabled:!!h,refetchInterval:1e4}),g=$e({mutationFn:async w=>{if(!h)throw new Error("No global league found");const{error:v}=await G.from("league_messages").insert({league_id:h,user_id:e.id,content:w});if(v)throw v},onSuccess:()=>{var w;s(""),t.invalidateQueries({queryKey:["global-chat-messages",h]}),(w=u.current)==null||w.focus()}});C.useEffect(()=>{if(!h)return;const w=G.channel(`global-chat-${h}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"league_messages",filter:`league_id=eq.${h}`},()=>{t.invalidateQueries({queryKey:["global-chat-messages",h]})}).subscribe();return()=>{G.removeChannel(w)}},[h,t]),C.useEffect(()=>{var w;a&&((w=l.current)==null||w.scrollIntoView({behavior:"smooth"}))},[p,a]);const y=w=>{w.preventDefault(),n.trim()&&!g.isPending&&e&&g.mutate(n.trim())},b=w=>new Date(w).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});return h?r.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 overflow-hidden",children:[r.jsxs("button",{onClick:()=>i(!a),className:"w-full px-5 py-4 border-b border-cream-200 bg-cream-50 flex items-center justify-between hover:bg-cream-100 transition-colors",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Ro,{className:"h-5 w-5 text-burgundy-500"}),r.jsx("h3",{className:"font-semibold text-neutral-800",children:"Global Chat"}),r.jsxs("span",{className:"text-sm text-neutral-400",children:[(p==null?void 0:p.length)||0," messages"]})]}),a?r.jsx(qr,{className:"h-5 w-5 text-neutral-400"}):r.jsx(xn,{className:"h-5 w-5 text-neutral-400"})]}),a&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"h-64 overflow-y-auto p-4 space-y-3 bg-cream-50/50",children:[m?r.jsx("div",{className:"flex items-center justify-center h-full",children:r.jsx(ge,{className:"h-6 w-6 text-burgundy-500 animate-spin"})}):(p==null?void 0:p.length)===0?r.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[r.jsx(Ro,{className:"h-10 w-10 text-neutral-300 mb-2"}),r.jsx("p",{className:"text-neutral-500 text-sm",children:"No messages yet"}),r.jsx("p",{className:"text-xs text-neutral-400",children:"Be the first to say something!"})]}):p==null?void 0:p.map(w=>{var j,E,k,S;const v=w.user_id===(e==null?void 0:e.id);return r.jsxs("div",{className:`flex gap-2 ${v?"flex-row-reverse":""}`,children:[r.jsx("div",{className:`w-7 h-7 rounded-full flex-shrink-0 flex items-center justify-center text-white text-xs font-semibold ${v?"bg-burgundy-500":"bg-neutral-400"}`,children:((k=(E=(j=w.user)==null?void 0:j.display_name)==null?void 0:E.charAt(0))==null?void 0:k.toUpperCase())||"?"}),r.jsxs("div",{className:`max-w-[75%] ${v?"text-right":""}`,children:[!v&&r.jsx("p",{className:"text-xs text-neutral-500 mb-0.5 px-1",children:((S=w.user)==null?void 0:S.display_name)||"Unknown"}),r.jsx("div",{className:`inline-block px-3 py-1.5 rounded-2xl text-sm ${v?"bg-burgundy-500 text-white rounded-br-md":"bg-white text-neutral-800 rounded-bl-md border border-cream-200"}`,children:w.content}),r.jsx("p",{className:"text-xs text-neutral-400 mt-0.5 px-1",children:b(w.created_at)})]})]},w.id)}),r.jsx("div",{ref:l})]}),e?r.jsx("form",{onSubmit:y,className:"p-3 border-t border-cream-200 bg-white",children:r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{ref:u,type:"text",value:n,onChange:w=>s(w.target.value),placeholder:"Say something...",className:"flex-1 px-3 py-2 text-sm rounded-full border border-cream-300 bg-cream-50 focus:outline-none focus:ring-2 focus:ring-burgundy-500 focus:border-transparent",disabled:g.isPending}),r.jsx("button",{type:"submit",disabled:!n.trim()||g.isPending,className:"w-9 h-9 rounded-full bg-burgundy-500 text-white flex items-center justify-center hover:bg-burgundy-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:g.isPending?r.jsx(ge,{className:"h-4 w-4 animate-spin"}):r.jsx(Rp,{className:"h-4 w-4"})})]})}):r.jsx("div",{className:"p-3 border-t border-cream-200 bg-cream-50 text-center",children:r.jsx("p",{className:"text-sm text-neutral-500",children:"Sign in to join the conversation"})})]})]}):null}const mf=50;function lte(){const{user:e}=yt(),[t,n]=C.useState(0),{data:s,isLoading:a,isFetching:i}=se({queryKey:["global-leaderboard",t],queryFn:async()=>{const y=await fetch(`/api/leagues/global-leaderboard?limit=${mf}&offset=${t}`);if(!y.ok)throw new Error("Failed to fetch leaderboard");return y.json()},placeholderData:y=>y}),l=s==null?void 0:s.leaderboard,u=s==null?void 0:s.activeSeason,d=s==null?void 0:s.summary,h=s==null?void 0:s.pagination,p=({lit:y,size:b="normal"})=>{const w=b==="large"?"h-8 w-8":"h-5 w-5";return y?r.jsxs("div",{className:"relative",children:[r.jsx(Mn,{className:`${w} text-orange-500`}),r.jsx("div",{className:"absolute -top-1 left-1/2 -translate-x-1/2",children:r.jsx("div",{className:"w-2 h-2 bg-yellow-400 rounded-full animate-pulse opacity-80"})})]}):r.jsx("div",{className:"relative",children:r.jsx(Mn,{className:`${w} text-neutral-300`})})},m=y=>y===1?{bg:"bg-gradient-to-r from-yellow-100 to-amber-50",border:"border-yellow-300",text:"text-yellow-700",icon:r.jsx(lr,{className:"h-6 w-6 text-yellow-500"})}:y===2?{bg:"bg-gradient-to-r from-gray-100 to-slate-50",border:"border-gray-300",text:"text-gray-600",icon:r.jsx(lr,{className:"h-6 w-6 text-gray-400"})}:y===3?{bg:"bg-gradient-to-r from-orange-100 to-amber-50",border:"border-orange-300",text:"text-orange-700",icon:r.jsx(lr,{className:"h-6 w-6 text-orange-400"})}:{bg:"bg-white",border:"border-cream-200",text:"text-neutral-600",icon:null},g=u?u.number===50?"Survivor Season 50: In the Hands of the Fans":`Season ${u.number}: ${u.name}`:"Global Leaderboard";return r.jsxs("div",{className:"max-w-4xl mx-auto pb-24",children:[r.jsxs("div",{className:"mb-8",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx(rt,{className:"h-8 w-8 text-burgundy-500"}),r.jsx("h1",{className:"text-3xl font-display font-bold text-neutral-800",children:g})]}),r.jsx("p",{className:"text-neutral-500",children:"Rankings weighted by performance and number of leagues"})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-8",children:[r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-4 border border-cream-200 text-center",children:[r.jsx(Ye,{className:"h-6 w-6 text-burgundy-500 mx-auto mb-2"}),r.jsx("p",{className:"text-2xl font-bold text-neutral-800",children:(d==null?void 0:d.totalPlayers)||0}),r.jsx("p",{className:"text-neutral-500 text-sm",children:"Total Players"})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-4 border border-cream-200 text-center",children:[r.jsx(Do,{className:"h-6 w-6 text-green-500 mx-auto mb-2"}),r.jsx("p",{className:"text-2xl font-bold text-neutral-800",children:(d==null?void 0:d.topScore)||0}),r.jsx("p",{className:"text-neutral-500 text-sm",children:"Top Score"})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-4 border border-cream-200 text-center",children:[r.jsx(Mn,{className:"h-6 w-6 text-orange-500 mx-auto mb-2"}),r.jsx("p",{className:"text-2xl font-bold text-neutral-800",children:(d==null?void 0:d.activeTorches)||0}),r.jsx("p",{className:"text-neutral-500 text-sm",children:"Torches Lit"})]})]}),t===0&&l&&l.length>=3&&r.jsxs("div",{className:"mb-8",children:[r.jsx("h2",{className:"text-lg font-semibold text-neutral-700 mb-4",children:"Top Players"}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"bg-gradient-to-b from-gray-100 to-gray-50 rounded-2xl p-6 border-2 border-gray-200 text-center mt-8",children:[r.jsx("div",{className:"flex justify-center mb-3",children:r.jsx(p,{lit:!l[1].hasEliminatedCastaway,size:"large"})}),r.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full mx-auto mb-2 flex items-center justify-center",children:r.jsx("span",{className:"text-gray-600 font-bold text-lg",children:"2"})}),r.jsx("p",{className:"font-semibold text-neutral-800 truncate",children:l[1].displayName}),r.jsx("p",{className:"text-2xl font-display text-gray-600 mt-1",children:l[1].weightedScore}),r.jsxs("p",{className:"text-xs text-neutral-400",children:[l[1].leagueCount," ",l[1].leagueCount===1?"league":"leagues"]})]}),r.jsxs("div",{className:"bg-gradient-to-b from-yellow-100 to-amber-50 rounded-2xl p-6 border-2 border-yellow-300 text-center shadow-elevated",children:[r.jsx("div",{className:"flex justify-center mb-3",children:r.jsx(p,{lit:!l[0].hasEliminatedCastaway,size:"large"})}),r.jsx("div",{className:"w-14 h-14 bg-yellow-300 rounded-full mx-auto mb-2 flex items-center justify-center",children:r.jsx(rt,{className:"h-7 w-7 text-yellow-700"})}),r.jsx("p",{className:"font-bold text-neutral-800 truncate",children:l[0].displayName}),r.jsx("p",{className:"text-3xl font-display text-yellow-700 mt-1",children:l[0].weightedScore}),r.jsxs("p",{className:"text-xs text-neutral-500",children:[l[0].leagueCount," ",l[0].leagueCount===1?"league":"leagues"]})]}),r.jsxs("div",{className:"bg-gradient-to-b from-orange-100 to-amber-50 rounded-2xl p-6 border-2 border-orange-200 text-center mt-8",children:[r.jsx("div",{className:"flex justify-center mb-3",children:r.jsx(p,{lit:!l[2].hasEliminatedCastaway,size:"large"})}),r.jsx("div",{className:"w-12 h-12 bg-orange-200 rounded-full mx-auto mb-2 flex items-center justify-center",children:r.jsx("span",{className:"text-orange-600 font-bold text-lg",children:"3"})}),r.jsx("p",{className:"font-semibold text-neutral-800 truncate",children:l[2].displayName}),r.jsx("p",{className:"text-2xl font-display text-orange-600 mt-1",children:l[2].weightedScore}),r.jsxs("p",{className:"text-xs text-neutral-400",children:[l[2].leagueCount," ",l[2].leagueCount===1?"league":"leagues"]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated overflow-hidden border border-cream-200",children:[r.jsx("div",{className:"p-5 border-b border-cream-100",children:r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"font-semibold text-neutral-800",children:"All Players"}),r.jsx("p",{className:"text-sm text-neutral-500",children:"Ranked by weighted score (more leagues = more accurate ranking)"})]}),r.jsxs("div",{className:"flex items-center gap-4 text-sm text-neutral-500 bg-cream-50 px-3 py-2 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsx(p,{lit:!0}),r.jsx("span",{children:"Active"})]}),r.jsx("div",{className:"w-px h-4 bg-neutral-300"}),r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsx(p,{lit:!1}),r.jsx("span",{children:"Eliminated"})]})]})]})}),r.jsx("div",{className:"p-5 border-b border-cream-100",children:r.jsx(ote,{})}),a?r.jsxs("div",{className:"p-12 text-center",children:[r.jsx("div",{className:"w-8 h-8 mx-auto border-2 border-burgundy-500 border-t-transparent rounded-full animate-spin"}),r.jsx("p",{className:"text-neutral-500 mt-4",children:"Loading rankings..."})]}):(l==null?void 0:l.length)===0?r.jsxs("div",{className:"p-12 text-center",children:[r.jsx(rt,{className:"h-12 w-12 text-neutral-300 mx-auto mb-4"}),r.jsx("p",{className:"text-neutral-500",children:"No players yet. Join a league to get started!"}),r.jsx(Y,{to:"/leagues",className:"btn btn-primary mt-4 inline-block",children:"Browse Leagues"})]}):r.jsx("div",{className:"divide-y divide-cream-100",children:l==null?void 0:l.map((y,b)=>{const w=t+b+1,v=m(w),j=y.userId===(e==null?void 0:e.id);return r.jsxs("div",{className:`flex items-center gap-4 p-4 transition-colors ${j?"bg-burgundy-50 border-l-4 border-burgundy-500":w<=3?v.bg:"hover:bg-cream-50"}`,children:[r.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold ${w<=3?"":"bg-cream-100"} ${v.text}`,children:v.icon||w}),r.jsx("div",{className:"flex-shrink-0",children:r.jsx(p,{lit:!y.hasEliminatedCastaway})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("p",{className:`font-semibold truncate ${j?"text-burgundy-700":"text-neutral-800"}`,children:[y.displayName,j&&r.jsx("span",{className:"ml-2 text-xs text-burgundy-500 font-normal",children:"(You)"})]}),r.jsxs("p",{className:"text-sm text-neutral-400",children:[y.leagueCount," ",y.leagueCount===1?"league":"leagues"," "," ",y.totalPoints," total pts"]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:`text-2xl font-display ${w<=3?v.text:"text-neutral-800"}`,children:y.weightedScore}),r.jsx("p",{className:"text-xs text-neutral-400",children:"score"})]})]},y.userId)})})]}),h&&r.jsxs("div",{className:"mt-6 flex flex-col items-center gap-4",children:[r.jsxs("p",{className:"text-sm text-neutral-500",children:["Showing ",t+1,"-",Math.min(t+mf,h.total)," of"," ",h.total," players"]}),r.jsxs("div",{className:"flex gap-3",children:[t>0&&r.jsx("button",{onClick:()=>n(Math.max(0,t-mf)),disabled:i,className:"btn btn-secondary",children:"Previous"}),h.hasMore&&r.jsx("button",{onClick:()=>n(t+mf),disabled:i,className:"btn btn-primary flex items-center gap-2",children:i?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Loading..."]}):r.jsxs(r.Fragment,{children:["Load More",r.jsx(xn,{className:"h-4 w-4"})]})})]})]}),e&&l&&l.length>0&&(()=>{const y=l.findIndex(v=>v.userId===e.id);if(y===-1)return null;const b=t+y+1;if(b<=10)return null;const w=l[y];return r.jsx("div",{className:"mt-6 bg-gradient-to-r from-burgundy-500 to-burgundy-600 rounded-2xl p-6 text-white shadow-elevated",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center",children:r.jsxs("span",{className:"font-bold text-xl",children:["#",b]})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-burgundy-100 text-sm",children:"Your Position"}),r.jsx("p",{className:"text-xl font-semibold",children:w.displayName})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-3xl font-display",children:w.weightedScore}),r.jsx("p",{className:"text-burgundy-100 text-sm",children:"score"})]})]})})})()]})}const _k=["from-burgundy-500 to-red-600","from-blue-500 to-indigo-600","from-green-500 to-emerald-600","from-purple-500 to-violet-600","from-orange-500 to-amber-600","from-pink-500 to-rose-500","from-teal-500 to-cyan-600"];function cte(e){const t=e.split("").reduce((n,s)=>n+s.charCodeAt(0),0);return _k[t%_k.length]}function ute(){const e=Kr(),{user:t}=yt(),[n,s]=C.useState(""),[a,i]=C.useState(""),[l,u]=C.useState("all"),{data:d,isLoading:h}=se({queryKey:["all-leagues"],queryFn:async()=>{const{data:j,error:E}=await G.from("leagues").select(`
          *,
          commissioner:users!leagues_commissioner_id_fkey (display_name)
        `).eq("is_global",!1).order("created_at",{ascending:!1});if(E)throw E;return j||[]}}),{data:p}=se({queryKey:["league-member-counts"],queryFn:async()=>{const{data:j,error:E}=await G.from("league_members").select("league_id");if(E)throw E;const k={};return j==null||j.forEach(S=>{k[S.league_id]=(k[S.league_id]||0)+1}),k}}),{data:m}=se({queryKey:["my-memberships",t==null?void 0:t.id],queryFn:async()=>{if(!(t!=null&&t.id))return[];const{data:j,error:E}=await G.from("league_members").select("league_id").eq("user_id",t.id);if(E)throw E;return(j==null?void 0:j.map(k=>k.league_id))||[]},enabled:!!(t!=null&&t.id)}),g=d==null?void 0:d.filter(j=>{var P,A;const E=j.name.toLowerCase().includes(n.toLowerCase())||((A=(P=j.commissioner)==null?void 0:P.display_name)==null?void 0:A.toLowerCase().includes(n.toLowerCase()))||j.code.toLowerCase().includes(n.toLowerCase()),k=m==null?void 0:m.includes(j.id),S=j.commissioner_id===(t==null?void 0:t.id);return l==="commissioner"&&!S||l==="member"&&!k?!1:E}),y=()=>{a.trim()&&e(`/join/${a.trim().toUpperCase()}`)},b=j=>m==null?void 0:m.includes(j),w=(d==null?void 0:d.filter(j=>j.commissioner_id===(t==null?void 0:t.id)).length)||0,v=(m==null?void 0:m.length)||0;return r.jsxs("div",{className:"max-w-6xl mx-auto pb-24",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-8",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-display font-bold text-neutral-800 flex items-center gap-3",children:[r.jsx("span",{className:"text-3xl",children:""})," My Leagues"]}),r.jsx("p",{className:"text-neutral-500 mt-1",children:"Manage your fantasy leagues and track standings"})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>{const j=document.getElementById("join-modal");j&&j.classList.toggle("hidden")},className:"px-4 py-2 bg-white border border-cream-200 text-neutral-700 rounded-xl font-medium hover:bg-cream-50 transition shadow-sm",children:"Join League"}),r.jsxs(Y,{to:"/leagues/create",className:"px-4 py-2 bg-burgundy-500 text-white rounded-xl font-semibold hover:bg-burgundy-600 transition shadow-lg flex items-center gap-2",children:[r.jsx(Io,{className:"h-5 w-5"}),"Create League"]})]})]}),r.jsx("div",{id:"join-modal",className:"hidden bg-white rounded-2xl shadow-card p-6 border border-cream-200 mb-6 animate-fade-in",children:r.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("h2",{className:"font-semibold text-neutral-800 flex items-center gap-2",children:[r.jsx(Dn,{className:"h-5 w-5 text-burgundy-500"}),"Have an invite code?"]}),r.jsx("p",{className:"text-neutral-500 text-sm mt-1",children:"Enter your 6-character code to join a private league"})]}),r.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[r.jsx("input",{type:"text",value:a,onChange:j=>i(j.target.value.toUpperCase()),placeholder:"ABC123",maxLength:6,className:"input font-mono text-center tracking-widest uppercase w-32"}),r.jsx("button",{onClick:y,disabled:a.length!==6,className:"btn btn-primary disabled:opacity-50",children:"Join"})]})]})}),r.jsxs("div",{className:"bg-white rounded-2xl p-4 mb-6 border border-cream-200 shadow-sm flex flex-col md:flex-row gap-4",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(Ei,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-neutral-400"}),r.jsx("input",{type:"text",value:n,onChange:j=>s(j.target.value),placeholder:"Search leagues...",className:"w-full pl-10 pr-4 py-2 rounded-xl border border-cream-200 bg-cream-50 focus:outline-none focus:ring-2 focus:ring-burgundy-500 focus:border-transparent"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>u("all"),className:`px-4 py-2 rounded-xl font-medium transition-all ${l==="all"?"bg-burgundy-500 text-white":"bg-cream-100 text-neutral-600 hover:bg-cream-200"}`,children:"All"}),r.jsxs("button",{onClick:()=>u("commissioner"),className:`px-4 py-2 rounded-xl font-medium transition-all flex items-center gap-2 ${l==="commissioner"?"bg-burgundy-500 text-white":"bg-cream-100 text-neutral-600 hover:bg-cream-200"}`,children:[r.jsx($n,{className:"h-4 w-4"}),"Commissioner ",w>0&&`(${w})`]}),r.jsxs("button",{onClick:()=>u("member"),className:`px-4 py-2 rounded-xl font-medium transition-all flex items-center gap-2 ${l==="member"?"bg-burgundy-500 text-white":"bg-cream-100 text-neutral-600 hover:bg-cream-200"}`,children:[r.jsx(Ye,{className:"h-4 w-4"}),"Member ",v>0&&`(${v})`]})]})]}),h?r.jsxs("div",{className:"flex flex-col items-center justify-center py-16",children:[r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx(ge,{className:"h-8 w-8 text-burgundy-500 animate-spin"})}),r.jsx("p",{className:"text-neutral-500",children:"Loading leagues..."})]}):r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-cream-200 overflow-hidden",children:[r.jsx("div",{className:"bg-cream-50 px-4 sm:px-6 py-4 border-b border-cream-200",children:r.jsxs("div",{className:"grid grid-cols-12 gap-4 text-sm font-semibold text-neutral-600",children:[r.jsx("div",{className:"col-span-4",children:"League"}),r.jsx("div",{className:"col-span-2 text-center",children:"Members"}),r.jsx("div",{className:"col-span-2 text-center",children:"Role"}),r.jsx("div",{className:"col-span-2 text-center",children:"Donation"}),r.jsx("div",{className:"col-span-2 text-right",children:"Status"})]})}),r.jsxs("div",{className:"divide-y divide-cream-100",children:[g==null?void 0:g.map(j=>{var T;const E=(p==null?void 0:p[j.id])||0,k=b(j.id),S=E>=j.max_players,P=j.commissioner_id===(t==null?void 0:t.id),A=cte(j.id);return r.jsx("div",{className:"px-4 sm:px-6 py-4 hover:bg-cream-50 transition cursor-pointer group",onClick:()=>e(`/leagues/${j.id}`),children:r.jsxs("div",{className:"grid grid-cols-12 gap-4 items-center",children:[r.jsxs("div",{className:"col-span-4 flex items-center gap-3",children:[r.jsx("div",{className:`w-10 h-10 rounded-xl bg-gradient-to-br ${A} flex items-center justify-center text-white font-bold`,children:j.name.charAt(0).toUpperCase()}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-neutral-800 group-hover:text-burgundy-600",children:j.name}),r.jsx("p",{className:"text-xs text-neutral-400 font-mono",children:j.code}),r.jsx("p",{className:"text-xs text-neutral-500",children:((T=j.commissioner)==null?void 0:T.display_name)||"Commissioner"})]})]}),r.jsx("div",{className:"col-span-2 text-center",children:r.jsxs("span",{className:"text-neutral-700",children:[E,"/",j.max_players]})}),r.jsx("div",{className:"col-span-2 text-center",children:P?r.jsxs("span",{className:"inline-flex items-center gap-1 text-amber-700 bg-amber-100 px-2 py-1 rounded-full text-xs font-semibold",children:[r.jsx($n,{className:"h-3 w-3"}),"Commissioner"]}):k?r.jsx("span",{className:"inline-flex items-center gap-1 text-blue-700 bg-blue-100 px-2 py-1 rounded-full text-xs font-semibold",children:"Member"}):j.is_public?r.jsxs("span",{className:"inline-flex items-center gap-1 text-green-700 bg-green-100 px-2 py-1 rounded-full text-xs font-semibold",children:[r.jsx(yi,{className:"h-3 w-3"}),"Public"]}):r.jsxs("span",{className:"inline-flex items-center gap-1 text-neutral-700 bg-neutral-100 px-2 py-1 rounded-full text-xs font-semibold",children:[r.jsx(Dn,{className:"h-3 w-3"}),"Private"]})}),r.jsx("div",{className:"col-span-2 text-center",children:j.require_donation&&j.donation_amount?r.jsxs("span",{className:"text-amber-700 bg-amber-50 px-2 py-1 rounded-full text-xs font-semibold border border-amber-100",children:["$",j.donation_amount.toFixed(2)]}):r.jsx("span",{className:"text-neutral-400 text-sm",children:""})}),r.jsx("div",{className:"col-span-2 text-right",children:r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[r.jsxs("span",{className:`inline-flex items-center gap-1 text-sm font-medium ${j.status==="active"?"text-green-600":j.status==="drafting"?"text-amber-600":"text-neutral-500"}`,children:[r.jsx("span",{className:`w-2 h-2 rounded-full ${j.status==="active"?"bg-green-500":j.status==="drafting"?"bg-amber-400":"bg-neutral-300"}`}),j.status||"unknown"]}),!k&&!S&&r.jsxs(Y,{to:`/join/${j.code}`,onClick:L=>L.stopPropagation(),className:"text-burgundy-600 font-semibold text-sm inline-flex items-center gap-1",children:["Join ",r.jsx(Sr,{className:"h-4 w-4"})]}),k&&r.jsxs(Y,{to:`/leagues/${j.id}`,onClick:L=>L.stopPropagation(),className:"text-burgundy-600 font-semibold text-sm inline-flex items-center gap-1",children:["View ",r.jsx(Sr,{className:"h-4 w-4"})]}),S&&!k&&r.jsx("span",{className:"text-xs text-red-500 font-semibold",children:"Full"})]})})]})},j.id)}),(g==null?void 0:g.length)===0&&r.jsx("div",{className:"px-6 py-10 text-center text-neutral-500",children:"No leagues found."})]})]})]})}function dte(e,t){const[n,s]=C.useState(e);return C.useEffect(()=>{const a=setTimeout(()=>s(e),t);return()=>clearTimeout(a)},[e,t]),n}function hte({search:e,onSearchChange:t,filter:n,onFilterChange:s,sortBy:a,onSortByChange:i}){const[l,u]=C.useState(e),d=C.useRef(!0),h=dte(l,300);C.useEffect(()=>{if(d.current){d.current=!1;return}t(h)},[h,t]),C.useEffect(()=>{u(e)},[e]);const p=C.useCallback(g=>{const y=g.target.value;["all","active","eliminated"].includes(y)&&s(y)},[s]),m=C.useCallback(g=>{const y=g.target.value;["name","points","status"].includes(y)&&i(y)},[i]);return r.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(Ei,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-neutral-400"}),r.jsx("input",{type:"text",value:l,onChange:g=>u(g.target.value),placeholder:"Search castaways by name, occupation, or hometown...",className:"input pl-10 w-full","aria-label":"Search castaways"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("select",{value:n,onChange:p,className:"input px-3 py-2","aria-label":"Filter by status",children:[r.jsx("option",{value:"all",children:"All Status"}),r.jsx("option",{value:"active",children:"Active Only"}),r.jsx("option",{value:"eliminated",children:"Eliminated"})]}),r.jsxs("select",{value:a,onChange:m,className:"input px-3 py-2","aria-label":"Sort by",children:[r.jsx("option",{value:"name",children:"Sort by Name"}),r.jsx("option",{value:"points",children:"Sort by Points"}),r.jsx("option",{value:"status",children:"Sort by Status"})]})]})]})}function fte({castaway:e,stats:t,isExpanded:n,onToggleExpand:s}){var l,u;const a=d=>{const h=d%100;if(h>=11&&h<=13)return d+"th";const p=d%10;return p===1?d+"st":p===2?d+"nd":p===3?d+"rd":d+"th"},i=d=>{switch(d){case"Vatu":return"#7C3AED";case"Kalo":return"#0D9488";case"Cila":return"#EA580C";default:return"#6B7280"}};return r.jsxs("div",{className:`bg-white rounded-xl border-2 overflow-hidden hover:shadow-lg transition group cursor-pointer ${e.status==="eliminated"?"border-cream-200 opacity-60":e.status==="winner"?"border-yellow-300 ring-2 ring-yellow-100":"border-cream-200"}`,children:[r.jsxs("div",{className:`aspect-square relative ${e.status==="eliminated"?"grayscale":""}`,children:[r.jsx("img",{src:Jn(e.name,e.photo_url),alt:e.name,className:"w-full h-full object-cover",onError:d=>{const h=d.target;e.photo_url&&!h.src.includes("dicebear")&&(h.src=Jn(e.name,null))}}),r.jsx("div",{className:"absolute top-2 right-2",children:e.status==="active"?r.jsx("span",{className:"bg-green-500 text-white text-xs font-bold px-2 py-1 rounded-full",children:"ACTIVE"}):e.status==="winner"?r.jsxs("span",{className:"bg-yellow-500 text-yellow-900 text-xs font-bold px-2 py-1 rounded-full flex items-center gap-1",children:[r.jsx(rt,{className:"h-3 w-3"})," WINNER"]}):r.jsxs("span",{className:"bg-neutral-500 text-white text-xs font-bold px-2 py-1 rounded-full",children:["EP ",((l=e.episodes)==null?void 0:l.number)||"?"]})})]}),r.jsxs("div",{className:"p-3 text-center",children:[r.jsx("p",{className:`font-semibold truncate ${e.status==="eliminated"?"text-neutral-500":"text-neutral-800"}`,children:e.name}),e.occupation&&r.jsx("p",{className:"text-xs text-neutral-500 truncate",children:e.occupation}),r.jsx("p",{className:"text-sm font-bold mt-1",style:{color:e.status==="eliminated"?"#9CA3AF":i(e.tribe_original)},children:(t==null?void 0:t.total)!==void 0?`${t.total>=0?"+":""}${t.total} pts`:"-- pts"})]}),r.jsxs("div",{className:"flex border-t border-cream-100",children:[r.jsx("button",{onClick:d=>{d.stopPropagation(),s(n?null:e.id)},className:"flex-1 px-3 py-2 bg-cream-50 flex items-center justify-center gap-1 text-xs text-neutral-600 hover:bg-cream-100 transition-colors",children:n?r.jsxs(r.Fragment,{children:["Hide ",r.jsx(qr,{className:"h-3 w-3"})]}):r.jsxs(r.Fragment,{children:["Quick View ",r.jsx(xn,{className:"h-3 w-3"})]})}),r.jsxs(Y,{to:`/castaways/${e.id}`,className:"flex-1 px-3 py-2 bg-burgundy-50 flex items-center justify-center gap-1 text-xs text-burgundy-600 hover:bg-burgundy-100 transition-colors border-l border-cream-100",children:["Full Profile ",r.jsx(bJ,{className:"h-3 w-3"})]})]}),n&&r.jsxs("div",{className:"p-4 border-t border-cream-100 bg-cream-50 space-y-4 overflow-hidden",children:[r.jsxs("div",{className:"space-y-3 overflow-hidden",children:[e.previous_seasons&&e.previous_seasons.length>0&&r.jsxs("div",{className:"bg-white rounded-lg border border-cream-200 p-3",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(Zu,{className:"h-4 w-4 text-burgundy-500"}),r.jsxs("span",{className:"text-sm font-semibold text-neutral-700",children:[e.previous_seasons.length," Previous Season",e.previous_seasons.length>1?"s":""]}),e.best_placement&&r.jsxs("span",{className:"ml-auto flex items-center gap-1 text-xs",children:[r.jsx(Uv,{className:"h-3 w-3 text-yellow-500"}),r.jsxs("span",{className:e.best_placement===1?"text-yellow-600 font-semibold":"text-neutral-500",children:["Best:"," ",e.best_placement===1?"Winner":`${a(e.best_placement)} place`]})]})]}),r.jsx("div",{className:"flex flex-wrap gap-1",children:e.previous_seasons.map((d,h)=>r.jsx("span",{className:"text-xs bg-cream-100 text-neutral-600 px-2 py-1 rounded-full",children:d},h))})]}),e.fun_fact&&r.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-yellow-50 rounded-lg border border-amber-200 p-3",children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(S4,{className:"h-4 w-4 text-amber-500 flex-shrink-0 mt-0.5"}),r.jsx("p",{className:"text-sm text-neutral-700 break-words",children:e.fun_fact})]})}),!((u=e.previous_seasons)!=null&&u.length)&&!e.fun_fact&&r.jsx("div",{className:"bg-white rounded-lg border border-cream-200 p-3 text-center",children:r.jsx("p",{className:"text-sm text-neutral-500",children:"No additional information available"})})]}),r.jsxs("div",{children:[r.jsxs("h4",{className:"text-sm font-semibold text-neutral-700 mb-3 flex items-center gap-2",children:[r.jsx(Yn,{className:"h-4 w-4 text-burgundy-500"}),"Weekly Performance"]}),t!=null&&t.byEpisode&&Object.keys(t.byEpisode).length>0?r.jsxs("div",{className:"space-y-2",children:[(()=>{const d=Object.values(t.byEpisode).map(p=>Math.abs(Number(p))),h=Math.max(...d,1);return Object.entries(t.byEpisode).sort(([p],[m])=>Number(p)-Number(m)).map(([p,m])=>r.jsxs("div",{className:"flex items-center gap-3 p-2 bg-white rounded-lg border border-cream-200",children:[r.jsxs("div",{className:"w-16 text-center",children:[r.jsx("p",{className:"text-xs text-neutral-500",children:"Episode"}),r.jsx("p",{className:"font-bold text-neutral-800",children:p})]}),r.jsx("div",{className:"flex-1 h-2 bg-cream-100 rounded-full overflow-hidden",children:r.jsx("div",{className:`h-full rounded-full transition-all ${Number(m)>=0?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.min(Math.abs(Number(m))/h*100,100)}%`}})}),r.jsxs("div",{className:`w-16 text-right font-bold ${Number(m)>=0?"text-green-600":"text-red-600"}`,children:[Number(m)>=0?"+":"",m]})]},p))})(),r.jsxs("div",{className:"mt-4 pt-4 border-t border-cream-200 flex justify-between items-center",children:[r.jsx("span",{className:"font-medium text-neutral-600",children:"Season Total"}),r.jsxs("span",{className:`text-2xl font-bold ${t.total>=0?"text-green-600":"text-red-600"}`,children:[t.total>=0?"+":"",t.total]})]})]}):r.jsxs("div",{className:"text-center py-6 bg-white rounded-lg border border-cream-200",children:[r.jsx(Yn,{className:"h-8 w-8 text-neutral-300 mx-auto mb-2"}),r.jsx("p",{className:"text-neutral-400 text-sm",children:"No scores recorded yet"})]})]})]})]})}function mte(){const[e,t]=C.useState(""),[n,s]=C.useState("all"),[a,i]=C.useState(null),[l,u]=C.useState("name"),[d,h]=C.useState("grid"),{data:p,isLoading:m,error:g}=se({queryKey:["active-season"],queryFn:async()=>{const{data:T,error:L}=await G.from("seasons").select("*").eq("is_active",!0).maybeSingle();if(L)throw L;return T}}),{data:y,isLoading:b}=se({queryKey:["season-castaways",p==null?void 0:p.id],queryFn:async()=>{if(!(p!=null&&p.id))return[];const{data:T,error:L}=await G.from("castaways").select("*, episodes:eliminated_episode_id(number)").eq("season_id",p.id).order("tribe_original",{ascending:!0,nullsFirst:!1}).order("name",{ascending:!0});if(L)throw L;return T||[]},enabled:!!(p!=null&&p.id)}),w={Vatu:{name:"Vatu Tribe",color:"#7C3AED",bgColor:"#EDE9FE",borderColor:"#A78BFA"},Kalo:{name:"Kalo Tribe",color:"#0D9488",bgColor:"#CCFBF1",borderColor:"#5EEAD4"},Cila:{name:"Cila Tribe",color:"#EA580C",bgColor:"#FFEDD5",borderColor:"#FB923C"}},v=C.useMemo(()=>{if(!y)return{};const T={};return y.forEach(L=>{const H=L.tribe_original||"Unknown";T[H]||(T[H]=[]),T[H].push(L)}),Object.keys(T).forEach(L=>{T[L].sort((H,R)=>H.name.localeCompare(R.name))}),T},[y]),{data:j}=se({queryKey:["all-castaway-scores",p==null?void 0:p.id],queryFn:async()=>{if(!(p!=null&&p.id))return[];const{data:T}=await G.from("episodes").select("id").eq("season_id",p.id);if(!(T!=null&&T.length))return[];const L=T.map(M=>M.id),{data:H,error:R}=await G.from("episode_scores").select(`
          castaway_id,
          episode_id,
          points,
          episode:episodes!episode_id(number, title)
        `).in("episode_id",L);if(R)throw R;return H||[]},enabled:!!(p!=null&&p.id)}),E=C.useMemo(()=>(j==null?void 0:j.reduce((T,L)=>{var R;T[L.castaway_id]||(T[L.castaway_id]={total:0,byEpisode:{},episodeCount:0,trend:"neutral"}),T[L.castaway_id].total+=L.points;const H=(R=L.episode)==null?void 0:R.number;return H&&(T[L.castaway_id].byEpisode[H]||(T[L.castaway_id].byEpisode[H]=0,T[L.castaway_id].episodeCount++),T[L.castaway_id].byEpisode[H]+=L.points),T},{}))||{},[j]);Object.keys(E).forEach(T=>{const L=E[T],H=Object.entries(L.byEpisode).sort(([R],[M])=>Number(M)-Number(R));if(H.length>=2){const[,R]=H[0],[,M]=H[1];R>M?L.trend="up":R<M&&(L.trend="down")}});const k=C.useMemo(()=>Object.values(v).some(T=>T.some(L=>{var M,O;const H=L.name.toLowerCase().includes(e.toLowerCase())||((M=L.occupation)==null?void 0:M.toLowerCase().includes(e.toLowerCase()))||((O=L.hometown)==null?void 0:O.toLowerCase().includes(e.toLowerCase())),R=n==="all"||n==="active"&&L.status==="active"||n==="eliminated"&&L.status==="eliminated";return H&&R})),[v,e,n]),S=(y==null?void 0:y.filter(T=>T.status==="active").length)||0,P=(y==null?void 0:y.filter(T=>T.status==="eliminated").length)||0,A=C.useMemo(()=>y?y.filter(T=>{var R,M;const L=T.name.toLowerCase().includes(e.toLowerCase())||((R=T.occupation)==null?void 0:R.toLowerCase().includes(e.toLowerCase()))||((M=T.hometown)==null?void 0:M.toLowerCase().includes(e.toLowerCase())),H=n==="all"||n==="active"&&T.status==="active"||n==="eliminated"&&T.status==="eliminated";return L&&H}).sort((T,L)=>{var H,R;if(l==="points")return(((H=E[L.id])==null?void 0:H.total)||0)-(((R=E[T.id])==null?void 0:R.total)||0);if(l==="status"){const M={winner:0,active:1,eliminated:2};return(M[T.status]||3)-(M[L.status]||3)}return T.name.localeCompare(L.name)}):[],[y,E,n,e,l]);return m||b?r.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex flex-col",children:[r.jsx(de,{}),r.jsx("main",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8 flex-1 flex items-center justify-center",children:r.jsx(ge,{className:"h-8 w-8 text-burgundy-500 animate-spin"})}),r.jsx(Qt,{})]}):g||!p?r.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex flex-col",children:[r.jsx(de,{}),r.jsx("main",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8 flex-1 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx(Ye,{className:"h-12 w-12 text-neutral-400 mx-auto mb-4"}),r.jsx("h2",{className:"text-xl font-bold text-neutral-700 mb-2",children:"No Active Season"}),r.jsx("p",{className:"text-neutral-500",children:"Check back when a new season begins!"})]})}),r.jsx(Qt,{})]}):r.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex flex-col",children:[r.jsx(de,{}),r.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 flex-1",children:r.jsxs("div",{className:"pb-12",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsxs("div",{className:"inline-flex items-center gap-3 mb-4",children:[r.jsx("span",{className:"text-4xl",children:""}),r.jsxs("h1",{className:"text-4xl font-display font-bold text-neutral-800",children:[(p==null?void 0:p.name)||`Season ${(p==null?void 0:p.number)||""}`," Castaways"]})]}),r.jsxs("p",{className:"text-neutral-500 text-lg",children:[(y==null?void 0:y.length)||0," castaways competing for the title of Sole Survivor"]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-8 max-w-2xl mx-auto",children:[r.jsxs("div",{className:"bg-white rounded-2xl p-4 text-center shadow-lg border border-cream-200",children:[r.jsx("p",{className:"text-3xl font-bold text-neutral-800",children:(y==null?void 0:y.length)||0}),r.jsx("p",{className:"text-sm text-neutral-500",children:"Total"})]}),r.jsxs("div",{className:"bg-white rounded-2xl p-4 text-center shadow-lg border border-cream-200",children:[r.jsx("p",{className:"text-3xl font-bold text-green-600",children:S}),r.jsx("p",{className:"text-sm text-neutral-500",children:"Active"})]}),r.jsxs("div",{className:"bg-white rounded-2xl p-4 text-center shadow-lg border border-cream-200",children:[r.jsx("p",{className:"text-3xl font-bold text-neutral-400",children:P}),r.jsx("p",{className:"text-sm text-neutral-500",children:"Eliminated"})]})]}),r.jsx(hte,{search:e,onSearchChange:t,filter:n,onFilterChange:s,sortBy:l,onSortByChange:u}),r.jsx("div",{className:"flex flex-wrap gap-2 mt-4 mb-6",children:[{key:"grid",label:"Tribe Grid"},{key:"list",label:"Full Cards"},{key:"strip",label:"Stat Strips"},{key:"spotlight",label:"Spotlight"}].map(T=>r.jsx("button",{onClick:()=>h(T.key),className:`px-3 py-2 rounded-xl text-sm font-medium transition ${d===T.key?"bg-burgundy-500 text-white shadow-card":"bg-cream-100 text-neutral-600 hover:bg-cream-200"}`,children:T.label},T.key))}),d==="grid"?r.jsx(r.Fragment,{children:r.jsx("div",{className:"space-y-12",children:Object.entries(v).sort(([T],[L])=>{const H={Vatu:1,Kalo:2,Cila:3,Unknown:99};return(H[T]||99)-(H[L]||99)}).map(([T,L])=>{const H=w[T]||{name:T,color:"#6B7280",bgColor:"#F3F4F6",borderColor:"#9CA3AF"},M=L.filter(O=>{var ae,X;const F=O.name.toLowerCase().includes(e.toLowerCase())||((ae=O.occupation)==null?void 0:ae.toLowerCase().includes(e.toLowerCase()))||((X=O.hometown)==null?void 0:X.toLowerCase().includes(e.toLowerCase())),K=n==="all"||n==="active"&&O.status==="active"||n==="eliminated"&&O.status==="eliminated";return F&&K}).sort((O,F)=>{var K,ae;if(l==="points")return(((K=E[F.id])==null?void 0:K.total)||0)-(((ae=E[O.id])==null?void 0:ae.total)||0);if(l==="status"){const X={winner:0,active:1,eliminated:2};return(X[O.status]||3)-(X[F.status]||3)}return O.name.localeCompare(F.name)});return M.length===0?null:r.jsx("div",{className:"mb-16",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border-2 overflow-hidden",style:{borderColor:H.borderColor},children:[r.jsx("div",{className:"px-6 py-5 border-b-2",style:{backgroundColor:H.bgColor,borderColor:H.borderColor},children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-10 h-10 rounded-full shadow-md flex items-center justify-center",style:{backgroundColor:H.color},children:r.jsx("span",{className:"text-white text-xl",children:T==="Vatu"?"":T==="Kalo"?"":T==="Cila"?"":""})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-2xl font-display font-bold",style:{color:H.color},children:H.name}),r.jsxs("p",{className:"text-neutral-600 text-sm",children:[M.length," castaways "," ",M.filter(O=>O.status==="active").length," ","active "," ",M.filter(O=>O.status==="eliminated").length," ","eliminated"]})]})]})}),r.jsx("div",{className:"p-6",children:r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-4",children:M.map(O=>r.jsx(fte,{castaway:O,stats:E[O.id],isExpanded:a===O.id,onToggleExpand:i},O.id))})})]})},T)})})}):d==="list"?r.jsxs("div",{className:"space-y-4",children:[A.map(T=>{var L,H,R,M,O;return r.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-cream-200 overflow-hidden hover:shadow-xl transition cursor-pointer",onClick:()=>i(a===T.id?null:T.id),children:[r.jsxs("div",{className:"flex items-stretch",children:[r.jsxs("div",{className:"w-40 h-40 sm:w-48 sm:h-48 flex-shrink-0 relative overflow-hidden",children:[r.jsx("img",{src:T.photo_url||"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=400&h=400&fit=crop",alt:T.name,className:"w-full h-full object-cover"}),r.jsx("div",{className:"absolute top-3 left-3 bg-green-500 text-white text-xs font-bold px-3 py-1 rounded-full shadow",children:T.status.toUpperCase()})]}),r.jsxs("div",{className:"flex-1 p-5 flex flex-col justify-center",children:[r.jsxs("div",{className:"flex items-start justify-between gap-3",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-2xl font-display font-bold text-neutral-800",children:T.name}),r.jsxs("p",{className:"text-neutral-500",children:[T.occupation||"Castaway",T.hometown?`  ${T.hometown}`:""]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-3xl font-display font-bold text-burgundy-500",children:((L=E[T.id])==null?void 0:L.total)??0}),r.jsx("p",{className:"text-xs text-neutral-400",children:"total points"})]})]}),r.jsx("p",{className:"text-neutral-600 mt-3 text-sm line-clamp-2",children:T.bio||"Click to view more details and performance."}),r.jsxs("div",{className:"flex items-center gap-4 mt-4 text-sm text-neutral-600",children:[r.jsxs("span",{className:"inline-flex items-center gap-2",children:[r.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"}),T.status==="active"?"Still in the game":T.status==="winner"?"Winner":"Eliminated"]}),r.jsxs("span",{className:"inline-flex items-center gap-1",children:[" ",T.tribe_original||"Unknown tribe"]}),r.jsxs("span",{className:"inline-flex items-center gap-1",children:[" ",((H=E[T.id])==null?void 0:H.episodeCount)||0," eps"]})]})]})]}),a===T.id&&r.jsx("div",{className:"border-t border-cream-200 bg-cream-50 p-5",children:r.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-neutral-700",children:[r.jsxs("div",{className:"bg-white rounded-xl border border-cream-200 px-4 py-3 shadow-sm",children:[r.jsx("div",{className:"text-xs text-neutral-500",children:"Latest Trend"}),r.jsx("div",{className:"font-semibold",children:((R=E[T.id])==null?void 0:R.trend)==="up"?"Rising ":((M=E[T.id])==null?void 0:M.trend)==="down"?"Cooling ":"Steady "})]}),r.jsxs("div",{className:"bg-white rounded-xl border border-cream-200 px-4 py-3 shadow-sm",children:[r.jsx("div",{className:"text-xs text-neutral-500",children:"Episodes Played"}),r.jsx("div",{className:"font-semibold",children:((O=E[T.id])==null?void 0:O.episodeCount)||0})]}),r.jsxs("div",{className:"bg-white rounded-xl border border-cream-200 px-4 py-3 shadow-sm",children:[r.jsx("div",{className:"text-xs text-neutral-500",children:"Best Episode"}),r.jsx("div",{className:"font-semibold",children:(()=>{var ae;const F=Object.entries(((ae=E[T.id])==null?void 0:ae.byEpisode)||{});if(!F.length)return"--";const K=F.sort((X,ee)=>Number(ee[1])-Number(X[1]))[0];return`Ep ${K[0]} (${K[1]} pts)`})()})]}),r.jsxs("div",{className:"bg-white rounded-xl border border-cream-200 px-4 py-3 shadow-sm flex-1 min-w-[200px]",children:[r.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Bio"}),r.jsx("p",{className:"text-neutral-700 text-sm",children:T.bio||"No bio available."})]})]})})]},T.id)}),A.length===0&&r.jsx("div",{className:"bg-white rounded-2xl shadow-card p-10 text-center text-neutral-500",children:"No castaways match your filters."})]}):d==="strip"?r.jsxs("div",{className:"space-y-3",children:[A.map(T=>{var L;return r.jsxs("div",{className:"bg-white border border-cream-200 rounded-xl px-4 py-3 flex items-center gap-4 shadow-sm hover:shadow-md transition cursor-pointer",onClick:()=>i(a===T.id?null:T.id),children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-cream-100 flex items-center justify-center font-semibold text-neutral-700",children:T.name.charAt(0)}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("p",{className:"font-semibold text-neutral-800",children:T.name}),r.jsx("span",{className:"text-xs bg-cream-100 text-neutral-500 px-2 py-0.5 rounded-full",children:T.tribe_original||"Unknown"})]}),r.jsxs("p",{className:"text-xs text-neutral-500",children:[T.occupation||"Castaway","  ",T.status]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-lg font-display font-bold text-burgundy-500",children:((L=E[T.id])==null?void 0:L.total)??0}),r.jsx("p",{className:"text-xs text-neutral-400",children:"pts"})]})]},T.id)}),A.length===0&&r.jsx("div",{className:"bg-white rounded-xl border border-cream-200 p-6 text-center text-neutral-500",children:"No castaways match your filters."})]}):r.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[A.slice(0,6).map(T=>{var L;return r.jsxs("div",{className:"relative overflow-hidden rounded-2xl shadow-xl border border-cream-200 bg-gradient-to-br from-burgundy-600 via-burgundy-500 to-amber-500 text-white hover:shadow-2xl transition cursor-pointer",onClick:()=>i(a===T.id?null:T.id),children:[r.jsx("div",{className:"absolute inset-0 bg-black/20"}),r.jsxs("div",{className:"flex flex-col h-full relative",children:[r.jsxs("div",{className:"p-5 flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase tracking-widest text-amber-100 mb-1",children:"Spotlight"}),r.jsx("h3",{className:"text-2xl font-display font-bold",children:T.name}),r.jsx("p",{className:"text-sm text-amber-100",children:T.occupation||"Castaway"})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-3xl font-display font-bold",children:((L=E[T.id])==null?void 0:L.total)??0}),r.jsx("p",{className:"text-xs text-amber-100",children:"total points"})]})]}),r.jsx("div",{className:"px-5 pb-5 text-sm text-amber-50 line-clamp-3",children:T.bio||"Their story is unfoldingclick for full details."})]})]},T.id)}),A.length===0&&r.jsx("div",{className:"bg-white rounded-xl border border-cream-200 p-6 text-center text-neutral-500 col-span-full",children:"No castaways match your filters."})]}),!k&&r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-12 border border-cream-200 text-center",children:[r.jsx(Ye,{className:"h-12 w-12 text-neutral-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-semibold text-neutral-800 mb-2",children:"No castaways found"}),r.jsx("p",{className:"text-neutral-500",children:"Try adjusting your search or filter criteria"})]})]})}),r.jsx(Qt,{})]})}function pte(){var m;const{id:e}=kn(),{data:t,isLoading:n,error:s}=se({queryKey:["castaway",e],queryFn:async()=>{if(!e)throw new Error("No castaway ID");const{data:g,error:y}=await G.from("castaways").select("*, seasons(number, name)").eq("id",e).single();if(y)throw y;return g},enabled:!!e}),{data:a}=se({queryKey:["castaway-scores",e],queryFn:async()=>{if(!e)return[];const{data:g,error:y}=await G.from("castaway_scores").select(`
          episode_id,
          points,
          episodes!inner (
            number,
            title,
            air_date
          )
        `).eq("castaway_id",e).order("episodes(number)",{ascending:!0});if(y)throw y;return(g||[]).map(b=>({episode_id:b.episode_id,points:b.points,episode:b.episodes}))},enabled:!!e}),{data:i}=se({queryKey:["castaway-rankings",t==null?void 0:t.season_id],queryFn:async()=>{if(!(t!=null&&t.season_id))return[];const{data:g,error:y}=await G.from("castaway_scores").select("castaway_id, points, castaways!inner(season_id)").eq("castaways.season_id",t.season_id);if(y)throw y;const b={};return(g||[]).forEach(v=>{b[v.castaway_id]=(b[v.castaway_id]||0)+v.points}),Object.entries(b).map(([v,j])=>({castaway_id:v,total_points:j})).sort((v,j)=>j.total_points-v.total_points).map((v,j)=>({...v,rank:j+1}))},enabled:!!(t!=null&&t.season_id)}),l=(a==null?void 0:a.reduce((g,y)=>g+y.points,0))||0,u=((m=i==null?void 0:i.find(g=>g.castaway_id===e))==null?void 0:m.rank)||null,d=(i==null?void 0:i.length)||0,h=g=>({Vatu:{bg:"bg-purple-100",text:"text-purple-700",border:"border-purple-300"},Kalo:{bg:"bg-teal-100",text:"text-teal-700",border:"border-teal-300"},Cila:{bg:"bg-orange-100",text:"text-orange-700",border:"border-orange-300"}})[g||""]||{bg:"bg-neutral-100",text:"text-neutral-700",border:"border-neutral-300"};if(n)return r.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex flex-col",children:[r.jsx(de,{}),r.jsx("div",{className:"flex-1 flex items-center justify-center",children:r.jsx(ge,{className:"h-8 w-8 text-burgundy-500 animate-spin"})}),r.jsx(Qt,{})]});if(s||!t)return r.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex flex-col",children:[r.jsx(de,{}),r.jsx("div",{className:"flex-1 flex items-center justify-center px-4",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-8 text-center max-w-md",children:[r.jsx(Gy,{className:"h-12 w-12 text-neutral-400 mx-auto mb-4"}),r.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-2",children:"Castaway Not Found"}),r.jsx("p",{className:"text-neutral-600 mb-4",children:"This castaway doesn't exist or has been removed."}),r.jsx(Y,{to:"/castaways",className:"btn btn-primary",children:"View All Castaways"})]})}),r.jsx(Qt,{})]});const p=h(t.tribe_original);return r.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex flex-col",children:[r.jsx(de,{}),r.jsxs("main",{className:"flex-1 max-w-4xl mx-auto px-4 py-8 w-full",children:[r.jsxs(Y,{to:"/castaways",className:"inline-flex items-center gap-2 text-neutral-600 hover:text-burgundy-600 mb-6 transition-colors",children:[r.jsx(at,{className:"h-4 w-4"}),"Back to Castaways"]}),r.jsx("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 overflow-hidden mb-6",children:r.jsxs("div",{className:"md:flex",children:[r.jsxs("div",{className:"md:w-1/3 relative",children:[t.photo_url?r.jsx("img",{src:t.photo_url,alt:t.name,className:"w-full h-64 md:h-full object-cover"}):r.jsx("div",{className:"w-full h-64 md:h-full bg-gradient-to-br from-burgundy-400 to-burgundy-600 flex items-center justify-center",children:r.jsx("span",{className:"text-6xl text-white/80 font-display",children:t.name.charAt(0)})}),r.jsx("div",{className:"absolute top-4 left-4",children:t.status==="eliminated"?r.jsxs("div",{className:"flex items-center gap-1.5 bg-neutral-800/90 text-white px-3 py-1.5 rounded-full text-sm font-medium",children:[r.jsx(Gy,{className:"h-4 w-4"}),"Eliminated"]}):t.status==="winner"?r.jsxs("div",{className:"flex items-center gap-1.5 bg-amber-500 text-white px-3 py-1.5 rounded-full text-sm font-medium",children:[r.jsx(rt,{className:"h-4 w-4"}),"Winner"]}):r.jsxs("div",{className:"flex items-center gap-1.5 bg-green-500 text-white px-3 py-1.5 rounded-full text-sm font-medium",children:[r.jsx(Mn,{className:"h-4 w-4"}),"Active"]})})]}),r.jsxs("div",{className:"md:w-2/3 p-6",children:[r.jsx("div",{className:"flex items-start justify-between mb-4",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-display font-bold text-neutral-800 mb-2",children:t.name}),r.jsx("div",{className:`inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-sm font-medium ${p.bg} ${p.text} ${p.border} border`,children:t.tribe_original||"Unknown Tribe"})]})}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[t.age&&r.jsxs("div",{className:"flex items-center gap-2 text-neutral-600",children:[r.jsx(ur,{className:"h-4 w-4 text-burgundy-500"}),r.jsxs("span",{children:[t.age," years old"]})]}),t.hometown&&r.jsxs("div",{className:"flex items-center gap-2 text-neutral-600",children:[r.jsx(Bv,{className:"h-4 w-4 text-burgundy-500"}),r.jsx("span",{children:t.hometown})]}),t.occupation&&r.jsxs("div",{className:"flex items-center gap-2 text-neutral-600 col-span-2",children:[r.jsx(qY,{className:"h-4 w-4 text-burgundy-500"}),r.jsx("span",{children:t.occupation})]})]}),t.fun_fact&&r.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4 mb-6",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(Yn,{className:"h-5 w-5 text-amber-500 flex-shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-amber-800 mb-1",children:"Fun Fact"}),r.jsx("p",{className:"text-amber-700",children:t.fun_fact})]})]})}),t.previous_seasons&&t.previous_seasons.length>0&&r.jsxs("div",{className:"text-neutral-600",children:[r.jsx("span",{className:"font-medium",children:"Previous Seasons:"})," ",t.previous_seasons.join(", "),t.best_placement&&r.jsxs("span",{className:"ml-2 text-burgundy-600",children:["(Best: #",t.best_placement,")"]})]})]})]})}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[r.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 p-6 text-center",children:[r.jsx("p",{className:"text-3xl font-bold text-burgundy-600",children:l}),r.jsx("p",{className:"text-neutral-500 text-sm",children:"Total Points"})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 p-6 text-center",children:[r.jsx("p",{className:"text-3xl font-bold text-neutral-800",children:u?`#${u}`:"-"}),r.jsxs("p",{className:"text-neutral-500 text-sm",children:["of ",d," Castaways"]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 p-6 text-center",children:[r.jsx("p",{className:"text-3xl font-bold text-neutral-800",children:(a==null?void 0:a.length)||0}),r.jsx("p",{className:"text-neutral-500 text-sm",children:"Episodes Played"})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 overflow-hidden",children:[r.jsx("div",{className:"p-5 border-b border-cream-100",children:r.jsx("h2",{className:"text-lg font-display font-bold text-neutral-800",children:"Week-over-Week Performance"})}),a&&a.length>0?r.jsx("div",{className:"divide-y divide-cream-100",children:a.map((g,y)=>{const b=y>0?a[y-1].points:null,w=b!==null?g.points>b?"up":g.points<b?"down":"same":null;return r.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-cream-50 transition-colors",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-burgundy-100 flex items-center justify-center",children:r.jsx("span",{className:"font-bold text-burgundy-600",children:g.episode.number})}),r.jsxs("div",{children:[r.jsxs("p",{className:"font-medium text-neutral-800",children:["Episode ",g.episode.number,g.episode.title&&r.jsxs("span",{className:"text-neutral-500 ml-2",children:["- ",g.episode.title]})]}),r.jsx("p",{className:"text-sm text-neutral-500",children:new Date(g.episode.air_date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[w&&r.jsxs("div",{className:`flex items-center gap-1 text-sm ${w==="up"?"text-green-600":w==="down"?"text-red-600":"text-neutral-400"}`,children:[w==="up"&&r.jsx(Do,{className:"h-4 w-4"}),w==="down"&&r.jsx(Hv,{className:"h-4 w-4"}),w==="same"&&r.jsx(Cp,{className:"h-4 w-4"})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-xl font-bold text-neutral-800",children:g.points}),r.jsx("p",{className:"text-xs text-neutral-400",children:"points"})]})]})]},g.episode_id)})}):r.jsxs("div",{className:"p-8 text-center text-neutral-500",children:[r.jsx("p",{children:"No scoring data available yet."}),r.jsx("p",{className:"text-sm mt-1",children:"Check back after episodes air!"})]})]})]}),r.jsx(Qt,{})]})}function gte(){const{user:e}=yt(),[t,n]=C.useState(""),[s,a]=C.useState(""),[i,l]=C.useState("general"),[u,d]=C.useState(""),[h,p]=C.useState(""),[m,g]=C.useState(!1),[y,b]=C.useState(!1),[w,v]=C.useState(""),{data:j}=se({queryKey:["profile",e==null?void 0:e.id],queryFn:async()=>{if(!(e!=null&&e.id))return null;const{data:S,error:P}=await G.from("users").select("display_name, email").eq("id",e.id).single();if(P)throw P;return S},enabled:!!(e!=null&&e.id)});C.useState(()=>{j&&(n(j.display_name||""),a(j.email||""))});const E=async S=>{S.preventDefault(),v(""),g(!0);try{const P=encodeURIComponent(`[RGFL ${i.toUpperCase()}] ${u}`),A=encodeURIComponent(`Name: ${t||(j==null?void 0:j.display_name)||"Anonymous"}
Email: ${s||(j==null?void 0:j.email)||(e==null?void 0:e.email)||"Not provided"}
Reason: ${i}
User ID: ${(e==null?void 0:e.id)||"Not logged in"}

Message:
${h}`);window.location.href=`mailto:support@realitygamesfantasyleague.com?subject=${P}&body=${A}`,setTimeout(()=>{b(!0),g(!1)},500)}catch{v("Failed to open email client. Please try again."),g(!1)}},k=[{value:"general",label:"General Inquiry",icon:aJ,description:"General questions about RGFL"},{value:"partner",label:"Partner With Us",icon:PJ,description:"Interested in partnerships or collaborations"},{value:"issue",label:"Report an Issue",icon:HY,description:"Something not working right?"},{value:"scorekeeper",label:"Becoming a Scorekeeper",icon:Sp,description:"Interested in helping score episodes"},{value:"other",label:"Other",icon:ot,description:"Anything else on your mind"}];return y?r.jsx("div",{className:"max-w-2xl mx-auto py-12",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated p-8 border border-cream-200 text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:r.jsx(At,{className:"h-8 w-8 text-green-600"})}),r.jsx("h1",{className:"text-2xl font-display font-bold text-neutral-800 mb-2",children:"Message Sent!"}),r.jsx("p",{className:"text-neutral-500 mb-6",children:"Thank you for reaching out. Your email client should have opened with your message. We typically respond within 24-48 hours."}),r.jsx("button",{onClick:()=>{b(!1),d(""),p("")},className:"btn btn-secondary",children:"Send Another Message"})]})}):r.jsxs("div",{className:"min-h-screen bg-cream-50 flex flex-col",children:[r.jsx(de,{}),r.jsxs("div",{className:"max-w-2xl mx-auto pb-24 flex-1",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("div",{className:"w-16 h-16 bg-burgundy-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(xs,{className:"h-8 w-8 text-burgundy-600"})}),r.jsx("h1",{className:"text-3xl font-display font-bold text-neutral-800 mb-2",children:"Contact Us"}),r.jsx("p",{className:"text-neutral-500",children:"Have questions, feedback, or just want to say hi? We'd love to hear from you!"})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated p-6 border border-cream-200",children:[w&&r.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl",children:r.jsx("p",{className:"text-red-600 text-sm",children:w})}),r.jsxs("form",{onSubmit:E,className:"space-y-6",children:[!e&&r.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-neutral-700 mb-2",children:"Your Name"}),r.jsxs("div",{className:"relative",children:[r.jsx(Ap,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-neutral-400"}),r.jsx("input",{id:"name",type:"text",value:t,onChange:S=>n(S.target.value),className:"input pl-10",placeholder:"John Doe"})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-neutral-700 mb-2",children:"Email Address"}),r.jsxs("div",{className:"relative",children:[r.jsx(xs,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-neutral-400"}),r.jsx("input",{id:"email",type:"email",value:s,onChange:S=>a(S.target.value),className:"input pl-10",placeholder:"you@example.com"})]})]})]}),e&&j&&r.jsxs("div",{className:"p-4 bg-cream-50 rounded-xl border border-cream-200",children:[r.jsx("p",{className:"text-sm text-neutral-500",children:"Sending as:"}),r.jsx("p",{className:"font-medium text-neutral-800",children:j.display_name}),r.jsx("p",{className:"text-sm text-neutral-500",children:j.email})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-3",children:"What can we help you with?"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:k.map(S=>r.jsxs("button",{type:"button",onClick:()=>l(S.value),className:`p-3 rounded-xl border text-left transition-all ${i===S.value?"border-burgundy-500 bg-burgundy-50 ring-2 ring-burgundy-100":"border-cream-200 bg-white hover:border-burgundy-200"}`,children:[r.jsx(S.icon,{className:`h-5 w-5 mb-1 ${i===S.value?"text-burgundy-500":"text-neutral-400"}`}),r.jsx("p",{className:`text-sm font-medium ${i===S.value?"text-burgundy-700":"text-neutral-700"}`,children:S.label})]},S.value))})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"subject",className:"block text-sm font-medium text-neutral-700 mb-2",children:"Subject"}),r.jsx("input",{id:"subject",type:"text",value:u,onChange:S=>d(S.target.value),className:"input",placeholder:"Brief description of your inquiry",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"message",className:"block text-sm font-medium text-neutral-700 mb-2",children:"Message"}),r.jsx("textarea",{id:"message",value:h,onChange:S=>p(S.target.value),className:"input min-h-[150px] resize-y",placeholder:"Tell us more...",required:!0})]}),r.jsx("button",{type:"submit",disabled:m||!u.trim()||!h.trim(),className:"w-full btn btn-primary btn-lg flex items-center justify-center gap-2 disabled:opacity-50",children:m?r.jsxs(r.Fragment,{children:[r.jsx(ge,{className:"h-5 w-5 animate-spin"}),"Opening Email..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Rp,{className:"h-5 w-5"}),"Send Message"]})})]})]}),r.jsxs("div",{className:"mt-6 bg-white rounded-2xl shadow-card p-5 border border-cream-200",children:[r.jsx("h3",{className:"font-semibold text-neutral-800 mb-3",children:"Terms of Service"}),r.jsxs("ul",{className:"space-y-2 text-neutral-600 text-sm",children:[r.jsx("li",{children:" No refunds once payment has been made"}),r.jsx("li",{children:" Prize distribution is at the sole discretion of the site owners"})]})]})]}),r.jsx(Qt,{})]})}function xte(){var u;const{leagueId:e}=kn(),{data:t,isLoading:n}=se({queryKey:["league",e],queryFn:async()=>{if(!e)throw new Error("No league ID");const{data:d,error:h}=await G.from("leagues").select("*, seasons(*)").eq("id",e).single();if(h)throw h;return d},enabled:!!e}),{data:s,isLoading:a}=se({queryKey:["league-history",t==null?void 0:t.commissioner_id],queryFn:async()=>{if(!(t!=null&&t.commissioner_id))throw new Error("No commissioner");const{data:d,error:h}=await G.from("leagues").select(`
          *,
          seasons(*),
          league_members(
            total_points,
            rank,
            users(display_name, avatar_url)
          )
        `).eq("commissioner_id",t.commissioner_id).eq("status","completed").order("created_at",{ascending:!1});if(h)throw h;return d||[]},enabled:!!(t!=null&&t.commissioner_id)}),{data:i}=se({queryKey:["league-episodes",e],queryFn:async()=>{if(!e||!(t!=null&&t.season_id))throw new Error("Missing data");const{data:d,error:h}=await G.from("episodes").select("*").eq("season_id",t.season_id).eq("is_scored",!0).order("number",{ascending:!1});if(h)throw h;return d||[]},enabled:!!e&&!!(t!=null&&t.season_id)});return n||a?r.jsxs(r.Fragment,{children:[r.jsx(de,{}),r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center",children:r.jsx(ge,{className:"h-8 w-8 text-burgundy-500 animate-spin"})})]}):r.jsxs(r.Fragment,{children:[r.jsx(de,{}),r.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 p-4 pb-24",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx(Y,{to:`/leagues/${e}`,className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:r.jsx(at,{className:"h-5 w-5 text-neutral-600"})}),r.jsxs("div",{children:[r.jsxs("h1",{className:"text-2xl font-display font-bold text-neutral-800 flex items-center gap-2",children:[r.jsx(Zu,{className:"h-6 w-6 text-burgundy-500"}),"League History"]}),r.jsx("p",{className:"text-neutral-500",children:t==null?void 0:t.name})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 mb-6",children:[r.jsx("div",{className:"px-4 py-3 border-b border-cream-200",children:r.jsxs("h2",{className:"text-lg font-display font-bold text-neutral-800 flex items-center gap-2",children:[r.jsx(ur,{className:"h-5 w-5 text-burgundy-500"}),"Season ",(u=t==null?void 0:t.seasons)==null?void 0:u.number," Episodes"]})}),i&&i.length>0?r.jsx("div",{className:"divide-y divide-cream-100",children:i.map(d=>r.jsxs(Y,{to:`/leagues/${e}/episodes/${d.id}`,className:"flex items-center gap-3 px-4 py-3 hover:bg-cream-50 transition-colors",children:[r.jsx("div",{className:"w-10 h-10 bg-cream-100 rounded-xl flex items-center justify-center border border-cream-200",children:r.jsx("span",{className:"text-burgundy-500 font-bold",children:d.number})}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("p",{className:"text-neutral-800 font-medium",children:["Episode ",d.number,d.title&&`: ${d.title}`]}),r.jsx("p",{className:"text-neutral-500 text-sm",children:new Date(d.air_date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]}),r.jsx(rt,{className:"h-5 w-5 text-neutral-400"})]},d.id))}):r.jsxs("div",{className:"p-8 text-center",children:[r.jsx(ur,{className:"h-12 w-12 text-neutral-400 mx-auto mb-4"}),r.jsx("p",{className:"text-neutral-500",children:"No scored episodes yet."}),r.jsx("p",{className:"text-neutral-400 text-sm",children:"Results will appear after the first episode is scored."})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200",children:[r.jsx("div",{className:"px-4 py-3 border-b border-cream-200",children:r.jsxs("h2",{className:"text-lg font-display font-bold text-neutral-800 flex items-center gap-2",children:[r.jsx(rt,{className:"h-5 w-5 text-burgundy-500"}),"Past Seasons"]})}),s&&s.length>0?r.jsx("div",{className:"divide-y divide-cream-100",children:s.map(d=>{var p,m,g,y,b;(p=d.league_members)==null||p.find(w=>w.rank===1);const h=(m=d.league_members)==null?void 0:m.sort((w,v)=>(w.rank||999)-(v.rank||999)).slice(0,3);return r.jsxs("div",{className:"p-4",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-neutral-800 font-medium",children:d.name}),r.jsxs("p",{className:"text-neutral-500 text-sm",children:["Season ",(g=d.seasons)==null?void 0:g.number,": ",(y=d.seasons)==null?void 0:y.name]})]}),r.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-700 rounded-full text-xs",children:"Completed"})]}),h&&h.length>0&&r.jsx("div",{className:"space-y-2",children:h.map((w,v)=>{var j,E,k;return r.jsxs("div",{className:`flex items-center gap-3 p-2 rounded-xl ${v===0?"bg-burgundy-50 border border-burgundy-100":"bg-cream-50 border border-cream-200"}`,children:[r.jsx("div",{className:"w-6 h-6 flex items-center justify-center",children:v===0?r.jsx($n,{className:"h-5 w-5 text-burgundy-500"}):v===1?r.jsx(lr,{className:"h-5 w-5 text-gray-400"}):r.jsx(lr,{className:"h-5 w-5 text-amber-600"})}),(j=w.users)!=null&&j.avatar_url?r.jsx("img",{src:w.users.avatar_url,alt:"",className:"w-6 h-6 rounded-full object-cover"}):r.jsx("div",{className:"w-6 h-6 bg-cream-100 rounded-full flex items-center justify-center border border-cream-200",children:r.jsx(Ye,{className:"h-3 w-3 text-neutral-400"})}),r.jsx("span",{className:`flex-1 ${v===0?"text-burgundy-600 font-medium":"text-neutral-800"}`,children:(E=w.users)==null?void 0:E.display_name}),r.jsxs("span",{className:`font-bold ${v===0?"text-burgundy-500":"text-neutral-500"}`,children:[w.total_points," pts"]})]},((k=w.users)==null?void 0:k.display_name)||v)})}),r.jsxs("div",{className:"mt-3 flex items-center justify-between text-sm text-neutral-400",children:[r.jsxs("span",{children:[((b=d.league_members)==null?void 0:b.length)||0," players"]}),r.jsxs("span",{children:["Finished ",new Date(d.updated_at).toLocaleDateString()]})]})]},d.id)})}):r.jsxs("div",{className:"p-8 text-center",children:[r.jsx(Zu,{className:"h-12 w-12 text-neutral-400 mx-auto mb-4"}),r.jsx("p",{className:"text-neutral-500",children:"No past seasons found."}),r.jsx("p",{className:"text-neutral-400 text-sm",children:"Previous league results will appear here."})]})]}),r.jsxs("div",{className:"mt-6 bg-burgundy-50 border border-burgundy-200 rounded-2xl p-4",children:[r.jsxs("h3",{className:"text-neutral-800 font-medium mb-3 flex items-center gap-2",children:[r.jsx(rt,{className:"h-5 w-5 text-burgundy-500"}),"All-Time Stats"]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold text-neutral-800",children:((s==null?void 0:s.length)||0)+1}),r.jsx("p",{className:"text-neutral-500 text-xs",children:"Seasons"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold text-neutral-800",children:(i==null?void 0:i.length)||0}),r.jsx("p",{className:"text-neutral-500 text-xs",children:"Episodes Scored"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold text-neutral-800",children:(s==null?void 0:s.reduce((d,h)=>{var p;return d+(((p=h.league_members)==null?void 0:p.length)||0)},0))||0}),r.jsx("p",{className:"text-neutral-500 text-xs",children:"Total Players"})]})]})]})]})]})}function yte(){const e=zt(),[t,n]=C.useState("notifications"),{data:s}=se({queryKey:["current-user"],queryFn:async()=>{const{data:{user:y}}=await G.auth.getUser();return y}}),{data:a}=se({queryKey:["user-profile",s==null?void 0:s.id],queryFn:async()=>{if(!(s!=null&&s.id))throw new Error("No user");const{data:y,error:b}=await G.from("users").select("*").eq("id",s.id).single();if(b)throw b;return y},enabled:!!(s!=null&&s.id)}),{data:i,isLoading:l}=se({queryKey:["notifications",s==null?void 0:s.id],queryFn:async()=>{if(!(s!=null&&s.id))throw new Error("No user");const{data:y,error:b}=await G.from("notifications").select("*").eq("user_id",s.id).order("sent_at",{ascending:!1}).limit(50);if(b)throw b;return y||[]},enabled:!!(s!=null&&s.id)}),u=$e({mutationFn:async y=>{const{error:b}=await G.from("notifications").update({read_at:new Date().toISOString()}).eq("id",y);if(b)throw b},onSuccess:()=>{e.invalidateQueries({queryKey:["notifications"]})}}),d=$e({mutationFn:async()=>{if(!(s!=null&&s.id))throw new Error("No user");const{error:y}=await G.from("notifications").update({read_at:new Date().toISOString()}).eq("user_id",s.id).is("read_at",null);if(y)throw y},onSuccess:()=>{e.invalidateQueries({queryKey:["notifications"]})}}),h=$e({mutationFn:async y=>{if(!(s!=null&&s.id))throw new Error("No user");const{error:b}=await G.from("users").update(y).eq("id",s.id);if(b)throw b},onSuccess:()=>{e.invalidateQueries({queryKey:["user-profile",s==null?void 0:s.id]})}}),p=(i==null?void 0:i.filter(y=>!y.read_at).length)||0,m=y=>{switch(y){case"email":return r.jsx(xs,{className:"h-5 w-5 text-blue-500"});case"sms":return r.jsx(Cm,{className:"h-5 w-5 text-green-500"});case"push":return r.jsx(td,{className:"h-5 w-5 text-purple-500"});default:return r.jsx(Rs,{className:"h-5 w-5 text-burgundy-500"})}},g=y=>{const b=new Date(y),v=new Date().getTime()-b.getTime(),j=Math.floor(v/6e4),E=Math.floor(v/36e5),k=Math.floor(v/864e5);return j<1?"Just now":j<60?`${j}m ago`:E<24?`${E}h ago`:k<7?`${k}d ago`:b.toLocaleDateString()};return l?r.jsxs(r.Fragment,{children:[r.jsx(de,{}),r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center",children:r.jsx(ge,{className:"h-8 w-8 text-burgundy-500 animate-spin"})})]}):r.jsxs(r.Fragment,{children:[r.jsx(de,{}),r.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 p-4 pb-24",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx(Y,{to:"/profile",className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:r.jsx(at,{className:"h-5 w-5 text-neutral-600"})}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("h1",{className:"text-2xl font-display font-bold text-neutral-800 flex items-center gap-2",children:[r.jsx(Rs,{className:"h-6 w-6 text-burgundy-500"}),"Notifications"]}),p>0&&r.jsxs("p",{className:"text-neutral-500",children:[p," unread"]})]}),p>0&&r.jsx("button",{onClick:()=>d.mutate(),disabled:d.isPending,className:"text-burgundy-500 text-sm hover:text-burgundy-600",children:"Mark all read"})]}),r.jsxs("div",{className:"flex gap-2 mb-6",children:[r.jsxs("button",{onClick:()=>n("notifications"),className:`flex-1 py-2 px-4 rounded-xl font-medium transition-colors ${t==="notifications"?"bg-burgundy-500 text-white":"bg-white text-neutral-600 hover:bg-cream-50 border border-cream-200"}`,children:[r.jsx(Rs,{className:"h-4 w-4 inline mr-2"}),"Inbox"]}),r.jsxs("button",{onClick:()=>n("settings"),className:`flex-1 py-2 px-4 rounded-xl font-medium transition-colors ${t==="settings"?"bg-burgundy-500 text-white":"bg-white text-neutral-600 hover:bg-cream-50 border border-cream-200"}`,children:[r.jsx(Ip,{className:"h-4 w-4 inline mr-2"}),"Preferences"]})]}),t==="notifications"?r.jsx("div",{className:"space-y-3",children:i&&i.length>0?i.map(y=>r.jsx("div",{className:`bg-white rounded-2xl shadow-card p-4 border transition-colors ${y.read_at?"border-cream-200 opacity-75":"border-burgundy-200 bg-burgundy-50"}`,children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"p-2 bg-cream-100 rounded-xl border border-cream-200",children:m(y.type)}),r.jsxs("div",{className:"flex-1 min-w-0",children:[y.subject&&r.jsx("p",{className:"text-neutral-800 font-medium mb-1",children:y.subject}),r.jsx("p",{className:"text-neutral-600 text-sm",children:y.body}),r.jsx("p",{className:"text-neutral-400 text-xs mt-2",children:g(y.sent_at)})]}),!y.read_at&&r.jsx("button",{onClick:()=>u.mutate(y.id),className:"p-2 hover:bg-cream-100 rounded-xl transition-colors",title:"Mark as read",children:r.jsx(QJ,{className:"h-4 w-4 text-burgundy-500"})})]})},y.id)):r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-8 border border-cream-200 text-center",children:[r.jsx(Rs,{className:"h-12 w-12 text-neutral-400 mx-auto mb-4"}),r.jsx("p",{className:"text-neutral-500",children:"No notifications yet."}),r.jsx("p",{className:"text-neutral-400 text-sm mt-1",children:"You'll receive updates about picks, scores, and league activity here."})]})}):r.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200",children:[r.jsxs("div",{className:"px-4 py-3 border-b border-cream-200",children:[r.jsx("h2",{className:"text-lg font-display font-bold text-neutral-800",children:"Notification Preferences"}),r.jsx("p",{className:"text-neutral-500 text-sm",children:"Choose how you want to receive updates"})]}),r.jsxs("div",{className:"divide-y divide-cream-100",children:[r.jsxs("div",{className:"p-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-blue-100 rounded-xl",children:r.jsx(xs,{className:"h-5 w-5 text-blue-500"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-neutral-800 font-medium",children:"Email Notifications"}),r.jsx("p",{className:"text-neutral-500 text-sm",children:"Receive updates via email"})]})]}),r.jsx("button",{onClick:()=>h.mutate({notification_email:!(a!=null&&a.notification_email)}),disabled:h.isPending,className:`w-12 h-6 rounded-full transition-colors relative ${a!=null&&a.notification_email?"bg-burgundy-500":"bg-neutral-300"} ${h.isPending?"opacity-50":""}`,children:h.isPending?r.jsx(ge,{className:"absolute top-1 left-4 w-4 h-4 text-white animate-spin"}):r.jsx("div",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-transform shadow ${a!=null&&a.notification_email?"left-7":"left-1"}`})})]}),r.jsxs("div",{className:"p-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-green-100 rounded-xl",children:r.jsx(Cm,{className:"h-5 w-5 text-green-500"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-neutral-800 font-medium",children:"SMS Notifications"}),r.jsx("p",{className:"text-neutral-500 text-sm",children:"Get text messages for urgent updates"}),!(a!=null&&a.phone_verified)&&r.jsx("p",{className:"text-amber-600 text-xs mt-1",children:"Verify your phone number to enable"})]})]}),r.jsx("button",{onClick:()=>h.mutate({notification_sms:!(a!=null&&a.notification_sms)}),disabled:!(a!=null&&a.phone_verified)||h.isPending,className:`w-12 h-6 rounded-full transition-colors relative ${a!=null&&a.notification_sms?"bg-burgundy-500":"bg-neutral-300"} ${!(a!=null&&a.phone_verified)||h.isPending?"opacity-50 cursor-not-allowed":""}`,children:h.isPending?r.jsx(ge,{className:"absolute top-1 left-4 w-4 h-4 text-white animate-spin"}):r.jsx("div",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-transform shadow ${a!=null&&a.notification_sms?"left-7":"left-1"}`})})]}),r.jsxs("div",{className:"p-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-purple-100 rounded-xl",children:r.jsx(td,{className:"h-5 w-5 text-purple-500"})}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("p",{className:"text-neutral-800 font-medium",children:"Push Notifications"}),r.jsx("span",{className:"px-2 py-0.5 bg-purple-100 text-purple-600 text-xs rounded-full font-medium",children:"Coming Soon"})]}),r.jsx("p",{className:"text-neutral-500 text-sm",children:"Real-time alerts on your device"})]})]}),r.jsx("button",{disabled:!0,className:"w-12 h-6 rounded-full bg-neutral-200 relative cursor-not-allowed opacity-50",children:r.jsx("div",{className:"absolute top-1 left-1 w-4 h-4 bg-white rounded-full shadow"})})]})]})]}),t==="settings"&&r.jsxs("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-2xl p-4",children:[r.jsx("h3",{className:"text-neutral-800 font-medium mb-3",children:"What You'll Receive"}),r.jsxs("ul",{className:"space-y-2 text-sm text-neutral-600",children:[r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx(Rt,{className:"h-4 w-4 text-blue-500 mt-0.5 flex-shrink-0"}),r.jsx("span",{children:"Pick reminders before deadlines"})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx(Rt,{className:"h-4 w-4 text-blue-500 mt-0.5 flex-shrink-0"}),r.jsx("span",{children:"Episode scoring results and standings updates"})]}),r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx(Rt,{className:"h-4 w-4 text-blue-500 mt-0.5 flex-shrink-0"}),r.jsx("span",{children:"League activity and member updates"})]})]})]})]})]})}function bte(){const{leagueId:e}=kn(),t=Kr(),n=zt(),[s,a]=C.useState([]),[i,l]=C.useState(!1),[u,d]=C.useState(null),{data:h}=se({queryKey:["current-user"],queryFn:async()=>{const{data:{user:H}}=await G.auth.getUser();return H}}),{data:p,isLoading:m}=se({queryKey:["league",e],queryFn:async()=>{if(!e)throw new Error("No league ID");const{data:H,error:R}=await G.from("leagues").select("*, seasons(*)").eq("id",e).single();if(R)throw R;return H},enabled:!!e}),{data:g,isLoading:y}=se({queryKey:["league-members",e],queryFn:async()=>{if(!e)throw new Error("No league ID");const{data:H,error:R}=await G.from("league_members").select("*, users(id, display_name, avatar_url)").eq("league_id",e).order("draft_position",{ascending:!0});if(R)throw R;const M=(H==null?void 0:H.map(O=>O.user_id))||[];return s.length===0&&M.length>0&&a(M),H||[]},enabled:!!e}),b=(h==null?void 0:h.id)===(p==null?void 0:p.commissioner_id),w=()=>{const H=[...s].sort(()=>Math.random()-.5);a(H),l(!0)},v=H=>{d(H)},j=(H,R)=>{if(H.preventDefault(),u===null||u===R)return;const M=[...s],[O]=M.splice(u,1);M.splice(R,0,O),a(M),d(R),l(!0)},E=()=>{d(null)},k=$e({mutationFn:async()=>{var F;if(!e)throw new Error("No league ID");const H=s.map((K,ae)=>G.from("league_members").update({draft_position:ae+1}).eq("league_id",e).eq("user_id",K)),M=(F=(await Promise.all(H)).find(K=>K.error))==null?void 0:F.error;if(M)throw M;const{error:O}=await G.from("leagues").update({draft_order:s}).eq("id",e);if(O)throw O},onSuccess:()=>{l(!1),n.invalidateQueries({queryKey:["league",e]}),n.invalidateQueries({queryKey:["league-members",e]})}}),S=$e({mutationFn:async()=>{if(!e)throw new Error("No league ID");const{error:H}=await G.from("leagues").update({draft_status:"in_progress",draft_started_at:new Date().toISOString(),status:"drafting"}).eq("id",e);if(H)throw H},onSuccess:()=>{n.invalidateQueries({queryKey:["league",e]}),t(`/leagues/${e}/draft`)}}),P=H=>g==null?void 0:g.find(R=>R.user_id===H),A=m||y,T=(p==null?void 0:p.draft_status)==="pending"&&g&&g.length>=2,L=(p==null?void 0:p.draft_status)!=="pending";return A?r.jsxs(r.Fragment,{children:[r.jsx(de,{}),r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center",children:r.jsx(ge,{className:"h-8 w-8 text-burgundy-500 animate-spin"})})]}):b?r.jsxs(r.Fragment,{children:[r.jsx(de,{}),r.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 p-4 pb-24",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx(Y,{to:`/leagues/${e}/settings`,className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:r.jsx(at,{className:"h-5 w-5 text-neutral-600"})}),r.jsxs("div",{children:[r.jsxs("h1",{className:"text-2xl font-display font-bold text-neutral-800 flex items-center gap-2",children:[r.jsx(Ip,{className:"h-6 w-6 text-burgundy-500"}),"Draft Settings"]}),r.jsx("p",{className:"text-neutral-500",children:p==null?void 0:p.name})]})]}),r.jsx("div",{className:`rounded-2xl p-4 mb-6 ${L?"bg-amber-50 border border-amber-200":"bg-green-50 border border-green-200"}`,children:r.jsxs("div",{className:"flex items-center gap-3",children:[L?r.jsx(ot,{className:"h-5 w-5 text-amber-600"}):r.jsx(Rt,{className:"h-5 w-5 text-green-600"}),r.jsxs("div",{children:[r.jsx("p",{className:`font-medium ${L?"text-amber-800":"text-green-800"}`,children:L?`Draft is ${p==null?void 0:p.draft_status}`:"Draft has not started yet"}),r.jsx("p",{className:`text-sm ${L?"text-amber-600":"text-green-600"}`,children:L?"Draft order cannot be changed after the draft begins.":"Set the draft order below before starting."})]})]})}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 mb-6",children:[r.jsxs("div",{className:"px-4 py-3 border-b border-cream-200 flex items-center justify-between",children:[r.jsxs("h2",{className:"text-lg font-display font-bold text-neutral-800 flex items-center gap-2",children:[r.jsx(Ye,{className:"h-5 w-5 text-burgundy-500"}),"Draft Order"]}),!L&&r.jsxs("button",{onClick:w,className:"flex items-center gap-2 px-3 py-1.5 bg-burgundy-100 hover:bg-burgundy-200 text-burgundy-700 rounded-lg text-sm transition-colors",children:[r.jsx(NQ,{className:"h-4 w-4"}),"Randomize"]})]}),r.jsx("div",{className:"divide-y divide-cream-100",children:s.map((H,R)=>{var F,K;const M=P(H),O=H===(h==null?void 0:h.id);return r.jsxs("div",{draggable:!L,onDragStart:()=>v(R),onDragOver:ae=>j(ae,R),onDragEnd:E,className:`flex items-center gap-3 px-4 py-3 ${L?"":"cursor-grab active:cursor-grabbing"} ${u===R?"bg-burgundy-50":""} ${O?"bg-burgundy-50/50":""}`,children:[!L&&r.jsx(qv,{className:"h-5 w-5 text-neutral-400 flex-shrink-0"}),r.jsx("div",{className:"w-8 h-8 bg-burgundy-500 rounded-full flex items-center justify-center text-white font-bold",children:R+1}),(F=M==null?void 0:M.users)!=null&&F.avatar_url?r.jsx("img",{src:M.users.avatar_url,alt:"",className:"w-10 h-10 rounded-full object-cover"}):r.jsx("div",{className:"w-10 h-10 bg-cream-100 rounded-full flex items-center justify-center border border-cream-200",children:r.jsx(Ye,{className:"h-5 w-5 text-neutral-400"})}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("p",{className:"text-neutral-800 font-medium flex items-center gap-2",children:[(K=M==null?void 0:M.users)==null?void 0:K.display_name,H===(p==null?void 0:p.commissioner_id)&&r.jsx($n,{className:"h-4 w-4 text-burgundy-500"})]}),O&&r.jsx("p",{className:"text-burgundy-500 text-sm",children:"You"})]}),r.jsxs("div",{className:"text-neutral-500 text-sm",children:["Pick ",R+1," & ",((g==null?void 0:g.length)||0)*2-R]})]},H)})}),(g==null?void 0:g.length)===0&&r.jsxs("div",{className:"p-8 text-center",children:[r.jsx(Ye,{className:"h-12 w-12 text-neutral-400 mx-auto mb-4"}),r.jsx("p",{className:"text-neutral-600",children:"No members yet."}),r.jsx("p",{className:"text-neutral-500 text-sm",children:"Invite players to join your league."})]})]}),r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-2xl p-4 mb-6",children:[r.jsxs("h3",{className:"text-neutral-800 font-medium mb-2 flex items-center gap-2",children:[r.jsx(ot,{className:"h-5 w-5 text-blue-500"}),"Snake Draft Format"]}),r.jsx("p",{className:"text-neutral-600 text-sm",children:"Each player drafts 2 castaways. Round 1 goes in order (1, 2, 3...), then Round 2 reverses (...3, 2, 1). This ensures fairness by giving later picks an earlier second pick."})]}),r.jsxs("div",{className:"space-y-3",children:[!L&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>k.mutate(),disabled:!i||k.isPending,className:"btn btn-primary w-full flex items-center justify-center gap-2",children:k.isPending?r.jsx(ge,{className:"h-5 w-5 animate-spin"}):r.jsxs(r.Fragment,{children:[r.jsx(bi,{className:"h-5 w-5"}),"Save Draft Order"]})}),r.jsx("button",{onClick:()=>{confirm("Are you sure you want to start the draft? This cannot be undone.")&&S.mutate()},disabled:!T||S.isPending||i,className:"w-full bg-green-600 hover:bg-green-500 disabled:bg-neutral-300 disabled:text-neutral-500 text-white font-bold py-3 rounded-xl transition-colors flex items-center justify-center gap-2",children:S.isPending?r.jsx(ge,{className:"h-5 w-5 animate-spin"}):"Start Draft Now"}),i&&r.jsx("p",{className:"text-amber-600 text-sm text-center",children:"Save your changes before starting the draft."})]}),L&&r.jsx(Y,{to:`/leagues/${e}/draft`,className:"btn btn-primary w-full flex items-center justify-center gap-2",children:"Go to Draft Room"})]})]})]}):r.jsxs(r.Fragment,{children:[r.jsx(de,{}),r.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 p-4 pb-24",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx(Y,{to:`/leagues/${e}`,className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:r.jsx(at,{className:"h-5 w-5 text-neutral-600"})}),r.jsx("h1",{className:"text-2xl font-display font-bold text-neutral-800",children:"Draft Settings"})]}),r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-8 text-center",children:[r.jsx(ot,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),r.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-2",children:"Access Denied"}),r.jsx("p",{className:"text-neutral-600",children:"Only the league creator can manage draft settings."})]})]})]})}function vte(){const{user:e}=yt(),t=zt(),[n,s]=C.useState([]),[a,i]=C.useState(!1),[l,u]=C.useState(null),[d,h]=C.useState(!1),[p,m]=C.useState(!1),{data:g}=se({queryKey:["active-season"],queryFn:async()=>{const{data:M,error:O}=await G.from("seasons").select("*").eq("is_active",!0).single();if(O)throw O;return M}}),{data:y,isLoading:b}=A4(g==null?void 0:g.id),{data:w,isLoading:v}=se({queryKey:["draft-rankings",g==null?void 0:g.id,e==null?void 0:e.id],queryFn:async()=>{if(!(g!=null&&g.id)||!(e!=null&&e.id))return null;const{data:M,error:O}=await G.from("draft_rankings").select("*").eq("season_id",g.id).eq("user_id",e.id).single();if(O&&O.code!=="PGRST116")throw O;return M},enabled:!!(g!=null&&g.id)&&!!(e!=null&&e.id)});C.useEffect(()=>{if(y&&y.length>0&&n.length===0)if(w!=null&&w.rankings&&Array.isArray(w.rankings))s(w.rankings);else{const M=y.map(O=>O.id);s(M)}},[y,w,n.length]);const j=$e({mutationFn:async()=>{if(!(g!=null&&g.id)||!(e!=null&&e.id))throw new Error("Missing season or user");const{error:M}=await G.from("draft_rankings").upsert({user_id:e.id,season_id:g.id,rankings:n,updated_at:new Date().toISOString()});if(M)throw M},onSuccess:()=>{t.invalidateQueries({queryKey:["draft-rankings",g==null?void 0:g.id,e==null?void 0:e.id]}),i(!1),m(!0),setTimeout(()=>m(!1),3e3)}}),E=C.useMemo(()=>{const M=new Map;return y==null||y.forEach(O=>M.set(O.id,O)),M},[y]),k=g!=null&&g.draft_deadline?new Date(g.draft_deadline):null,P=k?new Date>k:!1,A=M=>{if(M===0)return;const O=[...n];[O[M-1],O[M]]=[O[M],O[M-1]],s(O),i(!0)},T=M=>{if(M===n.length-1)return;const O=[...n];[O[M],O[M+1]]=[O[M+1],O[M]],s(O),i(!0)},L=M=>u(M),H=(M,O)=>{if(M.preventDefault(),l===null||l===O)return;const F=[...n],[K]=F.splice(l,1);F.splice(O,0,K),s(F),u(O),i(!0)},R=()=>u(null);return v||b?r.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex flex-col",children:[r.jsx(de,{}),r.jsx("main",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8 flex-1 flex items-center justify-center",children:r.jsx(ge,{className:"h-8 w-8 text-burgundy-500 animate-spin"})}),r.jsx(Qt,{})]}):g?r.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex flex-col",children:[r.jsx(de,{}),r.jsxs("main",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8 flex-1",children:[r.jsxs("div",{className:"mb-6",children:[r.jsxs(Y,{to:"/dashboard",className:"inline-flex items-center gap-2 text-neutral-600 hover:text-neutral-800 mb-4",children:[r.jsx(at,{className:"h-4 w-4"}),"Back to Dashboard"]}),r.jsx("h1",{className:"text-3xl font-display font-bold text-neutral-800 mb-2",children:"Global Draft Rankings"}),r.jsxs("p",{className:"text-neutral-500",children:["Rank all castaways for Season ",g.number,". This ranking will be used for all your leagues this season."]})]}),k&&r.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-xl p-4 mb-6 flex items-center gap-3",children:[r.jsx(Ln,{className:"h-5 w-5 text-orange-600 flex-shrink-0"}),r.jsxs("div",{children:[r.jsxs("p",{className:"text-orange-800 font-medium",children:["Draft Deadline: ",k.toLocaleDateString()," at"," ",k.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),P&&r.jsx("p",{className:"text-orange-600 text-sm mt-1",children:"Deadline has passed"})]})]}),p&&r.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4 mb-6 flex items-center gap-3",children:[r.jsx(Rt,{className:"h-5 w-5 text-green-600"}),r.jsx("p",{className:"text-green-800 font-medium",children:"Rankings saved successfully!"})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 overflow-hidden",children:[r.jsxs("div",{className:"p-6 border-b border-cream-100 flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-semibold text-neutral-800",children:"Your Rankings"}),r.jsx("p",{className:"text-sm text-neutral-500 mt-1",children:"Drag to reorder or use the arrows to move castaways up/down"})]}),r.jsx("button",{onClick:()=>{a?h(!0):j.mutate()},disabled:!a||j.isPending,className:"btn btn-primary flex items-center gap-2 disabled:opacity-50",children:j.isPending?r.jsxs(r.Fragment,{children:[r.jsx(ge,{className:"h-4 w-4 animate-spin"}),"Saving..."]}):r.jsxs(r.Fragment,{children:[r.jsx(bi,{className:"h-4 w-4"}),"Save Rankings"]})})]}),r.jsx("div",{className:"divide-y divide-cream-100",children:n.map((M,O)=>{const F=E.get(M);return F?r.jsxs("div",{draggable:!0,onDragStart:()=>L(O),onDragOver:K=>H(K,O),onDragEnd:R,className:`flex items-center gap-4 p-4 hover:bg-cream-50 transition-colors ${l===O?"opacity-50":""}`,children:[r.jsx(qv,{className:"h-5 w-5 text-neutral-400 cursor-move"}),r.jsx("div",{className:"w-12 text-center",children:r.jsxs("span",{className:"text-lg font-bold text-neutral-600",children:["#",O+1]})}),r.jsx("img",{src:F.photo_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${F.name}`,alt:F.name,className:"w-12 h-12 rounded-full object-cover"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-semibold text-neutral-800",children:F.name}),F.occupation&&r.jsx("p",{className:"text-sm text-neutral-500",children:F.occupation})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>A(O),disabled:O===0,className:"p-2 rounded-lg hover:bg-cream-100 disabled:opacity-30 disabled:cursor-not-allowed",children:""}),r.jsx("button",{onClick:()=>T(O),disabled:O===n.length-1,className:"p-2 rounded-lg hover:bg-cream-100 disabled:opacity-30 disabled:cursor-not-allowed",children:""})]})]},M):null})})]}),d&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl p-6 max-w-lg w-full max-h-[90vh] flex flex-col",children:[r.jsx("h3",{className:"text-xl font-semibold text-neutral-800 mb-2",children:"Confirm Your Rankings"}),r.jsx("p",{className:"text-neutral-600 mb-4 text-sm",children:"This will update your global draft rankings for all leagues this season."}),r.jsx("div",{className:"flex-1 overflow-y-auto mb-4 border border-cream-200 rounded-xl",children:r.jsx("div",{className:"divide-y divide-cream-100",children:n.map((M,O)=>{const F=E.get(M);if(!F)return null;const K=O<2;return r.jsxs("div",{className:`flex items-center gap-3 p-3 ${K?"bg-amber-50":O%2===0?"bg-white":"bg-cream-50"}`,children:[r.jsxs("span",{className:`w-8 text-center font-bold ${K?"text-amber-600":"text-neutral-500"}`,children:["#",O+1]}),r.jsx("img",{src:F.photo_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${F.name}`,alt:F.name,className:"w-8 h-8 rounded-full object-cover"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:`font-medium truncate ${K?"text-amber-800":"text-neutral-800"}`,children:F.name}),F.tribe_original&&r.jsx("p",{className:"text-xs text-neutral-500",children:F.tribe_original})]}),K&&r.jsx("span",{className:"text-xs bg-amber-200 text-amber-800 px-2 py-0.5 rounded-full font-medium",children:"Top Pick"})]},M)})})}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>{h(!1),j.mutate()},className:"flex-1 btn btn-primary",children:"Confirm & Save"}),r.jsx("button",{onClick:()=>h(!1),className:"flex-1 btn btn-secondary",children:"Go Back"})]})]})})]}),r.jsx(Qt,{})]}):r.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex flex-col",children:[r.jsx(de,{}),r.jsx("main",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8 flex-1 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx(ot,{className:"h-12 w-12 text-neutral-400 mx-auto mb-4"}),r.jsx("h2",{className:"text-xl font-bold text-neutral-700 mb-2",children:"No Active Season"}),r.jsx("p",{className:"text-neutral-500",children:"Check back when a new season begins!"})]})}),r.jsx(Qt,{})]})}function wte(){const{leagueId:e}=kn(),[t,n]=C.useState(!1),[s,a]=C.useState(!1),{data:i}=se({queryKey:["current-user"],queryFn:async()=>{const{data:{user:b}}=await G.auth.getUser();return b}}),{data:l,isLoading:u}=se({queryKey:["league",e],queryFn:async()=>{if(!e)throw new Error("No league ID");const{data:b,error:w}=await G.from("leagues").select("*, seasons(*)").eq("id",e).single();if(w)throw w;return b},enabled:!!e}),{data:d}=se({queryKey:["league-member-count",e],queryFn:async()=>{if(!e)throw new Error("No league ID");const{count:b,error:w}=await G.from("league_members").select("*",{count:"exact",head:!0}).eq("league_id",e);if(w)throw w;return b||0},enabled:!!e}),h=(i==null?void 0:i.id)===(l==null?void 0:l.commissioner_id),p=`${window.location.origin}/join/${l==null?void 0:l.code}`,m=((l==null?void 0:l.max_players)||12)-(d||0),g=async()=>{await navigator.clipboard.writeText(p),n(!0),setTimeout(()=>n(!1),2e3)},y=async()=>{var b,w;if(navigator.share)try{await navigator.share({title:`Join ${l==null?void 0:l.name}`,text:`Join my Survivor Fantasy league! Season ${(b=l==null?void 0:l.seasons)==null?void 0:b.number}: ${(w=l==null?void 0:l.seasons)==null?void 0:w.name}`,url:p})}catch{g()}else g()};return u?r.jsxs(r.Fragment,{children:[r.jsx(de,{}),r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center",children:r.jsx(ge,{className:"h-8 w-8 text-burgundy-500 animate-spin"})})]}):h?r.jsxs(r.Fragment,{children:[r.jsx(de,{}),r.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 p-4 pb-24",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx(Y,{to:`/leagues/${e}/settings`,className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:r.jsx(at,{className:"h-5 w-5 text-neutral-600"})}),r.jsxs("div",{children:[r.jsxs("h1",{className:"text-2xl font-display font-bold text-neutral-800 flex items-center gap-2",children:[r.jsx(FJ,{className:"h-6 w-6 text-burgundy-500"}),"Invite Link"]}),r.jsx("p",{className:"text-neutral-500",children:l==null?void 0:l.name})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-4 border border-cream-200",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(Ye,{className:"h-5 w-5 text-burgundy-500"}),r.jsx("span",{className:"text-neutral-500 text-sm",children:"Members"})]}),r.jsxs("p",{className:"text-2xl font-bold text-neutral-800",children:[d,"/",l==null?void 0:l.max_players]})]}),r.jsxs("div",{className:`rounded-2xl p-4 border ${m>0?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx($n,{className:"h-5 w-5 text-burgundy-500"}),r.jsx("span",{className:"text-neutral-500 text-sm",children:"Spots Left"})]}),r.jsx("p",{className:`text-2xl font-bold ${m>0?"text-green-600":"text-red-600"}`,children:m})]})]}),r.jsxs("div",{className:"bg-burgundy-50 border border-burgundy-200 rounded-2xl p-6 mb-6 text-center",children:[r.jsx("p",{className:"text-burgundy-600 text-sm mb-2",children:"League Code"}),r.jsx("p",{className:"text-4xl font-mono font-bold text-burgundy-500 tracking-widest mb-4",children:l==null?void 0:l.code}),r.jsx("p",{className:"text-neutral-600 text-sm",children:"Share this code with friends to join your league"})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-4 border border-cream-200 mb-6",children:[r.jsx("p",{className:"text-neutral-500 text-sm mb-2",children:"Invite URL"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",value:p,readOnly:!0,className:"input flex-1 font-mono text-sm"}),r.jsx("button",{onClick:g,className:`px-4 py-2 rounded-xl font-medium transition-colors flex items-center gap-2 ${t?"bg-green-500 text-white":"bg-burgundy-500 hover:bg-burgundy-600 text-white"}`,children:t?r.jsxs(r.Fragment,{children:[r.jsx(Rt,{className:"h-4 w-4"}),"Copied!"]}):r.jsxs(r.Fragment,{children:[r.jsx(Np,{className:"h-4 w-4"}),"Copy"]})})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[r.jsxs("button",{onClick:y,className:"btn btn-primary flex items-center justify-center gap-2",children:[r.jsx(Pp,{className:"h-5 w-5"}),"Share Invite"]}),r.jsxs("button",{onClick:()=>a(!s),className:"btn btn-secondary flex items-center justify-center gap-2",children:[r.jsx(ck,{className:"h-5 w-5"}),s?"Hide QR":"Show QR"]})]}),s&&r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-8 mb-6 text-center border border-cream-200",children:[r.jsx("div",{className:"w-48 h-48 mx-auto bg-cream-50 rounded-xl flex items-center justify-center border border-cream-200",children:r.jsx(ck,{className:"h-24 w-24 text-neutral-400"})}),r.jsxs("p",{className:"text-neutral-600 text-sm mt-4",children:["Scan to join ",l==null?void 0:l.name]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200",children:[r.jsx("div",{className:"px-4 py-3 border-b border-cream-200",children:r.jsx("h2",{className:"text-neutral-800 font-medium",children:"Join Requirements"})}),r.jsxs("div",{className:"divide-y divide-cream-100",children:[r.jsxs("div",{className:"px-4 py-3 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Dn,{className:"h-5 w-5 text-neutral-400"}),r.jsx("span",{className:"text-neutral-800",children:"Password Protected"})]}),r.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs ${l!=null&&l.password_hash?"bg-amber-100 text-amber-700":"bg-green-100 text-green-700"}`,children:l!=null&&l.password_hash?"Yes":"No"})]}),r.jsxs("div",{className:"px-4 py-3 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(yi,{className:"h-5 w-5 text-neutral-400"}),r.jsx("span",{className:"text-neutral-800",children:"Public League"})]}),r.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs ${l!=null&&l.is_public?"bg-green-100 text-green-700":"bg-neutral-100 text-neutral-600"}`,children:l!=null&&l.is_public?"Yes":"No"})]}),(l==null?void 0:l.require_donation)&&r.jsxs("div",{className:"px-4 py-3 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx($n,{className:"h-5 w-5 text-burgundy-500"}),r.jsx("span",{className:"text-neutral-800",children:"Entry Fee"})]}),r.jsxs("span",{className:"text-burgundy-500 font-bold",children:["$",l.donation_amount]})]})]})]}),r.jsxs("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-2xl p-4",children:[r.jsxs("h3",{className:"text-neutral-800 font-medium mb-2 flex items-center gap-2",children:[r.jsx(ot,{className:"h-5 w-5 text-blue-500"}),"Invite Tips"]}),r.jsxs("ul",{className:"space-y-2 text-sm text-neutral-600",children:[r.jsx("li",{children:" Share the invite link via text, email, or social media"}),r.jsx("li",{children:" New members must create an account to join"}),r.jsx("li",{children:" The league code can be entered manually at /join"}),(l==null?void 0:l.require_donation)&&r.jsxs("li",{children:[" Members will need to pay the $",l.donation_amount," entry fee via Stripe"]})]})]}),r.jsx("div",{className:"mt-6",children:r.jsx(Y,{to:`/leagues/${e}/settings`,className:"btn btn-secondary w-full flex items-center justify-center gap-2",children:"Manage League Settings"})})]})]}):r.jsxs(r.Fragment,{children:[r.jsx(de,{}),r.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 p-4 pb-24",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx(Y,{to:`/leagues/${e}`,className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:r.jsx(at,{className:"h-5 w-5 text-neutral-600"})}),r.jsx("h1",{className:"text-2xl font-display font-bold text-neutral-800",children:"Invite Link"})]}),r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-8 text-center",children:[r.jsx(ot,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),r.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-2",children:"Access Denied"}),r.jsx("p",{className:"text-neutral-600",children:"Only the league creator can manage invites."})]})]})]})}function _te(){return r.jsxs("div",{className:"min-h-screen bg-cream-50 flex flex-col",children:[r.jsx(de,{}),r.jsxs("div",{className:"flex-1 max-w-4xl mx-auto px-6 py-12",children:[r.jsxs("div",{className:"mb-8",children:[r.jsxs(Y,{to:"/",className:"inline-flex items-center gap-2 text-burgundy-600 hover:text-burgundy-700 mb-4",children:[r.jsx(at,{className:"h-4 w-4"}),"Back to Home"]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(vi,{className:"h-8 w-8 text-burgundy-500"}),r.jsx("h1",{className:"text-3xl font-display font-bold text-neutral-800",children:"Privacy Policy"})]}),r.jsx("p",{className:"text-neutral-500 mt-2",children:"Last updated: December 26, 2025"})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-8 border border-cream-200 space-y-8",children:[r.jsxs("section",{children:[r.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-3",children:"1. Information We Collect"}),r.jsx("p",{className:"text-neutral-600 mb-3",children:"We collect information you provide directly to us when you:"}),r.jsxs("ul",{className:"list-disc list-inside text-neutral-600 space-y-2 ml-4",children:[r.jsx("li",{children:"Create an account (email address, display name)"}),r.jsx("li",{children:"Add a phone number for SMS notifications"}),r.jsx("li",{children:"Make payments for league entry fees"}),r.jsx("li",{children:"Participate in leagues, drafts, and weekly picks"}),r.jsx("li",{children:"Contact us for support"})]})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-3",children:"2. How We Use Your Information"}),r.jsx("p",{className:"text-neutral-600 mb-3",children:"We use the information we collect to:"}),r.jsxs("ul",{className:"list-disc list-inside text-neutral-600 space-y-2 ml-4",children:[r.jsx("li",{children:"Provide, maintain, and improve our services"}),r.jsx("li",{children:"Process transactions and send related information"}),r.jsx("li",{children:"Send you notifications about picks, scores, and league activity"}),r.jsx("li",{children:"Respond to your comments, questions, and support requests"}),r.jsx("li",{children:"Monitor and analyze trends, usage, and activities"})]})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-3",children:"3. Information Sharing"}),r.jsx("p",{className:"text-neutral-600 mb-3",children:"We do not sell, trade, or rent your personal information to third parties. We may share your information in the following circumstances:"}),r.jsxs("ul",{className:"list-disc list-inside text-neutral-600 space-y-2 ml-4",children:[r.jsx("li",{children:"With other league members (display name, picks, scores)"}),r.jsx("li",{children:"With service providers who assist in our operations (Stripe for payments, Twilio for SMS)"}),r.jsx("li",{children:"If required by law or to protect our rights"})]})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-3",children:"4. Data Security"}),r.jsx("p",{className:"text-neutral-600",children:"We take reasonable measures to help protect your personal information from loss, theft, misuse, unauthorized access, disclosure, alteration, and destruction. Your data is stored securely using industry-standard encryption and access controls."})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-3",children:"5. Your Choices"}),r.jsx("p",{className:"text-neutral-600 mb-3",children:"You may:"}),r.jsxs("ul",{className:"list-disc list-inside text-neutral-600 space-y-2 ml-4",children:[r.jsx("li",{children:"Update your account information at any time in your Profile"}),r.jsx("li",{children:"Opt out of promotional communications"}),r.jsx("li",{children:"Choose which notifications you receive (email, SMS, push)"}),r.jsx("li",{children:"Request deletion of your account by contacting us"})]})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-3",children:"6. Cookies and Tracking"}),r.jsx("p",{className:"text-neutral-600",children:"We use cookies and similar technologies to maintain your session, remember your preferences, and understand how you interact with our service. You can control cookies through your browser settings."})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-3",children:"7. Children's Privacy"}),r.jsx("p",{className:"text-neutral-600",children:"Our service is not directed to children under 13. We do not knowingly collect personal information from children under 13. If you believe we have collected information from a child under 13, please contact us."})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-3",children:"8. Changes to This Policy"}),r.jsx("p",{className:"text-neutral-600",children:'We may update this Privacy Policy from time to time. We will notify you of any changes by posting the new Privacy Policy on this page and updating the "Last updated" date.'})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-3",children:"9. Contact Us"}),r.jsxs("p",{className:"text-neutral-600",children:["If you have any questions about this Privacy Policy, please contact us at"," ",r.jsx(Y,{to:"/contact",className:"text-burgundy-600 hover:text-burgundy-700 underline",children:"our contact page"}),"."]})]})]})]}),r.jsx(Qt,{})]})}function jte(){return r.jsxs("div",{className:"min-h-screen bg-cream-50 flex flex-col",children:[r.jsx(de,{}),r.jsxs("div",{className:"flex-1 max-w-4xl mx-auto px-6 py-12",children:[r.jsxs("div",{className:"mb-8",children:[r.jsxs(Y,{to:"/",className:"inline-flex items-center gap-2 text-burgundy-600 hover:text-burgundy-700 mb-4",children:[r.jsx(at,{className:"h-4 w-4"}),"Back to Home"]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Sp,{className:"h-8 w-8 text-burgundy-500"}),r.jsx("h1",{className:"text-3xl font-display font-bold text-neutral-800",children:"Terms of Service"})]}),r.jsx("p",{className:"text-neutral-500 mt-2",children:"Last updated: December 26, 2025"})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-8 border border-cream-200 space-y-8",children:[r.jsxs("section",{children:[r.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-3",children:"1. Acceptance of Terms"}),r.jsx("p",{className:"text-neutral-600",children:'By accessing or using Reality Games Survivor Fantasy League ("the Service"), you agree to be bound by these Terms of Service. If you do not agree to these terms, please do not use the Service.'})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-3",children:"2. Description of Service"}),r.jsx("p",{className:"text-neutral-600",children:'Reality Games Survivor Fantasy League is a fantasy sports platform where users draft castaways from the CBS television show "Survivor," make weekly picks, and compete in leagues based on castaway performance. This is a fan-made fantasy game and is not affiliated with, endorsed by, or sponsored by CBS, Survivor, or any related entities.'})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-3",children:"3. User Accounts"}),r.jsx("p",{className:"text-neutral-600 mb-3",children:"To use certain features of the Service, you must create an account. You agree to:"}),r.jsxs("ul",{className:"list-disc list-inside text-neutral-600 space-y-2 ml-4",children:[r.jsx("li",{children:"Provide accurate and complete information"}),r.jsx("li",{children:"Maintain the security of your account credentials"}),r.jsx("li",{children:"Notify us immediately of any unauthorized access"}),r.jsx("li",{children:"Accept responsibility for all activities under your account"})]})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-3",children:"4. League Entry Fees and Payments"}),r.jsx("p",{className:"text-neutral-600 mb-3",children:'Some leagues may require entry fees ("donations"). By joining a paid league:'}),r.jsxs("ul",{className:"list-disc list-inside text-neutral-600 space-y-2 ml-4",children:[r.jsx("li",{children:"You authorize us to process payment through Stripe"}),r.jsx("li",{children:"Refunds are available only if you leave before the draft begins"}),r.jsx("li",{children:"Site administrators have final discretion on all league payouts and prize distribution"})]})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-3",children:"5. Mobile and Device Usage"}),r.jsx("p",{className:"text-neutral-600 mb-3",children:"The Service is designed to be accessible on mobile devices, tablets, and desktop computers. By using the Service on any device:"}),r.jsxs("ul",{className:"list-disc list-inside text-neutral-600 space-y-2 ml-4",children:[r.jsx("li",{children:"You are responsible for ensuring your device meets minimum technical requirements"}),r.jsx("li",{children:"You are responsible for any data charges incurred through your mobile carrier"}),r.jsx("li",{children:"We are not responsible for device-specific issues or compatibility problems"}),r.jsx("li",{children:"Some features may be optimized for specific screen sizes or device types"}),r.jsx("li",{children:"You agree to use the Service in compliance with your device's terms of service"})]})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-3",children:"6. User Conduct"}),r.jsx("p",{className:"text-neutral-600 mb-3",children:"You agree not to:"}),r.jsxs("ul",{className:"list-disc list-inside text-neutral-600 space-y-2 ml-4",children:[r.jsx("li",{children:"Use the Service for any unlawful purpose"}),r.jsx("li",{children:"Harass, abuse, or harm other users"}),r.jsx("li",{children:"Attempt to gain unauthorized access to the Service"}),r.jsx("li",{children:"Interfere with or disrupt the Service"}),r.jsx("li",{children:"Create multiple accounts to gain unfair advantages"}),r.jsx("li",{children:"Use automated scripts or bots"})]})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-3",children:"7. Scoring and Game Rules"}),r.jsx("p",{className:"text-neutral-600",children:"Scoring is determined by our proprietary system based on castaway actions during each episode. We reserve the right to adjust scores if errors are discovered. All scoring decisions are final. Picks must be submitted before the posted deadline; late picks may be auto-filled."})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-3",children:"8. Intellectual Property"}),r.jsx("p",{className:"text-neutral-600",children:'The Service and its original content, features, and functionality are owned by Reality Games Fantasy League and are protected by copyright, trademark, and other intellectual property laws. "Survivor" is a trademark of CBS. We are not affiliated with CBS.'})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-3",children:"9. Disclaimer of Warranties"}),r.jsx("p",{className:"text-neutral-600",children:'THE SERVICE IS PROVIDED "AS IS" AND "AS AVAILABLE" WITHOUT WARRANTIES OF ANY KIND, EXPRESS OR IMPLIED. WE DO NOT GUARANTEE THAT THE SERVICE WILL BE UNINTERRUPTED, SECURE, OR ERROR-FREE.'})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-3",children:"10. Limitation of Liability"}),r.jsx("p",{className:"text-neutral-600",children:"TO THE MAXIMUM EXTENT PERMITTED BY LAW, WE SHALL NOT BE LIABLE FOR ANY INDIRECT, INCIDENTAL, SPECIAL, CONSEQUENTIAL, OR PUNITIVE DAMAGES ARISING FROM YOUR USE OF THE SERVICE, INCLUDING LOSS OF PROFITS, DATA, OR PRIZES."})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-3",children:"11. Termination"}),r.jsx("p",{className:"text-neutral-600",children:"We may terminate or suspend your account at any time for violations of these Terms or for any other reason at our discretion. Upon termination, your right to use the Service will immediately cease."})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-3",children:"12. Changes to Terms"}),r.jsx("p",{className:"text-neutral-600",children:"We reserve the right to modify these Terms at any time. We will provide notice of significant changes by posting the updated Terms on this page. Your continued use of the Service after changes constitutes acceptance of the new Terms."})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-3",children:"13. Contact Us"}),r.jsxs("p",{className:"text-neutral-600",children:["If you have any questions about these Terms, please contact us at"," ",r.jsx(Y,{to:"/contact",className:"text-burgundy-600 hover:text-burgundy-700 underline",children:"our contact page"}),"."]})]})]})]}),r.jsx(Qt,{})]})}function Nte(){return r.jsxs("div",{className:"text-center mb-12",children:[r.jsxs("div",{className:"flex items-center justify-center gap-3 mb-6",children:[r.jsx(Mn,{className:"h-12 w-12 text-burgundy-500"}),r.jsx("h1",{className:"text-5xl md:text-6xl font-display font-bold text-neutral-800",children:"Survivor Trivia Challenge"})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-8 border-2 border-burgundy-200 mb-8 max-w-3xl mx-auto",children:[r.jsx("h2",{className:"text-2xl font-display font-bold text-burgundy-600 mb-6",children:"How It Works"}),r.jsxs("div",{className:"space-y-4 text-left",children:[r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"w-8 h-8 bg-burgundy-100 rounded-full flex items-center justify-center flex-shrink-0 mt-1",children:r.jsx("span",{className:"text-burgundy-600 font-bold",children:"1"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-neutral-800 mb-1",children:"Answer All 24 Questions"}),r.jsx("p",{className:"text-neutral-600 text-sm",children:"You can answer all 24 questions in one day if you get them all right. Prove you're a true Survivor fan!"})]})]}),r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center flex-shrink-0 mt-1",children:r.jsx(Ln,{className:"h-4 w-4 text-red-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-neutral-800 mb-1",children:"20 Seconds Per Question"}),r.jsx("p",{className:"text-neutral-600 text-sm",children:"Each question has a 20-second timer. Time runs out? That counts as wrong."})]})]}),r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center flex-shrink-0 mt-1",children:r.jsx(Dn,{className:"h-4 w-4 text-red-600"})}),r.jsxs("div",{children:[r.jsxs("p",{className:"font-semibold text-neutral-800 mb-1",children:["Get One Wrong? ",r.jsx("span",{className:"text-red-600",children:"It's Time For You To Go"})]}),r.jsx("p",{className:"text-neutral-600 text-sm",children:"Miss a question or run out of time? You're locked out for 24 hours. Come back tomorrow to continue."})]})]}),r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"w-8 h-8 bg-burgundy-100 rounded-full flex items-center justify-center flex-shrink-0 mt-1",children:r.jsx(rt,{className:"h-4 w-4 text-burgundy-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-neutral-800 mb-1",children:"Leaderboard Tracks Your Progress"}),r.jsx("p",{className:"text-neutral-600 text-sm",children:"See how many days it took you to complete all 24 questions. Fastest completion wins!"})]})]})]})]})]})}function Ste({questionsAnswered:e,totalQuestions:t,questionsCorrect:n}){return r.jsxs("div",{className:"mb-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("span",{className:"text-sm font-medium text-neutral-600",children:["Progress: ",e," / ",t," questions"]}),r.jsxs("span",{className:"text-sm font-medium text-burgundy-600",children:["Correct: ",n]})]}),r.jsx("div",{className:"w-full bg-cream-200 rounded-full h-3",children:r.jsx("div",{className:"bg-gradient-to-r from-burgundy-500 to-red-600 h-3 rounded-full transition-all duration-300",style:{width:`${e/t*100}%`}})})]})}function kte({lockedUntil:e}){const t=()=>{const n=new Date,a=new Date(e).getTime()-n.getTime();if(a<=0)return null;const i=Math.floor(a/(1e3*60*60)),l=Math.floor(a%(1e3*60*60)/(1e3*60));return`${i}h ${l}m`};return r.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-red-100 border-4 border-red-400 rounded-2xl p-8 mb-8 text-center shadow-lg",children:[r.jsx("div",{className:"text-6xl mb-4",children:""}),r.jsx("h2",{className:"text-4xl font-display font-bold text-red-800 mb-4",children:"It's Time For You To Go"}),r.jsx("p",{className:"text-xl text-red-700 mb-2 font-semibold",children:"The tribe has spoken."}),r.jsxs("p",{className:"text-lg text-red-600 mb-6",children:["You got a question wrong. Come back in"," ",r.jsx("strong",{className:"text-2xl",children:t()||"24 hours"})," to continue."]}),r.jsxs("p",{className:"text-sm text-red-500 mb-6",children:["Lockout expires: ",Bf(e)]}),r.jsxs(Y,{to:"/dashboard",className:"inline-flex items-center gap-2 px-8 py-4 bg-burgundy-600 text-white font-bold rounded-xl hover:bg-burgundy-700 transition-colors shadow-md text-lg",children:["Join a League While You Wait",r.jsx(Sr,{className:"h-5 w-5"})]})]})}function Ete({daysToComplete:e}){return r.jsxs("div",{className:"bg-green-50 border-2 border-green-300 rounded-2xl p-8 mb-8 text-center",children:[r.jsx(rt,{className:"h-12 w-12 text-green-600 mx-auto mb-4"}),r.jsx("h3",{className:"text-2xl font-display font-bold text-green-800 mb-2",children:"Congratulations! You Completed All 24 Questions!"}),r.jsxs("p",{className:"text-green-700 text-lg mb-4",children:["You finished in"," ",r.jsxs("strong",{children:[e," day",e!==1?"s":""]})]}),r.jsx(Y,{to:"/dashboard",className:"inline-block bg-green-600 text-white font-bold px-8 py-3 rounded-xl hover:bg-green-700 transition-colors",children:"Join a League Now"})]})}function Cte({question:e,totalQuestions:t,timeRemaining:n,selectedIndex:s,showResult:a,isCorrect:i,isTimedOut:l,alreadyAnswered:u,userAnswer:d,correctIndex:h,funFact:p,wrongMessage:m,isPending:g,onAnswer:y}){return r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-8 border-2 border-burgundy-200",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("div",{children:r.jsxs("h2",{className:"text-xl font-display font-bold text-neutral-800",children:["Question ",e.questionNumber," of ",t]})}),!u&&!a&&r.jsxs("div",{className:"flex items-center gap-2 bg-red-50 border-2 border-red-300 rounded-xl px-4 py-2",children:[r.jsx(Ln,{className:"h-5 w-5 text-red-600"}),r.jsxs("span",{className:"font-bold text-red-700 text-lg",children:[n,"s"]})]})]}),r.jsx("p",{className:"text-2xl font-display font-bold text-neutral-800 mb-6",children:e.question}),r.jsx("div",{className:"space-y-3 mb-6",children:e.options.map((b,w)=>{const v=s===w||(d==null?void 0:d.selectedIndex)===w,j=a||u,E=v,k=j&&w===h;let S="w-full text-left p-4 rounded-xl border-2 transition-all ";return u?E?S+=d!=null&&d.isCorrect?"bg-green-50 border-green-300 text-green-800":"bg-red-50 border-red-300 text-red-800":k?S+="bg-green-50 border-green-300 text-green-800":S+="bg-neutral-50 border-cream-200 text-neutral-600":a?v?S+=i?"bg-green-50 border-green-300 text-green-800":"bg-red-50 border-red-300 text-red-800":k?S+="bg-green-50 border-green-300 text-green-800":S+="bg-neutral-50 border-cream-200 text-neutral-600":S+="bg-neutral-50 border-cream-200 text-neutral-700 hover:border-burgundy-300 hover:bg-cream-50 cursor-pointer",r.jsx("button",{onClick:()=>y(w),disabled:u||a||l||g,className:S,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{children:b}),a||u?r.jsxs(r.Fragment,{children:[E&&r.jsx("span",{className:"ml-2",children:d!=null&&d.isCorrect||i?r.jsx(Rt,{className:"h-5 w-5 text-green-600"}):r.jsx(Sn,{className:"h-5 w-5 text-red-600"})}),!E&&k&&r.jsx(Rt,{className:"h-5 w-5 text-green-600 ml-2"})]}):null]})},w)})}),(a||u)&&p&&r.jsx("div",{className:`p-6 rounded-xl mb-6 ${d!=null&&d.isCorrect||i?"bg-green-50 border-2 border-green-300":"bg-red-50 border-2 border-red-300"}`,children:i?r.jsxs(r.Fragment,{children:[r.jsxs("p",{className:"text-lg font-bold text-green-800 mb-2 flex items-center gap-2",children:[r.jsx("span",{className:"text-2xl",children:""})," Correct!"]}),r.jsx("p",{className:"text-sm text-neutral-700",children:p})]}):r.jsxs(r.Fragment,{children:[r.jsxs("p",{className:"text-2xl font-bold text-red-800 mb-3 text-center",children:[" ",m]}),r.jsxs("p",{className:"text-sm text-red-700 text-center mb-2",children:["Correct answer:"," ",r.jsx("span",{className:"font-semibold",children:e.options[h]})]}),r.jsx("p",{className:"text-sm text-neutral-700 mb-3",children:p}),r.jsx("div",{className:"bg-red-100 border border-red-300 rounded-lg p-3 mt-3",children:r.jsx("p",{className:"text-sm font-semibold text-red-800 text-center",children:" You're locked out for 24 hours. Come back tomorrow to continue."})})]})}),l&&!a&&r.jsx("div",{className:"p-4 bg-yellow-50 border-2 border-yellow-300 rounded-xl mb-6",children:r.jsxs("p",{className:"text-sm font-medium text-yellow-800 text-center",children:[" Time's up! ",m]})})]})}function Tte(){return r.jsxs("div",{className:"mt-8 bg-gradient-to-r from-burgundy-500 to-red-600 rounded-2xl p-8 text-white text-center shadow-lg",children:[r.jsx(rt,{className:"h-12 w-12 mx-auto mb-4"}),r.jsx("h3",{className:"text-2xl font-display font-bold mb-2",children:"Ready to Play for Real?"}),r.jsx("p",{className:"text-burgundy-100 mb-6 max-w-lg mx-auto",children:"Join Season 50 and compete in fantasy leagues. Draft castaways, make weekly picks, and prove you're the ultimate Survivor fan!"}),r.jsx(Y,{to:"/dashboard",className:"inline-block bg-white text-burgundy-600 font-bold px-8 py-4 rounded-xl hover:bg-cream-100 transition-colors",children:"Join a League Now"})]})}function Rte({isOpen:e,onClose:t,accessToken:n,currentUserId:s,title:a,subtitle:i,isCompletion:l=!1}){const{data:u,isLoading:d}=se({queryKey:["trivia","leaderboard"],queryFn:async()=>{const g=await ut("/trivia/leaderboard",n);if(g.error)throw new Error(g.error);return g.data},enabled:e&&!!n});if(!e)return null;const h=(u==null?void 0:u.leaderboard)||[],p=g=>g===1?r.jsx(rt,{className:"h-5 w-5 text-yellow-500"}):g===2?r.jsx(lr,{className:"h-5 w-5 text-gray-400"}):g===3?r.jsx(lr,{className:"h-5 w-5 text-amber-600"}):r.jsx("span",{className:"text-neutral-500 font-mono text-sm",children:g}),m=h.find(g=>g.userId===s);return r.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[r.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:t}),r.jsxs("div",{className:`relative rounded-2xl shadow-2xl max-w-lg w-full max-h-[85vh] overflow-hidden ${l?"bg-gradient-to-b from-yellow-900/90 to-neutral-900 border border-yellow-500/30":"bg-gradient-to-b from-neutral-900 to-neutral-800 border border-orange-500/30"}`,children:[r.jsx("div",{className:`absolute top-0 left-0 right-0 h-32 pointer-events-none ${l?"bg-gradient-to-b from-yellow-500/20 to-transparent":"bg-gradient-to-b from-orange-600/20 to-transparent"}`}),r.jsx("button",{onClick:t,className:"absolute top-4 right-4 p-2 text-neutral-400 hover:text-white transition-colors z-10",children:r.jsx(Sn,{className:"h-5 w-5"})}),r.jsxs("div",{className:"relative px-6 pt-8 pb-4 text-center",children:[r.jsx("div",{className:"flex justify-center mb-4",children:r.jsx("div",{className:"relative",children:l?r.jsxs(r.Fragment,{children:[r.jsx(rt,{className:"h-16 w-16 text-yellow-400"}),r.jsx(S4,{className:"absolute -top-2 -right-2 h-8 w-8 text-yellow-300 animate-pulse"}),r.jsx("div",{className:"absolute inset-0 h-16 w-16 bg-yellow-500/30 blur-xl"})]}):r.jsxs(r.Fragment,{children:[r.jsx(Mn,{className:"h-16 w-16 text-orange-500 animate-pulse"}),r.jsx("div",{className:"absolute inset-0 h-16 w-16 bg-orange-500/30 blur-xl"})]})})}),r.jsx("h2",{className:`text-2xl font-display font-bold mb-2 ${l?"text-yellow-400":"text-orange-400"}`,children:a}),r.jsx("p",{className:"text-neutral-400 text-sm",children:i}),l&&m&&r.jsxs("div",{className:"mt-4 inline-flex items-center gap-2 bg-yellow-500/20 px-4 py-2 rounded-full border border-yellow-500/30",children:[r.jsx(rt,{className:"h-4 w-4 text-yellow-400"}),r.jsxs("span",{className:"text-yellow-300 font-semibold",children:["You ranked #",m.rank,"  ",m.daysToComplete," ",m.daysToComplete===1?"day":"days","  ",m.attempts," ",m.attempts===1?"try":"tries"]})]})]}),r.jsxs("div",{className:"px-6 pb-6",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(rt,{className:"h-5 w-5 text-yellow-500"}),r.jsx("h3",{className:"text-lg font-semibold text-white",children:"Trivia Champions"})]}),d?r.jsx("div",{className:"flex justify-center py-8",children:r.jsx("div",{className:`animate-spin h-8 w-8 border-2 border-t-transparent rounded-full ${l?"border-yellow-500":"border-orange-500"}`})}):h.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("p",{className:"text-neutral-400",children:"No one has completed the trivia yet."}),r.jsx("p",{className:"text-sm text-neutral-500 mt-2",children:"Be the first to answer all 24 questions!"})]}):r.jsx("div",{className:"space-y-2 max-h-[40vh] overflow-y-auto pr-2 custom-scrollbar",children:h.map(g=>{const y=g.userId===s;return r.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl transition-colors ${y?l?"bg-yellow-500/20 border border-yellow-500/30":"bg-orange-500/20 border border-orange-500/30":"bg-neutral-700/50 hover:bg-neutral-700/70"}`,children:[r.jsx("div",{className:"w-8 flex justify-center",children:p(g.rank)}),r.jsx("div",{className:"flex-1 min-w-0",children:r.jsxs("p",{className:`font-medium truncate ${y?l?"text-yellow-300":"text-orange-300":"text-white"}`,children:[g.displayName,y&&r.jsx("span",{className:`ml-2 text-xs ${l?"text-yellow-400":"text-orange-400"}`,children:"(You)"})]})}),r.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[r.jsxs("div",{className:"flex items-center gap-1",title:"Days to complete",children:[r.jsx(Ln,{className:"h-4 w-4 text-neutral-400"}),r.jsxs("span",{className:y?l?"text-yellow-300":"text-orange-300":"text-neutral-300",children:[g.daysToComplete,"d"]})]}),r.jsxs("div",{className:"flex items-center gap-1",title:"Number of attempts",children:[r.jsx(mQ,{className:"h-3.5 w-3.5 text-neutral-400"}),r.jsxs("span",{className:y?l?"text-yellow-300":"text-orange-300":"text-neutral-300",children:[g.attempts,"x"]})]})]})]},g.userId)})})]}),r.jsx("div",{className:"px-6 pb-6 space-y-3",children:l?r.jsxs(r.Fragment,{children:[r.jsx(Y,{to:"/dashboard",className:"block w-full py-3 bg-gradient-to-r from-yellow-500 to-orange-500 text-white font-semibold rounded-xl hover:from-yellow-400 hover:to-orange-400 transition-all shadow-lg shadow-yellow-500/25 text-center",children:"Join a Fantasy League "}),r.jsx("button",{onClick:t,className:"w-full py-3 bg-neutral-700 text-neutral-300 font-medium rounded-xl hover:bg-neutral-600 transition-all",children:"Close"})]}):r.jsx("button",{onClick:t,className:"w-full py-3 bg-gradient-to-r from-orange-600 to-red-600 text-white font-semibold rounded-xl hover:from-orange-500 hover:to-red-500 transition-all shadow-lg shadow-orange-500/25",children:"Try Again Tomorrow"})})]})]})}const pf=["It's time for you to go.","The Tribe Has Spoken.","Your torch has been snuffed.","Time for you to go.","Blindsided!","That's a vote against you.","You've been voted out of the trivia.","Grab your torch and head out.","You didn't have the numbers.","Should've played your idol.","The jury saw right through that.","Outplayed. Outwitted. Outlasted... by this quiz.","Drop your buff.","The tribe has spoken... and they said no.","Not immunity-worthy."];function Ite(){var ve,Ee,De,Fe;const{user:e,loading:t,session:n}=yt(),s=zt(),[a,i]=C.useState(null),[l,u]=C.useState(20),[d,h]=C.useState(!1),[p,m]=C.useState(!1),[g,y]=C.useState(!1),[b,w]=C.useState(null),[v,j]=C.useState("It's time for you to go."),[E,k]=C.useState(!1),[S,P]=C.useState("The Tribe Has Spoken"),[A,T]=C.useState(!1),[L,H]=C.useState(null),{data:R,isLoading:M,refetch:O}=se({queryKey:["trivia","next"],queryFn:async()=>{if(!(n!=null&&n.access_token))throw new Error("Not authenticated");const re=await ut("/trivia/next",n.access_token);if(re.error)throw new Error(re.error);if(!re.data)throw new Error("No data returned");return re.data},enabled:!!e&&!!(n!=null&&n.access_token),retry:!1}),{data:F}=se({queryKey:["trivia","progress"],queryFn:async()=>{if(!(n!=null&&n.access_token))throw new Error("Not authenticated");const re=await ut("/trivia/progress",n.access_token);if(re.error)throw new Error(re.error);if(!re.data)throw new Error("No data returned");return re.data},enabled:!!e&&!!(n!=null&&n.access_token),refetchInterval:6e4}),{data:K}=se({queryKey:["trivia","all-questions"],queryFn:async()=>{const re=await Op("/trivia/questions");if(re.error)throw new Error(re.error);if(!re.data)throw new Error("No data returned");return re.data},enabled:A,staleTime:1e3*60*60});C.useEffect(()=>{if(!(R!=null&&R.question)||R.alreadyAnswered||p||d||R.isLocked)return;if(l<=0){h(!0);return}const re=setInterval(()=>{u(me=>me<=1?(h(!0),0):me-1)},1e3);return()=>clearInterval(re)},[l,R==null?void 0:R.question,R==null?void 0:R.alreadyAnswered,R==null?void 0:R.isLocked,p,d]),C.useEffect(()=>{R!=null&&R.question&&!R.alreadyAnswered&&!R.isLocked&&(u(20),h(!1),m(!1),i(null),w(null))},[(ve=R==null?void 0:R.question)==null?void 0:ve.id]);const ae=$e({mutationFn:async re=>{if(!(n!=null&&n.access_token))throw new Error("Not authenticated");if(!(R!=null&&R.question))throw new Error("No question available");const me=await ut("/trivia/answer",n.access_token,{method:"POST",body:JSON.stringify({questionId:R.question.id,selectedIndex:re})});if(me.error)throw new Error(me.error);if(!me.data)throw new Error("No data returned");return me.data},onSuccess:re=>{if(y(re.isCorrect),w(re.funFact||null),m(!0),!re.isCorrect){const me=pf[Math.floor(Math.random()*pf.length)];j(me),P(me),setTimeout(()=>{k(!0)},2e3)}s.invalidateQueries({queryKey:["trivia","next"]}),s.invalidateQueries({queryKey:["trivia","progress"]})}}),X=C.useCallback(()=>{R!=null&&R.question&&!R.alreadyAnswered&&!p&&(j(pf[Math.floor(Math.random()*pf.length)]),ae.mutate(-1))},[R==null?void 0:R.question,R==null?void 0:R.alreadyAnswered,p,ae]);C.useEffect(()=>{d&&(R!=null&&R.question)&&!R.alreadyAnswered&&!p&&X()},[d,R==null?void 0:R.question,R==null?void 0:R.alreadyAnswered,p,X]);const ee=re=>{R!=null&&R.alreadyAnswered||p||d||R!=null&&R.isLocked||(i(re),ae.mutate(re))};if(C.useEffect(()=>{if(p&&!(R!=null&&R.isLocked)&&g){const re=setTimeout(()=>{O(),m(!1),i(null),h(!1),u(20)},3e3);return()=>clearTimeout(re)}},[p,R==null?void 0:R.isLocked,g,O]),C.useEffect(()=>{(R!=null&&R.isComplete||F!=null&&F.isComplete)&&(P(" Trivia Champion!"),j("You completed all 24 questions!"),k(!0))},[R==null?void 0:R.isComplete,F==null?void 0:F.isComplete]),!t&&!e)return r.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex flex-col",children:[r.jsx(de,{}),r.jsxs("main",{className:"flex-1 max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-orange-500 to-red-600 rounded-full mb-6 shadow-lg",children:r.jsx(rt,{className:"h-10 w-10 text-white"})}),r.jsx("h1",{className:"text-4xl font-display font-bold text-neutral-800 mb-4",children:"Survivor Trivia Challenge"}),r.jsx("p",{className:"text-lg text-neutral-600 max-w-md mx-auto",children:"Answer 24 questions to prove you're the ultimate Survivor fan. Get one wrong? Come back in 24 hours!"})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200 mb-8",children:[r.jsx("h2",{className:"text-xl font-semibold text-neutral-800 mb-4",children:"How It Works"}),r.jsxs("ul",{className:"space-y-3 text-neutral-600",children:[r.jsxs("li",{className:"flex items-start gap-3",children:[r.jsx("span",{className:"text-orange-500 font-bold",children:"1."}),r.jsx("span",{children:"Answer 24 Survivor trivia questions"})]}),r.jsxs("li",{className:"flex items-start gap-3",children:[r.jsx("span",{className:"text-orange-500 font-bold",children:"2."}),r.jsx("span",{children:"You have 20 seconds per question"})]}),r.jsxs("li",{className:"flex items-start gap-3",children:[r.jsx("span",{className:"text-orange-500 font-bold",children:"3."}),r.jsx("span",{children:"Get one wrong = 24 hour lockout"})]}),r.jsxs("li",{className:"flex items-start gap-3",children:[r.jsx("span",{className:"text-orange-500 font-bold",children:"4."}),r.jsx("span",{children:"Complete all 24 to join the leaderboard!"})]})]})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-8 border-2 border-burgundy-200 mb-8",children:[r.jsx("h2",{className:"text-xl font-semibold text-neutral-800 mb-6 text-center",children:"Sign in to play"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs(Y,{to:"/login",state:{from:"/trivia"},className:"flex items-center justify-center gap-3 w-full py-4 bg-gradient-to-r from-burgundy-600 to-burgundy-700 text-white font-semibold rounded-xl hover:from-burgundy-500 hover:to-burgundy-600 transition-all shadow-lg",children:[r.jsx(VJ,{className:"h-5 w-5"}),"Sign In"]}),r.jsxs(Y,{to:"/signup",state:{from:"/trivia"},className:"flex items-center justify-center gap-3 w-full py-4 bg-white text-burgundy-600 font-semibold rounded-xl border-2 border-burgundy-200 hover:bg-burgundy-50 transition-all",children:[r.jsx(xs,{className:"h-5 w-5"}),"Create Account"]})]}),r.jsx("p",{className:"text-sm text-neutral-500 text-center mt-6",children:"Your progress is saved to your account so you can continue anytime."})]}),r.jsxs("div",{children:[r.jsx("button",{onClick:()=>T(!A),className:"w-full bg-white rounded-2xl shadow-card p-6 border border-cream-200 hover:border-burgundy-300 transition-colors",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-amber-400 to-orange-500 rounded-full flex items-center justify-center",children:r.jsx(Ol,{className:"h-5 w-5 text-white"})}),r.jsxs("div",{className:"text-left",children:[r.jsx("h3",{className:"text-lg font-semibold text-neutral-800",children:"All 24 Trivia Questions"}),r.jsx("p",{className:"text-sm text-neutral-500",children:"Study guide with answers"})]})]}),A?r.jsx(qr,{className:"h-6 w-6 text-neutral-400"}):r.jsx(xn,{className:"h-6 w-6 text-neutral-400"})]})}),A&&r.jsx("div",{className:"mt-4 space-y-3",children:(Ee=K==null?void 0:K.questions)==null?void 0:Ee.map(re=>r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-cream-200 overflow-hidden",children:[r.jsx("button",{onClick:()=>H(L===re.id?null:re.id),className:"w-full p-4 text-left hover:bg-cream-50 transition-colors",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("span",{className:"flex-shrink-0 w-8 h-8 bg-burgundy-100 text-burgundy-700 rounded-full flex items-center justify-center font-bold text-sm",children:re.questionNumber}),r.jsx("div",{className:"flex-1 min-w-0",children:r.jsx("p",{className:"text-neutral-800 font-medium",children:re.question})}),L===re.id?r.jsx(qr,{className:"h-5 w-5 text-neutral-400 flex-shrink-0"}):r.jsx(xn,{className:"h-5 w-5 text-neutral-400 flex-shrink-0"})]})}),L===re.id&&r.jsxs("div",{className:"px-4 pb-4 pt-2 border-t border-cream-100",children:[r.jsx("div",{className:"space-y-2 mb-4",children:re.options.map((me,Le)=>r.jsxs("div",{className:`p-3 rounded-lg flex items-center gap-2 ${Le===re.correctIndex?"bg-green-50 border border-green-200":"bg-neutral-50 border border-neutral-100"}`,children:[Le===re.correctIndex&&r.jsx(At,{className:"h-5 w-5 text-green-600 flex-shrink-0"}),r.jsx("span",{className:Le===re.correctIndex?"text-green-800 font-medium":"text-neutral-600",children:me})]},Le))}),re.funFact&&r.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3",children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(Ol,{className:"h-4 w-4 text-amber-600 mt-0.5 flex-shrink-0"}),r.jsx("p",{className:"text-sm text-amber-800",children:re.funFact})]})})]})]},re.id))})]})]}),r.jsx(Qt,{})]});if(t||M)return r.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex flex-col",children:[r.jsx(de,{}),r.jsx("main",{className:"flex-1 flex items-center justify-center",children:r.jsx(ge,{className:"h-8 w-8 text-burgundy-500 animate-spin"})}),r.jsx(Qt,{})]});const D=R==null?void 0:R.question,te=R==null?void 0:R.alreadyAnswered,V=R==null?void 0:R.userAnswer,$=(R==null?void 0:R.isLocked)||(F==null?void 0:F.isLocked),J=(R==null?void 0:R.lockedUntil)||(F==null?void 0:F.lockedUntil),le=(R==null?void 0:R.isComplete)||(F==null?void 0:F.isComplete);return r.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex flex-col",children:[r.jsx(de,{}),r.jsxs("main",{className:"flex-1 max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[!$&&!le&&r.jsx(Nte,{}),F&&!le&&r.jsx(Ste,{questionsAnswered:F.questionsAnswered,totalQuestions:F.totalQuestions,questionsCorrect:F.questionsCorrect}),$&&J&&r.jsx(kte,{lockedUntil:J}),le&&(F==null?void 0:F.daysToComplete)&&r.jsx(Ete,{daysToComplete:F.daysToComplete}),!$&&!le&&D&&r.jsx(Cte,{question:D,totalQuestions:(F==null?void 0:F.totalQuestions)||24,timeRemaining:l,selectedIndex:a,showResult:p,isCorrect:g,isTimedOut:d,alreadyAnswered:te||!1,userAnswer:V||null,correctIndex:((De=ae.data)==null?void 0:De.correctIndex)??(V==null?void 0:V.correctIndex)??-1,funFact:b||(R==null?void 0:R.funFact)||null,wrongMessage:v,isPending:ae.isPending,onAnswer:ee}),!$&&!le&&!D&&r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-12 border border-cream-200 text-center",children:[r.jsx(ot,{className:"h-12 w-12 text-neutral-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-xl font-semibold text-neutral-800 mb-2",children:"No Questions Available"}),r.jsx("p",{className:"text-neutral-500",children:"Check back later for trivia questions!"})]}),r.jsxs("div",{className:"mt-8",children:[r.jsx("button",{onClick:()=>T(!A),className:"w-full bg-white rounded-2xl shadow-card p-6 border border-cream-200 hover:border-burgundy-300 transition-colors",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-amber-400 to-orange-500 rounded-full flex items-center justify-center",children:r.jsx(Ol,{className:"h-5 w-5 text-white"})}),r.jsxs("div",{className:"text-left",children:[r.jsx("h3",{className:"text-lg font-semibold text-neutral-800",children:"All 24 Trivia Questions"}),r.jsx("p",{className:"text-sm text-neutral-500",children:"Study guide with answers"})]})]}),A?r.jsx(qr,{className:"h-6 w-6 text-neutral-400"}):r.jsx(xn,{className:"h-6 w-6 text-neutral-400"})]})}),A&&r.jsx("div",{className:"mt-4 space-y-3",children:(Fe=K==null?void 0:K.questions)==null?void 0:Fe.map(re=>r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-cream-200 overflow-hidden",children:[r.jsx("button",{onClick:()=>H(L===re.id?null:re.id),className:"w-full p-4 text-left hover:bg-cream-50 transition-colors",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("span",{className:"flex-shrink-0 w-8 h-8 bg-burgundy-100 text-burgundy-700 rounded-full flex items-center justify-center font-bold text-sm",children:re.questionNumber}),r.jsx("div",{className:"flex-1 min-w-0",children:r.jsx("p",{className:"text-neutral-800 font-medium",children:re.question})}),L===re.id?r.jsx(qr,{className:"h-5 w-5 text-neutral-400 flex-shrink-0"}):r.jsx(xn,{className:"h-5 w-5 text-neutral-400 flex-shrink-0"})]})}),L===re.id&&r.jsxs("div",{className:"px-4 pb-4 pt-2 border-t border-cream-100",children:[r.jsx("div",{className:"space-y-2 mb-4",children:re.options.map((me,Le)=>r.jsxs("div",{className:`p-3 rounded-lg flex items-center gap-2 ${Le===re.correctIndex?"bg-green-50 border border-green-200":"bg-neutral-50 border border-neutral-100"}`,children:[Le===re.correctIndex&&r.jsx(At,{className:"h-5 w-5 text-green-600 flex-shrink-0"}),r.jsx("span",{className:Le===re.correctIndex?"text-green-800 font-medium":"text-neutral-600",children:me})]},Le))}),re.funFact&&r.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3",children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(Ol,{className:"h-4 w-4 text-amber-600 mt-0.5 flex-shrink-0"}),r.jsx("p",{className:"text-sm text-amber-800",children:re.funFact})]})})]})]},re.id))})]}),!le&&r.jsx(Tte,{})]}),r.jsx(Qt,{}),r.jsx(Rte,{isOpen:E,onClose:()=>k(!1),accessToken:(n==null?void 0:n.access_token)||"",currentUserId:e==null?void 0:e.id,title:S,subtitle:le?"You've joined the ranks of Survivor trivia masters!":"Your torch has been snuffed. Come back in 24 hours.",isCompletion:le||!1})]})}const Pte={episode:"bg-burgundy-500",deadline:"bg-red-500",job:"bg-blue-500",waiver:"bg-green-500"},jk={upcoming:{bg:"bg-neutral-100",text:"text-neutral-600"},"in-progress":{bg:"bg-yellow-100",text:"text-yellow-700"},completed:{bg:"bg-green-100",text:"text-green-700"}};function Ate({events:e}){return e.length===0?r.jsx("div",{className:"bg-white rounded-2xl shadow-card p-8 text-center",children:r.jsx("p",{className:"text-neutral-400",children:"No upcoming events"})}):r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6",children:[r.jsx("h2",{className:"text-lg font-display text-neutral-800 mb-6",children:"Upcoming Events"}),r.jsx("div",{className:"space-y-6",children:e.slice(0,10).map((t,n)=>{var s,a,i;return r.jsxs("div",{className:"relative",children:[n<e.length-1&&n<9&&r.jsx("div",{className:"absolute left-6 top-12 bottom-0 w-0.5 bg-cream-200"}),r.jsxs("div",{className:"flex gap-4",children:[r.jsx("div",{className:`flex-shrink-0 w-12 h-12 ${Pte[t.type]||"bg-neutral-400"} rounded-full flex items-center justify-center text-white text-xl font-semibold shadow-md z-10`,children:t.icon||t.type.charAt(0).toUpperCase()}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[r.jsx("h3",{className:"font-semibold text-neutral-800 text-sm",children:t.title}),t.status&&r.jsx("span",{className:`flex-shrink-0 text-xs px-2 py-0.5 rounded-full ${((s=jk[t.status])==null?void 0:s.bg)||"bg-neutral-100"} ${((a=jk[t.status])==null?void 0:a.text)||"text-neutral-600"}`,children:t.status.replace("-"," ")})]}),r.jsx("p",{className:"text-sm text-neutral-500 mb-2",children:t.description}),((i=t.metadata)==null?void 0:i.timeUntil)&&r.jsx("p",{className:"text-xs text-neutral-400 font-mono mb-2",children:t.metadata.timeUntil}),t.actionUrl&&r.jsxs(Y,{to:t.actionUrl,className:"text-xs text-burgundy-600 hover:text-burgundy-700 font-medium inline-flex items-center gap-1",children:["Take action",r.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]})]},n)})}),e.length>10&&r.jsx("div",{className:"mt-6 pt-6 border-t border-cream-200 text-center",children:r.jsxs("p",{className:"text-sm text-neutral-400",children:["Showing 10 of ",e.length," upcoming events"]})})]})}function Pn({title:e,value:t,subtitle:n,trend:s,progress:a,status:i}){const l={good:"text-green-600",warning:"text-yellow-600",critical:"text-red-600"},u={good:"bg-green-500",warning:"bg-yellow-500",critical:"bg-red-500"};return r.jsxs("div",{className:"bg-white rounded-xl shadow-card p-5",children:[r.jsxs("div",{className:"flex justify-between items-start mb-2",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm text-neutral-500 mb-1",children:e}),r.jsx("p",{className:"text-3xl font-display text-neutral-800 font-mono",children:t}),n&&r.jsx("p",{className:"text-xs text-neutral-400 mt-1",children:n})]}),s&&r.jsxs("div",{className:`text-sm flex items-center gap-1 ${s.value>=0?"text-green-600":"text-red-600"}`,children:[s.value>=0?r.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})}):r.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),r.jsxs("span",{className:"font-semibold",children:[Math.abs(s.value).toFixed(0),"%"]}),r.jsx("span",{className:"text-neutral-400 text-xs",children:s.label})]})]}),a&&r.jsxs("div",{className:"mt-3",children:[r.jsx("div",{className:"h-2 bg-cream-200 rounded-full overflow-hidden",children:r.jsx("div",{className:`h-full transition-all ${u[i||"good"]}`,style:{width:`${Math.min(100,a.value)}%`}})}),r.jsx("p",{className:"text-xs text-neutral-500 mt-1",children:a.label})]}),i&&!a&&r.jsx("div",{className:"mt-2",children:r.jsxs("span",{className:`text-xs font-semibold ${l[i]}`,children:[i==="good"&&" Healthy",i==="warning"&&" Warning",i==="critical"&&" Critical"]})})]})}function Ote({stats:e}){const t=()=>e.game.picksCompletionRate>=80?"good":e.game.picksCompletionRate>=50?"warning":"critical";return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-display text-neutral-800 mb-3",children:"Player Stats"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(Pn,{title:"Total Users",value:e.players.total,trend:e.players.growthRate!==void 0?{value:e.players.growthRate,label:"vs last week"}:void 0}),r.jsx(Pn,{title:"Active This Week",value:e.players.activeThisWeek,subtitle:"Logged in last 7 days"}),r.jsx(Pn,{title:"New Today",value:e.players.newToday}),r.jsx(Pn,{title:"New This Week",value:e.players.newThisWeek})]})]}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-display text-neutral-800 mb-3",children:"League Stats"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(Pn,{title:"Total Leagues",value:e.leagues.total}),r.jsx(Pn,{title:"Active This Week",value:e.leagues.activeThisWeek,subtitle:"With picks submitted"}),r.jsx(Pn,{title:"Global League",value:e.leagues.globalLeagueSize,subtitle:"members"}),r.jsx(Pn,{title:"Average Size",value:e.leagues.averageSize.toFixed(1),subtitle:"members per league"})]})]}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-display text-neutral-800 mb-3",children:"Game Stats"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(Pn,{title:"Picks This Week",value:e.game.picksThisWeek,progress:{value:e.game.picksCompletionRate,label:`${e.game.picksCompletionRate.toFixed(0)}% completion rate`},status:t()}),r.jsx(Pn,{title:"Episodes Scored",value:`${e.game.episodesScored}/${e.game.totalEpisodes}`,progress:{value:e.game.totalEpisodes>0?e.game.episodesScored/e.game.totalEpisodes*100:0,label:`${e.game.totalEpisodes-e.game.episodesScored} remaining`}}),r.jsx(Pn,{title:"Castaways Remaining",value:e.game.castawaysRemaining,subtitle:"Still in the game"}),r.jsx(Pn,{title:"Castaways Eliminated",value:e.game.castawaysEliminated,subtitle:"Voted out / quit"})]})]}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-display text-neutral-800 mb-3",children:"System Health"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(Pn,{title:"Database Response",value:`${e.systemHealth.dbResponseTimeMs}ms`,status:e.systemHealth.dbResponseTimeMs<1e3?"good":"warning"}),r.jsx(Pn,{title:"Job Failures",value:e.systemHealth.jobFailuresLast24h,subtitle:"Last 24 hours",status:e.systemHealth.jobFailuresLast24h>=10?"critical":e.systemHealth.jobFailuresLast24h>=5?"warning":"good"}),r.jsx(Pn,{title:"Email Queue",value:e.systemHealth.emailQueueSize,subtitle:"Pending/processing",status:e.systemHealth.emailQueueSize>=100?"warning":"good"}),r.jsx(Pn,{title:"Failed Emails",value:e.systemHealth.failedEmailsCount,subtitle:"Needs retry",status:e.systemHealth.failedEmailsCount>=20?"critical":e.systemHealth.failedEmailsCount>=10?"warning":"good"})]})]})]})}const Mte={healthy:{bg:"bg-green-50",border:"border-green-200",text:"text-green-800",icon:"text-green-500",badge:"bg-green-500",label:"All Systems Operational"},degraded:{bg:"bg-yellow-50",border:"border-yellow-200",text:"text-yellow-800",icon:"text-yellow-500",badge:"bg-yellow-500",label:"Some Issues Detected"},unhealthy:{bg:"bg-red-50",border:"border-red-200",text:"text-red-800",icon:"text-red-500",badge:"bg-red-500",label:"Critical Issues"}};function Lte({health:e}){const t=Mte[e.status],n=new Date(e.lastCheckTime),s=Math.floor((Date.now()-n.getTime())/1e3/60);return r.jsxs("div",{className:`${t.bg} ${t.border} border rounded-2xl p-4 mb-8 shadow-sm`,children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:`w-3 h-3 ${t.badge} rounded-full animate-pulse`}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h3",{className:`font-semibold ${t.text}`,children:t.label}),e.issues.length>0&&r.jsxs("span",{className:`text-xs ${t.text} opacity-70`,children:["(",e.issues.length," ",e.issues.length===1?"issue":"issues",")"]})]}),r.jsxs("p",{className:`text-sm ${t.text} opacity-70 mt-0.5`,children:["Last checked ",s<1?"just now":`${s}m ago`]})]}),r.jsxs("div",{className:"flex gap-2 ml-4",children:[r.jsx(k0,{label:"DB",healthy:e.checks.database}),r.jsx(k0,{label:"Jobs",healthy:e.checks.jobs}),r.jsx(k0,{label:"Email",healthy:e.checks.emailQueue})]})]}),r.jsxs(Y,{to:"/admin/jobs",className:`text-sm ${t.text} font-medium hover:underline flex items-center gap-1`,children:["View Details",r.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]}),e.issues.length>0&&r.jsx("div",{className:"mt-3 pt-3 border-t border-current opacity-20",children:r.jsxs("ul",{className:`text-sm ${t.text} space-y-1`,children:[e.issues.slice(0,3).map((a,i)=>r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-xs",children:""}),a]},i)),e.issues.length>3&&r.jsxs("li",{className:"text-xs opacity-70",children:["+",e.issues.length-3," more issues"]})]})})]})}function k0({label:e,healthy:t}){return r.jsxs("div",{className:`flex items-center gap-1.5 px-2 py-1 rounded-md ${t?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[r.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${t?"bg-green-500":"bg-red-500"}`}),r.jsx("span",{className:"text-xs font-medium",children:e})]})}const $te={user_signup:"bg-blue-100 text-blue-600",league_created:"bg-purple-100 text-purple-600",draft_completed:"bg-green-100 text-green-600",pick_submitted:"bg-yellow-100 text-yellow-600",payment_received:"bg-green-100 text-green-600",admin_action:"bg-burgundy-100 text-burgundy-600"};function Dte(e){const t=Date.now(),n=new Date(e).getTime(),s=t-n,a=Math.floor(s/1e3/60),i=Math.floor(a/60),l=Math.floor(i/24);return a<1?"just now":a<60?`${a}m ago`:i<24?`${i}h ago`:l<7?`${l}d ago`:new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"})}function Fte({activities:e}){return e.length===0?r.jsx("div",{className:"bg-white rounded-2xl shadow-card p-8 text-center",children:r.jsx("p",{className:"text-neutral-400",children:"No recent activity"})}):r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6",children:[r.jsx("h2",{className:"text-lg font-display text-neutral-800 mb-6",children:"Recent Activity"}),r.jsx("div",{className:"space-y-3",children:e.map((t,n)=>r.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg hover:bg-cream-50 transition-colors",children:[r.jsx("div",{className:`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center text-sm ${$te[t.type]||"bg-neutral-100 text-neutral-600"}`,children:t.icon}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm text-neutral-700",children:t.message}),r.jsx("p",{className:"text-xs text-neutral-400 mt-0.5",children:Dte(t.timestamp)})]})]},n))})]})}function Ute(){const{data:e,isLoading:t}=se({queryKey:["notification-prefs-stats"],queryFn:async()=>{const{data:{session:i}}=await G.auth.getSession();if(!i)throw new Error("Not authenticated");const u=await fetch("https://rgfl-api-production.up.railway.app/api/admin/notification-preferences/stats",{headers:{Authorization:`Bearer ${i.access_token}`}});if(!u.ok)throw new Error("Failed to fetch stats");return u.json()},refetchInterval:3e4});if(t)return r.jsx("div",{className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200",children:r.jsx("div",{className:"flex items-center justify-center h-48",children:r.jsx(ge,{className:"h-8 w-8 text-burgundy-500 animate-spin"})})});if(!e)return r.jsx("div",{className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200",children:r.jsx("p",{className:"text-neutral-500 text-center",children:"Failed to load notification statistics"})});const n=e.total_users>0?(e.email_enabled/e.total_users*100).toFixed(0):"0",s=e.total_users>0?(e.sms_enabled/e.total_users*100).toFixed(0):"0",a=e.total_users>0?(e.push_enabled/e.total_users*100).toFixed(0):"0";return r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200",children:[r.jsx("h3",{className:"text-lg font-display font-bold text-neutral-800 mb-1",children:"Notification Preferences"}),r.jsx("p",{className:"text-neutral-500 text-sm mb-6",children:"User notification channel preferences"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-blue-50 rounded-full flex items-center justify-center",children:r.jsx(xs,{className:"w-5 h-5 text-blue-500"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-neutral-700 font-medium",children:"Email"}),r.jsxs("p",{className:"text-xs text-neutral-500",children:[n,"% of users"]})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-2xl font-bold text-neutral-800",children:e.email_enabled}),r.jsx("p",{className:"text-xs text-neutral-500",children:"enabled"})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-green-50 rounded-full flex items-center justify-center",children:r.jsx(Cm,{className:"w-5 h-5 text-green-500"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-neutral-700 font-medium",children:"SMS"}),r.jsxs("p",{className:"text-xs text-neutral-500",children:[s,"% of users"]})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-2xl font-bold text-neutral-800",children:e.sms_enabled}),r.jsx("p",{className:"text-xs text-neutral-500",children:"enabled"})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-purple-50 rounded-full flex items-center justify-center",children:r.jsx(Rs,{className:"w-5 h-5 text-purple-500"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-neutral-700 font-medium",children:"Push"}),r.jsxs("p",{className:"text-xs text-neutral-500",children:[a,"% of users"]})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-2xl font-bold text-neutral-800",children:e.push_enabled}),r.jsx("p",{className:"text-xs text-neutral-500",children:"enabled"})]})]})]}),r.jsxs("div",{className:"mt-6 pt-4 border-t border-cream-200",children:[r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"text-neutral-600",children:"All channels disabled"}),r.jsxs("span",{className:"font-medium text-neutral-800",children:[e.all_disabled," users"]})]}),r.jsxs("div",{className:"flex items-center justify-between text-sm mt-2",children:[r.jsx("span",{className:"text-neutral-600",children:"Total users"}),r.jsx("span",{className:"font-medium text-neutral-800",children:e.total_users})]})]}),r.jsx("div",{className:"mt-4 p-3 bg-amber-50 rounded-xl border border-amber-200",children:r.jsxs("p",{className:"text-xs text-amber-800",children:[r.jsx("strong",{children:"Note:"})," Users can manage preferences in their profile settings. Spoiler-safe notifications respect these settings."]})})]})}const gf="https://rgfl-api-production.up.railway.app";function qte(){const{user:e}=yt(),{data:t}=se({queryKey:["profile",e==null?void 0:e.id],queryFn:async()=>{const{data:g,error:y}=await G.from("users").select("id, display_name, role").eq("id",e.id).single();if(y)throw y;return g},enabled:!!(e!=null&&e.id)}),{data:n,isLoading:s}=se({queryKey:["adminTimeline"],queryFn:async()=>{var v;const y=(v=(await G.auth.getSession()).data.session)==null?void 0:v.access_token,b=await fetch(`${gf}/api/admin/dashboard/timeline`,{headers:{Authorization:`Bearer ${y}`}});if(!b.ok)throw new Error("Failed to fetch timeline");return(await b.json()).timeline},enabled:!!(e!=null&&e.id)&&(t==null?void 0:t.role)==="admin",refetchInterval:3e4}),{data:a,isLoading:i}=se({queryKey:["adminStats"],queryFn:async()=>{var w;const y=(w=(await G.auth.getSession()).data.session)==null?void 0:w.access_token,b=await fetch(`${gf}/api/admin/dashboard/stats`,{headers:{Authorization:`Bearer ${y}`}});if(!b.ok)throw new Error("Failed to fetch stats");return b.json()},enabled:!!(e!=null&&e.id)&&(t==null?void 0:t.role)==="admin",refetchInterval:3e4}),{data:l,isLoading:u}=se({queryKey:["adminActivity"],queryFn:async()=>{var v;const y=(v=(await G.auth.getSession()).data.session)==null?void 0:v.access_token,b=await fetch(`${gf}/api/admin/dashboard/activity`,{headers:{Authorization:`Bearer ${y}`}});if(!b.ok)throw new Error("Failed to fetch activity");return(await b.json()).activity},enabled:!!(e!=null&&e.id)&&(t==null?void 0:t.role)==="admin",refetchInterval:3e4}),{data:d,isLoading:h}=se({queryKey:["adminHealth"],queryFn:async()=>{var w;const y=(w=(await G.auth.getSession()).data.session)==null?void 0:w.access_token,b=await fetch(`${gf}/api/admin/dashboard/system-health`,{headers:{Authorization:`Bearer ${y}`}});if(!b.ok)throw new Error("Failed to fetch system health");return b.json()},enabled:!!(e!=null&&e.id)&&(t==null?void 0:t.role)==="admin",refetchInterval:3e4}),p=[{title:"Score Episode",description:"Enter scores for the latest episode",href:"/admin/scoring",icon:"",color:"bg-burgundy-500"},{title:"Manage Castaways",description:"Add, edit, or eliminate castaways",href:"/admin/castaways",icon:"",color:"bg-blue-500"},{title:"Manage Seasons",description:"Manage seasons and episodes",href:"/admin/seasons",icon:"",color:"bg-green-500"},{title:"Scoring Rules",description:"View and manage scoring rules",href:"/admin/scoring-rules",icon:"",color:"bg-purple-500"},{title:"All Leagues",description:"View and manage all leagues",href:"/admin/leagues",icon:"",color:"bg-orange-500"},{title:"All Users",description:"Manage user accounts",href:"/admin/users",icon:"",color:"bg-teal-500"},{title:"Job Monitor",description:"View scheduled jobs and history",href:"/admin/jobs",icon:"",color:"bg-indigo-500"},{title:"Email Queue",description:"Monitor email queue and failed emails",href:"/admin/email-queue",icon:"",color:"bg-pink-500"},{title:"Announcements",description:"Manage dashboard announcements",href:"/admin/announcements",icon:"",color:"bg-amber-500"}];if(t&&t.role!=="admin")return r.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200",children:[r.jsx(de,{}),r.jsx("main",{className:"max-w-4xl mx-auto px-4 py-16 text-center",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated p-12",children:[r.jsx("div",{className:"w-20 h-20 mx-auto mb-6 bg-red-100 rounded-full flex items-center justify-center",children:r.jsx("svg",{className:"w-10 h-10 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),r.jsx("h1",{className:"text-2xl font-display text-neutral-800 mb-3",children:"Access Denied"}),r.jsx("p",{className:"text-neutral-500 mb-8",children:"You don't have permission to access the admin dashboard."}),r.jsx(Y,{to:"/dashboard",className:"btn btn-primary",children:"Back to Dashboard"})]})})]});const m=s||i||u||h;return r.jsxs("div",{className:"min-h-screen bg-[#faf8f5]",children:[r.jsx(de,{}),r.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6 animate-fade-in",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-display text-neutral-800",children:"Admin Command Center"}),r.jsx("p",{className:"text-neutral-500 mt-1",children:"Real-time platform monitoring and management"})]}),r.jsx(Y,{to:"/dashboard",className:"btn bg-white text-neutral-700 shadow-card hover:shadow-card-hover",children:"Back to App"})]}),d&&r.jsx(Lte,{health:d}),m&&r.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mb-8",children:[r.jsx("div",{className:"md:col-span-1",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-8 animate-pulse",children:[r.jsx("div",{className:"h-6 bg-cream-200 rounded w-1/2 mb-6"}),r.jsx("div",{className:"space-y-4",children:[1,2,3,4].map(g=>r.jsx("div",{className:"h-16 bg-cream-100 rounded"},g))})]})}),r.jsx("div",{className:"md:col-span-2",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-8 animate-pulse",children:[r.jsx("div",{className:"h-6 bg-cream-200 rounded w-1/3 mb-6"}),r.jsx("div",{className:"grid grid-cols-2 gap-4",children:[1,2,3,4,5,6].map(g=>r.jsx("div",{className:"h-24 bg-cream-100 rounded"},g))})]})})]}),!m&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mb-8",children:[r.jsx("div",{className:"md:col-span-1 animate-slide-up",children:n&&r.jsx(Ate,{events:n})}),r.jsxs("div",{className:"md:col-span-2 space-y-6",children:[r.jsx("div",{className:"animate-slide-up",style:{animationDelay:"0.1s"},children:a&&r.jsx(Ote,{stats:a})}),r.jsx("div",{className:"animate-slide-up",style:{animationDelay:"0.15s"},children:r.jsx(Ute,{})})]})]}),r.jsx("div",{className:"mb-8 animate-slide-up",style:{animationDelay:"0.2s"},children:l&&r.jsx(Fte,{activities:l})}),r.jsxs("div",{className:"animate-slide-up",style:{animationDelay:"0.3s"},children:[r.jsx("h2",{className:"text-lg font-display text-neutral-800 mb-4",children:"Quick Actions"}),r.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:p.map(g=>r.jsxs(Y,{to:g.href,className:"bg-white rounded-xl shadow-card hover:shadow-card-hover p-5 transition-all group",children:[r.jsx("div",{className:`w-12 h-12 ${g.color} rounded-lg flex items-center justify-center text-white text-2xl mb-3 group-hover:scale-110 transition-transform`,children:g.icon}),r.jsx("h3",{className:"font-semibold text-neutral-800 text-base mb-1",children:g.title}),r.jsx("p",{className:"text-xs text-neutral-500",children:g.description})]},g.href))})]})]})]})]})}function Nk({rule:e,currentCount:t,onChange:n,isCommon:s}){return r.jsxs("div",{className:`group flex items-center justify-between p-3 rounded-xl border transition-all ${t>0?"bg-burgundy-50 border-burgundy-200":"bg-white border-cream-200 hover:border-cream-300"}`,children:[r.jsxs("div",{className:"flex-1 min-w-0 mr-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[s&&r.jsx(Yn,{className:"h-3 w-3 text-amber-500 fill-amber-500"}),r.jsx("h4",{className:`font-medium truncate ${t>0?"text-burgundy-900":"text-neutral-800"}`,children:e.name}),r.jsxs("span",{className:`text-xs px-1.5 py-0.5 rounded-md font-bold ${e.points>0?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[e.points>0?"+":"",e.points]})]}),e.description&&r.jsx("p",{className:"text-xs text-neutral-500 truncate mt-0.5 group-hover:whitespace-normal group-hover:overflow-visible",children:e.description})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{onClick:()=>n(Math.max(0,t-1)),disabled:t===0,className:`p-1.5 rounded-lg transition-colors ${t>0?"bg-burgundy-200 text-burgundy-700 hover:bg-burgundy-300":"bg-cream-100 text-neutral-400 cursor-not-allowed"}`,children:r.jsx(Cp,{className:"h-4 w-4"})}),r.jsx("span",{className:`w-6 text-center font-bold text-lg ${t>0?"text-burgundy-600":"text-neutral-400"}`,children:t}),r.jsx("button",{onClick:()=>n(t+1),className:"p-1.5 bg-burgundy-500 text-white rounded-lg hover:bg-burgundy-600 transition-colors shadow-sm",children:r.jsx(Io,{className:"h-4 w-4"})})]})]})}function Bte({isOpen:e,onClose:t,onConfirm:n,isPending:s,scoringStatus:a}){if(!e)return null;const i=a==null?void 0:a.is_complete;return r.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[100] p-4",children:r.jsx("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full overflow-hidden animate-in fade-in zoom-in duration-200",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex justify-between items-start mb-4",children:[r.jsx("div",{className:`p-3 rounded-full ${i?"bg-green-100 text-green-600":"bg-amber-100 text-amber-600"}`,children:i?r.jsx(At,{className:"h-6 w-6"}):r.jsx(dr,{className:"h-6 w-6"})}),r.jsx("button",{onClick:t,className:"p-1 hover:bg-cream-100 rounded-full transition-colors text-neutral-400",children:r.jsx(Sn,{className:"h-5 w-5"})})]}),r.jsx("h3",{className:"text-xl font-display font-bold text-neutral-900 mb-2",children:"Finalize Episode Scoring"}),r.jsxs("div",{className:"space-y-4 mb-6",children:[r.jsx("p",{className:"text-neutral-600",children:"Finalizing will lock all scores for this episode and update the global and private league standings."}),!i&&a&&r.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4",children:[r.jsx("p",{className:"text-sm text-amber-800 font-medium mb-2",children:"Warning: Scoring is incomplete"}),r.jsxs("p",{className:"text-xs text-amber-700",children:[a.total_castaways-a.scored_castaways," castaways have no points recorded. Finalizing will assume they earned 0 points."]}),r.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:a.unscored_castaway_names.map(l=>r.jsx("span",{className:"px-1.5 py-0.5 bg-amber-200/50 text-amber-800 rounded text-[10px]",children:l},l))})]}),r.jsx("div",{className:"bg-red-50 border border-red-100 rounded-xl p-4",children:r.jsxs("p",{className:"text-xs text-red-700 font-medium flex items-center gap-1",children:[r.jsx(dr,{className:"h-3 w-3"})," This action cannot be easily undone."]})})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:t,className:"flex-1 px-4 py-3 bg-cream-100 text-neutral-700 font-bold rounded-xl hover:bg-cream-200 transition-colors",children:"Back"}),r.jsx("button",{onClick:n,disabled:s,className:"flex-1 px-4 py-3 bg-burgundy-600 text-white font-bold rounded-xl hover:bg-burgundy-700 transition-colors shadow-lg shadow-burgundy-500/20 flex items-center justify-center gap-2",children:s?r.jsxs(r.Fragment,{children:[r.jsx(ge,{className:"h-4 w-4 animate-spin"}),"Finalizing..."]}):"Finalize Now"})]})]})})})}function Hte({isOpen:e,onClose:t,result:n}){if(!e)return null;const{success:s,eliminated:a}=n;return r.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[100] p-4",children:r.jsx("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full overflow-hidden animate-in fade-in zoom-in duration-200",children:r.jsxs("div",{className:"p-6 text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-green-100 text-green-600 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(At,{className:"h-10 w-10"})}),r.jsx("h3",{className:"text-2xl font-display font-bold text-neutral-900 mb-2",children:s?"Scoring Finalized!":"Finalization Failed"}),r.jsx("p",{className:"text-neutral-600 mb-6",children:s?"Episode scores have been locked and all league standings have been updated.":"There was an error finalizing the scores. Please check the server logs."}),s&&a.length>0&&r.jsxs("div",{className:"bg-neutral-50 rounded-2xl p-4 mb-6 text-left border border-cream-200",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3 text-neutral-800 font-bold",children:[r.jsx(Mn,{className:"h-4 w-4 text-orange-500"}),"Torches Snuffed (",a.length,")"]}),r.jsx("div",{className:"grid grid-cols-2 gap-2",children:a.map(i=>r.jsxs("div",{className:"text-sm text-neutral-600 flex items-center gap-2",children:[r.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-neutral-300"}),i]},i))})]}),r.jsx("button",{onClick:t,className:"w-full py-4 bg-neutral-900 text-white font-bold rounded-2xl hover:bg-neutral-800 transition-colors shadow-lg",children:"Done"})]})})})}function zte({castaways:e,selectedCastawayId:t,onSelect:n,existingScores:s}){const a=i=>s==null?void 0:s.some(l=>l.castaway_id===i);return r.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-2 custom-scrollbar",children:e.map(i=>{const l=t===i.id,u=a(i.id);return r.jsxs("button",{onClick:()=>n(i.id),className:`w-full flex items-center gap-3 p-3 rounded-xl border transition-all text-left group ${l?"bg-burgundy-600 border-burgundy-600 text-white shadow-lg shadow-burgundy-500/20":"bg-white border-cream-200 text-neutral-700 hover:border-burgundy-200 hover:bg-burgundy-50/30"}`,children:[r.jsx("img",{src:Jn(i.name,i.photo_url),alt:i.name,className:`w-10 h-10 rounded-lg object-cover border-2 ${l?"border-white/30":"border-cream-100 group-hover:border-burgundy-100"}`}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:`font-semibold text-sm truncate ${l?"text-white":"text-neutral-800"}`,children:i.name}),r.jsx("p",{className:`text-[10px] uppercase font-bold tracking-tighter ${l?"text-burgundy-100":"text-neutral-400"}`,children:i.status})]}),u?r.jsx(At,{className:`h-4 w-4 ${l?"text-white":"text-green-500"}`}):r.jsx(dr,{className:`h-4 w-4 ${l?"text-burgundy-300":"text-amber-400 opacity-0 group-hover:opacity-100"}`})]},i.id)})})}function Wte({castaway:e,totalPoints:t,episodeNumber:n,isSaving:s,isDirty:a,lastSavedAt:i}){return r.jsx("div",{className:"bg-gradient-to-r from-burgundy-500 to-burgundy-600 rounded-2xl p-6 text-white shadow-elevated",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-xl flex items-center justify-center",children:e!=null&&e.photo_url?r.jsx("img",{src:Jn(e.name,e.photo_url),alt:e.name,className:"w-16 h-16 rounded-xl object-cover"}):r.jsx("span",{className:"text-2xl font-bold",children:e==null?void 0:e.name.charAt(0)})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-display",children:e==null?void 0:e.name}),r.jsxs("p",{className:"text-burgundy-100",children:["Episode ",n]})]})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-burgundy-200 text-sm",children:"Episode Total"}),r.jsxs("p",{className:`text-4xl font-display font-bold ${t>=0?"text-white":"text-red-200"}`,children:[t>=0?"+":"",t]})]}),r.jsxs("div",{className:"flex flex-col items-end gap-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[s&&r.jsxs("span",{className:"text-xs text-burgundy-200 flex items-center gap-1",children:[r.jsx(ge,{className:"h-3 w-3 animate-spin"}),"Saving..."]}),a&&!s&&r.jsx("span",{className:"text-xs text-burgundy-200",children:"Unsaved changes"}),i&&!a&&!s&&r.jsxs("span",{className:"text-xs text-green-200 flex items-center gap-1",children:[r.jsx(At,{className:"h-3 w-3"}),"Saved"]})]}),r.jsx("p",{className:"text-xs text-burgundy-200",children:"Auto-saves after 2 seconds"})]})]})]})})}function Gte({episodes:e,selectedEpisodeId:t,onSelect:n}){return r.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated p-5",children:[r.jsx("h3",{className:"font-semibold text-neutral-800 mb-3",children:"Select Episode"}),r.jsxs("select",{value:t||"",onChange:s=>n(s.target.value||null),className:"w-full p-3 border border-cream-200 rounded-xl focus:ring-2 focus:ring-burgundy-500 focus:border-burgundy-500","aria-label":"Select episode to score",children:[r.jsx("option",{value:"",children:"Choose episode..."}),e.map(s=>r.jsxs("option",{value:s.id,children:["Ep ",s.number,": ",s.title||"TBD"," ",s.is_scored?"":""]},s.id))]})]})}function Vte({scoringStatus:e,selectedEpisodeId:t,selectedEpisode:n,finalizeMutation:s,onShowFinalizeModal:a}){return r.jsxs("div",{className:"flex items-center justify-between mb-8 animate-fade-in",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx(Y,{to:"/admin",className:"text-neutral-400 hover:text-neutral-600 transition-colors","aria-label":"Back to admin dashboard",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),r.jsx("h1",{className:"text-2xl font-display text-neutral-800",children:"Score Episode"})]}),r.jsx("p",{className:"text-neutral-500",children:"Enter scores for each castaway"})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[e&&t&&!(n!=null&&n.is_scored)&&r.jsxs("div",{className:`px-4 py-2 rounded-xl flex items-center gap-2 ${e.is_complete?"bg-green-100 text-green-700":"bg-amber-100 text-amber-700"}`,children:[e.is_complete?r.jsx(At,{className:"h-5 w-5"}):r.jsx(dr,{className:"h-5 w-5"}),r.jsxs("span",{className:"font-medium",children:[e.scored_castaways,"/",e.total_castaways," castaways scored"]})]}),r.jsxs(Y,{to:`/admin/scoring/grid${t?`?episode=${t}`:""}`,className:"btn btn-secondary flex items-center gap-2",children:[r.jsx(w4,{className:"h-4 w-4"}),"Grid View"]}),t&&!(n!=null&&n.is_scored)&&r.jsxs("button",{onClick:a,className:"btn btn-primary flex items-center gap-2",disabled:s.isPending||!(e!=null&&e.is_complete),title:e!=null&&e.is_complete?"Finalize episode scoring":`Score all ${(e==null?void 0:e.total_castaways)||0} castaways before finalizing`,children:[s.isPending?r.jsx(ge,{className:"h-4 w-4 animate-spin"}):r.jsx(At,{className:"h-4 w-4"}),"Finalize Scores"]}),(n==null?void 0:n.is_scored)&&r.jsxs("span",{className:"flex items-center gap-2 text-green-600 font-medium",children:[r.jsx(At,{className:"h-5 w-5"}),"Finalized"]})]})]})}function Sk({category:e,rules:t,scores:n,isExpanded:s,onToggle:a,onUpdateScore:i,isFeatured:l=!1}){const u=t.reduce((h,p)=>{const m=n[p.id]||0;return h+p.points*m},0),d=t.some(h=>(n[h.id]||0)>0);return l?r.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated overflow-hidden border-2 border-burgundy-200",children:[r.jsxs("button",{onClick:a,className:"w-full p-4 border-b border-cream-100 bg-gradient-to-r from-burgundy-50 to-cream-50 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Yn,{className:"h-5 w-5 text-burgundy-500 fill-burgundy-500"}),r.jsx("h3",{className:"font-semibold text-burgundy-700",children:e}),r.jsx("span",{className:"text-xs bg-burgundy-100 text-burgundy-600 px-2 py-0.5 rounded-full font-bold",children:t.length})]}),s?r.jsx(xn,{className:"h-5 w-5 text-burgundy-400"}):r.jsx(kr,{className:"h-5 w-5 text-burgundy-400"})]}),s&&r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-px bg-cream-100",children:t.map(h=>r.jsx(Nk,{rule:h,currentCount:n[h.id]||0,onChange:p=>i(h.id,p)},h.id))})]}):r.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated overflow-hidden",children:[r.jsxs("button",{onClick:a,className:"w-full p-4 border-b border-cream-100 bg-cream-50 flex items-center justify-between hover:bg-cream-100 transition-colors",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[s?r.jsx(xn,{className:"h-5 w-5 text-neutral-400"}):r.jsx(kr,{className:"h-5 w-5 text-neutral-400"}),r.jsx("h3",{className:"font-semibold text-neutral-800",children:e}),r.jsx("span",{className:"text-xs bg-cream-200 text-neutral-500 px-2 py-0.5 rounded-full font-bold",children:t.length})]}),d&&r.jsxs("span",{className:`font-bold text-sm ${u>=0?"text-green-600":"text-red-600"}`,children:[u>=0?"+":"",u]})]}),s&&r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-px bg-cream-100",children:t.map(h=>r.jsx(Nk,{rule:h,currentCount:n[h.id]||0,onChange:p=>i(h.id,p)},h.id))})]})}function kk(){const{user:e}=yt(),t=zt(),[n]=cd(),s=n.get("episode"),[a,i]=C.useState(s),[l,u]=C.useState(null),[d,h]=C.useState({}),[p,m]=C.useState(null),[g,y]=C.useState(!1),[b,w]=C.useState(!1),[v,j]=C.useState(!1),[E,k]=C.useState({"Most Common":!0}),[S,P]=C.useState(!1),[A,T]=C.useState(null),L=C.useRef(null),H=C.useRef(null),R=C.useRef(d),{data:M}=O4(e==null?void 0:e.id),{data:O}=M4(),{data:F}=L4(O==null?void 0:O.id),{data:K}=$4(O==null?void 0:O.id),{data:ae}=D4(O==null?void 0:O.id),{data:X}=F4(a),{data:ee,refetch:D}=U4(a),te=C.useMemo(()=>JZ(ae),[ae]),V=C.useMemo(()=>KZ(ae),[ae]),$=F==null?void 0:F.find(re=>re.id===a),J=K==null?void 0:K.find(re=>re.id===l);C.useEffect(()=>{R.current=d},[d]);const le=re=>{k(me=>({...me,[re]:!me[re]}))};C.useEffect(()=>{if(!b){if(v){j(!1);return}if(X&&l){const re=X.filter(Le=>Le.castaway_id===l),me={};re.forEach(Le=>{me[Le.scoring_rule_id]=Le.quantity}),h(me),y(!1)}else l&&(h({}),y(!1))}},[l,X]);const ve=C.useCallback(async(re,me)=>{if(!a||!re||!(e!=null&&e.id))return;const{data:{session:Le}}=await G.auth.getSession();if(!(Le!=null&&Le.access_token))throw new Error("Not authenticated");const En=Object.entries(me).filter(([fr,Ve])=>Ve>0).map(([fr,Ve])=>({castaway_id:re,scoring_rule_id:fr,quantity:Ve})),Tr=await ut(`/episodes/${a}/scoring/save`,Le.access_token,{method:"POST",body:JSON.stringify({scores:En})});if(Tr.error)throw new Error(Tr.error);m(new Date),y(!1),j(!0),t.invalidateQueries({queryKey:["episodeScores",a]}),D()},[a,e==null?void 0:e.id,t,D]),Ee=$e({mutationFn:async()=>{if(!a)throw new Error("No episode selected");const{data:{session:re}}=await G.auth.getSession();if(!(re!=null&&re.access_token))throw new Error("Not authenticated");const me=await ut(`/episodes/${a}/scoring/finalize`,re.access_token,{method:"POST"});if(me.error)throw new Error(me.error);return me.data},onSuccess:re=>{T({success:!0,eliminated:(re==null?void 0:re.eliminated)||[]}),P(!1),t.invalidateQueries({queryKey:["episodes"]}),t.invalidateQueries({queryKey:["episodeScores"]}),t.invalidateQueries({queryKey:["castaways"]}),t.invalidateQueries({queryKey:["scoringStatus"]}),D()},onError:()=>{T({success:!1,eliminated:[]}),P(!1)}});C.useEffect(()=>{const re=L.current;if(re&&re!==l&&g){const me={...d};w(!0),ve(re,me).finally(()=>{w(!1)})}L.current=l},[l,g,d,ve]),C.useEffect(()=>{if(!g||!l)return;H.current&&clearTimeout(H.current);const re=l;return H.current=setTimeout(async()=>{const me={...R.current};w(!0);try{await ve(re,me)}finally{w(!1)}},2e3),()=>{H.current&&clearTimeout(H.current)}},[d,g,l,ve]);const De=(re,me)=>{h(Le=>({...Le,[re]:Math.max(0,me)})),y(!0)},Fe=C.useMemo(()=>Object.entries(d).reduce((re,[me,Le])=>{const En=ae==null?void 0:ae.find(Tr=>Tr.id===me);return re+((En==null?void 0:En.points)||0)*Le},0),[d,ae]);return M&&M.role!=="admin"?r.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200",children:[r.jsx(de,{}),r.jsx("main",{className:"max-w-4xl mx-auto px-4 py-16 text-center",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated p-12",children:[r.jsx("h1",{className:"text-2xl font-display text-neutral-800 mb-3",children:"Access Denied"}),r.jsx("p",{className:"text-neutral-500 mb-8",children:"You don't have permission to access this page."}),r.jsx(Y,{to:"/dashboard",className:"btn btn-primary",children:"Back to Dashboard"})]})})]}):r.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200",children:[r.jsx(de,{}),r.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[r.jsx(Vte,{scoringStatus:ee||null,selectedEpisodeId:a,selectedEpisode:$,finalizeMutation:Ee,onShowFinalizeModal:()=>P(!0)}),r.jsxs("div",{className:"grid lg:grid-cols-4 gap-8",children:[r.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[r.jsx(Gte,{episodes:F||[],selectedEpisodeId:a,onSelect:re=>{i(re),u(null)}}),a&&r.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated overflow-hidden flex flex-col h-[500px]",children:[r.jsxs("div",{className:"p-5 border-b border-cream-100 flex items-center justify-between",children:[r.jsx("h3",{className:"font-semibold text-neutral-800",children:"Castaways"}),ee&&r.jsxs("span",{className:"text-[10px] bg-cream-100 text-neutral-500 px-2 py-0.5 rounded-full font-bold uppercase tracking-wider",children:[ee.scored_castaways,"/",ee.total_castaways]})]}),r.jsx(zte,{castaways:K||[],selectedCastawayId:l,onSelect:re=>u(re),existingScores:X||[]})]})]}),r.jsx("div",{className:"lg:col-span-3",children:a?l?r.jsxs("div",{className:"space-y-6",children:[r.jsx(Wte,{castaway:J,totalPoints:Fe,episodeNumber:($==null?void 0:$.number)||0,isSaving:b,isDirty:g,lastSavedAt:p}),te.length>0&&r.jsx(Sk,{category:"Most Common",rules:te,scores:d,isExpanded:E["Most Common"]??!0,onToggle:()=>le("Most Common"),onUpdateScore:De,isFeatured:!0}),Object.entries(V).map(([re,me])=>r.jsx(Sk,{category:re,rules:me,scores:d,isExpanded:E[re]??!1,onToggle:()=>le(re),onUpdateScore:De},re))]}):r.jsx("div",{className:"bg-white rounded-2xl shadow-elevated p-12 text-center",children:r.jsx("p",{className:"text-neutral-500",children:"Select a castaway to enter scores"})}):r.jsx("div",{className:"bg-white rounded-2xl shadow-elevated p-12 text-center",children:r.jsx("p",{className:"text-neutral-500",children:"Select an episode to begin scoring"})})})]}),r.jsx(Bte,{isOpen:S,onClose:()=>P(!1),onConfirm:()=>Ee.mutate(),isPending:Ee.isPending,scoringStatus:ee||{is_complete:!1,total_castaways:0,scored_castaways:0,unscored_castaway_ids:[],unscored_castaway_names:[],is_finalized:!1}}),A&&r.jsx(Hte,{isOpen:!!A,onClose:()=>T(null),result:{success:A.success,eliminated:A.eliminated.map(re=>{var me;return((me=K==null?void 0:K.find(Le=>Le.id===re))==null?void 0:me.name)||re})}})]})]})}function Kte({castaway:e,isEliminated:t=!1,onEdit:n,onEliminate:s,onReactivate:a,isReactivating:i=!1}){const l=e.best_placement===1,u=t?"bg-neutral-50 rounded-xl p-4 flex items-center gap-4 opacity-75":`rounded-xl p-4 flex items-center gap-4 ${l?"bg-yellow-50 border border-yellow-200":"bg-cream-50"}`,d=t?"relative w-14 h-14 bg-neutral-200 rounded-xl flex items-center justify-center overflow-hidden grayscale":"relative w-14 h-14 bg-cream-200 rounded-xl flex items-center justify-center overflow-hidden",h=t?"font-semibold text-neutral-600 truncate":"font-semibold text-neutral-800 truncate",p=t?"text-sm text-neutral-400":"text-sm text-neutral-500";return r.jsxs("div",{className:u,children:[r.jsxs("div",{className:d,children:[e.photo_url?r.jsx("img",{src:e.photo_url,alt:e.name,className:"w-14 h-14 object-cover"}):r.jsx("span",{className:"text-xl font-bold text-neutral-400",children:e.name.charAt(0)}),l&&r.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-yellow-400 rounded-full flex items-center justify-center",children:r.jsx(rt,{className:"h-3 w-3 text-yellow-900"})})]}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("p",{className:h,children:e.name}),e.previous_seasons&&e.previous_seasons.length>0&&r.jsxs("span",{className:"flex items-center gap-1 text-xs bg-purple-100 text-purple-700 px-2 py-0.5 rounded-full",children:[r.jsx(Zu,{className:"h-3 w-3"}),e.previous_seasons.length,"x"]})]}),r.jsx("p",{className:p,children:t?e.placement?`#${e.placement}`:"Eliminated":e.occupation||"No occupation"}),!t&&!e.photo_url&&r.jsx("p",{className:"text-xs text-orange-500",children:"Missing photo"})]}),r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsx("button",{onClick:n,className:"px-3 py-1.5 bg-blue-100 text-blue-700 rounded-lg text-sm font-medium hover:bg-blue-200 transition-colors",children:"Edit"}),t?r.jsx("button",{onClick:a,disabled:i,className:"px-3 py-1.5 bg-green-100 text-green-700 rounded-lg text-sm font-medium hover:bg-green-200 transition-colors disabled:opacity-50",children:"Reactivate"}):r.jsx("button",{onClick:s,className:"px-3 py-1.5 bg-red-100 text-red-700 rounded-lg text-sm font-medium hover:bg-red-200 transition-colors",children:"Eliminate"})]})]})}function Ek({castaways:e,isLoading:t=!1,variant:n,onEdit:s,onEliminate:a,onReactivate:i,isReactivating:l=!1}){const u=n==="eliminated",d=u?"bg-neutral-50":"bg-green-50",h=u?"text-neutral-600":"text-green-800",p=u?`Eliminated (${e.length})`:`Active Castaways (${e.length})`;return t?r.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated overflow-hidden animate-slide-up",children:[r.jsx("div",{className:`p-6 border-b border-cream-100 ${d}`,children:r.jsx("h2",{className:`font-semibold ${h}`,children:p})}),r.jsx("div",{className:"p-12 text-center",children:r.jsx("div",{className:"w-8 h-8 mx-auto border-2 border-burgundy-500 border-t-transparent rounded-full animate-spin"})})]}):e.length===0?null:r.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated overflow-hidden animate-slide-up",children:[r.jsx("div",{className:`p-6 border-b border-cream-100 ${d}`,children:r.jsx("h2",{className:`font-semibold ${h}`,children:p})}),r.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4 p-6",children:e.map(m=>r.jsx(Kte,{castaway:m,isEliminated:u,onEdit:()=>s(m),onEliminate:a?()=>a(m.id):void 0,onReactivate:i?()=>i(m.id):void 0,isReactivating:l},m.id))})]})}function Yte({castawayName:e,episodes:t,selectedEpisodeId:n,onEpisodeChange:s,onConfirm:a,onCancel:i,isPending:l}){return r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated max-w-md w-full p-6 animate-slide-up",children:[r.jsx("h3",{className:"text-xl font-display text-neutral-800 mb-4",children:"Eliminate Castaway"}),r.jsxs("p",{className:"text-neutral-500 mb-6",children:["Select the episode when ",e," was eliminated."]}),r.jsxs("select",{value:n,onChange:u=>s(u.target.value),className:"w-full p-3 border border-cream-200 rounded-xl mb-6 focus:ring-2 focus:ring-burgundy-500",children:[r.jsx("option",{value:"",children:"Select episode..."}),t.map(u=>r.jsxs("option",{value:u.id,children:["Episode ",u.number,": ",u.title||"TBD"]},u.id))]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:i,className:"flex-1 btn bg-cream-100 text-neutral-700 hover:bg-cream-200",children:"Cancel"}),r.jsx("button",{onClick:a,disabled:!n||l,className:"flex-1 btn bg-red-600 text-white hover:bg-red-700 disabled:opacity-50",children:l?"Eliminating...":"Confirm"})]})]})})}function Jte({formData:e,onFormChange:t,onSave:n,onCancel:s,isPending:a}){return r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated max-w-lg w-full p-6 animate-slide-up my-8",children:[r.jsx("h3",{className:"text-xl font-display text-neutral-800 mb-6",children:"Edit Castaway"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Photo URL"}),r.jsx("input",{type:"url",value:e.photo_url,onChange:i=>t({...e,photo_url:i.target.value}),placeholder:"https://example.com/photo.jpg",className:"w-full p-3 border border-cream-200 rounded-xl focus:ring-2 focus:ring-burgundy-500"}),e.photo_url&&r.jsxs("div",{className:"mt-2 flex items-center gap-3",children:[r.jsx("img",{src:e.photo_url,alt:"Preview",className:"w-16 h-16 rounded-xl object-cover border border-cream-200",onError:i=>{i.target.style.display="none"}}),r.jsx("span",{className:"text-xs text-green-600",children:"Preview"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Name"}),r.jsx("input",{type:"text",value:e.name,onChange:i=>t({...e,name:i.target.value}),className:"w-full p-3 border border-cream-200 rounded-xl focus:ring-2 focus:ring-burgundy-500"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Age"}),r.jsx("input",{type:"number",value:e.age,onChange:i=>t({...e,age:i.target.value}),className:"w-full p-3 border border-cream-200 rounded-xl focus:ring-2 focus:ring-burgundy-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Hometown"}),r.jsx("input",{type:"text",value:e.hometown,onChange:i=>t({...e,hometown:i.target.value}),className:"w-full p-3 border border-cream-200 rounded-xl focus:ring-2 focus:ring-burgundy-500"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Occupation"}),r.jsx("input",{type:"text",value:e.occupation,onChange:i=>t({...e,occupation:i.target.value}),className:"w-full p-3 border border-cream-200 rounded-xl focus:ring-2 focus:ring-burgundy-500"})]}),r.jsxs("div",{className:"border-t border-cream-200 pt-4 mt-4",children:[r.jsxs("h4",{className:"font-medium text-neutral-800 mb-3 flex items-center gap-2",children:[r.jsx(Zu,{className:"h-4 w-4 text-purple-500"}),"Returning Player Info"]}),r.jsxs("div",{className:"mb-4",children:[r.jsxs("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:["Previous Seasons"," ",r.jsx("span",{className:"text-neutral-400 font-normal",children:"(comma-separated)"})]}),r.jsx("input",{type:"text",value:e.previous_seasons,onChange:i=>t({...e,previous_seasons:i.target.value}),placeholder:"Heroes vs. Villains, Winners at War",className:"w-full p-3 border border-cream-200 rounded-xl focus:ring-2 focus:ring-burgundy-500"})]}),r.jsxs("div",{className:"mb-4",children:[r.jsxs("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:["Best Placement ",r.jsx("span",{className:"text-neutral-400 font-normal",children:"(1 = winner)"})]}),r.jsx("input",{type:"number",min:"1",value:e.best_placement,onChange:i=>t({...e,best_placement:i.target.value}),placeholder:"1",className:"w-full p-3 border border-cream-200 rounded-xl focus:ring-2 focus:ring-burgundy-500"}),e.best_placement==="1"&&r.jsxs("p",{className:"text-xs text-yellow-600 mt-1 flex items-center gap-1",children:[r.jsx(rt,{className:"h-3 w-3"})," Will show winner badge"]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Fun Fact"}),r.jsx("textarea",{value:e.fun_fact,onChange:i=>t({...e,fun_fact:i.target.value}),placeholder:"Interesting trivia about this castaway...",rows:3,className:"w-full p-3 border border-cream-200 rounded-xl focus:ring-2 focus:ring-burgundy-500 resize-none"})]})]}),r.jsxs("div",{className:"flex gap-3 mt-6",children:[r.jsx("button",{onClick:s,className:"flex-1 btn bg-cream-100 text-neutral-700 hover:bg-cream-200",children:"Cancel"}),r.jsx("button",{onClick:n,disabled:a||!e.name,className:"flex-1 btn bg-burgundy-600 text-white hover:bg-burgundy-700 disabled:opacity-50",children:a?"Saving...":"Save Changes"})]})]})})}function Qte({missingPhotosCount:e,onAutoPopulatePhotos:t,isPending:n}){return e===0?null:r.jsx("button",{onClick:t,disabled:n,className:"btn bg-purple-600 text-white hover:bg-purple-700 disabled:opacity-50 flex items-center gap-2",children:n?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Populating..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Yn,{className:"h-4 w-4"}),"Auto-Populate ",e," Photos"]})})}function Ck(){var H;const{user:e}=yt(),t=zt(),[n,s]=C.useState(null),[a,i]=C.useState(null),[l,u]=C.useState(""),[d,h]=C.useState({name:"",age:"",hometown:"",occupation:"",photo_url:"",previous_seasons:"",best_placement:"",fun_fact:""}),{data:p}=se({queryKey:["profile",e==null?void 0:e.id],queryFn:async()=>{const{data:R,error:M}=await G.from("users").select("id, display_name, role").eq("id",e.id).single();if(M)throw M;return R},enabled:!!(e!=null&&e.id)}),{data:m}=se({queryKey:["activeSeason"],queryFn:async()=>{const{data:R,error:M}=await G.from("seasons").select("*").eq("is_active",!0).single();if(M&&M.code!=="PGRST116")throw M;return R}}),{data:g,isLoading:y}=se({queryKey:["castaways",m==null?void 0:m.id],queryFn:async()=>{if(!(m!=null&&m.id))return[];const{data:R,error:M}=await G.from("castaways").select("*").eq("season_id",m.id).order("name");if(M)throw M;return R},enabled:!!(m!=null&&m.id)}),{data:b}=se({queryKey:["episodes",m==null?void 0:m.id],queryFn:async()=>{if(!(m!=null&&m.id))return[];const{data:R,error:M}=await G.from("episodes").select("id, number, title").eq("season_id",m.id).order("number");if(M)throw M;return R},enabled:!!(m!=null&&m.id)}),w=$e({mutationFn:async({castawayId:R,episodeId:M,placement:O})=>{const{data:{session:F}}=await G.auth.getSession();if(!(F!=null&&F.access_token))throw new Error("Not authenticated");const K=await ut(`/admin/castaways/${R}/eliminate`,F.access_token,{method:"POST",body:JSON.stringify({episode_id:M,placement:O})});if(K.error)throw new Error(K.error);return K.data},onSuccess:()=>{t.invalidateQueries({queryKey:["castaways"]}),i(null),u("")}}),v=$e({mutationFn:async R=>{const{data:{session:M}}=await G.auth.getSession();if(!(M!=null&&M.access_token))throw new Error("Not authenticated");const O=await ut(`/admin/castaways/${R}`,M.access_token,{method:"PATCH",body:JSON.stringify({status:"active",eliminated_episode_id:null,placement:null})});if(O.error)throw new Error(O.error);return O.data},onSuccess:()=>{t.invalidateQueries({queryKey:["castaways"]})}}),j=$e({mutationFn:async({castawayId:R,data:M})=>{const{data:{session:O}}=await G.auth.getSession();if(!(O!=null&&O.access_token))throw new Error("Not authenticated");const F=await ut(`/admin/castaways/${R}`,O.access_token,{method:"PATCH",body:JSON.stringify(M)});if(F.error)throw new Error(F.error);return F.data},onSuccess:()=>{t.invalidateQueries({queryKey:["castaways"]}),s(null)}}),E=R=>{var M,O,F;s(R.id),h({name:R.name,age:((M=R.age)==null?void 0:M.toString())||"",hometown:R.hometown||"",occupation:R.occupation||"",photo_url:R.photo_url||"",previous_seasons:((O=R.previous_seasons)==null?void 0:O.join(", "))||"",best_placement:((F=R.best_placement)==null?void 0:F.toString())||"",fun_fact:R.fun_fact||""})},k=()=>{if(!n)return;const R=d.previous_seasons?d.previous_seasons.split(",").map(F=>F.trim()).filter(F=>F):null,M=d.age?parseInt(d.age):null;if(M!==null&&(isNaN(M)||M<1||M>120)){alert("Age must be a valid number between 1 and 120");return}const O=d.best_placement?parseInt(d.best_placement):null;if(O!==null&&(isNaN(O)||O<1||O>24)){alert("Best placement must be between 1 and 24");return}j.mutate({castawayId:n,data:{name:d.name,age:M,hometown:d.hometown||null,occupation:d.occupation||null,photo_url:d.photo_url||null,previous_seasons:R,best_placement:O,fun_fact:d.fun_fact||null}})},S=R=>`https://api.dicebear.com/7.x/initials/svg?seed=${encodeURIComponent(R)}&backgroundColor=8B0000&textColor=ffffff&fontSize=40`,P=$e({mutationFn:async()=>{if(!g)return{updated:0};const{data:{session:R}}=await G.auth.getSession();if(!(R!=null&&R.access_token))throw new Error("Not authenticated");const M=g.filter(O=>!O.photo_url).map(O=>({id:O.id,photo_url:S(O.name)}));for(const O of M){const F=await ut(`/admin/castaways/${O.id}`,R.access_token,{method:"PATCH",body:JSON.stringify({photo_url:O.photo_url})});if(F.error)throw new Error(F.error)}return{updated:M.length}},onSuccess:()=>{t.invalidateQueries({queryKey:["castaways"]})}}),A=(g==null?void 0:g.filter(R=>!R.photo_url).length)||0,T=(g==null?void 0:g.filter(R=>R.status==="active"))||[],L=(g==null?void 0:g.filter(R=>R.status==="eliminated"))||[];return p&&p.role!=="admin"?r.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200",children:[r.jsx(de,{}),r.jsx("main",{className:"max-w-4xl mx-auto px-4 py-16 text-center",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated p-12",children:[r.jsx("h1",{className:"text-2xl font-display text-neutral-800 mb-3",children:"Access Denied"}),r.jsx(Y,{to:"/dashboard",className:"btn btn-primary",children:"Back to Dashboard"})]})})]}):r.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200",children:[r.jsx(de,{}),r.jsxs("main",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-8 animate-fade-in",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx(Y,{to:"/admin",className:"text-neutral-400 hover:text-neutral-600 transition-colors",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),r.jsx("h1",{className:"text-2xl font-display text-neutral-800",children:"Manage Castaways"})]}),r.jsxs("p",{className:"text-neutral-500",children:[T.length," active, ",L.length," eliminated"]})]}),r.jsx(Qte,{missingPhotosCount:A,onAutoPopulatePhotos:()=>P.mutate(),isPending:P.isPending})]}),r.jsx("div",{className:"mb-8",children:r.jsx(Ek,{castaways:T,isLoading:y,variant:"active",onEdit:E,onEliminate:R=>i(R)})}),r.jsx("div",{style:{animationDelay:"0.1s"},children:r.jsx(Ek,{castaways:L,variant:"eliminated",onEdit:E,onReactivate:R=>v.mutate(R),isReactivating:v.isPending})}),a&&r.jsx(Yte,{castawayName:((H=g==null?void 0:g.find(R=>R.id===a))==null?void 0:H.name)||"",episodes:b||[],selectedEpisodeId:l,onEpisodeChange:u,onConfirm:()=>{l&&w.mutate({castawayId:a,episodeId:l})},onCancel:()=>{i(null),u("")},isPending:w.isPending}),n&&r.jsx(Jte,{formData:d,onFormChange:h,onSave:k,onCancel:()=>s(null),isPending:j.isPending})]})]})}function Tk(){const e=zt(),[t,n]=C.useState(!1),[s,a]=C.useState(null),[i,l]=C.useState({number:"",name:"",registration_opens_at:"",draft_order_deadline:"",registration_closes_at:"",premiere_at:"",draft_deadline:"",finale_at:""}),[u,d]=C.useState([]),h=()=>{const k=[],S=i.registration_opens_at?new Date(i.registration_opens_at):null,P=i.draft_order_deadline?new Date(i.draft_order_deadline):null,A=i.registration_closes_at?new Date(i.registration_closes_at):null,T=i.premiere_at?new Date(i.premiere_at):null,L=i.draft_deadline?new Date(i.draft_deadline):null,H=i.finale_at?new Date(i.finale_at):null;return i.number||k.push("Season number is required"),i.name||k.push("Season name is required"),S||k.push("Registration opens date is required"),P||k.push("Draft order deadline is required"),A||k.push("Registration closes date is required"),T||k.push("Premiere date is required"),L||k.push("Draft deadline is required"),S&&P&&S>=P&&k.push("Registration must open before draft order deadline"),P&&A&&P>=A&&k.push("Draft order deadline must be before registration closes"),A&&T&&A>T&&k.push("Registration must close before or on premiere date"),T&&L&&T>L&&k.push("Premiere must be before or on draft deadline"),L&&H&&L>=H&&k.push("Draft deadline must be before finale"),T&&H&&T>=H&&k.push("Premiere must be before finale"),d(k),k.length===0},{data:p,isLoading:m}=se({queryKey:["admin-seasons"],queryFn:async()=>{const{data:k,error:S}=await G.from("seasons").select("*").order("number",{ascending:!1});if(S)throw S;return k}}),g=$e({mutationFn:async()=>{const k={number:parseInt(i.number),name:i.name,registration_opens_at:i.registration_opens_at,draft_order_deadline:i.draft_order_deadline,registration_closes_at:i.registration_closes_at,premiere_at:i.premiere_at,draft_deadline:i.draft_deadline,finale_at:i.finale_at||null};if(s){const{error:S}=await G.from("seasons").update(k).eq("id",s);if(S)throw S}else{const{error:S}=await G.from("seasons").insert(k);if(S)throw S}},onSuccess:()=>{e.invalidateQueries({queryKey:["admin-seasons"]}),w()}}),y=$e({mutationFn:async k=>{const{error:S}=await G.from("seasons").update({is_active:!1}).neq("id",k);if(S)throw S;const{error:P}=await G.from("seasons").update({is_active:!0}).eq("id",k);if(P)throw P},onSuccess:()=>{e.invalidateQueries({queryKey:["admin-seasons"]})}}),b=$e({mutationFn:async k=>{const{error:S}=await G.from("seasons").delete().eq("id",k);if(S)throw S},onSuccess:()=>{e.invalidateQueries({queryKey:["admin-seasons"]})}}),w=()=>{n(!1),a(null),d([]),l({number:"",name:"",registration_opens_at:"",draft_order_deadline:"",registration_closes_at:"",premiere_at:"",draft_deadline:"",finale_at:""})},v=()=>{h()&&g.mutate()},j=k=>{var S,P,A,T,L,H;d([]),a(k.id),l({number:k.number.toString(),name:k.name,registration_opens_at:((S=k.registration_opens_at)==null?void 0:S.slice(0,16))||"",draft_order_deadline:((P=k.draft_order_deadline)==null?void 0:P.slice(0,16))||"",registration_closes_at:((A=k.registration_closes_at)==null?void 0:A.slice(0,16))||"",premiere_at:((T=k.premiere_at)==null?void 0:T.slice(0,16))||"",draft_deadline:((L=k.draft_deadline)==null?void 0:L.slice(0,16))||"",finale_at:((H=k.finale_at)==null?void 0:H.slice(0,16))||""}),n(!0)},E=k=>k?new Date(k).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"-";return m?r.jsxs(r.Fragment,{children:[r.jsx(de,{}),r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center",children:r.jsx(ge,{className:"h-8 w-8 text-burgundy-500 animate-spin"})})]}):r.jsxs(r.Fragment,{children:[r.jsx(de,{}),r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 p-4 pb-24",children:r.jsxs("div",{className:"max-w-4xl mx-auto",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Y,{to:"/admin",className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:r.jsx(at,{className:"h-5 w-5 text-neutral-600"})}),r.jsxs("div",{children:[r.jsxs("h1",{className:"text-2xl font-display font-bold text-neutral-800 flex items-center gap-2",children:[r.jsx(ur,{className:"h-6 w-6 text-orange-500"}),"Manage Seasons"]}),r.jsxs("p",{className:"text-neutral-500",children:[(p==null?void 0:p.length)||0," seasons"]})]})]}),r.jsxs("button",{onClick:()=>n(!0),className:"btn btn-primary flex items-center gap-2",children:[r.jsx(Io,{className:"h-5 w-5"}),"New Season"]})]}),t&&r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200 mb-6",children:[r.jsx("h3",{className:"text-lg font-display font-bold text-neutral-800 mb-4",children:s?"Edit Season":"Create Season"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[r.jsxs("label",{className:"block",children:[r.jsx("span",{className:"text-neutral-500 text-sm",children:"Season Number"}),r.jsx("input",{type:"number",value:i.number,onChange:k=>l({...i,number:k.target.value}),className:"input mt-1"})]}),r.jsxs("label",{className:"block",children:[r.jsx("span",{className:"text-neutral-500 text-sm",children:"Season Name"}),r.jsx("input",{type:"text",value:i.name,onChange:k=>l({...i,name:k.target.value}),placeholder:"Survivor 50",className:"input mt-1"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[r.jsxs("label",{className:"block",children:[r.jsx("span",{className:"text-neutral-500 text-sm",children:"Registration Opens"}),r.jsx("input",{type:"datetime-local",value:i.registration_opens_at,onChange:k=>l({...i,registration_opens_at:k.target.value}),className:"input mt-1"})]}),r.jsxs("label",{className:"block",children:[r.jsx("span",{className:"text-neutral-500 text-sm",children:"Registration Closes"}),r.jsx("input",{type:"datetime-local",value:i.registration_closes_at,onChange:k=>l({...i,registration_closes_at:k.target.value}),className:"input mt-1"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[r.jsxs("label",{className:"block",children:[r.jsx("span",{className:"text-neutral-500 text-sm",children:"Draft Order Deadline"}),r.jsx("input",{type:"datetime-local",value:i.draft_order_deadline,onChange:k=>l({...i,draft_order_deadline:k.target.value}),className:"input mt-1"})]}),r.jsxs("label",{className:"block",children:[r.jsx("span",{className:"text-neutral-500 text-sm",children:"Draft Deadline"}),r.jsx("input",{type:"datetime-local",value:i.draft_deadline,onChange:k=>l({...i,draft_deadline:k.target.value}),className:"input mt-1"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[r.jsxs("label",{className:"block",children:[r.jsx("span",{className:"text-neutral-500 text-sm",children:"Premiere Date"}),r.jsx("input",{type:"datetime-local",value:i.premiere_at,onChange:k=>l({...i,premiere_at:k.target.value}),className:"input mt-1"})]}),r.jsxs("label",{className:"block",children:[r.jsx("span",{className:"text-neutral-500 text-sm",children:"Finale Date"}),r.jsx("input",{type:"datetime-local",value:i.finale_at,onChange:k=>l({...i,finale_at:k.target.value}),className:"input mt-1"})]})]}),u.length>0&&r.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-xl",children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(ot,{className:"h-5 w-5 text-red-500 flex-shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-red-800",children:"Please fix the following errors:"}),r.jsx("ul",{className:"mt-2 space-y-1 text-sm text-red-600",children:u.map((k,S)=>r.jsx("li",{children:k},S))})]})]})}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:v,disabled:g.isPending,className:"flex-1 bg-orange-500 hover:bg-orange-600 text-white py-2 px-4 rounded-xl font-medium transition-colors flex items-center justify-center gap-2",children:g.isPending?r.jsx(ge,{className:"h-4 w-4 animate-spin"}):r.jsxs(r.Fragment,{children:[r.jsx(Rt,{className:"h-4 w-4"}),s?"Update":"Create"]})}),r.jsx("button",{onClick:w,className:"bg-cream-100 hover:bg-cream-200 text-neutral-700 py-2 px-4 rounded-xl font-medium transition-colors",children:"Cancel"})]})]}),r.jsxs("div",{className:"space-y-3",children:[p==null?void 0:p.map(k=>r.jsxs("div",{className:`bg-white rounded-2xl shadow-card p-4 border ${k.is_active?"border-orange-300 ring-2 ring-orange-100":"border-cream-200"}`,children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("h3",{className:"text-lg font-display font-bold text-neutral-800",children:["Season ",k.number]}),k.is_active&&r.jsxs("span",{className:"px-2 py-0.5 bg-orange-100 text-orange-600 text-xs rounded-full flex items-center gap-1",children:[r.jsx(Yn,{className:"h-3 w-3"})," Active"]})]}),r.jsx("p",{className:"text-neutral-500",children:k.name})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("button",{onClick:()=>j(k),className:"p-2 hover:bg-cream-100 rounded-xl transition-colors",children:r.jsx(Tp,{className:"h-4 w-4 text-neutral-500"})}),!k.is_active&&r.jsx("button",{onClick:()=>{confirm("Delete this season? This cannot be undone.")&&b.mutate(k.id)},className:"p-2 hover:bg-red-50 rounded-xl transition-colors",children:r.jsx(Id,{className:"h-4 w-4 text-red-500"})})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm mb-3",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-neutral-400",children:"Premiere:"}),r.jsx("span",{className:"text-neutral-700 ml-2",children:E(k.premiere_at)})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-neutral-400",children:"Finale:"}),r.jsx("span",{className:"text-neutral-700 ml-2",children:E(k.finale_at)})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-neutral-400",children:"Registration:"}),r.jsx("span",{className:"text-neutral-700 ml-2",children:E(k.registration_opens_at)})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-neutral-400",children:"Draft Deadline:"}),r.jsx("span",{className:"text-neutral-700 ml-2",children:E(k.draft_deadline)})]})]}),r.jsxs("div",{className:"flex gap-2",children:[!k.is_active&&r.jsx("button",{onClick:()=>y.mutate(k.id),disabled:y.isPending,className:"flex-1 bg-orange-50 hover:bg-orange-100 text-orange-600 py-2 rounded-xl text-sm font-medium transition-colors",children:"Set as Active"}),r.jsx(Y,{to:`/admin/seasons/${k.id}/episodes`,className:"flex-1 bg-cream-100 hover:bg-cream-200 text-neutral-700 py-2 rounded-xl text-sm font-medium text-center transition-colors",children:"Manage Episodes"}),r.jsx(Y,{to:`/admin/seasons/${k.id}/castaways`,className:"flex-1 bg-cream-100 hover:bg-cream-200 text-neutral-700 py-2 rounded-xl text-sm font-medium text-center transition-colors",children:"Castaways"})]})]},k.id)),(p==null?void 0:p.length)===0&&r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-8 border border-cream-200 text-center",children:[r.jsx(ur,{className:"h-12 w-12 text-neutral-400 mx-auto mb-4"}),r.jsx("p",{className:"text-neutral-500",children:"No seasons yet. Create your first season!"})]})]})]})})]})}function Xte(){const{seasonId:e}=kn(),t=zt(),[n,s]=C.useState(!1),[a,i]=C.useState(null),[l,u]=C.useState({number:"",title:"",air_date:"",picks_lock_at:"",results_posted_at:"",is_finale:!1}),{data:d}=se({queryKey:["season",e],queryFn:async()=>{if(!e)throw new Error("No season ID");const{data:S,error:P}=await G.from("seasons").select("*").eq("id",e).single();if(P)throw P;return S},enabled:!!e}),{data:h,isLoading:p}=se({queryKey:["admin-episodes",e],queryFn:async()=>{if(!e)throw new Error("No season ID");const{data:S,error:P}=await G.from("episodes").select("*, users!results_released_by(display_name)").eq("season_id",e).order("number",{ascending:!0});if(P)throw P;return S},enabled:!!e}),m=$e({mutationFn:async()=>{if(!e)throw new Error("No season ID");const S={season_id:e,number:parseInt(l.number),week_number:parseInt(l.number),title:l.title||null,air_date:l.air_date,picks_lock_at:l.picks_lock_at,results_posted_at:l.results_posted_at||null,is_finale:l.is_finale};if(a){const{error:P}=await G.from("episodes").update(S).eq("id",a);if(P)throw P}else{const{error:P}=await G.from("episodes").insert(S);if(P)throw P}},onSuccess:()=>{t.invalidateQueries({queryKey:["admin-episodes",e]}),v()}}),g=$e({mutationFn:async S=>{const{error:P}=await G.from("episodes").delete().eq("id",S);if(P)throw P},onSuccess:()=>{t.invalidateQueries({queryKey:["admin-episodes",e]})}}),y=$e({mutationFn:async S=>{const{data:{session:P}}=await G.auth.getSession();if(!P)throw new Error("Not authenticated");const T=await fetch(`/api/admin/episodes/${S}/lock`,{method:"POST",headers:{Authorization:`Bearer ${P.access_token}`,"Content-Type":"application/json"}}),L=await T.json();if(!T.ok)throw new Error(L.error||"Failed to lock results");return L},onSuccess:S=>{t.invalidateQueries({queryKey:["admin-episodes",e]}),alert(S.message||"Results locked! They will be released automatically.")},onError:S=>{alert(`Error: ${S.message}`)}}),b=$e({mutationFn:async S=>{const{data:{session:P}}=await G.auth.getSession();if(!P)throw new Error("Not authenticated");const T=await fetch(`/api/admin/episodes/${S}/release-results`,{method:"POST",headers:{Authorization:`Bearer ${P.access_token}`,"Content-Type":"application/json"}}),L=await T.json();if(!T.ok)throw new Error(L.error||"Failed to release results");return L},onSuccess:S=>{t.invalidateQueries({queryKey:["admin-episodes",e]}),alert(`Results released! Sent ${S.notifications_sent} spoiler-safe notifications.`)},onError:S=>{alert(`Error: ${S.message}`)}}),w=$e({mutationFn:async()=>{if(!d)throw new Error("No season");const S=new Date(d.premiere_at),P=[];for(let T=1;T<=14;T++){const L=new Date(S);L.setDate(S.getDate()+(T-1)*7);const H=new Date(L);H.setHours(15,0,0,0);const R=new Date(L);R.setDate(R.getDate()+2),R.setHours(12,0,0,0),P.push({season_id:e,number:T,week_number:T,title:T===14?"Finale":`Episode ${T}`,air_date:L.toISOString(),picks_lock_at:H.toISOString(),results_posted_at:R.toISOString(),is_finale:T===14})}const{error:A}=await G.from("episodes").insert(P);if(A)throw A},onSuccess:()=>{t.invalidateQueries({queryKey:["admin-episodes",e]})}}),v=()=>{s(!1),i(null),u({number:"",title:"",air_date:"",picks_lock_at:"",results_posted_at:"",is_finale:!1})},j=S=>{var P,A,T;i(S.id),u({number:S.number.toString(),title:S.title||"",air_date:((P=S.air_date)==null?void 0:P.slice(0,16))||"",picks_lock_at:((A=S.picks_lock_at)==null?void 0:A.slice(0,16))||"",results_posted_at:((T=S.results_posted_at)==null?void 0:T.slice(0,16))||"",is_finale:S.is_finale||!1}),s(!0)},E=S=>S?new Date(S).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}):"-",k=S=>S?new Date(S).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}):"";return p?r.jsxs(r.Fragment,{children:[r.jsx(de,{}),r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center",children:r.jsx(ge,{className:"h-8 w-8 text-burgundy-500 animate-spin"})})]}):r.jsxs(r.Fragment,{children:[r.jsx(de,{}),r.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 p-4 pb-24",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Y,{to:"/admin/seasons",className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:r.jsx(at,{className:"h-5 w-5 text-neutral-600"})}),r.jsxs("div",{children:[r.jsxs("h1",{className:"text-2xl font-display font-bold text-neutral-800 flex items-center gap-2",children:[r.jsx(Tm,{className:"h-6 w-6 text-burgundy-500"}),"Episodes"]}),r.jsxs("p",{className:"text-neutral-500",children:["Season ",d==null?void 0:d.number,": ",d==null?void 0:d.name]})]})]}),r.jsx("button",{onClick:()=>s(!0),className:"p-2 bg-burgundy-500 hover:bg-burgundy-600 rounded-xl transition-colors shadow-card",children:r.jsx(Io,{className:"h-5 w-5 text-white"})})]}),(h==null?void 0:h.length)===0&&r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200 mb-6 text-center",children:[r.jsx(Tm,{className:"h-12 w-12 text-neutral-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-display font-bold text-neutral-800 mb-2",children:"No Episodes Yet"}),r.jsx("p",{className:"text-neutral-500 mb-4",children:"Generate all 14 episodes based on the premiere date, or add them manually."}),r.jsx("button",{onClick:()=>w.mutate(),disabled:w.isPending,className:"btn btn-primary",children:w.isPending?r.jsx(ge,{className:"h-4 w-4 animate-spin"}):r.jsxs(r.Fragment,{children:[r.jsx(Io,{className:"h-4 w-4"}),"Generate All Episodes"]})})]}),n&&r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200 mb-6",children:[r.jsx("h3",{className:"text-lg font-display font-bold text-neutral-800 mb-4",children:a?"Edit Episode":"Add Episode"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[r.jsxs("label",{className:"block",children:[r.jsx("span",{className:"text-neutral-500 text-sm",children:"Episode Number"}),r.jsx("input",{type:"number",value:l.number,onChange:S=>u({...l,number:S.target.value}),className:"input mt-1"})]}),r.jsxs("label",{className:"block",children:[r.jsx("span",{className:"text-neutral-500 text-sm",children:"Title (Optional)"}),r.jsx("input",{type:"text",value:l.title,onChange:S=>u({...l,title:S.target.value}),placeholder:"Episode Title",className:"input mt-1"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[r.jsxs("label",{className:"block",children:[r.jsx("span",{className:"text-neutral-500 text-sm",children:"Air Date"}),r.jsx("input",{type:"datetime-local",value:l.air_date,onChange:S=>u({...l,air_date:S.target.value}),className:"input mt-1"})]}),r.jsxs("label",{className:"block",children:[r.jsx("span",{className:"text-neutral-500 text-sm",children:"Picks Lock At"}),r.jsx("input",{type:"datetime-local",value:l.picks_lock_at,onChange:S=>u({...l,picks_lock_at:S.target.value}),className:"input mt-1"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[r.jsxs("label",{className:"block",children:[r.jsx("span",{className:"text-neutral-500 text-sm",children:"Results Posted At"}),r.jsx("input",{type:"datetime-local",value:l.results_posted_at,onChange:S=>u({...l,results_posted_at:S.target.value}),className:"input mt-1"})]}),r.jsxs("label",{className:"flex items-center gap-2 mt-6",children:[r.jsx("input",{type:"checkbox",checked:l.is_finale,onChange:S=>u({...l,is_finale:S.target.checked}),className:"w-5 h-5 rounded bg-cream-100 border-cream-300 text-burgundy-500"}),r.jsx("span",{className:"text-neutral-700",children:"Is Finale"})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>m.mutate(),disabled:m.isPending,className:"btn btn-primary flex-1",children:m.isPending?r.jsx(ge,{className:"h-4 w-4 animate-spin"}):r.jsxs(r.Fragment,{children:[r.jsx(Rt,{className:"h-4 w-4"}),a?"Update":"Create"]})}),r.jsx("button",{onClick:v,className:"btn btn-secondary",children:"Cancel"})]})]}),r.jsx("div",{className:"space-y-3",children:h==null?void 0:h.map(S=>r.jsxs("div",{className:`bg-white rounded-2xl shadow-card p-4 border ${S.is_scored?"border-green-300":"border-cream-200"}`,children:[r.jsxs("div",{className:"flex items-start justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-cream-100 rounded-full flex items-center justify-center border border-cream-200",children:r.jsx("span",{className:"text-burgundy-500 font-bold",children:S.number})}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h3",{className:"text-neutral-800 font-medium",children:S.title||`Episode ${S.number}`}),S.is_finale&&r.jsx(Yn,{className:"h-4 w-4 text-burgundy-500"}),S.is_scored&&r.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-600 text-xs rounded-full",children:"Scored"})]}),r.jsxs("p",{className:"text-neutral-500 text-sm",children:[E(S.air_date)," at ",k(S.air_date)]})]})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("button",{onClick:()=>j(S),className:"p-2 hover:bg-cream-100 rounded-xl transition-colors",children:r.jsx(Tp,{className:"h-4 w-4 text-neutral-500"})}),r.jsx("button",{onClick:()=>{confirm("Delete this episode?")&&g.mutate(S.id)},className:"p-2 hover:bg-red-50 rounded-xl transition-colors",children:r.jsx(Id,{className:"h-4 w-4 text-red-500"})})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-neutral-500 mb-3",children:[r.jsxs("div",{children:["Picks Lock: ",E(S.picks_lock_at)," ",k(S.picks_lock_at)]}),r.jsxs("div",{children:["Results: ",E(S.results_posted_at)," ",k(S.results_posted_at)]})]}),S.is_scored?S.results_released_at?r.jsxs("div",{className:"flex items-center justify-center gap-2 text-green-600 text-sm py-2",children:[r.jsx(At,{className:"h-4 w-4"}),r.jsxs("span",{children:["Results Released ",new Date(S.results_released_at).toLocaleDateString()]})]}):S.results_locked_at?r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsxs("div",{className:"flex items-center justify-center gap-2 text-amber-600 text-sm py-2",children:[r.jsx(Dn,{className:"h-4 w-4"}),r.jsx("span",{children:"Locked - releasing automatically"})]}),r.jsx("button",{onClick:()=>{confirm("Release results immediately? This will send spoiler-safe notifications to all users.")&&b.mutate(S.id)},disabled:b.isPending,className:"w-full bg-blue-50 hover:bg-blue-100 text-blue-600 py-2 rounded-xl text-sm font-medium flex items-center justify-center gap-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:b.isPending?r.jsxs(r.Fragment,{children:[r.jsx(ge,{className:"h-4 w-4 animate-spin"}),r.jsx("span",{children:"Releasing..."})]}):r.jsxs(r.Fragment,{children:[r.jsx(Rp,{className:"h-4 w-4"}),r.jsx("span",{children:"Release Now"})]})})]}):r.jsx("button",{onClick:()=>{confirm("Lock results for release? They will be sent automatically within 15 minutes.")&&y.mutate(S.id)},disabled:y.isPending,className:"w-full bg-amber-50 hover:bg-amber-100 text-amber-600 py-2 rounded-xl text-sm font-medium flex items-center justify-center gap-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:y.isPending?r.jsxs(r.Fragment,{children:[r.jsx(ge,{className:"h-4 w-4 animate-spin"}),r.jsx("span",{children:"Locking..."})]}):r.jsxs(r.Fragment,{children:[r.jsx(Dn,{className:"h-4 w-4"}),r.jsx("span",{children:"Lock Results for Release"})]})}):r.jsx(Y,{to:`/admin/episodes/${S.id}/scoring`,className:"block w-full bg-burgundy-50 hover:bg-burgundy-100 text-burgundy-600 py-2 rounded-xl text-sm font-medium text-center transition-colors",children:"Enter Scores"})]},S.id))})]})]})}function Zte(){const[e,t]=C.useState(""),[n,s]=C.useState("all"),{data:a,isLoading:i}=se({queryKey:["admin-leagues"],queryFn:async()=>{const{data:h,error:p}=await G.from("leagues").select("*, seasons(number, name), users:commissioner_id(display_name)").order("created_at",{ascending:!1});if(p)throw p;return h||[]}}),{data:l}=se({queryKey:["admin-league-member-counts"],queryFn:async()=>{const{data:h,error:p}=await G.from("league_members").select("league_id");if(p)throw p;const m={};return h==null||h.forEach(g=>{m[g.league_id]=(m[g.league_id]||0)+1}),m}}),u=a==null?void 0:a.filter(h=>{const p=h.name.toLowerCase().includes(e.toLowerCase())||h.code.toLowerCase().includes(e.toLowerCase()),m=n==="all"||h.status===n;return p&&m}),d={total:(a==null?void 0:a.length)||0,active:(a==null?void 0:a.filter(h=>h.status==="active").length)||0,drafting:(a==null?void 0:a.filter(h=>h.status==="drafting").length)||0,forming:(a==null?void 0:a.filter(h=>h.status==="forming").length)||0,paid:(a==null?void 0:a.filter(h=>h.require_donation).length)||0};return i?r.jsxs(r.Fragment,{children:[r.jsx(de,{}),r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center",children:r.jsx(ge,{className:"h-8 w-8 text-burgundy-500 animate-spin"})})]}):r.jsxs(r.Fragment,{children:[r.jsx(de,{}),r.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 p-4 pb-24",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx(Y,{to:"/admin",className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:r.jsx(at,{className:"h-5 w-5 text-neutral-600"})}),r.jsxs("div",{children:[r.jsxs("h1",{className:"text-2xl font-display font-bold text-neutral-800 flex items-center gap-2",children:[r.jsx(Ye,{className:"h-6 w-6 text-burgundy-500"}),"All Leagues"]}),r.jsxs("p",{className:"text-neutral-500",children:[(a==null?void 0:a.length)||0," total leagues"]})]})]}),r.jsxs("div",{className:"grid grid-cols-4 gap-2 mb-6",children:[r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-3 border border-cream-200 text-center",children:[r.jsx("p",{className:"text-xl font-bold text-neutral-800",children:d.total}),r.jsx("p",{className:"text-neutral-500 text-xs",children:"Total"})]}),r.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-2xl p-3 text-center",children:[r.jsx("p",{className:"text-xl font-bold text-green-600",children:d.active}),r.jsx("p",{className:"text-neutral-500 text-xs",children:"Active"})]}),r.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-2xl p-3 text-center",children:[r.jsx("p",{className:"text-xl font-bold text-amber-600",children:d.drafting}),r.jsx("p",{className:"text-neutral-500 text-xs",children:"Drafting"})]}),r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-2xl p-3 text-center",children:[r.jsx("p",{className:"text-xl font-bold text-blue-600",children:d.paid}),r.jsx("p",{className:"text-neutral-500 text-xs",children:"Paid"})]})]}),r.jsxs("div",{className:"flex gap-2 mb-6",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(Ei,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-neutral-400"}),r.jsx("input",{type:"text",value:e,onChange:h=>t(h.target.value),placeholder:"Search leagues...",className:"input pl-10"})]}),r.jsxs("select",{value:n,onChange:h=>s(h.target.value),className:"input px-3 py-2 w-36",children:[r.jsx("option",{value:"all",children:"All Status"}),r.jsx("option",{value:"forming",children:"Forming"}),r.jsx("option",{value:"drafting",children:"Drafting"}),r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"completed",children:"Completed"})]})]}),r.jsxs("div",{className:"space-y-3",children:[u==null?void 0:u.map(h=>{var p,m;return r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-4 border border-cream-200",children:[r.jsxs("div",{className:"flex items-start justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[h.is_global&&r.jsx(yi,{className:"h-4 w-4 text-burgundy-500"}),r.jsx("h3",{className:"text-neutral-800 font-medium",children:h.name})]}),r.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs ${h.status==="active"?"bg-green-100 text-green-600":h.status==="drafting"?"bg-amber-100 text-amber-600":h.status==="completed"?"bg-neutral-100 text-neutral-600":"bg-blue-100 text-blue-600"}`,children:h.status})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm text-neutral-500 mb-3",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx($n,{className:"h-4 w-4"}),r.jsx("span",{children:(p=h.users)==null?void 0:p.display_name})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Ye,{className:"h-4 w-4"}),r.jsxs("span",{children:[(l==null?void 0:l[h.id])||0,"/",h.max_players," players"]})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-neutral-400",children:"Code:"})," ",r.jsx("span",{className:"font-mono text-burgundy-500",children:h.code})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-neutral-400",children:"Season:"})," ",r.jsx("span",{children:(m=h.seasons)==null?void 0:m.number})]})]}),h.require_donation&&r.jsxs("div",{className:"flex items-center gap-1 text-sm text-green-600 mb-3",children:[r.jsx(To,{className:"h-4 w-4"}),r.jsxs("span",{children:["$",h.donation_amount," entry fee"]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Y,{to:`/leagues/${h.id}`,className:"btn btn-secondary flex-1 text-center",children:"View League"}),r.jsx(Y,{to:`/leagues/${h.id}/settings`,className:"btn btn-primary flex-1 text-center",children:"Settings"})]})]},h.id)}),(u==null?void 0:u.length)===0&&r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-8 border border-cream-200 text-center",children:[r.jsx(Ye,{className:"h-12 w-12 text-neutral-400 mx-auto mb-4"}),r.jsx("p",{className:"text-neutral-500",children:"No leagues found."})]})]})]})]})}function ene({stats:e}){return r.jsxs("div",{className:"grid grid-cols-5 gap-2 mb-6",children:[r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-3 border border-cream-200 text-center",children:[r.jsx("p",{className:"text-xl font-bold text-neutral-800",children:e.total}),r.jsx("p",{className:"text-neutral-500 text-xs",children:"Total"})]}),r.jsxs("div",{className:"bg-neutral-50 border border-neutral-200 rounded-2xl p-3 text-center",children:[r.jsx("p",{className:"text-xl font-bold text-neutral-600",children:e.players}),r.jsx("p",{className:"text-neutral-500 text-xs",children:"Players"})]}),r.jsxs("div",{className:"bg-burgundy-50 border border-burgundy-200 rounded-2xl p-3 text-center",children:[r.jsx("p",{className:"text-xl font-bold text-burgundy-600",children:e.commissioners}),r.jsx("p",{className:"text-neutral-500 text-xs",children:"League Creators"})]}),r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-3 text-center",children:[r.jsx("p",{className:"text-xl font-bold text-red-600",children:e.admins}),r.jsx("p",{className:"text-neutral-500 text-xs",children:"Admins"})]}),r.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-2xl p-3 text-center",children:[r.jsx("p",{className:"text-xl font-bold text-green-600",children:e.verified}),r.jsx("p",{className:"text-neutral-500 text-xs",children:"Verified"})]})]})}function tne({search:e,onSearchChange:t,roleFilter:n,onRoleFilterChange:s}){return r.jsxs("div",{className:"flex gap-2 mb-6",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(Ei,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-neutral-400"}),r.jsx("input",{type:"text",value:e,onChange:a=>t(a.target.value),placeholder:"Search users...",className:"input pl-10"})]}),r.jsxs("select",{value:n,onChange:a=>s(a.target.value),className:"input px-3 py-2 w-36",children:[r.jsx("option",{value:"all",children:"All Roles"}),r.jsx("option",{value:"player",children:"Players"}),r.jsx("option",{value:"commissioner",children:"League Creators"}),r.jsx("option",{value:"admin",children:"Admins"})]})]})}const Rk=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),Ik=e=>e?/^[+]?[(]?[0-9]{1,4}[)]?[-\s./0-9]*$/.test(e)&&e.replace(/\D/g,"").length>=10:!0,E0=(e,t=200)=>e.slice(0,t).trim();function nne({user:e,leagueCount:t,isSelected:n,onSelect:s,isExpanded:a,onExpand:i,isEditing:l,onEdit:u,onCancelEdit:d,onSave:h,onUpdateRole:p,editForm:m,onEditFormChange:g,isSaving:y}){const b=v=>{switch(v){case"admin":return r.jsx(uk,{className:"h-4 w-4 text-red-500"});case"commissioner":return r.jsx(dk,{className:"h-4 w-4 text-burgundy-500"});default:return r.jsx(vi,{className:"h-4 w-4 text-neutral-400"})}},w=v=>{switch(v){case"admin":return"bg-red-100 text-red-600";case"commissioner":return"bg-burgundy-100 text-burgundy-600";default:return"bg-neutral-100 text-neutral-600"}};return r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-4 border border-cream-200",children:[r.jsxs("div",{className:"flex items-start justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[e.avatar_url?r.jsx("img",{src:e.avatar_url,alt:"",className:"w-10 h-10 rounded-full object-cover"}):r.jsx("div",{className:"w-10 h-10 bg-cream-100 rounded-full flex items-center justify-center border border-cream-200",children:r.jsx(Ye,{className:"h-5 w-5 text-neutral-400"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-neutral-800 font-medium",children:e.display_name}),r.jsx("p",{className:"text-neutral-500 text-sm",children:e.email})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("span",{className:`px-2 py-0.5 rounded-full text-xs flex items-center gap-1 ${w(e.role)}`,children:[b(e.role),e.role]}),r.jsxs("div",{className:"relative",children:[r.jsx("button",{onClick:()=>s(n?null:e.id),className:"p-1 hover:bg-cream-100 rounded",children:r.jsx(xJ,{className:"h-4 w-4 text-neutral-400"})}),n&&r.jsxs("div",{className:"absolute right-0 top-full mt-1 bg-white border border-cream-200 rounded-xl shadow-card z-10 min-w-32",children:[r.jsxs("button",{onClick:()=>p(e.id,"player"),className:"w-full px-3 py-2 text-left text-sm text-neutral-800 hover:bg-cream-50 flex items-center gap-2 rounded-t-xl",children:[r.jsx(vi,{className:"h-4 w-4"})," Set Player"]}),r.jsxs("button",{onClick:()=>p(e.id,"commissioner"),className:"w-full px-3 py-2 text-left text-sm text-neutral-800 hover:bg-cream-50 flex items-center gap-2",children:[r.jsx(dk,{className:"h-4 w-4"})," Set League Creator"]}),r.jsxs("button",{onClick:()=>p(e.id,"admin"),className:"w-full px-3 py-2 text-left text-sm text-neutral-800 hover:bg-cream-50 flex items-center gap-2 rounded-b-xl",children:[r.jsx(uk,{className:"h-4 w-4"})," Set Admin"]})]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-2 text-sm text-neutral-500",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(xs,{className:"h-4 w-4"}),r.jsx("span",{className:"truncate",children:e.email})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(ed,{className:"h-4 w-4"}),r.jsxs("span",{children:[e.phone||"No phone",e.phone_verified&&r.jsx("span",{className:"text-green-500 ml-1",children:""})]})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(ur,{className:"h-4 w-4"}),r.jsx("span",{children:new Date(e.created_at).toLocaleDateString()})]})]}),r.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[r.jsxs("span",{className:"text-neutral-400 text-sm",children:[t," leagues"]}),r.jsx("button",{onClick:()=>i(a?null:e.id),className:"text-burgundy-500 hover:text-burgundy-700 text-sm flex items-center gap-1",children:a?r.jsxs(r.Fragment,{children:["Hide Details ",r.jsx(qr,{className:"h-4 w-4"})]}):r.jsxs(r.Fragment,{children:["View Full Profile ",r.jsx(xn,{className:"h-4 w-4"})]})})]}),a&&r.jsxs("div",{className:"mt-4 pt-4 border-t border-cream-200 space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h4",{className:"font-medium text-neutral-700 text-sm",children:"Full Profile"}),l?r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:h,disabled:y,className:"px-3 py-1 bg-green-500 hover:bg-green-600 text-white text-xs rounded-lg flex items-center gap-1",children:[y?r.jsx(ge,{className:"h-3 w-3 animate-spin"}):r.jsx(Rt,{className:"h-3 w-3"}),"Save"]}),r.jsxs("button",{onClick:d,className:"px-3 py-1 bg-neutral-200 hover:bg-neutral-300 text-neutral-700 text-xs rounded-lg flex items-center gap-1",children:[r.jsx(Sn,{className:"h-3 w-3"}),"Cancel"]})]}):r.jsxs("button",{onClick:()=>u(e),className:"px-3 py-1 bg-burgundy-100 hover:bg-burgundy-200 text-burgundy-700 text-xs rounded-lg flex items-center gap-1",children:[r.jsx(Tp,{className:"h-3 w-3"}),"Edit"]})]}),l?r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-neutral-400 text-xs uppercase tracking-wide block mb-1",children:"Display Name"}),r.jsx("input",{type:"text",value:m.display_name,onChange:v=>g({...m,display_name:E0(v.target.value,100)}),className:"input text-sm",maxLength:100,required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-neutral-400 text-xs uppercase tracking-wide block mb-1",children:"Email"}),r.jsx("input",{type:"email",value:m.email,onChange:v=>g({...m,email:v.target.value.toLowerCase().trim()}),className:`input text-sm ${m.email&&!Rk(m.email)?"border-red-300 focus:ring-red-500":""}`,maxLength:254,required:!0}),m.email&&!Rk(m.email)&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:"Invalid email format"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-neutral-400 text-xs uppercase tracking-wide block mb-1",children:"Phone"}),r.jsx("input",{type:"tel",value:m.phone,onChange:v=>g({...m,phone:v.target.value.slice(0,20)}),className:`input text-sm ${m.phone&&!Ik(m.phone)?"border-red-300 focus:ring-red-500":""}`,placeholder:"+1 555-123-4567",maxLength:20}),m.phone&&!Ik(m.phone)&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:"Invalid phone format"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-neutral-400 text-xs uppercase tracking-wide block mb-1",children:"Hometown"}),r.jsx("input",{type:"text",value:m.hometown,onChange:v=>g({...m,hometown:E0(v.target.value,100)}),className:"input text-sm",placeholder:"City, State",maxLength:100})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-neutral-400 text-xs uppercase tracking-wide block mb-1",children:"Favorite Castaway"}),r.jsx("input",{type:"text",value:m.favorite_castaway,onChange:v=>g({...m,favorite_castaway:E0(v.target.value,100)}),className:"input text-sm",placeholder:"Boston Rob, Parvati...",maxLength:100})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-neutral-400 text-xs uppercase tracking-wide block mb-1",children:"Timezone"}),r.jsxs("select",{value:m.timezone,onChange:v=>g({...m,timezone:v.target.value}),className:"input text-sm",children:[r.jsx("option",{value:"America/Los_Angeles",children:"Pacific (LA)"}),r.jsx("option",{value:"America/Denver",children:"Mountain (Denver)"}),r.jsx("option",{value:"America/Chicago",children:"Central (Chicago)"}),r.jsx("option",{value:"America/New_York",children:"Eastern (NYC)"})]})]})]}):r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-neutral-400 text-xs uppercase tracking-wide",children:"User ID"}),r.jsx("p",{className:"font-mono text-xs text-neutral-600 break-all",children:e.id})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-neutral-400 text-xs uppercase tracking-wide",children:"Email"}),r.jsx("p",{className:"text-neutral-800",children:e.email})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-neutral-400 text-xs uppercase tracking-wide",children:"Phone"}),r.jsxs("p",{className:"text-neutral-800 flex items-center gap-1",children:[e.phone||"Not provided",e.phone_verified&&r.jsx("span",{className:"text-green-500 text-xs",children:"(verified)"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-neutral-400 text-xs uppercase tracking-wide",children:"Hometown"}),r.jsx("p",{className:"text-neutral-800 flex items-center gap-1",children:e.hometown?r.jsxs(r.Fragment,{children:[r.jsx(Bv,{className:"h-3 w-3"})," ",e.hometown]}):r.jsx("span",{className:"text-neutral-400",children:"Not provided"})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-neutral-400 text-xs uppercase tracking-wide",children:"Favorite Castaway"}),r.jsx("p",{className:"text-neutral-800 flex items-center gap-1",children:e.favorite_castaway?r.jsxs(r.Fragment,{children:[r.jsx(kp,{className:"h-3 w-3"})," ",e.favorite_castaway]}):r.jsx("span",{className:"text-neutral-400",children:"Not provided"})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-neutral-400 text-xs uppercase tracking-wide",children:"Timezone"}),r.jsx("p",{className:"text-neutral-800",children:e.timezone||"America/Los_Angeles"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-neutral-400 text-xs uppercase tracking-wide",children:"Created"}),r.jsx("p",{className:"text-neutral-800",children:new Date(e.created_at).toLocaleString()})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-neutral-400 text-xs uppercase tracking-wide",children:"Last Updated"}),r.jsx("p",{className:"text-neutral-800",children:new Date(e.updated_at).toLocaleString()})]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-2 pt-2",children:[r.jsxs("div",{className:`p-2 rounded-lg text-center ${e.notification_email?"bg-green-50 text-green-700":"bg-neutral-100 text-neutral-400"}`,children:[r.jsx(xs,{className:"h-4 w-4 mx-auto mb-1"}),r.jsxs("span",{className:"text-xs",children:["Email ",e.notification_email?"ON":"OFF"]})]}),r.jsxs("div",{className:`p-2 rounded-lg text-center ${e.notification_sms?"bg-green-50 text-green-700":"bg-neutral-100 text-neutral-400"}`,children:[r.jsx(ed,{className:"h-4 w-4 mx-auto mb-1"}),r.jsxs("span",{className:"text-xs",children:["SMS ",e.notification_sms?"ON":"OFF"]})]}),r.jsxs("div",{className:`p-2 rounded-lg text-center ${e.notification_push?"bg-green-50 text-green-700":"bg-neutral-100 text-neutral-400"}`,children:[r.jsx("span",{className:"text-sm mx-auto mb-1 block",children:""}),r.jsxs("span",{className:"text-xs",children:["Push ",e.notification_push?"ON":"OFF"]})]})]})]})]})}function rne(){const e=zt(),{session:t}=yt(),[n,s]=C.useState(""),[a,i]=C.useState("all"),[l,u]=C.useState(null),[d,h]=C.useState(null),[p,m]=C.useState(null),[g,y]=C.useState(null),[b,w]=C.useState({display_name:"",email:"",phone:"",hometown:"",favorite_castaway:"",timezone:""}),{data:v,isLoading:j,error:E}=se({queryKey:["admin-users"],queryFn:async()=>{var M;if(!(t!=null&&t.access_token))throw new Error("Not authenticated");const R=await ut("/admin/users?limit=1000",t.access_token);if(R.error)throw new Error(R.error);return((M=R.data)==null?void 0:M.users)||[]},enabled:!!(t!=null&&t.access_token)}),{data:k}=se({queryKey:["admin-user-league-counts"],queryFn:async()=>{const{data:R,error:M}=await G.from("league_members").select("user_id");if(M)throw M;const O={};return R==null||R.forEach(F=>{O[F.user_id]=(O[F.user_id]||0)+1}),O}}),S=$e({mutationFn:async({userId:R,role:M})=>{if(!(t!=null&&t.access_token))throw new Error("Not authenticated");const O=await ut(`/admin/users/${R}`,t.access_token,{method:"PATCH",body:JSON.stringify({role:M})});if(O.error)throw new Error(O.error);return O.data},onSuccess:()=>{e.invalidateQueries({queryKey:["admin-users"]}),u(null),y(null)},onError:R=>{y(R.message||"Failed to update user role")}}),P=$e({mutationFn:async({userId:R,data:M})=>{if(!(t!=null&&t.access_token))throw new Error("Not authenticated");const O=await ut(`/admin/users/${R}`,t.access_token,{method:"PATCH",body:JSON.stringify(M)});if(O.error)throw new Error(O.error);return O.data},onSuccess:()=>{e.invalidateQueries({queryKey:["admin-users"]}),m(null),y(null)},onError:R=>{y(R.message||"Failed to update user")}}),A=R=>{m(R.id),w({display_name:R.display_name||"",email:R.email||"",phone:R.phone||"",hometown:R.hometown||"",favorite_castaway:R.favorite_castaway||"",timezone:R.timezone||"America/Los_Angeles"}),h(R.id)},T=()=>{p&&P.mutate({userId:p,data:b})},L=v==null?void 0:v.filter(R=>{var F,K,ae;const M=((F=R.display_name)==null?void 0:F.toLowerCase().includes(n.toLowerCase()))||((K=R.email)==null?void 0:K.toLowerCase().includes(n.toLowerCase()))||((ae=R.phone)==null?void 0:ae.includes(n)),O=a==="all"||R.role===a;return M&&O}),H={total:(v==null?void 0:v.length)||0,players:(v==null?void 0:v.filter(R=>R.role==="player").length)||0,commissioners:(v==null?void 0:v.filter(R=>R.role==="commissioner").length)||0,admins:(v==null?void 0:v.filter(R=>R.role==="admin").length)||0,verified:(v==null?void 0:v.filter(R=>R.phone_verified).length)||0};return E?r.jsxs(r.Fragment,{children:[r.jsx(de,{}),r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-8 border border-red-200 text-center max-w-md",children:[r.jsx(ot,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),r.jsx("h2",{className:"text-xl font-bold text-neutral-800 mb-2",children:"Access Denied"}),r.jsx("p",{className:"text-neutral-600 mb-4",children:E instanceof Error?E.message:"You do not have permission to view this page."}),r.jsx(Y,{to:"/admin",className:"inline-block px-4 py-2 bg-burgundy-500 text-white rounded-lg hover:bg-burgundy-600 transition-colors",children:"Back to Admin"})]})})]}):j?r.jsxs(r.Fragment,{children:[r.jsx(de,{}),r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center",children:r.jsx(ge,{className:"h-8 w-8 text-burgundy-500 animate-spin"})})]}):r.jsxs(r.Fragment,{children:[r.jsx(de,{}),r.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 p-4 pb-24",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx(Y,{to:"/admin",className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:r.jsx(at,{className:"h-5 w-5 text-neutral-600"})}),r.jsxs("div",{children:[r.jsxs("h1",{className:"text-2xl font-display font-bold text-neutral-800 flex items-center gap-2",children:[r.jsx(Ye,{className:"h-6 w-6 text-burgundy-500"}),"All Users"]}),r.jsxs("p",{className:"text-neutral-500",children:[(v==null?void 0:v.length)||0," registered users"]})]})]}),g&&r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 mb-4 flex items-center gap-3",children:[r.jsx(ot,{className:"h-5 w-5 text-red-500 flex-shrink-0"}),r.jsx("p",{className:"text-red-700",children:g}),r.jsx("button",{onClick:()=>y(null),className:"ml-auto text-red-500 hover:text-red-700",children:""})]}),r.jsx(ene,{stats:H}),r.jsx(tne,{search:n,onSearchChange:s,roleFilter:a,onRoleFilterChange:i}),r.jsxs("div",{className:"space-y-3",children:[L==null?void 0:L.map(R=>r.jsx(nne,{user:R,leagueCount:(k==null?void 0:k[R.id])||0,isSelected:l===R.id,onSelect:u,isExpanded:d===R.id,onExpand:h,isEditing:p===R.id,onEdit:A,onCancelEdit:()=>m(null),onSave:T,onUpdateRole:(M,O)=>S.mutate({userId:M,role:O}),editForm:b,onEditFormChange:w,isSaving:P.isPending},R.id)),(L==null?void 0:L.length)===0&&r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-8 border border-cream-200 text-center",children:[r.jsx(Ye,{className:"h-12 w-12 text-neutral-400 mx-auto mb-4"}),r.jsx("p",{className:"text-neutral-500",children:"No users found."})]})]})]})]})}function sne(){const e=zt(),[t,n]=C.useState(""),[s,a]=C.useState("all"),[i,l]=C.useState(null),{data:u,isLoading:d}=se({queryKey:["admin-payments"],queryFn:async()=>{const{data:b,error:w}=await G.from("payments").select("*, users(display_name, email), leagues(name)").order("created_at",{ascending:!1});if(w)throw w;return b||[]}}),h=$e({mutationFn:async b=>{const{error:w}=await G.from("payments").update({status:"refunded",refunded_at:new Date().toISOString()}).eq("id",b);if(w)throw w},onSuccess:()=>{e.invalidateQueries({queryKey:["admin-payments"]}),l(null)}}),p=u==null?void 0:u.filter(b=>{var j,E,k,S,P,A,T;const w=((E=(j=b.users)==null?void 0:j.display_name)==null?void 0:E.toLowerCase().includes(t.toLowerCase()))||((S=(k=b.users)==null?void 0:k.email)==null?void 0:S.toLowerCase().includes(t.toLowerCase()))||((A=(P=b.leagues)==null?void 0:P.name)==null?void 0:A.toLowerCase().includes(t.toLowerCase()))||((T=b.stripe_payment_intent_id)==null?void 0:T.includes(t)),v=s==="all"||b.status===s;return w&&v}),m={total:(u==null?void 0:u.length)||0,completed:(u==null?void 0:u.filter(b=>b.status==="completed").length)||0,refunded:(u==null?void 0:u.filter(b=>b.status==="refunded").length)||0,pending:(u==null?void 0:u.filter(b=>b.status==="pending").length)||0,totalRevenue:(u==null?void 0:u.filter(b=>b.status==="completed").reduce((b,w)=>b+parseFloat(w.amount||0),0))||0,totalRefunded:(u==null?void 0:u.filter(b=>b.status==="refunded").reduce((b,w)=>b+parseFloat(w.amount||0),0))||0},g=b=>{switch(b){case"completed":return r.jsx(At,{className:"h-4 w-4 text-green-500"});case"refunded":return r.jsx(ga,{className:"h-4 w-4 text-amber-500"});case"failed":return r.jsx(xi,{className:"h-4 w-4 text-red-500"});default:return r.jsx(ot,{className:"h-4 w-4 text-neutral-400"})}},y=b=>{switch(b){case"completed":return"bg-green-100 text-green-600";case"refunded":return"bg-amber-100 text-amber-600";case"failed":return"bg-red-100 text-red-600";default:return"bg-neutral-100 text-neutral-600"}};return d?r.jsxs(r.Fragment,{children:[r.jsx(de,{}),r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center",children:r.jsx(ge,{className:"h-8 w-8 text-burgundy-500 animate-spin"})})]}):r.jsxs(r.Fragment,{children:[r.jsx(de,{}),r.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 p-4 pb-24",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx(Y,{to:"/admin",className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:r.jsx(at,{className:"h-5 w-5 text-neutral-600"})}),r.jsxs("div",{children:[r.jsxs("h1",{className:"text-2xl font-display font-bold text-neutral-800 flex items-center gap-2",children:[r.jsx(To,{className:"h-6 w-6 text-burgundy-500"}),"All Payments"]}),r.jsxs("p",{className:"text-neutral-500",children:[(u==null?void 0:u.length)||0," transactions"]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[r.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-2xl p-4",children:[r.jsx("p",{className:"text-green-600 text-sm mb-1",children:"Total Revenue"}),r.jsxs("p",{className:"text-2xl font-bold text-green-700",children:["$",m.totalRevenue.toFixed(2)]}),r.jsxs("p",{className:"text-green-500 text-sm",children:[m.completed," payments"]})]}),r.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-2xl p-4",children:[r.jsx("p",{className:"text-amber-600 text-sm mb-1",children:"Total Refunded"}),r.jsxs("p",{className:"text-2xl font-bold text-amber-700",children:["$",m.totalRefunded.toFixed(2)]}),r.jsxs("p",{className:"text-amber-500 text-sm",children:[m.refunded," refunds"]})]})]}),r.jsxs("div",{className:"grid grid-cols-4 gap-2 mb-6",children:[r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-3 border border-cream-200 text-center",children:[r.jsx("p",{className:"text-xl font-bold text-neutral-800",children:m.total}),r.jsx("p",{className:"text-neutral-500 text-xs",children:"Total"})]}),r.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-2xl p-3 text-center",children:[r.jsx("p",{className:"text-xl font-bold text-green-600",children:m.completed}),r.jsx("p",{className:"text-neutral-500 text-xs",children:"Completed"})]}),r.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-2xl p-3 text-center",children:[r.jsx("p",{className:"text-xl font-bold text-amber-600",children:m.refunded}),r.jsx("p",{className:"text-neutral-500 text-xs",children:"Refunded"})]}),r.jsxs("div",{className:"bg-neutral-50 border border-neutral-200 rounded-2xl p-3 text-center",children:[r.jsx("p",{className:"text-xl font-bold text-neutral-600",children:m.pending}),r.jsx("p",{className:"text-neutral-500 text-xs",children:"Pending"})]})]}),r.jsxs("div",{className:"flex gap-2 mb-6",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(Ei,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-neutral-400"}),r.jsx("input",{type:"text",value:t,onChange:b=>n(b.target.value),placeholder:"Search payments...",className:"input pl-10"})]}),r.jsxs("select",{value:s,onChange:b=>a(b.target.value),className:"input px-3 py-2 w-36",children:[r.jsx("option",{value:"all",children:"All Status"}),r.jsx("option",{value:"completed",children:"Completed"}),r.jsx("option",{value:"pending",children:"Pending"}),r.jsx("option",{value:"refunded",children:"Refunded"}),r.jsx("option",{value:"failed",children:"Failed"})]})]}),r.jsxs("div",{className:"space-y-3",children:[p==null?void 0:p.map(b=>{var w,v,j;return r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-4 border border-cream-200",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-neutral-800 font-medium",children:(w=b.users)==null?void 0:w.display_name}),r.jsx("p",{className:"text-neutral-500 text-sm",children:(v=b.users)==null?void 0:v.email})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:"text-xl font-bold text-neutral-800",children:["$",parseFloat(b.amount).toFixed(2)]}),r.jsxs("span",{className:`px-2 py-0.5 rounded-full text-xs inline-flex items-center gap-1 ${y(b.status)}`,children:[g(b.status),b.status]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm text-neutral-500 mb-3",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-neutral-400",children:"League:"})," ",r.jsx("span",{children:(j=b.leagues)==null?void 0:j.name})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-neutral-400",children:"Date:"})," ",r.jsx("span",{children:new Date(b.created_at).toLocaleDateString()})]}),b.stripe_payment_intent_id&&r.jsxs("div",{className:"col-span-2",children:[r.jsx("span",{className:"text-neutral-400",children:"Stripe ID:"})," ",r.jsx("span",{className:"font-mono text-xs",children:b.stripe_payment_intent_id})]})]}),b.status==="completed"&&r.jsx("div",{className:"flex gap-2",children:i===b.id?r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>h.mutate(b.id),disabled:h.isPending,className:"btn flex-1 bg-red-100 text-red-600 hover:bg-red-200",children:h.isPending?r.jsx(ge,{className:"h-4 w-4 animate-spin"}):"Confirm Refund"}),r.jsx("button",{onClick:()=>l(null),className:"btn btn-secondary px-4",children:"Cancel"})]}):r.jsxs("button",{onClick:()=>l(b.id),className:"btn btn-secondary flex-1",children:[r.jsx(ga,{className:"h-4 w-4"}),"Issue Refund"]})}),b.status==="refunded"&&b.refunded_at&&r.jsxs("p",{className:"text-amber-600 text-sm",children:["Refunded on ",new Date(b.refunded_at).toLocaleDateString()]})]},b.id)}),(p==null?void 0:p.length)===0&&r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-8 border border-cream-200 text-center",children:[r.jsx(Wy,{className:"h-12 w-12 text-neutral-400 mx-auto mb-4"}),r.jsx("p",{className:"text-neutral-500",children:"No payments found."})]})]})]})]})}const ane={"draft-finalize":{description:"Auto-complete incomplete drafts",schedule:"Mar 2, 8pm PST (one-time)"},"lock-picks":{description:"Lock all pending weekly picks",schedule:"Wed 3pm PST (weekly)"},"auto-pick":{description:"Fill missing picks with auto-select",schedule:"Wed 3:05pm PST (weekly)"},"pick-reminders":{description:"Send pick reminder notifications",schedule:"Wed 12pm PST (weekly)"},"results-notification":{description:"Send scoring results to players",schedule:"Fri 12pm PST (weekly)"},"weekly-summary":{description:"Send weekly standings summary",schedule:"Sun 10am PST (weekly)"},"draft-reminders":{description:"Send draft reminder notifications",schedule:"Daily 9am PST"}},ine=Object.entries(ane).map(([e,t])=>({name:e,description:t.description,schedule:t.schedule,lastRun:null,nextRun:null,status:"pending",enabled:!0}));function one(){zt();const[e,t]=C.useState(null),[n,s]=C.useState({}),[a,i]=C.useState(new Set),{data:l,isLoading:u,refetch:d}=se({queryKey:["admin-jobs"],queryFn:async()=>{const{data:{session:w}}=await G.auth.getSession();if(!w)throw new Error("Not authenticated");const v=await fetch("/api/admin/jobs",{headers:{Authorization:`Bearer ${w.access_token}`}});if(!v.ok)throw new Error("Failed to fetch jobs");return(await v.json()).jobs||[]}}),h=ine.map(w=>{const v=l==null?void 0:l.find(k=>k.name===w.name),j=n[w.name],E=a.has(w.name);return{...w,lastRun:(j==null?void 0:j.lastRun)||(v==null?void 0:v.lastRun)||w.lastRun,nextRun:(v==null?void 0:v.nextRun)||w.nextRun,status:e===w.name?"running":(j==null?void 0:j.status)||(v==null?void 0:v.status)||w.status,enabled:!E&&((v==null?void 0:v.enabled)??w.enabled)}}),p=$e({mutationFn:async w=>{const{data:{session:v}}=await G.auth.getSession();if(!v)throw new Error("Not authenticated");const j=await fetch(`/api/admin/jobs/${w}/run`,{method:"POST",headers:{Authorization:`Bearer ${v.access_token}`,"Content-Type":"application/json"}});if(!j.ok){const E=await j.json();throw new Error(E.error||"Failed to run job")}return j.json()},onMutate:w=>{t(w)},onSuccess:(w,v)=>{s(j=>({...j,[v]:{status:"success",lastRun:new Date().toISOString(),message:w.result?JSON.stringify(w.result):void 0}})),t(null),d()},onError:(w,v)=>{s(j=>({...j,[v]:{status:"failed",lastRun:new Date().toISOString(),message:w.message}})),t(null)}}),m=w=>{i(v=>{const j=new Set(v);return j.has(w)?j.delete(w):j.add(w),j})},g=w=>{switch(w){case"success":return r.jsx(At,{className:"h-5 w-5 text-green-500"});case"failed":return r.jsx(xi,{className:"h-5 w-5 text-red-500"});case"running":return r.jsx(ge,{className:"h-5 w-5 text-burgundy-500 animate-spin"});default:return r.jsx(Ln,{className:"h-5 w-5 text-neutral-400"})}},y=w=>{switch(w){case"success":return"bg-green-100 text-green-600";case"failed":return"bg-red-100 text-red-600";case"running":return"bg-burgundy-100 text-burgundy-600";default:return"bg-neutral-100 text-neutral-600"}},b={total:h.length,enabled:h.filter(w=>w.enabled).length,success:h.filter(w=>w.status==="success").length,failed:h.filter(w=>w.status==="failed").length};return r.jsxs(r.Fragment,{children:[r.jsx(de,{}),r.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 p-4 pb-24",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx(Y,{to:"/admin",className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:r.jsx(at,{className:"h-5 w-5 text-neutral-600"})}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("h1",{className:"text-2xl font-display font-bold text-neutral-800 flex items-center gap-2",children:[r.jsx(Tc,{className:"h-6 w-6 text-burgundy-500"}),"System Jobs"]}),r.jsxs("p",{className:"text-neutral-500",children:[h.length," scheduled jobs"]})]}),r.jsx("button",{onClick:()=>d(),disabled:u,className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:r.jsx(ga,{className:`h-5 w-5 text-neutral-600 ${u?"animate-spin":""}`})})]}),r.jsxs("div",{className:"grid grid-cols-4 gap-2 mb-6",children:[r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-3 border border-cream-200 text-center",children:[r.jsx("p",{className:"text-xl font-bold text-neutral-800",children:b.total}),r.jsx("p",{className:"text-neutral-500 text-xs",children:"Total"})]}),r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-2xl p-3 text-center",children:[r.jsx("p",{className:"text-xl font-bold text-blue-600",children:b.enabled}),r.jsx("p",{className:"text-neutral-500 text-xs",children:"Enabled"})]}),r.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-2xl p-3 text-center",children:[r.jsx("p",{className:"text-xl font-bold text-green-600",children:b.success}),r.jsx("p",{className:"text-neutral-500 text-xs",children:"Success"})]}),r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-3 text-center",children:[r.jsx("p",{className:"text-xl font-bold text-red-600",children:b.failed}),r.jsx("p",{className:"text-neutral-500 text-xs",children:"Failed"})]})]}),r.jsx("div",{className:"space-y-3",children:h.map(w=>{var v;return r.jsxs("div",{className:`bg-white rounded-2xl shadow-card p-4 border transition-opacity ${w.enabled?"border-cream-200":"border-cream-100 opacity-50"}`,children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[g(e===w.name?"running":w.status),r.jsxs("div",{children:[r.jsx("h3",{className:"text-neutral-800 font-medium font-mono",children:w.name}),r.jsx("p",{className:"text-neutral-500 text-sm",children:w.description})]})]}),r.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs ${y(e===w.name?"running":w.status)}`,children:e===w.name?"running":w.status})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm text-neutral-500 mb-3",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(ur,{className:"h-4 w-4"}),r.jsx("span",{children:w.schedule})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(ga,{className:"h-4 w-4"}),r.jsxs("span",{children:["Last:"," ",w.lastRun?new Date(w.lastRun).toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"}):"Never"]})]})]}),((v=n[w.name])==null?void 0:v.message)&&r.jsxs("div",{className:`text-xs p-2 rounded-lg mb-3 ${n[w.name].status==="success"?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:[n[w.name].status==="success"?" ":" ",n[w.name].message]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>p.mutate(w.name),disabled:e===w.name||!w.enabled,className:"btn btn-primary flex-1 disabled:opacity-50 disabled:cursor-not-allowed",children:e===w.name?r.jsxs(r.Fragment,{children:[r.jsx(ge,{className:"h-4 w-4 animate-spin"}),"Running..."]}):r.jsxs(r.Fragment,{children:[r.jsx(N4,{className:"h-4 w-4"}),"Run Now"]})}),r.jsx("button",{onClick:()=>m(w.name),className:`btn ${w.enabled?"btn-secondary":"bg-green-100 text-green-600 hover:bg-green-200"} px-4`,children:w.enabled?"Disable":"Enable"})]})]},w.name)})}),r.jsx("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-2xl p-4",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(ot,{className:"h-5 w-5 text-blue-500 flex-shrink-0 mt-0.5"}),r.jsxs("div",{className:"text-sm text-blue-800",children:[r.jsx("p",{className:"font-medium mb-1",children:"About System Jobs"}),r.jsx("p",{className:"text-blue-600",children:"Jobs are scheduled using Supabase pg_cron. Manual runs are useful for testing or recovering from failures. All times are in PST."})]})]})})]})]})}function lne(){var l,u;const{data:e,isLoading:t}=se({queryKey:["global-league"],queryFn:async()=>{const{data:d,error:h}=await G.from("leagues").select("*, seasons(*)").eq("is_global",!0).single();if(h&&h.code!=="PGRST116")throw h;return d}}),{data:n,isLoading:s}=se({queryKey:["global-standings",e==null?void 0:e.id],queryFn:async()=>{if(!(e!=null&&e.id))throw new Error("No global league");const{data:d,error:h}=await G.from("league_members").select("*, users(display_name, avatar_url)").eq("league_id",e.id).order("total_points",{ascending:!1}).limit(100);if(h)throw h;return d||[]},enabled:!!(e!=null&&e.id)}),{data:a}=se({queryKey:["global-stats",e==null?void 0:e.id],queryFn:async()=>{var g;if(!(e!=null&&e.id))throw new Error("No global league");const{count:d}=await G.from("league_members").select("*",{count:"exact",head:!0}).eq("league_id",e.id),{data:h}=await G.from("league_members").select("total_points, users(display_name)").eq("league_id",e.id).order("total_points",{ascending:!1}).limit(1).single(),{data:p}=await G.from("league_members").select("total_points").eq("league_id",e.id),m=p!=null&&p.length?p.reduce((y,b)=>y+(b.total_points||0),0)/p.length:0;return{totalPlayers:d||0,topScore:(h==null?void 0:h.total_points)||0,topScorer:((g=h==null?void 0:h.users)==null?void 0:g.display_name)||"N/A",averageScore:Math.round(m)}},enabled:!!(e!=null&&e.id)});return t||s?r.jsxs(r.Fragment,{children:[r.jsx(de,{}),r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center",children:r.jsx(ge,{className:"h-8 w-8 text-burgundy-500 animate-spin"})})]}):e?r.jsxs(r.Fragment,{children:[r.jsx(de,{}),r.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 p-4 pb-24",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx(Y,{to:"/admin",className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:r.jsx(at,{className:"h-5 w-5 text-neutral-600"})}),r.jsxs("div",{children:[r.jsxs("h1",{className:"text-2xl font-display font-bold text-neutral-800 flex items-center gap-2",children:[r.jsx(yi,{className:"h-6 w-6 text-burgundy-500"}),"Global League"]}),r.jsxs("p",{className:"text-neutral-500",children:["Season ",(l=e.seasons)==null?void 0:l.number,": ",(u=e.seasons)==null?void 0:u.name]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[r.jsxs("div",{className:"bg-burgundy-50 border border-burgundy-200 rounded-2xl p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(Ye,{className:"h-5 w-5 text-burgundy-500"}),r.jsx("span",{className:"text-burgundy-600 text-sm",children:"Total Players"})]}),r.jsx("p",{className:"text-3xl font-bold text-neutral-800",children:(a==null?void 0:a.totalPlayers)||0})]}),r.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-2xl p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(Do,{className:"h-5 w-5 text-green-500"}),r.jsx("span",{className:"text-green-600 text-sm",children:"Average Score"})]}),r.jsx("p",{className:"text-3xl font-bold text-neutral-800",children:(a==null?void 0:a.averageScore)||0})]})]}),r.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-amber-100 border border-amber-200 rounded-2xl p-4 mb-6",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-16 h-16 bg-amber-200 rounded-full flex items-center justify-center",children:r.jsx($n,{className:"h-8 w-8 text-amber-600"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-amber-700 text-sm",children:"Current Leader"}),r.jsx("p",{className:"text-2xl font-bold text-neutral-800",children:a==null?void 0:a.topScorer}),r.jsxs("p",{className:"text-amber-600 font-medium",children:[a==null?void 0:a.topScore," points"]})]}),r.jsx(Yn,{className:"h-8 w-8 text-amber-500"})]})}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200",children:[r.jsx("div",{className:"px-4 py-3 border-b border-cream-200 flex items-center justify-between",children:r.jsxs("h2",{className:"text-lg font-display font-bold text-neutral-800 flex items-center gap-2",children:[r.jsx(rt,{className:"h-5 w-5 text-burgundy-500"}),"Top 100 Global Rankings"]})}),r.jsx("div",{className:"divide-y divide-cream-100",children:n==null?void 0:n.map((d,h)=>{var p,m;return r.jsxs("div",{className:`flex items-center gap-3 px-4 py-3 ${h<3?"bg-amber-50":""}`,children:[r.jsx("div",{className:"w-8 h-8 flex items-center justify-center",children:h===0?r.jsx("span",{className:"text-2xl",children:""}):h===1?r.jsx("span",{className:"text-2xl",children:""}):h===2?r.jsx("span",{className:"text-2xl",children:""}):r.jsx("span",{className:`font-bold ${h<10?"text-burgundy-500":"text-neutral-400"}`,children:h+1})}),(p=d.users)!=null&&p.avatar_url?r.jsx("img",{src:d.users.avatar_url,alt:"",className:"w-8 h-8 rounded-full object-cover"}):r.jsx("div",{className:"w-8 h-8 bg-cream-100 rounded-full flex items-center justify-center border border-cream-200",children:r.jsx(Ye,{className:"h-4 w-4 text-neutral-400"})}),r.jsx("div",{className:"flex-1 min-w-0",children:r.jsx("p",{className:"text-neutral-800 font-medium truncate",children:(m=d.users)==null?void 0:m.display_name})}),r.jsx("p",{className:`font-bold ${h===0?"text-amber-600 text-lg":h<3?"text-amber-600":"text-neutral-800"}`,children:d.total_points||0})]},d.id)})}),(!n||n.length===0)&&r.jsxs("div",{className:"p-8 text-center",children:[r.jsx(lr,{className:"h-12 w-12 text-neutral-400 mx-auto mb-4"}),r.jsx("p",{className:"text-neutral-500",children:"No rankings yet. Scoring will begin after the premiere."})]})]}),r.jsxs("div",{className:"mt-6 bg-white rounded-2xl shadow-card p-4 border border-cream-200",children:[r.jsx("h3",{className:"text-neutral-800 font-medium mb-3",children:"League Details"}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-neutral-400",children:"Code:"})," ",r.jsx("span",{className:"text-neutral-800 font-mono",children:e.code})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-neutral-400",children:"Status:"})," ",r.jsx("span",{className:"text-neutral-800",children:e.status})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-neutral-400",children:"Created:"})," ",r.jsx("span",{className:"text-neutral-800",children:e.created_at?new Date(e.created_at).toLocaleDateString():"N/A"})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-neutral-400",children:"Max Players:"})," ",r.jsx("span",{className:"text-neutral-800",children:e.max_players})]})]})]})]})]}):r.jsxs(r.Fragment,{children:[r.jsx(de,{}),r.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 p-4 pb-24",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx(Y,{to:"/admin",className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:r.jsx(at,{className:"h-5 w-5 text-neutral-600"})}),r.jsx("h1",{className:"text-2xl font-display font-bold text-neutral-800",children:"Global League"})]}),r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-8 border border-cream-200 text-center",children:[r.jsx(yi,{className:"h-16 w-16 text-neutral-400 mx-auto mb-4"}),r.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-2",children:"No Global League Found"}),r.jsx("p",{className:"text-neutral-500 mb-6",children:"Create a global league to enable cross-league rankings."}),r.jsx("button",{className:"btn btn-primary",children:"Create Global League"})]})]})]})}const q4=[{value:"low",label:"Low",color:"bg-green-100 text-green-700 border-green-200"},{value:"medium",label:"Medium",color:"bg-blue-100 text-blue-700 border-blue-200"},{value:"high",label:"High",color:"bg-amber-100 text-amber-700 border-amber-200"},{value:"urgent",label:"Urgent",color:"bg-red-100 text-red-700 border-red-200"}],cne=e=>{const t=q4.find(n=>n.value===e);return(t==null?void 0:t.color)||"bg-gray-100 text-gray-700"},une=e=>{switch(e){case"urgent":return r.jsx(dr,{className:"h-4 w-4"});case"high":return r.jsx(fc,{className:"h-4 w-4"});case"medium":return r.jsx(Ep,{className:"h-4 w-4"});default:return r.jsx(jp,{className:"h-4 w-4"})}};function dne(){const e=zt(),{session:t}=yt(),[n,s]=C.useState(!1),[a,i]=C.useState(null),[l,u]=C.useState(null),[d,h]=C.useState({title:"",content:"",priority:"medium",is_active:!0,expires_at:""}),{data:p,isLoading:m}=se({queryKey:["admin-announcements"],queryFn:async()=>{if(!(t!=null&&t.access_token))throw new Error("Not authenticated");const A=await ut("/admin/announcements",t.access_token);if(A.error)throw new Error(A.error);return A.data},enabled:!!(t!=null&&t.access_token)}),g=$e({mutationFn:async A=>{if(!(t!=null&&t.access_token))throw new Error("Not authenticated");const T=await ut("/admin/announcements",t.access_token,{method:"POST",body:JSON.stringify({...A,expires_at:A.expires_at||null})});if(T.error)throw new Error(T.error);return T.data},onSuccess:()=>{e.invalidateQueries({queryKey:["admin-announcements"]}),e.invalidateQueries({queryKey:["announcements"]}),s(!1),v()},onError:A=>u(A.message)}),y=$e({mutationFn:async({id:A,data:T})=>{if(!(t!=null&&t.access_token))throw new Error("Not authenticated");const L=await ut(`/admin/announcements/${A}`,t.access_token,{method:"PATCH",body:JSON.stringify({...T,expires_at:T.expires_at||null})});if(L.error)throw new Error(L.error);return L.data},onSuccess:()=>{e.invalidateQueries({queryKey:["admin-announcements"]}),e.invalidateQueries({queryKey:["announcements"]}),i(null),v()},onError:A=>u(A.message)}),b=$e({mutationFn:async A=>{if(!(t!=null&&t.access_token))throw new Error("Not authenticated");const T=await ut(`/admin/announcements/${A}/toggle`,t.access_token,{method:"POST"});if(T.error)throw new Error(T.error);return T.data},onSuccess:()=>{e.invalidateQueries({queryKey:["admin-announcements"]}),e.invalidateQueries({queryKey:["announcements"]})},onError:A=>u(A.message)}),w=$e({mutationFn:async A=>{if(!(t!=null&&t.access_token))throw new Error("Not authenticated");const T=await ut(`/admin/announcements/${A}`,t.access_token,{method:"DELETE"});if(T.error)throw new Error(T.error);return T.data},onSuccess:()=>{e.invalidateQueries({queryKey:["admin-announcements"]}),e.invalidateQueries({queryKey:["announcements"]})},onError:A=>u(A.message)}),v=()=>{h({title:"",content:"",priority:"medium",is_active:!0,expires_at:""})},j=A=>{i(A.id),h({title:A.title,content:A.content,priority:A.priority,is_active:A.is_active,expires_at:A.expires_at?xk(new Date(A.expires_at),"yyyy-MM-dd'T'HH:mm"):""})},E=A=>{if(A.preventDefault(),u(null),!d.title.trim()||!d.content.trim()){u("Title and content are required");return}a?y.mutate({id:a,data:d}):g.mutate(d)},k=(A,T)=>{confirm(`Are you sure you want to delete "${T}"?`)&&w.mutate(A)},S=(p==null?void 0:p.announcements)||[],P=S.filter(A=>A.is_active).length;return r.jsxs("div",{className:"min-h-screen bg-cream-50",children:[r.jsx(de,{}),r.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-8",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(Y,{to:"/admin",className:"p-2 hover:bg-cream-200 rounded-lg transition-colors",children:r.jsx(at,{className:"h-5 w-5 text-neutral-600"})}),r.jsxs("div",{children:[r.jsxs("h1",{className:"text-2xl font-display font-bold text-neutral-800 flex items-center gap-2",children:[r.jsx(fc,{className:"h-6 w-6 text-burgundy-500"}),"Announcements"]}),r.jsxs("p",{className:"text-neutral-500 text-sm",children:[S.length," total  ",P," active"]})]})]}),!n&&!a&&r.jsxs("button",{onClick:()=>s(!0),className:"btn btn-primary flex items-center gap-2",children:[r.jsx(Io,{className:"h-4 w-4"}),"New Announcement"]})]}),l&&r.jsxs("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-xl p-4 flex items-center gap-3",children:[r.jsx(dr,{className:"h-5 w-5 text-red-500 flex-shrink-0"}),r.jsx("p",{className:"text-red-700",children:l}),r.jsx("button",{onClick:()=>u(null),className:"ml-auto text-red-500 hover:text-red-700",children:r.jsx(Sn,{className:"h-4 w-4"})})]}),(n||a)&&r.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 p-6 mb-8",children:[r.jsx("h2",{className:"font-display font-bold text-lg text-neutral-800 mb-4",children:a?"Edit Announcement":"New Announcement"}),r.jsxs("form",{onSubmit:E,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Title *"}),r.jsx("input",{type:"text",value:d.title,onChange:A=>h({...d,title:A.target.value}),className:"w-full px-4 py-2 border border-cream-200 rounded-lg focus:ring-2 focus:ring-burgundy-500 focus:border-burgundy-500",placeholder:"Announcement title..."})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Content *"}),r.jsx("textarea",{value:d.content,onChange:A=>h({...d,content:A.target.value}),rows:3,className:"w-full px-4 py-2 border border-cream-200 rounded-lg focus:ring-2 focus:ring-burgundy-500 focus:border-burgundy-500",placeholder:"Announcement content..."})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Priority"}),r.jsx("select",{value:d.priority,onChange:A=>h({...d,priority:A.target.value}),className:"w-full px-4 py-2 border border-cream-200 rounded-lg focus:ring-2 focus:ring-burgundy-500 focus:border-burgundy-500",children:q4.map(A=>r.jsx("option",{value:A.value,children:A.label},A.value))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Expires At (optional)"}),r.jsx("input",{type:"datetime-local",value:d.expires_at,onChange:A=>h({...d,expires_at:A.target.value}),className:"w-full px-4 py-2 border border-cream-200 rounded-lg focus:ring-2 focus:ring-burgundy-500 focus:border-burgundy-500"})]}),r.jsx("div",{className:"flex items-end",children:r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:d.is_active,onChange:A=>h({...d,is_active:A.target.checked}),className:"w-4 h-4 text-burgundy-500 border-cream-300 rounded focus:ring-burgundy-500"}),r.jsx("span",{className:"text-sm text-neutral-700",children:"Active immediately"})]})})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsxs("button",{type:"submit",disabled:g.isPending||y.isPending,className:"btn btn-primary flex items-center gap-2",children:[g.isPending||y.isPending?r.jsx(ge,{className:"h-4 w-4 animate-spin"}):r.jsx(bi,{className:"h-4 w-4"}),a?"Update":"Create"]}),r.jsx("button",{type:"button",onClick:()=>{s(!1),i(null),v()},className:"btn btn-secondary",children:"Cancel"})]})]})]}),m?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx(ge,{className:"h-8 w-8 animate-spin text-burgundy-500"})}):S.length===0?r.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 p-12 text-center",children:[r.jsx(fc,{className:"h-12 w-12 text-neutral-300 mx-auto mb-4"}),r.jsx("h3",{className:"font-semibold text-neutral-800 mb-2",children:"No announcements yet"}),r.jsx("p",{className:"text-neutral-500 mb-6",children:"Create your first announcement to display on user dashboards."}),!n&&r.jsx("button",{onClick:()=>s(!0),className:"btn btn-primary",children:"Create Announcement"})]}):r.jsx("div",{className:"space-y-4",children:S.map(A=>r.jsx("div",{className:`bg-white rounded-2xl shadow-card border overflow-hidden ${A.is_active?"border-cream-200":"border-neutral-200 opacity-60"}`,children:r.jsx("div",{className:"p-5",children:r.jsxs("div",{className:"flex items-start justify-between gap-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium border ${cne(A.priority)}`,children:[une(A.priority),A.priority.charAt(0).toUpperCase()+A.priority.slice(1)]}),!A.is_active&&r.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium bg-neutral-100 text-neutral-600",children:"Inactive"}),A.expires_at&&new Date(A.expires_at)<new Date&&r.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-600",children:"Expired"})]}),r.jsx("h3",{className:"font-semibold text-neutral-800 mb-1",children:A.title}),r.jsx("p",{className:"text-neutral-600 text-sm mb-3",children:A.content}),r.jsxs("div",{className:"flex items-center gap-4 text-xs text-neutral-400",children:[r.jsxs("span",{children:["Created ",P4(new Date(A.created_at),{addSuffix:!0})]}),A.expires_at&&r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Ln,{className:"h-3 w-3"}),"Expires ",xk(new Date(A.expires_at),"MMM d, yyyy h:mm a")]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>b.mutate(A.id),disabled:b.isPending,className:"p-2 hover:bg-cream-100 rounded-lg transition-colors",title:A.is_active?"Deactivate":"Activate",children:A.is_active?r.jsx(AQ,{className:"h-5 w-5 text-green-500"}):r.jsx(IQ,{className:"h-5 w-5 text-neutral-400"})}),r.jsx("button",{onClick:()=>j(A),className:"p-2 hover:bg-cream-100 rounded-lg transition-colors",title:"Edit",children:r.jsx(j4,{className:"h-4 w-4 text-neutral-500"})}),r.jsx("button",{onClick:()=>k(A.id,A.title),disabled:w.isPending,className:"p-2 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:r.jsx(Id,{className:"h-4 w-4 text-red-500"})})]})]})})},A.id))})]})]})}const wu=["Pre-Merge Challenges","Post-Merge Challenges","Tribal Council","Strategic Play","Social Game","Idols & Advantages","Survival","Confessionals","Bonus","Penalties"];function hne(){const e=zt(),[t,n]=C.useState(""),[s,a]=C.useState("all"),[i,l]=C.useState(null),[u,d]=C.useState(!1),[h,p]=C.useState(new Set(wu)),[m,g]=C.useState({code:"",name:"",description:"",points:0,category:wu[0],is_negative:!1,is_active:!0}),{data:y,isLoading:b}=se({queryKey:["admin-scoring-rules"],queryFn:async()=>{const{data:M,error:O}=await G.from("scoring_rules").select("*").order("category").order("sort_order");if(O)throw O;return M||[]}}),w=Array.from(new Set([...wu,...(y==null?void 0:y.map(M=>M.category).filter(Boolean))||[]])),v=$e({mutationFn:async M=>{const{error:O}=await G.from("scoring_rules").insert(M);if(O)throw O},onSuccess:()=>{e.invalidateQueries({queryKey:["admin-scoring-rules"]}),d(!1),k()}}),j=$e({mutationFn:async({id:M,...O})=>{const{error:F}=await G.from("scoring_rules").update(O).eq("id",M);if(F)throw F},onSuccess:()=>{e.invalidateQueries({queryKey:["admin-scoring-rules"]}),l(null),k()}}),E=$e({mutationFn:async M=>{const{error:O}=await G.from("scoring_rules").delete().eq("id",M);if(O)throw O},onSuccess:()=>{e.invalidateQueries({queryKey:["admin-scoring-rules"]})}}),k=()=>{g({code:"",name:"",description:"",points:0,category:wu[0],is_negative:!1,is_active:!0})},S=M=>{l(M),g({code:M.code,name:M.name,description:M.description||"",points:M.points,category:M.category||wu[0],is_negative:!!M.is_negative,is_active:!!M.is_active}),d(!1)},P=()=>{d(!0),l(null),k()},A=()=>{const M={code:m.code,name:m.name,description:m.description||null,points:m.points,category:m.category,is_negative:m.is_negative,is_active:m.is_active,sort_order:0};i?j.mutate({id:i.id,...M}):v.mutate(M)},T=M=>{p(O=>{const F=new Set(O);return F.has(M)?F.delete(M):F.add(M),F})},L=y==null?void 0:y.filter(M=>{var K;const O=M.code.toLowerCase().includes(t.toLowerCase())||M.name.toLowerCase().includes(t.toLowerCase())||((K=M.description)==null?void 0:K.toLowerCase().includes(t.toLowerCase())),F=s==="all"||M.category===s;return O&&F}),H=w.reduce((M,O)=>(M[O]=(L==null?void 0:L.filter(F=>F.category===O))||[],M),{}),R={total:(y==null?void 0:y.length)||0,active:(y==null?void 0:y.filter(M=>!!M.is_active).length)||0,positive:(y==null?void 0:y.filter(M=>!M.is_negative).length)||0,negative:(y==null?void 0:y.filter(M=>!!M.is_negative).length)||0};return b?r.jsxs(r.Fragment,{children:[r.jsx(de,{}),r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center",children:r.jsx(ge,{className:"h-8 w-8 text-burgundy-500 animate-spin"})})]}):r.jsxs(r.Fragment,{children:[r.jsx(de,{}),r.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 p-4 pb-24",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx(Y,{to:"/admin",className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:r.jsx(at,{className:"h-5 w-5 text-neutral-600"})}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("h1",{className:"text-2xl font-display font-bold text-neutral-800 flex items-center gap-2",children:[r.jsx(Rd,{className:"h-6 w-6 text-burgundy-500"}),"Scoring Rules"]}),r.jsxs("p",{className:"text-neutral-500",children:[(y==null?void 0:y.length)||0," rules defined"]})]}),r.jsxs("button",{onClick:P,className:"btn btn-primary",children:[r.jsx(Io,{className:"h-4 w-4"}),"Add Rule"]})]}),r.jsxs("div",{className:"grid grid-cols-4 gap-2 mb-6",children:[r.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-3 border border-cream-200 text-center",children:[r.jsx("p",{className:"text-xl font-bold text-neutral-800",children:R.total}),r.jsx("p",{className:"text-neutral-500 text-xs",children:"Total"})]}),r.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-2xl p-3 text-center",children:[r.jsx("p",{className:"text-xl font-bold text-green-600",children:R.active}),r.jsx("p",{className:"text-neutral-500 text-xs",children:"Active"})]}),r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-2xl p-3 text-center",children:[r.jsx("p",{className:"text-xl font-bold text-blue-600",children:R.positive}),r.jsx("p",{className:"text-neutral-500 text-xs",children:"Positive"})]}),r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-3 text-center",children:[r.jsx("p",{className:"text-xl font-bold text-red-600",children:R.negative}),r.jsx("p",{className:"text-neutral-500 text-xs",children:"Negative"})]})]}),(u||i)&&r.jsxs("div",{className:"bg-burgundy-50 border border-burgundy-200 rounded-2xl p-4 mb-6",children:[r.jsx("h3",{className:"text-neutral-800 font-medium mb-4",children:i?"Edit Rule":"Add New Rule"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-neutral-500 text-sm mb-1 block",children:"Code"}),r.jsx("input",{type:"text",value:m.code,onChange:M=>g({...m,code:M.target.value.toUpperCase()}),placeholder:"VOTE_CORRECT",className:"input font-mono"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-neutral-500 text-sm mb-1 block",children:"Points"}),r.jsx("input",{type:"number",value:m.points,onChange:M=>g({...m,points:parseInt(M.target.value)||0}),className:"input"})]}),r.jsxs("div",{className:"col-span-2",children:[r.jsx("label",{className:"text-neutral-500 text-sm mb-1 block",children:"Name"}),r.jsx("input",{type:"text",value:m.name,onChange:M=>g({...m,name:M.target.value}),placeholder:"Voted correctly",className:"input"})]}),r.jsxs("div",{className:"col-span-2",children:[r.jsx("label",{className:"text-neutral-500 text-sm mb-1 block",children:"Description"}),r.jsx("input",{type:"text",value:m.description,onChange:M=>g({...m,description:M.target.value}),placeholder:"Points for voting with the majority",className:"input"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-neutral-500 text-sm mb-1 block",children:"Category"}),r.jsx("select",{value:m.category,onChange:M=>g({...m,category:M.target.value}),className:"input",children:w.map(M=>r.jsx("option",{value:M,children:M},M))})]}),r.jsxs("div",{className:"flex items-center gap-4 pt-6",children:[r.jsxs("label",{className:"flex items-center gap-2 text-neutral-800",children:[r.jsx("input",{type:"checkbox",checked:m.is_negative,onChange:M=>g({...m,is_negative:M.target.checked}),className:"w-4 h-4 rounded border-cream-300 text-burgundy-500"}),"Negative Points"]}),r.jsxs("label",{className:"flex items-center gap-2 text-neutral-800",children:[r.jsx("input",{type:"checkbox",checked:m.is_active,onChange:M=>g({...m,is_active:M.target.checked}),className:"w-4 h-4 rounded border-cream-300 text-burgundy-500"}),"Active"]})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:A,disabled:v.isPending||j.isPending,className:"btn btn-primary flex-1",children:v.isPending||j.isPending?r.jsx(ge,{className:"h-4 w-4 animate-spin"}):r.jsxs(r.Fragment,{children:[r.jsx(bi,{className:"h-4 w-4"}),i?"Update Rule":"Create Rule"]})}),r.jsx("button",{onClick:()=>{d(!1),l(null),k()},className:"btn btn-secondary px-4",children:r.jsx(Sn,{className:"h-4 w-4"})})]})]}),r.jsxs("div",{className:"flex gap-2 mb-6",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(Ei,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-neutral-400"}),r.jsx("input",{type:"text",value:t,onChange:M=>n(M.target.value),placeholder:"Search rules...",className:"input pl-10"})]}),r.jsxs("select",{value:s,onChange:M=>a(M.target.value),className:"input px-3 py-2 w-40",children:[r.jsx("option",{value:"all",children:"All Categories"}),w.map(M=>r.jsx("option",{value:M,children:M},M))]})]}),r.jsx("div",{className:"space-y-4",children:w.map(M=>{const O=H[M];return O.length===0?null:r.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 overflow-hidden",children:[r.jsxs("button",{onClick:()=>T(M),className:"w-full px-4 py-3 flex items-center justify-between hover:bg-cream-50 transition-colors",children:[r.jsx("h3",{className:"text-neutral-800 font-medium",children:M}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("span",{className:"text-neutral-500 text-sm",children:[O.length," rules"]}),h.has(M)?r.jsx(qr,{className:"h-4 w-4 text-neutral-400"}):r.jsx(xn,{className:"h-4 w-4 text-neutral-400"})]})]}),h.has(M)&&r.jsx("div",{className:"border-t border-cream-200 divide-y divide-cream-100",children:O.map(F=>r.jsxs("div",{className:`px-4 py-3 flex items-center gap-3 ${F.is_active?"":"opacity-50"}`,children:[r.jsxs("span",{className:`font-mono text-xs px-2 py-0.5 rounded ${F.is_negative?"bg-red-100 text-red-600":"bg-green-100 text-green-600"}`,children:[F.is_negative?"-":"+",Math.abs(F.points)]}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-neutral-800 font-medium truncate",children:F.name}),r.jsx("p",{className:"text-neutral-400 text-xs font-mono",children:F.code})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("button",{onClick:()=>S(F),className:"p-2 hover:bg-cream-100 rounded-xl transition-colors",children:r.jsx(Tp,{className:"h-4 w-4 text-neutral-500"})}),r.jsx("button",{onClick:()=>{confirm("Delete this rule?")&&E.mutate(F.id)},className:"p-2 hover:bg-red-50 rounded-xl transition-colors",children:r.jsx(Id,{className:"h-4 w-4 text-red-500"})})]})]},F.id))})]},M)})})]})]})}function fne(){const{user:e}=yt(),t=zt(),[n]=cd(),s=n.get("episode"),[a,i]=C.useState(s),[l,u]=C.useState({}),[d,h]=C.useState(null),[p,m]=C.useState(!1),[g,y]=C.useState(!1),[b,w]=C.useState(null),[v,j]=C.useState(null),E=C.useRef(null),{data:k}=O4(e==null?void 0:e.id),{data:S}=M4(),{data:P}=L4(S==null?void 0:S.id),{data:A}=$4(S==null?void 0:S.id),{data:T}=D4(S==null?void 0:S.id),{data:L}=F4(a),{data:H}=U4(a),R=C.useMemo(()=>{const X=new Set(T==null?void 0:T.map(ee=>ee.category||"Other"));return Array.from(X)},[T]),M=C.useMemo(()=>v?(T==null?void 0:T.filter(X=>(X.category||"Other")===v))||[]:T||[],[T,v]),O=C.useMemo(()=>(A==null?void 0:A.filter(X=>X.status==="active"))||[],[A]);C.useEffect(()=>{if(!g&&L&&O.length>0){const X={};O.forEach(ee=>{X[ee.id]={}}),L.forEach(ee=>{X[ee.castaway_id]&&(X[ee.castaway_id][ee.scoring_rule_id]=ee.quantity)}),u(X),m(!1)}},[L,O,g]);const F=C.useCallback(async()=>{if(!(!a||!(e!=null&&e.id)||!T)){y(!0),w(null);try{const{data:{session:X}}=await G.auth.getSession();if(!(X!=null&&X.access_token))throw new Error("Not authenticated");const ee=[];Object.entries(l).forEach(([te,V])=>{Object.entries(V).forEach(([$,J])=>{J>0&&ee.push({castaway_id:te,scoring_rule_id:$,quantity:J})})});const D=await ut(`/episodes/${a}/scoring/save`,X.access_token,{method:"POST",body:JSON.stringify({scores:ee})});if(D.error)throw new Error(D.error);h(new Date),m(!1),t.invalidateQueries({queryKey:["episodeScores",a]}),t.invalidateQueries({queryKey:["scoringStatus",a]})}catch(X){w(X instanceof Error?X.message:"Failed to save scores")}finally{y(!1)}}},[a,e==null?void 0:e.id,l,T,t]);C.useEffect(()=>{if(!(!p||!a))return E.current&&clearTimeout(E.current),E.current=setTimeout(()=>{F()},3e3),()=>{E.current&&clearTimeout(E.current)}},[l,p,a,F]);const K=(X,ee,D)=>{u(te=>({...te,[X]:{...te[X],[ee]:Math.max(0,D)}})),m(!0)},ae=X=>{const ee=l[X]||{};return Object.entries(ee).reduce((D,[te,V])=>{const $=T==null?void 0:T.find(J=>J.id===te);return D+(($==null?void 0:$.points)||0)*V},0)};return k&&k.role!=="admin"?r.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200",children:[r.jsx(de,{}),r.jsx("main",{className:"max-w-4xl mx-auto px-4 py-16 text-center",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated p-12",children:[r.jsx("h1",{className:"text-2xl font-display text-neutral-800 mb-3",children:"Access Denied"}),r.jsx("p",{className:"text-neutral-500 mb-8",children:"You don't have permission to access this page."}),r.jsx(Y,{to:"/dashboard",className:"btn btn-primary",children:"Back to Dashboard"})]})})]}):r.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200",children:[r.jsx(de,{}),r.jsxs("main",{className:"max-w-full mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(Y,{to:"/admin",className:"text-neutral-400 hover:text-neutral-600 transition-colors","aria-label":"Back to admin",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),r.jsxs("div",{children:[r.jsxs("h1",{className:"text-2xl font-display text-neutral-800 flex items-center gap-2",children:[r.jsx(w4,{className:"h-6 w-6 text-burgundy-500"}),"Grid Scoring"]}),r.jsx("p",{className:"text-neutral-500 text-sm",children:"Score all castaways at once"})]})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[H&&a&&!H.is_finalized&&r.jsxs("div",{className:`px-4 py-2 rounded-xl flex items-center gap-2 ${H.is_complete?"bg-green-100 text-green-700":"bg-amber-100 text-amber-700"}`,children:[H.is_complete?r.jsx(At,{className:"h-5 w-5"}):r.jsx(dr,{className:"h-5 w-5"}),r.jsxs("span",{className:"font-medium",children:[H.scored_castaways,"/",H.total_castaways," castaways scored"]})]}),r.jsxs(Y,{to:`/admin/scoring${a?`?episode=${a}`:""}`,className:"btn btn-secondary flex items-center gap-2",children:[r.jsx(HJ,{className:"h-4 w-4"}),"List View"]}),p&&r.jsxs("button",{onClick:F,disabled:g,className:"btn btn-primary flex items-center gap-2",children:[g?r.jsx(ge,{className:"h-4 w-4 animate-spin"}):r.jsx(bi,{className:"h-4 w-4"}),"Save All"]})]})]}),b&&r.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl flex items-start gap-3",children:[r.jsx(ot,{className:"h-5 w-5 text-red-500 flex-shrink-0 mt-0.5"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-red-800 font-medium",children:"Save Error"}),r.jsx("p",{className:"text-red-600 text-sm",children:b})]}),r.jsx("button",{onClick:()=>w(null),className:"text-red-400 hover:text-red-600",children:r.jsx(Sn,{className:"h-5 w-5"})})]}),r.jsx("div",{className:"bg-white rounded-2xl shadow-elevated p-5 mb-6",children:r.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("label",{className:"font-medium text-neutral-700",children:"Episode:"}),r.jsxs("select",{value:a||"",onChange:X=>i(X.target.value||null),className:"p-2 border border-cream-200 rounded-xl focus:ring-2 focus:ring-burgundy-500",children:[r.jsx("option",{value:"",children:"Choose episode..."}),P==null?void 0:P.map(X=>r.jsxs("option",{value:X.id,children:["Ep ",X.number,": ",X.title||"TBD"," ",X.is_scored?"":""]},X.id))]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("label",{className:"font-medium text-neutral-700",children:"Category:"}),r.jsxs("select",{value:v||"",onChange:X=>j(X.target.value||null),className:"p-2 border border-cream-200 rounded-xl focus:ring-2 focus:ring-burgundy-500",children:[r.jsx("option",{value:"",children:"All Categories"}),R.map(X=>r.jsx("option",{value:X,children:X},X))]})]}),r.jsx("div",{className:"flex-1"}),g&&r.jsxs("span",{className:"text-sm text-neutral-500 flex items-center gap-1",children:[r.jsx(ge,{className:"h-4 w-4 animate-spin"}),"Saving..."]}),d&&!p&&!g&&r.jsxs("span",{className:"text-sm text-green-600 flex items-center gap-1",children:[r.jsx(bi,{className:"h-4 w-4"}),"Saved at ",d.toLocaleTimeString()]}),p&&!g&&r.jsx("span",{className:"text-sm text-amber-600",children:"Unsaved changes (auto-saves in 3s)"})]})}),a?r.jsx("div",{className:"bg-white rounded-2xl shadow-elevated overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full border-collapse",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-cream-50",children:[r.jsxs("th",{className:"sticky left-0 bg-cream-50 z-10 p-3 text-left font-semibold text-neutral-700 border-b border-r border-cream-200 min-w-[200px]",children:["Rule (",M.length,")"]}),O.map(X=>r.jsx("th",{className:"p-2 text-center border-b border-cream-200 min-w-[80px]",children:r.jsxs("div",{className:"flex flex-col items-center gap-1",children:[X.photo_url?r.jsx("img",{src:X.photo_url,alt:X.name,className:"w-10 h-10 rounded-full object-cover border border-cream-200"}):r.jsx("div",{className:"w-10 h-10 bg-cream-200 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-xs font-bold text-neutral-500",children:X.name.charAt(0)})}),r.jsx("span",{className:"text-xs font-medium text-neutral-700 max-w-[70px] truncate",children:X.name.split(" ")[0]})]})},X.id))]})}),r.jsxs("tbody",{children:[M.map((X,ee)=>r.jsxs("tr",{className:ee%2===0?"bg-white":"bg-cream-50/50",children:[r.jsx("td",{className:"sticky left-0 bg-inherit z-10 p-3 border-r border-cream-200",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("span",{className:`px-2 py-0.5 rounded text-xs font-bold ${X.is_negative?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:[X.points>=0?"+":"",X.points]}),r.jsx("span",{className:"text-sm font-medium text-neutral-800",children:X.name})]})}),O.map(D=>{var V;const te=((V=l[D.id])==null?void 0:V[X.id])||0;return r.jsx("td",{className:"p-1 text-center",children:r.jsx("input",{type:"number",min:"0",value:te||"",onChange:$=>K(D.id,X.id,parseInt($.target.value)||0),className:`w-12 h-8 text-center text-sm border rounded focus:ring-2 focus:ring-burgundy-500 focus:border-burgundy-500 ${te>0?"border-burgundy-300 bg-burgundy-50":"border-cream-200"}`,placeholder:"0"})},D.id)})]},X.id)),r.jsxs("tr",{className:"bg-burgundy-50 border-t-2 border-burgundy-200",children:[r.jsx("td",{className:"sticky left-0 bg-burgundy-50 z-10 p-3 font-bold text-burgundy-700 border-r border-burgundy-200",children:"TOTAL"}),O.map(X=>{const ee=ae(X.id);return r.jsx("td",{className:"p-2 text-center",children:r.jsx("span",{className:`font-bold text-lg ${ee>0?"text-green-600":ee<0?"text-red-600":"text-neutral-400"}`,children:ee!==0?(ee>0?"+":"")+ee:""})},X.id)})]})]})]})})}):r.jsx("div",{className:"bg-white rounded-2xl shadow-elevated p-12 text-center",children:r.jsx("p",{className:"text-neutral-500",children:"Select an episode to begin scoring"})})]})]})}class mne extends C.Component{constructor(n){super(n);ul(this,"handleReload",()=>{window.location.reload()});ul(this,"handleGoBack",()=>{window.location.href="/admin"});ul(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null})});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(n){return{hasError:!0,error:n,errorInfo:null}}componentDidCatch(n,s){this.setState({errorInfo:s}),console.error("Admin Error Boundary caught error:",n,s),dt(n,{contexts:{react:{componentStack:s.componentStack}},tags:{boundary:"admin",area:"admin-panel"},level:"error"})}render(){return this.state.hasError?r.jsxs(r.Fragment,{children:[r.jsx(de,{}),r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated p-8 max-w-lg w-full border border-cream-200",children:[r.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6",children:r.jsx(dr,{className:"h-8 w-8 text-red-500"})}),r.jsx("h1",{className:"text-2xl font-display font-bold text-neutral-800 mb-2 text-center",children:"Admin Error"}),r.jsx("p",{className:"text-neutral-500 mb-6 text-center",children:"Something went wrong while loading this admin page. This error has been logged for review."}),!1,r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsxs("button",{onClick:this.handleReset,className:"btn btn-primary w-full flex items-center justify-center gap-2",children:[r.jsx(ga,{className:"h-4 w-4"}),"Try Again"]}),r.jsxs("button",{onClick:this.handleGoBack,className:"btn btn-secondary w-full flex items-center justify-center gap-2",children:[r.jsx(at,{className:"h-4 w-4"}),"Back to Admin Dashboard"]})]})]})})]}):this.props.children}}const An=e=>r.jsx(mne,{children:r.jsx(e,{})});function pne(){return r.jsx(k4,{children:r.jsx(ZQ,{children:r.jsx(SY,{children:r.jsxs(RP,{children:[r.jsx(Se,{path:"/",element:r.jsx(eX,{})}),r.jsx(Se,{path:"/login",element:r.jsx(tX,{})}),r.jsx(Se,{path:"/signup",element:r.jsx(hk,{})}),r.jsx(Se,{path:"/register",element:r.jsx(hk,{})}),r.jsx(Se,{path:"/how-to-play",element:r.jsx(cee,{})}),r.jsx(Se,{path:"/scoring",element:r.jsx(vk,{})}),r.jsx(Se,{path:"/scoring-rules",element:r.jsx(vk,{})}),r.jsx(Se,{path:"/timeline",element:r.jsx(dee,{})}),r.jsx(Se,{path:"/sms",element:r.jsx(tte,{})}),r.jsx(Se,{path:"/l/:code",element:r.jsx(ite,{})}),r.jsx(Se,{path:"/contact",element:r.jsx(gte,{})}),r.jsx(Se,{path:"/trivia",element:r.jsx(Ite,{})}),r.jsx(Se,{path:"/castaways",element:r.jsx(mte,{})}),r.jsx(Se,{path:"/castaways/:id",element:r.jsx(pte,{})}),r.jsx(Se,{path:"/privacy",element:r.jsx(_te,{})}),r.jsx(Se,{path:"/terms",element:r.jsx(jte,{})}),r.jsx(Se,{path:"/results/:weekNumber",element:r.jsx(qee,{})}),r.jsxs(Se,{element:r.jsx(YQ,{}),children:[r.jsx(Se,{path:"/profile/setup",element:r.jsx(wee,{})}),r.jsxs(Se,{element:r.jsx(KQ,{}),children:[r.jsx(Se,{path:"/dashboard",element:r.jsx(MZ,{})}),r.jsx(Se,{path:"/profile",element:r.jsx(bee,{})}),r.jsx(Se,{path:"/leagues/:leagueId/leaderboard",element:r.jsx(oee,{})}),r.jsx(Se,{path:"/leaderboard",element:r.jsx(lte,{})}),r.jsx(Se,{path:"/leagues",element:r.jsx(ute,{})})]}),r.jsx(Se,{path:"/join",element:r.jsx(Xl,{to:"/signup",replace:!0})}),r.jsx(Se,{path:"/join/:code",element:r.jsx(hee,{})}),r.jsx(Se,{path:"/leagues/create",element:r.jsx(Gee,{})}),r.jsx(Se,{path:"/leagues/:id",element:r.jsx(Mee,{})}),r.jsx(Se,{path:"/leagues/:leagueId/draft",element:r.jsx(QZ,{})}),r.jsx(Se,{path:"/leagues/:leagueId/draft/settings",element:r.jsx(bte,{})}),r.jsx(Se,{path:"/draft/rankings",element:r.jsx(vte,{})}),r.jsx(Se,{path:"/leagues/:leagueId/pick",element:r.jsx(iee,{})}),r.jsx(Se,{path:"/leagues/:leagueId/team",element:r.jsx(Lee,{})}),r.jsx(Se,{path:"/leagues/:leagueId/settings",element:r.jsx(ete,{})}),r.jsx(Se,{path:"/leagues/:leagueId/invite",element:r.jsx(wte,{})}),r.jsx(Se,{path:"/leagues/:leagueId/history",element:r.jsx(xte,{})}),r.jsx(Se,{path:"/leagues/:leagueId/episodes/:episodeId",element:r.jsx(Dee,{})}),r.jsx(Se,{path:"/profile/payments",element:r.jsx(ate,{})}),r.jsx(Se,{path:"/profile/notifications",element:r.jsx(yte,{})}),r.jsx(Se,{path:"/seasons/:seasonId/schedule",element:r.jsx(nte,{})}),r.jsx(Se,{path:"/seasons/:seasonId/castaways",element:r.jsx(rte,{})})]}),r.jsxs(Se,{element:r.jsx(JQ,{}),children:[r.jsx(Se,{path:"/admin",element:An(qte)}),r.jsx(Se,{path:"/admin/scoring",element:An(kk)}),r.jsx(Se,{path:"/admin/castaways",element:An(Ck)}),r.jsx(Se,{path:"/admin/seasons",element:An(Tk)}),r.jsx(Se,{path:"/admin/seasons/:seasonId",element:An(Tk)}),r.jsx(Se,{path:"/admin/seasons/:seasonId/episodes",element:An(Xte)}),r.jsx(Se,{path:"/admin/seasons/:seasonId/castaways",element:An(Ck)}),r.jsx(Se,{path:"/admin/episodes/:episodeId/scoring",element:An(kk)}),r.jsx(Se,{path:"/admin/leagues",element:An(Zte)}),r.jsx(Se,{path:"/admin/users",element:An(rne)}),r.jsx(Se,{path:"/admin/payments",element:An(sne)}),r.jsx(Se,{path:"/admin/jobs",element:An(one)}),r.jsx(Se,{path:"/admin/global",element:An(lne)}),r.jsx(Se,{path:"/admin/announcements",element:An(dne)}),r.jsx(Se,{path:"/admin/scoring-rules",element:An(hne)}),r.jsx(Se,{path:"/admin/scoring/grid",element:An(fne)})]}),r.jsx(Se,{path:"*",element:r.jsx(lee,{})})]})})})})}NY();const Pk=(e,t)=>{if(e>=3)return!1;if(t instanceof TypeError&&t.message.includes("fetch"))return!0;if(t instanceof Error){const n=t.message.toLowerCase();if(n.includes("network")||n.includes("timeout")||n.includes("503")||n.includes("502")||n.includes("504"))return!0}return!1},Ak=e=>Math.min(1e3*Math.pow(2,e),8e3),gne=new b3({defaultOptions:{queries:{staleTime:1e3*60,retry:Pk,retryDelay:Ak},mutations:{retry:Pk,retryDelay:Ak}}});JI.createRoot(document.getElementById("root")).render(r.jsx(C.StrictMode,{children:r.jsx(k4,{children:r.jsx(v3,{client:gne,children:r.jsx(t6,{children:r.jsx(pne,{})})})})}));
