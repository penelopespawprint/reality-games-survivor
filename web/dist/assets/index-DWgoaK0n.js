var KI=Object.defineProperty;var Mj=e=>{throw TypeError(e)};var VI=(e,t,r)=>t in e?KI(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var pl=(e,t,r)=>VI(e,typeof t!="symbol"?t+"":t,r),kg=(e,t,r)=>t.has(e)||Mj("Cannot "+r);var H=(e,t,r)=>(kg(e,t,"read from private field"),r?r.call(e):t.get(e)),Ie=(e,t,r)=>t.has(e)?Mj("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),ge=(e,t,r,s)=>(kg(e,t,"write to private field"),s?s.call(e,r):t.set(e,r),r),Qe=(e,t,r)=>(kg(e,t,"access private method"),r);var Jh=(e,t,r,s)=>({set _(a){ge(e,t,a,r)},get _(){return H(e,t,s)}});function YI(e,t){for(var r=0;r<t.length;r++){const s=t[r];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(s,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();function JI(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Eg={exports:{}},wd={},Cg={exports:{}},rt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oj;function QI(){if(Oj)return rt;Oj=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),f=Symbol.iterator;function x(U){return U===null||typeof U!="object"?null:(U=f&&U[f]||U["@@iterator"],typeof U=="function"?U:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,w={};function v(U,G,ie){this.props=U,this.context=G,this.refs=w,this.updater=ie||y}v.prototype.isReactComponent={},v.prototype.setState=function(U,G){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,G,"setState")},v.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function j(){}j.prototype=v.prototype;function C(U,G,ie){this.props=U,this.context=G,this.refs=w,this.updater=ie||y}var S=C.prototype=new j;S.constructor=C,b(S,v.prototype),S.isPureReactComponent=!0;var k=Array.isArray,R=Object.prototype.hasOwnProperty,E={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function M(U,G,ie){var ae,fe={},je=null,ze=null;if(G!=null)for(ae in G.ref!==void 0&&(ze=G.ref),G.key!==void 0&&(je=""+G.key),G)R.call(G,ae)&&!I.hasOwnProperty(ae)&&(fe[ae]=G[ae]);var he=arguments.length-2;if(he===1)fe.children=ie;else if(1<he){for(var Ee=Array(he),nt=0;nt<he;nt++)Ee[nt]=arguments[nt+2];fe.children=Ee}if(U&&U.defaultProps)for(ae in he=U.defaultProps,he)fe[ae]===void 0&&(fe[ae]=he[ae]);return{$$typeof:e,type:U,key:je,ref:ze,props:fe,_owner:E.current}}function O(U,G){return{$$typeof:e,type:U.type,key:G,ref:U.ref,props:U.props,_owner:U._owner}}function L(U){return typeof U=="object"&&U!==null&&U.$$typeof===e}function P(U){var G={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(ie){return G[ie]})}var $=/\/+/g;function B(U,G){return typeof U=="object"&&U!==null&&U.key!=null?P(""+U.key):G.toString(36)}function D(U,G,ie,ae,fe){var je=typeof U;(je==="undefined"||je==="boolean")&&(U=null);var ze=!1;if(U===null)ze=!0;else switch(je){case"string":case"number":ze=!0;break;case"object":switch(U.$$typeof){case e:case t:ze=!0}}if(ze)return ze=U,fe=fe(ze),U=ae===""?"."+B(ze,0):ae,k(fe)?(ie="",U!=null&&(ie=U.replace($,"$&/")+"/"),D(fe,G,ie,"",function(nt){return nt})):fe!=null&&(L(fe)&&(fe=O(fe,ie+(!fe.key||ze&&ze.key===fe.key?"":(""+fe.key).replace($,"$&/")+"/")+U)),G.push(fe)),1;if(ze=0,ae=ae===""?".":ae+":",k(U))for(var he=0;he<U.length;he++){je=U[he];var Ee=ae+B(je,he);ze+=D(je,G,ie,Ee,fe)}else if(Ee=x(U),typeof Ee=="function")for(U=Ee.call(U),he=0;!(je=U.next()).done;)je=je.value,Ee=ae+B(je,he++),ze+=D(je,G,ie,Ee,fe);else if(je==="object")throw G=String(U),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.");return ze}function se(U,G,ie){if(U==null)return U;var ae=[],fe=0;return D(U,ae,"","",function(je){return G.call(ie,je,fe++)}),ae}function X(U){if(U._status===-1){var G=U._result;G=G(),G.then(function(ie){(U._status===0||U._status===-1)&&(U._status=1,U._result=ie)},function(ie){(U._status===0||U._status===-1)&&(U._status=2,U._result=ie)}),U._status===-1&&(U._status=0,U._result=G)}if(U._status===1)return U._result.default;throw U._result}var ee={current:null},F={transition:null},Q={ReactCurrentDispatcher:ee,ReactCurrentBatchConfig:F,ReactCurrentOwner:E};function J(){throw Error("act(...) is not supported in production builds of React.")}return rt.Children={map:se,forEach:function(U,G,ie){se(U,function(){G.apply(this,arguments)},ie)},count:function(U){var G=0;return se(U,function(){G++}),G},toArray:function(U){return se(U,function(G){return G})||[]},only:function(U){if(!L(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},rt.Component=v,rt.Fragment=r,rt.Profiler=a,rt.PureComponent=C,rt.StrictMode=s,rt.Suspense=u,rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Q,rt.act=J,rt.cloneElement=function(U,G,ie){if(U==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+U+".");var ae=b({},U.props),fe=U.key,je=U.ref,ze=U._owner;if(G!=null){if(G.ref!==void 0&&(je=G.ref,ze=E.current),G.key!==void 0&&(fe=""+G.key),U.type&&U.type.defaultProps)var he=U.type.defaultProps;for(Ee in G)R.call(G,Ee)&&!I.hasOwnProperty(Ee)&&(ae[Ee]=G[Ee]===void 0&&he!==void 0?he[Ee]:G[Ee])}var Ee=arguments.length-2;if(Ee===1)ae.children=ie;else if(1<Ee){he=Array(Ee);for(var nt=0;nt<Ee;nt++)he[nt]=arguments[nt+2];ae.children=he}return{$$typeof:e,type:U.type,key:fe,ref:je,props:ae,_owner:ze}},rt.createContext=function(U){return U={$$typeof:o,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},U.Provider={$$typeof:i,_context:U},U.Consumer=U},rt.createElement=M,rt.createFactory=function(U){var G=M.bind(null,U);return G.type=U,G},rt.createRef=function(){return{current:null}},rt.forwardRef=function(U){return{$$typeof:d,render:U}},rt.isValidElement=L,rt.lazy=function(U){return{$$typeof:p,_payload:{_status:-1,_result:U},_init:X}},rt.memo=function(U,G){return{$$typeof:h,type:U,compare:G===void 0?null:G}},rt.startTransition=function(U){var G=F.transition;F.transition={};try{U()}finally{F.transition=G}},rt.unstable_act=J,rt.useCallback=function(U,G){return ee.current.useCallback(U,G)},rt.useContext=function(U){return ee.current.useContext(U)},rt.useDebugValue=function(){},rt.useDeferredValue=function(U){return ee.current.useDeferredValue(U)},rt.useEffect=function(U,G){return ee.current.useEffect(U,G)},rt.useId=function(){return ee.current.useId()},rt.useImperativeHandle=function(U,G,ie){return ee.current.useImperativeHandle(U,G,ie)},rt.useInsertionEffect=function(U,G){return ee.current.useInsertionEffect(U,G)},rt.useLayoutEffect=function(U,G){return ee.current.useLayoutEffect(U,G)},rt.useMemo=function(U,G){return ee.current.useMemo(U,G)},rt.useReducer=function(U,G,ie){return ee.current.useReducer(U,G,ie)},rt.useRef=function(U){return ee.current.useRef(U)},rt.useState=function(U){return ee.current.useState(U)},rt.useSyncExternalStore=function(U,G,ie){return ee.current.useSyncExternalStore(U,G,ie)},rt.useTransition=function(){return ee.current.useTransition()},rt.version="18.3.1",rt}var Lj;function Yb(){return Lj||(Lj=1,Cg.exports=QI()),Cg.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $j;function XI(){if($j)return wd;$j=1;var e=Yb(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(d,u,h){var p,f={},x=null,y=null;h!==void 0&&(x=""+h),u.key!==void 0&&(x=""+u.key),u.ref!==void 0&&(y=u.ref);for(p in u)s.call(u,p)&&!i.hasOwnProperty(p)&&(f[p]=u[p]);if(d&&d.defaultProps)for(p in u=d.defaultProps,u)f[p]===void 0&&(f[p]=u[p]);return{$$typeof:t,type:d,key:x,ref:y,props:f,_owner:a.current}}return wd.Fragment=r,wd.jsx=o,wd.jsxs=o,wd}var Dj;function ZI(){return Dj||(Dj=1,Eg.exports=XI()),Eg.exports}var n=ZI(),T=Yb(),Qh={},Tg={exports:{}},or={},Rg={exports:{}},Ig={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fj;function e3(){return Fj||(Fj=1,(function(e){function t(F,Q){var J=F.length;F.push(Q);e:for(;0<J;){var U=J-1>>>1,G=F[U];if(0<a(G,Q))F[U]=Q,F[J]=G,J=U;else break e}}function r(F){return F.length===0?null:F[0]}function s(F){if(F.length===0)return null;var Q=F[0],J=F.pop();if(J!==Q){F[0]=J;e:for(var U=0,G=F.length,ie=G>>>1;U<ie;){var ae=2*(U+1)-1,fe=F[ae],je=ae+1,ze=F[je];if(0>a(fe,J))je<G&&0>a(ze,fe)?(F[U]=ze,F[je]=J,U=je):(F[U]=fe,F[ae]=J,U=ae);else if(je<G&&0>a(ze,J))F[U]=ze,F[je]=J,U=je;else break e}}return Q}function a(F,Q){var J=F.sortIndex-Q.sortIndex;return J!==0?J:F.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,d=o.now();e.unstable_now=function(){return o.now()-d}}var u=[],h=[],p=1,f=null,x=3,y=!1,b=!1,w=!1,v=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(F){for(var Q=r(h);Q!==null;){if(Q.callback===null)s(h);else if(Q.startTime<=F)s(h),Q.sortIndex=Q.expirationTime,t(u,Q);else break;Q=r(h)}}function k(F){if(w=!1,S(F),!b)if(r(u)!==null)b=!0,X(R);else{var Q=r(h);Q!==null&&ee(k,Q.startTime-F)}}function R(F,Q){b=!1,w&&(w=!1,j(M),M=-1),y=!0;var J=x;try{for(S(Q),f=r(u);f!==null&&(!(f.expirationTime>Q)||F&&!P());){var U=f.callback;if(typeof U=="function"){f.callback=null,x=f.priorityLevel;var G=U(f.expirationTime<=Q);Q=e.unstable_now(),typeof G=="function"?f.callback=G:f===r(u)&&s(u),S(Q)}else s(u);f=r(u)}if(f!==null)var ie=!0;else{var ae=r(h);ae!==null&&ee(k,ae.startTime-Q),ie=!1}return ie}finally{f=null,x=J,y=!1}}var E=!1,I=null,M=-1,O=5,L=-1;function P(){return!(e.unstable_now()-L<O)}function $(){if(I!==null){var F=e.unstable_now();L=F;var Q=!0;try{Q=I(!0,F)}finally{Q?B():(E=!1,I=null)}}else E=!1}var B;if(typeof C=="function")B=function(){C($)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,se=D.port2;D.port1.onmessage=$,B=function(){se.postMessage(null)}}else B=function(){v($,0)};function X(F){I=F,E||(E=!0,B())}function ee(F,Q){M=v(function(){F(e.unstable_now())},Q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(F){F.callback=null},e.unstable_continueExecution=function(){b||y||(b=!0,X(R))},e.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<F?Math.floor(1e3/F):5},e.unstable_getCurrentPriorityLevel=function(){return x},e.unstable_getFirstCallbackNode=function(){return r(u)},e.unstable_next=function(F){switch(x){case 1:case 2:case 3:var Q=3;break;default:Q=x}var J=x;x=Q;try{return F()}finally{x=J}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(F,Q){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var J=x;x=F;try{return Q()}finally{x=J}},e.unstable_scheduleCallback=function(F,Q,J){var U=e.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?U+J:U):J=U,F){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=J+G,F={id:p++,callback:Q,priorityLevel:F,startTime:J,expirationTime:G,sortIndex:-1},J>U?(F.sortIndex=J,t(h,F),r(u)===null&&F===r(h)&&(w?(j(M),M=-1):w=!0,ee(k,J-U))):(F.sortIndex=G,t(u,F),b||y||(b=!0,X(R))),F},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(F){var Q=x;return function(){var J=x;x=Q;try{return F.apply(this,arguments)}finally{x=J}}}})(Ig)),Ig}var Uj;function t3(){return Uj||(Uj=1,Rg.exports=e3()),Rg.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qj;function n3(){if(qj)return or;qj=1;var e=Yb(),t=t3();function r(l){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+l,m=1;m<arguments.length;m++)c+="&args[]="+encodeURIComponent(arguments[m]);return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function i(l,c){o(l,c),o(l+"Capture",c)}function o(l,c){for(a[l]=c,l=0;l<c.length;l++)s.add(c[l])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function x(l){return u.call(f,l)?!0:u.call(p,l)?!1:h.test(l)?f[l]=!0:(p[l]=!0,!1)}function y(l,c,m,g){if(m!==null&&m.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return g?!1:m!==null?!m.acceptsBooleans:(l=l.toLowerCase().slice(0,5),l!=="data-"&&l!=="aria-");default:return!1}}function b(l,c,m,g){if(c===null||typeof c>"u"||y(l,c,m,g))return!0;if(g)return!1;if(m!==null)switch(m.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function w(l,c,m,g,_,N,A){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=g,this.attributeNamespace=_,this.mustUseProperty=m,this.propertyName=l,this.type=c,this.sanitizeURL=N,this.removeEmptyString=A}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(l){v[l]=new w(l,0,!1,l,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(l){var c=l[0];v[c]=new w(c,1,!1,l[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(l){v[l]=new w(l,2,!1,l.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(l){v[l]=new w(l,2,!1,l,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(l){v[l]=new w(l,3,!1,l.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(l){v[l]=new w(l,3,!0,l,null,!1,!1)}),["capture","download"].forEach(function(l){v[l]=new w(l,4,!1,l,null,!1,!1)}),["cols","rows","size","span"].forEach(function(l){v[l]=new w(l,6,!1,l,null,!1,!1)}),["rowSpan","start"].forEach(function(l){v[l]=new w(l,5,!1,l.toLowerCase(),null,!1,!1)});var j=/[\-:]([a-z])/g;function C(l){return l[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(l){var c=l.replace(j,C);v[c]=new w(c,1,!1,l,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(l){var c=l.replace(j,C);v[c]=new w(c,1,!1,l,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(l){var c=l.replace(j,C);v[c]=new w(c,1,!1,l,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(l){v[l]=new w(l,1,!1,l.toLowerCase(),null,!1,!1)}),v.xlinkHref=new w("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(l){v[l]=new w(l,1,!1,l.toLowerCase(),null,!0,!0)});function S(l,c,m,g){var _=v.hasOwnProperty(c)?v[c]:null;(_!==null?_.type!==0:g||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(b(c,m,_,g)&&(m=null),g||_===null?x(c)&&(m===null?l.removeAttribute(c):l.setAttribute(c,""+m)):_.mustUseProperty?l[_.propertyName]=m===null?_.type===3?!1:"":m:(c=_.attributeName,g=_.attributeNamespace,m===null?l.removeAttribute(c):(_=_.type,m=_===3||_===4&&m===!0?"":""+m,g?l.setAttributeNS(g,c,m):l.setAttribute(c,m))))}var k=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,R=Symbol.for("react.element"),E=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),L=Symbol.for("react.provider"),P=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),se=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),ee=Symbol.for("react.offscreen"),F=Symbol.iterator;function Q(l){return l===null||typeof l!="object"?null:(l=F&&l[F]||l["@@iterator"],typeof l=="function"?l:null)}var J=Object.assign,U;function G(l){if(U===void 0)try{throw Error()}catch(m){var c=m.stack.trim().match(/\n( *(at )?)/);U=c&&c[1]||""}return`
`+U+l}var ie=!1;function ae(l,c){if(!l||ie)return"";ie=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(ne){var g=ne}Reflect.construct(l,[],c)}else{try{c.call()}catch(ne){g=ne}l.call(c.prototype)}else{try{throw Error()}catch(ne){g=ne}l()}}catch(ne){if(ne&&g&&typeof ne.stack=="string"){for(var _=ne.stack.split(`
`),N=g.stack.split(`
`),A=_.length-1,q=N.length-1;1<=A&&0<=q&&_[A]!==N[q];)q--;for(;1<=A&&0<=q;A--,q--)if(_[A]!==N[q]){if(A!==1||q!==1)do if(A--,q--,0>q||_[A]!==N[q]){var W=`
`+_[A].replace(" at new "," at ");return l.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",l.displayName)),W}while(1<=A&&0<=q);break}}}finally{ie=!1,Error.prepareStackTrace=m}return(l=l?l.displayName||l.name:"")?G(l):""}function fe(l){switch(l.tag){case 5:return G(l.type);case 16:return G("Lazy");case 13:return G("Suspense");case 19:return G("SuspenseList");case 0:case 2:case 15:return l=ae(l.type,!1),l;case 11:return l=ae(l.type.render,!1),l;case 1:return l=ae(l.type,!0),l;default:return""}}function je(l){if(l==null)return null;if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case I:return"Fragment";case E:return"Portal";case O:return"Profiler";case M:return"StrictMode";case B:return"Suspense";case D:return"SuspenseList"}if(typeof l=="object")switch(l.$$typeof){case P:return(l.displayName||"Context")+".Consumer";case L:return(l._context.displayName||"Context")+".Provider";case $:var c=l.render;return l=l.displayName,l||(l=c.displayName||c.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case se:return c=l.displayName||null,c!==null?c:je(l.type)||"Memo";case X:c=l._payload,l=l._init;try{return je(l(c))}catch{}}return null}function ze(l){var c=l.type;switch(l.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return l=c.render,l=l.displayName||l.name||"",c.displayName||(l!==""?"ForwardRef("+l+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return je(c);case 8:return c===M?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function he(l){switch(typeof l){case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function Ee(l){var c=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function nt(l){var c=Ee(l)?"checked":"value",m=Object.getOwnPropertyDescriptor(l.constructor.prototype,c),g=""+l[c];if(!l.hasOwnProperty(c)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var _=m.get,N=m.set;return Object.defineProperty(l,c,{configurable:!0,get:function(){return _.call(this)},set:function(A){g=""+A,N.call(this,A)}}),Object.defineProperty(l,c,{enumerable:m.enumerable}),{getValue:function(){return g},setValue:function(A){g=""+A},stopTracking:function(){l._valueTracker=null,delete l[c]}}}}function Ln(l){l._valueTracker||(l._valueTracker=nt(l))}function Or(l){if(!l)return!1;var c=l._valueTracker;if(!c)return!0;var m=c.getValue(),g="";return l&&(g=Ee(l)?l.checked?"true":"false":l.value),l=g,l!==m?(c.setValue(l),!0):!1}function yr(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}function Ve(l,c){var m=c.checked;return J({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:m??l._wrapperState.initialChecked})}function vt(l,c){var m=c.defaultValue==null?"":c.defaultValue,g=c.checked!=null?c.checked:c.defaultChecked;m=he(c.value!=null?c.value:m),l._wrapperState={initialChecked:g,initialValue:m,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function En(l,c){c=c.checked,c!=null&&S(l,"checked",c,!1)}function nn(l,c){En(l,c);var m=he(c.value),g=c.type;if(m!=null)g==="number"?(m===0&&l.value===""||l.value!=m)&&(l.value=""+m):l.value!==""+m&&(l.value=""+m);else if(g==="submit"||g==="reset"){l.removeAttribute("value");return}c.hasOwnProperty("value")?an(l,c.type,m):c.hasOwnProperty("defaultValue")&&an(l,c.type,he(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(l.defaultChecked=!!c.defaultChecked)}function wt(l,c,m){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var g=c.type;if(!(g!=="submit"&&g!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+l._wrapperState.initialValue,m||c===l.value||(l.value=c),l.defaultValue=c}m=l.name,m!==""&&(l.name=""),l.defaultChecked=!!l._wrapperState.initialChecked,m!==""&&(l.name=m)}function an(l,c,m){(c!=="number"||yr(l.ownerDocument)!==l)&&(m==null?l.defaultValue=""+l._wrapperState.initialValue:l.defaultValue!==""+m&&(l.defaultValue=""+m))}var Ye=Array.isArray;function Bt(l,c,m,g){if(l=l.options,c){c={};for(var _=0;_<m.length;_++)c["$"+m[_]]=!0;for(m=0;m<l.length;m++)_=c.hasOwnProperty("$"+l[m].value),l[m].selected!==_&&(l[m].selected=_),_&&g&&(l[m].defaultSelected=!0)}else{for(m=""+he(m),c=null,_=0;_<l.length;_++){if(l[_].value===m){l[_].selected=!0,g&&(l[_].defaultSelected=!0);return}c!==null||l[_].disabled||(c=l[_])}c!==null&&(c.selected=!0)}}function Xe(l,c){if(c.dangerouslySetInnerHTML!=null)throw Error(r(91));return J({},c,{value:void 0,defaultValue:void 0,children:""+l._wrapperState.initialValue})}function Cn(l,c){var m=c.value;if(m==null){if(m=c.children,c=c.defaultValue,m!=null){if(c!=null)throw Error(r(92));if(Ye(m)){if(1<m.length)throw Error(r(93));m=m[0]}c=m}c==null&&(c=""),m=c}l._wrapperState={initialValue:he(m)}}function zn(l,c){var m=he(c.value),g=he(c.defaultValue);m!=null&&(m=""+m,m!==l.value&&(l.value=m),c.defaultValue==null&&l.defaultValue!==m&&(l.defaultValue=m)),g!=null&&(l.defaultValue=""+g)}function ut(l){var c=l.textContent;c===l._wrapperState.initialValue&&c!==""&&c!==null&&(l.value=c)}function Wo(l){switch(l){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $p(l,c){return l==null||l==="http://www.w3.org/1999/xhtml"?Wo(c):l==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":l}var Bu,Vv=(function(l){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,m,g,_){MSApp.execUnsafeLocalFunction(function(){return l(c,m,g,_)})}:l})(function(l,c){if(l.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in l)l.innerHTML=c;else{for(Bu=Bu||document.createElement("div"),Bu.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=Bu.firstChild;l.firstChild;)l.removeChild(l.firstChild);for(;c.firstChild;)l.appendChild(c.firstChild)}});function $c(l,c){if(c){var m=l.firstChild;if(m&&m===l.lastChild&&m.nodeType===3){m.nodeValue=c;return}}l.textContent=c}var Dc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Q4=["Webkit","ms","Moz","O"];Object.keys(Dc).forEach(function(l){Q4.forEach(function(c){c=c+l.charAt(0).toUpperCase()+l.substring(1),Dc[c]=Dc[l]})});function Yv(l,c,m){return c==null||typeof c=="boolean"||c===""?"":m||typeof c!="number"||c===0||Dc.hasOwnProperty(l)&&Dc[l]?(""+c).trim():c+"px"}function Jv(l,c){l=l.style;for(var m in c)if(c.hasOwnProperty(m)){var g=m.indexOf("--")===0,_=Yv(m,c[m],g);m==="float"&&(m="cssFloat"),g?l.setProperty(m,_):l[m]=_}}var X4=J({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Dp(l,c){if(c){if(X4[l]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(r(137,l));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(r(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(r(61))}if(c.style!=null&&typeof c.style!="object")throw Error(r(62))}}function Fp(l,c){if(l.indexOf("-")===-1)return typeof c.is=="string";switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Up=null;function qp(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Bp=null,zo=null,Go=null;function Qv(l){if(l=id(l)){if(typeof Bp!="function")throw Error(r(280));var c=l.stateNode;c&&(c=uh(c),Bp(l.stateNode,l.type,c))}}function Xv(l){zo?Go?Go.push(l):Go=[l]:zo=l}function Zv(){if(zo){var l=zo,c=Go;if(Go=zo=null,Qv(l),c)for(l=0;l<c.length;l++)Qv(c[l])}}function ew(l,c){return l(c)}function tw(){}var Hp=!1;function nw(l,c,m){if(Hp)return l(c,m);Hp=!0;try{return ew(l,c,m)}finally{Hp=!1,(zo!==null||Go!==null)&&(tw(),Zv())}}function Fc(l,c){var m=l.stateNode;if(m===null)return null;var g=uh(m);if(g===null)return null;m=g[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(l=l.type,g=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!g;break e;default:l=!1}if(l)return null;if(m&&typeof m!="function")throw Error(r(231,c,typeof m));return m}var Wp=!1;if(d)try{var Uc={};Object.defineProperty(Uc,"passive",{get:function(){Wp=!0}}),window.addEventListener("test",Uc,Uc),window.removeEventListener("test",Uc,Uc)}catch{Wp=!1}function Z4(l,c,m,g,_,N,A,q,W){var ne=Array.prototype.slice.call(arguments,3);try{c.apply(m,ne)}catch(ce){this.onError(ce)}}var qc=!1,Hu=null,Wu=!1,zp=null,eR={onError:function(l){qc=!0,Hu=l}};function tR(l,c,m,g,_,N,A,q,W){qc=!1,Hu=null,Z4.apply(eR,arguments)}function nR(l,c,m,g,_,N,A,q,W){if(tR.apply(this,arguments),qc){if(qc){var ne=Hu;qc=!1,Hu=null}else throw Error(r(198));Wu||(Wu=!0,zp=ne)}}function Li(l){var c=l,m=l;if(l.alternate)for(;c.return;)c=c.return;else{l=c;do c=l,(c.flags&4098)!==0&&(m=c.return),l=c.return;while(l)}return c.tag===3?m:null}function rw(l){if(l.tag===13){var c=l.memoizedState;if(c===null&&(l=l.alternate,l!==null&&(c=l.memoizedState)),c!==null)return c.dehydrated}return null}function sw(l){if(Li(l)!==l)throw Error(r(188))}function rR(l){var c=l.alternate;if(!c){if(c=Li(l),c===null)throw Error(r(188));return c!==l?null:l}for(var m=l,g=c;;){var _=m.return;if(_===null)break;var N=_.alternate;if(N===null){if(g=_.return,g!==null){m=g;continue}break}if(_.child===N.child){for(N=_.child;N;){if(N===m)return sw(_),l;if(N===g)return sw(_),c;N=N.sibling}throw Error(r(188))}if(m.return!==g.return)m=_,g=N;else{for(var A=!1,q=_.child;q;){if(q===m){A=!0,m=_,g=N;break}if(q===g){A=!0,g=_,m=N;break}q=q.sibling}if(!A){for(q=N.child;q;){if(q===m){A=!0,m=N,g=_;break}if(q===g){A=!0,g=N,m=_;break}q=q.sibling}if(!A)throw Error(r(189))}}if(m.alternate!==g)throw Error(r(190))}if(m.tag!==3)throw Error(r(188));return m.stateNode.current===m?l:c}function aw(l){return l=rR(l),l!==null?iw(l):null}function iw(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){var c=iw(l);if(c!==null)return c;l=l.sibling}return null}var ow=t.unstable_scheduleCallback,lw=t.unstable_cancelCallback,sR=t.unstable_shouldYield,aR=t.unstable_requestPaint,rn=t.unstable_now,iR=t.unstable_getCurrentPriorityLevel,Gp=t.unstable_ImmediatePriority,cw=t.unstable_UserBlockingPriority,zu=t.unstable_NormalPriority,oR=t.unstable_LowPriority,dw=t.unstable_IdlePriority,Gu=null,Cs=null;function lR(l){if(Cs&&typeof Cs.onCommitFiberRoot=="function")try{Cs.onCommitFiberRoot(Gu,l,void 0,(l.current.flags&128)===128)}catch{}}var rs=Math.clz32?Math.clz32:uR,cR=Math.log,dR=Math.LN2;function uR(l){return l>>>=0,l===0?32:31-(cR(l)/dR|0)|0}var Ku=64,Vu=4194304;function Bc(l){switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return l&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return l}}function Yu(l,c){var m=l.pendingLanes;if(m===0)return 0;var g=0,_=l.suspendedLanes,N=l.pingedLanes,A=m&268435455;if(A!==0){var q=A&~_;q!==0?g=Bc(q):(N&=A,N!==0&&(g=Bc(N)))}else A=m&~_,A!==0?g=Bc(A):N!==0&&(g=Bc(N));if(g===0)return 0;if(c!==0&&c!==g&&(c&_)===0&&(_=g&-g,N=c&-c,_>=N||_===16&&(N&4194240)!==0))return c;if((g&4)!==0&&(g|=m&16),c=l.entangledLanes,c!==0)for(l=l.entanglements,c&=g;0<c;)m=31-rs(c),_=1<<m,g|=l[m],c&=~_;return g}function hR(l,c){switch(l){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mR(l,c){for(var m=l.suspendedLanes,g=l.pingedLanes,_=l.expirationTimes,N=l.pendingLanes;0<N;){var A=31-rs(N),q=1<<A,W=_[A];W===-1?((q&m)===0||(q&g)!==0)&&(_[A]=hR(q,c)):W<=c&&(l.expiredLanes|=q),N&=~q}}function Kp(l){return l=l.pendingLanes&-1073741825,l!==0?l:l&1073741824?1073741824:0}function uw(){var l=Ku;return Ku<<=1,(Ku&4194240)===0&&(Ku=64),l}function Vp(l){for(var c=[],m=0;31>m;m++)c.push(l);return c}function Hc(l,c,m){l.pendingLanes|=c,c!==536870912&&(l.suspendedLanes=0,l.pingedLanes=0),l=l.eventTimes,c=31-rs(c),l[c]=m}function fR(l,c){var m=l.pendingLanes&~c;l.pendingLanes=c,l.suspendedLanes=0,l.pingedLanes=0,l.expiredLanes&=c,l.mutableReadLanes&=c,l.entangledLanes&=c,c=l.entanglements;var g=l.eventTimes;for(l=l.expirationTimes;0<m;){var _=31-rs(m),N=1<<_;c[_]=0,g[_]=-1,l[_]=-1,m&=~N}}function Yp(l,c){var m=l.entangledLanes|=c;for(l=l.entanglements;m;){var g=31-rs(m),_=1<<g;_&c|l[g]&c&&(l[g]|=c),m&=~_}}var bt=0;function hw(l){return l&=-l,1<l?4<l?(l&268435455)!==0?16:536870912:4:1}var mw,Jp,fw,pw,xw,Qp=!1,Ju=[],Ra=null,Ia=null,Pa=null,Wc=new Map,zc=new Map,Aa=[],pR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gw(l,c){switch(l){case"focusin":case"focusout":Ra=null;break;case"dragenter":case"dragleave":Ia=null;break;case"mouseover":case"mouseout":Pa=null;break;case"pointerover":case"pointerout":Wc.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":zc.delete(c.pointerId)}}function Gc(l,c,m,g,_,N){return l===null||l.nativeEvent!==N?(l={blockedOn:c,domEventName:m,eventSystemFlags:g,nativeEvent:N,targetContainers:[_]},c!==null&&(c=id(c),c!==null&&Jp(c)),l):(l.eventSystemFlags|=g,c=l.targetContainers,_!==null&&c.indexOf(_)===-1&&c.push(_),l)}function xR(l,c,m,g,_){switch(c){case"focusin":return Ra=Gc(Ra,l,c,m,g,_),!0;case"dragenter":return Ia=Gc(Ia,l,c,m,g,_),!0;case"mouseover":return Pa=Gc(Pa,l,c,m,g,_),!0;case"pointerover":var N=_.pointerId;return Wc.set(N,Gc(Wc.get(N)||null,l,c,m,g,_)),!0;case"gotpointercapture":return N=_.pointerId,zc.set(N,Gc(zc.get(N)||null,l,c,m,g,_)),!0}return!1}function bw(l){var c=$i(l.target);if(c!==null){var m=Li(c);if(m!==null){if(c=m.tag,c===13){if(c=rw(m),c!==null){l.blockedOn=c,xw(l.priority,function(){fw(m)});return}}else if(c===3&&m.stateNode.current.memoizedState.isDehydrated){l.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}l.blockedOn=null}function Qu(l){if(l.blockedOn!==null)return!1;for(var c=l.targetContainers;0<c.length;){var m=Zp(l.domEventName,l.eventSystemFlags,c[0],l.nativeEvent);if(m===null){m=l.nativeEvent;var g=new m.constructor(m.type,m);Up=g,m.target.dispatchEvent(g),Up=null}else return c=id(m),c!==null&&Jp(c),l.blockedOn=m,!1;c.shift()}return!0}function yw(l,c,m){Qu(l)&&m.delete(c)}function gR(){Qp=!1,Ra!==null&&Qu(Ra)&&(Ra=null),Ia!==null&&Qu(Ia)&&(Ia=null),Pa!==null&&Qu(Pa)&&(Pa=null),Wc.forEach(yw),zc.forEach(yw)}function Kc(l,c){l.blockedOn===c&&(l.blockedOn=null,Qp||(Qp=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,gR)))}function Vc(l){function c(_){return Kc(_,l)}if(0<Ju.length){Kc(Ju[0],l);for(var m=1;m<Ju.length;m++){var g=Ju[m];g.blockedOn===l&&(g.blockedOn=null)}}for(Ra!==null&&Kc(Ra,l),Ia!==null&&Kc(Ia,l),Pa!==null&&Kc(Pa,l),Wc.forEach(c),zc.forEach(c),m=0;m<Aa.length;m++)g=Aa[m],g.blockedOn===l&&(g.blockedOn=null);for(;0<Aa.length&&(m=Aa[0],m.blockedOn===null);)bw(m),m.blockedOn===null&&Aa.shift()}var Ko=k.ReactCurrentBatchConfig,Xu=!0;function bR(l,c,m,g){var _=bt,N=Ko.transition;Ko.transition=null;try{bt=1,Xp(l,c,m,g)}finally{bt=_,Ko.transition=N}}function yR(l,c,m,g){var _=bt,N=Ko.transition;Ko.transition=null;try{bt=4,Xp(l,c,m,g)}finally{bt=_,Ko.transition=N}}function Xp(l,c,m,g){if(Xu){var _=Zp(l,c,m,g);if(_===null)xx(l,c,g,Zu,m),gw(l,g);else if(xR(_,l,c,m,g))g.stopPropagation();else if(gw(l,g),c&4&&-1<pR.indexOf(l)){for(;_!==null;){var N=id(_);if(N!==null&&mw(N),N=Zp(l,c,m,g),N===null&&xx(l,c,g,Zu,m),N===_)break;_=N}_!==null&&g.stopPropagation()}else xx(l,c,g,null,m)}}var Zu=null;function Zp(l,c,m,g){if(Zu=null,l=qp(g),l=$i(l),l!==null)if(c=Li(l),c===null)l=null;else if(m=c.tag,m===13){if(l=rw(c),l!==null)return l;l=null}else if(m===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;l=null}else c!==l&&(l=null);return Zu=l,null}function vw(l){switch(l){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(iR()){case Gp:return 1;case cw:return 4;case zu:case oR:return 16;case dw:return 536870912;default:return 16}default:return 16}}var Ma=null,ex=null,eh=null;function ww(){if(eh)return eh;var l,c=ex,m=c.length,g,_="value"in Ma?Ma.value:Ma.textContent,N=_.length;for(l=0;l<m&&c[l]===_[l];l++);var A=m-l;for(g=1;g<=A&&c[m-g]===_[N-g];g++);return eh=_.slice(l,1<g?1-g:void 0)}function th(l){var c=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&c===13&&(l=13)):l=c,l===10&&(l=13),32<=l||l===13?l:0}function nh(){return!0}function _w(){return!1}function vr(l){function c(m,g,_,N,A){this._reactName=m,this._targetInst=_,this.type=g,this.nativeEvent=N,this.target=A,this.currentTarget=null;for(var q in l)l.hasOwnProperty(q)&&(m=l[q],this[q]=m?m(N):N[q]);return this.isDefaultPrevented=(N.defaultPrevented!=null?N.defaultPrevented:N.returnValue===!1)?nh:_w,this.isPropagationStopped=_w,this}return J(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=nh)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=nh)},persist:function(){},isPersistent:nh}),c}var Vo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tx=vr(Vo),Yc=J({},Vo,{view:0,detail:0}),vR=vr(Yc),nx,rx,Jc,rh=J({},Yc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ax,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==Jc&&(Jc&&l.type==="mousemove"?(nx=l.screenX-Jc.screenX,rx=l.screenY-Jc.screenY):rx=nx=0,Jc=l),nx)},movementY:function(l){return"movementY"in l?l.movementY:rx}}),jw=vr(rh),wR=J({},rh,{dataTransfer:0}),_R=vr(wR),jR=J({},Yc,{relatedTarget:0}),sx=vr(jR),NR=J({},Vo,{animationName:0,elapsedTime:0,pseudoElement:0}),SR=vr(NR),kR=J({},Vo,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),ER=vr(kR),CR=J({},Vo,{data:0}),Nw=vr(CR),TR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},RR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},IR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function PR(l){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(l):(l=IR[l])?!!c[l]:!1}function ax(){return PR}var AR=J({},Yc,{key:function(l){if(l.key){var c=TR[l.key]||l.key;if(c!=="Unidentified")return c}return l.type==="keypress"?(l=th(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?RR[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ax,charCode:function(l){return l.type==="keypress"?th(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?th(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),MR=vr(AR),OR=J({},rh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sw=vr(OR),LR=J({},Yc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ax}),$R=vr(LR),DR=J({},Vo,{propertyName:0,elapsedTime:0,pseudoElement:0}),FR=vr(DR),UR=J({},rh,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),qR=vr(UR),BR=[9,13,27,32],ix=d&&"CompositionEvent"in window,Qc=null;d&&"documentMode"in document&&(Qc=document.documentMode);var HR=d&&"TextEvent"in window&&!Qc,kw=d&&(!ix||Qc&&8<Qc&&11>=Qc),Ew=" ",Cw=!1;function Tw(l,c){switch(l){case"keyup":return BR.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rw(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var Yo=!1;function WR(l,c){switch(l){case"compositionend":return Rw(c);case"keypress":return c.which!==32?null:(Cw=!0,Ew);case"textInput":return l=c.data,l===Ew&&Cw?null:l;default:return null}}function zR(l,c){if(Yo)return l==="compositionend"||!ix&&Tw(l,c)?(l=ww(),eh=ex=Ma=null,Yo=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return kw&&c.locale!=="ko"?null:c.data;default:return null}}var GR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Iw(l){var c=l&&l.nodeName&&l.nodeName.toLowerCase();return c==="input"?!!GR[l.type]:c==="textarea"}function Pw(l,c,m,g){Xv(g),c=lh(c,"onChange"),0<c.length&&(m=new tx("onChange","change",null,m,g),l.push({event:m,listeners:c}))}var Xc=null,Zc=null;function KR(l){Jw(l,0)}function sh(l){var c=el(l);if(Or(c))return l}function VR(l,c){if(l==="change")return c}var Aw=!1;if(d){var ox;if(d){var lx="oninput"in document;if(!lx){var Mw=document.createElement("div");Mw.setAttribute("oninput","return;"),lx=typeof Mw.oninput=="function"}ox=lx}else ox=!1;Aw=ox&&(!document.documentMode||9<document.documentMode)}function Ow(){Xc&&(Xc.detachEvent("onpropertychange",Lw),Zc=Xc=null)}function Lw(l){if(l.propertyName==="value"&&sh(Zc)){var c=[];Pw(c,Zc,l,qp(l)),nw(KR,c)}}function YR(l,c,m){l==="focusin"?(Ow(),Xc=c,Zc=m,Xc.attachEvent("onpropertychange",Lw)):l==="focusout"&&Ow()}function JR(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return sh(Zc)}function QR(l,c){if(l==="click")return sh(c)}function XR(l,c){if(l==="input"||l==="change")return sh(c)}function ZR(l,c){return l===c&&(l!==0||1/l===1/c)||l!==l&&c!==c}var ss=typeof Object.is=="function"?Object.is:ZR;function ed(l,c){if(ss(l,c))return!0;if(typeof l!="object"||l===null||typeof c!="object"||c===null)return!1;var m=Object.keys(l),g=Object.keys(c);if(m.length!==g.length)return!1;for(g=0;g<m.length;g++){var _=m[g];if(!u.call(c,_)||!ss(l[_],c[_]))return!1}return!0}function $w(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function Dw(l,c){var m=$w(l);l=0;for(var g;m;){if(m.nodeType===3){if(g=l+m.textContent.length,l<=c&&g>=c)return{node:m,offset:c-l};l=g}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=$w(m)}}function Fw(l,c){return l&&c?l===c?!0:l&&l.nodeType===3?!1:c&&c.nodeType===3?Fw(l,c.parentNode):"contains"in l?l.contains(c):l.compareDocumentPosition?!!(l.compareDocumentPosition(c)&16):!1:!1}function Uw(){for(var l=window,c=yr();c instanceof l.HTMLIFrameElement;){try{var m=typeof c.contentWindow.location.href=="string"}catch{m=!1}if(m)l=c.contentWindow;else break;c=yr(l.document)}return c}function cx(l){var c=l&&l.nodeName&&l.nodeName.toLowerCase();return c&&(c==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||c==="textarea"||l.contentEditable==="true")}function eI(l){var c=Uw(),m=l.focusedElem,g=l.selectionRange;if(c!==m&&m&&m.ownerDocument&&Fw(m.ownerDocument.documentElement,m)){if(g!==null&&cx(m)){if(c=g.start,l=g.end,l===void 0&&(l=c),"selectionStart"in m)m.selectionStart=c,m.selectionEnd=Math.min(l,m.value.length);else if(l=(c=m.ownerDocument||document)&&c.defaultView||window,l.getSelection){l=l.getSelection();var _=m.textContent.length,N=Math.min(g.start,_);g=g.end===void 0?N:Math.min(g.end,_),!l.extend&&N>g&&(_=g,g=N,N=_),_=Dw(m,N);var A=Dw(m,g);_&&A&&(l.rangeCount!==1||l.anchorNode!==_.node||l.anchorOffset!==_.offset||l.focusNode!==A.node||l.focusOffset!==A.offset)&&(c=c.createRange(),c.setStart(_.node,_.offset),l.removeAllRanges(),N>g?(l.addRange(c),l.extend(A.node,A.offset)):(c.setEnd(A.node,A.offset),l.addRange(c)))}}for(c=[],l=m;l=l.parentNode;)l.nodeType===1&&c.push({element:l,left:l.scrollLeft,top:l.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<c.length;m++)l=c[m],l.element.scrollLeft=l.left,l.element.scrollTop=l.top}}var tI=d&&"documentMode"in document&&11>=document.documentMode,Jo=null,dx=null,td=null,ux=!1;function qw(l,c,m){var g=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;ux||Jo==null||Jo!==yr(g)||(g=Jo,"selectionStart"in g&&cx(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),td&&ed(td,g)||(td=g,g=lh(dx,"onSelect"),0<g.length&&(c=new tx("onSelect","select",null,c,m),l.push({event:c,listeners:g}),c.target=Jo)))}function ah(l,c){var m={};return m[l.toLowerCase()]=c.toLowerCase(),m["Webkit"+l]="webkit"+c,m["Moz"+l]="moz"+c,m}var Qo={animationend:ah("Animation","AnimationEnd"),animationiteration:ah("Animation","AnimationIteration"),animationstart:ah("Animation","AnimationStart"),transitionend:ah("Transition","TransitionEnd")},hx={},Bw={};d&&(Bw=document.createElement("div").style,"AnimationEvent"in window||(delete Qo.animationend.animation,delete Qo.animationiteration.animation,delete Qo.animationstart.animation),"TransitionEvent"in window||delete Qo.transitionend.transition);function ih(l){if(hx[l])return hx[l];if(!Qo[l])return l;var c=Qo[l],m;for(m in c)if(c.hasOwnProperty(m)&&m in Bw)return hx[l]=c[m];return l}var Hw=ih("animationend"),Ww=ih("animationiteration"),zw=ih("animationstart"),Gw=ih("transitionend"),Kw=new Map,Vw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Oa(l,c){Kw.set(l,c),i(c,[l])}for(var mx=0;mx<Vw.length;mx++){var fx=Vw[mx],nI=fx.toLowerCase(),rI=fx[0].toUpperCase()+fx.slice(1);Oa(nI,"on"+rI)}Oa(Hw,"onAnimationEnd"),Oa(Ww,"onAnimationIteration"),Oa(zw,"onAnimationStart"),Oa("dblclick","onDoubleClick"),Oa("focusin","onFocus"),Oa("focusout","onBlur"),Oa(Gw,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sI=new Set("cancel close invalid load scroll toggle".split(" ").concat(nd));function Yw(l,c,m){var g=l.type||"unknown-event";l.currentTarget=m,nR(g,c,void 0,l),l.currentTarget=null}function Jw(l,c){c=(c&4)!==0;for(var m=0;m<l.length;m++){var g=l[m],_=g.event;g=g.listeners;e:{var N=void 0;if(c)for(var A=g.length-1;0<=A;A--){var q=g[A],W=q.instance,ne=q.currentTarget;if(q=q.listener,W!==N&&_.isPropagationStopped())break e;Yw(_,q,ne),N=W}else for(A=0;A<g.length;A++){if(q=g[A],W=q.instance,ne=q.currentTarget,q=q.listener,W!==N&&_.isPropagationStopped())break e;Yw(_,q,ne),N=W}}}if(Wu)throw l=zp,Wu=!1,zp=null,l}function Ot(l,c){var m=c[_x];m===void 0&&(m=c[_x]=new Set);var g=l+"__bubble";m.has(g)||(Qw(c,l,2,!1),m.add(g))}function px(l,c,m){var g=0;c&&(g|=4),Qw(m,l,g,c)}var oh="_reactListening"+Math.random().toString(36).slice(2);function rd(l){if(!l[oh]){l[oh]=!0,s.forEach(function(m){m!=="selectionchange"&&(sI.has(m)||px(m,!1,l),px(m,!0,l))});var c=l.nodeType===9?l:l.ownerDocument;c===null||c[oh]||(c[oh]=!0,px("selectionchange",!1,c))}}function Qw(l,c,m,g){switch(vw(c)){case 1:var _=bR;break;case 4:_=yR;break;default:_=Xp}m=_.bind(null,c,m,l),_=void 0,!Wp||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(_=!0),g?_!==void 0?l.addEventListener(c,m,{capture:!0,passive:_}):l.addEventListener(c,m,!0):_!==void 0?l.addEventListener(c,m,{passive:_}):l.addEventListener(c,m,!1)}function xx(l,c,m,g,_){var N=g;if((c&1)===0&&(c&2)===0&&g!==null)e:for(;;){if(g===null)return;var A=g.tag;if(A===3||A===4){var q=g.stateNode.containerInfo;if(q===_||q.nodeType===8&&q.parentNode===_)break;if(A===4)for(A=g.return;A!==null;){var W=A.tag;if((W===3||W===4)&&(W=A.stateNode.containerInfo,W===_||W.nodeType===8&&W.parentNode===_))return;A=A.return}for(;q!==null;){if(A=$i(q),A===null)return;if(W=A.tag,W===5||W===6){g=N=A;continue e}q=q.parentNode}}g=g.return}nw(function(){var ne=N,ce=qp(m),de=[];e:{var le=Kw.get(l);if(le!==void 0){var ve=tx,Ne=l;switch(l){case"keypress":if(th(m)===0)break e;case"keydown":case"keyup":ve=MR;break;case"focusin":Ne="focus",ve=sx;break;case"focusout":Ne="blur",ve=sx;break;case"beforeblur":case"afterblur":ve=sx;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ve=jw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ve=_R;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ve=$R;break;case Hw:case Ww:case zw:ve=SR;break;case Gw:ve=FR;break;case"scroll":ve=vR;break;case"wheel":ve=qR;break;case"copy":case"cut":case"paste":ve=ER;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ve=Sw}var ke=(c&4)!==0,sn=!ke&&l==="scroll",Z=ke?le!==null?le+"Capture":null:le;ke=[];for(var V=ne,te;V!==null;){te=V;var ue=te.stateNode;if(te.tag===5&&ue!==null&&(te=ue,Z!==null&&(ue=Fc(V,Z),ue!=null&&ke.push(sd(V,ue,te)))),sn)break;V=V.return}0<ke.length&&(le=new ve(le,Ne,null,m,ce),de.push({event:le,listeners:ke}))}}if((c&7)===0){e:{if(le=l==="mouseover"||l==="pointerover",ve=l==="mouseout"||l==="pointerout",le&&m!==Up&&(Ne=m.relatedTarget||m.fromElement)&&($i(Ne)||Ne[Gs]))break e;if((ve||le)&&(le=ce.window===ce?ce:(le=ce.ownerDocument)?le.defaultView||le.parentWindow:window,ve?(Ne=m.relatedTarget||m.toElement,ve=ne,Ne=Ne?$i(Ne):null,Ne!==null&&(sn=Li(Ne),Ne!==sn||Ne.tag!==5&&Ne.tag!==6)&&(Ne=null)):(ve=null,Ne=ne),ve!==Ne)){if(ke=jw,ue="onMouseLeave",Z="onMouseEnter",V="mouse",(l==="pointerout"||l==="pointerover")&&(ke=Sw,ue="onPointerLeave",Z="onPointerEnter",V="pointer"),sn=ve==null?le:el(ve),te=Ne==null?le:el(Ne),le=new ke(ue,V+"leave",ve,m,ce),le.target=sn,le.relatedTarget=te,ue=null,$i(ce)===ne&&(ke=new ke(Z,V+"enter",Ne,m,ce),ke.target=te,ke.relatedTarget=sn,ue=ke),sn=ue,ve&&Ne)t:{for(ke=ve,Z=Ne,V=0,te=ke;te;te=Xo(te))V++;for(te=0,ue=Z;ue;ue=Xo(ue))te++;for(;0<V-te;)ke=Xo(ke),V--;for(;0<te-V;)Z=Xo(Z),te--;for(;V--;){if(ke===Z||Z!==null&&ke===Z.alternate)break t;ke=Xo(ke),Z=Xo(Z)}ke=null}else ke=null;ve!==null&&Xw(de,le,ve,ke,!1),Ne!==null&&sn!==null&&Xw(de,sn,Ne,ke,!0)}}e:{if(le=ne?el(ne):window,ve=le.nodeName&&le.nodeName.toLowerCase(),ve==="select"||ve==="input"&&le.type==="file")var Ce=VR;else if(Iw(le))if(Aw)Ce=XR;else{Ce=JR;var Pe=YR}else(ve=le.nodeName)&&ve.toLowerCase()==="input"&&(le.type==="checkbox"||le.type==="radio")&&(Ce=QR);if(Ce&&(Ce=Ce(l,ne))){Pw(de,Ce,m,ce);break e}Pe&&Pe(l,le,ne),l==="focusout"&&(Pe=le._wrapperState)&&Pe.controlled&&le.type==="number"&&an(le,"number",le.value)}switch(Pe=ne?el(ne):window,l){case"focusin":(Iw(Pe)||Pe.contentEditable==="true")&&(Jo=Pe,dx=ne,td=null);break;case"focusout":td=dx=Jo=null;break;case"mousedown":ux=!0;break;case"contextmenu":case"mouseup":case"dragend":ux=!1,qw(de,m,ce);break;case"selectionchange":if(tI)break;case"keydown":case"keyup":qw(de,m,ce)}var Ae;if(ix)e:{switch(l){case"compositionstart":var Fe="onCompositionStart";break e;case"compositionend":Fe="onCompositionEnd";break e;case"compositionupdate":Fe="onCompositionUpdate";break e}Fe=void 0}else Yo?Tw(l,m)&&(Fe="onCompositionEnd"):l==="keydown"&&m.keyCode===229&&(Fe="onCompositionStart");Fe&&(kw&&m.locale!=="ko"&&(Yo||Fe!=="onCompositionStart"?Fe==="onCompositionEnd"&&Yo&&(Ae=ww()):(Ma=ce,ex="value"in Ma?Ma.value:Ma.textContent,Yo=!0)),Pe=lh(ne,Fe),0<Pe.length&&(Fe=new Nw(Fe,l,null,m,ce),de.push({event:Fe,listeners:Pe}),Ae?Fe.data=Ae:(Ae=Rw(m),Ae!==null&&(Fe.data=Ae)))),(Ae=HR?WR(l,m):zR(l,m))&&(ne=lh(ne,"onBeforeInput"),0<ne.length&&(ce=new Nw("onBeforeInput","beforeinput",null,m,ce),de.push({event:ce,listeners:ne}),ce.data=Ae))}Jw(de,c)})}function sd(l,c,m){return{instance:l,listener:c,currentTarget:m}}function lh(l,c){for(var m=c+"Capture",g=[];l!==null;){var _=l,N=_.stateNode;_.tag===5&&N!==null&&(_=N,N=Fc(l,m),N!=null&&g.unshift(sd(l,N,_)),N=Fc(l,c),N!=null&&g.push(sd(l,N,_))),l=l.return}return g}function Xo(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5);return l||null}function Xw(l,c,m,g,_){for(var N=c._reactName,A=[];m!==null&&m!==g;){var q=m,W=q.alternate,ne=q.stateNode;if(W!==null&&W===g)break;q.tag===5&&ne!==null&&(q=ne,_?(W=Fc(m,N),W!=null&&A.unshift(sd(m,W,q))):_||(W=Fc(m,N),W!=null&&A.push(sd(m,W,q)))),m=m.return}A.length!==0&&l.push({event:c,listeners:A})}var aI=/\r\n?/g,iI=/\u0000|\uFFFD/g;function Zw(l){return(typeof l=="string"?l:""+l).replace(aI,`
`).replace(iI,"")}function ch(l,c,m){if(c=Zw(c),Zw(l)!==c&&m)throw Error(r(425))}function dh(){}var gx=null,bx=null;function yx(l,c){return l==="textarea"||l==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var vx=typeof setTimeout=="function"?setTimeout:void 0,oI=typeof clearTimeout=="function"?clearTimeout:void 0,e_=typeof Promise=="function"?Promise:void 0,lI=typeof queueMicrotask=="function"?queueMicrotask:typeof e_<"u"?function(l){return e_.resolve(null).then(l).catch(cI)}:vx;function cI(l){setTimeout(function(){throw l})}function wx(l,c){var m=c,g=0;do{var _=m.nextSibling;if(l.removeChild(m),_&&_.nodeType===8)if(m=_.data,m==="/$"){if(g===0){l.removeChild(_),Vc(c);return}g--}else m!=="$"&&m!=="$?"&&m!=="$!"||g++;m=_}while(m);Vc(c)}function La(l){for(;l!=null;l=l.nextSibling){var c=l.nodeType;if(c===1||c===3)break;if(c===8){if(c=l.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return l}function t_(l){l=l.previousSibling;for(var c=0;l;){if(l.nodeType===8){var m=l.data;if(m==="$"||m==="$!"||m==="$?"){if(c===0)return l;c--}else m==="/$"&&c++}l=l.previousSibling}return null}var Zo=Math.random().toString(36).slice(2),Ts="__reactFiber$"+Zo,ad="__reactProps$"+Zo,Gs="__reactContainer$"+Zo,_x="__reactEvents$"+Zo,dI="__reactListeners$"+Zo,uI="__reactHandles$"+Zo;function $i(l){var c=l[Ts];if(c)return c;for(var m=l.parentNode;m;){if(c=m[Gs]||m[Ts]){if(m=c.alternate,c.child!==null||m!==null&&m.child!==null)for(l=t_(l);l!==null;){if(m=l[Ts])return m;l=t_(l)}return c}l=m,m=l.parentNode}return null}function id(l){return l=l[Ts]||l[Gs],!l||l.tag!==5&&l.tag!==6&&l.tag!==13&&l.tag!==3?null:l}function el(l){if(l.tag===5||l.tag===6)return l.stateNode;throw Error(r(33))}function uh(l){return l[ad]||null}var jx=[],tl=-1;function $a(l){return{current:l}}function Lt(l){0>tl||(l.current=jx[tl],jx[tl]=null,tl--)}function Ct(l,c){tl++,jx[tl]=l.current,l.current=c}var Da={},$n=$a(Da),nr=$a(!1),Di=Da;function nl(l,c){var m=l.type.contextTypes;if(!m)return Da;var g=l.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===c)return g.__reactInternalMemoizedMaskedChildContext;var _={},N;for(N in m)_[N]=c[N];return g&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=c,l.__reactInternalMemoizedMaskedChildContext=_),_}function rr(l){return l=l.childContextTypes,l!=null}function hh(){Lt(nr),Lt($n)}function n_(l,c,m){if($n.current!==Da)throw Error(r(168));Ct($n,c),Ct(nr,m)}function r_(l,c,m){var g=l.stateNode;if(c=c.childContextTypes,typeof g.getChildContext!="function")return m;g=g.getChildContext();for(var _ in g)if(!(_ in c))throw Error(r(108,ze(l)||"Unknown",_));return J({},m,g)}function mh(l){return l=(l=l.stateNode)&&l.__reactInternalMemoizedMergedChildContext||Da,Di=$n.current,Ct($n,l),Ct(nr,nr.current),!0}function s_(l,c,m){var g=l.stateNode;if(!g)throw Error(r(169));m?(l=r_(l,c,Di),g.__reactInternalMemoizedMergedChildContext=l,Lt(nr),Lt($n),Ct($n,l)):Lt(nr),Ct(nr,m)}var Ks=null,fh=!1,Nx=!1;function a_(l){Ks===null?Ks=[l]:Ks.push(l)}function hI(l){fh=!0,a_(l)}function Fa(){if(!Nx&&Ks!==null){Nx=!0;var l=0,c=bt;try{var m=Ks;for(bt=1;l<m.length;l++){var g=m[l];do g=g(!0);while(g!==null)}Ks=null,fh=!1}catch(_){throw Ks!==null&&(Ks=Ks.slice(l+1)),ow(Gp,Fa),_}finally{bt=c,Nx=!1}}return null}var rl=[],sl=0,ph=null,xh=0,Lr=[],$r=0,Fi=null,Vs=1,Ys="";function Ui(l,c){rl[sl++]=xh,rl[sl++]=ph,ph=l,xh=c}function i_(l,c,m){Lr[$r++]=Vs,Lr[$r++]=Ys,Lr[$r++]=Fi,Fi=l;var g=Vs;l=Ys;var _=32-rs(g)-1;g&=~(1<<_),m+=1;var N=32-rs(c)+_;if(30<N){var A=_-_%5;N=(g&(1<<A)-1).toString(32),g>>=A,_-=A,Vs=1<<32-rs(c)+_|m<<_|g,Ys=N+l}else Vs=1<<N|m<<_|g,Ys=l}function Sx(l){l.return!==null&&(Ui(l,1),i_(l,1,0))}function kx(l){for(;l===ph;)ph=rl[--sl],rl[sl]=null,xh=rl[--sl],rl[sl]=null;for(;l===Fi;)Fi=Lr[--$r],Lr[$r]=null,Ys=Lr[--$r],Lr[$r]=null,Vs=Lr[--$r],Lr[$r]=null}var wr=null,_r=null,Dt=!1,as=null;function o_(l,c){var m=qr(5,null,null,0);m.elementType="DELETED",m.stateNode=c,m.return=l,c=l.deletions,c===null?(l.deletions=[m],l.flags|=16):c.push(m)}function l_(l,c){switch(l.tag){case 5:var m=l.type;return c=c.nodeType!==1||m.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(l.stateNode=c,wr=l,_r=La(c.firstChild),!0):!1;case 6:return c=l.pendingProps===""||c.nodeType!==3?null:c,c!==null?(l.stateNode=c,wr=l,_r=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(m=Fi!==null?{id:Vs,overflow:Ys}:null,l.memoizedState={dehydrated:c,treeContext:m,retryLane:1073741824},m=qr(18,null,null,0),m.stateNode=c,m.return=l,l.child=m,wr=l,_r=null,!0):!1;default:return!1}}function Ex(l){return(l.mode&1)!==0&&(l.flags&128)===0}function Cx(l){if(Dt){var c=_r;if(c){var m=c;if(!l_(l,c)){if(Ex(l))throw Error(r(418));c=La(m.nextSibling);var g=wr;c&&l_(l,c)?o_(g,m):(l.flags=l.flags&-4097|2,Dt=!1,wr=l)}}else{if(Ex(l))throw Error(r(418));l.flags=l.flags&-4097|2,Dt=!1,wr=l}}}function c_(l){for(l=l.return;l!==null&&l.tag!==5&&l.tag!==3&&l.tag!==13;)l=l.return;wr=l}function gh(l){if(l!==wr)return!1;if(!Dt)return c_(l),Dt=!0,!1;var c;if((c=l.tag!==3)&&!(c=l.tag!==5)&&(c=l.type,c=c!=="head"&&c!=="body"&&!yx(l.type,l.memoizedProps)),c&&(c=_r)){if(Ex(l))throw d_(),Error(r(418));for(;c;)o_(l,c),c=La(c.nextSibling)}if(c_(l),l.tag===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));e:{for(l=l.nextSibling,c=0;l;){if(l.nodeType===8){var m=l.data;if(m==="/$"){if(c===0){_r=La(l.nextSibling);break e}c--}else m!=="$"&&m!=="$!"&&m!=="$?"||c++}l=l.nextSibling}_r=null}}else _r=wr?La(l.stateNode.nextSibling):null;return!0}function d_(){for(var l=_r;l;)l=La(l.nextSibling)}function al(){_r=wr=null,Dt=!1}function Tx(l){as===null?as=[l]:as.push(l)}var mI=k.ReactCurrentBatchConfig;function od(l,c,m){if(l=m.ref,l!==null&&typeof l!="function"&&typeof l!="object"){if(m._owner){if(m=m._owner,m){if(m.tag!==1)throw Error(r(309));var g=m.stateNode}if(!g)throw Error(r(147,l));var _=g,N=""+l;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===N?c.ref:(c=function(A){var q=_.refs;A===null?delete q[N]:q[N]=A},c._stringRef=N,c)}if(typeof l!="string")throw Error(r(284));if(!m._owner)throw Error(r(290,l))}return l}function bh(l,c){throw l=Object.prototype.toString.call(c),Error(r(31,l==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":l))}function u_(l){var c=l._init;return c(l._payload)}function h_(l){function c(Z,V){if(l){var te=Z.deletions;te===null?(Z.deletions=[V],Z.flags|=16):te.push(V)}}function m(Z,V){if(!l)return null;for(;V!==null;)c(Z,V),V=V.sibling;return null}function g(Z,V){for(Z=new Map;V!==null;)V.key!==null?Z.set(V.key,V):Z.set(V.index,V),V=V.sibling;return Z}function _(Z,V){return Z=Ka(Z,V),Z.index=0,Z.sibling=null,Z}function N(Z,V,te){return Z.index=te,l?(te=Z.alternate,te!==null?(te=te.index,te<V?(Z.flags|=2,V):te):(Z.flags|=2,V)):(Z.flags|=1048576,V)}function A(Z){return l&&Z.alternate===null&&(Z.flags|=2),Z}function q(Z,V,te,ue){return V===null||V.tag!==6?(V=vg(te,Z.mode,ue),V.return=Z,V):(V=_(V,te),V.return=Z,V)}function W(Z,V,te,ue){var Ce=te.type;return Ce===I?ce(Z,V,te.props.children,ue,te.key):V!==null&&(V.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===X&&u_(Ce)===V.type)?(ue=_(V,te.props),ue.ref=od(Z,V,te),ue.return=Z,ue):(ue=Bh(te.type,te.key,te.props,null,Z.mode,ue),ue.ref=od(Z,V,te),ue.return=Z,ue)}function ne(Z,V,te,ue){return V===null||V.tag!==4||V.stateNode.containerInfo!==te.containerInfo||V.stateNode.implementation!==te.implementation?(V=wg(te,Z.mode,ue),V.return=Z,V):(V=_(V,te.children||[]),V.return=Z,V)}function ce(Z,V,te,ue,Ce){return V===null||V.tag!==7?(V=Vi(te,Z.mode,ue,Ce),V.return=Z,V):(V=_(V,te),V.return=Z,V)}function de(Z,V,te){if(typeof V=="string"&&V!==""||typeof V=="number")return V=vg(""+V,Z.mode,te),V.return=Z,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case R:return te=Bh(V.type,V.key,V.props,null,Z.mode,te),te.ref=od(Z,null,V),te.return=Z,te;case E:return V=wg(V,Z.mode,te),V.return=Z,V;case X:var ue=V._init;return de(Z,ue(V._payload),te)}if(Ye(V)||Q(V))return V=Vi(V,Z.mode,te,null),V.return=Z,V;bh(Z,V)}return null}function le(Z,V,te,ue){var Ce=V!==null?V.key:null;if(typeof te=="string"&&te!==""||typeof te=="number")return Ce!==null?null:q(Z,V,""+te,ue);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case R:return te.key===Ce?W(Z,V,te,ue):null;case E:return te.key===Ce?ne(Z,V,te,ue):null;case X:return Ce=te._init,le(Z,V,Ce(te._payload),ue)}if(Ye(te)||Q(te))return Ce!==null?null:ce(Z,V,te,ue,null);bh(Z,te)}return null}function ve(Z,V,te,ue,Ce){if(typeof ue=="string"&&ue!==""||typeof ue=="number")return Z=Z.get(te)||null,q(V,Z,""+ue,Ce);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case R:return Z=Z.get(ue.key===null?te:ue.key)||null,W(V,Z,ue,Ce);case E:return Z=Z.get(ue.key===null?te:ue.key)||null,ne(V,Z,ue,Ce);case X:var Pe=ue._init;return ve(Z,V,te,Pe(ue._payload),Ce)}if(Ye(ue)||Q(ue))return Z=Z.get(te)||null,ce(V,Z,ue,Ce,null);bh(V,ue)}return null}function Ne(Z,V,te,ue){for(var Ce=null,Pe=null,Ae=V,Fe=V=0,_n=null;Ae!==null&&Fe<te.length;Fe++){Ae.index>Fe?(_n=Ae,Ae=null):_n=Ae.sibling;var ht=le(Z,Ae,te[Fe],ue);if(ht===null){Ae===null&&(Ae=_n);break}l&&Ae&&ht.alternate===null&&c(Z,Ae),V=N(ht,V,Fe),Pe===null?Ce=ht:Pe.sibling=ht,Pe=ht,Ae=_n}if(Fe===te.length)return m(Z,Ae),Dt&&Ui(Z,Fe),Ce;if(Ae===null){for(;Fe<te.length;Fe++)Ae=de(Z,te[Fe],ue),Ae!==null&&(V=N(Ae,V,Fe),Pe===null?Ce=Ae:Pe.sibling=Ae,Pe=Ae);return Dt&&Ui(Z,Fe),Ce}for(Ae=g(Z,Ae);Fe<te.length;Fe++)_n=ve(Ae,Z,Fe,te[Fe],ue),_n!==null&&(l&&_n.alternate!==null&&Ae.delete(_n.key===null?Fe:_n.key),V=N(_n,V,Fe),Pe===null?Ce=_n:Pe.sibling=_n,Pe=_n);return l&&Ae.forEach(function(Va){return c(Z,Va)}),Dt&&Ui(Z,Fe),Ce}function ke(Z,V,te,ue){var Ce=Q(te);if(typeof Ce!="function")throw Error(r(150));if(te=Ce.call(te),te==null)throw Error(r(151));for(var Pe=Ce=null,Ae=V,Fe=V=0,_n=null,ht=te.next();Ae!==null&&!ht.done;Fe++,ht=te.next()){Ae.index>Fe?(_n=Ae,Ae=null):_n=Ae.sibling;var Va=le(Z,Ae,ht.value,ue);if(Va===null){Ae===null&&(Ae=_n);break}l&&Ae&&Va.alternate===null&&c(Z,Ae),V=N(Va,V,Fe),Pe===null?Ce=Va:Pe.sibling=Va,Pe=Va,Ae=_n}if(ht.done)return m(Z,Ae),Dt&&Ui(Z,Fe),Ce;if(Ae===null){for(;!ht.done;Fe++,ht=te.next())ht=de(Z,ht.value,ue),ht!==null&&(V=N(ht,V,Fe),Pe===null?Ce=ht:Pe.sibling=ht,Pe=ht);return Dt&&Ui(Z,Fe),Ce}for(Ae=g(Z,Ae);!ht.done;Fe++,ht=te.next())ht=ve(Ae,Z,Fe,ht.value,ue),ht!==null&&(l&&ht.alternate!==null&&Ae.delete(ht.key===null?Fe:ht.key),V=N(ht,V,Fe),Pe===null?Ce=ht:Pe.sibling=ht,Pe=ht);return l&&Ae.forEach(function(GI){return c(Z,GI)}),Dt&&Ui(Z,Fe),Ce}function sn(Z,V,te,ue){if(typeof te=="object"&&te!==null&&te.type===I&&te.key===null&&(te=te.props.children),typeof te=="object"&&te!==null){switch(te.$$typeof){case R:e:{for(var Ce=te.key,Pe=V;Pe!==null;){if(Pe.key===Ce){if(Ce=te.type,Ce===I){if(Pe.tag===7){m(Z,Pe.sibling),V=_(Pe,te.props.children),V.return=Z,Z=V;break e}}else if(Pe.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===X&&u_(Ce)===Pe.type){m(Z,Pe.sibling),V=_(Pe,te.props),V.ref=od(Z,Pe,te),V.return=Z,Z=V;break e}m(Z,Pe);break}else c(Z,Pe);Pe=Pe.sibling}te.type===I?(V=Vi(te.props.children,Z.mode,ue,te.key),V.return=Z,Z=V):(ue=Bh(te.type,te.key,te.props,null,Z.mode,ue),ue.ref=od(Z,V,te),ue.return=Z,Z=ue)}return A(Z);case E:e:{for(Pe=te.key;V!==null;){if(V.key===Pe)if(V.tag===4&&V.stateNode.containerInfo===te.containerInfo&&V.stateNode.implementation===te.implementation){m(Z,V.sibling),V=_(V,te.children||[]),V.return=Z,Z=V;break e}else{m(Z,V);break}else c(Z,V);V=V.sibling}V=wg(te,Z.mode,ue),V.return=Z,Z=V}return A(Z);case X:return Pe=te._init,sn(Z,V,Pe(te._payload),ue)}if(Ye(te))return Ne(Z,V,te,ue);if(Q(te))return ke(Z,V,te,ue);bh(Z,te)}return typeof te=="string"&&te!==""||typeof te=="number"?(te=""+te,V!==null&&V.tag===6?(m(Z,V.sibling),V=_(V,te),V.return=Z,Z=V):(m(Z,V),V=vg(te,Z.mode,ue),V.return=Z,Z=V),A(Z)):m(Z,V)}return sn}var il=h_(!0),m_=h_(!1),yh=$a(null),vh=null,ol=null,Rx=null;function Ix(){Rx=ol=vh=null}function Px(l){var c=yh.current;Lt(yh),l._currentValue=c}function Ax(l,c,m){for(;l!==null;){var g=l.alternate;if((l.childLanes&c)!==c?(l.childLanes|=c,g!==null&&(g.childLanes|=c)):g!==null&&(g.childLanes&c)!==c&&(g.childLanes|=c),l===m)break;l=l.return}}function ll(l,c){vh=l,Rx=ol=null,l=l.dependencies,l!==null&&l.firstContext!==null&&((l.lanes&c)!==0&&(sr=!0),l.firstContext=null)}function Dr(l){var c=l._currentValue;if(Rx!==l)if(l={context:l,memoizedValue:c,next:null},ol===null){if(vh===null)throw Error(r(308));ol=l,vh.dependencies={lanes:0,firstContext:l}}else ol=ol.next=l;return c}var qi=null;function Mx(l){qi===null?qi=[l]:qi.push(l)}function f_(l,c,m,g){var _=c.interleaved;return _===null?(m.next=m,Mx(c)):(m.next=_.next,_.next=m),c.interleaved=m,Js(l,g)}function Js(l,c){l.lanes|=c;var m=l.alternate;for(m!==null&&(m.lanes|=c),m=l,l=l.return;l!==null;)l.childLanes|=c,m=l.alternate,m!==null&&(m.childLanes|=c),m=l,l=l.return;return m.tag===3?m.stateNode:null}var Ua=!1;function Ox(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function p_(l,c){l=l.updateQueue,c.updateQueue===l&&(c.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,effects:l.effects})}function Qs(l,c){return{eventTime:l,lane:c,tag:0,payload:null,callback:null,next:null}}function qa(l,c,m){var g=l.updateQueue;if(g===null)return null;if(g=g.shared,(ct&2)!==0){var _=g.pending;return _===null?c.next=c:(c.next=_.next,_.next=c),g.pending=c,Js(l,m)}return _=g.interleaved,_===null?(c.next=c,Mx(g)):(c.next=_.next,_.next=c),g.interleaved=c,Js(l,m)}function wh(l,c,m){if(c=c.updateQueue,c!==null&&(c=c.shared,(m&4194240)!==0)){var g=c.lanes;g&=l.pendingLanes,m|=g,c.lanes=m,Yp(l,m)}}function x_(l,c){var m=l.updateQueue,g=l.alternate;if(g!==null&&(g=g.updateQueue,m===g)){var _=null,N=null;if(m=m.firstBaseUpdate,m!==null){do{var A={eventTime:m.eventTime,lane:m.lane,tag:m.tag,payload:m.payload,callback:m.callback,next:null};N===null?_=N=A:N=N.next=A,m=m.next}while(m!==null);N===null?_=N=c:N=N.next=c}else _=N=c;m={baseState:g.baseState,firstBaseUpdate:_,lastBaseUpdate:N,shared:g.shared,effects:g.effects},l.updateQueue=m;return}l=m.lastBaseUpdate,l===null?m.firstBaseUpdate=c:l.next=c,m.lastBaseUpdate=c}function _h(l,c,m,g){var _=l.updateQueue;Ua=!1;var N=_.firstBaseUpdate,A=_.lastBaseUpdate,q=_.shared.pending;if(q!==null){_.shared.pending=null;var W=q,ne=W.next;W.next=null,A===null?N=ne:A.next=ne,A=W;var ce=l.alternate;ce!==null&&(ce=ce.updateQueue,q=ce.lastBaseUpdate,q!==A&&(q===null?ce.firstBaseUpdate=ne:q.next=ne,ce.lastBaseUpdate=W))}if(N!==null){var de=_.baseState;A=0,ce=ne=W=null,q=N;do{var le=q.lane,ve=q.eventTime;if((g&le)===le){ce!==null&&(ce=ce.next={eventTime:ve,lane:0,tag:q.tag,payload:q.payload,callback:q.callback,next:null});e:{var Ne=l,ke=q;switch(le=c,ve=m,ke.tag){case 1:if(Ne=ke.payload,typeof Ne=="function"){de=Ne.call(ve,de,le);break e}de=Ne;break e;case 3:Ne.flags=Ne.flags&-65537|128;case 0:if(Ne=ke.payload,le=typeof Ne=="function"?Ne.call(ve,de,le):Ne,le==null)break e;de=J({},de,le);break e;case 2:Ua=!0}}q.callback!==null&&q.lane!==0&&(l.flags|=64,le=_.effects,le===null?_.effects=[q]:le.push(q))}else ve={eventTime:ve,lane:le,tag:q.tag,payload:q.payload,callback:q.callback,next:null},ce===null?(ne=ce=ve,W=de):ce=ce.next=ve,A|=le;if(q=q.next,q===null){if(q=_.shared.pending,q===null)break;le=q,q=le.next,le.next=null,_.lastBaseUpdate=le,_.shared.pending=null}}while(!0);if(ce===null&&(W=de),_.baseState=W,_.firstBaseUpdate=ne,_.lastBaseUpdate=ce,c=_.shared.interleaved,c!==null){_=c;do A|=_.lane,_=_.next;while(_!==c)}else N===null&&(_.shared.lanes=0);Wi|=A,l.lanes=A,l.memoizedState=de}}function g_(l,c,m){if(l=c.effects,c.effects=null,l!==null)for(c=0;c<l.length;c++){var g=l[c],_=g.callback;if(_!==null){if(g.callback=null,g=m,typeof _!="function")throw Error(r(191,_));_.call(g)}}}var ld={},Rs=$a(ld),cd=$a(ld),dd=$a(ld);function Bi(l){if(l===ld)throw Error(r(174));return l}function Lx(l,c){switch(Ct(dd,c),Ct(cd,l),Ct(Rs,ld),l=c.nodeType,l){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:$p(null,"");break;default:l=l===8?c.parentNode:c,c=l.namespaceURI||null,l=l.tagName,c=$p(c,l)}Lt(Rs),Ct(Rs,c)}function cl(){Lt(Rs),Lt(cd),Lt(dd)}function b_(l){Bi(dd.current);var c=Bi(Rs.current),m=$p(c,l.type);c!==m&&(Ct(cd,l),Ct(Rs,m))}function $x(l){cd.current===l&&(Lt(Rs),Lt(cd))}var Ht=$a(0);function jh(l){for(var c=l;c!==null;){if(c.tag===13){var m=c.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||m.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===l)break;for(;c.sibling===null;){if(c.return===null||c.return===l)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var Dx=[];function Fx(){for(var l=0;l<Dx.length;l++)Dx[l]._workInProgressVersionPrimary=null;Dx.length=0}var Nh=k.ReactCurrentDispatcher,Ux=k.ReactCurrentBatchConfig,Hi=0,Wt=null,mn=null,vn=null,Sh=!1,ud=!1,hd=0,fI=0;function Dn(){throw Error(r(321))}function qx(l,c){if(c===null)return!1;for(var m=0;m<c.length&&m<l.length;m++)if(!ss(l[m],c[m]))return!1;return!0}function Bx(l,c,m,g,_,N){if(Hi=N,Wt=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,Nh.current=l===null||l.memoizedState===null?bI:yI,l=m(g,_),ud){N=0;do{if(ud=!1,hd=0,25<=N)throw Error(r(301));N+=1,vn=mn=null,c.updateQueue=null,Nh.current=vI,l=m(g,_)}while(ud)}if(Nh.current=Ch,c=mn!==null&&mn.next!==null,Hi=0,vn=mn=Wt=null,Sh=!1,c)throw Error(r(300));return l}function Hx(){var l=hd!==0;return hd=0,l}function Is(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vn===null?Wt.memoizedState=vn=l:vn=vn.next=l,vn}function Fr(){if(mn===null){var l=Wt.alternate;l=l!==null?l.memoizedState:null}else l=mn.next;var c=vn===null?Wt.memoizedState:vn.next;if(c!==null)vn=c,mn=l;else{if(l===null)throw Error(r(310));mn=l,l={memoizedState:mn.memoizedState,baseState:mn.baseState,baseQueue:mn.baseQueue,queue:mn.queue,next:null},vn===null?Wt.memoizedState=vn=l:vn=vn.next=l}return vn}function md(l,c){return typeof c=="function"?c(l):c}function Wx(l){var c=Fr(),m=c.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=l;var g=mn,_=g.baseQueue,N=m.pending;if(N!==null){if(_!==null){var A=_.next;_.next=N.next,N.next=A}g.baseQueue=_=N,m.pending=null}if(_!==null){N=_.next,g=g.baseState;var q=A=null,W=null,ne=N;do{var ce=ne.lane;if((Hi&ce)===ce)W!==null&&(W=W.next={lane:0,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null}),g=ne.hasEagerState?ne.eagerState:l(g,ne.action);else{var de={lane:ce,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null};W===null?(q=W=de,A=g):W=W.next=de,Wt.lanes|=ce,Wi|=ce}ne=ne.next}while(ne!==null&&ne!==N);W===null?A=g:W.next=q,ss(g,c.memoizedState)||(sr=!0),c.memoizedState=g,c.baseState=A,c.baseQueue=W,m.lastRenderedState=g}if(l=m.interleaved,l!==null){_=l;do N=_.lane,Wt.lanes|=N,Wi|=N,_=_.next;while(_!==l)}else _===null&&(m.lanes=0);return[c.memoizedState,m.dispatch]}function zx(l){var c=Fr(),m=c.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=l;var g=m.dispatch,_=m.pending,N=c.memoizedState;if(_!==null){m.pending=null;var A=_=_.next;do N=l(N,A.action),A=A.next;while(A!==_);ss(N,c.memoizedState)||(sr=!0),c.memoizedState=N,c.baseQueue===null&&(c.baseState=N),m.lastRenderedState=N}return[N,g]}function y_(){}function v_(l,c){var m=Wt,g=Fr(),_=c(),N=!ss(g.memoizedState,_);if(N&&(g.memoizedState=_,sr=!0),g=g.queue,Gx(j_.bind(null,m,g,l),[l]),g.getSnapshot!==c||N||vn!==null&&vn.memoizedState.tag&1){if(m.flags|=2048,fd(9,__.bind(null,m,g,_,c),void 0,null),wn===null)throw Error(r(349));(Hi&30)!==0||w_(m,c,_)}return _}function w_(l,c,m){l.flags|=16384,l={getSnapshot:c,value:m},c=Wt.updateQueue,c===null?(c={lastEffect:null,stores:null},Wt.updateQueue=c,c.stores=[l]):(m=c.stores,m===null?c.stores=[l]:m.push(l))}function __(l,c,m,g){c.value=m,c.getSnapshot=g,N_(c)&&S_(l)}function j_(l,c,m){return m(function(){N_(c)&&S_(l)})}function N_(l){var c=l.getSnapshot;l=l.value;try{var m=c();return!ss(l,m)}catch{return!0}}function S_(l){var c=Js(l,1);c!==null&&cs(c,l,1,-1)}function k_(l){var c=Is();return typeof l=="function"&&(l=l()),c.memoizedState=c.baseState=l,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:md,lastRenderedState:l},c.queue=l,l=l.dispatch=gI.bind(null,Wt,l),[c.memoizedState,l]}function fd(l,c,m,g){return l={tag:l,create:c,destroy:m,deps:g,next:null},c=Wt.updateQueue,c===null?(c={lastEffect:null,stores:null},Wt.updateQueue=c,c.lastEffect=l.next=l):(m=c.lastEffect,m===null?c.lastEffect=l.next=l:(g=m.next,m.next=l,l.next=g,c.lastEffect=l)),l}function E_(){return Fr().memoizedState}function kh(l,c,m,g){var _=Is();Wt.flags|=l,_.memoizedState=fd(1|c,m,void 0,g===void 0?null:g)}function Eh(l,c,m,g){var _=Fr();g=g===void 0?null:g;var N=void 0;if(mn!==null){var A=mn.memoizedState;if(N=A.destroy,g!==null&&qx(g,A.deps)){_.memoizedState=fd(c,m,N,g);return}}Wt.flags|=l,_.memoizedState=fd(1|c,m,N,g)}function C_(l,c){return kh(8390656,8,l,c)}function Gx(l,c){return Eh(2048,8,l,c)}function T_(l,c){return Eh(4,2,l,c)}function R_(l,c){return Eh(4,4,l,c)}function I_(l,c){if(typeof c=="function")return l=l(),c(l),function(){c(null)};if(c!=null)return l=l(),c.current=l,function(){c.current=null}}function P_(l,c,m){return m=m!=null?m.concat([l]):null,Eh(4,4,I_.bind(null,c,l),m)}function Kx(){}function A_(l,c){var m=Fr();c=c===void 0?null:c;var g=m.memoizedState;return g!==null&&c!==null&&qx(c,g[1])?g[0]:(m.memoizedState=[l,c],l)}function M_(l,c){var m=Fr();c=c===void 0?null:c;var g=m.memoizedState;return g!==null&&c!==null&&qx(c,g[1])?g[0]:(l=l(),m.memoizedState=[l,c],l)}function O_(l,c,m){return(Hi&21)===0?(l.baseState&&(l.baseState=!1,sr=!0),l.memoizedState=m):(ss(m,c)||(m=uw(),Wt.lanes|=m,Wi|=m,l.baseState=!0),c)}function pI(l,c){var m=bt;bt=m!==0&&4>m?m:4,l(!0);var g=Ux.transition;Ux.transition={};try{l(!1),c()}finally{bt=m,Ux.transition=g}}function L_(){return Fr().memoizedState}function xI(l,c,m){var g=za(l);if(m={lane:g,action:m,hasEagerState:!1,eagerState:null,next:null},$_(l))D_(c,m);else if(m=f_(l,c,m,g),m!==null){var _=Kn();cs(m,l,g,_),F_(m,c,g)}}function gI(l,c,m){var g=za(l),_={lane:g,action:m,hasEagerState:!1,eagerState:null,next:null};if($_(l))D_(c,_);else{var N=l.alternate;if(l.lanes===0&&(N===null||N.lanes===0)&&(N=c.lastRenderedReducer,N!==null))try{var A=c.lastRenderedState,q=N(A,m);if(_.hasEagerState=!0,_.eagerState=q,ss(q,A)){var W=c.interleaved;W===null?(_.next=_,Mx(c)):(_.next=W.next,W.next=_),c.interleaved=_;return}}catch{}finally{}m=f_(l,c,_,g),m!==null&&(_=Kn(),cs(m,l,g,_),F_(m,c,g))}}function $_(l){var c=l.alternate;return l===Wt||c!==null&&c===Wt}function D_(l,c){ud=Sh=!0;var m=l.pending;m===null?c.next=c:(c.next=m.next,m.next=c),l.pending=c}function F_(l,c,m){if((m&4194240)!==0){var g=c.lanes;g&=l.pendingLanes,m|=g,c.lanes=m,Yp(l,m)}}var Ch={readContext:Dr,useCallback:Dn,useContext:Dn,useEffect:Dn,useImperativeHandle:Dn,useInsertionEffect:Dn,useLayoutEffect:Dn,useMemo:Dn,useReducer:Dn,useRef:Dn,useState:Dn,useDebugValue:Dn,useDeferredValue:Dn,useTransition:Dn,useMutableSource:Dn,useSyncExternalStore:Dn,useId:Dn,unstable_isNewReconciler:!1},bI={readContext:Dr,useCallback:function(l,c){return Is().memoizedState=[l,c===void 0?null:c],l},useContext:Dr,useEffect:C_,useImperativeHandle:function(l,c,m){return m=m!=null?m.concat([l]):null,kh(4194308,4,I_.bind(null,c,l),m)},useLayoutEffect:function(l,c){return kh(4194308,4,l,c)},useInsertionEffect:function(l,c){return kh(4,2,l,c)},useMemo:function(l,c){var m=Is();return c=c===void 0?null:c,l=l(),m.memoizedState=[l,c],l},useReducer:function(l,c,m){var g=Is();return c=m!==void 0?m(c):c,g.memoizedState=g.baseState=c,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:c},g.queue=l,l=l.dispatch=xI.bind(null,Wt,l),[g.memoizedState,l]},useRef:function(l){var c=Is();return l={current:l},c.memoizedState=l},useState:k_,useDebugValue:Kx,useDeferredValue:function(l){return Is().memoizedState=l},useTransition:function(){var l=k_(!1),c=l[0];return l=pI.bind(null,l[1]),Is().memoizedState=l,[c,l]},useMutableSource:function(){},useSyncExternalStore:function(l,c,m){var g=Wt,_=Is();if(Dt){if(m===void 0)throw Error(r(407));m=m()}else{if(m=c(),wn===null)throw Error(r(349));(Hi&30)!==0||w_(g,c,m)}_.memoizedState=m;var N={value:m,getSnapshot:c};return _.queue=N,C_(j_.bind(null,g,N,l),[l]),g.flags|=2048,fd(9,__.bind(null,g,N,m,c),void 0,null),m},useId:function(){var l=Is(),c=wn.identifierPrefix;if(Dt){var m=Ys,g=Vs;m=(g&~(1<<32-rs(g)-1)).toString(32)+m,c=":"+c+"R"+m,m=hd++,0<m&&(c+="H"+m.toString(32)),c+=":"}else m=fI++,c=":"+c+"r"+m.toString(32)+":";return l.memoizedState=c},unstable_isNewReconciler:!1},yI={readContext:Dr,useCallback:A_,useContext:Dr,useEffect:Gx,useImperativeHandle:P_,useInsertionEffect:T_,useLayoutEffect:R_,useMemo:M_,useReducer:Wx,useRef:E_,useState:function(){return Wx(md)},useDebugValue:Kx,useDeferredValue:function(l){var c=Fr();return O_(c,mn.memoizedState,l)},useTransition:function(){var l=Wx(md)[0],c=Fr().memoizedState;return[l,c]},useMutableSource:y_,useSyncExternalStore:v_,useId:L_,unstable_isNewReconciler:!1},vI={readContext:Dr,useCallback:A_,useContext:Dr,useEffect:Gx,useImperativeHandle:P_,useInsertionEffect:T_,useLayoutEffect:R_,useMemo:M_,useReducer:zx,useRef:E_,useState:function(){return zx(md)},useDebugValue:Kx,useDeferredValue:function(l){var c=Fr();return mn===null?c.memoizedState=l:O_(c,mn.memoizedState,l)},useTransition:function(){var l=zx(md)[0],c=Fr().memoizedState;return[l,c]},useMutableSource:y_,useSyncExternalStore:v_,useId:L_,unstable_isNewReconciler:!1};function is(l,c){if(l&&l.defaultProps){c=J({},c),l=l.defaultProps;for(var m in l)c[m]===void 0&&(c[m]=l[m]);return c}return c}function Vx(l,c,m,g){c=l.memoizedState,m=m(g,c),m=m==null?c:J({},c,m),l.memoizedState=m,l.lanes===0&&(l.updateQueue.baseState=m)}var Th={isMounted:function(l){return(l=l._reactInternals)?Li(l)===l:!1},enqueueSetState:function(l,c,m){l=l._reactInternals;var g=Kn(),_=za(l),N=Qs(g,_);N.payload=c,m!=null&&(N.callback=m),c=qa(l,N,_),c!==null&&(cs(c,l,_,g),wh(c,l,_))},enqueueReplaceState:function(l,c,m){l=l._reactInternals;var g=Kn(),_=za(l),N=Qs(g,_);N.tag=1,N.payload=c,m!=null&&(N.callback=m),c=qa(l,N,_),c!==null&&(cs(c,l,_,g),wh(c,l,_))},enqueueForceUpdate:function(l,c){l=l._reactInternals;var m=Kn(),g=za(l),_=Qs(m,g);_.tag=2,c!=null&&(_.callback=c),c=qa(l,_,g),c!==null&&(cs(c,l,g,m),wh(c,l,g))}};function U_(l,c,m,g,_,N,A){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(g,N,A):c.prototype&&c.prototype.isPureReactComponent?!ed(m,g)||!ed(_,N):!0}function q_(l,c,m){var g=!1,_=Da,N=c.contextType;return typeof N=="object"&&N!==null?N=Dr(N):(_=rr(c)?Di:$n.current,g=c.contextTypes,N=(g=g!=null)?nl(l,_):Da),c=new c(m,N),l.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=Th,l.stateNode=c,c._reactInternals=l,g&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=_,l.__reactInternalMemoizedMaskedChildContext=N),c}function B_(l,c,m,g){l=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(m,g),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(m,g),c.state!==l&&Th.enqueueReplaceState(c,c.state,null)}function Yx(l,c,m,g){var _=l.stateNode;_.props=m,_.state=l.memoizedState,_.refs={},Ox(l);var N=c.contextType;typeof N=="object"&&N!==null?_.context=Dr(N):(N=rr(c)?Di:$n.current,_.context=nl(l,N)),_.state=l.memoizedState,N=c.getDerivedStateFromProps,typeof N=="function"&&(Vx(l,c,N,m),_.state=l.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(c=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),c!==_.state&&Th.enqueueReplaceState(_,_.state,null),_h(l,m,_,g),_.state=l.memoizedState),typeof _.componentDidMount=="function"&&(l.flags|=4194308)}function dl(l,c){try{var m="",g=c;do m+=fe(g),g=g.return;while(g);var _=m}catch(N){_=`
Error generating stack: `+N.message+`
`+N.stack}return{value:l,source:c,stack:_,digest:null}}function Jx(l,c,m){return{value:l,source:null,stack:m??null,digest:c??null}}function Qx(l,c){try{console.error(c.value)}catch(m){setTimeout(function(){throw m})}}var wI=typeof WeakMap=="function"?WeakMap:Map;function H_(l,c,m){m=Qs(-1,m),m.tag=3,m.payload={element:null};var g=c.value;return m.callback=function(){Lh||(Lh=!0,hg=g),Qx(l,c)},m}function W_(l,c,m){m=Qs(-1,m),m.tag=3;var g=l.type.getDerivedStateFromError;if(typeof g=="function"){var _=c.value;m.payload=function(){return g(_)},m.callback=function(){Qx(l,c)}}var N=l.stateNode;return N!==null&&typeof N.componentDidCatch=="function"&&(m.callback=function(){Qx(l,c),typeof g!="function"&&(Ha===null?Ha=new Set([this]):Ha.add(this));var A=c.stack;this.componentDidCatch(c.value,{componentStack:A!==null?A:""})}),m}function z_(l,c,m){var g=l.pingCache;if(g===null){g=l.pingCache=new wI;var _=new Set;g.set(c,_)}else _=g.get(c),_===void 0&&(_=new Set,g.set(c,_));_.has(m)||(_.add(m),l=OI.bind(null,l,c,m),c.then(l,l))}function G_(l){do{var c;if((c=l.tag===13)&&(c=l.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return l;l=l.return}while(l!==null);return null}function K_(l,c,m,g,_){return(l.mode&1)===0?(l===c?l.flags|=65536:(l.flags|=128,m.flags|=131072,m.flags&=-52805,m.tag===1&&(m.alternate===null?m.tag=17:(c=Qs(-1,1),c.tag=2,qa(m,c,1))),m.lanes|=1),l):(l.flags|=65536,l.lanes=_,l)}var _I=k.ReactCurrentOwner,sr=!1;function Gn(l,c,m,g){c.child=l===null?m_(c,null,m,g):il(c,l.child,m,g)}function V_(l,c,m,g,_){m=m.render;var N=c.ref;return ll(c,_),g=Bx(l,c,m,g,N,_),m=Hx(),l!==null&&!sr?(c.updateQueue=l.updateQueue,c.flags&=-2053,l.lanes&=~_,Xs(l,c,_)):(Dt&&m&&Sx(c),c.flags|=1,Gn(l,c,g,_),c.child)}function Y_(l,c,m,g,_){if(l===null){var N=m.type;return typeof N=="function"&&!yg(N)&&N.defaultProps===void 0&&m.compare===null&&m.defaultProps===void 0?(c.tag=15,c.type=N,J_(l,c,N,g,_)):(l=Bh(m.type,null,g,c,c.mode,_),l.ref=c.ref,l.return=c,c.child=l)}if(N=l.child,(l.lanes&_)===0){var A=N.memoizedProps;if(m=m.compare,m=m!==null?m:ed,m(A,g)&&l.ref===c.ref)return Xs(l,c,_)}return c.flags|=1,l=Ka(N,g),l.ref=c.ref,l.return=c,c.child=l}function J_(l,c,m,g,_){if(l!==null){var N=l.memoizedProps;if(ed(N,g)&&l.ref===c.ref)if(sr=!1,c.pendingProps=g=N,(l.lanes&_)!==0)(l.flags&131072)!==0&&(sr=!0);else return c.lanes=l.lanes,Xs(l,c,_)}return Xx(l,c,m,g,_)}function Q_(l,c,m){var g=c.pendingProps,_=g.children,N=l!==null?l.memoizedState:null;if(g.mode==="hidden")if((c.mode&1)===0)c.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ct(hl,jr),jr|=m;else{if((m&1073741824)===0)return l=N!==null?N.baseLanes|m:m,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:l,cachePool:null,transitions:null},c.updateQueue=null,Ct(hl,jr),jr|=l,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=N!==null?N.baseLanes:m,Ct(hl,jr),jr|=g}else N!==null?(g=N.baseLanes|m,c.memoizedState=null):g=m,Ct(hl,jr),jr|=g;return Gn(l,c,_,m),c.child}function X_(l,c){var m=c.ref;(l===null&&m!==null||l!==null&&l.ref!==m)&&(c.flags|=512,c.flags|=2097152)}function Xx(l,c,m,g,_){var N=rr(m)?Di:$n.current;return N=nl(c,N),ll(c,_),m=Bx(l,c,m,g,N,_),g=Hx(),l!==null&&!sr?(c.updateQueue=l.updateQueue,c.flags&=-2053,l.lanes&=~_,Xs(l,c,_)):(Dt&&g&&Sx(c),c.flags|=1,Gn(l,c,m,_),c.child)}function Z_(l,c,m,g,_){if(rr(m)){var N=!0;mh(c)}else N=!1;if(ll(c,_),c.stateNode===null)Ih(l,c),q_(c,m,g),Yx(c,m,g,_),g=!0;else if(l===null){var A=c.stateNode,q=c.memoizedProps;A.props=q;var W=A.context,ne=m.contextType;typeof ne=="object"&&ne!==null?ne=Dr(ne):(ne=rr(m)?Di:$n.current,ne=nl(c,ne));var ce=m.getDerivedStateFromProps,de=typeof ce=="function"||typeof A.getSnapshotBeforeUpdate=="function";de||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(q!==g||W!==ne)&&B_(c,A,g,ne),Ua=!1;var le=c.memoizedState;A.state=le,_h(c,g,A,_),W=c.memoizedState,q!==g||le!==W||nr.current||Ua?(typeof ce=="function"&&(Vx(c,m,ce,g),W=c.memoizedState),(q=Ua||U_(c,m,q,g,le,W,ne))?(de||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(c.flags|=4194308)):(typeof A.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=g,c.memoizedState=W),A.props=g,A.state=W,A.context=ne,g=q):(typeof A.componentDidMount=="function"&&(c.flags|=4194308),g=!1)}else{A=c.stateNode,p_(l,c),q=c.memoizedProps,ne=c.type===c.elementType?q:is(c.type,q),A.props=ne,de=c.pendingProps,le=A.context,W=m.contextType,typeof W=="object"&&W!==null?W=Dr(W):(W=rr(m)?Di:$n.current,W=nl(c,W));var ve=m.getDerivedStateFromProps;(ce=typeof ve=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(q!==de||le!==W)&&B_(c,A,g,W),Ua=!1,le=c.memoizedState,A.state=le,_h(c,g,A,_);var Ne=c.memoizedState;q!==de||le!==Ne||nr.current||Ua?(typeof ve=="function"&&(Vx(c,m,ve,g),Ne=c.memoizedState),(ne=Ua||U_(c,m,ne,g,le,Ne,W)||!1)?(ce||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(g,Ne,W),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(g,Ne,W)),typeof A.componentDidUpdate=="function"&&(c.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof A.componentDidUpdate!="function"||q===l.memoizedProps&&le===l.memoizedState||(c.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||q===l.memoizedProps&&le===l.memoizedState||(c.flags|=1024),c.memoizedProps=g,c.memoizedState=Ne),A.props=g,A.state=Ne,A.context=W,g=ne):(typeof A.componentDidUpdate!="function"||q===l.memoizedProps&&le===l.memoizedState||(c.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||q===l.memoizedProps&&le===l.memoizedState||(c.flags|=1024),g=!1)}return Zx(l,c,m,g,N,_)}function Zx(l,c,m,g,_,N){X_(l,c);var A=(c.flags&128)!==0;if(!g&&!A)return _&&s_(c,m,!1),Xs(l,c,N);g=c.stateNode,_I.current=c;var q=A&&typeof m.getDerivedStateFromError!="function"?null:g.render();return c.flags|=1,l!==null&&A?(c.child=il(c,l.child,null,N),c.child=il(c,null,q,N)):Gn(l,c,q,N),c.memoizedState=g.state,_&&s_(c,m,!0),c.child}function ej(l){var c=l.stateNode;c.pendingContext?n_(l,c.pendingContext,c.pendingContext!==c.context):c.context&&n_(l,c.context,!1),Lx(l,c.containerInfo)}function tj(l,c,m,g,_){return al(),Tx(_),c.flags|=256,Gn(l,c,m,g),c.child}var eg={dehydrated:null,treeContext:null,retryLane:0};function tg(l){return{baseLanes:l,cachePool:null,transitions:null}}function nj(l,c,m){var g=c.pendingProps,_=Ht.current,N=!1,A=(c.flags&128)!==0,q;if((q=A)||(q=l!==null&&l.memoizedState===null?!1:(_&2)!==0),q?(N=!0,c.flags&=-129):(l===null||l.memoizedState!==null)&&(_|=1),Ct(Ht,_&1),l===null)return Cx(c),l=c.memoizedState,l!==null&&(l=l.dehydrated,l!==null)?((c.mode&1)===0?c.lanes=1:l.data==="$!"?c.lanes=8:c.lanes=1073741824,null):(A=g.children,l=g.fallback,N?(g=c.mode,N=c.child,A={mode:"hidden",children:A},(g&1)===0&&N!==null?(N.childLanes=0,N.pendingProps=A):N=Hh(A,g,0,null),l=Vi(l,g,m,null),N.return=c,l.return=c,N.sibling=l,c.child=N,c.child.memoizedState=tg(m),c.memoizedState=eg,l):ng(c,A));if(_=l.memoizedState,_!==null&&(q=_.dehydrated,q!==null))return jI(l,c,A,g,q,_,m);if(N){N=g.fallback,A=c.mode,_=l.child,q=_.sibling;var W={mode:"hidden",children:g.children};return(A&1)===0&&c.child!==_?(g=c.child,g.childLanes=0,g.pendingProps=W,c.deletions=null):(g=Ka(_,W),g.subtreeFlags=_.subtreeFlags&14680064),q!==null?N=Ka(q,N):(N=Vi(N,A,m,null),N.flags|=2),N.return=c,g.return=c,g.sibling=N,c.child=g,g=N,N=c.child,A=l.child.memoizedState,A=A===null?tg(m):{baseLanes:A.baseLanes|m,cachePool:null,transitions:A.transitions},N.memoizedState=A,N.childLanes=l.childLanes&~m,c.memoizedState=eg,g}return N=l.child,l=N.sibling,g=Ka(N,{mode:"visible",children:g.children}),(c.mode&1)===0&&(g.lanes=m),g.return=c,g.sibling=null,l!==null&&(m=c.deletions,m===null?(c.deletions=[l],c.flags|=16):m.push(l)),c.child=g,c.memoizedState=null,g}function ng(l,c){return c=Hh({mode:"visible",children:c},l.mode,0,null),c.return=l,l.child=c}function Rh(l,c,m,g){return g!==null&&Tx(g),il(c,l.child,null,m),l=ng(c,c.pendingProps.children),l.flags|=2,c.memoizedState=null,l}function jI(l,c,m,g,_,N,A){if(m)return c.flags&256?(c.flags&=-257,g=Jx(Error(r(422))),Rh(l,c,A,g)):c.memoizedState!==null?(c.child=l.child,c.flags|=128,null):(N=g.fallback,_=c.mode,g=Hh({mode:"visible",children:g.children},_,0,null),N=Vi(N,_,A,null),N.flags|=2,g.return=c,N.return=c,g.sibling=N,c.child=g,(c.mode&1)!==0&&il(c,l.child,null,A),c.child.memoizedState=tg(A),c.memoizedState=eg,N);if((c.mode&1)===0)return Rh(l,c,A,null);if(_.data==="$!"){if(g=_.nextSibling&&_.nextSibling.dataset,g)var q=g.dgst;return g=q,N=Error(r(419)),g=Jx(N,g,void 0),Rh(l,c,A,g)}if(q=(A&l.childLanes)!==0,sr||q){if(g=wn,g!==null){switch(A&-A){case 4:_=2;break;case 16:_=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:_=32;break;case 536870912:_=268435456;break;default:_=0}_=(_&(g.suspendedLanes|A))!==0?0:_,_!==0&&_!==N.retryLane&&(N.retryLane=_,Js(l,_),cs(g,l,_,-1))}return bg(),g=Jx(Error(r(421))),Rh(l,c,A,g)}return _.data==="$?"?(c.flags|=128,c.child=l.child,c=LI.bind(null,l),_._reactRetry=c,null):(l=N.treeContext,_r=La(_.nextSibling),wr=c,Dt=!0,as=null,l!==null&&(Lr[$r++]=Vs,Lr[$r++]=Ys,Lr[$r++]=Fi,Vs=l.id,Ys=l.overflow,Fi=c),c=ng(c,g.children),c.flags|=4096,c)}function rj(l,c,m){l.lanes|=c;var g=l.alternate;g!==null&&(g.lanes|=c),Ax(l.return,c,m)}function rg(l,c,m,g,_){var N=l.memoizedState;N===null?l.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:g,tail:m,tailMode:_}:(N.isBackwards=c,N.rendering=null,N.renderingStartTime=0,N.last=g,N.tail=m,N.tailMode=_)}function sj(l,c,m){var g=c.pendingProps,_=g.revealOrder,N=g.tail;if(Gn(l,c,g.children,m),g=Ht.current,(g&2)!==0)g=g&1|2,c.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=c.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&rj(l,m,c);else if(l.tag===19)rj(l,m,c);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===c)break e;for(;l.sibling===null;){if(l.return===null||l.return===c)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}g&=1}if(Ct(Ht,g),(c.mode&1)===0)c.memoizedState=null;else switch(_){case"forwards":for(m=c.child,_=null;m!==null;)l=m.alternate,l!==null&&jh(l)===null&&(_=m),m=m.sibling;m=_,m===null?(_=c.child,c.child=null):(_=m.sibling,m.sibling=null),rg(c,!1,_,m,N);break;case"backwards":for(m=null,_=c.child,c.child=null;_!==null;){if(l=_.alternate,l!==null&&jh(l)===null){c.child=_;break}l=_.sibling,_.sibling=m,m=_,_=l}rg(c,!0,m,null,N);break;case"together":rg(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Ih(l,c){(c.mode&1)===0&&l!==null&&(l.alternate=null,c.alternate=null,c.flags|=2)}function Xs(l,c,m){if(l!==null&&(c.dependencies=l.dependencies),Wi|=c.lanes,(m&c.childLanes)===0)return null;if(l!==null&&c.child!==l.child)throw Error(r(153));if(c.child!==null){for(l=c.child,m=Ka(l,l.pendingProps),c.child=m,m.return=c;l.sibling!==null;)l=l.sibling,m=m.sibling=Ka(l,l.pendingProps),m.return=c;m.sibling=null}return c.child}function NI(l,c,m){switch(c.tag){case 3:ej(c),al();break;case 5:b_(c);break;case 1:rr(c.type)&&mh(c);break;case 4:Lx(c,c.stateNode.containerInfo);break;case 10:var g=c.type._context,_=c.memoizedProps.value;Ct(yh,g._currentValue),g._currentValue=_;break;case 13:if(g=c.memoizedState,g!==null)return g.dehydrated!==null?(Ct(Ht,Ht.current&1),c.flags|=128,null):(m&c.child.childLanes)!==0?nj(l,c,m):(Ct(Ht,Ht.current&1),l=Xs(l,c,m),l!==null?l.sibling:null);Ct(Ht,Ht.current&1);break;case 19:if(g=(m&c.childLanes)!==0,(l.flags&128)!==0){if(g)return sj(l,c,m);c.flags|=128}if(_=c.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),Ct(Ht,Ht.current),g)break;return null;case 22:case 23:return c.lanes=0,Q_(l,c,m)}return Xs(l,c,m)}var aj,sg,ij,oj;aj=function(l,c){for(var m=c.child;m!==null;){if(m.tag===5||m.tag===6)l.appendChild(m.stateNode);else if(m.tag!==4&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===c)break;for(;m.sibling===null;){if(m.return===null||m.return===c)return;m=m.return}m.sibling.return=m.return,m=m.sibling}},sg=function(){},ij=function(l,c,m,g){var _=l.memoizedProps;if(_!==g){l=c.stateNode,Bi(Rs.current);var N=null;switch(m){case"input":_=Ve(l,_),g=Ve(l,g),N=[];break;case"select":_=J({},_,{value:void 0}),g=J({},g,{value:void 0}),N=[];break;case"textarea":_=Xe(l,_),g=Xe(l,g),N=[];break;default:typeof _.onClick!="function"&&typeof g.onClick=="function"&&(l.onclick=dh)}Dp(m,g);var A;m=null;for(ne in _)if(!g.hasOwnProperty(ne)&&_.hasOwnProperty(ne)&&_[ne]!=null)if(ne==="style"){var q=_[ne];for(A in q)q.hasOwnProperty(A)&&(m||(m={}),m[A]="")}else ne!=="dangerouslySetInnerHTML"&&ne!=="children"&&ne!=="suppressContentEditableWarning"&&ne!=="suppressHydrationWarning"&&ne!=="autoFocus"&&(a.hasOwnProperty(ne)?N||(N=[]):(N=N||[]).push(ne,null));for(ne in g){var W=g[ne];if(q=_!=null?_[ne]:void 0,g.hasOwnProperty(ne)&&W!==q&&(W!=null||q!=null))if(ne==="style")if(q){for(A in q)!q.hasOwnProperty(A)||W&&W.hasOwnProperty(A)||(m||(m={}),m[A]="");for(A in W)W.hasOwnProperty(A)&&q[A]!==W[A]&&(m||(m={}),m[A]=W[A])}else m||(N||(N=[]),N.push(ne,m)),m=W;else ne==="dangerouslySetInnerHTML"?(W=W?W.__html:void 0,q=q?q.__html:void 0,W!=null&&q!==W&&(N=N||[]).push(ne,W)):ne==="children"?typeof W!="string"&&typeof W!="number"||(N=N||[]).push(ne,""+W):ne!=="suppressContentEditableWarning"&&ne!=="suppressHydrationWarning"&&(a.hasOwnProperty(ne)?(W!=null&&ne==="onScroll"&&Ot("scroll",l),N||q===W||(N=[])):(N=N||[]).push(ne,W))}m&&(N=N||[]).push("style",m);var ne=N;(c.updateQueue=ne)&&(c.flags|=4)}},oj=function(l,c,m,g){m!==g&&(c.flags|=4)};function pd(l,c){if(!Dt)switch(l.tailMode){case"hidden":c=l.tail;for(var m=null;c!==null;)c.alternate!==null&&(m=c),c=c.sibling;m===null?l.tail=null:m.sibling=null;break;case"collapsed":m=l.tail;for(var g=null;m!==null;)m.alternate!==null&&(g=m),m=m.sibling;g===null?c||l.tail===null?l.tail=null:l.tail.sibling=null:g.sibling=null}}function Fn(l){var c=l.alternate!==null&&l.alternate.child===l.child,m=0,g=0;if(c)for(var _=l.child;_!==null;)m|=_.lanes|_.childLanes,g|=_.subtreeFlags&14680064,g|=_.flags&14680064,_.return=l,_=_.sibling;else for(_=l.child;_!==null;)m|=_.lanes|_.childLanes,g|=_.subtreeFlags,g|=_.flags,_.return=l,_=_.sibling;return l.subtreeFlags|=g,l.childLanes=m,c}function SI(l,c,m){var g=c.pendingProps;switch(kx(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fn(c),null;case 1:return rr(c.type)&&hh(),Fn(c),null;case 3:return g=c.stateNode,cl(),Lt(nr),Lt($n),Fx(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(l===null||l.child===null)&&(gh(c)?c.flags|=4:l===null||l.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,as!==null&&(pg(as),as=null))),sg(l,c),Fn(c),null;case 5:$x(c);var _=Bi(dd.current);if(m=c.type,l!==null&&c.stateNode!=null)ij(l,c,m,g,_),l.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!g){if(c.stateNode===null)throw Error(r(166));return Fn(c),null}if(l=Bi(Rs.current),gh(c)){g=c.stateNode,m=c.type;var N=c.memoizedProps;switch(g[Ts]=c,g[ad]=N,l=(c.mode&1)!==0,m){case"dialog":Ot("cancel",g),Ot("close",g);break;case"iframe":case"object":case"embed":Ot("load",g);break;case"video":case"audio":for(_=0;_<nd.length;_++)Ot(nd[_],g);break;case"source":Ot("error",g);break;case"img":case"image":case"link":Ot("error",g),Ot("load",g);break;case"details":Ot("toggle",g);break;case"input":vt(g,N),Ot("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!N.multiple},Ot("invalid",g);break;case"textarea":Cn(g,N),Ot("invalid",g)}Dp(m,N),_=null;for(var A in N)if(N.hasOwnProperty(A)){var q=N[A];A==="children"?typeof q=="string"?g.textContent!==q&&(N.suppressHydrationWarning!==!0&&ch(g.textContent,q,l),_=["children",q]):typeof q=="number"&&g.textContent!==""+q&&(N.suppressHydrationWarning!==!0&&ch(g.textContent,q,l),_=["children",""+q]):a.hasOwnProperty(A)&&q!=null&&A==="onScroll"&&Ot("scroll",g)}switch(m){case"input":Ln(g),wt(g,N,!0);break;case"textarea":Ln(g),ut(g);break;case"select":case"option":break;default:typeof N.onClick=="function"&&(g.onclick=dh)}g=_,c.updateQueue=g,g!==null&&(c.flags|=4)}else{A=_.nodeType===9?_:_.ownerDocument,l==="http://www.w3.org/1999/xhtml"&&(l=Wo(m)),l==="http://www.w3.org/1999/xhtml"?m==="script"?(l=A.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild)):typeof g.is=="string"?l=A.createElement(m,{is:g.is}):(l=A.createElement(m),m==="select"&&(A=l,g.multiple?A.multiple=!0:g.size&&(A.size=g.size))):l=A.createElementNS(l,m),l[Ts]=c,l[ad]=g,aj(l,c,!1,!1),c.stateNode=l;e:{switch(A=Fp(m,g),m){case"dialog":Ot("cancel",l),Ot("close",l),_=g;break;case"iframe":case"object":case"embed":Ot("load",l),_=g;break;case"video":case"audio":for(_=0;_<nd.length;_++)Ot(nd[_],l);_=g;break;case"source":Ot("error",l),_=g;break;case"img":case"image":case"link":Ot("error",l),Ot("load",l),_=g;break;case"details":Ot("toggle",l),_=g;break;case"input":vt(l,g),_=Ve(l,g),Ot("invalid",l);break;case"option":_=g;break;case"select":l._wrapperState={wasMultiple:!!g.multiple},_=J({},g,{value:void 0}),Ot("invalid",l);break;case"textarea":Cn(l,g),_=Xe(l,g),Ot("invalid",l);break;default:_=g}Dp(m,_),q=_;for(N in q)if(q.hasOwnProperty(N)){var W=q[N];N==="style"?Jv(l,W):N==="dangerouslySetInnerHTML"?(W=W?W.__html:void 0,W!=null&&Vv(l,W)):N==="children"?typeof W=="string"?(m!=="textarea"||W!=="")&&$c(l,W):typeof W=="number"&&$c(l,""+W):N!=="suppressContentEditableWarning"&&N!=="suppressHydrationWarning"&&N!=="autoFocus"&&(a.hasOwnProperty(N)?W!=null&&N==="onScroll"&&Ot("scroll",l):W!=null&&S(l,N,W,A))}switch(m){case"input":Ln(l),wt(l,g,!1);break;case"textarea":Ln(l),ut(l);break;case"option":g.value!=null&&l.setAttribute("value",""+he(g.value));break;case"select":l.multiple=!!g.multiple,N=g.value,N!=null?Bt(l,!!g.multiple,N,!1):g.defaultValue!=null&&Bt(l,!!g.multiple,g.defaultValue,!0);break;default:typeof _.onClick=="function"&&(l.onclick=dh)}switch(m){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return Fn(c),null;case 6:if(l&&c.stateNode!=null)oj(l,c,l.memoizedProps,g);else{if(typeof g!="string"&&c.stateNode===null)throw Error(r(166));if(m=Bi(dd.current),Bi(Rs.current),gh(c)){if(g=c.stateNode,m=c.memoizedProps,g[Ts]=c,(N=g.nodeValue!==m)&&(l=wr,l!==null))switch(l.tag){case 3:ch(g.nodeValue,m,(l.mode&1)!==0);break;case 5:l.memoizedProps.suppressHydrationWarning!==!0&&ch(g.nodeValue,m,(l.mode&1)!==0)}N&&(c.flags|=4)}else g=(m.nodeType===9?m:m.ownerDocument).createTextNode(g),g[Ts]=c,c.stateNode=g}return Fn(c),null;case 13:if(Lt(Ht),g=c.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(Dt&&_r!==null&&(c.mode&1)!==0&&(c.flags&128)===0)d_(),al(),c.flags|=98560,N=!1;else if(N=gh(c),g!==null&&g.dehydrated!==null){if(l===null){if(!N)throw Error(r(318));if(N=c.memoizedState,N=N!==null?N.dehydrated:null,!N)throw Error(r(317));N[Ts]=c}else al(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Fn(c),N=!1}else as!==null&&(pg(as),as=null),N=!0;if(!N)return c.flags&65536?c:null}return(c.flags&128)!==0?(c.lanes=m,c):(g=g!==null,g!==(l!==null&&l.memoizedState!==null)&&g&&(c.child.flags|=8192,(c.mode&1)!==0&&(l===null||(Ht.current&1)!==0?fn===0&&(fn=3):bg())),c.updateQueue!==null&&(c.flags|=4),Fn(c),null);case 4:return cl(),sg(l,c),l===null&&rd(c.stateNode.containerInfo),Fn(c),null;case 10:return Px(c.type._context),Fn(c),null;case 17:return rr(c.type)&&hh(),Fn(c),null;case 19:if(Lt(Ht),N=c.memoizedState,N===null)return Fn(c),null;if(g=(c.flags&128)!==0,A=N.rendering,A===null)if(g)pd(N,!1);else{if(fn!==0||l!==null&&(l.flags&128)!==0)for(l=c.child;l!==null;){if(A=jh(l),A!==null){for(c.flags|=128,pd(N,!1),g=A.updateQueue,g!==null&&(c.updateQueue=g,c.flags|=4),c.subtreeFlags=0,g=m,m=c.child;m!==null;)N=m,l=g,N.flags&=14680066,A=N.alternate,A===null?(N.childLanes=0,N.lanes=l,N.child=null,N.subtreeFlags=0,N.memoizedProps=null,N.memoizedState=null,N.updateQueue=null,N.dependencies=null,N.stateNode=null):(N.childLanes=A.childLanes,N.lanes=A.lanes,N.child=A.child,N.subtreeFlags=0,N.deletions=null,N.memoizedProps=A.memoizedProps,N.memoizedState=A.memoizedState,N.updateQueue=A.updateQueue,N.type=A.type,l=A.dependencies,N.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),m=m.sibling;return Ct(Ht,Ht.current&1|2),c.child}l=l.sibling}N.tail!==null&&rn()>ml&&(c.flags|=128,g=!0,pd(N,!1),c.lanes=4194304)}else{if(!g)if(l=jh(A),l!==null){if(c.flags|=128,g=!0,m=l.updateQueue,m!==null&&(c.updateQueue=m,c.flags|=4),pd(N,!0),N.tail===null&&N.tailMode==="hidden"&&!A.alternate&&!Dt)return Fn(c),null}else 2*rn()-N.renderingStartTime>ml&&m!==1073741824&&(c.flags|=128,g=!0,pd(N,!1),c.lanes=4194304);N.isBackwards?(A.sibling=c.child,c.child=A):(m=N.last,m!==null?m.sibling=A:c.child=A,N.last=A)}return N.tail!==null?(c=N.tail,N.rendering=c,N.tail=c.sibling,N.renderingStartTime=rn(),c.sibling=null,m=Ht.current,Ct(Ht,g?m&1|2:m&1),c):(Fn(c),null);case 22:case 23:return gg(),g=c.memoizedState!==null,l!==null&&l.memoizedState!==null!==g&&(c.flags|=8192),g&&(c.mode&1)!==0?(jr&1073741824)!==0&&(Fn(c),c.subtreeFlags&6&&(c.flags|=8192)):Fn(c),null;case 24:return null;case 25:return null}throw Error(r(156,c.tag))}function kI(l,c){switch(kx(c),c.tag){case 1:return rr(c.type)&&hh(),l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 3:return cl(),Lt(nr),Lt($n),Fx(),l=c.flags,(l&65536)!==0&&(l&128)===0?(c.flags=l&-65537|128,c):null;case 5:return $x(c),null;case 13:if(Lt(Ht),l=c.memoizedState,l!==null&&l.dehydrated!==null){if(c.alternate===null)throw Error(r(340));al()}return l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 19:return Lt(Ht),null;case 4:return cl(),null;case 10:return Px(c.type._context),null;case 22:case 23:return gg(),null;case 24:return null;default:return null}}var Ph=!1,Un=!1,EI=typeof WeakSet=="function"?WeakSet:Set,we=null;function ul(l,c){var m=l.ref;if(m!==null)if(typeof m=="function")try{m(null)}catch(g){Yt(l,c,g)}else m.current=null}function ag(l,c,m){try{m()}catch(g){Yt(l,c,g)}}var lj=!1;function CI(l,c){if(gx=Xu,l=Uw(),cx(l)){if("selectionStart"in l)var m={start:l.selectionStart,end:l.selectionEnd};else e:{m=(m=l.ownerDocument)&&m.defaultView||window;var g=m.getSelection&&m.getSelection();if(g&&g.rangeCount!==0){m=g.anchorNode;var _=g.anchorOffset,N=g.focusNode;g=g.focusOffset;try{m.nodeType,N.nodeType}catch{m=null;break e}var A=0,q=-1,W=-1,ne=0,ce=0,de=l,le=null;t:for(;;){for(var ve;de!==m||_!==0&&de.nodeType!==3||(q=A+_),de!==N||g!==0&&de.nodeType!==3||(W=A+g),de.nodeType===3&&(A+=de.nodeValue.length),(ve=de.firstChild)!==null;)le=de,de=ve;for(;;){if(de===l)break t;if(le===m&&++ne===_&&(q=A),le===N&&++ce===g&&(W=A),(ve=de.nextSibling)!==null)break;de=le,le=de.parentNode}de=ve}m=q===-1||W===-1?null:{start:q,end:W}}else m=null}m=m||{start:0,end:0}}else m=null;for(bx={focusedElem:l,selectionRange:m},Xu=!1,we=c;we!==null;)if(c=we,l=c.child,(c.subtreeFlags&1028)!==0&&l!==null)l.return=c,we=l;else for(;we!==null;){c=we;try{var Ne=c.alternate;if((c.flags&1024)!==0)switch(c.tag){case 0:case 11:case 15:break;case 1:if(Ne!==null){var ke=Ne.memoizedProps,sn=Ne.memoizedState,Z=c.stateNode,V=Z.getSnapshotBeforeUpdate(c.elementType===c.type?ke:is(c.type,ke),sn);Z.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var te=c.stateNode.containerInfo;te.nodeType===1?te.textContent="":te.nodeType===9&&te.documentElement&&te.removeChild(te.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(ue){Yt(c,c.return,ue)}if(l=c.sibling,l!==null){l.return=c.return,we=l;break}we=c.return}return Ne=lj,lj=!1,Ne}function xd(l,c,m){var g=c.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var _=g=g.next;do{if((_.tag&l)===l){var N=_.destroy;_.destroy=void 0,N!==void 0&&ag(c,m,N)}_=_.next}while(_!==g)}}function Ah(l,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var m=c=c.next;do{if((m.tag&l)===l){var g=m.create;m.destroy=g()}m=m.next}while(m!==c)}}function ig(l){var c=l.ref;if(c!==null){var m=l.stateNode;switch(l.tag){case 5:l=m;break;default:l=m}typeof c=="function"?c(l):c.current=l}}function cj(l){var c=l.alternate;c!==null&&(l.alternate=null,cj(c)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(c=l.stateNode,c!==null&&(delete c[Ts],delete c[ad],delete c[_x],delete c[dI],delete c[uI])),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function dj(l){return l.tag===5||l.tag===3||l.tag===4}function uj(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||dj(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function og(l,c,m){var g=l.tag;if(g===5||g===6)l=l.stateNode,c?m.nodeType===8?m.parentNode.insertBefore(l,c):m.insertBefore(l,c):(m.nodeType===8?(c=m.parentNode,c.insertBefore(l,m)):(c=m,c.appendChild(l)),m=m._reactRootContainer,m!=null||c.onclick!==null||(c.onclick=dh));else if(g!==4&&(l=l.child,l!==null))for(og(l,c,m),l=l.sibling;l!==null;)og(l,c,m),l=l.sibling}function lg(l,c,m){var g=l.tag;if(g===5||g===6)l=l.stateNode,c?m.insertBefore(l,c):m.appendChild(l);else if(g!==4&&(l=l.child,l!==null))for(lg(l,c,m),l=l.sibling;l!==null;)lg(l,c,m),l=l.sibling}var Tn=null,os=!1;function Ba(l,c,m){for(m=m.child;m!==null;)hj(l,c,m),m=m.sibling}function hj(l,c,m){if(Cs&&typeof Cs.onCommitFiberUnmount=="function")try{Cs.onCommitFiberUnmount(Gu,m)}catch{}switch(m.tag){case 5:Un||ul(m,c);case 6:var g=Tn,_=os;Tn=null,Ba(l,c,m),Tn=g,os=_,Tn!==null&&(os?(l=Tn,m=m.stateNode,l.nodeType===8?l.parentNode.removeChild(m):l.removeChild(m)):Tn.removeChild(m.stateNode));break;case 18:Tn!==null&&(os?(l=Tn,m=m.stateNode,l.nodeType===8?wx(l.parentNode,m):l.nodeType===1&&wx(l,m),Vc(l)):wx(Tn,m.stateNode));break;case 4:g=Tn,_=os,Tn=m.stateNode.containerInfo,os=!0,Ba(l,c,m),Tn=g,os=_;break;case 0:case 11:case 14:case 15:if(!Un&&(g=m.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){_=g=g.next;do{var N=_,A=N.destroy;N=N.tag,A!==void 0&&((N&2)!==0||(N&4)!==0)&&ag(m,c,A),_=_.next}while(_!==g)}Ba(l,c,m);break;case 1:if(!Un&&(ul(m,c),g=m.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=m.memoizedProps,g.state=m.memoizedState,g.componentWillUnmount()}catch(q){Yt(m,c,q)}Ba(l,c,m);break;case 21:Ba(l,c,m);break;case 22:m.mode&1?(Un=(g=Un)||m.memoizedState!==null,Ba(l,c,m),Un=g):Ba(l,c,m);break;default:Ba(l,c,m)}}function mj(l){var c=l.updateQueue;if(c!==null){l.updateQueue=null;var m=l.stateNode;m===null&&(m=l.stateNode=new EI),c.forEach(function(g){var _=$I.bind(null,l,g);m.has(g)||(m.add(g),g.then(_,_))})}}function ls(l,c){var m=c.deletions;if(m!==null)for(var g=0;g<m.length;g++){var _=m[g];try{var N=l,A=c,q=A;e:for(;q!==null;){switch(q.tag){case 5:Tn=q.stateNode,os=!1;break e;case 3:Tn=q.stateNode.containerInfo,os=!0;break e;case 4:Tn=q.stateNode.containerInfo,os=!0;break e}q=q.return}if(Tn===null)throw Error(r(160));hj(N,A,_),Tn=null,os=!1;var W=_.alternate;W!==null&&(W.return=null),_.return=null}catch(ne){Yt(_,c,ne)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)fj(c,l),c=c.sibling}function fj(l,c){var m=l.alternate,g=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:if(ls(c,l),Ps(l),g&4){try{xd(3,l,l.return),Ah(3,l)}catch(ke){Yt(l,l.return,ke)}try{xd(5,l,l.return)}catch(ke){Yt(l,l.return,ke)}}break;case 1:ls(c,l),Ps(l),g&512&&m!==null&&ul(m,m.return);break;case 5:if(ls(c,l),Ps(l),g&512&&m!==null&&ul(m,m.return),l.flags&32){var _=l.stateNode;try{$c(_,"")}catch(ke){Yt(l,l.return,ke)}}if(g&4&&(_=l.stateNode,_!=null)){var N=l.memoizedProps,A=m!==null?m.memoizedProps:N,q=l.type,W=l.updateQueue;if(l.updateQueue=null,W!==null)try{q==="input"&&N.type==="radio"&&N.name!=null&&En(_,N),Fp(q,A);var ne=Fp(q,N);for(A=0;A<W.length;A+=2){var ce=W[A],de=W[A+1];ce==="style"?Jv(_,de):ce==="dangerouslySetInnerHTML"?Vv(_,de):ce==="children"?$c(_,de):S(_,ce,de,ne)}switch(q){case"input":nn(_,N);break;case"textarea":zn(_,N);break;case"select":var le=_._wrapperState.wasMultiple;_._wrapperState.wasMultiple=!!N.multiple;var ve=N.value;ve!=null?Bt(_,!!N.multiple,ve,!1):le!==!!N.multiple&&(N.defaultValue!=null?Bt(_,!!N.multiple,N.defaultValue,!0):Bt(_,!!N.multiple,N.multiple?[]:"",!1))}_[ad]=N}catch(ke){Yt(l,l.return,ke)}}break;case 6:if(ls(c,l),Ps(l),g&4){if(l.stateNode===null)throw Error(r(162));_=l.stateNode,N=l.memoizedProps;try{_.nodeValue=N}catch(ke){Yt(l,l.return,ke)}}break;case 3:if(ls(c,l),Ps(l),g&4&&m!==null&&m.memoizedState.isDehydrated)try{Vc(c.containerInfo)}catch(ke){Yt(l,l.return,ke)}break;case 4:ls(c,l),Ps(l);break;case 13:ls(c,l),Ps(l),_=l.child,_.flags&8192&&(N=_.memoizedState!==null,_.stateNode.isHidden=N,!N||_.alternate!==null&&_.alternate.memoizedState!==null||(ug=rn())),g&4&&mj(l);break;case 22:if(ce=m!==null&&m.memoizedState!==null,l.mode&1?(Un=(ne=Un)||ce,ls(c,l),Un=ne):ls(c,l),Ps(l),g&8192){if(ne=l.memoizedState!==null,(l.stateNode.isHidden=ne)&&!ce&&(l.mode&1)!==0)for(we=l,ce=l.child;ce!==null;){for(de=we=ce;we!==null;){switch(le=we,ve=le.child,le.tag){case 0:case 11:case 14:case 15:xd(4,le,le.return);break;case 1:ul(le,le.return);var Ne=le.stateNode;if(typeof Ne.componentWillUnmount=="function"){g=le,m=le.return;try{c=g,Ne.props=c.memoizedProps,Ne.state=c.memoizedState,Ne.componentWillUnmount()}catch(ke){Yt(g,m,ke)}}break;case 5:ul(le,le.return);break;case 22:if(le.memoizedState!==null){gj(de);continue}}ve!==null?(ve.return=le,we=ve):gj(de)}ce=ce.sibling}e:for(ce=null,de=l;;){if(de.tag===5){if(ce===null){ce=de;try{_=de.stateNode,ne?(N=_.style,typeof N.setProperty=="function"?N.setProperty("display","none","important"):N.display="none"):(q=de.stateNode,W=de.memoizedProps.style,A=W!=null&&W.hasOwnProperty("display")?W.display:null,q.style.display=Yv("display",A))}catch(ke){Yt(l,l.return,ke)}}}else if(de.tag===6){if(ce===null)try{de.stateNode.nodeValue=ne?"":de.memoizedProps}catch(ke){Yt(l,l.return,ke)}}else if((de.tag!==22&&de.tag!==23||de.memoizedState===null||de===l)&&de.child!==null){de.child.return=de,de=de.child;continue}if(de===l)break e;for(;de.sibling===null;){if(de.return===null||de.return===l)break e;ce===de&&(ce=null),de=de.return}ce===de&&(ce=null),de.sibling.return=de.return,de=de.sibling}}break;case 19:ls(c,l),Ps(l),g&4&&mj(l);break;case 21:break;default:ls(c,l),Ps(l)}}function Ps(l){var c=l.flags;if(c&2){try{e:{for(var m=l.return;m!==null;){if(dj(m)){var g=m;break e}m=m.return}throw Error(r(160))}switch(g.tag){case 5:var _=g.stateNode;g.flags&32&&($c(_,""),g.flags&=-33);var N=uj(l);lg(l,N,_);break;case 3:case 4:var A=g.stateNode.containerInfo,q=uj(l);og(l,q,A);break;default:throw Error(r(161))}}catch(W){Yt(l,l.return,W)}l.flags&=-3}c&4096&&(l.flags&=-4097)}function TI(l,c,m){we=l,pj(l)}function pj(l,c,m){for(var g=(l.mode&1)!==0;we!==null;){var _=we,N=_.child;if(_.tag===22&&g){var A=_.memoizedState!==null||Ph;if(!A){var q=_.alternate,W=q!==null&&q.memoizedState!==null||Un;q=Ph;var ne=Un;if(Ph=A,(Un=W)&&!ne)for(we=_;we!==null;)A=we,W=A.child,A.tag===22&&A.memoizedState!==null?bj(_):W!==null?(W.return=A,we=W):bj(_);for(;N!==null;)we=N,pj(N),N=N.sibling;we=_,Ph=q,Un=ne}xj(l)}else(_.subtreeFlags&8772)!==0&&N!==null?(N.return=_,we=N):xj(l)}}function xj(l){for(;we!==null;){var c=we;if((c.flags&8772)!==0){var m=c.alternate;try{if((c.flags&8772)!==0)switch(c.tag){case 0:case 11:case 15:Un||Ah(5,c);break;case 1:var g=c.stateNode;if(c.flags&4&&!Un)if(m===null)g.componentDidMount();else{var _=c.elementType===c.type?m.memoizedProps:is(c.type,m.memoizedProps);g.componentDidUpdate(_,m.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var N=c.updateQueue;N!==null&&g_(c,N,g);break;case 3:var A=c.updateQueue;if(A!==null){if(m=null,c.child!==null)switch(c.child.tag){case 5:m=c.child.stateNode;break;case 1:m=c.child.stateNode}g_(c,A,m)}break;case 5:var q=c.stateNode;if(m===null&&c.flags&4){m=q;var W=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":W.autoFocus&&m.focus();break;case"img":W.src&&(m.src=W.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var ne=c.alternate;if(ne!==null){var ce=ne.memoizedState;if(ce!==null){var de=ce.dehydrated;de!==null&&Vc(de)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}Un||c.flags&512&&ig(c)}catch(le){Yt(c,c.return,le)}}if(c===l){we=null;break}if(m=c.sibling,m!==null){m.return=c.return,we=m;break}we=c.return}}function gj(l){for(;we!==null;){var c=we;if(c===l){we=null;break}var m=c.sibling;if(m!==null){m.return=c.return,we=m;break}we=c.return}}function bj(l){for(;we!==null;){var c=we;try{switch(c.tag){case 0:case 11:case 15:var m=c.return;try{Ah(4,c)}catch(W){Yt(c,m,W)}break;case 1:var g=c.stateNode;if(typeof g.componentDidMount=="function"){var _=c.return;try{g.componentDidMount()}catch(W){Yt(c,_,W)}}var N=c.return;try{ig(c)}catch(W){Yt(c,N,W)}break;case 5:var A=c.return;try{ig(c)}catch(W){Yt(c,A,W)}}}catch(W){Yt(c,c.return,W)}if(c===l){we=null;break}var q=c.sibling;if(q!==null){q.return=c.return,we=q;break}we=c.return}}var RI=Math.ceil,Mh=k.ReactCurrentDispatcher,cg=k.ReactCurrentOwner,Ur=k.ReactCurrentBatchConfig,ct=0,wn=null,on=null,Rn=0,jr=0,hl=$a(0),fn=0,gd=null,Wi=0,Oh=0,dg=0,bd=null,ar=null,ug=0,ml=1/0,Zs=null,Lh=!1,hg=null,Ha=null,$h=!1,Wa=null,Dh=0,yd=0,mg=null,Fh=-1,Uh=0;function Kn(){return(ct&6)!==0?rn():Fh!==-1?Fh:Fh=rn()}function za(l){return(l.mode&1)===0?1:(ct&2)!==0&&Rn!==0?Rn&-Rn:mI.transition!==null?(Uh===0&&(Uh=uw()),Uh):(l=bt,l!==0||(l=window.event,l=l===void 0?16:vw(l.type)),l)}function cs(l,c,m,g){if(50<yd)throw yd=0,mg=null,Error(r(185));Hc(l,m,g),((ct&2)===0||l!==wn)&&(l===wn&&((ct&2)===0&&(Oh|=m),fn===4&&Ga(l,Rn)),ir(l,g),m===1&&ct===0&&(c.mode&1)===0&&(ml=rn()+500,fh&&Fa()))}function ir(l,c){var m=l.callbackNode;mR(l,c);var g=Yu(l,l===wn?Rn:0);if(g===0)m!==null&&lw(m),l.callbackNode=null,l.callbackPriority=0;else if(c=g&-g,l.callbackPriority!==c){if(m!=null&&lw(m),c===1)l.tag===0?hI(vj.bind(null,l)):a_(vj.bind(null,l)),lI(function(){(ct&6)===0&&Fa()}),m=null;else{switch(hw(g)){case 1:m=Gp;break;case 4:m=cw;break;case 16:m=zu;break;case 536870912:m=dw;break;default:m=zu}m=Cj(m,yj.bind(null,l))}l.callbackPriority=c,l.callbackNode=m}}function yj(l,c){if(Fh=-1,Uh=0,(ct&6)!==0)throw Error(r(327));var m=l.callbackNode;if(fl()&&l.callbackNode!==m)return null;var g=Yu(l,l===wn?Rn:0);if(g===0)return null;if((g&30)!==0||(g&l.expiredLanes)!==0||c)c=qh(l,g);else{c=g;var _=ct;ct|=2;var N=_j();(wn!==l||Rn!==c)&&(Zs=null,ml=rn()+500,Gi(l,c));do try{AI();break}catch(q){wj(l,q)}while(!0);Ix(),Mh.current=N,ct=_,on!==null?c=0:(wn=null,Rn=0,c=fn)}if(c!==0){if(c===2&&(_=Kp(l),_!==0&&(g=_,c=fg(l,_))),c===1)throw m=gd,Gi(l,0),Ga(l,g),ir(l,rn()),m;if(c===6)Ga(l,g);else{if(_=l.current.alternate,(g&30)===0&&!II(_)&&(c=qh(l,g),c===2&&(N=Kp(l),N!==0&&(g=N,c=fg(l,N))),c===1))throw m=gd,Gi(l,0),Ga(l,g),ir(l,rn()),m;switch(l.finishedWork=_,l.finishedLanes=g,c){case 0:case 1:throw Error(r(345));case 2:Ki(l,ar,Zs);break;case 3:if(Ga(l,g),(g&130023424)===g&&(c=ug+500-rn(),10<c)){if(Yu(l,0)!==0)break;if(_=l.suspendedLanes,(_&g)!==g){Kn(),l.pingedLanes|=l.suspendedLanes&_;break}l.timeoutHandle=vx(Ki.bind(null,l,ar,Zs),c);break}Ki(l,ar,Zs);break;case 4:if(Ga(l,g),(g&4194240)===g)break;for(c=l.eventTimes,_=-1;0<g;){var A=31-rs(g);N=1<<A,A=c[A],A>_&&(_=A),g&=~N}if(g=_,g=rn()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*RI(g/1960))-g,10<g){l.timeoutHandle=vx(Ki.bind(null,l,ar,Zs),g);break}Ki(l,ar,Zs);break;case 5:Ki(l,ar,Zs);break;default:throw Error(r(329))}}}return ir(l,rn()),l.callbackNode===m?yj.bind(null,l):null}function fg(l,c){var m=bd;return l.current.memoizedState.isDehydrated&&(Gi(l,c).flags|=256),l=qh(l,c),l!==2&&(c=ar,ar=m,c!==null&&pg(c)),l}function pg(l){ar===null?ar=l:ar.push.apply(ar,l)}function II(l){for(var c=l;;){if(c.flags&16384){var m=c.updateQueue;if(m!==null&&(m=m.stores,m!==null))for(var g=0;g<m.length;g++){var _=m[g],N=_.getSnapshot;_=_.value;try{if(!ss(N(),_))return!1}catch{return!1}}}if(m=c.child,c.subtreeFlags&16384&&m!==null)m.return=c,c=m;else{if(c===l)break;for(;c.sibling===null;){if(c.return===null||c.return===l)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Ga(l,c){for(c&=~dg,c&=~Oh,l.suspendedLanes|=c,l.pingedLanes&=~c,l=l.expirationTimes;0<c;){var m=31-rs(c),g=1<<m;l[m]=-1,c&=~g}}function vj(l){if((ct&6)!==0)throw Error(r(327));fl();var c=Yu(l,0);if((c&1)===0)return ir(l,rn()),null;var m=qh(l,c);if(l.tag!==0&&m===2){var g=Kp(l);g!==0&&(c=g,m=fg(l,g))}if(m===1)throw m=gd,Gi(l,0),Ga(l,c),ir(l,rn()),m;if(m===6)throw Error(r(345));return l.finishedWork=l.current.alternate,l.finishedLanes=c,Ki(l,ar,Zs),ir(l,rn()),null}function xg(l,c){var m=ct;ct|=1;try{return l(c)}finally{ct=m,ct===0&&(ml=rn()+500,fh&&Fa())}}function zi(l){Wa!==null&&Wa.tag===0&&(ct&6)===0&&fl();var c=ct;ct|=1;var m=Ur.transition,g=bt;try{if(Ur.transition=null,bt=1,l)return l()}finally{bt=g,Ur.transition=m,ct=c,(ct&6)===0&&Fa()}}function gg(){jr=hl.current,Lt(hl)}function Gi(l,c){l.finishedWork=null,l.finishedLanes=0;var m=l.timeoutHandle;if(m!==-1&&(l.timeoutHandle=-1,oI(m)),on!==null)for(m=on.return;m!==null;){var g=m;switch(kx(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&hh();break;case 3:cl(),Lt(nr),Lt($n),Fx();break;case 5:$x(g);break;case 4:cl();break;case 13:Lt(Ht);break;case 19:Lt(Ht);break;case 10:Px(g.type._context);break;case 22:case 23:gg()}m=m.return}if(wn=l,on=l=Ka(l.current,null),Rn=jr=c,fn=0,gd=null,dg=Oh=Wi=0,ar=bd=null,qi!==null){for(c=0;c<qi.length;c++)if(m=qi[c],g=m.interleaved,g!==null){m.interleaved=null;var _=g.next,N=m.pending;if(N!==null){var A=N.next;N.next=_,g.next=A}m.pending=g}qi=null}return l}function wj(l,c){do{var m=on;try{if(Ix(),Nh.current=Ch,Sh){for(var g=Wt.memoizedState;g!==null;){var _=g.queue;_!==null&&(_.pending=null),g=g.next}Sh=!1}if(Hi=0,vn=mn=Wt=null,ud=!1,hd=0,cg.current=null,m===null||m.return===null){fn=1,gd=c,on=null;break}e:{var N=l,A=m.return,q=m,W=c;if(c=Rn,q.flags|=32768,W!==null&&typeof W=="object"&&typeof W.then=="function"){var ne=W,ce=q,de=ce.tag;if((ce.mode&1)===0&&(de===0||de===11||de===15)){var le=ce.alternate;le?(ce.updateQueue=le.updateQueue,ce.memoizedState=le.memoizedState,ce.lanes=le.lanes):(ce.updateQueue=null,ce.memoizedState=null)}var ve=G_(A);if(ve!==null){ve.flags&=-257,K_(ve,A,q,N,c),ve.mode&1&&z_(N,ne,c),c=ve,W=ne;var Ne=c.updateQueue;if(Ne===null){var ke=new Set;ke.add(W),c.updateQueue=ke}else Ne.add(W);break e}else{if((c&1)===0){z_(N,ne,c),bg();break e}W=Error(r(426))}}else if(Dt&&q.mode&1){var sn=G_(A);if(sn!==null){(sn.flags&65536)===0&&(sn.flags|=256),K_(sn,A,q,N,c),Tx(dl(W,q));break e}}N=W=dl(W,q),fn!==4&&(fn=2),bd===null?bd=[N]:bd.push(N),N=A;do{switch(N.tag){case 3:N.flags|=65536,c&=-c,N.lanes|=c;var Z=H_(N,W,c);x_(N,Z);break e;case 1:q=W;var V=N.type,te=N.stateNode;if((N.flags&128)===0&&(typeof V.getDerivedStateFromError=="function"||te!==null&&typeof te.componentDidCatch=="function"&&(Ha===null||!Ha.has(te)))){N.flags|=65536,c&=-c,N.lanes|=c;var ue=W_(N,q,c);x_(N,ue);break e}}N=N.return}while(N!==null)}Nj(m)}catch(Ce){c=Ce,on===m&&m!==null&&(on=m=m.return);continue}break}while(!0)}function _j(){var l=Mh.current;return Mh.current=Ch,l===null?Ch:l}function bg(){(fn===0||fn===3||fn===2)&&(fn=4),wn===null||(Wi&268435455)===0&&(Oh&268435455)===0||Ga(wn,Rn)}function qh(l,c){var m=ct;ct|=2;var g=_j();(wn!==l||Rn!==c)&&(Zs=null,Gi(l,c));do try{PI();break}catch(_){wj(l,_)}while(!0);if(Ix(),ct=m,Mh.current=g,on!==null)throw Error(r(261));return wn=null,Rn=0,fn}function PI(){for(;on!==null;)jj(on)}function AI(){for(;on!==null&&!sR();)jj(on)}function jj(l){var c=Ej(l.alternate,l,jr);l.memoizedProps=l.pendingProps,c===null?Nj(l):on=c,cg.current=null}function Nj(l){var c=l;do{var m=c.alternate;if(l=c.return,(c.flags&32768)===0){if(m=SI(m,c,jr),m!==null){on=m;return}}else{if(m=kI(m,c),m!==null){m.flags&=32767,on=m;return}if(l!==null)l.flags|=32768,l.subtreeFlags=0,l.deletions=null;else{fn=6,on=null;return}}if(c=c.sibling,c!==null){on=c;return}on=c=l}while(c!==null);fn===0&&(fn=5)}function Ki(l,c,m){var g=bt,_=Ur.transition;try{Ur.transition=null,bt=1,MI(l,c,m,g)}finally{Ur.transition=_,bt=g}return null}function MI(l,c,m,g){do fl();while(Wa!==null);if((ct&6)!==0)throw Error(r(327));m=l.finishedWork;var _=l.finishedLanes;if(m===null)return null;if(l.finishedWork=null,l.finishedLanes=0,m===l.current)throw Error(r(177));l.callbackNode=null,l.callbackPriority=0;var N=m.lanes|m.childLanes;if(fR(l,N),l===wn&&(on=wn=null,Rn=0),(m.subtreeFlags&2064)===0&&(m.flags&2064)===0||$h||($h=!0,Cj(zu,function(){return fl(),null})),N=(m.flags&15990)!==0,(m.subtreeFlags&15990)!==0||N){N=Ur.transition,Ur.transition=null;var A=bt;bt=1;var q=ct;ct|=4,cg.current=null,CI(l,m),fj(m,l),eI(bx),Xu=!!gx,bx=gx=null,l.current=m,TI(m),aR(),ct=q,bt=A,Ur.transition=N}else l.current=m;if($h&&($h=!1,Wa=l,Dh=_),N=l.pendingLanes,N===0&&(Ha=null),lR(m.stateNode),ir(l,rn()),c!==null)for(g=l.onRecoverableError,m=0;m<c.length;m++)_=c[m],g(_.value,{componentStack:_.stack,digest:_.digest});if(Lh)throw Lh=!1,l=hg,hg=null,l;return(Dh&1)!==0&&l.tag!==0&&fl(),N=l.pendingLanes,(N&1)!==0?l===mg?yd++:(yd=0,mg=l):yd=0,Fa(),null}function fl(){if(Wa!==null){var l=hw(Dh),c=Ur.transition,m=bt;try{if(Ur.transition=null,bt=16>l?16:l,Wa===null)var g=!1;else{if(l=Wa,Wa=null,Dh=0,(ct&6)!==0)throw Error(r(331));var _=ct;for(ct|=4,we=l.current;we!==null;){var N=we,A=N.child;if((we.flags&16)!==0){var q=N.deletions;if(q!==null){for(var W=0;W<q.length;W++){var ne=q[W];for(we=ne;we!==null;){var ce=we;switch(ce.tag){case 0:case 11:case 15:xd(8,ce,N)}var de=ce.child;if(de!==null)de.return=ce,we=de;else for(;we!==null;){ce=we;var le=ce.sibling,ve=ce.return;if(cj(ce),ce===ne){we=null;break}if(le!==null){le.return=ve,we=le;break}we=ve}}}var Ne=N.alternate;if(Ne!==null){var ke=Ne.child;if(ke!==null){Ne.child=null;do{var sn=ke.sibling;ke.sibling=null,ke=sn}while(ke!==null)}}we=N}}if((N.subtreeFlags&2064)!==0&&A!==null)A.return=N,we=A;else e:for(;we!==null;){if(N=we,(N.flags&2048)!==0)switch(N.tag){case 0:case 11:case 15:xd(9,N,N.return)}var Z=N.sibling;if(Z!==null){Z.return=N.return,we=Z;break e}we=N.return}}var V=l.current;for(we=V;we!==null;){A=we;var te=A.child;if((A.subtreeFlags&2064)!==0&&te!==null)te.return=A,we=te;else e:for(A=V;we!==null;){if(q=we,(q.flags&2048)!==0)try{switch(q.tag){case 0:case 11:case 15:Ah(9,q)}}catch(Ce){Yt(q,q.return,Ce)}if(q===A){we=null;break e}var ue=q.sibling;if(ue!==null){ue.return=q.return,we=ue;break e}we=q.return}}if(ct=_,Fa(),Cs&&typeof Cs.onPostCommitFiberRoot=="function")try{Cs.onPostCommitFiberRoot(Gu,l)}catch{}g=!0}return g}finally{bt=m,Ur.transition=c}}return!1}function Sj(l,c,m){c=dl(m,c),c=H_(l,c,1),l=qa(l,c,1),c=Kn(),l!==null&&(Hc(l,1,c),ir(l,c))}function Yt(l,c,m){if(l.tag===3)Sj(l,l,m);else for(;c!==null;){if(c.tag===3){Sj(c,l,m);break}else if(c.tag===1){var g=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Ha===null||!Ha.has(g))){l=dl(m,l),l=W_(c,l,1),c=qa(c,l,1),l=Kn(),c!==null&&(Hc(c,1,l),ir(c,l));break}}c=c.return}}function OI(l,c,m){var g=l.pingCache;g!==null&&g.delete(c),c=Kn(),l.pingedLanes|=l.suspendedLanes&m,wn===l&&(Rn&m)===m&&(fn===4||fn===3&&(Rn&130023424)===Rn&&500>rn()-ug?Gi(l,0):dg|=m),ir(l,c)}function kj(l,c){c===0&&((l.mode&1)===0?c=1:(c=Vu,Vu<<=1,(Vu&130023424)===0&&(Vu=4194304)));var m=Kn();l=Js(l,c),l!==null&&(Hc(l,c,m),ir(l,m))}function LI(l){var c=l.memoizedState,m=0;c!==null&&(m=c.retryLane),kj(l,m)}function $I(l,c){var m=0;switch(l.tag){case 13:var g=l.stateNode,_=l.memoizedState;_!==null&&(m=_.retryLane);break;case 19:g=l.stateNode;break;default:throw Error(r(314))}g!==null&&g.delete(c),kj(l,m)}var Ej;Ej=function(l,c,m){if(l!==null)if(l.memoizedProps!==c.pendingProps||nr.current)sr=!0;else{if((l.lanes&m)===0&&(c.flags&128)===0)return sr=!1,NI(l,c,m);sr=(l.flags&131072)!==0}else sr=!1,Dt&&(c.flags&1048576)!==0&&i_(c,xh,c.index);switch(c.lanes=0,c.tag){case 2:var g=c.type;Ih(l,c),l=c.pendingProps;var _=nl(c,$n.current);ll(c,m),_=Bx(null,c,g,l,_,m);var N=Hx();return c.flags|=1,typeof _=="object"&&_!==null&&typeof _.render=="function"&&_.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,rr(g)?(N=!0,mh(c)):N=!1,c.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,Ox(c),_.updater=Th,c.stateNode=_,_._reactInternals=c,Yx(c,g,l,m),c=Zx(null,c,g,!0,N,m)):(c.tag=0,Dt&&N&&Sx(c),Gn(null,c,_,m),c=c.child),c;case 16:g=c.elementType;e:{switch(Ih(l,c),l=c.pendingProps,_=g._init,g=_(g._payload),c.type=g,_=c.tag=FI(g),l=is(g,l),_){case 0:c=Xx(null,c,g,l,m);break e;case 1:c=Z_(null,c,g,l,m);break e;case 11:c=V_(null,c,g,l,m);break e;case 14:c=Y_(null,c,g,is(g.type,l),m);break e}throw Error(r(306,g,""))}return c;case 0:return g=c.type,_=c.pendingProps,_=c.elementType===g?_:is(g,_),Xx(l,c,g,_,m);case 1:return g=c.type,_=c.pendingProps,_=c.elementType===g?_:is(g,_),Z_(l,c,g,_,m);case 3:e:{if(ej(c),l===null)throw Error(r(387));g=c.pendingProps,N=c.memoizedState,_=N.element,p_(l,c),_h(c,g,null,m);var A=c.memoizedState;if(g=A.element,N.isDehydrated)if(N={element:g,isDehydrated:!1,cache:A.cache,pendingSuspenseBoundaries:A.pendingSuspenseBoundaries,transitions:A.transitions},c.updateQueue.baseState=N,c.memoizedState=N,c.flags&256){_=dl(Error(r(423)),c),c=tj(l,c,g,m,_);break e}else if(g!==_){_=dl(Error(r(424)),c),c=tj(l,c,g,m,_);break e}else for(_r=La(c.stateNode.containerInfo.firstChild),wr=c,Dt=!0,as=null,m=m_(c,null,g,m),c.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling;else{if(al(),g===_){c=Xs(l,c,m);break e}Gn(l,c,g,m)}c=c.child}return c;case 5:return b_(c),l===null&&Cx(c),g=c.type,_=c.pendingProps,N=l!==null?l.memoizedProps:null,A=_.children,yx(g,_)?A=null:N!==null&&yx(g,N)&&(c.flags|=32),X_(l,c),Gn(l,c,A,m),c.child;case 6:return l===null&&Cx(c),null;case 13:return nj(l,c,m);case 4:return Lx(c,c.stateNode.containerInfo),g=c.pendingProps,l===null?c.child=il(c,null,g,m):Gn(l,c,g,m),c.child;case 11:return g=c.type,_=c.pendingProps,_=c.elementType===g?_:is(g,_),V_(l,c,g,_,m);case 7:return Gn(l,c,c.pendingProps,m),c.child;case 8:return Gn(l,c,c.pendingProps.children,m),c.child;case 12:return Gn(l,c,c.pendingProps.children,m),c.child;case 10:e:{if(g=c.type._context,_=c.pendingProps,N=c.memoizedProps,A=_.value,Ct(yh,g._currentValue),g._currentValue=A,N!==null)if(ss(N.value,A)){if(N.children===_.children&&!nr.current){c=Xs(l,c,m);break e}}else for(N=c.child,N!==null&&(N.return=c);N!==null;){var q=N.dependencies;if(q!==null){A=N.child;for(var W=q.firstContext;W!==null;){if(W.context===g){if(N.tag===1){W=Qs(-1,m&-m),W.tag=2;var ne=N.updateQueue;if(ne!==null){ne=ne.shared;var ce=ne.pending;ce===null?W.next=W:(W.next=ce.next,ce.next=W),ne.pending=W}}N.lanes|=m,W=N.alternate,W!==null&&(W.lanes|=m),Ax(N.return,m,c),q.lanes|=m;break}W=W.next}}else if(N.tag===10)A=N.type===c.type?null:N.child;else if(N.tag===18){if(A=N.return,A===null)throw Error(r(341));A.lanes|=m,q=A.alternate,q!==null&&(q.lanes|=m),Ax(A,m,c),A=N.sibling}else A=N.child;if(A!==null)A.return=N;else for(A=N;A!==null;){if(A===c){A=null;break}if(N=A.sibling,N!==null){N.return=A.return,A=N;break}A=A.return}N=A}Gn(l,c,_.children,m),c=c.child}return c;case 9:return _=c.type,g=c.pendingProps.children,ll(c,m),_=Dr(_),g=g(_),c.flags|=1,Gn(l,c,g,m),c.child;case 14:return g=c.type,_=is(g,c.pendingProps),_=is(g.type,_),Y_(l,c,g,_,m);case 15:return J_(l,c,c.type,c.pendingProps,m);case 17:return g=c.type,_=c.pendingProps,_=c.elementType===g?_:is(g,_),Ih(l,c),c.tag=1,rr(g)?(l=!0,mh(c)):l=!1,ll(c,m),q_(c,g,_),Yx(c,g,_,m),Zx(null,c,g,!0,l,m);case 19:return sj(l,c,m);case 22:return Q_(l,c,m)}throw Error(r(156,c.tag))};function Cj(l,c){return ow(l,c)}function DI(l,c,m,g){this.tag=l,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qr(l,c,m,g){return new DI(l,c,m,g)}function yg(l){return l=l.prototype,!(!l||!l.isReactComponent)}function FI(l){if(typeof l=="function")return yg(l)?1:0;if(l!=null){if(l=l.$$typeof,l===$)return 11;if(l===se)return 14}return 2}function Ka(l,c){var m=l.alternate;return m===null?(m=qr(l.tag,c,l.key,l.mode),m.elementType=l.elementType,m.type=l.type,m.stateNode=l.stateNode,m.alternate=l,l.alternate=m):(m.pendingProps=c,m.type=l.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=l.flags&14680064,m.childLanes=l.childLanes,m.lanes=l.lanes,m.child=l.child,m.memoizedProps=l.memoizedProps,m.memoizedState=l.memoizedState,m.updateQueue=l.updateQueue,c=l.dependencies,m.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},m.sibling=l.sibling,m.index=l.index,m.ref=l.ref,m}function Bh(l,c,m,g,_,N){var A=2;if(g=l,typeof l=="function")yg(l)&&(A=1);else if(typeof l=="string")A=5;else e:switch(l){case I:return Vi(m.children,_,N,c);case M:A=8,_|=8;break;case O:return l=qr(12,m,c,_|2),l.elementType=O,l.lanes=N,l;case B:return l=qr(13,m,c,_),l.elementType=B,l.lanes=N,l;case D:return l=qr(19,m,c,_),l.elementType=D,l.lanes=N,l;case ee:return Hh(m,_,N,c);default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case L:A=10;break e;case P:A=9;break e;case $:A=11;break e;case se:A=14;break e;case X:A=16,g=null;break e}throw Error(r(130,l==null?l:typeof l,""))}return c=qr(A,m,c,_),c.elementType=l,c.type=g,c.lanes=N,c}function Vi(l,c,m,g){return l=qr(7,l,g,c),l.lanes=m,l}function Hh(l,c,m,g){return l=qr(22,l,g,c),l.elementType=ee,l.lanes=m,l.stateNode={isHidden:!1},l}function vg(l,c,m){return l=qr(6,l,null,c),l.lanes=m,l}function wg(l,c,m){return c=qr(4,l.children!==null?l.children:[],l.key,c),c.lanes=m,c.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},c}function UI(l,c,m,g,_){this.tag=c,this.containerInfo=l,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vp(0),this.expirationTimes=Vp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vp(0),this.identifierPrefix=g,this.onRecoverableError=_,this.mutableSourceEagerHydrationData=null}function _g(l,c,m,g,_,N,A,q,W){return l=new UI(l,c,m,q,W),c===1?(c=1,N===!0&&(c|=8)):c=0,N=qr(3,null,null,c),l.current=N,N.stateNode=l,N.memoizedState={element:g,isDehydrated:m,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ox(N),l}function qI(l,c,m){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:E,key:g==null?null:""+g,children:l,containerInfo:c,implementation:m}}function Tj(l){if(!l)return Da;l=l._reactInternals;e:{if(Li(l)!==l||l.tag!==1)throw Error(r(170));var c=l;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(rr(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(r(171))}if(l.tag===1){var m=l.type;if(rr(m))return r_(l,m,c)}return c}function Rj(l,c,m,g,_,N,A,q,W){return l=_g(m,g,!0,l,_,N,A,q,W),l.context=Tj(null),m=l.current,g=Kn(),_=za(m),N=Qs(g,_),N.callback=c??null,qa(m,N,_),l.current.lanes=_,Hc(l,_,g),ir(l,g),l}function Wh(l,c,m,g){var _=c.current,N=Kn(),A=za(_);return m=Tj(m),c.context===null?c.context=m:c.pendingContext=m,c=Qs(N,A),c.payload={element:l},g=g===void 0?null:g,g!==null&&(c.callback=g),l=qa(_,c,A),l!==null&&(cs(l,_,A,N),wh(l,_,A)),A}function zh(l){if(l=l.current,!l.child)return null;switch(l.child.tag){case 5:return l.child.stateNode;default:return l.child.stateNode}}function Ij(l,c){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var m=l.retryLane;l.retryLane=m!==0&&m<c?m:c}}function jg(l,c){Ij(l,c),(l=l.alternate)&&Ij(l,c)}function BI(){return null}var Pj=typeof reportError=="function"?reportError:function(l){console.error(l)};function Ng(l){this._internalRoot=l}Gh.prototype.render=Ng.prototype.render=function(l){var c=this._internalRoot;if(c===null)throw Error(r(409));Wh(l,c,null,null)},Gh.prototype.unmount=Ng.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var c=l.containerInfo;zi(function(){Wh(null,l,null,null)}),c[Gs]=null}};function Gh(l){this._internalRoot=l}Gh.prototype.unstable_scheduleHydration=function(l){if(l){var c=pw();l={blockedOn:null,target:l,priority:c};for(var m=0;m<Aa.length&&c!==0&&c<Aa[m].priority;m++);Aa.splice(m,0,l),m===0&&bw(l)}};function Sg(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function Kh(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11&&(l.nodeType!==8||l.nodeValue!==" react-mount-point-unstable "))}function Aj(){}function HI(l,c,m,g,_){if(_){if(typeof g=="function"){var N=g;g=function(){var ne=zh(A);N.call(ne)}}var A=Rj(c,g,l,0,null,!1,!1,"",Aj);return l._reactRootContainer=A,l[Gs]=A.current,rd(l.nodeType===8?l.parentNode:l),zi(),A}for(;_=l.lastChild;)l.removeChild(_);if(typeof g=="function"){var q=g;g=function(){var ne=zh(W);q.call(ne)}}var W=_g(l,0,!1,null,null,!1,!1,"",Aj);return l._reactRootContainer=W,l[Gs]=W.current,rd(l.nodeType===8?l.parentNode:l),zi(function(){Wh(c,W,m,g)}),W}function Vh(l,c,m,g,_){var N=m._reactRootContainer;if(N){var A=N;if(typeof _=="function"){var q=_;_=function(){var W=zh(A);q.call(W)}}Wh(c,A,l,_)}else A=HI(m,c,l,_,g);return zh(A)}mw=function(l){switch(l.tag){case 3:var c=l.stateNode;if(c.current.memoizedState.isDehydrated){var m=Bc(c.pendingLanes);m!==0&&(Yp(c,m|1),ir(c,rn()),(ct&6)===0&&(ml=rn()+500,Fa()))}break;case 13:zi(function(){var g=Js(l,1);if(g!==null){var _=Kn();cs(g,l,1,_)}}),jg(l,1)}},Jp=function(l){if(l.tag===13){var c=Js(l,134217728);if(c!==null){var m=Kn();cs(c,l,134217728,m)}jg(l,134217728)}},fw=function(l){if(l.tag===13){var c=za(l),m=Js(l,c);if(m!==null){var g=Kn();cs(m,l,c,g)}jg(l,c)}},pw=function(){return bt},xw=function(l,c){var m=bt;try{return bt=l,c()}finally{bt=m}},Bp=function(l,c,m){switch(c){case"input":if(nn(l,m),c=m.name,m.type==="radio"&&c!=null){for(m=l;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<m.length;c++){var g=m[c];if(g!==l&&g.form===l.form){var _=uh(g);if(!_)throw Error(r(90));Or(g),nn(g,_)}}}break;case"textarea":zn(l,m);break;case"select":c=m.value,c!=null&&Bt(l,!!m.multiple,c,!1)}},ew=xg,tw=zi;var WI={usingClientEntryPoint:!1,Events:[id,el,uh,Xv,Zv,xg]},vd={findFiberByHostInstance:$i,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},zI={bundleType:vd.bundleType,version:vd.version,rendererPackageName:vd.rendererPackageName,rendererConfig:vd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:k.ReactCurrentDispatcher,findHostInstanceByFiber:function(l){return l=aw(l),l===null?null:l.stateNode},findFiberByHostInstance:vd.findFiberByHostInstance||BI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yh.isDisabled&&Yh.supportsFiber)try{Gu=Yh.inject(zI),Cs=Yh}catch{}}return or.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=WI,or.createPortal=function(l,c){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Sg(c))throw Error(r(200));return qI(l,c,null,m)},or.createRoot=function(l,c){if(!Sg(l))throw Error(r(299));var m=!1,g="",_=Pj;return c!=null&&(c.unstable_strictMode===!0&&(m=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onRecoverableError!==void 0&&(_=c.onRecoverableError)),c=_g(l,1,!1,null,null,m,!1,g,_),l[Gs]=c.current,rd(l.nodeType===8?l.parentNode:l),new Ng(c)},or.findDOMNode=function(l){if(l==null)return null;if(l.nodeType===1)return l;var c=l._reactInternals;if(c===void 0)throw typeof l.render=="function"?Error(r(188)):(l=Object.keys(l).join(","),Error(r(268,l)));return l=aw(c),l=l===null?null:l.stateNode,l},or.flushSync=function(l){return zi(l)},or.hydrate=function(l,c,m){if(!Kh(c))throw Error(r(200));return Vh(null,l,c,!0,m)},or.hydrateRoot=function(l,c,m){if(!Sg(l))throw Error(r(405));var g=m!=null&&m.hydratedSources||null,_=!1,N="",A=Pj;if(m!=null&&(m.unstable_strictMode===!0&&(_=!0),m.identifierPrefix!==void 0&&(N=m.identifierPrefix),m.onRecoverableError!==void 0&&(A=m.onRecoverableError)),c=Rj(c,null,l,1,m??null,_,!1,N,A),l[Gs]=c.current,rd(l),g)for(l=0;l<g.length;l++)m=g[l],_=m._getVersion,_=_(m._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[m,_]:c.mutableSourceEagerHydrationData.push(m,_);return new Gh(c)},or.render=function(l,c,m){if(!Kh(c))throw Error(r(200));return Vh(null,l,c,!1,m)},or.unmountComponentAtNode=function(l){if(!Kh(l))throw Error(r(40));return l._reactRootContainer?(zi(function(){Vh(null,null,l,!1,function(){l._reactRootContainer=null,l[Gs]=null})}),!0):!1},or.unstable_batchedUpdates=xg,or.unstable_renderSubtreeIntoContainer=function(l,c,m,g){if(!Kh(m))throw Error(r(200));if(l==null||l._reactInternals===void 0)throw Error(r(38));return Vh(l,c,m,!1,g)},or.version="18.3.1-next-f1338f8080-20240426",or}var Bj;function r3(){if(Bj)return Tg.exports;Bj=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Tg.exports=n3(),Tg.exports}var Hj;function s3(){if(Hj)return Qh;Hj=1;var e=r3();return Qh.createRoot=e.createRoot,Qh.hydrateRoot=e.hydrateRoot,Qh}var a3=s3(),vc=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},i3={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},ri,Vb,L2,o3=(L2=class{constructor(){Ie(this,ri,i3);Ie(this,Vb,!1)}setTimeoutProvider(e){ge(this,ri,e)}setTimeout(e,t){return H(this,ri).setTimeout(e,t)}clearTimeout(e){H(this,ri).clearTimeout(e)}setInterval(e,t){return H(this,ri).setInterval(e,t)}clearInterval(e){H(this,ri).clearInterval(e)}},ri=new WeakMap,Vb=new WeakMap,L2),ao=new o3;function l3(e){setTimeout(e,0)}var So=typeof window>"u"||"Deno"in globalThis;function Qn(){}function c3(e,t){return typeof e=="function"?e(t):e}function C0(e){return typeof e=="number"&&e>=0&&e!==1/0}function J2(e,t){return Math.max(e+(t||0)-Date.now(),0)}function fi(e,t){return typeof e=="function"?e(t):e}function zr(e,t){return typeof e=="function"?e(t):e}function Wj(e,t){const{type:r="all",exact:s,fetchStatus:a,predicate:i,queryKey:o,stale:d}=e;if(o){if(s){if(t.queryHash!==Jb(o,t.options))return!1}else if(!Bd(t.queryKey,o))return!1}if(r!=="all"){const u=t.isActive();if(r==="active"&&!u||r==="inactive"&&u)return!1}return!(typeof d=="boolean"&&t.isStale()!==d||a&&a!==t.state.fetchStatus||i&&!i(t))}function zj(e,t){const{exact:r,status:s,predicate:a,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(ko(t.options.mutationKey)!==ko(i))return!1}else if(!Bd(t.options.mutationKey,i))return!1}return!(s&&t.state.status!==s||a&&!a(t))}function Jb(e,t){return((t==null?void 0:t.queryKeyHashFn)||ko)(e)}function ko(e){return JSON.stringify(e,(t,r)=>T0(r)?Object.keys(r).sort().reduce((s,a)=>(s[a]=r[a],s),{}):r)}function Bd(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>Bd(e[r],t[r])):!1}var d3=Object.prototype.hasOwnProperty;function Q2(e,t){if(e===t)return e;const r=Gj(e)&&Gj(t);if(!r&&!(T0(e)&&T0(t)))return t;const a=(r?e:Object.keys(e)).length,i=r?t:Object.keys(t),o=i.length,d=r?new Array(o):{};let u=0;for(let h=0;h<o;h++){const p=r?h:i[h],f=e[p],x=t[p];if(f===x){d[p]=f,(r?h<a:d3.call(e,p))&&u++;continue}if(f===null||x===null||typeof f!="object"||typeof x!="object"){d[p]=x;continue}const y=Q2(f,x);d[p]=y,y===f&&u++}return a===o&&u===a?e:d}function ef(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function Gj(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function T0(e){if(!Kj(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!Kj(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Kj(e){return Object.prototype.toString.call(e)==="[object Object]"}function u3(e){return new Promise(t=>{ao.setTimeout(t,e)})}function R0(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?Q2(e,t):t}function h3(e,t,r=0){const s=[...e,t];return r&&s.length>r?s.slice(1):s}function m3(e,t,r=0){const s=[t,...e];return r&&s.length>r?s.slice(0,-1):s}var Qb=Symbol();function X2(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Qb?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function Z2(e,t){return typeof e=="function"?e(...t):!!e}var ho,si,zl,$2,f3=($2=class extends vc{constructor(){super();Ie(this,ho);Ie(this,si);Ie(this,zl);ge(this,zl,t=>{if(!So&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){H(this,si)||this.setEventListener(H(this,zl))}onUnsubscribe(){var t;this.hasListeners()||((t=H(this,si))==null||t.call(this),ge(this,si,void 0))}setEventListener(t){var r;ge(this,zl,t),(r=H(this,si))==null||r.call(this),ge(this,si,t(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(t){H(this,ho)!==t&&(ge(this,ho,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof H(this,ho)=="boolean"?H(this,ho):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},ho=new WeakMap,si=new WeakMap,zl=new WeakMap,$2),Xb=new f3;function I0(){let e,t;const r=new Promise((a,i)=>{e=a,t=i});r.status="pending",r.catch(()=>{});function s(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{s({status:"fulfilled",value:a}),e(a)},r.reject=a=>{s({status:"rejected",reason:a}),t(a)},r}var p3=l3;function x3(){let e=[],t=0,r=d=>{d()},s=d=>{d()},a=p3;const i=d=>{t?e.push(d):a(()=>{r(d)})},o=()=>{const d=e;e=[],d.length&&a(()=>{s(()=>{d.forEach(u=>{r(u)})})})};return{batch:d=>{let u;t++;try{u=d()}finally{t--,t||o()}return u},batchCalls:d=>(...u)=>{i(()=>{d(...u)})},schedule:i,setNotifyFunction:d=>{r=d},setBatchNotifyFunction:d=>{s=d},setScheduler:d=>{a=d}}}var xn=x3(),Gl,ai,Kl,D2,g3=(D2=class extends vc{constructor(){super();Ie(this,Gl,!0);Ie(this,ai);Ie(this,Kl);ge(this,Kl,t=>{if(!So&&window.addEventListener){const r=()=>t(!0),s=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",s)}}})}onSubscribe(){H(this,ai)||this.setEventListener(H(this,Kl))}onUnsubscribe(){var t;this.hasListeners()||((t=H(this,ai))==null||t.call(this),ge(this,ai,void 0))}setEventListener(t){var r;ge(this,Kl,t),(r=H(this,ai))==null||r.call(this),ge(this,ai,t(this.setOnline.bind(this)))}setOnline(t){H(this,Gl)!==t&&(ge(this,Gl,t),this.listeners.forEach(s=>{s(t)}))}isOnline(){return H(this,Gl)}},Gl=new WeakMap,ai=new WeakMap,Kl=new WeakMap,D2),tf=new g3;function b3(e){return Math.min(1e3*2**e,3e4)}function ek(e){return(e??"online")==="online"?tf.isOnline():!0}var P0=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function tk(e){let t=!1,r=0,s;const a=I0(),i=()=>a.status!=="pending",o=w=>{var v;if(!i()){const j=new P0(w);x(j),(v=e.onCancel)==null||v.call(e,j)}},d=()=>{t=!0},u=()=>{t=!1},h=()=>Xb.isFocused()&&(e.networkMode==="always"||tf.isOnline())&&e.canRun(),p=()=>ek(e.networkMode)&&e.canRun(),f=w=>{i()||(s==null||s(),a.resolve(w))},x=w=>{i()||(s==null||s(),a.reject(w))},y=()=>new Promise(w=>{var v;s=j=>{(i()||h())&&w(j)},(v=e.onPause)==null||v.call(e)}).then(()=>{var w;s=void 0,i()||(w=e.onContinue)==null||w.call(e)}),b=()=>{if(i())return;let w;const v=r===0?e.initialPromise:void 0;try{w=v??e.fn()}catch(j){w=Promise.reject(j)}Promise.resolve(w).then(f).catch(j=>{var E;if(i())return;const C=e.retry??(So?0:3),S=e.retryDelay??b3,k=typeof S=="function"?S(r,j):S,R=C===!0||typeof C=="number"&&r<C||typeof C=="function"&&C(r,j);if(t||!R){x(j);return}r++,(E=e.onFail)==null||E.call(e,r,j),u3(k).then(()=>h()?void 0:y()).then(()=>{t?x(j):b()})})};return{promise:a,status:()=>a.status,cancel:o,continue:()=>(s==null||s(),a),cancelRetry:d,continueRetry:u,canStart:p,start:()=>(p()?b():y().then(b),a)}}var mo,F2,nk=(F2=class{constructor(){Ie(this,mo)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),C0(this.gcTime)&&ge(this,mo,ao.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(So?1/0:300*1e3))}clearGcTimeout(){H(this,mo)&&(ao.clearTimeout(H(this,mo)),ge(this,mo,void 0))}},mo=new WeakMap,F2),fo,Vl,Wr,po,jn,lu,xo,fs,na,U2,y3=(U2=class extends nk{constructor(t){super();Ie(this,fs);Ie(this,fo);Ie(this,Vl);Ie(this,Wr);Ie(this,po);Ie(this,jn);Ie(this,lu);Ie(this,xo);ge(this,xo,!1),ge(this,lu,t.defaultOptions),this.setOptions(t.options),this.observers=[],ge(this,po,t.client),ge(this,Wr,H(this,po).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,ge(this,fo,Yj(this.options)),this.state=t.state??H(this,fo),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=H(this,jn))==null?void 0:t.promise}setOptions(t){if(this.options={...H(this,lu),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=Yj(this.options);r.data!==void 0&&(this.setState(Vj(r.data,r.dataUpdatedAt)),ge(this,fo,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&H(this,Wr).remove(this)}setData(t,r){const s=R0(this.state.data,t,this.options);return Qe(this,fs,na).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(t,r){Qe(this,fs,na).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var s,a;const r=(s=H(this,jn))==null?void 0:s.promise;return(a=H(this,jn))==null||a.cancel(t),r?r.then(Qn).catch(Qn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(H(this,fo))}isActive(){return this.observers.some(t=>zr(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Qb||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>fi(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!J2(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(s=>s.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=H(this,jn))==null||r.continue()}onOnline(){var r;const t=this.observers.find(s=>s.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=H(this,jn))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),H(this,Wr).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(H(this,jn)&&(H(this,xo)?H(this,jn).cancel({revert:!0}):H(this,jn).cancelRetry()),this.scheduleGc()),H(this,Wr).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Qe(this,fs,na).call(this,{type:"invalidate"})}async fetch(t,r){var u,h,p,f,x,y,b,w,v,j,C,S;if(this.state.fetchStatus!=="idle"&&((u=H(this,jn))==null?void 0:u.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(H(this,jn))return H(this,jn).continueRetry(),H(this,jn).promise}if(t&&this.setOptions(t),!this.options.queryFn){const k=this.observers.find(R=>R.options.queryFn);k&&this.setOptions(k.options)}const s=new AbortController,a=k=>{Object.defineProperty(k,"signal",{enumerable:!0,get:()=>(ge(this,xo,!0),s.signal)})},i=()=>{const k=X2(this.options,r),E=(()=>{const I={client:H(this,po),queryKey:this.queryKey,meta:this.meta};return a(I),I})();return ge(this,xo,!1),this.options.persister?this.options.persister(k,E,this):k(E)},d=(()=>{const k={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:H(this,po),state:this.state,fetchFn:i};return a(k),k})();(h=this.options.behavior)==null||h.onFetch(d,this),ge(this,Vl,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((p=d.fetchOptions)==null?void 0:p.meta))&&Qe(this,fs,na).call(this,{type:"fetch",meta:(f=d.fetchOptions)==null?void 0:f.meta}),ge(this,jn,tk({initialPromise:r==null?void 0:r.initialPromise,fn:d.fetchFn,onCancel:k=>{k instanceof P0&&k.revert&&this.setState({...H(this,Vl),fetchStatus:"idle"}),s.abort()},onFail:(k,R)=>{Qe(this,fs,na).call(this,{type:"failed",failureCount:k,error:R})},onPause:()=>{Qe(this,fs,na).call(this,{type:"pause"})},onContinue:()=>{Qe(this,fs,na).call(this,{type:"continue"})},retry:d.options.retry,retryDelay:d.options.retryDelay,networkMode:d.options.networkMode,canRun:()=>!0}));try{const k=await H(this,jn).start();if(k===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(k),(y=(x=H(this,Wr).config).onSuccess)==null||y.call(x,k,this),(w=(b=H(this,Wr).config).onSettled)==null||w.call(b,k,this.state.error,this),k}catch(k){if(k instanceof P0){if(k.silent)return H(this,jn).promise;if(k.revert){if(this.state.data===void 0)throw k;return this.state.data}}throw Qe(this,fs,na).call(this,{type:"error",error:k}),(j=(v=H(this,Wr).config).onError)==null||j.call(v,k,this),(S=(C=H(this,Wr).config).onSettled)==null||S.call(C,this.state.data,k,this),k}finally{this.scheduleGc()}}},fo=new WeakMap,Vl=new WeakMap,Wr=new WeakMap,po=new WeakMap,jn=new WeakMap,lu=new WeakMap,xo=new WeakMap,fs=new WeakSet,na=function(t){const r=s=>{switch(t.type){case"failed":return{...s,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...rk(s.data,this.options),fetchMeta:t.meta??null};case"success":const a={...s,...Vj(t.data,t.dataUpdatedAt),dataUpdateCount:s.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return ge(this,Vl,t.manual?a:void 0),a;case"error":const i=t.error;return{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...t.state}}};this.state=r(this.state),xn.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),H(this,Wr).notify({query:this,type:"updated",action:t})})},U2);function rk(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:ek(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Vj(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Yj(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,s=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var cr,it,cu,Yn,go,Yl,aa,ii,du,Jl,Ql,bo,yo,oi,Xl,gt,Td,A0,M0,O0,L0,$0,D0,F0,sk,q2,v3=(q2=class extends vc{constructor(t,r){super();Ie(this,gt);Ie(this,cr);Ie(this,it);Ie(this,cu);Ie(this,Yn);Ie(this,go);Ie(this,Yl);Ie(this,aa);Ie(this,ii);Ie(this,du);Ie(this,Jl);Ie(this,Ql);Ie(this,bo);Ie(this,yo);Ie(this,oi);Ie(this,Xl,new Set);this.options=r,ge(this,cr,t),ge(this,ii,null),ge(this,aa,I0()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(H(this,it).addObserver(this),Jj(H(this,it),this.options)?Qe(this,gt,Td).call(this):this.updateResult(),Qe(this,gt,L0).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return U0(H(this,it),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return U0(H(this,it),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Qe(this,gt,$0).call(this),Qe(this,gt,D0).call(this),H(this,it).removeObserver(this)}setOptions(t){const r=this.options,s=H(this,it);if(this.options=H(this,cr).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof zr(this.options.enabled,H(this,it))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Qe(this,gt,F0).call(this),H(this,it).setOptions(this.options),r._defaulted&&!ef(this.options,r)&&H(this,cr).getQueryCache().notify({type:"observerOptionsUpdated",query:H(this,it),observer:this});const a=this.hasListeners();a&&Qj(H(this,it),s,this.options,r)&&Qe(this,gt,Td).call(this),this.updateResult(),a&&(H(this,it)!==s||zr(this.options.enabled,H(this,it))!==zr(r.enabled,H(this,it))||fi(this.options.staleTime,H(this,it))!==fi(r.staleTime,H(this,it)))&&Qe(this,gt,A0).call(this);const i=Qe(this,gt,M0).call(this);a&&(H(this,it)!==s||zr(this.options.enabled,H(this,it))!==zr(r.enabled,H(this,it))||i!==H(this,oi))&&Qe(this,gt,O0).call(this,i)}getOptimisticResult(t){const r=H(this,cr).getQueryCache().build(H(this,cr),t),s=this.createResult(r,t);return _3(this,s)&&(ge(this,Yn,s),ge(this,Yl,this.options),ge(this,go,H(this,it).state)),s}getCurrentResult(){return H(this,Yn)}trackResult(t,r){return new Proxy(t,{get:(s,a)=>(this.trackProp(a),r==null||r(a),a==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&H(this,aa).status==="pending"&&H(this,aa).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(s,a))})}trackProp(t){H(this,Xl).add(t)}getCurrentQuery(){return H(this,it)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=H(this,cr).defaultQueryOptions(t),s=H(this,cr).getQueryCache().build(H(this,cr),r);return s.fetch().then(()=>this.createResult(s,r))}fetch(t){return Qe(this,gt,Td).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),H(this,Yn)))}createResult(t,r){var O;const s=H(this,it),a=this.options,i=H(this,Yn),o=H(this,go),d=H(this,Yl),h=t!==s?t.state:H(this,cu),{state:p}=t;let f={...p},x=!1,y;if(r._optimisticResults){const L=this.hasListeners(),P=!L&&Jj(t,r),$=L&&Qj(t,s,r,a);(P||$)&&(f={...f,...rk(p.data,t.options)}),r._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:b,errorUpdatedAt:w,status:v}=f;y=f.data;let j=!1;if(r.placeholderData!==void 0&&y===void 0&&v==="pending"){let L;i!=null&&i.isPlaceholderData&&r.placeholderData===(d==null?void 0:d.placeholderData)?(L=i.data,j=!0):L=typeof r.placeholderData=="function"?r.placeholderData((O=H(this,Ql))==null?void 0:O.state.data,H(this,Ql)):r.placeholderData,L!==void 0&&(v="success",y=R0(i==null?void 0:i.data,L,r),x=!0)}if(r.select&&y!==void 0&&!j)if(i&&y===(o==null?void 0:o.data)&&r.select===H(this,du))y=H(this,Jl);else try{ge(this,du,r.select),y=r.select(y),y=R0(i==null?void 0:i.data,y,r),ge(this,Jl,y),ge(this,ii,null)}catch(L){ge(this,ii,L)}H(this,ii)&&(b=H(this,ii),y=H(this,Jl),w=Date.now(),v="error");const C=f.fetchStatus==="fetching",S=v==="pending",k=v==="error",R=S&&C,E=y!==void 0,M={status:v,fetchStatus:f.fetchStatus,isPending:S,isSuccess:v==="success",isError:k,isInitialLoading:R,isLoading:R,data:y,dataUpdatedAt:f.dataUpdatedAt,error:b,errorUpdatedAt:w,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>h.dataUpdateCount||f.errorUpdateCount>h.errorUpdateCount,isFetching:C,isRefetching:C&&!S,isLoadingError:k&&!E,isPaused:f.fetchStatus==="paused",isPlaceholderData:x,isRefetchError:k&&E,isStale:Zb(t,r),refetch:this.refetch,promise:H(this,aa),isEnabled:zr(r.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const L=B=>{M.status==="error"?B.reject(M.error):M.data!==void 0&&B.resolve(M.data)},P=()=>{const B=ge(this,aa,M.promise=I0());L(B)},$=H(this,aa);switch($.status){case"pending":t.queryHash===s.queryHash&&L($);break;case"fulfilled":(M.status==="error"||M.data!==$.value)&&P();break;case"rejected":(M.status!=="error"||M.error!==$.reason)&&P();break}}return M}updateResult(){const t=H(this,Yn),r=this.createResult(H(this,it),this.options);if(ge(this,go,H(this,it).state),ge(this,Yl,this.options),H(this,go).data!==void 0&&ge(this,Ql,H(this,it)),ef(r,t))return;ge(this,Yn,r);const s=()=>{if(!t)return!0;const{notifyOnChangeProps:a}=this.options,i=typeof a=="function"?a():a;if(i==="all"||!i&&!H(this,Xl).size)return!0;const o=new Set(i??H(this,Xl));return this.options.throwOnError&&o.add("error"),Object.keys(H(this,Yn)).some(d=>{const u=d;return H(this,Yn)[u]!==t[u]&&o.has(u)})};Qe(this,gt,sk).call(this,{listeners:s()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Qe(this,gt,L0).call(this)}},cr=new WeakMap,it=new WeakMap,cu=new WeakMap,Yn=new WeakMap,go=new WeakMap,Yl=new WeakMap,aa=new WeakMap,ii=new WeakMap,du=new WeakMap,Jl=new WeakMap,Ql=new WeakMap,bo=new WeakMap,yo=new WeakMap,oi=new WeakMap,Xl=new WeakMap,gt=new WeakSet,Td=function(t){Qe(this,gt,F0).call(this);let r=H(this,it).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(Qn)),r},A0=function(){Qe(this,gt,$0).call(this);const t=fi(this.options.staleTime,H(this,it));if(So||H(this,Yn).isStale||!C0(t))return;const s=J2(H(this,Yn).dataUpdatedAt,t)+1;ge(this,bo,ao.setTimeout(()=>{H(this,Yn).isStale||this.updateResult()},s))},M0=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(H(this,it)):this.options.refetchInterval)??!1},O0=function(t){Qe(this,gt,D0).call(this),ge(this,oi,t),!(So||zr(this.options.enabled,H(this,it))===!1||!C0(H(this,oi))||H(this,oi)===0)&&ge(this,yo,ao.setInterval(()=>{(this.options.refetchIntervalInBackground||Xb.isFocused())&&Qe(this,gt,Td).call(this)},H(this,oi)))},L0=function(){Qe(this,gt,A0).call(this),Qe(this,gt,O0).call(this,Qe(this,gt,M0).call(this))},$0=function(){H(this,bo)&&(ao.clearTimeout(H(this,bo)),ge(this,bo,void 0))},D0=function(){H(this,yo)&&(ao.clearInterval(H(this,yo)),ge(this,yo,void 0))},F0=function(){const t=H(this,cr).getQueryCache().build(H(this,cr),this.options);if(t===H(this,it))return;const r=H(this,it);ge(this,it,t),ge(this,cu,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},sk=function(t){xn.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(H(this,Yn))}),H(this,cr).getQueryCache().notify({query:H(this,it),type:"observerResultsUpdated"})})},q2);function w3(e,t){return zr(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Jj(e,t){return w3(e,t)||e.state.data!==void 0&&U0(e,t,t.refetchOnMount)}function U0(e,t,r){if(zr(t.enabled,e)!==!1&&fi(t.staleTime,e)!=="static"){const s=typeof r=="function"?r(e):r;return s==="always"||s!==!1&&Zb(e,t)}return!1}function Qj(e,t,r,s){return(e!==t||zr(s.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&Zb(e,r)}function Zb(e,t){return zr(t.enabled,e)!==!1&&e.isStaleByTime(fi(t.staleTime,e))}function _3(e,t){return!ef(e.getCurrentResult(),t)}function Xj(e){return{onFetch:(t,r)=>{var p,f,x,y,b;const s=t.options,a=(x=(f=(p=t.fetchOptions)==null?void 0:p.meta)==null?void 0:f.fetchMore)==null?void 0:x.direction,i=((y=t.state.data)==null?void 0:y.pages)||[],o=((b=t.state.data)==null?void 0:b.pageParams)||[];let d={pages:[],pageParams:[]},u=0;const h=async()=>{let w=!1;const v=S=>{Object.defineProperty(S,"signal",{enumerable:!0,get:()=>(t.signal.aborted?w=!0:t.signal.addEventListener("abort",()=>{w=!0}),t.signal)})},j=X2(t.options,t.fetchOptions),C=async(S,k,R)=>{if(w)return Promise.reject();if(k==null&&S.pages.length)return Promise.resolve(S);const I=(()=>{const P={client:t.client,queryKey:t.queryKey,pageParam:k,direction:R?"backward":"forward",meta:t.options.meta};return v(P),P})(),M=await j(I),{maxPages:O}=t.options,L=R?m3:h3;return{pages:L(S.pages,M,O),pageParams:L(S.pageParams,k,O)}};if(a&&i.length){const S=a==="backward",k=S?j3:Zj,R={pages:i,pageParams:o},E=k(s,R);d=await C(R,E,S)}else{const S=e??i.length;do{const k=u===0?o[0]??s.initialPageParam:Zj(s,d);if(u>0&&k==null)break;d=await C(d,k),u++}while(u<S)}return d};t.options.persister?t.fetchFn=()=>{var w,v;return(v=(w=t.options).persister)==null?void 0:v.call(w,h,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=h}}}function Zj(e,{pages:t,pageParams:r}){const s=t.length-1;return t.length>0?e.getNextPageParam(t[s],t,r[s],r):void 0}function j3(e,{pages:t,pageParams:r}){var s;return t.length>0?(s=e.getPreviousPageParam)==null?void 0:s.call(e,t[0],t,r[0],r):void 0}var uu,Ms,Jn,vo,Os,Qa,B2,N3=(B2=class extends nk{constructor(t){super();Ie(this,Os);Ie(this,uu);Ie(this,Ms);Ie(this,Jn);Ie(this,vo);ge(this,uu,t.client),this.mutationId=t.mutationId,ge(this,Jn,t.mutationCache),ge(this,Ms,[]),this.state=t.state||ak(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){H(this,Ms).includes(t)||(H(this,Ms).push(t),this.clearGcTimeout(),H(this,Jn).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){ge(this,Ms,H(this,Ms).filter(r=>r!==t)),this.scheduleGc(),H(this,Jn).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){H(this,Ms).length||(this.state.status==="pending"?this.scheduleGc():H(this,Jn).remove(this))}continue(){var t;return((t=H(this,vo))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,d,u,h,p,f,x,y,b,w,v,j,C,S,k,R,E,I,M,O;const r=()=>{Qe(this,Os,Qa).call(this,{type:"continue"})},s={client:H(this,uu),meta:this.options.meta,mutationKey:this.options.mutationKey};ge(this,vo,tk({fn:()=>this.options.mutationFn?this.options.mutationFn(t,s):Promise.reject(new Error("No mutationFn found")),onFail:(L,P)=>{Qe(this,Os,Qa).call(this,{type:"failed",failureCount:L,error:P})},onPause:()=>{Qe(this,Os,Qa).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>H(this,Jn).canRun(this)}));const a=this.state.status==="pending",i=!H(this,vo).canStart();try{if(a)r();else{Qe(this,Os,Qa).call(this,{type:"pending",variables:t,isPaused:i}),await((d=(o=H(this,Jn).config).onMutate)==null?void 0:d.call(o,t,this,s));const P=await((h=(u=this.options).onMutate)==null?void 0:h.call(u,t,s));P!==this.state.context&&Qe(this,Os,Qa).call(this,{type:"pending",context:P,variables:t,isPaused:i})}const L=await H(this,vo).start();return await((f=(p=H(this,Jn).config).onSuccess)==null?void 0:f.call(p,L,t,this.state.context,this,s)),await((y=(x=this.options).onSuccess)==null?void 0:y.call(x,L,t,this.state.context,s)),await((w=(b=H(this,Jn).config).onSettled)==null?void 0:w.call(b,L,null,this.state.variables,this.state.context,this,s)),await((j=(v=this.options).onSettled)==null?void 0:j.call(v,L,null,t,this.state.context,s)),Qe(this,Os,Qa).call(this,{type:"success",data:L}),L}catch(L){try{throw await((S=(C=H(this,Jn).config).onError)==null?void 0:S.call(C,L,t,this.state.context,this,s)),await((R=(k=this.options).onError)==null?void 0:R.call(k,L,t,this.state.context,s)),await((I=(E=H(this,Jn).config).onSettled)==null?void 0:I.call(E,void 0,L,this.state.variables,this.state.context,this,s)),await((O=(M=this.options).onSettled)==null?void 0:O.call(M,void 0,L,t,this.state.context,s)),L}finally{Qe(this,Os,Qa).call(this,{type:"error",error:L})}}finally{H(this,Jn).runNext(this)}}},uu=new WeakMap,Ms=new WeakMap,Jn=new WeakMap,vo=new WeakMap,Os=new WeakSet,Qa=function(t){const r=s=>{switch(t.type){case"failed":return{...s,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...s,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:t.error,failureCount:s.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),xn.batch(()=>{H(this,Ms).forEach(s=>{s.onMutationUpdate(t)}),H(this,Jn).notify({mutation:this,type:"updated",action:t})})},B2);function ak(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var ia,ps,hu,H2,S3=(H2=class extends vc{constructor(t={}){super();Ie(this,ia);Ie(this,ps);Ie(this,hu);this.config=t,ge(this,ia,new Set),ge(this,ps,new Map),ge(this,hu,0)}build(t,r,s){const a=new N3({client:t,mutationCache:this,mutationId:++Jh(this,hu)._,options:t.defaultMutationOptions(r),state:s});return this.add(a),a}add(t){H(this,ia).add(t);const r=Xh(t);if(typeof r=="string"){const s=H(this,ps).get(r);s?s.push(t):H(this,ps).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(H(this,ia).delete(t)){const r=Xh(t);if(typeof r=="string"){const s=H(this,ps).get(r);if(s)if(s.length>1){const a=s.indexOf(t);a!==-1&&s.splice(a,1)}else s[0]===t&&H(this,ps).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=Xh(t);if(typeof r=="string"){const s=H(this,ps).get(r),a=s==null?void 0:s.find(i=>i.state.status==="pending");return!a||a===t}else return!0}runNext(t){var s;const r=Xh(t);if(typeof r=="string"){const a=(s=H(this,ps).get(r))==null?void 0:s.find(i=>i!==t&&i.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){xn.batch(()=>{H(this,ia).forEach(t=>{this.notify({type:"removed",mutation:t})}),H(this,ia).clear(),H(this,ps).clear()})}getAll(){return Array.from(H(this,ia))}find(t){const r={exact:!0,...t};return this.getAll().find(s=>zj(r,s))}findAll(t={}){return this.getAll().filter(r=>zj(t,r))}notify(t){xn.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return xn.batch(()=>Promise.all(t.map(r=>r.continue().catch(Qn))))}},ia=new WeakMap,ps=new WeakMap,hu=new WeakMap,H2);function Xh(e){var t;return(t=e.options.scope)==null?void 0:t.id}var oa,li,dr,la,ba,Sm,q0,W2,k3=(W2=class extends vc{constructor(r,s){super();Ie(this,ba);Ie(this,oa);Ie(this,li);Ie(this,dr);Ie(this,la);ge(this,oa,r),this.setOptions(s),this.bindMethods(),Qe(this,ba,Sm).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var a;const s=this.options;this.options=H(this,oa).defaultMutationOptions(r),ef(this.options,s)||H(this,oa).getMutationCache().notify({type:"observerOptionsUpdated",mutation:H(this,dr),observer:this}),s!=null&&s.mutationKey&&this.options.mutationKey&&ko(s.mutationKey)!==ko(this.options.mutationKey)?this.reset():((a=H(this,dr))==null?void 0:a.state.status)==="pending"&&H(this,dr).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=H(this,dr))==null||r.removeObserver(this)}onMutationUpdate(r){Qe(this,ba,Sm).call(this),Qe(this,ba,q0).call(this,r)}getCurrentResult(){return H(this,li)}reset(){var r;(r=H(this,dr))==null||r.removeObserver(this),ge(this,dr,void 0),Qe(this,ba,Sm).call(this),Qe(this,ba,q0).call(this)}mutate(r,s){var a;return ge(this,la,s),(a=H(this,dr))==null||a.removeObserver(this),ge(this,dr,H(this,oa).getMutationCache().build(H(this,oa),this.options)),H(this,dr).addObserver(this),H(this,dr).execute(r)}},oa=new WeakMap,li=new WeakMap,dr=new WeakMap,la=new WeakMap,ba=new WeakSet,Sm=function(){var s;const r=((s=H(this,dr))==null?void 0:s.state)??ak();ge(this,li,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},q0=function(r){xn.batch(()=>{var s,a,i,o,d,u,h,p;if(H(this,la)&&this.hasListeners()){const f=H(this,li).variables,x=H(this,li).context,y={client:H(this,oa),meta:this.options.meta,mutationKey:this.options.mutationKey};(r==null?void 0:r.type)==="success"?((a=(s=H(this,la)).onSuccess)==null||a.call(s,r.data,f,x,y),(o=(i=H(this,la)).onSettled)==null||o.call(i,r.data,null,f,x,y)):(r==null?void 0:r.type)==="error"&&((u=(d=H(this,la)).onError)==null||u.call(d,r.error,f,x,y),(p=(h=H(this,la)).onSettled)==null||p.call(h,void 0,r.error,f,x,y))}this.listeners.forEach(f=>{f(H(this,li))})})},W2),Ls,z2,E3=(z2=class extends vc{constructor(t={}){super();Ie(this,Ls);this.config=t,ge(this,Ls,new Map)}build(t,r,s){const a=r.queryKey,i=r.queryHash??Jb(a,r);let o=this.get(i);return o||(o=new y3({client:t,queryKey:a,queryHash:i,options:t.defaultQueryOptions(r),state:s,defaultOptions:t.getQueryDefaults(a)}),this.add(o)),o}add(t){H(this,Ls).has(t.queryHash)||(H(this,Ls).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=H(this,Ls).get(t.queryHash);r&&(t.destroy(),r===t&&H(this,Ls).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){xn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return H(this,Ls).get(t)}getAll(){return[...H(this,Ls).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(s=>Wj(r,s))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(s=>Wj(t,s)):r}notify(t){xn.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){xn.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){xn.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Ls=new WeakMap,z2),Qt,ci,di,Zl,ec,ui,tc,nc,G2,C3=(G2=class{constructor(e={}){Ie(this,Qt);Ie(this,ci);Ie(this,di);Ie(this,Zl);Ie(this,ec);Ie(this,ui);Ie(this,tc);Ie(this,nc);ge(this,Qt,e.queryCache||new E3),ge(this,ci,e.mutationCache||new S3),ge(this,di,e.defaultOptions||{}),ge(this,Zl,new Map),ge(this,ec,new Map),ge(this,ui,0)}mount(){Jh(this,ui)._++,H(this,ui)===1&&(ge(this,tc,Xb.subscribe(async e=>{e&&(await this.resumePausedMutations(),H(this,Qt).onFocus())})),ge(this,nc,tf.subscribe(async e=>{e&&(await this.resumePausedMutations(),H(this,Qt).onOnline())})))}unmount(){var e,t;Jh(this,ui)._--,H(this,ui)===0&&((e=H(this,tc))==null||e.call(this),ge(this,tc,void 0),(t=H(this,nc))==null||t.call(this),ge(this,nc,void 0))}isFetching(e){return H(this,Qt).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return H(this,ci).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=H(this,Qt).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=H(this,Qt).build(this,t),s=r.state.data;return s===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(fi(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(s))}getQueriesData(e){return H(this,Qt).findAll(e).map(({queryKey:t,state:r})=>{const s=r.data;return[t,s]})}setQueryData(e,t,r){const s=this.defaultQueryOptions({queryKey:e}),a=H(this,Qt).get(s.queryHash),i=a==null?void 0:a.state.data,o=c3(t,i);if(o!==void 0)return H(this,Qt).build(this,s).setData(o,{...r,manual:!0})}setQueriesData(e,t,r){return xn.batch(()=>H(this,Qt).findAll(e).map(({queryKey:s})=>[s,this.setQueryData(s,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=H(this,Qt).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=H(this,Qt);xn.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=H(this,Qt);return xn.batch(()=>(r.findAll(e).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},s=xn.batch(()=>H(this,Qt).findAll(e).map(a=>a.cancel(r)));return Promise.all(s).then(Qn).catch(Qn)}invalidateQueries(e,t={}){return xn.batch(()=>(H(this,Qt).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},s=xn.batch(()=>H(this,Qt).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let i=a.fetch(void 0,r);return r.throwOnError||(i=i.catch(Qn)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(s).then(Qn)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=H(this,Qt).build(this,t);return r.isStaleByTime(fi(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Qn).catch(Qn)}fetchInfiniteQuery(e){return e.behavior=Xj(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Qn).catch(Qn)}ensureInfiniteQueryData(e){return e.behavior=Xj(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return tf.isOnline()?H(this,ci).resumePausedMutations():Promise.resolve()}getQueryCache(){return H(this,Qt)}getMutationCache(){return H(this,ci)}getDefaultOptions(){return H(this,di)}setDefaultOptions(e){ge(this,di,e)}setQueryDefaults(e,t){H(this,Zl).set(ko(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...H(this,Zl).values()],r={};return t.forEach(s=>{Bd(e,s.queryKey)&&Object.assign(r,s.defaultOptions)}),r}setMutationDefaults(e,t){H(this,ec).set(ko(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...H(this,ec).values()],r={};return t.forEach(s=>{Bd(e,s.mutationKey)&&Object.assign(r,s.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...H(this,di).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Jb(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Qb&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...H(this,di).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){H(this,Qt).clear(),H(this,ci).clear()}},Qt=new WeakMap,ci=new WeakMap,di=new WeakMap,Zl=new WeakMap,ec=new WeakMap,ui=new WeakMap,tc=new WeakMap,nc=new WeakMap,G2),ik=T.createContext(void 0),Et=e=>{const t=T.useContext(ik);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},T3=({client:e,children:t})=>(T.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),n.jsx(ik.Provider,{value:e,children:t})),ok=T.createContext(!1),R3=()=>T.useContext(ok);ok.Provider;function I3(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var P3=T.createContext(I3()),A3=()=>T.useContext(P3),M3=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},O3=e=>{T.useEffect(()=>{e.clearReset()},[e])},L3=({result:e,errorResetBoundary:t,throwOnError:r,query:s,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&s&&(a&&e.data===void 0||Z2(r,[e.error,s])),$3=e=>{if(e.suspense){const r=a=>a==="static"?a:Math.max(a??1e3,1e3),s=e.staleTime;e.staleTime=typeof s=="function"?(...a)=>r(s(...a)):r(s),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},D3=(e,t)=>e.isLoading&&e.isFetching&&!t,F3=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,eN=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function U3(e,t,r){var f,x,y,b,w;const s=R3(),a=A3(),i=Et(),o=i.defaultQueryOptions(e);(x=(f=i.getDefaultOptions().queries)==null?void 0:f._experimental_beforeQuery)==null||x.call(f,o),o._optimisticResults=s?"isRestoring":"optimistic",$3(o),M3(o,a),O3(a);const d=!i.getQueryCache().get(o.queryHash),[u]=T.useState(()=>new t(i,o)),h=u.getOptimisticResult(o),p=!s&&e.subscribed!==!1;if(T.useSyncExternalStore(T.useCallback(v=>{const j=p?u.subscribe(xn.batchCalls(v)):Qn;return u.updateResult(),j},[u,p]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),T.useEffect(()=>{u.setOptions(o)},[o,u]),F3(o,h))throw eN(o,u,a);if(L3({result:h,errorResetBoundary:a,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw h.error;if((b=(y=i.getDefaultOptions().queries)==null?void 0:y._experimental_afterQuery)==null||b.call(y,o,h),o.experimental_prefetchInRender&&!So&&D3(h,s)){const v=d?eN(o,u,a):(w=i.getQueryCache().get(o.queryHash))==null?void 0:w.promise;v==null||v.catch(Qn).finally(()=>{u.updateResult()})}return o.notifyOnChangeProps?h:u.trackResult(h)}function re(e,t){return U3(e,v3)}function De(e,t){const r=Et(),[s]=T.useState(()=>new k3(r,e));T.useEffect(()=>{s.setOptions(e)},[s,e]);const a=T.useSyncExternalStore(T.useCallback(o=>s.subscribe(xn.batchCalls(o)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),i=T.useCallback((o,d)=>{s.mutate(o,d).catch(Qn)},[s]);if(a.error&&Z2(s.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:i,mutateAsync:a.mutate}}/**
 * react-router v7.11.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var tN="popstate";function q3(e={}){function t(s,a){let{pathname:i,search:o,hash:d}=s.location;return B0("",{pathname:i,search:o,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(s,a){return typeof a=="string"?a:Hd(a)}return H3(t,r,null,e)}function Ut(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Ar(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function B3(){return Math.random().toString(36).substring(2,10)}function nN(e,t){return{usr:e.state,key:e.key,idx:t}}function B0(e,t,r=null,s){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?wc(t):t,state:r,key:t&&t.key||s||B3()}}function Hd({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function wc(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let s=e.indexOf("?");s>=0&&(t.search=e.substring(s),e=e.substring(0,s)),e&&(t.pathname=e)}return t}function H3(e,t,r,s={}){let{window:a=document.defaultView,v5Compat:i=!1}=s,o=a.history,d="POP",u=null,h=p();h==null&&(h=0,o.replaceState({...o.state,idx:h},""));function p(){return(o.state||{idx:null}).idx}function f(){d="POP";let v=p(),j=v==null?null:v-h;h=v,u&&u({action:d,location:w.location,delta:j})}function x(v,j){d="PUSH";let C=B0(w.location,v,j);h=p()+1;let S=nN(C,h),k=w.createHref(C);try{o.pushState(S,"",k)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;a.location.assign(k)}i&&u&&u({action:d,location:w.location,delta:1})}function y(v,j){d="REPLACE";let C=B0(w.location,v,j);h=p();let S=nN(C,h),k=w.createHref(C);o.replaceState(S,"",k),i&&u&&u({action:d,location:w.location,delta:0})}function b(v){return W3(v)}let w={get action(){return d},get location(){return e(a,o)},listen(v){if(u)throw new Error("A history only accepts one active listener");return a.addEventListener(tN,f),u=v,()=>{a.removeEventListener(tN,f),u=null}},createHref(v){return t(a,v)},createURL:b,encodeLocation(v){let j=b(v);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:x,replace:y,go(v){return o.go(v)}};return w}function W3(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Ut(r,"No window.location.(origin|href) available to create URL");let s=typeof e=="string"?e:Hd(e);return s=s.replace(/ $/,"%20"),!t&&s.startsWith("//")&&(s=r+s),new URL(s,r)}function lk(e,t,r="/"){return z3(e,t,r,!1)}function z3(e,t,r,s){let a=typeof t=="string"?wc(t):t,i=ya(a.pathname||"/",r);if(i==null)return null;let o=ck(e);G3(o);let d=null;for(let u=0;d==null&&u<o.length;++u){let h=r6(i);d=t6(o[u],h,s)}return d}function ck(e,t=[],r=[],s="",a=!1){let i=(o,d,u=a,h)=>{let p={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:d,route:o};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(s)&&u)return;Ut(p.relativePath.startsWith(s),`Absolute route path "${p.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(s.length)}let f=ha([s,p.relativePath]),x=r.concat(p);o.children&&o.children.length>0&&(Ut(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),ck(o.children,t,x,f,u)),!(o.path==null&&!o.index)&&t.push({path:f,score:Z3(f,o.index),routesMeta:x})};return e.forEach((o,d)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))i(o,d);else for(let h of dk(o.path))i(o,d,!0,h)}),t}function dk(e){let t=e.split("/");if(t.length===0)return[];let[r,...s]=t,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(s.length===0)return a?[i,""]:[i];let o=dk(s.join("/")),d=[];return d.push(...o.map(u=>u===""?i:[i,u].join("/"))),a&&d.push(...o),d.map(u=>e.startsWith("/")&&u===""?"/":u)}function G3(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:e6(t.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}var K3=/^:[\w-]+$/,V3=3,Y3=2,J3=1,Q3=10,X3=-2,rN=e=>e==="*";function Z3(e,t){let r=e.split("/"),s=r.length;return r.some(rN)&&(s+=X3),t&&(s+=Y3),r.filter(a=>!rN(a)).reduce((a,i)=>a+(K3.test(i)?V3:i===""?J3:Q3),s)}function e6(e,t){return e.length===t.length&&e.slice(0,-1).every((s,a)=>s===t[a])?e[e.length-1]-t[t.length-1]:0}function t6(e,t,r=!1){let{routesMeta:s}=e,a={},i="/",o=[];for(let d=0;d<s.length;++d){let u=s[d],h=d===s.length-1,p=i==="/"?t:t.slice(i.length)||"/",f=nf({path:u.relativePath,caseSensitive:u.caseSensitive,end:h},p),x=u.route;if(!f&&h&&r&&!s[s.length-1].route.index&&(f=nf({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},p)),!f)return null;Object.assign(a,f.params),o.push({params:a,pathname:ha([i,f.pathname]),pathnameBase:o6(ha([i,f.pathnameBase])),route:x}),f.pathnameBase!=="/"&&(i=ha([i,f.pathnameBase]))}return o}function nf(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,s]=n6(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:s.reduce((h,{paramName:p,isOptional:f},x)=>{if(p==="*"){let b=d[x]||"";o=i.slice(0,i.length-b.length).replace(/(.)\/+$/,"$1")}const y=d[x];return f&&!y?h[p]=void 0:h[p]=(y||"").replace(/%2F/g,"/"),h},{}),pathname:i,pathnameBase:o,pattern:e}}function n6(e,t=!1,r=!0){Ar(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let s=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,d,u)=>(s.push({paramName:d,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(s.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),s]}function r6(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Ar(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function ya(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,s=e.charAt(r);return s&&s!=="/"?null:e.slice(r)||"/"}var uk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,s6=e=>uk.test(e);function a6(e,t="/"){let{pathname:r,search:s="",hash:a=""}=typeof e=="string"?wc(e):e,i;if(r)if(s6(r))i=r;else{if(r.includes("//")){let o=r;r=r.replace(/\/\/+/g,"/"),Ar(!1,`Pathnames cannot have embedded double slashes - normalizing ${o} -> ${r}`)}r.startsWith("/")?i=sN(r.substring(1),"/"):i=sN(r,t)}else i=t;return{pathname:i,search:l6(s),hash:c6(a)}}function sN(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function Pg(e,t,r,s){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function i6(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function ey(e){let t=i6(e);return t.map((r,s)=>s===t.length-1?r.pathname:r.pathnameBase)}function ty(e,t,r,s=!1){let a;typeof e=="string"?a=wc(e):(a={...e},Ut(!a.pathname||!a.pathname.includes("?"),Pg("?","pathname","search",a)),Ut(!a.pathname||!a.pathname.includes("#"),Pg("#","pathname","hash",a)),Ut(!a.search||!a.search.includes("#"),Pg("#","search","hash",a)));let i=e===""||a.pathname==="",o=i?"/":a.pathname,d;if(o==null)d=r;else{let f=t.length-1;if(!s&&o.startsWith("..")){let x=o.split("/");for(;x[0]==="..";)x.shift(),f-=1;a.pathname=x.join("/")}d=f>=0?t[f]:"/"}let u=a6(a,d),h=o&&o!=="/"&&o.endsWith("/"),p=(i||o===".")&&r.endsWith("/");return!u.pathname.endsWith("/")&&(h||p)&&(u.pathname+="/"),u}var ha=e=>e.join("/").replace(/\/\/+/g,"/"),o6=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),l6=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,c6=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,d6=class{constructor(e,t,r,s=!1){this.status=e,this.statusText=t||"",this.internal=s,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}};function u6(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function h6(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var hk=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function mk(e,t){let r=e;if(typeof r!="string"||!uk.test(r))return{absoluteURL:void 0,isExternal:!1,to:r};let s=r,a=!1;if(hk)try{let i=new URL(window.location.href),o=r.startsWith("//")?new URL(i.protocol+r):new URL(r),d=ya(o.pathname,t);o.origin===i.origin&&d!=null?r=d+o.search+o.hash:a=!0}catch{Ar(!1,`<Link to="${r}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:s,isExternal:a,to:r}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var fk=["POST","PUT","PATCH","DELETE"];new Set(fk);var m6=["GET",...fk];new Set(m6);var _c=T.createContext(null);_c.displayName="DataRouter";var Uf=T.createContext(null);Uf.displayName="DataRouterState";var f6=T.createContext(!1),pk=T.createContext({isTransitioning:!1});pk.displayName="ViewTransition";var p6=T.createContext(new Map);p6.displayName="Fetchers";var x6=T.createContext(null);x6.displayName="Await";var Mr=T.createContext(null);Mr.displayName="Navigation";var mu=T.createContext(null);mu.displayName="Location";var es=T.createContext({outlet:null,matches:[],isDataRoute:!1});es.displayName="Route";var ny=T.createContext(null);ny.displayName="RouteError";var xk="REACT_ROUTER_ERROR",g6="REDIRECT",b6="ROUTE_ERROR_RESPONSE";function y6(e){if(e.startsWith(`${xk}:${g6}:{`))try{let t=JSON.parse(e.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function v6(e){if(e.startsWith(`${xk}:${b6}:{`))try{let t=JSON.parse(e.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new d6(t.status,t.statusText,t.data)}catch{}}function w6(e,{relative:t}={}){Ut(jc(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:s}=T.useContext(Mr),{hash:a,pathname:i,search:o}=fu(e,{relative:t}),d=i;return r!=="/"&&(d=i==="/"?r:ha([r,i])),s.createHref({pathname:d,search:o,hash:a})}function jc(){return T.useContext(mu)!=null}function ts(){return Ut(jc(),"useLocation() may be used only in the context of a <Router> component."),T.useContext(mu).location}var gk="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function bk(e){T.useContext(Mr).static||T.useLayoutEffect(e)}function ns(){let{isDataRoute:e}=T.useContext(es);return e?L6():_6()}function _6(){Ut(jc(),"useNavigate() may be used only in the context of a <Router> component.");let e=T.useContext(_c),{basename:t,navigator:r}=T.useContext(Mr),{matches:s}=T.useContext(es),{pathname:a}=ts(),i=JSON.stringify(ey(s)),o=T.useRef(!1);return bk(()=>{o.current=!0}),T.useCallback((u,h={})=>{if(Ar(o.current,gk),!o.current)return;if(typeof u=="number"){r.go(u);return}let p=ty(u,JSON.parse(i),a,h.relative==="path");e==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:ha([t,p.pathname])),(h.replace?r.replace:r.push)(p,h.state,h)},[t,r,i,a,e])}var j6=T.createContext(null);function N6(e){let t=T.useContext(es).outlet;return T.useMemo(()=>t&&T.createElement(j6.Provider,{value:e},t),[t,e])}function On(){let{matches:e}=T.useContext(es),t=e[e.length-1];return t?t.params:{}}function fu(e,{relative:t}={}){let{matches:r}=T.useContext(es),{pathname:s}=ts(),a=JSON.stringify(ey(r));return T.useMemo(()=>ty(e,JSON.parse(a),s,t==="path"),[e,a,s,t])}function S6(e,t){return yk(e,t)}function yk(e,t,r,s,a){var C;Ut(jc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=T.useContext(Mr),{matches:o}=T.useContext(es),d=o[o.length-1],u=d?d.params:{},h=d?d.pathname:"/",p=d?d.pathnameBase:"/",f=d&&d.route;{let S=f&&f.path||"";wk(h,!f||S.endsWith("*")||S.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${S}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${S}"> to <Route path="${S==="/"?"*":`${S}/*`}">.`)}let x=ts(),y;if(t){let S=typeof t=="string"?wc(t):t;Ut(p==="/"||((C=S.pathname)==null?void 0:C.startsWith(p)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${S.pathname}" was given in the \`location\` prop.`),y=S}else y=x;let b=y.pathname||"/",w=b;if(p!=="/"){let S=p.replace(/^\//,"").split("/");w="/"+b.replace(/^\//,"").split("/").slice(S.length).join("/")}let v=lk(e,{pathname:w});Ar(f||v!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),Ar(v==null||v[v.length-1].route.element!==void 0||v[v.length-1].route.Component!==void 0||v[v.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let j=R6(v&&v.map(S=>Object.assign({},S,{params:Object.assign({},u,S.params),pathname:ha([p,i.encodeLocation?i.encodeLocation(S.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?p:ha([p,i.encodeLocation?i.encodeLocation(S.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:S.pathnameBase])})),o,r,s,a);return t&&j?T.createElement(mu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},j):j}function k6(){let e=O6(),t=u6(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:s},i={padding:"2px 4px",backgroundColor:s},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=T.createElement(T.Fragment,null,T.createElement("p",null," Hey developer "),T.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",T.createElement("code",{style:i},"ErrorBoundary")," or"," ",T.createElement("code",{style:i},"errorElement")," prop on your route.")),T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},t),r?T.createElement("pre",{style:a},r):null,o)}var E6=T.createElement(k6,null),vk=class extends T.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){const r=v6(e.digest);r&&(e=r)}let t=e!==void 0?T.createElement(es.Provider,{value:this.props.routeContext},T.createElement(ny.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?T.createElement(C6,{error:e},t):t}};vk.contextType=f6;var Ag=new WeakMap;function C6({children:e,error:t}){let{basename:r}=T.useContext(Mr);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let s=y6(t.digest);if(s){let a=Ag.get(t);if(a)throw a;let i=mk(s.location,r);if(hk&&!Ag.get(t))if(i.isExternal||s.reloadDocument)window.location.href=i.absoluteURL||i.to;else{const o=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(i.to,{replace:s.replace}));throw Ag.set(t,o),o}return T.createElement("meta",{httpEquiv:"refresh",content:`0;url=${i.absoluteURL||i.to}`})}}return e}function T6({routeContext:e,match:t,children:r}){let s=T.useContext(_c);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),T.createElement(es.Provider,{value:e},r)}function R6(e,t=[],r=null,s=null,a=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let i=e,o=r==null?void 0:r.errors;if(o!=null){let p=i.findIndex(f=>f.route.id&&(o==null?void 0:o[f.route.id])!==void 0);Ut(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,p+1))}let d=!1,u=-1;if(r)for(let p=0;p<i.length;p++){let f=i[p];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=p),f.route.id){let{loaderData:x,errors:y}=r,b=f.route.loader&&!x.hasOwnProperty(f.route.id)&&(!y||y[f.route.id]===void 0);if(f.route.lazy||b){d=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}let h=r&&s?(p,f)=>{var x,y;s(p,{location:r.location,params:((y=(x=r.matches)==null?void 0:x[0])==null?void 0:y.params)??{},unstable_pattern:h6(r.matches),errorInfo:f})}:void 0;return i.reduceRight((p,f,x)=>{let y,b=!1,w=null,v=null;r&&(y=o&&f.route.id?o[f.route.id]:void 0,w=f.route.errorElement||E6,d&&(u<0&&x===0?(wk("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,v=null):u===x&&(b=!0,v=f.route.hydrateFallbackElement||null)));let j=t.concat(i.slice(0,x+1)),C=()=>{let S;return y?S=w:b?S=v:f.route.Component?S=T.createElement(f.route.Component,null):f.route.element?S=f.route.element:S=p,T.createElement(T6,{match:f,routeContext:{outlet:p,matches:j,isDataRoute:r!=null},children:S})};return r&&(f.route.ErrorBoundary||f.route.errorElement||x===0)?T.createElement(vk,{location:r.location,revalidation:r.revalidation,component:w,error:y,children:C(),routeContext:{outlet:null,matches:j,isDataRoute:!0},onError:h}):C()},null)}function ry(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function I6(e){let t=T.useContext(_c);return Ut(t,ry(e)),t}function P6(e){let t=T.useContext(Uf);return Ut(t,ry(e)),t}function A6(e){let t=T.useContext(es);return Ut(t,ry(e)),t}function sy(e){let t=A6(e),r=t.matches[t.matches.length-1];return Ut(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function M6(){return sy("useRouteId")}function O6(){var s;let e=T.useContext(ny),t=P6("useRouteError"),r=sy("useRouteError");return e!==void 0?e:(s=t.errors)==null?void 0:s[r]}function L6(){let{router:e}=I6("useNavigate"),t=sy("useNavigate"),r=T.useRef(!1);return bk(()=>{r.current=!0}),T.useCallback(async(a,i={})=>{Ar(r.current,gk),r.current&&(typeof a=="number"?await e.navigate(a):await e.navigate(a,{fromRouteId:t,...i}))},[e,t])}var aN={};function wk(e,t,r){!t&&!aN[e]&&(aN[e]=!0,Ar(!1,r))}T.memo($6);function $6({routes:e,future:t,state:r,onError:s}){return yk(e,void 0,r,s,t)}function wi({to:e,replace:t,state:r,relative:s}){Ut(jc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=T.useContext(Mr);Ar(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=T.useContext(es),{pathname:o}=ts(),d=ns(),u=ty(e,ey(i),o,s==="path"),h=JSON.stringify(u);return T.useEffect(()=>{d(JSON.parse(h),{replace:t,state:r,relative:s})},[d,h,s,t,r]),null}function ay(e){return N6(e.context)}function _e(e){Ut(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function D6({basename:e="/",children:t=null,location:r,navigationType:s="POP",navigator:a,static:i=!1,unstable_useTransitions:o}){Ut(!jc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=e.replace(/^\/*/,"/"),u=T.useMemo(()=>({basename:d,navigator:a,static:i,unstable_useTransitions:o,future:{}}),[d,a,i,o]);typeof r=="string"&&(r=wc(r));let{pathname:h="/",search:p="",hash:f="",state:x=null,key:y="default"}=r,b=T.useMemo(()=>{let w=ya(h,d);return w==null?null:{location:{pathname:w,search:p,hash:f,state:x,key:y},navigationType:s}},[d,h,p,f,x,y,s]);return Ar(b!=null,`<Router basename="${d}"> is not able to match the URL "${h}${p}${f}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:T.createElement(Mr.Provider,{value:u},T.createElement(mu.Provider,{children:t,value:b}))}function F6({children:e,location:t}){return S6(H0(e),t)}function H0(e,t=[]){let r=[];return T.Children.forEach(e,(s,a)=>{if(!T.isValidElement(s))return;let i=[...t,a];if(s.type===T.Fragment){r.push.apply(r,H0(s.props.children,i));return}Ut(s.type===_e,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ut(!s.props.index||!s.props.children,"An index route cannot have child routes.");let o={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=H0(s.props.children,i)),r.push(o)}),r}var km="get",Em="application/x-www-form-urlencoded";function qf(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function U6(e){return qf(e)&&e.tagName.toLowerCase()==="button"}function q6(e){return qf(e)&&e.tagName.toLowerCase()==="form"}function B6(e){return qf(e)&&e.tagName.toLowerCase()==="input"}function H6(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function W6(e,t){return e.button===0&&(!t||t==="_self")&&!H6(e)}function W0(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let s=e[r];return t.concat(Array.isArray(s)?s.map(a=>[r,a]):[[r,s]])},[]))}function z6(e,t){let r=W0(e);return t&&t.forEach((s,a)=>{r.has(a)||t.getAll(a).forEach(i=>{r.append(a,i)})}),r}var Zh=null;function G6(){if(Zh===null)try{new FormData(document.createElement("form"),0),Zh=!1}catch{Zh=!0}return Zh}var K6=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Mg(e){return e!=null&&!K6.has(e)?(Ar(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Em}"`),null):e}function V6(e,t){let r,s,a,i,o;if(q6(e)){let d=e.getAttribute("action");s=d?ya(d,t):null,r=e.getAttribute("method")||km,a=Mg(e.getAttribute("enctype"))||Em,i=new FormData(e)}else if(U6(e)||B6(e)&&(e.type==="submit"||e.type==="image")){let d=e.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=e.getAttribute("formaction")||d.getAttribute("action");if(s=u?ya(u,t):null,r=e.getAttribute("formmethod")||d.getAttribute("method")||km,a=Mg(e.getAttribute("formenctype"))||Mg(d.getAttribute("enctype"))||Em,i=new FormData(d,e),!G6()){let{name:h,type:p,value:f}=e;if(p==="image"){let x=h?`${h}.`:"";i.append(`${x}x`,"0"),i.append(`${x}y`,"0")}else h&&i.append(h,f)}}else{if(qf(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=km,s=null,a=Em,o=e}return i&&a==="text/plain"&&(o=i,i=void 0),{action:s,method:r.toLowerCase(),encType:a,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function iy(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Y6(e,t,r){let s=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return s.pathname==="/"?s.pathname=`_root.${r}`:t&&ya(s.pathname,t)==="/"?s.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${r}`,s}async function J6(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Q6(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function X6(e,t,r){let s=await Promise.all(e.map(async a=>{let i=t.routes[a.route.id];if(i){let o=await J6(i,r);return o.links?o.links():[]}return[]}));return nP(s.flat(1).filter(Q6).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function iN(e,t,r,s,a,i){let o=(u,h)=>r[h]?u.route.id!==r[h].route.id:!0,d=(u,h)=>{var p;return r[h].pathname!==u.pathname||((p=r[h].route.path)==null?void 0:p.endsWith("*"))&&r[h].params["*"]!==u.params["*"]};return i==="assets"?t.filter((u,h)=>o(u,h)||d(u,h)):i==="data"?t.filter((u,h)=>{var f;let p=s.routes[u.route.id];if(!p||!p.hasLoader)return!1;if(o(u,h)||d(u,h))return!0;if(u.route.shouldRevalidate){let x=u.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((f=r[0])==null?void 0:f.params)||{},nextUrl:new URL(e,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function Z6(e,t,{includeHydrateFallback:r}={}){return eP(e.map(s=>{let a=t.routes[s.route.id];if(!a)return[];let i=[a.module];return a.clientActionModule&&(i=i.concat(a.clientActionModule)),a.clientLoaderModule&&(i=i.concat(a.clientLoaderModule)),r&&a.hydrateFallbackModule&&(i=i.concat(a.hydrateFallbackModule)),a.imports&&(i=i.concat(a.imports)),i}).flat(1))}function eP(e){return[...new Set(e)]}function tP(e){let t={},r=Object.keys(e).sort();for(let s of r)t[s]=e[s];return t}function nP(e,t){let r=new Set;return new Set(t),e.reduce((s,a)=>{let i=JSON.stringify(tP(a));return r.has(i)||(r.add(i),s.push({key:i,link:a})),s},[])}function _k(){let e=T.useContext(_c);return iy(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function rP(){let e=T.useContext(Uf);return iy(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var oy=T.createContext(void 0);oy.displayName="FrameworkContext";function jk(){let e=T.useContext(oy);return iy(e,"You must render this element inside a <HydratedRouter> element"),e}function sP(e,t){let r=T.useContext(oy),[s,a]=T.useState(!1),[i,o]=T.useState(!1),{onFocus:d,onBlur:u,onMouseEnter:h,onMouseLeave:p,onTouchStart:f}=t,x=T.useRef(null);T.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let w=j=>{j.forEach(C=>{o(C.isIntersecting)})},v=new IntersectionObserver(w,{threshold:.5});return x.current&&v.observe(x.current),()=>{v.disconnect()}}},[e]),T.useEffect(()=>{if(s){let w=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(w)}}},[s]);let y=()=>{a(!0)},b=()=>{a(!1),o(!1)};return r?e!=="intent"?[i,x,{}]:[i,x,{onFocus:_d(d,y),onBlur:_d(u,b),onMouseEnter:_d(h,y),onMouseLeave:_d(p,b),onTouchStart:_d(f,y)}]:[!1,x,{}]}function _d(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function aP({page:e,...t}){let{router:r}=_k(),s=T.useMemo(()=>lk(r.routes,e,r.basename),[r.routes,e,r.basename]);return s?T.createElement(oP,{page:e,matches:s,...t}):null}function iP(e){let{manifest:t,routeModules:r}=jk(),[s,a]=T.useState([]);return T.useEffect(()=>{let i=!1;return X6(e,t,r).then(o=>{i||a(o)}),()=>{i=!0}},[e,t,r]),s}function oP({page:e,matches:t,...r}){let s=ts(),{manifest:a,routeModules:i}=jk(),{basename:o}=_k(),{loaderData:d,matches:u}=rP(),h=T.useMemo(()=>iN(e,t,u,a,s,"data"),[e,t,u,a,s]),p=T.useMemo(()=>iN(e,t,u,a,s,"assets"),[e,t,u,a,s]),f=T.useMemo(()=>{if(e===s.pathname+s.search+s.hash)return[];let b=new Set,w=!1;if(t.forEach(j=>{var S;let C=a.routes[j.route.id];!C||!C.hasLoader||(!h.some(k=>k.route.id===j.route.id)&&j.route.id in d&&((S=i[j.route.id])!=null&&S.shouldRevalidate)||C.hasClientLoader?w=!0:b.add(j.route.id))}),b.size===0)return[];let v=Y6(e,o,"data");return w&&b.size>0&&v.searchParams.set("_routes",t.filter(j=>b.has(j.route.id)).map(j=>j.route.id).join(",")),[v.pathname+v.search]},[o,d,s,a,h,t,e,i]),x=T.useMemo(()=>Z6(p,a),[p,a]),y=iP(p);return T.createElement(T.Fragment,null,f.map(b=>T.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...r})),x.map(b=>T.createElement("link",{key:b,rel:"modulepreload",href:b,...r})),y.map(({key:b,link:w})=>T.createElement("link",{key:b,nonce:r.nonce,...w})))}function lP(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var cP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{cP&&(window.__reactRouterVersion="7.11.0")}catch{}function dP({basename:e,children:t,unstable_useTransitions:r,window:s}){let a=T.useRef();a.current==null&&(a.current=q3({window:s,v5Compat:!0}));let i=a.current,[o,d]=T.useState({action:i.action,location:i.location}),u=T.useCallback(h=>{r===!1?d(h):T.startTransition(()=>d(h))},[r]);return T.useLayoutEffect(()=>i.listen(u),[i,u]),T.createElement(D6,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:i,unstable_useTransitions:r})}var Nk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,z=T.forwardRef(function({onClick:t,discover:r="render",prefetch:s="none",relative:a,reloadDocument:i,replace:o,state:d,target:u,to:h,preventScrollReset:p,viewTransition:f,unstable_defaultShouldRevalidate:x,...y},b){let{basename:w,unstable_useTransitions:v}=T.useContext(Mr),j=typeof h=="string"&&Nk.test(h),C=mk(h,w);h=C.to;let S=w6(h,{relative:a}),[k,R,E]=sP(s,y),I=fP(h,{replace:o,state:d,target:u,preventScrollReset:p,relative:a,viewTransition:f,unstable_defaultShouldRevalidate:x,unstable_useTransitions:v});function M(L){t&&t(L),L.defaultPrevented||I(L)}let O=T.createElement("a",{...y,...E,href:C.absoluteURL||S,onClick:C.isExternal||i?t:M,ref:lP(b,R),target:u,"data-discover":!j&&r==="render"?"true":void 0});return k&&!j?T.createElement(T.Fragment,null,O,T.createElement(aP,{page:S})):O});z.displayName="Link";var uP=T.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:s="",end:a=!1,style:i,to:o,viewTransition:d,children:u,...h},p){let f=fu(o,{relative:h.relative}),x=ts(),y=T.useContext(Uf),{navigator:b,basename:w}=T.useContext(Mr),v=y!=null&&yP(f)&&d===!0,j=b.encodeLocation?b.encodeLocation(f).pathname:f.pathname,C=x.pathname,S=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;r||(C=C.toLowerCase(),S=S?S.toLowerCase():null,j=j.toLowerCase()),S&&w&&(S=ya(S,w)||S);const k=j!=="/"&&j.endsWith("/")?j.length-1:j.length;let R=C===j||!a&&C.startsWith(j)&&C.charAt(k)==="/",E=S!=null&&(S===j||!a&&S.startsWith(j)&&S.charAt(j.length)==="/"),I={isActive:R,isPending:E,isTransitioning:v},M=R?t:void 0,O;typeof s=="function"?O=s(I):O=[s,R?"active":null,E?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let L=typeof i=="function"?i(I):i;return T.createElement(z,{...h,"aria-current":M,className:O,ref:p,style:L,to:o,viewTransition:d},typeof u=="function"?u(I):u)});uP.displayName="NavLink";var hP=T.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:s,replace:a,state:i,method:o=km,action:d,onSubmit:u,relative:h,preventScrollReset:p,viewTransition:f,unstable_defaultShouldRevalidate:x,...y},b)=>{let{unstable_useTransitions:w}=T.useContext(Mr),v=gP(),j=bP(d,{relative:h}),C=o.toLowerCase()==="get"?"get":"post",S=typeof d=="string"&&Nk.test(d),k=R=>{if(u&&u(R),R.defaultPrevented)return;R.preventDefault();let E=R.nativeEvent.submitter,I=(E==null?void 0:E.getAttribute("formmethod"))||o,M=()=>v(E||R.currentTarget,{fetcherKey:t,method:I,navigate:r,replace:a,state:i,relative:h,preventScrollReset:p,viewTransition:f,unstable_defaultShouldRevalidate:x});w&&r!==!1?T.startTransition(()=>M()):M()};return T.createElement("form",{ref:b,method:C,action:j,onSubmit:s?u:k,...y,"data-discover":!S&&e==="render"?"true":void 0})});hP.displayName="Form";function mP(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Sk(e){let t=T.useContext(_c);return Ut(t,mP(e)),t}function fP(e,{target:t,replace:r,state:s,preventScrollReset:a,relative:i,viewTransition:o,unstable_defaultShouldRevalidate:d,unstable_useTransitions:u}={}){let h=ns(),p=ts(),f=fu(e,{relative:i});return T.useCallback(x=>{if(W6(x,t)){x.preventDefault();let y=r!==void 0?r:Hd(p)===Hd(f),b=()=>h(e,{replace:y,state:s,preventScrollReset:a,relative:i,viewTransition:o,unstable_defaultShouldRevalidate:d});u?T.startTransition(()=>b()):b()}},[p,h,f,r,s,t,e,a,i,o,d,u])}function pu(e){Ar(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=T.useRef(W0(e)),r=T.useRef(!1),s=ts(),a=T.useMemo(()=>z6(s.search,r.current?null:t.current),[s.search]),i=ns(),o=T.useCallback((d,u)=>{const h=W0(typeof d=="function"?d(new URLSearchParams(a)):d);r.current=!0,i("?"+h,u)},[i,a]);return[a,o]}var pP=0,xP=()=>`__${String(++pP)}__`;function gP(){let{router:e}=Sk("useSubmit"),{basename:t}=T.useContext(Mr),r=M6(),s=e.fetch,a=e.navigate;return T.useCallback(async(i,o={})=>{let{action:d,method:u,encType:h,formData:p,body:f}=V6(i,t);if(o.navigate===!1){let x=o.fetcherKey||xP();await s(x,r,o.action||d,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:p,body:f,formMethod:o.method||u,formEncType:o.encType||h,flushSync:o.flushSync})}else await a(o.action||d,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:p,body:f,formMethod:o.method||u,formEncType:o.encType||h,replace:o.replace,state:o.state,fromRouteId:r,flushSync:o.flushSync,viewTransition:o.viewTransition})},[s,a,t,r])}function bP(e,{relative:t}={}){let{basename:r}=T.useContext(Mr),s=T.useContext(es);Ut(s,"useFormAction must be used inside a RouteContext");let[a]=s.matches.slice(-1),i={...fu(e||".",{relative:t})},o=ts();if(e==null){i.search=o.search;let d=new URLSearchParams(i.search),u=d.getAll("index");if(u.some(p=>p==="")){d.delete("index"),u.filter(f=>f).forEach(f=>d.append("index",f));let p=d.toString();i.search=p?`?${p}`:""}}return(!e||e===".")&&a.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(i.pathname=i.pathname==="/"?r:ha([r,i.pathname])),Hd(i)}function yP(e,{relative:t}={}){let r=T.useContext(pk);Ut(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=Sk("useViewTransitionState"),a=fu(e,{relative:t});if(!r.isTransitioning)return!1;let i=ya(r.currentLocation.pathname,s)||r.currentLocation.pathname,o=ya(r.nextLocation.pathname,s)||r.nextLocation.pathname;return nf(a.pathname,o)!=null||nf(a.pathname,i)!=null}function Bf(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(r[s[a]]=e[s[a]]);return r}function vP(e,t,r,s){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function d(p){try{h(s.next(p))}catch(f){o(f)}}function u(p){try{h(s.throw(p))}catch(f){o(f)}}function h(p){p.done?i(p.value):a(p.value).then(d,u)}h((s=s.apply(e,t||[])).next())})}const wP=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class ly extends Error{constructor(t,r="FunctionsError",s){super(t),this.name=r,this.context=s}}class _P extends ly{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class oN extends ly{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class lN extends ly{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var z0;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(z0||(z0={}));class jP{constructor(t,{headers:r={},customFetch:s,region:a=z0.Any}={}){this.url=t,this.headers=r,this.region=a,this.fetch=wP(s)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return vP(this,arguments,void 0,function*(r,s={}){var a;let i,o;try{const{headers:d,method:u,body:h,signal:p,timeout:f}=s;let x={},{region:y}=s;y||(y=this.region);const b=new URL(`${this.url}/${r}`);y&&y!=="any"&&(x["x-region"]=y,b.searchParams.set("forceFunctionRegion",y));let w;h&&(d&&!Object.prototype.hasOwnProperty.call(d,"Content-Type")||!d)?typeof Blob<"u"&&h instanceof Blob||h instanceof ArrayBuffer?(x["Content-Type"]="application/octet-stream",w=h):typeof h=="string"?(x["Content-Type"]="text/plain",w=h):typeof FormData<"u"&&h instanceof FormData?w=h:(x["Content-Type"]="application/json",w=JSON.stringify(h)):w=h;let v=p;f&&(o=new AbortController,i=setTimeout(()=>o.abort(),f),p?(v=o.signal,p.addEventListener("abort",()=>o.abort())):v=o.signal);const j=yield this.fetch(b.toString(),{method:u||"POST",headers:Object.assign(Object.assign(Object.assign({},x),this.headers),d),body:w,signal:v}).catch(R=>{throw new _P(R)}),C=j.headers.get("x-relay-error");if(C&&C==="true")throw new oN(j);if(!j.ok)throw new lN(j);let S=((a=j.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),k;return S==="application/json"?k=yield j.json():S==="application/octet-stream"||S==="application/pdf"?k=yield j.blob():S==="text/event-stream"?k=j:S==="multipart/form-data"?k=yield j.formData():k=yield j.text(),{data:k,error:null,response:j}}catch(d){return{data:null,error:d,response:d instanceof lN||d instanceof oN?d.context:void 0}}finally{i&&clearTimeout(i)}})}}var NP=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},SP=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let a=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let o=null,d=null,u=null,h=i.status,p=i.statusText;if(i.ok){var f,x;if(r.method!=="HEAD"){var y;const j=await i.text();j===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((y=r.headers.get("Accept"))===null||y===void 0)&&y.includes("application/vnd.pgrst.plan+text"))?d=j:d=JSON.parse(j))}const w=(f=r.headers.get("Prefer"))===null||f===void 0?void 0:f.match(/count=(exact|planned|estimated)/),v=(x=i.headers.get("content-range"))===null||x===void 0?void 0:x.split("/");w&&v&&v.length>1&&(u=parseInt(v[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(d)&&(d.length>1?(o={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,u=null,h=406,p="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{var b;const w=await i.text();try{o=JSON.parse(w),Array.isArray(o)&&i.status===404&&(d=[],o=null,h=200,p="OK")}catch{i.status===404&&w===""?(h=204,p="No Content"):o={message:w}}if(o&&r.isMaybeSingle&&(!(o==null||(b=o.details)===null||b===void 0)&&b.includes("0 rows"))&&(o=null,h=200,p="OK"),o&&r.shouldThrowOnError)throw new NP(o)}return{error:o,data:d,count:u,status:h,statusText:p}});return this.shouldThrowOnError||(a=a.catch(i=>{var o;let d="";const u=i==null?void 0:i.cause;if(u){var h,p,f,x;const b=(h=u==null?void 0:u.message)!==null&&h!==void 0?h:"",w=(p=u==null?void 0:u.code)!==null&&p!==void 0?p:"";d=`${(f=i==null?void 0:i.name)!==null&&f!==void 0?f:"FetchError"}: ${i==null?void 0:i.message}`,d+=`

Caused by: ${(x=u==null?void 0:u.name)!==null&&x!==void 0?x:"Error"}: ${b}`,w&&(d+=` (${w})`),u!=null&&u.stack&&(d+=`
${u.stack}`)}else{var y;d=(y=i==null?void 0:i.stack)!==null&&y!==void 0?y:""}return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:d,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),a.then(e,t)}returns(){return this}overrideTypes(){return this}},kP=class extends SP{select(e){let t=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!t?"":(s==='"'&&(t=!t),s)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:s,referencedTable:a=s}={}){const i=a?`${a}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:s=r}={}){const a=typeof s>"u"?"offset":`${s}.offset`,i=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(i,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:s=!1,wal:a=!1,format:i="text"}={}){var o;const d=[e?"analyze":null,t?"verbose":null,r?"settings":null,s?"buffers":null,a?"wal":null].filter(Boolean).join("|"),u=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${u}"; options=${d};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const cN=new RegExp("[,()]");var kl=class extends kP{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(s=>typeof s=="string"&&cN.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}notIn(e,t){const r=Array.from(new Set(t)).map(s=>typeof s=="string"&&cN.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`not.in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:s}={}){let a="";s==="plain"?a="pl":s==="phrase"?a="ph":s==="websearch"&&(a="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${a}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}},EP=class{constructor(e,{headers:t={},schema:r,fetch:s}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=s}select(e,t){const{head:r=!1,count:s}=t??{},a=r?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(d=>/\s/.test(d)&&!i?"":(d==='"'&&(i=!i),d)).join("");return this.url.searchParams.set("select",o),s&&this.headers.append("Prefer",`count=${s}`),new kl({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){var s;const a="POST";if(t&&this.headers.append("Prefer",`count=${t}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const i=e.reduce((o,d)=>o.concat(Object.keys(d)),[]);if(i.length>0){const o=[...new Set(i)].map(d=>`"${d}"`);this.url.searchParams.set("columns",o.join(","))}}return new kl({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:s,defaultToNull:a=!0}={}){var i;const o="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&this.url.searchParams.set("on_conflict",t),s&&this.headers.append("Prefer",`count=${s}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const d=e.reduce((u,h)=>u.concat(Object.keys(h)),[]);if(d.length>0){const u=[...new Set(d)].map(h=>`"${h}"`);this.url.searchParams.set("columns",u.join(","))}}return new kl({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(e,{count:t}={}){var r;const s="PATCH";return t&&this.headers.append("Prefer",`count=${t}`),new kl({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var t;const r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new kl({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},CP=class kk{constructor(t,{headers:r={},schema:s,fetch:a}={}){this.url=t,this.headers=new Headers(r),this.schemaName=s,this.fetch=a}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new EP(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new kk(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:s=!1,get:a=!1,count:i}={}){var o;let d;const u=new URL(`${this.url}/rpc/${t}`);let h;s||a?(d=s?"HEAD":"GET",Object.entries(r).filter(([f,x])=>x!==void 0).map(([f,x])=>[f,Array.isArray(x)?`{${x.join(",")}}`:`${x}`]).forEach(([f,x])=>{u.searchParams.append(f,x)})):(d="POST",h=r);const p=new Headers(this.headers);return i&&p.set("Prefer",`count=${i}`),new kl({method:d,url:u,headers:p,schema:this.schemaName,body:h,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};class TP{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const s=r.node,a=parseInt(s.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const s=this.getWebSocketConstructor();return new s(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const RP="2.89.0",IP=`realtime-js/${RP}`,Ek="1.0.0",PP="2.0.0",dN=Ek,G0=1e4,AP=1e3,MP=100;var Xa;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Xa||(Xa={}));var pn;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(pn||(pn={}));var xs;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(xs||(xs={}));var K0;(function(e){e.websocket="websocket"})(K0||(K0={}));var eo;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(eo||(eo={}));class OP{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let s=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(s))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,s;const a=(s=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&s!==void 0?s:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(t){var r,s;const a=(s=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&s!==void 0?s:{},o=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(t,r,s){var a,i;const o=t.topic,d=(a=t.ref)!==null&&a!==void 0?a:"",u=(i=t.join_ref)!==null&&i!==void 0?i:"",h=t.payload.event,p=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},f=Object.keys(p).length===0?"":JSON.stringify(p);if(u.length>255)throw new Error(`joinRef length ${u.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`ref length ${d.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`userEvent length ${h.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`metadata length ${f.length} exceeds maximum of 255`);const x=this.USER_BROADCAST_PUSH_META_LENGTH+u.length+d.length+o.length+h.length+f.length,y=new ArrayBuffer(this.HEADER_LENGTH+x);let b=new DataView(y),w=0;b.setUint8(w++,this.KINDS.userBroadcastPush),b.setUint8(w++,u.length),b.setUint8(w++,d.length),b.setUint8(w++,o.length),b.setUint8(w++,h.length),b.setUint8(w++,f.length),b.setUint8(w++,r),Array.from(u,j=>b.setUint8(w++,j.charCodeAt(0))),Array.from(d,j=>b.setUint8(w++,j.charCodeAt(0))),Array.from(o,j=>b.setUint8(w++,j.charCodeAt(0))),Array.from(h,j=>b.setUint8(w++,j.charCodeAt(0))),Array.from(f,j=>b.setUint8(w++,j.charCodeAt(0)));var v=new Uint8Array(y.byteLength+s.byteLength);return v.set(new Uint8Array(y),0),v.set(new Uint8Array(s),y.byteLength),v.buffer}decode(t,r){if(this._isArrayBuffer(t)){let s=this._binaryDecode(t);return r(s)}if(typeof t=="string"){const s=JSON.parse(t),[a,i,o,d,u]=s;return r({join_ref:a,ref:i,topic:o,event:d,payload:u})}return r({})}_binaryDecode(t){const r=new DataView(t),s=r.getUint8(0),a=new TextDecoder;switch(s){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,a)}}_decodeUserBroadcast(t,r,s){const a=r.getUint8(1),i=r.getUint8(2),o=r.getUint8(3),d=r.getUint8(4);let u=this.HEADER_LENGTH+4;const h=s.decode(t.slice(u,u+a));u=u+a;const p=s.decode(t.slice(u,u+i));u=u+i;const f=s.decode(t.slice(u,u+o));u=u+o;const x=t.slice(u,t.byteLength),y=d===this.JSON_ENCODING?JSON.parse(s.decode(x)):x,b={type:this.BROADCAST_EVENT,event:p,payload:y};return o>0&&(b.meta=JSON.parse(f)),{join_ref:null,ref:null,topic:h,event:this.BROADCAST_EVENT,payload:b}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(t,r){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([s])=>r.includes(s)))}}class Ck{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Rt;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Rt||(Rt={}));const uN=(e,t,r={})=>{var s;const a=(s=r.skipTypes)!==null&&s!==void 0?s:[];return t?Object.keys(t).reduce((i,o)=>(i[o]=LP(o,e,t,a),i),{}):{}},LP=(e,t,r,s)=>{const a=t.find(d=>d.name===e),i=a==null?void 0:a.type,o=r[e];return i&&!s.includes(i)?Tk(i,o):V0(o)},Tk=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return UP(t,r)}switch(e){case Rt.bool:return $P(t);case Rt.float4:case Rt.float8:case Rt.int2:case Rt.int4:case Rt.int8:case Rt.numeric:case Rt.oid:return DP(t);case Rt.json:case Rt.jsonb:return FP(t);case Rt.timestamp:return qP(t);case Rt.abstime:case Rt.date:case Rt.daterange:case Rt.int4range:case Rt.int8range:case Rt.money:case Rt.reltime:case Rt.text:case Rt.time:case Rt.timestamptz:case Rt.timetz:case Rt.tsrange:case Rt.tstzrange:return V0(t);default:return V0(t)}},V0=e=>e,$P=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},DP=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},FP=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},UP=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,s=e[r];if(e[0]==="{"&&s==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(d=>Tk(t,d))}return e},qP=e=>typeof e=="string"?e.replace(" ","T"):e,Rk=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Og{constructor(t,r,s={},a=G0){this.channel=t,this.event=r,this.payload=s,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var s;return this._hasReceived(t)&&r((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(s=>s.status===t).forEach(s=>s.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var hN;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(hN||(hN={}));class Md{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},a=>{const{onJoin:i,onLeave:o,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Md.syncState(this.state,a,i,o),this.pendingDiffs.forEach(u=>{this.state=Md.syncDiff(this.state,u,i,o)}),this.pendingDiffs=[],d()}),this.channel._on(s.diff,{},a=>{const{onJoin:i,onLeave:o,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Md.syncDiff(this.state,a,i,o),d())}),this.onJoin((a,i,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:o})}),this.onLeave((a,i,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,s,a){const i=this.cloneDeep(t),o=this.transformState(r),d={},u={};return this.map(i,(h,p)=>{o[h]||(u[h]=p)}),this.map(o,(h,p)=>{const f=i[h];if(f){const x=p.map(v=>v.presence_ref),y=f.map(v=>v.presence_ref),b=p.filter(v=>y.indexOf(v.presence_ref)<0),w=f.filter(v=>x.indexOf(v.presence_ref)<0);b.length>0&&(d[h]=b),w.length>0&&(u[h]=w)}else d[h]=p}),this.syncDiff(i,{joins:d,leaves:u},s,a)}static syncDiff(t,r,s,a){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return s||(s=()=>{}),a||(a=()=>{}),this.map(i,(d,u)=>{var h;const p=(h=t[d])!==null&&h!==void 0?h:[];if(t[d]=this.cloneDeep(u),p.length>0){const f=t[d].map(y=>y.presence_ref),x=p.filter(y=>f.indexOf(y.presence_ref)<0);t[d].unshift(...x)}s(d,p,u)}),this.map(o,(d,u)=>{let h=t[d];if(!h)return;const p=u.map(f=>f.presence_ref);h=h.filter(f=>p.indexOf(f.presence_ref)<0),t[d]=h,a(d,h,u),h.length===0&&delete t[d]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(s=>r(s,t[s]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,s)=>{const a=t[s];return"metas"in a?r[s]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[s]=a,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var mN;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(mN||(mN={}));var Od;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Od||(Od={}));var sa;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(sa||(sa={}));class Pl{constructor(t,r={config:{}},s){var a,i;if(this.topic=t,this.params=r,this.socket=s,this.bindings={},this.state=pn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Og(this,xs.join,this.params,this.timeout),this.rejoinTimer=new Ck(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=pn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=pn.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=pn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=pn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=pn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(xs.reply,{},(o,d)=>{this._trigger(this._replyEventName(d),o)}),this.presence=new Md(this),this.broadcastEndpointURL=Rk(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var s,a,i;if(this.socket.isConnected()||this.socket.connect(),this.state==pn.closed){const{config:{broadcast:o,presence:d,private:u}}=this.params,h=(a=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(y=>y.filter))!==null&&a!==void 0?a:[],p=!!this.bindings[Od.PRESENCE]&&this.bindings[Od.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,f={},x={broadcast:o,presence:Object.assign(Object.assign({},d),{enabled:p}),postgres_changes:h,private:u};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(y=>t==null?void 0:t(sa.CHANNEL_ERROR,y)),this._onClose(()=>t==null?void 0:t(sa.CLOSED)),this.updateJoinPayload(Object.assign({config:x},f)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:y})=>{var b;if(this.socket._isManualToken()||this.socket.setAuth(),y===void 0){t==null||t(sa.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,v=(b=w==null?void 0:w.length)!==null&&b!==void 0?b:0,j=[];for(let C=0;C<v;C++){const S=w[C],{filter:{event:k,schema:R,table:E,filter:I}}=S,M=y&&y[C];if(M&&M.event===k&&Pl.isFilterValueEqual(M.schema,R)&&Pl.isFilterValueEqual(M.table,E)&&Pl.isFilterValueEqual(M.filter,I))j.push(Object.assign(Object.assign({},S),{id:M.id}));else{this.unsubscribe(),this.state=pn.errored,t==null||t(sa.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=j,t&&t(sa.SUBSCRIBED);return}}).receive("error",y=>{this.state=pn.errored,t==null||t(sa.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(y).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(sa.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,s){return this.state===pn.joined&&t===Od.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,r,s)}async httpSend(t,r,s={}){var a;if(r==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},d=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(a=s.timeout)!==null&&a!==void 0?a:this.timeout);if(d.status===202)return{success:!0};let u=d.statusText;try{const h=await d.json();u=h.error||h.message||u}catch{}return Promise.reject(new Error(u))}async send(t,r={}){var s,a;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=t,d={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(d.Authorization=`Bearer ${this.socket.accessTokenValue}`);const u={method:"POST",headers:d,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);return await((a=h.body)===null||a===void 0?void 0:a.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,d,u;const h=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((u=(d=(o=this.params)===null||o===void 0?void 0:o.config)===null||d===void 0?void 0:d.broadcast)===null||u===void 0)&&u.ack)&&i("ok"),h.receive("ok",()=>i("ok")),h.receive("error",()=>i("error")),h.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=pn.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(xs.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(a=>{s=new Og(this,xs.leave,{},t),s.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=pn.closed,this.bindings={}}async _fetchWithTimeout(t,r,s){const a=new AbortController,i=setTimeout(()=>a.abort(),s),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(i),o}_push(t,r,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Og(this,t,r,s);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>MP){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,s){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,s){var a,i;const o=t.toLocaleLowerCase(),{close:d,error:u,leave:h,join:p}=xs;if(s&&[d,u,h,p].indexOf(o)>=0&&s!==this._joinRef())return;let x=this._onMessage(o,r,s);if(r&&!x)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(y=>{var b,w,v;return((b=y.filter)===null||b===void 0?void 0:b.event)==="*"||((v=(w=y.filter)===null||w===void 0?void 0:w.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===o}).map(y=>y.callback(x,s)):(i=this.bindings[o])===null||i===void 0||i.filter(y=>{var b,w,v,j,C,S;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in y){const k=y.id,R=(b=y.filter)===null||b===void 0?void 0:b.event;return k&&((w=r.ids)===null||w===void 0?void 0:w.includes(k))&&(R==="*"||(R==null?void 0:R.toLocaleLowerCase())===((v=r.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{const k=(C=(j=y==null?void 0:y.filter)===null||j===void 0?void 0:j.event)===null||C===void 0?void 0:C.toLocaleLowerCase();return k==="*"||k===((S=r==null?void 0:r.event)===null||S===void 0?void 0:S.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===o}).map(y=>{if(typeof x=="object"&&"ids"in x){const b=x.data,{schema:w,table:v,commit_timestamp:j,type:C,errors:S}=b;x=Object.assign(Object.assign({},{schema:w,table:v,commit_timestamp:j,eventType:C,new:{},old:{},errors:S}),this._getPayloadRecords(b))}y.callback(x,s)})}_isClosed(){return this.state===pn.closed}_isJoined(){return this.state===pn.joined}_isJoining(){return this.state===pn.joining}_isLeaving(){return this.state===pn.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,s){const a=t.toLocaleLowerCase(),i={type:a,filter:r,callback:s};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(t,r){const s=t.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===s&&Pl.isEqual(a.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const s in t)if(t[s]!==r[s])return!1;return!0}static isFilterValueEqual(t,r){return(t??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(xs.close,{},t)}_onError(t){this._on(xs.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=pn.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=uN(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=uN(t.columns,t.old_record)),r}}const Lg=()=>{},em={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},BP=[1e3,2e3,5e3,1e4],HP=1e4,WP=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class zP{constructor(t,r){var s;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=G0,this.transport=null,this.heartbeatIntervalMs=em.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Lg,this.ref=0,this.reconnectTimer=null,this.vsn=dN,this.logger=Lg,this.conn=null,this.sendBuffer=[],this.serializer=new OP,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>a?(...i)=>a(...i):(...i)=>fetch(...i),!(!((s=r==null?void 0:r.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${K0.websocket}`,this.httpEndpoint=Rk(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=TP.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,s){this.logger(t,r,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Xa.connecting:return eo.Connecting;case Xa.open:return eo.Open;case Xa.closing:return eo.Closing;default:return eo.Closed}}isConnected(){return this.connectionState()===eo.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const s=`realtime:${t}`,a=this.getChannels().find(i=>i.topic===s);if(a)return a;{const i=new Pl(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:s,payload:a,ref:i}=t,o=()=>{this.encode(t,d=>{var u;(u=this.conn)===null||u===void 0||u.send(d)})};this.log("push",`${r} ${s} (${i})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(AP,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},em.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(s=>s.topic===t&&(s._isJoined()||s._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(h){this.log("error","error in heartbeat callback",h)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:a,payload:i,ref:o}=r,d=o?`(${o})`:"",u=i.status||"";this.log("receive",`${u} ${s} ${a} ${d}`.trim(),i),this.channels.filter(h=>h._isMember(s)).forEach(h=>h._trigger(a,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===Xa.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Xa.open||this.conn.readyState===Xa.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(xs.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const s=t.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${t}${s}${a}`}_workerObjectUrl(t){let r;if(t)r=t;else{const s=new Blob([WP],{type:"application/javascript"});r=URL.createObjectURL(s)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r,s=!1;if(t)r=t,s=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(a){this.log("error","Error fetching access token from callback",a),r=this.accessTokenValue}else r=this.accessTokenValue;s?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(a=>{const i={access_token:r,version:IP};r&&a.updateJoinPayload(i),a.joinedOnce&&a._isJoined()&&a._push(xs.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(s=>{try{s(r)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(s){this.log("error",`error triggering ${t} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new Ck(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},em.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,s,a,i,o,d,u,h,p,f,x,y;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(s=t==null?void 0:t.timeout)!==null&&s!==void 0?s:G0,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:em.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(d=t==null?void 0:t.heartbeatCallback)!==null&&d!==void 0?d:Lg,this.vsn=(u=t==null?void 0:t.vsn)!==null&&u!==void 0?u:dN,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(h=t==null?void 0:t.reconnectAfterMs)!==null&&h!==void 0?h:(b=>BP[b-1]||HP),this.vsn){case Ek:this.encode=(p=t==null?void 0:t.encode)!==null&&p!==void 0?p:((b,w)=>w(JSON.stringify(b))),this.decode=(f=t==null?void 0:t.decode)!==null&&f!==void 0?f:((b,w)=>w(JSON.parse(b)));break;case PP:this.encode=(x=t==null?void 0:t.encode)!==null&&x!==void 0?x:this.serializer.encode.bind(this.serializer),this.decode=(y=t==null?void 0:t.decode)!==null&&y!==void 0?y:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var Wd=class extends Error{constructor(e,t){var r;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((r=t.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function GP(e,t,r){const s=new URL(t,e);if(r)for(const[a,i]of Object.entries(r))i!==void 0&&s.searchParams.set(a,i);return s.toString()}async function KP(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function VP(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:s,query:a,body:i,headers:o}){const d=GP(e.baseUrl,s,a),u=await KP(e.auth),h=await t(d,{method:r,headers:{...i?{"Content-Type":"application/json"}:{},...u,...o},body:i?JSON.stringify(i):void 0}),p=await h.text(),f=(h.headers.get("content-type")||"").includes("application/json"),x=f&&p?JSON.parse(p):p;if(!h.ok){const y=f?x:void 0,b=y==null?void 0:y.error;throw new Wd((b==null?void 0:b.message)??`Request failed with status ${h.status}`,{status:h.status,icebergType:b==null?void 0:b.type,icebergCode:b==null?void 0:b.code,details:y})}return{status:h.status,headers:h.headers,data:x}}}}function tm(e){return e.join("")}var YP=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:tm(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(s=>({namespace:s}))}async createNamespace(e,t){const r={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${tm(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${tm(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${tm(e.namespace)}`}),!0}catch(t){if(t instanceof Wd&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(r){if(r instanceof Wd&&r.status===409)return;throw r}}};function xl(e){return e.join("")}var JP=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${xl(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${xl(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${xl(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${xl(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${xl(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${xl(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(r){if(r instanceof Wd&&r.status===404)return!1;throw r}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof Wd&&r.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},QP=class{constructor(e){var s;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=VP({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(s=e.accessDelegation)==null?void 0:s.join(","),this.namespaceOps=new YP(this.client,t),this.tableOps=new JP(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},Hf=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function zt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var XP=class extends Hf{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Y0=class extends Hf{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}};const cy=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),ZP=()=>Response,J0=e=>{if(Array.isArray(e))return e.map(r=>J0(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,s])=>{const a=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[a]=J0(s)}),t},eA=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},tA=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function zd(e){"@babel/helpers - typeof";return zd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zd(e)}function nA(e,t){if(zd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(zd(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rA(e){var t=nA(e,"string");return zd(t)=="symbol"?t:t+""}function sA(e,t,r){return(t=rA(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Le(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fN(Object(r),!0).forEach(function(s){sA(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fN(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}const $g=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},aA=async(e,t,r)=>{e instanceof await ZP()&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{const a=e.status||500,i=(s==null?void 0:s.statusCode)||a+"";t(new XP($g(s),a,i))}).catch(s=>{t(new Y0($g(s),s))}):t(new Y0($g(e),e))},iA=(e,t,r,s)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!s?a:(eA(s)?(a.headers=Le({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(s)):a.body=s,t!=null&&t.duplex&&(a.duplex=t.duplex),Le(Le({},a),r))};async function xu(e,t,r,s,a,i){return new Promise((o,d)=>{e(r,iA(t,s,a,i)).then(u=>{if(!u.ok)throw u;return s!=null&&s.noResolveJson?u:u.json()}).then(u=>o(u)).catch(u=>aA(u,d,s))})}async function Gd(e,t,r,s){return xu(e,"GET",t,r,s)}async function ms(e,t,r,s,a){return xu(e,"POST",t,s,a,r)}async function Q0(e,t,r,s,a){return xu(e,"PUT",t,s,a,r)}async function oA(e,t,r,s){return xu(e,"HEAD",t,Le(Le({},r),{},{noResolveJson:!0}),s)}async function dy(e,t,r,s,a){return xu(e,"DELETE",t,s,a,r)}var lA=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(zt(t))return{data:null,error:t};throw t}}};let Ik;Ik=Symbol.toStringTag;var cA=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[Ik]="BlobDownloadBuilder",this.promise=null}asStream(){return new lA(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(zt(t))return{data:null,error:t};throw t}}};const dA={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},pN={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var uA=class{constructor(e,t={},r,s){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=cy(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(e,t,r,s){var a=this;try{let i;const o=Le(Le({},pN),s);let d=Le(Le({},a.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const u=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),u&&i.append("metadata",a.encodeMetadata(u)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),u&&!i.has("metadata")&&i.append("metadata",a.encodeMetadata(u))):(i=r,d["cache-control"]=`max-age=${o.cacheControl}`,d["content-type"]=o.contentType,u&&(d["x-metadata"]=a.toBase64(a.encodeMetadata(u))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),s!=null&&s.headers&&(d=Le(Le({},d),s.headers));const h=a._removeEmptyFolders(t),p=a._getFinalPath(h),f=await(e=="PUT"?Q0:ms)(a.fetch,`${a.url}/object/${p}`,i,Le({headers:d},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:h,id:f.Id,fullPath:f.Key},error:null}}catch(i){if(a.shouldThrowOnError)throw i;if(zt(i))return{data:null,error:i};throw i}}async upload(e,t,r){return this.uploadOrUpdate("POST",e,t,r)}async uploadToSignedUrl(e,t,r,s){var a=this;const i=a._removeEmptyFolders(e),o=a._getFinalPath(i),d=new URL(a.url+`/object/upload/sign/${o}`);d.searchParams.set("token",t);try{let u;const h=Le({upsert:pN.upsert},s),p=Le(Le({},a.headers),{"x-upsert":String(h.upsert)});return typeof Blob<"u"&&r instanceof Blob?(u=new FormData,u.append("cacheControl",h.cacheControl),u.append("",r)):typeof FormData<"u"&&r instanceof FormData?(u=r,u.append("cacheControl",h.cacheControl)):(u=r,p["cache-control"]=`max-age=${h.cacheControl}`,p["content-type"]=h.contentType),{data:{path:i,fullPath:(await Q0(a.fetch,d.toString(),u,{headers:p})).Key},error:null}}catch(u){if(a.shouldThrowOnError)throw u;if(zt(u))return{data:null,error:u};throw u}}async createSignedUploadUrl(e,t){var r=this;try{let s=r._getFinalPath(e);const a=Le({},r.headers);t!=null&&t.upsert&&(a["x-upsert"]="true");const i=await ms(r.fetch,`${r.url}/object/upload/sign/${s}`,{},{headers:a}),o=new URL(r.url+i.url),d=o.searchParams.get("token");if(!d)throw new Hf("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:d},error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(zt(s))return{data:null,error:s};throw s}}async update(e,t,r){return this.uploadOrUpdate("PUT",e,t,r)}async move(e,t,r){var s=this;try{return{data:await ms(s.fetch,`${s.url}/object/move`,{bucketId:s.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:s.headers}),error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(zt(a))return{data:null,error:a};throw a}}async copy(e,t,r){var s=this;try{return{data:{path:(await ms(s.fetch,`${s.url}/object/copy`,{bucketId:s.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:s.headers})).Key},error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(zt(a))return{data:null,error:a};throw a}}async createSignedUrl(e,t,r){var s=this;try{let a=s._getFinalPath(e),i=await ms(s.fetch,`${s.url}/object/sign/${a}`,Le({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:s.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${s.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(zt(a))return{data:null,error:a};throw a}}async createSignedUrls(e,t,r){var s=this;try{const a=await ms(s.fetch,`${s.url}/object/sign/${s.bucketId}`,{expiresIn:t,paths:e},{headers:s.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:a.map(o=>Le(Le({},o),{},{signedUrl:o.signedURL?encodeURI(`${s.url}${o.signedURL}${i}`):null})),error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(zt(a))return{data:null,error:a};throw a}}download(e,t){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),a=s?`?${s}`:"",i=this._getFinalPath(e),o=()=>Gd(this.fetch,`${this.url}/${r}/${i}${a}`,{headers:this.headers,noResolveJson:!0});return new cA(o,this.shouldThrowOnError)}async info(e){var t=this;const r=t._getFinalPath(e);try{return{data:J0(await Gd(t.fetch,`${t.url}/object/info/${r}`,{headers:t.headers})),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(zt(s))return{data:null,error:s};throw s}}async exists(e){var t=this;const r=t._getFinalPath(e);try{return await oA(t.fetch,`${t.url}/object/${r}`,{headers:t.headers}),{data:!0,error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(zt(s)&&s instanceof Y0){const a=s.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:s}}throw s}}getPublicUrl(e,t){const r=this._getFinalPath(e),s=[],a=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";a!==""&&s.push(a);const i=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});o!==""&&s.push(o);let d=s.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${r}${d}`)}}}async remove(e){var t=this;try{return{data:await dy(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(zt(r))return{data:null,error:r};throw r}}async list(e,t,r){var s=this;try{const a=Le(Le(Le({},dA),t),{},{prefix:e||""});return{data:await ms(s.fetch,`${s.url}/object/list/${s.bucketId}`,a,{headers:s.headers},r),error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(zt(a))return{data:null,error:a};throw a}}async listV2(e,t){var r=this;try{const s=Le({},e);return{data:await ms(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,s,{headers:r.headers},t),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(zt(s))return{data:null,error:s};throw s}}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const Pk="2.89.0",Ak={"X-Client-Info":`storage-js/${Pk}`};var hA=class{constructor(e,t={},r,s){this.shouldThrowOnError=!1;const a=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=Le(Le({},Ak),t),this.fetch=cy(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(e){var t=this;try{const r=t.listBucketOptionsToQueryString(e);return{data:await Gd(t.fetch,`${t.url}/bucket${r}`,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(zt(r))return{data:null,error:r};throw r}}async getBucket(e){var t=this;try{return{data:await Gd(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(zt(r))return{data:null,error:r};throw r}}async createBucket(e,t={public:!1}){var r=this;try{return{data:await ms(r.fetch,`${r.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(zt(s))return{data:null,error:s};throw s}}async updateBucket(e,t){var r=this;try{return{data:await Q0(r.fetch,`${r.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(zt(s))return{data:null,error:s};throw s}}async emptyBucket(e){var t=this;try{return{data:await ms(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(zt(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await dy(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(zt(r))return{data:null,error:r};throw r}}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},mA=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Le(Le({},Ak),t),this.fetch=cy(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await ms(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(zt(r))return{data:null,error:r};throw r}}async listBuckets(e){var t=this;try{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const s=r.toString(),a=s?`${t.url}/bucket?${s}`:`${t.url}/bucket`;return{data:await Gd(t.fetch,a,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(zt(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await dy(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(zt(r))return{data:null,error:r};throw r}}from(e){var t=this;if(!tA(e))throw new Hf("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new QP({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),s=this.shouldThrowOnError;return new Proxy(r,{get(a,i){const o=a[i];return typeof o!="function"?o:async(...d)=>{try{return{data:await o.apply(a,d),error:null}}catch(u){if(s)throw u;return{data:null,error:u}}}}})}};const uy={"X-Client-Info":`storage-js/${Pk}`,"Content-Type":"application/json"};var Mk=class extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Tr(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}var Dg=class extends Mk{constructor(e,t,r){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},fA=class extends Mk{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}};const hy=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),pA=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},xN=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),xA=async(e,t,r)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const s=e.status||500,a=e;if(typeof a.json=="function")a.json().then(i=>{const o=(i==null?void 0:i.statusCode)||(i==null?void 0:i.code)||s+"";t(new Dg(xN(i),s,o))}).catch(()=>{const i=s+"";t(new Dg(a.statusText||`HTTP ${s} error`,s,i))});else{const i=s+"";t(new Dg(a.statusText||`HTTP ${s} error`,s,i))}}else t(new fA(xN(e),e))},gA=(e,t,r,s)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return s?(pA(s)?(a.headers=Le({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(s)):a.body=s,Le(Le({},a),r)):a};async function bA(e,t,r,s,a,i){return new Promise((o,d)=>{e(r,gA(t,s,a,i)).then(u=>{if(!u.ok)throw u;if(s!=null&&s.noResolveJson)return u;const h=u.headers.get("content-type");return!h||!h.includes("application/json")?{}:u.json()}).then(u=>o(u)).catch(u=>xA(u,d,s))})}async function Rr(e,t,r,s,a){return bA(e,"POST",t,s,a,r)}var yA=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Le(Le({},uy),t),this.fetch=hy(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(e){var t=this;try{return{data:await Rr(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Tr(r))return{data:null,error:r};throw r}}async getIndex(e,t){var r=this;try{return{data:await Rr(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Tr(s))return{data:null,error:s};throw s}}async listIndexes(e){var t=this;try{return{data:await Rr(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Tr(r))return{data:null,error:r};throw r}}async deleteIndex(e,t){var r=this;try{return{data:await Rr(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers})||{},error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Tr(s))return{data:null,error:s};throw s}}},vA=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Le(Le({},uy),t),this.fetch=hy(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(e){var t=this;try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await Rr(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Tr(r))return{data:null,error:r};throw r}}async getVectors(e){var t=this;try{return{data:await Rr(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Tr(r))return{data:null,error:r};throw r}}async listVectors(e){var t=this;try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:await Rr(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Tr(r))return{data:null,error:r};throw r}}async queryVectors(e){var t=this;try{return{data:await Rr(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Tr(r))return{data:null,error:r};throw r}}async deleteVectors(e){var t=this;try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await Rr(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Tr(r))return{data:null,error:r};throw r}}},wA=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Le(Le({},uy),t),this.fetch=hy(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await Rr(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Tr(r))return{data:null,error:r};throw r}}async getBucket(e){var t=this;try{return{data:await Rr(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Tr(r))return{data:null,error:r};throw r}}async listBuckets(e={}){var t=this;try{return{data:await Rr(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Tr(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await Rr(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Tr(r))return{data:null,error:r};throw r}}},_A=class extends wA{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new jA(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,r=this;return t().call(r,e)}async getBucket(e){var t=()=>super.getBucket,r=this;return t().call(r,e)}async listBuckets(e={}){var t=()=>super.listBuckets,r=this;return t().call(r,e)}async deleteBucket(e){var t=()=>super.deleteBucket,r=this;return t().call(r,e)}},jA=class extends yA{constructor(e,t,r,s){super(e,t,s),this.vectorBucketName=r}async createIndex(e){var t=()=>super.createIndex,r=this;return t().call(r,Le(Le({},e),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,r=this;return t().call(r,Le(Le({},e),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,r=this;return t().call(r,r.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,r=this;return t().call(r,r.vectorBucketName,e)}index(e){return new NA(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},NA=class extends vA{constructor(e,t,r,s,a){super(e,t,a),this.vectorBucketName=r,this.indexName=s}async putVectors(e){var t=()=>super.putVectors,r=this;return t().call(r,Le(Le({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(e){var t=()=>super.getVectors,r=this;return t().call(r,Le(Le({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,r=this;return t().call(r,Le(Le({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,r=this;return t().call(r,Le(Le({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,r=this;return t().call(r,Le(Le({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},SA=class extends hA{constructor(e,t={},r,s){super(e,t,r,s)}from(e){return new uA(this.url,this.headers,e,this.fetch)}get vectors(){return new _A(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new mA(this.url+"/iceberg",this.headers,this.fetch)}};const Ok="2.89.0",El=30*1e3,X0=3,Fg=X0*El,kA="http://localhost:9999",EA="supabase.auth.token",CA={"X-Client-Info":`gotrue-js/${Ok}`},Z0="X-Supabase-Api-Version",Lk={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},TA=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,RA=600*1e3;class Kd extends Error{constructor(t,r,s){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=s}}function Te(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class IA extends Kd{constructor(t,r,s){super(t,r,s),this.name="AuthApiError",this.status=r,this.code=s}}function PA(e){return Te(e)&&e.name==="AuthApiError"}class to extends Kd{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class ka extends Kd{constructor(t,r,s,a){super(t,s,a),this.name=r,this.status=s}}class Nr extends ka{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function AA(e){return Te(e)&&e.name==="AuthSessionMissingError"}class gl extends ka{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class nm extends ka{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class rm extends ka{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function MA(e){return Te(e)&&e.name==="AuthImplicitGrantRedirectError"}class gN extends ka{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class OA extends ka{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class eb extends ka{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Ug(e){return Te(e)&&e.name==="AuthRetryableFetchError"}class bN extends ka{constructor(t,r,s){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=s}}class tb extends ka{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const rf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),yN=` 	
\r=`.split(""),LA=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<yN.length;t+=1)e[yN[t].charCodeAt(0)]=-2;for(let t=0;t<rf.length;t+=1)e[rf[t].charCodeAt(0)]=t;return e})();function vN(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;r(rf[s]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;r(rf[s]),t.queuedBits-=6}}function $k(e,t,r){const s=LA[e];if(s>-1)for(t.queue=t.queue<<6|s,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function wN(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},s={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=o=>{FA(o,s,r)};for(let o=0;o<e.length;o+=1)$k(e.charCodeAt(o),a,i);return t.join("")}function $A(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function DA(e,t){for(let r=0;r<e.length;r+=1){let s=e.charCodeAt(r);if(s>55295&&s<=56319){const a=(s-55296)*1024&65535;s=(e.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}$A(s,t)}}function FA(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let s=1;s<6;s+=1)if((e>>7-s&1)===0){t.utf8seq=s;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function Ul(e){const t=[],r={queue:0,queuedBits:0},s=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)$k(e.charCodeAt(a),r,s);return new Uint8Array(t)}function UA(e){const t=[];return DA(e,r=>t.push(r)),new Uint8Array(t)}function io(e){const t=[],r={queue:0,queuedBits:0},s=a=>{t.push(a)};return e.forEach(a=>vN(a,r,s)),vN(null,r,s),t.join("")}function qA(e){return Math.round(Date.now()/1e3)+e}function BA(){return Symbol("auth-callback")}const Pn=()=>typeof window<"u"&&typeof document<"u",Yi={tested:!1,writable:!1},Dk=()=>{if(!Pn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Yi.tested)return Yi.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Yi.tested=!0,Yi.writable=!0}catch{Yi.tested=!0,Yi.writable=!1}return Yi.writable};function HA(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,i)=>{t[i]=a})}catch{}return r.searchParams.forEach((s,a)=>{t[a]=s}),t}const Fk=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),WA=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Cl=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Ji=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},In=async(e,t)=>{await e.removeItem(t)};class Wf{constructor(){this.promise=new Wf.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Wf.promiseConstructor=Promise;function qg(e){const t=e.split(".");if(t.length!==3)throw new tb("Invalid JWT structure");for(let s=0;s<t.length;s++)if(!TA.test(t[s]))throw new tb("JWT not in base64url format");return{header:JSON.parse(wN(t[0])),payload:JSON.parse(wN(t[1])),signature:Ul(t[2]),raw:{header:t[0],payload:t[1]}}}async function zA(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function GA(e,t){return new Promise((s,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){s(o);return}}catch(o){if(!t(i,o)){a(o);return}}})()})}function KA(e){return("0"+e.toString(16)).substr(-2)}function VA(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=r.length;let a="";for(let i=0;i<56;i++)a+=r.charAt(Math.floor(Math.random()*s));return a}return crypto.getRandomValues(t),Array.from(t,KA).join("")}async function YA(e){const r=new TextEncoder().encode(e),s=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(s);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function JA(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await YA(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function bl(e,t,r=!1){const s=VA();let a=s;r&&(a+="/PASSWORD_RECOVERY"),await Cl(e,`${t}-code-verifier`,a);const i=await JA(s);return[i,s===i?"plain":"s256"]}const QA=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function XA(e){const t=e.headers.get(Z0);if(!t||!t.match(QA))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function ZA(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function eM(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const tM=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function yl(e){if(!tM.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Bg(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function nM(e,t){return new Proxy(e,{get:(r,s,a)=>{if(s==="__isInsecureUserWarningProxy")return!0;if(typeof s=="symbol"){const i=s.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,s,a)}return!t.value&&typeof s=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,s,a)}})}function _N(e){return JSON.parse(JSON.stringify(e))}const Xi=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),rM=[502,503,504];async function jN(e){var t;if(!WA(e))throw new eb(Xi(e),0);if(rM.includes(e.status))throw new eb(Xi(e),e.status);let r;try{r=await e.json()}catch(i){throw new to(Xi(i),i)}let s;const a=XA(e);if(a&&a.getTime()>=Lk["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?s=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(s=r.error_code),s){if(s==="weak_password")throw new bN(Xi(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(s==="session_not_found")throw new Nr}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new bN(Xi(r),e.status,r.weak_password.reasons);throw new IA(Xi(r),e.status||500,s)}const sM=(e,t,r,s)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(s),Object.assign(Object.assign({},a),r))};async function Oe(e,t,r,s){var a;const i=Object.assign({},s==null?void 0:s.headers);i[Z0]||(i[Z0]=Lk["2024-01-01"].name),s!=null&&s.jwt&&(i.Authorization=`Bearer ${s.jwt}`);const o=(a=s==null?void 0:s.query)!==null&&a!==void 0?a:{};s!=null&&s.redirectTo&&(o.redirect_to=s.redirectTo);const d=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",u=await aM(e,t,r+d,{headers:i,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(u):{data:Object.assign({},u),error:null}}async function aM(e,t,r,s,a,i){const o=sM(t,s,a,i);let d;try{d=await e(r,Object.assign({},o))}catch(u){throw console.error(u),new eb(Xi(u),0)}if(d.ok||await jN(d),s!=null&&s.noResolveJson)return d;try{return await d.json()}catch(u){await jN(u)}}function us(e){var t;let r=null;lM(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=qA(e.expires_in)));const s=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:s},error:null}}function NN(e){const t=us(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,s)=>r&&typeof s=="string",!0)&&(t.data.weak_password=e.weak_password),t}function ni(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function iM(e){return{data:e,error:null}}function oM(e){const{action_link:t,email_otp:r,hashed_token:s,redirect_to:a,verification_type:i}=e,o=Bf(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:t,email_otp:r,hashed_token:s,redirect_to:a,verification_type:i},u=Object.assign({},o);return{data:{properties:d,user:u},error:null}}function SN(e){return e}function lM(e){return e.access_token&&e.refresh_token&&e.expires_in}const Hg=["global","local","others"];class cM{constructor({url:t="",headers:r={},fetch:s}){this.url=t,this.headers=r,this.fetch=Fk(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=Hg[0]){if(Hg.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Hg.join(", ")}`);try{return await Oe(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(s){if(Te(s))return{data:null,error:s};throw s}}async inviteUserByEmail(t,r={}){try{return await Oe(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:ni})}catch(s){if(Te(s))return{data:{user:null},error:s};throw s}}async generateLink(t){try{const{options:r}=t,s=Bf(t,["options"]),a=Object.assign(Object.assign({},s),r);return"newEmail"in s&&(a.new_email=s==null?void 0:s.newEmail,delete a.newEmail),await Oe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:oM,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(Te(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await Oe(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:ni})}catch(r){if(Te(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,s,a,i,o,d,u;try{const h={nextPage:null,lastPage:0,total:0},p=await Oe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:SN});if(p.error)throw p.error;const f=await p.json(),x=(o=p.headers.get("x-total-count"))!==null&&o!==void 0?o:0,y=(u=(d=p.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&u!==void 0?u:[];return y.length>0&&(y.forEach(b=>{const w=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(b.split(";")[1].split("=")[1]);h[`${v}Page`]=w}),h.total=parseInt(x)),{data:Object.assign(Object.assign({},f),h),error:null}}catch(h){if(Te(h))return{data:{users:[]},error:h};throw h}}async getUserById(t){yl(t);try{return await Oe(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:ni})}catch(r){if(Te(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){yl(t);try{return await Oe(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:ni})}catch(s){if(Te(s))return{data:{user:null},error:s};throw s}}async deleteUser(t,r=!1){yl(t);try{return await Oe(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:ni})}catch(s){if(Te(s))return{data:{user:null},error:s};throw s}}async _listFactors(t){yl(t.userId);try{const{data:r,error:s}=await Oe(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:s}}catch(r){if(Te(r))return{data:null,error:r};throw r}}async _deleteFactor(t){yl(t.userId),yl(t.id);try{return{data:await Oe(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(Te(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,s,a,i,o,d,u;try{const h={nextPage:null,lastPage:0,total:0},p=await Oe(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:SN});if(p.error)throw p.error;const f=await p.json(),x=(o=p.headers.get("x-total-count"))!==null&&o!==void 0?o:0,y=(u=(d=p.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&u!==void 0?u:[];return y.length>0&&(y.forEach(b=>{const w=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(b.split(";")[1].split("=")[1]);h[`${v}Page`]=w}),h.total=parseInt(x)),{data:Object.assign(Object.assign({},f),h),error:null}}catch(h){if(Te(h))return{data:{clients:[]},error:h};throw h}}async _createOAuthClient(t){try{return await Oe(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Te(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await Oe(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Te(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await Oe(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(Te(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(t){try{return await Oe(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Te(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await Oe(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Te(r))return{data:null,error:r};throw r}}}function kN(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const vl={debug:!!(globalThis&&Dk()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Uk extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class dM extends Uk{}async function uM(e,t,r){vl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const s=new globalThis.AbortController;return t>0&&setTimeout(()=>{s.abort(),vl.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async a=>{if(a){vl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await r()}finally{vl.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw vl.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new dM(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(vl.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function hM(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function qk(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function mM(e){return parseInt(e,16)}function fM(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,s=>s.toString(16).padStart(2,"0")).join("")}function pM(e){var t;const{chainId:r,domain:s,expirationTime:a,issuedAt:i=new Date,nonce:o,notBefore:d,requestId:u,resources:h,scheme:p,uri:f,version:x}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(x!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${x}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const y=qk(e.address),b=p?`${p}://${s}`:s,w=e.statement?`${e.statement}
`:"",v=`${b} wants you to sign in with your Ethereum account:
${y}

${w}`;let j=`URI: ${f}
Version: ${x}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(a&&(j+=`
Expiration Time: ${a.toISOString()}`),d&&(j+=`
Not Before: ${d.toISOString()}`),u&&(j+=`
Request ID: ${u}`),h){let C=`
Resources:`;for(const S of h){if(!S||typeof S!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${S}`);C+=`
- ${S}`}j+=C}return`${v}
${j}`}class cn extends Error{constructor({message:t,code:r,cause:s,name:a}){var i;super(t,{cause:s}),this.__isWebAuthnError=!0,this.name=(i=a??(s instanceof Error?s.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class sf extends cn{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function xM({error:e,options:t}){var r,s,a;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new cn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new cn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new cn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((a=i.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new cn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new cn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new cn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(d=>d.type==="public-key").length===0?new cn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new cn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(Bk(o)){if(i.rp.id!==o)return new cn({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new cn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new cn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new cn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new cn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function gM({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new cn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new cn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const s=window.location.hostname;if(Bk(s)){if(r.rpId!==s)return new cn({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new cn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new cn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new cn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class bM{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const yM=new bM;function vM(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:s}=e,a=Bf(e,["challenge","user","excludeCredentials"]),i=Ul(t).buffer,o=Object.assign(Object.assign({},r),{id:Ul(r.id).buffer}),d=Object.assign(Object.assign({},a),{challenge:i,user:o});if(s&&s.length>0){d.excludeCredentials=new Array(s.length);for(let u=0;u<s.length;u++){const h=s[u];d.excludeCredentials[u]=Object.assign(Object.assign({},h),{id:Ul(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return d}function wM(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,s=Bf(e,["challenge","allowCredentials"]),a=Ul(t).buffer,i=Object.assign(Object.assign({},s),{challenge:a});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const d=r[o];i.allowCredentials[o]=Object.assign(Object.assign({},d),{id:Ul(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return i}function _M(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:io(new Uint8Array(e.response.attestationObject)),clientDataJSON:io(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function jM(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,s=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:io(new Uint8Array(a.authenticatorData)),clientDataJSON:io(new Uint8Array(a.clientDataJSON)),signature:io(new Uint8Array(a.signature)),userHandle:a.userHandle?io(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Bk(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function EN(){var e,t;return!!(Pn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function NM(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new sf("Browser returned unexpected credential type",t)}:{data:null,error:new sf("Empty credential response",t)}}catch(t){return{data:null,error:xM({error:t,options:e})}}}async function SM(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new sf("Browser returned unexpected credential type",t)}:{data:null,error:new sf("Empty credential response",t)}}catch(t){return{data:null,error:gM({error:t,options:e})}}}const kM={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},EM={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function af(...e){const t=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),r=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),s={};for(const a of e)if(a)for(const i in a){const o=a[i];if(o!==void 0)if(Array.isArray(o))s[i]=o;else if(r(o))s[i]=o;else if(t(o)){const d=s[i];t(d)?s[i]=af(d,o):s[i]=af(o)}else s[i]=o}return s}function CM(e,t){return af(kM,e,t||{})}function TM(e,t){return af(EM,e,t||{})}class RM{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:s,signal:a},i){try{const{data:o,error:d}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!o)return{data:null,error:d};const u=a??yM.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:h}=o.webauthn.credential_options.publicKey;h.name||(h.name=`${h.id}:${s}`),h.displayName||(h.displayName=h.name)}switch(o.webauthn.type){case"create":{const h=CM(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:p,error:f}=await NM({publicKey:h,signal:u});return p?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:p}},error:null}:{data:null,error:f}}case"request":{const h=TM(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:p,error:f}=await SM(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:h,signal:u}));return p?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:p}},error:null}:{data:null,error:f}}}}catch(o){return Te(o)?{data:null,error:o}:{data:null,error:new to("Unexpected error in challenge",o)}}}async _verify({challengeId:t,factorId:r,webauthn:s}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:s})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},i){if(!r)return{data:null,error:new Kd("rpId is required for WebAuthn authentication")};try{if(!EN())return{data:null,error:new to("Browser does not support WebAuthn",null)};const{data:o,error:d}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:s},signal:a},{request:i});if(!o)return{data:null,error:d};const{webauthn:u}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:u.type,rpId:r,rpOrigins:s,credential_response:u.credential_response}})}catch(o){return Te(o)?{data:null,error:o}:{data:null,error:new to("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},i){if(!r)return{data:null,error:new Kd("rpId is required for WebAuthn registration")};try{if(!EN())return{data:null,error:new to("Browser does not support WebAuthn",null)};const{data:o,error:d}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(p=>{var f;return(f=p.data)===null||f===void 0?void 0:f.all.find(x=>x.factor_type==="webauthn"&&x.friendly_name===t&&x.status!=="unverified")}).then(p=>p?this.client.mfa.unenroll({factorId:p==null?void 0:p.id}):void 0),{data:null,error:d};const{data:u,error:h}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:s},signal:a},{create:i});return u?this._verify({factorId:o.id,challengeId:u.challengeId,webauthn:{rpId:r,rpOrigins:s,type:u.webauthn.type,credential_response:u.webauthn.credential_response}}):{data:null,error:h}}catch(o){return Te(o)?{data:null,error:o}:{data:null,error:new to("Unexpected error in register",o)}}}}hM();const IM={url:kA,storageKey:EA,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:CA,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function CN(e,t,r){return await r()}const wl={};class Vd{get jwks(){var t,r;return(r=(t=wl[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){wl[this.storageKey]=Object.assign(Object.assign({},wl[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=wl[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){wl[this.storageKey]=Object.assign(Object.assign({},wl[this.storageKey]),{cachedAt:t})}constructor(t){var r,s,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},IM),t);if(this.storageKey=i.storageKey,this.instanceID=(r=Vd.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Vd.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&Pn()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new cM({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=Fk(i.fetch),this.lock=i.lock||CN,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:this.persistSession&&Pn()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=uM:this.lock=CN,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new RM(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:Dk()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=kN(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=kN(this.memoryStorage)),Pn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Ok}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},s="none";if(Pn()&&(r=HA(window.location.href),this._isImplicitGrantCallback(r)?s="implicit":await this._isPKCECallback(r)&&(s="pkce")),Pn()&&this.detectSessionInUrl&&s!=="none"){const{data:a,error:i}=await this._getSessionFromURL(r,s);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),MA(i)){const u=(t=i.details)===null||t===void 0?void 0:t.code;if(u==="identity_already_exists"||u==="identity_not_found"||u==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:d}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",d),await this._saveSession(o),setTimeout(async()=>{d==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Te(r)?this._returnResult({error:r}):this._returnResult({error:new to("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,s,a;try{const i=await Oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:us}),{data:o,error:d}=i;if(d||!o)return this._returnResult({data:{user:null,session:null},error:d});const u=o.session,h=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",u)),this._returnResult({data:{user:h,session:u},error:null})}catch(i){if(Te(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(t){var r,s,a;try{let i;if("email"in t){const{email:p,password:f,options:x}=t;let y=null,b=null;this.flowType==="pkce"&&([y,b]=await bl(this.storage,this.storageKey)),i=await Oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:x==null?void 0:x.emailRedirectTo,body:{email:p,password:f,data:(r=x==null?void 0:x.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken},code_challenge:y,code_challenge_method:b},xform:us})}else if("phone"in t){const{phone:p,password:f,options:x}=t;i=await Oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:f,data:(s=x==null?void 0:x.data)!==null&&s!==void 0?s:{},channel:(a=x==null?void 0:x.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken}},xform:us})}else throw new nm("You must provide either an email or phone number and a password");const{data:o,error:d}=i;if(d||!o)return await In(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:d});const u=o.session,h=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",u)),this._returnResult({data:{user:h,session:u},error:null})}catch(i){if(await In(this.storage,`${this.storageKey}-code-verifier`),Te(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:d}=t;r=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:NN})}else if("phone"in t){const{phone:i,password:o,options:d}=t;r=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:NN})}else throw new nm("You must provide either an email or phone number and a password");const{data:s,error:a}=r;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!s||!s.session||!s.user){const i=new gl;return this._returnResult({data:{user:null,session:null},error:i})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:a})}catch(r){if(Te(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,s,a,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(s=t.options)===null||s===void 0?void 0:s.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,s,a,i,o,d,u,h,p,f,x;let y,b;if("message"in t)y=t.message,b=t.signature;else{const{chain:w,wallet:v,statement:j,options:C}=t;let S;if(Pn())if(typeof v=="object")S=v;else{const O=window;if("ethereum"in O&&typeof O.ethereum=="object"&&"request"in O.ethereum&&typeof O.ethereum.request=="function")S=O.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(C!=null&&C.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=v}const k=new URL((r=C==null?void 0:C.url)!==null&&r!==void 0?r:window.location.href),R=await S.request({method:"eth_requestAccounts"}).then(O=>O).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!R||R.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const E=qk(R[0]);let I=(s=C==null?void 0:C.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!I){const O=await S.request({method:"eth_chainId"});I=mM(O)}const M={domain:k.host,address:E,statement:j,uri:k.href,version:"1",chainId:I,nonce:(a=C==null?void 0:C.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(o=(i=C==null?void 0:C.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(d=C==null?void 0:C.signInWithEthereum)===null||d===void 0?void 0:d.expirationTime,notBefore:(u=C==null?void 0:C.signInWithEthereum)===null||u===void 0?void 0:u.notBefore,requestId:(h=C==null?void 0:C.signInWithEthereum)===null||h===void 0?void 0:h.requestId,resources:(p=C==null?void 0:C.signInWithEthereum)===null||p===void 0?void 0:p.resources};y=pM(M),b=await S.request({method:"personal_sign",params:[fM(y),E]})}try{const{data:w,error:v}=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:y,signature:b},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(x=t.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:us});if(v)throw v;if(!w||!w.session||!w.user){const j=new gl;return this._returnResult({data:{user:null,session:null},error:j})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:v})}catch(w){if(Te(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async signInWithSolana(t){var r,s,a,i,o,d,u,h,p,f,x,y;let b,w;if("message"in t)b=t.message,w=t.signature;else{const{chain:v,wallet:j,statement:C,options:S}=t;let k;if(Pn())if(typeof j=="object")k=j;else{const E=window;if("solana"in E&&typeof E.solana=="object"&&("signIn"in E.solana&&typeof E.solana.signIn=="function"||"signMessage"in E.solana&&typeof E.solana.signMessage=="function"))k=E.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof j!="object"||!(S!=null&&S.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=j}const R=new URL((r=S==null?void 0:S.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in k&&k.signIn){const E=await k.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},S==null?void 0:S.signInWithSolana),{version:"1",domain:R.host,uri:R.href}),C?{statement:C}:null));let I;if(Array.isArray(E)&&E[0]&&typeof E[0]=="object")I=E[0];else if(E&&typeof E=="object"&&"signedMessage"in E&&"signature"in E)I=E;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in I&&"signature"in I&&(typeof I.signedMessage=="string"||I.signedMessage instanceof Uint8Array)&&I.signature instanceof Uint8Array)b=typeof I.signedMessage=="string"?I.signedMessage:new TextDecoder().decode(I.signedMessage),w=I.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in k)||typeof k.signMessage!="function"||!("publicKey"in k)||typeof k!="object"||!k.publicKey||!("toBase58"in k.publicKey)||typeof k.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");b=[`${R.host} wants you to sign in with your Solana account:`,k.publicKey.toBase58(),...C?["",C,""]:[""],"Version: 1",`URI: ${R.href}`,`Issued At: ${(a=(s=S==null?void 0:S.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=S==null?void 0:S.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${S.signInWithSolana.notBefore}`]:[],...!((o=S==null?void 0:S.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${S.signInWithSolana.expirationTime}`]:[],...!((d=S==null?void 0:S.signInWithSolana)===null||d===void 0)&&d.chainId?[`Chain ID: ${S.signInWithSolana.chainId}`]:[],...!((u=S==null?void 0:S.signInWithSolana)===null||u===void 0)&&u.nonce?[`Nonce: ${S.signInWithSolana.nonce}`]:[],...!((h=S==null?void 0:S.signInWithSolana)===null||h===void 0)&&h.requestId?[`Request ID: ${S.signInWithSolana.requestId}`]:[],...!((f=(p=S==null?void 0:S.signInWithSolana)===null||p===void 0?void 0:p.resources)===null||f===void 0)&&f.length?["Resources",...S.signInWithSolana.resources.map(I=>`- ${I}`)]:[]].join(`
`);const E=await k.signMessage(new TextEncoder().encode(b),"utf8");if(!E||!(E instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=E}}try{const{data:v,error:j}=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:b,signature:io(w)},!((x=t.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(y=t.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:us});if(j)throw j;if(!v||!v.session||!v.user){const C=new gl;return this._returnResult({data:{user:null,session:null},error:C})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:j})}catch(v){if(Te(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async _exchangeCodeForSession(t){const r=await Ji(this.storage,`${this.storageKey}-code-verifier`),[s,a]=(r??"").split("/");try{if(!s&&this.flowType==="pkce")throw new OA;const{data:i,error:o}=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:s},xform:us});if(await In(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const d=new gl;return this._returnResult({data:{user:null,session:null,redirectType:null},error:d})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:o})}catch(i){if(await In(this.storage,`${this.storageKey}-code-verifier`),Te(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(t){try{const{options:r,provider:s,token:a,access_token:i,nonce:o}=t,d=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:a,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:us}),{data:u,error:h}=d;if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!u||!u.session||!u.user){const p=new gl;return this._returnResult({data:{user:null,session:null},error:p})}return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),this._returnResult({data:u,error:h})}catch(r){if(Te(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,s,a,i,o;try{if("email"in t){const{email:d,options:u}=t;let h=null,p=null;this.flowType==="pkce"&&([h,p]=await bl(this.storage,this.storageKey));const{error:f}=await Oe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(r=u==null?void 0:u.data)!==null&&r!==void 0?r:{},create_user:(s=u==null?void 0:u.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},code_challenge:h,code_challenge_method:p},redirectTo:u==null?void 0:u.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}if("phone"in t){const{phone:d,options:u}=t,{data:h,error:p}=await Oe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(a=u==null?void 0:u.data)!==null&&a!==void 0?a:{},create_user:(i=u==null?void 0:u.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},channel:(o=u==null?void 0:u.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:p})}throw new nm("You must provide either an email or phone number.")}catch(d){if(await In(this.storage,`${this.storageKey}-code-verifier`),Te(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async verifyOtp(t){var r,s;try{let a,i;"options"in t&&(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(s=t.options)===null||s===void 0?void 0:s.captchaToken);const{data:o,error:d}=await Oe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:us});if(d)throw d;if(!o)throw new Error("An error occurred on token verification.");const u=o.session,h=o.user;return u!=null&&u.access_token&&(await this._saveSession(u),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",u)),this._returnResult({data:{user:h,session:u},error:null})}catch(a){if(Te(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(t){var r,s,a,i,o;try{let d=null,u=null;this.flowType==="pkce"&&([d,u]=await bl(this.storage,this.storageKey));const h=await Oe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&s!==void 0?s:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:d,code_challenge_method:u}),headers:this.headers,xform:iM});return!((i=h.data)===null||i===void 0)&&i.url&&Pn()&&!(!((o=t.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(h.data.url),this._returnResult(h)}catch(d){if(await In(this.storage,`${this.storageKey}-code-verifier`),Te(d))return this._returnResult({data:null,error:d});throw d}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:s}=t;if(s)throw s;if(!r)throw new Nr;const{error:a}=await Oe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(t){if(Te(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:s,type:a,options:i}=t,{error:o}=await Oe(this.fetch,"POST",r,{headers:this.headers,body:{email:s,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in t){const{phone:s,type:a,options:i}=t,{data:o,error:d}=await Oe(this.fetch,"POST",r,{headers:this.headers,body:{phone:s,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:d})}throw new nm("You must provide either an email or phone number and a type")}catch(r){if(Te(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await s,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=r();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Ji(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const s=t.expires_at?t.expires_at*1e3-Date.now()<Fg:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",t.expires_at),!s){if(this.userStorage){const o=await Ji(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=Bg()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};t.user=nM(t.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const r=await this._acquireLock(-1,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(t){try{return t?await Oe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:ni}):await this._useSession(async r=>{var s,a,i;const{data:o,error:d}=r;if(d)throw d;return!(!((s=o.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Nr}:await Oe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:ni})})}catch(r){if(Te(r))return AA(r)&&(await this._removeSession(),await In(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async s=>{const{data:a,error:i}=s;if(i)throw i;if(!a.session)throw new Nr;const o=a.session;let d=null,u=null;this.flowType==="pkce"&&t.email!=null&&([d,u]=await bl(this.storage,this.storageKey));const{data:h,error:p}=await Oe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:d,code_challenge_method:u}),jwt:o.access_token,xform:ni});if(p)throw p;return o.user=h.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(s){if(await In(this.storage,`${this.storageKey}-code-verifier`),Te(s))return this._returnResult({data:{user:null},error:s});throw s}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Nr;const r=Date.now()/1e3;let s=r,a=!0,i=null;const{payload:o}=qg(t.access_token);if(o.exp&&(s=o.exp,a=s<=r),a){const{data:d,error:u}=await this._callRefreshToken(t.refresh_token);if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!d)return{data:{user:null,session:null},error:null};i=d}else{const{data:d,error:u}=await this._getUser(t.access_token);if(u)throw u;i={access_token:t.access_token,refresh_token:t.refresh_token,user:d.user,token_type:"bearer",expires_in:s-r,expires_at:s},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if(Te(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var s;if(!t){const{data:o,error:d}=r;if(d)throw d;t=(s=o.session)!==null&&s!==void 0?s:void 0}if(!(t!=null&&t.refresh_token))throw new Nr;const{data:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(Te(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!Pn())throw new rm("No browser detected.");if(t.error||t.error_description||t.error_code)throw new rm(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new gN("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new rm("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new gN("No code detected.");const{data:C,error:S}=await this._exchangeCodeForSession(t.code);if(S)throw S;const k=new URL(window.location.href);return k.searchParams.delete("code"),window.history.replaceState(window.history.state,"",k.toString()),{data:{session:C.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:a,access_token:i,refresh_token:o,expires_in:d,expires_at:u,token_type:h}=t;if(!i||!d||!o||!h)throw new rm("No session defined in URL");const p=Math.round(Date.now()/1e3),f=parseInt(d);let x=p+f;u&&(x=parseInt(u));const y=x-p;y*1e3<=El&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${f}s`);const b=x-f;p-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,x,p):p-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,x,p);const{data:w,error:v}=await this._getUser(i);if(v)throw v;const j={provider_token:s,provider_refresh_token:a,access_token:i,expires_in:f,expires_at:x,refresh_token:o,token_type:h,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:j,redirectType:t.type},error:null})}catch(s){if(Te(s))return this._returnResult({data:{session:null,redirectType:null},error:s});throw s}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Ji(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var s;const{data:a,error:i}=r;if(i)return this._returnResult({error:i});const o=(s=a.session)===null||s===void 0?void 0:s.access_token;if(o){const{error:d}=await this.admin.signOut(o,t);if(d&&!(PA(d)&&(d.status===404||d.status===401||d.status===403)))return this._returnResult({error:d})}return t!=="others"&&(await this._removeSession(),await In(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=BA(),s={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:s}}}async _emitInitialSession(t){return await this._useSession(async r=>{var s,a;try{const{data:{session:i},error:o}=r;if(o)throw o;await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let s=null,a=null;this.flowType==="pkce"&&([s,a]=await bl(this.storage,this.storageKey,!0));try{return await Oe(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:s,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(await In(this.storage,`${this.storageKey}-code-verifier`),Te(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var t;try{const{data:r,error:s}=await this.getUser();if(s)throw s;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(Te(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:s,error:a}=await this._useSession(async i=>{var o,d,u,h,p;const{data:f,error:x}=i;if(x)throw x;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(d=t.options)===null||d===void 0?void 0:d.scopes,queryParams:(u=t.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:!0});return await Oe(this.fetch,"GET",y,{headers:this.headers,jwt:(p=(h=f.session)===null||h===void 0?void 0:h.access_token)!==null&&p!==void 0?p:void 0})});if(a)throw a;return Pn()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),this._returnResult({data:{provider:t.provider,url:s==null?void 0:s.url},error:null})}catch(s){if(Te(s))return this._returnResult({data:{provider:t.provider,url:null},error:s});throw s}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var s;try{const{error:a,data:{session:i}}=r;if(a)throw a;const{options:o,provider:d,token:u,access_token:h,nonce:p}=t,f=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=i==null?void 0:i.access_token)!==null&&s!==void 0?s:void 0,body:{provider:d,id_token:u,access_token:h,nonce:p,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:us}),{data:x,error:y}=f;return y?this._returnResult({data:{user:null,session:null},error:y}):!x||!x.session||!x.user?this._returnResult({data:{user:null,session:null},error:new gl}):(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("USER_UPDATED",x.session)),this._returnResult({data:x,error:y}))}catch(a){if(await In(this.storage,`${this.storageKey}-code-verifier`),Te(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var s,a;const{data:i,error:o}=r;if(o)throw o;return await Oe(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(Te(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const s=Date.now();return await GA(async a=>(a>0&&await zA(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await Oe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:us})),(a,i)=>{const o=200*Math.pow(2,a);return i&&Ug(i)&&Date.now()+o-s<El})}catch(s){if(this._debug(r,"error",s),Te(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const s=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",s),Pn()&&!r.skipBrowserRedirect&&window.location.assign(s),{data:{provider:t,url:s},error:null}}async _recoverAndRefresh(){var t,r;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const a=await Ji(this.storage,this.storageKey);if(a&&this.userStorage){let o=await Ji(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:a.user},await Cl(this.userStorage,this.storageKey+"-user",o)),a.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:Bg()}else if(a&&!a.user&&!a.user){const o=await Ji(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(a.user=o.user,await In(this.storage,this.storageKey+"-user"),await Cl(this.storage,this.storageKey,a)):a.user=Bg()}if(this._debug(s,"session from storage",a),!this._isValidSession(a)){this._debug(s,"session is not valid"),a!==null&&await this._removeSession();return}const i=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Fg;if(this._debug(s,`session has${i?"":" not"} expired with margin of ${Fg}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:o}=await this._callRefreshToken(a.refresh_token);o&&(console.error(o),Ug(o)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:d}=await this._getUser(a.access_token);!d&&(o!=null&&o.user)?(a.user=o.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(s,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(s,"error",a),console.error(a);return}finally{this._debug(s,"end")}}async _callRefreshToken(t){var r,s;if(!t)throw new Nr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Wf;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Nr;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const d={data:i.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(i){if(this._debug(a,"error",i),Te(i)){const o={data:null,error:i};return Ug(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,r,s=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",r,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(t,r)}catch(u){i.push(u)}});if(await Promise.all(o),i.length>0){for(let d=0;d<i.length;d+=1)console.error(i[d]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await In(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),s=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&r.user&&await Cl(this.userStorage,this.storageKey+"-user",{user:r.user});const a=Object.assign({},r);delete a.user;const i=_N(a);await Cl(this.storage,this.storageKey,i)}else{const a=_N(r);await Cl(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await In(this.storage,this.storageKey),await In(this.storage,this.storageKey+"-code-verifier"),await In(this.storage,this.storageKey+"-user"),this.userStorage&&await In(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Pn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),El);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:s}}=r;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((s.expires_at*1e3-t)/El);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${El}ms, refresh threshold is ${X0} ticks`),a<=X0&&await this._callRefreshToken(s.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Uk)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Pn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,s){const a=[`provider=${encodeURIComponent(r)}`];if(s!=null&&s.redirectTo&&a.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&a.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[i,o]=await bl(this.storage,this.storageKey),d=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(d.toString())}if(s!=null&&s.queryParams){const i=new URLSearchParams(s.queryParams);a.push(i.toString())}return s!=null&&s.skipBrowserRedirect&&a.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var s;const{data:a,error:i}=r;return i?this._returnResult({data:null,error:i}):await Oe(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(Te(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var s,a;const{data:i,error:o}=r;if(o)return this._returnResult({data:null,error:o});const d=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:u,error:h}=await Oe(this.fetch,"POST",`${this.url}/factors`,{body:d,headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token});return h?this._returnResult({data:null,error:h}):(t.factorType==="totp"&&u.type==="totp"&&(!((a=u==null?void 0:u.totp)===null||a===void 0)&&a.qr_code)&&(u.totp.qr_code=`data:image/svg+xml;utf-8,${u.totp.qr_code}`),this._returnResult({data:u,error:null}))})}catch(r){if(Te(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:a,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?_M(t.webauthn.credential_response):jM(t.webauthn.credential_response)})}:{code:t.code}),{data:d,error:u}=await Oe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});return u?this._returnResult({data:null,error:u}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),this._returnResult({data:d,error:u}))})}catch(r){if(Te(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:a,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=await Oe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});if(o.error)return o;const{data:d}=o;if(d.type!=="webauthn")return{data:d,error:null};switch(d.webauthn.type){case"create":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:vM(d.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:wM(d.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(Te(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:s}=await this._challenge({factorId:t.factorId});return s?this._returnResult({data:null,error:s}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:s}=await this.getUser();if(s)return{data:null,error:s};const a={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])a.all.push(i),i.status==="verified"&&a[i.factor_type].push(i);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var t,r;const{data:{session:s},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=qg(s.access_token);let o=null;i.aal&&(o=i.aal);let d=o;((r=(t=s.user.factors)===null||t===void 0?void 0:t.filter(p=>p.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(d="aal2");const h=i.amr||[];return{data:{currentLevel:o,nextLevel:d,currentAuthenticationMethods:h},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:s},error:a}=r;return a?this._returnResult({data:null,error:a}):s?await Oe(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:s.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Nr})})}catch(r){if(Te(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async s=>{const{data:{session:a},error:i}=s;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new Nr});const o=await Oe(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:d=>({data:d,error:null})});return o.data&&o.data.redirect_url&&Pn()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(s){if(Te(s))return this._returnResult({data:null,error:s});throw s}}async _denyAuthorization(t,r){try{return await this._useSession(async s=>{const{data:{session:a},error:i}=s;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new Nr});const o=await Oe(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:d=>({data:d,error:null})});return o.data&&o.data.redirect_url&&Pn()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(s){if(Te(s))return this._returnResult({data:null,error:s});throw s}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:s}=t;return s?this._returnResult({data:null,error:s}):r?await Oe(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new Nr})})}catch(t){if(Te(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:s},error:a}=r;return a?this._returnResult({data:null,error:a}):s?(await Oe(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Nr})})}catch(r){if(Te(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let s=r.keys.find(d=>d.kid===t);if(s)return s;const a=Date.now();if(s=this.jwks.keys.find(d=>d.kid===t),s&&this.jwks_cached_at+RA>a)return s;const{data:i,error:o}=await Oe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,s=i.keys.find(d=>d.kid===t),!s)?null:s}async getClaims(t,r={}){try{let s=t;if(!s){const{data:y,error:b}=await this.getSession();if(b||!y.session)return this._returnResult({data:null,error:b});s=y.session.access_token}const{header:a,payload:i,signature:o,raw:{header:d,payload:u}}=qg(s);r!=null&&r.allowExpired||ZA(i.exp);const h=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!h){const{error:y}=await this.getUser(s);if(y)throw y;return{data:{claims:i,header:a,signature:o},error:null}}const p=eM(a.alg),f=await crypto.subtle.importKey("jwk",h,p,!0,["verify"]);if(!await crypto.subtle.verify(p,f,o,UA(`${d}.${u}`)))throw new tb("Invalid JWT signature");return{data:{claims:i,header:a,signature:o},error:null}}catch(s){if(Te(s))return this._returnResult({data:null,error:s});throw s}}}Vd.nextInstanceID={};const PM=Vd,AM="2.89.0";let Rd="";typeof Deno<"u"?Rd="deno":typeof document<"u"?Rd="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Rd="react-native":Rd="node";const MM={"X-Client-Info":`supabase-js-${Rd}/${AM}`},OM={headers:MM},LM={schema:"public"},$M={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},DM={};function Yd(e){"@babel/helpers - typeof";return Yd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yd(e)}function FM(e,t){if(Yd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Yd(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function UM(e){var t=FM(e,"string");return Yd(t)=="symbol"?t:t+""}function qM(e,t,r){return(t=UM(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Zt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TN(Object(r),!0).forEach(function(s){qM(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TN(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}const BM=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),HM=()=>Headers,WM=(e,t,r)=>{const s=BM(r),a=HM();return async(i,o)=>{var d;const u=(d=await t())!==null&&d!==void 0?d:e;let h=new a(o==null?void 0:o.headers);return h.has("apikey")||h.set("apikey",e),h.has("Authorization")||h.set("Authorization",`Bearer ${u}`),s(i,Zt(Zt({},o),{},{headers:h}))}};function zM(e){return e.endsWith("/")?e:e+"/"}function GM(e,t){var r,s;const{db:a,auth:i,realtime:o,global:d}=e,{db:u,auth:h,realtime:p,global:f}=t,x={db:Zt(Zt({},u),a),auth:Zt(Zt({},h),i),realtime:Zt(Zt({},p),o),storage:{},global:Zt(Zt(Zt({},f),d),{},{headers:Zt(Zt({},(r=f==null?void 0:f.headers)!==null&&r!==void 0?r:{}),(s=d==null?void 0:d.headers)!==null&&s!==void 0?s:{})}),accessToken:async()=>""};return e.accessToken?x.accessToken=e.accessToken:delete x.accessToken,x}function KM(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(zM(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var VM=class extends PM{constructor(e){super(e)}},YM=class{constructor(e,t,r){var s,a;this.supabaseUrl=e,this.supabaseKey=t;const i=KM(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o=`sb-${i.hostname.split(".")[0]}-auth-token`,d={db:LM,realtime:DM,auth:Zt(Zt({},$M),{},{storageKey:o}),global:OM},u=GM(r??{},d);if(this.storageKey=(s=u.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(a=u.global.headers)!==null&&a!==void 0?a:{},u.accessToken)this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(p,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}});else{var h;this.auth=this._initSupabaseAuthClient((h=u.auth)!==null&&h!==void 0?h:{},this.headers,u.global.fetch)}this.fetch=WM(t,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Zt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.accessToken&&this.accessToken().then(p=>this.realtime.setAuth(p)).catch(p=>console.warn("Failed to set initial Realtime auth token:",p)),this.rest=new CP(new URL("rest/v1",i).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new SA(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new jP(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,r;if(e.accessToken)return await e.accessToken();const{data:s}=await e.auth.getSession();return(t=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,userStorage:a,storageKey:i,flowType:o,lock:d,debug:u,throwOnError:h},p,f){const x={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new VM({url:this.authUrl.href,headers:Zt(Zt({},x),p),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,userStorage:a,flowType:o,lock:d,debug:u,throwOnError:h,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(y=>y.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new zP(this.realtimeUrl.href,Zt(Zt({},e),{},{params:Zt(Zt({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const JM=(e,t,r)=>new YM(e,t,r);function QM(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}QM()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const XM=void 0,ZM=void 0;throw new Error("Missing Supabase environment variables");const Hk="rgfl-auth-token";function eO(e){if(!e)return!1;try{const t=JSON.parse(e);return!t.access_token||typeof t.access_token!="string"?!1:t.access_token.split(".").length!==3?(console.warn("Invalid JWT format in stored token - clearing"),!1):!0}catch{return console.warn("Failed to parse stored token - clearing"),!1}}const tO={getItem:e=>{const t=window.localStorage.getItem(e);return e===Hk&&!eO(t)?(window.localStorage.removeItem(e),null):t},setItem:(e,t)=>{window.localStorage.setItem(e,t)},removeItem:e=>{window.localStorage.removeItem(e)}},K=JM(XM,ZM,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,storageKey:Hk,storage:tO}}),xe=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Me=globalThis,ma="10.32.1";function Ea(){return gu(Me),Me}function gu(e){const t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||ma,t[ma]=t[ma]||{}}function Nc(e,t,r=Me){const s=r.__SENTRY__=r.__SENTRY__||{},a=s[ma]=s[ma]||{};return a[e]||(a[e]=t())}const my=["debug","info","warn","error","log","assert","trace"],nO="Sentry Logger ",of={};function Ti(e){if(!("console"in Me))return e();const t=Me.console,r={},s=Object.keys(of);s.forEach(a=>{const i=of[a];r[a]=t[a],t[a]=i});try{return e()}finally{s.forEach(a=>{t[a]=r[a]})}}function rO(){py().enabled=!0}function sO(){py().enabled=!1}function Wk(){return py().enabled}function aO(...e){fy("log",...e)}function iO(...e){fy("warn",...e)}function oO(...e){fy("error",...e)}function fy(e,...t){xe&&Wk()&&Ti(()=>{Me.console[e](`${nO}[${e}]:`,...t)})}function py(){return xe?Nc("loggerSettings",()=>({enabled:!1})):{enabled:!1}}const Y={enable:rO,disable:sO,isEnabled:Wk,log:aO,warn:iO,error:oO},zk=50,Fs="?",RN=/\(error: (.*)\)/,IN=/captureMessage|captureException/;function Gk(...e){const t=e.sort((r,s)=>r[0]-s[0]).map(r=>r[1]);return(r,s=0,a=0)=>{const i=[],o=r.split(`
`);for(let d=s;d<o.length;d++){let u=o[d];u.length>1024&&(u=u.slice(0,1024));const h=RN.test(u)?u.replace(RN,"$1"):u;if(!h.match(/\S*Error: /)){for(const p of t){const f=p(h);if(f){i.push(f);break}}if(i.length>=zk+a)break}}return cO(i.slice(a))}}function lO(e){return Array.isArray(e)?Gk(...e):e}function cO(e){if(!e.length)return[];const t=Array.from(e);return/sentryWrapped/.test(sm(t).function||"")&&t.pop(),t.reverse(),IN.test(sm(t).function||"")&&(t.pop(),IN.test(sm(t).function||"")&&t.pop()),t.slice(0,zk).map(r=>({...r,filename:r.filename||sm(t).filename,function:r.function||Fs}))}function sm(e){return e[e.length-1]||{}}const Wg="<anonymous>";function va(e){try{return!e||typeof e!="function"?Wg:e.name||Wg}catch{return Wg}}function nb(e){const t=e.exception;if(t){const r=[];try{return t.values.forEach(s=>{s.stacktrace.frames&&r.push(...s.stacktrace.frames)}),r}catch{return}}}function Kk(e){return"__v_isVNode"in e&&e.__v_isVNode?"[VueVNode]":"[VueViewModel]"}const Cm={},PN={};function Ri(e,t){Cm[e]=Cm[e]||[],Cm[e].push(t)}function Ii(e,t){if(!PN[e]){PN[e]=!0;try{t()}catch(r){xe&&Y.error(`Error while instrumenting ${e}`,r)}}}function Kr(e,t){const r=e&&Cm[e];if(r)for(const s of r)try{s(t)}catch(a){xe&&Y.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${va(s)}
Error:`,a)}}let zg=null;function Vk(e){const t="error";Ri(t,e),Ii(t,dO)}function dO(){zg=Me.onerror,Me.onerror=function(e,t,r,s,a){return Kr("error",{column:s,error:a,line:r,msg:e,url:t}),zg?zg.apply(this,arguments):!1},Me.onerror.__SENTRY_INSTRUMENTED__=!0}let Gg=null;function Yk(e){const t="unhandledrejection";Ri(t,e),Ii(t,uO)}function uO(){Gg=Me.onunhandledrejection,Me.onunhandledrejection=function(e){return Kr("unhandledrejection",e),Gg?Gg.apply(this,arguments):!0},Me.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const Jk=Object.prototype.toString;function fa(e){switch(Jk.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return wa(e,Error)}}function Sc(e,t){return Jk.call(e)===`[object ${t}]`}function Qk(e){return Sc(e,"ErrorEvent")}function AN(e){return Sc(e,"DOMError")}function hO(e){return Sc(e,"DOMException")}function ys(e){return Sc(e,"String")}function zf(e){return typeof e=="object"&&e!==null&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function _i(e){return e===null||zf(e)||typeof e!="object"&&typeof e!="function"}function Ds(e){return Sc(e,"Object")}function Gf(e){return typeof Event<"u"&&wa(e,Event)}function mO(e){return typeof Element<"u"&&wa(e,Element)}function fO(e){return Sc(e,"RegExp")}function Fo(e){return!!(e!=null&&e.then&&typeof e.then=="function")}function pO(e){return Ds(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function wa(e,t){try{return e instanceof t}catch{return!1}}function Xk(e){return!!(typeof e=="object"&&e!==null&&(e.__isVue||e._isVue||e.__v_isVNode))}function xy(e){return typeof Request<"u"&&wa(e,Request)}const gy=Me,xO=80;function pr(e,t={}){if(!e)return"<unknown>";try{let r=e;const s=5,a=[];let i=0,o=0;const d=" > ",u=d.length;let h;const p=Array.isArray(t)?t:t.keyAttrs,f=!Array.isArray(t)&&t.maxStringLength||xO;for(;r&&i++<s&&(h=gO(r,p),!(h==="html"||i>1&&o+a.length*u+h.length>=f));)a.push(h),o+=h.length,r=r.parentNode;return a.reverse().join(d)}catch{return"<unknown>"}}function gO(e,t){const r=e,s=[];if(!(r!=null&&r.tagName))return"";if(gy.HTMLElement&&r instanceof HTMLElement&&r.dataset){if(r.dataset.sentryComponent)return r.dataset.sentryComponent;if(r.dataset.sentryElement)return r.dataset.sentryElement}s.push(r.tagName.toLowerCase());const a=t!=null&&t.length?t.filter(o=>r.getAttribute(o)).map(o=>[o,r.getAttribute(o)]):null;if(a!=null&&a.length)a.forEach(o=>{s.push(`[${o[0]}="${o[1]}"]`)});else{r.id&&s.push(`#${r.id}`);const o=r.className;if(o&&ys(o)){const d=o.split(/\s+/);for(const u of d)s.push(`.${u}`)}}const i=["aria-label","type","name","title","alt"];for(const o of i){const d=r.getAttribute(o);d&&s.push(`[${o}="${d}"]`)}return s.join("")}function Uo(){try{return gy.document.location.href}catch{return""}}function Zk(e){if(!gy.HTMLElement)return null;let t=e;const r=5;for(let s=0;s<r;s++){if(!t)return null;if(t instanceof HTMLElement){if(t.dataset.sentryComponent)return t.dataset.sentryComponent;if(t.dataset.sentryElement)return t.dataset.sentryElement}t=t.parentNode}return null}function An(e,t,r){if(!(t in e))return;const s=e[t];if(typeof s!="function")return;const a=r(s);typeof a=="function"&&eE(a,s);try{e[t]=a}catch{xe&&Y.log(`Failed to replace method "${t}" in object`,e)}}function yn(e,t,r){try{Object.defineProperty(e,t,{value:r,writable:!0,configurable:!0})}catch{xe&&Y.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function eE(e,t){try{const r=t.prototype||{};e.prototype=t.prototype=r,yn(e,"__sentry_original__",t)}catch{}}function by(e){return e.__sentry_original__}function tE(e){if(fa(e))return{message:e.message,name:e.name,stack:e.stack,...ON(e)};if(Gf(e)){const t={type:e.type,target:MN(e.target),currentTarget:MN(e.currentTarget),...ON(e)};return typeof CustomEvent<"u"&&wa(e,CustomEvent)&&(t.detail=e.detail),t}else return e}function MN(e){try{return mO(e)?pr(e):Object.prototype.toString.call(e)}catch{return"<unknown>"}}function ON(e){if(typeof e=="object"&&e!==null){const t={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}else return{}}function bO(e){const t=Object.keys(tE(e));return t.sort(),t[0]?t.join(", "):"[object has no keys]"}function Jd(e,t=0){return typeof e!="string"||t===0||e.length<=t?e:`${e.slice(0,t)}...`}function Kg(e,t){let r=e;const s=r.length;if(s<=150)return r;t>s&&(t=s);let a=Math.max(t-60,0);a<5&&(a=0);let i=Math.min(a+140,s);return i>s-5&&(i=s),i===s&&(a=Math.max(i-140,0)),r=r.slice(a,i),a>0&&(r=`'{snip} ${r}`),i<s&&(r+=" {snip}"),r}function lf(e,t){if(!Array.isArray(e))return"";const r=[];for(let s=0;s<e.length;s++){const a=e[s];try{Xk(a)?r.push(Kk(a)):r.push(String(a))}catch{r.push("[value cannot be serialized]")}}return r.join(t)}function Tm(e,t,r=!1){return ys(e)?fO(t)?t.test(e):ys(t)?r?e===t:e.includes(t):!1:!1}function vs(e,t=[],r=!1){return t.some(s=>Tm(e,s,r))}function yO(){const e=Me;return e.crypto||e.msCrypto}let Vg;function vO(){return Math.random()*16}function gn(e=yO()){try{if(e!=null&&e.randomUUID)return e.randomUUID().replace(/-/g,"")}catch{}return Vg||(Vg="10000000100040008000"+1e11),Vg.replace(/[018]/g,t=>(t^(vO()&15)>>t/4).toString(16))}function nE(e){var t,r;return(r=(t=e.exception)==null?void 0:t.values)==null?void 0:r[0]}function no(e){const{message:t,event_id:r}=e;if(t)return t;const s=nE(e);return s?s.type&&s.value?`${s.type}: ${s.value}`:s.type||s.value||r||"<unknown>":r||"<unknown>"}function rb(e,t,r){const s=e.exception=e.exception||{},a=s.values=s.values||[],i=a[0]=a[0]||{};i.value||(i.value=t||""),i.type||(i.type="Error")}function _a(e,t){const r=nE(e);if(!r)return;const s={type:"generic",handled:!0},a=r.mechanism;if(r.mechanism={...s,...a,...t},t&&"data"in t){const i={...a==null?void 0:a.data,...t.data};r.mechanism.data=i}}function wO(e,t,r=5){if(t.lineno===void 0)return;const s=e.length,a=Math.max(Math.min(s-1,t.lineno-1),0);t.pre_context=e.slice(Math.max(0,a-r),a).map(o=>Kg(o,0));const i=Math.min(s-1,a);t.context_line=Kg(e[i],t.colno||0),t.post_context=e.slice(Math.min(a+1,s),a+1+r).map(o=>Kg(o,0))}function LN(e){if(_O(e))return!0;try{yn(e,"__sentry_captured__",!0)}catch{}return!1}function _O(e){try{return e.__sentry_captured__}catch{}}const rE=1e3;function qo(){return Date.now()/rE}function jO(){const{performance:e}=Me;if(!(e!=null&&e.now)||!e.timeOrigin)return qo;const t=e.timeOrigin;return()=>(t+e.now())/rE}let $N;function At(){return($N??($N=jO()))()}let Yg;function NO(){var p;const{performance:e}=Me;if(!(e!=null&&e.now))return[void 0,"none"];const t=3600*1e3,r=e.now(),s=Date.now(),a=e.timeOrigin?Math.abs(e.timeOrigin+r-s):t,i=a<t,o=(p=e.timing)==null?void 0:p.navigationStart,u=typeof o=="number"?Math.abs(o+r-s):t,h=u<t;return i||h?a<=u?[e.timeOrigin,"timeOrigin"]:[o,"navigationStart"]:[s,"dateNow"]}function Wn(){return Yg||(Yg=NO()),Yg[0]}function SO(e){const t=At(),r={sid:gn(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>EO(r)};return e&&rc(r,e),r}function rc(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),!e.did&&!t.did&&(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||At(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=t.sid.length===32?t.sid:gn()),t.init!==void 0&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),typeof t.started=="number"&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if(typeof t.duration=="number")e.duration=t.duration;else{const r=e.timestamp-e.started;e.duration=r>=0?r:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),typeof t.errors=="number"&&(e.errors=t.errors),t.status&&(e.status=t.status)}function kO(e,t){let r={};e.status==="ok"&&(r={status:"exited"}),rc(e,r)}function EO(e){return{sid:`${e.sid}`,init:e.init,started:new Date(e.started*1e3).toISOString(),timestamp:new Date(e.timestamp*1e3).toISOString(),status:e.status,errors:e.errors,did:typeof e.did=="number"||typeof e.did=="string"?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}}}function bu(e,t,r=2){if(!t||typeof t!="object"||r<=0)return t;if(e&&Object.keys(t).length===0)return e;const s={...e};for(const a in t)Object.prototype.hasOwnProperty.call(t,a)&&(s[a]=bu(s[a],t[a],r-1));return s}function Us(){return gn()}function pa(){return gn().substring(16)}const sb="_sentrySpan";function qs(e,t){t?yn(e,sb,t):delete e[sb]}function sc(e){return e[sb]}const CO=100;class js{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._attributes={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:Us(),sampleRand:Math.random()}}clone(){const t=new js;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._attributes={...this._attributes},t._extra={...this._extra},t._contexts={...this._contexts},this._contexts.flags&&(t._contexts.flags={values:[...this._contexts.flags.values]}),t._user=this._user,t._level=this._level,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t._lastEventId=this._lastEventId,qs(t,sc(this)),t}setClient(t){this._client=t}setLastEventId(t){this._lastEventId=t}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&rc(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,r){return this.setTags({[t]:r})}setAttributes(t){return this._attributes={...this._attributes,...t},this._notifyScopeListeners(),this}setAttribute(t,r){return this.setAttributes({[t]:r})}removeAttribute(t){return t in this._attributes&&(delete this._attributes[t],this._notifyScopeListeners()),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,r){return this._extra={...this._extra,[t]:r},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,r){return r===null?delete this._contexts[t]:this._contexts[t]=r,this._notifyScopeListeners(),this}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;const r=typeof t=="function"?t(this):t,s=r instanceof js?r.getScopeData():Ds(r)?t:void 0,{tags:a,attributes:i,extra:o,user:d,contexts:u,level:h,fingerprint:p=[],propagationContext:f}=s||{};return this._tags={...this._tags,...a},this._attributes={...this._attributes,...i},this._extra={...this._extra,...o},this._contexts={...this._contexts,...u},d&&Object.keys(d).length&&(this._user=d),h&&(this._level=h),p.length&&(this._fingerprint=p),f&&(this._propagationContext=f),this}clear(){return this._breadcrumbs=[],this._tags={},this._attributes={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,qs(this,void 0),this._attachments=[],this.setPropagationContext({traceId:Us(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(t,r){var i;const s=typeof r=="number"?r:CO;if(s<=0)return this;const a={timestamp:qo(),...t,message:t.message?Jd(t.message,2048):t.message};return this._breadcrumbs.push(a),this._breadcrumbs.length>s&&(this._breadcrumbs=this._breadcrumbs.slice(-s),(i=this._client)==null||i.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,attributes:this._attributes,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:sc(this)}}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata=bu(this._sdkProcessingMetadata,t,2),this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(t,r){const s=(r==null?void 0:r.event_id)||gn();if(!this._client)return xe&&Y.warn("No client configured on scope - will not capture exception!"),s;const a=new Error("Sentry syntheticException");return this._client.captureException(t,{originalException:t,syntheticException:a,...r,event_id:s},this),s}captureMessage(t,r,s){const a=(s==null?void 0:s.event_id)||gn();if(!this._client)return xe&&Y.warn("No client configured on scope - will not capture message!"),a;const i=(s==null?void 0:s.syntheticException)??new Error(t);return this._client.captureMessage(t,r,{originalException:t,syntheticException:i,...s,event_id:a},this),a}captureEvent(t,r){const s=(r==null?void 0:r.event_id)||gn();return this._client?(this._client.captureEvent(t,{...r,event_id:s},this),s):(xe&&Y.warn("No client configured on scope - will not capture event!"),s)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}}function TO(){return Nc("defaultCurrentScope",()=>new js)}function RO(){return Nc("defaultIsolationScope",()=>new js)}class IO{constructor(t,r){let s;t?s=t:s=new js;let a;r?a=r:a=new js,this._stack=[{scope:s}],this._isolationScope=a}withScope(t){const r=this._pushScope();let s;try{s=t(r)}catch(a){throw this._popScope(),a}return Fo(s)?s.then(a=>(this._popScope(),a),a=>{throw this._popScope(),a}):(this._popScope(),s)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const t=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:t}),t}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}}function ac(){const e=Ea(),t=gu(e);return t.stack=t.stack||new IO(TO(),RO())}function PO(e){return ac().withScope(e)}function AO(e,t){const r=ac();return r.withScope(()=>(r.getStackTop().scope=e,t(e)))}function DN(e){return ac().withScope(()=>e(ac().getIsolationScope()))}function MO(){return{withIsolationScope:DN,withScope:PO,withSetScope:AO,withSetIsolationScope:(e,t)=>DN(t),getCurrentScope:()=>ac().getScope(),getIsolationScope:()=>ac().getIsolationScope()}}function Pi(e){const t=gu(e);return t.acs?t.acs:MO()}function We(){const e=Ea();return Pi(e).getCurrentScope()}function hn(){const e=Ea();return Pi(e).getIsolationScope()}function xa(){return Nc("globalScope",()=>new js)}function br(...e){const t=Ea(),r=Pi(t);if(e.length===2){const[s,a]=e;return s?r.withSetScope(s,a):r.withScope(a)}return r.withScope(e[0])}function OO(...e){const t=Ea(),r=Pi(t);if(e.length===2){const[s,a]=e;return s?r.withSetIsolationScope(s,a):r.withIsolationScope(a)}return r.withIsolationScope(e[0])}function be(){return We().getClient()}function sE(e){const t=e.getPropagationContext(),{traceId:r,parentSpanId:s,propagationSpanId:a}=t,i={trace_id:r,span_id:a||pa()};return s&&(i.parent_span_id=s),i}const xt="sentry.source",Kf="sentry.sample_rate",aE="sentry.previous_trace_sample_rate",Nt="sentry.op",Ge="sentry.origin",Qd="sentry.idle_span_finish_reason",yu="sentry.measurement_unit",vu="sentry.measurement_value",ab="sentry.custom_span_name",yy="sentry.profile_id",kc="sentry.exclusive_time",LO="http.request.method",$O="url.full",DO="sentry.link.type",FO=0,Vf=1,ot=2;function iE(e){if(e<400&&e>=100)return{code:Vf};if(e>=400&&e<500)switch(e){case 401:return{code:ot,message:"unauthenticated"};case 403:return{code:ot,message:"permission_denied"};case 404:return{code:ot,message:"not_found"};case 409:return{code:ot,message:"already_exists"};case 413:return{code:ot,message:"failed_precondition"};case 429:return{code:ot,message:"resource_exhausted"};case 499:return{code:ot,message:"cancelled"};default:return{code:ot,message:"invalid_argument"}}if(e>=500&&e<600)switch(e){case 501:return{code:ot,message:"unimplemented"};case 503:return{code:ot,message:"unavailable"};case 504:return{code:ot,message:"deadline_exceeded"};default:return{code:ot,message:"internal_error"}}return{code:ot,message:"internal_error"}}function Xd(e,t){e.setAttribute("http.response.status_code",t);const r=iE(t);r.message!=="unknown_error"&&e.setStatus(r)}const oE="_sentryScope",lE="_sentryIsolationScope";function UO(e){try{const t=Me.WeakRef;if(typeof t=="function")return new t(e)}catch{}return e}function qO(e){if(e){if(typeof e=="object"&&"deref"in e&&typeof e.deref=="function")try{return e.deref()}catch{return}return e}}function BO(e,t,r){e&&(yn(e,lE,UO(r)),yn(e,oE,t))}function cf(e){const t=e;return{scope:t[oE],isolationScope:qO(t[lE])}}const vy="sentry-",HO=/^sentry-/,WO=8192;function wy(e){const t=zO(e);if(!t)return;const r=Object.entries(t).reduce((s,[a,i])=>{if(a.match(HO)){const o=a.slice(vy.length);s[o]=i}return s},{});if(Object.keys(r).length>0)return r}function cE(e){if(!e)return;const t=Object.entries(e).reduce((r,[s,a])=>(a&&(r[`${vy}${s}`]=a),r),{});return GO(t)}function zO(e){if(!(!e||!ys(e)&&!Array.isArray(e)))return Array.isArray(e)?e.reduce((t,r)=>{const s=FN(r);return Object.entries(s).forEach(([a,i])=>{t[a]=i}),t},{}):FN(e)}function FN(e){return e.split(",").map(t=>{const r=t.indexOf("=");if(r===-1)return[];const s=t.slice(0,r),a=t.slice(r+1);return[s,a].map(i=>{try{return decodeURIComponent(i.trim())}catch{return}})}).reduce((t,[r,s])=>(r&&s&&(t[r]=s),t),{})}function GO(e){if(Object.keys(e).length!==0)return Object.entries(e).reduce((t,[r,s],a)=>{const i=`${encodeURIComponent(r)}=${encodeURIComponent(s)}`,o=a===0?i:`${t},${i}`;return o.length>WO?(xe&&Y.warn(`Not adding key: ${r} with val: ${s} to baggage header due to exceeding baggage size limits.`),t):o},"")}const KO=/^o(\d+)\./,VO=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function YO(e){return e==="http"||e==="https"}function Ca(e,t=!1){const{host:r,path:s,pass:a,port:i,projectId:o,protocol:d,publicKey:u}=e;return`${d}://${u}${t&&a?`:${a}`:""}@${r}${i?`:${i}`:""}/${s&&`${s}/`}${o}`}function dE(e){const t=VO.exec(e);if(!t){Ti(()=>{console.error(`Invalid Sentry Dsn: ${e}`)});return}const[r,s,a="",i="",o="",d=""]=t.slice(1);let u="",h=d;const p=h.split("/");if(p.length>1&&(u=p.slice(0,-1).join("/"),h=p.pop()),h){const f=h.match(/^\d+/);f&&(h=f[0])}return uE({host:i,pass:a,path:u,projectId:h,port:o,protocol:r,publicKey:s})}function uE(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function JO(e){if(!xe)return!0;const{port:t,projectId:r,protocol:s}=e;return["protocol","publicKey","host","projectId"].find(o=>e[o]?!1:(Y.error(`Invalid Sentry Dsn: ${o} missing`),!0))?!1:r.match(/^\d+$/)?YO(s)?t&&isNaN(parseInt(t,10))?(Y.error(`Invalid Sentry Dsn: Invalid port ${t}`),!1):!0:(Y.error(`Invalid Sentry Dsn: Invalid protocol ${s}`),!1):(Y.error(`Invalid Sentry Dsn: Invalid projectId ${r}`),!1)}function QO(e){const t=e.match(KO);return t==null?void 0:t[1]}function hE(e){const t=e.getOptions(),{host:r}=e.getDsn()||{};let s;return t.orgId?s=String(t.orgId):r&&(s=QO(r)),s}function mE(e){const t=typeof e=="string"?dE(e):uE(e);if(!(!t||!JO(t)))return t}function Eo(e){if(typeof e=="boolean")return Number(e);const t=typeof e=="string"?parseFloat(e):e;if(!(typeof t!="number"||isNaN(t)||t<0||t>1))return t}const fE=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function XO(e){if(!e)return;const t=e.match(fE);if(!t)return;let r;return t[3]==="1"?r=!0:t[3]==="0"&&(r=!1),{traceId:t[1],parentSampled:r,parentSpanId:t[2]}}function pE(e,t){const r=XO(e),s=wy(t);if(!(r!=null&&r.traceId))return{traceId:Us(),sampleRand:Math.random()};const a=ZO(r,s);s&&(s.sample_rand=a.toString());const{traceId:i,parentSpanId:o,parentSampled:d}=r;return{traceId:i,parentSpanId:o,sampled:d,dsc:s||{},sampleRand:a}}function xE(e=Us(),t=pa(),r){let s="";return r!==void 0&&(s=r?"-1":"-0"),`${e}-${t}${s}`}function gE(e=Us(),t=pa(),r){return`00-${e}-${t}-${r?"01":"00"}`}function ZO(e,t){const r=Eo(t==null?void 0:t.sample_rand);if(r!==void 0)return r;const s=Eo(t==null?void 0:t.sample_rate);return s&&(e==null?void 0:e.parentSampled)!==void 0?e.parentSampled?Math.random()*s:s+Math.random()*(1-s):Math.random()}function eL(e,t){const r=hE(e);return t&&r&&t!==r?(Y.log(`Won't continue trace because org IDs don't match (incoming baggage: ${t}, SDK options: ${r})`),!1):(e.getOptions().strictTraceContinuation||!1)&&(t&&!r||!t&&r)?(Y.log(`Starting a new trace because strict trace continuation is enabled but one org ID is missing (incoming baggage: ${t}, Sentry client: ${r})`),!1):!0}const bE=0,_y=1;let UN=!1;function tL(e){const{spanId:t,traceId:r}=e.spanContext(),{data:s,op:a,parent_span_id:i,status:o,origin:d,links:u}=Re(e);return{parent_span_id:i,span_id:t,trace_id:r,data:s,op:a,status:o,origin:d,links:u}}function yE(e){const{spanId:t,traceId:r,isRemote:s}=e.spanContext(),a=s?t:Re(e).parent_span_id,i=cf(e).scope,o=s?(i==null?void 0:i.getPropagationContext().propagationSpanId)||pa():t;return{parent_span_id:a,span_id:o,trace_id:r}}function vE(e){const{traceId:t,spanId:r}=e.spanContext(),s=Ai(e);return xE(t,r,s)}function nL(e){const{traceId:t,spanId:r}=e.spanContext(),s=Ai(e);return gE(t,r,s)}function wE(e){if(e&&e.length>0)return e.map(({context:{spanId:t,traceId:r,traceFlags:s,...a},attributes:i})=>({span_id:t,trace_id:r,sampled:s===_y,attributes:i,...a}))}function wo(e){return typeof e=="number"?qN(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?qN(e.getTime()):At()}function qN(e){return e>9999999999?e/1e3:e}function Re(e){var s;if(sL(e))return e.getSpanJSON();const{spanId:t,traceId:r}=e.spanContext();if(rL(e)){const{attributes:a,startTime:i,name:o,endTime:d,status:u,links:h}=e,p="parentSpanId"in e?e.parentSpanId:"parentSpanContext"in e?(s=e.parentSpanContext)==null?void 0:s.spanId:void 0;return{span_id:t,trace_id:r,data:a,description:o,parent_span_id:p,start_timestamp:wo(i),timestamp:wo(d)||void 0,status:_E(u),op:a[Nt],origin:a[Ge],links:wE(h)}}return{span_id:t,trace_id:r,start_timestamp:0,data:{}}}function rL(e){const t=e;return!!t.attributes&&!!t.startTime&&!!t.name&&!!t.endTime&&!!t.status}function sL(e){return typeof e.getSpanJSON=="function"}function Ai(e){const{traceFlags:t}=e.spanContext();return t===_y}function _E(e){if(!(!e||e.code===FO))return e.code===Vf?"ok":e.message||"internal_error"}const _o="_sentryChildSpans",ib="_sentryRootSpan";function jE(e,t){const r=e[ib]||e;yn(t,ib,r),e[_o]?e[_o].add(t):yn(e,_o,new Set([t]))}function aL(e,t){e[_o]&&e[_o].delete(t)}function Ld(e){const t=new Set;function r(s){if(!t.has(s)&&Ai(s)){t.add(s);const a=s[_o]?Array.from(s[_o]):[];for(const i of a)r(i)}}return r(e),Array.from(t)}function Kt(e){return e[ib]||e}function Vt(){const e=Ea(),t=Pi(e);return t.getActiveSpan?t.getActiveSpan():sc(We())}function ob(){UN||(Ti(()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly or use `ignoreSpans`.")}),UN=!0)}function iL(e,t){e.updateName(t),e.setAttributes({[xt]:"custom",[ab]:t})}let BN=!1;function NE(){if(BN)return;function e(){const t=Vt(),r=t&&Kt(t);if(r){const s="internal_error";xe&&Y.log(`[Tracing] Root span: ${s} -> Global error occurred`),r.setStatus({code:ot,message:s})}}e.tag="sentry_tracingErrorCallback",BN=!0,Vk(e),Yk(e)}function Vr(e){var r;if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const t=e||((r=be())==null?void 0:r.getOptions());return!!t&&(t.tracesSampleRate!=null||!!t.tracesSampler)}function HN(e){Y.log(`Ignoring span ${e.op} - ${e.description} because it matches \`ignoreSpans\`.`)}function df(e,t){if(!(t!=null&&t.length)||!e.description)return!1;for(const r of t){if(lL(r)){if(Tm(e.description,r))return xe&&HN(e),!0;continue}if(!r.name&&!r.op)continue;const s=r.name?Tm(e.description,r.name):!0,a=r.op?e.op&&Tm(e.op,r.op):!0;if(s&&a)return xe&&HN(e),!0}return!1}function oL(e,t){const r=t.parent_span_id,s=t.span_id;if(r)for(const a of e)a.parent_span_id===s&&(a.parent_span_id=r)}function lL(e){return typeof e=="string"||e instanceof RegExp}const Yf="production",SE="_frozenDsc";function Rm(e,t){yn(e,SE,t)}function kE(e,t){const r=t.getOptions(),{publicKey:s}=t.getDsn()||{},a={environment:r.environment||Yf,release:r.release,public_key:s,trace_id:e,org_id:hE(t)};return t.emit("createDsc",a),a}function jy(e,t){const r=t.getPropagationContext();return r.dsc||kE(r.traceId,e)}function Ns(e){var b;const t=be();if(!t)return{};const r=Kt(e),s=Re(r),a=s.data,i=r.spanContext().traceState,o=(i==null?void 0:i.get("sentry.sample_rate"))??a[Kf]??a[aE];function d(w){return(typeof o=="number"||typeof o=="string")&&(w.sample_rate=`${o}`),w}const u=r[SE];if(u)return d(u);const h=i==null?void 0:i.get("sentry.dsc"),p=h&&wy(h);if(p)return d(p);const f=kE(e.spanContext().traceId,t),x=a[xt],y=s.description;return x!=="url"&&y&&(f.transaction=y),Vr()&&(f.sampled=String(Ai(r)),f.sample_rand=(i==null?void 0:i.get("sentry.sample_rand"))??((b=cf(r).scope)==null?void 0:b.getPropagationContext().sampleRand.toString())),d(f),t.emit("createDsc",f,r),f}function cL(e){const t=Ns(e);return cE(t)}class ja{constructor(t={}){this._traceId=t.traceId||Us(),this._spanId=t.spanId||pa()}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:bE}}end(t){}setAttribute(t,r){return this}setAttributes(t){return this}setStatus(t){return this}updateName(t){return this}isRecording(){return!1}addEvent(t,r,s){return this}addLink(t){return this}addLinks(t){return this}recordException(t,r){}}function kr(e,t=100,r=1/0){try{return lb("",e,t,r)}catch(s){return{ERROR:`**non-serializable** (${s})`}}}function EE(e,t=3,r=100*1024){const s=kr(e,t);return mL(s)>r?EE(e,t-1,r):s}function lb(e,t,r=1/0,s=1/0,a=fL()){const[i,o]=a;if(t==null||["boolean","string"].includes(typeof t)||typeof t=="number"&&Number.isFinite(t))return t;const d=dL(e,t);if(!d.startsWith("[object "))return d;if(t.__sentry_skip_normalization__)return t;const u=typeof t.__sentry_override_normalization_depth__=="number"?t.__sentry_override_normalization_depth__:r;if(u===0)return d.replace("object ","");if(i(t))return"[Circular ~]";const h=t;if(h&&typeof h.toJSON=="function")try{const y=h.toJSON();return lb("",y,u-1,s,a)}catch{}const p=Array.isArray(t)?[]:{};let f=0;const x=tE(t);for(const y in x){if(!Object.prototype.hasOwnProperty.call(x,y))continue;if(f>=s){p[y]="[MaxProperties ~]";break}const b=x[y];p[y]=lb(y,b,u-1,s,a),f++}return o(t),p}function dL(e,t){try{if(e==="domain"&&t&&typeof t=="object"&&t._events)return"[Domain]";if(e==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&t===global)return"[Global]";if(typeof window<"u"&&t===window)return"[Window]";if(typeof document<"u"&&t===document)return"[Document]";if(Xk(t))return Kk(t);if(pO(t))return"[SyntheticEvent]";if(typeof t=="number"&&!Number.isFinite(t))return`[${t}]`;if(typeof t=="function")return`[Function: ${va(t)}]`;if(typeof t=="symbol")return`[${String(t)}]`;if(typeof t=="bigint")return`[BigInt: ${String(t)}]`;const r=uL(t);return/^HTML(\w*)Element$/.test(r)?`[HTMLElement: ${r}]`:`[object ${r}]`}catch(r){return`**non-serializable** (${r})`}}function uL(e){const t=Object.getPrototypeOf(e);return t!=null&&t.constructor?t.constructor.name:"null prototype"}function hL(e){return~-encodeURI(e).split(/%..|./).length}function mL(e){return hL(JSON.stringify(e))}function fL(){const e=new WeakSet;function t(s){return e.has(s)?!0:(e.add(s),!1)}function r(s){e.delete(s)}return[t,r]}function Es(e,t=[]){return[e,t]}function pL(e,t){const[r,s]=e;return[r,[...s,t]]}function Co(e,t){const r=e[1];for(const s of r){const a=s[0].type;if(t(s,a))return!0}return!1}function WN(e,t){return Co(e,(r,s)=>t.includes(s))}function uf(e){const t=gu(Me);return t.encodePolyfill?t.encodePolyfill(e):new TextEncoder().encode(e)}function xL(e){const t=gu(Me);return t.decodePolyfill?t.decodePolyfill(e):new TextDecoder().decode(e)}function hf(e){const[t,r]=e;let s=JSON.stringify(t);function a(i){typeof s=="string"?s=typeof i=="string"?s+i:[uf(s),i]:s.push(typeof i=="string"?uf(i):i)}for(const i of r){const[o,d]=i;if(a(`
${JSON.stringify(o)}
`),typeof d=="string"||d instanceof Uint8Array)a(d);else{let u;try{u=JSON.stringify(d)}catch{u=JSON.stringify(kr(d))}a(u)}}return typeof s=="string"?s:gL(s)}function gL(e){const t=e.reduce((a,i)=>a+i.length,0),r=new Uint8Array(t);let s=0;for(const a of e)r.set(a,s),s+=a.length;return r}function bL(e){let t=typeof e=="string"?uf(e):e;function r(o){const d=t.subarray(0,o);return t=t.subarray(o+1),d}function s(){let o=t.indexOf(10);return o<0&&(o=t.length),JSON.parse(xL(r(o)))}const a=s(),i=[];for(;t.length;){const o=s(),d=typeof o.length=="number"?o.length:void 0;i.push([o,d?r(d):s()])}return[a,i]}function yL(e){return[{type:"span"},e]}function vL(e){const t=typeof e.data=="string"?uf(e.data):e.data;return[{type:"attachment",length:t.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType},t]}const wL={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security",log:"log_item",metric:"metric",trace_metric:"metric"};function zN(e){return wL[e]}function Jf(e){if(!(e!=null&&e.sdk))return;const{name:t,version:r}=e.sdk;return{name:t,version:r}}function CE(e,t,r,s){var i;const a=(i=e.sdkProcessingMetadata)==null?void 0:i.dynamicSamplingContext;return{event_id:e.event_id,sent_at:new Date().toISOString(),...t&&{sdk:t},...!!r&&s&&{dsn:Ca(s)},...a&&{trace:a}}}function _L(e,t){var s,a,i,o;if(!t)return e;const r=e.sdk||{};return e.sdk={...r,name:r.name||t.name,version:r.version||t.version,integrations:[...((s=e.sdk)==null?void 0:s.integrations)||[],...t.integrations||[]],packages:[...((a=e.sdk)==null?void 0:a.packages)||[],...t.packages||[]],settings:(i=e.sdk)!=null&&i.settings||t.settings?{...(o=e.sdk)==null?void 0:o.settings,...t.settings}:void 0},e}function jL(e,t,r,s){const a=Jf(r),i={sent_at:new Date().toISOString(),...a&&{sdk:a},...!!s&&t&&{dsn:Ca(t)}},o="aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()];return Es(i,[o])}function NL(e,t,r,s){const a=Jf(r),i=e.type&&e.type!=="replay_event"?e.type:"event";_L(e,r==null?void 0:r.sdk);const o=CE(e,a,s,t);return delete e.sdkProcessingMetadata,Es(o,[[{type:i},e]])}function SL(e,t){function r(y){return!!y.trace_id&&!!y.public_key}const s=Ns(e[0]),a=t==null?void 0:t.getDsn(),i=t==null?void 0:t.getOptions().tunnel,o={sent_at:new Date().toISOString(),...r(s)&&{trace:s},...!!i&&a&&{dsn:Ca(a)}},{beforeSendSpan:d,ignoreSpans:u}=(t==null?void 0:t.getOptions())||{},h=u!=null&&u.length?e.filter(y=>!df(Re(y),u)):e,p=e.length-h.length;p&&(t==null||t.recordDroppedEvent("before_send","span",p));const f=d?y=>{const b=Re(y),w=d(b);return w||(ob(),b)}:Re,x=[];for(const y of h){const b=f(y);b&&x.push(yL(b))}return Es(o,x)}function kL(e){if(!xe)return;const{description:t="< unknown name >",op:r="< unknown op >",parent_span_id:s}=Re(e),{spanId:a}=e.spanContext(),i=Ai(e),o=Kt(e),d=o===e,u=`[Tracing] Starting ${i?"sampled":"unsampled"} ${d?"root ":""}span`,h=[`op: ${r}`,`name: ${t}`,`ID: ${a}`];if(s&&h.push(`parent ID: ${s}`),!d){const{op:p,description:f}=Re(o);h.push(`root ID: ${o.spanContext().spanId}`),p&&h.push(`root op: ${p}`),f&&h.push(`root description: ${f}`)}Y.log(`${u}
  ${h.join(`
  `)}`)}function EL(e){if(!xe)return;const{description:t="< unknown name >",op:r="< unknown op >"}=Re(e),{spanId:s}=e.spanContext(),i=Kt(e)===e,o=`[Tracing] Finishing "${r}" ${i?"root ":""}span "${t}" with ID ${s}`;Y.log(o)}function TE(e,t,r,s=Vt()){const a=s&&Kt(s);a&&(xe&&Y.log(`[Measurement] Setting measurement on root span: ${e} = ${t} ${r}`),a.addEvent(e,{[vu]:t,[yu]:r}))}function GN(e){if(!e||e.length===0)return;const t={};return e.forEach(r=>{const s=r.attributes||{},a=s[yu],i=s[vu];typeof a=="string"&&typeof i=="number"&&(t[r.name]={value:i,unit:a})}),t}const KN=1e3;class Qf{constructor(t={}){this._traceId=t.traceId||Us(),this._spanId=t.spanId||pa(),this._startTime=t.startTimestamp||At(),this._links=t.links,this._attributes={},this.setAttributes({[Ge]:"manual",[Nt]:t.op,...t.attributes}),this._name=t.name,t.parentSpanId&&(this._parentSpanId=t.parentSpanId),"sampled"in t&&(this._sampled=t.sampled),t.endTimestamp&&(this._endTime=t.endTimestamp),this._events=[],this._isStandaloneSpan=t.isStandalone,this._endTime&&this._onSpanEnded()}addLink(t){return this._links?this._links.push(t):this._links=[t],this}addLinks(t){return this._links?this._links.push(...t):this._links=t,this}recordException(t,r){}spanContext(){const{_spanId:t,_traceId:r,_sampled:s}=this;return{spanId:t,traceId:r,traceFlags:s?_y:bE}}setAttribute(t,r){return r===void 0?delete this._attributes[t]:this._attributes[t]=r,this}setAttributes(t){return Object.keys(t).forEach(r=>this.setAttribute(r,t[r])),this}updateStartTime(t){this._startTime=wo(t)}setStatus(t){return this._status=t,this}updateName(t){return this._name=t,this.setAttribute(xt,"custom"),this}end(t){this._endTime||(this._endTime=wo(t),EL(this),this._onSpanEnded())}getSpanJSON(){return{data:this._attributes,description:this._name,op:this._attributes[Nt],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:_E(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[Ge],profile_id:this._attributes[yy],exclusive_time:this._attributes[kc],measurements:GN(this._events),is_segment:this._isStandaloneSpan&&Kt(this)===this||void 0,segment_id:this._isStandaloneSpan?Kt(this).spanContext().spanId:void 0,links:wE(this._links)}}isRecording(){return!this._endTime&&!!this._sampled}addEvent(t,r,s){xe&&Y.log("[Tracing] Adding an event to span:",t);const a=VN(r)?r:s||At(),i=VN(r)?{}:r||{},o={name:t,time:wo(a),attributes:i};return this._events.push(o),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){const t=be();if(t&&t.emit("spanEnd",this),!(this._isStandaloneSpan||this===Kt(this)))return;if(this._isStandaloneSpan){this._sampled?TL(SL([this],t)):(xe&&Y.log("[Tracing] Discarding standalone span because its trace was not chosen to be sampled."),t&&t.recordDroppedEvent("sample_rate","span"));return}const s=this._convertSpanToTransaction();s&&(cf(this).scope||We()).captureEvent(s)}_convertSpanToTransaction(){var p;if(!YN(Re(this)))return;this._name||(xe&&Y.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");const{scope:t,isolationScope:r}=cf(this),s=(p=t==null?void 0:t.getScopeData().sdkProcessingMetadata)==null?void 0:p.normalizedRequest;if(this._sampled!==!0)return;const i=Ld(this).filter(f=>f!==this&&!CL(f)).map(f=>Re(f)).filter(YN),o=this._attributes[xt];delete this._attributes[ab],i.forEach(f=>{delete f.data[ab]});const d={contexts:{trace:tL(this)},spans:i.length>KN?i.sort((f,x)=>f.start_timestamp-x.start_timestamp).slice(0,KN):i,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:t,capturedSpanIsolationScope:r,dynamicSamplingContext:Ns(this)},request:s,...o&&{transaction_info:{source:o}}},u=GN(this._events);return u&&Object.keys(u).length&&(xe&&Y.log("[Measurements] Adding measurements to transaction event",JSON.stringify(u,void 0,2)),d.measurements=u),d}}function VN(e){return e&&typeof e=="number"||e instanceof Date||Array.isArray(e)}function YN(e){return!!e.start_timestamp&&!!e.timestamp&&!!e.span_id&&!!e.trace_id}function CL(e){return e instanceof Qf&&e.isStandaloneSpan()}function TL(e){const t=be();if(!t)return;const r=e[1];if(!r||r.length===0){t.recordDroppedEvent("before_send","span");return}t.sendEnvelope(e)}function Xf(e,t,r=()=>{},s=()=>{}){let a;try{a=e()}catch(i){throw t(i),r(),i}return RL(a,t,r,s)}function RL(e,t,r,s){return Fo(e)?e.then(a=>(r(),s(a),a),a=>{throw t(a),r(),a}):(r(),s(e),e)}function IL(e,t,r){if(!Vr(e))return[!1];let s,a;typeof e.tracesSampler=="function"?(a=e.tracesSampler({...t,inheritOrSampleWith:d=>typeof t.parentSampleRate=="number"?t.parentSampleRate:typeof t.parentSampled=="boolean"?Number(t.parentSampled):d}),s=!0):t.parentSampled!==void 0?a=t.parentSampled:typeof e.tracesSampleRate<"u"&&(a=e.tracesSampleRate,s=!0);const i=Eo(a);if(i===void 0)return xe&&Y.warn(`[Tracing] Discarding root span because of invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(a)} of type ${JSON.stringify(typeof a)}.`),[!1];if(!i)return xe&&Y.log(`[Tracing] Discarding transaction because ${typeof e.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),[!1,i,s];const o=r<i;return o||xe&&Y.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(a)})`),[o,i,s]}const mf="__SENTRY_SUPPRESS_TRACING__";function Hs(e,t){const r=wu();if(r.startSpan)return r.startSpan(e,t);const s=Sy(e),{forceTransaction:a,parentSpan:i,scope:o}=e,d=o==null?void 0:o.clone();return br(d,()=>PE(i)(()=>{const h=We(),p=ky(h,i),x=e.onlyIfParent&&!p?new ja:Ny({parentSpan:p,spanArguments:s,forceTransaction:a,scope:h});return qs(h,x),Xf(()=>t(x),()=>{const{status:y}=Re(x);x.isRecording()&&(!y||y==="ok")&&x.setStatus({code:ot,message:"internal_error"})},()=>{x.end()})}))}function da(e,t){const r=wu();if(r.startSpanManual)return r.startSpanManual(e,t);const s=Sy(e),{forceTransaction:a,parentSpan:i,scope:o}=e,d=o==null?void 0:o.clone();return br(d,()=>PE(i)(()=>{const h=We(),p=ky(h,i),x=e.onlyIfParent&&!p?new ja:Ny({parentSpan:p,spanArguments:s,forceTransaction:a,scope:h});return qs(h,x),Xf(()=>t(x,()=>x.end()),()=>{const{status:y}=Re(x);x.isRecording()&&(!y||y==="ok")&&x.setStatus({code:ot,message:"internal_error"})})}))}function Yr(e){const t=wu();if(t.startInactiveSpan)return t.startInactiveSpan(e);const r=Sy(e),{forceTransaction:s,parentSpan:a}=e;return(e.scope?o=>br(e.scope,o):a!==void 0?o=>To(a,o):o=>o())(()=>{const o=We(),d=ky(o,a);return e.onlyIfParent&&!d?new ja:Ny({parentSpan:d,spanArguments:r,forceTransaction:s,scope:o})})}const PL=(e,t)=>{const r=Ea(),s=Pi(r);if(s.continueTrace)return s.continueTrace(e,t);const{sentryTrace:a,baggage:i}=e,o=be(),d=wy(i);return o&&!eL(o,d==null?void 0:d.org_id)?IE(t):br(u=>{const h=pE(a,i);return u.setPropagationContext(h),qs(u,void 0),t()})};function To(e,t){const r=wu();return r.withActiveSpan?r.withActiveSpan(e,t):br(s=>(qs(s,e||void 0),t(s)))}function RE(e){const t=wu();return t.suppressTracing?t.suppressTracing(e):br(r=>{r.setSDKProcessingMetadata({[mf]:!0});const s=e();return r.setSDKProcessingMetadata({[mf]:void 0}),s})}function IE(e){return br(t=>(t.setPropagationContext({traceId:Us(),sampleRand:Math.random()}),xe&&Y.log(`Starting a new trace with id ${t.getPropagationContext().traceId}`),To(null,e)))}function Ny({parentSpan:e,spanArguments:t,forceTransaction:r,scope:s}){if(!Vr()){const o=new ja;if(r||!e){const d={sampled:"false",sample_rate:"0",transaction:t.name,...Ns(o)};Rm(o,d)}return o}const a=hn();let i;if(e&&!r)i=AL(e,s,t),jE(e,i);else if(e){const o=Ns(e),{traceId:d,spanId:u}=e.spanContext(),h=Ai(e);i=JN({traceId:d,parentSpanId:u,...t},s,h),Rm(i,o)}else{const{traceId:o,dsc:d,parentSpanId:u,sampled:h}={...a.getPropagationContext(),...s.getPropagationContext()};i=JN({traceId:o,parentSpanId:u,...t},s,h),d&&Rm(i,d)}return kL(i),BO(i,s,a),i}function Sy(e){const r={isStandalone:(e.experimental||{}).standalone,...e};if(e.startTime){const s={...r};return s.startTimestamp=wo(e.startTime),delete s.startTime,s}return r}function wu(){const e=Ea();return Pi(e)}function JN(e,t,r){var b;const s=be(),a=(s==null?void 0:s.getOptions())||{},{name:i=""}=e,o={spanAttributes:{...e.attributes},spanName:i,parentSampled:r};s==null||s.emit("beforeSampling",o,{decision:!1});const d=o.parentSampled??r,u=o.spanAttributes,h=t.getPropagationContext(),[p,f,x]=t.getScopeData().sdkProcessingMetadata[mf]?[!1]:IL(a,{name:i,parentSampled:d,attributes:u,parentSampleRate:Eo((b=h.dsc)==null?void 0:b.sample_rate)},h.sampleRand),y=new Qf({...e,attributes:{[xt]:"custom",[Kf]:f!==void 0&&x?f:void 0,...u},sampled:p});return!p&&s&&(xe&&Y.log("[Tracing] Discarding root span because its trace was not chosen to be sampled."),s.recordDroppedEvent("sample_rate","transaction")),s&&s.emit("spanStart",y),y}function AL(e,t,r){const{spanId:s,traceId:a}=e.spanContext(),i=t.getScopeData().sdkProcessingMetadata[mf]?!1:Ai(e),o=i?new Qf({...r,parentSpanId:s,traceId:a,sampled:i}):new ja({traceId:a});jE(e,o);const d=be();return d&&(d.emit("spanStart",o),r.endTimestamp&&d.emit("spanEnd",o)),o}function ky(e,t){if(t)return t;if(t===null)return;const r=sc(e);if(!r)return;const s=be();return(s?s.getOptions():{}).parentSpanIsAlwaysRootSpan?Kt(r):r}function PE(e){return e!==void 0?t=>To(e,t):t=>t()}const Im={idleTimeout:1e3,finalTimeout:3e4,childSpanTimeout:15e3},ML="heartbeatFailed",OL="idleTimeout",LL="finalTimeout",$L="externalFinish";function AE(e,t={}){const r=new Map;let s=!1,a,i=$L,o=!t.disableAutoFinish;const d=[],{idleTimeout:u=Im.idleTimeout,finalTimeout:h=Im.finalTimeout,childSpanTimeout:p=Im.childSpanTimeout,beforeSpanEnd:f,trimIdleSpanEndTimestamp:x=!0}=t,y=be();if(!y||!Vr()){const I=new ja,M={sample_rate:"0",sampled:"false",...Ns(I)};return Rm(I,M),I}const b=We(),w=Vt(),v=DL(e);v.end=new Proxy(v.end,{apply(I,M,O){if(f&&f(v),M instanceof ja)return;const[L,...P]=O,$=L||At(),B=wo($),D=Ld(v).filter(J=>J!==v),se=Re(v);if(!D.length||!x)return E(B),Reflect.apply(I,M,[B,...P]);const X=y.getOptions().ignoreSpans,ee=D==null?void 0:D.reduce((J,U)=>{const G=Re(U);return!G.timestamp||X&&df(G,X)?J:J?Math.max(J,G.timestamp):G.timestamp},void 0),F=se.start_timestamp,Q=Math.min(F?F+h/1e3:1/0,Math.max(F||-1/0,Math.min(B,ee||1/0)));return E(Q),Reflect.apply(I,M,[Q,...P])}});function j(){a&&(clearTimeout(a),a=void 0)}function C(I){j(),a=setTimeout(()=>{!s&&r.size===0&&o&&(i=OL,v.end(I))},u)}function S(I){a=setTimeout(()=>{!s&&o&&(i=ML,v.end(I))},p)}function k(I){j(),r.set(I,!0);const M=At();S(M+p/1e3)}function R(I){if(r.has(I)&&r.delete(I),r.size===0){const M=At();C(M+u/1e3)}}function E(I){s=!0,r.clear(),d.forEach(D=>D()),qs(b,w);const M=Re(v),{start_timestamp:O}=M;if(!O)return;M.data[Qd]||v.setAttribute(Qd,i);const P=M.status;(!P||P==="unknown")&&v.setStatus({code:Vf}),Y.log(`[Tracing] Idle span "${M.op}" finished`);const $=Ld(v).filter(D=>D!==v);let B=0;$.forEach(D=>{D.isRecording()&&(D.setStatus({code:ot,message:"cancelled"}),D.end(I),xe&&Y.log("[Tracing] Cancelling span since span ended early",JSON.stringify(D,void 0,2)));const se=Re(D),{timestamp:X=0,start_timestamp:ee=0}=se,F=ee<=I,Q=(h+u)/1e3,J=X-ee<=Q;if(xe){const U=JSON.stringify(D,void 0,2);F?J||Y.log("[Tracing] Discarding span since it finished after idle span final timeout",U):Y.log("[Tracing] Discarding span since it happened after idle span was finished",U)}(!J||!F)&&(aL(v,D),B++)}),B>0&&v.setAttribute("sentry.idle_span_discarded_spans",B)}return d.push(y.on("spanStart",I=>{if(s||I===v||Re(I).timestamp||I instanceof Qf&&I.isStandaloneSpan())return;Ld(v).includes(I)&&k(I.spanContext().spanId)})),d.push(y.on("spanEnd",I=>{s||R(I.spanContext().spanId)})),d.push(y.on("idleSpanEnableAutoFinish",I=>{I===v&&(o=!0,C(),r.size&&S())})),t.disableAutoFinish||C(),setTimeout(()=>{s||(v.setStatus({code:ot,message:"deadline_exceeded"}),i=LL,v.end())},h),v}function DL(e){const t=Yr(e);return qs(We(),t),xe&&Y.log("[Tracing] Started span is an idle span"),t}const Jg=0,QN=1,XN=2;function Zf(e){return new Zd(t=>{t(e)})}function Ey(e){return new Zd((t,r)=>{r(e)})}class Zd{constructor(t){this._state=Jg,this._handlers=[],this._runExecutor(t)}then(t,r){return new Zd((s,a)=>{this._handlers.push([!1,i=>{if(!t)s(i);else try{s(t(i))}catch(o){a(o)}},i=>{if(!r)a(i);else try{s(r(i))}catch(o){a(o)}}]),this._executeHandlers()})}catch(t){return this.then(r=>r,t)}finally(t){return new Zd((r,s)=>{let a,i;return this.then(o=>{i=!1,a=o,t&&t()},o=>{i=!0,a=o,t&&t()}).then(()=>{if(i){s(a);return}r(a)})})}_executeHandlers(){if(this._state===Jg)return;const t=this._handlers.slice();this._handlers=[],t.forEach(r=>{r[0]||(this._state===QN&&r[1](this._value),this._state===XN&&r[2](this._value),r[0]=!0)})}_runExecutor(t){const r=(i,o)=>{if(this._state===Jg){if(Fo(o)){o.then(s,a);return}this._state=i,this._value=o,this._executeHandlers()}},s=i=>{r(QN,i)},a=i=>{r(XN,i)};try{t(s,a)}catch(i){a(i)}}}function FL(e,t,r,s=0){try{const a=cb(t,r,e,s);return Fo(a)?a:Zf(a)}catch(a){return Ey(a)}}function cb(e,t,r,s){const a=r[s];if(!e||!a)return e;const i=a({...e},t);return xe&&i===null&&Y.log(`Event processor "${a.id||"?"}" dropped event`),Fo(i)?i.then(o=>cb(o,t,r,s+1)):cb(i,t,r,s+1)}function UL(e,t){const{fingerprint:r,span:s,breadcrumbs:a,sdkProcessingMetadata:i}=t;qL(e,t),s&&WL(e,s),zL(e,r),BL(e,a),HL(e,i)}function ic(e,t){const{extra:r,tags:s,attributes:a,user:i,contexts:o,level:d,sdkProcessingMetadata:u,breadcrumbs:h,fingerprint:p,eventProcessors:f,attachments:x,propagationContext:y,transactionName:b,span:w}=t;jd(e,"extra",r),jd(e,"tags",s),jd(e,"attributes",a),jd(e,"user",i),jd(e,"contexts",o),e.sdkProcessingMetadata=bu(e.sdkProcessingMetadata,u,2),d&&(e.level=d),b&&(e.transactionName=b),w&&(e.span=w),h.length&&(e.breadcrumbs=[...e.breadcrumbs,...h]),p.length&&(e.fingerprint=[...e.fingerprint,...p]),f.length&&(e.eventProcessors=[...e.eventProcessors,...f]),x.length&&(e.attachments=[...e.attachments,...x]),e.propagationContext={...e.propagationContext,...y}}function jd(e,t,r){e[t]=bu(e[t],r,1)}function qL(e,t){const{extra:r,tags:s,user:a,contexts:i,level:o,transactionName:d}=t;Object.keys(r).length&&(e.extra={...r,...e.extra}),Object.keys(s).length&&(e.tags={...s,...e.tags}),Object.keys(a).length&&(e.user={...a,...e.user}),Object.keys(i).length&&(e.contexts={...i,...e.contexts}),o&&(e.level=o),d&&e.type!=="transaction"&&(e.transaction=d)}function BL(e,t){const r=[...e.breadcrumbs||[],...t];e.breadcrumbs=r.length?r:void 0}function HL(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}function WL(e,t){e.contexts={trace:yE(t),...e.contexts},e.sdkProcessingMetadata={dynamicSamplingContext:Ns(t),...e.sdkProcessingMetadata};const r=Kt(t),s=Re(r).description;s&&!e.transaction&&e.type==="transaction"&&(e.transaction=s)}function zL(e,t){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],t&&(e.fingerprint=e.fingerprint.concat(t)),e.fingerprint.length||delete e.fingerprint}let ea,ZN,e1,Ya;function ME(e){const t=Me._sentryDebugIds,r=Me._debugIds;if(!t&&!r)return{};const s=t?Object.keys(t):[],a=r?Object.keys(r):[];if(Ya&&s.length===ZN&&a.length===e1)return Ya;ZN=s.length,e1=a.length,Ya={},ea||(ea={});const i=(o,d)=>{for(const u of o){const h=d[u],p=ea==null?void 0:ea[u];if(p&&Ya&&h)Ya[p[0]]=h,ea&&(ea[u]=[p[0],h]);else if(h){const f=e(u);for(let x=f.length-1;x>=0;x--){const y=f[x],b=y==null?void 0:y.filename;if(b&&Ya&&ea){Ya[b]=h,ea[u]=[b,h];break}}}}};return t&&i(s,t),r&&i(a,r),Ya}function GL(e,t){const r=ME(e);if(!r)return[];const s=[];for(const a of t)a&&r[a]&&s.push({type:"sourcemap",code_file:a,debug_id:r[a]});return s}function OE(e,t,r,s,a,i){const{normalizeDepth:o=3,normalizeMaxBreadth:d=1e3}=e,u={...t,event_id:t.event_id||r.event_id||gn(),timestamp:t.timestamp||qo()},h=r.integrations||e.integrations.map(v=>v.name);KL(u,e),JL(u,h),a&&a.emit("applyFrameMetadata",t),t.type===void 0&&VL(u,e.stackParser);const p=XL(s,r.captureContext);r.mechanism&&_a(u,r.mechanism);const f=a?a.getEventProcessors():[],x=xa().getScopeData();if(i){const v=i.getScopeData();ic(x,v)}if(p){const v=p.getScopeData();ic(x,v)}const y=[...r.attachments||[],...x.attachments];y.length&&(r.attachments=y),UL(u,x);const b=[...f,...x.eventProcessors];return FL(b,u,r).then(v=>(v&&YL(v),typeof o=="number"&&o>0?QL(v,o,d):v))}function KL(e,t){var d,u;const{environment:r,release:s,dist:a,maxValueLength:i}=t;e.environment=e.environment||r||Yf,!e.release&&s&&(e.release=s),!e.dist&&a&&(e.dist=a);const o=e.request;o!=null&&o.url&&i&&(o.url=Jd(o.url,i)),i&&((u=(d=e.exception)==null?void 0:d.values)==null||u.forEach(h=>{h.value&&(h.value=Jd(h.value,i))}))}function VL(e,t){var s,a;const r=ME(t);(a=(s=e.exception)==null?void 0:s.values)==null||a.forEach(i=>{var o,d;(d=(o=i.stacktrace)==null?void 0:o.frames)==null||d.forEach(u=>{u.filename&&(u.debug_id=r[u.filename])})})}function YL(e){var s,a;const t={};if((a=(s=e.exception)==null?void 0:s.values)==null||a.forEach(i=>{var o,d;(d=(o=i.stacktrace)==null?void 0:o.frames)==null||d.forEach(u=>{u.debug_id&&(u.abs_path?t[u.abs_path]=u.debug_id:u.filename&&(t[u.filename]=u.debug_id),delete u.debug_id)})}),Object.keys(t).length===0)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const r=e.debug_meta.images;Object.entries(t).forEach(([i,o])=>{r.push({type:"sourcemap",code_file:i,debug_id:o})})}function JL(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}function QL(e,t,r){var a,i;if(!e)return null;const s={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(o=>({...o,...o.data&&{data:kr(o.data,t,r)}}))},...e.user&&{user:kr(e.user,t,r)},...e.contexts&&{contexts:kr(e.contexts,t,r)},...e.extra&&{extra:kr(e.extra,t,r)}};return(a=e.contexts)!=null&&a.trace&&s.contexts&&(s.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(s.contexts.trace.data=kr(e.contexts.trace.data,t,r))),e.spans&&(s.spans=e.spans.map(o=>({...o,...o.data&&{data:kr(o.data,t,r)}}))),(i=e.contexts)!=null&&i.flags&&s.contexts&&(s.contexts.flags=kr(e.contexts.flags,3,r)),s}function XL(e,t){if(!t)return e;const r=e?e.clone():new js;return r.update(t),r}function ZL(e){if(e)return e8(e)?{captureContext:e}:n8(e)?{captureContext:e}:e}function e8(e){return e instanceof js||typeof e=="function"}const t8=["user","level","extra","contexts","tags","fingerprint","propagationContext"];function n8(e){return Object.keys(e).some(t=>t8.includes(t))}function mt(e,t){return We().captureException(e,ZL(t))}function LE(e,t){const r=typeof t=="string"?t:void 0,s=typeof t!="string"?{captureContext:t}:void 0;return We().captureMessage(e,r,s)}function Ec(e,t){return We().captureEvent(e,t)}function Cy(e,t){hn().setContext(e,t)}function r8(e){hn().setExtras(e)}function s8(e,t){hn().setExtra(e,t)}function a8(e){hn().setTags(e)}function i8(e,t){hn().setTag(e,t)}function o8(e){hn().setUser(e)}function $E(){return hn().lastEventId()}async function l8(e){const t=be();return t?t.flush(e):(xe&&Y.warn("Cannot flush events. No client defined."),Promise.resolve(!1))}async function c8(e){const t=be();return t?t.close(e):(xe&&Y.warn("Cannot flush events and disable SDK. No client defined."),Promise.resolve(!1))}function d8(){return!!be()}function DE(){const e=be();return(e==null?void 0:e.getOptions().enabled)!==!1&&!!(e!=null&&e.getTransport())}function FE(e){hn().addEventProcessor(e)}function db(e){const t=hn(),r=We(),{userAgent:s}=Me.navigator||{},a=SO({user:r.getUser()||t.getUser(),...s&&{userAgent:s},...e}),i=t.getSession();return(i==null?void 0:i.status)==="ok"&&rc(i,{status:"exited"}),Ty(),t.setSession(a),a}function Ty(){const e=hn(),r=We().getSession()||e.getSession();r&&kO(r),UE(),e.setSession()}function UE(){const e=hn(),t=be(),r=e.getSession();r&&t&&t.captureSession(r)}function ub(e=!1){if(e){Ty();return}UE()}const u8="7";function qE(e){const t=e.protocol?`${e.protocol}:`:"",r=e.port?`:${e.port}`:"";return`${t}//${e.host}${r}${e.path?`/${e.path}`:""}/api/`}function h8(e){return`${qE(e)}${e.projectId}/envelope/`}function m8(e,t){const r={sentry_version:u8};return e.publicKey&&(r.sentry_key=e.publicKey),t&&(r.sentry_client=`${t.name}/${t.version}`),new URLSearchParams(r).toString()}function BE(e,t,r){return t||`${h8(e)}?${m8(e,r)}`}function f8(e,t){const r=mE(e);if(!r)return"";const s=`${qE(r)}embed/error-page/`;let a=`dsn=${Ca(r)}`;for(const i in t)if(i!=="dsn"&&i!=="onClose")if(i==="user"){const o=t.user;if(!o)continue;o.name&&(a+=`&name=${encodeURIComponent(o.name)}`),o.email&&(a+=`&email=${encodeURIComponent(o.email)}`)}else a+=`&${encodeURIComponent(i)}=${encodeURIComponent(t[i])}`;return`${s}?${a}`}const t1=[];function p8(e){const t={};return e.forEach(r=>{const{name:s}=r,a=t[s];a&&!a.isDefaultInstance&&r.isDefaultInstance||(t[s]=r)}),Object.values(t)}function x8(e){const t=e.defaultIntegrations||[],r=e.integrations;t.forEach(a=>{a.isDefaultInstance=!0});let s;if(Array.isArray(r))s=[...t,...r];else if(typeof r=="function"){const a=r(t);s=Array.isArray(a)?a:[a]}else s=t;return p8(s)}function g8(e,t){const r={};return t.forEach(s=>{s&&HE(e,s,r)}),r}function n1(e,t){for(const r of t)r!=null&&r.afterAllSetup&&r.afterAllSetup(e)}function HE(e,t,r){if(r[t.name]){xe&&Y.log(`Integration skipped because it was already installed: ${t.name}`);return}if(r[t.name]=t,!t1.includes(t.name)&&typeof t.setupOnce=="function"&&(t.setupOnce(),t1.push(t.name)),t.setup&&typeof t.setup=="function"&&t.setup(e),typeof t.preprocessEvent=="function"){const s=t.preprocessEvent.bind(t);e.on("preprocessEvent",(a,i)=>s(a,i,e))}if(typeof t.processEvent=="function"){const s=t.processEvent.bind(t),a=Object.assign((i,o)=>s(i,o,e),{id:t.name});e.addEventProcessor(a)}xe&&Y.log(`Integration installed: ${t.name}`)}function hb(e){const t=be();if(!t){xe&&Y.warn(`Cannot add integration "${e.name}" because no SDK Client is available.`);return}t.addIntegration(e)}function b8(e){return typeof e=="object"&&e!=null&&!Array.isArray(e)&&Object.keys(e).includes("value")}function y8(e,t){const{value:r,unit:s}=b8(e)?e:{value:e,unit:void 0},a=v8(r),i=s&&typeof s=="string"?{unit:s}:{};if(a)return{...a,...i};if(!t)return;let o="";try{o=JSON.stringify(r)??""}catch{}return{value:o,type:"string",...i}}function r1(e,t=!1){const r={};for(const[s,a]of Object.entries(e)){const i=y8(a,t);i&&(r[s]=i)}return r}function v8(e){const t=typeof e=="string"?"string":typeof e=="boolean"?"boolean":typeof e=="number"&&!Number.isNaN(e)?Number.isInteger(e)?"integer":"double":null;if(t)return{value:e,type:t}}function WE(e,t){return t?br(t,()=>{const r=Vt(),s=r?yE(r):sE(t);return[r?Ns(r):jy(e,t),s]}):[void 0,void 0]}const w8={trace:1,debug:5,info:9,warn:13,error:17,fatal:21};function _8(e){return[{type:"log",item_count:e.length,content_type:"application/vnd.sentry.items.log+json"},{items:e}]}function j8(e,t,r,s){const a={};return t!=null&&t.sdk&&(a.sdk={name:t.sdk.name,version:t.sdk.version}),r&&s&&(a.dsn=Ca(s)),Es(a,[_8(e)])}const N8=100;function As(e,t,r,s=!0){r&&(!e[t]||s)&&(e[t]=r)}function S8(e,t){const r=Iy(),s=zE(e);s===void 0?r.set(e,[t]):s.length>=N8?(Ry(e,s),r.set(e,[t])):r.set(e,[...s,t])}function ff(e,t=We(),r=S8){var P;const s=(t==null?void 0:t.getClient())??be();if(!s){xe&&Y.warn("No client available to capture log.");return}const{release:a,environment:i,enableLogs:o=!1,beforeSendLog:d}=s.getOptions();if(!o){xe&&Y.warn("logging option not enabled, log will not be captured.");return}const[,u]=WE(s,t),h={...e.attributes},{user:{id:p,email:f,username:x},attributes:y={}}=k8(t);As(h,"user.id",p,!1),As(h,"user.email",f,!1),As(h,"user.name",x,!1),As(h,"sentry.release",a),As(h,"sentry.environment",i);const{name:b,version:w}=((P=s.getSdkMetadata())==null?void 0:P.sdk)??{};As(h,"sentry.sdk.name",b),As(h,"sentry.sdk.version",w);const v=s.getIntegrationByName("Replay"),j=v==null?void 0:v.getReplayId(!0);As(h,"sentry.replay_id",j),j&&(v==null?void 0:v.getRecordingMode())==="buffer"&&As(h,"sentry._internal.replay_is_buffering",!0);const C=e.message;if(zf(C)){const{__sentry_template_string__:$,__sentry_template_values__:B=[]}=C;B!=null&&B.length&&(h["sentry.message.template"]=$),B.forEach((D,se)=>{h[`sentry.message.parameter.${se}`]=D})}const S=sc(t);As(h,"sentry.trace.parent_span_id",S==null?void 0:S.spanContext().spanId);const k={...e,attributes:h};s.emit("beforeCaptureLog",k);const R=d?Ti(()=>d(k)):k;if(!R){s.recordDroppedEvent("before_send","log_item",1),xe&&Y.warn("beforeSendLog returned null, log will not be captured.");return}const{level:E,message:I,attributes:M={},severityNumber:O}=R,L={timestamp:At(),level:E,body:I,trace_id:u==null?void 0:u.trace_id,severity_number:O??w8[E],attributes:{...r1(y),...r1(M,!0)}};r(s,L),s.emit("afterCaptureLog",R)}function Ry(e,t){const r=t??zE(e)??[];if(r.length===0)return;const s=e.getOptions(),a=j8(r,s._metadata,s.tunnel,e.getDsn());Iy().set(e,[]),e.emit("flushLogs"),e.sendEnvelope(a)}function zE(e){return Iy().get(e)}function k8(e){const t=xa().getScopeData();return ic(t,hn().getScopeData()),ic(t,e.getScopeData()),t}function Iy(){return Nc("clientToLogBufferMap",()=>new WeakMap)}function E8(e){return[{type:"trace_metric",item_count:e.length,content_type:"application/vnd.sentry.items.trace-metric+json"},{items:e}]}function C8(e,t,r,s){const a={};return t!=null&&t.sdk&&(a.sdk={name:t.sdk.name,version:t.sdk.version}),r&&s&&(a.dsn=Ca(s)),Es(a,[E8(e)])}const T8=1e3;function R8(e){switch(typeof e){case"number":return Number.isInteger(e)?{value:e,type:"integer"}:{value:e,type:"double"};case"boolean":return{value:e,type:"boolean"};case"string":return{value:e,type:"string"};default:{let t="";try{t=JSON.stringify(e)??""}catch{}return{value:t,type:"string"}}}}function ta(e,t,r,s=!0){r&&(s||!(t in e))&&(e[t]=r)}function I8(e,t){const r=Ay(),s=GE(e);s===void 0?r.set(e,[t]):s.length>=T8?(Py(e,s),r.set(e,[t])):r.set(e,[...s,t])}function P8(e,t,r){var y;const{release:s,environment:a}=t.getOptions(),i={...e.attributes},{user:{id:o,email:d,username:u}}=O8(r);ta(i,"user.id",o,!1),ta(i,"user.email",d,!1),ta(i,"user.name",u,!1),ta(i,"sentry.release",s),ta(i,"sentry.environment",a);const{name:h,version:p}=((y=t.getSdkMetadata())==null?void 0:y.sdk)??{};ta(i,"sentry.sdk.name",h),ta(i,"sentry.sdk.version",p);const f=t.getIntegrationByName("Replay"),x=f==null?void 0:f.getReplayId(!0);return ta(i,"sentry.replay_id",x),x&&(f==null?void 0:f.getRecordingMode())==="buffer"&&ta(i,"sentry._internal.replay_is_buffering",!0),{...e,attributes:i}}function A8(e,t,r){const s={};for(const u in e.attributes)e.attributes[u]!==void 0&&(s[u]=R8(e.attributes[u]));const[,a]=WE(t,r),i=sc(r),o=i?i.spanContext().traceId:a==null?void 0:a.trace_id,d=i?i.spanContext().spanId:void 0;return{timestamp:At(),trace_id:o??"",span_id:d,name:e.name,type:e.type,unit:e.unit,value:e.value,attributes:s}}function M8(e,t){const r=(t==null?void 0:t.scope)??We(),s=(t==null?void 0:t.captureSerializedMetric)??I8,a=(r==null?void 0:r.getClient())??be();if(!a){xe&&Y.warn("No client available to capture metric.");return}const{_experiments:i,enableMetrics:o,beforeSendMetric:d}=a.getOptions();if(!(o??(i==null?void 0:i.enableMetrics)??!0)){xe&&Y.warn("metrics option not enabled, metric will not be captured.");return}const h=P8(e,a,r);a.emit("processMetric",h);const p=d||(i==null?void 0:i.beforeSendMetric),f=p?p(h):h;if(!f){xe&&Y.log("`beforeSendMetric` returned `null`, will not send metric.");return}const x=A8(f,a,r);xe&&Y.log("[Metric]",x),s(a,x),a.emit("afterCaptureMetric",f)}function Py(e,t){const r=t??GE(e)??[];if(r.length===0)return;const s=e.getOptions(),a=C8(r,s._metadata,s.tunnel,e.getDsn());Ay().set(e,[]),e.emit("flushMetrics"),e.sendEnvelope(a)}function GE(e){return Ay().get(e)}function O8(e){const t=xa().getScopeData();return ic(t,hn().getScopeData()),ic(t,e.getScopeData()),t}function Ay(){return Nc("clientToMetricBufferMap",()=>new WeakMap)}const My=Symbol.for("SentryBufferFullError");function Oy(e=100){const t=new Set;function r(){return t.size<e}function s(o){t.delete(o)}function a(o){if(!r())return Ey(My);const d=o();return t.add(d),d.then(()=>s(d),()=>s(d)),d}function i(o){if(!t.size)return Zf(!0);const d=Promise.allSettled(Array.from(t)).then(()=>!0);if(!o)return d;const u=[d,new Promise(h=>setTimeout(()=>h(!1),o))];return Promise.race(u)}return{get $(){return Array.from(t)},add:a,drain:i}}const L8=60*1e3;function KE(e,t=Date.now()){const r=parseInt(`${e}`,10);if(!isNaN(r))return r*1e3;const s=Date.parse(`${e}`);return isNaN(s)?L8:s-t}function $8(e,t){return e[t]||e.all||0}function VE(e,t,r=Date.now()){return $8(e,t)>r}function YE(e,{statusCode:t,headers:r},s=Date.now()){const a={...e},i=r==null?void 0:r["x-sentry-rate-limits"],o=r==null?void 0:r["retry-after"];if(i)for(const d of i.trim().split(",")){const[u,h,,,p]=d.split(":",5),f=parseInt(u,10),x=(isNaN(f)?60:f)*1e3;if(!h)a.all=s+x;else for(const y of h.split(";"))y==="metric_bucket"?(!p||p.split(";").includes("custom"))&&(a[y]=s+x):a[y]=s+x}else o?a.all=s+KE(o,s):t===429&&(a.all=s+60*1e3);return a}const JE=64;function QE(e,t,r=Oy(e.bufferSize||JE)){let s={};const a=o=>r.drain(o);function i(o){const d=[];if(Co(o,(f,x)=>{const y=zN(x);VE(s,y)?e.recordDroppedEvent("ratelimit_backoff",y):d.push(f)}),d.length===0)return Promise.resolve({});const u=Es(o[0],d),h=f=>{Co(u,(x,y)=>{e.recordDroppedEvent(f,zN(y))})},p=()=>t({body:hf(u)}).then(f=>(f.statusCode!==void 0&&(f.statusCode<200||f.statusCode>=300)&&xe&&Y.warn(`Sentry responded with status code ${f.statusCode} to sent event.`),s=YE(s,f),f),f=>{throw h("network_error"),xe&&Y.error("Encountered error running transport request:",f),f});return r.add(p).then(f=>f,f=>{if(f===My)return xe&&Y.error("Skipped sending event because buffer is full."),h("queue_overflow"),Promise.resolve({});throw f})}return{send:i,flush:a}}function D8(e,t,r){const s=[{type:"client_report"},{timestamp:qo(),discarded_events:e}];return Es(t?{dsn:t}:{},[s])}function XE(e){const t=[];e.message&&t.push(e.message);try{const r=e.exception.values[e.exception.values.length-1];r!=null&&r.value&&(t.push(r.value),r.type&&t.push(`${r.type}: ${r.value}`))}catch{}return t}function F8(e){var u;const{trace_id:t,parent_span_id:r,span_id:s,status:a,origin:i,data:o,op:d}=((u=e.contexts)==null?void 0:u.trace)??{};return{data:o??{},description:e.transaction,op:d,parent_span_id:r,span_id:s??"",start_timestamp:e.start_timestamp??0,status:a,timestamp:e.timestamp,trace_id:t??"",origin:i,profile_id:o==null?void 0:o[yy],exclusive_time:o==null?void 0:o[kc],measurements:e.measurements,is_segment:!0}}function U8(e){return{type:"transaction",timestamp:e.timestamp,start_timestamp:e.start_timestamp,transaction:e.description,contexts:{trace:{trace_id:e.trace_id,span_id:e.span_id,parent_span_id:e.parent_span_id,op:e.op,status:e.status,origin:e.origin,data:{...e.data,...e.profile_id&&{[yy]:e.profile_id},...e.exclusive_time&&{[kc]:e.exclusive_time}}}},measurements:e.measurements}}const s1="Not capturing exception because it's already been captured.",a1="Discarded session because of missing or non-string release",ZE=Symbol.for("SentryInternalError"),e5=Symbol.for("SentryDoNotSendEventError"),q8=5e3;function Pm(e){return{message:e,[ZE]:!0}}function Qg(e){return{message:e,[e5]:!0}}function i1(e){return!!e&&typeof e=="object"&&ZE in e}function o1(e){return!!e&&typeof e=="object"&&e5 in e}function l1(e,t,r,s,a){let i=0,o,d=!1;e.on(r,()=>{i=0,clearTimeout(o),d=!1}),e.on(t,u=>{i+=s(u),i>=8e5?a(e):d||(d=!0,o=setTimeout(()=>{a(e)},q8))}),e.on("flush",()=>{a(e)})}class B8{constructor(t){var s,a,i;if(this._options=t,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],this._promiseBuffer=Oy(((s=t.transportOptions)==null?void 0:s.bufferSize)??JE),t.dsn?this._dsn=mE(t.dsn):xe&&Y.warn("No DSN provided, client will not send events."),this._dsn){const o=BE(this._dsn,t.tunnel,t._metadata?t._metadata.sdk:void 0);this._transport=t.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:o})}this._options.enableLogs=this._options.enableLogs??((a=this._options._experiments)==null?void 0:a.enableLogs),this._options.enableLogs&&l1(this,"afterCaptureLog","flushLogs",G8,Ry),(this._options.enableMetrics??((i=this._options._experiments)==null?void 0:i.enableMetrics)??!0)&&l1(this,"afterCaptureMetric","flushMetrics",z8,Py)}captureException(t,r,s){const a=gn();if(LN(t))return xe&&Y.log(s1),a;const i={event_id:a,...r};return this._process(()=>this.eventFromException(t,i).then(o=>this._captureEvent(o,i,s)).then(o=>o),"error"),i.event_id}captureMessage(t,r,s,a){const i={event_id:gn(),...s},o=zf(t)?t:String(t),d=_i(t),u=d?this.eventFromMessage(o,r,i):this.eventFromException(t,i);return this._process(()=>u.then(h=>this._captureEvent(h,i,a)),d?"unknown":"error"),i.event_id}captureEvent(t,r,s){const a=gn();if(r!=null&&r.originalException&&LN(r.originalException))return xe&&Y.log(s1),a;const i={event_id:a,...r},o=t.sdkProcessingMetadata||{},d=o.capturedSpanScope,u=o.capturedSpanIsolationScope,h=c1(t.type);return this._process(()=>this._captureEvent(t,i,d||s,u),h),i.event_id}captureSession(t){this.sendSession(t),rc(t,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}async flush(t){const r=this._transport;if(!r)return!0;this.emit("flush");const s=await this._isClientDoneProcessing(t),a=await r.flush(t);return s&&a}async close(t){const r=await this.flush(t);return this.getOptions().enabled=!1,this.emit("close"),r}getEventProcessors(){return this._eventProcessors}addEventProcessor(t){this._eventProcessors.push(t)}init(){(this._isEnabled()||this._options.integrations.some(({name:t})=>t.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(t){return this._integrations[t]}addIntegration(t){const r=this._integrations[t.name];HE(this,t,this._integrations),r||n1(this,[t])}sendEvent(t,r={}){this.emit("beforeSendEvent",t,r);let s=NL(t,this._dsn,this._options._metadata,this._options.tunnel);for(const a of r.attachments||[])s=pL(s,vL(a));this.sendEnvelope(s).then(a=>this.emit("afterSendEvent",t,a))}sendSession(t){const{release:r,environment:s=Yf}=this._options;if("aggregates"in t){const i=t.attrs||{};if(!i.release&&!r){xe&&Y.warn(a1);return}i.release=i.release||r,i.environment=i.environment||s,t.attrs=i}else{if(!t.release&&!r){xe&&Y.warn(a1);return}t.release=t.release||r,t.environment=t.environment||s}this.emit("beforeSendSession",t);const a=jL(t,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(a)}recordDroppedEvent(t,r,s=1){if(this._options.sendClientReports){const a=`${t}:${r}`;xe&&Y.log(`Recording outcome: "${a}"${s>1?` (${s} times)`:""}`),this._outcomes[a]=(this._outcomes[a]||0)+s}}on(t,r){const s=this._hooks[t]=this._hooks[t]||new Set,a=(...i)=>r(...i);return s.add(a),()=>{s.delete(a)}}emit(t,...r){const s=this._hooks[t];s&&s.forEach(a=>a(...r))}async sendEnvelope(t){if(this.emit("beforeEnvelope",t),this._isEnabled()&&this._transport)try{return await this._transport.send(t)}catch(r){return xe&&Y.error("Error while sending envelope:",r),{}}return xe&&Y.error("Transport disabled"),{}}_setupIntegrations(){const{integrations:t}=this._options;this._integrations=g8(this,t),n1(this,t)}_updateSessionFromEvent(t,r){var u,h;let s=r.level==="fatal",a=!1;const i=(u=r.exception)==null?void 0:u.values;if(i){a=!0,s=!1;for(const p of i)if(((h=p.mechanism)==null?void 0:h.handled)===!1){s=!0;break}}const o=t.status==="ok";(o&&t.errors===0||o&&s)&&(rc(t,{...s&&{status:"crashed"},errors:t.errors||Number(a||s)}),this.captureSession(t))}async _isClientDoneProcessing(t){let r=0;for(;!t||r<t;){if(await new Promise(s=>setTimeout(s,1)),!this._numProcessing)return!0;r++}return!1}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(t,r,s,a){const i=this.getOptions(),o=Object.keys(this._integrations);return!r.integrations&&(o!=null&&o.length)&&(r.integrations=o),this.emit("preprocessEvent",t,r),t.type||a.setLastEventId(t.event_id||r.event_id),OE(i,t,r,s,this,a).then(d=>{if(d===null)return d;this.emit("postprocessEvent",d,r),d.contexts={trace:sE(s),...d.contexts};const u=jy(this,s);return d.sdkProcessingMetadata={dynamicSamplingContext:u,...d.sdkProcessingMetadata},d})}_captureEvent(t,r={},s=We(),a=hn()){return xe&&mb(t)&&Y.log(`Captured error event \`${XE(t)[0]||"<unknown>"}\``),this._processEvent(t,r,s,a).then(i=>i.event_id,i=>{xe&&(o1(i)?Y.log(i.message):i1(i)?Y.warn(i.message):Y.warn(i))})}_processEvent(t,r,s,a){const i=this.getOptions(),{sampleRate:o}=i,d=t5(t),u=mb(t),p=`before send for type \`${t.type||"error"}\``,f=typeof o>"u"?void 0:Eo(o);if(u&&typeof f=="number"&&Math.random()>f)return this.recordDroppedEvent("sample_rate","error"),Ey(Qg(`Discarding event because it's not included in the random sample (sampling rate = ${o})`));const x=c1(t.type);return this._prepareEvent(t,r,s,a).then(y=>{if(y===null)throw this.recordDroppedEvent("event_processor",x),Qg("An event processor returned `null`, will not send event.");if(r.data&&r.data.__sentry__===!0)return y;const w=W8(this,i,y,r);return H8(w,p)}).then(y=>{var v;if(y===null){if(this.recordDroppedEvent("before_send",x),d){const C=1+(t.spans||[]).length;this.recordDroppedEvent("before_send","span",C)}throw Qg(`${p} returned \`null\`, will not send event.`)}const b=s.getSession()||a.getSession();if(u&&b&&this._updateSessionFromEvent(b,y),d){const j=((v=y.sdkProcessingMetadata)==null?void 0:v.spanCountBeforeProcessing)||0,C=y.spans?y.spans.length:0,S=j-C;S>0&&this.recordDroppedEvent("before_send","span",S)}const w=y.transaction_info;if(d&&w&&y.transaction!==t.transaction){const j="custom";y.transaction_info={...w,source:j}}return this.sendEvent(y,r),y}).then(null,y=>{throw o1(y)||i1(y)?y:(this.captureException(y,{mechanism:{handled:!1,type:"internal"},data:{__sentry__:!0},originalException:y}),Pm(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${y}`))})}_process(t,r){this._numProcessing++,this._promiseBuffer.add(t).then(s=>(this._numProcessing--,s),s=>(this._numProcessing--,s===My&&this.recordDroppedEvent("queue_overflow",r),s))}_clearOutcomes(){const t=this._outcomes;return this._outcomes={},Object.entries(t).map(([r,s])=>{const[a,i]=r.split(":");return{reason:a,category:i,quantity:s}})}_flushOutcomes(){xe&&Y.log("Flushing outcomes...");const t=this._clearOutcomes();if(t.length===0){xe&&Y.log("No outcomes to send");return}if(!this._dsn){xe&&Y.log("No dsn provided, will not send outcomes");return}xe&&Y.log("Sending outcomes:",t);const r=D8(t,this._options.tunnel&&Ca(this._dsn));this.sendEnvelope(r)}}function c1(e){return e==="replay_event"?"replay":e||"error"}function H8(e,t){const r=`${t} must return \`null\` or a valid event.`;if(Fo(e))return e.then(s=>{if(!Ds(s)&&s!==null)throw Pm(r);return s},s=>{throw Pm(`${t} rejected with ${s}`)});if(!Ds(e)&&e!==null)throw Pm(r);return e}function W8(e,t,r,s){const{beforeSend:a,beforeSendTransaction:i,beforeSendSpan:o,ignoreSpans:d}=t;let u=r;if(mb(u)&&a)return a(u,s);if(t5(u)){if(o||d){const h=F8(u);if(d!=null&&d.length&&df(h,d))return null;if(o){const p=o(h);p?u=bu(r,U8(p)):ob()}if(u.spans){const p=[],f=u.spans;for(const y of f){if(d!=null&&d.length&&df(y,d)){oL(f,y);continue}if(o){const b=o(y);b?p.push(b):(ob(),p.push(y))}else p.push(y)}const x=u.spans.length-p.length;x&&e.recordDroppedEvent("before_send","span",x),u.spans=p}}if(i){if(u.spans){const h=u.spans.length;u.sdkProcessingMetadata={...r.sdkProcessingMetadata,spanCountBeforeProcessing:h}}return i(u,s)}}return u}function mb(e){return e.type===void 0}function t5(e){return e.type==="transaction"}function z8(e){let t=0;return e.name&&(t+=e.name.length*2),t+=8,t+n5(e.attributes)}function G8(e){let t=0;return e.message&&(t+=e.message.length*2),t+n5(e.attributes)}function n5(e){if(!e)return 0;let t=0;return Object.values(e).forEach(r=>{Array.isArray(r)?t+=r.length*d1(r[0]):_i(r)?t+=d1(r):t+=100}),t}function d1(e){return typeof e=="string"?e.length*2:typeof e=="number"?8:typeof e=="boolean"?4:0}function K8(e,t){t.debug===!0&&(xe?Y.enable():Ti(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),We().update(t.initialScope);const s=new e(t);return r5(s),s.init(),s}function r5(e){We().setClient(e)}const Xg=100,Zg=5e3,V8=36e5;function Y8(e){function t(...r){xe&&Y.log("[Offline]:",...r)}return r=>{const s=e(r);if(!r.createStore)throw new Error("No `createStore` function was provided");const a=r.createStore(r);let i=Zg,o;function d(f,x,y){return WN(f,["client_report"])?!1:r.shouldStore?r.shouldStore(f,x,y):!0}function u(f){o&&clearTimeout(o),o=setTimeout(async()=>{o=void 0;const x=await a.shift();x&&(t("Attempting to send previously queued event"),x[0].sent_at=new Date().toISOString(),p(x,!0).catch(y=>{t("Failed to retry sending",y)}))},f),typeof o!="number"&&o.unref&&o.unref()}function h(){o||(u(i),i=Math.min(i*2,V8))}async function p(f,x=!1){var y,b;if(!x&&WN(f,["replay_event","replay_recording"]))return await a.push(f),u(Xg),{};try{if(r.shouldSend&&await r.shouldSend(f)===!1)throw new Error("Envelope not sent because `shouldSend` callback returned false");const w=await s.send(f);let v=Xg;if(w){if((y=w.headers)!=null&&y["retry-after"])v=KE(w.headers["retry-after"]);else if((b=w.headers)!=null&&b["x-sentry-rate-limits"])v=6e4;else if((w.statusCode||0)>=400)return w}return u(v),i=Zg,w}catch(w){if(await d(f,w,i))return x?await a.unshift(f):await a.push(f),h(),t("Error sending. Event queued.",w),{};throw w}}return r.flushAtStartup&&h(),{send:p,flush:f=>(f===void 0&&(i=Zg,u(Xg)),s.flush(f))}}}const Am="MULTIPLEXED_TRANSPORT_EXTRA_KEY";function s5(e,t){let r;return Co(e,(s,a)=>(t.includes(a)&&(r=Array.isArray(s)?s[1]:void 0),!!r)),r}function J8(e,t){return r=>{const s=e(r);return{...s,send:async a=>{const i=s5(a,["event","transaction","profile","replay_event"]);return i&&(i.release=t),s.send(a)}}}}function Q8(e,t){return Es(t?{...e[0],dsn:t}:e[0],e[1])}function X8(e,t){return r=>{const s=e(r),a=new Map,i=t||(h=>{var f;const p=h.getEvent();return(f=p==null?void 0:p.extra)!=null&&f[Am]&&Array.isArray(p.extra[Am])?p.extra[Am]:[]});function o(h,p){const f=p?`${h}:${p}`:h;let x=a.get(f);if(!x){const y=dE(h);if(!y)return;const b=BE(y,r.tunnel);x=p?J8(e,p)({...r,url:b}):e({...r,url:b}),a.set(f,x)}return[h,x]}async function d(h){function p(b){const w=b!=null&&b.length?b:["event"];return s5(h,w)}const f=i({envelope:h,getEvent:p}).map(b=>typeof b=="string"?o(b,void 0):o(b.dsn,b.release)).filter(b=>!!b),x=f.length?f:[["",s]];return(await Promise.all(x.map(([b,w])=>w.send(Q8(h,b)))))[0]}async function u(h){const p=[...a.values(),s];return(await Promise.all(p.map(x=>x.flush(h)))).every(x=>x)}return{send:d,flush:u}}}const Z8="thismessage:/";function Ly(e){return"isRelative"in e}function $y(e,t){const r=e.indexOf("://")<=0&&e.indexOf("//")!==0,s=r?Z8:void 0;try{if("canParse"in URL&&!URL.canParse(e,s))return;const a=new URL(e,s);return r?{isRelative:r,pathname:a.pathname,search:a.search,hash:a.hash}:a}catch{}}function e$(e){if(Ly(e))return e.pathname;const t=new URL(e);return t.search="",t.hash="",["80","443"].includes(t.port)&&(t.port=""),t.password&&(t.password="%filtered%"),t.username&&(t.username="%filtered%"),t.toString()}function jo(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const r=t[6]||"",s=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:r,hash:s,relative:t[5]+r+s}}function a5(e){return e.split(/[?#]/,1)[0]}function i5(e,t){const r=t==null?void 0:t.getDsn(),s=t==null?void 0:t.getOptions().tunnel;return n$(e,r)||t$(e,s)}function t$(e,t){return t?u1(e)===u1(t):!1}function n$(e,t){const r=$y(e);return!r||Ly(r)?!1:t?r.host.includes(t.host)&&/(^|&|\?)sentry_key=/.test(r.search):!1}function u1(e){return e[e.length-1]==="/"?e.slice(0,-1):e}function o5(e,...t){const r=new String(String.raw(e,...t));return r.__sentry_template_string__=e.join("\0").replace(/%/g,"%%").replace(/\0/g,"%s"),r.__sentry_template_values__=t,r}const r$=o5;function s$(e){var t;"aggregates"in e?((t=e.attrs)==null?void 0:t.ip_address)===void 0&&(e.attrs={...e.attrs,ip_address:"{{auto}}"}):e.ipAddress===void 0&&(e.ipAddress="{{auto}}")}function l5(e,t,r=[t],s="npm"){const a=e._metadata||{};a.sdk||(a.sdk={name:`sentry.javascript.${t}`,packages:r.map(i=>({name:`${s}:@sentry/${i}`,version:ma})),version:ma}),e._metadata=a}function Dy(e={}){const t=e.client||be();if(!DE()||!t)return{};const r=Ea(),s=Pi(r);if(s.getTraceData)return s.getTraceData(e);const a=e.scope||We(),i=e.span||Vt(),o=i?vE(i):a$(a),d=i?Ns(i):jy(t,a),u=cE(d);if(!fE.test(o))return Y.warn("Invalid sentry-trace data. Cannot generate trace data"),{};const p={"sentry-trace":o,baggage:u};return e.propagateTraceparent&&(p.traceparent=i?nL(i):i$(a)),p}function a$(e){const{traceId:t,sampled:r,propagationSpanId:s}=e.getPropagationContext();return xE(t,s,r)}function i$(e){const{traceId:t,sampled:r,propagationSpanId:s}=e.getPropagationContext();return gE(t,s,r)}function o$(e,t,r){let s,a,i;const o=r!=null&&r.maxWait?Math.max(r.maxWait,t):0,d=(r==null?void 0:r.setTimeoutImpl)||setTimeout;function u(){return h(),s=e(),s}function h(){a!==void 0&&clearTimeout(a),i!==void 0&&clearTimeout(i),a=i=void 0}function p(){return a!==void 0||i!==void 0?u():s}function f(){return a&&clearTimeout(a),a=d(u,t),o&&i===void 0&&(i=d(u,o)),s}return f.cancel=h,f.flush=p,f}const l$=100;function Ss(e,t){const r=be(),s=hn();if(!r)return;const{beforeBreadcrumb:a=null,maxBreadcrumbs:i=l$}=r.getOptions();if(i<=0)return;const d={timestamp:qo(),...e},u=a?Ti(()=>a(d,t)):d;u!==null&&(r.emit&&r.emit("beforeAddBreadcrumb",u,t),s.addBreadcrumb(u,i))}let h1;const c$="FunctionToString",m1=new WeakMap,d$=(()=>({name:c$,setupOnce(){h1=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=by(this),r=m1.has(be())&&t!==void 0?t:this;return h1.apply(r,e)}}catch{}},setup(e){m1.set(e,!0)}})),c5=d$,u$=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,/^Can't find variable: gmo$/,/^undefined is not an object \(evaluating 'a\.[A-Z]'\)$/,`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/,/^Java exception was raised during method invocation$/],h$="EventFilters",d5=(e={})=>{let t;return{name:h$,setup(r){const s=r.getOptions();t=f1(e,s)},processEvent(r,s,a){if(!t){const i=a.getOptions();t=f1(e,i)}return m$(r,t)?null:r}}},u5=((e={})=>({...d5(e),name:"InboundFilters"}));function f1(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:u$],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[]]}}function m$(e,t){if(e.type){if(e.type==="transaction"&&p$(e,t.ignoreTransactions))return xe&&Y.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${no(e)}`),!0}else{if(f$(e,t.ignoreErrors))return xe&&Y.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${no(e)}`),!0;if(y$(e))return xe&&Y.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${no(e)}`),!0;if(x$(e,t.denyUrls))return xe&&Y.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${no(e)}.
Url: ${pf(e)}`),!0;if(!g$(e,t.allowUrls))return xe&&Y.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${no(e)}.
Url: ${pf(e)}`),!0}return!1}function f$(e,t){return t!=null&&t.length?XE(e).some(r=>vs(r,t)):!1}function p$(e,t){if(!(t!=null&&t.length))return!1;const r=e.transaction;return r?vs(r,t):!1}function x$(e,t){if(!(t!=null&&t.length))return!1;const r=pf(e);return r?vs(r,t):!1}function g$(e,t){if(!(t!=null&&t.length))return!0;const r=pf(e);return r?vs(r,t):!0}function b$(e=[]){for(let t=e.length-1;t>=0;t--){const r=e[t];if(r&&r.filename!=="<anonymous>"&&r.filename!=="[native code]")return r.filename||null}return null}function pf(e){var t,r;try{const s=[...((t=e.exception)==null?void 0:t.values)??[]].reverse().find(i=>{var o,d,u;return((o=i.mechanism)==null?void 0:o.parent_id)===void 0&&((u=(d=i.stacktrace)==null?void 0:d.frames)==null?void 0:u.length)}),a=(r=s==null?void 0:s.stacktrace)==null?void 0:r.frames;return a?b$(a):null}catch{return xe&&Y.error(`Cannot extract url for event ${no(e)}`),null}}function y$(e){var t,r;return(r=(t=e.exception)==null?void 0:t.values)!=null&&r.length?!e.message&&!e.exception.values.some(s=>s.stacktrace||s.type&&s.type!=="Error"||s.value):!1}function v$(e,t,r,s,a,i){var d;if(!((d=a.exception)!=null&&d.values)||!i||!wa(i.originalException,Error))return;const o=a.exception.values.length>0?a.exception.values[a.exception.values.length-1]:void 0;o&&(a.exception.values=fb(e,t,s,i.originalException,r,a.exception.values,o,0))}function fb(e,t,r,s,a,i,o,d){if(i.length>=r+1)return i;let u=[...i];if(wa(s[a],Error)){p1(o,d);const h=e(t,s[a]),p=u.length;x1(h,a,p,d),u=fb(e,t,r,s[a],a,[h,...u],h,p)}return Array.isArray(s.errors)&&s.errors.forEach((h,p)=>{if(wa(h,Error)){p1(o,d);const f=e(t,h),x=u.length;x1(f,`errors[${p}]`,x,d),u=fb(e,t,r,h,a,[f,...u],f,x)}}),u}function p1(e,t){e.mechanism={handled:!0,type:"auto.core.linked_errors",...e.mechanism,...e.type==="AggregateError"&&{is_exception_group:!0},exception_id:t}}function x1(e,t,r,s){e.mechanism={handled:!0,...e.mechanism,type:"chained",source:t,exception_id:r,parent_id:s}}const h5=new Map,g1=new Set;function w$(e){if(Me._sentryModuleMetadata)for(const t of Object.keys(Me._sentryModuleMetadata)){const r=Me._sentryModuleMetadata[t];if(g1.has(t))continue;g1.add(t);const s=e(t);for(const a of s.reverse())if(a.filename){h5.set(a.filename,r);break}}}function _$(e,t){return w$(e),h5.get(t)}function m5(e,t){var r,s;(s=(r=t.exception)==null?void 0:r.values)==null||s.forEach(a=>{var i,o;(o=(i=a.stacktrace)==null?void 0:i.frames)==null||o.forEach(d=>{if(!d.filename||d.module_metadata)return;const u=_$(e,d.filename);u&&(d.module_metadata=u)})})}function f5(e){var t,r;(r=(t=e.exception)==null?void 0:t.values)==null||r.forEach(s=>{var a,i;(i=(a=s.stacktrace)==null?void 0:a.frames)==null||i.forEach(o=>{delete o.module_metadata})})}const j$=()=>({name:"ModuleMetadata",setup(e){e.on("beforeEnvelope",t=>{Co(t,(r,s)=>{if(s==="event"){const a=Array.isArray(r)?r[1]:void 0;a&&(f5(a),r[1]=a)}})}),e.on("applyFrameMetadata",t=>{if(t.type)return;const r=e.getOptions().stackParser;m5(r,t)})}});function Fy(e){const t="console";Ri(t,e),Ii(t,N$)}function N$(){"console"in Me&&my.forEach(function(e){e in Me.console&&An(Me.console,e,function(t){return of[e]=t,function(...r){Kr("console",{args:r,level:e});const a=of[e];a==null||a.apply(Me.console,r)}})})}function xf(e){return e==="warn"?"warning":["fatal","error","warning","log","info","debug"].includes(e)?e:"log"}const S$="CaptureConsole",k$=((e={})=>{const t=e.levels||my,r=e.handled??!0;return{name:S$,setup(s){"console"in Me&&Fy(({args:a,level:i})=>{be()!==s||!t.includes(i)||C$(a,i,r)})}}}),E$=k$;function C$(e,t,r){const s=xf(t),a=new Error,i={level:xf(t),extra:{arguments:e}};br(o=>{if(o.addEventProcessor(h=>(h.logger="console",_a(h,{handled:r,type:"auto.core.capture_console"}),h)),t==="assert"){if(!e[0]){const h=`Assertion failed: ${lf(e.slice(1)," ")||"console.assert"}`;o.setExtra("arguments",e.slice(1)),o.captureMessage(h,s,{captureContext:i,syntheticException:a})}return}const d=e.find(h=>h instanceof Error);if(d){mt(d,i);return}const u=lf(e," ");o.captureMessage(u,s,{captureContext:i,syntheticException:a})})}const T$="Dedupe",R$=(()=>{let e;return{name:T$,processEvent(t){if(t.type)return t;try{if(I$(t,e))return xe&&Y.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return e=t}}}),p5=R$;function I$(e,t){return t?!!(P$(e,t)||A$(e,t)):!1}function P$(e,t){const r=e.message,s=t.message;return!(!r&&!s||r&&!s||!r&&s||r!==s||!g5(e,t)||!x5(e,t))}function A$(e,t){const r=b1(t),s=b1(e);return!(!r||!s||r.type!==s.type||r.value!==s.value||!g5(e,t)||!x5(e,t))}function x5(e,t){let r=nb(e),s=nb(t);if(!r&&!s)return!0;if(r&&!s||!r&&s||(r=r,s=s,s.length!==r.length))return!1;for(let a=0;a<s.length;a++){const i=s[a],o=r[a];if(i.filename!==o.filename||i.lineno!==o.lineno||i.colno!==o.colno||i.function!==o.function)return!1}return!0}function g5(e,t){let r=e.fingerprint,s=t.fingerprint;if(!r&&!s)return!0;if(r&&!s||!r&&s)return!1;r=r,s=s;try{return r.join("")===s.join("")}catch{return!1}}function b1(e){var t,r;return(r=(t=e.exception)==null?void 0:t.values)==null?void 0:r[0]}const M$="ExtraErrorData",O$=((e={})=>{const{depth:t=3,captureErrorCause:r=!0}=e;return{name:M$,processEvent(s,a,i){const{maxValueLength:o}=i.getOptions();return $$(s,a,t,r,o)}}}),L$=O$;function $$(e,t={},r,s,a){if(!t.originalException||!fa(t.originalException))return e;const i=t.originalException.name||t.originalException.constructor.name,o=b5(t.originalException,s,a);if(o){const d={...e.contexts},u=kr(o,r);return Ds(u)&&(yn(u,"__sentry_skip_normalization__",!0),d[i]=u),{...e,contexts:d}}return e}function b5(e,t,r){try{const s=["name","message","stack","line","column","fileName","lineNumber","columnNumber","toJSON"],a={};for(const i of Object.keys(e)){if(s.indexOf(i)!==-1)continue;const o=e[i];a[i]=fa(o)||typeof o=="string"?r?Jd(`${o}`,r):`${o}`:o}if(t&&e.cause!==void 0)if(fa(e.cause)){const i=e.cause.name||e.cause.constructor.name;a.cause={[i]:b5(e.cause,!1,r)}}else a.cause=e.cause;if(typeof e.toJSON=="function"){const i=e.toJSON();for(const o of Object.keys(i)){const d=i[o];a[o]=fa(d)?d.toString():d}}return a}catch(s){xe&&Y.error("Unable to extract extra data from the Error object:",s)}return null}function D$(e,t){let r=0;for(let s=e.length-1;s>=0;s--){const a=e[s];a==="."?e.splice(s,1):a===".."?(e.splice(s,1),r++):r&&(e.splice(s,1),r--)}if(t)for(;r--;r)e.unshift("..");return e}const F$=/^(\S+:\\|\/?)([\s\S]*?)((?:\.{1,2}|[^/\\]+?|)(\.[^./\\]*|))(?:[/\\]*)$/;function U$(e){const t=e.length>1024?`<truncated>${e.slice(-1024)}`:e,r=F$.exec(t);return r?r.slice(1):[]}function y1(...e){let t="",r=!1;for(let s=e.length-1;s>=-1&&!r;s--){const a=s>=0?e[s]:"/";a&&(t=`${a}/${t}`,r=a.charAt(0)==="/")}return t=D$(t.split("/").filter(s=>!!s),!r).join("/"),(r?"/":"")+t||"."}function v1(e){let t=0;for(;t<e.length&&e[t]==="";t++);let r=e.length-1;for(;r>=0&&e[r]==="";r--);return t>r?[]:e.slice(t,r-t+1)}function q$(e,t){e=y1(e).slice(1),t=y1(t).slice(1);const r=v1(e.split("/")),s=v1(t.split("/")),a=Math.min(r.length,s.length);let i=a;for(let d=0;d<a;d++)if(r[d]!==s[d]){i=d;break}let o=[];for(let d=i;d<r.length;d++)o.push("..");return o=o.concat(s.slice(i)),o.join("/")}function B$(e,t){return U$(e)[2]||""}const H$="RewriteFrames",W$=(e={})=>{const t=e.root,r=e.prefix||"app:///",s="window"in Me&&!!Me.window,a=e.iteratee||z$({isBrowser:s,root:t,prefix:r});function i(d){try{return{...d,exception:{...d.exception,values:d.exception.values.map(u=>({...u,...u.stacktrace&&{stacktrace:o(u.stacktrace)}}))}}}catch{return d}}function o(d){var u;return{...d,frames:(u=d==null?void 0:d.frames)==null?void 0:u.map(h=>a(h))}}return{name:H$,processEvent(d){let u=d;return d.exception&&Array.isArray(d.exception.values)&&(u=i(u)),u}}};function z$({isBrowser:e,root:t,prefix:r}){return s=>{if(!s.filename)return s;const a=/^[a-zA-Z]:\\/.test(s.filename)||s.filename.includes("\\")&&!s.filename.includes("/"),i=/^\//.test(s.filename);if(e){if(t){const o=s.filename;o.indexOf(t)===0&&(s.filename=o.replace(t,r))}}else if(a||i){const o=a?s.filename.replace(/^[a-zA-Z]:/,"").replace(/\\/g,"/"):s.filename,d=t?q$(t,o):B$(o);s.filename=`${r}${d}`}return s}}const G$=["reauthenticate","signInAnonymously","signInWithOAuth","signInWithIdToken","signInWithOtp","signInWithPassword","signInWithSSO","signOut","signUp","verifyOtp"],K$=["createUser","deleteUser","listUsers","getUserById","updateUserById","inviteUserByEmail"],V$={eq:"eq",neq:"neq",gt:"gt",gte:"gte",lt:"lt",lte:"lte",like:"like","like(all)":"likeAllOf","like(any)":"likeAnyOf",ilike:"ilike","ilike(all)":"ilikeAllOf","ilike(any)":"ilikeAnyOf",is:"is",in:"in",cs:"contains",cd:"containedBy",sr:"rangeGt",nxl:"rangeGte",sl:"rangeLt",nxr:"rangeLte",adj:"rangeAdjacent",ov:"overlaps",fts:"",plfts:"plain",phfts:"phrase",wfts:"websearch",not:"not"},y5=["select","insert","upsert","update","delete"];function ep(e){try{e.__SENTRY_INSTRUMENTED__=!0}catch{}}function tp(e){try{return e.__SENTRY_INSTRUMENTED__}catch{return!1}}function Y$(e,t={}){var r;switch(e){case"GET":return"select";case"POST":return(r=t.Prefer)!=null&&r.includes("resolution=")?"upsert":"insert";case"PATCH":return"update";case"DELETE":return"delete";default:return"<unknown-op>"}}function J$(e,t){if(t===""||t==="*")return"select(*)";if(e==="select")return`select(${t})`;if(e==="or"||e.endsWith(".or"))return`${e}${t}`;const[r,...s]=t.split(".");let a;return r!=null&&r.startsWith("fts")?a="textSearch":r!=null&&r.startsWith("plfts")?a="textSearch[plain]":r!=null&&r.startsWith("phfts")?a="textSearch[phrase]":r!=null&&r.startsWith("wfts")?a="textSearch[websearch]":a=r&&V$[r]||"filter",`${a}(${e}, ${s.join(".")})`}function w1(e,t=!1){return new Proxy(e,{apply(r,s,a){return Hs({name:`auth ${t?"(admin) ":""}${e.name}`,attributes:{[Ge]:"auto.db.supabase",[Nt]:"db","db.system":"postgresql","db.operation":`auth.${t?"admin.":""}${e.name}`}},i=>Reflect.apply(r,s,a).then(o=>(o&&typeof o=="object"&&"error"in o&&o.error?(i.setStatus({code:ot}),mt(o.error,{mechanism:{handled:!1,type:"auto.db.supabase.auth"}})):i.setStatus({code:Vf}),i.end(),o)).catch(o=>{throw i.setStatus({code:ot}),i.end(),mt(o,{mechanism:{handled:!1,type:"auto.db.supabase.auth"}}),o}).then(...a))}})}function Q$(e){const t=e.auth;if(!(!t||tp(e.auth))){for(const r of G$){const s=t[r];s&&typeof e.auth[r]=="function"&&(e.auth[r]=w1(s))}for(const r of K$){const s=t.admin[r];s&&typeof e.auth.admin[r]=="function"&&(e.auth.admin[r]=w1(s,!0))}ep(e.auth)}}function X$(e){tp(e.prototype.from)||(e.prototype.from=new Proxy(e.prototype.from,{apply(t,r,s){const a=Reflect.apply(t,r,s),i=a.constructor;return eD(i),a}}),ep(e.prototype.from))}function Z$(e){tp(e.prototype.then)||(e.prototype.then=new Proxy(e.prototype.then,{apply(t,r,s){var y;const a=y5,i=r,o=Y$(i.method,i.headers);if(!a.includes(o)||!((y=i==null?void 0:i.url)!=null&&y.pathname)||typeof i.url.pathname!="string")return Reflect.apply(t,r,s);const d=i.url.pathname.split("/"),u=d.length>0?d[d.length-1]:"",h=[];for(const[b,w]of i.url.searchParams.entries())h.push(J$(b,w));const p=Object.create(null);if(Ds(i.body))for(const[b,w]of Object.entries(i.body))p[b]=w;const f=`${o==="select"?"":`${o}${p?"(...) ":""}`}${h.join(" ")} from(${u})`,x={"db.table":u,"db.schema":i.schema,"db.url":i.url.origin,"db.sdk":i.headers["X-Client-Info"],"db.system":"postgresql","db.operation":o,[Ge]:"auto.db.supabase",[Nt]:"db"};return h.length&&(x["db.query"]=h),Object.keys(p).length&&(x["db.body"]=p),Hs({name:f,attributes:x},b=>Reflect.apply(t,r,[]).then(w=>{if(b&&(w&&typeof w=="object"&&"status"in w&&Xd(b,w.status||500),b.end()),w.error){const C=new Error(w.error.message);w.error.code&&(C.code=w.error.code),w.error.details&&(C.details=w.error.details);const S={};h.length&&(S.query=h),Object.keys(p).length&&(S.body=p),mt(C,k=>(k.addEventProcessor(R=>(_a(R,{handled:!1,type:"auto.db.supabase.postgres"}),R)),k.setContext("supabase",S),k))}const v={type:"supabase",category:`db.${o}`,message:f},j={};return h.length&&(j.query=h),Object.keys(p).length&&(j.body=p),Object.keys(j).length&&(v.data=j),Ss(v),w},w=>{throw b&&(Xd(b,500),b.end()),w}).then(...s))}}),ep(e.prototype.then))}function eD(e){for(const t of y5)tp(e.prototype[t])||(e.prototype[t]=new Proxy(e.prototype[t],{apply(r,s,a){const i=Reflect.apply(r,s,a),o=i.constructor;return xe&&Y.log(`Instrumenting ${t} operation's PostgRESTFilterBuilder`),Z$(o),i}}),ep(e.prototype[t]))}const v5=e=>{if(!e){xe&&Y.warn("Supabase integration was not installed because no Supabase client was provided.");return}const t=e.constructor===Function?e:e.constructor;X$(t),Q$(e)},tD="Supabase",nD=(e=>({setupOnce(){v5(e)},name:tD})),rD=e=>nD(e.supabaseClient),sD=10,aD="ZodErrors";function iD(e){return fa(e)&&e.name==="ZodError"&&Array.isArray(e.issues)}function oD(e){return{...e,path:"path"in e&&Array.isArray(e.path)?e.path.join("."):void 0,keys:"keys"in e?JSON.stringify(e.keys):void 0,unionErrors:"unionErrors"in e?JSON.stringify(e.unionErrors):void 0}}function lD(e){return e.map(t=>typeof t=="number"?"<array>":t).join(".")}function cD(e){const t=new Set;for(const s of e.issues){const a=lD(s.path);a.length>0&&t.add(a)}const r=Array.from(t);if(r.length===0){let s="variable";if(e.issues.length>0){const a=e.issues[0];a!==void 0&&"expected"in a&&typeof a.expected=="string"&&(s=a.expected)}return`Failed to validate ${s}`}return`Failed to validate keys: ${Jd(r.join(", "),100)}`}function dD(e,t=!1,r,s){var a;if(!((a=r.exception)!=null&&a.values)||!s.originalException||!iD(s.originalException)||s.originalException.issues.length===0)return r;try{const o=(t?s.originalException.issues:s.originalException.issues.slice(0,e)).map(oD);return t&&(Array.isArray(s.attachments)||(s.attachments=[]),s.attachments.push({filename:"zod_issues.json",data:JSON.stringify({issues:o})})),{...r,exception:{...r.exception,values:[{...r.exception.values[0],value:cD(s.originalException)},...r.exception.values.slice(1)]},extra:{...r.extra,"zoderror.issues":o.slice(0,e)}}}catch(i){return{...r,extra:{...r.extra,"zoderrors sentry integration parse error":{message:"an exception was thrown while processing ZodError within applyZodErrorsToEvent()",error:i instanceof Error?`${i.name}: ${i.message}
${i.stack}`:"unknown"}}}}}const uD=((e={})=>{const t=e.limit??sD;return{name:aD,processEvent(r,s){return dD(t,e.saveZodIssuesAsAttachment,r,s)}}}),hD=uD,mD=e=>({name:"ThirdPartyErrorsFilter",setup(t){t.on("beforeEnvelope",r=>{Co(r,(s,a)=>{if(a==="event"){const i=Array.isArray(s)?s[1]:void 0;i&&(f5(i),s[1]=i)}})}),t.on("applyFrameMetadata",r=>{if(r.type)return;const s=t.getOptions().stackParser;m5(s,r)})},processEvent(t){const r=fD(t);if(r){const s=e.behaviour==="drop-error-if-contains-third-party-frames"||e.behaviour==="apply-tag-if-contains-third-party-frames"?"some":"every";if(r[s](i=>!i.some(o=>e.filterKeys.includes(o)))){if(e.behaviour==="drop-error-if-contains-third-party-frames"||e.behaviour==="drop-error-if-exclusively-contains-third-party-frames")return null;t.tags={...t.tags,third_party_code:!0}}}return t}});function fD(e){const t=nb(e);if(t)return t.filter(r=>!!r.filename&&(r.lineno??r.colno)!=null).map(r=>r.module_metadata?Object.keys(r.module_metadata).filter(s=>s.startsWith(_1)).map(s=>s.slice(_1.length)):[])}const _1="_sentryBundlerPluginAppKey:",pD=100,xD=10,am="flag.evaluation.";function Cc(e){const r=We().getScopeData().contexts.flags,s=r?r.values:[];return s.length&&(e.contexts===void 0&&(e.contexts={}),e.contexts.flags={values:[...s]}),e}function Ro(e,t,r=pD){const s=We().getScopeData().contexts;s.flags||(s.flags={values:[]});const a=s.flags.values;gD(a,e,t,r)}function gD(e,t,r,s){if(typeof r!="boolean")return;if(e.length>s){xe&&Y.error(`[Feature Flags] insertToFlagBuffer called on a buffer larger than maxSize=${s}`);return}const a=e.findIndex(i=>i.flag===t);a!==-1&&e.splice(a,1),e.length===s&&e.shift(),e.push({flag:t,result:r})}function Io(e,t,r=xD){if(typeof t!="boolean")return;const s=Vt();if(!s)return;const a=Re(s).data;if(`${am}${e}`in a){s.setAttribute(`${am}${e}`,t);return}Object.keys(a).filter(o=>o.startsWith(am)).length<r&&s.setAttribute(`${am}${e}`,t)}const bD=()=>({name:"FeatureFlags",processEvent(e,t,r){return Cc(e)},addFeatureFlag(e,t){Ro(e,t),Io(e,t)}}),yD=({growthbookClass:e})=>({name:"GrowthBook",setupOnce(){const t=e.prototype;typeof t.isOn=="function"&&An(t,"isOn",j1),typeof t.getFeatureValue=="function"&&An(t,"getFeatureValue",j1)},processEvent(t,r,s){return Cc(t)}});function j1(e){return function(...t){const r=t[0],s=e.apply(this,t);return typeof r=="string"&&typeof s=="boolean"&&(Ro(r,s),Io(r,s)),s}}function vD(e,t,r,s,a){if(!e.fetchData)return;const{method:i,url:o}=e.fetchData,d=Vr()&&t(o);if(e.endTimestamp&&d){const y=e.fetchData.__span;if(!y)return;const b=s[y];b&&(jD(b,e),wD(b,e,a),delete s[y]);return}const{spanOrigin:u="auto.http.browser",propagateTraceparent:h=!1}=typeof a=="object"?a:{spanOrigin:a},p=!!Vt(),f=d&&p?Yr(SD(o,i,u)):new ja;if(e.fetchData.__span=f.spanContext().spanId,s[f.spanContext().spanId]=f,r(e.fetchData.url)){const y=e.args[0],b=e.args[1]||{},w=_D(y,b,Vr()&&p?f:void 0,h);w&&(e.args[1]=b,b.headers=w)}const x=be();if(x){const y={input:e.args,response:e.response,startTimestamp:e.startTimestamp,endTimestamp:e.endTimestamp};x.emit("beforeOutgoingRequestSpan",f,y)}return f}function wD(e,t,r){var a;const s=typeof r=="object"&&r!==null?r.onRequestSpanEnd:void 0;s==null||s(e,{headers:(a=t.response)==null?void 0:a.headers,error:t.error})}function _D(e,t,r,s){const a=Dy({span:r,propagateTraceparent:s}),i=a["sentry-trace"],o=a.baggage,d=a.traceparent;if(!i)return;const u=t.headers||(xy(e)?e.headers:void 0);if(u)if(ND(u)){const h=new Headers(u);if(h.get("sentry-trace")||h.set("sentry-trace",i),s&&d&&!h.get("traceparent")&&h.set("traceparent",d),o){const p=h.get("baggage");p?im(p)||h.set("baggage",`${p},${o}`):h.set("baggage",o)}return h}else if(Array.isArray(u)){const h=[...u];u.find(f=>f[0]==="sentry-trace")||h.push(["sentry-trace",i]),s&&d&&!u.find(f=>f[0]==="traceparent")&&h.push(["traceparent",d]);const p=u.find(f=>f[0]==="baggage"&&im(f[1]));return o&&!p&&h.push(["baggage",o]),h}else{const h="sentry-trace"in u?u["sentry-trace"]:void 0,p="traceparent"in u?u.traceparent:void 0,f="baggage"in u?u.baggage:void 0,x=f?Array.isArray(f)?[...f]:[f]:[],y=f&&(Array.isArray(f)?f.find(w=>im(w)):im(f));o&&!y&&x.push(o);const b={...u,"sentry-trace":h??i,baggage:x.length>0?x.join(","):void 0};return s&&d&&!p&&(b.traceparent=d),b}else return{...a}}function jD(e,t){var r,s;if(t.response){Xd(e,t.response.status);const a=(s=(r=t.response)==null?void 0:r.headers)==null?void 0:s.get("content-length");if(a){const i=parseInt(a);i>0&&e.setAttribute("http.response_content_length",i)}}else t.error&&e.setStatus({code:ot,message:"internal_error"});e.end()}function im(e){return e.split(",").some(t=>t.trim().startsWith(vy))}function ND(e){return typeof Headers<"u"&&wa(e,Headers)}function SD(e,t,r){const s=$y(e);return{name:s?`${t} ${e$(s)}`:t,attributes:kD(e,s,t,r)}}function kD(e,t,r,s){const a={url:e,type:"fetch","http.method":r,[Ge]:s,[Nt]:"http.client"};return t&&(Ly(t)||(a["http.url"]=t.href,a["server.address"]=t.host),t.search&&(a["http.query"]=t.search),t.hash&&(a["http.fragment"]=t.hash)),a}function w5(e,t={},r=We()){const{message:s,name:a,email:i,url:o,source:d,associatedEventId:u,tags:h}=e,p={contexts:{feedback:{contact_email:i,name:a,message:s,url:o,source:d,associated_event_id:u}},type:"feedback",level:"info",tags:h},f=(r==null?void 0:r.getClient())||be();return f&&f.emit("beforeSendFeedback",p,t),r.captureEvent(p,t)}function Tc(e,t,r,s,a){ff({level:e,message:t,attributes:r,severityNumber:a},s)}function ED(e,t,{scope:r}={}){Tc("trace",e,t,r)}function CD(e,t,{scope:r}={}){Tc("debug",e,t,r)}function TD(e,t,{scope:r}={}){Tc("info",e,t,r)}function RD(e,t,{scope:r}={}){Tc("warn",e,t,r)}function ID(e,t,{scope:r}={}){Tc("error",e,t,r)}function PD(e,t,{scope:r}={}){Tc("fatal",e,t,r)}const AD=Object.freeze(Object.defineProperty({__proto__:null,debug:CD,error:ID,fatal:PD,fmt:r$,info:TD,trace:ED,warn:RD},Symbol.toStringTag,{value:"Module"}));function pb(e,t,r){return"util"in Me&&typeof Me.util.format=="function"?Me.util.format(...e):MD(e,t,r)}function MD(e,t,r){return e.map(s=>_i(s)?String(s):JSON.stringify(kr(s,t,r))).join(" ")}function OD(e){return/%[sdifocO]/.test(e)}function LD(e,t){const r={},s=new Array(t.length).fill("{}").join(" ");return r["sentry.message.template"]=`${e} ${s}`,t.forEach((a,i)=>{r[`sentry.message.parameter.${i}`]=a}),r}const $D="ConsoleLogs",N1={[Ge]:"auto.log.console"},DD=((e={})=>{const t=e.levels||my;return{name:$D,setup(r){const{enableLogs:s,normalizeDepth:a=3,normalizeMaxBreadth:i=1e3}=r.getOptions();if(!s){xe&&Y.warn("`enableLogs` is not enabled, ConsoleLogs integration disabled");return}Fy(({args:o,level:d})=>{if(be()!==r||!t.includes(d))return;const u=o[0],h=o.slice(1);if(d==="assert"){if(!u){const y=h.length>0?`Assertion failed: ${pb(h,a,i)}`:"Assertion failed";ff({level:"error",message:y,attributes:N1})}return}const p=d==="log",f=o.length>1&&typeof o[0]=="string"&&!OD(o[0]),x={...N1,...f?LD(u,h):{}};ff({level:p?"info":d,message:pb(o,a,i),severityNumber:p?10:void 0,attributes:x})})}}}),_5=DD;function Uy(e,t,r,s){M8({type:e,name:t,value:r,unit:s==null?void 0:s.unit,attributes:s==null?void 0:s.attributes},{scope:s==null?void 0:s.scope})}function FD(e,t=1,r){Uy("counter",e,t,r)}function UD(e,t,r){Uy("gauge",e,t,r)}function qD(e,t,r){Uy("distribution",e,t,r)}const BD=Object.freeze(Object.defineProperty({__proto__:null,count:FD,distribution:qD,gauge:UD},Symbol.toStringTag,{value:"Module"})),HD=["trace","debug","info","warn","error","fatal"];function WD(e={}){const t=new Set(e.levels??HD),r=e.client;return{log(s){const{type:a,level:i,message:o,args:d,tag:u,date:h,...p}=s,f=r||be();if(!f)return;const x=KD(a,i);if(!t.has(x))return;const{normalizeDepth:y=3,normalizeMaxBreadth:b=1e3}=f.getOptions(),w=[];o&&w.push(o),d&&d.length>0&&w.push(pb(d,y,b));const v=w.join(" ");p["sentry.origin"]="auto.log.consola",u&&(p["consola.tag"]=u),a&&(p["consola.type"]=a),i!=null&&typeof i=="number"&&(p["consola.level"]=i),ff({level:x,message:v,attributes:p})}}}const zD={silent:"trace",fatal:"fatal",error:"error",warn:"warn",log:"info",info:"info",success:"info",fail:"error",ready:"info",start:"info",box:"info",debug:"debug",trace:"trace",verbose:"debug",critical:"fatal",notice:"info"},GD={0:"fatal",1:"warn",2:"info",3:"info",4:"debug",5:"trace"};function KD(e,t){if(e==="verbose")return"debug";if(e==="silent")return"trace";if(e){const r=zD[e];if(r)return r}if(typeof t=="number"){const r=GD[t];if(r)return r}return"info"}const VD="gen_ai.prompt",np="gen_ai.system",mr="gen_ai.request.model",qy="gen_ai.request.stream",rp="gen_ai.request.temperature",By="gen_ai.request.max_tokens",sp="gen_ai.request.frequency_penalty",Hy="gen_ai.request.presence_penalty",ap="gen_ai.request.top_p",j5="gen_ai.request.top_k",YD="gen_ai.request.encoding_format",JD="gen_ai.request.dimensions",Mi="gen_ai.response.finish_reasons",Ta="gen_ai.response.model",Rc="gen_ai.response.id",QD="gen_ai.response.stop_reason",Po="gen_ai.usage.input_tokens",Ao="gen_ai.usage.output_tokens",Mo="gen_ai.usage.total_tokens",ji="gen_ai.operation.name",Ni="gen_ai.request.messages",Jr="gen_ai.response.text",ip="gen_ai.request.available_tools",op="gen_ai.response.streaming",Ws="gen_ai.response.tool_calls",N5="gen_ai.agent.name",XD="gen_ai.pipeline.name",ZD="gen_ai.usage.cache_creation_input_tokens",eF="gen_ai.usage.cache_read_input_tokens",tF="gen_ai.invoke_agent",nF="openai.response.id",S5="openai.response.model",rF="openai.response.timestamp",sF="openai.usage.completion_tokens",aF="openai.usage.prompt_tokens",e0={CHAT:"chat",RESPONSES:"responses",EMBEDDINGS:"embeddings"},S1="anthropic.response.timestamp",k5=2e4,gf=e=>new TextEncoder().encode(e).length,bf=e=>gf(JSON.stringify(e));function Wy(e,t){if(gf(e)<=t)return e;let r=0,s=e.length,a="";for(;r<=s;){const i=Math.floor((r+s)/2),o=e.slice(0,i);gf(o)<=t?(a=o,r=i+1):s=i-1}return a}function iF(e){return typeof e=="string"?e:"text"in e?e.text:""}function k1(e,t){return typeof e=="string"?t:{...e,text:t}}function oF(e){return e!==null&&typeof e=="object"&&"content"in e&&typeof e.content=="string"}function lF(e){return e!==null&&typeof e=="object"&&"content"in e&&Array.isArray(e.content)}function $d(e){return!e||typeof e!="object"?!1:cF(e)||E5(e)||"media_type"in e&&typeof e.media_type=="string"&&"data"in e||"image_url"in e&&typeof e.image_url=="string"&&e.image_url.startsWith("data:")||"type"in e&&(e.type==="blob"||e.type==="base64")||"b64_json"in e||"type"in e&&"result"in e&&e.type==="image_generation"||"uri"in e&&typeof e.uri=="string"&&e.uri.startsWith("data:")}function cF(e){return"type"in e&&typeof e.type=="string"&&"source"in e&&$d(e.source)}function E5(e){return"inlineData"in e&&!!e.inlineData&&typeof e.inlineData=="object"&&"data"in e.inlineData&&typeof e.inlineData.data=="string"}function C5(e){return e!==null&&typeof e=="object"&&"parts"in e&&Array.isArray(e.parts)&&e.parts.length>0}function dF(e,t){const r={...e,content:""},s=bf(r),a=t-s;if(a<=0)return[];const i=Wy(e.content,a);return[{...e,content:i}]}function uF(e,t){const{parts:r}=e,s=r.map(d=>k1(d,"")),a=bf({...e,parts:s});let i=t-a;if(i<=0)return[];const o=[];for(const d of r){const u=iF(d),h=gf(u);if(h<=i)o.push(d),i-=h;else if(o.length===0){const p=Wy(u,i);p&&o.push(k1(d,p));break}else break}return o.length<=0?[]:[{...e,parts:o}]}function hF(e,t){return!e||typeof e!="object"?[]:oF(e)?dF(e,t):C5(e)?uF(e,t):[]}const E1="[Filtered]",mF=["image_url","data","content","b64_json","result","uri"];function Mm(e){const t={...e};$d(t.source)&&(t.source=Mm(t.source)),E5(e)&&(t.inlineData={...e.inlineData,data:E1});for(const r of mF)typeof t[r]=="string"&&(t[r]=E1);return t}function xb(e){return e.map(r=>{let s;return r&&typeof r=="object"&&(lF(r)?s={...r,content:xb(r.content)}:"content"in r&&$d(r.content)&&(s={...r,content:Mm(r.content)}),C5(r)&&(s={...s??r,parts:xb(r.parts)}),$d(s)?s=Mm(s):$d(r)&&(s=Mm(r))),s??r})}function fF(e,t){if(!Array.isArray(e)||e.length===0)return e;const r=xb(e);if(bf(r)<=t)return r;const a=r.map(bf);let i=0,o=r.length;for(let d=r.length-1;d>=0;d--){const u=a[d];if(u&&i+u>t)break;u&&(i+=u),o=d}if(o===r.length){const d=r[r.length-1];return hF(d,t)}return r.slice(o)}function lp(e){return fF(e,k5)}function pF(e){return Wy(e,k5)}function _u(e){return e.includes("messages")?"messages":e.includes("completions")?"completions":e.includes("models")?"models":e.includes("chat")?"chat":e.split(".").pop()||"unknown"}function yf(e){return`gen_ai.${_u(e)}`}function T5(e,t){return e?`${e}.${t}`:t}function zy(e,t,r,s,a){if(t!==void 0&&e.setAttributes({[Po]:t}),r!==void 0&&e.setAttributes({[Ao]:r}),t!==void 0||r!==void 0||s!==void 0||a!==void 0){const i=(t??0)+(r??0)+(s??0)+(a??0);e.setAttributes({[Mo]:i})}}function vf(e){if(typeof e=="string")return pF(e);if(Array.isArray(e)){const t=lp(e);return JSON.stringify(t)}return JSON.stringify(e)}const xF=["responses.create","chat.completions.create","embeddings.create"],gF=["response.output_item.added","response.function_call_arguments.delta","response.function_call_arguments.done","response.output_item.done"],bF=["response.created","response.in_progress","response.failed","response.completed","response.incomplete","response.queued","response.output_text.delta",...gF];function Gy(e){return e.includes("chat.completions")?e0.CHAT:e.includes("responses")?e0.RESPONSES:e.includes("embeddings")?e0.EMBEDDINGS:e.split(".").pop()||"unknown"}function C1(e){return`gen_ai.${Gy(e)}`}function yF(e){return xF.includes(e)}function vF(e,t){return e?`${e}.${t}`:t}function wF(e){return e!==null&&typeof e=="object"&&"object"in e&&e.object==="chat.completion"}function _F(e){return e!==null&&typeof e=="object"&&"object"in e&&e.object==="response"}function jF(e){if(e===null||typeof e!="object"||!("object"in e))return!1;const t=e;return t.object==="list"&&typeof t.model=="string"&&t.model.toLowerCase().includes("embedding")}function NF(e){return e!==null&&typeof e=="object"&&"type"in e&&typeof e.type=="string"&&e.type.startsWith("response.")}function SF(e){return e!==null&&typeof e=="object"&&"object"in e&&e.object==="chat.completion.chunk"}function kF(e,t,r){if(Ky(e,t.id,t.model,t.created),t.usage&&cp(e,t.usage.prompt_tokens,t.usage.completion_tokens,t.usage.total_tokens),Array.isArray(t.choices)){const s=t.choices.map(a=>a.finish_reason).filter(a=>a!==null);if(s.length>0&&e.setAttributes({[Mi]:JSON.stringify(s)}),r){const a=t.choices.map(i=>{var o;return(o=i.message)==null?void 0:o.tool_calls}).filter(i=>Array.isArray(i)&&i.length>0).flat();a.length>0&&e.setAttributes({[Ws]:JSON.stringify(a)})}}}function EF(e,t,r){if(Ky(e,t.id,t.model,t.created_at),t.status&&e.setAttributes({[Mi]:JSON.stringify([t.status])}),t.usage&&cp(e,t.usage.input_tokens,t.usage.output_tokens,t.usage.total_tokens),r){const s=t;if(Array.isArray(s.output)&&s.output.length>0){const a=s.output.filter(i=>typeof i=="object"&&i!==null&&i.type==="function_call");a.length>0&&e.setAttributes({[Ws]:JSON.stringify(a)})}}}function CF(e,t){e.setAttributes({[S5]:t.model,[Ta]:t.model}),t.usage&&cp(e,t.usage.prompt_tokens,void 0,t.usage.total_tokens)}function cp(e,t,r,s){t!==void 0&&e.setAttributes({[aF]:t,[Po]:t}),r!==void 0&&e.setAttributes({[sF]:r,[Ao]:r}),s!==void 0&&e.setAttributes({[Mo]:s})}function Ky(e,t,r,s){e.setAttributes({[nF]:t,[Rc]:t}),e.setAttributes({[S5]:r,[Ta]:r}),e.setAttributes({[rF]:new Date(s*1e3).toISOString()})}function TF(e,t){for(const r of e){const s=r.index;if(!(s===void 0||!r.function))if(!(s in t.chatCompletionToolCalls))t.chatCompletionToolCalls[s]={...r,function:{name:r.function.name,arguments:r.function.arguments||""}};else{const a=t.chatCompletionToolCalls[s];r.function.arguments&&(a!=null&&a.function)&&(a.function.arguments+=r.function.arguments)}}}function RF(e,t,r){var s,a;t.responseId=e.id??t.responseId,t.responseModel=e.model??t.responseModel,t.responseTimestamp=e.created??t.responseTimestamp,e.usage&&(t.promptTokens=e.usage.prompt_tokens,t.completionTokens=e.usage.completion_tokens,t.totalTokens=e.usage.total_tokens);for(const i of e.choices??[])r&&((s=i.delta)!=null&&s.content&&t.responseTexts.push(i.delta.content),(a=i.delta)!=null&&a.tool_calls&&TF(i.delta.tool_calls,t)),i.finish_reason&&t.finishReasons.push(i.finish_reason)}function IF(e,t,r,s){if(!(e&&typeof e=="object")){t.eventTypes.push("unknown:non-object");return}if(e instanceof Error){s.setStatus({code:ot,message:"internal_error"}),mt(e,{mechanism:{handled:!1,type:"auto.ai.openai.stream-response"}});return}if(!("type"in e))return;const a=e;if(!bF.includes(a.type)){t.eventTypes.push(a.type);return}if(r&&(a.type==="response.output_item.done"&&"item"in a&&t.responsesApiToolCalls.push(a.item),a.type==="response.output_text.delta"&&"delta"in a&&a.delta)){t.responseTexts.push(a.delta);return}if("response"in a){const{response:i}=a;t.responseId=i.id??t.responseId,t.responseModel=i.model??t.responseModel,t.responseTimestamp=i.created_at??t.responseTimestamp,i.usage&&(t.promptTokens=i.usage.input_tokens,t.completionTokens=i.usage.output_tokens,t.totalTokens=i.usage.total_tokens),i.status&&t.finishReasons.push(i.status),r&&i.output_text&&t.responseTexts.push(i.output_text)}}async function*PF(e,t,r){const s={eventTypes:[],responseTexts:[],finishReasons:[],responseId:"",responseModel:"",responseTimestamp:0,promptTokens:void 0,completionTokens:void 0,totalTokens:void 0,chatCompletionToolCalls:{},responsesApiToolCalls:[]};try{for await(const a of e)SF(a)?RF(a,s,r):NF(a)&&IF(a,s,r,t),yield a}finally{Ky(t,s.responseId,s.responseModel,s.responseTimestamp),cp(t,s.promptTokens,s.completionTokens,s.totalTokens),t.setAttributes({[op]:!0}),s.finishReasons.length&&t.setAttributes({[Mi]:JSON.stringify(s.finishReasons)}),r&&s.responseTexts.length&&t.setAttributes({[Jr]:s.responseTexts.join("")});const i=[...Object.values(s.chatCompletionToolCalls),...s.responsesApiToolCalls];i.length>0&&t.setAttributes({[Ws]:JSON.stringify(i)}),t.end()}}function AF(e,t){const r={[np]:"openai",[ji]:Gy(t),[Ge]:"auto.ai.openai"};if(e.length>0&&typeof e[0]=="object"&&e[0]!==null){const s=e[0],a=Array.isArray(s.tools)?s.tools:[],o=s.web_search_options&&typeof s.web_search_options=="object"?[{type:"web_search_options",...s.web_search_options}]:[],d=[...a,...o];d.length>0&&(r[ip]=JSON.stringify(d))}if(e.length>0&&typeof e[0]=="object"&&e[0]!==null){const s=e[0];r[mr]=s.model??"unknown","temperature"in s&&(r[rp]=s.temperature),"top_p"in s&&(r[ap]=s.top_p),"frequency_penalty"in s&&(r[sp]=s.frequency_penalty),"presence_penalty"in s&&(r[Hy]=s.presence_penalty),"stream"in s&&(r[qy]=s.stream),"encoding_format"in s&&(r[YD]=s.encoding_format),"dimensions"in s&&(r[JD]=s.dimensions)}else r[mr]="unknown";return r}function MF(e,t,r){var a;if(!t||typeof t!="object")return;const s=t;if(wF(s)){if(kF(e,s,r),r&&((a=s.choices)!=null&&a.length)){const i=s.choices.map(o=>{var d;return((d=o.message)==null?void 0:d.content)||""});e.setAttributes({[Jr]:JSON.stringify(i)})}}else _F(s)?(EF(e,s,r),r&&s.output_text&&e.setAttributes({[Jr]:s.output_text})):jF(s)&&CF(e,s)}function T1(e,t){if("messages"in t){const r=vf(t.messages);e.setAttributes({[Ni]:r})}if("input"in t){const r=vf(t.input);e.setAttributes({[Ni]:r})}}function OF(e,t,r,s){return async function(...i){const o=AF(i,t),d=o[mr]||"unknown",u=Gy(t),h=i[0];return h&&typeof h=="object"&&h.stream===!0?da({name:`${u} ${d} stream-response`,op:C1(t),attributes:o},async f=>{try{s.recordInputs&&h&&T1(f,h);const x=await e.apply(r,i);return PF(x,f,s.recordOutputs??!1)}catch(x){throw f.setStatus({code:ot,message:"internal_error"}),mt(x,{mechanism:{handled:!1,type:"auto.ai.openai.stream",data:{function:t}}}),f.end(),x}}):Hs({name:`${u} ${d}`,op:C1(t),attributes:o},async f=>{try{s.recordInputs&&h&&T1(f,h);const x=await e.apply(r,i);return MF(f,x,s.recordOutputs),x}catch(x){throw mt(x,{mechanism:{handled:!1,type:"auto.ai.openai",data:{function:t}}}),x}})}}function R5(e,t="",r){return new Proxy(e,{get(s,a){const i=s[a],o=vF(t,String(a));return typeof i=="function"&&yF(o)?OF(i,o,s,r):typeof i=="function"?i.bind(s):i&&typeof i=="object"?R5(i,o,r):i}})}function LF(e,t){var a;const r=!!((a=be())!=null&&a.getOptions().sendDefaultPii),s={recordInputs:r,recordOutputs:r,...t};return R5(e,"",s)}function $F(e,t){var r;return"type"in e&&typeof e.type=="string"&&e.type==="error"?(t.setStatus({code:ot,message:((r=e.error)==null?void 0:r.type)??"internal_error"}),mt(e.error,{mechanism:{handled:!1,type:"auto.ai.anthropic.anthropic_error"}}),!0):!1}function DF(e,t){if(e.type==="message_delta"&&e.usage&&"output_tokens"in e.usage&&typeof e.usage.output_tokens=="number"&&(t.completionTokens=e.usage.output_tokens),e.message){const r=e.message;r.id&&(t.responseId=r.id),r.model&&(t.responseModel=r.model),r.stop_reason&&t.finishReasons.push(r.stop_reason),r.usage&&(typeof r.usage.input_tokens=="number"&&(t.promptTokens=r.usage.input_tokens),typeof r.usage.cache_creation_input_tokens=="number"&&(t.cacheCreationInputTokens=r.usage.cache_creation_input_tokens),typeof r.usage.cache_read_input_tokens=="number"&&(t.cacheReadInputTokens=r.usage.cache_read_input_tokens))}}function FF(e,t){e.type!=="content_block_start"||typeof e.index!="number"||!e.content_block||(e.content_block.type==="tool_use"||e.content_block.type==="server_tool_use")&&(t.activeToolBlocks[e.index]={id:e.content_block.id,name:e.content_block.name,inputJsonParts:[]})}function UF(e,t,r){if(!(e.type!=="content_block_delta"||!e.delta)){if(typeof e.index=="number"&&"partial_json"in e.delta&&typeof e.delta.partial_json=="string"){const s=t.activeToolBlocks[e.index];s&&s.inputJsonParts.push(e.delta.partial_json)}r&&typeof e.delta.text=="string"&&t.responseTexts.push(e.delta.text)}}function qF(e,t){if(e.type!=="content_block_stop"||typeof e.index!="number")return;const r=t.activeToolBlocks[e.index];if(!r)return;const s=r.inputJsonParts.join("");let a;try{a=s?JSON.parse(s):{}}catch{a={__unparsed:s}}t.toolCalls.push({type:"tool_use",id:r.id,name:r.name,input:a}),delete t.activeToolBlocks[e.index]}function I5(e,t,r,s){!(e&&typeof e=="object")||$F(e,s)||(DF(e,t),FF(e,t),UF(e,t,r),qF(e,t))}function BF(e,t,r){t.isRecording()&&(e.responseId&&t.setAttributes({[Rc]:e.responseId}),e.responseModel&&t.setAttributes({[Ta]:e.responseModel}),zy(t,e.promptTokens,e.completionTokens,e.cacheCreationInputTokens,e.cacheReadInputTokens),t.setAttributes({[op]:!0}),e.finishReasons.length>0&&t.setAttributes({[Mi]:JSON.stringify(e.finishReasons)}),r&&e.responseTexts.length>0&&t.setAttributes({[Jr]:e.responseTexts.join("")}),r&&e.toolCalls.length>0&&t.setAttributes({[Ws]:JSON.stringify(e.toolCalls)}),t.end())}async function*HF(e,t,r){const s={responseTexts:[],finishReasons:[],responseId:"",responseModel:"",promptTokens:void 0,completionTokens:void 0,cacheCreationInputTokens:void 0,cacheReadInputTokens:void 0,toolCalls:[],activeToolBlocks:{}};try{for await(const a of e)I5(a,s,r,t),yield a}finally{s.responseId&&t.setAttributes({[Rc]:s.responseId}),s.responseModel&&t.setAttributes({[Ta]:s.responseModel}),zy(t,s.promptTokens,s.completionTokens,s.cacheCreationInputTokens,s.cacheReadInputTokens),t.setAttributes({[op]:!0}),s.finishReasons.length>0&&t.setAttributes({[Mi]:JSON.stringify(s.finishReasons)}),r&&s.responseTexts.length>0&&t.setAttributes({[Jr]:s.responseTexts.join("")}),r&&s.toolCalls.length>0&&t.setAttributes({[Ws]:JSON.stringify(s.toolCalls)}),t.end()}}function WF(e,t,r){const s={responseTexts:[],finishReasons:[],responseId:"",responseModel:"",promptTokens:void 0,completionTokens:void 0,cacheCreationInputTokens:void 0,cacheReadInputTokens:void 0,toolCalls:[],activeToolBlocks:{}};return e.on("streamEvent",a=>{I5(a,s,r,t)}),e.on("message",()=>{BF(s,t,r)}),e.on("error",a=>{mt(a,{mechanism:{handled:!1,type:"auto.ai.anthropic.stream_error"}}),t.isRecording()&&(t.setStatus({code:ot,message:"stream_error"}),t.end())}),e}const zF=["messages.create","messages.stream","messages.countTokens","models.get","completions.create","models.retrieve","beta.messages.create"];function GF(e){return zF.includes(e)}function KF(e,t){t.error&&(e.setStatus({code:ot,message:t.error.type||"internal_error"}),mt(t.error,{mechanism:{handled:!1,type:"auto.ai.anthropic.anthropic_error"}}))}function VF(e){const{system:t,messages:r}=e,s=typeof t=="string"?[{role:"system",content:e.system}]:[],a=Array.isArray(r)?r:r!=null?[r]:[];return[...s,...a]}function YF(e,t){const r={[np]:"anthropic",[ji]:_u(t),[Ge]:"auto.ai.anthropic"};if(e.length>0&&typeof e[0]=="object"&&e[0]!==null){const s=e[0];s.tools&&Array.isArray(s.tools)&&(r[ip]=JSON.stringify(s.tools)),r[mr]=s.model??"unknown","temperature"in s&&(r[rp]=s.temperature),"top_p"in s&&(r[ap]=s.top_p),"stream"in s&&(r[qy]=s.stream),"top_k"in s&&(r[j5]=s.top_k),"frequency_penalty"in s&&(r[sp]=s.frequency_penalty),"max_tokens"in s&&(r[By]=s.max_tokens)}else t==="models.retrieve"||t==="models.get"?r[mr]=e[0]:r[mr]="unknown";return r}function gb(e,t){const r=VF(t);if(r.length){const s=vf(r);e.setAttributes({[Ni]:s})}if("input"in t){const s=vf(t.input);e.setAttributes({[Ni]:s})}"prompt"in t&&e.setAttributes({[VD]:JSON.stringify(t.prompt)})}function JF(e,t){if("content"in t&&Array.isArray(t.content)){e.setAttributes({[Jr]:t.content.map(s=>s.text).filter(s=>!!s).join("")});const r=[];for(const s of t.content)(s.type==="tool_use"||s.type==="server_tool_use")&&r.push(s);r.length>0&&e.setAttributes({[Ws]:JSON.stringify(r)})}"completion"in t&&e.setAttributes({[Jr]:t.completion}),"input_tokens"in t&&e.setAttributes({[Jr]:JSON.stringify(t.input_tokens)})}function QF(e,t){"id"in t&&"model"in t&&(e.setAttributes({[Rc]:t.id,[Ta]:t.model}),"created"in t&&typeof t.created=="number"&&e.setAttributes({[S1]:new Date(t.created*1e3).toISOString()}),"created_at"in t&&typeof t.created_at=="number"&&e.setAttributes({[S1]:new Date(t.created_at*1e3).toISOString()}),"usage"in t&&t.usage&&zy(e,t.usage.input_tokens,t.usage.output_tokens,t.usage.cache_creation_input_tokens,t.usage.cache_read_input_tokens))}function XF(e,t,r){if(!(!t||typeof t!="object")){if("type"in t&&t.type==="error"){KF(e,t);return}r&&JF(e,t),QF(e,t)}}function R1(e,t,r){throw mt(e,{mechanism:{handled:!1,type:"auto.ai.anthropic",data:{function:r}}}),t.isRecording()&&(t.setStatus({code:ot,message:"internal_error"}),t.end()),e}function ZF(e,t,r,s,a,i,o,d,u,h,p){const f=a[mr]??"unknown",x={name:`${i} ${f} stream-response`,op:yf(o),attributes:a};return h&&!p?da(x,async y=>{try{u.recordInputs&&d&&gb(y,d);const b=await e.apply(r,s);return HF(b,y,u.recordOutputs??!1)}catch(b){return R1(b,y,o)}}):da(x,y=>{try{u.recordInputs&&d&&gb(y,d);const b=t.apply(r,s);return WF(b,y,u.recordOutputs??!1)}catch(b){return R1(b,y,o)}})}function eU(e,t,r,s){return new Proxy(e,{apply(a,i,o){const d=YF(o,t),u=d[mr]??"unknown",h=_u(t),p=typeof o[0]=="object"?o[0]:void 0,f=!!(p!=null&&p.stream),x=t==="messages.stream";return f||x?ZF(e,a,r,o,d,h,t,p,s,f,x):Hs({name:`${h} ${u}`,op:yf(t),attributes:d},y=>(s.recordInputs&&p&&gb(y,p),Xf(()=>a.apply(r,o),b=>{mt(b,{mechanism:{handled:!1,type:"auto.ai.anthropic",data:{function:t}}})},()=>{},b=>XF(y,b,s.recordOutputs))))}})}function P5(e,t="",r){return new Proxy(e,{get(s,a){const i=s[a],o=T5(t,String(a));return typeof i=="function"&&GF(o)?eU(i,o,s,r):typeof i=="function"?i.bind(s):i&&typeof i=="object"?P5(i,o,r):i}})}function tU(e,t){var a;const r=!!((a=be())!=null&&a.getOptions().sendDefaultPii),s={recordInputs:r,recordOutputs:r,...t};return P5(e,"",s)}const I1=["models.generateContent","models.generateContentStream","chats.create","sendMessage","sendMessageStream"],nU="google_genai",A5="chats.create",rU="chat";function sU(e,t){const r=e==null?void 0:e.promptFeedback;if(r!=null&&r.blockReason){const s=r.blockReasonMessage??r.blockReason;return t.setStatus({code:ot,message:`Content blocked: ${s}`}),mt(`Content blocked: ${s}`,{mechanism:{handled:!1,type:"auto.ai.google_genai"}}),!0}return!1}function aU(e,t){typeof e.responseId=="string"&&(t.responseId=e.responseId),typeof e.modelVersion=="string"&&(t.responseModel=e.modelVersion);const r=e.usageMetadata;r&&(typeof r.promptTokenCount=="number"&&(t.promptTokens=r.promptTokenCount),typeof r.candidatesTokenCount=="number"&&(t.completionTokens=r.candidatesTokenCount),typeof r.totalTokenCount=="number"&&(t.totalTokens=r.totalTokenCount))}function iU(e,t,r){var s;Array.isArray(e.functionCalls)&&t.toolCalls.push(...e.functionCalls);for(const a of e.candidates??[]){a!=null&&a.finishReason&&!t.finishReasons.includes(a.finishReason)&&t.finishReasons.push(a.finishReason);for(const i of((s=a==null?void 0:a.content)==null?void 0:s.parts)??[])r&&i.text&&t.responseTexts.push(i.text),i.functionCall&&t.toolCalls.push({type:"function",id:i.functionCall.id,name:i.functionCall.name,arguments:i.functionCall.args})}}function oU(e,t,r,s){!e||sU(e,s)||(aU(e,t),iU(e,t,r))}async function*lU(e,t,r){const s={responseTexts:[],finishReasons:[],toolCalls:[]};try{for await(const a of e)oU(a,s,r,t),yield a}finally{const a={[op]:!0};s.responseId&&(a[Rc]=s.responseId),s.responseModel&&(a[Ta]=s.responseModel),s.promptTokens!==void 0&&(a[Po]=s.promptTokens),s.completionTokens!==void 0&&(a[Ao]=s.completionTokens),s.totalTokens!==void 0&&(a[Mo]=s.totalTokens),s.finishReasons.length&&(a[Mi]=JSON.stringify(s.finishReasons)),r&&s.responseTexts.length&&(a[Jr]=s.responseTexts.join("")),r&&s.toolCalls.length&&(a[Ws]=JSON.stringify(s.toolCalls)),t.setAttributes(a),t.end()}}function cU(e){if(I1.includes(e))return!0;const t=e.split(".").pop();return I1.includes(t)}function dU(e){return e.includes("Stream")}function Id(e,t="user"){return typeof e=="string"?[{role:t,content:e}]:Array.isArray(e)?e.flatMap(r=>Id(r,t)):typeof e!="object"||!e?[]:"role"in e&&typeof e.role=="string"?[e]:"parts"in e?[{...e,role:t}]:[{role:t,content:e}]}function P1(e,t){if("model"in e&&typeof e.model=="string")return e.model;if(t&&typeof t=="object"){const r=t;if("model"in r&&typeof r.model=="string")return r.model;if("modelVersion"in r&&typeof r.modelVersion=="string")return r.modelVersion}return"unknown"}function uU(e){const t={};return"temperature"in e&&typeof e.temperature=="number"&&(t[rp]=e.temperature),"topP"in e&&typeof e.topP=="number"&&(t[ap]=e.topP),"topK"in e&&typeof e.topK=="number"&&(t[j5]=e.topK),"maxOutputTokens"in e&&typeof e.maxOutputTokens=="number"&&(t[By]=e.maxOutputTokens),"frequencyPenalty"in e&&typeof e.frequencyPenalty=="number"&&(t[sp]=e.frequencyPenalty),"presencePenalty"in e&&typeof e.presencePenalty=="number"&&(t[Hy]=e.presencePenalty),t}function hU(e,t,r){const s={[np]:nU,[ji]:_u(e),[Ge]:"auto.ai.google_genai"};if(t){if(s[mr]=P1(t,r),"config"in t&&typeof t.config=="object"&&t.config){const a=t.config;if(Object.assign(s,uU(a)),"tools"in a&&Array.isArray(a.tools)){const i=a.tools.flatMap(o=>o.functionDeclarations);s[ip]=JSON.stringify(i)}}}else s[mr]=P1({},r);return s}function A1(e,t){const r=[];"config"in t&&t.config&&typeof t.config=="object"&&"systemInstruction"in t.config&&t.config.systemInstruction&&r.push(...Id(t.config.systemInstruction,"system")),"history"in t&&r.push(...Id(t.history,"user")),"contents"in t&&r.push(...Id(t.contents,"user")),"message"in t&&r.push(...Id(t.message,"user")),r.length&&e.setAttributes({[Ni]:JSON.stringify(lp(r))})}function mU(e,t,r){if(!(!t||typeof t!="object")){if(t.modelVersion&&e.setAttribute(Ta,t.modelVersion),t.usageMetadata&&typeof t.usageMetadata=="object"){const s=t.usageMetadata;typeof s.promptTokenCount=="number"&&e.setAttributes({[Po]:s.promptTokenCount}),typeof s.candidatesTokenCount=="number"&&e.setAttributes({[Ao]:s.candidatesTokenCount}),typeof s.totalTokenCount=="number"&&e.setAttributes({[Mo]:s.totalTokenCount})}if(r&&Array.isArray(t.candidates)&&t.candidates.length>0){const s=t.candidates.map(a=>{var i;return(i=a.content)!=null&&i.parts&&Array.isArray(a.content.parts)?a.content.parts.map(o=>typeof o.text=="string"?o.text:"").filter(o=>o.length>0).join(""):""}).filter(a=>a.length>0);s.length>0&&e.setAttributes({[Jr]:s.join("")})}if(r&&t.functionCalls){const s=t.functionCalls;Array.isArray(s)&&s.length>0&&e.setAttributes({[Ws]:JSON.stringify(s)})}}}function M1(e,t,r,s){const a=t===A5;return new Proxy(e,{apply(i,o,d){const u=d[0],h=hU(t,u,r),p=h[mr]??"unknown",f=_u(t);return dU(t)?da({name:`${f} ${p} stream-response`,op:yf(t),attributes:h},async x=>{try{s.recordInputs&&u&&A1(x,u);const y=await i.apply(r,d);return lU(y,x,!!s.recordOutputs)}catch(y){throw x.setStatus({code:ot,message:"internal_error"}),mt(y,{mechanism:{handled:!1,type:"auto.ai.google_genai",data:{function:t}}}),x.end(),y}}):Hs({name:a?`${f} ${p} create`:`${f} ${p}`,op:yf(t),attributes:h},x=>(s.recordInputs&&u&&A1(x,u),Xf(()=>i.apply(r,d),y=>{mt(y,{mechanism:{handled:!1,type:"auto.ai.google_genai",data:{function:t}}})},()=>{},y=>{a||mU(x,y,s.recordOutputs)})))}})}function bb(e,t="",r){return new Proxy(e,{get:(s,a,i)=>{const o=Reflect.get(s,a,i),d=T5(t,String(a));if(typeof o=="function"&&cU(d)){if(d===A5){const u=M1(o,d,s,r);return function(...p){const f=u(...p);return f&&typeof f=="object"?bb(f,rU,r):f}}return M1(o,d,s,r)}return typeof o=="function"?o.bind(s):o&&typeof o=="object"?bb(o,d,r):o}})}function fU(e,t){var a;const r=!!((a=be())!=null&&a.getOptions().sendDefaultPii),s={recordInputs:r,recordOutputs:r,...t};return bb(e,"",s)}const Pd="auto.ai.langchain",pU={human:"user",ai:"assistant",assistant:"assistant",system:"system",function:"function",tool:"tool"},ca=(e,t,r)=>{r!=null&&(e[t]=r)},Sr=(e,t,r)=>{const s=Number(r);Number.isNaN(s)||(e[t]=s)};function ur(e){if(typeof e=="string")return e;try{return JSON.stringify(e)}catch{return String(e)}}function Nd(e){const t=e.toLowerCase();return pU[t]??t}function O1(e){return e.includes("System")?"system":e.includes("Human")?"user":e.includes("AI")||e.includes("Assistant")?"assistant":e.includes("Function")?"function":e.includes("Tool")?"tool":"user"}function L1(e){if(!(!e||Array.isArray(e)))return e.invocation_params}function Vy(e){return e.map(t=>{var a,i;const r=t._getType;if(typeof r=="function"){const o=r.call(t);return{role:Nd(o),content:ur(t.content)}}const s=(a=t.constructor)==null?void 0:a.name;if(s)return{role:Nd(O1(s)),content:ur(t.content)};if(t.type){const o=String(t.type).toLowerCase();return{role:Nd(o),content:ur(t.content)}}if(t.role)return{role:Nd(String(t.role)),content:ur(t.content)};if(t.lc===1&&t.kwargs){const o=t.id,d=Array.isArray(o)&&o.length>0?o[o.length-1]:"",u=typeof d=="string"?O1(d):"user";return{role:Nd(u),content:ur((i=t.kwargs)==null?void 0:i.content)}}return{role:"user",content:ur(t.content)}})}function xU(e,t,r){const s={},a="kwargs"in e?e.kwargs:void 0,i=(t==null?void 0:t.temperature)??(r==null?void 0:r.ls_temperature)??(a==null?void 0:a.temperature);Sr(s,rp,i);const o=(t==null?void 0:t.max_tokens)??(r==null?void 0:r.ls_max_tokens)??(a==null?void 0:a.max_tokens);Sr(s,By,o);const d=(t==null?void 0:t.top_p)??(a==null?void 0:a.top_p);Sr(s,ap,d);const u=t==null?void 0:t.frequency_penalty;Sr(s,sp,u);const h=t==null?void 0:t.presence_penalty;return Sr(s,Hy,h),t&&"stream"in t&&ca(s,qy,!!t.stream),s}function M5(e,t,r,s,a,i){return{[np]:ur(e??"langchain"),[ji]:r,[mr]:ur(t),[Ge]:Pd,...xU(s,a,i)}}function gU(e,t,r,s,a){const i=a==null?void 0:a.ls_provider,o=(s==null?void 0:s.model)??(a==null?void 0:a.ls_model_name)??"unknown",d=M5(i,o,"pipeline",e,s,a);if(r&&Array.isArray(t)&&t.length>0){const u=t.map(h=>({role:"user",content:h}));ca(d,Ni,ur(u))}return d}function bU(e,t,r,s,a){var u;const i=(a==null?void 0:a.ls_provider)??((u=e.id)==null?void 0:u[2]),o=(s==null?void 0:s.model)??(a==null?void 0:a.ls_model_name)??"unknown",d=M5(i,o,"chat",e,s,a);if(r&&Array.isArray(t)&&t.length>0){const h=Vy(t.flat()),p=lp(h);ca(d,Ni,ur(p))}return d}function yU(e,t){var a;const r=[],s=e.flat();for(const i of s){const o=(a=i.message)==null?void 0:a.content;if(Array.isArray(o))for(const d of o){const u=d;u.type==="tool_use"&&r.push(u)}}r.length>0&&ca(t,Ws,ur(r))}function vU(e,t){if(!e)return;const r=e.tokenUsage,s=e.usage;if(r)Sr(t,Po,r.promptTokens),Sr(t,Ao,r.completionTokens),Sr(t,Mo,r.totalTokens);else if(s){Sr(t,Po,s.input_tokens),Sr(t,Ao,s.output_tokens);const a=Number(s.input_tokens),i=Number(s.output_tokens),o=(Number.isNaN(a)?0:a)+(Number.isNaN(i)?0:i);o>0&&Sr(t,Mo,o),s.cache_creation_input_tokens!==void 0&&Sr(t,ZD,s.cache_creation_input_tokens),s.cache_read_input_tokens!==void 0&&Sr(t,eF,s.cache_read_input_tokens)}}function wU(e,t){var h,p,f,x;if(!e)return;const r={};if(Array.isArray(e.generations)){const y=e.generations.flat().map(b=>{var w,v;return(w=b.generationInfo)!=null&&w.finish_reason?b.generationInfo.finish_reason:(v=b.generation_info)!=null&&v.finish_reason?b.generation_info.finish_reason:null}).filter(b=>typeof b=="string");if(y.length>0&&ca(r,Mi,ur(y)),yU(e.generations,r),t){const b=e.generations.flat().map(w=>{var v;return w.text??((v=w.message)==null?void 0:v.content)}).filter(w=>typeof w=="string");b.length>0&&ca(r,Jr,ur(b))}}vU(e.llmOutput,r);const s=e.llmOutput,a=(p=(h=e.generations)==null?void 0:h[0])==null?void 0:p[0],i=a==null?void 0:a.message,o=(s==null?void 0:s.model_name)??(s==null?void 0:s.model)??((f=i==null?void 0:i.response_metadata)==null?void 0:f.model_name);o&&ca(r,Ta,o);const d=(s==null?void 0:s.id)??(i==null?void 0:i.id);d&&ca(r,Rc,d);const u=(s==null?void 0:s.stop_reason)??((x=i==null?void 0:i.response_metadata)==null?void 0:x.finish_reason);return u&&ca(r,QD,ur(u)),r}function _U(e={}){const t=e.recordInputs??!1,r=e.recordOutputs??!1,s=new Map,a=o=>{const d=s.get(o);d!=null&&d.isRecording()&&(d.end(),s.delete(o))},i={lc_serializable:!1,lc_namespace:["langchain_core","callbacks","sentry"],lc_secrets:void 0,lc_attributes:void 0,lc_aliases:void 0,lc_serializable_keys:void 0,lc_id:["langchain_core","callbacks","sentry"],lc_kwargs:{},name:"SentryCallbackHandler",ignoreLLM:!1,ignoreChain:!1,ignoreAgent:!1,ignoreRetriever:!1,ignoreCustomEvent:!1,raiseError:!1,awaitHandlers:!0,handleLLMStart(o,d,u,h,p,f,x,y){const b=L1(f),w=gU(o,d,t,b,x),v=w[mr],j=w[ji];da({name:`${j} ${v}`,op:"gen_ai.pipeline",attributes:{...w,[Nt]:"gen_ai.pipeline"}},C=>(s.set(u,C),C))},handleChatModelStart(o,d,u,h,p,f,x,y){const b=L1(f),w=bU(o,d,t,b,x),v=w[mr],j=w[ji];da({name:`${j} ${v}`,op:"gen_ai.chat",attributes:{...w,[Nt]:"gen_ai.chat"}},C=>(s.set(u,C),C))},handleLLMEnd(o,d,u,h,p){const f=s.get(d);if(f!=null&&f.isRecording()){const x=wU(o,r);x&&f.setAttributes(x),a(d)}},handleLLMError(o,d){const u=s.get(d);u!=null&&u.isRecording()&&(u.setStatus({code:ot,message:"llm_error"}),a(d)),mt(o,{mechanism:{handled:!1,type:`${Pd}.llm_error_handler`}})},handleChainStart(o,d,u,h){const p=o.name||"unknown_chain",f={[Ge]:"auto.ai.langchain","langchain.chain.name":p};t&&(f["langchain.chain.inputs"]=JSON.stringify(d)),da({name:`chain ${p}`,op:"gen_ai.invoke_agent",attributes:{...f,[Nt]:"gen_ai.invoke_agent"}},x=>(s.set(u,x),x))},handleChainEnd(o,d){const u=s.get(d);u!=null&&u.isRecording()&&(r&&u.setAttributes({"langchain.chain.outputs":JSON.stringify(o)}),a(d))},handleChainError(o,d){const u=s.get(d);u!=null&&u.isRecording()&&(u.setStatus({code:ot,message:"chain_error"}),a(d)),mt(o,{mechanism:{handled:!1,type:`${Pd}.chain_error_handler`}})},handleToolStart(o,d,u,h){const p=o.name||"unknown_tool",f={[Ge]:Pd,"gen_ai.tool.name":p};t&&(f["gen_ai.tool.input"]=d),da({name:`execute_tool ${p}`,op:"gen_ai.execute_tool",attributes:{...f,[Nt]:"gen_ai.execute_tool"}},x=>(s.set(u,x),x))},handleToolEnd(o,d){const u=s.get(d);u!=null&&u.isRecording()&&(r&&u.setAttributes({"gen_ai.tool.output":JSON.stringify(o)}),a(d))},handleToolError(o,d){const u=s.get(d);u!=null&&u.isRecording()&&(u.setStatus({code:ot,message:"tool_error"}),a(d)),mt(o,{mechanism:{handled:!1,type:`${Pd}.tool_error_handler`}})},copy(){return i},toJSON(){return{lc:1,type:"not_implemented",id:i.lc_id}},toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:i.lc_id}}};return i}const O5="auto.ai.langgraph";function jU(e){if(!e||e.length===0)return null;const t=[];for(const r of e)if(r&&typeof r=="object"){const s=r.tool_calls;s&&Array.isArray(s)&&t.push(...s)}return t.length>0?t:null}function NU(e){const t=e;let r=0,s=0,a=0;if(t.usage_metadata&&typeof t.usage_metadata=="object"){const i=t.usage_metadata;return typeof i.input_tokens=="number"&&(r=i.input_tokens),typeof i.output_tokens=="number"&&(s=i.output_tokens),typeof i.total_tokens=="number"&&(a=i.total_tokens),{inputTokens:r,outputTokens:s,totalTokens:a}}if(t.response_metadata&&typeof t.response_metadata=="object"){const i=t.response_metadata;if(i.tokenUsage&&typeof i.tokenUsage=="object"){const o=i.tokenUsage;typeof o.promptTokens=="number"&&(r=o.promptTokens),typeof o.completionTokens=="number"&&(s=o.completionTokens),typeof o.totalTokens=="number"&&(a=o.totalTokens)}}return{inputTokens:r,outputTokens:s,totalTokens:a}}function SU(e,t){const r=t;if(r.response_metadata&&typeof r.response_metadata=="object"){const s=r.response_metadata;s.model_name&&typeof s.model_name=="string"&&e.setAttribute(Ta,s.model_name),s.finish_reason&&typeof s.finish_reason=="string"&&e.setAttribute(Mi,[s.finish_reason])}}function kU(e){var r,s,a,i,o,d,u,h;if(!((i=(a=(s=(r=e.builder)==null?void 0:r.nodes)==null?void 0:s.tools)==null?void 0:a.runnable)!=null&&i.tools))return null;const t=(h=(u=(d=(o=e.builder)==null?void 0:o.nodes)==null?void 0:d.tools)==null?void 0:u.runnable)==null?void 0:h.tools;return!t||!Array.isArray(t)||t.length===0?null:t.map(p=>{var f,x,y;return{name:(f=p.lc_kwargs)==null?void 0:f.name,description:(x=p.lc_kwargs)==null?void 0:x.description,schema:(y=p.lc_kwargs)==null?void 0:y.schema}})}function EU(e,t,r){const s=r,a=s==null?void 0:s.messages;if(!a||!Array.isArray(a))return;const i=(t==null?void 0:t.length)??0,o=a.length>i?a.slice(i):[];if(o.length===0)return;const d=jU(o);d&&e.setAttribute(Ws,JSON.stringify(d));const u=Vy(o);e.setAttribute(Jr,JSON.stringify(u));let h=0,p=0,f=0;for(const x of o){const y=NU(x);h+=y.inputTokens,p+=y.outputTokens,f+=y.totalTokens,SU(e,x)}h>0&&e.setAttribute(Po,h),p>0&&e.setAttribute(Ao,p),f>0&&e.setAttribute(Mo,f)}function CU(e,t){return new Proxy(e,{apply(r,s,a){return Hs({op:"gen_ai.create_agent",name:"create_agent",attributes:{[Ge]:O5,[Nt]:"gen_ai.create_agent",[ji]:"create_agent"}},i=>{try{const o=Reflect.apply(r,s,a),d=a.length>0?a[0]:{};d!=null&&d.name&&typeof d.name=="string"&&(i.setAttribute(N5,d.name),i.updateName(`create_agent ${d.name}`));const u=o.invoke;return u&&typeof u=="function"&&(o.invoke=TU(u.bind(o),o,d,t)),o}catch(o){throw i.setStatus({code:ot,message:"internal_error"}),mt(o,{mechanism:{handled:!1,type:"auto.ai.langgraph.error"}}),o}})}})}function TU(e,t,r,s){return new Proxy(e,{apply(a,i,o){return Hs({op:"gen_ai.invoke_agent",name:"invoke_agent",attributes:{[Ge]:O5,[Nt]:tF,[ji]:"invoke_agent"}},async d=>{try{const u=r==null?void 0:r.name;u&&typeof u=="string"&&(d.setAttribute(XD,u),d.setAttribute(N5,u),d.updateName(`invoke_agent ${u}`));const h=kU(t);h&&d.setAttribute(ip,JSON.stringify(h));const p=s.recordInputs,f=s.recordOutputs,x=o.length>0?o[0].messages??[]:[];if(x&&p){const b=Vy(x),w=lp(b);d.setAttribute(Ni,JSON.stringify(w))}const y=await Reflect.apply(a,i,o);return f&&EU(d,x??null,y),y}catch(u){throw d.setStatus({code:ot,message:"internal_error"}),mt(u,{mechanism:{handled:!1,type:"auto.ai.langgraph.error"}}),u}})}})}function RU(e,t){const r=t||{};return e.compile=CU(e.compile.bind(e),r),e}function L5(e){if(e!==void 0)return e>=400&&e<500?"warning":e>=500?"error":void 0}const oc=Me;function IU(){return"history"in oc&&!!oc.history}function PU(){if(!("fetch"in oc))return!1;try{return new Headers,new Request("data:,"),new Response,!0}catch{return!1}}function yb(e){return e&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function $5(){var r;if(typeof EdgeRuntime=="string")return!0;if(!PU())return!1;if(yb(oc.fetch))return!0;let e=!1;const t=oc.document;if(t&&typeof t.createElement=="function")try{const s=t.createElement("iframe");s.hidden=!0,t.head.appendChild(s),(r=s.contentWindow)!=null&&r.fetch&&(e=yb(s.contentWindow.fetch)),t.head.removeChild(s)}catch(s){xe&&Y.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",s)}return e}function AU(){return"ReportingObserver"in oc}function Yy(e,t){const r="fetch";Ri(r,e),Ii(r,()=>D5(void 0,t))}function MU(e){const t="fetch-body-resolved";Ri(t,e),Ii(t,()=>D5(LU))}function D5(e,t=!1){t&&!$5()||An(Me,"fetch",function(r){return function(...s){const a=new Error,{method:i,url:o}=$U(s),d={args:s,fetchData:{method:i,url:o},startTimestamp:At()*1e3,virtualError:a,headers:DU(s)};return e||Kr("fetch",{...d}),r.apply(Me,s).then(async u=>(e?e(u):Kr("fetch",{...d,endTimestamp:At()*1e3,response:u}),u),u=>{if(Kr("fetch",{...d,endTimestamp:At()*1e3,error:u}),fa(u)&&u.stack===void 0&&(u.stack=a.stack,yn(u,"framesToPop",1)),u instanceof TypeError&&(u.message==="Failed to fetch"||u.message==="Load failed"||u.message==="NetworkError when attempting to fetch resource."))try{const h=new URL(d.fetchData.url);u.message=`${u.message} (${h.host})`}catch{}throw u})}})}async function OU(e,t){if(e!=null&&e.body){const r=e.body,s=r.getReader(),a=setTimeout(()=>{r.cancel().then(null,()=>{})},90*1e3);let i=!0;for(;i;){let o;try{o=setTimeout(()=>{r.cancel().then(null,()=>{})},5e3);const{done:d}=await s.read();clearTimeout(o),d&&(t(),i=!1)}catch{i=!1}finally{clearTimeout(o)}}clearTimeout(a),s.releaseLock(),r.cancel().then(null,()=>{})}}function LU(e){let t;try{t=e.clone()}catch{return}OU(t,()=>{Kr("fetch-body-resolved",{endTimestamp:At()*1e3,response:e})})}function Om(e,t){return!!e&&typeof e=="object"&&!!e[t]}function $1(e){return typeof e=="string"?e:e?Om(e,"url")?e.url:e.toString?e.toString():"":""}function $U(e){if(e.length===0)return{method:"GET",url:""};if(e.length===2){const[r,s]=e;return{url:$1(r),method:Om(s,"method")?String(s.method).toUpperCase():xy(r)&&Om(r,"method")?String(r.method).toUpperCase():"GET"}}const t=e[0];return{url:$1(t),method:Om(t,"method")?String(t.method).toUpperCase():"GET"}}function DU(e){const[t,r]=e;try{if(typeof r=="object"&&r!==null&&"headers"in r&&r.headers)return new Headers(r.headers);if(xy(t))return new Headers(t.headers)}catch{}}function FU(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}function UU(){return"npm"}function qU(){return!FU()&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function wf(){return typeof window<"u"&&(!qU()||BU())}function BU(){const e=Me.process;return(e==null?void 0:e.type)==="renderer"}const bs=Me,_t=bs.document,Ad=bs.navigator,F5="Report a Bug",HU="Cancel",WU="Send Bug Report",zU="Confirm",GU="Report a Bug",KU="your.email@example.org",VU="Email",YU="What's the bug? What did you expect?",JU="Description",QU="Your Name",XU="Name",ZU="Thank you for your report!",e7="(required)",t7="Add a screenshot",n7="Remove screenshot",r7="Highlight",s7="Hide",a7="Remove",i7="widget",o7="api",l7=5e3,U5=(e,t={includeReplay:!0})=>{if(!e.message)throw new Error("Unable to submit feedback with empty message");const r=be();if(!r)throw new Error("No client setup, cannot send feedback.");e.tags&&Object.keys(e.tags).length&&We().setTags(e.tags);const s=w5({source:o7,url:Uo(),...e},t);return new Promise((a,i)=>{const o=setTimeout(()=>i("Unable to determine if Feedback was correctly sent."),3e4),d=r.on("afterSendEvent",(u,h)=>{if(u.event_id===s)return clearTimeout(o),d(),h!=null&&h.statusCode&&h.statusCode>=200&&h.statusCode<300?a(s):(h==null?void 0:h.statusCode)===403?i("Unable to send feedback. This could be because this domain is not in your list of allowed domains."):i("Unable to send feedback. This could be because of network issues, or because you are using an ad-blocker.")})})},Lm=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function c7(){return!(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(Ad.userAgent)||/Macintosh/i.test(Ad.userAgent)&&Ad.maxTouchPoints&&Ad.maxTouchPoints>1||!isSecureContext)}function om(e,t){return{...e,...t,tags:{...e.tags,...t.tags},onFormOpen:()=>{var r,s;(r=t.onFormOpen)==null||r.call(t),(s=e.onFormOpen)==null||s.call(e)},onFormClose:()=>{var r,s;(r=t.onFormClose)==null||r.call(t),(s=e.onFormClose)==null||s.call(e)},onSubmitSuccess:(r,s)=>{var a,i;(a=t.onSubmitSuccess)==null||a.call(t,r,s),(i=e.onSubmitSuccess)==null||i.call(e,r,s)},onSubmitError:r=>{var s,a;(s=t.onSubmitError)==null||s.call(t,r),(a=e.onSubmitError)==null||a.call(e,r)},onFormSubmitted:()=>{var r,s;(r=t.onFormSubmitted)==null||r.call(t),(s=e.onFormSubmitted)==null||s.call(e)},themeDark:{...e.themeDark,...t.themeDark},themeLight:{...e.themeLight,...t.themeLight}}}function d7(e){const t=_t.createElement("style");return t.textContent=`
.widget__actor {
  position: fixed;
  z-index: var(--z-index);
  margin: var(--page-margin);
  inset: var(--actor-inset);

  display: flex;
  align-items: center;
  gap: 8px;
  padding: 16px;

  font-family: inherit;
  font-size: var(--font-size);
  font-weight: 600;
  line-height: 1.14em;
  text-decoration: none;

  background: var(--actor-background, var(--background));
  border-radius: var(--actor-border-radius, 1.7em/50%);
  border: var(--actor-border, var(--border));
  box-shadow: var(--actor-box-shadow, var(--box-shadow));
  color: var(--actor-color, var(--foreground));
  fill: var(--actor-color, var(--foreground));
  cursor: pointer;
  opacity: 1;
  transition: transform 0.2s ease-in-out;
  transform: translate(0, 0) scale(1);
}
.widget__actor[aria-hidden="true"] {
  opacity: 0;
  pointer-events: none;
  visibility: hidden;
  transform: translate(0, 16px) scale(0.98);
}

.widget__actor:hover {
  background: var(--actor-hover-background, var(--background));
  filter: var(--interactive-filter);
}

.widget__actor svg {
  width: 1.14em;
  height: 1.14em;
}

@media (max-width: 600px) {
  .widget__actor span {
    display: none;
  }
}
`,e&&t.setAttribute("nonce",e),t}function Cr(e,t){return Object.entries(t).forEach(([r,s])=>{e.setAttributeNS(null,r,s)}),e}const _l=20,u7="http://www.w3.org/2000/svg";function h7(){const e=d=>bs.document.createElementNS(u7,d),t=Cr(e("svg"),{width:`${_l}`,height:`${_l}`,viewBox:`0 0 ${_l} ${_l}`,fill:"var(--actor-color, var(--foreground))"}),r=Cr(e("g"),{clipPath:"url(#clip0_57_80)"}),s=Cr(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.6622 15H12.3997C12.2129 14.9959 12.031 14.9396 11.8747 14.8375L8.04965 12.2H7.49956V19.1C7.4875 19.3348 7.3888 19.5568 7.22256 19.723C7.05632 19.8892 6.83435 19.9879 6.59956 20H2.04956C1.80193 19.9968 1.56535 19.8969 1.39023 19.7218C1.21511 19.5467 1.1153 19.3101 1.11206 19.0625V12.2H0.949652C0.824431 12.2017 0.700142 12.1783 0.584123 12.1311C0.468104 12.084 0.362708 12.014 0.274155 11.9255C0.185602 11.8369 0.115689 11.7315 0.0685419 11.6155C0.0213952 11.4995 -0.00202913 11.3752 -0.00034808 11.25V3.75C-0.00900498 3.62067 0.0092504 3.49095 0.0532651 3.36904C0.0972798 3.24712 0.166097 3.13566 0.255372 3.04168C0.344646 2.94771 0.452437 2.87327 0.571937 2.82307C0.691437 2.77286 0.82005 2.74798 0.949652 2.75H8.04965L11.8747 0.1625C12.031 0.0603649 12.2129 0.00407221 12.3997 0H15.6622C15.9098 0.00323746 16.1464 0.103049 16.3215 0.278167C16.4966 0.453286 16.5964 0.689866 16.5997 0.9375V3.25269C17.3969 3.42959 18.1345 3.83026 18.7211 4.41679C19.5322 5.22788 19.9878 6.32796 19.9878 7.47502C19.9878 8.62209 19.5322 9.72217 18.7211 10.5333C18.1345 11.1198 17.3969 11.5205 16.5997 11.6974V14.0125C16.6047 14.1393 16.5842 14.2659 16.5395 14.3847C16.4948 14.5035 16.4268 14.6121 16.3394 14.7042C16.252 14.7962 16.147 14.8698 16.0307 14.9206C15.9144 14.9714 15.7891 14.9984 15.6622 15ZM1.89695 10.325H1.88715V4.625H8.33715C8.52423 4.62301 8.70666 4.56654 8.86215 4.4625L12.6872 1.875H14.7247V13.125H12.6872L8.86215 10.4875C8.70666 10.3835 8.52423 10.327 8.33715 10.325H2.20217C2.15205 10.3167 2.10102 10.3125 2.04956 10.3125C1.9981 10.3125 1.94708 10.3167 1.89695 10.325ZM2.98706 12.2V18.1625H5.66206V12.2H2.98706ZM16.5997 9.93612V5.01393C16.6536 5.02355 16.7072 5.03495 16.7605 5.04814C17.1202 5.13709 17.4556 5.30487 17.7425 5.53934C18.0293 5.77381 18.2605 6.06912 18.4192 6.40389C18.578 6.73866 18.6603 7.10452 18.6603 7.47502C18.6603 7.84552 18.578 8.21139 18.4192 8.54616C18.2605 8.88093 18.0293 9.17624 17.7425 9.41071C17.4556 9.64518 17.1202 9.81296 16.7605 9.90191C16.7072 9.91509 16.6536 9.9265 16.5997 9.93612Z"});t.appendChild(r).appendChild(s);const a=e("defs"),i=Cr(e("clipPath"),{id:"clip0_57_80"}),o=Cr(e("rect"),{width:`${_l}`,height:`${_l}`,fill:"white"});return i.appendChild(o),a.appendChild(i),t.appendChild(a).appendChild(i).appendChild(o),t}function m7({triggerLabel:e,triggerAriaLabel:t,shadow:r,styleNonce:s}){const a=_t.createElement("button");if(a.type="button",a.className="widget__actor",a.ariaHidden="false",a.ariaLabel=t||e||F5,a.appendChild(h7()),e){const o=_t.createElement("span");o.appendChild(_t.createTextNode(e)),a.appendChild(o)}const i=d7(s);return{el:a,appendToDom(){r.appendChild(i),r.appendChild(a)},removeFromDom(){a.remove(),i.remove()},show(){a.ariaHidden="false"},hide(){a.ariaHidden="true"}}}const q5="rgba(88, 74, 192, 1)",f7={foreground:"#2b2233",background:"#ffffff",accentForeground:"white",accentBackground:q5,successColor:"#268d75",errorColor:"#df3338",border:"1.5px solid rgba(41, 35, 47, 0.13)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(95%)"},D1={foreground:"#ebe6ef",background:"#29232f",accentForeground:"white",accentBackground:q5,successColor:"#2da98c",errorColor:"#f55459",border:"1.5px solid rgba(235, 230, 239, 0.15)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(150%)"};function F1(e){return`
  --foreground: ${e.foreground};
  --background: ${e.background};
  --accent-foreground: ${e.accentForeground};
  --accent-background: ${e.accentBackground};
  --success-color: ${e.successColor};
  --error-color: ${e.errorColor};
  --border: ${e.border};
  --box-shadow: ${e.boxShadow};
  --outline: ${e.outline};
  --interactive-filter: ${e.interactiveFilter};
  `}function p7({colorScheme:e,themeDark:t,themeLight:r,styleNonce:s}){const a=_t.createElement("style");return a.textContent=`
:host {
  --font-family: system-ui, 'Helvetica Neue', Arial, sans-serif;
  --font-size: 14px;
  --z-index: 100000;

  --page-margin: 16px;
  --inset: auto 0 0 auto;
  --actor-inset: var(--inset);

  font-family: var(--font-family);
  font-size: var(--font-size);

  ${e!=="system"?"color-scheme: only light;":""}

  ${F1(e==="dark"?{...D1,...t}:{...f7,...r})}
}

${e==="system"?`
@media (prefers-color-scheme: dark) {
  :host {
    ${F1({...D1,...t})}
  }
}`:""}
}
`,s&&a.setAttribute("nonce",s),a}const B5=({lazyLoadIntegration:e,getModalIntegration:t,getScreenshotIntegration:r})=>(({id:a="sentry-feedback",autoInject:i=!0,showBranding:o=!0,isEmailRequired:d=!1,isNameRequired:u=!1,showEmail:h=!0,showName:p=!0,enableScreenshot:f=!0,useSentryUser:x={email:"email",name:"username"},tags:y,styleNonce:b,scriptNonce:w,colorScheme:v="system",themeLight:j={},themeDark:C={},addScreenshotButtonLabel:S=t7,cancelButtonLabel:k=HU,confirmButtonLabel:R=zU,emailLabel:E=VU,emailPlaceholder:I=KU,formTitle:M=GU,isRequiredLabel:O=e7,messageLabel:L=JU,messagePlaceholder:P=YU,nameLabel:$=XU,namePlaceholder:B=QU,removeScreenshotButtonLabel:D=n7,submitButtonLabel:se=WU,successMessageText:X=ZU,triggerLabel:ee=F5,triggerAriaLabel:F="",highlightToolText:Q=r7,hideToolText:J=s7,removeHighlightText:U=a7,onFormOpen:G,onFormClose:ie,onSubmitSuccess:ae,onSubmitError:fe,onFormSubmitted:je}={})=>{const ze={id:a,autoInject:i,showBranding:o,isEmailRequired:d,isNameRequired:u,showEmail:h,showName:p,enableScreenshot:f,useSentryUser:x,tags:y,styleNonce:b,scriptNonce:w,colorScheme:v,themeDark:C,themeLight:j,triggerLabel:ee,triggerAriaLabel:F,cancelButtonLabel:k,submitButtonLabel:se,confirmButtonLabel:R,formTitle:M,emailLabel:E,emailPlaceholder:I,messageLabel:L,messagePlaceholder:P,nameLabel:$,namePlaceholder:B,successMessageText:X,isRequiredLabel:O,addScreenshotButtonLabel:S,removeScreenshotButtonLabel:D,highlightToolText:Q,hideToolText:J,removeHighlightText:U,onFormClose:ie,onFormOpen:G,onSubmitError:fe,onSubmitSuccess:ae,onFormSubmitted:je};let he=null,Ee=[];const nt=Ve=>{if(!he){const vt=_t.createElement("div");vt.id=String(Ve.id),_t.body.appendChild(vt),he=vt.attachShadow({mode:"open"}),he.appendChild(p7(Ve))}return he},Ln=async Ve=>{const vt=Ve.enableScreenshot&&c7();let En,nn;try{En=(t?t():await e("feedbackModalIntegration",w))(),hb(En)}catch{throw Lm&&Y.error("[Feedback] Error when trying to load feedback integrations. Try using `feedbackSyncIntegration` in your `Sentry.init`."),new Error("[Feedback] Missing feedback modal integration!")}try{const an=vt?r?r():await e("feedbackScreenshotIntegration",w):void 0;an&&(nn=an(),hb(nn))}catch{Lm&&Y.error("[Feedback] Missing feedback screenshot integration. Proceeding without screenshots.")}const wt=En.createDialog({options:{...Ve,onFormClose:()=>{var an;wt==null||wt.close(),(an=Ve.onFormClose)==null||an.call(Ve)},onFormSubmitted:()=>{var an;wt==null||wt.close(),(an=Ve.onFormSubmitted)==null||an.call(Ve)}},screenshotIntegration:nn,sendFeedback:U5,shadow:nt(Ve)});return wt},Or=(Ve,vt={})=>{const En=om(ze,vt),nn=typeof Ve=="string"?_t.querySelector(Ve):typeof Ve.addEventListener=="function"?Ve:null;if(!nn)throw Lm&&Y.error("[Feedback] Unable to attach to target element"),new Error("Unable to attach to target element");let wt=null;const an=async()=>{wt||(wt=await Ln({...En,onFormSubmitted:()=>{var Bt;wt==null||wt.removeFromDom(),(Bt=En.onFormSubmitted)==null||Bt.call(En)}})),wt.appendToDom(),wt.open()};nn.addEventListener("click",an);const Ye=()=>{Ee=Ee.filter(Bt=>Bt!==Ye),wt==null||wt.removeFromDom(),wt=null,nn.removeEventListener("click",an)};return Ee.push(Ye),Ye},yr=(Ve={})=>{const vt=om(ze,Ve),En=nt(vt),nn=m7({triggerLabel:vt.triggerLabel,triggerAriaLabel:vt.triggerAriaLabel,shadow:En,styleNonce:b});return Or(nn.el,{...vt,onFormOpen(){nn.hide()},onFormClose(){nn.show()},onFormSubmitted(){nn.show()}}),nn};return{name:"Feedback",setupOnce(){!wf()||!ze.autoInject||(_t.readyState==="loading"?_t.addEventListener("DOMContentLoaded",()=>yr().appendToDom()):yr().appendToDom())},attachTo:Or,createWidget(Ve={}){const vt=yr(om(ze,Ve));return vt.appendToDom(),vt},async createForm(Ve={}){return Ln(om(ze,Ve))},remove(){var Ve;he&&((Ve=he.parentElement)==null||Ve.remove(),he=null),Ee.forEach(vt=>vt()),Ee=[]}}});function x7(){const e=be();return e==null?void 0:e.getIntegrationByName("Feedback")}var dp,St,H5,ro,U1,W5,vb,eu={},Jy=[],g7=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Qy=Array.isArray;function hi(e,t){for(var r in t)e[r]=t[r];return e}function z5(e){var t=e.parentNode;t&&t.removeChild(e)}function et(e,t,r){var s,a,i,o={};for(i in t)i=="key"?s=t[i]:i=="ref"?a=t[i]:o[i]=t[i];if(arguments.length>2&&(o.children=arguments.length>3?dp.call(arguments,2):r),typeof e=="function"&&e.defaultProps!=null)for(i in e.defaultProps)o[i]===void 0&&(o[i]=e.defaultProps[i]);return $m(e,o,s,a,null)}function $m(e,t,r,s,a){var i={type:e,props:t,key:r,ref:s,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:a??++H5,__i:-1,__u:0};return a==null&&St.vnode!=null&&St.vnode(i),i}function ju(e){return e.children}function Dm(e,t){this.props=e,this.context=t}function lc(e,t){if(t==null)return e.__?lc(e.__,e.__i+1):null;for(var r;t<e.__k.length;t++)if((r=e.__k[t])!=null&&r.__e!=null)return r.__e;return typeof e.type=="function"?lc(e):null}function b7(e,t,r){var s,a=e.__v,i=a.__e,o=e.__P;if(o)return(s=hi({},a)).__v=a.__v+1,St.vnode&&St.vnode(s),Xy(o,s,a,e.__n,o.ownerSVGElement!==void 0,32&a.__u?[i]:null,t,i??lc(a),!!(32&a.__u),r),s.__.__k[s.__i]=s,s.__d=void 0,s.__e!=i&&G5(s),s}function G5(e){var t,r;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((r=e.__k[t])!=null&&r.__e!=null){e.__e=e.__c.base=r.__e;break}return G5(e)}}function q1(e){(!e.__d&&(e.__d=!0)&&ro.push(e)&&!_f.__r++||U1!==St.debounceRendering)&&((U1=St.debounceRendering)||W5)(_f)}function _f(){var e,t,r,s=[],a=[];for(ro.sort(vb);e=ro.shift();)e.__d&&(r=ro.length,t=b7(e,s,a)||t,r===0||ro.length>r?(wb(s,t,a),a.length=s.length=0,t=void 0,ro.sort(vb)):t&&St.__c&&St.__c(t,Jy));t&&wb(s,t,a),_f.__r=0}function K5(e,t,r,s,a,i,o,d,u,h,p){var f,x,y,b,w,v=s&&s.__k||Jy,j=t.length;for(r.__d=u,y7(r,t,v),u=r.__d,f=0;f<j;f++)(y=r.__k[f])!=null&&typeof y!="boolean"&&typeof y!="function"&&(x=y.__i===-1?eu:v[y.__i]||eu,y.__i=f,Xy(e,y,x,a,i,o,d,u,h,p),b=y.__e,y.ref&&x.ref!=y.ref&&(x.ref&&Zy(x.ref,null,y),p.push(y.ref,y.__c||b,y)),w==null&&b!=null&&(w=b),65536&y.__u||x.__k===y.__k?u=V5(y,u,e):typeof y.type=="function"&&y.__d!==void 0?u=y.__d:b&&(u=b.nextSibling),y.__d=void 0,y.__u&=-196609);r.__d=u,r.__e=w}function y7(e,t,r){var s,a,i,o,d,u=t.length,h=r.length,p=h,f=0;for(e.__k=[],s=0;s<u;s++)(a=e.__k[s]=(a=t[s])==null||typeof a=="boolean"||typeof a=="function"?null:typeof a=="string"||typeof a=="number"||typeof a=="bigint"||a.constructor==String?$m(null,a,null,null,a):Qy(a)?$m(ju,{children:a},null,null,null):a.constructor===void 0&&a.__b>0?$m(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):a)!=null?(a.__=e,a.__b=e.__b+1,d=v7(a,r,o=s+f,p),a.__i=d,i=null,d!==-1&&(p--,(i=r[d])&&(i.__u|=131072)),i==null||i.__v===null?(d==-1&&f--,typeof a.type!="function"&&(a.__u|=65536)):d!==o&&(d===o+1?f++:d>o?p>u-o?f+=d-o:f--:f=d<o&&d==o-1?d-o:0,d!==s+f&&(a.__u|=65536))):(i=r[s])&&i.key==null&&i.__e&&(i.__e==e.__d&&(e.__d=lc(i)),_b(i,i,!1),r[s]=null,p--);if(p)for(s=0;s<h;s++)(i=r[s])!=null&&(131072&i.__u)==0&&(i.__e==e.__d&&(e.__d=lc(i)),_b(i,i))}function V5(e,t,r){var s,a;if(typeof e.type=="function"){for(s=e.__k,a=0;s&&a<s.length;a++)s[a]&&(s[a].__=e,t=V5(s[a],t,r));return t}e.__e!=t&&(r.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType===8);return t}function v7(e,t,r,s){var a=e.key,i=e.type,o=r-1,d=r+1,u=t[r];if(u===null||u&&a==u.key&&i===u.type)return r;if(s>(u!=null&&(131072&u.__u)==0?1:0))for(;o>=0||d<t.length;){if(o>=0){if((u=t[o])&&(131072&u.__u)==0&&a==u.key&&i===u.type)return o;o--}if(d<t.length){if((u=t[d])&&(131072&u.__u)==0&&a==u.key&&i===u.type)return d;d++}}return-1}function B1(e,t,r){t[0]==="-"?e.setProperty(t,r??""):e[t]=r==null?"":typeof r!="number"||g7.test(t)?r:r+"px"}function lm(e,t,r,s,a){var i;e:if(t==="style")if(typeof r=="string")e.style.cssText=r;else{if(typeof s=="string"&&(e.style.cssText=s=""),s)for(t in s)r&&t in r||B1(e.style,t,"");if(r)for(t in r)s&&r[t]===s[t]||B1(e.style,t,r[t])}else if(t[0]==="o"&&t[1]==="n")i=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=r,r?s?r.u=s.u:(r.u=Date.now(),e.addEventListener(t,i?W1:H1,i)):e.removeEventListener(t,i?W1:H1,i);else{if(a)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!=="width"&&t!=="height"&&t!=="href"&&t!=="list"&&t!=="form"&&t!=="tabIndex"&&t!=="download"&&t!=="rowSpan"&&t!=="colSpan"&&t!=="role"&&t in e)try{e[t]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&t[4]!=="-"?e.removeAttribute(t):e.setAttribute(t,r))}}function H1(e){if(this.l){var t=this.l[e.type+!1];if(e.t){if(e.t<=t.u)return}else e.t=Date.now();return t(St.event?St.event(e):e)}}function W1(e){if(this.l)return this.l[e.type+!0](St.event?St.event(e):e)}function Xy(e,t,r,s,a,i,o,d,u,h){var p,f,x,y,b,w,v,j,C,S,k,R,E,I,M,O=t.type;if(t.constructor!==void 0)return null;128&r.__u&&(u=!!(32&r.__u),i=[d=t.__e=r.__e]),(p=St.__b)&&p(t);e:if(typeof O=="function")try{if(j=t.props,C=(p=O.contextType)&&s[p.__c],S=p?C?C.props.value:p.__:s,r.__c?v=(f=t.__c=r.__c).__=f.__E:("prototype"in O&&O.prototype.render?t.__c=f=new O(j,S):(t.__c=f=new Dm(j,S),f.constructor=O,f.render=_7),C&&C.sub(f),f.props=j,f.state||(f.state={}),f.context=S,f.__n=s,x=f.__d=!0,f.__h=[],f._sb=[]),f.__s==null&&(f.__s=f.state),O.getDerivedStateFromProps!=null&&(f.__s==f.state&&(f.__s=hi({},f.__s)),hi(f.__s,O.getDerivedStateFromProps(j,f.__s))),y=f.props,b=f.state,f.__v=t,x)O.getDerivedStateFromProps==null&&f.componentWillMount!=null&&f.componentWillMount(),f.componentDidMount!=null&&f.__h.push(f.componentDidMount);else{if(O.getDerivedStateFromProps==null&&j!==y&&f.componentWillReceiveProps!=null&&f.componentWillReceiveProps(j,S),!f.__e&&(f.shouldComponentUpdate!=null&&f.shouldComponentUpdate(j,f.__s,S)===!1||t.__v===r.__v)){for(t.__v!==r.__v&&(f.props=j,f.state=f.__s,f.__d=!1),t.__e=r.__e,t.__k=r.__k,t.__k.forEach(function(L){L&&(L.__=t)}),k=0;k<f._sb.length;k++)f.__h.push(f._sb[k]);f._sb=[],f.__h.length&&o.push(f);break e}f.componentWillUpdate!=null&&f.componentWillUpdate(j,f.__s,S),f.componentDidUpdate!=null&&f.__h.push(function(){f.componentDidUpdate(y,b,w)})}if(f.context=S,f.props=j,f.__P=e,f.__e=!1,R=St.__r,E=0,"prototype"in O&&O.prototype.render){for(f.state=f.__s,f.__d=!1,R&&R(t),p=f.render(f.props,f.state,f.context),I=0;I<f._sb.length;I++)f.__h.push(f._sb[I]);f._sb=[]}else do f.__d=!1,R&&R(t),p=f.render(f.props,f.state,f.context),f.state=f.__s;while(f.__d&&++E<25);f.state=f.__s,f.getChildContext!=null&&(s=hi(hi({},s),f.getChildContext())),x||f.getSnapshotBeforeUpdate==null||(w=f.getSnapshotBeforeUpdate(y,b)),K5(e,Qy(M=p!=null&&p.type===ju&&p.key==null?p.props.children:p)?M:[M],t,r,s,a,i,o,d,u,h),f.base=t.__e,t.__u&=-161,f.__h.length&&o.push(f),v&&(f.__E=f.__=null)}catch(L){t.__v=null,u||i!=null?(t.__e=d,t.__u|=u?160:32,i[i.indexOf(d)]=null):(t.__e=r.__e,t.__k=r.__k),St.__e(L,t,r)}else i==null&&t.__v===r.__v?(t.__k=r.__k,t.__e=r.__e):t.__e=w7(r.__e,t,r,s,a,i,o,u,h);(p=St.diffed)&&p(t)}function wb(e,t,r){for(var s=0;s<r.length;s++)Zy(r[s],r[++s],r[++s]);St.__c&&St.__c(t,e),e.some(function(a){try{e=a.__h,a.__h=[],e.some(function(i){i.call(a)})}catch(i){St.__e(i,a.__v)}})}function w7(e,t,r,s,a,i,o,d,u){var h,p,f,x,y,b,w,v=r.props,j=t.props,C=t.type;if(C==="svg"&&(a=!0),i!=null){for(h=0;h<i.length;h++)if((y=i[h])&&"setAttribute"in y==!!C&&(C?y.localName===C:y.nodeType===3)){e=y,i[h]=null;break}}if(e==null){if(C===null)return document.createTextNode(j);e=a?document.createElementNS("http://www.w3.org/2000/svg",C):document.createElement(C,j.is&&j),i=null,d=!1}if(C===null)v===j||d&&e.data===j||(e.data=j);else{if(i=i&&dp.call(e.childNodes),v=r.props||eu,!d&&i!=null)for(v={},h=0;h<e.attributes.length;h++)v[(y=e.attributes[h]).name]=y.value;for(h in v)y=v[h],h=="children"||(h=="dangerouslySetInnerHTML"?f=y:h==="key"||h in j||lm(e,h,null,y,a));for(h in j)y=j[h],h=="children"?x=y:h=="dangerouslySetInnerHTML"?p=y:h=="value"?b=y:h=="checked"?w=y:h==="key"||d&&typeof y!="function"||v[h]===y||lm(e,h,y,v[h],a);if(p)d||f&&(p.__html===f.__html||p.__html===e.innerHTML)||(e.innerHTML=p.__html),t.__k=[];else if(f&&(e.innerHTML=""),K5(e,Qy(x)?x:[x],t,r,s,a&&C!=="foreignObject",i,o,i?i[0]:r.__k&&lc(r,0),d,u),i!=null)for(h=i.length;h--;)i[h]!=null&&z5(i[h]);d||(h="value",b!==void 0&&(b!==e[h]||C==="progress"&&!b||C==="option"&&b!==v[h])&&lm(e,h,b,v[h],!1),h="checked",w!==void 0&&w!==e[h]&&lm(e,h,w,v[h],!1))}return e}function Zy(e,t,r){try{typeof e=="function"?e(t):e.current=t}catch(s){St.__e(s,r)}}function _b(e,t,r){var s,a;if(St.unmount&&St.unmount(e),(s=e.ref)&&(s.current&&s.current!==e.__e||Zy(s,null,t)),(s=e.__c)!=null){if(s.componentWillUnmount)try{s.componentWillUnmount()}catch(i){St.__e(i,t)}s.base=s.__P=null,e.__c=void 0}if(s=e.__k)for(a=0;a<s.length;a++)s[a]&&_b(s[a],t,r||typeof e.type!="function");r||e.__e==null||z5(e.__e),e.__=e.__e=e.__d=void 0}function _7(e,t,r){return this.constructor(e,r)}function j7(e,t,r){var s,a,i,o;St.__&&St.__(e,t),a=(s=!1)?null:t.__k,i=[],o=[],Xy(t,e=t.__k=et(ju,null,[e]),a||eu,eu,t.ownerSVGElement!==void 0,a?null:t.firstChild?dp.call(t.childNodes):null,i,a?a.__e:t.firstChild,s,o),e.__d=void 0,wb(i,e,o)}dp=Jy.slice,St={__e:function(e,t,r,s){for(var a,i,o;t=t.__;)if((a=t.__c)&&!a.__)try{if((i=a.constructor)&&i.getDerivedStateFromError!=null&&(a.setState(i.getDerivedStateFromError(e)),o=a.__d),a.componentDidCatch!=null&&(a.componentDidCatch(e,s||{}),o=a.__d),o)return a.__E=a}catch(d){e=d}throw e}},H5=0,Dm.prototype.setState=function(e,t){var r;r=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=hi({},this.state),typeof e=="function"&&(e=e(hi({},r),this.props)),e&&hi(r,e),e!=null&&this.__v&&(t&&this._sb.push(t),q1(this))},Dm.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),q1(this))},Dm.prototype.render=ju,ro=[],W5=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,vb=function(e,t){return e.__v.__b-t.__v.__b},_f.__r=0;var Na,jt,t0,z1,cc=0,Y5=[],Fm=[],Gt=St,G1=Gt.__b,K1=Gt.__r,V1=Gt.diffed,Y1=Gt.__c,J1=Gt.unmount,Q1=Gt.__;function Bo(e,t){Gt.__h&&Gt.__h(jt,e,cc||t),cc=0;var r=jt.__H||(jt.__H={__:[],__h:[]});return e>=r.__.length&&r.__.push({__V:Fm}),r.__[e]}function oo(e){return cc=1,J5(X5,e)}function J5(e,t,r){var s=Bo(Na++,2);if(s.t=e,!s.__c&&(s.__=[r?r(t):X5(void 0,t),function(d){var u=s.__N?s.__N[0]:s.__[0],h=s.t(u,d);u!==h&&(s.__N=[h,s.__[1]],s.__c.setState({}))}],s.__c=jt,!jt.u)){var a=function(d,u,h){if(!s.__c.__H)return!0;var p=s.__c.__H.__.filter(function(x){return!!x.__c});if(p.every(function(x){return!x.__N}))return!i||i.call(this,d,u,h);var f=!1;return p.forEach(function(x){if(x.__N){var y=x.__[0];x.__=x.__N,x.__N=void 0,y!==x.__[0]&&(f=!0)}}),!(!f&&s.__c.props===d)&&(!i||i.call(this,d,u,h))};jt.u=!0;var i=jt.shouldComponentUpdate,o=jt.componentWillUpdate;jt.componentWillUpdate=function(d,u,h){if(this.__e){var p=i;i=void 0,a(d,u,h),i=p}o&&o.call(this,d,u,h)},jt.shouldComponentUpdate=a}return s.__N||s.__}function N7(e,t){var r=Bo(Na++,3);!Gt.__s&&ev(r.__H,t)&&(r.__=e,r.i=t,jt.__H.__h.push(r))}function Q5(e,t){var r=Bo(Na++,4);!Gt.__s&&ev(r.__H,t)&&(r.__=e,r.i=t,jt.__h.push(r))}function S7(e){return cc=5,Nu(function(){return{current:e}},[])}function k7(e,t,r){cc=6,Q5(function(){return typeof e=="function"?(e(t()),function(){return e(null)}):e?(e.current=t(),function(){return e.current=null}):void 0},r==null?r:r.concat(e))}function Nu(e,t){var r=Bo(Na++,7);return ev(r.__H,t)?(r.__V=e(),r.i=t,r.__h=e,r.__V):r.__}function ql(e,t){return cc=8,Nu(function(){return e},t)}function E7(e){var t=jt.context[e.__c],r=Bo(Na++,9);return r.c=e,t?(r.__==null&&(r.__=!0,t.sub(jt)),t.props.value):e.__}function C7(e,t){Gt.useDebugValue&&Gt.useDebugValue(t?t(e):e)}function T7(e){var t=Bo(Na++,10),r=oo();return t.__=e,jt.componentDidCatch||(jt.componentDidCatch=function(s,a){t.__&&t.__(s,a),r[1](s)}),[r[0],function(){r[1](void 0)}]}function R7(){var e=Bo(Na++,11);if(!e.__){for(var t=jt.__v;t!==null&&!t.__m&&t.__!==null;)t=t.__;var r=t.__m||(t.__m=[0,0]);e.__="P"+r[0]+"-"+r[1]++}return e.__}function I7(){for(var e;e=Y5.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(Um),e.__H.__h.forEach(jb),e.__H.__h=[]}catch(t){e.__H.__h=[],Gt.__e(t,e.__v)}}Gt.__b=function(e){jt=null,G1&&G1(e)},Gt.__=function(e,t){t.__k&&t.__k.__m&&(e.__m=t.__k.__m),Q1&&Q1(e,t)},Gt.__r=function(e){K1&&K1(e),Na=0;var t=(jt=e.__c).__H;t&&(t0===jt?(t.__h=[],jt.__h=[],t.__.forEach(function(r){r.__N&&(r.__=r.__N),r.__V=Fm,r.__N=r.i=void 0})):(t.__h.forEach(Um),t.__h.forEach(jb),t.__h=[],Na=0)),t0=jt},Gt.diffed=function(e){V1&&V1(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(Y5.push(t)!==1&&z1===Gt.requestAnimationFrame||((z1=Gt.requestAnimationFrame)||P7)(I7)),t.__H.__.forEach(function(r){r.i&&(r.__H=r.i),r.__V!==Fm&&(r.__=r.__V),r.i=void 0,r.__V=Fm})),t0=jt=null},Gt.__c=function(e,t){t.some(function(r){try{r.__h.forEach(Um),r.__h=r.__h.filter(function(s){return!s.__||jb(s)})}catch(s){t.some(function(a){a.__h&&(a.__h=[])}),t=[],Gt.__e(s,r.__v)}}),Y1&&Y1(e,t)},Gt.unmount=function(e){J1&&J1(e);var t,r=e.__c;r&&r.__H&&(r.__H.__.forEach(function(s){try{Um(s)}catch(a){t=a}}),r.__H=void 0,t&&Gt.__e(t,r.__v))};var X1=typeof requestAnimationFrame=="function";function P7(e){var t,r=function(){clearTimeout(s),X1&&cancelAnimationFrame(t),setTimeout(e)},s=setTimeout(r,100);X1&&(t=requestAnimationFrame(r))}function Um(e){var t=jt,r=e.__c;typeof r=="function"&&(e.__c=void 0,r()),jt=t}function jb(e){var t=jt;e.__c=e.__(),jt=t}function ev(e,t){return!e||e.length!==t.length||t.some(function(r,s){return r!==e[s]})}function X5(e,t){return typeof t=="function"?t(e):t}const A7=Object.defineProperty({__proto__:null,useCallback:ql,useContext:E7,useDebugValue:C7,useEffect:N7,useErrorBoundary:T7,useId:R7,useImperativeHandle:k7,useLayoutEffect:Q5,useMemo:Nu,useReducer:J5,useRef:S7,useState:oo},Symbol.toStringTag,{value:"Module"}),M7="http://www.w3.org/2000/svg";function O7(){const e=s=>_t.createElementNS(M7,s),t=Cr(e("svg"),{width:"32",height:"30",viewBox:"0 0 72 66",fill:"inherit"}),r=Cr(e("path"),{transform:"translate(11, 11)",d:"M29,2.26a4.67,4.67,0,0,0-8,0L14.42,13.53A32.21,32.21,0,0,1,32.17,40.19H27.55A27.68,27.68,0,0,0,12.09,17.47L6,28a15.92,15.92,0,0,1,9.23,12.17H4.62A.76.76,0,0,1,4,39.06l2.94-5a10.74,10.74,0,0,0-3.36-1.9l-2.91,5a4.54,4.54,0,0,0,1.69,6.24A4.66,4.66,0,0,0,4.62,44H19.15a19.4,19.4,0,0,0-8-17.31l2.31-4A23.87,23.87,0,0,1,23.76,44H36.07a35.88,35.88,0,0,0-16.41-31.8l4.67-8a.77.77,0,0,1,1.05-.27c.53.29,20.29,34.77,20.66,35.17a.76.76,0,0,1-.68,1.13H40.6q.09,1.91,0,3.81h4.78A4.59,4.59,0,0,0,50,39.43a4.49,4.49,0,0,0-.62-2.28Z"});return t.appendChild(r),t}function L7({options:e}){const t=Nu(()=>({__html:O7().outerHTML}),[]);return et("h2",{class:"dialog__header"},et("span",{class:"dialog__title"},e.formTitle),e.showBranding?et("a",{class:"brand-link",target:"_blank",href:"https://sentry.io/welcome/",title:"Powered by Sentry",rel:"noopener noreferrer",dangerouslySetInnerHTML:t}):null)}function $7(e,t){const r=[];return t.isNameRequired&&!e.name&&r.push(t.nameLabel),t.isEmailRequired&&!e.email&&r.push(t.emailLabel),e.message||r.push(t.messageLabel),r}function n0(e,t){const r=e.get(t);return typeof r=="string"?r.trim():""}function D7({options:e,defaultEmail:t,defaultName:r,onFormClose:s,onSubmit:a,onSubmitSuccess:i,onSubmitError:o,showEmail:d,showName:u,screenshotInput:h}){const{tags:p,addScreenshotButtonLabel:f,removeScreenshotButtonLabel:x,cancelButtonLabel:y,emailLabel:b,emailPlaceholder:w,isEmailRequired:v,isNameRequired:j,messageLabel:C,messagePlaceholder:S,nameLabel:k,namePlaceholder:R,submitButtonLabel:E,isRequiredLabel:I}=e,[M,O]=oo(!1),[L,P]=oo(null),[$,B]=oo(!1),D=h==null?void 0:h.input,[se,X]=oo(null),ee=ql(J=>{X(J),B(!1)},[]),F=ql(J=>{const U=$7(J,{emailLabel:b,isEmailRequired:v,isNameRequired:j,messageLabel:C,nameLabel:k});return U.length>0?P(`Please enter in the following required fields: ${U.join(", ")}`):P(null),U.length===0},[b,v,j,C,k]),Q=ql(async J=>{O(!0);try{if(J.preventDefault(),!(J.target instanceof HTMLFormElement))return;const U=new FormData(J.target),G=await(h&&$?h.value():void 0),ie={name:n0(U,"name"),email:n0(U,"email"),message:n0(U,"message"),attachments:G?[G]:void 0};if(!F(ie))return;try{const ae=await a({name:ie.name,email:ie.email,message:ie.message,source:i7,tags:p},{attachments:ie.attachments});i(ie,ae)}catch(ae){Lm&&Y.error(ae),P(ae),o(ae)}}finally{O(!1)}},[h&&$,i,o]);return et("form",{class:"form",onSubmit:Q},D&&$?et(D,{onError:ee}):null,et("fieldset",{class:"form__right","data-sentry-feedback":!0,disabled:M},et("div",{class:"form__top"},L?et("div",{class:"form__error-container"},L):null,u?et("label",{for:"name",class:"form__label"},et(r0,{label:k,isRequiredLabel:I,isRequired:j}),et("input",{class:"form__input",defaultValue:r,id:"name",name:"name",placeholder:R,required:j,type:"text"})):et("input",{"aria-hidden":!0,value:r,name:"name",type:"hidden"}),d?et("label",{for:"email",class:"form__label"},et(r0,{label:b,isRequiredLabel:I,isRequired:v}),et("input",{class:"form__input",defaultValue:t,id:"email",name:"email",placeholder:w,required:v,type:"email"})):et("input",{"aria-hidden":!0,value:t,name:"email",type:"hidden"}),et("label",{for:"message",class:"form__label"},et(r0,{label:C,isRequiredLabel:I,isRequired:!0}),et("textarea",{autoFocus:!0,class:"form__input form__input--textarea",id:"message",name:"message",placeholder:S,required:!0,rows:5})),D?et("label",{for:"screenshot",class:"form__label"},et("button",{class:"btn btn--default",disabled:M,type:"button",onClick:()=>{X(null),B(J=>!J)}},$?x:f),se?et("div",{class:"form__error-container"},se.message):null):null),et("div",{class:"btn-group"},et("button",{class:"btn btn--primary",disabled:M,type:"submit"},E),et("button",{class:"btn btn--default",disabled:M,type:"button",onClick:s},y))))}function r0({label:e,isRequired:t,isRequiredLabel:r}){return et("span",{class:"form__label__text"},e,t&&et("span",{class:"form__label__text--required"},r))}const cm=16,Z1=17,F7="http://www.w3.org/2000/svg";function U7(){const e=u=>bs.document.createElementNS(F7,u),t=Cr(e("svg"),{width:`${cm}`,height:`${Z1}`,viewBox:`0 0 ${cm} ${Z1}`,fill:"inherit"}),r=Cr(e("g"),{clipPath:"url(#clip0_57_156)"}),s=Cr(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.55544 15.1518C4.87103 16.0308 6.41775 16.5 8 16.5C10.1217 16.5 12.1566 15.6571 13.6569 14.1569C15.1571 12.6566 16 10.6217 16 8.5C16 6.91775 15.5308 5.37103 14.6518 4.05544C13.7727 2.73985 12.5233 1.71447 11.0615 1.10897C9.59966 0.503466 7.99113 0.34504 6.43928 0.653721C4.88743 0.962403 3.46197 1.72433 2.34315 2.84315C1.22433 3.96197 0.462403 5.38743 0.153721 6.93928C-0.15496 8.49113 0.00346625 10.0997 0.608967 11.5615C1.21447 13.0233 2.23985 14.2727 3.55544 15.1518ZM4.40546 3.1204C5.46945 2.40946 6.72036 2.03 8 2.03C9.71595 2.03 11.3616 2.71166 12.575 3.92502C13.7883 5.13838 14.47 6.78405 14.47 8.5C14.47 9.77965 14.0905 11.0306 13.3796 12.0945C12.6687 13.1585 11.6582 13.9878 10.476 14.4775C9.29373 14.9672 7.99283 15.0953 6.73777 14.8457C5.48271 14.596 4.32987 13.9798 3.42502 13.075C2.52018 12.1701 1.90397 11.0173 1.65432 9.76224C1.40468 8.50718 1.5328 7.20628 2.0225 6.02404C2.5122 4.8418 3.34148 3.83133 4.40546 3.1204Z"}),a=Cr(e("path"),{d:"M6.68775 12.4297C6.78586 12.4745 6.89218 12.4984 7 12.5C7.11275 12.4955 7.22315 12.4664 7.32337 12.4145C7.4236 12.3627 7.51121 12.2894 7.58 12.2L12 5.63999C12.0848 5.47724 12.1071 5.28902 12.0625 5.11098C12.0178 4.93294 11.9095 4.77744 11.7579 4.67392C11.6064 4.57041 11.4221 4.52608 11.24 4.54931C11.0579 4.57254 10.8907 4.66173 10.77 4.79999L6.88 10.57L5.13 8.56999C5.06508 8.49566 4.98613 8.43488 4.89768 8.39111C4.80922 8.34735 4.713 8.32148 4.61453 8.31498C4.51605 8.30847 4.41727 8.32147 4.32382 8.35322C4.23038 8.38497 4.14413 8.43484 4.07 8.49999C3.92511 8.63217 3.83692 8.81523 3.82387 9.01092C3.81083 9.2066 3.87393 9.39976 4 9.54999L6.43 12.24C6.50187 12.3204 6.58964 12.385 6.68775 12.4297Z"});t.appendChild(r).append(a,s);const i=e("defs"),o=Cr(e("clipPath"),{id:"clip0_57_156"}),d=Cr(e("rect"),{width:`${cm}`,height:`${cm}`,fill:"white",transform:"translate(0 0.5)"});return o.appendChild(d),i.appendChild(o),t.appendChild(i).appendChild(o).appendChild(d),t}function q7({open:e,onFormSubmitted:t,...r}){const s=r.options,a=Nu(()=>({__html:U7().outerHTML}),[]),[i,o]=oo(null),d=ql(()=>{i&&(clearTimeout(i),o(null)),t()},[i]),u=ql((h,p)=>{r.onSubmitSuccess(h,p),o(setTimeout(()=>{t(),o(null)},l7))},[t]);return et(ju,null,i?et("div",{class:"success__position",onClick:d},et("div",{class:"success__content"},s.successMessageText,et("span",{class:"success__icon",dangerouslySetInnerHTML:a}))):et("dialog",{class:"dialog",onClick:s.onFormClose,open:e},et("div",{class:"dialog__position"},et("div",{class:"dialog__content",onClick:h=>{h.stopPropagation()}},et(L7,{options:s}),et(D7,{...r,onSubmitSuccess:u})))))}const B7=`
.dialog {
  position: fixed;
  z-index: var(--z-index);
  margin: 0;
  inset: 0;

  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0;
  height: 100vh;
  width: 100vw;

  color: var(--dialog-color, var(--foreground));
  fill: var(--dialog-color, var(--foreground));
  line-height: 1.75em;

  background-color: rgba(0, 0, 0, 0.05);
  border: none;
  inset: 0;
  opacity: 1;
  transition: opacity 0.2s ease-in-out;
}

.dialog__position {
  position: fixed;
  z-index: var(--z-index);
  inset: var(--dialog-inset);
  padding: var(--page-margin);
  display: flex;
  max-height: calc(100vh - (2 * var(--page-margin)));
}
@media (max-width: 600px) {
  .dialog__position {
    inset: var(--page-margin);
    padding: 0;
  }
}

.dialog__position:has(.editor) {
  inset: var(--page-margin);
  padding: 0;
}

.dialog:not([open]) {
  opacity: 0;
  pointer-events: none;
  visibility: hidden;
}
.dialog:not([open]) .dialog__content {
  transform: translate(0, -16px) scale(0.98);
}

.dialog__content {
  display: flex;
  flex-direction: column;
  gap: 16px;
  padding: var(--dialog-padding, 24px);
  max-width: 100%;
  width: 100%;
  max-height: 100%;
  overflow: auto;

  background: var(--dialog-background, var(--background));
  border-radius: var(--dialog-border-radius, 20px);
  border: var(--dialog-border, var(--border));
  box-shadow: var(--dialog-box-shadow, var(--box-shadow));
  transform: translate(0, 0) scale(1);
  transition: transform 0.2s ease-in-out;
}

`,H7=`
.dialog__header {
  display: flex;
  gap: 4px;
  justify-content: space-between;
  font-weight: var(--dialog-header-weight, 600);
  margin: 0;
}
.dialog__title {
  align-self: center;
  width: var(--form-width, 272px);
}

@media (max-width: 600px) {
  .dialog__title {
    width: auto;
  }
}

.dialog__position:has(.editor) .dialog__title {
  width: auto;
}


.brand-link {
  display: inline-flex;
}
.brand-link:focus-visible {
  outline: var(--outline);
}
`,W7=`
.form {
  display: flex;
  overflow: auto;
  flex-direction: row;
  gap: 16px;
  flex: 1 0;
}

.form fieldset {
  border: none;
  margin: 0;
  padding: 0;
}

.form__right {
  flex: 0 0 auto;
  display: flex;
  overflow: auto;
  flex-direction: column;
  justify-content: space-between;
  gap: 20px;
  width: var(--form-width, 100%);
}

.dialog__position:has(.editor) .form__right {
  width: var(--form-width, 272px);
}

.form__top {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.form__error-container {
  color: var(--error-color);
  fill: var(--error-color);
}

.form__label {
  display: flex;
  flex-direction: column;
  gap: 4px;
  margin: 0px;
}

.form__label__text {
  display: flex;
  gap: 4px;
  align-items: center;
}

.form__label__text--required {
  font-size: 0.85em;
}

.form__input {
  font-family: inherit;
  line-height: inherit;
  background: transparent;
  box-sizing: border-box;
  border: var(--input-border, var(--border));
  border-radius: var(--input-border-radius, 6px);
  color: var(--input-color, inherit);
  fill: var(--input-color, inherit);
  font-size: var(--input-font-size, inherit);
  font-weight: var(--input-font-weight, 500);
  padding: 6px 12px;
}

.form__input::placeholder {
  opacity: 0.65;
  color: var(--input-placeholder-color, inherit);
  filter: var(--interactive-filter);
}

.form__input:focus-visible {
  outline: var(--input-focus-outline, var(--outline));
}

.form__input--textarea {
  font-family: inherit;
  resize: vertical;
}

.error {
  color: var(--error-color);
  fill: var(--error-color);
}
`,z7=`
.btn-group {
  display: grid;
  gap: 8px;
}

.btn {
  line-height: inherit;
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  cursor: pointer;
  font-family: inherit;
  font-size: var(--button-font-size, inherit);
  font-weight: var(--button-font-weight, 600);
  padding: var(--button-padding, 6px 16px);
}
.btn[disabled] {
  opacity: 0.6;
  pointer-events: none;
}

.btn--primary {
  color: var(--button-primary-color, var(--accent-foreground));
  fill: var(--button-primary-color, var(--accent-foreground));
  background: var(--button-primary-background, var(--accent-background));
  border: var(--button-primary-border, var(--border));
  border-radius: var(--button-primary-border-radius, 6px);
  font-weight: var(--button-primary-font-weight, 500);
}
.btn--primary:hover {
  color: var(--button-primary-hover-color, var(--accent-foreground));
  fill: var(--button-primary-hover-color, var(--accent-foreground));
  background: var(--button-primary-hover-background, var(--accent-background));
  filter: var(--interactive-filter);
}
.btn--primary:focus-visible {
  background: var(--button-primary-hover-background, var(--accent-background));
  filter: var(--interactive-filter);
  outline: var(--button-primary-focus-outline, var(--outline));
}

.btn--default {
  color: var(--button-color, var(--foreground));
  fill: var(--button-color, var(--foreground));
  background: var(--button-background, var(--background));
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  font-weight: var(--button-font-weight, 500);
}
.btn--default:hover {
  color: var(--button-color, var(--foreground));
  fill: var(--button-color, var(--foreground));
  background: var(--button-hover-background, var(--background));
  filter: var(--interactive-filter);
}
.btn--default:focus-visible {
  background: var(--button-hover-background, var(--background));
  filter: var(--interactive-filter);
  outline: var(--button-focus-outline, var(--outline));
}
`,G7=`
.success__position {
  position: fixed;
  inset: var(--dialog-inset);
  padding: var(--page-margin);
  z-index: var(--z-index);
}
.success__content {
  background: var(--success-background, var(--background));
  border: var(--success-border, var(--border));
  border-radius: var(--success-border-radius, 1.7em/50%);
  box-shadow: var(--success-box-shadow, var(--box-shadow));
  font-weight: var(--success-font-weight, 600);
  color: var(--success-color);
  fill: var(--success-color);
  padding: 12px 24px;
  line-height: 1.75em;

  display: grid;
  align-items: center;
  grid-auto-flow: column;
  gap: 6px;
  cursor: default;
}

.success__icon {
  display: flex;
}
`;function K7(e){const t=_t.createElement("style");return t.textContent=`
:host {
  --dialog-inset: var(--inset);
}

${B7}
${H7}
${W7}
${z7}
${G7}
`,e&&t.setAttribute("nonce",e),t}function V7(){const e=We().getUser(),t=hn().getUser(),r=xa().getUser();return e&&Object.keys(e).length?e:t&&Object.keys(t).length?t:r}const Y7=(()=>({name:"FeedbackModal",setupOnce(){},createDialog:({options:e,screenshotIntegration:t,sendFeedback:r,shadow:s})=>{const a=s,i=e.useSentryUser,o=V7(),d=_t.createElement("div"),u=K7(e.styleNonce);let h="";const p={get el(){return d},appendToDom(){!a.contains(u)&&!a.contains(d)&&(a.appendChild(u),a.appendChild(d))},removeFromDom(){d.remove(),u.remove(),_t.body.style.overflow=h},open(){var y,b;x(!0),(y=e.onFormOpen)==null||y.call(e),(b=be())==null||b.emit("openFeedbackWidget"),h=_t.body.style.overflow,_t.body.style.overflow="hidden"},close(){x(!1),_t.body.style.overflow=h}},f=t==null?void 0:t.createInput({h:et,hooks:A7,dialog:p,options:e}),x=y=>{j7(et(q7,{options:e,screenshotInput:f,showName:e.showName||e.isNameRequired,showEmail:e.showEmail||e.isEmailRequired,defaultName:String(i&&(o==null?void 0:o[i.name])||""),defaultEmail:String(i&&(o==null?void 0:o[i.email])||""),onFormClose:()=>{var b;x(!1),(b=e.onFormClose)==null||b.call(e)},onSubmit:r,onSubmitSuccess:(b,w)=>{var v;x(!1),(v=e.onSubmitSuccess)==null||v.call(e,b,w)},onSubmitError:b=>{var w;(w=e.onSubmitError)==null||w.call(e,b)},onFormSubmitted:()=>{var b;(b=e.onFormSubmitted)==null||b.call(e)},open:y}),d)};return p}}));function J7({h:e}){return function(){return e("svg",{"data-test-id":"icon-close",viewBox:"0 0 16 16",fill:"#2B2233",height:"25px",width:"25px"},e("circle",{r:"7",cx:"8",cy:"8",fill:"white"}),e("path",{strokeWidth:"1.5",d:"M8,16a8,8,0,1,1,8-8A8,8,0,0,1,8,16ZM8,1.53A6.47,6.47,0,1,0,14.47,8,6.47,6.47,0,0,0,8,1.53Z"}),e("path",{strokeWidth:"1.5",d:"M5.34,11.41a.71.71,0,0,1-.53-.22.74.74,0,0,1,0-1.06l5.32-5.32a.75.75,0,0,1,1.06,1.06L5.87,11.19A.74.74,0,0,1,5.34,11.41Z"}),e("path",{strokeWidth:"1.5",d:"M10.66,11.41a.74.74,0,0,1-.53-.22L4.81,5.87A.75.75,0,0,1,5.87,4.81l5.32,5.32a.74.74,0,0,1,0,1.06A.71.71,0,0,1,10.66,11.41Z"}))}}function Q7(e){const t=_t.createElement("style"),r="#1A141F",s="#302735";return t.textContent=`
.editor {
  display: flex;
  flex-grow: 1;
  flex-direction: column;
}

.editor__image-container {
  justify-items: center;
  padding: 15px;
  position: relative;
  height: 100%;
  border-radius: var(--menu-border-radius, 6px);

  background-color: ${r};
  background-image: repeating-linear-gradient(
      -145deg,
      transparent,
      transparent 8px,
      ${r} 8px,
      ${r} 11px
    ),
    repeating-linear-gradient(
      -45deg,
      transparent,
      transparent 15px,
      ${s} 15px,
      ${s} 16px
    );
}

.editor__canvas-container {
  width: 100%;
  height: 100%;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
}

.editor__canvas-container > * {
  object-fit: contain;
  position: absolute;
}

.editor__tool-container {
  padding-top: 8px;
  display: flex;
  justify-content: center;
}

.editor__tool-bar {
  display: flex;
  gap: 8px;
}

.editor__tool {
  display: flex;
  padding: 8px 12px;
  justify-content: center;
  align-items: center;
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  background: var(--button-background, var(--background));
  color: var(--button-color, var(--foreground));
}

.editor__tool--active {
  background: var(--button-primary-background, var(--accent-background));
  color: var(--button-primary-color, var(--accent-foreground));
}

.editor__rect {
  position: absolute;
  z-index: 2;
}

.editor__rect button {
  opacity: 0;
  position: absolute;
  top: -12px;
  right: -12px;
  cursor: pointer;
  padding: 0;
  z-index: 3;
  border: none;
  background: none;
}

.editor__rect:hover button {
  opacity: 1;
}
`,e&&t.setAttribute("nonce",e),t}function X7({h:e}){return function({action:r,setAction:s,options:a}){return e("div",{class:"editor__tool-container"},e("div",{class:"editor__tool-bar"},e("button",{type:"button",class:`editor__tool ${r==="highlight"?"editor__tool--active":""}`,onClick:()=>{s(r==="highlight"?"":"highlight")}},a.highlightToolText),e("button",{type:"button",class:`editor__tool ${r==="hide"?"editor__tool--active":""}`,onClick:()=>{s(r==="hide"?"":"hide")}},a.hideToolText)))}}function Z7({hooks:e}){function t(){const[r,s]=e.useState(bs.devicePixelRatio??1);return e.useEffect(()=>{const a=()=>{s(bs.devicePixelRatio)},i=matchMedia(`(resolution: ${bs.devicePixelRatio}dppx)`);return i.addEventListener("change",a),()=>{i.removeEventListener("change",a)}},[]),r}return function({onBeforeScreenshot:s,onScreenshot:a,onAfterScreenshot:i,onError:o}){const d=t();e.useEffect(()=>{(async()=>{s();const h=await Ad.mediaDevices.getDisplayMedia({video:{width:bs.innerWidth*d,height:bs.innerHeight*d},audio:!1,monitorTypeSurfaces:"exclude",preferCurrentTab:!0,selfBrowserSurface:"include",surfaceSwitching:"exclude"}),p=_t.createElement("video");await new Promise((f,x)=>{p.srcObject=h,p.onloadedmetadata=()=>{a(p,d),h.getTracks().forEach(y=>y.stop()),f()},p.play().catch(x)}),i()})().catch(o)},[])}}function eq(e,t,r){switch(e.type){case"highlight":{t.shadowColor="rgba(0, 0, 0, 0.7)",t.shadowBlur=50,t.fillStyle=r,t.fillRect(e.x-1,e.y-1,e.w+2,e.h+2),t.clearRect(e.x,e.y,e.w,e.h);break}case"hide":t.fillStyle="rgb(0, 0, 0)",t.fillRect(e.x,e.y,e.w,e.h);break}}function Za(e,t,r){if(!e)return;const s=e.getContext("2d",t);s&&r(e,s)}function s0(e,t){Za(e,{alpha:!0},(r,s)=>{s.drawImage(t,0,0,t.width,t.height,0,0,r.width,r.height)})}function a0(e,t,r){Za(e,{alpha:!0},(s,a)=>{r.length&&(a.fillStyle="rgba(0, 0, 0, 0.25)",a.fillRect(0,0,s.width,s.height)),r.forEach(i=>{eq(i,a,t)})})}function tq({h:e,hooks:t,outputBuffer:r,dialog:s,options:a}){const i=Z7({hooks:t}),o=X7({h:e}),d=J7({h:e}),u={__html:Q7(a.styleNonce).innerText},h=s.el.style,p=({screenshot:f})=>{const[x,y]=t.useState("highlight"),[b,w]=t.useState([]),v=t.useRef(null),j=t.useRef(null),C=t.useRef(null),S=t.useRef(null),[k,R]=t.useState(1),E=t.useMemo(()=>{const $=_t.getElementById(a.id);if(!$)return"white";const B=getComputedStyle($);return B.getPropertyValue("--button-primary-background")||B.getPropertyValue("--accent-background")},[a.id]);t.useLayoutEffect(()=>{const $=()=>{const B=v.current;B&&(Za(f.canvas,{alpha:!1},D=>{const se=Math.min(B.clientWidth/D.width,B.clientHeight/D.height);R(se)}),(B.clientHeight===0||B.clientWidth===0)&&setTimeout($,0))};return $(),bs.addEventListener("resize",$),()=>{bs.removeEventListener("resize",$)}},[f]);const I=t.useCallback(($,B)=>{Za($,{alpha:!0},(D,se)=>{se.scale(B,B),D.width=f.canvas.width,D.height=f.canvas.height})},[f]);t.useEffect(()=>{I(j.current,f.dpi),s0(j.current,f.canvas)},[f]),t.useEffect(()=>{I(C.current,f.dpi),Za(C.current,{alpha:!0},($,B)=>{B.clearRect(0,0,$.width,$.height)}),a0(C.current,E,b)},[b,E]),t.useEffect(()=>{I(r,f.dpi),s0(r,f.canvas),Za(_t.createElement("canvas"),{alpha:!0},($,B)=>{B.scale(f.dpi,f.dpi),$.width=f.canvas.width,$.height=f.canvas.height,a0($,E,b),s0(r,$)})},[b,f,E]);const M=$=>{if(!x||!S.current)return;const B=S.current.getBoundingClientRect(),D={type:x,x:$.offsetX/k,y:$.offsetY/k},se=(F,Q)=>{const J=(Q.clientX-B.x)/k,U=(Q.clientY-B.y)/k;return{type:F.type,x:Math.min(F.x,J),y:Math.min(F.y,U),w:Math.abs(J-F.x),h:Math.abs(U-F.y)}},X=F=>{Za(C.current,{alpha:!0},(Q,J)=>{J.clearRect(0,0,Q.width,Q.height)}),a0(C.current,E,[...b,se(D,F)])},ee=F=>{const Q=se(D,F);Q.w*k>=1&&Q.h*k>=1&&w(J=>[...J,Q]),_t.removeEventListener("mousemove",X),_t.removeEventListener("mouseup",ee)};_t.addEventListener("mousemove",X),_t.addEventListener("mouseup",ee)},O=t.useCallback($=>B=>{B.preventDefault(),B.stopPropagation(),w(D=>{const se=[...D];return se.splice($,1),se})},[]),L={width:`${f.canvas.width*k}px`,height:`${f.canvas.height*k}px`},P=$=>{$.stopPropagation()};return e("div",{class:"editor"},e("style",{nonce:a.styleNonce,dangerouslySetInnerHTML:u}),e("div",{class:"editor__image-container"},e("div",{class:"editor__canvas-container",ref:v},e("canvas",{ref:j,id:"background",style:L}),e("canvas",{ref:C,id:"foreground",style:L}),e("div",{ref:S,onMouseDown:M,style:L},b.map(($,B)=>e("div",{key:B,class:"editor__rect",style:{top:`${$.y*k}px`,left:`${$.x*k}px`,width:`${$.w*k}px`,height:`${$.h*k}px`}},e("button",{"aria-label":a.removeHighlightText,onClick:O(B),onMouseDown:P,onMouseUp:P,type:"button"},e(d,null))))))),e(o,{options:a,action:x,setAction:y}))};return function({onError:x}){const[y,b]=t.useState();return i({onBeforeScreenshot:t.useCallback(()=>{h.display="none"},[]),onScreenshot:t.useCallback((w,v)=>{Za(_t.createElement("canvas"),{alpha:!1},(j,C)=>{C.scale(v,v),j.width=w.videoWidth,j.height=w.videoHeight,C.drawImage(w,0,0,j.width,j.height),b({canvas:j,dpi:v})}),r.width=w.videoWidth,r.height=w.videoHeight},[]),onAfterScreenshot:t.useCallback(()=>{h.display="block"},[]),onError:t.useCallback(w=>{h.display="block",x(w)},[])}),y?e(p,{screenshot:y}):e("div",null)}}const nq=(()=>({name:"FeedbackScreenshot",setupOnce(){},createInput:({h:e,hooks:t,dialog:r,options:s})=>{const a=_t.createElement("canvas");return{input:tq({h:e,hooks:t,outputBuffer:a,dialog:r,options:s}),value:async()=>{const i=await new Promise(o=>{a.toBlob(o,"image/png")});if(i)return{data:new Uint8Array(await i.arrayBuffer()),filename:"screenshot.png",contentType:"application/png"}}}}})),ye=Me;let Nb=0;function Z5(){return Nb>0}function rq(){Nb++,setTimeout(()=>{Nb--})}function dc(e,t={}){function r(a){return typeof a=="function"}if(!r(e))return e;try{const a=e.__sentry_wrapped__;if(a)return typeof a=="function"?a:e;if(by(e))return e}catch{return e}const s=function(...a){try{const i=a.map(o=>dc(o,t));return e.apply(this,i)}catch(i){throw rq(),br(o=>{o.addEventProcessor(d=>(t.mechanism&&(rb(d,void 0),_a(d,t.mechanism)),d.extra={...d.extra,arguments:a},d)),mt(i)}),i}};try{for(const a in e)Object.prototype.hasOwnProperty.call(e,a)&&(s[a]=e[a])}catch{}eE(s,e),yn(e,"__sentry_wrapped__",s);try{Object.getOwnPropertyDescriptor(s,"name").configurable&&Object.defineProperty(s,"name",{get(){return e.name}})}catch{}return s}function tv(){const e=Uo(),{referrer:t}=ye.document||{},{userAgent:r}=ye.navigator||{},s={...t&&{Referer:t},...r&&{"User-Agent":r}};return{url:e,headers:s}}const sq={replayIntegration:"replay",replayCanvasIntegration:"replay-canvas",feedbackIntegration:"feedback",feedbackModalIntegration:"feedback-modal",feedbackScreenshotIntegration:"feedback-screenshot",captureConsoleIntegration:"captureconsole",contextLinesIntegration:"contextlines",linkedErrorsIntegration:"linkederrors",dedupeIntegration:"dedupe",extraErrorDataIntegration:"extraerrordata",graphqlClientIntegration:"graphqlclient",httpClientIntegration:"httpclient",reportingObserverIntegration:"reportingobserver",rewriteFramesIntegration:"rewriteframes",browserProfilingIntegration:"browserprofiling",moduleMetadataIntegration:"modulemetadata",instrumentAnthropicAiClient:"instrumentanthropicaiclient",instrumentOpenAiClient:"instrumentopenaiclient",instrumentGoogleGenAIClient:"instrumentgooglegenaiclient",instrumentLangGraph:"instrumentlanggraph",createLangChainCallbackHandler:"createlangchaincallbackhandler"},eS=ye;async function eC(e,t){const r=sq[e],s=eS.Sentry=eS.Sentry||{};if(!r)throw new Error(`Cannot lazy load integration: ${e}`);const a=s[e];if(typeof a=="function"&&!("_isShim"in a))return a;const i=aq(r),o=ye.document.createElement("script");o.src=i,o.crossOrigin="anonymous",o.referrerPolicy="strict-origin",t&&o.setAttribute("nonce",t);const d=new Promise((f,x)=>{o.addEventListener("load",()=>f()),o.addEventListener("error",x)}),u=ye.document.currentScript,h=ye.document.body||ye.document.head||(u==null?void 0:u.parentElement);if(h)h.appendChild(o);else throw new Error(`Could not find parent element to insert lazy-loaded ${e} script`);try{await d}catch{throw new Error(`Error when loading integration: ${e}`)}const p=s[e];if(typeof p!="function")throw new Error(`Could not load integration: ${e}`);return p}function aq(e){var s;const t=be(),r=((s=t==null?void 0:t.getOptions())==null?void 0:s.cdnBaseUrl)||"https://browser.sentry-cdn.com";return new URL(`/${ma}/${e}.min.js`,r).toString()}const iq=B5({lazyLoadIntegration:eC}),tS=B5({getModalIntegration:()=>Y7,getScreenshotIntegration:()=>nq});function up(e,t){const r=nv(e,t),s={type:uq(t),value:hq(t)};return r.length&&(s.stacktrace={frames:r}),s.type===void 0&&s.value===""&&(s.value="Unrecoverable error caught"),s}function oq(e,t,r,s){const a=be(),i=a==null?void 0:a.getOptions().normalizeDepth,o=pq(t),d={__serialized__:EE(t,i)};if(o)return{exception:{values:[up(e,o)]},extra:d};const u={exception:{values:[{type:Gf(t)?t.constructor.name:s?"UnhandledRejection":"Error",value:mq(t,{isUnhandledRejection:s})}]},extra:d};if(r){const h=nv(e,r);h.length&&(u.exception.values[0].stacktrace={frames:h})}return u}function i0(e,t){return{exception:{values:[up(e,t)]}}}function nv(e,t){const r=t.stacktrace||t.stack||"",s=cq(t),a=dq(t);try{return e(r,s,a)}catch{}return[]}const lq=/Minified React error #\d+;/i;function cq(e){return e&&lq.test(e.message)?1:0}function dq(e){return typeof e.framesToPop=="number"?e.framesToPop:0}function tC(e){return typeof WebAssembly<"u"&&typeof WebAssembly.Exception<"u"?e instanceof WebAssembly.Exception:!1}function uq(e){const t=e==null?void 0:e.name;return!t&&tC(e)?e.message&&Array.isArray(e.message)&&e.message.length==2?e.message[0]:"WebAssembly.Exception":t}function hq(e){const t=e==null?void 0:e.message;return tC(e)?Array.isArray(e.message)&&e.message.length==2?e.message[1]:"wasm exception":t?t.error&&typeof t.error.message=="string"?t.error.message:t:"No error message"}function nC(e,t,r,s){const a=(r==null?void 0:r.syntheticException)||void 0,i=hp(e,t,a,s);return _a(i),i.level="error",r!=null&&r.event_id&&(i.event_id=r.event_id),Zf(i)}function rC(e,t,r="info",s,a){const i=(s==null?void 0:s.syntheticException)||void 0,o=Sb(e,t,i,a);return o.level=r,s!=null&&s.event_id&&(o.event_id=s.event_id),Zf(o)}function hp(e,t,r,s,a){let i;if(Qk(t)&&t.error)return i0(e,t.error);if(AN(t)||hO(t)){const o=t;if("stack"in t)i=i0(e,t);else{const d=o.name||(AN(o)?"DOMError":"DOMException"),u=o.message?`${d}: ${o.message}`:d;i=Sb(e,u,r,s),rb(i,u)}return"code"in o&&(i.tags={...i.tags,"DOMException.code":`${o.code}`}),i}return fa(t)?i0(e,t):Ds(t)||Gf(t)?(i=oq(e,t,r,a),_a(i,{synthetic:!0}),i):(i=Sb(e,t,r,s),rb(i,`${t}`),_a(i,{synthetic:!0}),i)}function Sb(e,t,r,s){const a={};if(s&&r){const i=nv(e,r);i.length&&(a.exception={values:[{value:t,stacktrace:{frames:i}}]}),_a(a,{synthetic:!0})}if(zf(t)){const{__sentry_template_string__:i,__sentry_template_values__:o}=t;return a.logentry={message:i,params:o},a}return a.message=t,a}function mq(e,{isUnhandledRejection:t}){const r=bO(e),s=t?"promise rejection":"exception";return Qk(e)?`Event \`ErrorEvent\` captured as ${s} with message \`${e.message}\``:Gf(e)?`Event \`${fq(e)}\` (type=${e.type}) captured as ${s}`:`Object captured as ${s} with keys: ${r}`}function fq(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch{}}function pq(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const r=e[t];if(r instanceof Error)return r}}class sC extends B8{constructor(t){var p;const r=xq(t),s=ye.SENTRY_SDK_SOURCE||UU();l5(r,"browser",["browser"],s),(p=r._metadata)!=null&&p.sdk&&(r._metadata.sdk.settings={infer_ip:r.sendDefaultPii?"auto":"never",...r._metadata.sdk.settings}),super(r);const{sendDefaultPii:a,sendClientReports:i,enableLogs:o,_experiments:d,enableMetrics:u}=this._options,h=u??(d==null?void 0:d.enableMetrics)??!0;ye.document&&(i||o||h)&&ye.document.addEventListener("visibilitychange",()=>{ye.document.visibilityState==="hidden"&&(i&&this._flushOutcomes(),o&&Ry(this),h&&Py(this))}),a&&this.on("beforeSendSession",s$)}eventFromException(t,r){return nC(this._options.stackParser,t,r,this._options.attachStacktrace)}eventFromMessage(t,r="info",s){return rC(this._options.stackParser,t,r,s,this._options.attachStacktrace)}_prepareEvent(t,r,s,a){return t.platform=t.platform||"javascript",super._prepareEvent(t,r,s,a)}}function xq(e){var t;return{release:typeof __SENTRY_RELEASE__=="string"?__SENTRY_RELEASE__:(t=ye.SENTRY_RELEASE)==null?void 0:t.id,sendClientReports:!0,parentSpanIsAlwaysRootSpan:!0,...e}}const Oo=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Be=Me,gq=(e,t)=>e>t[1]?"poor":e>t[0]?"needs-improvement":"good",Su=(e,t,r,s)=>{let a,i;return o=>{t.value>=0&&(o||s)&&(i=t.value-(a??0),(i||a===void 0)&&(a=t.value,t.delta=i,t.rating=gq(t.value,r),e(t)))}},ku=(e=!0)=>{var r,s;const t=(s=(r=Be.performance)==null?void 0:r.getEntriesByType)==null?void 0:s.call(r,"navigation")[0];if(!e||t&&t.responseStart>0&&t.responseStart<performance.now())return t},Ic=()=>{const e=ku();return(e==null?void 0:e.activationStart)??0};function No(e,t,r){Be.document&&Be.addEventListener(e,t,r)}function rv(e,t,r){Be.document&&Be.removeEventListener(e,t,r)}let Bl=-1;const aC=new Set,bq=()=>{var e,t;return((e=Be.document)==null?void 0:e.visibilityState)==="hidden"&&!((t=Be.document)!=null&&t.prerendering)?0:1/0},qm=e=>{if(yq(e)&&Bl>-1){if(e.type==="visibilitychange"||e.type==="pagehide")for(const t of aC)t();isFinite(Bl)||(Bl=e.type==="visibilitychange"?e.timeStamp:0,rv("prerenderingchange",qm,!0))}},Eu=()=>{var e;if(Be.document&&Bl<0){const t=Ic();Bl=(Be.document.prerendering||(e=globalThis.performance.getEntriesByType("visibility-state").filter(s=>s.name==="hidden"&&s.startTime>t)[0])==null?void 0:e.startTime)??bq(),No("visibilitychange",qm,!0),No("pagehide",qm,!0),No("prerenderingchange",qm,!0)}return{get firstHiddenTime(){return Bl},onHidden(t){aC.add(t)}}};function yq(e){var t;return e.type==="pagehide"||((t=Be.document)==null?void 0:t.visibilityState)==="hidden"}const vq=()=>`v5-${Date.now()}-${Math.floor(Math.random()*(9e12-1))+1e12}`,Cu=(e,t=-1)=>{var i,o;const r=ku();let s="navigate";return r&&((i=Be.document)!=null&&i.prerendering||Ic()>0?s="prerender":(o=Be.document)!=null&&o.wasDiscarded?s="restore":r.type&&(s=r.type.replace(/_/g,"-"))),{name:e,value:t,rating:"good",delta:0,entries:[],id:vq(),navigationType:s}},o0=new WeakMap;function sv(e,t){return o0.get(e)||o0.set(e,new t),o0.get(e)}class jf{constructor(){jf.prototype.__init.call(this),jf.prototype.__init2.call(this)}__init(){this._sessionValue=0}__init2(){this._sessionEntries=[]}_processEntry(t){var a;if(t.hadRecentInput)return;const r=this._sessionEntries[0],s=this._sessionEntries[this._sessionEntries.length-1];this._sessionValue&&r&&s&&t.startTime-s.startTime<1e3&&t.startTime-r.startTime<5e3?(this._sessionValue+=t.value,this._sessionEntries.push(t)):(this._sessionValue=t.value,this._sessionEntries=[t]),(a=this._onAfterProcessingUnexpectedShift)==null||a.call(this,t)}}const Pc=(e,t,r={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const s=new PerformanceObserver(a=>{Promise.resolve().then(()=>{t(a.getEntries())})});return s.observe({type:e,buffered:!0,...r}),s}}catch{}},av=e=>{let t=!1;return()=>{t||(e(),t=!0)}},mp=e=>{var t;(t=Be.document)!=null&&t.prerendering?addEventListener("prerenderingchange",()=>e(),!0):e()},wq=[1800,3e3],_q=(e,t={})=>{mp(()=>{const r=Eu(),s=Cu("FCP");let a;const o=Pc("paint",d=>{for(const u of d)u.name==="first-contentful-paint"&&(o.disconnect(),u.startTime<r.firstHiddenTime&&(s.value=Math.max(u.startTime-Ic(),0),s.entries.push(u),a(!0)))});o&&(a=Su(e,s,wq,t.reportAllChanges))})},jq=[.1,.25],Nq=(e,t={})=>{_q(av(()=>{var u;const r=Cu("CLS",0);let s;const a=Eu(),i=sv(t,jf),o=h=>{for(const p of h)i._processEntry(p);i._sessionValue>r.value&&(r.value=i._sessionValue,r.entries=i._sessionEntries,s())},d=Pc("layout-shift",o);d&&(s=Su(e,r,jq,t.reportAllChanges),a.onHidden(()=>{o(d.takeRecords()),s(!0)}),(u=Be==null?void 0:Be.setTimeout)==null||u.call(Be,s))}))};let iC=0,l0=1/0,dm=0;const Sq=e=>{e.forEach(t=>{t.interactionId&&(l0=Math.min(l0,t.interactionId),dm=Math.max(dm,t.interactionId),iC=dm?(dm-l0)/7+1:0)})};let kb;const oC=()=>kb?iC:performance.interactionCount||0,kq=()=>{"interactionCount"in performance||kb||(kb=Pc("event",Sq,{type:"event",buffered:!0,durationThreshold:0}))},c0=10;let lC=0;const Eq=()=>oC()-lC;class Nf{constructor(){Nf.prototype.__init.call(this),Nf.prototype.__init2.call(this)}__init(){this._longestInteractionList=[]}__init2(){this._longestInteractionMap=new Map}_resetInteractions(){lC=oC(),this._longestInteractionList.length=0,this._longestInteractionMap.clear()}_estimateP98LongestInteraction(){const t=Math.min(this._longestInteractionList.length-1,Math.floor(Eq()/50));return this._longestInteractionList[t]}_processEntry(t){var a,i;if((a=this._onBeforeProcessingEntry)==null||a.call(this,t),!(t.interactionId||t.entryType==="first-input"))return;const r=this._longestInteractionList.at(-1);let s=this._longestInteractionMap.get(t.interactionId);if(s||this._longestInteractionList.length<c0||t.duration>r._latency){if(s?t.duration>s._latency?(s.entries=[t],s._latency=t.duration):t.duration===s._latency&&t.startTime===s.entries[0].startTime&&s.entries.push(t):(s={id:t.interactionId,entries:[t],_latency:t.duration},this._longestInteractionMap.set(s.id,s),this._longestInteractionList.push(s)),this._longestInteractionList.sort((o,d)=>d._latency-o._latency),this._longestInteractionList.length>c0){const o=this._longestInteractionList.splice(c0);for(const d of o)this._longestInteractionMap.delete(d.id)}(i=this._onAfterProcessingINPCandidate)==null||i.call(this,s)}}}const cC=e=>{const t=r=>{var s;(r.type==="pagehide"||((s=Be.document)==null?void 0:s.visibilityState)==="hidden")&&e(r)};No("visibilitychange",t,!0),No("pagehide",t,!0)},dC=e=>{var r;const t=Be.requestIdleCallback||Be.setTimeout;((r=Be.document)==null?void 0:r.visibilityState)==="hidden"?e():(e=av(e),No("visibilitychange",e,{once:!0,capture:!0}),t(()=>{e(),rv("visibilitychange",e,{capture:!0})}),cC(e))},Cq=[200,500],Tq=40,Rq=(e,t={})=>{if(!(globalThis.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype))return;const r=Eu();mp(()=>{kq();const s=Cu("INP");let a;const i=sv(t,Nf),o=u=>{dC(()=>{for(const p of u)i._processEntry(p);const h=i._estimateP98LongestInteraction();h&&h._latency!==s.value&&(s.value=h._latency,s.entries=h.entries,a())})},d=Pc("event",o,{durationThreshold:t.durationThreshold??Tq});a=Su(e,s,Cq,t.reportAllChanges),d&&(d.observe({type:"first-input",buffered:!0}),r.onHidden(()=>{o(d.takeRecords()),a(!0)}))})};class Iq{_processEntry(t){var r;(r=this._onBeforeProcessingEntry)==null||r.call(this,t)}}const Pq=[2500,4e3],Aq=(e,t={})=>{mp(()=>{const r=Eu(),s=Cu("LCP");let a;const i=sv(t,Iq),o=u=>{t.reportAllChanges||(u=u.slice(-1));for(const h of u)i._processEntry(h),h.startTime<r.firstHiddenTime&&(s.value=Math.max(h.startTime-Ic(),0),s.entries=[h],a())},d=Pc("largest-contentful-paint",o);if(d){a=Su(e,s,Pq,t.reportAllChanges);const u=av(()=>{o(d.takeRecords()),d.disconnect(),a(!0)}),h=p=>{p.isTrusted&&(dC(u),rv(p.type,h,{capture:!0}))};for(const p of["keydown","click","visibilitychange"])No(p,h,{capture:!0})}})},Mq=[800,1800],Eb=e=>{var t,r;(t=Be.document)!=null&&t.prerendering?mp(()=>Eb(e)):((r=Be.document)==null?void 0:r.readyState)!=="complete"?addEventListener("load",()=>Eb(e),!0):setTimeout(e)},Oq=(e,t={})=>{const r=Cu("TTFB"),s=Su(e,r,Mq,t.reportAllChanges);Eb(()=>{const a=ku();a&&(r.value=Math.max(a.responseStart-Ic(),0),r.entries=[a],s(!0))})},Dd={},Sf={};let uC,hC,mC,fC;function iv(e,t=!1){return fp("cls",e,$q,uC,t)}function ov(e,t=!1){return fp("lcp",e,Dq,hC,t)}function Lq(e){return fp("ttfb",e,Fq,mC)}function pC(e){return fp("inp",e,Uq,fC)}function Lo(e,t){return xC(e,t),Sf[e]||(qq(e),Sf[e]=!0),gC(e,t)}function Tu(e,t){const r=Dd[e];if(r!=null&&r.length)for(const s of r)try{s(t)}catch(a){Oo&&Y.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${va(s)}
Error:`,a)}}function $q(){return Nq(e=>{Tu("cls",{metric:e}),uC=e},{reportAllChanges:!0})}function Dq(){return Aq(e=>{Tu("lcp",{metric:e}),hC=e},{reportAllChanges:!0})}function Fq(){return Oq(e=>{Tu("ttfb",{metric:e}),mC=e})}function Uq(){return Rq(e=>{Tu("inp",{metric:e}),fC=e})}function fp(e,t,r,s,a=!1){xC(e,t);let i;return Sf[e]||(i=r(),Sf[e]=!0),s&&t({metric:s}),gC(e,t,a?i:void 0)}function qq(e){const t={};e==="event"&&(t.durationThreshold=0),Pc(e,r=>{Tu(e,{entries:r})},t)}function xC(e,t){Dd[e]=Dd[e]||[],Dd[e].push(t)}function gC(e,t,r){return()=>{r&&r();const s=Dd[e];if(!s)return;const a=s.indexOf(t);a!==-1&&s.splice(a,1)}}function Bq(e){return"duration"in e}function d0(e){return typeof e=="number"&&isFinite(e)}function Si(e,t,r,{...s}){const a=Re(e).start_timestamp;return a&&a>t&&typeof e.updateStartTime=="function"&&e.updateStartTime(t),To(e,()=>{const i=Yr({startTime:t,...s});return i&&i.end(r),i})}function lv(e){var v;const t=be();if(!t)return;const{name:r,transaction:s,attributes:a,startTime:i}=e,{release:o,environment:d,sendDefaultPii:u}=t.getOptions(),h=t.getIntegrationByName("Replay"),p=h==null?void 0:h.getReplayId(),f=We(),x=f.getUser(),y=x!==void 0?x.email||x.id||x.ip_address:void 0;let b;try{b=f.getScopeData().contexts.profile.profile_id}catch{}const w={release:o,environment:d,user:y||void 0,profile_id:b||void 0,replay_id:p||void 0,transaction:s,"user_agent.original":(v=Be.navigator)==null?void 0:v.userAgent,"client.address":u?"{{auto}}":void 0,...a};return Yr({name:r,attributes:w,startTime:i,experimental:{standalone:!0}})}function Ru(){return Be.addEventListener&&Be.performance}function en(e){return e/1e3}function Hq(e){let t="unknown",r="unknown",s="";for(const a of e){if(a==="/"){[t,r]=e.split("/");break}if(!isNaN(Number(a))){t=s==="h"?"http":s,r=e.split(s)[1];break}s+=a}return s===e&&(t=s),{name:t,version:r}}function bC(e){try{return PerformanceObserver.supportedEntryTypes.includes(e)}catch{return!1}}function yC(e,t){let r,s=!1;function a(d){!s&&r&&t(d,r),s=!0}cC(()=>{a("pagehide")});const i=e.on("beforeStartNavigationSpan",(d,u)=>{u!=null&&u.isRedirect||(a("navigation"),i(),o())}),o=e.on("afterStartPageLoadSpan",d=>{r=d.spanContext().spanId,o()})}function Wq(e){let t=0,r;if(!bC("layout-shift"))return;const s=iv(({metric:a})=>{const i=a.entries[a.entries.length-1];i&&(t=a.value,r=i)},!0);yC(e,(a,i)=>{zq(t,r,i,a),s()})}function zq(e,t,r,s){var h;Oo&&Y.log(`Sending CLS span (${e})`);const a=t?en((Wn()||0)+t.startTime):At(),i=We().getScopeData().transactionName,o=t?pr((h=t.sources[0])==null?void 0:h.node):"Layout shift",d={[Ge]:"auto.http.browser.cls",[Nt]:"ui.webvital.cls",[kc]:0,"sentry.pageload.span_id":r,"sentry.report_event":s};t!=null&&t.sources&&t.sources.forEach((p,f)=>{d[`cls.source.${f+1}`]=pr(p.node)});const u=lv({name:o,transaction:i,attributes:d,startTime:a});u&&(u.addEvent("cls",{[yu]:"",[vu]:e}),u.end(a))}function Gq(e){let t=0,r;if(!bC("largest-contentful-paint"))return;const s=ov(({metric:a})=>{const i=a.entries[a.entries.length-1];i&&(t=a.value,r=i)},!0);yC(e,(a,i)=>{Kq(t,r,i,a),s()})}function Kq(e,t,r,s){Oo&&Y.log(`Sending LCP span (${e})`);const a=en((Wn()||0)+((t==null?void 0:t.startTime)||0)),i=We().getScopeData().transactionName,o=t?pr(t.element):"Largest contentful paint",d={[Ge]:"auto.http.browser.lcp",[Nt]:"ui.webvital.lcp",[kc]:0,"sentry.pageload.span_id":r,"sentry.report_event":s};t&&(t.element&&(d["lcp.element"]=pr(t.element)),t.id&&(d["lcp.id"]=t.id),t.url&&(d["lcp.url"]=t.url),t.loadTime!=null&&(d["lcp.loadTime"]=t.loadTime),t.renderTime!=null&&(d["lcp.renderTime"]=t.renderTime),t.size!=null&&(d["lcp.size"]=t.size));const u=lv({name:o,transaction:i,attributes:d,startTime:a});u&&(u.addEvent("lcp",{[yu]:"millisecond",[vu]:e}),u.end(a))}function Br(e){return e&&((Wn()||performance.timeOrigin)+e)/1e3}function vC(e){var r;const t={};if(e.nextHopProtocol!=null){const{name:s,version:a}=Hq(e.nextHopProtocol);t["network.protocol.version"]=a,t["network.protocol.name"]=s}return Wn()||(r=Ru())!=null&&r.timeOrigin?Vq({...t,"http.request.redirect_start":Br(e.redirectStart),"http.request.redirect_end":Br(e.redirectEnd),"http.request.worker_start":Br(e.workerStart),"http.request.fetch_start":Br(e.fetchStart),"http.request.domain_lookup_start":Br(e.domainLookupStart),"http.request.domain_lookup_end":Br(e.domainLookupEnd),"http.request.connect_start":Br(e.connectStart),"http.request.secure_connection_start":Br(e.secureConnectionStart),"http.request.connection_end":Br(e.connectEnd),"http.request.request_start":Br(e.requestStart),"http.request.response_start":Br(e.responseStart),"http.request.response_end":Br(e.responseEnd),"http.request.time_to_first_byte":e.responseStart!=null?e.responseStart/1e3:void 0}):t}function Vq(e){return Object.fromEntries(Object.entries(e).filter(([,t])=>t!=null))}const Yq=2147483647;let nS=0,gs={},lr,Al;function Jq({recordClsStandaloneSpans:e,recordLcpStandaloneSpans:t,client:r}){const s=Ru();if(s&&Wn()){s.mark&&Be.performance.mark("sentry-tracing-init");const a=t?Gq(r):tB(),i=nB(),o=e?Wq(r):eB();return()=>{a==null||a(),i(),o==null||o()}}return()=>{}}function Qq(){Lo("longtask",({entries:e})=>{const t=Vt();if(!t)return;const{op:r,start_timestamp:s}=Re(t);for(const a of e){const i=en(Wn()+a.startTime),o=en(a.duration);r==="navigation"&&s&&i<s||Si(t,i,i+o,{name:"Main UI thread blocked",op:"ui.long-task",attributes:{[Ge]:"auto.ui.browser.metrics"}})}})}function Xq(){new PerformanceObserver(t=>{const r=Vt();if(r)for(const s of t.getEntries()){if(!s.scripts[0])continue;const a=en(Wn()+s.startTime),{start_timestamp:i,op:o}=Re(r);if(o==="navigation"&&i&&a<i)continue;const d=en(s.duration),u={[Ge]:"auto.ui.browser.metrics"},h=s.scripts[0],{invoker:p,invokerType:f,sourceURL:x,sourceFunctionName:y,sourceCharPosition:b}=h;u["browser.script.invoker"]=p,u["browser.script.invoker_type"]=f,x&&(u["code.filepath"]=x),y&&(u["code.function"]=y),b!==-1&&(u["browser.script.source_char_position"]=b),Si(r,a,a+d,{name:"Main UI thread blocked",op:"ui.long-animation-frame",attributes:u})}}).observe({type:"long-animation-frame",buffered:!0})}function Zq(){Lo("event",({entries:e})=>{const t=Vt();if(t){for(const r of e)if(r.name==="click"){const s=en(Wn()+r.startTime),a=en(r.duration),i={name:pr(r.target),op:`ui.interaction.${r.name}`,startTime:s,attributes:{[Ge]:"auto.ui.browser.metrics"}},o=Zk(r.target);o&&(i.attributes["ui.component_name"]=o),Si(t,s,s+a,i)}}})}function eB(){return iv(({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(gs.cls={value:e.value,unit:""},Al=t)},!0)}function tB(){return ov(({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(gs.lcp={value:e.value,unit:"millisecond"},lr=t)},!0)}function nB(){return Lq(({metric:e})=>{e.entries[e.entries.length-1]&&(gs.ttfb={value:e.value,unit:"millisecond"})})}function rB(e,t){const r=Ru(),s=Wn();if(!(r!=null&&r.getEntries)||!s)return;const a=en(s),i=r.getEntries(),{op:o,start_timestamp:d}=Re(e);i.slice(nS).forEach(u=>{const h=en(u.startTime),p=en(Math.max(0,u.duration));if(!(o==="navigation"&&d&&a+h<d))switch(u.entryType){case"navigation":{oB(e,u,a);break}case"mark":case"paint":case"measure":{aB(e,u,h,p,a,t.ignorePerformanceApiSpans);const f=Eu(),x=u.startTime<f.firstHiddenTime;u.name==="first-paint"&&x&&(gs.fp={value:u.startTime,unit:"millisecond"}),u.name==="first-contentful-paint"&&x&&(gs.fcp={value:u.startTime,unit:"millisecond"});break}case"resource":{dB(e,u,u.name,h,p,a,t.ignoreResourceSpans);break}}}),nS=Math.max(i.length-1,0),uB(e),o==="pageload"&&(fB(gs),t.recordClsOnPageloadSpan||delete gs.cls,t.recordLcpOnPageloadSpan||delete gs.lcp,Object.entries(gs).forEach(([u,h])=>{TE(u,h.value,h.unit)}),e.setAttribute("performance.timeOrigin",a),e.setAttribute("performance.activationStart",Ic()),hB(e,t)),lr=void 0,Al=void 0,gs={}}function sB(e){if((e==null?void 0:e.entryType)==="measure")try{return e.detail.devtools.track==="Components "}catch{return}}function aB(e,t,r,s,a,i){if(sB(t)||["mark","measure"].includes(t.entryType)&&vs(t.name,i))return;const o=ku(!1),d=en(o?o.requestStart:0),u=a+Math.max(r,d),h=a+r,p=h+s,f={[Ge]:"auto.resource.browser.metrics"};u!==h&&(f["sentry.browser.measure_happened_before_request"]=!0,f["sentry.browser.measure_start_time"]=u),iB(f,t),u<=p&&Si(e,u,p,{name:t.name,op:t.entryType,attributes:f})}function iB(e,t){try{const r=t.detail;if(!r)return;if(typeof r=="object"){for(const[s,a]of Object.entries(r))if(a&&_i(a))e[`sentry.browser.measure.detail.${s}`]=a;else if(a!==void 0)try{e[`sentry.browser.measure.detail.${s}`]=JSON.stringify(a)}catch{}return}if(_i(r)){e["sentry.browser.measure.detail"]=r;return}try{e["sentry.browser.measure.detail"]=JSON.stringify(r)}catch{}}catch{}}function oB(e,t,r){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(s=>{um(e,t,s,r)}),um(e,t,"secureConnection",r,"TLS/SSL"),um(e,t,"fetch",r,"cache"),um(e,t,"domainLookup",r,"DNS"),cB(e,t,r)}function um(e,t,r,s,a=r){const i=lB(r),o=t[i],d=t[`${r}Start`];!d||!o||Si(e,s+en(d),s+en(o),{op:`browser.${a}`,name:t.name,attributes:{[Ge]:"auto.ui.browser.metrics",...r==="redirect"&&t.redirectCount!=null?{"http.redirect_count":t.redirectCount}:{}}})}function lB(e){return e==="secureConnection"?"connectEnd":e==="fetch"?"domainLookupStart":`${e}End`}function cB(e,t,r){const s=r+en(t.requestStart),a=r+en(t.responseEnd),i=r+en(t.responseStart);t.responseEnd&&(Si(e,s,a,{op:"browser.request",name:t.name,attributes:{[Ge]:"auto.ui.browser.metrics"}}),Si(e,i,a,{op:"browser.response",name:t.name,attributes:{[Ge]:"auto.ui.browser.metrics"}}))}function dB(e,t,r,s,a,i,o){if(t.initiatorType==="xmlhttprequest"||t.initiatorType==="fetch")return;const d=t.initiatorType?`resource.${t.initiatorType}`:"resource.other";if(o!=null&&o.includes(d))return;const u={[Ge]:"auto.resource.browser.metrics"},h=jo(r);h.protocol&&(u["url.scheme"]=h.protocol.split(":").pop()),h.host&&(u["server.address"]=h.host),u["url.same_origin"]=r.includes(Be.location.origin),mB(t,u,[["responseStatus","http.response.status_code"],["transferSize","http.response_transfer_size"],["encodedBodySize","http.response_content_length"],["decodedBodySize","http.decoded_response_content_length"],["renderBlockingStatus","resource.render_blocking_status"],["deliveryType","http.response_delivery_type"]]);const p={...u,...vC(t)},f=i+s,x=f+a;Si(e,f,x,{name:r.replace(Be.location.origin,""),op:d,attributes:p})}function uB(e){const t=Be.navigator;if(!t)return;const r=t.connection;r&&(r.effectiveType&&e.setAttribute("effectiveConnectionType",r.effectiveType),r.type&&e.setAttribute("connectionType",r.type),d0(r.rtt)&&(gs["connection.rtt"]={value:r.rtt,unit:"millisecond"})),d0(t.deviceMemory)&&e.setAttribute("deviceMemory",`${t.deviceMemory} GB`),d0(t.hardwareConcurrency)&&e.setAttribute("hardwareConcurrency",String(t.hardwareConcurrency))}function hB(e,t){lr&&t.recordLcpOnPageloadSpan&&(lr.element&&e.setAttribute("lcp.element",pr(lr.element)),lr.id&&e.setAttribute("lcp.id",lr.id),lr.url&&e.setAttribute("lcp.url",lr.url.trim().slice(0,200)),lr.loadTime!=null&&e.setAttribute("lcp.loadTime",lr.loadTime),lr.renderTime!=null&&e.setAttribute("lcp.renderTime",lr.renderTime),e.setAttribute("lcp.size",lr.size)),Al!=null&&Al.sources&&t.recordClsOnPageloadSpan&&Al.sources.forEach((r,s)=>e.setAttribute(`cls.source.${s+1}`,pr(r.node)))}function mB(e,t,r){r.forEach(([s,a])=>{const i=e[s];i!=null&&(typeof i=="number"&&i<Yq||typeof i=="string")&&(t[a]=i)})}function fB(e){const t=ku(!1);if(!t)return;const{responseStart:r,requestStart:s}=t;s<=r&&(e["ttfb.requestTime"]={value:r-s,unit:"millisecond"})}function pB(){return Ru()&&Wn()?Lo("element",xB):()=>{}}const xB=({entries:e})=>{const t=Vt(),r=t?Kt(t):void 0,s=r?Re(r).description:We().getScopeData().transactionName;e.forEach(a=>{var y,b;const i=a;if(!i.identifier)return;const o=i.name,d=i.renderTime,u=i.loadTime,[h,p]=u?[en(u),"load-time"]:d?[en(d),"render-time"]:[At(),"entry-emission"],f=o==="image-paint"?en(Math.max(0,(d??0)-(u??0))):0,x={[Ge]:"auto.ui.browser.elementtiming",[Nt]:"ui.elementtiming",[xt]:"component","sentry.span_start_time_source":p,"sentry.transaction_name":s,"element.id":i.id,"element.type":((b=(y=i.element)==null?void 0:y.tagName)==null?void 0:b.toLowerCase())||"unknown","element.size":i.naturalWidth&&i.naturalHeight?`${i.naturalWidth}x${i.naturalHeight}`:void 0,"element.render_time":d,"element.load_time":u,"element.url":i.url||void 0,"element.identifier":i.identifier,"element.paint_type":o};Hs({name:`element[${i.identifier}]`,attributes:x,startTime:h,onlyIfParent:!0},w=>{w.end(h+f)})})},gB=1e3;let rS,Cb,Tb;function wC(e){Ri("dom",e),Ii("dom",bB)}function bB(){if(!Be.document)return;const e=Kr.bind(null,"dom"),t=sS(e,!0);Be.document.addEventListener("click",t,!1),Be.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(r=>{var i,o;const a=(i=Be[r])==null?void 0:i.prototype;(o=a==null?void 0:a.hasOwnProperty)!=null&&o.call(a,"addEventListener")&&(An(a,"addEventListener",function(d){return function(u,h,p){if(u==="click"||u=="keypress")try{const f=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},x=f[u]=f[u]||{refCount:0};if(!x.handler){const y=sS(e);x.handler=y,d.call(this,u,y,p)}x.refCount++}catch{}return d.call(this,u,h,p)}}),An(a,"removeEventListener",function(d){return function(u,h,p){if(u==="click"||u=="keypress")try{const f=this.__sentry_instrumentation_handlers__||{},x=f[u];x&&(x.refCount--,x.refCount<=0&&(d.call(this,u,x.handler,p),x.handler=void 0,delete f[u]),Object.keys(f).length===0&&delete this.__sentry_instrumentation_handlers__)}catch{}return d.call(this,u,h,p)}}))})}function yB(e){if(e.type!==Cb)return!1;try{if(!e.target||e.target._sentryId!==Tb)return!1}catch{}return!0}function vB(e,t){return e!=="keypress"?!1:t!=null&&t.tagName?!(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable):!0}function sS(e,t=!1){return r=>{if(!r||r._sentryCaptured)return;const s=wB(r);if(vB(r.type,s))return;yn(r,"_sentryCaptured",!0),s&&!s._sentryId&&yn(s,"_sentryId",gn());const a=r.type==="keypress"?"input":r.type;yB(r)||(e({event:r,name:a,global:t}),Cb=r.type,Tb=s?s._sentryId:void 0),clearTimeout(rS),rS=Be.setTimeout(()=>{Tb=void 0,Cb=void 0},gB)}}function wB(e){try{return e.target}catch{return null}}let hm;function pp(e){const t="history";Ri(t,e),Ii(t,_B)}function _B(){if(Be.addEventListener("popstate",()=>{const t=Be.location.href,r=hm;if(hm=t,r===t)return;Kr("history",{from:r,to:t})}),!IU())return;function e(t){return function(...r){const s=r.length>2?r[2]:void 0;if(s){const a=hm,i=jB(String(s));if(hm=i,a===i)return t.apply(this,r);Kr("history",{from:a,to:i})}return t.apply(this,r)}}An(Be.history,"pushState",e),An(Be.history,"replaceState",e)}function jB(e){try{return new URL(e,Be.location.origin).toString()}catch{return e}}const Bm={};function cv(e){const t=Bm[e];if(t)return t;let r=Be[e];if(yb(r))return Bm[e]=r.bind(Be);const s=Be.document;if(s&&typeof s.createElement=="function")try{const a=s.createElement("iframe");a.hidden=!0,s.head.appendChild(a);const i=a.contentWindow;i!=null&&i[e]&&(r=i[e]),s.head.removeChild(a)}catch(a){Oo&&Y.warn(`Could not create sandbox iframe for ${e} check, bailing to window.${e}: `,a)}return r&&(Bm[e]=r.bind(Be))}function NB(e){Bm[e]=void 0}function Iu(...e){return cv("setTimeout")(...e)}const ua="__sentry_xhr_v3__";function dv(e){Ri("xhr",e),Ii("xhr",SB)}function SB(){if(!Be.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;e.open=new Proxy(e.open,{apply(t,r,s){const a=new Error,i=At()*1e3,o=ys(s[0])?s[0].toUpperCase():void 0,d=kB(s[1]);if(!o||!d)return t.apply(r,s);r[ua]={method:o,url:d,request_headers:{}},o==="POST"&&d.match(/sentry_key/)&&(r.__sentry_own_request__=!0);const u=()=>{const h=r[ua];if(h&&r.readyState===4){try{h.status_code=r.status}catch{}const p={endTimestamp:At()*1e3,startTimestamp:i,xhr:r,virtualError:a};Kr("xhr",p)}};return"onreadystatechange"in r&&typeof r.onreadystatechange=="function"?r.onreadystatechange=new Proxy(r.onreadystatechange,{apply(h,p,f){return u(),h.apply(p,f)}}):r.addEventListener("readystatechange",u),r.setRequestHeader=new Proxy(r.setRequestHeader,{apply(h,p,f){const[x,y]=f,b=p[ua];return b&&ys(x)&&ys(y)&&(b.request_headers[x.toLowerCase()]=y),h.apply(p,f)}}),t.apply(r,s)}}),e.send=new Proxy(e.send,{apply(t,r,s){const a=r[ua];if(!a)return t.apply(r,s);s[0]!==void 0&&(a.body=s[0]);const i={startTimestamp:At()*1e3,xhr:r};return Kr("xhr",i),t.apply(r,s)}})}function kB(e){if(ys(e))return e;try{return e.toString()}catch{}}const EB=Symbol.for("sentry__originalRequestBody");function _C(e){return new URLSearchParams(e).toString()}function kf(e,t=Y){try{if(typeof e=="string")return[e];if(e instanceof URLSearchParams)return[e.toString()];if(e instanceof FormData)return[_C(e)];if(!e)return[void 0]}catch(r){return Oo&&t.error(r,"Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return Oo&&t.log("Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function uv(e=[]){if(e.length>=2&&e[1]&&typeof e[1]=="object"&&"body"in e[1])return e[1].body;if(e.length>=1&&e[0]instanceof Request){const r=e[0][EB];return r!==void 0?r:void 0}}function jC(e){let t;try{t=e.getAllResponseHeaders()}catch(r){return Oo&&Y.error(r,"Failed to get xhr response headers",e),{}}return t?t.split(`\r
`).reduce((r,s)=>{const[a,i]=s.split(": ");return i&&(r[a.toLowerCase()]=i),r},{}):{}}const u0=[],Hm=new Map,jl=new Map,CB=60;function TB(){if(Ru()&&Wn()){const t=RB();return()=>{t()}}return()=>{}}const Rb={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};function RB(){return pC(IB)}const IB=({metric:e})=>{if(e.value==null)return;const t=en(e.value);if(t>CB)return;const r=e.entries.find(b=>b.duration===e.value&&Rb[b.name]);if(!r)return;const{interactionId:s}=r,a=Rb[r.name],i=en(Wn()+r.startTime),o=Vt(),d=o?Kt(o):void 0,u=s!=null?Hm.get(s):void 0,h=(u==null?void 0:u.span)||d,p=h?Re(h).description:We().getScopeData().transactionName,f=(u==null?void 0:u.elementName)||pr(r.target),x={[Ge]:"auto.http.browser.inp",[Nt]:`ui.interaction.${a}`,[kc]:r.duration},y=lv({name:f,transaction:p,attributes:x,startTime:i});y&&(y.addEvent("inp",{[yu]:"millisecond",[vu]:e.value}),y.end(i+t))};function PB(){const e=Object.keys(Rb);wf()&&e.forEach(a=>{Be.addEventListener(a,t,{capture:!0,passive:!0})});function t(a){const i=a.target;if(!i)return;const o=pr(i),d=Math.round(a.timeStamp);if(jl.set(d,o),jl.size>50){const u=jl.keys().next().value;u!==void 0&&jl.delete(u)}}function r(a){const i=Math.round(a.startTime);let o=jl.get(i);if(!o)for(let d=-5;d<=5;d++){const u=jl.get(i+d);if(u){o=u;break}}return o||"<unknown>"}const s=({entries:a})=>{const i=Vt(),o=i&&Kt(i);a.forEach(d=>{if(!Bq(d))return;const u=d.interactionId;if(u==null||Hm.has(u))return;const h=d.target?pr(d.target):r(d);if(u0.length>10){const p=u0.shift();Hm.delete(p)}u0.push(u),Hm.set(u,{span:o,elementName:h})})};Lo("event",s),Lo("first-input",s)}const AB=40;function hv(e,t=cv("fetch")){let r=0,s=0;async function a(i){const o=i.body.length;r+=o,s++;const d={body:i.body,method:"POST",referrerPolicy:"strict-origin",headers:e.headers,keepalive:r<=6e4&&s<15,...e.fetchOptions};try{const u=await t(e.url,d);return{statusCode:u.status,headers:{"x-sentry-rate-limits":u.headers.get("X-Sentry-Rate-Limits"),"retry-after":u.headers.get("Retry-After")}}}catch(u){throw NB("fetch"),u}finally{r-=o,s--}}return QE(e,a,Oy(e.bufferSize||AB))}const pe=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function MB(){const e=be();if(!e){pe&&Y.warn("No Sentry client available, profiling is not started");return}if(!e.getIntegrationByName("BrowserProfiling")){pe&&Y.warn("BrowserProfiling integration is not available");return}e.emit("startUIProfiler")}function OB(){const e=be();if(!e){pe&&Y.warn("No Sentry client available, profiling is not started");return}if(!e.getIntegrationByName("BrowserProfiling")){pe&&Y.warn("ProfilingIntegration is not available");return}e.emit("stopUIProfiler")}const LB={startProfiler:MB,stopProfiler:OB},$B=10,DB=20,FB=30,UB=40,qB=50;function uc(e,t,r,s){const a={filename:e,function:t==="<anonymous>"?Fs:t,in_app:!0};return r!==void 0&&(a.lineno=r),s!==void 0&&(a.colno=s),a}const BB=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,HB=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,WB=/\((\S*)(?::(\d+))(?::(\d+))\)/,zB=/at (.+?) ?\(data:(.+?),/,GB=e=>{const t=e.match(zB);if(t)return{filename:`<data:${t[2]}>`,function:t[1]};const r=BB.exec(e);if(r){const[,a,i,o]=r;return uc(a,Fs,+i,+o)}const s=HB.exec(e);if(s){if(s[2]&&s[2].indexOf("eval")===0){const d=WB.exec(s[2]);d&&(s[2]=d[1],s[3]=d[2],s[4]=d[3])}const[i,o]=CC(s[1]||Fs,s[2]);return uc(o,i,s[3]?+s[3]:void 0,s[4]?+s[4]:void 0)}},NC=[FB,GB],KB=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,VB=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,YB=e=>{const t=KB.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const i=VB.exec(t[3]);i&&(t[1]=t[1]||"eval",t[3]=i[1],t[4]=i[2],t[5]="")}let s=t[3],a=t[1]||Fs;return[a,s]=CC(a,s),uc(s,a,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}},SC=[qB,YB],JB=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,QB=e=>{const t=JB.exec(e);return t?uc(t[2],t[1]||Fs,+t[3],t[4]?+t[4]:void 0):void 0},XB=[UB,QB],ZB=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,e9=e=>{const t=ZB.exec(e);return t?uc(t[2],t[3]||Fs,+t[1]):void 0},t9=[$B,e9],n9=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,r9=e=>{const t=n9.exec(e);return t?uc(t[5],t[3]||t[4]||Fs,+t[1],+t[2]):void 0},s9=[DB,r9],kC=[NC,SC],EC=Gk(...kC),CC=(e,t)=>{const r=e.indexOf("safari-extension")!==-1,s=e.indexOf("safari-web-extension")!==-1;return r||s?[e.indexOf("@")!==-1?e.split("@")[0]:Fs,r?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]};function a9(e,{metadata:t,tunnel:r,dsn:s}){const a={event_id:e.event_id,sent_at:new Date().toISOString(),...(t==null?void 0:t.sdk)&&{sdk:{name:t.sdk.name,version:t.sdk.version}},...!!r&&!!s&&{dsn:Ca(s)}},i=i9(e);return Es(a,[i])}function i9(e){return[{type:"user_report"},e]}const mm=1024,o9="Breadcrumbs",l9=((e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:o9,setup(r){t.console&&Fy(u9(r)),t.dom&&wC(d9(r,t.dom)),t.xhr&&dv(h9(r)),t.fetch&&Yy(m9(r)),t.history&&pp(f9(r)),t.sentry&&r.on("beforeSendEvent",c9(r))}}}),TC=l9;function c9(e){return function(r){be()===e&&Ss({category:`sentry.${r.type==="transaction"?"transaction":"event"}`,event_id:r.event_id,level:r.level,message:no(r)},{event:r})}}function d9(e,t){return function(s){if(be()!==e)return;let a,i,o=typeof t=="object"?t.serializeAttribute:void 0,d=typeof t=="object"&&typeof t.maxStringLength=="number"?t.maxStringLength:void 0;d&&d>mm&&(pe&&Y.warn(`\`dom.maxStringLength\` cannot exceed ${mm}, but a value of ${d} was configured. Sentry will use ${mm} instead.`),d=mm),typeof o=="string"&&(o=[o]);try{const h=s.event,p=p9(h)?h.target:h;a=pr(p,{keyAttrs:o,maxStringLength:d}),i=Zk(p)}catch{a="<unknown>"}if(a.length===0)return;const u={category:`ui.${s.name}`,message:a};i&&(u.data={"ui.component_name":i}),Ss(u,{event:s.event,name:s.name,global:s.global})}}function u9(e){return function(r){if(be()!==e)return;const s={category:"console",data:{arguments:r.args,logger:"console"},level:xf(r.level),message:lf(r.args," ")};if(r.level==="assert")if(r.args[0]===!1)s.message=`Assertion failed: ${lf(r.args.slice(1)," ")||"console.assert"}`,s.data.arguments=r.args.slice(1);else return;Ss(s,{input:r.args,level:r.level})}}function h9(e){return function(r){if(be()!==e)return;const{startTimestamp:s,endTimestamp:a}=r,i=r.xhr[ua];if(!s||!a||!i)return;const{method:o,url:d,status_code:u,body:h}=i,p={method:o,url:d,status_code:u},f={xhr:r.xhr,input:h,startTimestamp:s,endTimestamp:a},x={category:"xhr",data:p,type:"http",level:L5(u)};e.emit("beforeOutgoingRequestBreadcrumb",x,f),Ss(x,f)}}function m9(e){return function(r){if(be()!==e)return;const{startTimestamp:s,endTimestamp:a}=r;if(a&&!(r.fetchData.url.match(/sentry_key/)&&r.fetchData.method==="POST"))if(r.fetchData.method,r.fetchData.url,r.error){const i=r.fetchData,o={data:r.error,input:r.args,startTimestamp:s,endTimestamp:a},d={category:"fetch",data:i,level:"error",type:"http"};e.emit("beforeOutgoingRequestBreadcrumb",d,o),Ss(d,o)}else{const i=r.response,o={...r.fetchData,status_code:i==null?void 0:i.status};r.fetchData.request_body_size,r.fetchData.response_body_size,i==null||i.status;const d={input:r.args,response:i,startTimestamp:s,endTimestamp:a},u={category:"fetch",data:o,type:"http",level:L5(o.status_code)};e.emit("beforeOutgoingRequestBreadcrumb",u,d),Ss(u,d)}}}function f9(e){return function(r){if(be()!==e)return;let s=r.from,a=r.to;const i=jo(ye.location.href);let o=s?jo(s):void 0;const d=jo(a);o!=null&&o.path||(o=i),i.protocol===d.protocol&&i.host===d.host&&(a=d.relative),i.protocol===o.protocol&&i.host===o.host&&(s=o.relative),Ss({category:"navigation",data:{from:s,to:a}})}}function p9(e){return!!e&&!!e.target}const x9=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],g9="BrowserApiErrors",b9=((e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,unregisterOriginalCallbacks:!1,...e};return{name:g9,setupOnce(){t.setTimeout&&An(ye,"setTimeout",aS),t.setInterval&&An(ye,"setInterval",aS),t.requestAnimationFrame&&An(ye,"requestAnimationFrame",y9),t.XMLHttpRequest&&"XMLHttpRequest"in ye&&An(XMLHttpRequest.prototype,"send",v9);const r=t.eventTarget;r&&(Array.isArray(r)?r:x9).forEach(a=>w9(a,t))}}}),RC=b9;function aS(e){return function(...t){const r=t[0];return t[0]=dc(r,{mechanism:{handled:!1,type:`auto.browser.browserapierrors.${va(e)}`}}),e.apply(this,t)}}function y9(e){return function(t){return e.apply(this,[dc(t,{mechanism:{data:{handler:va(e)},handled:!1,type:"auto.browser.browserapierrors.requestAnimationFrame"}})])}}function v9(e){return function(...t){const r=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(a=>{a in r&&typeof r[a]=="function"&&An(r,a,function(i){const o={mechanism:{data:{handler:va(i)},handled:!1,type:`auto.browser.browserapierrors.xhr.${a}`}},d=by(i);return d&&(o.mechanism.data.handler=va(d)),dc(i,o)})}),e.apply(this,t)}}function w9(e,t){var a,i;const s=(a=ye[e])==null?void 0:a.prototype;(i=s==null?void 0:s.hasOwnProperty)!=null&&i.call(s,"addEventListener")&&(An(s,"addEventListener",function(o){return function(d,u,h){try{_9(u)&&(u.handleEvent=dc(u.handleEvent,{mechanism:{data:{handler:va(u),target:e},handled:!1,type:"auto.browser.browserapierrors.handleEvent"}}))}catch{}return t.unregisterOriginalCallbacks&&j9(this,d,u),o.apply(this,[d,dc(u,{mechanism:{data:{handler:va(u),target:e},handled:!1,type:"auto.browser.browserapierrors.addEventListener"}}),h])}}),An(s,"removeEventListener",function(o){return function(d,u,h){try{const p=u.__sentry_wrapped__;p&&o.call(this,d,p,h)}catch{}return o.call(this,d,u,h)}}))}function _9(e){return typeof e.handleEvent=="function"}function j9(e,t,r){e&&typeof e=="object"&&"removeEventListener"in e&&typeof e.removeEventListener=="function"&&e.removeEventListener(t,r)}const IC=()=>({name:"BrowserSession",setupOnce(){if(typeof ye.document>"u"){pe&&Y.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.");return}db({ignoreDuration:!0}),ub(),pp(({from:e,to:t})=>{e!==void 0&&e!==t&&(db({ignoreDuration:!0}),ub())})}}),N9="GlobalHandlers",S9=((e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:N9,setupOnce(){Error.stackTraceLimit=50},setup(r){t.onerror&&(k9(r),iS("onerror")),t.onunhandledrejection&&(E9(r),iS("onunhandledrejection"))}}}),PC=S9;function k9(e){Vk(t=>{const{stackParser:r,attachStacktrace:s}=OC();if(be()!==e||Z5())return;const{msg:a,url:i,line:o,column:d,error:u}=t,h=C9(hp(r,u||a,void 0,s,!1),i,o,d);h.level="error",Ec(h,{originalException:u,mechanism:{handled:!1,type:"auto.browser.global_handlers.onerror"}})})}function E9(e){Yk(t=>{const{stackParser:r,attachStacktrace:s}=OC();if(be()!==e||Z5())return;const a=AC(t),i=_i(a)?MC(a):hp(r,a,void 0,s,!0);i.level="error",Ec(i,{originalException:a,mechanism:{handled:!1,type:"auto.browser.global_handlers.onunhandledrejection"}})})}function AC(e){if(_i(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch{}return e}function MC(e){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(e)}`}]}}}function C9(e,t,r,s){const a=e.exception=e.exception||{},i=a.values=a.values||[],o=i[0]=i[0]||{},d=o.stacktrace=o.stacktrace||{},u=d.frames=d.frames||[],h=s,p=r,f=T9(t)??Uo();return u.length===0&&u.push({colno:h,filename:f,function:Fs,in_app:!0,lineno:p}),e}function iS(e){pe&&Y.log(`Global Handler attached: ${e}`)}function OC(){const e=be();return(e==null?void 0:e.getOptions())||{stackParser:()=>[],attachStacktrace:!1}}function T9(e){if(!(!ys(e)||e.length===0)){if(e.startsWith("data:")){const t=e.match(/^data:([^;]+)/),r=t?t[1]:"text/javascript",s=e.includes("base64,");return`<data:${r}${s?",base64":""}>`}return e}}const LC=()=>({name:"HttpContext",preprocessEvent(e){var s;if(!ye.navigator&&!ye.location&&!ye.document)return;const t=tv(),r={...t.headers,...(s=e.request)==null?void 0:s.headers};e.request={...t,...e.request,headers:r}}}),R9="cause",I9=5,P9="LinkedErrors",A9=((e={})=>{const t=e.limit||I9,r=e.key||R9;return{name:P9,preprocessEvent(s,a,i){const o=i.getOptions();v$(up,o.stackParser,r,t,s,a)}}}),$C=A9,M9="SpotlightBrowser",O9=((e={})=>{const t=e.sidecarUrl||"http://localhost:8969/stream";return{name:M9,setup:()=>{pe&&Y.log("Using Sidecar URL",t)},processEvent:r=>D9(r)?null:r,afterAllSetup:r=>{L9(r,t)}}});function L9(e,t){const r=cv("fetch");let s=0;e.on("beforeEnvelope",a=>{if(s>3){Y.warn("[Spotlight] Disabled Sentry -> Spotlight integration due to too many failed requests:",s);return}r(t,{method:"POST",body:hf(a),headers:{"Content-Type":"application/x-sentry-envelope"},mode:"cors"}).then(i=>{i.status>=200&&i.status<400&&(s=0)},i=>{s++,Y.error("Sentry SDK can't connect to Sidecar is it running? See: https://spotlightjs.com/sidecar/npx/",i)})})}const $9=O9;function D9(e){var t;return!!(e.type==="transaction"&&e.spans&&((t=e.contexts)!=null&&t.trace)&&e.contexts.trace.op==="ui.action.click"&&e.spans.some(({description:r})=>r==null?void 0:r.includes("#sentry-spotlight")))}function F9(){return U9()?(pe&&Ti(()=>{console.error("[Sentry] You cannot use Sentry.init() in a browser extension, see: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")}),!0):!1}function U9(){var i;if(typeof ye.window>"u")return!1;const e=ye;if(e.nw)return!1;const t=e.chrome||e.browser;if(!((i=t==null?void 0:t.runtime)!=null&&i.id))return!1;const r=Uo(),s=["chrome-extension","moz-extension","ms-browser-extension","safari-web-extension"];return!(ye===ye.top&&s.some(o=>r.startsWith(`${o}://`)))}function DC(e){return[u5(),c5(),RC(),TC(),PC(),$C(),p5(),LC(),IC()]}function q9(e={}){const t=!e.skipBrowserExtensionCheck&&F9();let r=e.defaultIntegrations==null?DC():e.defaultIntegrations;const s={...e,enabled:t?!1:e.enabled,stackParser:lO(e.stackParser||EC),integrations:x8({integrations:e.integrations,defaultIntegrations:r}),transport:e.transport||hv};return K8(sC,s)}function B9(){}function H9(e){e()}function Ib(e={}){const t=ye.document,r=(t==null?void 0:t.head)||(t==null?void 0:t.body);if(!r){pe&&Y.error("[showReportDialog] Global document not defined");return}const s=We(),a=be(),i=a==null?void 0:a.getDsn();if(!i){pe&&Y.error("[showReportDialog] DSN not configured");return}const o={...e,user:{...s.getUser(),...e.user},eventId:e.eventId||$E()},d=ye.document.createElement("script");d.async=!0,d.crossOrigin="anonymous",d.src=f8(i,o);const{onLoad:u,onClose:h}=o;if(u&&(d.onload=u),h){const p=f=>{if(f.data==="__sentry_reportdialog_closed__")try{h()}finally{ye.removeEventListener("message",p)}};ye.addEventListener("message",p)}r.appendChild(d)}const W9=Me,z9="ReportingObserver",oS=new WeakMap,G9=((e={})=>{const t=e.types||["crash","deprecation","intervention"];function r(s){if(oS.has(be()))for(const a of s)br(i=>{i.setExtra("url",a.url);const o=`ReportingObserver [${a.type}]`;let d="No details available";if(a.body){const u={};for(const h in a.body)u[h]=a.body[h];if(i.setExtra("body",u),a.type==="crash"){const h=a.body;d=[h.crashId||"",h.reason||""].join(" ").trim()||d}else d=a.body.message||d}LE(`${o}: ${d}`)})}return{name:z9,setupOnce(){if(!AU())return;new W9.ReportingObserver(r,{buffered:!0,types:t}).observe()},setup(s){oS.set(s,!0)}}}),K9=G9,V9="HttpClient",Y9=((e={})=>{const t={failedRequestStatusCodes:[[500,599]],failedRequestTargets:[/.*/],...e};return{name:V9,setup(r){sH(r,t),aH(r,t)}}}),J9=Y9;function Q9(e,t,r,s,a){if(UC(e,r.status,r.url)){const i=iH(t,s);let o,d,u,h;BC()&&([o,u]=lS("Cookie",i),[d,h]=lS("Set-Cookie",r));const p=qC({url:i.url,method:i.method,status:r.status,requestHeaders:o,responseHeaders:d,requestCookies:u,responseCookies:h,error:a,type:"fetch"});Ec(p)}}function lS(e,t){const r=eH(t.headers);let s;try{const a=r[e]||r[e.toLowerCase()]||void 0;a&&(s=FC(a))}catch{}return[r,s]}function X9(e,t,r,s,a){if(UC(e,t.status,t.responseURL)){let i,o,d;if(BC()){try{const h=t.getResponseHeader("Set-Cookie")||t.getResponseHeader("set-cookie")||void 0;h&&(o=FC(h))}catch{}try{d=tH(t)}catch{}i=s}const u=qC({url:t.responseURL,method:r,status:t.status,requestHeaders:i,responseHeaders:d,responseCookies:o,error:a,type:"xhr"});Ec(u)}}function Z9(e){if(e){const t=e["Content-Length"]||e["content-length"];if(t)return parseInt(t,10)}}function FC(e){return e.split("; ").reduce((t,r)=>{const[s,a]=r.split("=");return s&&a&&(t[s]=a),t},{})}function eH(e){const t={};return e.forEach((r,s)=>{t[s]=r}),t}function tH(e){const t=e.getAllResponseHeaders();return t?t.split(`\r
`).reduce((r,s)=>{const[a,i]=s.split(": ");return a&&i&&(r[a]=i),r},{}):{}}function nH(e,t){return e.some(r=>typeof r=="string"?t.includes(r):r.test(t))}function rH(e,t){return e.some(r=>typeof r=="number"?r===t:t>=r[0]&&t<=r[1])}function sH(e,t){$5()&&Yy(r=>{if(be()!==e)return;const{response:s,args:a,error:i,virtualError:o}=r,[d,u]=a;s&&Q9(t,d,s,u,i||o)},!1)}function aH(e,t){"XMLHttpRequest"in Me&&dv(r=>{if(be()!==e)return;const{error:s,virtualError:a}=r,i=r.xhr,o=i[ua];if(!o)return;const{method:d,request_headers:u}=o;try{X9(t,i,d,u,s||a)}catch(h){pe&&Y.warn("Error while extracting response event form XHR response",h)}})}function UC(e,t,r){return rH(e.failedRequestStatusCodes,t)&&nH(e.failedRequestTargets,r)&&!i5(r,be())}function qC(e){const t=be(),r=t&&e.error&&e.error instanceof Error?e.error.stack:void 0,s=r&&t?t.getOptions().stackParser(r,0,1):void 0,a=`HTTP Client Error with status code: ${e.status}`,i={message:a,exception:{values:[{type:"Error",value:a,stacktrace:s?{frames:s}:void 0}]},request:{url:e.url,method:e.method,headers:e.requestHeaders,cookies:e.requestCookies},contexts:{response:{status_code:e.status,headers:e.responseHeaders,cookies:e.responseCookies,body_size:Z9(e.responseHeaders)}}};return _a(i,{type:`auto.http.client.${e.type}`,handled:!1}),i}function iH(e,t){return!t&&e instanceof Request||e instanceof Request&&e.bodyUsed?e:new Request(e,t)}function BC(){const e=be();return e?!!e.getOptions().sendDefaultPii:!1}const h0=Me,oH=7,lH="ContextLines",cH=((e={})=>{const t=e.frameContextLines!=null?e.frameContextLines:oH;return{name:lH,processEvent(r){return uH(r,t)}}}),dH=cH;function uH(e,t){var d;const r=h0.document,s=h0.location&&a5(h0.location.href);if(!r||!s)return e;const a=(d=e.exception)==null?void 0:d.values;if(!(a!=null&&a.length))return e;const i=r.documentElement.innerHTML;if(!i)return e;const o=["<!DOCTYPE html>","<html>",...i.split(`
`),"</html>"];return a.forEach(u=>{const h=u.stacktrace;h!=null&&h.frames&&(h.frames=h.frames.map(p=>hH(p,o,s,t)))}),e}function hH(e,t,r,s){return e.filename!==r||!e.lineno||!t.length||wO(t,e,s),e}const mH="GraphQLClient",fH=(e=>({name:mH,setup(t){pH(t,e),xH(t,e)}}));function pH(e,t){e.on("beforeOutgoingRequestSpan",(r,s)=>{const i=Re(r).data||{};if(!(i[Nt]==="http.client"))return;const u=i[$O]||i["http.url"],h=i[LO]||i["http.method"];if(!ys(u)||!ys(h))return;const{endpoints:p}=t,f=vs(u,p),x=WC(s);if(f&&x){const y=zC(x);if(y){const b=HC(y);r.updateName(`${h} ${u} (${b})`),xp(y)&&r.setAttribute("graphql.document",y.query),gp(y)&&(r.setAttribute("graphql.persisted_query.hash.sha256",y.extensions.persistedQuery.sha256Hash),r.setAttribute("graphql.persisted_query.version",y.extensions.persistedQuery.version))}}})}function xH(e,t){e.on("beforeOutgoingRequestBreadcrumb",(r,s)=>{const{category:a,type:i,data:o}=r;if(i==="http"&&(a==="fetch"||a==="xhr")){const p=o==null?void 0:o.url,{endpoints:f}=t,x=vs(p,f),y=WC(s);if(x&&o&&y){const b=zC(y);if(!o.graphql&&b){const w=HC(b);o["graphql.operation"]=w,xp(b)&&(o["graphql.document"]=b.query),gp(b)&&(o["graphql.persisted_query.hash.sha256"]=b.extensions.persistedQuery.sha256Hash,o["graphql.persisted_query.version"]=b.extensions.persistedQuery.version)}}}})}function HC(e){if(gp(e))return`persisted ${e.operationName}`;if(xp(e)){const{query:t,operationName:r}=e,{operationName:s=r,operationType:a}=gH(t);return s?`${a} ${s}`:`${a}`}return"unknown"}function WC(e){const t="xhr"in e;let r;if(t){const s=e.xhr[ua];r=s&&kf(s.body)[0]}else{const s=uv(e.input);r=kf(s)[0]}return r}function gH(e){const t=/^(?:\s*)(query|mutation|subscription)(?:\s*)(\w+)(?:\s*)[{(]/,r=/^(?:\s*)(query|mutation|subscription)(?:\s*)[{(]/,s=e.match(t);if(s)return{operationType:s[1],operationName:s[2]};const a=e.match(r);return a?{operationType:a[1],operationName:void 0}:{operationType:void 0,operationName:void 0}}function Wm(e){return typeof e=="object"&&e!==null}function xp(e){return Wm(e)&&typeof e.query=="string"}function gp(e){return Wm(e)&&typeof e.operationName=="string"&&Wm(e.extensions)&&Wm(e.extensions.persistedQuery)&&typeof e.extensions.persistedQuery.sha256Hash=="string"&&typeof e.extensions.persistedQuery.version=="number"}function zC(e){try{const t=JSON.parse(e);return xp(t)||gp(t)?t:void 0}catch{return}}const bH=fH,It=Me,mv="sentryReplaySession",yH="replay_event",fv="Unable to send Replay",vH=3e5,wH=9e5,_H=5e3,jH=5500,NH=6e4,SH=5e3,kH=3,cS=15e4,fm=5e3,EH=3e3,CH=300,pv=2e7,TH=4999,RH=5e4,dS=36e5;var IH=Object.defineProperty,PH=(e,t,r)=>t in e?IH(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,uS=(e,t,r)=>PH(e,typeof t!="symbol"?t+"":t,r),dn=(e=>(e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e))(dn||{});function AH(e){return e.nodeType===e.ELEMENT_NODE}function Fd(e){const t=e==null?void 0:e.host;return(t==null?void 0:t.shadowRoot)===e}function Ud(e){return Object.prototype.toString.call(e)==="[object ShadowRoot]"}function MH(e){return e.includes(" background-clip: text;")&&!e.includes(" -webkit-background-clip: text;")&&(e=e.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),e}function OH(e){const{cssText:t}=e;if(t.split('"').length<3)return t;const r=["@import",`url(${JSON.stringify(e.href)})`];return e.layerName===""?r.push("layer"):e.layerName&&r.push(`layer(${e.layerName})`),e.supportsText&&r.push(`supports(${e.supportsText})`),e.media.length&&r.push(e.media.mediaText),r.join(" ")+";"}function Ef(e){try{const t=e.rules||e.cssRules;return t?MH(Array.from(t,GC).join("")):null}catch{return null}}function LH(e){let t="";for(let r=0;r<e.style.length;r++){const s=e.style,a=s[r],i=s.getPropertyPriority(a);t+=`${a}:${s.getPropertyValue(a)}${i?" !important":""};`}return`${e.selectorText} { ${t} }`}function GC(e){let t;if(DH(e))try{t=Ef(e.styleSheet)||OH(e)}catch{}else if(FH(e)){let r=e.cssText;const s=e.selectorText.includes(":"),a=typeof e.style.all=="string"&&e.style.all;if(a&&(r=LH(e)),s&&(r=$H(r)),s||a)return r}return t||e.cssText}function $H(e){const t=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return e.replace(t,"$1\\$2")}function DH(e){return"styleSheet"in e}function FH(e){return"selectorText"in e}let KC=class{constructor(){uS(this,"idNodeMap",new Map),uS(this,"nodeMetaMap",new WeakMap)}getId(t){var s;return t?((s=this.getMeta(t))==null?void 0:s.id)??-1:-1}getNode(t){return this.idNodeMap.get(t)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(t){return this.nodeMetaMap.get(t)||null}removeNodeFromMap(t){const r=this.getId(t);this.idNodeMap.delete(r),t.childNodes&&t.childNodes.forEach(s=>this.removeNodeFromMap(s))}has(t){return this.idNodeMap.has(t)}hasNode(t){return this.nodeMetaMap.has(t)}add(t,r){const s=r.id;this.idNodeMap.set(s,t),this.nodeMetaMap.set(t,r)}replace(t,r){const s=this.getNode(t);if(s){const a=this.nodeMetaMap.get(s);a&&this.nodeMetaMap.set(r,a)}this.idNodeMap.set(t,r)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}};function UH(){return new KC}function bp({maskInputOptions:e,tagName:t,type:r}){return t==="OPTION"&&(t="SELECT"),!!(e[t.toLowerCase()]||r&&e[r]||r==="password"||t==="INPUT"&&!r&&e.text)}function tu({isMasked:e,element:t,value:r,maskInputFn:s}){let a=r||"";return e?(s&&(a=s(a,t)),"*".repeat(a.length)):a}function hc(e){return e.toLowerCase()}function Pb(e){return e.toUpperCase()}const hS="__rrweb_original__";function qH(e){const t=e.getContext("2d");if(!t)return!0;const r=50;for(let s=0;s<e.width;s+=r)for(let a=0;a<e.height;a+=r){const i=t.getImageData,o=hS in i?i[hS]:i;if(new Uint32Array(o.call(t,s,a,Math.min(r,e.width-s),Math.min(r,e.height-a)).data.buffer).some(u=>u!==0))return!1}return!0}function xv(e){const t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?hc(t):null}function Cf(e,t,r){return t==="INPUT"&&(r==="radio"||r==="checkbox")?e.getAttribute("value")||"":e.value}function VC(e,t){let r;try{r=new URL(e,t??window.location.href)}catch{return null}const s=/\.([0-9a-z]+)(?:$)/i,a=r.pathname.match(s);return(a==null?void 0:a[1])??null}const mS={};function YC(e){const t=mS[e];if(t)return t;const r=window.document;let s=window[e];if(r&&typeof r.createElement=="function")try{const a=r.createElement("iframe");a.hidden=!0,r.head.appendChild(a);const i=a.contentWindow;i&&i[e]&&(s=i[e]),r.head.removeChild(a)}catch{}return mS[e]=s.bind(window)}function Ab(...e){return YC("setTimeout")(...e)}function JC(...e){return YC("clearTimeout")(...e)}function QC(e){try{return e.contentDocument}catch{}}let BH=1;const HH=new RegExp("[^a-z0-9-_:]"),nu=-2;function gv(){return BH++}function WH(e){if(e instanceof HTMLFormElement)return"form";const t=hc(e.tagName);return HH.test(t)?"div":t}function zH(e){let t="";return e.indexOf("//")>-1?t=e.split("/").slice(0,3).join("/"):t=e.split("/")[0],t=t.split("?")[0],t}let Nl,fS;const GH=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,KH=/^(?:[a-z+]+:)?\/\//i,VH=/^www\..*/i,YH=/^(data:)([^,]*),(.*)/i;function JH(e,t){if(!e||t.size===0)return e;try{const r=e.split(";"),s=[];for(let a of r){if(a=a.trim(),!a)continue;const i=a.indexOf(":");if(i===-1){s.push(a);continue}const o=a.slice(0,i).trim();t.has(o)||s.push(a)}return s.join("; ")+(s.length>0&&e.endsWith(";")?";":"")}catch(r){return console.warn("Error filtering CSS properties:",r),e}}function Tf(e,t){return(e||"").replace(GH,(r,s,a,i,o,d)=>{const u=a||o||d,h=s||i||"";if(!u)return r;if(KH.test(u)||VH.test(u))return`url(${h}${u}${h})`;if(YH.test(u))return`url(${h}${u}${h})`;if(u[0]==="/")return`url(${h}${zH(t)+u}${h})`;const p=t.split("/"),f=u.split("/");p.pop();for(const x of f)x!=="."&&(x===".."?p.pop():p.push(x));return`url(${h}${p.join("/")}${h})`})}const QH=/^[^ \t\n\r\u000c]+/,XH=/^[, \t\n\r\u000c]+/;function ZH(e,t){if(t.trim()==="")return t;let r=0;function s(i){let o;const d=i.exec(t.substring(r));return d?(o=d[0],r+=o.length,o):""}const a=[];for(;s(XH),!(r>=t.length);){let i=s(QH);if(i.slice(-1)===",")i=Ml(e,i.substring(0,i.length-1)),a.push(i);else{let o="";i=Ml(e,i);let d=!1;for(;;){const u=t.charAt(r);if(u===""){a.push((i+o).trim());break}else if(d)u===")"&&(d=!1);else if(u===","){r+=1,a.push((i+o).trim());break}else u==="("&&(d=!0);o+=u,r+=1}}}return a.join(", ")}const pS=new WeakMap;function Ml(e,t){return!t||t.trim()===""?t:yp(e,t)}function eW(e){return!!(e.tagName==="svg"||e.ownerSVGElement)}function yp(e,t){let r=pS.get(e);if(r||(r=e.createElement("a"),pS.set(e,r)),!t)t="";else if(t.startsWith("blob:")||t.startsWith("data:"))return t;return r.setAttribute("href",t),r.href}function XC(e,t,r,s,a,i,o){if(!s)return s;if(r==="src"||r==="href"&&!(t==="use"&&s[0]==="#"))return Ml(e,s);if(r==="xlink:href"&&s[0]!=="#")return Ml(e,s);if(r==="background"&&(t==="table"||t==="td"||t==="th"))return Ml(e,s);if(r==="srcset")return ZH(e,s);if(r==="style"){let d=Tf(s,yp(e));return o&&o.size>0&&(d=JH(d,o)),d}else if(t==="object"&&r==="data")return Ml(e,s);return typeof i=="function"?i(r,s,a):s}function ZC(e,t,r){return(e==="video"||e==="audio")&&t==="autoplay"}function tW(e,t,r,s){try{if(s&&e.matches(s))return!1;if(typeof t=="string"){if(e.classList.contains(t))return!0}else for(let a=e.classList.length;a--;){const i=e.classList[a];if(t.test(i))return!0}if(r)return e.matches(r)}catch{}return!1}function nW(e,t){for(let r=e.classList.length;r--;){const s=e.classList[r];if(t.test(s))return!0}return!1}function lo(e,t,r=1/0,s=0){return!e||e.nodeType!==e.ELEMENT_NODE||s>r?-1:t(e)?s:lo(e.parentNode,t,r,s+1)}function Ol(e,t){return r=>{const s=r;if(s===null)return!1;try{if(e){if(typeof e=="string"){if(s.matches(`.${e}`))return!0}else if(nW(s,e))return!0}return!!(t&&s.matches(t))}catch{return!1}}}function mc(e,t,r,s,a,i){try{const o=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(o===null)return!1;if(o.tagName==="INPUT"){const h=o.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(h))return!0}let d=-1,u=-1;if(i){if(u=lo(o,Ol(s,a)),u<0)return!0;d=lo(o,Ol(t,r),u>=0?u:1/0)}else{if(d=lo(o,Ol(t,r)),d<0)return!1;u=lo(o,Ol(s,a),d>=0?d:1/0)}return d>=0?u>=0?d<=u:!0:u>=0?!1:!!i}catch{}return!!i}function rW(e,t,r){const s=e.contentWindow;if(!s)return;let a=!1,i;try{i=s.document.readyState}catch{return}if(i!=="complete"){const d=Ab(()=>{a||(t(),a=!0)},r);e.addEventListener("load",()=>{JC(d),a=!0,t()});return}const o="about:blank";if(s.location.href!==o||e.src===o||e.src==="")return Ab(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}function sW(e,t,r){let s=!1,a;try{a=e.sheet}catch{return}if(a)return;const i=Ab(()=>{s||(t(),s=!0)},r);e.addEventListener("load",()=>{JC(i),s=!0,t()})}function aW(e,t){const{doc:r,mirror:s,blockClass:a,blockSelector:i,unblockSelector:o,maskAllText:d,maskAttributeFn:u,maskTextClass:h,unmaskTextClass:p,maskTextSelector:f,unmaskTextSelector:x,inlineStylesheet:y,maskInputOptions:b={},maskTextFn:w,maskInputFn:v,dataURLOptions:j={},inlineImages:C,recordCanvas:S,keepIframeSrcFn:k,newlyAddedElement:R=!1,ignoreCSSAttributes:E}=t,I=iW(r,s);switch(e.nodeType){case e.DOCUMENT_NODE:return e.compatMode!=="CSS1Compat"?{type:dn.Document,childNodes:[],compatMode:e.compatMode}:{type:dn.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:dn.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:I};case e.ELEMENT_NODE:return lW(e,{doc:r,blockClass:a,blockSelector:i,unblockSelector:o,inlineStylesheet:y,maskAttributeFn:u,maskInputOptions:b,maskInputFn:v,dataURLOptions:j,inlineImages:C,recordCanvas:S,keepIframeSrcFn:k,newlyAddedElement:R,rootId:I,maskTextClass:h,unmaskTextClass:p,maskTextSelector:f,unmaskTextSelector:x,ignoreCSSAttributes:E});case e.TEXT_NODE:return oW(e,{doc:r,maskAllText:d,maskTextClass:h,unmaskTextClass:p,maskTextSelector:f,unmaskTextSelector:x,maskTextFn:w,maskInputOptions:b,maskInputFn:v,rootId:I});case e.CDATA_SECTION_NODE:return{type:dn.CDATA,textContent:"",rootId:I};case e.COMMENT_NODE:return{type:dn.Comment,textContent:e.textContent||"",rootId:I};default:return!1}}function iW(e,t){if(!t.hasNode(e))return;const r=t.getId(e);return r===1?void 0:r}function oW(e,t){var j;const{maskAllText:r,maskTextClass:s,unmaskTextClass:a,maskTextSelector:i,unmaskTextSelector:o,maskTextFn:d,maskInputOptions:u,maskInputFn:h,rootId:p}=t,f=e.parentNode&&e.parentNode.tagName;let x=e.textContent;const y=f==="STYLE"?!0:void 0,b=f==="SCRIPT"?!0:void 0,w=f==="TEXTAREA"?!0:void 0;if(y&&x){try{e.nextSibling||e.previousSibling||(j=e.parentNode.sheet)!=null&&j.cssRules&&(x=Ef(e.parentNode.sheet))}catch(C){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${C}`,e)}x=Tf(x,yp(t.doc))}b&&(x="SCRIPT_PLACEHOLDER");const v=mc(e,s,i,a,o,r);if(!y&&!b&&!w&&x&&v&&(x=d?d(x,e.parentElement):x.replace(/[\S]/g,"*")),w&&x&&(u.textarea||v)&&(x=h?h(x,e.parentNode):x.replace(/[\S]/g,"*")),f==="OPTION"&&x){const C=bp({type:null,tagName:f,maskInputOptions:u});x=tu({isMasked:mc(e,s,i,a,o,C),element:e,value:x,maskInputFn:h})}return{type:dn.Text,textContent:x||"",isStyle:y,rootId:p}}function lW(e,t){const{doc:r,blockClass:s,blockSelector:a,unblockSelector:i,inlineStylesheet:o,maskInputOptions:d={},maskAttributeFn:u,maskInputFn:h,dataURLOptions:p={},inlineImages:f,recordCanvas:x,keepIframeSrcFn:y,newlyAddedElement:b=!1,rootId:w,maskTextClass:v,unmaskTextClass:j,maskTextSelector:C,unmaskTextSelector:S,ignoreCSSAttributes:k}=t,R=tW(e,s,a,i),E=WH(e);let I={};const M=e.attributes.length;for(let L=0;L<M;L++){const P=e.attributes[L];P.name&&!ZC(E,P.name,P.value)&&(I[P.name]=XC(r,E,hc(P.name),P.value,e,u,k))}if(E==="link"&&o){const L=Array.from(r.styleSheets).find($=>$.href===e.href);let P=null;L&&(P=Ef(L)),P&&(I.rel=null,I.href=null,I.crossorigin=null,I._cssText=Tf(P,L.href))}if(E==="style"&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){const L=Ef(e.sheet);L&&(I._cssText=Tf(L,yp(r)))}if(E==="input"||E==="textarea"||E==="select"||E==="option"){const L=e,P=xv(L),$=Cf(L,Pb(E),P),B=L.checked;if(P!=="submit"&&P!=="button"&&$){const D=mc(L,v,C,j,S,bp({type:P,tagName:Pb(E),maskInputOptions:d}));I.value=tu({isMasked:D,element:L,value:$,maskInputFn:h})}B&&(I.checked=B)}if(E==="option"&&(e.selected&&!d.select?I.selected=!0:delete I.selected),E==="canvas"&&x){if(e.__context==="2d")qH(e)||(I.rr_dataURL=e.toDataURL(p.type,p.quality));else if(!("__context"in e)){const L=e.toDataURL(p.type,p.quality),P=r.createElement("canvas");P.width=e.width,P.height=e.height;const $=P.toDataURL(p.type,p.quality);L!==$&&(I.rr_dataURL=L)}}if(E==="img"&&f){Nl||(Nl=r.createElement("canvas"),fS=Nl.getContext("2d"));const L=e,P=L.currentSrc||L.getAttribute("src")||"<unknown-src>",$=L.crossOrigin,B=()=>{L.removeEventListener("load",B);try{Nl.width=L.naturalWidth,Nl.height=L.naturalHeight,fS.drawImage(L,0,0),I.rr_dataURL=Nl.toDataURL(p.type,p.quality)}catch(D){if(L.crossOrigin!=="anonymous"){L.crossOrigin="anonymous",L.complete&&L.naturalWidth!==0?B():L.addEventListener("load",B);return}else console.warn(`Cannot inline img src=${P}! Error: ${D}`)}L.crossOrigin==="anonymous"&&($?I.crossOrigin=$:L.removeAttribute("crossorigin"))};L.complete&&L.naturalWidth!==0?B():L.addEventListener("load",B)}if((E==="audio"||E==="video")&&(I.rr_mediaState=e.paused?"paused":"played",I.rr_mediaCurrentTime=e.currentTime),b||(e.scrollLeft&&(I.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(I.rr_scrollTop=e.scrollTop)),R){const{width:L,height:P}=e.getBoundingClientRect();I={class:I.class,rr_width:`${L}px`,rr_height:`${P}px`}}E==="iframe"&&!y(I.src)&&(!R&&!QC(e)&&(I.rr_src=I.src),delete I.src);let O;try{customElements.get(E)&&(O=!0)}catch{}return{type:dn.Element,tagName:E,attributes:I,childNodes:[],isSVG:eW(e)||void 0,needBlock:R,rootId:w,isCustom:O}}function Tt(e){return e==null?"":e.toLowerCase()}function cW(e,t){if(t.comment&&e.type===dn.Comment)return!0;if(e.type===dn.Element){if(t.script&&(e.tagName==="script"||e.tagName==="link"&&(e.attributes.rel==="preload"||e.attributes.rel==="modulepreload")||e.tagName==="link"&&e.attributes.rel==="prefetch"&&typeof e.attributes.href=="string"&&VC(e.attributes.href)==="js"))return!0;if(t.headFavicon&&(e.tagName==="link"&&e.attributes.rel==="shortcut icon"||e.tagName==="meta"&&(Tt(e.attributes.name).match(/^msapplication-tile(image|color)$/)||Tt(e.attributes.name)==="application-name"||Tt(e.attributes.rel)==="icon"||Tt(e.attributes.rel)==="apple-touch-icon"||Tt(e.attributes.rel)==="shortcut icon")))return!0;if(e.tagName==="meta"){if(t.headMetaDescKeywords&&Tt(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(Tt(e.attributes.property).match(/^(og|twitter|fb):/)||Tt(e.attributes.name).match(/^(og|twitter):/)||Tt(e.attributes.name)==="pinterest"))return!0;if(t.headMetaRobots&&(Tt(e.attributes.name)==="robots"||Tt(e.attributes.name)==="googlebot"||Tt(e.attributes.name)==="bingbot"))return!0;if(t.headMetaHttpEquiv&&e.attributes["http-equiv"]!==void 0)return!0;if(t.headMetaAuthorship&&(Tt(e.attributes.name)==="author"||Tt(e.attributes.name)==="generator"||Tt(e.attributes.name)==="framework"||Tt(e.attributes.name)==="publisher"||Tt(e.attributes.name)==="progid"||Tt(e.attributes.property).match(/^article:/)||Tt(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&(Tt(e.attributes.name)==="google-site-verification"||Tt(e.attributes.name)==="yandex-verification"||Tt(e.attributes.name)==="csrf-token"||Tt(e.attributes.name)==="p:domain_verify"||Tt(e.attributes.name)==="verify-v1"||Tt(e.attributes.name)==="verification"||Tt(e.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}function Ll(e,t){const{doc:r,mirror:s,blockClass:a,blockSelector:i,unblockSelector:o,maskAllText:d,maskTextClass:u,unmaskTextClass:h,maskTextSelector:p,unmaskTextSelector:f,skipChild:x=!1,inlineStylesheet:y=!0,maskInputOptions:b={},maskAttributeFn:w,maskTextFn:v,maskInputFn:j,slimDOMOptions:C,dataURLOptions:S={},inlineImages:k=!1,recordCanvas:R=!1,onSerialize:E,onIframeLoad:I,iframeLoadTimeout:M=5e3,onBlockedImageLoad:O,onStylesheetLoad:L,stylesheetLoadTimeout:P=5e3,keepIframeSrcFn:$=()=>!1,newlyAddedElement:B=!1,ignoreCSSAttributes:D}=t;let{preserveWhiteSpace:se=!0}=t;const X=aW(e,{doc:r,mirror:s,blockClass:a,blockSelector:i,maskAllText:d,unblockSelector:o,maskTextClass:u,unmaskTextClass:h,maskTextSelector:p,unmaskTextSelector:f,inlineStylesheet:y,maskInputOptions:b,maskAttributeFn:w,maskTextFn:v,maskInputFn:j,dataURLOptions:S,inlineImages:k,recordCanvas:R,keepIframeSrcFn:$,newlyAddedElement:B,ignoreCSSAttributes:D});if(!X)return console.warn(e,"not serialized"),null;let ee;s.hasNode(e)?ee=s.getId(e):cW(X,C)||!se&&X.type===dn.Text&&!X.isStyle&&!X.textContent.replace(/^\s+|\s+$/gm,"").length?ee=nu:ee=gv();const F=Object.assign(X,{id:ee});if(s.add(e,F),ee===nu)return null;E&&E(e);let Q=!x;if(F.type===dn.Element){Q=Q&&!F.needBlock;const J=e.shadowRoot;J&&Ud(J)&&(F.isShadowHost=!0)}if((F.type===dn.Document||F.type===dn.Element)&&Q){C.headWhitespace&&F.type===dn.Element&&F.tagName==="head"&&(se=!1);const J={doc:r,mirror:s,blockClass:a,blockSelector:i,maskAllText:d,unblockSelector:o,maskTextClass:u,unmaskTextClass:h,maskTextSelector:p,unmaskTextSelector:f,skipChild:x,inlineStylesheet:y,maskInputOptions:b,maskAttributeFn:w,maskTextFn:v,maskInputFn:j,slimDOMOptions:C,dataURLOptions:S,inlineImages:k,recordCanvas:R,preserveWhiteSpace:se,onSerialize:E,onIframeLoad:I,iframeLoadTimeout:M,onBlockedImageLoad:O,onStylesheetLoad:L,stylesheetLoadTimeout:P,keepIframeSrcFn:$,ignoreCSSAttributes:D},U=e.childNodes?Array.from(e.childNodes):[];for(const G of U){const ie=Ll(G,J);ie&&F.childNodes.push(ie)}if(AH(e)&&e.shadowRoot)for(const G of Array.from(e.shadowRoot.childNodes)){const ie=Ll(G,J);ie&&(Ud(e.shadowRoot)&&(ie.isShadow=!0),F.childNodes.push(ie))}}if(e.parentNode&&Fd(e.parentNode)&&Ud(e.parentNode)&&(F.isShadow=!0),F.type===dn.Element&&F.tagName==="iframe"&&!F.needBlock&&rW(e,()=>{const J=QC(e);if(J&&I){const U=Ll(J,{doc:J,mirror:s,blockClass:a,blockSelector:i,unblockSelector:o,maskAllText:d,maskTextClass:u,unmaskTextClass:h,maskTextSelector:p,unmaskTextSelector:f,skipChild:!1,inlineStylesheet:y,maskInputOptions:b,maskAttributeFn:w,maskTextFn:v,maskInputFn:j,slimDOMOptions:C,dataURLOptions:S,inlineImages:k,recordCanvas:R,preserveWhiteSpace:se,onSerialize:E,onIframeLoad:I,iframeLoadTimeout:M,onStylesheetLoad:L,stylesheetLoadTimeout:P,keepIframeSrcFn:$,ignoreCSSAttributes:D});U&&I(e,U)}},M),F.type===dn.Element&&F.tagName==="img"&&!e.complete&&F.needBlock){const J=e,U=()=>{if(J.isConnected&&!J.complete&&O)try{const G=J.getBoundingClientRect();G.width>0&&G.height>0&&O(J,F,G)}catch{}J.removeEventListener("load",U)};J.isConnected&&J.addEventListener("load",U)}return F.type===dn.Element&&F.tagName==="link"&&typeof F.attributes.rel=="string"&&(F.attributes.rel==="stylesheet"||F.attributes.rel==="preload"&&typeof F.attributes.href=="string"&&VC(F.attributes.href)==="css")&&sW(e,()=>{if(L){const J=Ll(e,{doc:r,mirror:s,blockClass:a,blockSelector:i,unblockSelector:o,maskAllText:d,maskTextClass:u,unmaskTextClass:h,maskTextSelector:p,unmaskTextSelector:f,skipChild:!1,inlineStylesheet:y,maskInputOptions:b,maskAttributeFn:w,maskTextFn:v,maskInputFn:j,slimDOMOptions:C,dataURLOptions:S,inlineImages:k,recordCanvas:R,preserveWhiteSpace:se,onSerialize:E,onIframeLoad:I,iframeLoadTimeout:M,onStylesheetLoad:L,stylesheetLoadTimeout:P,keepIframeSrcFn:$,ignoreCSSAttributes:D});J&&L(e,J)}},P),F.type===dn.Element&&delete F.needBlock,F}function dW(e,t){const{mirror:r=new KC,blockClass:s="rr-block",blockSelector:a=null,unblockSelector:i=null,maskAllText:o=!1,maskTextClass:d="rr-mask",unmaskTextClass:u=null,maskTextSelector:h=null,unmaskTextSelector:p=null,inlineStylesheet:f=!0,inlineImages:x=!1,recordCanvas:y=!1,maskAllInputs:b=!1,maskAttributeFn:w,maskTextFn:v,maskInputFn:j,slimDOM:C=!1,dataURLOptions:S,preserveWhiteSpace:k,onSerialize:R,onIframeLoad:E,iframeLoadTimeout:I,onBlockedImageLoad:M,onStylesheetLoad:O,stylesheetLoadTimeout:L,keepIframeSrcFn:P=()=>!1,ignoreCSSAttributes:$=new Set([])}=t||{};return Ll(e,{doc:e,mirror:r,blockClass:s,blockSelector:a,unblockSelector:i,maskAllText:o,maskTextClass:d,unmaskTextClass:u,maskTextSelector:h,unmaskTextSelector:p,skipChild:!1,inlineStylesheet:f,maskInputOptions:b===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:b===!1?{}:b,maskAttributeFn:w,maskTextFn:v,maskInputFn:j,slimDOMOptions:C===!0||C==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:C==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:C===!1?{}:C,dataURLOptions:S,inlineImages:x,recordCanvas:y,preserveWhiteSpace:k,onSerialize:R,onIframeLoad:E,iframeLoadTimeout:I,onBlockedImageLoad:M,onStylesheetLoad:O,stylesheetLoadTimeout:L,keepIframeSrcFn:P,newlyAddedElement:!1,ignoreCSSAttributes:$})}function Xn(e,t,r=document){const s={capture:!0,passive:!0};return r.addEventListener(e,t,s),()=>r.removeEventListener(e,t,s)}const Tl=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let xS={map:{},getId(){return console.error(Tl),-1},getNode(){return console.error(Tl),null},removeNodeFromMap(){console.error(Tl)},has(){return console.error(Tl),!1},reset(){console.error(Tl)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(xS=new Proxy(xS,{get(e,t,r){return t==="map"&&console.error(Tl),Reflect.get(e,t,r)}}));function ru(e,t,r={}){let s=null,a=0;return function(...i){const o=Date.now();!a&&r.leading===!1&&(a=o);const d=t-(o-a),u=this;d<=0||d>t?(s&&(gW(s),s=null),a=o,e.apply(u,i)):!s&&r.trailing!==!1&&(s=vp(()=>{a=r.leading===!1?0:Date.now(),s=null,e.apply(u,i)},d))}}function eT(e,t,r,s,a=window){const i=a.Object.getOwnPropertyDescriptor(e,t);return a.Object.defineProperty(e,t,s?r:{set(o){vp(()=>{r.set.call(this,o)},0),i&&i.set&&i.set.call(this,o)}}),()=>eT(e,t,i||{},!0)}function bv(e,t,r){try{if(!(t in e))return()=>{};const s=e[t],a=r(s);return typeof a=="function"&&(a.prototype=a.prototype||{},Object.defineProperties(a,{__rrweb_original__:{enumerable:!1,value:s}})),e[t]=a,()=>{e[t]=s}}catch{return()=>{}}}let Rf=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||(Rf=()=>new Date().getTime());function tT(e){var r,s,a,i,o,d;const t=e.document;return{left:t.scrollingElement?t.scrollingElement.scrollLeft:e.pageXOffset!==void 0?e.pageXOffset:(t==null?void 0:t.documentElement.scrollLeft)||((s=(r=t==null?void 0:t.body)==null?void 0:r.parentElement)==null?void 0:s.scrollLeft)||((a=t==null?void 0:t.body)==null?void 0:a.scrollLeft)||0,top:t.scrollingElement?t.scrollingElement.scrollTop:e.pageYOffset!==void 0?e.pageYOffset:(t==null?void 0:t.documentElement.scrollTop)||((o=(i=t==null?void 0:t.body)==null?void 0:i.parentElement)==null?void 0:o.scrollTop)||((d=t==null?void 0:t.body)==null?void 0:d.scrollTop)||0}}function nT(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function rT(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function sT(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch{return null}}function Er(e,t,r,s,a){if(!e)return!1;const i=sT(e);if(!i)return!1;const o=Ol(t,r);if(!a){const h=s&&i.matches(s);return o(i)&&!h}const d=lo(i,o);let u=-1;return d<0?!1:(s&&(u=lo(i,Ol(null,s))),d>-1&&u<0?!0:d<u)}function uW(e,t){return t.getId(e)!==-1}function m0(e,t){return t.getId(e)===nu}function aT(e,t){if(Fd(e))return!1;const r=t.getId(e);return t.has(r)?e.parentNode&&e.parentNode.nodeType===e.DOCUMENT_NODE?!1:e.parentNode?aT(e.parentNode,t):!0:!0}function Mb(e){return!!e.changedTouches}function hW(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...t)=>{let r=t[0];if(!(0 in t))throw new TypeError("1 argument is required");do if(this===r)return!0;while(r=r&&r.parentNode);return!1})}function iT(e,t){return!!(e.nodeName==="IFRAME"&&t.getMeta(e))}function oT(e,t){return!!(e.nodeName==="LINK"&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&e.getAttribute("rel")==="stylesheet"&&t.getMeta(e))}function Ob(e){return!!(e!=null&&e.shadowRoot)}class mW{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(t){return this.styleIDMap.get(t)??-1}has(t){return this.styleIDMap.has(t)}add(t,r){if(this.has(t))return this.getId(t);let s;return r===void 0?s=this.id++:s=r,this.styleIDMap.set(t,s),this.idStyleMap.set(s,t),s}getStyle(t){return this.idStyleMap.get(t)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function lT(e){var r,s;let t=null;return((s=(r=e.getRootNode)==null?void 0:r.call(e))==null?void 0:s.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(t=e.getRootNode().host),t}function fW(e){let t=e,r;for(;r=lT(t);)t=r;return t}function pW(e){const t=e.ownerDocument;if(!t)return!1;const r=fW(e);return t.contains(r)}function cT(e){const t=e.ownerDocument;return t?t.contains(e)||pW(e):!1}const gS={};function yv(e){const t=gS[e];if(t)return t;const r=window.document;let s=window[e];if(r&&typeof r.createElement=="function")try{const a=r.createElement("iframe");a.hidden=!0,r.head.appendChild(a);const i=a.contentWindow;i&&i[e]&&(s=i[e]),r.head.removeChild(a)}catch{}return gS[e]=s.bind(window)}function xW(...e){return yv("requestAnimationFrame")(...e)}function vp(...e){return yv("setTimeout")(...e)}function gW(...e){return yv("clearTimeout")(...e)}var Ze=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(Ze||{}),He=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(He||{}),Vn=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(Vn||{}),ra=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(ra||{}),Rl=(e=>(e[e.Play=0]="Play",e[e.Pause=1]="Pause",e[e.Seeked=2]="Seeked",e[e.VolumeChange=3]="VolumeChange",e[e.RateChange=4]="RateChange",e))(Rl||{});function vv(e){try{return e.contentDocument}catch{}}function bW(e){try{return e.contentWindow}catch{}}function bS(e){return"__ln"in e}class yW{constructor(){this.length=0,this.head=null,this.tail=null}get(t){if(t>=this.length)throw new Error("Position outside of list range");let r=this.head;for(let s=0;s<t;s++)r=(r==null?void 0:r.next)||null;return r}addNode(t){const r={value:t,previous:null,next:null};if(t.__ln=r,t.previousSibling&&bS(t.previousSibling)){const s=t.previousSibling.__ln.next;r.next=s,r.previous=t.previousSibling.__ln,t.previousSibling.__ln.next=r,s&&(s.previous=r)}else if(t.nextSibling&&bS(t.nextSibling)&&t.nextSibling.__ln.previous){const s=t.nextSibling.__ln.previous;r.previous=s,r.next=t.nextSibling.__ln,t.nextSibling.__ln.previous=r,s&&(s.next=r)}else this.head&&(this.head.previous=r),r.next=this.head,this.head=r;r.next===null&&(this.tail=r),this.length++}removeNode(t){const r=t.__ln;this.head&&(r.previous?(r.previous.next=r.next,r.next?r.next.previous=r.previous:this.tail=r.previous):(this.head=r.next,this.head?this.head.previous=null:this.tail=null),t.__ln&&delete t.__ln,this.length--)}}const yS=(e,t)=>`${e}@${t}`;class vW{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=t=>{t.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const t=[],r=new Set,s=new yW,a=u=>{let h=u,p=nu;for(;p===nu;)h=h&&h.nextSibling,p=h&&this.mirror.getId(h);return p},i=u=>{if(!u.parentNode||!cT(u))return;const h=Fd(u.parentNode)?this.mirror.getId(lT(u)):this.mirror.getId(u.parentNode),p=a(u);if(h===-1||p===-1)return s.addNode(u);const f=Ll(u,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:x=>{iT(x,this.mirror)&&!Er(x,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&this.iframeManager.addIframe(x),oT(x,this.mirror)&&this.stylesheetManager.trackLinkElement(x),Ob(u)&&this.shadowDomManager.addShadowRoot(u.shadowRoot,this.doc)},onIframeLoad:(x,y)=>{Er(x,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(this.iframeManager.attachIframe(x,y),x.contentWindow&&this.canvasManager.addWindow(x.contentWindow),this.shadowDomManager.observeAttachShadow(x))},onStylesheetLoad:(x,y)=>{this.stylesheetManager.attachLinkElement(x,y)},onBlockedImageLoad:(x,y,{width:b,height:w})=>{this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:y.id,attributes:{style:{width:`${b}px`,height:`${w}px`}}}]})},ignoreCSSAttributes:this.ignoreCSSAttributes});f&&(t.push({parentId:h,nextId:p,node:f}),r.add(f.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const u of this.movedSet)vS(this.removes,u,this.mirror)&&!this.movedSet.has(u.parentNode)||i(u);for(const u of this.addedSet)!wS(this.droppedSet,u)&&!vS(this.removes,u,this.mirror)||wS(this.movedSet,u)?i(u):this.droppedSet.add(u);let o=null;for(;s.length;){let u=null;if(o){const h=this.mirror.getId(o.value.parentNode),p=a(o.value);h!==-1&&p!==-1&&(u=o)}if(!u){let h=s.tail;for(;h;){const p=h;if(h=h.previous,p){const f=this.mirror.getId(p.value.parentNode);if(a(p.value)===-1)continue;if(f!==-1){u=p;break}else{const y=p.value;if(y.parentNode&&y.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const b=y.parentNode.host;if(this.mirror.getId(b)!==-1){u=p;break}}}}}}if(!u){for(;s.head;)s.removeNode(s.head.value);break}o=u.previous,s.removeNode(u.value),i(u.value)}const d={texts:this.texts.map(u=>({id:this.mirror.getId(u.node),value:u.value})).filter(u=>!r.has(u.id)).filter(u=>this.mirror.has(u.id)),attributes:this.attributes.map(u=>{const{attributes:h}=u;if(typeof h.style=="string"){const p=JSON.stringify(u.styleDiff),f=JSON.stringify(u._unchangedStyles);p.length<h.style.length&&(p+f).split("var(").length===h.style.split("var(").length&&(h.style=u.styleDiff)}return{id:this.mirror.getId(u.node),attributes:h}}).filter(u=>!r.has(u.id)).filter(u=>this.mirror.has(u.id)),removes:this.removes,adds:t};!d.texts.length&&!d.attributes.length&&!d.removes.length&&!d.adds.length||(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(d))},this.processMutation=t=>{if(!m0(t.target,this.mirror))switch(t.type){case"characterData":{const r=t.target.textContent;!Er(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&r!==t.oldValue&&this.texts.push({value:mc(t.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&r?this.maskTextFn?this.maskTextFn(r,sT(t.target)):r.replace(/[\S]/g,"*"):r,node:t.target});break}case"attributes":{const r=t.target;let s=t.attributeName,a=t.target.getAttribute(s);if(s==="value"){const o=xv(r),d=r.tagName;a=Cf(r,d,o);const u=bp({maskInputOptions:this.maskInputOptions,tagName:d,type:o}),h=mc(t.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,u);a=tu({isMasked:h,element:r,value:a,maskInputFn:this.maskInputFn})}if(Er(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||a===t.oldValue)return;let i=this.attributeMap.get(t.target);if(r.tagName==="IFRAME"&&s==="src"&&!this.keepIframeSrcFn(a))if(!vv(r))s="rr_src";else return;if(i||(i={node:t.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(i),this.attributeMap.set(t.target,i)),s==="type"&&r.tagName==="INPUT"&&(t.oldValue||"").toLowerCase()==="password"&&r.setAttribute("data-rr-is-password","true"),!ZC(r.tagName,s)&&(i.attributes[s]=XC(this.doc,hc(r.tagName),hc(s),a,r,this.maskAttributeFn),s==="style")){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch{this.unattachedDoc=this.doc}const o=this.unattachedDoc.createElement("span");t.oldValue&&o.setAttribute("style",t.oldValue);for(const d of Array.from(r.style)){const u=r.style.getPropertyValue(d),h=r.style.getPropertyPriority(d);u!==o.style.getPropertyValue(d)||h!==o.style.getPropertyPriority(d)?h===""?i.styleDiff[d]=u:i.styleDiff[d]=[u,h]:i._unchangedStyles[d]=[u,h]}for(const d of Array.from(o.style))r.style.getPropertyValue(d)===""&&(i.styleDiff[d]=!1)}break}case"childList":{if(Er(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;t.addedNodes.forEach(r=>this.genAdds(r,t.target)),t.removedNodes.forEach(r=>{const s=this.mirror.getId(r),a=Fd(t.target)?this.mirror.getId(t.target.host):this.mirror.getId(t.target);Er(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||m0(r,this.mirror)||!uW(r,this.mirror)||(this.addedSet.has(r)?(Lb(this.addedSet,r),this.droppedSet.add(r)):this.addedSet.has(t.target)&&s===-1||aT(t.target,this.mirror)||(this.movedSet.has(r)&&this.movedMap[yS(s,a)]?Lb(this.movedSet,r):this.removes.push({parentId:a,id:s,isShadow:Fd(t.target)&&Ud(t.target)?!0:void 0})),this.mapRemoves.push(r))});break}}},this.genAdds=(t,r)=>{if(!this.processedNodeManager.inOtherBuffer(t,this)&&!(this.addedSet.has(t)||this.movedSet.has(t))){if(this.mirror.hasNode(t)){if(m0(t,this.mirror))return;this.movedSet.add(t);let s=null;r&&this.mirror.hasNode(r)&&(s=this.mirror.getId(r)),s&&s!==-1&&(this.movedMap[yS(this.mirror.getId(t),s)]=!0)}else this.addedSet.add(t),this.droppedSet.delete(t);Er(t,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(t.childNodes&&t.childNodes.forEach(s=>this.genAdds(s)),Ob(t)&&t.shadowRoot.childNodes.forEach(s=>{this.processedNodeManager.add(s,this),this.genAdds(s,t)}))}}}init(t){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager","ignoreCSSAttributes"].forEach(r=>{this[r]=t[r]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function Lb(e,t){var r;e.delete(t),(r=t.childNodes)==null||r.forEach(s=>Lb(e,s))}function vS(e,t,r){return e.length===0?!1:wW(e,t,r)}function wW(e,t,r){let s=t.parentNode;for(;s;){const a=r.getId(s);if(e.some(i=>i.id===a))return!0;s=s.parentNode}return!1}function wS(e,t){return e.size===0?!1:dT(e,t)}function dT(e,t){const{parentNode:r}=t;return r?e.has(r)?!0:dT(e,r):!1}let qd;function _W(e){qd=e}function jW(){qd=void 0}const lt=e=>qd?(...r)=>{try{return e(...r)}catch(s){if(qd&&qd(s)===!0)return()=>{};throw s}}:e,$l=[];function Pu(e){try{if("composedPath"in e){const t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch{}return e&&e.target}function uT(e,t){var o,d;const r=new vW;$l.push(r),r.init(e);let s=window.MutationObserver||window.__rrMutationObserver;const a=(d=(o=window==null?void 0:window.Zone)==null?void 0:o.__symbol__)==null?void 0:d.call(o,"MutationObserver");a&&window[a]&&(s=window[a]);const i=new s(lt(u=>{e.onMutation&&e.onMutation(u)===!1||r.processMutations.bind(r)(u)}));return i.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),i}function NW({mousemoveCb:e,sampling:t,doc:r,mirror:s}){if(t.mousemove===!1)return()=>{};const a=typeof t.mousemove=="number"?t.mousemove:50,i=typeof t.mousemoveCallback=="number"?t.mousemoveCallback:500;let o=[],d;const u=ru(lt(f=>{const x=Date.now()-d;e(o.map(y=>(y.timeOffset-=x,y)),f),o=[],d=null}),i),h=lt(ru(lt(f=>{const x=Pu(f),{clientX:y,clientY:b}=Mb(f)?f.changedTouches[0]:f;d||(d=Rf()),o.push({x:y,y:b,id:s.getId(x),timeOffset:Rf()-d}),u(typeof DragEvent<"u"&&f instanceof DragEvent?He.Drag:f instanceof MouseEvent?He.MouseMove:He.TouchMove)}),a,{trailing:!1})),p=[Xn("mousemove",h,r),Xn("touchmove",h,r),Xn("drag",h,r)];return lt(()=>{p.forEach(f=>f())})}function SW({mouseInteractionCb:e,doc:t,mirror:r,blockClass:s,blockSelector:a,unblockSelector:i,sampling:o}){if(o.mouseInteraction===!1)return()=>{};const d=o.mouseInteraction===!0||o.mouseInteraction===void 0?{}:o.mouseInteraction,u=[];let h=null;const p=f=>x=>{const y=Pu(x);if(Er(y,s,a,i,!0))return;let b=null,w=f;if("pointerType"in x){switch(x.pointerType){case"mouse":b=ra.Mouse;break;case"touch":b=ra.Touch;break;case"pen":b=ra.Pen;break}b===ra.Touch?Vn[f]===Vn.MouseDown?w="TouchStart":Vn[f]===Vn.MouseUp&&(w="TouchEnd"):ra.Pen}else Mb(x)&&(b=ra.Touch);b!==null?(h=b,(w.startsWith("Touch")&&b===ra.Touch||w.startsWith("Mouse")&&b===ra.Mouse)&&(b=null)):Vn[f]===Vn.Click&&(b=h,h=null);const v=Mb(x)?x.changedTouches[0]:x;if(!v)return;const j=r.getId(y),{clientX:C,clientY:S}=v;lt(e)({type:Vn[w],id:j,x:C,y:S,...b!==null&&{pointerType:b}})};return Object.keys(Vn).filter(f=>Number.isNaN(Number(f))&&!f.endsWith("_Departed")&&d[f]!==!1).forEach(f=>{let x=hc(f);const y=p(f);if(window.PointerEvent)switch(Vn[f]){case Vn.MouseDown:case Vn.MouseUp:x=x.replace("mouse","pointer");break;case Vn.TouchStart:case Vn.TouchEnd:return}u.push(Xn(x,y,t))}),lt(()=>{u.forEach(f=>f())})}function hT({scrollCb:e,doc:t,mirror:r,blockClass:s,blockSelector:a,unblockSelector:i,sampling:o}){const d=lt(ru(lt(u=>{const h=Pu(u);if(!h||Er(h,s,a,i,!0))return;const p=r.getId(h);if(h===t&&t.defaultView){const f=tT(t.defaultView);e({id:p,x:f.left,y:f.top})}else e({id:p,x:h.scrollLeft,y:h.scrollTop})}),o.scroll||100));return Xn("scroll",d,t)}function kW({viewportResizeCb:e},{win:t}){let r=-1,s=-1;const a=lt(ru(lt(()=>{const i=nT(),o=rT();(r!==i||s!==o)&&(e({width:Number(o),height:Number(i)}),r=i,s=o)}),200));return Xn("resize",a,t)}const EW=["INPUT","TEXTAREA","SELECT"],_S=new WeakMap;function CW({inputCb:e,doc:t,mirror:r,blockClass:s,blockSelector:a,unblockSelector:i,ignoreClass:o,ignoreSelector:d,maskInputOptions:u,maskInputFn:h,sampling:p,userTriggeredOnInput:f,maskTextClass:x,unmaskTextClass:y,maskTextSelector:b,unmaskTextSelector:w}){function v(I){let M=Pu(I);const O=I.isTrusted,L=M&&Pb(M.tagName);if(L==="OPTION"&&(M=M.parentElement),!M||!L||EW.indexOf(L)<0||Er(M,s,a,i,!0))return;const P=M;if(P.classList.contains(o)||d&&P.matches(d))return;const $=xv(M);let B=Cf(P,L,$),D=!1;const se=bp({maskInputOptions:u,tagName:L,type:$}),X=mc(M,x,b,y,w,se);($==="radio"||$==="checkbox")&&(D=M.checked),B=tu({isMasked:X,element:M,value:B,maskInputFn:h}),j(M,f?{text:B,isChecked:D,userTriggered:O}:{text:B,isChecked:D});const ee=M.name;$==="radio"&&ee&&D&&t.querySelectorAll(`input[type="radio"][name="${ee}"]`).forEach(F=>{if(F!==M){const Q=tu({isMasked:X,element:F,value:Cf(F,L,$),maskInputFn:h});j(F,f?{text:Q,isChecked:!D,userTriggered:!1}:{text:Q,isChecked:!D})}})}function j(I,M){const O=_S.get(I);if(!O||O.text!==M.text||O.isChecked!==M.isChecked){_S.set(I,M);const L=r.getId(I);lt(e)({...M,id:L})}}const S=(p.input==="last"?["change"]:["input","change"]).map(I=>Xn(I,lt(v),t)),k=t.defaultView;if(!k)return()=>{S.forEach(I=>I())};const R=k.Object.getOwnPropertyDescriptor(k.HTMLInputElement.prototype,"value"),E=[[k.HTMLInputElement.prototype,"value"],[k.HTMLInputElement.prototype,"checked"],[k.HTMLSelectElement.prototype,"value"],[k.HTMLTextAreaElement.prototype,"value"],[k.HTMLSelectElement.prototype,"selectedIndex"],[k.HTMLOptionElement.prototype,"selected"]];return R&&R.set&&S.push(...E.map(I=>eT(I[0],I[1],{set(){lt(v)({target:this,isTrusted:!1})}},!1,k))),lt(()=>{S.forEach(I=>I())})}function If(e){const t=[];function r(s,a){if(pm("CSSGroupingRule")&&s.parentRule instanceof CSSGroupingRule||pm("CSSMediaRule")&&s.parentRule instanceof CSSMediaRule||pm("CSSSupportsRule")&&s.parentRule instanceof CSSSupportsRule||pm("CSSConditionRule")&&s.parentRule instanceof CSSConditionRule){const o=Array.from(s.parentRule.cssRules).indexOf(s);a.unshift(o)}else if(s.parentStyleSheet){const o=Array.from(s.parentStyleSheet.cssRules).indexOf(s);a.unshift(o)}return a}return r(e,t)}function ei(e,t,r){let s,a;return e?(e.ownerNode?s=t.getId(e.ownerNode):a=r.getId(e),{styleId:a,id:s}):{}}function TW({styleSheetRuleCb:e,mirror:t,stylesheetManager:r},{win:s}){if(!s.CSSStyleSheet||!s.CSSStyleSheet.prototype)return()=>{};const a=s.CSSStyleSheet.prototype.insertRule;s.CSSStyleSheet.prototype.insertRule=new Proxy(a,{apply:lt((p,f,x)=>{const[y,b]=x,{id:w,styleId:v}=ei(f,t,r.styleMirror);return(w&&w!==-1||v&&v!==-1)&&e({id:w,styleId:v,adds:[{rule:y,index:b}]}),p.apply(f,x)})});const i=s.CSSStyleSheet.prototype.deleteRule;s.CSSStyleSheet.prototype.deleteRule=new Proxy(i,{apply:lt((p,f,x)=>{const[y]=x,{id:b,styleId:w}=ei(f,t,r.styleMirror);return(b&&b!==-1||w&&w!==-1)&&e({id:b,styleId:w,removes:[{index:y}]}),p.apply(f,x)})});let o;s.CSSStyleSheet.prototype.replace&&(o=s.CSSStyleSheet.prototype.replace,s.CSSStyleSheet.prototype.replace=new Proxy(o,{apply:lt((p,f,x)=>{const[y]=x,{id:b,styleId:w}=ei(f,t,r.styleMirror);return(b&&b!==-1||w&&w!==-1)&&e({id:b,styleId:w,replace:y}),p.apply(f,x)})}));let d;s.CSSStyleSheet.prototype.replaceSync&&(d=s.CSSStyleSheet.prototype.replaceSync,s.CSSStyleSheet.prototype.replaceSync=new Proxy(d,{apply:lt((p,f,x)=>{const[y]=x,{id:b,styleId:w}=ei(f,t,r.styleMirror);return(b&&b!==-1||w&&w!==-1)&&e({id:b,styleId:w,replaceSync:y}),p.apply(f,x)})}));const u={};xm("CSSGroupingRule")?u.CSSGroupingRule=s.CSSGroupingRule:(xm("CSSMediaRule")&&(u.CSSMediaRule=s.CSSMediaRule),xm("CSSConditionRule")&&(u.CSSConditionRule=s.CSSConditionRule),xm("CSSSupportsRule")&&(u.CSSSupportsRule=s.CSSSupportsRule));const h={};return Object.entries(u).forEach(([p,f])=>{h[p]={insertRule:f.prototype.insertRule,deleteRule:f.prototype.deleteRule},f.prototype.insertRule=new Proxy(h[p].insertRule,{apply:lt((x,y,b)=>{const[w,v]=b,{id:j,styleId:C}=ei(y.parentStyleSheet,t,r.styleMirror);return(j&&j!==-1||C&&C!==-1)&&e({id:j,styleId:C,adds:[{rule:w,index:[...If(y),v||0]}]}),x.apply(y,b)})}),f.prototype.deleteRule=new Proxy(h[p].deleteRule,{apply:lt((x,y,b)=>{const[w]=b,{id:v,styleId:j}=ei(y.parentStyleSheet,t,r.styleMirror);return(v&&v!==-1||j&&j!==-1)&&e({id:v,styleId:j,removes:[{index:[...If(y),w]}]}),x.apply(y,b)})})}),lt(()=>{s.CSSStyleSheet.prototype.insertRule=a,s.CSSStyleSheet.prototype.deleteRule=i,o&&(s.CSSStyleSheet.prototype.replace=o),d&&(s.CSSStyleSheet.prototype.replaceSync=d),Object.entries(u).forEach(([p,f])=>{f.prototype.insertRule=h[p].insertRule,f.prototype.deleteRule=h[p].deleteRule})})}function mT({mirror:e,stylesheetManager:t},r){var o,d,u;let s=null;r.nodeName==="#document"?s=e.getId(r):s=e.getId(r.host);const a=r.nodeName==="#document"?(o=r.defaultView)==null?void 0:o.Document:(u=(d=r.ownerDocument)==null?void 0:d.defaultView)==null?void 0:u.ShadowRoot,i=a!=null&&a.prototype?Object.getOwnPropertyDescriptor(a==null?void 0:a.prototype,"adoptedStyleSheets"):void 0;return s===null||s===-1||!a||!i?()=>{}:(Object.defineProperty(r,"adoptedStyleSheets",{configurable:i.configurable,enumerable:i.enumerable,get(){var h;return(h=i.get)==null?void 0:h.call(this)},set(h){var f;const p=(f=i.set)==null?void 0:f.call(this,h);if(s!==null&&s!==-1)try{t.adoptStyleSheets(h,s)}catch{}return p}}),lt(()=>{Object.defineProperty(r,"adoptedStyleSheets",{configurable:i.configurable,enumerable:i.enumerable,get:i.get,set:i.set})}))}function RW({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:r,stylesheetManager:s},{win:a}){const i=a.CSSStyleDeclaration.prototype.setProperty;a.CSSStyleDeclaration.prototype.setProperty=new Proxy(i,{apply:lt((d,u,h)=>{var w;const[p,f,x]=h;if(r.has(p))return i.apply(u,[p,f,x]);const{id:y,styleId:b}=ei((w=u.parentRule)==null?void 0:w.parentStyleSheet,t,s.styleMirror);return(y&&y!==-1||b&&b!==-1)&&e({id:y,styleId:b,set:{property:p,value:f,priority:x},index:If(u.parentRule)}),d.apply(u,h)})});const o=a.CSSStyleDeclaration.prototype.removeProperty;return a.CSSStyleDeclaration.prototype.removeProperty=new Proxy(o,{apply:lt((d,u,h)=>{var y;const[p]=h;if(r.has(p))return o.apply(u,[p]);const{id:f,styleId:x}=ei((y=u.parentRule)==null?void 0:y.parentStyleSheet,t,s.styleMirror);return(f&&f!==-1||x&&x!==-1)&&e({id:f,styleId:x,remove:{property:p},index:If(u.parentRule)}),d.apply(u,h)})}),lt(()=>{a.CSSStyleDeclaration.prototype.setProperty=i,a.CSSStyleDeclaration.prototype.removeProperty=o})}function IW({mediaInteractionCb:e,blockClass:t,blockSelector:r,unblockSelector:s,mirror:a,sampling:i,doc:o}){const d=lt(h=>ru(lt(p=>{const f=Pu(p);if(!f||Er(f,t,r,s,!0))return;const{currentTime:x,volume:y,muted:b,playbackRate:w}=f;e({type:h,id:a.getId(f),currentTime:x,volume:y,muted:b,playbackRate:w})}),i.media||500)),u=[Xn("play",d(Rl.Play),o),Xn("pause",d(Rl.Pause),o),Xn("seeked",d(Rl.Seeked),o),Xn("volumechange",d(Rl.VolumeChange),o),Xn("ratechange",d(Rl.RateChange),o)];return lt(()=>{u.forEach(h=>h())})}function PW({fontCb:e,doc:t}){const r=t.defaultView;if(!r)return()=>{};const s=[],a=new WeakMap,i=r.FontFace;r.FontFace=function(u,h,p){const f=new i(u,h,p);return a.set(f,{family:u,buffer:typeof h!="string",descriptors:p,fontSource:typeof h=="string"?h:JSON.stringify(Array.from(new Uint8Array(h)))}),f};const o=bv(t.fonts,"add",function(d){return function(u){return vp(lt(()=>{const h=a.get(u);h&&(e(h),a.delete(u))}),0),d.apply(this,[u])}});return s.push(()=>{r.FontFace=i}),s.push(o),lt(()=>{s.forEach(d=>d())})}function AW(e){const{doc:t,mirror:r,blockClass:s,blockSelector:a,unblockSelector:i,selectionCb:o}=e;let d=!0;const u=lt(()=>{const h=t.getSelection();if(!h||d&&(h!=null&&h.isCollapsed))return;d=h.isCollapsed||!1;const p=[],f=h.rangeCount||0;for(let x=0;x<f;x++){const y=h.getRangeAt(x),{startContainer:b,startOffset:w,endContainer:v,endOffset:j}=y;Er(b,s,a,i,!0)||Er(v,s,a,i,!0)||p.push({start:r.getId(b),startOffset:w,end:r.getId(v),endOffset:j})}o({ranges:p})});return u(),Xn("selectionchange",u)}function MW({doc:e,customElementCb:t}){const r=e.defaultView;return!r||!r.customElements?()=>{}:bv(r.customElements,"define",function(a){return function(i,o,d){try{t({define:{name:i}})}catch{}return a.apply(this,[i,o,d])}})}function OW(e,t={}){const r=e.doc.defaultView;if(!r)return()=>{};let s;e.recordDOM&&(s=uT(e,e.doc));const a=NW(e),i=SW(e),o=hT(e),d=kW(e,{win:r}),u=CW(e),h=IW(e);let p=()=>{},f=()=>{},x=()=>{},y=()=>{};e.recordDOM&&(p=TW(e,{win:r}),f=mT(e,e.doc),x=RW(e,{win:r}),e.collectFonts&&(y=PW(e)));const b=AW(e),w=MW(e),v=[];for(const j of e.plugins)v.push(j.observer(j.callback,r,j.options));return lt(()=>{$l.forEach(j=>j.reset()),s==null||s.disconnect(),a(),i(),o(),d(),u(),h(),p(),f(),x(),y(),b(),w(),v.forEach(j=>j())})}function pm(e){return typeof window[e]<"u"}function xm(e){return!!(typeof window[e]<"u"&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}class $b{constructor(t){this.generateIdFn=t,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(t,r,s,a){const i=s||this.getIdToRemoteIdMap(t),o=a||this.getRemoteIdToIdMap(t);let d=i.get(r);return d||(d=this.generateIdFn(),i.set(r,d),o.set(d,r)),d}getIds(t,r){const s=this.getIdToRemoteIdMap(t),a=this.getRemoteIdToIdMap(t);return r.map(i=>this.getId(t,i,s,a))}getRemoteId(t,r,s){const a=s||this.getRemoteIdToIdMap(t);if(typeof r!="number")return r;const i=a.get(r);return i||-1}getRemoteIds(t,r){const s=this.getRemoteIdToIdMap(t);return r.map(a=>this.getRemoteId(t,a,s))}reset(t){if(!t){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(t),this.iframeRemoteIdToIdMap.delete(t)}getIdToRemoteIdMap(t){let r=this.iframeIdToRemoteIdMap.get(t);return r||(r=new Map,this.iframeIdToRemoteIdMap.set(t,r)),r}getRemoteIdToIdMap(t){let r=this.iframeRemoteIdToIdMap.get(t);return r||(r=new Map,this.iframeRemoteIdToIdMap.set(t,r)),r}}class LW{constructor(){this.crossOriginIframeMirror=new $b(gv),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}}class $W{constructor(t){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new $b(gv),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=t.mutationCb,this.wrappedEmit=t.wrappedEmit,this.stylesheetManager=t.stylesheetManager,this.recordCrossOriginIframes=t.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new $b(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=t.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(t){this.iframes.set(t,!0),t.contentWindow&&this.crossOriginIframeMap.set(t.contentWindow,t)}addLoadListener(t){this.loadListener=t}attachIframe(t,r){var a,i;this.mutationCb({adds:[{parentId:this.mirror.getId(t),nextId:null,node:r}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),this.recordCrossOriginIframes&&((a=t.contentWindow)==null||a.addEventListener("message",this.handleMessage.bind(this))),(i=this.loadListener)==null||i.call(this,t);const s=vv(t);s&&s.adoptedStyleSheets&&s.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(s.adoptedStyleSheets,this.mirror.getId(s))}handleMessage(t){const r=t;if(r.data.type!=="rrweb"||r.origin!==r.data.origin||!t.source)return;const a=this.crossOriginIframeMap.get(t.source);if(!a)return;const i=this.transformCrossOriginEvent(a,r.data.event);i&&this.wrappedEmit(i,r.data.isCheckout)}transformCrossOriginEvent(t,r){var s;switch(r.type){case Ze.FullSnapshot:{this.crossOriginIframeMirror.reset(t),this.crossOriginIframeStyleMirror.reset(t),this.replaceIdOnNode(r.data.node,t);const a=r.data.node.id;return this.crossOriginIframeRootIdMap.set(t,a),this.patchRootIdOnNode(r.data.node,a),{timestamp:r.timestamp,type:Ze.IncrementalSnapshot,data:{source:He.Mutation,adds:[{parentId:this.mirror.getId(t),nextId:null,node:r.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case Ze.Meta:case Ze.Load:case Ze.DomContentLoaded:return!1;case Ze.Plugin:return r;case Ze.Custom:return this.replaceIds(r.data.payload,t,["id","parentId","previousId","nextId"]),r;case Ze.IncrementalSnapshot:switch(r.data.source){case He.Mutation:return r.data.adds.forEach(a=>{this.replaceIds(a,t,["parentId","nextId","previousId"]),this.replaceIdOnNode(a.node,t);const i=this.crossOriginIframeRootIdMap.get(t);i&&this.patchRootIdOnNode(a.node,i)}),r.data.removes.forEach(a=>{this.replaceIds(a,t,["parentId","id"])}),r.data.attributes.forEach(a=>{this.replaceIds(a,t,["id"])}),r.data.texts.forEach(a=>{this.replaceIds(a,t,["id"])}),r;case He.Drag:case He.TouchMove:case He.MouseMove:return r.data.positions.forEach(a=>{this.replaceIds(a,t,["id"])}),r;case He.ViewportResize:return!1;case He.MediaInteraction:case He.MouseInteraction:case He.Scroll:case He.CanvasMutation:case He.Input:return this.replaceIds(r.data,t,["id"]),r;case He.StyleSheetRule:case He.StyleDeclaration:return this.replaceIds(r.data,t,["id"]),this.replaceStyleIds(r.data,t,["styleId"]),r;case He.Font:return r;case He.Selection:return r.data.ranges.forEach(a=>{this.replaceIds(a,t,["start","end"])}),r;case He.AdoptedStyleSheet:return this.replaceIds(r.data,t,["id"]),this.replaceStyleIds(r.data,t,["styleIds"]),(s=r.data.styles)==null||s.forEach(a=>{this.replaceStyleIds(a,t,["styleId"])}),r}}return!1}replace(t,r,s,a){for(const i of a)!Array.isArray(r[i])&&typeof r[i]!="number"||(Array.isArray(r[i])?r[i]=t.getIds(s,r[i]):r[i]=t.getId(s,r[i]));return r}replaceIds(t,r,s){return this.replace(this.crossOriginIframeMirror,t,r,s)}replaceStyleIds(t,r,s){return this.replace(this.crossOriginIframeStyleMirror,t,r,s)}replaceIdOnNode(t,r){this.replaceIds(t,r,["id","rootId"]),"childNodes"in t&&t.childNodes.forEach(s=>{this.replaceIdOnNode(s,r)})}patchRootIdOnNode(t,r){t.type!==dn.Document&&!t.rootId&&(t.rootId=r),"childNodes"in t&&t.childNodes.forEach(s=>{this.patchRootIdOnNode(s,r)})}}class DW{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}class FW{constructor(t){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=t.mutationCb,this.scrollCb=t.scrollCb,this.bypassOptions=t.bypassOptions,this.mirror=t.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(t,r){if(!Ud(t)||this.shadowDoms.has(t))return;this.shadowDoms.add(t),this.bypassOptions.canvasManager.addShadowRoot(t);const s=uT({...this.bypassOptions,doc:r,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},t);this.restoreHandlers.push(()=>s.disconnect()),this.restoreHandlers.push(hT({...this.bypassOptions,scrollCb:this.scrollCb,doc:t,mirror:this.mirror})),vp(()=>{t.adoptedStyleSheets&&t.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(t.adoptedStyleSheets,this.mirror.getId(t.host)),this.restoreHandlers.push(mT({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},t))},0)}observeAttachShadow(t){const r=vv(t),s=bW(t);!r||!s||this.patchAttachShadow(s.Element,r)}patchAttachShadow(t,r){const s=this;this.restoreHandlers.push(bv(t.prototype,"attachShadow",function(a){return function(i){const o=a.call(this,i);return this.shadowRoot&&cT(this)&&s.addShadowRoot(this.shadowRoot,r),o}}))}reset(){this.restoreHandlers.forEach(t=>{try{t()}catch{}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet,this.bypassOptions.canvasManager.resetShadowRoots()}}var jS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",UW=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var gm=0;gm<jS.length;gm++)UW[jS.charCodeAt(gm)]=gm;class NS{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}addWindow(){}addShadowRoot(){}resetShadowRoots(){}}class qW{constructor(t){this.trackedLinkElements=new WeakSet,this.styleMirror=new mW,this.mutationCb=t.mutationCb,this.adoptedStyleSheetCb=t.adoptedStyleSheetCb}attachLinkElement(t,r){"_cssText"in r.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:r.id,attributes:r.attributes}]}),this.trackLinkElement(t)}trackLinkElement(t){this.trackedLinkElements.has(t)||(this.trackedLinkElements.add(t),this.trackStylesheetInLinkElement(t))}adoptStyleSheets(t,r){if(t.length===0)return;const s={id:r,styleIds:[]},a=[];for(const i of t){let o;this.styleMirror.has(i)?o=this.styleMirror.getId(i):(o=this.styleMirror.add(i),a.push({styleId:o,rules:Array.from(i.rules||CSSRule,(d,u)=>({rule:GC(d),index:u}))})),s.styleIds.push(o)}a.length>0&&(s.styles=a),this.adoptedStyleSheetCb(s)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(t){}}class BW{constructor(){this.nodeMap=new WeakMap,this.active=!1}inOtherBuffer(t,r){const s=this.nodeMap.get(t);return s&&Array.from(s).some(a=>a!==r)}add(t,r){this.active||(this.active=!0,xW(()=>{this.nodeMap=new WeakMap,this.active=!1})),this.nodeMap.set(t,(this.nodeMap.get(t)||new Set).add(r))}destroy(){}}let Jt,Pf;var K2;try{if(Array.from([1],e=>e*2)[0]!==2){const e=document.createElement("iframe");document.body.appendChild(e),Array.from=((K2=e.contentWindow)==null?void 0:K2.Array.from)||Array.from,document.body.removeChild(e)}}catch(e){console.debug("Unable to override Array.from",e)}const hs=UH();function ga(e={}){const{emit:t,checkoutEveryNms:r,checkoutEveryNth:s,blockClass:a="rr-block",blockSelector:i=null,unblockSelector:o=null,ignoreClass:d="rr-ignore",ignoreSelector:u=null,maskAllText:h=!1,maskTextClass:p="rr-mask",unmaskTextClass:f=null,maskTextSelector:x=null,unmaskTextSelector:y=null,inlineStylesheet:b=!0,maskAllInputs:w,maskInputOptions:v,slimDOMOptions:j,maskAttributeFn:C,maskInputFn:S,maskTextFn:k,maxCanvasSize:R=null,packFn:E,sampling:I={},dataURLOptions:M={},mousemoveWait:O,recordDOM:L=!0,recordCanvas:P=!1,recordCrossOriginIframes:$=!1,recordAfter:B=e.recordAfter==="DOMContentLoaded"?e.recordAfter:"load",userTriggeredOnInput:D=!1,collectFonts:se=!1,inlineImages:X=!1,plugins:ee,keepIframeSrcFn:F=()=>!1,ignoreCSSAttributes:Q=new Set([]),errorHandler:J,onMutation:U,getCanvasManager:G}=e;_W(J);const ie=$?window.parent===window:!0;let ae=!1;if(!ie)try{window.parent.document&&(ae=!1)}catch{ae=!0}if(ie&&!t)throw new Error("emit function is required");if(!ie&&!ae)return()=>{};O!==void 0&&I.mousemove===void 0&&(I.mousemove=O),hs.reset();const fe=w===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:v!==void 0?v:{},je=j===!0||j==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:j==="all",headMetaDescKeywords:j==="all"}:j||{};hW();let ze,he=0;const Ee=Ye=>{for(const Bt of ee||[])Bt.eventProcessor&&(Ye=Bt.eventProcessor(Ye));return E&&!ae&&(Ye=E(Ye)),Ye};Jt=(Ye,Bt)=>{var Cn;const Xe=Ye;if(Xe.timestamp=Rf(),(Cn=$l[0])!=null&&Cn.isFrozen()&&Xe.type!==Ze.FullSnapshot&&!(Xe.type===Ze.IncrementalSnapshot&&Xe.data.source===He.Mutation)&&$l.forEach(zn=>zn.unfreeze()),ie)t==null||t(Ee(Xe),Bt);else if(ae){const zn={type:"rrweb",event:Ee(Xe),origin:window.location.origin,isCheckout:Bt};window.parent.postMessage(zn,"*")}if(Xe.type===Ze.FullSnapshot)ze=Xe,he=0;else if(Xe.type===Ze.IncrementalSnapshot){if(Xe.data.source===He.Mutation&&Xe.data.isAttachIframe)return;he++;const zn=s&&he>=s,ut=r&&ze&&Xe.timestamp-ze.timestamp>r;(zn||ut)&&an(!0)}};const nt=Ye=>{Jt({type:Ze.IncrementalSnapshot,data:{source:He.Mutation,...Ye}})},Ln=Ye=>Jt({type:Ze.IncrementalSnapshot,data:{source:He.Scroll,...Ye}}),Or=Ye=>Jt({type:Ze.IncrementalSnapshot,data:{source:He.CanvasMutation,...Ye}}),yr=Ye=>Jt({type:Ze.IncrementalSnapshot,data:{source:He.AdoptedStyleSheet,...Ye}}),Ve=new qW({mutationCb:nt,adoptedStyleSheetCb:yr}),vt=typeof __RRWEB_EXCLUDE_IFRAME__=="boolean"&&__RRWEB_EXCLUDE_IFRAME__?new LW:new $W({mirror:hs,mutationCb:nt,stylesheetManager:Ve,recordCrossOriginIframes:$,wrappedEmit:Jt});for(const Ye of ee||[])Ye.getMirror&&Ye.getMirror({nodeMirror:hs,crossOriginIframeMirror:vt.crossOriginIframeMirror,crossOriginIframeStyleMirror:vt.crossOriginIframeStyleMirror});const En=new BW,nn=WW(G,{mirror:hs,win:window,mutationCb:Ye=>Jt({type:Ze.IncrementalSnapshot,data:{source:He.CanvasMutation,...Ye}}),recordCanvas:P,blockClass:a,blockSelector:i,unblockSelector:o,maxCanvasSize:R,sampling:I.canvas,dataURLOptions:M,errorHandler:J}),wt=typeof __RRWEB_EXCLUDE_SHADOW_DOM__=="boolean"&&__RRWEB_EXCLUDE_SHADOW_DOM__?new DW:new FW({mutationCb:nt,scrollCb:Ln,bypassOptions:{onMutation:U,blockClass:a,blockSelector:i,unblockSelector:o,maskAllText:h,maskTextClass:p,unmaskTextClass:f,maskTextSelector:x,unmaskTextSelector:y,inlineStylesheet:b,maskInputOptions:fe,dataURLOptions:M,maskAttributeFn:C,maskTextFn:k,maskInputFn:S,recordCanvas:P,inlineImages:X,sampling:I,slimDOMOptions:je,iframeManager:vt,stylesheetManager:Ve,canvasManager:nn,keepIframeSrcFn:F,processedNodeManager:En,ignoreCSSAttributes:Q},mirror:hs}),an=(Ye=!1)=>{if(!L)return;Jt({type:Ze.Meta,data:{href:window.location.href,width:rT(),height:nT()}},Ye),Ve.reset(),wt.init(),$l.forEach(Xe=>Xe.lock());const Bt=dW(document,{mirror:hs,blockClass:a,blockSelector:i,unblockSelector:o,maskAllText:h,maskTextClass:p,unmaskTextClass:f,maskTextSelector:x,unmaskTextSelector:y,inlineStylesheet:b,maskAllInputs:fe,maskAttributeFn:C,maskInputFn:S,maskTextFn:k,slimDOM:je,dataURLOptions:M,recordCanvas:P,inlineImages:X,onSerialize:Xe=>{iT(Xe,hs)&&vt.addIframe(Xe),oT(Xe,hs)&&Ve.trackLinkElement(Xe),Ob(Xe)&&wt.addShadowRoot(Xe.shadowRoot,document)},onIframeLoad:(Xe,Cn)=>{vt.attachIframe(Xe,Cn),Xe.contentWindow&&nn.addWindow(Xe.contentWindow),wt.observeAttachShadow(Xe)},onStylesheetLoad:(Xe,Cn)=>{Ve.attachLinkElement(Xe,Cn)},onBlockedImageLoad:(Xe,Cn,{width:zn,height:ut})=>{nt({adds:[],removes:[],texts:[],attributes:[{id:Cn.id,attributes:{style:{width:`${zn}px`,height:`${ut}px`}}}]})},keepIframeSrcFn:F,ignoreCSSAttributes:Q});if(!Bt)return console.warn("Failed to snapshot the document");Jt({type:Ze.FullSnapshot,data:{node:Bt,initialOffset:tT(window)}}),$l.forEach(Xe=>Xe.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&Ve.adoptStyleSheets(document.adoptedStyleSheets,hs.getId(document))};Pf=an;try{const Ye=[],Bt=Cn=>{var zn;return lt(OW)({onMutation:U,mutationCb:nt,mousemoveCb:(ut,Wo)=>Jt({type:Ze.IncrementalSnapshot,data:{source:Wo,positions:ut}}),mouseInteractionCb:ut=>Jt({type:Ze.IncrementalSnapshot,data:{source:He.MouseInteraction,...ut}}),scrollCb:Ln,viewportResizeCb:ut=>Jt({type:Ze.IncrementalSnapshot,data:{source:He.ViewportResize,...ut}}),inputCb:ut=>Jt({type:Ze.IncrementalSnapshot,data:{source:He.Input,...ut}}),mediaInteractionCb:ut=>Jt({type:Ze.IncrementalSnapshot,data:{source:He.MediaInteraction,...ut}}),styleSheetRuleCb:ut=>Jt({type:Ze.IncrementalSnapshot,data:{source:He.StyleSheetRule,...ut}}),styleDeclarationCb:ut=>Jt({type:Ze.IncrementalSnapshot,data:{source:He.StyleDeclaration,...ut}}),canvasMutationCb:Or,fontCb:ut=>Jt({type:Ze.IncrementalSnapshot,data:{source:He.Font,...ut}}),selectionCb:ut=>{Jt({type:Ze.IncrementalSnapshot,data:{source:He.Selection,...ut}})},customElementCb:ut=>{Jt({type:Ze.IncrementalSnapshot,data:{source:He.CustomElement,...ut}})},blockClass:a,ignoreClass:d,ignoreSelector:u,maskAllText:h,maskTextClass:p,unmaskTextClass:f,maskTextSelector:x,unmaskTextSelector:y,maskInputOptions:fe,inlineStylesheet:b,sampling:I,recordDOM:L,recordCanvas:P,inlineImages:X,userTriggeredOnInput:D,collectFonts:se,doc:Cn,maskAttributeFn:C,maskInputFn:S,maskTextFn:k,keepIframeSrcFn:F,blockSelector:i,unblockSelector:o,slimDOMOptions:je,dataURLOptions:M,mirror:hs,iframeManager:vt,stylesheetManager:Ve,shadowDomManager:wt,processedNodeManager:En,canvasManager:nn,ignoreCSSAttributes:Q,plugins:((zn=ee==null?void 0:ee.filter(ut=>ut.observer))==null?void 0:zn.map(ut=>({observer:ut.observer,options:ut.options,callback:Wo=>Jt({type:Ze.Plugin,data:{plugin:ut.name,payload:Wo}})})))||[]},{})};vt.addLoadListener(Cn=>{try{Ye.push(Bt(Cn.contentDocument))}catch(zn){console.warn(zn)}});const Xe=()=>{an(),Ye.push(Bt(document))};return document.readyState==="interactive"||document.readyState==="complete"?Xe():(Ye.push(Xn("DOMContentLoaded",()=>{Jt({type:Ze.DomContentLoaded,data:{}}),B==="DOMContentLoaded"&&Xe()})),Ye.push(Xn("load",()=>{Jt({type:Ze.Load,data:{}}),B==="load"&&Xe()},window))),()=>{Ye.forEach(Cn=>Cn()),En.destroy(),Pf=void 0,jW()}}catch(Ye){console.warn(Ye)}}function HW(e){if(!Pf)throw new Error("please take full snapshot after start recording");Pf(e)}ga.mirror=hs;ga.takeFullSnapshot=HW;function WW(e,t){try{return e?e(t):new NS}catch{return console.warn("Unable to initialize CanvasManager"),new NS}}var SS;(function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"})(SS||(SS={}));const zW=3,GW=5;function wv(e){return e>9999999999?e:e*1e3}function f0(e){return e>9999999999?e/1e3:e}function Au(e,t){t.category!=="sentry.transaction"&&(["ui.click","ui.input"].includes(t.category)?e.triggerUserActivity():e.checkAndHandleExpiredSession(),e.addUpdate(()=>(e.throttledAddEvent({type:Ze.Custom,timestamp:(t.timestamp||0)*1e3,data:{tag:"breadcrumb",payload:kr(t,10,1e3)}}),t.category==="console")))}const KW="button,a";function fT(e){return e.closest(KW)||e}function pT(e){const t=xT(e);return!t||!(t instanceof Element)?t:fT(t)}function xT(e){return VW(e)?e.target:e}function VW(e){return typeof e=="object"&&!!e&&"target"in e}let ti;function YW(e){return ti||(ti=[],JW()),ti.push(e),()=>{const t=ti?ti.indexOf(e):-1;t>-1&&ti.splice(t,1)}}function JW(){An(It,"open",function(e){return function(...t){if(ti)try{ti.forEach(r=>r())}catch{}return e.apply(It,t)}})}const QW=new Set([He.Mutation,He.StyleSheetRule,He.StyleDeclaration,He.AdoptedStyleSheet,He.CanvasMutation,He.Selection,He.MediaInteraction]);function XW(e,t,r){e.handleClick(t,r)}class ZW{constructor(t,r,s=Au){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=r.timeout/1e3,this._threshold=r.threshold/1e3,this._scrollTimeout=r.scrollTimeout/1e3,this._replay=t,this._ignoreSelector=r.ignoreSelector,this._addBreadcrumbEvent=s}addListeners(){const t=YW(()=>{this._lastMutation=kS()});this._teardown=()=>{t(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(t,r){if(tz(r,this._ignoreSelector)||!nz(t))return;const s={timestamp:f0(t.timestamp),clickBreadcrumb:t,clickCount:0,node:r};this._clicks.some(a=>a.node===s.node&&Math.abs(a.timestamp-s.timestamp)<1)||(this._clicks.push(s),this._clicks.length===1&&this._scheduleCheckClicks())}registerMutation(t=Date.now()){this._lastMutation=f0(t)}registerScroll(t=Date.now()){this._lastScroll=f0(t)}registerClick(t){const r=fT(t);this._handleMultiClick(r)}_handleMultiClick(t){this._getClicks(t).forEach(r=>{r.clickCount++})}_getClicks(t){return this._clicks.filter(r=>r.node===t)}_checkClicks(){const t=[],r=kS();this._clicks.forEach(s=>{!s.mutationAfter&&this._lastMutation&&(s.mutationAfter=s.timestamp<=this._lastMutation?this._lastMutation-s.timestamp:void 0),!s.scrollAfter&&this._lastScroll&&(s.scrollAfter=s.timestamp<=this._lastScroll?this._lastScroll-s.timestamp:void 0),s.timestamp+this._timeout<=r&&t.push(s)});for(const s of t){const a=this._clicks.indexOf(s);a>-1&&(this._generateBreadcrumbs(s),this._clicks.splice(a,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(t){const r=this._replay,s=t.scrollAfter&&t.scrollAfter<=this._scrollTimeout,a=t.mutationAfter&&t.mutationAfter<=this._threshold,i=!s&&!a,{clickCount:o,clickBreadcrumb:d}=t;if(i){const u=Math.min(t.mutationAfter||this._timeout,this._timeout)*1e3,h=u<this._timeout*1e3?"mutation":"timeout",p={type:"default",message:d.message,timestamp:d.timestamp,category:"ui.slowClickDetected",data:{...d.data,url:It.location.href,route:r.getCurrentRoute(),timeAfterClickMs:u,endReason:h,clickCount:o||1}};this._addBreadcrumbEvent(r,p);return}if(o>1){const u={type:"default",message:d.message,timestamp:d.timestamp,category:"ui.multiClick",data:{...d.data,url:It.location.href,route:r.getCurrentRoute(),clickCount:o,metric:!0}};this._addBreadcrumbEvent(r,u)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=Iu(()=>this._checkClicks(),1e3)}}const ez=["A","BUTTON","INPUT"];function tz(e,t){return!!(!ez.includes(e.tagName)||e.tagName==="INPUT"&&!["submit","button"].includes(e.getAttribute("type")||"")||e.tagName==="A"&&(e.hasAttribute("download")||e.hasAttribute("target")&&e.getAttribute("target")!=="_self")||t&&e.matches(t))}function nz(e){return!!(e.data&&typeof e.data.nodeId=="number"&&e.timestamp)}function kS(){return Date.now()/1e3}function rz(e,t){try{if(!sz(t))return;const{source:r}=t.data;if(QW.has(r)&&e.registerMutation(t.timestamp),r===He.Scroll&&e.registerScroll(t.timestamp),az(t)){const{type:s,id:a}=t.data,i=ga.mirror.getNode(a);i instanceof HTMLElement&&s===Vn.Click&&e.registerClick(i)}}catch{}}function sz(e){return e.type===zW}function az(e){return e.data.source===He.MouseInteraction}function $s(e){return{timestamp:Date.now()/1e3,type:"default",...e}}var _v=(e=>(e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e))(_v||{});const iz=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function oz(e){const t={};!e["data-sentry-component"]&&e["data-sentry-element"]&&(e["data-sentry-component"]=e["data-sentry-element"]);for(const r in e)if(iz.has(r)){let s=r;(r==="data-testid"||r==="data-test-id")&&(s="testId"),t[s]=e[r]}return t}const lz=e=>t=>{if(!e.isEnabled())return;const r=cz(t);if(!r)return;const s=t.name==="click",a=s?t.event:void 0;s&&e.clickDetector&&(a!=null&&a.target)&&!a.altKey&&!a.metaKey&&!a.ctrlKey&&!a.shiftKey&&XW(e.clickDetector,r,pT(t.event)),Au(e,r)};function gT(e,t){const r=ga.mirror.getId(e),s=r&&ga.mirror.getNode(r),a=s&&ga.mirror.getMeta(s),i=a&&uz(a)?a:null;return{message:t,data:i?{nodeId:r,node:{id:r,tagName:i.tagName,textContent:Array.from(i.childNodes).map(o=>o.type===_v.Text&&o.textContent).filter(Boolean).map(o=>o.trim()).join(""),attributes:oz(i.attributes)}}:{}}}function cz(e){const{target:t,message:r}=dz(e);return $s({category:`ui.${e.name}`,...gT(t,r)})}function dz(e){const t=e.name==="click";let r,s=null;try{s=t?pT(e.event):xT(e.event),r=pr(s,{maxStringLength:200})||"<unknown>"}catch{r="<unknown>"}return{target:s,message:r}}function uz(e){return e.type===_v.Element}function hz(e,t){if(!e.isEnabled())return;e.updateUserActivity();const r=mz(t);r&&Au(e,r)}function mz(e){const{metaKey:t,shiftKey:r,ctrlKey:s,altKey:a,key:i,target:o}=e;if(!o||fz(o)||!i)return null;const d=t||s||a,u=i.length===1;if(!d&&u)return null;const h=pr(o,{maxStringLength:200})||"<unknown>",p=gT(o,h);return $s({category:"ui.keyDown",message:h,data:{...p.data,metaKey:t,shiftKey:r,ctrlKey:s,altKey:a,key:i}})}function fz(e){return e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.isContentEditable}const pz={resource:vz,paint:bz,navigation:yz};function p0(e,t){return({metric:r})=>void t.replayPerformanceEntries.push(e(r))}function xz(e){return e.map(gz).filter(Boolean)}function gz(e){const t=pz[e.entryType];return t?t(e):null}function fc(e){return((Wn()||It.performance.timeOrigin)+e)/1e3}function bz(e){const{duration:t,entryType:r,name:s,startTime:a}=e,i=fc(a);return{type:r,name:s,start:i,end:i+t,data:void 0}}function yz(e){const{entryType:t,name:r,decodedBodySize:s,duration:a,domComplete:i,encodedBodySize:o,domContentLoadedEventStart:d,domContentLoadedEventEnd:u,domInteractive:h,loadEventStart:p,loadEventEnd:f,redirectCount:x,startTime:y,transferSize:b,type:w}=e;return a===0?null:{type:`${t}.${w}`,start:fc(y),end:fc(i),name:r,data:{size:b,decodedBodySize:s,encodedBodySize:o,duration:a,domInteractive:h,domContentLoadedEventStart:d,domContentLoadedEventEnd:u,loadEventStart:p,loadEventEnd:f,domComplete:i,redirectCount:x}}}function vz(e){const{entryType:t,initiatorType:r,name:s,responseEnd:a,startTime:i,decodedBodySize:o,encodedBodySize:d,responseStatus:u,transferSize:h}=e;return["fetch","xmlhttprequest"].includes(r)?null:{type:`${t}.${r}`,start:fc(i),end:fc(a),name:s,data:{size:h,statusCode:u,decodedBodySize:o,encodedBodySize:d}}}function wz(e){const t=e.entries[e.entries.length-1],r=t!=null&&t.element?[t.element]:void 0;return jv(e,"largest-contentful-paint",r)}function _z(e){return e.sources!==void 0}function jz(e){const t=[],r=[];for(const s of e.entries)if(_z(s)){const a=[];for(const i of s.sources)if(i.node){r.push(i.node);const o=ga.mirror.getId(i.node);o&&a.push(o)}t.push({value:s.value,nodeIds:a.length?a:void 0})}return jv(e,"cumulative-layout-shift",r,t)}function Nz(e){const t=e.entries[e.entries.length-1],r=t!=null&&t.target?[t.target]:void 0;return jv(e,"interaction-to-next-paint",r)}function jv(e,t,r,s){const a=e.value,i=e.rating,o=fc(a);return{type:"web-vital",name:t,start:o,end:o,data:{value:a,size:a,rating:i,nodeIds:r?r.map(d=>ga.mirror.getId(d)):void 0,attributions:s}}}function Sz(e){function t(a){e.performanceEntries.includes(a)||e.performanceEntries.push(a)}function r({entries:a}){a.forEach(t)}const s=[];return["navigation","paint","resource"].forEach(a=>{s.push(Lo(a,r))}),s.push(ov(p0(wz,e)),iv(p0(jz,e)),pC(p0(Nz,e))),()=>{s.forEach(a=>a())}}const Ue=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,kz='var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),s=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=function(t,e){for(var i=new n(31),s=0;s<31;++s)i[s]=e+=1<<t[s-1];var a=new r(i[30]);for(s=1;s<30;++s)for(var o=i[s];o<i[s+1];++o)a[o]=o-i[s]<<5|s;return{b:i,r:a}},o=a(e,2),h=o.b,f=o.r;h[28]=258,f[258]=28;for(var l=a(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,s=0,a=new n(r);s<i;++s)t[s]&&++a[t[s]-1];var o,h=new n(r);for(s=1;s<r;++s)h[s]=h[s-1]+a[s-1]<<1;if(e){o=new n(1<<r);var f=15-r;for(s=0;s<i;++s)if(t[s])for(var l=s<<4|t[s],c=r-t[s],v=h[t[s]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>f]=l}else for(o=new n(i),s=0;s<i;++s)t[s]&&(o[s]=u[h[t[s]-1]++]>>15-t[s]);return o},p=new t(288);for(c=0;c<144;++c)p[c]=8;for(c=144;c<256;++c)p[c]=9;for(c=256;c<280;++c)p[c]=7;for(c=280;c<288;++c)p[c]=8;var g=new t(32);for(c=0;c<32;++c)g[c]=5;var w=d(p,9,0),y=d(g,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},_=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},x=function(r,e){for(var i=[],s=0;s<r.length;++s)r[s]&&i.push({s:s,f:r[s]});var a=i.length,o=i.slice();if(!a)return{t:F,l:0};if(1==a){var h=new t(i[0].s+1);return h[i[0].s]=1,{t:h,l:1}}i.sort(function(t,n){return t.f-n.f}),i.push({s:-1,f:25001});var f=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:f.f+l.f,l:f,r:l};c!=a-1;)f=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:f.f+l.f,l:f,r:l};var d=o[0].s;for(s=1;s<a;++s)o[s].s>d&&(d=o[s].s);var p=new n(d+1),g=A(i[c-1],p,0);if(g>e){s=0;var w=0,y=g-e,m=1<<y;for(o.sort(function(t,n){return p[n.s]-p[t.s]||t.f-n.f});s<a;++s){var b=o[s].s;if(!(p[b]>e))break;w+=m-(1<<g-p[b]),p[b]=e}for(w>>=y;w>0;){var M=o[s].s;p[M]<e?w-=1<<e-p[M]++-1:++s}for(;s>=0&&w;--s){var E=o[s].s;p[E]==e&&(--p[E],++w)}g=e}return{t:new t(p),l:g}},A=function(t,n,r){return-1==t.s?Math.max(A(t.l,n,r+1),A(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,s=t[0],a=1,o=function(t){e[i++]=t},h=1;h<=r;++h)if(t[h]==s&&h!=r)++a;else{if(!s&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(s),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(s);a=1,s=t[h]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var s=0;s<e;++s)t[i+s+4]=r[s];return 8*(i+4+e)},U=function(t,r,a,o,h,f,l,u,c,v,m){z(r,m++,a),++h[256];for(var b=x(h,15),M=b.t,E=b.l,A=x(f,15),U=A.t,C=A.l,F=D(M),I=F.c,S=F.n,L=D(U),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=x(q,7),H=G.t,J=G.l,K=19;K>4&&!H[s[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(h,p)+T(f,g)+l,X=T(h,M)+T(f,U)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(U,C,0),R=U;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[s[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=w,P=p,Q=y,R=g;for(B=0;B<u;++B){var rt=o[B];if(rt>255){_(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;_(r,m,Q[et]),m+=R[et],et>3&&(_(r,m,rt>>5&8191),m+=i[et])}else _(r,m,N[rt]),m+=P[rt]}return _(r,m,N[256]),m+P[256]},C=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,s=0|r.length,a=0;a!=s;){for(var o=Math.min(a+2655,s);a<o;++a)i+=e+=r[a];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},L=function(s,a,o,h,u){if(!u&&(u={l:1},a.dictionary)){var c=a.dictionary.subarray(-32768),v=new t(c.length+s.length);v.set(c),v.set(s,c.length),s=v,u.w=c.length}return function(s,a,o,h,u,c){var v=c.z||s.length,d=new t(h+v+5*(1+Math.ceil(v/7e3))+u),p=d.subarray(h,d.length-u),g=c.l,w=7&(c.r||0);if(a){w&&(p[0]=c.r>>3);for(var y=C[a-1],M=y>>13,E=8191&y,z=(1<<o)-1,_=c.p||new n(32768),x=c.h||new n(z+1),A=Math.ceil(o/3),D=2*A,T=function(t){return(s[t]^s[t+1]<<A^s[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=x[H];if(_[J]=K,x[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!g)){w=U(s,p,0,F,I,S,O,q,G,j-G,w),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(s[j+Q]==s[j+Q-W]){for(var $=0;$<Z&&s[j+$]==s[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-_[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=_[J])&32767}if(R){F[q++]=268435456|f[Q]<<18|l[R];var it=31&f[Q],st=31&l[R];O+=e[it]+i[st],++I[257+it],++S[st],B=j+Q,++L}else F[q++]=s[j],++I[s[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=s[j],++I[s[j]];w=U(s,p,g,F,I,S,O,q,G,j-G,w),g||(c.r=7&w|p[w/8|0]<<3,w-=7,c.h=x,c.p=_,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+g;j+=65535){var at=j+65535;at>=v&&(p[w/8|0]=g,at=v),w=k(p,w+1,s.subarray(j,at))}c.i=v}return b(d,0,h+m(w)+u)}(s,null==a.level?6:a.level,null==a.mem?u.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(s.length)))):20:12+a.mem,o,h,u)},O=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},j=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(L(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var s=this.b.length-this.s.z;this.b.set(n.subarray(0,s),this.s.z),this.s.z=this.b.length,this.p(this.b,!1),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(s),32768),this.s.z=n.length-s+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n.prototype.flush=function(){this.ondata||E(5),this.s.l&&E(4),this.p(this.b,!1),this.s.w=this.s.i,this.s.i-=2},n}();function q(t,n){n||(n={});var r=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}}(),e=t.length;r.p(t);var i,s=L(t,n,10+((i=n).filename?i.filename.length+1:0),8),a=s.length;return function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&O(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}}(s,n),O(s,a-8,r.d()),O(s,a-4,e),s}var B=function(){function t(t,n){this.c=S(),this.v=1,j.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),j.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=L(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=S();i.p(n.dictionary),O(t,2,i.d())}}(r,this.o),this.v=0),n&&O(r,r.length-4,this.c.d()),this.ondata(r,n)},t.prototype.flush=function(){j.prototype.flush.call(this)},t}(),G="undefined"!=typeof TextEncoder&&new TextEncoder,H="undefined"!=typeof TextDecoder&&new TextDecoder;try{H.decode(F,{stream:!0})}catch(t){}var J=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(K(t),this.d=n||!1)},t}();function K(n,r){if(G)return G.encode(n);for(var e=n.length,i=new t(n.length+(n.length>>1)),s=0,a=function(t){i[s++]=t},o=0;o<e;++o){if(s+5>i.length){var h=new t(s+8+(e-o<<1));h.set(i),i=h}var f=n.charCodeAt(o);f<128||r?a(f):f<2048?(a(192|f>>6),a(128|63&f)):f>55295&&f<57344?(a(240|(f=65536+(1047552&f)|1023&n.charCodeAt(++o))>>18),a(128|f>>12&63),a(128|f>>6&63),a(128|63&f)):(a(224|f>>12),a(128|f>>6&63),a(128|63&f))}return b(i,0,s)}const N=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(const r of t)n+=r.length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new B,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new J((t,n)=>{this.deflate.push(t,n)}),this.stream.push("[")}},P={clear:()=>{N.clear()},addEvent:t=>N.addEvent(t),finish:()=>N.finish(),compress:t=>function(t){return q(K(t))}(t)};addEventListener("message",function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in P&&"function"==typeof P[n])try{const t=P[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}}),postMessage({id:void 0,method:"init",success:!0,response:void 0});';function Ez(){const e=new Blob([kz]);return URL.createObjectURL(e)}const ES=["log","warn","error"],zm="[Replay] ";function x0(e,t="info"){Ss({category:"console",data:{logger:"replay"},level:t,message:`${zm}${e}`},{level:t})}function Cz(){let e=!1,t=!1;const r={exception:()=>{},infoTick:()=>{},setConfig:s=>{e=!!s.captureExceptions,t=!!s.traceInternals}};return Ue?(ES.forEach(s=>{r[s]=(...a)=>{Y[s](zm,...a),t&&x0(a.join(""),xf(s))}}),r.exception=(s,...a)=>{a.length&&r.error&&r.error(...a),Y.error(zm,s),e?mt(s,{mechanism:{handled:!0,type:"auto.function.replay.debug"}}):t&&x0(s,"error")},r.infoTick=(...s)=>{Y.log(zm,...s),t&&setTimeout(()=>x0(s[0]),0)}):ES.forEach(s=>{r[s]=()=>{}}),r}const qe=Cz();class Nv extends Error{constructor(){super(`Event buffer exceeded maximum size of ${pv}.`)}}class bT{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1,this.waitForCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(t){const r=JSON.stringify(t).length;if(this._totalSize+=r,this._totalSize>pv)throw new Nv;this.events.push(t)}finish(){return new Promise(t=>{const r=this.events;this.clear(),t(JSON.stringify(r))})}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){const t=this.events.map(r=>r.timestamp).sort()[0];return t?wv(t):null}}class Tz{constructor(t){this._worker=t,this._id=0}ensureReady(){return this._ensureReadyPromise?this._ensureReadyPromise:(this._ensureReadyPromise=new Promise((t,r)=>{this._worker.addEventListener("message",({data:s})=>{s.success?t():r()},{once:!0}),this._worker.addEventListener("error",s=>{r(s)},{once:!0})}),this._ensureReadyPromise)}destroy(){Ue&&qe.log("Destroying compression worker"),this._worker.terminate()}postMessage(t,r){const s=this._getAndIncrementId();return new Promise((a,i)=>{const o=({data:d})=>{const u=d;if(u.method===t&&u.id===s){if(this._worker.removeEventListener("message",o),!u.success){Ue&&qe.error("Error in compression worker: ",u.response),i(new Error("Error in compression worker"));return}a(u.response)}};this._worker.addEventListener("message",o),this._worker.postMessage({id:s,method:t,arg:r})})}_getAndIncrementId(){return this._id++}}class Rz{constructor(t){this._worker=new Tz(t),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this.waitForCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(t){const r=wv(t.timestamp);(!this._earliestTimestamp||r<this._earliestTimestamp)&&(this._earliestTimestamp=r);const s=JSON.stringify(t);return this._totalSize+=s.length,this._totalSize>pv?Promise.reject(new Nv):this._sendEventToWorker(s)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,t=>{Ue&&qe.exception(t,'Sending "clear" message to worker failed',t)})}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(t){return this._worker.postMessage("addEvent",t)}async _finishRequest(){const t=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,t}}class Iz{constructor(t){this._fallback=new bT,this._compression=new Rz(t),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get waitForCheckout(){return this._used.waitForCheckout}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(t){this._used.hasCheckout=t}set waitForCheckout(t){this._used.waitForCheckout=t}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(t){return this._used.addEvent(t)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch(t){Ue&&qe.exception(t,"Failed to load the compression worker, falling back to simple buffer");return}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){const{events:t,hasCheckout:r,waitForCheckout:s}=this._fallback,a=[];for(const i of t)a.push(this._compression.addEvent(i));this._compression.hasCheckout=r,this._compression.waitForCheckout=s,this._used=this._compression;try{await Promise.all(a),this._fallback.clear()}catch(i){Ue&&qe.exception(i,"Failed to add events when switching buffers.")}}}function Pz({useCompression:e,workerUrl:t}){if(e&&window.Worker){const r=Az(t);if(r)return r}return Ue&&qe.log("Using simple buffer"),new bT}function Az(e){try{const t=e||Mz();if(!t)return;Ue&&qe.log(`Using compression worker${e?` from ${e}`:""}`);const r=new Worker(t);return new Iz(r)}catch(t){Ue&&qe.exception(t,"Failed to create compression worker")}}function Mz(){return typeof __SENTRY_EXCLUDE_REPLAY_WORKER__>"u"||!__SENTRY_EXCLUDE_REPLAY_WORKER__?Ez():""}function Sv(){try{return"sessionStorage"in It&&!!It.sessionStorage}catch{return!1}}function Oz(e){Lz(),e.session=void 0}function Lz(){if(Sv())try{It.sessionStorage.removeItem(mv)}catch{}}function yT(e){return e===void 0?!1:Math.random()<e}function wp(e){if(Sv())try{It.sessionStorage.setItem(mv,JSON.stringify(e))}catch{}}function vT(e){const t=Date.now(),r=e.id||gn(),s=e.started||t,a=e.lastActivity||t,i=e.segmentId||0,o=e.sampled,d=e.previousSessionId,u=e.dirty||!1;return{id:r,started:s,lastActivity:a,segmentId:i,sampled:o,previousSessionId:d,dirty:u}}function $z(e,t){return yT(e)?"session":t?"buffer":!1}function CS({sessionSampleRate:e,allowBuffering:t,stickySession:r=!1},{previousSessionId:s}={}){const a=$z(e,t),i=vT({sampled:a,previousSessionId:s});return r&&wp(i),i}function Dz(){if(!Sv())return null;try{const e=It.sessionStorage.getItem(mv);if(!e)return null;const t=JSON.parse(e);return Ue&&qe.infoTick("Loading existing session"),vT(t)}catch{return null}}function Db(e,t,r=+new Date){return e===null||t===void 0||t<0?!0:t===0?!1:e+t<=r}function wT(e,{maxReplayDuration:t,sessionIdleExpire:r,targetTime:s=Date.now()}){return Db(e.started,t,s)||Db(e.lastActivity,r,s)}function _T(e,{sessionIdleExpire:t,maxReplayDuration:r}){return!(!wT(e,{sessionIdleExpire:t,maxReplayDuration:r})||e.sampled==="buffer"&&e.segmentId===0)}function g0({sessionIdleExpire:e,maxReplayDuration:t,previousSessionId:r},s){const a=s.stickySession&&Dz();return a?_T(a,{sessionIdleExpire:e,maxReplayDuration:t})?(Ue&&qe.infoTick("Session in sessionStorage is expired, creating new one..."),CS(s,{previousSessionId:a.id})):a:(Ue&&qe.infoTick("Creating new session"),CS(s,{previousSessionId:r}))}function Fz(e){return e.type===Ze.Custom}function kv(e,t,r){return NT(e,t)?(jT(e,t,r),!0):!1}function Uz(e,t,r){return NT(e,t)?jT(e,t,r):Promise.resolve(null)}async function jT(e,t,r){const{eventBuffer:s}=e;if(!s||s.waitForCheckout&&!r)return null;const a=e.recordingMode==="buffer";try{r&&a&&s.clear(),r&&(s.hasCheckout=!0,s.waitForCheckout=!1);const i=e.getOptions(),o=qz(t,i.beforeAddRecordingEvent);return o?await s.addEvent(o):void 0}catch(i){const o=i&&i instanceof Nv,d=o?"addEventSizeExceeded":"addEvent",u=be();if(u){const h=o?"buffer_overflow":"internal_sdk_error";u.recordDroppedEvent(h,"replay")}if(o&&a)return s.clear(),s.waitForCheckout=!0,null;e.handleException(i),await e.stop({reason:d})}}function NT(e,t){if(!e.eventBuffer||e.isPaused()||!e.isEnabled())return!1;const r=wv(t.timestamp);return r+e.timeouts.sessionIdlePause<Date.now()?!1:r>e.getContext().initialTimestamp+e.getOptions().maxReplayDuration?(Ue&&qe.infoTick(`Skipping event with timestamp ${r} because it is after maxReplayDuration`),!1):!0}function qz(e,t){try{if(typeof t=="function"&&Fz(e))return t(e)}catch(r){return Ue&&qe.exception(r,"An error occurred in the `beforeAddRecordingEvent` callback, skipping the event..."),null}return e}function Ev(e){return!e.type}function Fb(e){return e.type==="transaction"}function Bz(e){return e.type==="replay_event"}function TS(e){return e.type==="feedback"}function Hz(e){return(t,r)=>{if(!e.isEnabled()||!Ev(t)&&!Fb(t))return;const s=r.statusCode;if(!(!s||s<200||s>=300)){if(Fb(t)){Wz(e,t);return}zz(e,t)}}}function Wz(e,t){var s,a;const r=e.getContext();(a=(s=t.contexts)==null?void 0:s.trace)!=null&&a.trace_id&&r.traceIds.size<100&&r.traceIds.add(t.contexts.trace.trace_id)}function zz(e,t){const r=e.getContext();if(t.event_id&&r.errorIds.size<100&&r.errorIds.add(t.event_id),e.recordingMode!=="buffer"||!t.tags||!t.tags.replayId)return;const{beforeErrorSampling:s}=e.getOptions();typeof s=="function"&&!s(t)||Iu(async()=>{try{await e.sendBufferedReplayOrFlush()}catch(a){e.handleException(a)}})}function Gz(e){return t=>{!e.isEnabled()||!Ev(t)||Kz(e,t)}}function Kz(e,t){var s,a,i;const r=(i=(a=(s=t.exception)==null?void 0:s.values)==null?void 0:a[0])==null?void 0:i.value;if(typeof r=="string"&&(r.match(/(reactjs\.org\/docs\/error-decoder\.html\?invariant=|react\.dev\/errors\/)(418|419|422|423|425)/)||r.match(/(does not match server-rendered HTML|Hydration failed because)/i))){const o=$s({category:"replay.hydrate-error",data:{url:Uo()}});Au(e,o)}}function Vz(e){const t=be();t&&t.on("beforeAddBreadcrumb",r=>Yz(e,r))}function Yz(e,t){if(!e.isEnabled()||!ST(t))return;const r=Jz(t);r&&Au(e,r)}function Jz(e){return!ST(e)||["fetch","xhr","sentry.event","sentry.transaction"].includes(e.category)||e.category.startsWith("ui.")?null:e.category==="console"?Qz(e):$s(e)}function Qz(e){var a;const t=(a=e.data)==null?void 0:a.arguments;if(!Array.isArray(t)||t.length===0)return $s(e);let r=!1;const s=t.map(i=>{if(!i)return i;if(typeof i=="string")return i.length>fm?(r=!0,`${i.slice(0,fm)}`):i;if(typeof i=="object")try{const o=kr(i,7);return JSON.stringify(o).length>fm?(r=!0,`${JSON.stringify(o,null,2).slice(0,fm)}`):o}catch{}return i});return $s({...e,data:{...e.data,arguments:s,...r?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}function ST(e){return!!e.category}function Xz(e,t){var r,s,a;return e.type||!((s=(r=e.exception)==null?void 0:r.values)!=null&&s.length)?!1:!!((a=t.originalException)!=null&&a.__rrweb__)}function kT(){const e=We().getPropagationContext().dsc;e&&delete e.replay_id;const t=Vt();if(t){const r=Ns(t);delete r.replay_id}}function Zz(e,t){e.triggerUserActivity(),e.addUpdate(()=>t.timestamp?(e.throttledAddEvent({type:Ze.Custom,timestamp:t.timestamp*1e3,data:{tag:"breadcrumb",payload:{timestamp:t.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:t.event_id}}}}),!1):!0)}function eG(e,t){return e.recordingMode!=="buffer"||t.message===fv||!t.exception||t.type?!1:yT(e.getOptions().errorSampleRate)}function tG(e){return Object.assign((t,r)=>{var o;if(!e.isEnabled()||e.isPaused())return t;if(Bz(t))return delete t.breadcrumbs,t;if(!Ev(t)&&!Fb(t)&&!TS(t))return t;if(!e.checkAndHandleExpiredSession())return kT(),t;if(TS(t))return e.flush(),t.contexts.feedback.replay_id=e.getSessionId(),Zz(e,t),t;if(Xz(t,r)&&!e.getOptions()._experiments.captureExceptions)return Ue&&qe.log("Ignoring error from rrweb internals",t),null;const a=eG(e,t);if((a||e.recordingMode==="session")&&(t.tags={...t.tags,replayId:e.getSessionId()}),a&&e.recordingMode==="buffer"&&((o=e.session)==null?void 0:o.sampled)==="buffer"){const d=e.session;d.dirty=!0,e.getOptions().stickySession&&wp(d)}return t},{id:"Replay"})}function _p(e,t){return t.map(({type:r,start:s,end:a,name:i,data:o})=>{const d=e.throttledAddEvent({type:Ze.Custom,timestamp:s,data:{tag:"performanceSpan",payload:{op:r,description:i,startTimestamp:s,endTimestamp:a,data:o}}});return typeof d=="string"?Promise.resolve(null):d})}function nG(e){const{from:t,to:r}=e,s=Date.now()/1e3;return{type:"navigation.push",start:s,end:s,name:r,data:{previous:t}}}function rG(e){return t=>{if(!e.isEnabled())return;const r=nG(t);r!==null&&(e.getContext().urls.push(r.name),e.triggerUserActivity(),e.addUpdate(()=>(_p(e,[r]),!1)))}}function sG(e,t){return Ue&&e.getOptions()._experiments.traceInternals?!1:i5(t,be())}function ET(e,t){e.isEnabled()&&t!==null&&(sG(e,t.name)||e.addUpdate(()=>(_p(e,[t]),!0)))}function jp(e){if(!e)return;const t=new TextEncoder;try{if(typeof e=="string")return t.encode(e).length;if(e instanceof URLSearchParams)return t.encode(e.toString()).length;if(e instanceof FormData){const r=_C(e);return t.encode(r).length}if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength}catch{}}function CT(e){if(!e)return;const t=parseInt(e,10);return isNaN(t)?void 0:t}function Af(e,t){if(!e)return{headers:{},size:void 0,_meta:{warnings:[t]}};const r={...e._meta},s=r.warnings||[];return r.warnings=[...s,t],e._meta=r,e}function TT(e,t){if(!t)return null;const{startTimestamp:r,endTimestamp:s,url:a,method:i,statusCode:o,request:d,response:u}=t;return{type:e,start:r/1e3,end:s/1e3,name:a,data:{method:i,statusCode:o,request:d,response:u}}}function su(e){return{headers:{},size:e,_meta:{warnings:["URL_SKIPPED"]}}}function pi(e,t,r){if(!t&&Object.keys(e).length===0)return;if(!t)return{headers:e};if(!r)return{headers:e,size:t};const s={headers:e,size:t},{body:a,warnings:i}=aG(r);return s.body=a,i!=null&&i.length&&(s._meta={warnings:i}),s}function Ub(e,t){return Object.entries(e).reduce((r,[s,a])=>{const i=s.toLowerCase();return t.includes(i)&&e[s]&&(r[i]=a),r},{})}function aG(e){if(!e||typeof e!="string")return{body:e};const t=e.length>cS,r=iG(e);if(t){const s=e.slice(0,cS);return r?{body:s,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${s}`,warnings:["TEXT_TRUNCATED"]}}if(r)try{return{body:JSON.parse(e)}}catch{}return{body:e}}function iG(e){const t=e[0],r=e[e.length-1];return t==="["&&r==="]"||t==="{"&&r==="}"}function Mf(e,t){const r=oG(e);return vs(r,t)}function oG(e,t=It.document.baseURI){if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith(It.location.origin))return e;const r=new URL(e,t);if(r.origin!==new URL(t).origin)return e;const s=r.href;return!e.endsWith("/")&&s.endsWith("/")?s.slice(0,-1):s}async function lG(e,t,r){try{const s=await dG(e,t,r),a=TT("resource.fetch",s);ET(r.replay,a)}catch(s){Ue&&qe.exception(s,"Failed to capture fetch breadcrumb")}}function cG(e,t){const{input:r,response:s}=t,a=r?uv(r):void 0,i=jp(a),o=s?CT(s.headers.get("content-length")):void 0;i!==void 0&&(e.data.request_body_size=i),o!==void 0&&(e.data.response_body_size=o)}async function dG(e,t,r){const s=Date.now(),{startTimestamp:a=s,endTimestamp:i=s}=t,{url:o,method:d,status_code:u=0,request_body_size:h,response_body_size:p}=e.data,f=Mf(o,r.networkDetailAllowUrls)&&!Mf(o,r.networkDetailDenyUrls),x=f?uG(r,t.input,h):su(h),y=await hG(f,r,t.response,p);return{startTimestamp:a,endTimestamp:i,url:o,method:d,statusCode:u,request:x,response:y}}function uG({networkCaptureBodies:e,networkRequestHeaders:t},r,s){const a=r?pG(r,t):{};if(!e)return pi(a,s,void 0);const i=uv(r),[o,d]=kf(i,qe),u=pi(a,s,o);return d?Af(u,d):u}async function hG(e,{networkCaptureBodies:t,networkResponseHeaders:r},s,a){if(!e&&a!==void 0)return su(a);const i=s?RT(s.headers,r):{};if(!s||!t&&a!==void 0)return pi(i,a,void 0);const[o,d]=await fG(s),u=mG(o,{networkCaptureBodies:t,responseBodySize:a,captureDetails:e,headers:i});return d?Af(u,d):u}function mG(e,{networkCaptureBodies:t,responseBodySize:r,captureDetails:s,headers:a}){try{const i=e!=null&&e.length&&r===void 0?jp(e):r;return s?t?pi(a,i,e):pi(a,i,void 0):su(i)}catch(i){return Ue&&qe.exception(i,"Failed to serialize response body"),pi(a,r,void 0)}}async function fG(e){const t=xG(e);if(!t)return[void 0,"BODY_PARSE_ERROR"];try{return[await gG(t)]}catch(r){return r instanceof Error&&r.message.indexOf("Timeout")>-1?(Ue&&qe.warn("Parsing text body from response timed out"),[void 0,"BODY_PARSE_TIMEOUT"]):(Ue&&qe.exception(r,"Failed to get text body from response"),[void 0,"BODY_PARSE_ERROR"])}}function RT(e,t){const r={};return t.forEach(s=>{e.get(s)&&(r[s]=e.get(s))}),r}function pG(e,t){return e.length===1&&typeof e[0]!="string"?RS(e[0],t):e.length===2?RS(e[1],t):{}}function RS(e,t){if(!e)return{};const r=e.headers;return r?r instanceof Headers?RT(r,t):Array.isArray(r)?{}:Ub(r,t):{}}function xG(e){try{return e.clone()}catch(t){Ue&&qe.exception(t,"Failed to clone response body")}}function gG(e){return new Promise((t,r)=>{const s=Iu(()=>r(new Error("Timeout while trying to read response body")),500);bG(e).then(a=>t(a),a=>r(a)).finally(()=>clearTimeout(s))})}async function bG(e){return await e.text()}async function yG(e,t,r){try{const s=wG(e,t,r),a=TT("resource.xhr",s);ET(r.replay,a)}catch(s){Ue&&qe.exception(s,"Failed to capture xhr breadcrumb")}}function vG(e,t){const{xhr:r,input:s}=t;if(!r)return;const a=jp(s),i=r.getResponseHeader("content-length")?CT(r.getResponseHeader("content-length")):NG(r.response,r.responseType);a!==void 0&&(e.data.request_body_size=a),i!==void 0&&(e.data.response_body_size=i)}function wG(e,t,r){const s=Date.now(),{startTimestamp:a=s,endTimestamp:i=s,input:o,xhr:d}=t,{url:u,method:h,status_code:p=0,request_body_size:f,response_body_size:x}=e.data;if(!u)return null;if(!d||!Mf(u,r.networkDetailAllowUrls)||Mf(u,r.networkDetailDenyUrls)){const E=su(f),I=su(x);return{startTimestamp:a,endTimestamp:i,url:u,method:h,statusCode:p,request:E,response:I}}const y=d[ua],b=y?Ub(y.request_headers,r.networkRequestHeaders):{},w=Ub(jC(d),r.networkResponseHeaders),[v,j]=r.networkCaptureBodies?kf(o,qe):[void 0],[C,S]=r.networkCaptureBodies?_G(d):[void 0],k=pi(b,f,v),R=pi(w,x,C);return{startTimestamp:a,endTimestamp:i,url:u,method:h,statusCode:p,request:j?Af(k,j):k,response:S?Af(R,S):R}}function _G(e){const t=[];try{return[e.responseText]}catch(r){t.push(r)}try{return jG(e.response,e.responseType)}catch(r){t.push(r)}return Ue&&qe.warn("Failed to get xhr response body",...t),[void 0]}function jG(e,t){try{if(typeof e=="string")return[e];if(e instanceof Document)return[e.body.outerHTML];if(t==="json"&&e&&typeof e=="object")return[JSON.stringify(e)];if(!e)return[void 0]}catch(r){return Ue&&qe.exception(r,"Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return Ue&&qe.log("Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function NG(e,t){try{const r=t==="json"&&e&&typeof e=="object"?JSON.stringify(e):e;return jp(r)}catch{return}}function SG(e){const t=be();try{const{networkDetailAllowUrls:r,networkDetailDenyUrls:s,networkCaptureBodies:a,networkRequestHeaders:i,networkResponseHeaders:o}=e.getOptions(),d={replay:e,networkDetailAllowUrls:r,networkDetailDenyUrls:s,networkCaptureBodies:a,networkRequestHeaders:i,networkResponseHeaders:o};t&&t.on("beforeAddBreadcrumb",(u,h)=>kG(d,u,h))}catch{}}function kG(e,t,r){if(t.data)try{EG(t)&&TG(r)&&(vG(t,r),yG(t,r,e)),CG(t)&&RG(r)&&(cG(t,r),lG(t,r,e))}catch(s){Ue&&qe.exception(s,"Error when enriching network breadcrumb")}}function EG(e){return e.category==="xhr"}function CG(e){return e.category==="fetch"}function TG(e){return e==null?void 0:e.xhr}function RG(e){return e==null?void 0:e.response}function IG(e){const t=be();wC(lz(e)),pp(rG(e)),Vz(e),SG(e);const r=tG(e);FE(r),t&&(t.on("beforeSendEvent",Gz(e)),t.on("afterSendEvent",Hz(e)),t.on("createDsc",s=>{const a=e.getSessionId();a&&e.isEnabled()&&e.recordingMode==="session"&&e.checkAndHandleExpiredSession()&&(s.replay_id=a)}),t.on("spanStart",s=>{e.lastActiveSpan=s}),t.on("spanEnd",s=>{e.lastActiveSpan=s}),t.on("beforeSendFeedback",async(s,a)=>{var o;const i=e.getSessionId();a!=null&&a.includeReplay&&e.isEnabled()&&i&&((o=s.contexts)!=null&&o.feedback)&&(s.contexts.feedback.source==="api"&&await e.sendBufferedReplayOrFlush(),s.contexts.feedback.replay_id=i)}),t.on("openFeedbackWidget",async()=>{await e.sendBufferedReplayOrFlush()}))}async function PG(e){try{return Promise.all(_p(e,[AG(It.performance.memory)]))}catch{return[]}}function AG(e){const{jsHeapSizeLimit:t,totalJSHeapSize:r,usedJSHeapSize:s}=e,a=Date.now()/1e3;return{type:"memory",name:"memory",start:a,end:a,data:{memory:{jsHeapSizeLimit:t,totalJSHeapSize:r,usedJSHeapSize:s}}}}function MG(e,t,r){return o$(e,t,{...r,setTimeoutImpl:Iu})}const Hr=Me.navigator;function OG(){return/iPhone|iPad|iPod/i.test((Hr==null?void 0:Hr.userAgent)??"")||/Macintosh/i.test((Hr==null?void 0:Hr.userAgent)??"")&&(Hr!=null&&Hr.maxTouchPoints)&&(Hr==null?void 0:Hr.maxTouchPoints)>1?{sampling:{mousemove:!1}}:{}}function LG(e){let t=!1;return(r,s)=>{if(!e.checkAndHandleExpiredSession()){Ue&&qe.warn("Received replay event after session expired.");return}const a=s||!t;t=!0,e.clickDetector&&rz(e.clickDetector,r),e.addUpdate(()=>{if(e.recordingMode==="buffer"&&a&&e.setInitialState(),!kv(e,r,a))return!0;if(!a)return!1;const i=e.session;if(DG(e,a),e.recordingMode==="buffer"&&i&&e.eventBuffer&&!i.dirty){const o=e.eventBuffer.getEarliestTimestamp();o&&(Ue&&qe.log(`Updating session start time to earliest event in buffer to ${new Date(o)}`),i.started=o,e.getOptions().stickySession&&wp(i))}return i!=null&&i.previousSessionId||e.recordingMode==="session"&&e.flush(),!0})}}function $G(e){const t=e.getOptions();return{type:Ze.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:e.isRecordingCanvas(),sessionSampleRate:t.sessionSampleRate,errorSampleRate:t.errorSampleRate,useCompressionOption:t.useCompression,blockAllMedia:t.blockAllMedia,maskAllText:t.maskAllText,maskAllInputs:t.maskAllInputs,useCompression:e.eventBuffer?e.eventBuffer.type==="worker":!1,networkDetailHasUrls:t.networkDetailAllowUrls.length>0,networkCaptureBodies:t.networkCaptureBodies,networkRequestHasHeaders:t.networkRequestHeaders.length>0,networkResponseHasHeaders:t.networkResponseHeaders.length>0}}}}function DG(e,t){!t||!e.session||e.session.segmentId!==0||kv(e,$G(e),!1)}function FG(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch{return null}}function UG(e,t,r,s){return Es(CE(e,Jf(e),s,r),[[{type:"replay_event"},e],[{type:"replay_recording",length:typeof t=="string"?new TextEncoder().encode(t).length:t.length},t]])}function qG({recordingData:e,headers:t}){let r;const s=`${JSON.stringify(t)}
`;if(typeof e=="string")r=`${s}${e}`;else{const i=new TextEncoder().encode(s);r=new Uint8Array(i.length+e.length),r.set(i),r.set(e,i.length)}return r}async function BG({client:e,scope:t,replayId:r,event:s}){const a=typeof e._integrations=="object"&&e._integrations!==null&&!Array.isArray(e._integrations)?Object.keys(e._integrations):void 0,i={event_id:r,integrations:a};e.emit("preprocessEvent",s,i);const o=await OE(e.getOptions(),s,i,t,e,hn());if(!o)return null;e.emit("postprocessEvent",o,i),o.platform=o.platform||"javascript";const d=e.getSdkMetadata(),{name:u,version:h,settings:p}=(d==null?void 0:d.sdk)||{};return o.sdk={...o.sdk,name:u||"sentry.javascript.unknown",version:h||"0.0.0",settings:p},o}async function HG({recordingData:e,replayId:t,segmentId:r,eventContext:s,timestamp:a,session:i}){const o=qG({recordingData:e,headers:{segment_id:r}}),{urls:d,errorIds:u,traceIds:h,initialTimestamp:p}=s,f=be(),x=We(),y=f==null?void 0:f.getTransport(),b=f==null?void 0:f.getDsn();if(!f||!y||!b||!i.sampled)return Promise.resolve({});const w={type:yH,replay_start_timestamp:p/1e3,timestamp:a/1e3,error_ids:u,trace_ids:h,urls:d,replay_id:t,segment_id:r,replay_type:i.sampled},v=await BG({scope:x,client:f,replayId:t,event:w});if(!v)return f.recordDroppedEvent("event_processor","replay"),Ue&&qe.log("An event processor returned `null`, will not send event."),Promise.resolve({});delete v.sdkProcessingMetadata;const j=UG(v,o,b,f.getOptions().tunnel);let C;try{C=await y.send(j)}catch(k){const R=new Error(fv);try{R.cause=k}catch{}throw R}if(typeof C.statusCode=="number"&&(C.statusCode<200||C.statusCode>=300))throw new IT(C.statusCode);const S=YE({},C);if(VE(S,"replay"))throw new Cv(S);return C}class IT extends Error{constructor(t){super(`Transport returned status code ${t}`)}}class Cv extends Error{constructor(t){super("Rate limit hit"),this.rateLimits=t}}async function PT(e,t={count:0,interval:SH}){const{recordingData:r,onError:s}=e;if(r.length)try{return await HG(e),!0}catch(a){if(a instanceof IT||a instanceof Cv)throw a;if(Cy("Replays",{_retryCount:t.count}),s&&s(a),t.count>=kH){const i=new Error(`${fv} - max retries exceeded`);try{i.cause=a}catch{}throw i}return t.interval*=++t.count,new Promise((i,o)=>{Iu(async()=>{try{await PT(e,t),i(!0)}catch(d){o(d)}},t.interval)})}}const AT="__THROTTLED",WG="__SKIPPED";function zG(e,t,r){const s=new Map,a=d=>{const u=d-r;s.forEach((h,p)=>{p<u&&s.delete(p)})},i=()=>[...s.values()].reduce((d,u)=>d+u,0);let o=!1;return(...d)=>{const u=Math.floor(Date.now()/1e3);if(a(u),i()>=t){const p=o;return o=!0,p?WG:AT}o=!1;const h=s.get(u)||0;return s.set(u,h+1),e(...d)}}class GG{constructor({options:t,recordingOptions:r}){this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:vH,sessionIdleExpire:wH},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._requiresManualStart=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=r,this._options=t,this._debouncedFlush=MG(()=>this._flush(),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=zG((o,d)=>Uz(this,o,d),300,5);const{slowClickTimeout:s,slowClickIgnoreSelectors:a}=this.getOptions(),i=s?{threshold:Math.min(EH,s),timeout:s,scrollTimeout:CH,ignoreSelector:a?a.join(","):""}:void 0;if(i&&(this.clickDetector=new ZW(this,i)),Ue){const o=t._experiments;qe.setConfig({captureExceptions:!!o.captureExceptions,traceInternals:!!o.traceInternals})}this._handleVisibilityChange=()=>{It.document.visibilityState==="visible"?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()},this._handleWindowBlur=()=>{const o=$s({category:"ui.blur"});this._doChangeToBackgroundTasks(o)},this._handleWindowFocus=()=>{const o=$s({category:"ui.focus"});this._doChangeToForegroundTasks(o)},this._handleKeyboardEvent=o=>{hz(this,o)}}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return!!this._canvas}getOptions(){return this._options}handleException(t){Ue&&qe.exception(t),this._options.onError&&this._options.onError(t)}initializeSampling(t){const{errorSampleRate:r,sessionSampleRate:s}=this._options,a=r<=0&&s<=0;if(this._requiresManualStart=a,!a){if(this._initializeSessionForSampling(t),!this.session){Ue&&qe.exception(new Error("Unable to initialize and create session"));return}this.session.sampled!==!1&&(this.recordingMode=this.session.sampled==="buffer"&&this.session.segmentId===0?"buffer":"session",Ue&&qe.infoTick(`Starting replay in ${this.recordingMode} mode`),this._initializeRecording())}}start(){if(this._isEnabled&&this.recordingMode==="session"){Ue&&qe.log("Recording is already in progress");return}if(this._isEnabled&&this.recordingMode==="buffer"){Ue&&qe.log("Buffering is in progress, call `flush()` to save the replay");return}Ue&&qe.infoTick("Starting replay in session mode"),this._updateUserActivity();const t=g0({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=t,this.recordingMode="session",this._initializeRecording()}startBuffering(){if(this._isEnabled){Ue&&qe.log("Buffering is in progress, call `flush()` to save the replay");return}Ue&&qe.infoTick("Starting replay in buffer mode");const t=g0({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=t,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{const t=this._canvas;this._stopRecording=ga({...this._recordingOptions,...this.recordingMode==="buffer"?{checkoutEveryNms:NH}:this._options._experiments.continuousCheckout&&{checkoutEveryNms:Math.max(36e4,this._options._experiments.continuousCheckout)},emit:LG(this),...OG(),onMutation:this._onMutationHandler.bind(this),...t?{recordCanvas:t.recordCanvas,getCanvasManager:t.getCanvasManager,sampling:t.sampling,dataURLOptions:t.dataURLOptions}:{}})}catch(t){this.handleException(t)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(t){return this.handleException(t),!1}}async stop({forceFlush:t=!1,reason:r}={}){var s;if(this._isEnabled){this._isEnabled=!1,this.recordingMode="buffer";try{Ue&&qe.log(`Stopping Replay${r?` triggered by ${r}`:""}`),kT(),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),t&&await this._flush({force:!0}),(s=this.eventBuffer)==null||s.destroy(),this.eventBuffer=null,Oz(this)}catch(a){this.handleException(a)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),Ue&&qe.log("Pausing replay"))}resume(){!this._isPaused||!this._checkSession()||(this._isPaused=!1,this.startRecording(),Ue&&qe.log("Resuming replay"))}async sendBufferedReplayOrFlush({continueRecording:t=!0}={}){if(this.recordingMode==="session")return this.flushImmediate();const r=Date.now();Ue&&qe.log("Converting buffer to session"),await this.flushImmediate();const s=this.stopRecording();!t||!s||this.recordingMode!=="session"&&(this.recordingMode="session",this.session&&(this.session.dirty=!1,this._updateUserActivity(r),this._updateSessionActivity(r),this._maybeSaveSession()),this.startRecording())}addUpdate(t){const r=t();this.recordingMode==="buffer"||!this._isEnabled||r!==!0&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),!this._stopRecording){if(!this._checkSession())return;this.resume();return}this.checkAndHandleExpiredSession(),this._updateSessionActivity()}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return this.recordingMode==="buffer"?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(t){var r,s;if(!(t&&((r=this.session)==null?void 0:r.sampled)===!1))return(s=this.session)==null?void 0:s.id}checkAndHandleExpiredSession(){if(this._lastActivity&&Db(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&this.session.sampled==="session"){this.pause();return}return!!this._checkSession()}setInitialState(){const t=`${It.location.pathname}${It.location.hash}${It.location.search}`,r=`${It.location.origin}${t}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=r,this._context.initialTimestamp=Date.now(),this._context.urls.push(r)}throttledAddEvent(t,r){const s=this._throttledAddEvent(t,r);if(s===AT){const a=$s({category:"replay.throttled"});this.addUpdate(()=>!kv(this,{type:GW,timestamp:a.timestamp||0,data:{tag:"breadcrumb",payload:a,metric:!0}}))}return s}getCurrentRoute(){const t=this.lastActiveSpan||Vt(),r=t&&Kt(t),a=(r&&Re(r).data||{})[xt];if(!(!r||!a||!["route","custom"].includes(a)))return Re(r).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=Pz({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_initializeSessionForSampling(t){const r=this._options.errorSampleRate>0,s=g0({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,previousSessionId:t},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:r});this.session=s}_checkSession(){if(!this.session)return!1;const t=this.session;return _T(t,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})?(this._refreshSession(t),!1):!0}async _refreshSession(t){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(t.id))}_addListeners(){try{It.document.addEventListener("visibilitychange",this._handleVisibilityChange),It.addEventListener("blur",this._handleWindowBlur),It.addEventListener("focus",this._handleWindowFocus),It.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(IG(this),this._hasInitializedCoreListeners=!0)}catch(t){this.handleException(t)}this._performanceCleanupCallback=Sz(this)}_removeListeners(){try{It.document.removeEventListener("visibilitychange",this._handleVisibilityChange),It.removeEventListener("blur",this._handleWindowBlur),It.removeEventListener("focus",this._handleWindowFocus),It.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(t){this.handleException(t)}}_doChangeToBackgroundTasks(t){!this.session||wT(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(t&&this._createCustomBreadcrumb(t),this.conditionalFlush())}_doChangeToForegroundTasks(t){if(!this.session)return;if(!this.checkAndHandleExpiredSession()){Ue&&qe.log("Document has become active, but session has expired");return}t&&this._createCustomBreadcrumb(t)}_updateUserActivity(t=Date.now()){this._lastActivity=t}_updateSessionActivity(t=Date.now()){this.session&&(this.session.lastActivity=t,this._maybeSaveSession())}_createCustomBreadcrumb(t){this.addUpdate(()=>{this.throttledAddEvent({type:Ze.Custom,timestamp:t.timestamp||0,data:{tag:"breadcrumb",payload:t}})})}_addPerformanceEntries(){let t=xz(this.performanceEntries).concat(this.replayPerformanceEntries);if(this.performanceEntries=[],this.replayPerformanceEntries=[],this._requiresManualStart){const r=this._context.initialTimestamp/1e3;t=t.filter(s=>s.start>=r)}return Promise.all(_p(this,t))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:t,eventBuffer:r}=this;if(!t||!r||this._requiresManualStart||t.segmentId)return;const s=r.getEarliestTimestamp();s&&s<this._context.initialTimestamp&&(this._context.initialTimestamp=s)}_popEventContext(){const t={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),t}async _runFlush(){var r;const t=this.getSessionId();if(!this.session||!this.eventBuffer||!t){Ue&&qe.error("No session or eventBuffer found to flush.");return}if(await this._addPerformanceEntries(),!!((r=this.eventBuffer)!=null&&r.hasEvents)&&(await PG(this),!!this.eventBuffer&&t===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();const s=Date.now();if(s-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");const a=this._popEventContext(),i=this.session.segmentId++;this._maybeSaveSession();const o=await this.eventBuffer.finish();await PT({replayId:t,recordingData:o,segmentId:i,eventContext:a,session:this.session,timestamp:s,onError:d=>this.handleException(d)})}catch(s){this.handleException(s),this.stop({reason:"sendReplay"});const a=be();if(a){const i=s instanceof Cv?"ratelimit_backoff":"send_error";a.recordDroppedEvent(i,"replay")}}}async _flush({force:t=!1}={}){if(!this._isEnabled&&!t)return;if(!this.checkAndHandleExpiredSession()){Ue&&qe.error("Attempting to finish replay event after session expired.");return}if(!this.session)return;const r=this.session.started,a=Date.now()-r;this._debouncedFlush.cancel();const i=a<this._options.minReplayDuration,o=a>this._options.maxReplayDuration+5e3;if(i||o){Ue&&qe.log(`Session duration (${Math.floor(a/1e3)}s) is too ${i?"short":"long"}, not sending replay.`),i&&this._debouncedFlush();return}const d=this.eventBuffer;d&&this.session.segmentId===0&&!d.hasCheckout&&Ue&&qe.log("Flushing initial segment without checkout.");const u=!!this._flushLock;this._flushLock||(this._flushLock=this._runFlush());try{await this._flushLock}catch(h){this.handleException(h)}finally{this._flushLock=void 0,u&&this._debouncedFlush()}}_maybeSaveSession(){this.session&&this._options.stickySession&&wp(this.session)}_onMutationHandler(t){const{ignoreMutations:r}=this._options._experiments;if(r!=null&&r.length&&t.some(d=>{const u=FG(d.target),h=r.join(",");return u==null?void 0:u.matches(h)}))return!1;const s=t.length,a=this._options.mutationLimit,i=this._options.mutationBreadcrumbLimit,o=a&&s>a;if(s>i||o){const d=$s({category:"replay.mutations",data:{count:s,limit:o}});this._createCustomBreadcrumb(d)}return o?(this.stop({reason:"mutationLimit",forceFlush:this.recordingMode==="session"}),!1):!0}}function Sd(e,t){return[...e,...t].join(",")}function KG({mask:e,unmask:t,block:r,unblock:s,ignore:a}){const i=["base","iframe[srcdoc]:not([src])"],o=Sd(e,[".sentry-mask","[data-sentry-mask]"]),d=Sd(t,[]);return{maskTextSelector:o,unmaskTextSelector:d,blockSelector:Sd(r,[".sentry-block","[data-sentry-block]",...i]),unblockSelector:Sd(s,[]),ignoreSelector:Sd(a,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'])}}function VG({el:e,key:t,maskAttributes:r,maskAllText:s,privacyOptions:a,value:i}){return!s||a.unmaskTextSelector&&e.matches(a.unmaskTextSelector)?i:r.includes(t)||t==="value"&&e.tagName==="INPUT"&&["submit","button"].includes(e.getAttribute("type")||"")?i.replace(/[\S]/g,"*"):i}const IS='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',YG=["content-length","content-type","accept"],JG=Symbol.for("sentry__originalRequestBody");let PS=!1,AS=!1;function QG(){if(typeof Request>"u"||AS)return;const e=Request;try{const t=function(r,s){const a=new e(r,s);return(s==null?void 0:s.body)!=null&&(a[JG]=s.body),a};t.prototype=e.prototype,Me.Request=t,AS=!0}catch{}}const MT=(e=>new XG(e));class XG{constructor({flushMinDelay:t=_H,flushMaxDelay:r=jH,minReplayDuration:s=TH,maxReplayDuration:a=dS,stickySession:i=!0,useCompression:o=!0,workerUrl:d,_experiments:u={},maskAllText:h=!0,maskAllInputs:p=!0,blockAllMedia:f=!0,mutationBreadcrumbLimit:x=750,mutationLimit:y=1e4,slowClickTimeout:b=7e3,slowClickIgnoreSelectors:w=[],networkDetailAllowUrls:v=[],networkDetailDenyUrls:j=[],networkCaptureBodies:C=!0,networkRequestHeaders:S=[],networkResponseHeaders:k=[],mask:R=[],maskAttributes:E=["title","placeholder","aria-label"],unmask:I=[],block:M=[],unblock:O=[],ignore:L=[],maskFn:P,beforeAddRecordingEvent:$,beforeErrorSampling:B,onError:D,attachRawBodyFromRequest:se=!1}={}){this.name="Replay";const X=KG({mask:R,unmask:I,block:M,unblock:O,ignore:L});if(this._recordingOptions={maskAllInputs:p,maskAllText:h,maskInputOptions:{password:!0},maskTextFn:P,maskInputFn:P,maskAttributeFn:(ee,F,Q)=>VG({maskAttributes:E,maskAllText:h,privacyOptions:X,key:ee,value:F,el:Q}),...X,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:ee=>{try{ee.__rrweb__=!0}catch{}},recordCrossOriginIframes:!!u.recordCrossOriginIframes},this._initialOptions={flushMinDelay:t,flushMaxDelay:r,minReplayDuration:Math.min(s,RH),maxReplayDuration:Math.min(a,dS),stickySession:i,useCompression:o,workerUrl:d,blockAllMedia:f,maskAllInputs:p,maskAllText:h,mutationBreadcrumbLimit:x,mutationLimit:y,slowClickTimeout:b,slowClickIgnoreSelectors:w,networkDetailAllowUrls:v,networkDetailDenyUrls:j,networkCaptureBodies:C,networkRequestHeaders:MS(S),networkResponseHeaders:MS(k),beforeAddRecordingEvent:$,beforeErrorSampling:B,onError:D,attachRawBodyFromRequest:se,_experiments:u},this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${IS}`:IS,this._recordingOptions.ignoreCSSAttributes=new Set(["background-image"])),this._isInitialized&&wf())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return PS}set _isInitialized(t){PS=t}afterAllSetup(t){!wf()||this._replay||(this._initialOptions.attachRawBodyFromRequest&&QG(),this._setup(t),this._initialize(t))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:this._replay.recordingMode==="session"}):Promise.resolve()}flush(t){return this._replay?this._replay.isEnabled()?this._replay.sendBufferedReplayOrFlush(t):(this._replay.start(),Promise.resolve()):Promise.resolve()}getReplayId(t){var r;if((r=this._replay)!=null&&r.isEnabled())return this._replay.getSessionId(t)}getRecordingMode(){var t;if((t=this._replay)!=null&&t.isEnabled())return this._replay.recordingMode}_initialize(t){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(t),this._replay.initializeSampling())}_setup(t){const r=ZG(this._initialOptions,t);this._replay=new GG({options:r,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(t){try{const r=t.getIntegrationByName("ReplayCanvas");if(!r)return;this._replay._canvas=r.getOptions()}catch{}}}function ZG(e,t){const r=t.getOptions(),s={sessionSampleRate:0,errorSampleRate:0,...e},a=Eo(r.replaysSessionSampleRate),i=Eo(r.replaysOnErrorSampleRate);return a==null&&i==null&&Ti(()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")}),a!=null&&(s.sessionSampleRate=a),i!=null&&(s.errorSampleRate=i),s}function MS(e){return[...YG,...e.map(t=>t.toLowerCase())]}function eK(){const e=be();return e==null?void 0:e.getIntegrationByName("Replay")}var tK=Object.defineProperty,nK=(e,t,r)=>t in e?tK(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,OS=(e,t,r)=>nK(e,typeof t!="symbol"?t+"":t,r);class rK{constructor(){OS(this,"idNodeMap",new Map),OS(this,"nodeMetaMap",new WeakMap)}getId(t){var s;return t?((s=this.getMeta(t))==null?void 0:s.id)??-1:-1}getNode(t){return this.idNodeMap.get(t)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(t){return this.nodeMetaMap.get(t)||null}removeNodeFromMap(t){const r=this.getId(t);this.idNodeMap.delete(r),t.childNodes&&t.childNodes.forEach(s=>this.removeNodeFromMap(s))}has(t){return this.idNodeMap.has(t)}hasNode(t){return this.nodeMetaMap.has(t)}add(t,r){const s=r.id;this.idNodeMap.set(s,t),this.nodeMetaMap.set(t,r)}replace(t,r){const s=this.getNode(t);if(s){const a=this.nodeMetaMap.get(s);a&&this.nodeMetaMap.set(r,a)}this.idNodeMap.set(t,r)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function sK(){return new rK}function aK(e,t){for(let r=e.classList.length;r--;){const s=e.classList[r];if(t.test(s))return!0}return!1}function qb(e,t,r=1/0,s=0){return!e||e.nodeType!==e.ELEMENT_NODE||s>r?-1:t(e)?s:qb(e.parentNode,t,r,s+1)}function LS(e,t){return r=>{const s=r;if(s===null)return!1;try{if(e){if(typeof e=="string"){if(s.matches(`.${e}`))return!0}else if(aK(s,e))return!0}return!!(t&&s.matches(t))}catch{return!1}}}const Il=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let $S={map:{},getId(){return console.error(Il),-1},getNode(){return console.error(Il),null},removeNodeFromMap(){console.error(Il)},has(){return console.error(Il),!1},reset(){console.error(Il)}};typeof window<"u"&&window.Proxy&&window.Reflect&&($S=new Proxy($S,{get(e,t,r){return t==="map"&&console.error(Il),Reflect.get(e,t,r)}}));function Tv(e,t,r,s,a=window){const i=a.Object.getOwnPropertyDescriptor(e,t);return a.Object.defineProperty(e,t,s?r:{set(o){LT(()=>{r.set.call(this,o)},0),i&&i.set&&i.set.call(this,o)}}),()=>Tv(e,t,i||{},!0)}function Rv(e,t,r){try{if(!(t in e))return()=>{};const s=e[t],a=r(s);return typeof a=="function"&&(a.prototype=a.prototype||{},Object.defineProperties(a,{__rrweb_original__:{enumerable:!1,value:s}})),e[t]=a,()=>{e[t]=s}}catch{return()=>{}}}Date.now().toString();function iK(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch{return null}}function Np(e,t,r,s,a){if(!e)return!1;const i=iK(e);if(!i)return!1;const o=LS(t,r),d=qb(i,o);let u=-1;return d<0?!1:(s&&(u=qb(i,LS(null,s))),d>-1&&u<0?!0:d<u)}const DS={};function OT(e){const t=DS[e];if(t)return t;const r=window.document;let s=window[e];if(r&&typeof r.createElement=="function")try{const a=r.createElement("iframe");a.hidden=!0,r.head.appendChild(a);const i=a.contentWindow;i&&i[e]&&(s=i[e]),r.head.removeChild(a)}catch{}return DS[e]=s.bind(window)}function Qi(...e){return OT("requestAnimationFrame")(...e)}function LT(...e){return OT("setTimeout")(...e)}var pc=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(pc||{});let Gm;function oK(e){Gm=e}const b0=e=>Gm?(...r)=>{try{return e(...r)}catch(s){if(Gm&&Gm(s)===!0)return()=>{};throw s}}:e;var Dl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lK=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var bm=0;bm<Dl.length;bm++)lK[Dl.charCodeAt(bm)]=bm;var cK=function(e){var t=new Uint8Array(e),r,s=t.length,a="";for(r=0;r<s;r+=3)a+=Dl[t[r]>>2],a+=Dl[(t[r]&3)<<4|t[r+1]>>4],a+=Dl[(t[r+1]&15)<<2|t[r+2]>>6],a+=Dl[t[r+2]&63];return s%3===2?a=a.substring(0,a.length-1)+"=":s%3===1&&(a=a.substring(0,a.length-2)+"=="),a};const FS=new Map;function dK(e,t){let r=FS.get(e);return r||(r=new Map,FS.set(e,r)),r.has(t)||r.set(t,[]),r.get(t)}const $T=(e,t,r)=>{if(!e||!(FT(e,t)||typeof e=="object"))return;const s=e.constructor.name,a=dK(r,s);let i=a.indexOf(e);return i===-1&&(i=a.length,a.push(e)),i};function Km(e,t,r){if(e instanceof Array)return e.map(s=>Km(s,t,r));if(e===null)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray)return{rr_type:e.constructor.name,args:[Object.values(e)]};if(e instanceof ArrayBuffer){const s=e.constructor.name,a=cK(e);return{rr_type:s,base64:a}}else{if(e instanceof DataView)return{rr_type:e.constructor.name,args:[Km(e.buffer,t,r),e.byteOffset,e.byteLength]};if(e instanceof HTMLImageElement){const s=e.constructor.name,{src:a}=e;return{rr_type:s,src:a}}else if(e instanceof HTMLCanvasElement){const s="HTMLImageElement",a=e.toDataURL();return{rr_type:s,src:a}}else{if(e instanceof ImageData)return{rr_type:e.constructor.name,args:[Km(e.data,t,r),e.width,e.height]};if(FT(e,t)||typeof e=="object"){const s=e.constructor.name,a=$T(e,t,r);return{rr_type:s,index:a}}}}return e}const DT=(e,t,r)=>e.map(s=>Km(s,t,r)),FT=(e,t)=>!!["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(a=>typeof t[a]=="function").find(a=>e instanceof t[a]);function uK(e,t,r,s,a){const i=[],o=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);for(const d of o)try{if(typeof t.CanvasRenderingContext2D.prototype[d]!="function")continue;const u=Rv(t.CanvasRenderingContext2D.prototype,d,function(h){return function(...p){return Np(this.canvas,r,s,a,!0)||LT(()=>{const f=DT(p,t,this);e(this.canvas,{type:pc["2D"],property:d,args:f})},0),h.apply(this,p)}});i.push(u)}catch{const u=Tv(t.CanvasRenderingContext2D.prototype,d,{set(h){e(this.canvas,{type:pc["2D"],property:d,args:[h],setter:!0})}});i.push(u)}return()=>{i.forEach(d=>d())}}function hK(e){return e==="experimental-webgl"?"webgl":e}function US(e,t,r,s,a){const i=[];try{const o=Rv(e.HTMLCanvasElement.prototype,"getContext",function(d){return function(u,...h){if(!Np(this,t,r,s,!0)){const p=hK(u);if("__context"in this||(this.__context=p),a&&["webgl","webgl2"].includes(p))if(h[0]&&typeof h[0]=="object"){const f=h[0];f.preserveDrawingBuffer||(f.preserveDrawingBuffer=!0)}else h.splice(0,1,{preserveDrawingBuffer:!0})}return d.apply(this,[u,...h])}});i.push(o)}catch{console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{i.forEach(o=>o())}}function qS(e,t,r,s,a,i,o,d){const u=[],h=Object.getOwnPropertyNames(e);for(const p of h)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(p))try{if(typeof e[p]!="function")continue;const f=Rv(e,p,function(x){return function(...y){const b=x.apply(this,y);if($T(b,d,this),"tagName"in this.canvas&&!Np(this.canvas,s,a,i,!0)){const w=DT(y,d,this),v={type:t,property:p,args:w};r(this.canvas,v)}return b}});u.push(f)}catch{const f=Tv(e,p,{set(x){r(this.canvas,{type:t,property:p,args:[x],setter:!0})}});u.push(f)}return u}function mK(e,t,r,s,a,i){const o=[];return o.push(...qS(t.WebGLRenderingContext.prototype,pc.WebGL,e,r,s,a,i,t)),typeof t.WebGL2RenderingContext<"u"&&o.push(...qS(t.WebGL2RenderingContext.prototype,pc.WebGL2,e,r,s,a,i,t)),()=>{o.forEach(d=>d())}}const fK='for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t="undefined"==typeof Uint8Array?[]:new Uint8Array(256),a=0;a<64;a++)t[e.charCodeAt(a)]=a;var n=function(t){var a,n=new Uint8Array(t),r=n.length,s="";for(a=0;a<r;a+=3)s+=e[n[a]>>2],s+=e[(3&n[a])<<4|n[a+1]>>4],s+=e[(15&n[a+1])<<2|n[a+2]>>6],s+=e[63&n[a+2]];return r%3==2?s=s.substring(0,s.length-1)+"=":r%3==1&&(s=s.substring(0,s.length-2)+"=="),s};const r=new Map,s=new Map;const i=self;i.onmessage=async function(e){if(!("OffscreenCanvas"in globalThis))return i.postMessage({id:e.data.id});{const{id:t,bitmap:a,width:o,height:f,maxCanvasSize:c,dataURLOptions:g}=e.data,u=async function(e,t,a){const r=e+"-"+t;if("OffscreenCanvas"in globalThis){if(s.has(r))return s.get(r);const i=new OffscreenCanvas(e,t);i.getContext("2d");const o=await i.convertToBlob(a),f=await o.arrayBuffer(),c=n(f);return s.set(r,c),c}return""}(o,f,g),[h,d]=function(e,t,a){if(!a)return[e,t];const[n,r]=a;if(e<=n&&t<=r)return[e,t];let s=e,i=t;return s>n&&(i=Math.floor(n*t/e),s=n),i>r&&(s=Math.floor(r*e/t),i=r),[s,i]}(o,f,c),l=new OffscreenCanvas(h,d),w=l.getContext("bitmaprenderer"),p=h===o&&d===f?a:await createImageBitmap(a,{resizeWidth:h,resizeHeight:d,resizeQuality:"low"});w?.transferFromImageBitmap(p),a.close();const y=await l.convertToBlob(g),v=y.type,b=await y.arrayBuffer(),m=n(b);if(p.close(),!r.has(t)&&await u===m)return r.set(t,m),i.postMessage({id:t});if(r.get(t)===m)return i.postMessage({id:t});i.postMessage({id:t,type:v,base64:m,width:o,height:f}),r.set(t,m)}};';function pK(){const e=new Blob([fK]);return URL.createObjectURL(e)}class xK{constructor(t){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.shadowDoms=new Set,this.windowsSet=new WeakSet,this.windows=[],this.restoreHandlers=[],this.frozen=!1,this.locked=!1,this.snapshotInProgressMap=new Map,this.worker=null,this.lastSnapshotTime=0,this.processMutation=(d,u)=>{(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId||!this.rafStamps.invokeId)&&(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(d)||this.pendingCanvasMutations.set(d,[]),this.pendingCanvasMutations.get(d).push(u)};const{enableManualSnapshot:r,sampling:s="all",win:a,recordCanvas:i,errorHandler:o}=t;t.sampling=s,this.mutationCb=t.mutationCb,this.mirror=t.mirror,this.options=t,o&&oK(o),(i&&typeof s=="number"||r)&&(this.worker=this.initFPSWorker()),this.addWindow(a),!r&&b0(()=>{i&&s==="all"&&(this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher()),i&&typeof s=="number"&&this.initCanvasFPSObserver()})()}reset(){var t;this.pendingCanvasMutations.clear(),this.restoreHandlers.forEach(r=>{try{r()}catch{}}),this.restoreHandlers=[],this.windowsSet=new WeakSet,this.windows=[],this.shadowDoms=new Set,(t=this.worker)==null||t.terminate(),this.worker=null,this.snapshotInProgressMap=new Map}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}addWindow(t){const{sampling:r="all",blockClass:s,blockSelector:a,unblockSelector:i,recordCanvas:o,enableManualSnapshot:d}=this.options;if(!this.windowsSet.has(t)){if(d){this.windowsSet.add(t),this.windows.push(new WeakRef(t));return}b0(()=>{if(o&&r==="all"&&this.initCanvasMutationObserver(t,s,a,i),o&&typeof r=="number"){const u=US(t,s,a,i,!0);this.restoreHandlers.push(()=>{u()})}})(),this.windowsSet.add(t),this.windows.push(new WeakRef(t))}}addShadowRoot(t){this.shadowDoms.add(new WeakRef(t))}resetShadowRoots(){this.shadowDoms=new Set}snapshot(t,r){if(r!=null&&r.skipRequestAnimationFrame){this.takeSnapshot(performance.now(),!0,t);return}Qi(s=>this.takeSnapshot(s,!0,t))}initFPSWorker(){const t=new Worker(pK());return t.onmessage=r=>{const s=r.data,{id:a}=s;if(this.snapshotInProgressMap.set(a,!1),!("base64"in s))return;const{base64:i,type:o,width:d,height:u}=s;this.mutationCb({id:a,type:pc["2D"],commands:[{property:"clearRect",args:[0,0,d,u]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:i}],type:o}]},0,0,d,u]}]})},t}initCanvasFPSObserver(){let t;if(!this.windows.length&&!this.shadowDoms.size)return;const r=s=>{this.takeSnapshot(s,!1),t=Qi(r)};t=Qi(r),this.restoreHandlers.push(()=>{t&&cancelAnimationFrame(t)})}initCanvasMutationObserver(t,r,s,a){const i=US(t,r,s,a,!1),o=uK(this.processMutation.bind(this),t,r,s,a),d=mK(this.processMutation.bind(this),t,r,s,a,this.mirror);this.restoreHandlers.push(()=>{i(),o(),d()})}getCanvasElements(t,r,s){const a=[],i=o=>{o.querySelectorAll("canvas").forEach(d=>{Np(d,t,r,s)||a.push(d)})};for(const o of this.windows){const d=o.deref();let u;try{u=d&&d.document}catch{}u&&i(u)}for(const o of this.shadowDoms){const d=o.deref();d&&i(d)}return a}takeSnapshot(t,r,s){const{sampling:a,blockClass:i,blockSelector:o,unblockSelector:d,dataURLOptions:u,maxCanvasSize:h}=this.options,f=1e3/(a==="all"?2:a||2);return this.lastSnapshotTime&&t-this.lastSnapshotTime<f?!1:(this.lastSnapshotTime=t,(s?[s]:this.getCanvasElements(i,o,d)).forEach(b=>{var v;const w=this.mirror.getId(b);if(!(!this.mirror.hasNode(b)||!b.width||!b.height||this.snapshotInProgressMap.get(w))){if(this.snapshotInProgressMap.set(w,!0),!r&&["webgl","webgl2"].includes(b.__context)){const j=b.getContext(b.__context);((v=j==null?void 0:j.getContextAttributes())==null?void 0:v.preserveDrawingBuffer)===!1&&j.clear(j.COLOR_BUFFER_BIT)}createImageBitmap(b).then(j=>{var C;(C=this.worker)==null||C.postMessage({id:w,bitmap:j,width:b.width,height:b.height,dataURLOptions:u,maxCanvasSize:h},[j])}).catch(j=>{b0(()=>{throw this.snapshotInProgressMap.delete(w),j})()})}}),!0)}startPendingCanvasMutationFlusher(){Qi(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){const t=r=>{this.rafStamps.latestId=r,Qi(t)};Qi(t)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((t,r)=>{const s=this.mirror.getId(r);this.flushPendingCanvasMutationFor(r,s)}),Qi(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(t,r){if(this.frozen||this.locked)return;const s=this.pendingCanvasMutations.get(t);if(!s||r===-1)return;const a=s.map(o=>{const{type:d,...u}=o;return u}),{type:i}=s[0];this.mutationCb({id:r,type:i,commands:a}),this.pendingCanvasMutations.delete(t)}}var V2;try{if(Array.from([1],e=>e*2)[0]!==2){const e=document.createElement("iframe");document.body.appendChild(e),Array.from=((V2=e.contentWindow)==null?void 0:V2.Array.from)||Array.from,document.body.removeChild(e)}}catch(e){console.debug("Unable to override Array.from",e)}sK();var BS;(function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"})(BS||(BS={}));const HS={low:{sampling:{canvas:1},dataURLOptions:{type:"image/webp",quality:.25}},medium:{sampling:{canvas:2},dataURLOptions:{type:"image/webp",quality:.4}},high:{sampling:{canvas:4},dataURLOptions:{type:"image/webp",quality:.5}}},gK="ReplayCanvas",ym=1280,bK=((e={})=>{const[t,r]=e.maxCanvasSize||[],s={quality:e.quality||"medium",enableManualSnapshot:e.enableManualSnapshot,maxCanvasSize:[t?Math.min(t,ym):ym,r?Math.min(r,ym):ym]};let a;const i=new Promise(o=>a=o);return{name:gK,getOptions(){const{quality:o,enableManualSnapshot:d,maxCanvasSize:u}=s;return{enableManualSnapshot:d,recordCanvas:!0,getCanvasManager:h=>{const p=new xK({...h,enableManualSnapshot:d,maxCanvasSize:u,errorHandler:f=>{try{typeof f=="object"&&(f.__rrweb__=!0)}catch{}}});return a(p),p},...HS[o]||HS.medium}},async snapshot(o,d){(await i).snapshot(o,d)}}}),yK=bK;function vK(e){return e.split(",").some(t=>t.trim().startsWith("sentry-"))}function UT(e){try{return new URL(e,ye.location.origin).href}catch{return}}function wK(e){return e.entryType==="resource"&&"initiatorType"in e&&typeof e.nextHopProtocol=="string"&&(e.initiatorType==="fetch"||e.initiatorType==="xmlhttprequest")}function qT(e){try{return new Headers(e)}catch{return}}const WS=new WeakMap,y0=new Map,Iv={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,trackFetchStreamPerformance:!1};function BT(e,t){const{traceFetch:r,traceXHR:s,trackFetchStreamPerformance:a,shouldCreateSpanForRequest:i,enableHTTPTimings:o,tracePropagationTargets:d,onRequestSpanStart:u,onRequestSpanEnd:h}={...Iv,...t},p=typeof i=="function"?i:b=>!0,f=b=>_K(b,d),x={},y=e.getOptions().propagateTraceparent;r&&(e.addEventProcessor(b=>(b.type==="transaction"&&b.spans&&b.spans.forEach(w=>{if(w.op==="http.client"){const v=y0.get(w.span_id);v&&(w.timestamp=v/1e3,y0.delete(w.span_id))}}),b)),a&&MU(b=>{if(b.response){const w=WS.get(b.response);w&&b.endTimestamp&&y0.set(w,b.endTimestamp)}}),Yy(b=>{const w=vD(b,p,f,x,{propagateTraceparent:y,onRequestSpanEnd:h});if(b.response&&b.fetchData.__span&&WS.set(b.response,b.fetchData.__span),w){const v=UT(b.fetchData.url),j=v?jo(v).host:void 0;w.setAttributes({"http.url":v,"server.address":j}),o&&zS(w),u==null||u(w,{headers:b.headers})}})),s&&dv(b=>{var v;const w=jK(b,p,f,x,y,h);w&&(o&&zS(w),u==null||u(w,{headers:qT((v=b.xhr.__sentry_xhr_v3__)==null?void 0:v.request_headers)}))})}function zS(e){const{url:t}=Re(e).data;if(!t||typeof t!="string")return;const r=Lo("resource",({entries:s})=>{s.forEach(a=>{wK(a)&&a.name.endsWith(t)&&(e.setAttributes(vC(a)),setTimeout(r))})})}function _K(e,t){const r=Uo();if(r){let s,a;try{s=new URL(e,r),a=new URL(r).origin}catch{return!1}const i=s.origin===a;return t?vs(s.toString(),t)||i&&vs(s.pathname,t):i}else{const s=!!e.match(/^\/(?!\/)/);return t?vs(e,t):s}}function jK(e,t,r,s,a,i){const o=e.xhr,d=o==null?void 0:o[ua];if(!o||o.__sentry_own_request__||!d)return;const{url:u,method:h}=d,p=Vr()&&t(u);if(e.endTimestamp&&p){const j=o.__sentry_xhr_span_id__;if(!j)return;const C=s[j];C&&d.status_code!==void 0&&(Xd(C,d.status_code),C.end(),i==null||i(C,{headers:qT(jC(o)),error:e.error}),delete s[j]);return}const f=UT(u),x=jo(f||u),y=a5(u),b=!!Vt(),w=p&&b?Yr({name:`${h} ${y}`,attributes:{url:u,type:"xhr","http.method":h,"http.url":f,"server.address":x==null?void 0:x.host,[Ge]:"auto.http.browser",[Nt]:"http.client",...(x==null?void 0:x.search)&&{"http.query":x==null?void 0:x.search},...(x==null?void 0:x.hash)&&{"http.fragment":x==null?void 0:x.hash}}}):new ja;o.__sentry_xhr_span_id__=w.spanContext().spanId,s[o.__sentry_xhr_span_id__]=w,r(u)&&NK(o,Vr()&&b?w:void 0,a);const v=be();return v&&v.emit("beforeOutgoingRequestSpan",w,e),w}function NK(e,t,r){const{"sentry-trace":s,baggage:a,traceparent:i}=Dy({span:t,propagateTraceparent:r});s&&SK(e,s,a,i)}function SK(e,t,r,s){var i;const a=(i=e.__sentry_xhr_v3__)==null?void 0:i.request_headers;if(!(a!=null&&a["sentry-trace"]||!e.setRequestHeader))try{if(e.setRequestHeader("sentry-trace",t),s&&!(a!=null&&a.traceparent)&&e.setRequestHeader("traceparent",s),r){const o=a==null?void 0:a.baggage;(!o||!vK(o))&&e.setRequestHeader("baggage",r)}}catch{}}function kK(){ye.document?ye.document.addEventListener("visibilitychange",()=>{const e=Vt();if(!e)return;const t=Kt(e);if(ye.document.hidden&&t){const r="cancelled",{op:s,status:a}=Re(t);pe&&Y.log(`[Tracing] Transaction: ${r} -> since tab moved to the background, op: ${s}`),a||t.setStatus({code:ot,message:r}),t.setAttribute("sentry.cancellation_reason","document.hidden"),t.end()}}):pe&&Y.warn("[Tracing] Could not set up background tab detection due to lack of global document")}const EK=3600,HT="sentry_previous_trace",CK="sentry.previous_trace";function TK(e,{linkPreviousTrace:t,consistentTraceSampling:r}){const s=t==="session-storage";let a=s?PK():void 0;e.on("spanStart",o=>{if(Kt(o)!==o)return;const d=We().getPropagationContext();a=RK(a,o,d),s&&IK(a)});let i=!0;r&&e.on("beforeSampling",o=>{if(!a)return;const d=We(),u=d.getPropagationContext();if(i&&u.parentSpanId){i=!1;return}d.setPropagationContext({...u,dsc:{...u.dsc,sample_rate:String(a.sampleRate),sampled:String(Bb(a.spanContext))},sampleRand:a.sampleRand}),o.parentSampled=Bb(a.spanContext),o.parentSampleRate=a.sampleRate,o.spanAttributes={...o.spanAttributes,[aE]:a.sampleRate}})}function RK(e,t,r){const s=Re(t);function a(){var d,u;try{return Number((d=r.dsc)==null?void 0:d.sample_rate)??Number((u=s.data)==null?void 0:u[Kf])}catch{return 0}}const i={spanContext:t.spanContext(),startTimestamp:s.start_timestamp,sampleRate:a(),sampleRand:r.sampleRand};if(!e)return i;const o=e.spanContext;return o.traceId===s.trace_id?e:(Date.now()/1e3-e.startTimestamp<=EK&&(pe&&Y.log(`Adding previous_trace \`${JSON.stringify(o)}\` link to span \`${JSON.stringify({op:s.op,...t.spanContext()})}\``),t.addLink({context:o,attributes:{[DO]:"previous_trace"}}),t.setAttribute(CK,`${o.traceId}-${o.spanId}-${Bb(o)?1:0}`)),i)}function IK(e){try{ye.sessionStorage.setItem(HT,JSON.stringify(e))}catch(t){pe&&Y.warn("Could not store previous trace in sessionStorage",t)}}function PK(){var e;try{const t=(e=ye.sessionStorage)==null?void 0:e.getItem(HT);return JSON.parse(t)}catch{return}}function Bb(e){return e.traceFlags===1}const AK="BrowserTracing",MK={...Im,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableLongAnimationFrame:!0,enableInp:!0,enableElementTiming:!0,ignoreResourceSpans:[],ignorePerformanceApiSpans:[],detectRedirects:!0,linkPreviousTrace:"in-memory",consistentTraceSampling:!1,enableReportPageLoaded:!1,_experiments:{},...Iv},Ho=((e={})=>{const t={name:void 0,source:void 0},r=ye.document,{enableInp:s,enableElementTiming:a,enableLongTask:i,enableLongAnimationFrame:o,_experiments:{enableInteractions:d,enableStandaloneClsSpans:u,enableStandaloneLcpSpans:h},beforeStartSpan:p,idleTimeout:f,finalTimeout:x,childSpanTimeout:y,markBackgroundSpan:b,traceFetch:w,traceXHR:v,trackFetchStreamPerformance:j,shouldCreateSpanForRequest:C,enableHTTPTimings:S,ignoreResourceSpans:k,ignorePerformanceApiSpans:R,instrumentPageLoad:E,instrumentNavigation:I,detectRedirects:M,linkPreviousTrace:O,consistentTraceSampling:L,enableReportPageLoaded:P,onRequestSpanStart:$,onRequestSpanEnd:B}={...MK,...e};let D,se,X;function ee(F,Q,J=!0){const U=Q.op==="pageload",G=Q.name,ie=p?p(Q):Q,ae=ie.attributes||{};if(G!==ie.name&&(ae[xt]="custom",ie.attributes=ae),!J){const ze=qo();Yr({...ie,startTime:ze}).end(ze);return}t.name=ie.name,t.source=ae[xt];const fe=AE(ie,{idleTimeout:f,finalTimeout:x,childSpanTimeout:y,disableAutoFinish:U,beforeSpanEnd:ze=>{D==null||D(),rB(ze,{recordClsOnPageloadSpan:!u,recordLcpOnPageloadSpan:!h,ignoreResourceSpans:k,ignorePerformanceApiSpans:R}),KS(F,void 0);const he=We(),Ee=he.getPropagationContext();he.setPropagationContext({...Ee,traceId:fe.spanContext().traceId,sampled:Ai(fe),dsc:Ns(ze)}),U&&(X=void 0)},trimIdleSpanEndTimestamp:!P});U&&P&&(X=fe),KS(F,fe);function je(){r&&["interactive","complete"].includes(r.readyState)&&F.emit("idleSpanEnableAutoFinish",fe)}U&&!P&&r&&(r.addEventListener("readystatechange",()=>{je()}),je())}return{name:AK,setup(F){if(NE(),D=Jq({recordClsStandaloneSpans:u||!1,recordLcpStandaloneSpans:h||!1,client:F}),s&&TB(),a&&pB(),o&&Me.PerformanceObserver&&PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes("long-animation-frame")?Xq():i&&Qq(),d&&Zq(),M&&r){const J=()=>{se=At()};addEventListener("click",J,{capture:!0}),addEventListener("keydown",J,{capture:!0,passive:!0})}function Q(){const J=au(F);J&&!Re(J).timestamp&&(pe&&Y.log(`[Tracing] Finishing current active span with op: ${Re(J).op}`),J.setAttribute(Qd,"cancelled"),J.end())}F.on("startNavigationSpan",(J,U)=>{if(be()!==F)return;if(U!=null&&U.isRedirect){pe&&Y.warn("[Tracing] Detected redirect, navigation span will not be the root span, but a child span."),ee(F,{op:"navigation.redirect",...J},!1);return}se=void 0,Q(),hn().setPropagationContext({traceId:Us(),sampleRand:Math.random(),propagationSpanId:Vr()?void 0:pa()});const G=We();G.setPropagationContext({traceId:Us(),sampleRand:Math.random(),propagationSpanId:Vr()?void 0:pa()}),G.setSDKProcessingMetadata({normalizedRequest:void 0}),ee(F,{op:"navigation",...J,parentSpan:null,forceTransaction:!0})}),F.on("startPageLoadSpan",(J,U={})=>{if(be()!==F)return;Q();const G=U.sentryTrace||GS("sentry-trace"),ie=U.baggage||GS("baggage"),ae=pE(G,ie),fe=We();fe.setPropagationContext(ae),Vr()||(fe.getPropagationContext().propagationSpanId=pa()),fe.setSDKProcessingMetadata({normalizedRequest:tv()}),ee(F,{op:"pageload",...J})}),F.on("endPageloadSpan",()=>{P&&X&&(X.setAttribute(Qd,"reportPageLoaded"),X.end())})},afterAllSetup(F){let Q=Uo();if(O!=="off"&&TK(F,{linkPreviousTrace:O,consistentTraceSampling:L}),ye.location){if(E){const J=Wn();Ac(F,{name:ye.location.pathname,startTime:J?J/1e3:void 0,attributes:{[xt]:"url",[Ge]:"auto.pageload.browser"}})}I&&pp(({to:J,from:U})=>{if(U===void 0&&(Q==null?void 0:Q.indexOf(J))!==-1){Q=void 0;return}Q=void 0;const G=$y(J),ie=au(F),ae=ie&&M&&LK(ie,se);Mc(F,{name:(G==null?void 0:G.pathname)||ye.location.pathname,attributes:{[xt]:"url",[Ge]:"auto.navigation.browser"}},{url:J,isRedirect:ae})})}b&&kK(),d&&OK(F,f,x,y,t),s&&PB(),BT(F,{traceFetch:w,traceXHR:v,trackFetchStreamPerformance:j,tracePropagationTargets:F.getOptions().tracePropagationTargets,shouldCreateSpanForRequest:C,enableHTTPTimings:S,onRequestSpanStart:$,onRequestSpanEnd:B})}}});function Ac(e,t,r){e.emit("startPageLoadSpan",t,r),We().setTransactionName(t.name);const s=au(e);return s&&e.emit("afterStartPageLoadSpan",s),s}function Mc(e,t,r){const{url:s,isRedirect:a}=r||{};e.emit("beforeStartNavigationSpan",t,{isRedirect:a}),e.emit("startNavigationSpan",t,{isRedirect:a});const i=We();return i.setTransactionName(t.name),s&&!a&&i.setSDKProcessingMetadata({normalizedRequest:{...tv(),url:s}}),au(e)}function GS(e){const t=ye.document,r=t==null?void 0:t.querySelector(`meta[name=${e}]`);return(r==null?void 0:r.getAttribute("content"))||void 0}function OK(e,t,r,s,a){const i=ye.document;let o;const d=()=>{const u="ui.action.click",h=au(e);if(h){const p=Re(h).op;if(["navigation","pageload"].includes(p)){pe&&Y.warn(`[Tracing] Did not create ${u} span because a pageload or navigation span is in progress.`);return}}if(o&&(o.setAttribute(Qd,"interactionInterrupted"),o.end(),o=void 0),!a.name){pe&&Y.warn(`[Tracing] Did not create ${u} transaction because _latestRouteName is missing.`);return}o=AE({name:a.name,op:u,attributes:{[xt]:a.source||"url"}},{idleTimeout:t,finalTimeout:r,childSpanTimeout:s})};i&&addEventListener("click",d,{capture:!0})}const WT="_sentry_idleSpan";function au(e){return e[WT]}function KS(e,t){yn(e,WT,t)}const VS=1.5;function LK(e,t){const r=Re(e),s=qo(),a=r.start_timestamp;return!(s-a>VS||t&&s-t<=VS)}function $K(e=be()){e==null||e.emit("endPageloadSpan")}function DK(e){const t=Vt();if(t===e)return;const r=We();e.end=new Proxy(e.end,{apply(s,a,i){return qs(r,t),Reflect.apply(s,a,i)}}),qs(r,e)}function xc(e){return new Promise((t,r)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>r(e.error)})}function FK(e,t){const r=indexedDB.open(e);r.onupgradeneeded=()=>r.result.createObjectStore(t);const s=xc(r);return a=>s.then(i=>a(i.transaction(t,"readwrite").objectStore(t)))}function Pv(e){return xc(e.getAllKeys())}function UK(e,t,r){return e(s=>Pv(s).then(a=>{if(!(a.length>=r))return s.put(t,Math.max(...a,0)+1),xc(s.transaction)}))}function qK(e,t,r){return e(s=>Pv(s).then(a=>{if(!(a.length>=r))return s.put(t,Math.min(...a,0)-1),xc(s.transaction)}))}function BK(e){return e(t=>Pv(t).then(r=>{const s=r[0];if(s!=null)return xc(t.get(s)).then(a=>(t.delete(s),xc(t.transaction).then(()=>a)))}))}function HK(e){let t;function r(){return t==null&&(t=FK(e.dbName||"sentry-offline",e.storeName||"queue")),t}return{push:async s=>{try{const a=await hf(s);await UK(r(),a,e.maxQueueSize||30)}catch{}},unshift:async s=>{try{const a=await hf(s);await qK(r(),a,e.maxQueueSize||30)}catch{}},shift:async()=>{try{const s=await BK(r());if(s)return bL(s)}catch{}}}}function WK(e){return t=>{const r=e({...t,createStore:HK});return ye.addEventListener("online",async s=>{await r.flush()}),r}}function zK(e=hv){return WK(Y8(e))}const YS=1e6,GK="window"in Me&&Me.window===Me&&typeof importScripts>"u",xi=String(0),Of=GK?"main":"worker",Gr=ye.navigator;let zT="",GT="",KT="",Hb=(Gr==null?void 0:Gr.userAgent)||"",VT="";var Y2;const KK=(Gr==null?void 0:Gr.language)||((Y2=Gr==null?void 0:Gr.languages)==null?void 0:Y2[0])||"";function VK(e){return typeof e=="object"&&e!==null&&"getHighEntropyValues"in e}const JS=Gr==null?void 0:Gr.userAgentData;VK(JS)&&JS.getHighEntropyValues(["architecture","model","platform","platformVersion","fullVersionList"]).then(e=>{var t;if(zT=e.platform||"",KT=e.architecture||"",VT=e.model||"",GT=e.platformVersion||"",(t=e.fullVersionList)!=null&&t.length){const r=e.fullVersionList[e.fullVersionList.length-1];Hb=`${r.brand} ${r.version}`}}).catch(e=>{});function YK(e){return!("thread_metadata"in e)}function JK(e){return YK(e)?nV(e):e}function QK(e){var r,s;const t=(s=(r=e.contexts)==null?void 0:r.trace)==null?void 0:s.trace_id;return typeof t=="string"&&t.length!==32&&pe&&Y.log(`[Profiling] Invalid traceId: ${t} on profiled event`),typeof t!="string"?"":t}function XK(e,t,r,s){if(s.type!=="transaction")throw new TypeError("Profiling events may only be attached to transactions, this should never occur.");if(r==null)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${r} instead.`);const a=QK(s),i=JK(r),o=t||(typeof s.start_timestamp=="number"?s.start_timestamp*1e3:At()*1e3),d=typeof s.timestamp=="number"?s.timestamp*1e3:At()*1e3;return{event_id:e,timestamp:new Date(o).toISOString(),platform:"javascript",version:"1",release:s.release||"",environment:s.environment||Yf,runtime:{name:"javascript",version:ye.navigator.userAgent},os:{name:zT,version:GT,build_number:Hb},device:{locale:KK,model:VT,manufacturer:Hb,architecture:KT,is_emulator:!1},debug_meta:{images:JT(r.resources)},profile:i,transactions:[{name:s.transaction||"",id:s.event_id||gn(),trace_id:a,active_thread_id:xi,relative_start_ns:"0",relative_end_ns:((d-o)*1e6).toFixed(0)}]}}function ZK(e,t,r){var o,d;if(e==null)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${e} instead.`);const s=tV(e),a=t.getOptions(),i=(d=(o=t.getSdkMetadata)==null?void 0:o.call(t))==null?void 0:d.sdk;return{chunk_id:gn(),client_sdk:{name:(i==null?void 0:i.name)??"sentry.javascript.browser",version:(i==null?void 0:i.version)??"0.0.0"},profiler_id:r||gn(),platform:"javascript",version:"2",release:a.release??"",environment:a.environment??"production",debug_meta:{images:JT(e.resources)},profile:s}}function eV(e){try{if(!e||typeof e!="object")return{reason:"chunk is not an object"};const t=s=>typeof s=="string"&&/^[a-f0-9]{32}$/.test(s);if(!t(e.profiler_id))return{reason:"missing or invalid profiler_id"};if(!t(e.chunk_id))return{reason:"missing or invalid chunk_id"};if(!e.client_sdk)return{reason:"missing client_sdk metadata"};const r=e.profile;return r?!Array.isArray(r.frames)||!r.frames.length?{reason:"profile has no frames"}:!Array.isArray(r.stacks)||!r.stacks.length?{reason:"profile has no stacks"}:!Array.isArray(r.samples)||!r.samples.length?{reason:"profile has no samples"}:{valid:!0}:{reason:"missing profile data"}}catch(t){return{reason:`unknown validation error: ${t}`}}}function tV(e){const t=[];for(let d=0;d<e.frames.length;d++){const u=e.frames[d];u&&(t[d]={function:u.name,abs_path:typeof u.resourceId=="number"?e.resources[u.resourceId]:void 0,lineno:u.line,colno:u.column})}const r=[];for(let d=0;d<e.stacks.length;d++){const u=e.stacks[d];if(!u)continue;const h=[];let p=u;for(;p;)h.push(p.frameId),p=p.parentId===void 0?void 0:e.stacks[p.parentId];r[d]=h}const s=Wn(),a=typeof performance.timeOrigin=="number"?performance.timeOrigin:s||0,i=a-(s||a),o=[];for(let d=0;d<e.samples.length;d++){const u=e.samples[d];if(!u)continue;const h=(a+(u.timestamp-i))/1e3;o[d]={stack_id:u.stackId??0,thread_id:xi,timestamp:h}}return{frames:t,stacks:r,samples:o,thread_metadata:{[xi]:{name:Of}}}}function YT(e){return Re(e).op==="pageload"}function nV(e){let t,r=0;const s={samples:[],stacks:[],frames:[],thread_metadata:{[xi]:{name:Of}}},a=e.samples[0];if(!a)return s;const i=a.timestamp,o=Wn(),d=typeof performance.timeOrigin=="number"?performance.timeOrigin:o||0,u=d-(o||d);return e.samples.forEach((h,p)=>{if(h.stackId===void 0){t===void 0&&(t=r,s.stacks[t]=[],r++),s.samples[p]={elapsed_since_start_ns:((h.timestamp+u-i)*YS).toFixed(0),stack_id:t,thread_id:xi};return}let f=e.stacks[h.stackId];const x=[];for(;f;){x.push(f.frameId);const b=e.frames[f.frameId];b&&s.frames[f.frameId]===void 0&&(s.frames[f.frameId]={function:b.name,abs_path:typeof b.resourceId=="number"?e.resources[b.resourceId]:void 0,lineno:b.line,colno:b.column}),f=f.parentId===void 0?void 0:e.stacks[f.parentId]}const y={elapsed_since_start_ns:((h.timestamp+u-i)*YS).toFixed(0),stack_id:r,thread_id:xi};s.stacks[r]=x,s.samples[p]=y,r++}),s}function rV(e,t){if(!t.length)return e;for(const r of t)e[1].push([{type:"profile"},r]);return e}function sV(e){const t=[];return Co(e,(r,s)=>{var a,i;if(s==="transaction")for(let o=1;o<r.length;o++){const d=r[o];(i=(a=d==null?void 0:d.contexts)==null?void 0:a.profile)!=null&&i.profile_id&&t.push(r[o])}}),t}function JT(e){const t=be(),r=t==null?void 0:t.getOptions(),s=r==null?void 0:r.stackParser;return s?GL(s,e):[]}function QT(e){return typeof e!="number"&&typeof e!="boolean"||typeof e=="number"&&isNaN(e)?(pe&&Y.warn(`[Profiling] Invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(e)} of type ${JSON.stringify(typeof e)}.`),!1):e===!0||e===!1?!0:e<0||e>1?(pe&&Y.warn(`[Profiling] Invalid sample rate. Sample rate must be between 0 and 1. Got ${e}.`),!1):!0}function aV(e){return e.samples.length<2?(pe&&Y.log("[Profiling] Discarding profile because it contains less than 2 samples"),!1):e.frames.length?!0:(pe&&Y.log("[Profiling] Discarding profile because it contains no frames"),!1)}let Av=!1;const XT=3e4;function iV(e){return typeof e=="function"}function ZT(){const e=ye.Profiler;if(!iV(e)){pe&&Y.log("[Profiling] Profiling is not supported by this browser, Profiler interface missing on window object.");return}const t=10,r=Math.floor(XT/t);try{return new e({sampleInterval:t,maxBufferSize:r})}catch{pe&&(Y.log("[Profiling] Failed to initialize the Profiling constructor, this is likely due to a missing 'Document-Policy': 'js-profiling' header."),Y.log("[Profiling] Disabling profiling for current user session.")),Av=!0}}function QS(e){if(Av)return pe&&Y.log("[Profiling] Profiling has been disabled for the duration of the current user session."),!1;if(!e.isRecording())return pe&&Y.log("[Profiling] Discarding profile because root span was not sampled."),!1;const t=be(),r=t==null?void 0:t.getOptions();if(!r)return pe&&Y.log("[Profiling] Profiling disabled, no options found."),!1;const s=r.profilesSampleRate;return QT(s)?s?(s===!0?!0:Math.random()<s)?!0:(pe&&Y.log(`[Profiling] Discarding profile because it's not included in the random sample (sampling rate = ${Number(s)})`),!1):(pe&&Y.log("[Profiling] Discarding profile because a negative sampling decision was inherited or profileSampleRate is set to 0"),!1):(pe&&Y.warn("[Profiling] Discarding profile because of invalid sample rate."),!1)}function oV(e){if(Av)return pe&&Y.log("[Profiling] Profiling has been disabled for the duration of the current user session as the JS Profiler could not be started."),!1;if(e.profileLifecycle!=="trace"&&e.profileLifecycle!=="manual")return pe&&Y.warn("[Profiling] Session not sampled. Invalid `profileLifecycle` option."),!1;const t=e.profileSessionSampleRate;return QT(t)?t?Math.random()<=t:(pe&&Y.log("[Profiling] Discarding profile because profileSessionSampleRate is not defined or set to 0"),!1):(pe&&Y.warn("[Profiling] Discarding profile because of invalid profileSessionSampleRate."),!1)}function vm(e){return typeof e.profilesSampleRate<"u"}function lV(e,t,r,s){return aV(r)?XK(e,t,r,s):null}const co=new Map;function cV(){return co.size}function dV(e){const t=co.get(e);return t&&co.delete(e),t}function uV(e,t){if(co.set(e,t),co.size>30){const r=co.keys().next().value;r!==void 0&&co.delete(r)}}function hV(e){var t,r,s,a,i;return!((t=e==null?void 0:e.contexts)!=null&&t.profile)||!e.contexts||(e.contexts.trace={...((r=e.contexts)==null?void 0:r.trace)??{},data:{...((a=(s=e.contexts)==null?void 0:s.trace)==null?void 0:a.data)??{},"thread.id":xi,"thread.name":Of}},(i=e.spans)==null||i.forEach(o=>{o.data={...o.data||{},"thread.id":xi,"thread.name":Of}})),e}function XS(e){let t;YT(e)&&(t=At()*1e3);const r=ZT();if(!r)return;pe&&Y.log(`[Profiling] started profiling span: ${Re(e).description}`);const s=gn();let a=null;We().setContext("profile",{profile_id:s,start_timestamp:t});async function i(){if(e&&r){if(a){pe&&Y.log("[Profiling] profile for:",Re(e).description,"already exists, returning early");return}return r.stop().then(h=>{if(o&&(ye.clearTimeout(o),o=void 0),pe&&Y.log(`[Profiling] stopped profiling of span: ${Re(e).description}`),!h){pe&&Y.log(`[Profiling] profiler returned null profile for: ${Re(e).description}`,"this may indicate an overlapping span or a call to stopProfiling with a profile title that was never started");return}a=h,uV(s,h)}).catch(h=>{pe&&Y.log("[Profiling] error while stopping profiler:",h)})}}let o=ye.setTimeout(()=>{pe&&Y.log("[Profiling] max profile duration elapsed, stopping profiling for:",Re(e).description),i()},XT);const d=e.end.bind(e);function u(){return e?(i().then(()=>{d()},()=>{d()}),e):d()}e.end=u}const mV=6e4,fV=3e5;class pV{constructor(){this._client=void 0,this._profiler=void 0,this._chunkTimer=void 0,this._profilerId=void 0,this._isRunning=!1,this._sessionSampled=!1,this._lifecycleMode=void 0,this._activeRootSpanIds=new Set,this._rootSpanTimeouts=new Map}initialize(t){const r=t.getOptions().profileLifecycle,s=oV(t.getOptions());pe&&Y.log(`[Profiling] Initializing profiler (lifecycle='${r}').`),s||pe&&Y.log("[Profiling] Session not sampled. Skipping lifecycle profiler initialization."),this._profilerId=gn(),this._client=t,this._sessionSampled=s,this._lifecycleMode=r,r==="trace"&&this._setupTraceLifecycleListeners(t)}start(){if(this._lifecycleMode==="trace"){pe&&Y.warn('[Profiling] `profileLifecycle` is set to "trace". Calls to `uiProfiler.start()` are ignored in trace mode.');return}if(this._isRunning){pe&&Y.warn("[Profiling] Profile session is already running, `uiProfiler.start()` is a no-op.");return}if(!this._sessionSampled){pe&&Y.warn("[Profiling] Session is not sampled, `uiProfiler.start()` is a no-op.");return}this._beginProfiling()}stop(){if(this._lifecycleMode==="trace"){pe&&Y.warn('[Profiling] `profileLifecycle` is set to "trace". Calls to `uiProfiler.stop()` are ignored in trace mode.');return}if(!this._isRunning){pe&&Y.warn("[Profiling] Profiler is not running, `uiProfiler.stop()` is a no-op.");return}this._endProfiling()}notifyRootSpanActive(t){if(this._lifecycleMode!=="trace"||!this._sessionSampled)return;const r=t.spanContext().spanId;if(!r||this._activeRootSpanIds.has(r))return;this._registerTraceRootSpan(r);const s=this._activeRootSpanIds.size;s===1&&(pe&&Y.log("[Profiling] Detected already active root span during setup. Active root spans now:",s),this._beginProfiling())}_beginProfiling(){if(!this._isRunning){if(this._isRunning=!0,pe&&Y.log("[Profiling] Started profiling with profiler ID:",this._profilerId),xa().setContext("profile",{profiler_id:this._profilerId}),this._startProfilerInstance(),!this._profiler){pe&&Y.log("[Profiling] Failed to start JS Profiler; stopping."),this._resetProfilerInfo();return}this._startPeriodicChunking()}}_endProfiling(){this._isRunning&&(this._isRunning=!1,this._chunkTimer&&(clearTimeout(this._chunkTimer),this._chunkTimer=void 0),this._clearAllRootSpanTimeouts(),this._collectCurrentChunk().catch(t=>{pe&&Y.error("[Profiling] Failed to collect current profile chunk on `stop()`:",t)}),this._lifecycleMode==="manual"&&xa().setContext("profile",{}))}_setupTraceLifecycleListeners(t){t.on("spanStart",r=>{if(!this._sessionSampled){pe&&Y.log("[Profiling] Span not profiled because of negative sampling decision for user session.");return}if(r!==Kt(r))return;if(!r.isRecording()){pe&&Y.log("[Profiling] Discarding profile because root span was not sampled.");return}const s=r.spanContext().spanId;if(!s||this._activeRootSpanIds.has(s))return;this._registerTraceRootSpan(s);const a=this._activeRootSpanIds.size;a===1&&(pe&&Y.log(`[Profiling] Root span ${s} started. Profiling active while there are active root spans (count=${a}).`),this._beginProfiling())}),t.on("spanEnd",r=>{if(!this._sessionSampled)return;const s=r.spanContext().spanId;if(!s||!this._activeRootSpanIds.has(s))return;this._activeRootSpanIds.delete(s);const a=this._activeRootSpanIds.size;pe&&Y.log(`[Profiling] Root span with ID ${s} ended. Will continue profiling for as long as there are active root spans (currently: ${a}).`),a===0&&(this._collectCurrentChunk().catch(i=>{pe&&Y.error("[Profiling] Failed to collect current profile chunk on last `spanEnd`:",i)}),this._endProfiling())})}_resetProfilerInfo(){this._isRunning=!1,xa().setContext("profile",{})}_clearAllRootSpanTimeouts(){this._rootSpanTimeouts.forEach(t=>clearTimeout(t)),this._rootSpanTimeouts.clear()}_registerTraceRootSpan(t){this._activeRootSpanIds.add(t);const r=setTimeout(()=>this._onRootSpanTimeout(t),fV);this._rootSpanTimeouts.set(t,r)}_startProfilerInstance(){var r;if(((r=this._profiler)==null?void 0:r.stopped)===!1)return;const t=ZT();if(!t){pe&&Y.log("[Profiling] Failed to start JS Profiler.");return}this._profiler=t}_startPeriodicChunking(){this._isRunning&&(this._chunkTimer=setTimeout(()=>{if(this._collectCurrentChunk().catch(t=>{pe&&Y.error("[Profiling] Failed to collect current profile chunk during periodic chunking:",t)}),this._isRunning){if(this._startProfilerInstance(),!this._profiler){this._resetProfilerInfo();return}this._startPeriodicChunking()}},mV))}_onRootSpanTimeout(t){this._rootSpanTimeouts.has(t)&&(this._rootSpanTimeouts.delete(t),this._activeRootSpanIds.has(t)&&(pe&&Y.log(`[Profiling] Reached 5-minute timeout for root span ${t}. You likely started a manual root span that never called \`.end()\`.`),this._activeRootSpanIds.delete(t),this._activeRootSpanIds.size===0&&this._endProfiling()))}async _collectCurrentChunk(){const t=this._profiler;if(this._profiler=void 0,!!t)try{const r=await t.stop(),s=ZK(r,this._client,this._profilerId),a=eV(s);if("reason"in a){pe&&Y.log("[Profiling] Discarding invalid profile chunk (this is probably a bug in the SDK):",a.reason);return}this._sendProfileChunk(s),pe&&Y.log("[Profiling] Collected browser profile chunk.")}catch(r){pe&&Y.log("[Profiling] Error while stopping JS Profiler for chunk:",r)}}_sendProfileChunk(t){var d;const r=this._client,s=Jf((d=r.getSdkMetadata)==null?void 0:d.call(r)),a=r.getDsn(),i=r.getOptions().tunnel,o=Es({event_id:gn(),sent_at:new Date().toISOString(),...s&&{sdk:s},...!!i&&a&&{dsn:Ca(a)}},[[{type:"profile_chunk"},t]]);r.sendEnvelope(o).then(null,u=>{pe&&Y.error("Error while sending profile chunk envelope:",u)})}}const xV="BrowserProfiling",gV=(()=>({name:xV,setup(e){const t=e.getOptions(),r=new pV;if(!vm(t)&&!t.profileLifecycle&&(t.profileLifecycle="manual"),vm(t)&&!t.profilesSampleRate){pe&&Y.log("[Profiling] Profiling disabled, no profiling options found.");return}const s=Vt(),a=s&&Kt(s);if(vm(t)&&t.profileSessionSampleRate!==void 0&&pe&&Y.warn("[Profiling] Both legacy profiling (`profilesSampleRate`) and UI profiling settings are defined. `profileSessionSampleRate` has no effect when legacy profiling is enabled."),vm(t))a&&YT(a)&&QS(a)&&XS(a),e.on("spanStart",i=>{i===Kt(i)&&QS(i)&&XS(i)}),e.on("beforeEnvelope",i=>{var u,h;if(!cV())return;const o=sV(i);if(!o.length)return;const d=[];for(const p of o){const f=p==null?void 0:p.contexts,x=(u=f==null?void 0:f.profile)==null?void 0:u.profile_id,y=(h=f==null?void 0:f.profile)==null?void 0:h.start_timestamp;if(typeof x!="string"){pe&&Y.log("[Profiling] cannot find profile for a span without a profile context");continue}if(!x){pe&&Y.log("[Profiling] cannot find profile for a span without a profile context");continue}f!=null&&f.profile&&delete f.profile;const b=dV(x);if(!b){pe&&Y.log(`[Profiling] Could not retrieve profile for span: ${x}`);continue}const w=lV(x,y,b,p);w&&d.push(w)}rV(i,d)});else{const i=t.profileLifecycle;if(e.on("startUIProfiler",()=>r.start()),e.on("stopUIProfiler",()=>r.stop()),i==="manual")r.initialize(e);else if(i==="trace"){if(!Vr(t)){pe&&Y.warn("[Profiling] `profileLifecycle` is 'trace' but tracing is disabled. Set a `tracesSampleRate` or `tracesSampler` to enable span tracing.");return}r.initialize(e),a&&r.notifyRootSpanActive(a),ye.setTimeout(()=>{const o=Vt(),d=o&&Kt(o);d&&r.notifyRootSpanActive(d)},0)}}},processEvent(e){return hV(e)}})),bV=gV,yV=()=>({name:"LaunchDarkly",processEvent(e,t,r){return Cc(e)}});function vV(){return{name:"sentry-flag-auditor",type:"flag-used",synchronous:!0,method:(e,t,r)=>{Ro(e,t.value),Io(e,t.value)}}}const wV=()=>({name:"OpenFeature",processEvent(e,t,r){return Cc(e)}});class _V{after(t,r){Ro(r.flagKey,r.value),Io(r.flagKey,r.value)}error(t,r,s){Ro(t.flagKey,t.defaultValue),Io(t.flagKey,t.defaultValue)}}const jV=({featureFlagClientClass:e})=>({name:"Unleash",setupOnce(){const t=e.prototype;An(t,"isEnabled",NV)},processEvent(t,r,s){return Cc(t)}});function NV(e){return function(...t){const r=t[0],s=e.apply(this,t);return typeof r=="string"&&typeof s=="boolean"?(Ro(r,s),Io(r,s)):pe&&Y.error(`[Feature Flags] UnleashClient.isEnabled does not match expected signature. arg0: ${r} (${typeof r}), result: ${s} (${typeof s})`),s}}const SV=(({growthbookClass:e})=>yD({growthbookClass:e})),kV=({featureFlagClient:e})=>({name:"Statsig",setup(t){e.on("gate_evaluation",r=>{Ro(r.gate.name,r.gate.value),Io(r.gate.name,r.gate.value)})},processEvent(t,r,s){return Cc(t)}});async function EV(){const e=be();if(!e)return"no-client-active";if(!e.getDsn())return"no-dsn-configured";try{await RE(()=>fetch("https://o447951.ingest.sentry.io/api/4509632503087104/envelope/?sentry_version=7&sentry_key=c1dfb07d783ad5325c245c1fd3725390&sentry_client=sentry.javascript.browser%2F1.33.7",{body:"{}",method:"POST",mode:"cors",credentials:"omit"}))}catch{return"sentry-unreachable"}}const CV="WebWorker",TV=({worker:e})=>({name:CV,setupOnce:()=>{(Array.isArray(e)?e:[e]).forEach(t=>ZS(t))},addWorker:t=>ZS(t)});function ZS(e){e.addEventListener("message",t=>{PV(t.data)&&(t.stopImmediatePropagation(),t.data._sentryDebugIds&&(pe&&Y.log("Sentry debugId web worker message received",t.data),ye._sentryDebugIds={...t.data._sentryDebugIds,...ye._sentryDebugIds}),t.data._sentryWorkerError&&(pe&&Y.log("Sentry worker rejection message received",t.data._sentryWorkerError),RV(t.data._sentryWorkerError)))})}function RV(e){const t=be();if(!t)return;const r=t.getOptions().stackParser,s=t.getOptions().attachStacktrace,a=e.reason,i=_i(a)?MC(a):hp(r,a,void 0,s,!0);i.level="error",e.filename&&(i.contexts={...i.contexts,worker:{filename:e.filename}}),Ec(i,{originalException:a,mechanism:{handled:!1,type:"auto.browser.web_worker.onunhandledrejection"}}),pe&&Y.log("Captured worker unhandled rejection",a)}function IV({self:e}){e.postMessage({_sentryMessage:!0,_sentryDebugIds:e._sentryDebugIds??void 0}),e.addEventListener("unhandledrejection",t=>{var a;const s={reason:AC(t),filename:(a=e.location)==null?void 0:a.href};e.postMessage({_sentryMessage:!0,_sentryWorkerError:s}),pe&&Y.log("[Sentry Worker] Forwarding unhandled rejection to parent",s)}),pe&&Y.log("[Sentry Worker] Registered worker with unhandled rejection handling")}function PV(e){if(!Ds(e)||e._sentryMessage!==!0)return!1;const t="_sentryDebugIds"in e,r="_sentryWorkerError"in e;return!(!t&&!r||t&&!(Ds(e._sentryDebugIds)||e._sentryDebugIds===void 0)||r&&!Ds(e._sentryWorkerError))}function e4(e){const t={...e};return l5(t,"react"),Cy("react",{version:T.version}),q9(t)}function AV(e){const t=e.match(/^([^.]+)/);return t!==null&&parseInt(t[0])>=17}function MV(e,t){const r=new WeakSet;function s(a,i){if(!r.has(a)){if(a.cause)return r.add(a),s(a.cause,i);a.cause=i}}s(e,t)}function Mv(e,{componentStack:t},r){if(AV(T.version)&&fa(e)&&t){const s=new Error(e.message);s.name=`React ErrorBoundary ${e.name}`,s.stack=t,MV(e,s)}return br(s=>(s.setContext("react",{componentStack:t}),mt(e,r)))}function OV(e){return(t,r)=>{const s=!!e,a=Mv(t,r,{mechanism:{handled:s,type:"auto.function.react.error_handler"}});s&&e(t,r,a)}}const t4="ui.react.render",LV="ui.react.update",n4="ui.react.mount";var v0={exports:{}},pt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e2;function $V(){if(e2)return pt;e2=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,s=e?Symbol.for("react.fragment"):60107,a=e?Symbol.for("react.strict_mode"):60108,i=e?Symbol.for("react.profiler"):60114,o=e?Symbol.for("react.provider"):60109,d=e?Symbol.for("react.context"):60110,u=e?Symbol.for("react.async_mode"):60111,h=e?Symbol.for("react.concurrent_mode"):60111,p=e?Symbol.for("react.forward_ref"):60112,f=e?Symbol.for("react.suspense"):60113,x=e?Symbol.for("react.suspense_list"):60120,y=e?Symbol.for("react.memo"):60115,b=e?Symbol.for("react.lazy"):60116,w=e?Symbol.for("react.block"):60121,v=e?Symbol.for("react.fundamental"):60117,j=e?Symbol.for("react.responder"):60118,C=e?Symbol.for("react.scope"):60119;function S(R){if(typeof R=="object"&&R!==null){var E=R.$$typeof;switch(E){case t:switch(R=R.type,R){case u:case h:case s:case i:case a:case f:return R;default:switch(R=R&&R.$$typeof,R){case d:case p:case b:case y:case o:return R;default:return E}}case r:return E}}}function k(R){return S(R)===h}return pt.AsyncMode=u,pt.ConcurrentMode=h,pt.ContextConsumer=d,pt.ContextProvider=o,pt.Element=t,pt.ForwardRef=p,pt.Fragment=s,pt.Lazy=b,pt.Memo=y,pt.Portal=r,pt.Profiler=i,pt.StrictMode=a,pt.Suspense=f,pt.isAsyncMode=function(R){return k(R)||S(R)===u},pt.isConcurrentMode=k,pt.isContextConsumer=function(R){return S(R)===d},pt.isContextProvider=function(R){return S(R)===o},pt.isElement=function(R){return typeof R=="object"&&R!==null&&R.$$typeof===t},pt.isForwardRef=function(R){return S(R)===p},pt.isFragment=function(R){return S(R)===s},pt.isLazy=function(R){return S(R)===b},pt.isMemo=function(R){return S(R)===y},pt.isPortal=function(R){return S(R)===r},pt.isProfiler=function(R){return S(R)===i},pt.isStrictMode=function(R){return S(R)===a},pt.isSuspense=function(R){return S(R)===f},pt.isValidElementType=function(R){return typeof R=="string"||typeof R=="function"||R===s||R===h||R===i||R===a||R===f||R===x||typeof R=="object"&&R!==null&&(R.$$typeof===b||R.$$typeof===y||R.$$typeof===o||R.$$typeof===d||R.$$typeof===p||R.$$typeof===v||R.$$typeof===j||R.$$typeof===C||R.$$typeof===w)},pt.typeOf=S,pt}var t2;function DV(){return t2||(t2=1,v0.exports=$V()),v0.exports}var w0,n2;function FV(){if(n2)return w0;n2=1;var e=DV(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},i={};i[e.ForwardRef]=s,i[e.Memo]=a;function o(b){return e.isMemo(b)?a:i[b.$$typeof]||t}var d=Object.defineProperty,u=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,p=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,x=Object.prototype;function y(b,w,v){if(typeof w!="string"){if(x){var j=f(w);j&&j!==x&&y(b,j,v)}var C=u(w);h&&(C=C.concat(h(w)));for(var S=o(b),k=o(w),R=0;R<C.length;++R){var E=C[R];if(!r[E]&&!(v&&v[E])&&!(k&&k[E])&&!(S&&S[E])){var I=p(w,E);try{d(b,E,I)}catch{}}}}return b}return w0=y,w0}var r4=FV();const s4=JI(r4),UV=YI({__proto__:null,default:s4},[r4]),Sp=s4||UV,qV="unknown";class Ov extends T.Component{constructor(t){super(t);const{name:r,disabled:s=!1}=this.props;s||(this._mountSpan=Yr({name:`<${r}>`,onlyIfParent:!0,op:n4,attributes:{[Ge]:"auto.ui.react.profiler","ui.component_name":r}}))}componentDidMount(){this._mountSpan&&this._mountSpan.end()}shouldComponentUpdate({updateProps:t,includeUpdates:r=!0}){if(r&&this._mountSpan&&t!==this.props.updateProps){const s=Object.keys(t).filter(a=>t[a]!==this.props.updateProps[a]);if(s.length>0){const a=At();this._updateSpan=To(this._mountSpan,()=>Yr({name:`<${this.props.name}>`,onlyIfParent:!0,op:LV,startTime:a,attributes:{[Ge]:"auto.ui.react.profiler","ui.component_name":this.props.name,"ui.react.changed_props":s}}))}}return!0}componentDidUpdate(){this._updateSpan&&(this._updateSpan.end(),this._updateSpan=void 0)}componentWillUnmount(){const t=At(),{name:r,includeRender:s=!0}=this.props;if(this._mountSpan&&s){const a=Re(this._mountSpan).timestamp;To(this._mountSpan,()=>{const i=Yr({onlyIfParent:!0,name:`<${r}>`,op:t4,startTime:a,attributes:{[Ge]:"auto.ui.react.profiler","ui.component_name":r}});i&&i.end(t)})}}render(){return this.props.children}}Object.assign(Ov,{defaultProps:{disabled:!1,includeRender:!0,includeUpdates:!0}});function BV(e,t){const r=(t==null?void 0:t.name)||e.displayName||e.name||qV,s=a=>T.createElement(Ov,{...t,name:r,updateProps:a},T.createElement(e,{...a}));return s.displayName=`profiler(${r})`,Sp(s,e),s}function HV(e,t={disabled:!1,hasRenderSpan:!0}){const[r]=T.useState(()=>{if(!(t!=null&&t.disabled))return Yr({name:`<${e}>`,onlyIfParent:!0,op:n4,attributes:{[Ge]:"auto.ui.react.profiler","ui.component_name":e}})});T.useEffect(()=>(r&&r.end(),()=>{if(r&&t.hasRenderSpan){const s=Re(r).timestamp,a=At(),i=Yr({name:`<${e}>`,onlyIfParent:!0,op:t4,startTime:s,attributes:{[Ge]:"auto.ui.react.profiler","ui.component_name":e}});i&&i.end(a)}}),[])}const Bn=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,WV="unknown",_0={componentStack:null,error:null,eventId:null};let a4=class extends T.Component{constructor(t){super(t),this.state=_0,this._openFallbackReportDialog=!0;const r=be();r&&t.showDialog&&(this._openFallbackReportDialog=!1,this._cleanupHook=r.on("afterSendEvent",s=>{!s.type&&this._lastEventId&&s.event_id===this._lastEventId&&Ib({...t.dialogOptions,eventId:this._lastEventId})}))}componentDidCatch(t,r){const{componentStack:s}=r,{beforeCapture:a,onError:i,showDialog:o,dialogOptions:d}=this.props;br(u=>{a&&a(u,t,s);const h=this.props.handled!=null?this.props.handled:!!this.props.fallback,p=Mv(t,r,{mechanism:{handled:h,type:"auto.function.react.error_boundary"}});i&&i(t,s,p),o&&(this._lastEventId=p,this._openFallbackReportDialog&&Ib({...d,eventId:p})),this.setState({error:t,componentStack:s,eventId:p})})}componentDidMount(){const{onMount:t}=this.props;t&&t()}componentWillUnmount(){const{error:t,componentStack:r,eventId:s}=this.state,{onUnmount:a}=this.props;a&&(this.state===_0?a(null,null,null):a(t,r,s)),this._cleanupHook&&(this._cleanupHook(),this._cleanupHook=void 0)}resetErrorBoundary(){const{onReset:t}=this.props,{error:r,componentStack:s,eventId:a}=this.state;t&&t(r,s,a),this.setState(_0)}render(){const{fallback:t,children:r}=this.props,s=this.state;if(s.componentStack===null)return typeof r=="function"?r():r;const a=typeof t=="function"?T.createElement(t,{error:s.error,componentStack:s.componentStack,resetError:()=>this.resetErrorBoundary(),eventId:s.eventId}):t;return T.isValidElement(a)?a:(t&&Bn&&Y.warn("fallback did not produce a valid ReactElement"),null)}};function zV(e,t){const r=e.displayName||e.name||WV,s=T.memo(a=>T.createElement(a4,{...t},T.createElement(e,{...a})));return s.displayName=`errorBoundary(${r})`,Sp(s,e),s}const GV="redux.action",KV="info",VV={attachReduxState:!0,actionTransformer:e=>e,stateTransformer:e=>e||null};function YV(e){const t={...VV,...e};return r=>(s,a)=>{t.attachReduxState&&xa().addEventProcessor((d,u)=>{try{d.type===void 0&&d.contexts.state.state.type==="redux"&&(u.attachments=[...u.attachments||[],{filename:"redux_state.json",data:JSON.stringify(d.contexts.state.state.value)}])}catch{}return d});function i(d){return(u,h)=>{const p=d(u,h),f=We(),x=t.actionTransformer(h);typeof x<"u"&&x!==null&&Ss({category:GV,data:x,type:KV});const y=t.stateTransformer(p);if(typeof y<"u"&&y!==null){const w=be(),v=w==null?void 0:w.getOptions(),j=(v==null?void 0:v.normalizeDepth)||3,C={state:{type:"redux",value:y}};yn(C,"__sentry_override_normalization_depth__",3+j),f.setContext("state",C)}else f.setContext("state",null);const{configureScopeWithState:b}=t;return typeof b=="function"&&b(f,p),p}}const o=r(i(s),a);return o.replaceReducer=new Proxy(o.replaceReducer,{apply:function(d,u,h){d.apply(u,[i(h[0])])}}),o}}function JV(e){const t=Ho({...e,instrumentPageLoad:!1,instrumentNavigation:!1}),{history:r,routes:s,match:a,instrumentPageLoad:i=!0,instrumentNavigation:o=!0}=e;return{...t,afterAllSetup(d){t.afterAllSetup(d),i&&ye.location&&r2(s,ye.location,a,(u,h="url")=>{Ac(d,{name:u,attributes:{[Nt]:"pageload",[Ge]:"auto.pageload.react.reactrouter_v3",[xt]:h}})}),o&&r.listen&&r.listen(u=>{(u.action==="PUSH"||u.action==="POP")&&r2(s,u,a,(h,p="url")=>{Mc(d,{name:h,attributes:{[Nt]:"navigation",[Ge]:"auto.navigation.react.reactrouter_v3",[xt]:p}})})})}}}function r2(e,t,r,s){let a=t.pathname;r({location:t,routes:e},(i,o,d)=>{if(i||!d)return s(a);const u=QV(d.routes||[]);return u.length===0||u==="/*"?s(a):(a=u,s(a,"route"))})}function QV(e){var s;if(!Array.isArray(e)||e.length===0)return"";const t=e.filter(a=>!!a.path);let r=-1;for(let a=t.length-1;a>=0;a--)if((s=t[a].path)!=null&&s.startsWith("/")){r=a;break}return t.slice(r).reduce((a,{path:i})=>{const o=a==="/"||a===""?i:`/${i}`;return`${a}${o}`},"")}function XV(e,t={}){const r=e,s=Ho({...t,instrumentNavigation:!1,instrumentPageLoad:!1}),{instrumentPageLoad:a=!0,instrumentNavigation:i=!0}=t;return{...s,afterAllSetup(o){s.afterAllSetup(o);const d=ye.location;if(a&&d){const u=r.matchRoutes(d.pathname,r.options.parseSearch(d.search),{preload:!1,throwOnError:!1}),h=u[u.length-1];Ac(o,{name:h?h.routeId:d.pathname,attributes:{[Nt]:"pageload",[Ge]:"auto.pageload.react.tanstack_router",[xt]:h?"route":"url",...s2(h)}})}i&&r.subscribe("onBeforeNavigate",u=>{if(!u.fromLocation||u.toLocation.state===u.fromLocation.state)return;const h=r.matchRoutes(u.toLocation.pathname,u.toLocation.search,{preload:!1,throwOnError:!1}),p=h[h.length-1],f=ye.location,x=Mc(o,{name:p?p.routeId:f.pathname,attributes:{[Nt]:"navigation",[Ge]:"auto.navigation.react.tanstack_router",[xt]:p?"route":"url"}}),y=r.subscribe("onResolved",b=>{if(y(),x){const w=r.matchRoutes(b.toLocation.pathname,b.toLocation.search,{preload:!1,throwOnError:!1}),v=w[w.length-1];v&&(x.updateName(v.routeId),x.setAttribute(xt,"route"),x.setAttributes(s2(v)))}})})}}}function s2(e){if(!e)return{};const t={};return Object.entries(e.params).forEach(([r,s])=>{t[`url.path.params.${r}`]=s,t[`url.path.parameter.${r}`]=s,t[`params.${r}`]=s}),t}function ZV(e){const t=Ho({...e,instrumentPageLoad:!1,instrumentNavigation:!1}),{history:r,routes:s,matchPath:a,instrumentPageLoad:i=!0,instrumentNavigation:o=!0}=e;return{...t,afterAllSetup(d){t.afterAllSetup(d),i4(d,i,o,r,"reactrouter_v4",s,a)}}}function eY(e){const t=Ho({...e,instrumentPageLoad:!1,instrumentNavigation:!1}),{history:r,routes:s,matchPath:a,instrumentPageLoad:i=!0,instrumentNavigation:o=!0}=e;return{...t,afterAllSetup(d){t.afterAllSetup(d),i4(d,i,o,r,"reactrouter_v5",s,a)}}}function i4(e,t,r,s,a,i=[],o){function d(){if(s.location)return s.location.pathname;if(ye.location)return ye.location.pathname}function u(h){if(i.length===0||!o)return[h,"url"];const p=o4(i,h,o);for(const f of p)if(f.match.isExact)return[f.match.path,"route"];return[h,"url"]}if(t){const h=d();if(h){const[p,f]=u(h);Ac(e,{name:p,attributes:{[Nt]:"pageload",[Ge]:`auto.pageload.react.${a}`,[xt]:f}})}}r&&s.listen&&s.listen((h,p)=>{if(p&&(p==="PUSH"||p==="POP")){const[f,x]=u(h.pathname);Mc(e,{name:f,attributes:{[Nt]:"navigation",[Ge]:`auto.navigation.react.${a}`,[xt]:x}})}})}function o4(e,t,r,s=[]){return e.some(a=>{const i=a.path?r(t,a):s.length?s[s.length-1].match:tY(t);return i&&(s.push({route:a,match:i}),a.routes&&o4(a.routes,t,r,s)),!!i}),s}function tY(e){return{path:"/",url:"/",params:{},isExact:e==="/"}}function nY(e){const t=e.displayName||e.name,r=s=>{var a;if((a=s==null?void 0:s.computedMatch)!=null&&a.isExact){const i=s.computedMatch.path,o=rY();We().setTransactionName(i),o&&(o.updateName(i),o.setAttribute(xt,"route"))}return T.createElement(e,{...s})};return r.displayName=`sentryRoute(${t})`,Sp(r,e),r}function rY(){const e=Vt(),t=e&&Kt(e);if(!t)return;const r=Re(t).op;return r==="navigation"||r==="pageload"?t:void 0}let Lv,Hl=!1;const gi=[],sY=10;function aY(e,t){const r={};return gi.length>=sY&&(Bn&&Y.warn("[React Router] Navigation context stack overflow - removing oldest context"),gi.shift()),gi.push({token:r,targetPath:e,span:t}),r}function iY(e){const t=gi[gi.length-1];(t==null?void 0:t.token)===e&&gi.pop()}function l4(){const e=gi.length;return e>0?gi[e-1]??null:null}function oY(e,t=!1){Lv=e,Hl=t}function lY(e){return dY(e.route.path||"")}function cY(e){return e.params["*"]||""}function dY(e){return e[e.length-1]==="*"?e.slice(0,-1):e}function Wl(e){return e[e.length-1]==="/"?e.slice(0,-1):e}function c4(e){return e.endsWith("*")}function ki(e){return e.includes("/*")||e.endsWith("*")}function a2(e,t){var r;return c4(e)&&!!((r=t.route.children)!=null&&r.length)||!1}function uY(e){var t;return!!(!e.children&&e.element&&((t=e.path)!=null&&t.endsWith("/*")))}function hY(e,t,r){const s=e&&e.length>0?e:Hl?kp(t,r):t;let a=s.slice(-2)==="/*"?s.slice(0,-2):s;return a.length>1&&a[a.length-1]==="/"&&(a=a.slice(0,-1)),[a,"route"]}function i2(e){return e.split(/\\?\//).filter(t=>t.length>0&&t!==",").length}function kp(e,t){if(!t||t==="/"||!e.toLowerCase().startsWith(t.toLowerCase()))return e;const r=t.endsWith("/")?t.length-1:t.length,s=e.charAt(r);return s&&s!=="/"?e:e.slice(r)||"/"}function Lf(e){return e[0]==="/"?e:`/${e}`}function d4(e,t){const r=Lv(e,t);if(!r||r.length===0)return"";for(const s of r)if(s.route.path&&s.route.path!=="*"){const a=lY(s),i=kp(t.pathname,Lf(s.pathnameBase));return t.pathname===i?Wl(i):Wl(Wl(a||"")+Lf(d4(e.filter(o=>o!==s.route),{pathname:i})))}return""}function mY(e,t){const r=Lv(t,e);if(r){for(const s of r)if(uY(s.route)&&cY(s))return!0}return!1}function o2(e,t){return Hl?kp(e.pathname,t):e.pathname||""}function fY(e,t,r,s=""){if(!e||e.length===0)return[Hl?kp(t.pathname,s):t.pathname,"url"];if(!r)return[o2(t,s),"url"];let a="";for(const i of r){const o=i.route;if(!o)continue;if(o.index)return hY(a,i.pathname,s);const d=o.path;if(!d||a2(d,i))continue;const u=d[0]==="/"||a[a.length-1]==="/"?d:`/${d}`;if(a=Wl(a)+Lf(u),Wl(t.pathname)===Wl(s+i.pathname))return i2(a)!==i2(i.pathname)&&!c4(a)?[(Hl?"":s)+u,"route"]:(a2(a,i)&&(a=a.slice(0,-1)),[(Hl?"":s)+a,"route"])}return[o2(t,s),"url"]}function Ep(e,t,r,s,a=""){let i,o="url";const d=mY(e,r);return d&&(i=Lf(d4(r,e)),o="route"),(!d||!i)&&([i,o]=fY(t,e,s,a)),[i||e.pathname,o]}function ws(){const e=Vt(),t=e?Kt(e):void 0;if(!t)return;const r=Re(t).op;return r==="navigation"||r==="pageload"?t:void 0}function pY(){const e=l4();if(e!=null&&e.targetPath)return{pathname:e.targetPath,search:"",hash:"",state:null,key:"default"};if(typeof ye<"u")try{const t=ye.location;if(t)return{pathname:t.pathname,search:t.search||"",hash:t.hash||"",state:null,key:"default"}}catch{Bn&&Y.warn("[React Router] Could not access window.location")}return null}function xY(){const e=l4();return e?e.span:ws()}function gY(e,t,r,s){const a=new Proxy(e,{apply(i,o,d){const u=pY(),h=xY(),p=i.apply(o,d);return bY(p,t,r,s,u,h),p}});return yn(a,"__sentry_proxied__",!0),a}function bY(e,t,r,s,a,i){Fo(e)?e.then(o=>{Array.isArray(o)&&s(o,t,a??void 0,i)}).catch(o=>{Bn&&Y.warn(`Error resolving async handler '${r}' for route`,t,o)}):Array.isArray(e)&&s(e,t,a??void 0,i)}function Cp(e,t){if(e.handle&&typeof e.handle=="object")for(const r of Object.keys(e.handle)){const s=e.handle[r];typeof s=="function"&&!s.__sentry_proxied__&&(e.handle[r]=gY(s,e,r,t))}if(Array.isArray(e.children))for(const r of e.children)Cp(r,t)}let bi,yi,vi,Vm,Qr,Tp=!1,uo=3e3;const u4=new WeakSet,so=new WeakMap,Zn=new Set,Ym=new WeakMap;function yY(e){return ye!=null&&ye.requestAnimationFrame?ye.requestAnimationFrame(e):setTimeout(e,0)}function l2(e){ye!=null&&ye.cancelAnimationFrame?ye.cancelAnimationFrame(e):clearTimeout(e)}function h4(e){return`${e.pathname}${e.search||""}${e.hash||""}`}function c2(e){return e.includes(":")||e.includes("*")}function vY(e,t,r,s){var i;if(!e)return{skip:!1,shouldUpdate:!1};if(e.locationKey===t&&(e.isPlaceholder||!s)){const o=!!e.routeName&&ki(e.routeName),d=ki(r),u=!!e.routeName&&c2(e.routeName),h=c2(r),p=o&&!d,f=!u&&h,x=r!==e.routeName&&r.length>(((i=e.routeName)==null?void 0:i.length)||0)&&!d;return{skip:!0,shouldUpdate:!!(e.routeName&&(p||f||x))}}return{skip:!1,shouldUpdate:!1}}function wY(e,t){const r=t.children||[],s=e.filter(a=>!r.some(i=>i===a||a.path&&i.path===a.path||a.id&&i.id===a.id));s.length>0&&(t.children=[...r,...s])}function _Y(e,t){let r=Ym.get(e);r||(r=new Set,Ym.set(e,r)),r.add(t),t.finally(()=>{const s=Ym.get(e);s&&s.delete(t)})}function $v(e,t,r=null,s){e.forEach(i=>{Zn.add(i),Tp&&Cp(i,$v)}),t&&wY(e,t);const a=s??ws();if(a){const i=Re(a);if(i.timestamp){Bn&&Y.warn("[React Router] Lazy handler resolved after span ended - skipping update");return}const o=i.op;let d=r;if(!d&&!s&&typeof ye<"u"){const u=ye.location;u!=null&&u.pathname&&(d={pathname:u.pathname})}d&&(o==="pageload"?Ou({activeRootSpan:a,location:{pathname:d.pathname},routes:Array.from(Zn),allRoutes:Array.from(Zn)}):o==="navigation"&&Wb(a,d,Array.from(Zn),!1,Qr))}}function Wb(e,t,r,s=!1,a){var p;const i=Re(e),o=i.description,d=e==null?void 0:e.__sentry_navigation_name_set__,u=o&&ki(o);if((!d||s||u)&&!i.timestamp){const f=a(r,t),[x,y]=Ep(t,r,r,f||[],""),b=(p=i.data)==null?void 0:p[xt];x&&(!o||!d&&(b!=="route"||y==="route")||b!=="route"&&y==="route"||b==="route"&&y==="route"&&u)&&(e.updateName(x),e.setAttribute(xt,y),!ki(x)&&y==="route"&&yn(e,"__sentry_navigation_name_set__",!0))}}function m4(e,t,r,s,a){let i=!1,o=!!a&&Re(a).op==="pageload",d=!1,u=null,h=null;e.subscribe(p=>{if(!i){const x=ws();x&&Re(x).op==="pageload"?o=!0:o&&(p.historyAction==="POP"&&!d?d=!0:i=!0)}if(p.historyAction==="PUSH"||p.historyAction==="POP"&&i){const x=h4(p.location),y=()=>{h!==x&&(h=x,u=null,Dv({location:p.location,routes:t,navigationType:p.historyAction,version:r,basename:s,allRoutes:Array.from(Zn)}))};p.navigation.state!=="idle"?(h!==x&&(h=null),u!==null&&l2(u),u=yY(y)):(u!==null&&(l2(u),u=null),y())}})}function f4(e,t){return!bi||!yi||!vi||!Qr?(Bn&&Y.warn(`reactRouterV${t}Instrumentation was unable to wrap the \`createRouter\` function because of one or more missing parameters.`),e):function(r,s){if(Mu(r),Tp)for(const u of r)Cp(u,$v);const a=b4(s),i=e(r,a),o=s==null?void 0:s.basename,d=ws();return i.state.historyAction==="POP"&&d&&Ou({activeRootSpan:d,location:i.state.location,routes:r,basename:o,allRoutes:Array.from(Zn)}),m4(i,r,t,o,d),i}}function p4(e,t){return!bi||!yi||!vi||!Qr?(Bn&&Y.warn(`reactRouterV${t}Instrumentation was unable to wrap the \`createMemoryRouter\` function because of one or more missing parameters.`),e):function(r,s){if(Mu(r),Tp)for(const b of r)Cp(b,$v);const a=b4(s,!0),i=e(r,a),o=s==null?void 0:s.basename;let d;const u=s==null?void 0:s.initialEntries,h=s==null?void 0:s.initialIndex,p=u&&u.length===1,f=h!==void 0&&u&&u[h];d=p?u[0]:f?u[h]:void 0;const x=d?typeof d=="string"?{pathname:d}:d:i.state.location,y=ws();return i.state.historyAction==="POP"&&y&&Ou({activeRootSpan:y,location:x,routes:r,basename:o,allRoutes:Array.from(Zn)}),m4(i,r,t,o,y),i}}function x4(e,t){const r=Ho({...e,instrumentPageLoad:!1,instrumentNavigation:!1}),{useEffect:s,useLocation:a,useNavigationType:i,createRoutesFromChildren:o,matchRoutes:d,stripBasename:u,enableAsyncRouteHandlers:h=!1,instrumentPageLoad:p=!0,instrumentNavigation:f=!0,lazyRouteTimeout:x}=e;return{...r,setup(y){r.setup(y);const b=e.finalTimeout??3e4,w=(e.idleTimeout??1e3)*3,v=x??w;v===1/0?(uo=b,Bn&&Y.log("[React Router] lazyRouteTimeout set to Infinity, capping at finalTimeout:",b,"ms to prevent indefinite hangs")):Number.isNaN(v)?(Bn&&Y.warn("[React Router] lazyRouteTimeout must be a number, falling back to default:",w),uo=w):v<0?(Bn&&Y.warn("[React Router] lazyRouteTimeout must be non-negative or Infinity, got:",v,"falling back to:",w),uo=w):uo=v,bi=s,yi=a,vi=i,Qr=d,Vm=o,Tp=h,oY(d,u||!1)},afterAllSetup(y){var w;r.afterAllSetup(y);const b=(w=ye.location)==null?void 0:w.pathname;p&&b&&Ac(y,{name:b,attributes:{[xt]:"url",[Nt]:"pageload",[Ge]:`auto.pageload.react.reactrouter_v${t}`}}),f&&u4.add(y)}}}function g4(e,t){if(!bi||!yi||!vi||!Qr)return Bn&&Y.warn("reactRouterV6Instrumentation was unable to wrap `useRoutes` because of one or more missing parameters."),e;const r=s=>{const a=T.useRef(!0),{routes:i,locationArg:o}=s,d=e(i,o),u=yi(),h=vi(),p=typeof o=="string"||o!=null&&o.pathname?o:u;return bi(()=>{const f=typeof p=="string"?{pathname:p}:p;a.current?(Mu(i),Ou({activeRootSpan:ws(),location:f,routes:i,allRoutes:Array.from(Zn)}),a.current=!1):Dv({location:f,routes:i,navigationType:h,version:t,allRoutes:Array.from(Zn)})},[h,p]),d};return(s,a)=>T.createElement(r,{routes:s,locationArg:a})}function b4(e,t=!1){if(!e||!("patchRoutesOnNavigation"in e)||typeof e.patchRoutesOnNavigation!="function")return e||{};const r=e.patchRoutesOnNavigation;return{...e,patchRoutesOnNavigation:async s=>{const a=s==null?void 0:s.path,i=ws();if(!t){const d=s==null?void 0:s.patch;d&&(s.patch=(u,h)=>{Mu(h);const p=ws();return a&&p&&Re(p).op==="navigation"&&Wb(p,{pathname:a,search:"",hash:"",state:null,key:"default"},Array.from(Zn),!0,Qr),d(u,h)})}const o=(async()=>{var p;const d=aY(a,i);let u;try{u=await r(s)}finally{iY(d)}const h=ws();if(h&&Re(h).op==="navigation"){const f=t?a:a||((p=ye.location)==null?void 0:p.pathname);f&&Wb(h,{pathname:f,search:"",hash:"",state:null,key:"default"},Array.from(Zn),!1,Qr)}return u})();return i&&_Y(i,o),o}}}function Dv(e){const{location:t,routes:r,navigationType:s,version:a,matches:i,basename:o,allRoutes:d}=e,u=Array.isArray(i)?i:Qr(d||r,t,o),h=be();if(!h||!u4.has(h))return;const p=ws();if(!(p&&Re(p).op==="pageload"&&s==="POP")&&(s==="PUSH"||s==="POP")&&u){const[f,x]=Ep(t,d||r,d||r,u,o),y=h4(t),b=so.get(h),w=b&&!b.isPlaceholder?!!Re(b.span).timestamp:!1,{skip:v,shouldUpdate:j}=vY(b,y,f,w);if(v){if(j&&b){const R=b.routeName;b.isPlaceholder?(b.routeName=f,Bn&&Y.log(`[Tracing] Updated placeholder navigation name from "${R}" to "${f}" (will apply to real span)`)):(b.span.updateName(f),b.span.setAttribute(xt,x),yn(b.span,"__sentry_navigation_name_set__",!0),b.routeName=f,Bn&&Y.log(`[Tracing] Updated navigation span name from "${R}" to "${f}"`))}else Bn&&Y.log(`[Tracing] Skipping duplicate navigation for location: ${y}`);return}const S={span:{end:()=>{}},routeName:f,pathname:t.pathname,locationKey:y,isPlaceholder:!0};so.set(h,S);let k;try{k=Mc(h,{name:S.routeName,attributes:{[xt]:x,[Nt]:"navigation",[Ge]:`auto.navigation.react.reactrouter_v${a}`}})}catch(R){throw so.delete(h),R}k?(so.set(h,{span:k,routeName:S.routeName,pathname:t.pathname,locationKey:y}),v4(k,t,r,o,d,"navigation")):so.delete(h)}}function Mu(e){e.forEach(t=>{y4(t).forEach(s=>{Zn.add(s)})})}function y4(e,t=new Set){return t.has(e)||(t.add(e),e.children&&!e.index&&e.children.forEach(r=>{y4(r,t).forEach(a=>{t.add(a)})})),t}function Ou({activeRootSpan:e,location:t,routes:r,matches:s,basename:a,allRoutes:i}){const o=Array.isArray(s)?s:Qr(i||r,t,a);if(o){const[d,u]=Ep(t,i||r,i||r,o,a);We().setTransactionName(d||"/"),e&&(e.updateName(d),e.setAttribute(xt,u),v4(e,t,r,a,i,"pageload"))}}function jY(e,t,r,s,a=!1){return r?!!(!e&&a||e&&ki(e)&&s==="route"&&!ki(r)||t!=="route"&&s==="route"):!1}function j0(e,t,r,s,a,i,o,d){var u;try{const h=(u=t.data)==null?void 0:u[xt];if(h==="route"&&r&&!ki(r))return;const p=Array.from(d),f=p.length>0?p:a,x=Qr(f,s,i);if(!x)return;const[y,b]=Ep(s,f,f,x,i),w=jY(r,h,y,b,!0),v=o==="pageload"||!t.timestamp;w&&v&&(e.updateName(y),e.setAttribute(xt,b))}catch(h){Bn&&Y.warn(`Error updating span details before ending: ${h}`)}}function v4(e,t,r,s,a,i){const o=`__sentry_${i}_end_patched__`;if((e==null?void 0:e[o])||!e.end)return;const u=a?new Set(a):Zn,h=e.end.bind(e);let p=!1;e.end=function(...x){var k;if(p)return;p=!0;const y=x.length>0?x[0]:Date.now()/1e3,b=Re(e),w=b.description,v=(k=b.data)==null?void 0:k[xt],j=()=>{const R=be();if(R&&i==="navigation"){const E=so.get(R);E&&E.span===e&&so.delete(R)}},C=Ym.get(e);if(C&&C.size>0&&w&&(ki(w)||v!=="route")){if(uo===0){j0(e,b,w,t,r,s,i,u),j(),h(y);return}const R=Promise.allSettled(C).then(()=>{});(uo===1/0?R:Promise.race([R,new Promise(I=>setTimeout(I,uo))])).then(()=>{const I=Re(e);j0(e,I,I.description,t,r,s,i,u),j(),h(y)}).catch(()=>{j(),h(y)});return}j0(e,b,w,t,r,s,i,u),j(),h(y)},yn(e,o,!0)}function w4(e,t){if(!bi||!yi||!vi||!Vm||!Qr)return Bn&&Y.warn(`reactRouterV6Instrumentation was unable to wrap Routes because of one or more missing parameters.
      useEffect: ${bi}. useLocation: ${yi}. useNavigationType: ${vi}.
      createRoutesFromChildren: ${Vm}. matchRoutes: ${Qr}.`),e;const r=s=>{const a=T.useRef(!0),i=yi(),o=vi();return bi(()=>{const d=Vm(s.children);a.current?(Mu(d),Ou({activeRootSpan:ws(),location:i,routes:d,allRoutes:Array.from(Zn)}),a.current=!1):Dv({location:i,routes:d,navigationType:o,version:t,allRoutes:Array.from(Zn)})},[i,o]),T.createElement(e,{...s})};return Sp(r,e),r}function NY(e){return x4(e,"6")}function SY(e){return g4(e,"6")}function kY(e){return f4(e,"6")}function EY(e){return p4(e,"6")}function CY(e){return w4(e,"6")}function TY(e){return x4(e,"7")}function RY(e){return w4(e,"7")}function IY(e){return f4(e,"7")}function PY(e){return p4(e,"7")}function AY(e){return g4(e,"7")}const MY=Object.freeze(Object.defineProperty({__proto__:null,BrowserClient:sC,ErrorBoundary:a4,MULTIPLEXED_TRANSPORT_EXTRA_KEY:Am,OpenFeatureIntegrationHook:_V,Profiler:Ov,SDK_VERSION:ma,SEMANTIC_ATTRIBUTE_SENTRY_OP:Nt,SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN:Ge,SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE:Kf,SEMANTIC_ATTRIBUTE_SENTRY_SOURCE:xt,Scope:js,WINDOW:ye,addBreadcrumb:Ss,addEventProcessor:FE,addIntegration:hb,breadcrumbsIntegration:TC,browserApiErrorsIntegration:RC,browserProfilingIntegration:bV,browserSessionIntegration:IC,browserTracingIntegration:Ho,buildLaunchDarklyFlagUsedHandler:vV,captureConsoleIntegration:E$,captureEvent:Ec,captureException:mt,captureFeedback:w5,captureMessage:LE,captureReactException:Mv,captureSession:ub,chromeStackLineParser:NC,close:c8,consoleLoggingIntegration:_5,contextLinesIntegration:dH,continueTrace:PL,createConsolaReporter:WD,createLangChainCallbackHandler:_U,createReduxEnhancer:YV,createTransport:QE,createUserFeedbackEnvelope:a9,dedupeIntegration:p5,defaultRequestInstrumentationOptions:Iv,defaultStackLineParsers:kC,defaultStackParser:EC,diagnoseSdkConnectivity:EV,endSession:Ty,eventFiltersIntegration:d5,eventFromException:nC,eventFromMessage:rC,exceptionFromError:up,extraErrorDataIntegration:L$,featureFlagsIntegration:bD,feedbackAsyncIntegration:iq,feedbackIntegration:tS,feedbackSyncIntegration:tS,flush:l8,forceLoad:B9,functionToStringIntegration:c5,geckoStackLineParser:SC,getActiveSpan:Vt,getClient:be,getCurrentScope:We,getDefaultIntegrations:DC,getFeedback:x7,getGlobalScope:xa,getIsolationScope:hn,getReplay:eK,getRootSpan:Kt,getSpanDescendants:Ld,getSpanStatusFromHttpCode:iE,getTraceData:Dy,globalHandlersIntegration:PC,graphqlClientIntegration:bH,growthbookIntegration:SV,httpClientIntegration:J9,httpContextIntegration:LC,inboundFiltersIntegration:u5,init:e4,instrumentAnthropicAiClient:tU,instrumentGoogleGenAIClient:fU,instrumentLangGraph:RU,instrumentOpenAiClient:LF,instrumentOutgoingRequests:BT,instrumentSupabaseClient:v5,isEnabled:DE,isInitialized:d8,lastEventId:$E,launchDarklyIntegration:yV,lazyLoadIntegration:eC,linkedErrorsIntegration:$C,logger:AD,makeBrowserOfflineTransport:zK,makeFetchTransport:hv,makeMultiplexedTransport:X8,metrics:BD,moduleMetadataIntegration:j$,onLoad:H9,openFeatureIntegration:wV,opera10StackLineParser:t9,opera11StackLineParser:s9,parameterize:o5,reactErrorHandler:OV,reactRouterV3BrowserTracingIntegration:JV,reactRouterV4BrowserTracingIntegration:ZV,reactRouterV5BrowserTracingIntegration:eY,reactRouterV6BrowserTracingIntegration:NY,reactRouterV7BrowserTracingIntegration:TY,registerSpanErrorInstrumentation:NE,registerWebWorker:IV,replayCanvasIntegration:yK,replayIntegration:MT,reportPageLoaded:$K,reportingObserverIntegration:K9,rewriteFramesIntegration:W$,sendFeedback:U5,setActiveSpanInBrowser:DK,setContext:Cy,setCurrentClient:r5,setExtra:s8,setExtras:r8,setHttpStatus:Xd,setMeasurement:TE,setTag:i8,setTags:a8,setUser:o8,showReportDialog:Ib,spanToBaggageHeader:cL,spanToJSON:Re,spanToTraceHeader:vE,spotlightBrowserIntegration:$9,startBrowserTracingNavigationSpan:Mc,startBrowserTracingPageLoadSpan:Ac,startInactiveSpan:Yr,startNewTrace:IE,startSession:db,startSpan:Hs,startSpanManual:da,statsigIntegration:kV,supabaseIntegration:rD,suppressTracing:RE,tanstackRouterBrowserTracingIntegration:XV,thirdPartyErrorFilterIntegration:mD,uiProfiler:LB,unleashIntegration:jV,updateSpanName:iL,useProfiler:HV,webWorkerIntegration:TV,winjsStackLineParser:XB,withActiveSpan:To,withErrorBoundary:zV,withIsolationScope:OO,withProfiler:BV,withScope:br,withSentryReactRouterV6Routing:CY,withSentryReactRouterV7Routing:RY,withSentryRouting:nY,wrapCreateBrowserRouterV6:kY,wrapCreateBrowserRouterV7:IY,wrapCreateMemoryRouterV6:EY,wrapCreateMemoryRouterV7:PY,wrapUseRoutesV6:SY,wrapUseRoutesV7:AY,zodErrorsIntegration:hD},Symbol.toStringTag,{value:"Module"}));function OY(){const e="https://9510dc570d99c3c8c341b7eede7cb2f2@o4510618335903744.ingest.us.sentry.io/4510620242935808";console.log("Initializing Sentry with DSN:",e.substring(0,20)+"..."),e4({dsn:e,release:"1.0.0",environment:"production",sendDefaultPii:!0,debug:!1,enableLogs:!0,integrations:[Ho(),MT({maskAllText:!0,blockAllMedia:!0,unblock:[".error-message","[data-sentry-unmask]"],block:['input[type="password"]','input[type="email"]',".sensitive"]}),_5({levels:["log","error","warn"]})],tracesSampleRate:.1,replaysSessionSampleRate:.1,replaysOnErrorSampleRate:1}),console.log("Sentry initialized successfully"),window.addEventListener("unhandledrejection",t=>{console.error("Unhandled promise rejection:",t.reason),mt(t.reason,{tags:{type:"unhandled-rejection"}})}),window.addEventListener("error",t=>{console.error("Global error:",t.error),mt(t.error||new Error(t.message),{tags:{type:"global-error"},contexts:{error:{filename:t.filename,lineno:t.lineno,colno:t.colno}}})})}const Xt={count:(e,t=1,r)=>{try{console.debug(`[Metric] count: ${e} = ${t}`)}catch{}},gauge:(e,t,r)=>{try{console.debug(`[Metric] gauge: ${e} = ${t}`)}catch{}},distribution:(e,t,r)=>{try{console.debug(`[Metric] distribution: ${e} = ${t}`)}catch{}},set:(e,t,r)=>{try{console.debug(`[Metric] set: ${e} = ${t}`)}catch{}},timing:async(e,t,r)=>{const s=performance.now();try{const a=await t(),i=performance.now()-s;return Xt.distribution(e,i,{...r,status:"success"}),a}catch(a){const i=performance.now()-s;throw Xt.distribution(e,i,{...r,status:"error"}),a}}},_4=T.createContext(null);function LY({children:e}){const[t,r]=T.useState(null),[s,a]=T.useState(null),[i,o]=T.useState(null),[d,u]=T.useState(!0),h=T.useRef(!1),p=async(C,S=2)=>{for(let k=0;k<S;k++)try{const{data:R,error:E}=await K.from("users").select("id, email, display_name, role, phone, phone_verified, avatar_url, profile_setup_complete").eq("id",C).single();if(!E&&R)return R;const I=(E==null?void 0:E.code)==="PGRST116"||(E==null?void 0:E.status)===406;if(I&&k<S-1){const M=Math.min(150*(k+1),500);await new Promise(O=>setTimeout(O,M));continue}return I||console.error("Error fetching profile:",E),null}catch(R){return console.error("fetchProfile exception:",R),null}return null},f=async()=>{if(t!=null&&t.id){const C=await p(t.id);a(C)}};T.useEffect(()=>{h.current=!1;const C=async()=>{var k;try{if(window.location.hash.includes("access_token"))return;const E=K.auth.getSession(),I=new Promise(L=>setTimeout(()=>L({data:{session:null},error:null}),5e3)),M=await Promise.race([E,I]),O=(k=M==null?void 0:M.data)==null?void 0:k.session;if(h.current)return;if(O){if(o(O),r(O.user??null),O.user){const P=window.location.hash.includes("access_token")?5:2;try{const $=await p(O.user.id,P);a($)}catch($){console.error("Failed to fetch profile:",$)}}}else h.current||(o(null),r(null),a(null));u(!1)}catch(R){console.error("Failed to initialize auth:",R),h.current||(window.localStorage.removeItem("rgfl-auth-token"),o(null),r(null),a(null)),u(!1)}},{data:{subscription:S}}=K.auth.onAuthStateChange((k,R)=>{if((k==="SIGNED_IN"||k==="TOKEN_REFRESHED")&&(h.current=!0),k==="SIGNED_IN"&&window.location.hash.includes("access_token")&&window.history.replaceState(null,"",window.location.pathname+window.location.search),o(R),r((R==null?void 0:R.user)??null),R!=null&&R.user){const E=R.user.id,M=k==="SIGNED_IN"||k==="TOKEN_REFRESHED"?5:2;setTimeout(async()=>{try{const O=await p(E,M);a(O)}catch(O){console.error("Failed to fetch profile:",O),a(null)}u(!1)},10)}else a(null),u(!1)});return C(),()=>S.unsubscribe()},[]),T.useEffect(()=>{const C=async()=>{const{data:{session:S}}=await K.auth.getSession();if(S){if(o(S),r(S.user??null),S.user){const k=await p(S.user.id);a(k)}}else o(null),r(null),a(null)};return window.addEventListener("popstate",C),()=>window.removeEventListener("popstate",C)},[]);const x=async(C,S)=>{const k=performance.now();try{const{error:R}=await K.auth.signInWithPassword({email:C,password:S});if(R)throw Xt.count("auth_signin",1,{method:"password",status:"error"}),R;Xt.count("auth_signin",1,{method:"password",status:"success"}),Xt.distribution("auth_signin_time",performance.now()-k,{method:"password"})}catch(R){throw Xt.count("auth_signin",1,{method:"password",status:"error"}),R}},y=async(C,S,k,R)=>{const E=performance.now();try{const{data:I,error:M}=await K.auth.signUp({email:C,password:S,options:{data:{display_name:k,phone:R==null?void 0:R.phone,hometown:R==null?void 0:R.hometown,favorite_castaway:R==null?void 0:R.favorite_castaway}}});if(M)throw Xt.count("auth_signup",1,{status:"error"}),M;if(I.user&&(R!=null&&R.phone||R!=null&&R.hometown||R!=null&&R.favorite_castaway)){const O={};R!=null&&R.phone&&(O.phone=R.phone),R!=null&&R.hometown&&(O.hometown=R.hometown),R!=null&&R.favorite_castaway&&(O.favorite_castaway=R.favorite_castaway),await K.from("users").update(O).eq("id",I.user.id)}Xt.count("auth_signup",1,{status:"success"}),Xt.distribution("auth_signup_time",performance.now()-E)}catch(I){throw Xt.count("auth_signup",1,{status:"error"}),I}},b=async C=>{try{const{error:S}=await K.auth.signInWithOtp({email:C,options:{emailRedirectTo:`${window.location.origin}/profile/setup`}});if(S)throw Xt.count("auth_signin",1,{method:"magic_link",status:"error"}),S;Xt.count("auth_signin",1,{method:"magic_link",status:"success"})}catch(S){throw Xt.count("auth_signin",1,{method:"magic_link",status:"error"}),S}},w=async()=>{try{const{error:C}=await K.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/profile/setup`}});if(C)throw Xt.count("auth_signin",1,{method:"google",status:"error"}),C;Xt.count("auth_signin",1,{method:"google",status:"initiated"})}catch(C){throw Xt.count("auth_signin",1,{method:"google",status:"error"}),C}},v=async()=>{r(null),a(null),o(null);const{error:C}=await K.auth.signOut();C?(console.error("Supabase signOut error:",C),Xt.count("auth_signout",1,{status:"error"})):Xt.count("auth_signout",1,{status:"success"})},j=(s==null?void 0:s.role)==="admin";return n.jsx(_4.Provider,{value:{user:t,profile:s,session:i,loading:d,isAdmin:j,signIn:x,signUp:y,signInWithMagicLink:b,signInWithGoogle:w,signOut:v,refreshProfile:f},children:e})}function dt(){const e=T.useContext(_4);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e}/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $Y=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),DY=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,s)=>s?s.toUpperCase():r.toLowerCase()),d2=e=>{const t=DY(e);return t.charAt(0).toUpperCase()+t.slice(1)},j4=(...e)=>e.filter((t,r,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===r).join(" ").trim(),FY=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var UY={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qY=T.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:s,className:a="",children:i,iconNode:o,...d},u)=>T.createElement("svg",{ref:u,...UY,width:t,height:t,stroke:e,strokeWidth:s?Number(r)*24/Number(t):r,className:j4("lucide",a),...!i&&!FY(d)&&{"aria-hidden":"true"},...d},[...o.map(([h,p])=>T.createElement(h,p)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=(e,t)=>{const r=T.forwardRef(({className:s,...a},i)=>T.createElement(qY,{ref:i,iconNode:t,className:j4(`lucide-${$Y(d2(e))}`,`lucide-${e}`,s),...a}));return r.displayName=d2(e),r};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BY=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],iu=oe("activity",BY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HY=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],st=oe("arrow-left",HY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WY=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],zY=oe("arrow-right-left",WY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GY=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Ir=oe("arrow-right",GY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KY=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Fv=oe("award",KY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VY=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],mi=oe("bell",VY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YY=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Lu=oe("book-open",YY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JY=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],N4=oe("brain",JY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QY=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],XY=oe("briefcase",QY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZY=[["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z",key:"uouzyp"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M21 21a4 4 0 0 0-3.81-4",key:"1b0z45"}],["path",{d:"M21 5a4 4 0 0 1-3.55 3.97",key:"5cxbf6"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M3 21a4 4 0 0 1 3.81-4",key:"1fjd4g"}],["path",{d:"M3 5a4 4 0 0 0 3.55 3.97",key:"1d7oge"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M9 7.13V6a3 3 0 1 1 6 0v1.13",key:"1vgav8"}]],eJ=oe("bug",ZY);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tJ=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],er=oe("calendar",tJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nJ=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],rJ=oe("camera",nJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sJ=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Uv=oe("chart-column",sJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aJ=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],iJ=oe("chart-pie",aJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oJ=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],qt=oe("check",oJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lJ=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],un=oe("chevron-down",lJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cJ=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],dJ=oe("chevron-left",cJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uJ=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],hr=oe("chevron-right",uJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hJ=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],zs=oe("chevron-up",hJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mJ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],at=oe("circle-alert",mJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fJ=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],tt=oe("circle-check-big",fJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pJ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Rp=oe("circle-check",pJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xJ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],gJ=oe("circle-question-mark",xJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bJ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],S4=oe("circle-user",bJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yJ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Nn=oe("circle-x",yJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vJ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],wJ=oe("circle",vJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _J=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Mt=oe("clock",_J);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jJ=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Ip=oe("copy",jJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NJ=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],zb=oe("credit-card",NJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SJ=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],tr=oe("crown",SJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kJ=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],EJ=oe("database",kJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CJ=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],ks=oe("dollar-sign",CJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TJ=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],RJ=oe("ellipsis-vertical",TJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IJ=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],k4=oe("external-link",IJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PJ=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],gc=oe("eye-off",PJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AJ=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ei=oe("eye",AJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MJ=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],OJ=oe("facebook",MJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LJ=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],$u=oe("file-text",LJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $J=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],bn=oe("flame",$J);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DJ=[["path",{d:"M10.5 3 8 9l4 13 4-13-2.5-6",key:"b3dvk1"}],["path",{d:"M17 3a2 2 0 0 1 1.6.8l3 4a2 2 0 0 1 .013 2.382l-7.99 10.986a2 2 0 0 1-3.247 0l-7.99-10.986A2 2 0 0 1 2.4 7.8l2.998-3.997A2 2 0 0 1 7 3z",key:"7w4byz"}],["path",{d:"M2 9h20",key:"16fsjt"}]],FJ=oe("gem",DJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UJ=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],qJ=oe("gift",UJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BJ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Sa=oe("globe",BJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HJ=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],E4=oe("grid-3x3",HJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WJ=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],qv=oe("grip-vertical",WJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zJ=[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]],GJ=oe("handshake",zJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KJ=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],Pp=oe("heart",KJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VJ=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],ou=oe("history",VJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YJ=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],C4=oe("house",YJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JJ=[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]],QJ=oe("inbox",JJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XJ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Du=oe("info",XJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZJ=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],eQ=oe("key",ZJ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tQ=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],Fl=oe("lightbulb",tQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nQ=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],rQ=oe("link-2",nQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sQ=[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}]],aQ=oe("list-checks",sQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iQ=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],oQ=oe("list",iQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lQ=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],me=oe("loader-circle",lQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cQ=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Mn=oe("lock",cQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dQ=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],uQ=oe("log-in",dQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hQ=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],mQ=oe("log-out",hQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fQ=[["path",{d:"M21.2 8.4c.5.38.8.97.8 1.6v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V10a2 2 0 0 1 .8-1.6l8-6a2 2 0 0 1 2.4 0l8 6Z",key:"1jhwl8"}],["path",{d:"m22 10-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 10",key:"1qfld7"}]],pQ=oe("mail-open",fQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xQ=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],xr=oe("mail",xQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gQ=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Bv=oe("map-pin",gQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bQ=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],fr=oe("medal",bQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yQ=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],bc=oe("megaphone",yQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vQ=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],Jm=oe("menu",vQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wQ=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],Bs=oe("message-circle",wQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _Q=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Hv=oe("message-square",_Q);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jQ=[["path",{d:"M5 12h14",key:"1ays0h"}]],Ap=oe("minus",jQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NQ=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Wv=oe("pen",NQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SQ=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],zv=oe("pencil",SQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kQ=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],EQ=oe("phone",kQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CQ=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],T4=oe("play",CQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TQ=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],$o=oe("plus",TQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RQ=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],u2=oe("qr-code",RQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IQ=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Xr=oe("refresh-cw",IQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PQ=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],R4=oe("rotate-ccw",PQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AQ=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Ci=oe("save",AQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MQ=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Oi=oe("search",MQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OQ=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Fu=oe("send",OQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LQ=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],$Q=oe("server",LQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DQ=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Uu=oe("settings",DQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FQ=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],Mp=oe("share-2",FQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UQ=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],h2=oe("shield-alert",UQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qQ=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],m2=oe("shield-check",qQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BQ=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],_s=oe("shield",BQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HQ=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],WQ=oe("shuffle",HQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zQ=[["path",{d:"m12.5 17-.5-1-.5 1h1z",key:"3me087"}],["path",{d:"M15 22a1 1 0 0 0 1-1v-1a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20v1a1 1 0 0 0 1 1z",key:"1o5pge"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}]],Gb=oe("skull",zQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GQ=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],f2=oe("smartphone",GQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KQ=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],I4=oe("sparkles",KQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VQ=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],kn=oe("star",VQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YQ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],gr=oe("target",YQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JQ=[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],QQ=oe("toggle-left",JQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XQ=[["circle",{cx:"15",cy:"12",r:"3",key:"1afu0r"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],ZQ=oe("toggle-right",XQ);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eX=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Oc=oe("trash-2",eX);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tX=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],Lc=oe("trending-down",tX);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nX=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Pr=oe("trending-up",nX);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rX=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],kt=oe("triangle-alert",rX);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sX=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Ke=oe("trophy",sX);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aX=[["path",{d:"m17 2-5 5-5-5",key:"16satq"}],["rect",{width:"20",height:"15",x:"2",y:"7",rx:"2",key:"1e6viu"}]],yc=oe("tv",aX);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iX=[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]],oX=oe("twitter",iX);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lX=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],cX=oe("user-minus",lX);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dX=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Op=oe("user",dX);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uX=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],$e=oe("users",uX);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hX=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Sn=oe("x",hX);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mX=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Zr=oe("zap",mX);function Se(){var E,I;const e=ts(),{user:t,signOut:r,loading:s}=dt(),[a,i]=T.useState(!1),[o,d]=T.useState(!1),u=T.useRef(null),h=T.useRef(null),[p,f]=T.useState(()=>typeof window<"u"&&localStorage.getItem("adminViewMode")||"admin");T.useEffect(()=>{localStorage.setItem("adminViewMode",p)},[p]),T.useEffect(()=>{i(!1)},[e.pathname]),T.useEffect(()=>{const M=O=>{u.current&&!u.current.contains(O.target)&&i(!1),h.current&&!h.current.contains(O.target)&&d(!1)};return(a||o)&&document.addEventListener("mousedown",M),()=>document.removeEventListener("mousedown",M)},[a,o]);const x=async()=>{try{localStorage.removeItem("adminViewMode"),i(!1),await r()}catch(M){console.error("Sign out failed:",M),window.location.href="/"}},{data:y}=re({queryKey:["profile",t==null?void 0:t.id],queryFn:async()=>{if(!(t!=null&&t.id))return null;const{data:M,error:O}=await K.from("users").select("id, display_name, role, avatar_url").eq("id",t.id).single();if(O)throw O;return M},enabled:!!(t!=null&&t.id)}),b=(y==null?void 0:y.display_name)||((E=t==null?void 0:t.user_metadata)==null?void 0:E.display_name)||((I=t==null?void 0:t.email)==null?void 0:I.split("@")[0])||"",w=M=>{if(!M)return"";const O=M.trim().split(" ").filter(Boolean);return O.length===0?"":O.length===1?O[0].charAt(0).toUpperCase():O[0].charAt(0).toUpperCase()+O[O.length-1].charAt(0).toUpperCase()},v=M=>M==="/"?e.pathname==="/":e.pathname.startsWith(M),j=(y==null?void 0:y.role)==="admin",C=j&&p==="admin",[S,k]=T.useState(!1),R=T.useRef(null);return T.useEffect(()=>{const M=O=>{R.current&&!R.current.contains(O.target)&&k(!1)};return S&&document.addEventListener("mousedown",M),()=>document.removeEventListener("mousedown",M)},[S]),t&&C?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"bg-gradient-to-r from-orange-500 via-amber-500 to-orange-400 text-white py-2 px-4 sticky top-0 z-[60]",children:n.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[n.jsx("div",{className:"flex items-center gap-3",children:n.jsxs("div",{className:"flex items-center gap-2 bg-white/20 px-3 py-1 rounded-full",children:[n.jsx(_s,{className:"h-4 w-4"}),n.jsx("span",{className:"font-bold text-sm tracking-wide",children:"ADMIN"})]})}),n.jsxs("button",{onClick:()=>f("player"),className:"flex items-center gap-2 bg-white text-orange-600 px-4 py-1.5 rounded-full font-semibold text-sm hover:bg-orange-50 transition-colors",children:[n.jsx(S4,{className:"h-4 w-4"}),"Switch to Player View"]})]})}),n.jsx("nav",{className:"bg-white border-b-2 border-orange-400 shadow-sm sticky top-[44px] z-50",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsxs("div",{className:"flex items-center justify-between h-14",children:[n.jsx(z,{to:"/admin",className:"flex items-center gap-2",children:n.jsx("img",{src:"/logo.png",alt:"Admin",className:"h-8 w-auto"})}),n.jsxs("div",{className:"hidden md:flex items-center gap-1",children:[n.jsxs(z,{to:"/admin/leagues",className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-2 ${v("/admin/leagues")?"bg-orange-500 text-white":"text-neutral-600 hover:text-orange-600 hover:bg-orange-50"}`,children:[n.jsx(Ke,{className:"h-4 w-4"}),"Leagues"]}),n.jsxs(z,{to:"/admin/scoring",className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-2 ${v("/admin/scoring")?"bg-orange-500 text-white":"text-neutral-600 hover:text-orange-600 hover:bg-orange-50"}`,children:[n.jsx(Zr,{className:"h-4 w-4"}),"Scoring"]}),n.jsxs("div",{className:"relative",ref:R,children:[n.jsxs("button",{onClick:()=>k(!S),className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-1 ${v("/admin/leagues")||v("/admin/castaways")||v("/admin/users")?"text-orange-600":"text-neutral-600 hover:text-orange-600 hover:bg-orange-50"}`,children:["Manage",n.jsx(un,{className:`h-4 w-4 transition-transform ${S?"rotate-180":""}`})]}),S&&n.jsxs("div",{className:"absolute top-full left-0 mt-1 bg-white rounded-xl shadow-lg border border-neutral-200 min-w-[180px] z-50 py-1",children:[n.jsxs(z,{to:"/admin/leagues",onClick:()=>k(!1),className:`flex items-center gap-2 px-4 py-2 text-sm hover:bg-orange-50 ${v("/admin/leagues")?"text-orange-600 bg-orange-50":"text-neutral-600"}`,children:[n.jsx(Ke,{className:"h-4 w-4"}),"Leagues"]}),n.jsxs(z,{to:"/admin/castaways",onClick:()=>k(!1),className:`flex items-center gap-2 px-4 py-2 text-sm hover:bg-orange-50 ${v("/admin/castaways")?"text-orange-600 bg-orange-50":"text-neutral-600"}`,children:[n.jsx($e,{className:"h-4 w-4"}),"Castaways"]}),n.jsxs(z,{to:"/admin/users",onClick:()=>k(!1),className:`flex items-center gap-2 px-4 py-2 text-sm hover:bg-orange-50 ${v("/admin/users")?"text-orange-600 bg-orange-50":"text-neutral-600"}`,children:[n.jsx($e,{className:"h-4 w-4"}),"Players"]})]})]}),n.jsxs(z,{to:"/admin/announcements",className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-2 ${v("/admin/announcements")?"bg-orange-500 text-white":"text-neutral-600 hover:text-orange-600 hover:bg-orange-50"}`,children:[n.jsx(Hv,{className:"h-4 w-4"}),"Announcements"]}),n.jsxs(z,{to:"/admin/push-notifications",className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-2 ${v("/admin/push-notifications")?"bg-orange-500 text-white":"text-neutral-600 hover:text-orange-600 hover:bg-orange-50"}`,children:[n.jsx(mi,{className:"h-4 w-4"}),"Push"]}),n.jsxs(z,{to:"/admin/email-queue",className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-2 ${v("/admin/email-queue")?"bg-orange-500 text-white":"text-neutral-600 hover:text-orange-600 hover:bg-orange-50"}`,children:[n.jsx(xr,{className:"h-4 w-4"}),"Email"]}),n.jsxs(z,{to:"/admin/sms",className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-2 ${v("/admin/sms")?"bg-orange-500 text-white":"text-neutral-600 hover:text-orange-600 hover:bg-orange-50"}`,children:[n.jsx(Bs,{className:"h-4 w-4"}),"SMS"]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:()=>i(!a),className:"md:hidden p-2 text-neutral-600 hover:text-orange-600","aria-label":a?"Close menu":"Open menu","aria-expanded":a,children:a?n.jsx(Sn,{className:"h-6 w-6"}):n.jsx(Jm,{className:"h-6 w-6"})}),n.jsxs("div",{className:"text-right hidden sm:block",children:[n.jsx("p",{className:"text-neutral-800 text-sm font-medium",children:b||"Admin"}),n.jsx("p",{className:"text-orange-600 text-xs font-semibold",children:"Administrator"})]}),n.jsx("button",{onClick:x,className:"text-neutral-500 hover:text-neutral-800 text-sm hidden sm:block",children:"Sign out"})]})]}),a&&n.jsxs("div",{ref:u,className:"md:hidden border-t border-orange-200 py-2",children:[n.jsx(z,{to:"/admin",className:`block px-4 py-3 text-sm font-medium ${e.pathname==="/admin"?"bg-orange-500 text-white":"text-neutral-600 hover:bg-orange-50"}`,children:"Dashboard"}),n.jsx(z,{to:"/admin/leagues",className:`block px-4 py-3 text-sm font-medium ${v("/admin/leagues")?"bg-orange-500 text-white":"text-neutral-600 hover:bg-orange-50"}`,children:"Leagues"}),n.jsx(z,{to:"/admin/scoring",className:`block px-4 py-3 text-sm font-medium ${v("/admin/scoring")?"bg-orange-500 text-white":"text-neutral-600 hover:bg-orange-50"}`,children:"Scoring"}),n.jsx("div",{className:"px-4 py-2 text-xs font-semibold text-neutral-400 uppercase",children:"Manage"}),n.jsx(z,{to:"/admin/leagues",className:"block px-8 py-2 text-sm text-neutral-600 hover:bg-orange-50",children:"Leagues"}),n.jsx(z,{to:"/admin/castaways",className:"block px-8 py-2 text-sm text-neutral-600 hover:bg-orange-50",children:"Castaways"}),n.jsx(z,{to:"/admin/users",className:"block px-8 py-2 text-sm text-neutral-600 hover:bg-orange-50",children:"Players"}),n.jsx("hr",{className:"my-2 border-orange-200"}),n.jsx(z,{to:"/admin/announcements",className:`block px-4 py-3 text-sm font-medium ${v("/admin/announcements")?"bg-orange-500 text-white":"text-neutral-600 hover:bg-orange-50"}`,children:"Announcements"}),n.jsx(z,{to:"/admin/push-notifications",className:`block px-4 py-3 text-sm font-medium ${v("/admin/push-notifications")?"bg-orange-500 text-white":"text-neutral-600 hover:bg-orange-50"}`,children:"Push Notifications"}),n.jsx(z,{to:"/admin/email-queue",className:`block px-4 py-3 text-sm font-medium ${v("/admin/email-queue")?"bg-orange-500 text-white":"text-neutral-600 hover:bg-orange-50"}`,children:"Email Queue"}),n.jsx(z,{to:"/admin/sms",className:`block px-4 py-3 text-sm font-medium ${v("/admin/sms")?"bg-orange-500 text-white":"text-neutral-600 hover:bg-orange-50"}`,children:"SMS"}),n.jsx("hr",{className:"my-2 border-orange-200"}),n.jsx("button",{onClick:x,className:"w-full text-left px-4 py-3 text-sm text-red-600 hover:bg-red-50",children:"Sign out"})]})]})})]}):t?n.jsx("nav",{className:"bg-white border-b border-neutral-200 shadow-sm sticky top-0 z-50",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsxs("div",{className:"flex items-center justify-between h-16",children:[n.jsx(z,{to:"/dashboard",className:"flex-shrink-0",children:n.jsx("img",{src:"/logo.png",alt:"RGFL",className:"h-10 w-auto"})}),n.jsxs("div",{className:"hidden lg:flex items-center gap-1",children:[n.jsx(z,{to:"/dashboard",className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${v("/dashboard")?"text-burgundy-600 bg-burgundy-50":"text-neutral-600 hover:text-burgundy-600 hover:bg-neutral-50"}`,children:"Dashboard"}),n.jsx(z,{to:"/leagues",className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${v("/leagues")&&!e.pathname.includes("/create")?"text-burgundy-600 bg-burgundy-50":"text-neutral-600 hover:text-burgundy-600 hover:bg-neutral-50"}`,children:"Leagues"}),n.jsx(z,{to:"/castaways",className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${v("/castaways")?"text-burgundy-600 bg-burgundy-50":"text-neutral-600 hover:text-burgundy-600 hover:bg-neutral-50"}`,children:"Castaways"}),n.jsx(z,{to:"/leaderboard",className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${v("/leaderboard")?"text-burgundy-600 bg-burgundy-50":"text-neutral-600 hover:text-burgundy-600 hover:bg-neutral-50"}`,children:"Leaderboard"}),n.jsxs("div",{className:"relative",ref:h,children:[n.jsxs("button",{onClick:()=>d(!o),className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors flex items-center gap-1 ${v("/how-to-play")||v("/scoring")||v("/timeline")?"text-burgundy-600 bg-burgundy-50":"text-neutral-600 hover:text-burgundy-600 hover:bg-neutral-50"}`,children:["How to Play",n.jsx(un,{className:`h-4 w-4 transition-transform ${o?"rotate-180":""}`})]}),o&&n.jsxs("div",{className:"absolute top-full left-0 mt-1 bg-white rounded-xl shadow-lg border border-neutral-200 min-w-[180px] z-50 py-1",children:[n.jsx(z,{to:"/how-to-play",onClick:()=>d(!1),className:`block px-4 py-2 text-sm hover:bg-neutral-50 ${v("/how-to-play")&&!v("/scoring")&&!v("/timeline")?"text-burgundy-600 bg-burgundy-50":"text-neutral-600"}`,children:"How to Play"}),n.jsx(z,{to:"/scoring-rules",onClick:()=>d(!1),className:`block px-4 py-2 text-sm hover:bg-neutral-50 ${v("/scoring")||v("/scoring-rules")?"text-burgundy-600 bg-burgundy-50":"text-neutral-600"}`,children:"Scoring Rules"}),n.jsx(z,{to:"/timeline",onClick:()=>d(!1),className:`block px-4 py-2 text-sm hover:bg-neutral-50 ${v("/timeline")?"text-burgundy-600 bg-burgundy-50":"text-neutral-600"}`,children:"Weekly Timeline"})]})]}),n.jsxs(z,{to:"/trivia",className:"trivia-pulse ml-2 px-4 py-2 bg-gradient-to-r from-purple-500 to-indigo-500 text-white font-semibold rounded-full text-sm flex items-center gap-2 hover:from-purple-600 hover:to-indigo-600 transition-all shadow-md",children:[n.jsx(Fl,{className:"w-4 h-4"}),"Trivia",n.jsx("span",{className:"bg-white/25 px-1.5 py-0.5 rounded text-[10px] font-bold",children:"NEW"})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>i(!a),className:"lg:hidden p-2 text-neutral-600 hover:text-burgundy-600","aria-label":a?"Close menu":"Open menu","aria-expanded":a,children:a?n.jsx(Sn,{className:"h-6 w-6"}):n.jsx(Jm,{className:"h-6 w-6"})}),j&&n.jsx("button",{onClick:()=>f("admin"),className:"hidden sm:flex items-center gap-1 text-xs font-medium text-orange-600 hover:text-orange-700 px-2 py-1 rounded transition-colors",title:"Switch to Admin View",children:n.jsx(_s,{className:"h-4 w-4"})}),n.jsxs("div",{className:"relative group hidden md:flex items-center",children:[n.jsxs("button",{className:"flex items-center gap-2 p-1 pr-2 text-neutral-600 hover:bg-neutral-50 rounded-full transition-all","aria-haspopup":"true",children:[n.jsx("div",{className:"w-9 h-9 bg-burgundy-500 rounded-full flex items-center justify-center text-white text-sm font-bold overflow-hidden",children:y!=null&&y.avatar_url?n.jsx("img",{src:y.avatar_url,alt:b,className:"w-full h-full object-cover"}):w(b)||"?"}),n.jsx("span",{className:"text-neutral-700 text-sm font-medium max-w-[100px] truncate",children:(b==null?void 0:b.split(" ")[0])||"Player"}),n.jsx(un,{className:"w-4 h-4 text-neutral-400"})]}),n.jsxs("div",{className:"absolute right-0 top-full mt-2 w-56 bg-white rounded-xl shadow-lg border border-neutral-200 opacity-0 invisible group-hover:opacity-100 group-hover:visible group-focus-within:opacity-100 group-focus-within:visible transition-all",role:"menu",children:[n.jsxs("div",{className:"p-4 border-b border-neutral-100",children:[n.jsx("p",{className:"font-semibold text-neutral-800",children:b||"Survivor"}),n.jsx("p",{className:"text-sm text-neutral-400",children:"Fantasy Player"})]}),n.jsxs("div",{className:"p-2",children:[n.jsx(z,{to:"/profile",className:"block px-3 py-2 text-sm text-neutral-600 hover:bg-neutral-50 rounded-lg",role:"menuitem",children:"Profile Settings"}),n.jsx(z,{to:"/profile/payments",className:"block px-3 py-2 text-sm text-neutral-600 hover:bg-neutral-50 rounded-lg",role:"menuitem",children:"Payment History"}),n.jsxs("div",{className:"px-3 py-2 text-sm text-neutral-400 flex items-center justify-between rounded-lg",children:[n.jsx("span",{children:"SMS Notifications"}),n.jsx("span",{className:"text-xs bg-neutral-100 text-neutral-500 px-2 py-0.5 rounded-full",children:"Coming Soon"})]}),j&&n.jsxs(n.Fragment,{children:[n.jsx("hr",{className:"my-2 border-neutral-100"}),n.jsxs("button",{onClick:()=>f("admin"),className:"w-full text-left px-3 py-2 text-sm text-orange-600 hover:bg-orange-50 rounded-lg flex items-center gap-2",role:"menuitem",children:[n.jsx(_s,{className:"h-4 w-4"}),"Switch to Admin"]})]}),n.jsx("hr",{className:"my-2 border-neutral-100"}),n.jsx("button",{onClick:x,className:"w-full text-left px-3 py-2 text-sm text-red-600 hover:bg-red-50 rounded-lg",role:"menuitem",children:"Sign out"})]})]})]})]})]}),a&&n.jsxs("div",{ref:u,className:"lg:hidden border-t border-burgundy-100 py-2 bg-white",children:[n.jsxs("div",{className:"px-4 py-3 border-b border-burgundy-100",children:[n.jsx("p",{className:"font-semibold text-neutral-800",children:b||"Survivor"}),n.jsx("p",{className:"text-sm text-neutral-400",children:"Fantasy Player"})]}),n.jsxs(z,{to:"/trivia",onClick:()=>i(!1),className:"mx-4 mt-3 mb-2 px-4 py-3 bg-gradient-to-r from-purple-500 to-indigo-500 text-white font-bold rounded-lg flex items-center justify-center gap-2 uppercase tracking-wide",children:[n.jsx(Fl,{className:"w-5 h-5"}),"Play Trivia",n.jsx("span",{className:"bg-white/20 px-2 py-0.5 rounded text-xs",children:"NEW"})]}),n.jsx(z,{to:"/dashboard",className:`block px-4 py-3 text-sm font-semibold uppercase tracking-wide ${v("/dashboard")?"text-burgundy-600 bg-burgundy-50":"text-neutral-600"}`,children:"Dashboard"}),n.jsx(z,{to:"/leagues",className:`block px-4 py-3 text-sm font-semibold uppercase tracking-wide ${v("/leagues")?"text-burgundy-600 bg-burgundy-50":"text-neutral-600"}`,children:"Leagues"}),n.jsx(z,{to:"/castaways",className:`block px-4 py-3 text-sm font-semibold uppercase tracking-wide ${v("/castaways")?"text-burgundy-600 bg-burgundy-50":"text-neutral-600"}`,children:"Castaways"}),n.jsx(z,{to:"/leaderboard",className:`block px-4 py-3 text-sm font-semibold uppercase tracking-wide ${v("/leaderboard")?"text-burgundy-600 bg-burgundy-50":"text-neutral-600"}`,children:"Leaderboard"}),n.jsxs("div",{children:[n.jsx("div",{className:"px-4 py-2 text-sm font-semibold text-neutral-800 uppercase tracking-wide",children:"How to Play"}),n.jsx(z,{to:"/how-to-play",className:`block px-8 py-2 text-sm ${v("/how-to-play")&&!v("/scoring")&&!v("/timeline")?"text-burgundy-600 bg-burgundy-50":"text-neutral-600"}`,children:"Overview"}),n.jsx(z,{to:"/scoring-rules",className:`block px-8 py-2 text-sm ${v("/scoring")||v("/scoring-rules")?"text-burgundy-600 bg-burgundy-50":"text-neutral-600"}`,children:"Scoring Rules"}),n.jsx(z,{to:"/timeline",className:`block px-8 py-2 text-sm ${v("/timeline")?"text-burgundy-600 bg-burgundy-50":"text-neutral-600"}`,children:"Weekly Timeline"})]}),n.jsx("hr",{className:"my-2 border-burgundy-100"}),n.jsx(z,{to:"/profile",className:"block px-4 py-3 text-sm text-neutral-600",children:"Profile Settings"}),n.jsxs("div",{className:"px-4 py-3 text-sm text-neutral-400 flex items-center justify-between",children:[n.jsx("span",{children:"SMS Notifications"}),n.jsx("span",{className:"text-xs bg-neutral-100 text-neutral-500 px-2 py-0.5 rounded-full",children:"Coming Soon"})]}),j&&n.jsx("button",{onClick:()=>{f("admin"),i(!1)},className:"w-full text-left px-4 py-3 text-sm text-orange-600 font-semibold uppercase tracking-wide",children:"Switch to Admin View"}),n.jsx("hr",{className:"my-2 border-burgundy-100"}),n.jsx("button",{onClick:x,className:"w-full text-left px-4 py-3 text-sm text-red-600 font-semibold",children:"Sign out"})]})]})}):s?n.jsx("nav",{className:"bg-white border-b border-neutral-200 shadow-sm sticky top-0 z-50",children:n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"flex items-center justify-between h-16",children:[n.jsx(z,{to:"/",className:"flex-shrink-0",children:n.jsx("img",{src:"/logo.png",alt:"RGFL",className:"h-10 w-auto"})}),n.jsx("div",{className:"w-24"})]})})}):n.jsx("nav",{className:"bg-white border-b border-neutral-200 shadow-sm sticky top-0 z-50",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsxs("div",{className:"flex items-center justify-between h-16",children:[n.jsx(z,{to:"/",className:"flex-shrink-0",children:n.jsx("img",{src:"/logo.png",alt:"RGFL",className:"h-10 w-auto"})}),n.jsxs("div",{className:"hidden md:flex items-center gap-1",children:[n.jsx(z,{to:"/",className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${e.pathname==="/"?"text-burgundy-600 bg-burgundy-50":"text-neutral-600 hover:text-burgundy-600 hover:bg-neutral-50"}`,children:"Home"}),n.jsx(z,{to:"/how-to-play",className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${v("/how-to-play")?"text-burgundy-600 bg-burgundy-50":"text-neutral-600 hover:text-burgundy-600 hover:bg-neutral-50"}`,children:"How to Play"}),n.jsx(z,{to:"/scoring-rules",className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${v("/scoring-rules")||v("/scoring")?"text-burgundy-600 bg-burgundy-50":"text-neutral-600 hover:text-burgundy-600 hover:bg-neutral-50"}`,children:"Scoring Rules"}),n.jsx(z,{to:"/contact",className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${v("/contact")?"text-burgundy-600 bg-burgundy-50":"text-neutral-600 hover:text-burgundy-600 hover:bg-neutral-50"}`,children:"Contact"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:()=>i(!a),className:"md:hidden p-2 text-neutral-600 hover:text-burgundy-600","aria-label":a?"Close menu":"Open menu","aria-expanded":a,children:a?n.jsx(Sn,{className:"h-6 w-6"}):n.jsx(Jm,{className:"h-6 w-6"})}),n.jsx(z,{to:"/login",className:"hidden sm:block text-neutral-600 hover:text-burgundy-600 font-medium text-sm px-4 py-2 rounded-lg hover:bg-neutral-50 transition-colors",children:"Login"}),n.jsx(z,{to:"/signup",className:"bg-burgundy-500 hover:bg-burgundy-600 text-white font-semibold text-sm px-5 py-2 rounded-full transition-colors shadow-sm",children:"Sign Up Free"})]})]}),a&&n.jsxs("div",{ref:u,className:"md:hidden border-t border-neutral-100 py-2 bg-white",children:[n.jsx(z,{to:"/",className:`block px-4 py-3 text-sm font-medium rounded-lg mx-2 ${e.pathname==="/"?"text-burgundy-600 bg-burgundy-50":"text-neutral-600 hover:bg-neutral-50"}`,children:"Home"}),n.jsx(z,{to:"/how-to-play",className:`block px-4 py-3 text-sm font-medium rounded-lg mx-2 ${v("/how-to-play")?"text-burgundy-600 bg-burgundy-50":"text-neutral-600 hover:bg-neutral-50"}`,children:"How to Play"}),n.jsx(z,{to:"/scoring-rules",className:`block px-4 py-3 text-sm font-medium rounded-lg mx-2 ${v("/scoring-rules")||v("/scoring")?"text-burgundy-600 bg-burgundy-50":"text-neutral-600 hover:bg-neutral-50"}`,children:"Scoring Rules"}),n.jsx(z,{to:"/contact",className:`block px-4 py-3 text-sm font-medium rounded-lg mx-2 ${v("/contact")?"text-burgundy-600 bg-burgundy-50":"text-neutral-600 hover:bg-neutral-50"}`,children:"Contact"}),n.jsx("hr",{className:"my-2 border-neutral-100 mx-4"}),n.jsx(z,{to:"/login",className:"block px-4 py-3 text-sm font-medium text-neutral-600 mx-2",children:"Login"})]})]})})}function tn(){const e=new Date().getFullYear();return n.jsx("footer",{className:"bg-neutral-900 text-white mt-auto",children:n.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[n.jsxs("div",{className:"grid md:grid-cols-4 gap-8",children:[n.jsxs("div",{className:"md:col-span-1",children:[n.jsx(z,{to:"/",className:"flex items-center gap-2 mb-4",children:n.jsx("img",{src:"/logo.png",alt:"RGFL",className:"h-10 w-auto"})}),n.jsx("p",{className:"text-neutral-400 text-sm",children:"Fantasy Survivor for people who actually watch Survivor."})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-display font-bold text-sm uppercase tracking-wider text-neutral-400 mb-4",children:"Play"}),n.jsxs("ul",{className:"space-y-2",children:[n.jsx("li",{children:n.jsx(z,{to:"/how-to-play",className:"text-neutral-300 hover:text-burgundy-400 transition-colors text-sm",children:"How to Play"})}),n.jsx("li",{children:n.jsx(z,{to:"/how-to-play#scoring",className:"text-neutral-300 hover:text-burgundy-400 transition-colors text-sm",children:"Scoring Rules"})}),n.jsx("li",{children:n.jsx(z,{to:"/castaways",className:"text-neutral-300 hover:text-burgundy-400 transition-colors text-sm",children:"Castaways"})})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-display font-bold text-sm uppercase tracking-wider text-neutral-400 mb-4",children:"Resources"}),n.jsxs("ul",{className:"space-y-2",children:[n.jsx("li",{children:n.jsx(z,{to:"/contact",className:"text-neutral-300 hover:text-burgundy-400 transition-colors text-sm",children:"Contact Us"})}),n.jsx("li",{children:n.jsx(z,{to:"/privacy",className:"text-neutral-300 hover:text-burgundy-400 transition-colors text-sm",children:"Privacy Policy"})}),n.jsx("li",{children:n.jsx(z,{to:"/terms",className:"text-neutral-300 hover:text-burgundy-400 transition-colors text-sm",children:"Terms of Service"})})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-display font-bold text-sm uppercase tracking-wider text-neutral-400 mb-4",children:"Contact"}),n.jsx("ul",{className:"space-y-2",children:n.jsx("li",{children:n.jsx("a",{href:"https://twitter.com/realitygamesfl",target:"_blank",rel:"noopener noreferrer",className:"text-neutral-300 hover:text-burgundy-400 transition-colors text-sm",children:"@realitygamesfl"})})})]})]}),n.jsxs("div",{className:"border-t border-neutral-800 mt-4 pt-4 flex flex-col md:flex-row justify-between items-center gap-4",children:[n.jsxs("p",{className:"text-neutral-500 text-sm",children:[" ",e," Reality Games Fantasy League. All rights reserved."]}),n.jsxs("div",{className:"flex items-center gap-4 text-sm text-neutral-500",children:[n.jsx(z,{to:"/privacy",className:"hover:text-neutral-300 transition-colors",children:"Privacy"}),n.jsx(z,{to:"/terms",className:"hover:text-neutral-300 transition-colors",children:"Terms"}),n.jsx("span",{children:"Not affiliated with CBS or Survivor."})]})]})]})})}function fX(){return n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex flex-col",children:[n.jsx("a",{href:"#main-content",className:"sr-only focus:not-sr-only focus:absolute focus:top-2 focus:left-2 focus:z-[100] focus:bg-burgundy-600 focus:text-white focus:px-4 focus:py-2 focus:rounded-lg focus:font-semibold focus:shadow-lg",children:"Skip to main content"}),n.jsx(Se,{}),n.jsx("main",{id:"main-content",className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex-1",tabIndex:-1,children:n.jsx(ay,{})}),n.jsx(tn,{})]})}function pX(){const{user:e,profile:t,loading:r}=dt(),s=ts(),a=window.location.hash.includes("access_token");if(r||a)return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-cream-200",children:n.jsx(me,{className:"h-12 w-12 text-burgundy-500 animate-spin"})});if(!e){const i=s.pathname+s.search;return n.jsx(wi,{to:`/login?redirect=${encodeURIComponent(i)}`,replace:!0})}if(!(t!=null&&t.profile_setup_complete)&&s.pathname!=="/profile/setup"){const i=s.pathname+s.search;return n.jsx(wi,{to:`/profile/setup?redirect=${encodeURIComponent(i)}`,replace:!0})}return n.jsx(ay,{})}function xX(){const{user:e,loading:t,isAdmin:r}=dt(),s=window.location.hash.includes("access_token");return t||s?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-cream-200",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-burgundy-500"})}):e?r?n.jsx(ay,{}):n.jsx(wi,{to:"/dashboard",replace:!0,state:{error:"Access denied. Admin privileges required."}}):n.jsx(wi,{to:"/login",replace:!0})}class P4 extends T.Component{constructor(r){super(r);pl(this,"handleReload",()=>{window.location.reload()});pl(this,"handleGoHome",()=>{window.location.href="/"});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(r){return{hasError:!0,error:r,errorInfo:null}}componentDidCatch(r,s){this.setState({errorInfo:s}),console.error("Error Boundary caught error:",r,s),MY&&mt(r,{contexts:{react:{componentStack:s.componentStack}},extra:{errorInfo:s.componentStack}})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated p-8 max-w-md w-full text-center border border-cream-200",children:[n.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6",children:n.jsx(kt,{className:"h-8 w-8 text-red-500"})}),n.jsx("h1",{className:"text-2xl font-display font-bold text-neutral-800 mb-2",children:"Something went wrong"}),n.jsx("p",{className:"text-neutral-500 mb-6",children:"We're sorry, but something unexpected happened. Please try refreshing the page or going back to the home page."}),!1,n.jsxs("div",{className:"flex gap-3 justify-center",children:[n.jsxs("button",{onClick:this.handleReload,className:"btn btn-secondary flex items-center gap-2",children:[n.jsx(Xr,{className:"h-4 w-4"}),"Refresh Page"]}),n.jsxs("button",{onClick:this.handleGoHome,className:"btn btn-primary flex items-center gap-2",children:[n.jsx(C4,{className:"h-4 w-4"}),"Go Home"]})]})]})}):this.props.children}}const gX=T.createContext(null),bX={success:{icon:tt,bg:"bg-green-50",border:"border-green-200",text:"text-green-800",iconColor:"text-green-500"},error:{icon:at,bg:"bg-red-50",border:"border-red-200",text:"text-red-800",iconColor:"text-red-500"},info:{icon:Du,bg:"bg-blue-50",border:"border-blue-200",text:"text-blue-800",iconColor:"text-blue-500"}};function yX({children:e}){const[t,r]=T.useState([]),s=T.useCallback(u=>{r(h=>h.filter(p=>p.id!==u))},[]),a=T.useCallback((u,h="info")=>{const p=Math.random().toString(36).substring(2,9);r(f=>[...f,{id:p,message:u,type:h}]),setTimeout(()=>s(p),5e3)},[s]),i=T.useCallback(u=>a(u,"success"),[a]),o=T.useCallback(u=>a(u,"error"),[a]),d=T.useCallback(u=>a(u,"info"),[a]);return n.jsxs(gX.Provider,{value:{showToast:a,showSuccess:i,showError:o,showInfo:d},children:[e,n.jsx("div",{className:"fixed bottom-4 right-4 z-50 flex flex-col gap-2 max-w-sm",children:t.map(u=>{const h=bX[u.type],p=h.icon;return n.jsxs("div",{className:`flex items-start gap-3 p-4 rounded-xl border shadow-lg animate-slide-up ${h.bg} ${h.border}`,children:[n.jsx(p,{className:`h-5 w-5 flex-shrink-0 mt-0.5 ${h.iconColor}`}),n.jsx("p",{className:`text-sm font-medium flex-1 ${h.text}`,children:u.message}),n.jsx("button",{onClick:()=>s(u.id),className:`flex-shrink-0 ${h.text} hover:opacity-70`,children:n.jsx(Sn,{className:"h-4 w-4"})})]},u.id)})})]})}function vX(){const{user:e,loading:t}=dt();if(!t&&e)return n.jsx(wi,{to:"/dashboard",replace:!0});const[r,s]=T.useState(""),[a,i]=T.useState(!1),[o,d]=T.useState(!1),[u,h]=T.useState(null),p=async f=>{if(f.preventDefault(),!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r)){h("Please enter a valid email address");return}i(!0),h(null);try{const y=JSON.parse(localStorage.getItem("triviaEmails")||"[]");y.includes(r)||(y.push(r),localStorage.setItem("triviaEmails",JSON.stringify(y))),await new Promise(b=>setTimeout(b,500)),d(!0),s("")}catch{h("Something went wrong. Please try again.")}finally{i(!1)}};return n.jsxs("div",{className:"min-h-screen flex flex-col",style:{background:"linear-gradient(180deg, #F5F0E8 0%, #E8E0D5 50%, #DED4C4 100%)"},children:[n.jsx(Se,{}),n.jsx("main",{className:"flex-1 max-w-4xl mx-auto px-6 py-8 w-full",children:n.jsxs("div",{className:"text-center",children:[n.jsxs("h1",{className:"text-4xl sm:text-5xl md:text-6xl text-gray-900 leading-[0.95] mb-8",style:{fontFamily:"Georgia, Times New Roman, serif",fontWeight:400},children:["Fantasy Survivor",n.jsx("br",{}),"for People Who",n.jsx("br",{}),n.jsx("span",{className:"italic text-red-800",children:"Actually"})," Watch"]}),n.jsxs("p",{className:"text-xl sm:text-2xl text-gray-600 mb-10 leading-relaxed max-w-2xl mx-auto",children:["100+ scoring rules. Real strategy. No luck required.",n.jsx("br",{}),"Draft your castaways and prove you know the game."]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center items-center mb-8",children:[n.jsxs(z,{to:"/signup",className:"bg-red-800 hover:bg-red-900 text-white px-6 py-3 rounded-xl font-semibold text-base transition-all shadow-lg hover:shadow-xl flex items-center gap-2",children:["Join Season 50 ",n.jsx("span",{children:""})]}),n.jsx(z,{to:"/how-to-play",className:"bg-white hover:bg-gray-50 text-gray-800 px-6 py-3 rounded-xl font-semibold text-base border-2 border-gray-300 hover:border-gray-400 transition-all shadow-sm",children:"How It Works"})]}),n.jsxs("div",{className:"flex items-center gap-4 max-w-md mx-auto mb-8",children:[n.jsx("div",{className:"flex-1 h-px bg-gray-300"}),n.jsx("span",{className:"text-gray-400 text-sm font-medium",children:"or"}),n.jsx("div",{className:"flex-1 h-px bg-gray-300"})]}),n.jsx("p",{className:"text-gray-600 text-lg mb-4",children:"Not ready yet? Get weekly trivia featuring the Season 50 cast."}),o?n.jsxs("div",{className:"flex items-center justify-center gap-2 text-green-600 bg-green-50 px-6 py-4 rounded-xl max-w-lg mx-auto",children:[n.jsx(tt,{className:"h-5 w-5"}),n.jsx("span",{className:"font-medium",children:"You're subscribed! Check your inbox soon."})]}):n.jsxs("form",{onSubmit:p,className:"max-w-lg mx-auto",children:[n.jsxs("div",{className:"flex gap-3 items-start",children:[n.jsx("input",{type:"email",value:r,onChange:f=>{s(f.target.value),h(null)},placeholder:"Enter your email",className:`flex-1 px-5 py-3 rounded-xl text-base border ${u?"border-red-400":"border-gray-300"} focus:border-red-800 focus:outline-none focus:ring-2 focus:ring-red-800/20 transition-all`,disabled:a,"aria-label":"Email address for trivia newsletter"}),n.jsx("button",{type:"submit",disabled:a||!r,className:"bg-black hover:bg-gray-900 disabled:bg-gray-400 text-white px-6 py-3 rounded-xl font-semibold text-base transition-all shadow-md hover:shadow-lg whitespace-nowrap flex items-center gap-2 shrink-0",children:a?n.jsxs(n.Fragment,{children:[n.jsx(me,{className:"h-4 w-4 animate-spin"}),n.jsx("span",{children:"Signing up..."})]}):"Get Trivia"})]}),u&&n.jsx("p",{className:"text-red-500 text-sm mt-2 text-left",children:u})]})]})}),n.jsx(tn,{})]})}function wX(){const{signInWithGoogle:e,signInWithMagicLink:t}=dt(),[r,s]=T.useState(!1),[a,i]=T.useState(!1),[o,d]=T.useState(""),[u,h]=T.useState(!1),[p,f]=T.useState(!1),[x,y]=T.useState(""),b=async()=>{y(""),s(!0);try{await e()}catch(v){y(v instanceof Error?v.message:"Failed to sign in with Google"),s(!1)}},w=async()=>{y(""),f(!0);try{await t(o),h(!0)}catch(v){y(v instanceof Error?v.message:"Failed to send magic link")}finally{f(!1)}};return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b from-cream-100 to-cream-200 px-4 py-12",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-float max-w-md w-full p-8 animate-slide-up",children:[n.jsx("div",{className:"flex justify-center mb-6",children:n.jsx(z,{to:"/",children:n.jsx("img",{src:"/logo.png",alt:"RGFL",className:"h-24 w-auto"})})}),n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("h1",{className:"font-display text-3xl text-neutral-800",children:"Welcome Back"}),n.jsx("p",{className:"text-neutral-500 mt-2",children:"Log in to continue to your dashboard"})]}),x&&n.jsx("div",{className:"bg-error-50 border border-error-200 rounded-xl p-4 mb-6",children:n.jsx("p",{className:"text-error-600 text-sm",children:x})}),n.jsx("div",{className:"space-y-4 mb-6",children:n.jsx("p",{className:"text-neutral-600 text-center",children:"Log in with your Google account. OAuth is the only authentication method available."})}),n.jsxs("div",{className:"mt-6 space-y-3",children:[n.jsxs("button",{type:"button",onClick:b,disabled:r,className:"btn btn-secondary w-full flex items-center justify-center gap-3 shadow-card hover:shadow-card-hover transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[n.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),n.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),n.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),n.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),r?"Connecting...":"Continue with Google"]}),n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute inset-0 flex items-center",children:n.jsx("div",{className:"w-full border-t border-neutral-200"})}),n.jsx("div",{className:"relative flex justify-center text-sm",children:n.jsx("span",{className:"px-2 bg-white text-neutral-400",children:"OR"})})]}),!a&&!u&&n.jsx("button",{type:"button",onClick:()=>i(!0),className:"text-sm text-neutral-500 hover:text-burgundy-500 transition-colors underline",children:"Sign in with email instead"}),a&&!u&&n.jsxs("div",{className:"space-y-3 animate-slide-up",children:[n.jsx("input",{type:"email",value:o,onChange:v=>d(v.target.value),placeholder:"Enter your email",className:"input w-full",disabled:p}),n.jsx("button",{type:"button",onClick:w,disabled:!o||p,className:"btn btn-primary w-full disabled:opacity-50 disabled:cursor-not-allowed",children:p?"Sending...":"Send Magic Link"}),n.jsx("button",{type:"button",onClick:()=>i(!1),className:"text-sm text-neutral-400 hover:text-neutral-600 transition-colors",children:" Back to Google Sign In"})]}),u&&n.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4",children:[n.jsxs("p",{className:"text-green-700 text-sm text-center",children:[" Check your email! We sent a magic link to ",n.jsx("strong",{children:o})]}),n.jsx("p",{className:"text-green-600 text-xs text-center mt-2",children:"Click the link to sign in (check spam if you don't see it)"})]})]}),n.jsx("div",{className:"mt-8 text-center",children:n.jsxs("p",{className:"text-neutral-500 text-sm",children:["Don't have an account?"," ",n.jsx(z,{to:"/signup",className:"text-burgundy-500 hover:text-burgundy-600 font-semibold",children:"Sign up"})]})}),n.jsx("div",{className:"mt-6 text-center",children:n.jsx(z,{to:"/",className:"text-sm text-neutral-400 hover:text-neutral-600 transition-colors",children:" Back to home"})})]})})}function p2(){const{signInWithGoogle:e,signInWithMagicLink:t}=dt(),[r,s]=T.useState(!1),[a,i]=T.useState(!1),[o,d]=T.useState(""),[u,h]=T.useState(!1),[p,f]=T.useState(!1),[x,y]=T.useState(""),b=async()=>{y(""),s(!0);try{await e()}catch(v){y(v instanceof Error?v.message:"Failed to sign in with Google"),s(!1)}},w=async()=>{y(""),f(!0);try{await t(o),h(!0)}catch(v){y(v instanceof Error?v.message:"Failed to send magic link")}finally{f(!1)}};return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b from-cream-100 to-cream-200 px-4 py-12",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-float max-w-md w-full p-8 animate-slide-up",children:[n.jsx("div",{className:"flex justify-center mb-6",children:n.jsx(z,{to:"/",children:n.jsx("img",{src:"/logo.png",alt:"RGFL",className:"h-24 w-auto"})})}),n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("h1",{className:"font-display text-3xl text-neutral-800",children:"Sign up"}),n.jsx("p",{className:"text-neutral-500 mt-2",children:"Free and only takes a minute"})]}),x&&n.jsx("div",{className:"bg-error-50 border border-error-200 rounded-xl p-4 mb-6",children:n.jsx("p",{className:"text-error-600 text-sm",children:x})}),n.jsx("div",{className:"space-y-4",children:n.jsx("p",{className:"text-neutral-600 text-center",children:"Sign up with your Google account. Profile questions will be asked after registration."})}),n.jsxs("div",{className:"mt-6 space-y-3",children:[n.jsxs("button",{type:"button",onClick:b,disabled:r,className:"btn btn-secondary w-full flex items-center justify-center gap-3 shadow-card hover:shadow-card-hover transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[n.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),n.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),n.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),n.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),r?"Connecting...":"Continue with Google"]}),n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute inset-0 flex items-center",children:n.jsx("div",{className:"w-full border-t border-neutral-200"})}),n.jsx("div",{className:"relative flex justify-center text-sm",children:n.jsx("span",{className:"px-2 bg-white text-neutral-400",children:"OR"})})]}),!a&&!u&&n.jsx("button",{type:"button",onClick:()=>i(!0),className:"text-sm text-neutral-500 hover:text-burgundy-500 transition-colors underline",children:"Sign up with email instead"}),a&&!u&&n.jsxs("div",{className:"space-y-3 animate-slide-up",children:[n.jsx("input",{type:"email",value:o,onChange:v=>d(v.target.value),placeholder:"Enter your email",className:"input w-full",disabled:p}),n.jsx("button",{type:"button",onClick:w,disabled:!o||p,className:"btn btn-primary w-full disabled:opacity-50 disabled:cursor-not-allowed",children:p?"Sending...":"Send Magic Link"}),n.jsx("button",{type:"button",onClick:()=>i(!1),className:"text-sm text-neutral-400 hover:text-neutral-600 transition-colors",children:" Back to Google Sign Up"})]}),u&&n.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4",children:[n.jsxs("p",{className:"text-green-700 text-sm text-center",children:[" Check your email! We sent a magic link to ",n.jsx("strong",{children:o})]}),n.jsx("p",{className:"text-green-600 text-xs text-center mt-2",children:"Click the link to complete signup (check spam if you don't see it)"})]})]}),n.jsx("div",{className:"mt-8 text-center",children:n.jsxs("p",{className:"text-neutral-500 text-sm",children:["Already have an account?"," ",n.jsx(z,{to:"/login",className:"text-burgundy-500 hover:text-burgundy-600 font-semibold",children:"Login"})]})}),n.jsx("div",{className:"mt-6 text-center",children:n.jsx(z,{to:"/",className:"text-sm text-neutral-400 hover:text-neutral-600 transition-colors",children:" Back to home"})})]})})}function Qm(e){return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}function Xm(e){const t=new Date,r=e.getTime()-t.getTime();if(r<=0)return"Now";const s=Math.floor(r/(1e3*60*60*24)),a=Math.floor(r%(1e3*60*60*24)/(1e3*60*60)),i=Math.floor(r%(1e3*60*60)/(1e3*60));return s>0?`${s}d ${a}h`:a>0?`${a}h ${i}m`:`${i}m`}const _X={burgundy:{bg:"bg-gradient-to-r from-burgundy-500 to-burgundy-600",btn:"bg-white text-burgundy-600 hover:bg-cream-100"},orange:{bg:"bg-gradient-to-r from-orange-500 to-orange-600",btn:"bg-white text-orange-600 hover:bg-cream-100"},amber:{bg:"bg-gradient-to-r from-amber-500 to-amber-600",btn:"bg-white text-amber-600 hover:bg-cream-100"},green:{bg:"bg-gradient-to-r from-green-500 to-green-600",btn:"bg-white text-green-600 hover:bg-cream-100"},blue:{bg:"bg-gradient-to-r from-blue-500 to-blue-600",btn:"bg-white text-blue-600 hover:bg-cream-100"}},jX={make_pick:"bg-white animate-pulse",picks_locked:"bg-white/80",awaiting_results:"bg-white/60",results_posted:"bg-white/60"};function NX({weeklyPhase:e,primaryLeagueId:t}){const r=_X[e.color];return n.jsx("div",{className:`rounded-2xl p-6 mb-8 ${r.bg} text-white`,children:n.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("div",{className:`w-3 h-3 rounded-full ${jX[e.phase]}`}),n.jsx("span",{className:"text-sm font-semibold opacity-90 uppercase tracking-wide",children:e.label})]}),n.jsx("p",{className:"text-lg font-medium",children:e.description}),e.countdown&&n.jsxs("p",{className:"text-sm opacity-80 mt-1",children:[e.countdown.label,": ",Xm(e.countdown.targetTime)]})]}),t&&n.jsx(z,{to:`/leagues/${t}${e.ctaPath}`,className:`btn ${r.btn} font-semibold`,children:e.ctaLabel})]})})}function SX({recentlyEliminated:e,autoPickedLeagues:t}){var a;const r=e&&e.length>0,s=t&&t.length>0;return!r&&!s?null:n.jsxs("div",{className:"space-y-3 mb-6",children:[r&&n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-4 flex items-start gap-3",children:[n.jsx(Nn,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-red-800",children:e.length===1?`${e[0].name} was eliminated!`:`${e.map(i=>i.name).join(" and ")} were eliminated!`}),n.jsx("p",{className:"text-sm text-red-700 mt-1",children:e.length===1?"The tribe has spoken. You still have your other castaway to play for!":"The tribe has spoken. Your season may be impacted by these eliminations."})]})]}),s&&n.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-2xl p-4 flex items-start gap-3",children:[n.jsx(at,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("p",{className:"font-medium text-amber-800",children:["You were auto-picked in"," ",t.length===1?((a=t[0].leagues)==null?void 0:a.name)||"a league":`${t.length} leagues`]}),n.jsx("p",{className:"text-sm text-amber-700 mt-1",children:"You didn't submit a pick in time last episode. Make sure to pick before the deadline this week!"})]})]})]})}function kX({gamePhase:e,activeSeason:t,nextEpisode:r,primaryLeagueId:s,castawayCount:a,hasPickedForNextEpisode:i=!1}){return n.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[e==="pre_draft"||e==="pre_registration"?n.jsxs(z,{to:"/draft/rankings",className:"col-span-2 bg-burgundy-500 hover:bg-burgundy-600 text-white rounded-2xl p-6 transition-colors group",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-14 h-14 bg-white/20 rounded-xl flex items-center justify-center",children:n.jsx(aQ,{className:"h-7 w-7"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-bold text-xl",children:"Set Your Draft Rankings"}),n.jsxs("p",{className:"text-burgundy-100 text-sm mt-1",children:["Rank ",a>0?`all ${a}`:"the"," castaways before the draft"]})]}),n.jsx(hr,{className:"h-6 w-6 text-white/60 group-hover:translate-x-1 transition-transform"})]}),t&&n.jsxs("div",{className:"mt-4 pt-4 border-t border-white/20 flex items-center gap-2",children:[n.jsx(Mt,{className:"h-4 w-4 text-burgundy-200"}),n.jsxs("span",{className:"text-sm text-burgundy-100",children:["Premiere in ",Xm(new Date(t.premiere_at))]})]})]}):e==="active"&&r?i?n.jsxs(z,{to:s?`/leagues/${s}/pick`:"/leagues",className:"col-span-2 bg-green-600 hover:bg-green-700 text-white rounded-2xl p-6 transition-colors group",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-14 h-14 bg-white/20 rounded-xl flex items-center justify-center",children:n.jsx(gr,{className:"h-7 w-7"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-bold text-xl",children:"Pick Submitted "}),n.jsxs("p",{className:"text-green-100 text-sm mt-1",children:["Episode ",r.number,"  Your pick is locked in!"]})]}),n.jsx(hr,{className:"h-6 w-6 text-white/60 group-hover:translate-x-1 transition-transform"})]}),n.jsxs("div",{className:"mt-4 pt-4 border-t border-white/20 flex items-center gap-2",children:[n.jsx(Mt,{className:"h-4 w-4 text-green-200"}),n.jsxs("span",{className:"text-sm text-green-100",children:["Episode airs in ",Xm(new Date(r.air_date))]})]})]}):n.jsxs(z,{to:s?`/leagues/${s}/pick`:"/leagues",className:"col-span-2 bg-burgundy-500 hover:bg-burgundy-600 text-white rounded-2xl p-6 transition-colors group",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-14 h-14 bg-white/20 rounded-xl flex items-center justify-center",children:n.jsx(gr,{className:"h-7 w-7"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-bold text-xl",children:"Make Your Pick"}),n.jsxs("p",{className:"text-burgundy-100 text-sm mt-1",children:["Episode ",r.number,"  Lock in before Wednesday"]})]}),n.jsx(hr,{className:"h-6 w-6 text-white/60 group-hover:translate-x-1 transition-transform"})]}),n.jsxs("div",{className:"mt-4 pt-4 border-t border-white/20 flex items-center gap-2",children:[n.jsx(Mt,{className:"h-4 w-4 text-burgundy-200"}),n.jsxs("span",{className:"text-sm text-burgundy-100",children:["Picks lock in ",Xm(new Date(r.picks_lock_at))]})]})]}):n.jsx(z,{to:"/leaderboard",className:"col-span-2 bg-burgundy-500 hover:bg-burgundy-600 text-white rounded-2xl p-6 transition-colors group",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-14 h-14 bg-white/20 rounded-xl flex items-center justify-center",children:n.jsx(Ke,{className:"h-7 w-7"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-bold text-xl",children:"View Final Standings"}),n.jsx("p",{className:"text-burgundy-100 text-sm mt-1",children:t?`Season ${t.number} results are in!`:"Results are in!"})]}),n.jsx(hr,{className:"h-6 w-6 text-white/60 group-hover:translate-x-1 transition-transform"})]})}),n.jsxs(z,{to:"/scoring-rules",className:"bg-white hover:bg-cream-50 border-2 border-cream-200 hover:border-burgundy-300 rounded-2xl p-5 transition-all group",children:[n.jsx("div",{className:"w-12 h-12 bg-burgundy-100 rounded-xl flex items-center justify-center mb-3 group-hover:bg-burgundy-500 transition-colors",children:n.jsx(Lu,{className:"h-6 w-6 text-burgundy-500 group-hover:text-white transition-colors"})}),n.jsx("h3",{className:"font-bold text-neutral-800",children:"Scoring Rules"}),n.jsx("p",{className:"text-neutral-500 text-sm mt-1",children:"See how you score"})]}),n.jsxs(z,{to:"/castaways",className:"bg-white hover:bg-cream-50 border-2 border-cream-200 hover:border-burgundy-300 rounded-2xl p-5 transition-all group",children:[n.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-xl flex items-center justify-center mb-3 group-hover:bg-orange-500 transition-colors",children:n.jsx(bn,{className:"h-6 w-6 text-orange-500 group-hover:text-white transition-colors"})}),n.jsxs("h3",{className:"font-bold text-neutral-800",children:[a>0?a:"View"," Castaways"]}),n.jsx("p",{className:"text-neutral-500 text-sm mt-1",children:"Meet the players"})]})]})}function EX({leagueCount:e,activeCastaways:t,totalPoints:r}){return n.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-8",children:[n.jsxs("div",{className:"bg-white rounded-2xl p-5 border border-cream-200 text-center",children:[n.jsx("div",{className:"w-12 h-12 bg-burgundy-100 rounded-xl flex items-center justify-center mx-auto mb-3",children:n.jsx($e,{className:"h-6 w-6 text-burgundy-500"})}),n.jsx("p",{className:"text-3xl font-display font-bold text-neutral-800",children:e}),n.jsx("p",{className:"text-sm text-neutral-500 mt-1",children:"My Leagues"})]}),n.jsxs("div",{className:"bg-white rounded-2xl p-5 border border-cream-200 text-center",children:[n.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-xl flex items-center justify-center mx-auto mb-3",children:n.jsx(bn,{className:"h-6 w-6 text-orange-500"})}),n.jsx("p",{className:"text-3xl font-display font-bold text-neutral-800",children:t}),n.jsx("p",{className:"text-sm text-neutral-500 mt-1",children:"Active Castaways"})]}),n.jsxs("div",{className:"bg-white rounded-2xl p-5 border border-cream-200 text-center",children:[n.jsx("div",{className:"w-12 h-12 bg-amber-100 rounded-xl flex items-center justify-center mx-auto mb-3",children:n.jsx(Zr,{className:"h-6 w-6 text-amber-600"})}),n.jsx("p",{className:"text-3xl font-display font-bold text-neutral-800",children:r}),n.jsx("p",{className:"text-sm text-neutral-500 mt-1",children:"Total Points"})]})]})}function CX({rank:e,totalPoints:t}){return n.jsx(z,{to:"/leaderboard",className:"block bg-white hover:bg-cream-50 rounded-2xl p-6 border border-cream-200 mb-8 transition-colors group",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-14 h-14 bg-amber-100 rounded-xl flex items-center justify-center group-hover:bg-amber-500 transition-colors",children:n.jsx(Pr,{className:"h-7 w-7 text-amber-600 group-hover:text-white transition-colors"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-lg text-neutral-800",children:"Your Global Rank"}),n.jsxs("p",{className:"text-neutral-500 text-sm",children:[t," points earned this season"]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("p",{className:"text-4xl font-display font-bold text-burgundy-500",children:["#",e]}),n.jsx("p",{className:"text-xs text-neutral-400 mt-1",children:"out of all players"})]})]})})}function Hn(e,t){return t||`https://api.dicebear.com/7.x/initials/svg?seed=${encodeURIComponent(e)}&backgroundColor=8B0000&textColor=ffffff&fontSize=40`}const TX=e=>e instanceof TypeError,RX=e=>e===408||e===429||e>=502&&e<=504,x2=e=>new Promise(t=>setTimeout(t,e));async function IX(e,t={}){const{maxRetries:r=3,retryDelay:s=1e3,...a}=t;let i=null,o=null;for(let d=0;d<=r;d++)try{const u=await fetch(e,a);if(u.ok||!RX(u.status)||(o=u,d===r))return u;const h=s*Math.pow(2,d);console.warn(`API request to ${e} failed with status ${u.status}, retrying in ${h}ms...`),await x2(h)}catch(u){if(i=u instanceof Error?u:new Error(String(u)),!TX(u)||d===r)throw i;const h=s*Math.pow(2,d);console.warn(`Network error on ${e}, retrying in ${h}ms...`,u),await x2(h)}if(o)return o;throw i||new Error("Unknown error")}async function Lp(e,t={}){const s=e.startsWith("/api")?e:`/api${e}`,a=t.method||"GET",i=performance.now();return Hs({op:"http.client",name:`${a} ${s}`},async o=>{try{o.setAttribute("http.method",a),o.setAttribute("http.url",s);const d=await IX(s,{...t,headers:{"Content-Type":"application/json",...t.headers}}),u=d.status,h=performance.now()-i;o.setAttribute("http.status_code",u),Xt.distribution("api_response_time",h,{endpoint:s.replace(/\/[a-f0-9-]{36}/g,"/:id"),method:a,status:String(u)});const p=await d.text();if(!p)return{data:null,error:d.ok?null:"Empty response",status:u};let f=null,x=null;try{const y=JSON.parse(p);d.ok?f=y:(x=y.error||y.message||`Request failed with status ${u}`,o.setAttribute("error",x||"Unknown error"),Xt.count("api_error",1,{endpoint:s,status:String(u)}))}catch{x=p,o.setAttribute("error",x)}return{data:f,error:x,status:u}}catch(d){const u=d instanceof Error?d:new Error(String(d)),h=performance.now()-i;return o.setAttribute("error",!0),o.setAttribute("error.message",u.message),Xt.distribution("api_response_time",h,{endpoint:s.replace(/\/[a-f0-9-]{36}/g,"/:id"),method:a,status:"error"}),Xt.count("api_error",1,{endpoint:s,type:"network"}),mt(u,{tags:{api_endpoint:s,http_method:a}}),{data:null,error:u.message,status:0}}})}async function Je(e,t,r={}){return Lp(e,{...r,headers:{...r.headers,Authorization:`Bearer ${t}`}})}const A4=(e,t,r)=>r?Je(e,r,{method:"POST",body:JSON.stringify(t)}):Lp(e,{method:"POST",body:JSON.stringify(t)});function PX({leagueId:e,leagueName:t,seasonId:r}){const{user:s}=dt(),a=Et(),[i,o]=T.useState(!1),[d,u]=T.useState(null),[h,p]=T.useState(!1),[f,x]=T.useState(null),[y,b]=T.useState({days:0,hours:0,minutes:0}),{data:w}=re({queryKey:["currentEpisode",r],queryFn:async()=>{const L=new Date().toISOString(),{data:P,error:$}=await K.from("episodes").select("*").eq("season_id",r).gte("picks_lock_at",L).order("air_date",{ascending:!0}).limit(1).single();if($&&$.code!=="PGRST116")throw $;return P},enabled:!!r}),{data:v}=re({queryKey:["roster",e,s==null?void 0:s.id],queryFn:async()=>{const{data:L,error:P}=await K.from("rosters").select("id, castaway_id, castaways(id, name, photo_url, status)").eq("league_id",e).eq("user_id",s.id).is("dropped_at",null);if(P)throw P;return L},enabled:!!e&&!!(s!=null&&s.id)}),{data:j}=re({queryKey:["currentPick",e,w==null?void 0:w.id,s==null?void 0:s.id],queryFn:async()=>{if(!(w!=null&&w.id))return null;const{data:L,error:P}=await K.from("weekly_picks").select("*").eq("league_id",e).eq("episode_id",w.id).eq("user_id",s.id).single();if(P&&P.code!=="PGRST116")throw P;return L},enabled:!!e&&!!(w!=null&&w.id)&&!!(s!=null&&s.id)}),{data:C}=re({queryKey:["castawayStats",e,s==null?void 0:s.id],queryFn:async()=>{if(!v)return[];const L=v.map(D=>D.castaway_id);if(L.length===0)return[];const{data:P,error:$}=await K.from("weekly_picks").select("castaway_id, points_earned").eq("league_id",e).eq("user_id",s.id).in("castaway_id",L).in("status",["locked","auto_picked"]);if($)throw $;const B=new Map;return L.forEach(D=>{B.set(D,{castaway_id:D,total_points:0,times_picked:0})}),P==null||P.forEach(D=>{if(D.castaway_id){const se=B.get(D.castaway_id);se&&(se.total_points+=D.points_earned||0,se.times_picked+=1)}}),Array.from(B.values())},enabled:!!e&&!!(s!=null&&s.id)&&!!v&&v.length>0});T.useEffect(()=>{if(!(w!=null&&w.picks_lock_at))return;const L=()=>{const $=new Date(w.picks_lock_at).getTime(),B=Date.now(),D=Math.max(0,$-B);b({days:Math.floor(D/(1e3*60*60*24)),hours:Math.floor(D%(1e3*60*60*24)/(1e3*60*60)),minutes:Math.floor(D%(1e3*60*60)/(1e3*60))})};L();const P=setInterval(L,6e4);return()=>clearInterval(P)},[w==null?void 0:w.picks_lock_at]),T.useEffect(()=>{j!=null&&j.castaway_id&&u(j.castaway_id)},[j==null?void 0:j.castaway_id]);const S=De({mutationFn:async L=>{if(!(w!=null&&w.id))throw new Error("No episode available");const{data:{session:P}}=await K.auth.getSession();if(!(P!=null&&P.access_token))throw new Error("Not authenticated");const $=await A4(`/leagues/${e}/picks`,{castaway_id:L,episode_id:w.id},P.access_token);if($.error)throw new Error($.error);return $.data},onSuccess:()=>{a.invalidateQueries({queryKey:["currentPick",e,w==null?void 0:w.id,s==null?void 0:s.id]}),a.invalidateQueries({queryKey:["next-episode-picks"]}),p(!0),x(null),setTimeout(()=>{p(!1),o(!1)},2e3)},onError:L=>{x(L.message||"Failed to save pick"),p(!1)}}),k=()=>{d&&(x(null),S.mutate(d))};if(!w||w.picks_lock_at&&new Date(w.picks_lock_at)<=new Date)return null;const E=!!(j!=null&&j.castaway_id),I=(v==null?void 0:v.filter(L=>{var P;return((P=L.castaways)==null?void 0:P.status)==="active"}))||[],M=v==null?void 0:v.find(L=>L.castaway_id===(j==null?void 0:j.castaway_id)),O=L=>C==null?void 0:C.find(P=>P.castaway_id===L);return i?n.jsxs("div",{className:"mt-4 bg-white rounded-xl border-2 border-burgundy-200 overflow-hidden",children:[n.jsxs("div",{className:"p-4 bg-burgundy-50 border-b border-burgundy-100 flex items-center justify-between cursor-pointer",onClick:()=>o(!1),children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(gr,{className:"h-5 w-5 text-burgundy-600"}),n.jsxs("div",{children:[n.jsxs("p",{className:"font-medium text-burgundy-800",children:["Episode ",w.number," Pick"]}),n.jsxs("div",{className:"flex items-center gap-1 text-sm text-burgundy-600",children:[n.jsx(Mt,{className:"h-3 w-3"}),y.days>0?`${y.days}d ${y.hours}h left`:`${y.hours}h ${y.minutes}m left`]})]})]}),n.jsx(zs,{className:"h-5 w-5 text-burgundy-400"})]}),n.jsx("div",{className:"p-4 space-y-2 max-h-64 overflow-y-auto",children:I.length===0?n.jsxs("div",{className:"text-center py-4",children:[n.jsx(at,{className:"h-8 w-8 text-orange-500 mx-auto mb-2"}),n.jsx("p",{className:"text-sm text-neutral-600",children:"No active castaways available"})]}):I.map(L=>{const P=O(L.castaway_id),$=d===L.castaway_id,B=(j==null?void 0:j.castaway_id)===L.castaway_id;return n.jsxs("button",{onClick:()=>u(L.castaway_id),className:`w-full flex items-center gap-3 p-3 rounded-xl transition-all ${$?"bg-burgundy-100 border-2 border-burgundy-400":"bg-cream-50 border-2 border-transparent hover:border-cream-300"}`,children:[n.jsx("img",{src:Hn(L.castaways.name,L.castaways.photo_url),alt:L.castaways.name,className:"w-10 h-10 rounded-full object-cover"}),n.jsxs("div",{className:"flex-1 text-left",children:[n.jsx("p",{className:"font-medium text-neutral-800",children:L.castaways.name}),P&&P.times_picked>0&&n.jsxs("p",{className:"text-xs text-neutral-500",children:[n.jsx(kn,{className:"h-3 w-3 inline mr-1 text-amber-500"}),P.total_points," pts from ",P.times_picked," pick",P.times_picked!==1?"s":""]})]}),B&&n.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full",children:"Current"}),$&&!B&&n.jsx("div",{className:"w-5 h-5 rounded-full bg-burgundy-500 flex items-center justify-center",children:n.jsx(tt,{className:"h-4 w-4 text-white"})})]},L.id)})}),n.jsxs("div",{className:"p-4 border-t border-cream-100 bg-cream-50/50",children:[h&&n.jsxs("div",{className:"mb-3 p-3 bg-green-50 border border-green-200 rounded-lg flex items-center gap-2",children:[n.jsx(tt,{className:"h-4 w-4 text-green-600"}),n.jsx("p",{className:"text-sm text-green-700 font-medium",children:"Pick saved!"})]}),f&&n.jsxs("div",{className:"mb-3 p-3 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2",children:[n.jsx(at,{className:"h-4 w-4 text-red-600"}),n.jsx("p",{className:"text-sm text-red-700",children:f})]}),n.jsx("button",{onClick:k,disabled:!d||S.isPending,className:`w-full py-2.5 rounded-lg font-medium transition-all ${d?"bg-burgundy-500 hover:bg-burgundy-600 text-white":"bg-cream-200 text-neutral-400 cursor-not-allowed"}`,children:S.isPending?n.jsxs("span",{className:"flex items-center justify-center gap-2",children:[n.jsx(me,{className:"h-4 w-4 animate-spin"}),"Saving..."]}):E?"Update Pick":"Confirm Pick"})]})]}):n.jsx("div",{className:`mt-4 p-4 rounded-xl border-2 transition-all cursor-pointer ${E?"bg-green-50 border-green-200 hover:border-green-300":"bg-burgundy-50 border-burgundy-200 hover:border-burgundy-300"}`,onClick:()=>o(!0),children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${E?"bg-green-100":"bg-burgundy-100"}`,children:E?n.jsx(tt,{className:"h-5 w-5 text-green-600"}):n.jsx(gr,{className:"h-5 w-5 text-burgundy-600"})}),n.jsxs("div",{children:[n.jsxs("p",{className:`font-medium ${E?"text-green-800":"text-burgundy-800"}`,children:["Episode ",w.number," Pick"]}),E&&M?n.jsxs("p",{className:"text-sm text-green-600",children:[M.castaways.name," selected"]}):n.jsx("p",{className:"text-sm text-burgundy-600",children:y.days>0?`${y.days}d ${y.hours}h left`:`${y.hours}h ${y.minutes}m left`})]})]}),n.jsx(un,{className:`h-5 w-5 ${E?"text-green-400":"text-burgundy-400"}`})]})})}function AX({leagueId:e,leagueName:t,leagueCode:r,totalPoints:s,rank:a,rosters:i,seasonId:o,showWeeklyPick:d=!1,castawayPoints:u=[]}){const h=p=>{const f=u.find(x=>x.castaway_id===p);return(f==null?void 0:f.total_points)||0};return n.jsxs("div",{className:"bg-white rounded-2xl border border-cream-200 overflow-hidden",children:[n.jsx(z,{to:`/leagues/${e}`,className:"block hover:bg-cream-50 transition-colors group",children:n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-lg text-neutral-800 group-hover:text-burgundy-600 transition-colors",children:t}),n.jsx("p",{className:"text-sm text-neutral-400 font-mono",children:r})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-2xl font-display text-burgundy-500",children:s}),n.jsx("p",{className:"text-xs text-neutral-400",children:"points"})]})]}),n.jsx("div",{className:"flex gap-3",children:i.length>0?i.map(p=>{var x,y,b,w,v,j,C,S;const f=h(p.castaway_id);return n.jsxs("div",{className:`flex items-center gap-3 px-4 py-3 rounded-xl flex-1 ${((x=p.castaway)==null?void 0:x.status)==="eliminated"?"bg-neutral-100 opacity-60":"bg-cream-50"}`,children:[n.jsx("img",{src:Hn(((y=p.castaway)==null?void 0:y.name)||"Unknown",(b=p.castaway)==null?void 0:b.photo_url),alt:((w=p.castaway)==null?void 0:w.name)||"Castaway",className:`w-10 h-10 rounded-full object-cover ${((v=p.castaway)==null?void 0:v.status)==="eliminated"?"grayscale":""}`}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:`font-medium text-sm ${((j=p.castaway)==null?void 0:j.status)==="eliminated"?"text-neutral-500 line-through":"text-neutral-800"}`,children:((C=p.castaway)==null?void 0:C.name)||"Unknown"}),n.jsx("p",{className:"text-xs text-neutral-400",children:((S=p.castaway)==null?void 0:S.status)==="eliminated"?"Eliminated":"Active"})]}),f>0&&n.jsxs("div",{className:"flex items-center gap-1 bg-amber-50 px-2 py-1 rounded-lg",children:[n.jsx(kn,{className:"h-3 w-3 text-amber-500"}),n.jsx("span",{className:"text-xs font-semibold text-amber-700",children:f})]})]},p.castaway_id)}):n.jsx("div",{className:"flex-1 text-center py-4 bg-cream-50 rounded-xl",children:n.jsx("p",{className:"text-sm text-neutral-400",children:"No castaways drafted yet"})})}),a&&n.jsxs("div",{className:"mt-4 pt-4 border-t border-cream-100 flex items-center justify-between",children:[n.jsx("span",{className:"text-sm text-neutral-500",children:"Your Rank"}),n.jsxs("span",{className:"font-semibold text-burgundy-500",children:["#",a]})]})]})}),d&&o&&n.jsx("div",{className:"px-6 pb-6",children:n.jsx(PX,{leagueId:e,leagueName:t,seasonId:o})})]})}function MX({season:e}){return n.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-cream-200",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"w-10 h-10 bg-burgundy-100 rounded-xl flex items-center justify-center",children:n.jsx(T4,{className:"h-5 w-5 text-burgundy-500"})}),n.jsxs("div",{children:[n.jsxs("h3",{className:"font-semibold text-neutral-800",children:["Season ",e.number]}),n.jsx("p",{className:"text-sm text-neutral-400",children:e.name})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsx("span",{className:"text-neutral-500",children:"Registration Opens"}),n.jsx("span",{className:"text-burgundy-500 font-semibold",children:Qm(e.registration_opens_at)})]}),n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsx("span",{className:"text-neutral-500",children:"Premiere"}),n.jsx("span",{className:"text-neutral-800 font-semibold",children:Qm(e.premiere_at)})]}),n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsx("span",{className:"text-neutral-500",children:"Draft Deadline"}),n.jsx("span",{className:"text-neutral-800 font-semibold",children:Qm(e.draft_deadline)})]})]})]})}function OX(){return n.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-cream-200",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"w-10 h-10 bg-amber-100 rounded-xl flex items-center justify-center",children:n.jsx(er,{className:"h-5 w-5 text-amber-600"})}),n.jsx("h3",{className:"font-semibold text-neutral-800",children:"Weekly Timeline"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-burgundy-500 mt-2 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-neutral-800",children:"Wednesday 5pm PST"}),n.jsx("p",{className:"text-xs text-neutral-500",children:"Picks lock when episode airs"})]})]}),n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-orange-500 mt-2 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-neutral-800",children:"Wednesday 8pm EST / 5pm PST"}),n.jsx("p",{className:"text-xs text-neutral-500",children:"Episode airs on CBS"})]})]}),n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 mt-2 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-neutral-800",children:"Wednesday Night"}),n.jsx("p",{className:"text-xs text-neutral-500",children:"Results posted after West Coast airing"})]})]}),n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-amber-500 mt-2 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-neutral-800",children:"Thursday Morning"}),n.jsx("p",{className:"text-xs text-neutral-500",children:"Scoring finalized"})]})]}),n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500 mt-2 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-neutral-800",children:"Thursday"}),n.jsx("p",{className:"text-xs text-neutral-500",children:"Next week's picks open"})]})]})]})]})}function LX(){const e=ns(),t=r=>{window.scrollTo({top:0,behavior:"instant"}),e(r)};return n.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-cream-200",children:[n.jsx("h3",{className:"font-semibold text-neutral-800 mb-4",children:"Quick Links"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("button",{onClick:()=>t("/how-to-play"),className:"w-full flex items-center gap-3 p-3 rounded-xl hover:bg-cream-50 transition-colors text-left",children:[n.jsx(Lu,{className:"h-5 w-5 text-neutral-400"}),n.jsx("span",{className:"text-sm text-neutral-700",children:"How to Play"}),n.jsx(hr,{className:"h-4 w-4 text-neutral-300 ml-auto"})]}),n.jsxs("button",{onClick:()=>t("/scoring-rules"),className:"w-full flex items-center gap-3 p-3 rounded-xl hover:bg-cream-50 transition-colors text-left",children:[n.jsx(gr,{className:"h-5 w-5 text-neutral-400"}),n.jsx("span",{className:"text-sm text-neutral-700",children:"Scoring Rules"}),n.jsx(hr,{className:"h-4 w-4 text-neutral-300 ml-auto"})]}),n.jsxs("button",{onClick:()=>t("/castaways"),className:"w-full flex items-center gap-3 p-3 rounded-xl hover:bg-cream-50 transition-colors text-left",children:[n.jsx(bn,{className:"h-5 w-5 text-neutral-400"}),n.jsx("span",{className:"text-sm text-neutral-700",children:"View Castaways"}),n.jsx(hr,{className:"h-4 w-4 text-neutral-300 ml-auto"})]})]})]})}function $X({seasonStarted:e=!1}){return e?null:n.jsxs("div",{className:"bg-gradient-to-br from-purple-500 via-purple-600 to-indigo-600 rounded-xl p-4 text-white shadow-elevated relative overflow-hidden",children:[n.jsxs("div",{className:"absolute top-3 right-3 flex items-center gap-1 bg-white/20 backdrop-blur-sm px-2 py-1 rounded-full",children:[n.jsx(bc,{className:"h-3 w-3"}),n.jsx("span",{className:"text-xs font-medium",children:"Featured"})]}),n.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -translate-y-1/2 translate-x-1/2"}),n.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-white/5 rounded-full translate-y-1/2 -translate-x-1/2"}),n.jsx("div",{className:"relative",children:n.jsxs("div",{className:"flex items-center justify-between gap-4",children:[n.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[n.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center flex-shrink-0",children:n.jsx(N4,{className:"h-6 w-6 text-white"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h3",{className:"font-display font-bold text-lg",children:"Daily Survivor Trivia"}),n.jsx("p",{className:"text-purple-200 text-sm",children:"24 questions  Test your knowledge!"})]})]}),n.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[n.jsxs("div",{className:"bg-white/10 rounded-lg px-3 py-2 text-center",children:[n.jsx(Zr,{className:"h-4 w-4 mx-auto mb-1 text-yellow-300"}),n.jsx("p",{className:"text-xs text-purple-200",children:"24 Questions"})]}),n.jsxs("div",{className:"bg-white/10 rounded-lg px-3 py-2 text-center",children:[n.jsx(Ke,{className:"h-4 w-4 mx-auto mb-1 text-yellow-300"}),n.jsx("p",{className:"text-xs text-purple-200",children:"Leaderboard"})]}),n.jsxs(z,{to:"/trivia",className:"flex items-center justify-center gap-2 bg-white text-purple-600 font-bold px-4 py-2 rounded-lg hover:bg-purple-50 transition-colors whitespace-nowrap",children:["Play Now",n.jsx(Ir,{className:"h-4 w-4"})]})]})]})})]})}function $f(e){"@babel/helpers - typeof";return $f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$f(e)}function Do(e){if(e===null||e===!0||e===!1)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function $t(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function Pt(e){$t(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||$f(e)==="object"&&t==="[object Date]"?new Date(e.getTime()):typeof e=="number"||t==="[object Number]"?new Date(e):((typeof e=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function DX(e,t){$t(2,arguments);var r=Pt(e).getTime(),s=Do(t);return new Date(r+s)}var FX={};function qu(){return FX}function Kb(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function Zm(e,t){$t(2,arguments);var r=Pt(e),s=Pt(t),a=r.getTime()-s.getTime();return a<0?-1:a>0?1:a}function UX(e){return $t(1,arguments),e instanceof Date||$f(e)==="object"&&Object.prototype.toString.call(e)==="[object Date]"}function qX(e){if($t(1,arguments),!UX(e)&&typeof e!="number")return!1;var t=Pt(e);return!isNaN(Number(t))}function BX(e,t){$t(2,arguments);var r=Pt(e),s=Pt(t),a=r.getFullYear()-s.getFullYear(),i=r.getMonth()-s.getMonth();return a*12+i}function HX(e,t){return $t(2,arguments),Pt(e).getTime()-Pt(t).getTime()}var WX={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(t){return t<0?Math.ceil(t):Math.floor(t)}},zX="trunc";function GX(e){return WX[zX]}function KX(e){$t(1,arguments);var t=Pt(e);return t.setHours(23,59,59,999),t}function VX(e){$t(1,arguments);var t=Pt(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function YX(e){$t(1,arguments);var t=Pt(e);return KX(t).getTime()===VX(t).getTime()}function JX(e,t){$t(2,arguments);var r=Pt(e),s=Pt(t),a=Zm(r,s),i=Math.abs(BX(r,s)),o;if(i<1)o=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-a*i);var d=Zm(r,s)===-a;YX(Pt(e))&&i===1&&Zm(e,s)===1&&(d=!1),o=a*(i-Number(d))}return o===0?0:o}function QX(e,t,r){$t(2,arguments);var s=HX(e,t)/1e3;return GX()(s)}function XX(e,t){$t(2,arguments);var r=Do(t);return DX(e,-r)}var ZX=864e5;function eZ(e){$t(1,arguments);var t=Pt(e),r=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var s=t.getTime(),a=r-s;return Math.floor(a/ZX)+1}function Df(e){$t(1,arguments);var t=1,r=Pt(e),s=r.getUTCDay(),a=(s<t?7:0)+s-t;return r.setUTCDate(r.getUTCDate()-a),r.setUTCHours(0,0,0,0),r}function M4(e){$t(1,arguments);var t=Pt(e),r=t.getUTCFullYear(),s=new Date(0);s.setUTCFullYear(r+1,0,4),s.setUTCHours(0,0,0,0);var a=Df(s),i=new Date(0);i.setUTCFullYear(r,0,4),i.setUTCHours(0,0,0,0);var o=Df(i);return t.getTime()>=a.getTime()?r+1:t.getTime()>=o.getTime()?r:r-1}function tZ(e){$t(1,arguments);var t=M4(e),r=new Date(0);r.setUTCFullYear(t,0,4),r.setUTCHours(0,0,0,0);var s=Df(r);return s}var nZ=6048e5;function rZ(e){$t(1,arguments);var t=Pt(e),r=Df(t).getTime()-tZ(t).getTime();return Math.round(r/nZ)+1}function Ff(e,t){var r,s,a,i,o,d,u,h;$t(1,arguments);var p=qu(),f=Do((r=(s=(a=(i=t==null?void 0:t.weekStartsOn)!==null&&i!==void 0?i:t==null||(o=t.locale)===null||o===void 0||(d=o.options)===null||d===void 0?void 0:d.weekStartsOn)!==null&&a!==void 0?a:p.weekStartsOn)!==null&&s!==void 0?s:(u=p.locale)===null||u===void 0||(h=u.options)===null||h===void 0?void 0:h.weekStartsOn)!==null&&r!==void 0?r:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var x=Pt(e),y=x.getUTCDay(),b=(y<f?7:0)+y-f;return x.setUTCDate(x.getUTCDate()-b),x.setUTCHours(0,0,0,0),x}function O4(e,t){var r,s,a,i,o,d,u,h;$t(1,arguments);var p=Pt(e),f=p.getUTCFullYear(),x=qu(),y=Do((r=(s=(a=(i=t==null?void 0:t.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(o=t.locale)===null||o===void 0||(d=o.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&a!==void 0?a:x.firstWeekContainsDate)!==null&&s!==void 0?s:(u=x.locale)===null||u===void 0||(h=u.options)===null||h===void 0?void 0:h.firstWeekContainsDate)!==null&&r!==void 0?r:1);if(!(y>=1&&y<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var b=new Date(0);b.setUTCFullYear(f+1,0,y),b.setUTCHours(0,0,0,0);var w=Ff(b,t),v=new Date(0);v.setUTCFullYear(f,0,y),v.setUTCHours(0,0,0,0);var j=Ff(v,t);return p.getTime()>=w.getTime()?f+1:p.getTime()>=j.getTime()?f:f-1}function sZ(e,t){var r,s,a,i,o,d,u,h;$t(1,arguments);var p=qu(),f=Do((r=(s=(a=(i=t==null?void 0:t.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(o=t.locale)===null||o===void 0||(d=o.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&a!==void 0?a:p.firstWeekContainsDate)!==null&&s!==void 0?s:(u=p.locale)===null||u===void 0||(h=u.options)===null||h===void 0?void 0:h.firstWeekContainsDate)!==null&&r!==void 0?r:1),x=O4(e,t),y=new Date(0);y.setUTCFullYear(x,0,f),y.setUTCHours(0,0,0,0);var b=Ff(y,t);return b}var aZ=6048e5;function iZ(e,t){$t(1,arguments);var r=Pt(e),s=Ff(r,t).getTime()-sZ(r,t).getTime();return Math.round(s/aZ)+1}function yt(e,t){for(var r=e<0?"-":"",s=Math.abs(e).toString();s.length<t;)s="0"+s;return r+s}var Ja={y:function(t,r){var s=t.getUTCFullYear(),a=s>0?s:1-s;return yt(r==="yy"?a%100:a,r.length)},M:function(t,r){var s=t.getUTCMonth();return r==="M"?String(s+1):yt(s+1,2)},d:function(t,r){return yt(t.getUTCDate(),r.length)},a:function(t,r){var s=t.getUTCHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return s.toUpperCase();case"aaa":return s;case"aaaaa":return s[0];case"aaaa":default:return s==="am"?"a.m.":"p.m."}},h:function(t,r){return yt(t.getUTCHours()%12||12,r.length)},H:function(t,r){return yt(t.getUTCHours(),r.length)},m:function(t,r){return yt(t.getUTCMinutes(),r.length)},s:function(t,r){return yt(t.getUTCSeconds(),r.length)},S:function(t,r){var s=r.length,a=t.getUTCMilliseconds(),i=Math.floor(a*Math.pow(10,s-3));return yt(i,r.length)}},Sl={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},oZ={G:function(t,r,s){var a=t.getUTCFullYear()>0?1:0;switch(r){case"G":case"GG":case"GGG":return s.era(a,{width:"abbreviated"});case"GGGGG":return s.era(a,{width:"narrow"});case"GGGG":default:return s.era(a,{width:"wide"})}},y:function(t,r,s){if(r==="yo"){var a=t.getUTCFullYear(),i=a>0?a:1-a;return s.ordinalNumber(i,{unit:"year"})}return Ja.y(t,r)},Y:function(t,r,s,a){var i=O4(t,a),o=i>0?i:1-i;if(r==="YY"){var d=o%100;return yt(d,2)}return r==="Yo"?s.ordinalNumber(o,{unit:"year"}):yt(o,r.length)},R:function(t,r){var s=M4(t);return yt(s,r.length)},u:function(t,r){var s=t.getUTCFullYear();return yt(s,r.length)},Q:function(t,r,s){var a=Math.ceil((t.getUTCMonth()+1)/3);switch(r){case"Q":return String(a);case"QQ":return yt(a,2);case"Qo":return s.ordinalNumber(a,{unit:"quarter"});case"QQQ":return s.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return s.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(a,{width:"wide",context:"formatting"})}},q:function(t,r,s){var a=Math.ceil((t.getUTCMonth()+1)/3);switch(r){case"q":return String(a);case"qq":return yt(a,2);case"qo":return s.ordinalNumber(a,{unit:"quarter"});case"qqq":return s.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return s.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(a,{width:"wide",context:"standalone"})}},M:function(t,r,s){var a=t.getUTCMonth();switch(r){case"M":case"MM":return Ja.M(t,r);case"Mo":return s.ordinalNumber(a+1,{unit:"month"});case"MMM":return s.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return s.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(a,{width:"wide",context:"formatting"})}},L:function(t,r,s){var a=t.getUTCMonth();switch(r){case"L":return String(a+1);case"LL":return yt(a+1,2);case"Lo":return s.ordinalNumber(a+1,{unit:"month"});case"LLL":return s.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return s.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(a,{width:"wide",context:"standalone"})}},w:function(t,r,s,a){var i=iZ(t,a);return r==="wo"?s.ordinalNumber(i,{unit:"week"}):yt(i,r.length)},I:function(t,r,s){var a=rZ(t);return r==="Io"?s.ordinalNumber(a,{unit:"week"}):yt(a,r.length)},d:function(t,r,s){return r==="do"?s.ordinalNumber(t.getUTCDate(),{unit:"date"}):Ja.d(t,r)},D:function(t,r,s){var a=eZ(t);return r==="Do"?s.ordinalNumber(a,{unit:"dayOfYear"}):yt(a,r.length)},E:function(t,r,s){var a=t.getUTCDay();switch(r){case"E":case"EE":case"EEE":return s.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return s.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(a,{width:"short",context:"formatting"});case"EEEE":default:return s.day(a,{width:"wide",context:"formatting"})}},e:function(t,r,s,a){var i=t.getUTCDay(),o=(i-a.weekStartsOn+8)%7||7;switch(r){case"e":return String(o);case"ee":return yt(o,2);case"eo":return s.ordinalNumber(o,{unit:"day"});case"eee":return s.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return s.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(i,{width:"short",context:"formatting"});case"eeee":default:return s.day(i,{width:"wide",context:"formatting"})}},c:function(t,r,s,a){var i=t.getUTCDay(),o=(i-a.weekStartsOn+8)%7||7;switch(r){case"c":return String(o);case"cc":return yt(o,r.length);case"co":return s.ordinalNumber(o,{unit:"day"});case"ccc":return s.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return s.day(i,{width:"narrow",context:"standalone"});case"cccccc":return s.day(i,{width:"short",context:"standalone"});case"cccc":default:return s.day(i,{width:"wide",context:"standalone"})}},i:function(t,r,s){var a=t.getUTCDay(),i=a===0?7:a;switch(r){case"i":return String(i);case"ii":return yt(i,r.length);case"io":return s.ordinalNumber(i,{unit:"day"});case"iii":return s.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return s.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return s.day(a,{width:"short",context:"formatting"});case"iiii":default:return s.day(a,{width:"wide",context:"formatting"})}},a:function(t,r,s){var a=t.getUTCHours(),i=a/12>=1?"pm":"am";switch(r){case"a":case"aa":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return s.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,r,s){var a=t.getUTCHours(),i;switch(a===12?i=Sl.noon:a===0?i=Sl.midnight:i=a/12>=1?"pm":"am",r){case"b":case"bb":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return s.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,r,s){var a=t.getUTCHours(),i;switch(a>=17?i=Sl.evening:a>=12?i=Sl.afternoon:a>=4?i=Sl.morning:i=Sl.night,r){case"B":case"BB":case"BBB":return s.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return s.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,r,s){if(r==="ho"){var a=t.getUTCHours()%12;return a===0&&(a=12),s.ordinalNumber(a,{unit:"hour"})}return Ja.h(t,r)},H:function(t,r,s){return r==="Ho"?s.ordinalNumber(t.getUTCHours(),{unit:"hour"}):Ja.H(t,r)},K:function(t,r,s){var a=t.getUTCHours()%12;return r==="Ko"?s.ordinalNumber(a,{unit:"hour"}):yt(a,r.length)},k:function(t,r,s){var a=t.getUTCHours();return a===0&&(a=24),r==="ko"?s.ordinalNumber(a,{unit:"hour"}):yt(a,r.length)},m:function(t,r,s){return r==="mo"?s.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):Ja.m(t,r)},s:function(t,r,s){return r==="so"?s.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):Ja.s(t,r)},S:function(t,r){return Ja.S(t,r)},X:function(t,r,s,a){var i=a._originalDate||t,o=i.getTimezoneOffset();if(o===0)return"Z";switch(r){case"X":return b2(o);case"XXXX":case"XX":return Zi(o);case"XXXXX":case"XXX":default:return Zi(o,":")}},x:function(t,r,s,a){var i=a._originalDate||t,o=i.getTimezoneOffset();switch(r){case"x":return b2(o);case"xxxx":case"xx":return Zi(o);case"xxxxx":case"xxx":default:return Zi(o,":")}},O:function(t,r,s,a){var i=a._originalDate||t,o=i.getTimezoneOffset();switch(r){case"O":case"OO":case"OOO":return"GMT"+g2(o,":");case"OOOO":default:return"GMT"+Zi(o,":")}},z:function(t,r,s,a){var i=a._originalDate||t,o=i.getTimezoneOffset();switch(r){case"z":case"zz":case"zzz":return"GMT"+g2(o,":");case"zzzz":default:return"GMT"+Zi(o,":")}},t:function(t,r,s,a){var i=a._originalDate||t,o=Math.floor(i.getTime()/1e3);return yt(o,r.length)},T:function(t,r,s,a){var i=a._originalDate||t,o=i.getTime();return yt(o,r.length)}};function g2(e,t){var r=e>0?"-":"+",s=Math.abs(e),a=Math.floor(s/60),i=s%60;if(i===0)return r+String(a);var o=t;return r+String(a)+o+yt(i,2)}function b2(e,t){if(e%60===0){var r=e>0?"-":"+";return r+yt(Math.abs(e)/60,2)}return Zi(e,t)}function Zi(e,t){var r=t||"",s=e>0?"-":"+",a=Math.abs(e),i=yt(Math.floor(a/60),2),o=yt(a%60,2);return s+i+r+o}var y2=function(t,r){switch(t){case"P":return r.date({width:"short"});case"PP":return r.date({width:"medium"});case"PPP":return r.date({width:"long"});case"PPPP":default:return r.date({width:"full"})}},L4=function(t,r){switch(t){case"p":return r.time({width:"short"});case"pp":return r.time({width:"medium"});case"ppp":return r.time({width:"long"});case"pppp":default:return r.time({width:"full"})}},lZ=function(t,r){var s=t.match(/(P+)(p+)?/)||[],a=s[1],i=s[2];if(!i)return y2(t,r);var o;switch(a){case"P":o=r.dateTime({width:"short"});break;case"PP":o=r.dateTime({width:"medium"});break;case"PPP":o=r.dateTime({width:"long"});break;case"PPPP":default:o=r.dateTime({width:"full"});break}return o.replace("{{date}}",y2(a,r)).replace("{{time}}",L4(i,r))},cZ={p:L4,P:lZ},dZ=["D","DD"],uZ=["YY","YYYY"];function hZ(e){return dZ.indexOf(e)!==-1}function mZ(e){return uZ.indexOf(e)!==-1}function v2(e,t,r){if(e==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var fZ={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},pZ=function(t,r,s){var a,i=fZ[t];return typeof i=="string"?a=i:r===1?a=i.one:a=i.other.replace("{{count}}",r.toString()),s!=null&&s.addSuffix?s.comparison&&s.comparison>0?"in "+a:a+" ago":a};function N0(e){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.width?String(t.width):e.defaultWidth,s=e.formats[r]||e.formats[e.defaultWidth];return s}}var xZ={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},gZ={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},bZ={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},yZ={date:N0({formats:xZ,defaultWidth:"full"}),time:N0({formats:gZ,defaultWidth:"full"}),dateTime:N0({formats:bZ,defaultWidth:"full"})},vZ={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},wZ=function(t,r,s,a){return vZ[t]};function kd(e){return function(t,r){var s=r!=null&&r.context?String(r.context):"standalone",a;if(s==="formatting"&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,o=r!=null&&r.width?String(r.width):i;a=e.formattingValues[o]||e.formattingValues[i]}else{var d=e.defaultWidth,u=r!=null&&r.width?String(r.width):e.defaultWidth;a=e.values[u]||e.values[d]}var h=e.argumentCallback?e.argumentCallback(t):t;return a[h]}}var _Z={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},jZ={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},NZ={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},SZ={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},kZ={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},EZ={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},CZ=function(t,r){var s=Number(t),a=s%100;if(a>20||a<10)switch(a%10){case 1:return s+"st";case 2:return s+"nd";case 3:return s+"rd"}return s+"th"},TZ={ordinalNumber:CZ,era:kd({values:_Z,defaultWidth:"wide"}),quarter:kd({values:jZ,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:kd({values:NZ,defaultWidth:"wide"}),day:kd({values:SZ,defaultWidth:"wide"}),dayPeriod:kd({values:kZ,defaultWidth:"wide",formattingValues:EZ,defaultFormattingWidth:"wide"})};function Ed(e){return function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=r.width,a=s&&e.matchPatterns[s]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;var o=i[0],d=s&&e.parsePatterns[s]||e.parsePatterns[e.defaultParseWidth],u=Array.isArray(d)?IZ(d,function(f){return f.test(o)}):RZ(d,function(f){return f.test(o)}),h;h=e.valueCallback?e.valueCallback(u):u,h=r.valueCallback?r.valueCallback(h):h;var p=t.slice(o.length);return{value:h,rest:p}}}function RZ(e,t){for(var r in e)if(e.hasOwnProperty(r)&&t(e[r]))return r}function IZ(e,t){for(var r=0;r<e.length;r++)if(t(e[r]))return r}function PZ(e){return function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=t.match(e.matchPattern);if(!s)return null;var a=s[0],i=t.match(e.parsePattern);if(!i)return null;var o=e.valueCallback?e.valueCallback(i[0]):i[0];o=r.valueCallback?r.valueCallback(o):o;var d=t.slice(a.length);return{value:o,rest:d}}}var AZ=/^(\d+)(th|st|nd|rd)?/i,MZ=/\d+/i,OZ={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},LZ={any:[/^b/i,/^(a|c)/i]},$Z={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},DZ={any:[/1/i,/2/i,/3/i,/4/i]},FZ={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},UZ={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},qZ={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},BZ={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},HZ={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},WZ={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},zZ={ordinalNumber:PZ({matchPattern:AZ,parsePattern:MZ,valueCallback:function(t){return parseInt(t,10)}}),era:Ed({matchPatterns:OZ,defaultMatchWidth:"wide",parsePatterns:LZ,defaultParseWidth:"any"}),quarter:Ed({matchPatterns:$Z,defaultMatchWidth:"wide",parsePatterns:DZ,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:Ed({matchPatterns:FZ,defaultMatchWidth:"wide",parsePatterns:UZ,defaultParseWidth:"any"}),day:Ed({matchPatterns:qZ,defaultMatchWidth:"wide",parsePatterns:BZ,defaultParseWidth:"any"}),dayPeriod:Ed({matchPatterns:HZ,defaultMatchWidth:"any",parsePatterns:WZ,defaultParseWidth:"any"})},$4={code:"en-US",formatDistance:pZ,formatLong:yZ,formatRelative:wZ,localize:TZ,match:zZ,options:{weekStartsOn:0,firstWeekContainsDate:1}},GZ=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,KZ=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,VZ=/^'([^]*?)'?$/,YZ=/''/g,JZ=/[a-zA-Z]/;function w2(e,t,r){var s,a,i,o,d,u,h,p,f,x,y,b,w,v;$t(2,arguments);var j=String(t),C=qu(),S=(s=(a=void 0)!==null&&a!==void 0?a:C.locale)!==null&&s!==void 0?s:$4,k=Do((i=(o=(d=(u=void 0)!==null&&u!==void 0?u:void 0)!==null&&d!==void 0?d:C.firstWeekContainsDate)!==null&&o!==void 0?o:(h=C.locale)===null||h===void 0||(p=h.options)===null||p===void 0?void 0:p.firstWeekContainsDate)!==null&&i!==void 0?i:1);if(!(k>=1&&k<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var R=Do((f=(x=(y=(b=void 0)!==null&&b!==void 0?b:void 0)!==null&&y!==void 0?y:C.weekStartsOn)!==null&&x!==void 0?x:(w=C.locale)===null||w===void 0||(v=w.options)===null||v===void 0?void 0:v.weekStartsOn)!==null&&f!==void 0?f:0);if(!(R>=0&&R<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!S.localize)throw new RangeError("locale must contain localize property");if(!S.formatLong)throw new RangeError("locale must contain formatLong property");var E=Pt(e);if(!qX(E))throw new RangeError("Invalid time value");var I=Kb(E),M=XX(E,I),O={firstWeekContainsDate:k,weekStartsOn:R,locale:S,_originalDate:E},L=j.match(KZ).map(function(P){var $=P[0];if($==="p"||$==="P"){var B=cZ[$];return B(P,S.formatLong)}return P}).join("").match(GZ).map(function(P){if(P==="''")return"'";var $=P[0];if($==="'")return QZ(P);var B=oZ[$];if(B)return mZ(P)&&v2(P,t,String(e)),hZ(P)&&v2(P,t,String(e)),B(M,P,S.localize,O);if($.match(JZ))throw new RangeError("Format string contains an unescaped latin alphabet character `"+$+"`");return P}).join("");return L}function QZ(e){var t=e.match(VZ);return t?t[1].replace(YZ,"'"):e}function D4(e,t){if(e==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}function XZ(e){return D4({},e)}var _2=1440,ZZ=2520,S0=43200,eee=86400;function tee(e,t,r){var s,a;$t(2,arguments);var i=qu(),o=(s=(a=r==null?void 0:r.locale)!==null&&a!==void 0?a:i.locale)!==null&&s!==void 0?s:$4;if(!o.formatDistance)throw new RangeError("locale must contain formatDistance property");var d=Zm(e,t);if(isNaN(d))throw new RangeError("Invalid time value");var u=D4(XZ(r),{addSuffix:!!(r!=null&&r.addSuffix),comparison:d}),h,p;d>0?(h=Pt(t),p=Pt(e)):(h=Pt(e),p=Pt(t));var f=QX(p,h),x=(Kb(p)-Kb(h))/1e3,y=Math.round((f-x)/60),b;if(y<2)return r!=null&&r.includeSeconds?f<5?o.formatDistance("lessThanXSeconds",5,u):f<10?o.formatDistance("lessThanXSeconds",10,u):f<20?o.formatDistance("lessThanXSeconds",20,u):f<40?o.formatDistance("halfAMinute",0,u):f<60?o.formatDistance("lessThanXMinutes",1,u):o.formatDistance("xMinutes",1,u):y===0?o.formatDistance("lessThanXMinutes",1,u):o.formatDistance("xMinutes",y,u);if(y<45)return o.formatDistance("xMinutes",y,u);if(y<90)return o.formatDistance("aboutXHours",1,u);if(y<_2){var w=Math.round(y/60);return o.formatDistance("aboutXHours",w,u)}else{if(y<ZZ)return o.formatDistance("xDays",1,u);if(y<S0){var v=Math.round(y/_2);return o.formatDistance("xDays",v,u)}else if(y<eee)return b=Math.round(y/S0),o.formatDistance("aboutXMonths",b,u)}if(b=JX(p,h),b<12){var j=Math.round(y/S0);return o.formatDistance("xMonths",j,u)}else{var C=b%12,S=Math.floor(b/12);return C<3?o.formatDistance("aboutXYears",S,u):C<9?o.formatDistance("overXYears",S,u):o.formatDistance("almostXYears",S+1,u)}}function F4(e,t){return $t(1,arguments),tee(e,Date.now(),t)}function nee(){const{data:e,isLoading:t}=re({queryKey:["announcements"],queryFn:async()=>{const s=new Date().toISOString(),{data:a,error:i}=await K.from("announcements").select("*").eq("is_active",!0).or(`expires_at.is.null,expires_at.gt.${s}`).order("priority",{ascending:!1}).order("created_at",{ascending:!1}).limit(3);if(i)throw i;return a||[]},staleTime:3e5});if(t)return n.jsx("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 p-6",children:n.jsxs("div",{className:"animate-pulse",children:[n.jsx("div",{className:"h-5 w-32 bg-cream-200 rounded mb-4"}),n.jsx("div",{className:"h-4 w-full bg-cream-100 rounded mb-2"}),n.jsx("div",{className:"h-4 w-3/4 bg-cream-100 rounded"})]})});if(!e||e.length===0)return null;const r=s=>{switch(s){case"urgent":return{bg:"bg-red-50",border:"border-red-200",icon:kt,iconColor:"text-red-500",titleColor:"text-red-700"};case"high":return{bg:"bg-amber-50",border:"border-amber-200",icon:bc,iconColor:"text-amber-500",titleColor:"text-amber-700"};case"medium":return{bg:"bg-blue-50",border:"border-blue-200",icon:Du,iconColor:"text-blue-500",titleColor:"text-blue-700"};default:return{bg:"bg-green-50",border:"border-green-200",icon:Rp,iconColor:"text-green-500",titleColor:"text-green-700"}}};return n.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 overflow-hidden",children:[n.jsxs("div",{className:"p-4 border-b border-cream-100 flex items-center gap-2",children:[n.jsx(bc,{className:"h-5 w-5 text-burgundy-500"}),n.jsx("h3",{className:"font-display font-bold text-neutral-800",children:"Announcements"})]}),n.jsx("div",{className:"divide-y divide-cream-100",children:e.map(s=>{const a=r(s.priority),i=a.icon;return n.jsx("div",{className:`p-4 ${a.bg} border-l-4 ${a.border}`,children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(i,{className:`h-5 w-5 ${a.iconColor} flex-shrink-0 mt-0.5`}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:`font-semibold ${a.titleColor} mb-1`,children:s.title}),n.jsx("p",{className:"text-neutral-600 text-sm line-clamp-2",children:s.body}),n.jsx("p",{className:"text-neutral-400 text-xs mt-2",children:F4(new Date(s.created_at),{addSuffix:!0})})]})]})},s.id)})})]})}function ree(e,t){if(!e)return"pre_registration";const r=new Date,s=new Date(e.registration_opens_at),a=new Date(e.premiere_at);return r<s?"pre_registration":r<a?"pre_draft":t?"active":"post_season"}function see(e,t){if(!e)return null;const r=new Date,s=new Date(e.picks_lock_at),a=new Date(e.air_date),i=new Date(a);i.setDate(i.getDate()+2),i.setHours(12,0,0,0);const o=new Date(i);return o.setDate(o.getDate()+1),o.setHours(12,0,0,0),t!=null&&t.is_scored&&r<o?{phase:"results_posted",label:"Results Posted",description:`Episode ${t.number} scores are in! Check your points.`,ctaLabel:"View Results",ctaPath:"/episodes",color:"green"}:r<s?{phase:"make_pick",label:"Make Your Pick",description:`Choose your castaway for Episode ${e.number}`,ctaLabel:"Make Pick",ctaPath:"/pick",color:"burgundy",countdown:{label:"Picks lock in",targetTime:s}}:r<a?{phase:"picks_locked",label:"Picks Locked",description:"Your pick is locked. Episode airs tonight!",ctaLabel:"View Pick",ctaPath:"/pick",color:"orange",countdown:{label:"Episode airs in",targetTime:a}}:e.is_scored?null:{phase:"awaiting_results",label:"Awaiting Results",description:"Episode has aired. Results coming Friday!",ctaLabel:"View Teams",ctaPath:"/team",color:"amber"}}function aee(){const{user:e}=dt(),{data:t}=re({queryKey:["profile",e==null?void 0:e.id],queryFn:async()=>{const{data:R,error:E}=await K.from("users").select("*").eq("id",e.id).single();if(E){if(E.code==="PGRST116")return null;throw E}return R},enabled:!!(e!=null&&e.id),retry:3,retryDelay:R=>Math.min(1e3*2**R,3e3)}),{data:r}=re({queryKey:["active-season"],queryFn:async()=>{const{data:R,error:E}=await K.from("seasons").select("*").eq("is_active",!0).single();if(E&&E.code!=="PGRST116")throw E;return R}}),{data:s}=re({queryKey:["my-leagues-detailed",e==null?void 0:e.id],queryFn:async()=>{const{data:R,error:E}=await K.from("league_members").select(`
          league_id,
          total_points,
          rank,
          league:leagues (
            id,
            name,
            code,
            status,
            is_global,
            season_id
          )
        `).eq("user_id",e.id);if(E)throw E;return R.map(I=>({league_id:I.league_id,total_points:I.total_points,rank:I.rank,league:I.league})).filter(I=>I.league!==null)},enabled:!!(e!=null&&e.id)}),{data:a}=re({queryKey:["my-rosters",e==null?void 0:e.id],queryFn:async()=>{const{data:R,error:E}=await K.from("rosters").select(`
          league_id,
          castaway_id,
          castaway:castaways (
            id,
            name,
            photo_url,
            status
          )
        `).eq("user_id",e.id).is("dropped_at",null);if(E)throw E;return R},enabled:!!(e!=null&&e.id)}),{data:i}=re({queryKey:["castaway-points",e==null?void 0:e.id],queryFn:async()=>{const{data:R,error:E}=await K.from("weekly_picks").select("league_id, castaway_id, points_earned").eq("user_id",e.id).in("status",["locked","auto_picked"]);if(E)throw E;const I=new Map;return R==null||R.forEach(M=>{I.has(M.league_id)||I.set(M.league_id,new Map);const O=I.get(M.league_id),L=O.get(M.castaway_id)||0;O.set(M.castaway_id,L+(M.points_earned||0))}),I},enabled:!!(e!=null&&e.id)}),{data:o}=re({queryKey:["next-episode",r==null?void 0:r.id],queryFn:async()=>{const{data:R,error:E}=await K.from("episodes").select("*").eq("season_id",r.id).gt("air_date",new Date().toISOString()).order("air_date",{ascending:!0}).limit(1).single();if(E&&E.code!=="PGRST116")throw E;return R},enabled:!!(r!=null&&r.id)}),{data:d}=re({queryKey:["previous-episode",r==null?void 0:r.id],queryFn:async()=>{const{data:R,error:E}=await K.from("episodes").select("*").eq("season_id",r.id).eq("is_scored",!0).order("air_date",{ascending:!1}).limit(1).single();if(E&&E.code!=="PGRST116")throw E;return R},enabled:!!(r!=null&&r.id)}),{data:u}=re({queryKey:["castaway-count",r==null?void 0:r.id],queryFn:async()=>{const{count:R,error:E}=await K.from("castaways").select("*",{count:"exact",head:!0}).eq("season_id",r.id);if(E)throw E;return R||0},enabled:!!(r!=null&&r.id)}),{data:h}=re({queryKey:["recently-eliminated",e==null?void 0:e.id,d==null?void 0:d.id],queryFn:async()=>{if(!a||!d)return[];const{data:R,error:E}=await K.from("castaways").select("id, name").eq("eliminated_episode_id",d.id);if(E)throw E;const I=a.map(M=>M.castaway_id);return(R==null?void 0:R.filter(M=>I.includes(M.id)))||[]},enabled:!!(e!=null&&e.id)&&!!(d!=null&&d.id)&&!!a}),{data:p}=re({queryKey:["auto-picked",e==null?void 0:e.id,d==null?void 0:d.id],queryFn:async()=>{if(!d||!s)return[];const R=s.filter(M=>!M.league.is_global).map(M=>M.league_id);if(R.length===0)return[];const{data:E,error:I}=await K.from("weekly_picks").select("league_id, leagues(name)").eq("user_id",e.id).eq("episode_id",d.id).eq("status","auto_picked").in("league_id",R);if(I)throw I;return E||[]},enabled:!!(e!=null&&e.id)&&!!(d!=null&&d.id)&&!!s}),{data:f}=re({queryKey:["next-episode-picks",e==null?void 0:e.id,o==null?void 0:o.id],queryFn:async()=>{if(!o||!s)return[];const R=s.filter(M=>!M.league.is_global).map(M=>M.league_id);if(R.length===0)return[];const{data:E,error:I}=await K.from("weekly_picks").select("league_id").eq("user_id",e.id).eq("episode_id",o.id).in("league_id",R);if(I)throw I;return E||[]},enabled:!!(e!=null&&e.id)&&!!(o!=null&&o.id)&&!!s}),x=(a==null?void 0:a.reduce((R,E)=>(R[E.league_id]||(R[E.league_id]=[]),R[E.league_id].push(E),R),{}))||{},y=R=>{if(!i)return[];const E=i.get(R);return E?Array.from(E.entries()).map(([I,M])=>({castaway_id:I,total_points:M})):[]},b=(s==null?void 0:s.filter(R=>!R.league.is_global))||[],w=s==null?void 0:s.find(R=>R.league.is_global),v=ree(r||null,o||null),j=v==="active"?see(o||null,d||null):null,C=(w==null?void 0:w.total_points)||0,S=Object.values(x).flat().filter(R=>{var E;return((E=R.castaway)==null?void 0:E.status)==="active"}).length,k=b.length>0?b[0].league_id:void 0;return n.jsxs("div",{className:"pb-4",children:[n.jsxs("div",{className:"mb-4",children:[n.jsxs("h1",{className:"text-2xl font-display font-bold text-neutral-800",children:["Welcome back",t!=null&&t.display_name?`, ${t.display_name.split(" ")[0]}`:"","."]}),n.jsx("p",{className:"text-neutral-500 mt-1 text-base",children:"Check standings, track scores, and see how your strategy is playing out."})]}),n.jsx("div",{className:"mb-4",children:n.jsx($X,{seasonStarted:v==="active"||v==="post_season"})}),j&&n.jsx("div",{className:"mb-4",children:n.jsx(NX,{weeklyPhase:j,primaryLeagueId:k})}),n.jsx(SX,{recentlyEliminated:h,autoPickedLeagues:p}),n.jsx("div",{className:"mb-4",children:n.jsx(nee,{})}),n.jsx("div",{className:"mb-4",children:n.jsx(kX,{gamePhase:v,activeSeason:r||null,nextEpisode:o||null,primaryLeagueId:k,castawayCount:u||0,hasPickedForNextEpisode:((f==null?void 0:f.length)||0)>=b.length&&b.length>0})}),n.jsx("div",{className:"mb-4",children:n.jsx(EX,{leagueCount:b.length,activeCastaways:S,totalPoints:C})}),(w==null?void 0:w.rank)&&n.jsx("div",{className:"mb-4",children:n.jsx(CX,{rank:w.rank,totalPoints:w.total_points})}),n.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h2",{className:"text-lg font-display font-bold text-neutral-800",children:"My Leagues"}),n.jsxs(z,{to:"/leagues",className:"text-burgundy-500 hover:text-burgundy-600 text-sm font-semibold flex items-center gap-1",children:["View All ",n.jsx(hr,{className:"h-4 w-4"})]})]}),b.length>0?n.jsx("div",{className:"space-y-3",children:b.map(R=>n.jsx(AX,{leagueId:R.league_id,leagueName:R.league.name,leagueCode:R.league.code,totalPoints:R.total_points,rank:R.rank,rosters:x[R.league_id]||[],seasonId:R.league.season_id,castawayPoints:y(R.league_id),showWeeklyPick:v==="active"},R.league_id))}):n.jsxs("div",{className:"bg-white rounded-2xl p-8 text-center border border-cream-200",children:[n.jsx("div",{className:"w-12 h-12 bg-cream-100 rounded-full flex items-center justify-center mx-auto mb-3",children:n.jsx($e,{className:"h-6 w-6 text-neutral-400"})}),n.jsx("h3",{className:"font-semibold text-neutral-800 mb-2",children:"No leagues yet"}),n.jsx("p",{className:"text-neutral-500 mb-4",children:"Join or create a league to start playing!"}),n.jsxs("div",{className:"flex gap-3 justify-center",children:[n.jsx(z,{to:"/leagues/create",className:"btn btn-primary",children:"Create League"}),n.jsx(z,{to:"/leagues",className:"btn btn-secondary",children:"Browse Leagues"})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[r&&n.jsx(MX,{season:r}),n.jsx(OX,{}),n.jsx(LX,{})]})]})]})}function iee({castaway:e,index:t,totalCount:r,isDragging:s,isLocked:a,onDragStart:i,onDragOver:o,onDragEnd:d,onMoveUp:u,onMoveDown:h}){return n.jsxs("div",{draggable:!a,onDragStart:i,onDragOver:o,onDragEnd:d,className:`p-3 flex items-center gap-3 transition-all ${s?"bg-burgundy-50 opacity-50":"hover:bg-cream-50"} ${a?"cursor-default":"cursor-grab active:cursor-grabbing"}`,children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${t<2?"bg-burgundy-100 text-burgundy-600":t<5?"bg-amber-100 text-amber-600":"bg-cream-100 text-neutral-600"}`,children:t+1}),!a&&n.jsx(qv,{className:"h-5 w-5 text-neutral-300 flex-shrink-0"}),n.jsx("img",{src:Hn(e.name,e.photo_url),alt:e.name,className:"w-10 h-10 rounded-full object-cover border border-cream-200"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"font-medium text-neutral-800 truncate",children:e.name}),n.jsxs("div",{className:"flex items-center gap-2 text-xs text-neutral-500",children:[e.age&&n.jsxs("span",{children:[e.age," yrs"]}),e.hometown&&n.jsxs(n.Fragment,{children:[e.age&&n.jsx("span",{children:""}),n.jsx("span",{children:e.hometown})]}),e.occupation&&n.jsxs(n.Fragment,{children:[n.jsx("span",{children:""}),n.jsx("span",{className:"truncate",children:e.occupation})]})]})]}),!a&&n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("button",{onClick:u,disabled:t===0,className:"p-1 hover:bg-cream-100 rounded disabled:opacity-30 disabled:cursor-not-allowed",children:n.jsx(zs,{className:"h-4 w-4 text-neutral-500"})}),n.jsx("button",{onClick:h,disabled:t===r-1,className:"p-1 hover:bg-cream-100 rounded disabled:opacity-30 disabled:cursor-not-allowed",children:n.jsx(un,{className:"h-4 w-4 text-neutral-500"})})]})]})}function oee({leagueId:e,league:t,rankings:r,castawayMap:s,onEditRankings:a}){return n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200",children:[n.jsx(Se,{}),n.jsxs("div",{className:"max-w-2xl mx-auto p-4 pb-24",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx(z,{to:`/leagues/${e}`,className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:n.jsx(st,{className:"h-5 w-5 text-neutral-600"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h1",{className:"text-2xl font-display font-bold text-neutral-800",children:"Rankings Saved!"}),n.jsx("p",{className:"text-neutral-500",children:t==null?void 0:t.name})]})]}),n.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 rounded-2xl p-6 text-white shadow-elevated mb-6",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-14 h-14 bg-white/20 rounded-full flex items-center justify-center",children:n.jsx(qt,{className:"h-7 w-7"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-display font-bold",children:"Rankings Confirmed!"}),n.jsx("p",{className:"text-green-100",children:"Your draft preferences have been saved for all leagues."})]})]})}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated border border-cream-200 overflow-hidden mb-6",children:[n.jsxs("div",{className:"p-5 border-b border-cream-100",children:[n.jsxs("h2",{className:"text-lg font-display font-bold text-neutral-800 flex items-center gap-2",children:[n.jsx(Ke,{className:"h-5 w-5 text-burgundy-500"}),"Your Complete Rankings"]}),n.jsxs("p",{className:"text-sm text-neutral-500 mt-1",children:[r.length," castaways ranked"]})]}),n.jsx("div",{className:"divide-y divide-cream-100 max-h-[60vh] overflow-y-auto",children:r.map((i,o)=>{const d=s.get(i);return d?n.jsxs("div",{className:"p-3 flex items-center gap-3",children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${o<2?"bg-burgundy-100 text-burgundy-600":o<5?"bg-amber-100 text-amber-600":"bg-cream-100 text-neutral-600"}`,children:o+1}),n.jsx("img",{src:Hn(d.name,d.photo_url),alt:d.name,className:"w-10 h-10 rounded-full object-cover border border-cream-200"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"font-medium text-neutral-800 truncate",children:d.name}),n.jsxs("div",{className:"flex items-center gap-2 text-xs text-neutral-500",children:[d.age&&n.jsxs("span",{children:[d.age," yrs"]}),d.hometown&&n.jsxs(n.Fragment,{children:[d.age&&n.jsx("span",{children:""}),n.jsx("span",{children:d.hometown})]})]})]})]},i):null})})]}),n.jsxs("div",{className:"flex gap-4",children:[n.jsx("button",{onClick:a,className:"flex-1 btn btn-secondary",children:"Edit Rankings"}),n.jsx(z,{to:`/leagues/${e}`,className:"flex-1 btn btn-primary text-center",children:"Back to League"})]})]})]})}function lee({leagueId:e,league:t,roster:r}){return n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200",children:[n.jsx(Se,{}),n.jsxs("div",{className:"max-w-2xl mx-auto p-4 pb-24",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx(z,{to:`/leagues/${e}`,className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:n.jsx(st,{className:"h-5 w-5 text-neutral-600"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-display font-bold text-neutral-800",children:"Draft Results"}),n.jsx("p",{className:"text-neutral-500",children:t==null?void 0:t.name})]})]}),n.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 rounded-2xl p-6 text-white shadow-elevated mb-6",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-14 h-14 bg-white/20 rounded-full flex items-center justify-center",children:n.jsx(Ke,{className:"h-7 w-7"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-display font-bold",children:"Draft Complete!"}),n.jsx("p",{className:"text-green-100",children:"Your team has been drafted based on your rankings."})]})]})}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated border border-cream-200 overflow-hidden",children:[n.jsx("div",{className:"p-5 border-b border-cream-100",children:n.jsxs("h2",{className:"text-lg font-display font-bold text-neutral-800 flex items-center gap-2",children:[n.jsx($e,{className:"h-5 w-5 text-burgundy-500"}),"Your Team"]})}),n.jsx("div",{className:"divide-y divide-cream-100",children:r.map((s,a)=>{var i,o,d,u,h,p,f,x;return n.jsxs("div",{className:"p-4 flex items-center gap-4",children:[n.jsx("div",{className:"w-10 h-10 bg-burgundy-100 rounded-full flex items-center justify-center",children:n.jsxs("span",{className:"font-bold text-burgundy-600",children:["#",a+1]})}),n.jsx("img",{src:Hn(((i=s.castaways)==null?void 0:i.name)||"Unknown",(o=s.castaways)==null?void 0:o.photo_url),alt:((d=s.castaways)==null?void 0:d.name)||"Castaway",className:"w-14 h-14 rounded-full object-cover border-2 border-cream-200"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-semibold text-neutral-800",children:(u=s.castaways)==null?void 0:u.name}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-neutral-500",children:[((h=s.castaways)==null?void 0:h.age)&&n.jsxs("span",{children:[s.castaways.age," yrs"]}),((p=s.castaways)==null?void 0:p.hometown)&&n.jsxs(n.Fragment,{children:[((f=s.castaways)==null?void 0:f.age)&&n.jsx("span",{children:""}),n.jsx("span",{children:s.castaways.hometown})]}),((x=s.castaways)==null?void 0:x.occupation)&&n.jsxs(n.Fragment,{children:[n.jsx("span",{children:""}),n.jsx("span",{children:s.castaways.occupation})]})]})]}),n.jsx("div",{className:"text-right",children:n.jsxs("p",{className:"text-xs text-neutral-400",children:["Round ",s.draft_round]})})]},s.id)})})]}),n.jsx("div",{className:"mt-6 text-center",children:n.jsx(z,{to:`/leagues/${e}`,className:"btn btn-primary",children:"Back to League"})})]})]})}function cee({rankings:e,castawayMap:t,isPending:r,onConfirm:s,onCancel:a}){return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated max-w-lg w-full max-h-[90vh] flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-cream-100 flex items-start justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-display font-bold text-neutral-800",children:"Confirm Your Rankings"}),n.jsxs("p",{className:"text-neutral-500 text-sm mt-1",children:["This will apply to ",n.jsx("strong",{className:"text-neutral-700",children:"all your leagues"})," this season"]})]}),n.jsx("button",{onClick:a,className:"p-2 hover:bg-cream-100 rounded-lg transition-colors",children:n.jsx(Sn,{className:"h-5 w-5 text-neutral-400"})})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:n.jsxs("div",{className:"bg-cream-50 rounded-xl p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("p",{className:"text-sm font-medium text-neutral-700",children:"Your Complete Rankings"}),n.jsxs("span",{className:"text-xs text-neutral-500",children:[e.length," castaways"]})]}),n.jsx("div",{className:"space-y-1",children:e.map((i,o)=>{const d=t.get(i);if(!d)return null;const u=o<2,h=o>=2&&o<6;return n.jsxs("div",{className:`flex items-center gap-3 p-2 rounded-lg transition-colors ${u?"bg-burgundy-50 border border-burgundy-100":h?"bg-amber-50/50":"hover:bg-cream-100"}`,children:[n.jsx("span",{className:`w-7 h-7 rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0 ${u?"bg-burgundy-500 text-white":h?"bg-amber-100 text-amber-700":"bg-cream-200 text-neutral-500"}`,children:o+1}),d.photo_url&&n.jsx("img",{src:d.photo_url,alt:d.name,className:"w-8 h-8 rounded-full object-cover flex-shrink-0"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("span",{className:`block truncate ${u?"font-medium text-burgundy-800":"text-neutral-700"}`,children:d.name}),d.tribe_original&&n.jsx("span",{className:"text-xs text-neutral-400",children:d.tribe_original})]}),u&&n.jsx("span",{className:"text-xs font-medium text-burgundy-600 bg-burgundy-100 px-2 py-0.5 rounded-full flex-shrink-0",children:"Top Pick"})]},i)})})]})}),n.jsx("div",{className:"p-4 border-t border-cream-100 bg-cream-50/50",children:n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:a,className:"flex-1 btn btn-secondary",children:"Go Back"}),n.jsxs("button",{onClick:s,disabled:r,className:"flex-1 btn btn-primary flex items-center justify-center gap-2",children:[r?n.jsx(me,{className:"h-4 w-4 animate-spin"}):n.jsx(qt,{className:"h-4 w-4"}),"Confirm & Save"]})]})})]})})}function dee(e){return re({queryKey:["userProfile",e],queryFn:async()=>{if(!e)return null;const{data:t,error:r}=await K.from("users").select("*").eq("id",e).single();if(r)throw r;return t},enabled:!!e,staleTime:300*1e3})}function uee(e){return re({queryKey:["nextEpisode",e],queryFn:async()=>{if(!e)return null;const{data:t,error:r}=await K.from("episodes").select("*").eq("season_id",e).eq("is_scored",!1).order("number",{ascending:!0}).limit(1).single();if(r&&r.code!=="PGRST116")throw r;return t},enabled:!!e,staleTime:60*1e3})}function U4(e){return re({queryKey:["castaways",e],queryFn:async()=>{if(!e)return[];const{data:t,error:r}=await K.from("castaways").select("*").eq("season_id",e).order("name",{ascending:!0});if(r)throw r;return t},enabled:!!e,staleTime:120*1e3})}function Gv(e){return re({queryKey:["league",e],queryFn:async()=>{if(!e)return null;const{data:t,error:r}=await K.from("leagues").select(`
          *,
          seasons(*),
          commissioner:users!leagues_commissioner_id_fkey(id, display_name)
        `).eq("id",e).single();if(r)throw r;return t},enabled:!!e,staleTime:120*1e3})}function hee(e){return re({queryKey:["leagueMembers",e],queryFn:async()=>{if(!e)return[];const{data:t,error:r}=await K.from("league_members").select(`
          *,
          users (
            id,
            display_name,
            avatar_url
          )
        `).eq("league_id",e).order("rank",{ascending:!0});if(r)throw r;return t},enabled:!!e,staleTime:120*1e3})}function Kv(e,t){return re({queryKey:["roster",e,t],queryFn:async()=>{if(!e||!t)return[];const{data:r,error:s}=await K.from("rosters").select(`
          *,
          castaways (
            id,
            name,
            status,
            tribe_original,
            placement,
            photo_url
          )
        `).eq("league_id",e).eq("user_id",t).is("dropped_at",null).order("draft_pick",{ascending:!0});if(s)throw s;return r},enabled:!!e&&!!t,staleTime:120*1e3})}function mee(e){return re({queryKey:["leagueRosters",e],queryFn:async()=>{if(!e)return[];const{data:t,error:r}=await K.from("rosters").select(`
          *,
          users (
            id,
            display_name
          ),
          castaways (
            id,
            name,
            status,
            tribe_original,
            placement,
            photo_url
          )
        `).eq("league_id",e).is("dropped_at",null).order("user_id",{ascending:!0}).order("draft_pick",{ascending:!0});if(r)throw r;return t},enabled:!!e,staleTime:120*1e3})}function q4(e){return re({queryKey:["profile",e],queryFn:async()=>{const{data:t,error:r}=await K.from("users").select("id, display_name, role").eq("id",e).single();if(r)throw r;return t},enabled:!!e})}function B4(){return re({queryKey:["activeSeason"],queryFn:async()=>{const{data:e,error:t}=await K.from("seasons").select("*").eq("is_active",!0).single();if(t&&t.code!=="PGRST116")throw t;return e}})}function H4(e){return re({queryKey:["episodes",e],queryFn:async()=>{if(!e)return[];const{data:t,error:r}=await K.from("episodes").select("*").eq("season_id",e).order("number",{ascending:!0});if(r)throw r;return t},enabled:!!e})}function W4(e){return re({queryKey:["castaways",e],queryFn:async()=>{if(!e)return[];const{data:t,error:r}=await K.from("castaways").select("*").eq("season_id",e).order("name");if(r)throw r;return t},enabled:!!e})}function z4(e){return re({queryKey:["scoringRules",e],queryFn:async()=>{if(!e)return[];const{data:t,error:r}=await K.from("scoring_rules").select("*").eq("season_id",e).eq("is_active",!0).order("sort_order");if(r)throw r;return t},enabled:!!e})}function G4(e){return re({queryKey:["episodeScores",e],queryFn:async()=>{if(!e)return[];const{data:t,error:r}=await K.from("episode_scores").select("*").eq("episode_id",e);if(r)throw r;return t},enabled:!!e})}function K4(e){return re({queryKey:["scoringStatus",e],queryFn:async()=>{if(!e)return null;const{data:{session:t}}=await K.auth.getSession();if(!(t!=null&&t.access_token))throw new Error("Not authenticated");const r=await Je(`/episodes/${e}/scoring/status`,t.access_token);if(r.error)throw new Error(r.error);return r.data},enabled:!!e,refetchInterval:5e3})}function fee(e){const t=(e==null?void 0:e.reduce((a,i)=>{const o=i.category||"Other";return a[o]||(a[o]=[]),a[o].push(i),a},{}))||{},r=["Survival","Tribal Council","Challenges","Strategy","Social","Advantages","Finale","Other"],s={};return r.forEach(a=>{t[a]&&(s[a]=t[a])}),Object.keys(t).forEach(a=>{s[a]||(s[a]=t[a])}),s}const pee=["SURVIVED_EPISODE","VOTE_CORRECT","VOTE_RECEIVED","WON_IMMUNITY_IND","WON_IMMUNITY_TRIBE","WON_REWARD","FOUND_IDOL","PLAYED_IDOL_SELF","ELIMINATED","CONFESSIONAL"];function xee(e){return e?pee.map(t=>e.find(r=>r.code===t)).filter(t=>t!==void 0):[]}function gee(){var X;const{leagueId:e}=On(),{user:t}=dt(),r=Et(),[s,a]=T.useState([]),[i,o]=T.useState(!1),[d,u]=T.useState(null),[h,p]=T.useState(!1),[f,x]=T.useState(!1),{data:y,isLoading:b}=Gv(e),{data:w,isLoading:v}=U4(y==null?void 0:y.season_id),{data:j}=Kv(e,t==null?void 0:t.id),{data:C,isLoading:S}=re({queryKey:["draft-rankings",y==null?void 0:y.season_id,t==null?void 0:t.id],queryFn:async()=>{if(!(y!=null&&y.season_id)||!(t!=null&&t.id))return null;const{data:ee,error:F}=await K.from("draft_rankings").select("*").eq("season_id",y.season_id).eq("user_id",t.id).single();return F&&F.code!=="PGRST116"?null:ee},enabled:!!(y!=null&&y.season_id)&&!!(t!=null&&t.id)});T.useEffect(()=>{C!=null&&C.rankings?a(C.rankings):w&&w.length>0&&s.length===0&&a(w.map(ee=>ee.id))},[C,w]);const k=De({mutationFn:async()=>{if(!(y!=null&&y.season_id)||!(t!=null&&t.id))throw new Error("Missing required data");const{error:ee}=await K.from("draft_rankings").upsert({season_id:y.season_id,user_id:t.id,rankings:s,submitted_at:new Date().toISOString()},{onConflict:"user_id,season_id"});if(ee)throw ee},onSuccess:()=>{r.invalidateQueries({queryKey:["draft-rankings",y==null?void 0:y.season_id,t==null?void 0:t.id]}),o(!1),p(!1),x(!0)}}),R=T.useMemo(()=>{const ee=new Map;return w==null||w.forEach(F=>ee.set(F.id,F)),ee},[w]),E=(X=y==null?void 0:y.seasons)!=null&&X.draft_deadline?new Date(y.seasons.draft_deadline):null,M=E?new Date>E:!1,O=(y==null?void 0:y.draft_status)==="completed",L=ee=>{if(ee===0)return;const F=[...s];[F[ee-1],F[ee]]=[F[ee],F[ee-1]],a(F),o(!0)},P=ee=>{if(ee===s.length-1)return;const F=[...s];[F[ee],F[ee+1]]=[F[ee+1],F[ee]],a(F),o(!0)},$=ee=>u(ee),B=(ee,F)=>{if(ee.preventDefault(),d===null||d===F)return;const Q=[...s],[J]=Q.splice(d,1);Q.splice(F,0,J),a(Q),u(F),o(!0)},D=()=>u(null);return b||v||S?n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200",children:[n.jsx(Se,{}),n.jsx("div",{className:"flex items-center justify-center py-24",children:n.jsx(me,{className:"h-8 w-8 text-burgundy-500 animate-spin"})})]}):f?n.jsx(oee,{leagueId:e,league:y||void 0,rankings:s,castawayMap:R,onEditRankings:()=>x(!1)}):O&&j&&j.length>0?n.jsx(lee,{leagueId:e,league:y||void 0,roster:j}):n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200",children:[n.jsx(Se,{}),n.jsxs("div",{className:"max-w-3xl mx-auto p-4 pb-24",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx(z,{to:`/leagues/${e}`,className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:n.jsx(st,{className:"h-5 w-5 text-neutral-600"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h1",{className:"text-2xl font-display font-bold text-neutral-800",children:"Draft Rankings"}),n.jsx("p",{className:"text-neutral-500",children:y==null?void 0:y.name})]}),i&&!M&&n.jsxs("button",{onClick:()=>p(!0),disabled:k.isPending,className:"btn btn-primary flex items-center gap-2",children:[k.isPending?n.jsx(me,{className:"h-4 w-4 animate-spin"}):n.jsx(Ci,{className:"h-4 w-4"}),"Save Rankings"]})]}),n.jsx("div",{className:"bg-gradient-to-r from-burgundy-500 to-burgundy-600 rounded-2xl p-5 text-white shadow-elevated mb-6",children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center flex-shrink-0",children:n.jsx(Du,{className:"h-6 w-6"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"font-display font-bold text-lg mb-1",children:"How the Draft Works"}),n.jsxs("p",{className:"text-burgundy-100 text-sm",children:["Rank all ",(w==null?void 0:w.length)||18," castaways from your most wanted (#1) to least wanted.",n.jsxs("strong",{className:"text-white",children:[" ","Your rankings apply to ALL your leagues this season."]})," ","At the deadline, the system runs a snake draft using everyone's rankings. You'll get 2 castaways based on your draft position and preferences in each league."]})]})]})}),E&&n.jsxs("div",{className:`rounded-2xl p-4 mb-6 flex items-center gap-4 ${M?"bg-red-50 border border-red-200":"bg-amber-50 border border-amber-200"}`,children:[n.jsx(Mt,{className:`h-6 w-6 ${M?"text-red-500":"text-amber-500"}`}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:`font-medium ${M?"text-red-700":"text-amber-700"}`,children:M?"Draft Deadline Passed":"Draft Deadline"}),n.jsx("p",{className:`text-sm ${M?"text-red-600":"text-amber-600"}`,children:E.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",timeZoneName:"short"})})]}),C&&n.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[n.jsx(qt,{className:"h-5 w-5"}),n.jsx("span",{className:"text-sm font-medium",children:"Submitted"})]})]}),M&&!O&&n.jsxs("div",{className:"bg-neutral-100 rounded-2xl p-6 text-center mb-6 border border-neutral-200",children:[n.jsx(at,{className:"h-10 w-10 text-neutral-400 mx-auto mb-3"}),n.jsx("p",{className:"text-neutral-600 font-medium",children:"Rankings are locked"}),n.jsx("p",{className:"text-neutral-500 text-sm mt-1",children:"The draft deadline has passed. The system will process the draft soon."})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated border border-cream-200 overflow-hidden",children:[n.jsxs("div",{className:"p-5 border-b border-cream-100 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-display font-bold text-neutral-800",children:"Your Rankings"}),n.jsx("p",{className:"text-sm text-neutral-500",children:C?"Last saved "+new Date(C.submitted_at).toLocaleDateString():"Drag to reorder or use arrows"})]}),n.jsxs("div",{className:"text-sm text-neutral-400",children:[s.length," castaways"]})]}),n.jsx("div",{className:"divide-y divide-cream-100",children:s.map((ee,F)=>{const Q=R.get(ee);return Q?n.jsx(iee,{castaway:Q,index:F,totalCount:s.length,isDragging:d===F,isLocked:M,onDragStart:()=>$(F),onDragOver:J=>B(J,F),onDragEnd:D,onMoveUp:()=>L(F),onMoveDown:()=>P(F)},ee):null})})]}),i&&!M&&n.jsx("div",{className:"fixed bottom-0 left-0 right-0 p-4 bg-white border-t border-cream-200 shadow-elevated",children:n.jsxs("div",{className:"max-w-3xl mx-auto flex items-center justify-between",children:[n.jsx("p",{className:"text-neutral-500 text-sm",children:"You have unsaved changes"}),n.jsxs("button",{onClick:()=>p(!0),disabled:k.isPending,className:"btn btn-primary flex items-center gap-2",children:[k.isPending?n.jsx(me,{className:"h-4 w-4 animate-spin"}):n.jsx(Ci,{className:"h-4 w-4"}),"Save Rankings"]})]})}),h&&n.jsx(cee,{rankings:s,castawayMap:R,isPending:k.isPending,onConfirm:()=>k.mutate(),onCancel:()=>p(!1)})]})]})}function bee({episode:e,timeLeft:t}){const r=t.days===0&&t.hours<2;return n.jsx("div",{className:`rounded-2xl p-6 text-white shadow-elevated animate-slide-up ${r?"bg-gradient-to-r from-orange-500 to-red-500":"bg-gradient-to-r from-burgundy-500 to-burgundy-600"}`,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:`text-sm font-medium ${r?"text-orange-100":"text-burgundy-100"}`,children:r?"HURRY! Picks Lock In":"Picks Lock In"}),n.jsxs("div",{className:"flex items-baseline gap-2 sm:gap-3 mt-2",children:[t.days>0&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"text-center",children:[n.jsx("span",{className:"text-3xl sm:text-4xl font-display",children:t.days}),n.jsx("p",{className:"text-xs text-burgundy-200 mt-1",children:"days"})]}),n.jsx("span",{className:"text-xl sm:text-2xl text-burgundy-200",children:":"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("span",{className:"text-3xl sm:text-4xl font-display",children:t.hours}),n.jsx("p",{className:"text-xs text-burgundy-200 mt-1",children:"hours"})]}),n.jsx("span",{className:"text-xl sm:text-2xl text-burgundy-200",children:":"}),n.jsxs("div",{className:"text-center",children:[n.jsx("span",{className:"text-3xl sm:text-4xl font-display",children:t.minutes}),n.jsx("p",{className:"text-xs text-burgundy-200 mt-1",children:"min"})]}),r&&n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"text-xl sm:text-2xl text-burgundy-200",children:":"}),n.jsxs("div",{className:"text-center",children:[n.jsx("span",{className:"text-3xl sm:text-4xl font-display",children:t.seconds}),n.jsx("p",{className:"text-xs text-burgundy-200 mt-1",children:"sec"})]})]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:`text-sm ${r?"text-orange-100":"text-burgundy-100"}`,children:"Episode airs"}),n.jsx("p",{className:"font-semibold text-lg",children:new Date(e.air_date).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]})]})})}function yee({wasAutoPicked:e,pickSubmitted:t,isUrgent:r,isVeryUrgent:s}){return n.jsxs(n.Fragment,{children:[e&&n.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-2xl p-4 flex items-start gap-3 animate-slide-up",style:{animationDelay:"0.05s"},children:[n.jsx(at,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-amber-800",children:"You were auto-picked last episode"}),n.jsx("p",{className:"text-sm text-amber-700",children:"You didn't submit a pick in time, so the system picked for you. Make sure to submit your pick before the deadline!"})]})]}),!t&&!s&&r&&n.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-2xl p-4 flex items-start gap-3 animate-slide-up",style:{animationDelay:"0.05s"},children:[n.jsx(Mt,{className:"w-5 h-5 text-orange-600 flex-shrink-0 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-orange-800",children:"Don't forget to pick!"}),n.jsx("p",{className:"text-sm text-orange-700",children:"If you don't submit a pick, the system will randomly select one of your active castaways."})]})]}),!t&&s&&n.jsxs("div",{className:"bg-red-50 border border-red-300 rounded-2xl p-4 flex items-start gap-3 animate-pulse",children:[n.jsx(at,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-red-800",children:"Less than 30 minutes left!"}),n.jsx("p",{className:"text-sm text-red-700",children:"Submit your pick now or you'll be auto-picked!"})]})]})]})}function vee({castaway:e,isSelected:t,stats:r,onSelect:s}){var a;return n.jsxs("button",{onClick:s,className:`w-full p-5 rounded-xl border-2 transition-all text-left flex items-center gap-5 ${t?"border-burgundy-500 bg-burgundy-50 shadow-card":"border-cream-200 bg-cream-50 hover:border-cream-300 hover:shadow-sm"}`,children:[n.jsx("img",{src:Hn(e.name||"Unknown",e.photo_url),alt:e.name||"Castaway",className:"w-16 h-16 rounded-xl object-cover"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("h3",{className:`font-semibold text-lg ${t?"text-burgundy-700":"text-neutral-800"}`,children:e.name}),n.jsx("span",{className:`badge text-xs ${e.status==="active"?"badge-success":"bg-neutral-100 text-neutral-500"}`,children:(a=e.status)==null?void 0:a.toUpperCase()})]}),r&&r.times_picked>0?n.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[n.jsxs("div",{className:"flex items-center gap-1 text-neutral-500",children:[n.jsx(Ke,{className:"w-3.5 h-3.5"}),n.jsxs("span",{children:[r.total_points," pts total"]})]}),n.jsxs("div",{className:"flex items-center gap-1 text-neutral-500",children:[n.jsx(gr,{className:"w-3.5 h-3.5"}),n.jsxs("span",{children:[r.times_picked,"x picked"]})]}),n.jsxs("div",{className:"flex items-center gap-1 text-neutral-500",children:[n.jsx(Pr,{className:"w-3.5 h-3.5"}),n.jsxs("span",{children:[r.avg_points," avg"]})]})]}):n.jsx("p",{className:"text-sm text-neutral-400",children:"Not yet picked this season"})]}),n.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center ${t?"border-burgundy-500 bg-burgundy-500":"border-cream-300"}`,children:t&&n.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})})]})}function wee({roster:e,activeCastaways:t,selectedCastaway:r,currentPickCastawayId:s,pickSubmitted:a,showSuccess:i,mutationError:o,isPending:d,castawayStats:u,onSelect:h,onSubmit:p}){var x,y;const f=b=>u==null?void 0:u.find(w=>w.castaway_id===b);return n.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated overflow-hidden animate-slide-up",style:{animationDelay:"0.1s"},children:[n.jsxs("div",{className:"p-6 border-b border-cream-100",children:[n.jsx("h2",{className:"font-semibold text-neutral-800",children:"Select Your Castaway"}),n.jsx("p",{className:"text-sm text-neutral-500 mt-1",children:"Choose which player from your roster to play this week"})]}),n.jsx("div",{className:"p-6 space-y-4",children:t.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-orange-100 rounded-full flex items-center justify-center",children:n.jsx(at,{className:"w-8 h-8 text-orange-600"})}),n.jsx("h3",{className:"text-lg font-semibold text-neutral-800 mb-2",children:"No Active Castaways"}),n.jsx("p",{className:"text-neutral-500 mb-4",children:e&&e.length>0?"All your castaways have been eliminated. Your season has ended.":"Your roster is empty. This shouldn't happen - please contact support."})]}):t.map(b=>n.jsx(vee,{castaway:b.castaways,isSelected:r===b.castaway_id,stats:f(b.castaway_id),onSelect:()=>h(b.castaway_id)},b.id))}),n.jsxs("div",{className:"p-6 border-t border-cream-100 bg-cream-50/50",children:[i&&n.jsxs("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-xl flex items-center gap-3",children:[n.jsx(tt,{className:"h-5 w-5 text-green-600 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-green-800",children:"Pick Saved!"}),n.jsx("p",{className:"text-sm text-green-600",children:"You can change it until picks lock."})]})]}),o&&n.jsxs("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-xl flex items-center gap-3",children:[n.jsx(at,{className:"h-5 w-5 text-red-600 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-red-800",children:"Failed to Save"}),n.jsx("p",{className:"text-sm text-red-600",children:o})]})]}),n.jsx("button",{onClick:p,disabled:!r||d,className:`w-full btn ${r?"btn-primary shadow-card":"bg-cream-200 text-neutral-400 cursor-not-allowed"}`,children:d?n.jsxs("span",{className:"flex items-center justify-center gap-2",children:[n.jsx(me,{className:"h-4 w-4 animate-spin"}),"Saving..."]}):a?"Update Pick":r?"Confirm Pick":"Select a Castaway"}),a&&!i&&n.jsxs("p",{className:"text-center text-sm text-neutral-500 mt-3",children:["Current pick:"," ",n.jsx("span",{className:"font-medium text-neutral-700",children:(y=(x=e==null?void 0:e.find(b=>b.castaway_id===s))==null?void 0:x.castaways)==null?void 0:y.name})]})]})]})}function _ee({picks:e}){return e.length===0?null:n.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated p-6 animate-slide-up",style:{animationDelay:"0.2s"},children:[n.jsx("h3",{className:"font-semibold text-neutral-800 mb-4",children:"Previous Picks"}),n.jsx("div",{className:"space-y-3",children:e.map(t=>{var r,s;return n.jsxs("div",{className:"flex items-center justify-between p-3 bg-cream-50 rounded-xl",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("span",{className:"text-sm font-medium text-neutral-500",children:["Ep ",(r=t.episodes)==null?void 0:r.number]}),n.jsx("span",{className:"font-medium text-neutral-800",children:((s=t.castaways)==null?void 0:s.name)||"Unknown"})]}),n.jsxs("span",{className:`badge ${t.points_earned>=0?"badge-success":"bg-red-100 text-red-700"}`,children:[t.points_earned>=0?"+":"",t.points_earned," pts"]})]},t.id)})})]})}function jee({leagueId:e}){return n.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated p-12 text-center animate-slide-up",children:[n.jsx("div",{className:"w-20 h-20 mx-auto mb-6 bg-amber-100 rounded-full flex items-center justify-center",children:n.jsx(at,{className:"w-10 h-10 text-amber-600"})}),n.jsx("h2",{className:"text-2xl font-display text-neutral-800 mb-3",children:"Complete Your Draft First"}),n.jsx("p",{className:"text-neutral-500 mb-8",children:"You need to complete the draft before you can make weekly picks. Head to the draft room to select your castaways!"}),n.jsx(z,{to:`/leagues/${e}/draft`,className:"btn btn-primary shadow-card",children:"Go to Draft Room"})]})}function Nee({leagueId:e}){return n.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated p-12 text-center animate-slide-up",children:[n.jsx("div",{className:"w-20 h-20 mx-auto mb-6 bg-cream-100 rounded-full flex items-center justify-center",children:n.jsx(Mt,{className:"w-10 h-10 text-neutral-400"})}),n.jsx("h2",{className:"text-2xl font-display text-neutral-800 mb-3",children:"No Episode Scheduled"}),n.jsx("p",{className:"text-neutral-500 mb-8",children:"There are no upcoming episodes with open picks. Check back later!"}),n.jsx(z,{to:`/leagues/${e}`,className:"btn btn-primary shadow-card",children:"Back to League"})]})}function See({leagueId:e,episode:t,roster:r,currentPickCastawayId:s}){var a,i;return n.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated p-12 text-center animate-slide-up",children:[n.jsx("div",{className:"w-20 h-20 mx-auto mb-6 bg-burgundy-100 rounded-full flex items-center justify-center",children:n.jsx(Mn,{className:"w-10 h-10 text-burgundy-600"})}),n.jsx("h2",{className:"text-2xl font-display text-neutral-800 mb-3",children:"Picks Locked"}),n.jsxs("p",{className:"text-neutral-500 mb-2",children:["Your pick for Episode ",t.number," is locked."]}),s?n.jsx("p",{className:"text-lg font-semibold text-burgundy-600 mb-8",children:((i=(a=r==null?void 0:r.find(o=>o.castaway_id===s))==null?void 0:a.castaways)==null?void 0:i.name)||"Unknown"}):n.jsx("p",{className:"text-lg font-semibold text-orange-600 mb-8",children:"No pick submitted - auto-pick will be applied"}),n.jsx(z,{to:`/leagues/${e}`,className:"btn btn-primary shadow-card",children:"Back to League"})]})}function kee(){var se;const{leagueId:e}=On(),{user:t}=dt(),r=Et(),[s,a]=T.useState(null),[i,o]=T.useState({days:0,hours:0,minutes:0,seconds:0}),[d,u]=T.useState(!1),[h,p]=T.useState(null),{data:f}=Gv(e),{data:x,isLoading:y}=Kv(e,t==null?void 0:t.id),{data:b}=re({queryKey:["currentEpisode",f==null?void 0:f.season_id],queryFn:async()=>{if(!(f!=null&&f.season_id))throw new Error("No season ID");const X=new Date().toISOString(),{data:ee,error:F}=await K.from("episodes").select("*").eq("season_id",f.season_id).gte("picks_lock_at",X).order("air_date",{ascending:!0}).limit(1).single();if(F&&F.code!=="PGRST116")throw F;return ee},enabled:!!(f!=null&&f.season_id)}),{data:w}=re({queryKey:["draftStatus",e],queryFn:async()=>{if(!e)throw new Error("No league ID");const{data:X,error:ee}=await K.from("leagues").select("draft_status, status").eq("id",e).single();if(ee)throw ee;return X},enabled:!!e}),{data:v}=re({queryKey:["currentPick",e,b==null?void 0:b.id,t==null?void 0:t.id],queryFn:async()=>{if(!e||!(b!=null&&b.id)||!(t!=null&&t.id))throw new Error("Missing data");const{data:X,error:ee}=await K.from("weekly_picks").select("*").eq("league_id",e).eq("episode_id",b.id).eq("user_id",t.id).single();if(ee&&ee.code!=="PGRST116")throw ee;return X},enabled:!!e&&!!(b!=null&&b.id)&&!!(t!=null&&t.id)}),{data:j}=re({queryKey:["previousPicks",e,t==null?void 0:t.id],queryFn:async()=>{if(!e||!(t!=null&&t.id))throw new Error("Missing data");const{data:X,error:ee}=await K.from("weekly_picks").select("id, episode_id, castaway_id, status, points_earned, episodes(number, title), castaways(*)").eq("league_id",e).eq("user_id",t.id).neq("status","pending").order("episodes(number)",{ascending:!1}).limit(10);if(ee)throw ee;return X},enabled:!!e&&!!(t!=null&&t.id)}),{data:C}=re({queryKey:["castawayStats",e,t==null?void 0:t.id],queryFn:async()=>{if(!e||!(t!=null&&t.id)||!x)throw new Error("Missing data");const X=x.map(J=>J.castaway_id),{data:ee,error:F}=await K.from("weekly_picks").select("castaway_id, points_earned").eq("league_id",e).eq("user_id",t.id).in("castaway_id",X).in("status",["locked","auto_picked"]);if(F)throw F;const Q=new Map;return X.forEach(J=>{Q.set(J,{castaway_id:J,total_points:0,times_picked:0,avg_points:0})}),ee==null||ee.forEach(J=>{if(J.castaway_id){const U=Q.get(J.castaway_id);U&&(U.total_points+=J.points_earned||0,U.times_picked+=1,U.avg_points=U.times_picked>0?Math.round(U.total_points/U.times_picked):0)}}),Array.from(Q.values())},enabled:!!e&&!!(t!=null&&t.id)&&!!x&&x.length>0}),S=((se=j==null?void 0:j[0])==null?void 0:se.status)==="auto_picked",k=De({mutationFn:async X=>{if(!e||!(b!=null&&b.id))throw new Error("Missing required data");const{data:{session:ee}}=await K.auth.getSession();if(!(ee!=null&&ee.access_token))throw new Error("Not authenticated");const F=await A4(`/leagues/${e}/picks`,{castaway_id:X,episode_id:b.id},ee.access_token);if(F.error)throw new Error(F.error);return F.data},onSuccess:()=>{r.invalidateQueries({queryKey:["currentPick",e,b==null?void 0:b.id,t==null?void 0:t.id]}),u(!0),p(null),setTimeout(()=>u(!1),3e3)},onError:X=>{p(X.message||"Failed to save pick. Please try again."),u(!1)}});T.useEffect(()=>{if(!(b!=null&&b.picks_lock_at))return;const X=()=>{const F=new Date(b.picks_lock_at).getTime(),Q=Date.now(),J=Math.max(0,F-Q);o({days:Math.floor(J/(1e3*60*60*24)),hours:Math.floor(J%(1e3*60*60*24)/(1e3*60*60)),minutes:Math.floor(J%(1e3*60*60)/(1e3*60)),seconds:Math.floor(J%(1e3*60)/1e3)})};X();const ee=setInterval(X,1e3);return()=>clearInterval(ee)},[b==null?void 0:b.picks_lock_at]),T.useEffect(()=>{v!=null&&v.castaway_id&&a(v.castaway_id)},[v==null?void 0:v.castaway_id]);const R=()=>{s&&(p(null),k.mutate(s))},E=!!(v!=null&&v.castaway_id),I=(b==null?void 0:b.picks_lock_at)&&new Date(b.picks_lock_at)<=new Date,M=(v==null?void 0:v.status)==="locked"||I,O=(x==null?void 0:x.filter(X=>{var ee;return((ee=X.castaways)==null?void 0:ee.status)==="active"}))||[],L=!f||y,P=(w==null?void 0:w.draft_status)==="completed",$=i.days*24*60+i.hours*60+i.minutes,B=$<=30&&$>0,D=i.days===0&&i.hours<2;return L?n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200",children:[n.jsx(Se,{}),n.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:n.jsx(me,{className:"h-8 w-8 text-burgundy-500 animate-spin"})})]}):n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200",children:[n.jsx(Se,{}),n.jsxs("main",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsx("div",{className:"flex items-center justify-between mb-8 animate-fade-in",children:n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(z,{to:`/leagues/${e}`,className:"text-neutral-400 hover:text-neutral-600 transition-colors",children:n.jsx(st,{className:"w-5 h-5"})}),n.jsx("h1",{className:"text-2xl font-display text-neutral-800",children:"Weekly Pick"})]}),n.jsxs("p",{className:"text-neutral-500",children:[b?`Episode ${b.number}`:"Loading..."," "," ",(f==null?void 0:f.name)||"Select your castaway"]})]})}),P?b?M?n.jsx(See,{leagueId:e,episode:b,roster:x,currentPickCastawayId:v==null?void 0:v.castaway_id}):n.jsxs("div",{className:"space-y-6",children:[n.jsx(bee,{episode:b,timeLeft:i}),n.jsx(yee,{wasAutoPicked:S,pickSubmitted:E,isUrgent:D,isVeryUrgent:B}),n.jsx(wee,{roster:x,activeCastaways:O,selectedCastaway:s,currentPickCastawayId:v==null?void 0:v.castaway_id,pickSubmitted:E,showSuccess:d,mutationError:h,isPending:k.isPending,castawayStats:C,onSelect:a,onSubmit:R}),j&&j.length>0&&n.jsx(_ee,{picks:j})]}):n.jsx(Nee,{leagueId:e}):n.jsx(jee,{leagueId:e})]})]})}const k0=25;function Eee(){var w;const{leagueId:e}=On(),{user:t}=dt(),[r,s]=T.useState(1),{data:a}=re({queryKey:["profile",t==null?void 0:t.id],queryFn:async()=>{const{data:v,error:j}=await K.from("users").select("id, display_name").eq("id",t.id).single();if(j)throw j;return v},enabled:!!(t!=null&&t.id)}),{data:i}=re({queryKey:["league",e],queryFn:async()=>{if(!e)throw new Error("No league ID");const{data:v,error:j}=await K.from("leagues").select("*").eq("id",e).single();if(j)throw j;return v},enabled:!!e}),{data:o,isLoading:d}=re({queryKey:["leaderboard",e],queryFn:async()=>{if(!e)throw new Error("No league ID");const{data:v,error:j}=await K.from("league_members").select("id, user_id, total_points, rank, users(id, display_name)").eq("league_id",e).order("total_points",{ascending:!1});if(j)throw j;return v},enabled:!!e}),u=v=>v===0?{emoji:"",bg:"bg-yellow-100",text:"text-yellow-700"}:v===1?{emoji:"",bg:"bg-gray-100",text:"text-gray-700"}:v===2?{emoji:"",bg:"bg-orange-100",text:"text-orange-700"}:{emoji:null,bg:"bg-cream-50",text:"text-neutral-600"},h=(o==null?void 0:o.length)||0,p=Math.ceil(h/k0),f=(r-1)*k0,x=f+k0,y=(o==null?void 0:o.slice(f,x))||[],b=p>1;return n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsxs("div",{className:"flex items-center justify-between mb-8 animate-fade-in",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(z,{to:"/dashboard",className:"text-neutral-400 hover:text-neutral-600 transition-colors",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),n.jsx("h1",{className:"text-2xl font-display text-neutral-800",children:"Leaderboard"})]}),n.jsx("p",{className:"text-neutral-500",children:(i==null?void 0:i.name)||"Loading..."})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-sm text-neutral-500",children:"League Code"}),n.jsx("p",{className:"font-mono font-bold text-burgundy-600",children:i==null?void 0:i.code})]})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated overflow-hidden animate-slide-up",children:[n.jsxs("div",{className:"p-6 border-b border-cream-100",children:[n.jsx("h2",{className:"font-semibold text-neutral-800",children:"Standings"}),n.jsxs("p",{className:"text-sm text-neutral-500 mt-1",children:[(o==null?void 0:o.length)||0," players"]})]}),d?n.jsxs("div",{className:"p-12 text-center",children:[n.jsx("div",{className:"w-8 h-8 mx-auto border-2 border-burgundy-500 border-t-transparent rounded-full animate-spin"}),n.jsx("p",{className:"text-neutral-500 mt-4",children:"Loading standings..."})]}):(o==null?void 0:o.length)===0?n.jsx("div",{className:"p-12 text-center",children:n.jsx("p",{className:"text-neutral-500",children:"No players in this league yet."})}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"divide-y divide-cream-100",children:y.map((v,j)=>{var E;const C=f+j,S=u(C),k=v.user_id===(t==null?void 0:t.id),R=C+1;return n.jsxs("div",{className:`flex items-center gap-4 p-5 transition-colors ${k?"bg-burgundy-50":"hover:bg-cream-50"}`,children:[n.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold ${S.bg} ${S.text}`,children:S.emoji||R}),n.jsx("div",{className:"flex-1",children:n.jsxs("p",{className:`font-semibold ${k?"text-burgundy-700":"text-neutral-800"}`,children:[(E=v.users)==null?void 0:E.display_name,k&&n.jsx("span",{className:"ml-2 text-xs text-burgundy-500",children:"(You)"})]})}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-2xl font-display text-neutral-800",children:v.total_points}),n.jsx("p",{className:"text-xs text-neutral-400",children:"points"})]})]},v.id)})}),b&&n.jsxs("div",{className:"p-4 border-t border-cream-100 flex items-center justify-between",children:[n.jsxs("p",{className:"text-sm text-neutral-500",children:["Showing ",f+1,"-",Math.min(x,h)," of ",h," ","players"]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>s(v=>Math.max(1,v-1)),disabled:r===1,className:"p-2 rounded-lg border border-cream-200 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-cream-50 transition-colors",children:n.jsx(dJ,{className:"h-5 w-5 text-neutral-600"})}),n.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:p},(v,j)=>j+1).map(v=>{const j=v===1||v===p||v>=r-1&&v<=r+1,C=v===2&&r>3||v===p-1&&r<p-2;return!j&&!C?null:C&&!j?n.jsx("span",{className:"px-2 text-neutral-400",children:"..."},v):j?n.jsx("button",{onClick:()=>s(v),className:`w-10 h-10 rounded-lg font-medium transition-colors ${v===r?"bg-burgundy-500 text-white":"border border-cream-200 text-neutral-600 hover:bg-cream-50"}`,children:v},v):null})}),n.jsx("button",{onClick:()=>s(v=>Math.min(p,v+1)),disabled:r===p,className:"p-2 rounded-lg border border-cream-200 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-cream-50 transition-colors",children:n.jsx(hr,{className:"h-5 w-5 text-neutral-600"})})]})]})]})]}),t&&o&&n.jsx("div",{className:"mt-6 bg-gradient-to-r from-burgundy-500 to-burgundy-600 rounded-2xl p-6 text-white shadow-elevated animate-slide-up",style:{animationDelay:"0.1s"},children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-burgundy-100 text-sm",children:"Your Position"}),n.jsxs("p",{className:"text-3xl font-display mt-1",children:["#",o.findIndex(v=>v.user_id===t.id)+1]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-burgundy-100 text-sm",children:"Your Points"}),n.jsx("p",{className:"text-3xl font-display mt-1",children:((w=o.find(v=>v.user_id===t.id))==null?void 0:w.total_points)||0})]})]})})]})}function Cee(){return n.jsxs(n.Fragment,{children:[n.jsx(Se,{}),n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated p-8 max-w-md w-full text-center border border-cream-200",children:[n.jsx("div",{className:"w-20 h-20 bg-burgundy-100 rounded-full flex items-center justify-center mx-auto mb-6",children:n.jsx(Oi,{className:"h-10 w-10 text-burgundy-500"})}),n.jsx("h1",{className:"text-6xl font-display font-bold text-burgundy-500 mb-2",children:"404"}),n.jsx("h2",{className:"text-xl font-display text-neutral-600 mb-4",children:"Page Not Found"}),n.jsx("p",{className:"text-neutral-500 mb-8",children:"This page has been voted off the island."}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[n.jsxs("button",{onClick:()=>window.history.back(),className:"flex items-center justify-center gap-2 px-6 py-3 bg-cream-100 text-neutral-700 rounded-xl font-medium hover:bg-cream-200 transition-colors",children:[n.jsx(st,{className:"h-5 w-5"}),"Go Back"]}),n.jsxs(z,{to:"/dashboard",className:"flex items-center justify-center gap-2 px-6 py-3 bg-burgundy-500 text-white rounded-xl font-medium hover:bg-burgundy-600 transition-colors",children:[n.jsx(C4,{className:"h-5 w-5"}),"Dashboard"]})]})]})})]})}function Tee(){const{user:e}=dt(),t=[{icon:$e,title:"Join or Create a League",description:"Play with friends in a private league or join a public one. Each league has its own leaderboard and bragging rights.",details:["Create a private league and invite friends with a code","Join public leagues to compete with the community","Play in multiple leagues with the same roster","Everyone is automatically in the Global League"]},{icon:Ke,title:"Rank Your Castaways",description:"After the first episode, participants rank all castaways 1-24. This determines who you get in the snake draft.",details:["Rankings apply to ALL your leagues for the season","Picks are made in reverse order of prior season fantasy rankings (or random for new leagues)","The picking order reverses each round (snake draft style)","Special selection rules apply if there are more participants than castaways"]},{icon:gr,title:"Get Your Team",description:"After the deadline, the system runs a snake draft. You get 2 castaways based on your draft position and rankings.",details:["Draft positions are randomly assigned for new leagues","Snake draft means pick order reverses each round","You'll get your highest-ranked available castaway each pick","Your 2 castaways are your team for the entire season"]},{icon:er,title:"Make Weekly Picks (Starting/Benched)",description:'Each week, choose which of your 2 castaways to "start" for that episode. Only your starting castaway earns points - the other is benched.',details:["Picks lock Wednesday at 5pm PST before the episode","A random number generator is used if no pick is made","Prior week designations do NOT impact the current week","When only one castaway remains, they must be your starter"]},{icon:kn,title:"Earn Points",description:"Points are based on your STARTING castaway's performance that week. Your benched castaway does not score.",details:["If a team has no remaining castaways, they can no longer score points","Their Total Points are set at that point"],linkTo:"/scoring",linkText:"View Full Scoring Rules "},{icon:Fv,title:"Win Your League",description:"The player with the most total points at the end of the season wins! Track your progress on the leaderboard.",details:["Points accumulate across all episodes","Leaderboard updates after each episode is scored","Compete for glory in multiple leagues","Bragging rights last until next season!"]}],r=[{icon:Zr,title:"Study the Edit",description:"Castaways with more screen time and confessionals tend to score more points. Pay attention to who the editors are focusing on."},{icon:_s,title:"Balance Risk",description:"Sometimes the safe pick isn't the best pick. A castaway in danger might score big if they survive or play an idol."},{icon:bn,title:"Know the Meta",description:"Challenge beasts score consistently. Strategic players score in bursts. Social players accumulate over time."},{icon:Mt,title:"Think Long-Term",description:"Don't just think about this week. Consider who will make the merge, who has idol-finding potential, who might win."}];return n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex flex-col",children:[n.jsx(Se,{}),n.jsx("div",{className:"px-6 py-10 text-center bg-gradient-to-b from-burgundy-50 to-transparent",children:n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsxs("div",{className:"flex items-center justify-center gap-3 mb-3",children:[n.jsx(Lu,{className:"h-9 w-9 text-burgundy-500"}),n.jsx("h1",{className:"text-3xl md:text-4xl font-display font-bold text-neutral-800",children:"How to Play"})]}),n.jsx("p",{className:"text-neutral-600 text-lg max-w-2xl mx-auto",children:"Fantasy Survivor for people who actually watch Survivor. Real strategy. No luck required."})]})}),n.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8 flex-1",children:[n.jsxs("section",{className:"mb-16",children:[n.jsx("h2",{className:"text-2xl font-display font-bold text-neutral-800 mb-8 text-center",children:"The Game in 6 Steps"}),n.jsx("div",{className:"space-y-6",children:t.map((s,a)=>n.jsx("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 overflow-hidden",children:n.jsx("div",{className:"p-6 md:p-8",children:n.jsxs("div",{className:"flex items-start gap-4 md:gap-6",children:[n.jsx("div",{className:"flex-shrink-0 w-14 h-14 bg-burgundy-500 rounded-2xl flex items-center justify-center shadow-lg",children:n.jsx(s.icon,{className:"h-7 w-7 text-white"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"flex items-center gap-2 mb-2",children:n.jsxs("span",{className:"text-burgundy-500 font-bold text-sm",children:["Step ",a+1]})}),n.jsx("h3",{className:"text-xl md:text-2xl font-display font-bold text-neutral-800 mb-2",children:s.title}),n.jsx("p",{className:"text-neutral-600 mb-4",children:s.description}),s.details.length>0?n.jsx("ul",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:s.details.map((i,o)=>n.jsxs("li",{className:"flex items-start gap-2 text-sm text-neutral-600",children:[n.jsx(Rp,{className:"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0"}),n.jsx("span",{children:i})]},o))}):null,"linkTo"in s&&s.linkTo&&n.jsxs(z,{to:s.linkTo,className:"inline-flex items-center gap-2 mt-2 text-burgundy-600 hover:text-burgundy-700 font-medium",children:[s.linkText||"Learn more",n.jsx(Ir,{className:"h-4 w-4"})]})]})]})})},s.title))})]}),n.jsxs("section",{className:"mb-16",children:[n.jsx("h2",{className:"text-2xl font-display font-bold text-neutral-800 mb-8 text-center",children:"Strategy Tips"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.map(s=>n.jsx("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 p-6",children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:"w-10 h-10 bg-amber-100 rounded-xl flex items-center justify-center flex-shrink-0",children:n.jsx(s.icon,{className:"h-5 w-5 text-amber-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-display font-bold text-neutral-800 mb-1",children:s.title}),n.jsx("p",{className:"text-neutral-600 text-sm",children:s.description})]})]})},s.title))})]}),n.jsxs("section",{className:"mb-16",children:[n.jsx("h2",{className:"text-2xl font-display font-bold text-neutral-800 mb-8 text-center",children:"Learn More"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(z,{to:"/scoring",className:"bg-white rounded-2xl shadow-card border border-cream-200 p-6 hover:shadow-card-hover transition-shadow group",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-12 h-12 bg-burgundy-100 rounded-xl flex items-center justify-center",children:n.jsx(kn,{className:"h-6 w-6 text-burgundy-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-display font-bold text-neutral-800",children:"Scoring Rules"}),n.jsx("p",{className:"text-neutral-500 text-sm",children:"100+ ways to earn points"})]})]}),n.jsx(Ir,{className:"h-5 w-5 text-neutral-400 group-hover:text-burgundy-500 transition-colors"})]})}),n.jsx(z,{to:"/timeline",className:"bg-white rounded-2xl shadow-card border border-cream-200 p-6 hover:shadow-card-hover transition-shadow group",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-12 h-12 bg-amber-100 rounded-xl flex items-center justify-center",children:n.jsx(er,{className:"h-6 w-6 text-amber-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-display font-bold text-neutral-800",children:"Weekly Timeline"}),n.jsx("p",{className:"text-neutral-500 text-sm",children:"Know every deadline"})]})]}),n.jsx(Ir,{className:"h-5 w-5 text-neutral-400 group-hover:text-amber-500 transition-colors"})]})})]})]}),n.jsx("section",{className:"text-center pb-16",children:n.jsxs("div",{className:"bg-gradient-to-r from-burgundy-500 to-burgundy-600 rounded-2xl p-8 md:p-12 text-white shadow-lg",children:[n.jsx("h2",{className:"text-2xl md:text-3xl font-display font-bold mb-4",children:"Ready to Play?"}),n.jsx("p",{className:"text-burgundy-100 mb-8 max-w-lg mx-auto text-lg",children:"Join Season 50: In the Hands of the Fans and prove you know more about Survivor strategy than your friends."}),e?n.jsxs(z,{to:"/dashboard",className:"inline-flex items-center gap-2 bg-white text-burgundy-600 font-bold px-8 py-4 rounded-xl hover:bg-cream-100 transition-colors text-lg",children:["Go to Dashboard",n.jsx(Ir,{className:"h-5 w-5"})]}):n.jsxs(z,{to:"/signup",className:"inline-flex items-center gap-2 bg-white text-burgundy-600 font-bold px-8 py-4 rounded-xl hover:bg-cream-100 transition-colors text-lg",children:["Join Now - It's Free",n.jsx(Ir,{className:"h-5 w-5"})]})]})})]}),n.jsx(tn,{})]})}const wm=[{name:"Survival",icon:bn,color:"orange",description:"Points for staying in the game",examples:[{text:"Survive the episode without being voted out",positive:!0},{text:"Make it to the merge",positive:!0},{text:"Reach the Final Tribal Council",positive:!0},{text:"Win the title of Sole Survivor",positive:!0}]},{name:"Tribal Council",icon:$e,color:"blue",description:"Points through voting and surviving votes",examples:[{text:"Vote for the person who gets eliminated",positive:!0},{text:"Receive votes but survive",positive:!0},{text:"Get blindsided (eliminated with an idol in pocket)",positive:!1},{text:"Vote incorrectly",positive:!1}]},{name:"Pre-Merge Challenges",icon:Ke,color:"green",description:"Tribal immunity and reward challenges",examples:[{text:"Tribe wins immunity challenge",positive:!0},{text:"Tribe wins reward challenge",positive:!0},{text:"Individual standout performance in tribal challenge",positive:!0},{text:"Sit out of a challenge",positive:!1}]},{name:"Post-Merge Challenges",icon:Fv,color:"purple",description:"Individual immunity and reward challenges",examples:[{text:"Win individual immunity",positive:!0},{text:"Win individual reward",positive:!0},{text:"Win the final immunity challenge",positive:!0},{text:"Come in second place in individual immunity",positive:!0}]},{name:"Strategic Play",icon:gr,color:"red",description:"Big moves and game manipulation",examples:[{text:"Orchestrate a blindside",positive:!0},{text:"Successfully flip on your alliance",positive:!0},{text:"Convince someone to play (or not play) their idol",positive:!0},{text:"Get caught in a lie",positive:!1}]},{name:"Social Game",icon:Bs,color:"teal",description:"Relationships and jury management",examples:[{text:"Shown building a strong alliance",positive:!0},{text:"Mediate conflict between other players",positive:!0},{text:"Receive votes at Final Tribal Council",positive:!0},{text:"Get into a public argument",positive:!1}]},{name:"Idols & Advantages",icon:FJ,color:"yellow",description:"Finding and playing advantages",examples:[{text:"Find a hidden immunity idol",positive:!0},{text:"Successfully play an idol to save yourself",positive:!0},{text:"Play an idol for another player",positive:!0},{text:"Find or win any advantage",positive:!0},{text:"Waste an idol (play it but no votes against you)",positive:!1}]},{name:"Confessionals & Screen Time",icon:Bs,color:"indigo",description:"On-screen presence and memorable moments",examples:[{text:"Have a confessional during the episode",positive:!0},{text:"Deliver a memorable or viral moment",positive:!0},{text:"Get significant screen time",positive:!0},{text:"Shown crying (context matters!)",positive:!0}]},{name:"Bonus & Special",icon:kn,color:"gold",description:"Special achievements and milestones",examples:[{text:"Win fan favorite / Sprint Player of the Season",positive:!0},{text:"Make a move that significantly changes the game",positive:!0},{text:"Perfect game (no votes against, unanimous win)",positive:!0}]},{name:"Penalties",icon:Sn,color:"red",description:"Ways to lose points",examples:[{text:"Get voted out",positive:!1},{text:"Quit the game",positive:!1},{text:"Get medically evacuated",positive:!1},{text:"Get removed from the game",positive:!1}]}];function j2(){const{user:e}=dt(),[t,r]=T.useState(()=>wm.reduce((o,d)=>({...o,[d.name]:!0}),{})),s=o=>{r(d=>({...d,[o]:!d[o]}))},a=()=>{r(wm.reduce((o,d)=>({...o,[d.name]:!0}),{}))},i=()=>{r(wm.reduce((o,d)=>({...o,[d.name]:!1}),{}))};return n.jsxs("div",{className:"min-h-screen bg-cream-50 flex flex-col",children:[n.jsx(Se,{}),n.jsx("div",{className:"px-6 py-10 text-center bg-gradient-to-b from-burgundy-50 to-transparent",children:n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsxs("div",{className:"flex items-center justify-center gap-3 mb-3",children:[n.jsx(Lu,{className:"h-9 w-9 text-burgundy-500"}),n.jsx("h1",{className:"text-3xl md:text-4xl font-display font-bold text-neutral-800",children:"Scoring Rules"})]}),n.jsx("p",{className:"text-neutral-600 max-w-2xl mx-auto",children:"Earn and lose points based on what your castaways do each episode. With over 100+ rules and a decade of Survivor knowledge, our scoring system is unmatched."})]})}),n.jsx("div",{className:"max-w-6xl mx-auto px-6 mb-6",children:n.jsxs("div",{className:"flex justify-center gap-3",children:[n.jsx("button",{onClick:a,className:"text-sm text-burgundy-600 hover:text-burgundy-700 font-medium",children:"Expand All"}),n.jsx("span",{className:"text-neutral-300",children:"|"}),n.jsx("button",{onClick:i,className:"text-sm text-burgundy-600 hover:text-burgundy-700 font-medium",children:"Collapse All"})]})}),n.jsx("div",{className:"max-w-6xl mx-auto px-6 pb-12",children:n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:wm.map(o=>{const d=o.icon,u=t[o.name],h=o.color==="orange"?"bg-orange-100":o.color==="blue"?"bg-blue-100":o.color==="green"?"bg-green-100":o.color==="purple"?"bg-purple-100":o.color==="red"?"bg-red-100":o.color==="teal"?"bg-teal-100":o.color==="yellow"?"bg-yellow-100":o.color==="indigo"?"bg-indigo-100":o.color==="gold"?"bg-amber-100":"bg-neutral-100",p=o.color==="orange"?"text-orange-600":o.color==="blue"?"text-blue-600":o.color==="green"?"text-green-600":o.color==="purple"?"text-purple-600":o.color==="red"?"text-red-600":o.color==="teal"?"text-teal-600":o.color==="yellow"?"text-yellow-600":o.color==="indigo"?"text-indigo-600":o.color==="gold"?"text-amber-600":"text-neutral-600";return n.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 overflow-hidden",children:[n.jsxs("button",{onClick:()=>s(o.name),className:"w-full px-5 py-4 flex items-center gap-3 hover:bg-cream-50 transition-colors",children:[n.jsx("div",{className:`p-2 rounded-xl ${h}`,children:n.jsx(d,{className:`h-5 w-5 ${p}`})}),n.jsxs("div",{className:"flex-1 text-left",children:[n.jsx("h3",{className:"text-base font-display font-bold text-neutral-800",children:o.name}),!u&&n.jsx("p",{className:"text-neutral-500 text-xs",children:o.description})]}),u?n.jsx(un,{className:"h-5 w-5 text-neutral-400"}):n.jsx(hr,{className:"h-5 w-5 text-neutral-400"})]}),u&&n.jsxs("div",{className:"border-t border-cream-200",children:[n.jsx("div",{className:"px-5 py-3 bg-cream-50 border-b border-cream-100",children:n.jsx("p",{className:"text-neutral-600 text-sm",children:o.description})}),n.jsx("div",{className:"divide-y divide-cream-100",children:o.examples.map((f,x)=>n.jsxs("div",{className:"px-5 py-2.5 flex items-center gap-3 hover:bg-cream-50 transition-colors",children:[n.jsx("div",{className:`p-1 rounded-full flex-shrink-0 ${f.positive?"bg-green-100":"bg-red-100"}`,children:f.positive?n.jsx(qt,{className:"h-3.5 w-3.5 text-green-600"}):n.jsx(Sn,{className:"h-3.5 w-3.5 text-red-600"})}),n.jsx("p",{className:"text-neutral-700 text-sm flex-1",children:f.text})]},x))})]})]},o.name)})})}),n.jsx("div",{className:"max-w-4xl mx-auto px-6 pb-8",children:n.jsxs("div",{className:"bg-cream-100 rounded-2xl p-6 border border-cream-200",children:[n.jsx("h3",{className:"font-display font-bold text-neutral-800 mb-2",children:"Why don't you show exact point values?"}),n.jsx("p",{className:"text-neutral-600 text-sm",children:"Our scoring system is carefully balanced to reward strategic gameplay. We keep the exact point values private to prevent gaming the system and to keep the competition fair. Focus on drafting well-rounded players who are likely to go deep in the game!"})]})}),n.jsx("div",{className:"max-w-4xl mx-auto px-6 pb-16 text-center",children:n.jsxs("div",{className:"bg-burgundy-500 rounded-2xl p-8 text-white",children:[n.jsx("h2",{className:"text-2xl font-display font-bold mb-4",children:"Ready to Put Your Survivor Knowledge to the Test?"}),n.jsx("p",{className:"text-burgundy-100 mb-6 max-w-lg mx-auto",children:"Join Season 50 and prove you know more about Survivor strategy than your friends."}),e?n.jsxs(z,{to:"/dashboard",className:"inline-flex items-center gap-2 bg-white text-burgundy-600 font-bold px-8 py-3 rounded-xl hover:bg-cream-100 transition-colors",children:["Go to Dashboard",n.jsx(Ir,{className:"h-5 w-5"})]}):n.jsxs(z,{to:"/signup",className:"inline-flex items-center gap-2 bg-white text-burgundy-600 font-bold px-8 py-3 rounded-xl hover:bg-cream-100 transition-colors",children:["Join Now - It's Free",n.jsx(Ir,{className:"h-5 w-5"})]})]})}),n.jsx(tn,{})]})}const Ree=[{day:"Wednesday",time:"5:00 PM PST / 8:00 PM EST",icon:Mn,color:"burgundy",title:"Picks Lock",description:`All weekly picks lock when the episode starts airing. Make sure you've selected which of your castaways to "play" for this episode before showtime.`,tip:"Set a reminder for Wednesday afternoon! If you forget to pick, the system will randomly select from your available castaways."},{day:"Wednesday",time:"8:00 PM EST / 5:00 PM PST",icon:yc,color:"orange",title:"Episode Airs",description:"Survivor airs on CBS. Watch live or avoid spoilers until you can catch up. Scoring events are tracked as they happen.",tip:"Enable spoiler-safe mode in your settings to delay result notifications."},{day:"Wednesday Night",time:"After West Coast Airing",icon:mi,color:"green",title:"Results Posted",description:"Results are usually released shortly after the episode finishes airing on the west coast (~9pm PST). In some cases, it may take until the next morning.",tip:"Results notifications respect your spoiler delay settings."},{day:"Thursday",time:"Morning",icon:Ke,color:"amber",title:"Scoring Finalized",description:"Our team reviews the episode and finalizes all scoring events. We catch every confessional, idol play, and strategic move.",tip:"Scores are typically finalized within 12-24 hours of the episode airing."},{day:"Thursday",time:"After Scoring",icon:Xr,color:"blue",title:"Next Week Opens",description:"Picks for the next episode open after scoring is finalized. You have until the next Wednesday to decide which of your castaways to play.",tip:"The earlier you pick, the less chance you forget!"}];function Iee(){const{user:e}=dt();return n.jsxs("div",{className:"min-h-screen bg-cream-50 flex flex-col",children:[n.jsx(Se,{}),n.jsx("div",{className:"px-6 py-10 text-center bg-gradient-to-b from-amber-50 to-transparent",children:n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsxs("div",{className:"flex items-center justify-center gap-3 mb-3",children:[n.jsx(er,{className:"h-9 w-9 text-amber-600"}),n.jsx("h1",{className:"text-3xl md:text-4xl font-display font-bold text-neutral-800",children:"Weekly Timeline"})]}),n.jsx("p",{className:"text-neutral-600 max-w-2xl mx-auto",children:"Every week follows the same rhythm. Know the schedule, never miss a deadline, and maximize your scoring potential."})]})}),n.jsx("div",{className:"max-w-3xl mx-auto px-6 pb-12",children:n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute left-8 top-0 bottom-0 w-0.5 bg-cream-300"}),n.jsx("div",{className:"space-y-8",children:Ree.map((t,r)=>{const s=t.icon,a=t.color==="burgundy"?"bg-burgundy-500":t.color==="orange"?"bg-orange-500":t.color==="amber"?"bg-amber-500":t.color==="green"?"bg-green-500":"bg-blue-500",i=t.color==="burgundy"?"bg-burgundy-50 border-burgundy-200":t.color==="orange"?"bg-orange-50 border-orange-200":t.color==="amber"?"bg-amber-50 border-amber-200":t.color==="green"?"bg-green-50 border-green-200":"bg-blue-50 border-blue-200",o=t.color==="burgundy"?"text-burgundy-700":t.color==="orange"?"text-orange-700":t.color==="amber"?"text-amber-700":t.color==="green"?"text-green-700":"text-blue-700";return n.jsxs("div",{className:"relative flex gap-6",children:[n.jsx("div",{className:`relative z-10 w-16 h-16 ${a} rounded-2xl flex items-center justify-center shadow-lg flex-shrink-0`,children:n.jsx(s,{className:"h-7 w-7 text-white"})}),n.jsxs("div",{className:"flex-1 bg-white rounded-2xl shadow-card border border-cream-200 p-6",children:[n.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-2",children:[n.jsx("span",{className:"font-display font-bold text-neutral-800",children:t.day}),n.jsx("span",{className:"text-neutral-400",children:""}),n.jsxs("span",{className:"text-neutral-600 flex items-center gap-1",children:[n.jsx(Mt,{className:"h-4 w-4"}),t.time]})]}),n.jsx("h3",{className:"text-xl font-display font-bold text-neutral-800 mb-2",children:t.title}),n.jsx("p",{className:"text-neutral-600 mb-4",children:t.description}),n.jsx("div",{className:`${i} rounded-xl p-3 border`,children:n.jsxs("p",{className:`text-sm ${o} flex items-start gap-2`,children:[n.jsx(Rp,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),n.jsx("span",{children:t.tip})]})})]})]},r)})})]})}),n.jsx("div",{className:"max-w-3xl mx-auto px-6 pb-12",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 p-6",children:[n.jsxs("h3",{className:"font-display font-bold text-lg text-neutral-800 mb-4 flex items-center gap-2",children:[n.jsx(at,{className:"h-5 w-5 text-amber-500"}),"Important Notes"]}),n.jsxs("ul",{className:"space-y-3 text-neutral-600",children:[n.jsxs("li",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-burgundy-500 mt-2 flex-shrink-0"}),n.jsxs("span",{children:[n.jsx("strong",{children:"All times are in Pacific Standard Time (PST)"})," unless otherwise noted. The episode airs at 8pm Eastern (5pm Pacific)."]})]}),n.jsxs("li",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-burgundy-500 mt-2 flex-shrink-0"}),n.jsxs("span",{children:[n.jsx("strong",{children:"Double episodes"})," may have adjusted schedules. We'll notify you of any changes."]})]}),n.jsxs("li",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-burgundy-500 mt-2 flex-shrink-0"}),n.jsxs("span",{children:[n.jsx("strong",{children:"Forgot to pick?"})," The system randomly selects from your available castaways."]})]}),n.jsxs("li",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-burgundy-500 mt-2 flex-shrink-0"}),n.jsxs("span",{children:[n.jsx("strong",{children:"Both castaways eliminated?"})," Your torch is snuffed for the season, but you can still watch the leaderboard!"]})]})]})]})}),n.jsx("div",{className:"max-w-3xl mx-auto px-6 pb-16 text-center",children:n.jsxs("div",{className:"bg-gradient-to-r from-amber-500 to-orange-500 rounded-2xl p-8 text-white",children:[n.jsx("h2",{className:"text-2xl font-display font-bold mb-4",children:"Never Miss a Deadline"}),n.jsx("p",{className:"text-amber-100 mb-6 max-w-lg mx-auto",children:"Enable notifications to get reminders before picks lock and when results are posted."}),e?n.jsxs(z,{to:"/settings",className:"inline-flex items-center gap-2 bg-white text-amber-600 font-bold px-8 py-3 rounded-xl hover:bg-cream-100 transition-colors",children:["Manage Notifications",n.jsx(Ir,{className:"h-5 w-5"})]}):n.jsxs(z,{to:"/signup",className:"inline-flex items-center gap-2 bg-white text-amber-600 font-bold px-8 py-3 rounded-xl hover:bg-cream-100 transition-colors",children:["Join Now - It's Free",n.jsx(Ir,{className:"h-5 w-5"})]})]})}),n.jsx(tn,{})]})}function Pee(){var v;const{code:e}=On(),t=ns(),[r,s]=T.useState(""),[a,i]=T.useState(null),{data:o,isLoading:d}=re({queryKey:["session"],queryFn:async()=>{const{data:j}=await K.auth.getSession();return j.session}}),{data:u,isLoading:h,error:p}=re({queryKey:["league-by-code",e],queryFn:async()=>{var S;if(!e)throw new Error("No code provided");const j=e.trim().toUpperCase(),C=await Lp(`/leagues/code/${j}`);if(C.error)throw new Error(C.error);if(!((S=C.data)!=null&&S.league))throw new Error("League not found");return C.data.league},enabled:!!e&&e.trim().length>0,retry:3,retryDelay:j=>Math.min(1e3*2**j,3e3),staleTime:3e4}),f=u,x=u==null?void 0:u.member_count,{data:y}=re({queryKey:["is-member",f==null?void 0:f.id,(v=o==null?void 0:o.user)==null?void 0:v.id],queryFn:async()=>{var C;return!(o!=null&&o.access_token)||!(f!=null&&f.id)?!1:((C=(await Je(`/leagues/${f.id}/join/status`,o.access_token)).data)==null?void 0:C.paid)??!1},enabled:!!(o!=null&&o.access_token)&&!!(f!=null&&f.id)}),b=De({mutationFn:async()=>{var C;if(!(o!=null&&o.access_token)||!f)throw new Error("Not authenticated");const j=await Je(`/leagues/${f.id}/join`,o.access_token,{method:"POST",body:JSON.stringify({password:r})});if(j.status===402){const S=await Je(`/leagues/${f.id}/join/checkout`,o.access_token,{method:"POST"});if(S.error)throw new Error(S.error||"Failed to create checkout session");return(C=S.data)!=null&&C.checkout_url&&(window.location.href=S.data.checkout_url),null}if(j.error)throw new Error(j.error);return j.data},onSuccess:j=>{j&&t(`/leagues/${f.id}`)},onError:j=>{i(j.message),mt(j,{tags:{operation:"join_league",league_code:e},extra:{league_id:f==null?void 0:f.id}})}});if(T.useEffect(()=>{const j=window.location.hash.includes("access_token");!d&&!o&&e&&!j&&t(`/login?redirect=/join/${e}`)},[o,d,e,t]),d||h)return n.jsxs(n.Fragment,{children:[n.jsx(Se,{}),n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex flex-col items-center justify-center px-4",children:[n.jsx("img",{src:"/logo.png",alt:"RGFL",className:"h-16 w-auto mb-6 animate-pulse"}),n.jsx("p",{className:"text-neutral-600 font-medium",children:"Loading league details..."})]})]});if(p||!f)return n.jsxs(n.Fragment,{children:[n.jsx(Se,{}),n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center px-4",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated p-8 border border-cream-200 max-w-md text-center",children:[n.jsx(Nn,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),n.jsx("h1",{className:"text-2xl font-display font-bold text-neutral-800 mb-2",children:"League Not Found"}),n.jsxs("p",{className:"text-neutral-500 mb-6",children:['The invite code "',e,`" doesn't match any league. Check the code and try again.`]}),n.jsx(z,{to:"/dashboard",className:"btn btn-primary inline-block",children:"Go to Dashboard"})]})})]});if(y)return n.jsxs(n.Fragment,{children:[n.jsx(Se,{}),n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center px-4",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated p-8 border border-cream-200 max-w-md text-center",children:[n.jsx(tt,{className:"h-12 w-12 text-green-500 mx-auto mb-4"}),n.jsx("h1",{className:"text-2xl font-display font-bold text-neutral-800 mb-2",children:"Already a Member"}),n.jsxs("p",{className:"text-neutral-500 mb-6",children:["You're already a member of ",f.name,"!"]}),n.jsx(z,{to:`/leagues/${f.id}`,className:"btn btn-primary inline-block",children:"Go to League"})]})})]});const w=x!==void 0&&x>=f.max_players;return n.jsxs(n.Fragment,{children:[n.jsx(Se,{}),n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center px-4",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated p-8 border border-cream-200 max-w-md w-full",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("h1",{className:"text-2xl font-display font-bold text-neutral-800 mb-2",children:f.name}),n.jsxs("p",{className:"text-neutral-500",children:["Season ",f.seasons.number,": ",f.seasons.name]})]}),n.jsxs("div",{className:"flex justify-center gap-6 mb-8",children:[n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"flex items-center justify-center gap-1 text-burgundy-500",children:[n.jsx($e,{className:"h-5 w-5"}),n.jsxs("span",{className:"text-xl font-bold",children:[x,"/",f.max_players]})]}),n.jsx("p",{className:"text-neutral-500 text-sm",children:"Players"})]}),f.require_donation&&f.donation_amount&&n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"flex items-center justify-center gap-1 text-burgundy-500",children:[n.jsx(ks,{className:"h-5 w-5"}),n.jsx("span",{className:"text-xl font-bold",children:f.donation_amount})]}),n.jsx("p",{className:"text-neutral-500 text-sm",children:"Entry Fee"})]})]}),f.donation_notes&&n.jsx("div",{className:"bg-cream-50 rounded-xl p-4 mb-6 border border-cream-200",children:n.jsx("p",{className:"text-neutral-600 text-sm",children:f.donation_notes})}),w?n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-red-500 mb-4",children:"This league is full."}),n.jsx(z,{to:"/dashboard",className:"btn btn-secondary inline-block",children:"Back to Dashboard"})]}):n.jsxs("form",{onSubmit:j=>{j.preventDefault(),i(null),b.mutate()},children:[(u==null?void 0:u.has_password)&&n.jsxs("div",{className:"mb-6",children:[n.jsxs("label",{className:"block text-neutral-700 text-sm font-medium mb-2",children:[n.jsx(Mn,{className:"h-4 w-4 inline mr-1"}),"League Password"]}),n.jsx("input",{type:"password",value:r,onChange:j=>s(j.target.value),placeholder:"Enter password",className:"input",required:!0})]}),a&&n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-3 mb-6",children:n.jsx("p",{className:"text-red-600 text-sm",children:a})}),n.jsx("button",{type:"submit",disabled:b.isPending,className:"w-full btn btn-primary flex items-center justify-center gap-2",children:b.isPending?n.jsxs(n.Fragment,{children:[n.jsx(me,{className:"h-5 w-5 animate-spin"}),"Joining..."]}):f.require_donation?n.jsxs(n.Fragment,{children:[n.jsx(ks,{className:"h-5 w-5"}),"Pay $",f.donation_amount," & Join"]}):"Join League"})]})]})})]})}function Aee({displayName:e,email:t,avatarUrl:r,userId:s,onUpdateName:a,onUpdateAvatar:i,isUpdating:o,error:d,success:u}){const[h,p]=T.useState(!1),[f,x]=T.useState(""),[y,b]=T.useState(!1),[w,v]=T.useState(null),j=T.useRef(null),C=()=>{f.trim()&&(a(f.trim()),p(!1),x(""))},S=()=>{p(!1),x("")},k=()=>{x(e||""),p(!0)},R=()=>{var I;(I=j.current)==null||I.click()},E=async I=>{var O;const M=(O=I.target.files)==null?void 0:O[0];if(M){if(!M.type.startsWith("image/")){v("Please select an image file");return}if(M.size>2*1024*1024){v("Image must be less than 2MB");return}b(!0),v(null);try{const L=M.name.split(".").pop(),$=`${s}-${Date.now()}.${L}`,{error:B}=await K.storage.from("avatars").upload($,M,{upsert:!0});if(B){B.message.includes("Bucket not found")||B.message.includes("not found")?v("Avatar storage is being set up. Please try again later or contact support."):B.message.includes("exceeded")||B.message.includes("size")?v("Image is too large. Please choose a smaller file (max 2MB)."):B.message.includes("type")||B.message.includes("mime")?v("Invalid file type. Please upload a JPG, PNG, or GIF image."):v("Unable to upload avatar. Please try again."),console.error("Avatar upload error:",B);return}const{data:{publicUrl:D}}=K.storage.from("avatars").getPublicUrl($);i(D)}catch(L){console.error("Avatar upload error:",L),v("Something went wrong uploading your avatar. Please try again.")}finally{b(!1),j.current&&(j.current.value="")}}};return n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200 mb-6",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsxs("div",{className:"relative group",children:[n.jsx("div",{className:"w-16 h-16 rounded-full overflow-hidden bg-burgundy-500 flex items-center justify-center cursor-pointer",onClick:R,children:r?n.jsx("img",{src:r,alt:e||"Profile",className:"w-full h-full object-cover"}):n.jsx(Op,{className:"h-8 w-8 text-white"})}),n.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer",onClick:R,children:y?n.jsx(me,{className:"h-6 w-6 text-white animate-spin"}):n.jsx(rJ,{className:"h-6 w-6 text-white"})}),n.jsx("input",{ref:j,type:"file",accept:"image/*",onChange:E,className:"hidden",disabled:y})]}),n.jsxs("div",{className:"flex-1",children:[h?n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",value:f,onChange:I=>x(I.target.value),placeholder:"Enter display name",className:"input flex-1",autoFocus:!0}),n.jsx("button",{onClick:C,disabled:!f.trim()||o,className:"btn btn-primary",children:o?n.jsx(me,{className:"h-5 w-5 animate-spin"}):"Save"}),n.jsx("button",{onClick:S,className:"btn btn-secondary",disabled:o,children:"Cancel"})]}):n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800",children:e}),n.jsx("button",{onClick:k,className:"p-1 text-neutral-400 hover:text-burgundy-500 transition-colors",title:"Edit display name",children:n.jsx(zv,{className:"h-4 w-4"})})]}),n.jsx("p",{className:"text-neutral-500",children:t})]})]}),(d||w)&&n.jsxs("div",{className:"mb-4 flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-xl text-red-600 text-sm",children:[n.jsx(at,{className:"h-4 w-4 flex-shrink-0"}),d||w]}),u&&n.jsxs("div",{className:"mb-4 flex items-center gap-2 p-3 bg-green-50 border border-green-200 rounded-xl text-green-600 text-sm",children:[n.jsx(qt,{className:"h-4 w-4 flex-shrink-0"}),u]}),n.jsxs("div",{className:"flex items-center gap-3 p-3 bg-cream-50 rounded-xl border border-cream-200",children:[n.jsx(xr,{className:"h-5 w-5 text-burgundy-500"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-neutral-800",children:t}),n.jsx("p",{className:"text-neutral-400 text-sm",children:"Primary email"})]}),n.jsx(qt,{className:"h-5 w-5 text-green-500"})]})]})}const V4=[{value:"",label:"Not selected"},{value:"borneo",label:"Borneo (S1)"},{value:"australian-outback",label:"The Australian Outback (S2)"},{value:"africa",label:"Africa (S3)"},{value:"marquesas",label:"Marquesas (S4)"},{value:"thailand",label:"Thailand (S5)"},{value:"amazon",label:"The Amazon (S6)"},{value:"pearl-islands",label:"Pearl Islands (S7)"},{value:"all-stars",label:"All-Stars (S8)"},{value:"vanuatu",label:"Vanuatu (S9)"},{value:"palau",label:"Palau (S10)"},{value:"guatemala",label:"Guatemala (S11)"},{value:"panama",label:"Panama (S12)"},{value:"cook-islands",label:"Cook Islands (S13)"},{value:"fiji",label:"Fiji (S14)"},{value:"china",label:"China (S15)"},{value:"micronesia",label:"Micronesia (S16)"},{value:"gabon",label:"Gabon (S17)"},{value:"tocantins",label:"Tocantins (S18)"},{value:"samoa",label:"Samoa (S19)"},{value:"heroes-vs-villains",label:"Heroes vs. Villains (S20)"},{value:"nicaragua",label:"Nicaragua (S21)"},{value:"redemption-island",label:"Redemption Island (S22)"},{value:"south-pacific",label:"South Pacific (S23)"},{value:"one-world",label:"One World (S24)"},{value:"philippines",label:"Philippines (S25)"},{value:"caramoan",label:"Caramoan (S26)"},{value:"blood-vs-water",label:"Blood vs. Water (S27)"},{value:"cagayan",label:"Cagayan (S28)"},{value:"san-juan-del-sur",label:"San Juan del Sur (S29)"},{value:"worlds-apart",label:"Worlds Apart (S30)"},{value:"cambodia",label:"Cambodia (S31)"},{value:"kaoh-rong",label:"Kah Rng (S32)"},{value:"millennials-vs-gen-x",label:"Millennials vs. Gen X (S33)"},{value:"game-changers",label:"Game Changers (S34)"},{value:"heroes-healers-hustlers",label:"Heroes vs. Healers vs. Hustlers (S35)"},{value:"ghost-island",label:"Ghost Island (S36)"},{value:"david-vs-goliath",label:"David vs. Goliath (S37)"},{value:"edge-of-extinction",label:"Edge of Extinction (S38)"},{value:"island-of-the-idols",label:"Island of the Idols (S39)"},{value:"winners-at-war",label:"Winners at War (S40)"},{value:"41",label:"Survivor 41 (S41)"},{value:"42",label:"Survivor 42 (S42)"},{value:"43",label:"Survivor 43 (S43)"},{value:"44",label:"Survivor 44 (S44)"},{value:"45",label:"Survivor 45 (S45)"},{value:"46",label:"Survivor 46 (S46)"},{value:"47",label:"Survivor 47 (S47)"},{value:"48",label:"Survivor 48 (S48)"},{value:"49",label:"Survivor 49 (S49)"},{value:"50",label:"Survivor 50 (S50)"}];function Mee(e){if(!e)return"Not selected";const t=V4.find(r=>r.value===e);return(t==null?void 0:t.label)||e}function Oee({bio:e,hometown:t,favoriteCastaway:r,favoriteSeason:s,onUpdate:a,isUpdating:i}){const[o,d]=T.useState(null),[u,h]=T.useState(""),p=(b,w)=>{d(b),h(w||"")},f=()=>{if(o){const b={};o==="bio"&&(b.bio=u),o==="hometown"&&(b.hometown=u),o==="favoriteCastaway"&&(b.favorite_castaway=u),o==="favoriteSeason"&&(b.favorite_season=u),a(b),d(null),h("")}},x=()=>{d(null),h("")},y=(b,w,v,j,C,S)=>{const k=o===b;return n.jsxs("div",{className:"flex items-start gap-3 p-4 bg-cream-50 rounded-xl border border-cream-200",children:[n.jsx("div",{className:"mt-0.5",children:j}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm text-neutral-500 mb-1",children:w}),k?n.jsxs("div",{className:"space-y-2",children:[S?n.jsx("select",{value:u,onChange:R=>h(R.target.value),className:"w-full px-3 py-2 rounded-lg border border-cream-300 focus:border-burgundy-500 focus:ring-2 focus:ring-burgundy-500/20 outline-none transition-all bg-white text-sm",autoFocus:!0,children:V4.map(R=>n.jsx("option",{value:R.value,children:R.label},R.value))}):C?n.jsx("textarea",{value:u,onChange:R=>h(R.target.value),className:"w-full px-3 py-2 rounded-lg border border-cream-300 focus:border-burgundy-500 focus:ring-2 focus:ring-burgundy-500/20 outline-none transition-all resize-none text-sm",rows:3,autoFocus:!0}):n.jsx("input",{type:"text",value:u,onChange:R=>h(R.target.value),className:"w-full px-3 py-2 rounded-lg border border-cream-300 focus:border-burgundy-500 focus:ring-2 focus:ring-burgundy-500/20 outline-none transition-all text-sm",autoFocus:!0}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:f,disabled:i,className:"flex items-center gap-1 px-3 py-1.5 bg-burgundy-500 text-white text-sm rounded-lg hover:bg-burgundy-600 transition-colors disabled:opacity-50",children:[i?n.jsx(me,{className:"h-4 w-4 animate-spin"}):n.jsx(qt,{className:"h-4 w-4"}),"Save"]}),n.jsxs("button",{onClick:x,disabled:i,className:"flex items-center gap-1 px-3 py-1.5 bg-neutral-100 text-neutral-700 text-sm rounded-lg hover:bg-neutral-200 transition-colors disabled:opacity-50",children:[n.jsx(Sn,{className:"h-4 w-4"}),"Cancel"]})]})]}):n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsx("p",{className:`text-neutral-800 ${v?"":"italic text-neutral-400"}`,children:b==="favoriteSeason"?Mee(v):v||"Not set"}),n.jsx("button",{onClick:()=>p(b,v),className:"p-1 text-neutral-400 hover:text-burgundy-500 transition-colors flex-shrink-0",title:`Edit ${w.toLowerCase()}`,children:n.jsx(zv,{className:"h-4 w-4"})})]})]})]})};return n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200 mb-6",children:[n.jsx("h3",{className:"text-lg font-display font-bold text-neutral-800 mb-4",children:"About You"}),n.jsxs("div",{className:"space-y-3",children:[y("bio","Bio",e,n.jsx($u,{className:"h-5 w-5 text-burgundy-500"}),!0),y("hometown","Hometown",t,n.jsx(Bv,{className:"h-5 w-5 text-burgundy-500"})),y("favoriteCastaway","Favorite Castaway",r,n.jsx(Pp,{className:"h-5 w-5 text-burgundy-500"})),y("favoriteSeason","Favorite Season",s,n.jsx(kn,{className:"h-5 w-5 text-burgundy-500"}),!1,!0)]})]})}function Lee({onChangePassword:e,isChanging:t,error:r,success:s}){const[a,i]=T.useState(!1),[o,d]=T.useState(""),[u,h]=T.useState(""),[p,f]=T.useState(!1),[x,y]=T.useState(!1),[b,w]=T.useState(null),v=()=>{if(o.length<8){w("Password must be at least 8 characters");return}if(o!==u){w("Passwords do not match");return}w(null),e(o)},j=()=>{i(!1),d(""),h(""),w(null)};s&&a&&(i(!1),d(""),h(""));const C=b||r;return n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200 mb-6",children:[n.jsxs("h3",{className:"text-lg font-display font-bold text-neutral-800 mb-4 flex items-center gap-2",children:[n.jsx(Mn,{className:"h-5 w-5 text-burgundy-500"}),"Security"]}),s&&n.jsxs("div",{className:"mb-4 flex items-center gap-2 p-3 bg-green-50 border border-green-200 rounded-xl text-green-600 text-sm",children:[n.jsx(qt,{className:"h-4 w-4 flex-shrink-0"}),s]}),a?n.jsxs("div",{className:"space-y-4",children:[C&&n.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-xl text-red-600 text-sm",children:[n.jsx(at,{className:"h-4 w-4 flex-shrink-0"}),C]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"New Password"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:p?"text":"password",value:o,onChange:S=>d(S.target.value),placeholder:"Enter new password",className:"input w-full pr-10"}),n.jsx("button",{type:"button",onClick:()=>f(!p),className:"absolute right-3 top-1/2 -translate-y-1/2 text-neutral-400 hover:text-neutral-600",children:p?n.jsx(gc,{className:"h-5 w-5"}):n.jsx(Ei,{className:"h-5 w-5"})})]}),n.jsx("p",{className:"text-neutral-400 text-xs mt-1",children:"Must be at least 8 characters"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Confirm Password"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:x?"text":"password",value:u,onChange:S=>h(S.target.value),placeholder:"Confirm new password",className:"input w-full pr-10"}),n.jsx("button",{type:"button",onClick:()=>y(!x),className:"absolute right-3 top-1/2 -translate-y-1/2 text-neutral-400 hover:text-neutral-600",children:x?n.jsx(gc,{className:"h-5 w-5"}):n.jsx(Ei,{className:"h-5 w-5"})})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:v,disabled:!o||!u||t,className:"btn btn-primary flex-1",children:t?n.jsx(me,{className:"h-5 w-5 animate-spin"}):"Update Password"}),n.jsx("button",{onClick:j,disabled:t,className:"btn btn-secondary",children:"Cancel"})]})]}):n.jsxs("button",{onClick:()=>i(!0),className:"w-full flex items-center justify-between p-3 bg-cream-50 rounded-xl border border-cream-200 hover:bg-cream-100 transition-colors text-left",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-neutral-800 font-medium",children:"Change Password"}),n.jsx("p",{className:"text-neutral-400 text-sm",children:"Update your account password"})]}),n.jsx(Mn,{className:"h-5 w-5 text-neutral-400"})]})]})}function $ee({onLogout:e}){return n.jsxs("button",{onClick:e,className:"w-full flex items-center justify-center gap-2 bg-red-50 hover:bg-red-100 border border-red-200 text-red-600 font-bold py-3 rounded-xl transition-colors",children:[n.jsx(mQ,{className:"h-5 w-5"}),"Log Out"]})}function Dee(){const e=ns(),t=Et(),[r,s]=T.useState(null),[a,i]=T.useState(null),[o,d]=T.useState(null),[u,h]=T.useState(null),{data:p,isLoading:f,isError:x,error:y,refetch:b}=re({queryKey:["user-profile"],queryFn:async()=>{const{data:{user:C}}=await K.auth.getUser();if(!C)throw new Error("Not authenticated");const{data:S,error:k}=await K.from("users").select("*").eq("id",C.id).single();if(k)throw console.error("Profile query error:",k),k;return S},retry:2,retryDelay:1e3}),w=De({mutationFn:async C=>{const{data:{user:S}}=await K.auth.getUser();if(!S)throw new Error("Not authenticated");const{error:k}=await K.from("users").update(C).eq("id",S.id);if(k)throw k},onSuccess:()=>{t.invalidateQueries({queryKey:["user-profile"]}),s(null),i("Profile updated successfully!"),setTimeout(()=>i(null),3e3)},onError:C=>{s(C.message),i(null)}}),v=De({mutationFn:async C=>{const{error:S}=await K.auth.updateUser({password:C});if(S)throw S},onSuccess:()=>{d(null),h("Password changed successfully!"),setTimeout(()=>h(null),3e3)},onError:C=>{d(C.message),h(null)}}),j=async()=>{try{localStorage.removeItem("adminViewMode"),await K.auth.signOut(),e("/login")}catch(C){console.error("Logout failed:",C),window.location.href="/login"}};return f?n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx(me,{className:"h-8 w-8 text-burgundy-500 animate-spin"})}):x?n.jsx("div",{className:"max-w-2xl mx-auto",children:n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-6 text-center",children:[n.jsx(at,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),n.jsx("h2",{className:"text-xl font-display font-bold text-red-800 mb-2",children:"Failed to Load Profile"}),n.jsx("p",{className:"text-red-600 mb-4",children:y instanceof Error?y.message:"An unexpected error occurred. Please try again."}),n.jsxs("button",{onClick:()=>b(),className:"inline-flex items-center gap-2 px-4 py-2 bg-burgundy-600 text-white rounded-lg hover:bg-burgundy-700 transition-colors",children:[n.jsx(Xr,{className:"h-4 w-4"}),"Try Again"]})]})}):n.jsxs("div",{className:"max-w-2xl mx-auto",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h1",{className:"text-2xl font-display font-bold text-neutral-800",children:"Profile"}),n.jsx("p",{className:"text-neutral-500",children:"Manage your account settings"})]}),n.jsx(Aee,{displayName:(p==null?void 0:p.display_name)||"",email:(p==null?void 0:p.email)||"",avatarUrl:(p==null?void 0:p.avatar_url)||null,userId:(p==null?void 0:p.id)||"",onUpdateName:C=>w.mutate({display_name:C}),onUpdateAvatar:C=>w.mutate({avatar_url:C}),isUpdating:w.isPending,error:r,success:a}),n.jsx(Oee,{bio:(p==null?void 0:p.bio)||null,hometown:(p==null?void 0:p.hometown)||null,favoriteCastaway:(p==null?void 0:p.favorite_castaway)||null,favoriteSeason:(p==null?void 0:p.favorite_season)||null,onUpdate:C=>w.mutate(C),isUpdating:w.isPending}),n.jsx(Lee,{onChangePassword:C=>v.mutate(C),isChanging:v.isPending,error:o,success:u}),n.jsx($ee,{onLogout:j})]})}const Fee=[{value:"",label:"Select a season (optional)"},{value:"borneo",label:"Borneo (S1)"},{value:"australian-outback",label:"The Australian Outback (S2)"},{value:"africa",label:"Africa (S3)"},{value:"marquesas",label:"Marquesas (S4)"},{value:"thailand",label:"Thailand (S5)"},{value:"amazon",label:"The Amazon (S6)"},{value:"pearl-islands",label:"Pearl Islands (S7)"},{value:"all-stars",label:"All-Stars (S8)"},{value:"vanuatu",label:"Vanuatu (S9)"},{value:"palau",label:"Palau (S10)"},{value:"guatemala",label:"Guatemala (S11)"},{value:"panama",label:"Panama (S12)"},{value:"cook-islands",label:"Cook Islands (S13)"},{value:"fiji",label:"Fiji (S14)"},{value:"china",label:"China (S15)"},{value:"micronesia",label:"Micronesia (S16)"},{value:"gabon",label:"Gabon (S17)"},{value:"tocantins",label:"Tocantins (S18)"},{value:"samoa",label:"Samoa (S19)"},{value:"heroes-vs-villains",label:"Heroes vs. Villains (S20)"},{value:"nicaragua",label:"Nicaragua (S21)"},{value:"redemption-island",label:"Redemption Island (S22)"},{value:"south-pacific",label:"South Pacific (S23)"},{value:"one-world",label:"One World (S24)"},{value:"philippines",label:"Philippines (S25)"},{value:"caramoan",label:"Caramoan (S26)"},{value:"blood-vs-water",label:"Blood vs. Water (S27)"},{value:"cagayan",label:"Cagayan (S28)"},{value:"san-juan-del-sur",label:"San Juan del Sur (S29)"},{value:"worlds-apart",label:"Worlds Apart (S30)"},{value:"cambodia",label:"Cambodia (S31)"},{value:"kaoh-rong",label:"Kah Rng (S32)"},{value:"millennials-vs-gen-x",label:"Millennials vs. Gen X (S33)"},{value:"game-changers",label:"Game Changers (S34)"},{value:"heroes-healers-hustlers",label:"Heroes vs. Healers vs. Hustlers (S35)"},{value:"ghost-island",label:"Ghost Island (S36)"},{value:"david-vs-goliath",label:"David vs. Goliath (S37)"},{value:"edge-of-extinction",label:"Edge of Extinction (S38)"},{value:"island-of-the-idols",label:"Island of the Idols (S39)"},{value:"winners-at-war",label:"Winners at War (S40)"},{value:"41",label:"Survivor 41 (S41)"},{value:"42",label:"Survivor 42 (S42)"},{value:"43",label:"Survivor 43 (S43)"},{value:"44",label:"Survivor 44 (S44)"},{value:"45",label:"Survivor 45 (S45)"},{value:"46",label:"Survivor 46 (S46)"},{value:"47",label:"Survivor 47 (S47)"},{value:"48",label:"Survivor 48 (S48)"},{value:"49",label:"Survivor 49 (S49)"},{value:"50",label:"Survivor 50: In the Hands of the Fans (S50)"}];function Uee(){const e=ns(),[t]=pu(),r=Et(),{user:s,profile:a,refreshProfile:i,loading:o}=dt(),[d,u]=T.useState(1),[h,p]=T.useState(""),[f,x]=T.useState(""),[y,b]=T.useState(""),[w,v]=T.useState(""),[j,C]=T.useState(""),[S,k]=T.useState(""),[R,E]=T.useState(!0),[I,M]=T.useState(""),[O,L]=T.useState(!1),{data:P,isFetching:$}=re({queryKey:["season-50-castaways"],queryFn:async()=>{const{data:G}=await K.from("seasons").select("id").eq("number",50).single();if(!G)return[];const{data:ie,error:ae}=await K.from("castaways").select("id, name").eq("season_id",G.id).eq("status","active").order("name");if(ae)throw ae;return ie||[]},enabled:d>=3}),{data:B}=re({queryKey:["profile-setup-fallback",s==null?void 0:s.id],queryFn:async()=>{if(!(s!=null&&s.id))return null;const{data:G,error:ie}=await K.from("users").select("display_name, email, profile_setup_complete").eq("id",s.id).maybeSingle();if(ie&&ie.code!=="PGRST116"&&(ie==null?void 0:ie.status)!==406)throw ie;return G},enabled:!!s&&!a,staleTime:6e4}),D=T.useMemo(()=>a??B,[a,B]),se=({className:G=""})=>n.jsx("div",{className:`animate-pulse bg-cream-200 rounded-lg ${G}`}),X=()=>n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b from-cream-100 to-cream-200 px-4 py-12",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-float max-w-md w-full p-8",children:[n.jsx("div",{className:"flex justify-center mb-6",children:n.jsx(se,{className:"h-16 w-32 rounded-2xl"})}),n.jsx(se,{className:"h-8 w-40 mx-auto mb-2"}),n.jsx(se,{className:"h-4 w-56 mx-auto mb-6"}),n.jsx("div",{className:"flex justify-center gap-2 mb-6",children:[1,2,3,4].map(G=>n.jsx(se,{className:"h-3 w-3 rounded-full"},G))}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(se,{className:"h-4 w-24 mb-2"}),n.jsx(se,{className:"h-11 w-full"})]}),n.jsx(se,{className:"h-10 w-full"}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx(se,{className:"h-10 w-full"}),n.jsx(se,{className:"h-10 w-full"})]})]})]})}),ee=De({mutationFn:async G=>{const ie={display_name:G.display_name,notification_email:G.notification_email,profile_setup_complete:!0};G.hometown&&(ie.hometown=G.hometown),G.favorite_castaway&&(ie.favorite_castaway=G.favorite_castaway),G.bio&&(ie.bio=G.bio),G.favorite_season&&(ie.favorite_season=G.favorite_season),G.season_50_winner_prediction&&(ie.season_50_winner_prediction=G.season_50_winner_prediction),console.log("Updating profile with data:",ie);const{data:ae}=await K.from("users").select("id, role").eq("id",s.id).maybeSingle(),fe={id:s.id,email:s.email||"",display_name:G.display_name,notification_email:G.notification_email,...ie};ae!=null&&ae.role&&(fe.role=ae.role);const{error:je}=await K.from("users").upsert(fe,{onConflict:"id"});if(je)throw console.error("Profile update error:",je),new Error(je.message||"Update failed")},onSuccess:async()=>{await i(),r.invalidateQueries({queryKey:["profile",s==null?void 0:s.id]});const G=t.get("redirect")||"/dashboard";e(G==="/profile/setup"?"/dashboard":G,{replace:!0})}}),F=()=>{if(d===1){if(!h.trim()){M("Please enter a display name");return}if(h.trim().length<2){M("Display name must be at least 2 characters");return}M(""),u(2)}else d===2?(M(""),u(3)):d===3&&(M(""),u(4))},Q=()=>{d===2?u(1):d===3?u(2):d===4&&u(3)},J=async G=>{G.preventDefault(),M("");try{localStorage.setItem("storage-test","test"),localStorage.removeItem("storage-test")}catch{M('Your browser is blocking local storage. Please disable "Incognito" mode or allow cookies/storage for this site.');return}L(!0);try{const{data:{session:ie}}=await K.auth.getSession();if(!ie)throw new Error("Your session has expired. Please log in again.");await ee.mutateAsync({display_name:h.trim(),hometown:f.trim()||void 0,favorite_castaway:y.trim()||void 0,bio:w.trim()||void 0,favorite_season:j||void 0,season_50_winner_prediction:S||void 0,notification_email:R})}catch(ie){console.error("Submit error:",ie);const ae=(ie==null?void 0:ie.message)||(typeof ie=="string"?ie:"Unknown error");ae.toLowerCase().includes("jwt")||ae.toLowerCase().includes("session")||ae.toLowerCase().includes("auth")?M("Your login session has expired. Please refresh the page to log in again."):ae.includes("check your connection")?M(`Connection issue: ${ae}. If this persists, try logging out and back in.`):M(ae),L(!1)}};T.useEffect(()=>{const G=window.location.hash.includes("access_token");!o&&!s&&!G&&e("/login?redirect=/profile/setup",{replace:!0})},[o,s,e]);const U=window.location.hash.includes("access_token");if(o||!s||U)return X();if(D!=null&&D.profile_setup_complete){const G=t.get("redirect")||"/dashboard";return e(G==="/profile/setup"?"/dashboard":G,{replace:!0}),null}return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b from-cream-100 to-cream-200 px-4 py-12",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-float max-w-md w-full p-8 animate-slide-up",children:[n.jsx("div",{className:"flex justify-center mb-6",children:n.jsx("img",{src:"/logo.png",alt:"RGFL",className:"h-16 w-auto"})}),n.jsxs("div",{className:"flex justify-center gap-2 mb-6",children:[n.jsx("div",{className:`w-3 h-3 rounded-full ${d>=1?"bg-burgundy-500":"bg-cream-300"}`}),n.jsx("div",{className:`w-3 h-3 rounded-full ${d>=2?"bg-burgundy-500":"bg-cream-300"}`}),n.jsx("div",{className:`w-3 h-3 rounded-full ${d>=3?"bg-burgundy-500":"bg-cream-300"}`}),n.jsx("div",{className:`w-3 h-3 rounded-full ${d>=4?"bg-burgundy-500":"bg-cream-300"}`})]}),d===1&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("div",{className:"w-16 h-16 bg-burgundy-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(Op,{className:"h-8 w-8 text-burgundy-600"})}),n.jsx("h1",{className:"font-display text-3xl text-neutral-800 mb-2",children:"Welcome!"}),n.jsx("p",{className:"text-neutral-500",children:"What is your name? (First Name, Last Initial i.e. Jeff P.)"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"displayName",className:"block text-sm font-medium text-neutral-700 mb-2",children:"Display Name"}),n.jsx("input",{id:"displayName",type:"text",value:h,onChange:G=>p(G.target.value),placeholder:"Jeff P.",className:"w-full px-4 py-3 rounded-xl border border-cream-300 focus:border-burgundy-500 focus:ring-2 focus:ring-burgundy-500/20 outline-none transition-all",autoFocus:!0}),n.jsx("p",{className:"text-xs text-neutral-500 mt-1",children:"This is how other players will see you"})]}),I&&n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-3 text-sm text-red-700",children:I}),n.jsx("button",{type:"button",onClick:F,disabled:!h.trim(),className:"w-full bg-burgundy-500 hover:bg-burgundy-600 text-white font-semibold py-3 rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]}),d===2&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("div",{className:"w-16 h-16 bg-burgundy-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(Bv,{className:"h-8 w-8 text-burgundy-600"})}),n.jsx("h1",{className:"font-display text-3xl text-neutral-800 mb-2",children:"Tell Us About You"}),n.jsx("p",{className:"text-neutral-500",children:"Where are you from?"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"hometown",className:"block text-sm font-medium text-neutral-700 mb-2",children:"Hometown (optional)"}),n.jsx("input",{id:"hometown",type:"text",value:f,onChange:G=>x(G.target.value),placeholder:"e.g., Los Angeles, CA",className:"w-full px-4 py-3 rounded-xl border border-cream-300 focus:border-burgundy-500 focus:ring-2 focus:ring-burgundy-500/20 outline-none transition-all",autoFocus:!0})]}),I&&n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-3 text-sm text-red-700",children:I}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{type:"button",onClick:Q,className:"flex-1 bg-cream-100 hover:bg-cream-200 text-neutral-700 font-semibold py-3 rounded-xl transition-all",children:"Back"}),n.jsx("button",{type:"button",onClick:F,className:"flex-1 bg-burgundy-500 hover:bg-burgundy-600 text-white font-semibold py-3 rounded-xl transition-all",children:"Next"})]})]})]}),d===3&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("div",{className:"w-16 h-16 bg-burgundy-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(kn,{className:"h-8 w-8 text-burgundy-600"})}),n.jsx("h1",{className:"font-display text-3xl text-neutral-800 mb-2",children:"Your Favorites"}),n.jsx("p",{className:"text-neutral-500",children:"Who's your favorite castaway?"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"favoriteCastaway",className:"block text-sm font-medium text-neutral-700 mb-2",children:"Favorite Castaway (optional)"}),n.jsx("input",{id:"favoriteCastaway",type:"text",value:y,onChange:G=>b(G.target.value),placeholder:"e.g., Parvati Shallow",className:"w-full px-4 py-3 rounded-xl border border-cream-300 focus:border-burgundy-500 focus:ring-2 focus:ring-burgundy-500/20 outline-none transition-all",autoFocus:!0})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"favoriteSeason",className:"block text-sm font-medium text-neutral-700 mb-2",children:"Favorite Survivor Season (optional)"}),n.jsx("select",{id:"favoriteSeason",value:j,onChange:G=>C(G.target.value),className:"w-full px-4 py-3 rounded-xl border border-cream-300 focus:border-burgundy-500 focus:ring-2 focus:ring-burgundy-500/20 outline-none transition-all bg-white",children:Fee.map(G=>n.jsx("option",{value:G.value,children:G.label},G.value))})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"season50Winner",className:"block text-sm font-medium text-neutral-700 mb-2",children:" Who Will Win Season 50? (optional)"}),$?n.jsxs("div",{className:"space-y-2",children:[n.jsx(se,{className:"h-11 w-full"}),n.jsx(se,{className:"h-3 w-48"})]}):n.jsxs(n.Fragment,{children:[n.jsxs("select",{id:"season50Winner",value:S,onChange:G=>k(G.target.value),className:"w-full px-4 py-3 rounded-xl border border-cream-300 focus:border-burgundy-500 focus:ring-2 focus:ring-burgundy-500/20 outline-none transition-all bg-white",children:[n.jsx("option",{value:"",children:"Make your prediction (optional)"}),P==null?void 0:P.map(G=>n.jsx("option",{value:G.id,children:G.name},G.id))]}),n.jsx("p",{className:"text-xs text-neutral-500 mt-1",children:"Just for fun! Lock in your prediction before the season starts."})]})]}),I&&n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-3 text-sm text-red-700",children:I}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{type:"button",onClick:Q,className:"flex-1 bg-cream-100 hover:bg-cream-200 text-neutral-700 font-semibold py-3 rounded-xl transition-all",children:"Back"}),n.jsx("button",{type:"button",onClick:F,className:"flex-1 bg-burgundy-500 hover:bg-burgundy-600 text-white font-semibold py-3 rounded-xl transition-all",children:"Next"})]})]})]}),d===4&&n.jsxs("form",{onSubmit:J,children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("div",{className:"w-16 h-16 bg-burgundy-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx($u,{className:"h-8 w-8 text-burgundy-600"})}),n.jsx("h1",{className:"font-display text-3xl text-neutral-800 mb-2",children:"Almost Done!"}),n.jsx("p",{className:"text-neutral-500",children:"Tell us about yourself"})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"bio",className:"block text-sm font-medium text-neutral-700 mb-2",children:"Bio (optional)"}),n.jsx("textarea",{id:"bio",value:w,onChange:G=>v(G.target.value),placeholder:"Tell us a bit about yourself...",rows:4,className:"w-full px-4 py-3 rounded-xl border border-cream-300 focus:border-burgundy-500 focus:ring-2 focus:ring-burgundy-500/20 outline-none transition-all resize-none"})]}),n.jsxs("div",{className:"flex items-center justify-between cursor-pointer p-4 bg-cream-50 rounded-xl border border-cream-200 hover:bg-cream-100 transition-colors",onClick:()=>E(!R),children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(mi,{className:"h-5 w-5 text-neutral-400"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-neutral-800 font-medium",children:"Email Notifications"}),n.jsx("p",{className:"text-neutral-400 text-sm",children:"Get reminders and results"})]})]}),n.jsx("div",{className:`w-12 h-7 rounded-full p-1 transition-colors ${R?"bg-burgundy-500":"bg-neutral-300"}`,children:n.jsx("div",{className:`w-5 h-5 rounded-full bg-white shadow-md transform transition-transform ${R?"translate-x-5":"translate-x-0"}`})})]}),I&&n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-3 text-sm text-red-700",children:I}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{type:"button",onClick:Q,className:"flex-1 bg-cream-100 hover:bg-cream-200 text-neutral-700 font-semibold py-3 rounded-xl transition-all",children:"Back"}),n.jsx("button",{type:"submit",disabled:O,className:"flex-1 bg-burgundy-500 hover:bg-burgundy-600 text-white font-semibold py-3 rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:O?n.jsxs(n.Fragment,{children:[n.jsx(me,{className:"h-5 w-5 animate-spin"}),"Setting up..."]}):"Let's Play!"})]})]})]})]})})}function qee({leagueId:e}){const{user:t}=dt(),r=Et(),[s,a]=T.useState(""),i=T.useRef(null),o=T.useRef(null),{data:d,isLoading:u}=re({queryKey:["league-messages",e],queryFn:async()=>{const{data:b,error:w}=await K.from("league_messages").select(`
          id,
          user_id,
          content,
          created_at,
          user:users (
            display_name,
            avatar_url
          )
        `).eq("league_id",e).order("created_at",{ascending:!0}).limit(100);if(w)throw w;return b},refetchInterval:1e4}),h=De({mutationFn:async b=>{const{error:w}=await K.from("league_messages").insert({league_id:e,user_id:t.id,content:b});if(w)throw w},onSuccess:()=>{var b;a(""),r.invalidateQueries({queryKey:["league-messages",e]}),(b=o.current)==null||b.focus()}});T.useEffect(()=>{const b=K.channel(`league-chat-${e}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"league_messages",filter:`league_id=eq.${e}`},()=>{r.invalidateQueries({queryKey:["league-messages",e]})}).subscribe();return()=>{K.removeChannel(b)}},[e,r]),T.useEffect(()=>{var b;(b=i.current)==null||b.scrollIntoView({behavior:"smooth"})},[d]);const p=b=>{b.preventDefault(),s.trim()&&!h.isPending&&h.mutate(s.trim())},f=b=>new Date(b).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),x=b=>{const w=new Date(b),v=new Date,j=new Date(v);return j.setDate(j.getDate()-1),w.toDateString()===v.toDateString()?"Today":w.toDateString()===j.toDateString()?"Yesterday":w.toLocaleDateString("en-US",{month:"short",day:"numeric"})},y=(d==null?void 0:d.reduce((b,w)=>{const v=new Date(w.created_at).toDateString();return b[v]||(b[v]=[]),b[v].push(w),b},{}))||{};return u?n.jsx("div",{className:"flex items-center justify-center h-96",children:n.jsx(me,{className:"h-8 w-8 text-burgundy-500 animate-spin"})}):n.jsxs("div",{className:"flex flex-col h-[500px] bg-white rounded-2xl shadow-card border border-cream-200 overflow-hidden",children:[n.jsx("div",{className:"px-6 py-4 border-b border-cream-200 bg-cream-50",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Bs,{className:"h-5 w-5 text-burgundy-500"}),n.jsx("h3",{className:"font-semibold text-neutral-800",children:"League Chat"}),n.jsxs("span",{className:"text-sm text-neutral-400",children:[(d==null?void 0:d.length)||0," messages"]})]})}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[Object.keys(y).length===0?n.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[n.jsx(Bs,{className:"h-12 w-12 text-neutral-300 mb-3"}),n.jsx("p",{className:"text-neutral-500 font-medium",children:"No messages yet"}),n.jsx("p",{className:"text-sm text-neutral-400",children:"Be the first to say something!"})]}):Object.entries(y).map(([b,w])=>n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-4 my-4",children:[n.jsx("div",{className:"flex-1 h-px bg-cream-200"}),n.jsx("span",{className:"text-xs text-neutral-400 font-medium",children:x(w[0].created_at)}),n.jsx("div",{className:"flex-1 h-px bg-cream-200"})]}),w.map((v,j)=>{var k,R,E,I;const C=v.user_id===(t==null?void 0:t.id),S=j===0||w[j-1].user_id!==v.user_id;return n.jsxs("div",{className:`flex gap-3 ${C?"flex-row-reverse":""} ${S?"mt-4":"mt-1"}`,children:[n.jsx("div",{className:`w-8 flex-shrink-0 ${S?"":"invisible"}`,children:S&&n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-white text-sm font-semibold ${C?"bg-burgundy-500":"bg-neutral-400"}`,children:((E=(R=(k=v.user)==null?void 0:k.display_name)==null?void 0:R.charAt(0))==null?void 0:E.toUpperCase())||"?"})}),n.jsxs("div",{className:`max-w-[70%] ${C?"items-end":"items-start"}`,children:[S&&!C&&n.jsx("p",{className:"text-xs text-neutral-500 mb-1 ml-1",children:((I=v.user)==null?void 0:I.display_name)||"Unknown"}),n.jsx("div",{className:`px-4 py-2 rounded-2xl ${C?"bg-burgundy-500 text-white rounded-br-md":"bg-cream-100 text-neutral-800 rounded-bl-md"}`,children:n.jsx("p",{className:"text-sm whitespace-pre-wrap break-words",children:v.content})}),n.jsx("p",{className:`text-xs text-neutral-400 mt-1 ${C?"text-right mr-1":"ml-1"}`,children:f(v.created_at)})]})]},v.id)})]},b)),n.jsx("div",{ref:i})]}),n.jsx("form",{onSubmit:p,className:"p-4 border-t border-cream-200 bg-cream-50",children:n.jsxs("div",{className:"flex gap-3",children:[n.jsx("input",{ref:o,type:"text",value:s,onChange:b=>a(b.target.value),placeholder:"Type a message...",className:"flex-1 px-4 py-2 rounded-full border border-cream-300 bg-white focus:outline-none focus:ring-2 focus:ring-burgundy-500 focus:border-transparent",disabled:h.isPending}),n.jsx("button",{type:"submit",disabled:!s.trim()||h.isPending,className:"w-10 h-10 rounded-full bg-burgundy-500 text-white flex items-center justify-center hover:bg-burgundy-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:h.isPending?n.jsx(me,{className:"h-5 w-5 animate-spin"}):n.jsx(Fu,{className:"h-5 w-5"})})]})})]})}function Bee({league:e,members:t,myMembership:r,canManageLeague:s,copied:a,onCopyInvite:i}){var o,d;return n.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated p-6 border border-cream-200 mb-6",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-display font-bold text-neutral-800",children:e.name}),n.jsxs("div",{className:"flex items-center gap-2 mt-1 text-neutral-500",children:[n.jsx(tr,{className:"h-4 w-4 text-burgundy-400","aria-hidden":"true"}),n.jsx("span",{className:"text-sm",children:((o=e.commissioner)==null?void 0:o.display_name)||"Unknown Commissioner"}),n.jsx("span",{className:"text-neutral-300","aria-hidden":"true",children:""}),n.jsxs("span",{className:"text-sm",children:["Season ",((d=e.seasons)==null?void 0:d.number)||"N/A"]})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:i,className:"p-2 bg-cream-50 rounded-xl hover:bg-cream-100 transition-all border border-cream-200",title:"Copy invite link","aria-label":a?"Invite link copied":"Copy invite link",children:a?n.jsx(qt,{className:"h-5 w-5 text-green-500","aria-hidden":"true"}):n.jsx(Mp,{className:"h-5 w-5 text-neutral-600","aria-hidden":"true"})}),s&&n.jsx(z,{to:`/leagues/${e.id}/settings`,className:"p-2 bg-cream-50 rounded-xl hover:bg-cream-100 transition-all border border-cream-200",title:"League Settings","aria-label":"League Settings",children:n.jsx(Uu,{className:"h-5 w-5 text-neutral-600","aria-hidden":"true"})})]})]}),n.jsxs("div",{className:"grid grid-cols-4 gap-4 pt-4 border-t border-cream-100",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-2xl font-bold text-neutral-800",children:(t==null?void 0:t.length)||0}),n.jsx("p",{className:"text-xs text-neutral-500 uppercase tracking-wide",children:"Players"})]}),n.jsxs("div",{className:"text-center",children:[n.jsxs("p",{className:"text-2xl font-bold text-burgundy-600",children:["#",(r==null?void 0:r.rank)||"-"]}),n.jsx("p",{className:"text-xs text-neutral-500 uppercase tracking-wide",children:"Your Rank"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-2xl font-bold text-neutral-800",children:(r==null?void 0:r.total_points)||0}),n.jsx("p",{className:"text-xs text-neutral-500 uppercase tracking-wide",children:"Your Points"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-2xl font-bold text-green-600 capitalize",children:e.status}),n.jsx("p",{className:"text-xs text-neutral-500 uppercase tracking-wide",children:"Status"})]})]}),e.require_donation&&n.jsxs("div",{className:"mt-4 flex items-center gap-3 p-3 bg-gradient-to-r from-burgundy-50 to-cream-50 rounded-xl border border-burgundy-100",children:[n.jsx(Pp,{className:"h-5 w-5 text-burgundy-500 flex-shrink-0"}),n.jsxs("div",{children:[n.jsxs("p",{className:"text-burgundy-700 font-medium text-sm",children:["$",e.donation_amount," Charity Entry"]}),n.jsx("p",{className:"text-burgundy-500 text-xs",children:"All proceeds donated to charity chosen by winner"})]})]})]})}function Hee({activeTab:e,onTabChange:t}){const r=[{id:"overview",label:"Overview",icon:n.jsx(Uv,{className:"h-4 w-4"})},{id:"players",label:"Players",icon:n.jsx($e,{className:"h-4 w-4"})},{id:"standings",label:"Standings",icon:n.jsx(Ke,{className:"h-4 w-4"})}];return n.jsx("div",{className:"flex gap-2 mb-6 overflow-x-auto pb-2",children:r.map(s=>n.jsxs("button",{onClick:()=>t(s.id),className:`px-4 py-2 rounded-xl text-sm font-medium whitespace-nowrap transition-all flex items-center gap-2 ${e===s.id?"bg-burgundy-500 text-white shadow-md":"bg-white text-neutral-600 border border-cream-200 hover:border-burgundy-200"}`,children:[s.icon,s.label]},s.id))})}function Wee({leagueId:e,roster:t,league:r}){return n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-5 border border-cream-200",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h2",{className:"text-lg font-display font-bold text-neutral-800 flex items-center gap-2",children:[n.jsx(gr,{className:"h-5 w-5 text-burgundy-500"}),"My Team"]}),n.jsxs(z,{to:`/leagues/${e}/team`,className:"text-burgundy-500 hover:text-burgundy-600 text-sm flex items-center gap-1",children:["View Details ",n.jsx(hr,{className:"h-4 w-4"})]})]}),t&&t.length>0?n.jsx("div",{className:"grid grid-cols-2 gap-4",children:t.map(s=>{var a,i,o,d,u,h,p,f,x,y;return n.jsx("div",{className:`relative rounded-xl overflow-hidden ${((a=s.castaways)==null?void 0:a.status)==="eliminated"?"opacity-60":""}`,children:n.jsx("div",{className:`p-4 ${((i=s.castaways)==null?void 0:i.status)==="eliminated"?"bg-neutral-100 border border-neutral-200":"bg-gradient-to-br from-cream-50 to-cream-100 border border-cream-200"}`,children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("img",{src:Hn(((o=s.castaways)==null?void 0:o.name)||"Unknown",(d=s.castaways)==null?void 0:d.photo_url),alt:((u=s.castaways)==null?void 0:u.name)||"Castaway",className:`w-12 h-12 rounded-full object-cover border-2 ${((h=s.castaways)==null?void 0:h.status)==="eliminated"?"border-neutral-300 grayscale":"border-burgundy-200"}`}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-neutral-800",children:(p=s.castaways)==null?void 0:p.name}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(bn,{className:`h-3 w-3 ${((f=s.castaways)==null?void 0:f.status)==="eliminated"?"text-neutral-400":"text-orange-500"}`}),n.jsx("span",{className:`text-xs capitalize ${((x=s.castaways)==null?void 0:x.status)==="eliminated"?"text-neutral-500":"text-green-600"}`,children:(y=s.castaways)==null?void 0:y.status})]})]})]})})},s.id)})}):n.jsxs("div",{className:"text-center py-8 bg-cream-50 rounded-xl border border-cream-200",children:[n.jsx($e,{className:"h-10 w-10 text-neutral-300 mx-auto mb-3"}),n.jsx("p",{className:"text-neutral-500",children:"Draft hasn't started yet"}),r.draft_status==="pending"&&n.jsx(z,{to:`/leagues/${e}/draft`,className:"text-burgundy-500 hover:text-burgundy-600 text-sm mt-2 inline-block",children:"Submit Draft Rankings "})]})]})}function zee({leagueId:e}){return n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs(z,{to:`/leagues/${e}/pick`,className:"bg-burgundy-500 hover:bg-burgundy-600 text-white rounded-2xl p-5 shadow-elevated transition-all flex items-center gap-4",children:[n.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:n.jsx(gr,{className:"h-6 w-6"})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Make Pick"}),n.jsx("p",{className:"text-burgundy-200 text-sm",children:"Choose this week's castaway"})]})]}),n.jsxs(z,{to:`/leagues/${e}/draft`,className:"bg-white hover:bg-cream-50 text-neutral-800 rounded-2xl p-5 shadow-card border border-cream-200 transition-all flex items-center gap-4",children:[n.jsx("div",{className:"w-12 h-12 bg-cream-100 rounded-xl flex items-center justify-center",children:n.jsx($e,{className:"h-6 w-6 text-burgundy-500"})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Draft Rankings"}),n.jsx("p",{className:"text-neutral-500 text-sm",children:"Rank your castaways"})]})]})]})}function Gee({episode:e}){return n.jsx("div",{className:"bg-gradient-to-r from-burgundy-500 to-burgundy-600 rounded-2xl p-5 text-white shadow-elevated",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Mt,{className:"h-8 w-8 text-burgundy-200"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-burgundy-100 text-sm",children:"Next Episode"}),n.jsxs("p",{className:"font-semibold text-lg",children:["Episode ",e.number]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-burgundy-100 text-sm",children:"Airs"}),n.jsx("p",{className:"font-semibold",children:new Date(e.air_date).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})})]})]})})}function Kee(e){return e===1?{bg:"bg-yellow-100",text:"text-yellow-700",icon:n.jsx(tr,{className:"h-4 w-4 text-yellow-500"})}:e===2?{bg:"bg-gray-100",text:"text-gray-600",icon:n.jsx(fr,{className:"h-4 w-4 text-gray-400"})}:e===3?{bg:"bg-orange-100",text:"text-orange-600",icon:n.jsx(fr,{className:"h-4 w-4 text-orange-400"})}:{bg:"bg-cream-50",text:"text-neutral-600",icon:null}}function Vee({members:e,currentUserId:t,onViewFullStandings:r}){const a=(e?[...e].sort((i,o)=>(o.total_points||0)-(i.total_points||0)):[]).slice(0,3);return n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-5 border border-cream-200",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h2",{className:"text-lg font-display font-bold text-neutral-800 flex items-center gap-2",children:[n.jsx(Ke,{className:"h-5 w-5 text-burgundy-500"}),"Top Performers"]}),e&&e.length>0&&n.jsxs("button",{onClick:r,className:"text-burgundy-500 hover:text-burgundy-600 text-sm flex items-center gap-1",children:["Full Standings ",n.jsx(hr,{className:"h-4 w-4"})]})]}),(!e||e.length===0)&&n.jsxs("div",{className:"text-center py-6",children:[n.jsx($e,{className:"h-10 w-10 text-neutral-300 mx-auto mb-2"}),n.jsx("p",{className:"text-neutral-500 text-sm",children:"No standings yet"})]}),a.length>0&&n.jsx("div",{className:"space-y-2",children:a.map((i,o)=>{var h;const d=Kee(o+1),u=i.user_id===t;return n.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl transition-colors ${u?"bg-burgundy-50 border border-burgundy-200":`${d.bg} border border-transparent`}`,children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${d.bg}`,children:d.icon||n.jsx("span",{className:`font-bold ${d.text}`,children:o+1})}),n.jsx("div",{className:"flex-1",children:n.jsxs("p",{className:"font-medium text-neutral-800",children:[((h=i.users)==null?void 0:h.display_name)||"Unknown",u&&n.jsx("span",{className:"ml-2 text-xs text-burgundy-500",children:"(You)"})]})}),n.jsx("p",{className:"font-bold text-neutral-800",children:i.total_points||0})]},i.id)})})]})}function Yee({members:e,rostersByUser:t,currentUserId:r,commissionerId:s}){return n.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 overflow-hidden",children:[n.jsx("div",{className:"p-5 border-b border-cream-100",children:n.jsxs("h2",{className:"text-lg font-display font-bold text-neutral-800",children:["League Players (",(e==null?void 0:e.length)||0,")"]})}),n.jsx("div",{className:"divide-y divide-cream-100",children:e==null?void 0:e.map((a,i)=>{var p,f,x,y;const o=t==null?void 0:t[a.user_id],d=a.user_id===r,u=((p=a.users)==null?void 0:p.display_name)||((f=a.user)==null?void 0:f.display_name)||"Unknown Player",h=((x=a.users)==null?void 0:x.avatar_url)||null;return n.jsx("div",{className:`p-4 ${d?"bg-burgundy-50":"hover:bg-cream-50"} transition-colors`,children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-10 h-10 rounded-full bg-cream-100 flex items-center justify-center overflow-hidden",children:h?n.jsx("img",{src:h,alt:u,className:"w-full h-full object-cover"}):n.jsx(Op,{className:"h-5 w-5 text-neutral-400"})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("p",{className:"font-semibold text-neutral-800",children:[u,d&&n.jsx("span",{className:"ml-2 text-xs text-burgundy-500",children:"(You)"}),a.user_id===s&&n.jsx("span",{className:"ml-2 text-xs bg-burgundy-100 text-burgundy-600 px-2 py-0.5 rounded-full",children:"Commissioner"})]}),n.jsx("div",{className:"flex items-center gap-2 mt-2",children:((y=o==null?void 0:o.castaways)==null?void 0:y.map(b=>n.jsxs("div",{className:`flex items-center gap-2 px-2 py-1 rounded-lg text-xs ${b.status==="eliminated"?"bg-neutral-100 text-neutral-500":"bg-cream-100 text-neutral-700"}`,children:[n.jsx(bn,{className:`h-3 w-3 ${b.status==="eliminated"?"text-neutral-400":"text-orange-500"}`}),b.name]},b.id)))||n.jsx("span",{className:"text-neutral-400 text-xs",children:"No castaways drafted"})})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-xl font-bold text-neutral-800",children:a.total_points||0}),n.jsx("p",{className:"text-xs text-neutral-400",children:"points"})]})]})},a.id)})})]})}function Jee(e){return e===1?{bg:"bg-yellow-100",text:"text-yellow-700",icon:n.jsx(tr,{className:"h-4 w-4 text-yellow-500"})}:e===2?{bg:"bg-gray-100",text:"text-gray-600",icon:n.jsx(fr,{className:"h-4 w-4 text-gray-400"})}:e===3?{bg:"bg-orange-100",text:"text-orange-600",icon:n.jsx(fr,{className:"h-4 w-4 text-orange-400"})}:{bg:"bg-cream-50",text:"text-neutral-600",icon:null}}function Qee(e){const t=new Map,r=[...e].sort((i,o)=>(o.total_points||0)-(i.total_points||0));let s=1,a=null;return r.forEach((i,o)=>{const d=i.total_points||0;(a===null||d!==a)&&(s=o+1),t.set(i.id,s),a=d}),t}function Xee({members:e,currentUserId:t}){var u,h,p;const r=e?[...e].sort((f,x)=>(x.total_points||0)-(f.total_points||0)):[],s=e?Qee(e):new Map;if(!e||e.length===0)return n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-12 border border-cream-200 text-center",children:[n.jsx($e,{className:"h-12 w-12 text-neutral-300 mx-auto mb-4"}),n.jsx("h3",{className:"font-semibold text-neutral-700 mb-2",children:"No Members Yet"}),n.jsx("p",{className:"text-neutral-500",children:"Standings will appear once players join the league."})]});const a=r[0],i=r[1],o=r[2],d=r.length>=3&&a&&i&&o;return n.jsxs("div",{className:"space-y-6",children:[d&&n.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[n.jsxs("div",{className:"bg-gradient-to-b from-gray-100 to-gray-50 rounded-2xl p-5 border-2 border-gray-200 text-center mt-6",children:[n.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full mx-auto mb-2 flex items-center justify-center",children:n.jsx(fr,{className:"h-5 w-5 text-gray-500"})}),n.jsx("p",{className:"font-semibold text-neutral-800 truncate text-sm",children:((u=i.users)==null?void 0:u.display_name)||"Unknown"}),n.jsx("p",{className:"text-2xl font-display text-gray-600 mt-1",children:i.total_points||0}),n.jsx("p",{className:"text-xs text-neutral-400",children:"pts"})]}),n.jsxs("div",{className:"bg-gradient-to-b from-yellow-100 to-amber-50 rounded-2xl p-5 border-2 border-yellow-300 text-center shadow-elevated",children:[n.jsx("div",{className:"w-12 h-12 bg-yellow-300 rounded-full mx-auto mb-2 flex items-center justify-center",children:n.jsx(tr,{className:"h-6 w-6 text-yellow-700"})}),n.jsx("p",{className:"font-bold text-neutral-800 truncate",children:((h=a.users)==null?void 0:h.display_name)||"Unknown"}),n.jsx("p",{className:"text-3xl font-display text-yellow-700 mt-1",children:a.total_points||0}),n.jsx("p",{className:"text-xs text-neutral-500",children:"pts"})]}),n.jsxs("div",{className:"bg-gradient-to-b from-orange-100 to-amber-50 rounded-2xl p-5 border-2 border-orange-200 text-center mt-6",children:[n.jsx("div",{className:"w-10 h-10 bg-orange-200 rounded-full mx-auto mb-2 flex items-center justify-center",children:n.jsx(fr,{className:"h-5 w-5 text-orange-500"})}),n.jsx("p",{className:"font-semibold text-neutral-800 truncate text-sm",children:((p=o.users)==null?void 0:p.display_name)||"Unknown"}),n.jsx("p",{className:"text-2xl font-display text-orange-600 mt-1",children:o.total_points||0}),n.jsx("p",{className:"text-xs text-neutral-400",children:"pts"})]})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 overflow-hidden",children:[n.jsx("div",{className:"p-5 border-b border-cream-100",children:n.jsx("h2",{className:"text-lg font-display font-bold text-neutral-800",children:"Full Standings"})}),n.jsx("div",{className:"divide-y divide-cream-100",children:r.map(f=>{var w;const x=s.get(f.id)||1,y=Jee(x),b=f.user_id===t;return n.jsxs("div",{className:`flex items-center gap-4 p-4 transition-colors ${b?"bg-burgundy-50 border-l-4 border-burgundy-500":"hover:bg-cream-50"}`,children:[n.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${y.bg}`,children:y.icon||n.jsx("span",{className:`font-bold ${y.text}`,children:x})}),n.jsx("div",{className:"flex-1",children:n.jsxs("p",{className:`font-semibold ${b?"text-burgundy-700":"text-neutral-800"}`,children:[((w=f.users)==null?void 0:w.display_name)||"Unknown",b&&n.jsx("span",{className:"ml-2 text-xs text-burgundy-500 font-normal",children:"(You)"})]})}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-2xl font-display text-neutral-800",children:f.total_points||0}),n.jsx("p",{className:"text-xs text-neutral-400",children:"points"})]})]},f.id)})})]})]})}function Zee({league:e,canManageLeague:t,copied:r,onCopyInvite:s}){return t?n.jsxs("div",{className:"mt-6 bg-white rounded-2xl shadow-card p-5 border border-cream-200",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-neutral-500 text-sm",children:"League Invite Code"}),n.jsx("p",{className:"font-mono text-2xl font-bold text-burgundy-600 tracking-wider",children:e.code})]}),n.jsx("button",{onClick:s,className:"btn btn-secondary flex items-center gap-2",children:r?n.jsxs(n.Fragment,{children:[n.jsx(qt,{className:"h-5 w-5 text-green-500"}),"Copied!"]}):n.jsxs(n.Fragment,{children:[n.jsx(Ip,{className:"h-5 w-5"}),"Copy Invite Link"]})})]}),n.jsxs("p",{className:"text-neutral-400 text-xs mt-2",children:["Share this link:"," ",n.jsxs("code",{className:"select-all bg-cream-50 px-1 py-0.5 rounded text-neutral-600",children:[window.location.origin,"/join/",e.code]})]})]}):n.jsx("div",{className:"mt-6 bg-white rounded-2xl shadow-card p-5 border border-cream-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-neutral-500 text-sm",children:"Invite Friends"}),n.jsx("p",{className:"text-neutral-700 font-medium",children:"Share the invite link to grow your league!"})]}),n.jsx("button",{onClick:s,className:"btn btn-primary flex items-center gap-2",children:r?n.jsxs(n.Fragment,{children:[n.jsx(qt,{className:"h-5 w-5"}),"Copied!"]}):n.jsxs(n.Fragment,{children:[n.jsx(Mp,{className:"h-5 w-5"}),"Share Link"]})})]})})}function ete(){const{id:e}=On(),{user:t,loading:r}=dt(),[s,a]=pu(),[i,o]=T.useState("overview"),[d,u]=T.useState(!1),[h,p]=T.useState(!1),[f,x]=T.useState(!1),y=Et(),{data:b,isLoading:w,error:v}=Gv(e),{data:j,isLoading:C,refetch:S}=hee(e),{data:k}=mee(e),{data:R}=Kv(e,t==null?void 0:t.id),{data:E}=dee(t==null?void 0:t.id),{data:I}=uee(b==null?void 0:b.season_id);T.useEffect(()=>{if(s.get("joined")==="true"){p(!0),x(!0),s.delete("joined"),a(s,{replace:!0});let F=0;const Q=10,J=setInterval(async()=>{F++,await y.invalidateQueries({queryKey:["league-members",e]}),await S(),F>=Q&&(clearInterval(J),x(!1))},1e3),U=setTimeout(()=>p(!1),5e3);return()=>{clearInterval(J),clearTimeout(U)}}},[s,a,e,y,S]);const M=async()=>{if(!(b!=null&&b.code))return;const F=`${window.location.origin}/join/${b.code}`;try{if(navigator.clipboard&&window.isSecureContext)await navigator.clipboard.writeText(F);else{const Q=document.createElement("textarea");Q.value=F,Q.style.position="fixed",Q.style.left="-9999px",document.body.appendChild(Q),Q.select(),document.execCommand("copy"),document.body.removeChild(Q)}u(!0),setTimeout(()=>u(!1),2e3)}catch(Q){console.error("Failed to copy:",Q),alert(`Copy this link: ${F}`)}};if(!r&&!t&&!window.location.hash.includes("access_token"))return n.jsx(wi,{to:`/login?redirect=/leagues/${e}`,replace:!0});if(w||r)return n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center",children:n.jsx(me,{className:"h-8 w-8 text-burgundy-500 animate-spin"})});if(v)return n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200",children:[n.jsx(Se,{}),n.jsx("div",{className:"max-w-md mx-auto p-4 pt-16",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-8 text-center border border-red-200",children:[n.jsx(at,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),n.jsx("h2",{className:"text-xl font-bold text-neutral-800 mb-2",children:"Error Loading League"}),n.jsx("p",{className:"text-neutral-600 mb-4",children:v instanceof Error?v.message:"Failed to load league data"}),n.jsx(z,{to:"/dashboard",className:"btn btn-primary",children:"Back to Dashboard"})]})})]});if(!b)return n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200",children:[n.jsx(Se,{}),n.jsx("div",{className:"max-w-md mx-auto p-4 pt-16",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-8 text-center",children:[n.jsx(at,{className:"h-12 w-12 text-neutral-400 mx-auto mb-4"}),n.jsx("h2",{className:"text-xl font-bold text-neutral-800 mb-2",children:"League Not Found"}),n.jsx("p",{className:"text-neutral-600 mb-4",children:"This league may have been deleted or the link is incorrect."}),n.jsx(z,{to:"/dashboard",className:"btn btn-primary",children:"Back to Dashboard"})]})})]});const O=j==null?void 0:j.find(F=>F.user_id===(t==null?void 0:t.id)),L=(b==null?void 0:b.commissioner_id)===(t==null?void 0:t.id),P=(E==null?void 0:E.role)==="admin",$=L||P,B=(b==null?void 0:b.is_global)===!0,D=!!O;if(b.is_public&&b.require_donation&&!D&&!L&&!P&&!f)return n.jsx(wi,{to:`/join/${b.code}`,replace:!0});const X=b.is_public||B||D||L||P;if(!X&&f)return n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200",children:[n.jsx(Se,{}),n.jsx("div",{className:"max-w-md mx-auto p-4 pt-16",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-8 border border-cream-200 text-center",children:[n.jsx(me,{className:"h-8 w-8 text-burgundy-500 animate-spin mx-auto mb-4"}),n.jsx("h1",{className:"text-xl font-display font-bold text-neutral-800 mb-2",children:"Processing Payment..."}),n.jsx("p",{className:"text-neutral-500",children:"Please wait while we confirm your membership."})]})})]});if(!X)return n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200",children:[n.jsx(Se,{}),n.jsx("div",{className:"max-w-md mx-auto p-4 pt-16",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-8 border border-cream-200 text-center",children:[n.jsx("div",{className:"w-16 h-16 bg-burgundy-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(Mn,{className:"h-8 w-8 text-burgundy-500"})}),n.jsx("h1",{className:"text-2xl font-display font-bold text-neutral-800 mb-2",children:"Private League"}),n.jsx("p",{className:"text-neutral-500 mb-6",children:"This is a private league. You need to be a member to view its content."}),b.password_hash?n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm text-neutral-500 justify-center",children:[n.jsx(at,{className:"h-4 w-4"}),n.jsx("span",{children:"This league requires a password to join"})]}),n.jsx(z,{to:`/join/${b.code}`,className:"btn btn-primary w-full",children:"Join with Invite Code"})]}):n.jsx(z,{to:`/join/${b.code}`,className:"btn btn-primary w-full",children:"Request to Join"}),n.jsx(z,{to:"/dashboard",className:"block mt-4 text-burgundy-500 hover:text-burgundy-600 text-sm",children:" Back to Dashboard"})]})})]});const ee=k==null?void 0:k.reduce((F,Q)=>{const J=Q.user_id;return F[J]||(F[J]={user:Q.users,castaways:[]}),F[J].castaways.push(Q.castaways),F},{});return n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200",children:[n.jsx(Se,{}),n.jsxs("div",{className:"max-w-4xl mx-auto p-4 pb-24",children:[h&&n.jsxs("div",{className:"mb-4 bg-green-50 border border-green-200 rounded-xl p-4 flex items-center gap-3 animate-slide-down",children:[n.jsx(tt,{className:"h-5 w-5 text-green-600 flex-shrink-0"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-semibold text-green-800",children:"Successfully joined the league!"}),n.jsx("p",{className:"text-sm text-green-700",children:"Your payment was processed and you're now a member."})]}),n.jsx("button",{onClick:()=>p(!1),className:"text-green-600 hover:text-green-800 text-sm font-medium",children:"Dismiss"})]}),n.jsx(Bee,{league:b,members:j,myMembership:O,canManageLeague:$,copied:d,onCopyInvite:M}),n.jsx(Hee,{activeTab:i,onTabChange:o}),i==="overview"&&n.jsxs("div",{className:"space-y-6",children:[n.jsx(Wee,{leagueId:e,roster:R,league:b}),n.jsx(zee,{leagueId:e}),I&&n.jsx(Gee,{episode:I}),n.jsx(Vee,{members:j,currentUserId:t==null?void 0:t.id,onViewFullStandings:()=>o("standings")}),e&&n.jsx(qee,{leagueId:e})]}),i==="players"&&n.jsx(Yee,{members:j,rostersByUser:ee,currentUserId:t==null?void 0:t.id,commissionerId:b.commissioner_id}),i==="standings"&&n.jsx(Xee,{members:j,currentUserId:t==null?void 0:t.id}),n.jsx(Zee,{league:b,canManageLeague:$,copied:d,onCopyInvite:M})]})]})}function tte(){const{leagueId:e}=On(),{data:t}=re({queryKey:["current-user"],queryFn:async()=>{const{data:{user:d}}=await K.auth.getUser();return d}}),{data:r}=re({queryKey:["league",e],queryFn:async()=>{if(!e)throw new Error("No league ID");const{data:d,error:u}=await K.from("leagues").select("*, seasons(*)").eq("id",e).single();if(u)throw u;return d},enabled:!!e}),{data:s}=re({queryKey:["my-roster",e],queryFn:async()=>{if(!e||!t)throw new Error("Missing data");const{data:d,error:u}=await K.from("rosters").select("*, castaways(*)").eq("league_id",e).eq("user_id",t.id).is("dropped_at",null).order("draft_round",{ascending:!0});if(u)throw u;return d||[]},enabled:!!e&&!!t}),{data:a}=re({queryKey:["pick-history",e],queryFn:async()=>{if(!e||!t)throw new Error("Missing data");const{data:d,error:u}=await K.from("weekly_picks").select("*, episodes(*), castaways(*)").eq("league_id",e).eq("user_id",t.id).order("episodes(number)",{ascending:!1});if(u)throw u;return d||[]},enabled:!!e&&!!t}),{data:i}=re({queryKey:["my-membership",e],queryFn:async()=>{if(!e||!t)throw new Error("Missing data");const{data:d,error:u}=await K.from("league_members").select("*").eq("league_id",e).eq("user_id",t.id).single();if(u)throw u;return d},enabled:!!e&&!!t}),o=(a==null?void 0:a.reduce((d,u)=>d+(u.points_earned||0),0))||0;return n.jsxs(n.Fragment,{children:[n.jsx(Se,{}),n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 p-4 pb-24",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx(z,{to:`/leagues/${e}`,className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:n.jsx(st,{className:"h-5 w-5 text-neutral-600"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-display font-bold text-neutral-800",children:"My Team"}),n.jsx("p",{className:"text-neutral-500",children:r==null?void 0:r.name})]})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-6",children:[n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-4 border border-cream-200 text-center",children:[n.jsx(Ke,{className:"h-5 w-5 text-burgundy-500 mx-auto mb-1"}),n.jsx("p",{className:"text-xl font-bold text-neutral-800",children:(i==null?void 0:i.rank)||"-"}),n.jsx("p",{className:"text-neutral-500 text-xs",children:"Rank"})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-4 border border-cream-200 text-center",children:[n.jsx($e,{className:"h-5 w-5 text-burgundy-500 mx-auto mb-1"}),n.jsx("p",{className:"text-xl font-bold text-neutral-800",children:(s==null?void 0:s.length)||0}),n.jsx("p",{className:"text-neutral-500 text-xs",children:"Castaways"})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-4 border border-cream-200 text-center",children:[n.jsx(er,{className:"h-5 w-5 text-burgundy-500 mx-auto mb-1"}),n.jsx("p",{className:"text-xl font-bold text-neutral-800",children:o}),n.jsx("p",{className:"text-neutral-500 text-xs",children:"Points"})]})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-4 border border-cream-200 mb-6",children:[n.jsx("h2",{className:"text-lg font-display font-bold text-neutral-800 mb-4",children:"Current Roster"}),s&&s.length>0?n.jsx("div",{className:"space-y-3",children:s.map(d=>{var u,h,p,f,x,y,b,w,v;return n.jsxs("div",{className:`flex items-center gap-4 p-4 rounded-xl ${((u=d.castaways)==null?void 0:u.status)==="eliminated"?"bg-red-50 border border-red-200":"bg-cream-50 border border-cream-200"}`,children:[n.jsx("img",{src:Hn(((h=d.castaways)==null?void 0:h.name)||"Unknown",(p=d.castaways)==null?void 0:p.photo_url),alt:((f=d.castaways)==null?void 0:f.name)||"Castaway",className:"w-12 h-12 rounded-full object-cover"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-neutral-800 font-medium",children:(x=d.castaways)==null?void 0:x.name}),n.jsxs("p",{className:"text-neutral-500 text-sm",children:["Round ",d.draft_round]})]}),n.jsx("div",{className:"text-right",children:n.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${((y=d.castaways)==null?void 0:y.status)==="eliminated"?"bg-red-100 text-red-700":((b=d.castaways)==null?void 0:b.status)==="winner"?"bg-amber-100 text-amber-700":"bg-green-100 text-green-700"}`,children:(v=(w=d.castaways)==null?void 0:w.status)==null?void 0:v.toUpperCase()})})]},d.id)})}):n.jsx("p",{className:"text-neutral-500 text-center py-8",children:"Draft hasn't started yet. Check back after the draft!"})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-4 border border-cream-200",children:[n.jsx("h2",{className:"text-lg font-display font-bold text-neutral-800 mb-4",children:"Pick History"}),a&&a.length>0?n.jsx("div",{className:"space-y-2",children:a.map(d=>{var u,h,p;return n.jsxs("div",{className:"flex items-center gap-3 p-3 bg-cream-50 rounded-xl border border-cream-200",children:[n.jsx("div",{className:"w-8 h-8 bg-burgundy-500 rounded-full flex items-center justify-center",children:n.jsx("span",{className:"text-white text-sm font-bold",children:(u=d.episodes)==null?void 0:u.number})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-neutral-800 font-medium",children:((h=d.castaways)==null?void 0:h.name)||"No pick"}),n.jsx("p",{className:"text-neutral-500 text-sm capitalize",children:(p=d.status)==null?void 0:p.replace("_"," ")})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[d.points_earned>0?n.jsx(Pr,{className:"h-4 w-4 text-green-500"}):d.points_earned<0?n.jsx(Lc,{className:"h-4 w-4 text-red-500"}):n.jsx(Ap,{className:"h-4 w-4 text-neutral-400"}),n.jsxs("span",{className:`font-bold ${d.points_earned>0?"text-green-600":d.points_earned<0?"text-red-600":"text-neutral-500"}`,children:[d.points_earned>0?"+":"",d.points_earned||0]})]})]},d.id)})}):n.jsx("p",{className:"text-neutral-500 text-center py-8",children:"No picks yet. Season starts soon!"})]})]})]})}const nte={Challenges:{color:"text-blue-600",bgColor:"bg-blue-50",icon:n.jsx(gr,{className:"h-3 w-3"})},Strategy:{color:"text-purple-600",bgColor:"bg-purple-50",icon:n.jsx(Zr,{className:"h-3 w-3"})},Social:{color:"text-pink-600",bgColor:"bg-pink-50",icon:n.jsx($e,{className:"h-3 w-3"})},Survival:{color:"text-green-600",bgColor:"bg-green-50",icon:n.jsx(_s,{className:"h-3 w-3"})},Tribal:{color:"text-orange-600",bgColor:"bg-orange-50",icon:n.jsx(bn,{className:"h-3 w-3"})},Bonus:{color:"text-amber-600",bgColor:"bg-amber-50",icon:n.jsx(kn,{className:"h-3 w-3"})}};function rte(){var b;const{leagueId:e,episodeId:t}=On(),[r,s]=T.useState(null),{data:a,isLoading:i}=re({queryKey:["episode",t],queryFn:async()=>{if(!t)throw new Error("No episode ID");const{data:w,error:v}=await K.from("episodes").select("*, seasons(*)").eq("id",t).single();if(v)throw v;return w},enabled:!!t}),{data:o}=re({queryKey:["league",e],queryFn:async()=>{if(!e)throw new Error("No league ID");const{data:w,error:v}=await K.from("leagues").select("*").eq("id",e).single();if(v)throw v;return w},enabled:!!e}),{data:d}=re({queryKey:["episode-scores",t],queryFn:async()=>{if(!t)throw new Error("No episode ID");const{data:w,error:v}=await K.from("episode_scores").select("*, castaways(*), scoring_rules(*)").eq("episode_id",t).order("castaways(name)");if(v)throw v;return w||[]},enabled:!!t}),{data:u}=re({queryKey:["episode-picks",e,t],queryFn:async()=>{if(!e||!t)throw new Error("Missing data");const{data:w,error:v}=await K.from("weekly_picks").select("*, users(display_name), castaways(*)").eq("league_id",e).eq("episode_id",t).order("points_earned",{ascending:!1});if(v)throw v;return w||[]},enabled:!!e&&!!t}),{data:h}=re({queryKey:["current-user"],queryFn:async()=>{const{data:{user:w}}=await K.auth.getUser();return w}}),{data:p}=re({queryKey:["eliminated-castaways",t],queryFn:async()=>{if(!t)return[];const{data:w,error:v}=await K.from("castaways").select("id, name, photo_url").eq("eliminated_episode_id",t);if(v)throw v;return w||[]},enabled:!!t}),f=(d==null?void 0:d.reduce((w,v)=>{const j=v.castaway_id;return w[j]||(w[j]={castaway:v.castaways,scores:[],total:0}),w[j].scores.push(v),w[j].total+=v.points,w},{}))||{},x=u==null?void 0:u.find(w=>w.user_id===(h==null?void 0:h.id)),y=x&&(p==null?void 0:p.some(w=>w.id===x.castaway_id));return i?n.jsxs(n.Fragment,{children:[n.jsx(Se,{}),n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center",children:n.jsx(me,{className:"h-8 w-8 text-burgundy-500 animate-spin"})})]}):n.jsxs(n.Fragment,{children:[n.jsx(Se,{}),n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 p-4 pb-24",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx(z,{to:`/leagues/${e}`,className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:n.jsx(st,{className:"h-5 w-5 text-neutral-600"})}),n.jsxs("div",{children:[n.jsxs("h1",{className:"text-2xl font-display font-bold text-neutral-800",children:["Episode ",a==null?void 0:a.number," Results"]}),n.jsx("p",{className:"text-neutral-500",children:(a==null?void 0:a.title)||(o==null?void 0:o.name)})]})]}),p&&p.length>0&&n.jsx("div",{className:`rounded-xl p-4 mb-6 ${y?"bg-red-50 border-2 border-red-300":"bg-orange-50 border border-orange-200"}`,children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:`p-2 rounded-full ${y?"bg-red-100":"bg-orange-100"}`,children:n.jsx(Nn,{className:`h-5 w-5 ${y?"text-red-600":"text-orange-600"}`})}),n.jsxs("div",{children:[n.jsx("p",{className:`font-bold ${y?"text-red-800":"text-orange-800"}`,children:p.length===1?"Castaway Eliminated":`${p.length} Castaways Eliminated`}),n.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:p.map(w=>n.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-full ${(x==null?void 0:x.castaway_id)===w.id?"bg-red-100 border border-red-300":"bg-white border border-orange-200"}`,children:[n.jsx("img",{src:Hn(w.name,w.photo_url),alt:w.name,className:"w-6 h-6 rounded-full object-cover grayscale"}),n.jsxs("span",{className:`text-sm font-medium ${(x==null?void 0:x.castaway_id)===w.id?"text-red-700":"text-neutral-700"}`,children:[w.name,(x==null?void 0:x.castaway_id)===w.id&&n.jsx("span",{className:"ml-1 text-xs text-red-500",children:"(Your Pick)"})]})]},w.id))}),y&&n.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center gap-1",children:[n.jsx(kt,{className:"h-4 w-4"}),"This castaway is no longer available for future picks"]})]})]})}),x&&n.jsx("div",{className:`rounded-xl p-4 mb-6 ${(x.points_earned||0)>0?"bg-green-50 border border-green-200":(x.points_earned||0)<0?"bg-red-50 border border-red-200":"bg-white border border-cream-200"}`,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-neutral-500 text-sm",children:"Your Pick"}),n.jsx("p",{className:"text-neutral-800 font-bold text-lg",children:(b=x.castaways)==null?void 0:b.name})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[(x.points_earned||0)>0?n.jsx(Pr,{className:"h-5 w-5 text-green-500"}):(x.points_earned||0)<0?n.jsx(Lc,{className:"h-5 w-5 text-red-500"}):n.jsx(Ap,{className:"h-5 w-5 text-neutral-400"}),n.jsxs("span",{className:`text-2xl font-bold ${(x.points_earned||0)>0?"text-green-600":(x.points_earned||0)<0?"text-red-600":"text-neutral-800"}`,children:[(x.points_earned||0)>0?"+":"",x.points_earned||0]})]}),n.jsx("p",{className:"text-neutral-500 text-sm",children:"points"})]})]})}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-4 border border-cream-200 mb-6",children:[n.jsxs("h2",{className:"text-lg font-display font-bold text-neutral-800 mb-4 flex items-center gap-2",children:[n.jsx(Ke,{className:"h-5 w-5 text-amber-500"}),"Episode Standings"]}),u&&u.length>0?n.jsx("div",{className:"space-y-2",children:u.map((w,v)=>{var j,C;return n.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl ${w.user_id===(h==null?void 0:h.id)?"bg-burgundy-50 border border-burgundy-200":"bg-cream-50 border border-cream-200"}`,children:[n.jsx("div",{className:"w-8 h-8 flex items-center justify-center",children:v===0?n.jsx(Ke,{className:"h-5 w-5 text-amber-500"}):n.jsx("span",{className:"text-neutral-500 font-bold",children:v+1})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-neutral-800 font-medium",children:(j=w.users)==null?void 0:j.display_name}),n.jsx("p",{className:"text-neutral-500 text-sm",children:(C=w.castaways)==null?void 0:C.name})]}),n.jsxs("span",{className:`font-bold ${(w.points_earned||0)>0?"text-green-600":(w.points_earned||0)<0?"text-red-600":"text-neutral-500"}`,children:[(w.points_earned||0)>0?"+":"",w.points_earned||0]})]},w.id)})}):n.jsx("p",{className:"text-neutral-500 text-center py-4",children:"No picks for this episode yet."})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-4 border border-cream-200",children:[n.jsxs("h2",{className:"text-lg font-display font-bold text-neutral-800 mb-4 flex items-center gap-2",children:[n.jsx($e,{className:"h-5 w-5 text-burgundy-500"}),"Scoring Breakdown"]}),Object.keys(f).length>0?n.jsx("div",{className:"space-y-3",children:Object.values(f).sort((w,v)=>v.total-w.total).map(w=>{const v=r===w.castaway.id,j=(x==null?void 0:x.castaway_id)===w.castaway.id,C=w.scores.reduce((S,k)=>{var E;const R=((E=k.scoring_rules)==null?void 0:E.category)||"Other";return S[R]||(S[R]=[]),S[R].push(k),S},{});return n.jsxs("div",{className:`rounded-xl border transition-all ${j?"bg-burgundy-50 border-burgundy-200":"bg-cream-50 border-cream-200"}`,children:[n.jsxs("button",{onClick:()=>s(v?null:w.castaway.id),className:"w-full p-4 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("img",{src:Hn(w.castaway.name,w.castaway.photo_url),alt:w.castaway.name,className:"w-10 h-10 rounded-full object-cover border-2 border-white shadow-sm"}),n.jsxs("div",{className:"text-left",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("p",{className:"text-neutral-800 font-medium",children:w.castaway.name}),j&&n.jsx("span",{className:"text-xs bg-burgundy-100 text-burgundy-700 px-2 py-0.5 rounded-full",children:"Your Pick"})]}),n.jsxs("p",{className:"text-neutral-500 text-sm",children:[w.scores.length," scoring event",w.scores.length!==1?"s":""]})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("span",{className:`text-xl font-bold ${w.total>0?"text-green-600":w.total<0?"text-red-600":"text-neutral-800"}`,children:[w.total>0?"+":"",w.total]}),v?n.jsx(zs,{className:"h-5 w-5 text-neutral-400"}):n.jsx(un,{className:"h-5 w-5 text-neutral-400"})]})]}),v&&n.jsx("div",{className:"px-4 pb-4 space-y-4",children:Object.entries(C).map(([S,k])=>{const R=nte[S]||{color:"text-neutral-600",bgColor:"bg-neutral-50",icon:null},E=k.reduce((I,M)=>I+M.points,0);return n.jsxs("div",{children:[n.jsxs("div",{className:`flex items-center gap-2 mb-2 ${R.color}`,children:[R.icon,n.jsx("span",{className:"text-sm font-medium",children:S}),n.jsxs("span",{className:`text-xs px-1.5 py-0.5 rounded ${R.bgColor}`,children:[E>0?"+":"",E]})]}),n.jsx("div",{className:"space-y-1 pl-5",children:k.map(I=>{var M;return n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-neutral-700",children:(M=I.scoring_rules)==null?void 0:M.name}),I.quantity>1&&n.jsxs("span",{className:"text-xs bg-cream-200 text-neutral-600 px-1.5 py-0.5 rounded",children:["",I.quantity]})]}),n.jsxs("span",{className:`font-medium ${I.points>=0?"text-green-600":"text-red-600"}`,children:[I.points>=0?"+":"",I.points]})]},I.id)})})]},S)})})]},w.castaway.id)})}):n.jsx("p",{className:"text-neutral-500 text-center py-8",children:a!=null&&a.is_scored?"No scores recorded for this episode.":"Scoring not yet finalized. Check back after Friday at noon!"})]})]})]})}function ste({weekNumber:e,onReveal:t,autoReveal:r=!1}){const[s,a]=T.useState(!1);return T.useEffect(()=>{if(r&&!s){const i=setTimeout(()=>{a(!0),t()},1500);return()=>clearTimeout(i)}},[r,s,t]),n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center p-4",children:n.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-elevated p-8 text-center animate-fade-in",children:[n.jsx("div",{className:"w-20 h-20 mx-auto mb-6 bg-amber-100 rounded-full flex items-center justify-center",children:n.jsx(kt,{className:"w-10 h-10 text-amber-600"})}),n.jsxs("h1",{className:"text-2xl font-display font-bold text-neutral-800 mb-3",children:["Week ",e," Results"]}),n.jsxs("div",{className:"bg-amber-50 border-2 border-amber-200 rounded-xl p-4 mb-6",children:[n.jsx("p",{className:"text-amber-900 font-semibold mb-2",children:"Spoiler Warning"}),n.jsx("p",{className:"text-amber-800 text-sm leading-relaxed",children:"This page contains episode spoilers including eliminations, immunity results, and other gameplay events. Click below when you're ready to view your scores and standings."})]}),n.jsxs("label",{className:"flex items-center justify-center gap-3 mb-6 cursor-pointer group",children:[n.jsx("input",{type:"checkbox",checked:s,onChange:i=>a(i.target.checked),className:"w-5 h-5 rounded border-2 border-neutral-300 text-burgundy-600 focus:ring-2 focus:ring-burgundy-500 focus:ring-offset-2 cursor-pointer"}),n.jsx("span",{className:"text-neutral-700 group-hover:text-neutral-900 transition-colors",children:"I understand and want to see results"})]}),n.jsx("button",{onClick:t,disabled:!s,className:`w-full btn ${s?"btn-primary":"bg-neutral-200 text-neutral-400 cursor-not-allowed"} flex items-center justify-center gap-2 transition-all`,children:s?n.jsxs(n.Fragment,{children:[n.jsx(Ei,{className:"w-5 h-5"}),"Show Results"]}):n.jsxs(n.Fragment,{children:[n.jsx(gc,{className:"w-5 h-5"}),"Confirm to Continue"]})}),n.jsx("p",{className:"text-neutral-500 text-sm mt-4",children:"Not ready yet? You can always come back later."}),r&&n.jsx("p",{className:"text-burgundy-600 text-sm mt-2 animate-pulse",children:"Auto-revealing in a moment..."})]})})}const ate={Challenges:{color:"text-blue-600",bgColor:"bg-blue-50",icon:n.jsx(gr,{className:"h-3 w-3"})},Strategy:{color:"text-purple-600",bgColor:"bg-purple-50",icon:n.jsx(Zr,{className:"h-3 w-3"})},Social:{color:"text-pink-600",bgColor:"bg-pink-50",icon:n.jsx($e,{className:"h-3 w-3"})},Survival:{color:"text-green-600",bgColor:"bg-green-50",icon:n.jsx(_s,{className:"h-3 w-3"})},Tribal:{color:"text-orange-600",bgColor:"bg-orange-50",icon:n.jsx(bn,{className:"h-3 w-3"})},Bonus:{color:"text-amber-600",bgColor:"bg-amber-50",icon:n.jsx(kn,{className:"h-3 w-3"})}};function ite(){const{weekNumber:e}=On(),[t]=pu(),r=t.get("token"),[s,a]=T.useState(!1),[i,o]=T.useState(!1),[d,u]=T.useState(null);T.useEffect(()=>{r&&h(r)},[r]);async function h(v){try{(await(await fetch(`http://localhost:3001/api/results/verify-token?token=${v}`)).json()).valid&&(o(!0),setTimeout(()=>a(!0),2e3))}catch(j){console.error("Token verification failed:",j)}}const{data:p}=re({queryKey:["current-user"],queryFn:async()=>{const{data:{user:v}}=await K.auth.getUser();return v}}),{data:f,isLoading:x}=re({queryKey:["episode-by-week",e],queryFn:async()=>{if(!e)return null;const v=parseInt(e.replace("week-","")),{data:j,error:C}=await K.from("episodes").select("*, seasons(*)").eq("week_number",v).single();if(C)throw C;return j},enabled:!!e&&s}),{data:y}=re({queryKey:["episode-scores",f==null?void 0:f.id],queryFn:async()=>{if(!(f!=null&&f.id))return[];const{data:v,error:j}=await K.from("episode_scores").select("*, castaways(*), scoring_rules(*)").eq("episode_id",f.id).order("castaways(name)");if(j)throw j;return v||[]},enabled:!!(f!=null&&f.id)&&s}),{data:b}=re({queryKey:["eliminated-castaways",f==null?void 0:f.id],queryFn:async()=>{if(!(f!=null&&f.id))return[];const{data:v,error:j}=await K.from("castaways").select("id, name, photo_url").eq("eliminated_episode_id",f.id);if(j)throw j;return v||[]},enabled:!!(f!=null&&f.id)&&s}),w=(y==null?void 0:y.reduce((v,j)=>{const C=j.castaway_id;return v[C]||(v[C]={castaway:j.castaways,scores:[],total:0}),v[C].scores.push(j),v[C].total+=j.points,v},{}))||{};return s?x?n.jsxs(n.Fragment,{children:[n.jsx(Se,{}),n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx(me,{className:"h-8 w-8 text-burgundy-500 animate-spin mx-auto mb-4"}),n.jsx("p",{className:"text-neutral-600",children:"Loading results..."})]})})]}):n.jsxs(n.Fragment,{children:[n.jsx(Se,{}),n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 p-4 pb-24",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx(z,{to:"/dashboard",className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:n.jsx(st,{className:"h-5 w-5 text-neutral-600"})}),n.jsxs("div",{children:[n.jsxs("h1",{className:"text-2xl font-display font-bold text-neutral-800",children:["Week ",e==null?void 0:e.replace("week-","")," Results"]}),n.jsx("p",{className:"text-neutral-500",children:(f==null?void 0:f.title)||"Episode Results"})]})]}),b&&b.length>0&&n.jsx("div",{className:"rounded-xl p-4 mb-6 bg-orange-50 border border-orange-200",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"p-2 rounded-full bg-orange-100",children:n.jsx(Nn,{className:"h-5 w-5 text-orange-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-bold text-orange-800",children:b.length===1?"Castaway Eliminated":`${b.length} Castaways Eliminated`}),n.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:b.map(v=>n.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-full bg-white border border-orange-200",children:[n.jsx("img",{src:Hn(v.name,v.photo_url),alt:v.name,className:"w-6 h-6 rounded-full object-cover grayscale"}),n.jsx("span",{className:"text-sm font-medium text-neutral-700",children:v.name})]},v.id))})]})]})}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-4 border border-cream-200",children:[n.jsxs("h2",{className:"text-lg font-display font-bold text-neutral-800 mb-4 flex items-center gap-2",children:[n.jsx($e,{className:"h-5 w-5 text-burgundy-500"}),"Scoring Breakdown"]}),Object.keys(w).length>0?n.jsx("div",{className:"space-y-3",children:Object.values(w).sort((v,j)=>j.total-v.total).map(v=>{const j=d===v.castaway.id,C=v.scores.reduce((S,k)=>{var E;const R=((E=k.scoring_rules)==null?void 0:E.category)||"Other";return S[R]||(S[R]=[]),S[R].push(k),S},{});return n.jsxs("div",{className:"rounded-xl border bg-cream-50 border-cream-200",children:[n.jsxs("button",{onClick:()=>u(j?null:v.castaway.id),className:"w-full p-4 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("img",{src:Hn(v.castaway.name,v.castaway.photo_url),alt:v.castaway.name,className:"w-10 h-10 rounded-full object-cover border-2 border-white shadow-sm"}),n.jsxs("div",{className:"text-left",children:[n.jsx("p",{className:"text-neutral-800 font-medium",children:v.castaway.name}),n.jsxs("p",{className:"text-neutral-500 text-sm",children:[v.scores.length," scoring event",v.scores.length!==1?"s":""]})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("span",{className:`text-xl font-bold ${v.total>0?"text-green-600":v.total<0?"text-red-600":"text-neutral-800"}`,children:[v.total>0?"+":"",v.total]}),j?n.jsx(zs,{className:"h-5 w-5 text-neutral-400"}):n.jsx(un,{className:"h-5 w-5 text-neutral-400"})]})]}),j&&n.jsx("div",{className:"px-4 pb-4 space-y-4",children:Object.entries(C).map(([S,k])=>{const R=ate[S]||{color:"text-neutral-600",bgColor:"bg-neutral-50",icon:null},E=k.reduce((I,M)=>I+M.points,0);return n.jsxs("div",{children:[n.jsxs("div",{className:`flex items-center gap-2 mb-2 ${R.color}`,children:[R.icon,n.jsx("span",{className:"text-sm font-medium",children:S}),n.jsxs("span",{className:`text-xs px-1.5 py-0.5 rounded ${R.bgColor}`,children:[E>0?"+":"",E]})]}),n.jsx("div",{className:"space-y-1 pl-5",children:k.map(I=>{var M;return n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-neutral-700",children:(M=I.scoring_rules)==null?void 0:M.name}),I.quantity>1&&n.jsxs("span",{className:"text-xs bg-cream-200 text-neutral-600 px-1.5 py-0.5 rounded",children:["",I.quantity]})]}),n.jsxs("span",{className:`font-medium ${I.points>=0?"text-green-600":"text-red-600"}`,children:[I.points>=0?"+":"",I.points]})]},I.id)})})]},S)})})]},v.castaway.id)})}):n.jsx("div",{className:"text-center py-8",children:n.jsx("p",{className:"text-neutral-500",children:f!=null&&f.is_scored?"No scores recorded for this episode.":"Scoring not yet finalized. Check back after Friday at noon!"})})]})]})]}):n.jsx(ste,{weekNumber:parseInt((e==null?void 0:e.replace("week-",""))||"0"),onReveal:()=>a(!0),autoReveal:i})}function ote({name:e,setName:t,description:r,setDescription:s}){return n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200",children:[n.jsxs("h2",{className:"font-semibold text-neutral-800 mb-4 flex items-center gap-2",children:[n.jsx($e,{className:"h-5 w-5 text-burgundy-500"}),"League Details"]}),n.jsxs("label",{className:"block mb-4",children:[n.jsx("span",{className:"text-neutral-700 text-sm font-medium mb-2 block",children:"League Name *"}),n.jsx("input",{type:"text",value:e,onChange:a=>t(a.target.value),placeholder:"The Tribal Council",className:"input",maxLength:50})]}),n.jsxs("label",{className:"block mb-4",children:[n.jsxs("span",{className:"text-neutral-700 text-sm font-medium mb-2 flex items-center gap-2",children:[n.jsx($u,{className:"h-4 w-4 text-neutral-400"}),"Description (Optional)"]}),n.jsx("textarea",{value:r,onChange:a=>s(a.target.value),placeholder:"A league for true Survivor superfans...",className:"input min-h-[80px] resize-none",maxLength:200}),n.jsxs("p",{className:"text-neutral-400 text-xs mt-1 text-right",children:[r.length,"/200"]})]})]})}function lte({isPrivate:e,setIsPrivate:t,joinCode:r,setJoinCode:s}){return n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200",children:[n.jsxs("h2",{className:"font-semibold text-neutral-800 mb-4 flex items-center gap-2",children:[n.jsx(Sa,{className:"h-5 w-5 text-burgundy-500"}),"Privacy"]}),n.jsxs("div",{className:"flex gap-3 mb-4",children:[n.jsxs("button",{type:"button",onClick:()=>t(!1),className:`flex-1 p-4 rounded-xl border-2 transition-all ${e?"border-cream-200 bg-white hover:border-cream-300":"border-burgundy-500 bg-burgundy-50"}`,children:[n.jsx(Sa,{className:`h-6 w-6 mx-auto mb-2 ${e?"text-neutral-400":"text-burgundy-500"}`}),n.jsx("p",{className:`font-medium text-sm ${e?"text-neutral-600":"text-burgundy-700"}`,children:"Public"}),n.jsx("p",{className:"text-xs text-neutral-400 mt-1",children:"Anyone can join"})]}),n.jsxs("button",{type:"button",onClick:()=>t(!0),className:`flex-1 p-4 rounded-xl border-2 transition-all ${e?"border-burgundy-500 bg-burgundy-50":"border-cream-200 bg-white hover:border-cream-300"}`,children:[n.jsx(Mn,{className:`h-6 w-6 mx-auto mb-2 ${e?"text-burgundy-500":"text-neutral-400"}`}),n.jsx("p",{className:`font-medium text-sm ${e?"text-burgundy-700":"text-neutral-600"}`,children:"Private"}),n.jsx("p",{className:"text-xs text-neutral-400 mt-1",children:"Requires code"})]})]}),e&&n.jsxs("label",{className:"block animate-fade-in",children:[n.jsxs("span",{className:"text-neutral-700 text-sm font-medium mb-2 flex items-center gap-2",children:[n.jsx(Mn,{className:"h-4 w-4 text-neutral-400"}),"Password (Optional)"]}),n.jsx("input",{type:"text",value:r,onChange:a=>s(a.target.value),placeholder:"Enter an optional password",className:"input",maxLength:100}),n.jsx("p",{className:"text-neutral-400 text-xs mt-2",children:"A unique invite code will be auto-generated. Add a password for extra security."})]})]})}const N2=[10,25,50,100];function cte({requireDonation:e,setRequireDonation:t,donationAmount:r,setDonationAmount:s}){const[a,i]=T.useState(!1),o=parseFloat(r)||0,d=N2.includes(o),u=p=>{i(!1),s(p.toString())},h=()=>{i(!0),d&&s("")};return n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200",children:[n.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Pp,{className:"h-5 w-5 text-burgundy-500"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-neutral-800 font-medium",children:"Play for a Cause"}),n.jsx("p",{className:"text-neutral-400 text-sm",children:"Entry fees go to charity"})]})]}),n.jsx("div",{onClick:()=>t(!e),className:`w-12 h-6 rounded-full transition-colors cursor-pointer ${e?"bg-burgundy-500":"bg-neutral-200"}`,children:n.jsx("div",{className:`w-5 h-5 bg-white rounded-full shadow-md transition-transform mt-0.5 ${e?"translate-x-6 ml-0.5":"translate-x-0.5"}`})})]}),e&&n.jsxs("div",{className:"mt-6 pt-4 border-t border-cream-200 animate-fade-in",children:[n.jsx("div",{className:"bg-gradient-to-br from-burgundy-50 to-cream-50 rounded-xl p-4 mb-4 border border-burgundy-100",children:n.jsxs("p",{className:"text-neutral-700 text-sm leading-relaxed",children:[n.jsx("span",{className:"font-semibold text-burgundy-600",children:"The winner of your league will recommend a charity"})," ","of their choice for the full donation pool. Outwit, outplay, outlast  for good."]})}),n.jsx("p",{className:"text-neutral-500 text-sm mb-3 font-medium",children:"Entry fee per player (minimum $10):"}),n.jsxs("div",{className:"grid grid-cols-5 gap-2 mb-3",children:[N2.map(p=>n.jsxs("button",{type:"button",onClick:()=>u(p),className:`py-3 px-2 rounded-xl font-bold text-base transition-all ${r===p.toString()&&!a?"bg-burgundy-500 text-white shadow-elevated":"bg-cream-100 text-neutral-700 hover:bg-cream-200 border border-cream-200"}`,children:["$",p]},p)),n.jsx("button",{type:"button",onClick:h,className:`py-3 px-2 rounded-xl font-bold text-sm transition-all ${a||!d&&r?"bg-burgundy-500 text-white shadow-elevated":"bg-cream-100 text-neutral-700 hover:bg-cream-200 border border-cream-200"}`,children:"Other"})]}),(a||!d&&r)&&n.jsxs("div",{className:"relative mb-3",children:[n.jsx(ks,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-neutral-400"}),n.jsx("input",{type:"number",value:r,onChange:p=>s(p.target.value),placeholder:"Enter amount",min:"10",max:"10000",step:"1",className:"input pl-10 text-lg font-semibold",autoFocus:!0})]}),n.jsx("p",{className:"text-neutral-400 text-xs text-center",children:"100% of entry fees are donated  zero platform fees"})]})]})}function dte({league:e,joinCode:t,isPrivate:r,onClose:s}){const a=ns(),[i,o]=T.useState(!1),d=()=>`${window.location.origin}/join/${e.code}`,u=()=>{navigator.clipboard.writeText(d()),o(!0),setTimeout(()=>o(!1),2e3)},h=()=>{const y=`Join my Survivor Fantasy League "${e.name}"! `,b=d();window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(y)}&url=${encodeURIComponent(b)}`,"_blank")},p=()=>{const y=d();window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(y)}`,"_blank")},f=()=>{const y=`Join my Survivor Fantasy League! ${d()}`;window.open(`sms:?body=${encodeURIComponent(y)}`,"_blank")},x=()=>{const y=`Join my Survivor Fantasy League: ${e.name}`,b=`Hey!

I created a Survivor Fantasy League and want you to join!

League: ${e.name}
Join here: ${d()}

Let's see who can outwit, outplay, and outlast! `;window.open(`mailto:?subject=${encodeURIComponent(y)}&body=${encodeURIComponent(b)}`,"_blank")};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 animate-fade-in",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated max-w-md w-full p-6 animate-slide-up",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800",children:"Share Your League"}),n.jsx("button",{onClick:s,className:"p-2 hover:bg-cream-100 rounded-xl transition-colors",children:n.jsx(Sn,{className:"h-5 w-5 text-neutral-500"})})]}),n.jsxs("div",{className:"text-center mb-6",children:[n.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3",children:n.jsx(qt,{className:"h-8 w-8 text-green-600"})}),n.jsx("h3",{className:"font-semibold text-neutral-800",children:e.name}),n.jsx("p",{className:"text-neutral-500 text-sm",children:"League created successfully!"})]}),n.jsxs("div",{className:"bg-cream-50 rounded-xl p-4 mb-6 border border-cream-200",children:[n.jsx("p",{className:"text-neutral-500 text-xs mb-1 text-center",children:"Invite Code"}),n.jsx("p",{className:"text-2xl font-mono font-bold text-burgundy-500 tracking-wider text-center",children:e.code}),r&&t&&n.jsxs("p",{className:"text-neutral-400 text-xs mt-2 text-center",children:["Join Password: ",n.jsx("span",{className:"font-mono",children:t})]})]}),n.jsx("button",{onClick:u,className:"w-full btn btn-primary mb-4 flex items-center justify-center gap-2",children:i?n.jsxs(n.Fragment,{children:[n.jsx(qt,{className:"h-5 w-5"}),"Link Copied!"]}):n.jsxs(n.Fragment,{children:[n.jsx(Ip,{className:"h-5 w-5"}),"Copy Invite Link"]})}),n.jsx("p",{className:"text-neutral-500 text-sm text-center mb-3",children:"Or share via:"}),n.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[n.jsxs("button",{onClick:f,className:"flex flex-col items-center gap-1 p-3 rounded-xl bg-green-50 hover:bg-green-100 transition-colors",children:[n.jsx(Bs,{className:"h-6 w-6 text-green-600"}),n.jsx("span",{className:"text-xs text-neutral-600",children:"SMS"})]}),n.jsxs("button",{onClick:x,className:"flex flex-col items-center gap-1 p-3 rounded-xl bg-blue-50 hover:bg-blue-100 transition-colors",children:[n.jsx(xr,{className:"h-6 w-6 text-blue-600"}),n.jsx("span",{className:"text-xs text-neutral-600",children:"Email"})]}),n.jsxs("button",{onClick:h,className:"flex flex-col items-center gap-1 p-3 rounded-xl bg-sky-50 hover:bg-sky-100 transition-colors",children:[n.jsx(oX,{className:"h-6 w-6 text-sky-500"}),n.jsx("span",{className:"text-xs text-neutral-600",children:"Twitter"})]}),n.jsxs("button",{onClick:p,className:"flex flex-col items-center gap-1 p-3 rounded-xl bg-indigo-50 hover:bg-indigo-100 transition-colors",children:[n.jsx(OJ,{className:"h-6 w-6 text-indigo-600"}),n.jsx("span",{className:"text-xs text-neutral-600",children:"Facebook"})]})]}),n.jsx("button",{onClick:()=>{s(),a(`/leagues/${e.id}`)},className:"w-full btn btn-secondary mt-4",children:"Go to League"})]})})}const ds={name:{min:3,max:50},password:{max:100},donation:{min:0,max:1e4}};function ute(){const e=ns(),[t,r]=T.useState(""),[s,a]=T.useState(""),[i,o]=T.useState(!1),[d,u]=T.useState(""),[h,p]=T.useState(!1),[f,x]=T.useState(""),[y,b]=T.useState(!1),[w,v]=T.useState(null),{data:j,isLoading:C}=re({queryKey:["active-season"],queryFn:async()=>{const{data:P,error:$}=await K.from("seasons").select("*").eq("is_active",!0).single();if($)throw $;return P}}),{data:S,isLoading:k}=re({queryKey:["current-user"],queryFn:async()=>{const{data:{user:P}}=await K.auth.getUser();return P}}),R=C||k,[E,I]=T.useState(null),M=T.useMemo(()=>{const P=[];if(t.trim().length>0&&t.trim().length<ds.name.min&&P.push(`League name must be at least ${ds.name.min} characters`),t.length>ds.name.max&&P.push(`League name must be at most ${ds.name.max} characters`),i&&d&&d.length>ds.password.max&&P.push(`Join code must be at most ${ds.password.max} characters`),h&&f){const $=parseFloat(f);(isNaN($)||$<ds.donation.min)&&P.push("Donation amount must be a positive number"),$>ds.donation.max&&P.push(`Donation amount cannot exceed $${ds.donation.max.toLocaleString()}`)}return P},[t,i,d,h,f]),O=T.useMemo(()=>t.trim().length>=ds.name.min&&t.length<=ds.name.max&&M.length===0&&(!h||f&&parseFloat(f)>0),[t,M,h,f]),L=De({mutationFn:async()=>{var D,se,X;if(!S||!j)throw new Error("Loading season data...");const{data:{session:P}}=await K.auth.getSession();if(!P)throw new Error("Not authenticated");const $=await Je("/leagues",P.access_token,{method:"POST",body:JSON.stringify({name:t,season_id:j.id,password:i&&d?d:null,donation_amount:h&&f?parseFloat(f):null,max_players:12,is_public:!i})});if($.error)throw new Error($.error);const B=(D=$.data)==null?void 0:D.league;if(!B)throw new Error("Failed to create league");return(se=$.data)!=null&&se.requires_payment&&((X=$.data)!=null&&X.checkout_url)?(window.location.href=$.data.checkout_url,{...B,redirectingToPayment:!0}):B},onSuccess:P=>{I(null),!("redirectingToPayment"in P&&P.redirectingToPayment)&&(v(P),b(!0))},onError:P=>{I(P.message),mt(P,{tags:{operation:"create_league"},extra:{name:t,isPrivate:i,requireDonation:h,donationAmount:f}})}});return R?n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200",children:[n.jsx(Se,{}),n.jsx("div",{className:"flex items-center justify-center py-24",children:n.jsxs("div",{className:"text-center",children:[n.jsx(me,{className:"h-10 w-10 text-burgundy-500 animate-spin mx-auto mb-4"}),n.jsx("p",{className:"text-neutral-500",children:"Loading season data..."})]})})]}):n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200",children:[n.jsx(Se,{}),n.jsxs("div",{className:"p-4 pb-24",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("button",{onClick:()=>e(-1),className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:n.jsx(st,{className:"h-5 w-5 text-neutral-600"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-display font-bold text-neutral-800",children:"Create League"}),n.jsxs("p",{className:"text-neutral-500",children:["Season ",j==null?void 0:j.number,": ",j==null?void 0:j.name]})]})]}),n.jsxs("div",{className:"max-w-md mx-auto space-y-6",children:[n.jsx(ote,{name:t,setName:r,description:s,setDescription:a}),n.jsx(lte,{isPrivate:i,setIsPrivate:o,joinCode:d,setJoinCode:u}),n.jsx(cte,{requireDonation:h,setRequireDonation:p,donationAmount:f,setDonationAmount:x}),M.length>0&&n.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(at,{className:"h-5 w-5 text-amber-600 flex-shrink-0 mt-0.5"}),n.jsx("ul",{className:"text-amber-700 text-sm space-y-1",children:M.map((P,$)=>n.jsx("li",{children:P},$))})]})}),n.jsx("button",{onClick:()=>L.mutate(),disabled:!O||L.isPending,className:"w-full btn btn-primary btn-lg flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:L.isPending?n.jsxs(n.Fragment,{children:[n.jsx(me,{className:"h-5 w-5 animate-spin"}),h?"Redirecting to payment...":"Creating..."]}):h&&f?n.jsxs(n.Fragment,{children:[n.jsx(Pp,{className:"h-5 w-5"}),"Create & Pay $",f]}):n.jsxs(n.Fragment,{children:[n.jsx($e,{className:"h-5 w-5"}),"Create League"]})}),(L.isError||E)&&n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(at,{className:"h-5 w-5 text-red-600 flex-shrink-0 mt-0.5"}),n.jsx("p",{className:"text-red-600 text-sm",children:E||"Error creating league. Please try again."})]})})]})]}),y&&w&&n.jsx(dte,{league:w,joinCode:d,isPrivate:i,onClose:()=>b(!1)})]})}function hte({code:e}){const[t,r]=T.useState(!1),s=()=>{const a=`${window.location.origin}/join/${e}`;navigator.clipboard.writeText(a),r(!0),setTimeout(()=>r(!1),2e3)};return n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200",children:[n.jsx("h3",{className:"text-neutral-800 font-medium mb-3",children:"Invite Link"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"flex-1 bg-cream-50 rounded-xl px-4 py-3 text-burgundy-600 font-mono border border-cream-200",children:e}),n.jsx("button",{onClick:s,className:"p-3 bg-burgundy-500 hover:bg-burgundy-600 rounded-xl transition-colors",children:t?n.jsx(qt,{className:"h-5 w-5 text-white"}):n.jsx(Ip,{className:"h-5 w-5 text-white"})})]})]})}function mte({name:e,password:t,onNameChange:r,onPasswordChange:s}){return n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200",children:[n.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-3 mb-4",children:n.jsx("p",{className:"text-amber-700 text-sm font-medium",children:"Admin-only settings"})}),n.jsxs("label",{className:"block mb-4",children:[n.jsxs("span",{className:"text-neutral-800 font-medium flex items-center gap-2 mb-2",children:[n.jsx($e,{className:"h-5 w-5 text-burgundy-500"}),"League Name"]}),n.jsx("input",{type:"text",value:e,onChange:a=>r(a.target.value),className:"input"})]}),n.jsxs("label",{className:"block",children:[n.jsxs("span",{className:"text-neutral-800 font-medium flex items-center gap-2 mb-2",children:[n.jsx(Mn,{className:"h-5 w-5 text-burgundy-500"}),"New Password"]}),n.jsx("input",{type:"password",value:t,onChange:a=>s(a.target.value),placeholder:"Leave blank to keep current",className:"input"})]})]})}function fte({isPublic:e,maxPlayers:t,currentMemberCount:r,draftStatus:s,onPublicChange:a,onMaxPlayersChange:i}){const o=r===0||s==="pending";return n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200",children:[n.jsxs("h3",{className:"text-neutral-800 font-medium mb-4 flex items-center gap-2",children:[n.jsx(Sa,{className:"h-5 w-5 text-burgundy-500"}),"Visibility & Access"]}),n.jsxs("label",{className:"flex items-center justify-between cursor-pointer mb-4 p-3 bg-cream-50 rounded-xl border border-cream-200",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[e?n.jsx(Ei,{className:"h-5 w-5 text-burgundy-500"}):n.jsx(gc,{className:"h-5 w-5 text-neutral-400"}),n.jsxs("div",{children:[n.jsx("span",{className:"text-neutral-800 font-medium block",children:"Public League"}),n.jsx("span",{className:"text-neutral-500 text-sm",children:"Anyone can view standings"})]})]}),n.jsx("input",{type:"checkbox",checked:e,onChange:d=>a(d.target.checked),className:"w-5 h-5 rounded bg-cream-100 border-cream-300 text-burgundy-500 focus:ring-burgundy-500"})]}),n.jsxs("label",{className:"block",children:[n.jsx("span",{className:"text-neutral-500 text-sm mb-2 block",children:"Max Players"}),n.jsx("select",{value:t,onChange:d=>i(parseInt(d.target.value)),disabled:!o,className:"input disabled:opacity-50",children:[4,6,8,10,12,16,20,24].map(d=>n.jsxs("option",{value:d,disabled:d<r,children:[d," players"]},d))}),r>0&&n.jsxs("p",{className:"text-neutral-400 text-xs mt-1",children:["Currently ",r," of ",t," players"]})]})]})}function pte({requireDonation:e,donationAmount:t,draftStatus:r,onRequireDonationChange:s,onDonationAmountChange:a}){const i=r==="pending";return n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200",children:[n.jsxs("label",{className:"flex items-center justify-between cursor-pointer mb-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(ks,{className:"h-5 w-5 text-burgundy-500"}),n.jsx("span",{className:"text-neutral-800 font-medium",children:"Require Donation"})]}),n.jsx("input",{type:"checkbox",checked:e,onChange:o=>s(o.target.checked),disabled:!i,className:"w-5 h-5 rounded bg-cream-100 border-cream-300 text-burgundy-500 focus:ring-burgundy-500 disabled:opacity-50"})]}),e&&n.jsx("div",{className:"space-y-4 pt-4 border-t border-cream-200",children:n.jsxs("label",{className:"block",children:[n.jsx("span",{className:"text-neutral-500 text-sm mb-2 block",children:"Amount ($)"}),n.jsx("input",{type:"number",value:t,onChange:o=>a(o.target.value),disabled:!i,className:"input disabled:opacity-50"})]})})]})}function xte({members:e,currentUserId:t,draftStatus:r,onRemoveMember:s,isRemoving:a,removeError:i}){return n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200",children:[n.jsxs("h3",{className:"text-neutral-800 font-medium mb-4 flex items-center gap-2",children:[n.jsx($e,{className:"h-5 w-5 text-burgundy-500"}),"Members (",(e==null?void 0:e.length)||0,")"]}),n.jsx("div",{className:"space-y-2",children:e==null?void 0:e.map(o=>{var u;const d=o.user_id===t;return n.jsxs("div",{className:"flex items-center justify-between p-3 bg-cream-50 rounded-xl border border-cream-200",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("span",{className:"text-neutral-800",children:(u=o.users)==null?void 0:u.display_name}),d&&n.jsxs("span",{className:"inline-flex items-center gap-1 bg-burgundy-100 text-burgundy-600 text-xs px-2 py-0.5 rounded-full",children:[n.jsx(tr,{className:"h-3 w-3"}),"You"]})]}),!d&&r==="pending"&&n.jsx("button",{onClick:()=>{var h;return s(o.user_id,((h=o.users)==null?void 0:h.display_name)||"this member")},disabled:a,className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors",title:"Remove member",children:n.jsx(cX,{className:"h-4 w-4"})})]},o.id)})}),i&&n.jsx("p",{className:"text-red-500 text-sm mt-2",children:"Failed to remove member"})]})}function gte({otherMembers:e,onTransfer:t,isPending:r,isError:s}){const[a,i]=T.useState(!1),[o,d]=T.useState(null),[u,h]=T.useState(!1);if(e.length===0)return null;const p=()=>{o&&(t(o),i(!1),h(!1),d(null))};return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-6",children:[n.jsxs("h3",{className:"text-amber-700 font-medium mb-2 flex items-center gap-2",children:[n.jsx(zY,{className:"h-5 w-5"}),"Transfer Ownership"]}),n.jsx("p",{className:"text-amber-600 text-sm mb-4",children:"Transfer ownership to another member. You will lose all creator privileges."}),n.jsx("button",{onClick:()=>i(!0),className:"w-full bg-amber-100 hover:bg-amber-200 border border-amber-300 text-amber-800 font-bold py-3 rounded-xl transition-colors",children:"Transfer Ownership"})]}),a&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-2xl p-6 max-w-sm w-full border border-cream-200 shadow-elevated",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"text-neutral-800 font-bold flex items-center gap-2",children:[n.jsx(kt,{className:"h-5 w-5 text-amber-500"}),"Transfer Ownership"]}),n.jsx("button",{onClick:()=>{i(!1),d(null)},className:"text-neutral-400 hover:text-neutral-600",children:n.jsx(Sn,{className:"h-5 w-5"})})]}),n.jsx("p",{className:"text-neutral-500 text-sm mb-4",children:"Select a member to become the new league creator. This action cannot be undone."}),n.jsx("div",{className:"space-y-2 mb-6 max-h-48 overflow-y-auto",children:e.map(f=>{var x;return n.jsxs("label",{className:`flex items-center gap-3 p-3 rounded-xl cursor-pointer transition-colors ${o===f.user_id?"bg-burgundy-50 border-2 border-burgundy-500":"bg-cream-50 border border-cream-200 hover:bg-cream-100"}`,children:[n.jsx("input",{type:"radio",name:"transfer-target",value:f.user_id,checked:o===f.user_id,onChange:y=>d(y.target.value),className:"text-burgundy-500 focus:ring-burgundy-500"}),n.jsx("span",{className:"text-neutral-800",children:(x=f.users)==null?void 0:x.display_name})]},f.id)})}),u?n.jsxs("div",{className:"space-y-3",children:[n.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-xl",children:n.jsx("p",{className:"text-red-700 text-sm font-medium",children:" You will lose all creator privileges. This cannot be undone."})}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:()=>h(!1),className:"flex-1 btn btn-secondary",children:"Go Back"}),n.jsx("button",{onClick:p,disabled:r,className:"flex-1 bg-red-500 hover:bg-red-600 disabled:bg-cream-200 text-white disabled:text-neutral-400 font-bold py-3 rounded-xl transition-colors flex items-center justify-center gap-2",children:r?n.jsx(me,{className:"h-5 w-5 animate-spin"}):"Confirm Transfer"})]})]}):n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:()=>{i(!1),d(null)},className:"flex-1 btn btn-secondary",children:"Cancel"}),n.jsx("button",{onClick:()=>h(!0),disabled:!o||r,className:"flex-1 bg-amber-500 hover:bg-amber-600 disabled:bg-cream-200 text-white disabled:text-neutral-400 font-bold py-3 rounded-xl transition-colors",children:"Continue"})]}),s&&n.jsx("p",{className:"text-red-500 text-sm mt-3 text-center",children:"Failed to transfer ownership"})]})})]})}function bte({onDelete:e,isPending:t}){const[r,s]=T.useState(!1),[a,i]=T.useState(""),o=()=>{a.toLowerCase()==="delete"&&(e(),s(!1),i(""))};return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6",children:[n.jsxs("h3",{className:"text-red-600 font-medium mb-2 flex items-center gap-2",children:[n.jsx(Oc,{className:"h-5 w-5"}),"Danger Zone"]}),n.jsx("p",{className:"text-red-500 text-sm mb-4",children:"Deleting the league cannot be undone. All members will be removed."}),n.jsx("button",{onClick:()=>s(!0),disabled:t,className:"w-full bg-red-100 hover:bg-red-200 border border-red-300 text-red-700 font-bold py-3 rounded-xl transition-colors",children:t?"Deleting...":"Delete League"})]}),r&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-2xl p-6 max-w-sm w-full border border-red-200 shadow-elevated",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"text-red-600 font-bold flex items-center gap-2",children:[n.jsx(kt,{className:"h-5 w-5"}),"Delete League"]}),n.jsx("button",{onClick:()=>{s(!1),i("")},className:"text-neutral-400 hover:text-neutral-600","aria-label":"Close",children:n.jsx(Sn,{className:"h-5 w-5"})})]}),n.jsx("p",{className:"text-neutral-600 text-sm mb-4",children:"This action cannot be undone. All league data, members, and history will be permanently deleted."}),n.jsxs("label",{className:"block mb-4",children:[n.jsx("span",{className:"text-neutral-700 text-sm font-medium",children:'Type "delete" to confirm:'}),n.jsx("input",{type:"text",value:a,onChange:d=>i(d.target.value),placeholder:"delete",className:"input mt-2",autoComplete:"off"})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:()=>{s(!1),i("")},className:"flex-1 btn btn-secondary",children:"Cancel"}),n.jsx("button",{onClick:o,disabled:a.toLowerCase()!=="delete"||t,className:"flex-1 bg-red-500 hover:bg-red-600 disabled:bg-red-200 text-white disabled:text-red-400 font-bold py-3 rounded-xl transition-colors flex items-center justify-center gap-2",children:t?n.jsx(me,{className:"h-5 w-5 animate-spin"}):"Delete Forever"})]})]})})]})}function yte(){const{leagueId:e}=On(),t=ns(),r=Et(),{session:s}=dt(),[a,i]=T.useState(""),[o,d]=T.useState(""),[u,h]=T.useState(""),[p,f]=T.useState(!1),[x,y]=T.useState(12),[b,w]=T.useState(!1),[v,j]=T.useState(""),[C,S]=T.useState(null),{data:k}=re({queryKey:["current-user"],queryFn:async()=>{const{data:{user:F}}=await K.auth.getUser();return F}}),{data:R}=re({queryKey:["user-profile",k==null?void 0:k.id],queryFn:async()=>{if(!(k!=null&&k.id))return null;const{data:F,error:Q}=await K.from("users").select("role").eq("id",k.id).single();if(Q)throw Q;return F},enabled:!!(k!=null&&k.id)}),{data:E,isLoading:I}=re({queryKey:["league",e],queryFn:async()=>{if(!e)throw new Error("No league ID");const{data:F,error:Q}=await K.from("leagues").select("*, seasons(*)").eq("id",e).single();if(Q)throw Q;return F},enabled:!!e}),{data:M}=re({queryKey:["league-members",e],queryFn:async()=>{if(!e)throw new Error("No league ID");const{data:F,error:Q}=await K.from("league_members").select("*, users(id, display_name, email)").eq("league_id",e).order("draft_position",{ascending:!0,nullsFirst:!1});if(Q)throw Q;return F},enabled:!!e});T.useEffect(()=>{var F;E&&(i(E.name||""),d(E.description||""),f(E.is_public||!1),y(E.max_players||12),w(E.require_donation||!1),j(((F=E.donation_amount)==null?void 0:F.toString())||""))},[E]);const O=(E==null?void 0:E.commissioner_id)===(k==null?void 0:k.id),L=(R==null?void 0:R.role)==="admin",P=O||L,$=De({mutationFn:async()=>{if(!e)throw new Error("No league ID");if(!(s!=null&&s.access_token))throw new Error("Not authenticated");const F={description:o};L&&(F.name=a,F.is_public=p,F.max_players=x,F.donation_amount=b?parseFloat(v):null,u&&(F.password=u));const Q=await Je(`/leagues/${e}/settings`,s.access_token,{method:"PATCH",body:JSON.stringify(F)});if(Q.error)throw new Error(Q.error);return Q.data},onSuccess:()=>{r.invalidateQueries({queryKey:["league",e]}),h(""),S(null)},onError:F=>{S(F.message||"Failed to update league settings")}}),B=De({mutationFn:async F=>{if(!e)throw new Error("No league ID");if(!(s!=null&&s.access_token))throw new Error("Not authenticated");const Q=await Je(`/leagues/${e}/members/${F}`,s.access_token,{method:"DELETE"});if(Q.error)throw new Error(Q.error);return Q.data},onSuccess:()=>{r.invalidateQueries({queryKey:["league-members",e]}),S(null)},onError:F=>{S(F.message||"Failed to remove member")}}),D=De({mutationFn:async F=>{if(!e)throw new Error("No league ID");if(!(s!=null&&s.access_token))throw new Error("Not authenticated");const Q=await Je(`/leagues/${e}/transfer`,s.access_token,{method:"POST",body:JSON.stringify({new_commissioner_id:F})});if(Q.error)throw new Error(Q.error);return Q.data},onSuccess:()=>{r.invalidateQueries({queryKey:["league",e]}),t(`/leagues/${e}`)},onError:F=>{S(F.message||"Failed to transfer ownership")}}),se=De({mutationFn:async()=>{if(!e)throw new Error("No league ID");const{error:F}=await K.from("leagues").delete().eq("id",e);if(F)throw F},onSuccess:()=>{t("/dashboard")}}),X=(F,Q)=>{confirm(`Remove ${Q} from the league?`)&&B.mutate(F)};if(I)return n.jsxs(n.Fragment,{children:[n.jsx(Se,{}),n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center",children:n.jsx(me,{className:"h-8 w-8 text-burgundy-500 animate-spin"})})]});if(!P)return n.jsxs(n.Fragment,{children:[n.jsx(Se,{}),n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 p-4 pb-24",children:n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-8 text-center",children:[n.jsx("h1",{className:"text-xl font-display font-bold text-neutral-800 mb-2",children:"Access Denied"}),n.jsx("p",{className:"text-neutral-500 mb-4",children:"Only the league creator or admin can access settings."}),n.jsx(z,{to:`/leagues/${e}`,className:"text-burgundy-500 hover:text-burgundy-600",children:"Back to League"})]})})]});const ee=(M==null?void 0:M.filter(F=>F.user_id!==(k==null?void 0:k.id)))||[];return n.jsxs(n.Fragment,{children:[n.jsx(Se,{}),n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 p-4 pb-24",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx(z,{to:`/leagues/${e}`,className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:n.jsx(st,{className:"h-5 w-5 text-neutral-600"})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("h1",{className:"text-2xl font-display font-bold text-neutral-800 flex items-center gap-2",children:[n.jsx(Uu,{className:"h-6 w-6 text-burgundy-500"}),"League Settings"]}),n.jsxs("p",{className:"text-neutral-500 flex items-center gap-2",children:[E==null?void 0:E.name,n.jsxs("span",{className:"inline-flex items-center gap-1 bg-burgundy-100 text-burgundy-600 text-xs px-2 py-0.5 rounded-full",children:[n.jsx(tr,{className:"h-3 w-3"}),O?"Creator":"Admin"]})]})]})]}),n.jsxs("div",{className:"max-w-md mx-auto space-y-6",children:[C&&n.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-xl flex items-start gap-3",children:[n.jsx(at,{className:"h-5 w-5 text-red-500 flex-shrink-0 mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-red-800 font-medium",children:"Error"}),n.jsx("p",{className:"text-red-600 text-sm",children:C})]}),n.jsx("button",{onClick:()=>S(null),className:"text-red-400 hover:text-red-600",children:""})]}),n.jsx(hte,{code:E==null?void 0:E.code}),n.jsx("div",{className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200",children:n.jsxs("label",{className:"block",children:[n.jsx("span",{className:"text-neutral-800 font-medium mb-2 block",children:"League Description"}),n.jsx("textarea",{value:o,onChange:F=>d(F.target.value),placeholder:"Tell members what your league is about...",className:"input min-h-[100px] resize-none",maxLength:500}),n.jsxs("p",{className:"text-neutral-400 text-xs mt-1 text-right",children:[o.length,"/500"]})]})}),L&&n.jsxs(n.Fragment,{children:[n.jsx(mte,{name:a,password:u,onNameChange:i,onPasswordChange:h}),n.jsx(fte,{isPublic:p,maxPlayers:x,currentMemberCount:(M==null?void 0:M.length)||0,draftStatus:(E==null?void 0:E.draft_status)||"pending",onPublicChange:f,onMaxPlayersChange:y}),n.jsx(pte,{requireDonation:b,donationAmount:v,draftStatus:(E==null?void 0:E.draft_status)||"pending",onRequireDonationChange:w,onDonationAmountChange:j})]}),n.jsx(xte,{members:M,currentUserId:k==null?void 0:k.id,draftStatus:(E==null?void 0:E.draft_status)||"pending",onRemoveMember:X,isRemoving:B.isPending,removeError:B.isError}),n.jsx("button",{onClick:()=>$.mutate(),disabled:$.isPending,className:"w-full btn btn-primary flex items-center justify-center gap-2",children:$.isPending?n.jsx(me,{className:"h-5 w-5 animate-spin"}):"Save Changes"}),$.isSuccess&&n.jsx("p",{className:"text-green-600 text-center",children:"Settings saved!"}),n.jsx(gte,{otherMembers:ee,onTransfer:F=>D.mutate(F),isPending:D.isPending,isError:D.isError}),(E==null?void 0:E.draft_status)==="pending"&&n.jsx(bte,{onDelete:()=>se.mutate(),isPending:se.isPending})]})]})]})}function vte(){const e=[{command:"PICK [name]",example:"PICK Boston Rob",description:"Submit your weekly pick. Use the castaway's first name or full name."},{command:"STATUS",example:"STATUS",description:"Check your current pick status, deadline, and points for the week."},{command:"TEAM",example:"TEAM",description:"View your current roster and each castaway's status."},{command:"SCORES",example:"SCORES",description:"Get your latest scores and league standings."},{command:"HELP",example:"HELP",description:"Get a list of available commands."}];return n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200",children:[n.jsx(Se,{}),n.jsxs("div",{className:"p-4 pb-24",children:[n.jsx("div",{className:"flex items-center gap-3 mb-6 max-w-4xl mx-auto",children:n.jsxs("div",{children:[n.jsxs("h1",{className:"text-2xl font-display font-bold text-neutral-800 flex items-center gap-2",children:[n.jsx(Hv,{className:"h-6 w-6 text-burgundy-500"}),"SMS Commands"]}),n.jsx("p",{className:"text-neutral-500",children:"Make picks and check status via text"})]})}),n.jsxs("div",{className:"bg-burgundy-50 border border-burgundy-200 rounded-2xl p-6 mb-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[n.jsx(EQ,{className:"h-6 w-6 text-burgundy-500"}),n.jsx("h2",{className:"text-lg font-display font-bold text-neutral-800",children:"Text Us"})]}),n.jsx("p",{className:"text-3xl font-mono font-bold text-burgundy-500 mb-2",children:"(YOUR_NUMBER_HERE)"}),n.jsx("p",{className:"text-neutral-600 text-sm mb-4",children:"Save this number to your contacts for easy access during episodes!"}),n.jsx("p",{className:"text-neutral-600 text-sm font-medium",children:"Make weekly picks and check the leaderboard with just a simple text command."})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200 mb-6",children:[n.jsx("h2",{className:"text-lg font-display font-bold text-neutral-800 mb-4",children:"Setup"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-6 h-6 bg-burgundy-500 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:n.jsx("span",{className:"text-white font-bold text-sm",children:"1"})}),n.jsxs("p",{className:"text-neutral-600",children:["Go to your"," ",n.jsx(z,{to:"/profile",className:"text-burgundy-500 hover:text-burgundy-600 font-medium",children:"Profile"})," ","and add your phone number."]})]}),n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-6 h-6 bg-burgundy-500 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:n.jsx("span",{className:"text-white font-bold text-sm",children:"2"})}),n.jsx("p",{className:"text-neutral-600",children:"Verify your phone with the code we text you."})]}),n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-6 h-6 bg-burgundy-500 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:n.jsx("span",{className:"text-white font-bold text-sm",children:"3"})}),n.jsx("p",{className:"text-neutral-600",children:"Start texting commands to make picks and check status!"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200",children:[n.jsx("h2",{className:"text-lg font-display font-bold text-neutral-800 mb-4",children:"Available Commands"}),n.jsx("div",{className:"space-y-4",children:e.map(t=>n.jsxs("div",{className:"bg-cream-50 rounded-xl p-4 border border-cream-200",children:[n.jsx("div",{className:"flex items-center justify-between mb-2",children:n.jsx("code",{className:"text-burgundy-500 font-mono font-bold",children:t.command})}),n.jsx("p",{className:"text-neutral-600 text-sm mb-2",children:t.description}),n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx("span",{className:"text-neutral-400",children:"Example:"}),n.jsx("code",{className:"text-neutral-800 bg-cream-100 px-2 py-1 rounded",children:t.example})]})]},t.command))})]}),n.jsxs("div",{className:"mt-6 bg-gradient-to-r from-burgundy-50 to-amber-50 rounded-2xl shadow-card p-6 border border-burgundy-200",children:[n.jsx("h2",{className:"text-lg font-display font-bold text-neutral-800 mb-3",children:"Weekly Pick Reminders"}),n.jsxs("p",{className:"text-neutral-700 mb-4",children:["We can text everyone each week asking who their weekly pick is. All you have to do is text ",n.jsx("strong",{children:"1"})," or ",n.jsx("strong",{children:"2"})," to confirm your pick for that week!"]}),n.jsx("p",{className:"text-neutral-600 text-sm",children:"This feature makes it super easy to make your picks without even opening the app. Just reply with the number of your castaway (1 for your first pick, 2 for your second pick)."})]}),n.jsxs("div",{className:"mt-6 bg-white rounded-2xl shadow-card p-6 border border-cream-200",children:[n.jsx("h2",{className:"text-lg font-display font-bold text-neutral-800 mb-4",children:"Tips"}),n.jsxs("ul",{className:"space-y-2",children:[n.jsxs("li",{className:"flex items-start gap-2 text-neutral-600",children:[n.jsx(tt,{className:"h-5 w-5 text-green-500 flex-shrink-0 mt-0.5"}),"Commands are not case-sensitive (PICK = pick = Pick)"]}),n.jsxs("li",{className:"flex items-start gap-2 text-neutral-600",children:[n.jsx(tt,{className:"h-5 w-5 text-green-500 flex-shrink-0 mt-0.5"}),"You can use first name only if it's unique"]}),n.jsxs("li",{className:"flex items-start gap-2 text-neutral-600",children:[n.jsx(tt,{className:"h-5 w-5 text-green-500 flex-shrink-0 mt-0.5"}),"We'll confirm your pick with a reply text"]}),n.jsxs("li",{className:"flex items-start gap-2 text-neutral-600",children:[n.jsx(tt,{className:"h-5 w-5 text-green-500 flex-shrink-0 mt-0.5"}),"Picks lock at 3pm PST on Wednesdays"]})]})]})]}),n.jsx(tn,{})]})}function wte(){const{seasonId:e}=On(),{data:t,isLoading:r}=re({queryKey:["season",e],queryFn:async()=>{if(!e)throw new Error("No season ID");const{data:h,error:p}=await K.from("seasons").select("*").eq("id",e).single();if(p)throw p;return h},enabled:!!e}),{data:s,isLoading:a}=re({queryKey:["season-episodes",e],queryFn:async()=>{if(!e)throw new Error("No season ID");const{data:h,error:p}=await K.from("episodes").select("*").eq("season_id",e).order("number",{ascending:!0});if(p)throw p;return h||[]},enabled:!!e}),i=new Date,o=h=>{const p=new Date(h.air_date);return h.is_scored?"scored":p<i?"aired":"upcoming"},d=h=>new Date(h).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),u=h=>new Date(h).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",timeZoneName:"short"});return r||a?n.jsxs(n.Fragment,{children:[n.jsx(Se,{}),n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center",children:n.jsx(me,{className:"h-8 w-8 text-burgundy-500 animate-spin"})})]}):n.jsxs(n.Fragment,{children:[n.jsx(Se,{}),n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 p-4 pb-24",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx(z,{to:"/dashboard",className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:n.jsx(st,{className:"h-5 w-5 text-neutral-600"})}),n.jsxs("div",{children:[n.jsxs("h1",{className:"text-2xl font-display font-bold text-neutral-800 flex items-center gap-2",children:[n.jsx(er,{className:"h-6 w-6 text-burgundy-500"}),"Episode Schedule"]}),n.jsxs("p",{className:"text-neutral-500",children:["Season ",t==null?void 0:t.number,": ",t==null?void 0:t.name]})]})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-4 border border-cream-200 mb-6",children:[n.jsx("h2",{className:"text-lg font-display font-bold text-neutral-800 mb-3",children:"Key Dates"}),n.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[n.jsxs("div",{className:"bg-cream-50 rounded-xl p-3 border border-cream-200",children:[n.jsx("p",{className:"text-neutral-500",children:"Premiere"}),n.jsx("p",{className:"text-neutral-800 font-medium",children:t!=null&&t.premiere_at?d(t.premiere_at):"-"})]}),n.jsxs("div",{className:"bg-cream-50 rounded-xl p-3 border border-cream-200",children:[n.jsx("p",{className:"text-neutral-500",children:"Finale"}),n.jsx("p",{className:"text-neutral-800 font-medium",children:t!=null&&t.finale_at?d(t.finale_at):"-"})]}),n.jsxs("div",{className:"bg-cream-50 rounded-xl p-3 border border-cream-200",children:[n.jsx("p",{className:"text-neutral-500",children:"Draft Deadline"}),n.jsx("p",{className:"text-neutral-800 font-medium",children:t!=null&&t.draft_deadline?d(t.draft_deadline):"-"})]}),n.jsxs("div",{className:"bg-cream-50 rounded-xl p-3 border border-cream-200",children:[n.jsx("p",{className:"text-neutral-500",children:"Registration Closes"}),n.jsx("p",{className:"text-neutral-800 font-medium",children:t!=null&&t.registration_closes_at?d(t.registration_closes_at):"-"})]})]})]}),n.jsxs("div",{className:"bg-burgundy-50 border border-burgundy-200 rounded-2xl p-4 mb-6",children:[n.jsxs("h3",{className:"text-burgundy-500 font-medium mb-2 flex items-center gap-2",children:[n.jsx(Mt,{className:"h-4 w-4"}),"Weekly Rhythm"]}),n.jsxs("div",{className:"text-sm space-y-1 text-neutral-600",children:[n.jsxs("p",{children:[n.jsx("strong",{className:"text-neutral-800",children:"Wed 3:00 PM"}),"  Picks lock"]}),n.jsxs("p",{children:[n.jsx("strong",{className:"text-neutral-800",children:"Wed 8:00 PM"}),"  Episode airs"]}),n.jsxs("p",{children:[n.jsx("strong",{className:"text-neutral-800",children:"Fri 12:00 PM"}),"  Results posted"]})]})]}),n.jsxs("div",{className:"space-y-3",children:[s==null?void 0:s.map(h=>{const p=o(h);return n.jsxs("div",{className:`bg-white rounded-2xl shadow-card p-4 border ${p==="scored"?"border-green-300":p==="aired"?"border-amber-300":"border-cream-200"}`,children:[n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${p==="scored"?"bg-green-100":p==="aired"?"bg-amber-100":"bg-cream-100"}`,children:p==="scored"?n.jsx(tt,{className:"h-5 w-5 text-green-600"}):p==="aired"?n.jsx(yc,{className:"h-5 w-5 text-amber-600"}):n.jsx(wJ,{className:"h-5 w-5 text-neutral-400"})}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("h3",{className:"text-neutral-800 font-medium",children:["Episode ",h.number,h.is_finale&&"  Finale"]}),p==="scored"&&n.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded-full",children:"Scored"})]}),n.jsx("p",{className:"text-neutral-500 text-sm",children:h.title||d(h.air_date)})]})]}),n.jsxs("div",{className:"text-right text-sm",children:[n.jsx("p",{className:"text-neutral-800",children:d(h.air_date)}),n.jsx("p",{className:"text-neutral-500",children:u(h.air_date)})]})]}),p==="upcoming"&&n.jsx("div",{className:"mt-3 pt-3 border-t border-cream-200 text-sm",children:n.jsxs("p",{className:"text-neutral-500",children:["Picks lock:"," ",n.jsxs("span",{className:"text-neutral-800",children:[d(h.picks_lock_at)," at ",u(h.picks_lock_at)]})]})})]},h.id)}),(s==null?void 0:s.length)===0&&n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-8 border border-cream-200 text-center",children:[n.jsx(er,{className:"h-12 w-12 text-neutral-400 mx-auto mb-4"}),n.jsx("p",{className:"text-neutral-500",children:"Episode schedule not yet available."})]})]})]})]})}function _te(){const{seasonId:e}=On(),[t,r]=T.useState(""),[s,a]=T.useState("all"),[i,o]=T.useState(null),{data:d,isLoading:u}=re({queryKey:["season",e],queryFn:async()=>{if(!e)throw new Error("No season ID");const{data:v,error:j}=await K.from("seasons").select("*").eq("id",e).single();if(j)throw j;return v},enabled:!!e}),{data:h,isLoading:p}=re({queryKey:["season-castaways",e],queryFn:async()=>{if(!e)throw new Error("No season ID");const{data:v,error:j}=await K.from("castaways").select("*, episodes:eliminated_episode_id(number)").eq("season_id",e).order("name",{ascending:!0});if(j)throw j;return v||[]},enabled:!!e}),{data:f}=re({queryKey:["castaway-scores",e],queryFn:async()=>{if(!e)return[];const{data:v}=await K.from("episodes").select("id").eq("season_id",e);if(!(v!=null&&v.length))return[];const j=v.map(k=>k.id),{data:C,error:S}=await K.from("episode_scores").select(`
          castaway_id,
          episode_id,
          points,
          episode:episodes!episode_id(number, title)
        `).in("episode_id",j);if(S)throw S;return C||[]},enabled:!!e}),x=(f==null?void 0:f.reduce((v,j)=>{var S;v[j.castaway_id]||(v[j.castaway_id]={total:0,byEpisode:{}}),v[j.castaway_id].total+=j.points;const C=(S=j.episode)==null?void 0:S.number;return C&&(v[j.castaway_id].byEpisode[C]||(v[j.castaway_id].byEpisode[C]=0),v[j.castaway_id].byEpisode[C]+=j.points),v},{}))||{},y=h==null?void 0:h.filter(v=>{var S,k;const j=v.name.toLowerCase().includes(t.toLowerCase())||((S=v.occupation)==null?void 0:S.toLowerCase().includes(t.toLowerCase()))||((k=v.hometown)==null?void 0:k.toLowerCase().includes(t.toLowerCase())),C=s==="all"||s==="active"&&v.status==="active"||s==="eliminated"&&v.status==="eliminated";return j&&C}),b=(h==null?void 0:h.filter(v=>v.status==="active").length)||0,w=(h==null?void 0:h.filter(v=>v.status==="eliminated").length)||0;return u||p?n.jsxs(n.Fragment,{children:[n.jsx(Se,{}),n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center",children:n.jsx(me,{className:"h-8 w-8 text-burgundy-500 animate-spin"})})]}):n.jsxs(n.Fragment,{children:[n.jsx(Se,{}),n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 p-4 pb-24",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx(z,{to:"/dashboard",className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:n.jsx(st,{className:"h-5 w-5 text-neutral-600"})}),n.jsxs("div",{children:[n.jsxs("h1",{className:"text-2xl font-display font-bold text-neutral-800 flex items-center gap-2",children:[n.jsx($e,{className:"h-6 w-6 text-burgundy-500"}),"Castaways"]}),n.jsxs("p",{className:"text-neutral-500",children:["Season ",d==null?void 0:d.number,": ",d==null?void 0:d.name]})]})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-6",children:[n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-3 border border-cream-200 text-center",children:[n.jsx("p",{className:"text-2xl font-bold text-neutral-800",children:(h==null?void 0:h.length)||0}),n.jsx("p",{className:"text-neutral-500 text-xs",children:"Total"})]}),n.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-2xl p-3 text-center",children:[n.jsx("p",{className:"text-2xl font-bold text-green-600",children:b}),n.jsx("p",{className:"text-neutral-500 text-xs",children:"Active"})]}),n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-3 text-center",children:[n.jsx("p",{className:"text-2xl font-bold text-red-600",children:w}),n.jsx("p",{className:"text-neutral-500 text-xs",children:"Eliminated"})]})]}),n.jsxs("div",{className:"flex gap-2 mb-6",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx(Oi,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-neutral-400"}),n.jsx("input",{type:"text",value:t,onChange:v=>r(v.target.value),placeholder:"Search castaways...",className:"input pl-10"})]}),n.jsxs("select",{value:s,onChange:v=>{const j=v.target.value;(j==="all"||j==="active"||j==="eliminated")&&a(j)},className:"input px-3 py-2 w-32",children:[n.jsx("option",{value:"all",children:"All"}),n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"eliminated",children:"Eliminated"})]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:y==null?void 0:y.map(v=>{const j=x[v.id],C=i===v.id;return n.jsxs("div",{className:`bg-white rounded-2xl shadow-card border overflow-hidden ${v.status==="eliminated"?"border-red-200 opacity-75":v.status==="winner"?"border-amber-400":"border-cream-200"}`,children:[n.jsx("button",{onClick:()=>o(C?null:v.id),className:"w-full p-4 text-left",children:n.jsxs("div",{className:"flex items-start gap-3",children:[v.photo_url?n.jsx("img",{src:v.photo_url,alt:v.name,className:`w-14 h-14 rounded-full object-cover ${v.status==="eliminated"?"grayscale":""}`}):n.jsx("div",{className:"w-14 h-14 bg-cream-100 rounded-full flex items-center justify-center border border-cream-200",children:n.jsx($e,{className:"h-6 w-6 text-neutral-400"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[v.status==="winner"&&n.jsx(Ke,{className:"h-4 w-4 text-amber-500"}),v.status==="eliminated"&&n.jsx(Gb,{className:"h-4 w-4 text-red-500"}),n.jsx("h3",{className:"text-neutral-800 font-medium truncate",children:v.name})]}),v.occupation&&n.jsx("p",{className:"text-neutral-500 text-sm",children:v.occupation}),v.age&&v.hometown&&n.jsxs("p",{className:"text-neutral-400 text-xs truncate",children:[v.age,", ",v.hometown]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[(j==null?void 0:j.total)!==void 0&&n.jsxs("span",{className:`text-lg font-bold ${j.total>=0?"text-green-600":"text-red-600"}`,children:[j.total>=0?"+":"",j.total]}),C?n.jsx(zs,{className:"h-5 w-5 text-neutral-400"}):n.jsx(un,{className:"h-5 w-5 text-neutral-400"})]})]})}),C&&n.jsxs("div",{className:"px-4 pb-4 border-t border-cream-100",children:[v.status==="eliminated"&&v.episodes&&n.jsx("div",{className:"py-2 border-b border-cream-100",children:n.jsxs("p",{className:"text-red-600 text-sm",children:["Eliminated: Episode ",v.episodes.number,v.placement&&`  ${v.placement}${jte(v.placement)} place`]})}),v.status==="winner"&&n.jsx("div",{className:"py-2 border-b border-amber-100",children:n.jsx("p",{className:"text-amber-600 text-sm font-medium",children:"Sole Survivor"})}),n.jsxs("div",{className:"pt-3",children:[n.jsx("h4",{className:"text-sm font-semibold text-neutral-700 mb-2",children:"Episode Scores"}),j!=null&&j.byEpisode&&Object.keys(j.byEpisode).length>0?n.jsx("div",{className:"grid grid-cols-4 gap-2",children:Object.entries(j.byEpisode).sort(([S],[k])=>Number(S)-Number(k)).map(([S,k])=>n.jsxs("div",{className:"text-center p-2 bg-cream-50 rounded-lg",children:[n.jsxs("p",{className:"text-xs text-neutral-500",children:["Ep ",S]}),n.jsxs("p",{className:`font-bold ${Number(k)>=0?"text-green-600":"text-red-600"}`,children:[Number(k)>=0?"+":"",k]})]},S))}):n.jsx("p",{className:"text-neutral-400 text-sm",children:"No scores yet"})]}),(j==null?void 0:j.total)!==void 0&&n.jsxs("div",{className:"mt-3 pt-3 border-t border-cream-100 flex justify-between items-center",children:[n.jsx("span",{className:"text-sm font-medium text-neutral-600",children:"Total Points"}),n.jsxs("span",{className:`text-xl font-bold ${j.total>=0?"text-green-600":"text-red-600"}`,children:[j.total>=0?"+":"",j.total]})]})]})]},v.id)})}),(y==null?void 0:y.length)===0&&n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-8 border border-cream-200 text-center",children:[n.jsx($e,{className:"h-12 w-12 text-neutral-400 mx-auto mb-4"}),n.jsx("p",{className:"text-neutral-500",children:"No castaways found."})]})]})]})}function jte(e){const t=["th","st","nd","rd"],r=e%100;return t[(r-20)%10]||t[r]||t[0]}function Nte(){const{data:e}=re({queryKey:["current-user"],queryFn:async()=>{const{data:{user:u}}=await K.auth.getUser();return u}}),{data:t,isLoading:r}=re({queryKey:["my-payments"],queryFn:async()=>{if(!e)return[];const{data:u,error:h}=await K.from("payments").select("*, leagues(name)").eq("user_id",e.id).order("created_at",{ascending:!1});if(h)throw h;return u||[]},enabled:!!e}),s=u=>new Date(u).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),a=(u,h="usd")=>new Intl.NumberFormat("en-US",{style:"currency",currency:h.toUpperCase()}).format(u),i=u=>{switch(u){case"completed":return n.jsx(tt,{className:"h-5 w-5 text-green-600"});case"refunded":return n.jsx(Nn,{className:"h-5 w-5 text-amber-600"});case"failed":return n.jsx(Nn,{className:"h-5 w-5 text-red-600"});default:return n.jsx(Mt,{className:"h-5 w-5 text-neutral-400"})}},o=u=>{switch(u){case"completed":return"Completed";case"refunded":return"Refunded";case"failed":return"Failed";default:return"Pending"}},d=(t==null?void 0:t.filter(u=>u.status==="completed").reduce((u,h)=>u+(h.amount||0),0))||0;return r?n.jsxs(n.Fragment,{children:[n.jsx(Se,{}),n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center",children:n.jsx(me,{className:"h-8 w-8 text-burgundy-500 animate-spin"})})]}):n.jsxs(n.Fragment,{children:[n.jsx(Se,{}),n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 p-4 pb-24",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx(z,{to:"/profile",className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:n.jsx(st,{className:"h-5 w-5 text-neutral-600"})}),n.jsxs("div",{children:[n.jsxs("h1",{className:"text-2xl font-display font-bold text-neutral-800 flex items-center gap-2",children:[n.jsx(zb,{className:"h-6 w-6 text-burgundy-500"}),"Payment History"]}),n.jsx("p",{className:"text-neutral-500",children:"Your league payments"})]})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200 mb-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-neutral-500 text-sm",children:"Total Spent"}),n.jsx("p",{className:"text-3xl font-bold text-neutral-800",children:a(d)})]}),n.jsx("div",{className:"w-12 h-12 bg-burgundy-100 rounded-full flex items-center justify-center",children:n.jsx(ks,{className:"h-6 w-6 text-burgundy-500"})})]}),n.jsxs("p",{className:"text-neutral-500 text-sm mt-2",children:[(t==null?void 0:t.length)||0," transaction",(t==null?void 0:t.length)!==1?"s":""]})]}),n.jsxs("div",{className:"space-y-3",children:[t==null?void 0:t.map(u=>{var h;return n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-4 border border-cream-200",children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-neutral-800 font-medium",children:(h=u.leagues)==null?void 0:h.name}),n.jsx("p",{className:"text-neutral-500 text-sm",children:"League Entry Fee"})]}),n.jsx("div",{className:"text-right",children:n.jsxs("p",{className:`font-bold ${u.status==="refunded"?"text-amber-600":"text-neutral-800"}`,children:[u.status==="refunded"?"-":"",a(u.amount,u.currency)]})})]}),n.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-cream-200",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[i(u.status),n.jsx("span",{className:`text-sm ${u.status==="completed"?"text-green-600":u.status==="refunded"?"text-amber-600":u.status==="failed"?"text-red-600":"text-neutral-500"}`,children:o(u.status)})]}),n.jsx("p",{className:"text-neutral-400 text-sm",children:s(u.created_at)})]}),u.status==="refunded"&&u.refunded_at&&n.jsxs("p",{className:"text-amber-600 text-xs mt-2",children:["Refunded on ",s(u.refunded_at)]})]},u.id)}),(t==null?void 0:t.length)===0&&n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-8 border border-cream-200 text-center",children:[n.jsx(zb,{className:"h-12 w-12 text-neutral-400 mx-auto mb-4"}),n.jsx("h3",{className:"text-neutral-800 font-medium mb-2",children:"No Payments Yet"}),n.jsx("p",{className:"text-neutral-500 text-sm",children:"Join a paid league to see your payment history here."})]})]}),n.jsx("div",{className:"mt-6 p-4 bg-cream-50 rounded-2xl border border-cream-200",children:n.jsxs("p",{className:"text-neutral-600 text-sm",children:[n.jsx("strong",{className:"text-neutral-800",children:"Questions about a payment?"})," Contact us at"," ",n.jsx("a",{href:"mailto:support@realitygamesfantasyleague.com",className:"text-burgundy-500",children:"support@realitygamesfantasyleague.com"})]})})]})]})}function Ste(){var u,h,p,f,x,y,b,w,v,j,C,S;const{code:e}=On(),[t,r]=T.useState(!1),{data:s,isLoading:a,error:i}=re({queryKey:["public-league",e],queryFn:async()=>{if(!e)throw new Error("No league code");const{data:k,error:R}=await K.from("leagues").select("*, seasons(*)").eq("code",e).eq("is_public",!0).single();if(R)throw R;return k},enabled:!!e}),{data:o}=re({queryKey:["public-league-members",s==null?void 0:s.id],queryFn:async()=>{if(!(s!=null&&s.id))throw new Error("No league ID");const{data:k,error:R}=await K.from("league_members").select("*, users(display_name, avatar_url)").eq("league_id",s.id).order("total_points",{ascending:!1});if(R)throw R;return k||[]},enabled:!!(s!=null&&s.id)}),d=()=>{navigator.clipboard.writeText(window.location.href),r(!0),setTimeout(()=>r(!1),2e3)};return a?n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center",children:n.jsx(me,{className:"h-8 w-8 text-burgundy-500 animate-spin"})}):i||!s?n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center p-4",children:n.jsxs("div",{className:"text-center",children:[n.jsx(Ke,{className:"h-16 w-16 text-neutral-400 mx-auto mb-4"}),n.jsx("h1",{className:"text-2xl font-display font-bold text-neutral-800 mb-2",children:"Leaderboard Not Found"}),n.jsx("p",{className:"text-neutral-500 mb-6",children:"This league doesn't exist or isn't public."}),n.jsx(z,{to:"/",className:"btn btn-primary inline-block",children:"Go Home"})]})}):n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200",children:[n.jsx("div",{className:"bg-white/80 backdrop-blur-sm border-b border-cream-200 sticky top-0 z-10",children:n.jsx("div",{className:"max-w-2xl mx-auto px-4 py-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-xl font-display font-bold text-neutral-800",children:s.name}),n.jsxs("p",{className:"text-neutral-500 text-sm",children:["Season ",(u=s.seasons)==null?void 0:u.number,"  ",(o==null?void 0:o.length)||0," players"]})]}),n.jsxs("button",{onClick:d,className:"flex items-center gap-2 px-3 py-2 bg-burgundy-100 hover:bg-burgundy-200 text-burgundy-600 rounded-xl transition-colors",children:[n.jsx(Mp,{className:"h-4 w-4"}),t?"Copied!":"Share"]})]})})}),n.jsxs("div",{className:"max-w-2xl mx-auto p-4",children:[o&&o.length>=3&&n.jsxs("div",{className:"flex items-end justify-center gap-2 mb-8 pt-8",children:[n.jsxs("div",{className:"flex flex-col items-center",children:[n.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-full flex items-center justify-center mb-2 border border-gray-300",children:n.jsx("span",{className:"text-2xl",children:""})}),n.jsx("p",{className:"text-neutral-800 font-medium text-sm truncate max-w-20",children:(p=(h=o[1])==null?void 0:h.users)==null?void 0:p.display_name}),n.jsxs("p",{className:"text-neutral-500 text-xs",children:[((f=o[1])==null?void 0:f.total_points)||0," pts"]}),n.jsx("div",{className:"w-20 h-20 bg-gray-200 rounded-t-xl mt-2"})]}),n.jsxs("div",{className:"flex flex-col items-center -mt-8",children:[n.jsx(tr,{className:"h-8 w-8 text-burgundy-500 mb-1"}),n.jsx("div",{className:"w-20 h-20 bg-burgundy-100 rounded-full flex items-center justify-center mb-2 border-2 border-burgundy-500",children:n.jsx("span",{className:"text-3xl",children:""})}),n.jsx("p",{className:"text-neutral-800 font-bold text-sm truncate max-w-24",children:(y=(x=o[0])==null?void 0:x.users)==null?void 0:y.display_name}),n.jsxs("p",{className:"text-burgundy-500 text-xs font-medium",children:[((b=o[0])==null?void 0:b.total_points)||0," pts"]}),n.jsx("div",{className:"w-24 h-28 bg-burgundy-100 rounded-t-xl mt-2"})]}),n.jsxs("div",{className:"flex flex-col items-center",children:[n.jsx("div",{className:"w-16 h-16 bg-amber-100 rounded-full flex items-center justify-center mb-2 border border-amber-300",children:n.jsx("span",{className:"text-2xl",children:""})}),n.jsx("p",{className:"text-neutral-800 font-medium text-sm truncate max-w-20",children:(v=(w=o[2])==null?void 0:w.users)==null?void 0:v.display_name}),n.jsxs("p",{className:"text-neutral-500 text-xs",children:[((j=o[2])==null?void 0:j.total_points)||0," pts"]}),n.jsx("div",{className:"w-20 h-16 bg-amber-100 rounded-t-xl mt-2"})]})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200",children:[n.jsx("div",{className:"px-4 py-3 border-b border-cream-200",children:n.jsxs("h2",{className:"text-lg font-display font-bold text-neutral-800 flex items-center gap-2",children:[n.jsx(Ke,{className:"h-5 w-5 text-burgundy-500"}),"Full Standings"]})}),n.jsx("div",{className:"divide-y divide-cream-100",children:o==null?void 0:o.map((k,R)=>{var E,I;return n.jsxs("div",{className:`flex items-center gap-3 px-4 py-3 ${R<3?"bg-burgundy-50":""}`,children:[n.jsx("div",{className:"w-8 h-8 flex items-center justify-center",children:R===0?n.jsx(tr,{className:"h-5 w-5 text-burgundy-500"}):n.jsx("span",{className:`font-bold ${R<3?"text-burgundy-500":"text-neutral-400"}`,children:R+1})}),(E=k.users)!=null&&E.avatar_url?n.jsx("img",{src:k.users.avatar_url,alt:"",className:"w-8 h-8 rounded-full object-cover"}):n.jsx("div",{className:"w-8 h-8 bg-cream-100 rounded-full flex items-center justify-center border border-cream-200",children:n.jsx($e,{className:"h-4 w-4 text-neutral-400"})}),n.jsx("div",{className:"flex-1 min-w-0",children:n.jsx("p",{className:"text-neutral-800 font-medium truncate",children:(I=k.users)==null?void 0:I.display_name})}),n.jsx("p",{className:`font-bold ${R===0?"text-burgundy-500":"text-neutral-800"}`,children:k.total_points||0})]},k.id)})})]}),n.jsxs("div",{className:"mt-6 bg-burgundy-50 border border-burgundy-200 rounded-2xl p-6 text-center",children:[n.jsx("h3",{className:"text-neutral-800 font-display font-bold mb-2",children:"Join the Competition"}),n.jsx("p",{className:"text-neutral-600 text-sm mb-4",children:"Create your own league and compete with friends!"}),n.jsx(z,{to:"/signup",className:"btn btn-primary inline-block",children:"Sign Up Free"})]}),n.jsxs("div",{className:"mt-8 text-center text-neutral-500 text-sm pb-8",children:[n.jsx("p",{children:"Reality Games Fantasy League"}),n.jsxs("p",{children:["Season ",(C=s.seasons)==null?void 0:C.number,": ",(S=s.seasons)==null?void 0:S.name]})]})]})]})}function kte(){const{user:e}=dt(),t=Et(),[r,s]=T.useState(""),[a,i]=T.useState(!0),o=T.useRef(null),d=T.useRef(null),{data:u}=re({queryKey:["global-league"],queryFn:async()=>{const{data:w,error:v}=await K.from("leagues").select("id").eq("is_global",!0).single();if(v)throw v;return w}}),h=u==null?void 0:u.id,{data:p,isLoading:f}=re({queryKey:["global-chat-messages",h],queryFn:async()=>{if(!h)return[];const{data:w,error:v}=await K.from("league_messages").select(`
          id,
          user_id,
          content,
          created_at,
          user:users (
            display_name,
            avatar_url
          )
        `).eq("league_id",h).order("created_at",{ascending:!1}).limit(50);if(v)throw v;return w.reverse()},enabled:!!h,refetchInterval:1e4}),x=De({mutationFn:async w=>{if(!h)throw new Error("No global league found");const{error:v}=await K.from("league_messages").insert({league_id:h,user_id:e.id,content:w});if(v)throw v},onSuccess:()=>{var w;s(""),t.invalidateQueries({queryKey:["global-chat-messages",h]}),(w=d.current)==null||w.focus()}});T.useEffect(()=>{if(!h)return;const w=K.channel(`global-chat-${h}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"league_messages",filter:`league_id=eq.${h}`},()=>{t.invalidateQueries({queryKey:["global-chat-messages",h]})}).subscribe();return()=>{K.removeChannel(w)}},[h,t]),T.useEffect(()=>{var w;a&&((w=o.current)==null||w.scrollIntoView({behavior:"smooth"}))},[p,a]);const y=w=>{w.preventDefault(),r.trim()&&!x.isPending&&e&&x.mutate(r.trim())},b=w=>new Date(w).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});return h?n.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 overflow-hidden",children:[n.jsxs("button",{onClick:()=>i(!a),className:"w-full px-5 py-4 border-b border-cream-200 bg-cream-50 flex items-center justify-between hover:bg-cream-100 transition-colors",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Bs,{className:"h-5 w-5 text-burgundy-500"}),n.jsx("h3",{className:"font-semibold text-neutral-800",children:"Global Chat"}),n.jsxs("span",{className:"text-sm text-neutral-400",children:[(p==null?void 0:p.length)||0," messages"]})]}),a?n.jsx(zs,{className:"h-5 w-5 text-neutral-400"}):n.jsx(un,{className:"h-5 w-5 text-neutral-400"})]}),a&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"h-64 overflow-y-auto p-4 space-y-3 bg-cream-50/50",children:[f?n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsx(me,{className:"h-6 w-6 text-burgundy-500 animate-spin"})}):(p==null?void 0:p.length)===0?n.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[n.jsx(Bs,{className:"h-10 w-10 text-neutral-300 mb-2"}),n.jsx("p",{className:"text-neutral-500 text-sm",children:"No messages yet"}),n.jsx("p",{className:"text-xs text-neutral-400",children:"Be the first to say something!"})]}):p==null?void 0:p.map(w=>{var j,C,S,k;const v=w.user_id===(e==null?void 0:e.id);return n.jsxs("div",{className:`flex gap-2 ${v?"flex-row-reverse":""}`,children:[n.jsx("div",{className:`w-7 h-7 rounded-full flex-shrink-0 flex items-center justify-center text-white text-xs font-semibold ${v?"bg-burgundy-500":"bg-neutral-400"}`,children:((S=(C=(j=w.user)==null?void 0:j.display_name)==null?void 0:C.charAt(0))==null?void 0:S.toUpperCase())||"?"}),n.jsxs("div",{className:`max-w-[75%] ${v?"text-right":""}`,children:[!v&&n.jsx("p",{className:"text-xs text-neutral-500 mb-0.5 px-1",children:((k=w.user)==null?void 0:k.display_name)||"Unknown"}),n.jsx("div",{className:`inline-block px-3 py-1.5 rounded-2xl text-sm ${v?"bg-burgundy-500 text-white rounded-br-md":"bg-white text-neutral-800 rounded-bl-md border border-cream-200"}`,children:w.content}),n.jsx("p",{className:"text-xs text-neutral-400 mt-0.5 px-1",children:b(w.created_at)})]})]},w.id)}),n.jsx("div",{ref:o})]}),e?n.jsx("form",{onSubmit:y,className:"p-3 border-t border-cream-200 bg-white",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{ref:d,type:"text",value:r,onChange:w=>s(w.target.value),placeholder:"Say something...",className:"flex-1 px-3 py-2 text-sm rounded-full border border-cream-300 bg-cream-50 focus:outline-none focus:ring-2 focus:ring-burgundy-500 focus:border-transparent",disabled:x.isPending}),n.jsx("button",{type:"submit",disabled:!r.trim()||x.isPending,className:"w-9 h-9 rounded-full bg-burgundy-500 text-white flex items-center justify-center hover:bg-burgundy-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:x.isPending?n.jsx(me,{className:"h-4 w-4 animate-spin"}):n.jsx(Fu,{className:"h-4 w-4"})})]})}):n.jsx("div",{className:"p-3 border-t border-cream-200 bg-cream-50 text-center",children:n.jsx("p",{className:"text-sm text-neutral-500",children:"Sign in to join the conversation"})})]})]}):null}const _m=50;function Ete(){const{user:e}=dt(),[t,r]=T.useState(0),{data:s,isLoading:a,isFetching:i}=re({queryKey:["global-leaderboard",t],queryFn:async()=>{const y=await fetch(`/api/leagues/global-leaderboard?limit=${_m}&offset=${t}`);if(!y.ok)throw new Error("Failed to fetch leaderboard");return y.json()},placeholderData:y=>y}),o=s==null?void 0:s.leaderboard,d=s==null?void 0:s.activeSeason,u=s==null?void 0:s.summary,h=s==null?void 0:s.pagination,p=({lit:y,size:b="normal"})=>{const w=b==="large"?"h-8 w-8":"h-5 w-5";return y?n.jsxs("div",{className:"relative",children:[n.jsx(bn,{className:`${w} text-orange-500`}),n.jsx("div",{className:"absolute -top-1 left-1/2 -translate-x-1/2",children:n.jsx("div",{className:"w-2 h-2 bg-yellow-400 rounded-full animate-pulse opacity-80"})})]}):n.jsx("div",{className:"relative",children:n.jsx(bn,{className:`${w} text-neutral-300`})})},f=y=>y===1?{bg:"bg-gradient-to-r from-yellow-100 to-amber-50",border:"border-yellow-300",text:"text-yellow-700",icon:n.jsx(fr,{className:"h-6 w-6 text-yellow-500"})}:y===2?{bg:"bg-gradient-to-r from-gray-100 to-slate-50",border:"border-gray-300",text:"text-gray-600",icon:n.jsx(fr,{className:"h-6 w-6 text-gray-400"})}:y===3?{bg:"bg-gradient-to-r from-orange-100 to-amber-50",border:"border-orange-300",text:"text-orange-700",icon:n.jsx(fr,{className:"h-6 w-6 text-orange-400"})}:{bg:"bg-white",border:"border-cream-200",text:"text-neutral-600",icon:null},x=d?d.number===50?"Survivor Season 50: In the Hands of the Fans":`Season ${d.number}: ${d.name}`:"Global Leaderboard";return n.jsxs("div",{className:"max-w-4xl mx-auto pb-24",children:[n.jsxs("div",{className:"mb-8",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(Ke,{className:"h-8 w-8 text-burgundy-500"}),n.jsx("h1",{className:"text-3xl font-display font-bold text-neutral-800",children:x})]}),n.jsx("p",{className:"text-neutral-500",children:"Rankings weighted by performance and number of leagues"})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-8",children:[n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-4 border border-cream-200 text-center",children:[n.jsx($e,{className:"h-6 w-6 text-burgundy-500 mx-auto mb-2"}),n.jsx("p",{className:"text-2xl font-bold text-neutral-800",children:(u==null?void 0:u.totalPlayers)||0}),n.jsx("p",{className:"text-neutral-500 text-sm",children:"Total Players"})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-4 border border-cream-200 text-center",children:[n.jsx(Pr,{className:"h-6 w-6 text-green-500 mx-auto mb-2"}),n.jsx("p",{className:"text-2xl font-bold text-neutral-800",children:(u==null?void 0:u.topScore)||0}),n.jsx("p",{className:"text-neutral-500 text-sm",children:"Top Score"})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-4 border border-cream-200 text-center",children:[n.jsx(bn,{className:"h-6 w-6 text-orange-500 mx-auto mb-2"}),n.jsx("p",{className:"text-2xl font-bold text-neutral-800",children:(u==null?void 0:u.activeTorches)||0}),n.jsx("p",{className:"text-neutral-500 text-sm",children:"Torches Lit"})]})]}),t===0&&o&&o.length>=3&&n.jsxs("div",{className:"mb-8",children:[n.jsx("h2",{className:"text-lg font-semibold text-neutral-700 mb-4",children:"Top Players"}),n.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[n.jsxs("div",{className:"bg-gradient-to-b from-gray-100 to-gray-50 rounded-2xl p-6 border-2 border-gray-200 text-center mt-8",children:[n.jsx("div",{className:"flex justify-center mb-3",children:n.jsx(p,{lit:!o[1].hasEliminatedCastaway,size:"large"})}),n.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full mx-auto mb-2 flex items-center justify-center",children:n.jsx("span",{className:"text-gray-600 font-bold text-lg",children:"2"})}),n.jsx("p",{className:"font-semibold text-neutral-800 truncate",children:o[1].displayName}),n.jsx("p",{className:"text-2xl font-display text-gray-600 mt-1",children:o[1].weightedScore}),n.jsxs("p",{className:"text-xs text-neutral-400",children:[o[1].leagueCount," ",o[1].leagueCount===1?"league":"leagues"]})]}),n.jsxs("div",{className:"bg-gradient-to-b from-yellow-100 to-amber-50 rounded-2xl p-6 border-2 border-yellow-300 text-center shadow-elevated",children:[n.jsx("div",{className:"flex justify-center mb-3",children:n.jsx(p,{lit:!o[0].hasEliminatedCastaway,size:"large"})}),n.jsx("div",{className:"w-14 h-14 bg-yellow-300 rounded-full mx-auto mb-2 flex items-center justify-center",children:n.jsx(Ke,{className:"h-7 w-7 text-yellow-700"})}),n.jsx("p",{className:"font-bold text-neutral-800 truncate",children:o[0].displayName}),n.jsx("p",{className:"text-3xl font-display text-yellow-700 mt-1",children:o[0].weightedScore}),n.jsxs("p",{className:"text-xs text-neutral-500",children:[o[0].leagueCount," ",o[0].leagueCount===1?"league":"leagues"]})]}),n.jsxs("div",{className:"bg-gradient-to-b from-orange-100 to-amber-50 rounded-2xl p-6 border-2 border-orange-200 text-center mt-8",children:[n.jsx("div",{className:"flex justify-center mb-3",children:n.jsx(p,{lit:!o[2].hasEliminatedCastaway,size:"large"})}),n.jsx("div",{className:"w-12 h-12 bg-orange-200 rounded-full mx-auto mb-2 flex items-center justify-center",children:n.jsx("span",{className:"text-orange-600 font-bold text-lg",children:"3"})}),n.jsx("p",{className:"font-semibold text-neutral-800 truncate",children:o[2].displayName}),n.jsx("p",{className:"text-2xl font-display text-orange-600 mt-1",children:o[2].weightedScore}),n.jsxs("p",{className:"text-xs text-neutral-400",children:[o[2].leagueCount," ",o[2].leagueCount===1?"league":"leagues"]})]})]})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated overflow-hidden border border-cream-200",children:[n.jsx("div",{className:"p-5 border-b border-cream-100",children:n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"font-semibold text-neutral-800",children:"All Players"}),n.jsx("p",{className:"text-sm text-neutral-500",children:"Ranked by weighted score (more leagues = more accurate ranking)"})]}),n.jsxs("div",{className:"flex items-center gap-4 text-sm text-neutral-500 bg-cream-50 px-3 py-2 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx(p,{lit:!0}),n.jsx("span",{children:"Active"})]}),n.jsx("div",{className:"w-px h-4 bg-neutral-300"}),n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx(p,{lit:!1}),n.jsx("span",{children:"Eliminated"})]})]})]})}),n.jsx("div",{className:"p-5 border-b border-cream-100",children:n.jsx(kte,{})}),a?n.jsxs("div",{className:"p-12 text-center",children:[n.jsx("div",{className:"w-8 h-8 mx-auto border-2 border-burgundy-500 border-t-transparent rounded-full animate-spin"}),n.jsx("p",{className:"text-neutral-500 mt-4",children:"Loading rankings..."})]}):(o==null?void 0:o.length)===0?n.jsxs("div",{className:"p-12 text-center",children:[n.jsx(Ke,{className:"h-12 w-12 text-neutral-300 mx-auto mb-4"}),n.jsx("p",{className:"text-neutral-500",children:"No players yet. Join a league to get started!"}),n.jsx(z,{to:"/leagues",className:"btn btn-primary mt-4 inline-block",children:"Browse Leagues"})]}):n.jsx("div",{className:"divide-y divide-cream-100",children:o==null?void 0:o.map((y,b)=>{const w=t+b+1,v=f(w),j=y.userId===(e==null?void 0:e.id);return n.jsxs("div",{className:`flex items-center gap-4 p-4 transition-colors ${j?"bg-burgundy-50 border-l-4 border-burgundy-500":w<=3?v.bg:"hover:bg-cream-50"}`,children:[n.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold ${w<=3?"":"bg-cream-100"} ${v.text}`,children:v.icon||w}),n.jsx("div",{className:"flex-shrink-0",children:n.jsx(p,{lit:!y.hasEliminatedCastaway})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("p",{className:`font-semibold truncate ${j?"text-burgundy-700":"text-neutral-800"}`,children:[y.displayName,j&&n.jsx("span",{className:"ml-2 text-xs text-burgundy-500 font-normal",children:"(You)"})]}),n.jsxs("p",{className:"text-sm text-neutral-400",children:[y.leagueCount," ",y.leagueCount===1?"league":"leagues"," "," ",y.totalPoints," total pts"]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:`text-2xl font-display ${w<=3?v.text:"text-neutral-800"}`,children:y.weightedScore}),n.jsx("p",{className:"text-xs text-neutral-400",children:"score"})]})]},y.userId)})})]}),h&&n.jsxs("div",{className:"mt-6 flex flex-col items-center gap-4",children:[n.jsxs("p",{className:"text-sm text-neutral-500",children:["Showing ",t+1,"-",Math.min(t+_m,h.total)," of"," ",h.total," players"]}),n.jsxs("div",{className:"flex gap-3",children:[t>0&&n.jsx("button",{onClick:()=>r(Math.max(0,t-_m)),disabled:i,className:"btn btn-secondary",children:"Previous"}),h.hasMore&&n.jsx("button",{onClick:()=>r(t+_m),disabled:i,className:"btn btn-primary flex items-center gap-2",children:i?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Loading..."]}):n.jsxs(n.Fragment,{children:["Load More",n.jsx(un,{className:"h-4 w-4"})]})})]})]}),e&&o&&o.length>0&&(()=>{const y=o.findIndex(v=>v.userId===e.id);if(y===-1)return null;const b=t+y+1;if(b<=10)return null;const w=o[y];return n.jsx("div",{className:"mt-6 bg-gradient-to-r from-burgundy-500 to-burgundy-600 rounded-2xl p-6 text-white shadow-elevated",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center",children:n.jsxs("span",{className:"font-bold text-xl",children:["#",b]})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-burgundy-100 text-sm",children:"Your Position"}),n.jsx("p",{className:"text-xl font-semibold",children:w.displayName})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-3xl font-display",children:w.weightedScore}),n.jsx("p",{className:"text-burgundy-100 text-sm",children:"score"})]})]})})})()]})}const S2=["from-burgundy-500 to-red-600","from-blue-500 to-indigo-600","from-green-500 to-emerald-600","from-purple-500 to-violet-600","from-orange-500 to-amber-600","from-pink-500 to-rose-500","from-teal-500 to-cyan-600"];function Cte(e){const t=e.split("").reduce((r,s)=>r+s.charCodeAt(0),0);return S2[t%S2.length]}function Tte(){const e=ns(),{user:t}=dt(),[r,s]=T.useState(""),[a,i]=T.useState(""),[o,d]=T.useState("all"),{data:u,isLoading:h}=re({queryKey:["all-leagues"],queryFn:async()=>{const{data:j,error:C}=await K.from("leagues").select(`
          *,
          commissioner:users!leagues_commissioner_id_fkey (display_name)
        `).eq("is_global",!1).order("created_at",{ascending:!1});if(C)throw C;return j||[]}}),{data:p}=re({queryKey:["league-member-counts"],queryFn:async()=>{const{data:j,error:C}=await K.from("league_members").select("league_id");if(C)throw C;const S={};return j==null||j.forEach(k=>{S[k.league_id]=(S[k.league_id]||0)+1}),S}}),{data:f}=re({queryKey:["my-memberships",t==null?void 0:t.id],queryFn:async()=>{if(!(t!=null&&t.id))return[];const{data:j,error:C}=await K.from("league_members").select("league_id").eq("user_id",t.id);if(C)throw C;return(j==null?void 0:j.map(S=>S.league_id))||[]},enabled:!!(t!=null&&t.id)}),x=u==null?void 0:u.filter(j=>{var R,E;const C=j.name.toLowerCase().includes(r.toLowerCase())||((E=(R=j.commissioner)==null?void 0:R.display_name)==null?void 0:E.toLowerCase().includes(r.toLowerCase()))||j.code.toLowerCase().includes(r.toLowerCase()),S=f==null?void 0:f.includes(j.id),k=j.commissioner_id===(t==null?void 0:t.id);return!j.is_public&&!S&&!k||o==="commissioner"&&!k||o==="member"&&!S?!1:C}),y=()=>{a.trim()&&e(`/join/${a.trim().toUpperCase()}`)},b=j=>f==null?void 0:f.includes(j),w=(u==null?void 0:u.filter(j=>j.commissioner_id===(t==null?void 0:t.id)).length)||0,v=(f==null?void 0:f.length)||0;return n.jsxs("div",{className:"max-w-6xl mx-auto pb-24",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-8",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-3xl font-display font-bold text-neutral-800 flex items-center gap-3",children:[n.jsx("span",{className:"text-3xl",children:""})," My Leagues"]}),n.jsx("p",{className:"text-neutral-500 mt-1",children:"Manage your fantasy leagues and track standings"})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:()=>{const j=document.getElementById("join-modal");j&&j.classList.toggle("hidden")},className:"px-4 py-2 bg-white border border-cream-200 text-neutral-700 rounded-xl font-medium hover:bg-cream-50 transition shadow-sm",children:"Join League"}),n.jsxs(z,{to:"/leagues/create",className:"px-4 py-2 bg-burgundy-500 text-white rounded-xl font-semibold hover:bg-burgundy-600 transition shadow-lg flex items-center gap-2",children:[n.jsx($o,{className:"h-5 w-5"}),"Create League"]})]})]}),n.jsx("div",{id:"join-modal",className:"hidden bg-white rounded-2xl shadow-card p-6 border border-cream-200 mb-6 animate-fade-in",children:n.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("h2",{className:"font-semibold text-neutral-800 flex items-center gap-2",children:[n.jsx(Mn,{className:"h-5 w-5 text-burgundy-500"}),"Have an invite code?"]}),n.jsx("p",{className:"text-neutral-500 text-sm mt-1",children:"Enter your 6-character code to join a private league"})]}),n.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[n.jsx("input",{type:"text",value:a,onChange:j=>i(j.target.value.toUpperCase()),placeholder:"ABC123",maxLength:6,className:"input font-mono text-center tracking-widest uppercase w-32"}),n.jsx("button",{onClick:y,disabled:a.length!==6,className:"btn btn-primary disabled:opacity-50",children:"Join"})]})]})}),n.jsxs("div",{className:"bg-white rounded-2xl p-4 mb-6 border border-cream-200 shadow-sm flex flex-col md:flex-row gap-4",children:[n.jsxs("div",{className:"flex-1 relative",children:[n.jsx(Oi,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-neutral-400"}),n.jsx("input",{type:"text",value:r,onChange:j=>s(j.target.value),placeholder:"Search leagues...",className:"w-full pl-10 pr-4 py-2 rounded-xl border border-cream-200 bg-cream-50 focus:outline-none focus:ring-2 focus:ring-burgundy-500 focus:border-transparent"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>d("all"),className:`px-4 py-2 rounded-xl font-medium transition-all ${o==="all"?"bg-burgundy-500 text-white":"bg-cream-100 text-neutral-600 hover:bg-cream-200"}`,children:"All"}),n.jsxs("button",{onClick:()=>d("commissioner"),className:`px-4 py-2 rounded-xl font-medium transition-all flex items-center gap-2 ${o==="commissioner"?"bg-burgundy-500 text-white":"bg-cream-100 text-neutral-600 hover:bg-cream-200"}`,children:[n.jsx(tr,{className:"h-4 w-4"}),"Commissioner ",w>0&&`(${w})`]}),n.jsxs("button",{onClick:()=>d("member"),className:`px-4 py-2 rounded-xl font-medium transition-all flex items-center gap-2 ${o==="member"?"bg-burgundy-500 text-white":"bg-cream-100 text-neutral-600 hover:bg-cream-200"}`,children:[n.jsx($e,{className:"h-4 w-4"}),"Member ",v>0&&`(${v})`]})]})]}),h?n.jsxs("div",{className:"flex flex-col items-center justify-center py-16",children:[n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx(me,{className:"h-8 w-8 text-burgundy-500 animate-spin"})}),n.jsx("p",{className:"text-neutral-500",children:"Loading leagues..."})]}):n.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-cream-200 overflow-hidden",children:[n.jsx("div",{className:"bg-cream-50 px-4 sm:px-6 py-4 border-b border-cream-200",children:n.jsxs("div",{className:"grid grid-cols-12 gap-4 text-sm font-semibold text-neutral-600",children:[n.jsx("div",{className:"col-span-4",children:"League"}),n.jsx("div",{className:"col-span-2 text-center",children:"Members"}),n.jsx("div",{className:"col-span-2 text-center",children:"Role"}),n.jsx("div",{className:"col-span-2 text-center",children:"Donation"}),n.jsx("div",{className:"col-span-2 text-right",children:"Status"})]})}),n.jsxs("div",{className:"divide-y divide-cream-100",children:[x==null?void 0:x.map(j=>{var I;const C=(p==null?void 0:p[j.id])||0,S=b(j.id),k=C>=j.max_players,R=j.commissioner_id===(t==null?void 0:t.id),E=Cte(j.id);return n.jsx("div",{className:"px-4 sm:px-6 py-4 hover:bg-cream-50 transition cursor-pointer group",onClick:()=>e(`/leagues/${j.id}`),children:n.jsxs("div",{className:"grid grid-cols-12 gap-4 items-center",children:[n.jsxs("div",{className:"col-span-4 flex items-center gap-3",children:[n.jsx("div",{className:`w-10 h-10 rounded-xl bg-gradient-to-br ${E} flex items-center justify-center text-white font-bold`,children:j.name.charAt(0).toUpperCase()}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-neutral-800 group-hover:text-burgundy-600",children:j.name}),n.jsx("p",{className:"text-xs text-neutral-400 font-mono",children:j.code}),n.jsx("p",{className:"text-xs text-neutral-500",children:((I=j.commissioner)==null?void 0:I.display_name)||"Commissioner"})]})]}),n.jsx("div",{className:"col-span-2 text-center",children:n.jsxs("span",{className:"text-neutral-700",children:[C,"/",j.max_players]})}),n.jsx("div",{className:"col-span-2 text-center",children:R?n.jsxs("span",{className:"inline-flex items-center gap-1 text-amber-700 bg-amber-100 px-2 py-1 rounded-full text-xs font-semibold",children:[n.jsx(tr,{className:"h-3 w-3"}),"Commissioner"]}):S?n.jsx("span",{className:"inline-flex items-center gap-1 text-blue-700 bg-blue-100 px-2 py-1 rounded-full text-xs font-semibold",children:"Member"}):j.is_public?n.jsxs("span",{className:"inline-flex items-center gap-1 text-teal-700 bg-teal-50 px-2 py-1 rounded-full text-xs font-semibold border border-teal-200",children:[n.jsx(Sa,{className:"h-3 w-3"}),"Public"]}):n.jsxs("span",{className:"inline-flex items-center gap-1 text-purple-700 bg-purple-50 px-2 py-1 rounded-full text-xs font-semibold border border-purple-200",children:[n.jsx(Mn,{className:"h-3 w-3"}),"Private"]})}),n.jsx("div",{className:"col-span-2 text-center",children:j.require_donation&&j.donation_amount?n.jsxs("span",{className:"text-emerald-700 bg-emerald-50 px-2 py-1 rounded-full text-xs font-bold border border-emerald-200",children:["$",j.donation_amount.toFixed(0)]}):n.jsx("span",{className:"text-neutral-400 text-sm",children:"Free"})}),n.jsx("div",{className:"col-span-2 text-right",children:n.jsxs("div",{className:"flex items-center justify-end gap-2",children:[n.jsxs("span",{className:`inline-flex items-center gap-1 text-sm font-medium ${j.status==="active"?"text-green-600":j.status==="drafting"?"text-amber-600":"text-neutral-500"}`,children:[n.jsx("span",{className:`w-2 h-2 rounded-full ${j.status==="active"?"bg-green-500":j.status==="drafting"?"bg-amber-400":"bg-neutral-300"}`}),j.status||"unknown"]}),!S&&!k&&n.jsxs(z,{to:`/join/${j.code}`,onClick:M=>M.stopPropagation(),className:"text-burgundy-600 font-semibold text-sm inline-flex items-center gap-1",children:["Join ",n.jsx(Ir,{className:"h-4 w-4"})]}),S&&n.jsxs(z,{to:`/leagues/${j.id}`,onClick:M=>M.stopPropagation(),className:"text-burgundy-600 font-semibold text-sm inline-flex items-center gap-1",children:["View ",n.jsx(Ir,{className:"h-4 w-4"})]}),k&&!S&&n.jsx("span",{className:"text-xs text-red-500 font-semibold",children:"Full"})]})})]})},j.id)}),(x==null?void 0:x.length)===0&&n.jsx("div",{className:"px-6 py-10 text-center text-neutral-500",children:"No leagues found."})]})]})]})}function Rte(e,t){const[r,s]=T.useState(e);return T.useEffect(()=>{const a=setTimeout(()=>s(e),t);return()=>clearTimeout(a)},[e,t]),r}function Ite({search:e,onSearchChange:t,filter:r,onFilterChange:s,sortBy:a,onSortByChange:i}){const[o,d]=T.useState(e),u=T.useRef(!0),h=Rte(o,300);T.useEffect(()=>{if(u.current){u.current=!1;return}t(h)},[h,t]),T.useEffect(()=>{d(e)},[e]);const p=T.useCallback(x=>{const y=x.target.value;["all","active","eliminated"].includes(y)&&s(y)},[s]),f=T.useCallback(x=>{const y=x.target.value;["name","points","status"].includes(y)&&i(y)},[i]);return n.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx(Oi,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-neutral-400"}),n.jsx("input",{type:"text",value:o,onChange:x=>d(x.target.value),placeholder:"Search castaways by name, occupation, or hometown...",className:"input pl-10 w-full","aria-label":"Search castaways"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("select",{value:r,onChange:p,className:"input px-3 py-2","aria-label":"Filter by status",children:[n.jsx("option",{value:"all",children:"All Status"}),n.jsx("option",{value:"active",children:"Active Only"}),n.jsx("option",{value:"eliminated",children:"Eliminated"})]}),n.jsxs("select",{value:a,onChange:f,className:"input px-3 py-2","aria-label":"Sort by",children:[n.jsx("option",{value:"name",children:"Sort by Name"}),n.jsx("option",{value:"points",children:"Sort by Points"}),n.jsx("option",{value:"status",children:"Sort by Status"})]})]})]})}function Pte({castaway:e,stats:t,isExpanded:r,onToggleExpand:s}){var o,d;const a=u=>{const h=u%100;if(h>=11&&h<=13)return u+"th";const p=u%10;return p===1?u+"st":p===2?u+"nd":p===3?u+"rd":u+"th"},i=u=>{switch(u){case"Vatu":return"#7C3AED";case"Kalo":return"#0D9488";case"Cila":return"#EA580C";default:return"#6B7280"}};return n.jsxs("div",{className:`bg-white rounded-xl border-2 overflow-hidden hover:shadow-lg transition group cursor-pointer ${e.status==="eliminated"?"border-cream-200 opacity-60":e.status==="winner"?"border-yellow-300 ring-2 ring-yellow-100":"border-cream-200"}`,children:[n.jsxs("div",{className:`aspect-square relative ${e.status==="eliminated"?"grayscale":""}`,children:[n.jsx("img",{src:Hn(e.name,e.photo_url),alt:e.name,className:"w-full h-full object-cover",onError:u=>{const h=u.target;e.photo_url&&!h.src.includes("dicebear")&&(h.src=Hn(e.name,null))}}),n.jsx("div",{className:"absolute top-2 right-2",children:e.status==="active"?n.jsx("span",{className:"bg-green-500 text-white text-xs font-bold px-2 py-1 rounded-full",children:"ACTIVE"}):e.status==="winner"?n.jsxs("span",{className:"bg-yellow-500 text-yellow-900 text-xs font-bold px-2 py-1 rounded-full flex items-center gap-1",children:[n.jsx(Ke,{className:"h-3 w-3"})," WINNER"]}):n.jsxs("span",{className:"bg-neutral-500 text-white text-xs font-bold px-2 py-1 rounded-full",children:["EP ",((o=e.episodes)==null?void 0:o.number)||"?"]})})]}),n.jsxs("div",{className:"p-3 text-center",children:[n.jsx("p",{className:`font-semibold truncate ${e.status==="eliminated"?"text-neutral-500":"text-neutral-800"}`,children:e.name}),e.occupation&&n.jsx("p",{className:"text-xs text-neutral-500 truncate",children:e.occupation}),n.jsx("p",{className:"text-sm font-bold mt-1",style:{color:e.status==="eliminated"?"#9CA3AF":i(e.tribe_original)},children:(t==null?void 0:t.total)!==void 0?`${t.total>=0?"+":""}${t.total} pts`:"-- pts"})]}),n.jsxs("div",{className:"flex border-t border-cream-100",children:[n.jsx("button",{onClick:u=>{u.stopPropagation(),s(r?null:e.id)},className:"flex-1 px-3 py-2 bg-cream-50 flex items-center justify-center gap-1 text-xs text-neutral-600 hover:bg-cream-100 transition-colors",children:r?n.jsxs(n.Fragment,{children:["Hide ",n.jsx(zs,{className:"h-3 w-3"})]}):n.jsxs(n.Fragment,{children:["Quick View ",n.jsx(un,{className:"h-3 w-3"})]})}),n.jsxs(z,{to:`/castaways/${e.id}`,className:"flex-1 px-3 py-2 bg-burgundy-50 flex items-center justify-center gap-1 text-xs text-burgundy-600 hover:bg-burgundy-100 transition-colors border-l border-cream-100",children:["Full Profile ",n.jsx(k4,{className:"h-3 w-3"})]})]}),r&&n.jsxs("div",{className:"p-4 border-t border-cream-100 bg-cream-50 space-y-4 overflow-hidden",children:[n.jsxs("div",{className:"space-y-3 overflow-hidden",children:[e.previous_seasons&&e.previous_seasons.length>0&&n.jsxs("div",{className:"bg-white rounded-lg border border-cream-200 p-3",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(ou,{className:"h-4 w-4 text-burgundy-500"}),n.jsxs("span",{className:"text-sm font-semibold text-neutral-700",children:[e.previous_seasons.length," Previous Season",e.previous_seasons.length>1?"s":""]}),e.best_placement&&n.jsxs("span",{className:"ml-auto flex items-center gap-1 text-xs",children:[n.jsx(Fv,{className:"h-3 w-3 text-yellow-500"}),n.jsxs("span",{className:e.best_placement===1?"text-yellow-600 font-semibold":"text-neutral-500",children:["Best:"," ",e.best_placement===1?"Winner":`${a(e.best_placement)} place`]})]})]}),n.jsx("div",{className:"flex flex-wrap gap-1",children:e.previous_seasons.map((u,h)=>n.jsx("span",{className:"text-xs bg-cream-100 text-neutral-600 px-2 py-1 rounded-full",children:u},h))})]}),e.fun_fact&&n.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-yellow-50 rounded-lg border border-amber-200 p-3",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(I4,{className:"h-4 w-4 text-amber-500 flex-shrink-0 mt-0.5"}),n.jsx("p",{className:"text-sm text-neutral-700 break-words",children:e.fun_fact})]})}),!((d=e.previous_seasons)!=null&&d.length)&&!e.fun_fact&&n.jsx("div",{className:"bg-white rounded-lg border border-cream-200 p-3 text-center",children:n.jsx("p",{className:"text-sm text-neutral-500",children:"No additional information available"})})]}),n.jsxs("div",{children:[n.jsxs("h4",{className:"text-sm font-semibold text-neutral-700 mb-3 flex items-center gap-2",children:[n.jsx(kn,{className:"h-4 w-4 text-burgundy-500"}),"Weekly Performance"]}),t!=null&&t.byEpisode&&Object.keys(t.byEpisode).length>0?n.jsxs("div",{className:"space-y-2",children:[(()=>{const u=Object.values(t.byEpisode).map(p=>Math.abs(Number(p))),h=Math.max(...u,1);return Object.entries(t.byEpisode).sort(([p],[f])=>Number(p)-Number(f)).map(([p,f])=>n.jsxs("div",{className:"flex items-center gap-3 p-2 bg-white rounded-lg border border-cream-200",children:[n.jsxs("div",{className:"w-16 text-center",children:[n.jsx("p",{className:"text-xs text-neutral-500",children:"Episode"}),n.jsx("p",{className:"font-bold text-neutral-800",children:p})]}),n.jsx("div",{className:"flex-1 h-2 bg-cream-100 rounded-full overflow-hidden",children:n.jsx("div",{className:`h-full rounded-full transition-all ${Number(f)>=0?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.min(Math.abs(Number(f))/h*100,100)}%`}})}),n.jsxs("div",{className:`w-16 text-right font-bold ${Number(f)>=0?"text-green-600":"text-red-600"}`,children:[Number(f)>=0?"+":"",f]})]},p))})(),n.jsxs("div",{className:"mt-4 pt-4 border-t border-cream-200 flex justify-between items-center",children:[n.jsx("span",{className:"font-medium text-neutral-600",children:"Season Total"}),n.jsxs("span",{className:`text-2xl font-bold ${t.total>=0?"text-green-600":"text-red-600"}`,children:[t.total>=0?"+":"",t.total]})]})]}):n.jsxs("div",{className:"text-center py-6 bg-white rounded-lg border border-cream-200",children:[n.jsx(kn,{className:"h-8 w-8 text-neutral-300 mx-auto mb-2"}),n.jsx("p",{className:"text-neutral-400 text-sm",children:"No scores recorded yet"})]})]})]})]})}function Ate(){const[e,t]=T.useState(""),[r,s]=T.useState("all"),[a,i]=T.useState(null),[o,d]=T.useState("name"),[u,h]=T.useState("grid"),{data:p,isLoading:f,error:x}=re({queryKey:["active-season"],queryFn:async()=>{const{data:I,error:M}=await K.from("seasons").select("*").eq("is_active",!0).maybeSingle();if(M)throw M;return I}}),{data:y,isLoading:b}=re({queryKey:["season-castaways",p==null?void 0:p.id],queryFn:async()=>{if(!(p!=null&&p.id))return[];const{data:I,error:M}=await K.from("castaways").select("*, episodes:eliminated_episode_id(number)").eq("season_id",p.id).order("tribe_original",{ascending:!0,nullsFirst:!1}).order("name",{ascending:!0});if(M)throw M;return I||[]},enabled:!!(p!=null&&p.id)}),w={Vatu:{name:"Vatu Tribe",color:"#7C3AED",bgColor:"#EDE9FE",borderColor:"#A78BFA"},Kalo:{name:"Kalo Tribe",color:"#0D9488",bgColor:"#CCFBF1",borderColor:"#5EEAD4"},Cila:{name:"Cila Tribe",color:"#EA580C",bgColor:"#FFEDD5",borderColor:"#FB923C"}},v=T.useMemo(()=>{if(!y)return{};const I={};return y.forEach(M=>{const O=M.tribe_original||"Unknown";I[O]||(I[O]=[]),I[O].push(M)}),Object.keys(I).forEach(M=>{I[M].sort((O,L)=>O.name.localeCompare(L.name))}),I},[y]),{data:j}=re({queryKey:["all-castaway-scores",p==null?void 0:p.id],queryFn:async()=>{if(!(p!=null&&p.id))return[];const{data:I}=await K.from("episodes").select("id").eq("season_id",p.id);if(!(I!=null&&I.length))return[];const M=I.map(P=>P.id),{data:O,error:L}=await K.from("episode_scores").select(`
          castaway_id,
          episode_id,
          points,
          episode:episodes!episode_id(number, title)
        `).in("episode_id",M);if(L)throw L;return O||[]},enabled:!!(p!=null&&p.id)}),C=T.useMemo(()=>(j==null?void 0:j.reduce((I,M)=>{var L;I[M.castaway_id]||(I[M.castaway_id]={total:0,byEpisode:{},episodeCount:0,trend:"neutral"}),I[M.castaway_id].total+=M.points;const O=(L=M.episode)==null?void 0:L.number;return O&&(I[M.castaway_id].byEpisode[O]||(I[M.castaway_id].byEpisode[O]=0,I[M.castaway_id].episodeCount++),I[M.castaway_id].byEpisode[O]+=M.points),I},{}))||{},[j]);Object.keys(C).forEach(I=>{const M=C[I],O=Object.entries(M.byEpisode).sort(([L],[P])=>Number(P)-Number(L));if(O.length>=2){const[,L]=O[0],[,P]=O[1];L>P?M.trend="up":L<P&&(M.trend="down")}});const S=T.useMemo(()=>Object.values(v).some(I=>I.some(M=>{var P,$;const O=M.name.toLowerCase().includes(e.toLowerCase())||((P=M.occupation)==null?void 0:P.toLowerCase().includes(e.toLowerCase()))||(($=M.hometown)==null?void 0:$.toLowerCase().includes(e.toLowerCase())),L=r==="all"||r==="active"&&M.status==="active"||r==="eliminated"&&M.status==="eliminated";return O&&L})),[v,e,r]),k=(y==null?void 0:y.filter(I=>I.status==="active").length)||0,R=(y==null?void 0:y.filter(I=>I.status==="eliminated").length)||0,E=T.useMemo(()=>y?y.filter(I=>{var L,P;const M=I.name.toLowerCase().includes(e.toLowerCase())||((L=I.occupation)==null?void 0:L.toLowerCase().includes(e.toLowerCase()))||((P=I.hometown)==null?void 0:P.toLowerCase().includes(e.toLowerCase())),O=r==="all"||r==="active"&&I.status==="active"||r==="eliminated"&&I.status==="eliminated";return M&&O}).sort((I,M)=>{var O,L;if(o==="points")return(((O=C[M.id])==null?void 0:O.total)||0)-(((L=C[I.id])==null?void 0:L.total)||0);if(o==="status"){const P={winner:0,active:1,eliminated:2};return(P[I.status]||3)-(P[M.status]||3)}return I.name.localeCompare(M.name)}):[],[y,C,r,e,o]);return f||b?n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex flex-col",children:[n.jsx(Se,{}),n.jsx("main",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8 flex-1 flex items-center justify-center",children:n.jsx(me,{className:"h-8 w-8 text-burgundy-500 animate-spin"})}),n.jsx(tn,{})]}):x||!p?n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex flex-col",children:[n.jsx(Se,{}),n.jsx("main",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8 flex-1 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx($e,{className:"h-12 w-12 text-neutral-400 mx-auto mb-4"}),n.jsx("h2",{className:"text-xl font-bold text-neutral-700 mb-2",children:"No Active Season"}),n.jsx("p",{className:"text-neutral-500",children:"Check back when a new season begins!"})]})}),n.jsx(tn,{})]}):n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex flex-col",children:[n.jsx(Se,{}),n.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 flex-1",children:n.jsxs("div",{className:"pb-12",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsxs("div",{className:"inline-flex items-center gap-3 mb-4",children:[n.jsx("span",{className:"text-4xl",children:""}),n.jsxs("h1",{className:"text-4xl font-display font-bold text-neutral-800",children:[(p==null?void 0:p.name)||`Season ${(p==null?void 0:p.number)||""}`," Castaways"]})]}),n.jsxs("p",{className:"text-neutral-500 text-lg",children:[(y==null?void 0:y.length)||0," castaways competing for the title of Sole Survivor"]})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-8 max-w-2xl mx-auto",children:[n.jsxs("div",{className:"bg-white rounded-2xl p-4 text-center shadow-lg border border-cream-200",children:[n.jsx("p",{className:"text-3xl font-bold text-neutral-800",children:(y==null?void 0:y.length)||0}),n.jsx("p",{className:"text-sm text-neutral-500",children:"Total"})]}),n.jsxs("div",{className:"bg-white rounded-2xl p-4 text-center shadow-lg border border-cream-200",children:[n.jsx("p",{className:"text-3xl font-bold text-green-600",children:k}),n.jsx("p",{className:"text-sm text-neutral-500",children:"Active"})]}),n.jsxs("div",{className:"bg-white rounded-2xl p-4 text-center shadow-lg border border-cream-200",children:[n.jsx("p",{className:"text-3xl font-bold text-neutral-400",children:R}),n.jsx("p",{className:"text-sm text-neutral-500",children:"Eliminated"})]})]}),n.jsx(Ite,{search:e,onSearchChange:t,filter:r,onFilterChange:s,sortBy:o,onSortByChange:d}),n.jsx("div",{className:"flex flex-wrap gap-2 mt-4 mb-6",children:[{key:"grid",label:"Tribe Grid"},{key:"list",label:"Full Cards"},{key:"strip",label:"Stat Strips"},{key:"spotlight",label:"Spotlight"}].map(I=>n.jsx("button",{onClick:()=>h(I.key),className:`px-3 py-2 rounded-xl text-sm font-medium transition ${u===I.key?"bg-burgundy-500 text-white shadow-card":"bg-cream-100 text-neutral-600 hover:bg-cream-200"}`,children:I.label},I.key))}),u==="grid"?n.jsx(n.Fragment,{children:n.jsx("div",{className:"space-y-12",children:Object.entries(v).sort(([I],[M])=>{const O={Vatu:1,Kalo:2,Cila:3,Unknown:99};return(O[I]||99)-(O[M]||99)}).map(([I,M])=>{const O=w[I]||{name:I,color:"#6B7280",bgColor:"#F3F4F6",borderColor:"#9CA3AF"},P=M.filter($=>{var se,X;const B=$.name.toLowerCase().includes(e.toLowerCase())||((se=$.occupation)==null?void 0:se.toLowerCase().includes(e.toLowerCase()))||((X=$.hometown)==null?void 0:X.toLowerCase().includes(e.toLowerCase())),D=r==="all"||r==="active"&&$.status==="active"||r==="eliminated"&&$.status==="eliminated";return B&&D}).sort(($,B)=>{var D,se;if(o==="points")return(((D=C[B.id])==null?void 0:D.total)||0)-(((se=C[$.id])==null?void 0:se.total)||0);if(o==="status"){const X={winner:0,active:1,eliminated:2};return(X[$.status]||3)-(X[B.status]||3)}return $.name.localeCompare(B.name)});return P.length===0?null:n.jsx("div",{className:"mb-16",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border-2 overflow-hidden",style:{borderColor:O.borderColor},children:[n.jsx("div",{className:"px-6 py-5 border-b-2",style:{backgroundColor:O.bgColor,borderColor:O.borderColor},children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-10 h-10 rounded-full shadow-md flex items-center justify-center",style:{backgroundColor:O.color},children:n.jsx("span",{className:"text-white text-xl",children:I==="Vatu"?"":I==="Kalo"?"":I==="Cila"?"":""})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-2xl font-display font-bold",style:{color:O.color},children:O.name}),n.jsxs("p",{className:"text-neutral-600 text-sm",children:[P.length," castaways "," ",P.filter($=>$.status==="active").length," ","active "," ",P.filter($=>$.status==="eliminated").length," ","eliminated"]})]})]})}),n.jsx("div",{className:"p-6",children:n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-4",children:P.map($=>n.jsx(Pte,{castaway:$,stats:C[$.id],isExpanded:a===$.id,onToggleExpand:i},$.id))})})]})},I)})})}):u==="list"?n.jsxs("div",{className:"space-y-4",children:[E.map(I=>{var M,O,L,P,$;return n.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-cream-200 overflow-hidden hover:shadow-xl transition cursor-pointer",onClick:()=>i(a===I.id?null:I.id),children:[n.jsxs("div",{className:"flex items-stretch",children:[n.jsxs("div",{className:"w-40 h-40 sm:w-48 sm:h-48 flex-shrink-0 relative overflow-hidden",children:[n.jsx("img",{src:I.photo_url||"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=400&h=400&fit=crop",alt:I.name,className:"w-full h-full object-cover"}),n.jsx("div",{className:"absolute top-3 left-3 bg-green-500 text-white text-xs font-bold px-3 py-1 rounded-full shadow",children:I.status.toUpperCase()})]}),n.jsxs("div",{className:"flex-1 p-5 flex flex-col justify-center",children:[n.jsxs("div",{className:"flex items-start justify-between gap-3",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-2xl font-display font-bold text-neutral-800",children:I.name}),n.jsxs("p",{className:"text-neutral-500",children:[I.occupation||"Castaway",I.hometown?`  ${I.hometown}`:""]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-3xl font-display font-bold text-burgundy-500",children:((M=C[I.id])==null?void 0:M.total)??0}),n.jsx("p",{className:"text-xs text-neutral-400",children:"total points"})]})]}),n.jsx("p",{className:"text-neutral-600 mt-3 text-sm line-clamp-2",children:I.bio||"Click to view more details and performance."}),n.jsxs("div",{className:"flex items-center gap-4 mt-4 text-sm text-neutral-600",children:[n.jsxs("span",{className:"inline-flex items-center gap-2",children:[n.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"}),I.status==="active"?"Still in the game":I.status==="winner"?"Winner":"Eliminated"]}),n.jsxs("span",{className:"inline-flex items-center gap-1",children:[" ",I.tribe_original||"Unknown tribe"]}),n.jsxs("span",{className:"inline-flex items-center gap-1",children:[" ",((O=C[I.id])==null?void 0:O.episodeCount)||0," eps"]})]})]})]}),a===I.id&&n.jsx("div",{className:"border-t border-cream-200 bg-cream-50 p-5",children:n.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-neutral-700",children:[n.jsxs("div",{className:"bg-white rounded-xl border border-cream-200 px-4 py-3 shadow-sm",children:[n.jsx("div",{className:"text-xs text-neutral-500",children:"Latest Trend"}),n.jsx("div",{className:"font-semibold",children:((L=C[I.id])==null?void 0:L.trend)==="up"?"Rising ":((P=C[I.id])==null?void 0:P.trend)==="down"?"Cooling ":"Steady "})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-cream-200 px-4 py-3 shadow-sm",children:[n.jsx("div",{className:"text-xs text-neutral-500",children:"Episodes Played"}),n.jsx("div",{className:"font-semibold",children:(($=C[I.id])==null?void 0:$.episodeCount)||0})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-cream-200 px-4 py-3 shadow-sm",children:[n.jsx("div",{className:"text-xs text-neutral-500",children:"Best Episode"}),n.jsx("div",{className:"font-semibold",children:(()=>{var se;const B=Object.entries(((se=C[I.id])==null?void 0:se.byEpisode)||{});if(!B.length)return"--";const D=B.sort((X,ee)=>Number(ee[1])-Number(X[1]))[0];return`Ep ${D[0]} (${D[1]} pts)`})()})]}),n.jsxs("div",{className:"bg-white rounded-xl border border-cream-200 px-4 py-3 shadow-sm flex-1 min-w-[200px]",children:[n.jsx("div",{className:"text-xs text-neutral-500 mb-1",children:"Bio"}),n.jsx("p",{className:"text-neutral-700 text-sm",children:I.bio||"No bio available."})]})]})})]},I.id)}),E.length===0&&n.jsx("div",{className:"bg-white rounded-2xl shadow-card p-10 text-center text-neutral-500",children:"No castaways match your filters."})]}):u==="strip"?n.jsxs("div",{className:"space-y-3",children:[E.map(I=>{var M;return n.jsxs("div",{className:"bg-white border border-cream-200 rounded-xl px-4 py-3 flex items-center gap-4 shadow-sm hover:shadow-md transition cursor-pointer",onClick:()=>i(a===I.id?null:I.id),children:[n.jsx("div",{className:"w-10 h-10 rounded-full bg-cream-100 flex items-center justify-center font-semibold text-neutral-700",children:I.name.charAt(0)}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("p",{className:"font-semibold text-neutral-800",children:I.name}),n.jsx("span",{className:"text-xs bg-cream-100 text-neutral-500 px-2 py-0.5 rounded-full",children:I.tribe_original||"Unknown"})]}),n.jsxs("p",{className:"text-xs text-neutral-500",children:[I.occupation||"Castaway","  ",I.status]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-lg font-display font-bold text-burgundy-500",children:((M=C[I.id])==null?void 0:M.total)??0}),n.jsx("p",{className:"text-xs text-neutral-400",children:"pts"})]})]},I.id)}),E.length===0&&n.jsx("div",{className:"bg-white rounded-xl border border-cream-200 p-6 text-center text-neutral-500",children:"No castaways match your filters."})]}):n.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[E.slice(0,6).map(I=>{var M;return n.jsxs("div",{className:"relative overflow-hidden rounded-2xl shadow-xl border border-cream-200 bg-gradient-to-br from-burgundy-600 via-burgundy-500 to-amber-500 text-white hover:shadow-2xl transition cursor-pointer",onClick:()=>i(a===I.id?null:I.id),children:[n.jsx("div",{className:"absolute inset-0 bg-black/20"}),n.jsxs("div",{className:"flex flex-col h-full relative",children:[n.jsxs("div",{className:"p-5 flex items-start justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs uppercase tracking-widest text-amber-100 mb-1",children:"Spotlight"}),n.jsx("h3",{className:"text-2xl font-display font-bold",children:I.name}),n.jsx("p",{className:"text-sm text-amber-100",children:I.occupation||"Castaway"})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-3xl font-display font-bold",children:((M=C[I.id])==null?void 0:M.total)??0}),n.jsx("p",{className:"text-xs text-amber-100",children:"total points"})]})]}),n.jsx("div",{className:"px-5 pb-5 text-sm text-amber-50 line-clamp-3",children:I.bio||"Their story is unfoldingclick for full details."})]})]},I.id)}),E.length===0&&n.jsx("div",{className:"bg-white rounded-xl border border-cream-200 p-6 text-center text-neutral-500 col-span-full",children:"No castaways match your filters."})]}),!S&&n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-12 border border-cream-200 text-center",children:[n.jsx($e,{className:"h-12 w-12 text-neutral-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-neutral-800 mb-2",children:"No castaways found"}),n.jsx("p",{className:"text-neutral-500",children:"Try adjusting your search or filter criteria"})]})]})}),n.jsx(tn,{})]})}function Mte(){var f;const{id:e}=On(),{data:t,isLoading:r,error:s}=re({queryKey:["castaway",e],queryFn:async()=>{if(!e)throw new Error("No castaway ID");const{data:x,error:y}=await K.from("castaways").select("*, seasons(number, name)").eq("id",e).single();if(y)throw y;return x},enabled:!!e}),{data:a}=re({queryKey:["castaway-scores",e],queryFn:async()=>{if(!e)return[];const{data:x,error:y}=await K.from("episode_scores").select(`
          episode_id,
          points,
          episodes!inner (
            number,
            title,
            air_date
          )
        `).eq("castaway_id",e).order("episodes(number)",{ascending:!0});if(y)throw y;const b=new Map;return(x||[]).forEach(w=>{const v=b.get(w.episode_id);v?v.points+=Number(w.points):b.set(w.episode_id,{episode_id:w.episode_id,points:Number(w.points),episode:w.episodes})}),Array.from(b.values())},enabled:!!e}),{data:i}=re({queryKey:["castaway-rankings",t==null?void 0:t.season_id],queryFn:async()=>{if(!(t!=null&&t.season_id))return[];const{data:x,error:y}=await K.from("episode_scores").select("castaway_id, points, castaways!inner(season_id)").eq("castaways.season_id",t.season_id);if(y)throw y;const b={};return(x||[]).forEach(v=>{b[v.castaway_id]=(b[v.castaway_id]||0)+Number(v.points)}),Object.entries(b).map(([v,j])=>({castaway_id:v,total_points:j})).sort((v,j)=>j.total_points-v.total_points).map((v,j)=>({...v,rank:j+1}))},enabled:!!(t!=null&&t.season_id)}),o=(a==null?void 0:a.reduce((x,y)=>x+y.points,0))||0,d=((f=i==null?void 0:i.find(x=>x.castaway_id===e))==null?void 0:f.rank)||null,u=(i==null?void 0:i.length)||0,h=x=>({Vatu:{bg:"bg-purple-100",text:"text-purple-700",border:"border-purple-300"},Kalo:{bg:"bg-teal-100",text:"text-teal-700",border:"border-teal-300"},Cila:{bg:"bg-orange-100",text:"text-orange-700",border:"border-orange-300"}})[x||""]||{bg:"bg-neutral-100",text:"text-neutral-700",border:"border-neutral-300"};if(r)return n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex flex-col",children:[n.jsx(Se,{}),n.jsx("div",{className:"flex-1 flex items-center justify-center",children:n.jsx(me,{className:"h-8 w-8 text-burgundy-500 animate-spin"})}),n.jsx(tn,{})]});if(s||!t)return n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex flex-col",children:[n.jsx(Se,{}),n.jsx("div",{className:"flex-1 flex items-center justify-center px-4",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-8 text-center max-w-md",children:[n.jsx(Gb,{className:"h-12 w-12 text-neutral-400 mx-auto mb-4"}),n.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-2",children:"Castaway Not Found"}),n.jsx("p",{className:"text-neutral-600 mb-4",children:"This castaway doesn't exist or has been removed."}),n.jsx(z,{to:"/castaways",className:"btn btn-primary",children:"View All Castaways"})]})}),n.jsx(tn,{})]});const p=h(t.tribe_original);return n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex flex-col",children:[n.jsx(Se,{}),n.jsxs("main",{className:"flex-1 max-w-4xl mx-auto px-4 py-8 w-full",children:[n.jsxs(z,{to:"/castaways",className:"inline-flex items-center gap-2 text-neutral-600 hover:text-burgundy-600 mb-6 transition-colors",children:[n.jsx(st,{className:"h-4 w-4"}),"Back to Castaways"]}),n.jsx("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 overflow-hidden mb-6",children:n.jsxs("div",{className:"md:flex",children:[n.jsxs("div",{className:"md:w-1/3 relative",children:[t.photo_url?n.jsx("img",{src:t.photo_url,alt:t.name,className:"w-full h-64 md:h-full object-cover"}):n.jsx("div",{className:"w-full h-64 md:h-full bg-gradient-to-br from-burgundy-400 to-burgundy-600 flex items-center justify-center",children:n.jsx("span",{className:"text-6xl text-white/80 font-display",children:t.name.charAt(0)})}),n.jsx("div",{className:"absolute top-4 left-4",children:t.status==="eliminated"?n.jsxs("div",{className:"flex items-center gap-1.5 bg-neutral-800/90 text-white px-3 py-1.5 rounded-full text-sm font-medium",children:[n.jsx(Gb,{className:"h-4 w-4"}),"Eliminated"]}):t.status==="winner"?n.jsxs("div",{className:"flex items-center gap-1.5 bg-amber-500 text-white px-3 py-1.5 rounded-full text-sm font-medium",children:[n.jsx(Ke,{className:"h-4 w-4"}),"Winner"]}):n.jsxs("div",{className:"flex items-center gap-1.5 bg-green-500 text-white px-3 py-1.5 rounded-full text-sm font-medium",children:[n.jsx(bn,{className:"h-4 w-4"}),"Active"]})})]}),n.jsxs("div",{className:"md:w-2/3 p-6",children:[n.jsx("div",{className:"flex items-start justify-between mb-4",children:n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-display font-bold text-neutral-800 mb-2",children:t.name}),n.jsx("div",{className:`inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-sm font-medium ${p.bg} ${p.text} ${p.border} border`,children:t.tribe_original||"Unknown Tribe"})]})}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[t.age&&n.jsxs("div",{className:"flex items-center gap-2 text-neutral-600",children:[n.jsx(er,{className:"h-4 w-4 text-burgundy-500"}),n.jsxs("span",{children:[t.age," years old"]})]}),t.hometown&&n.jsxs("div",{className:"flex items-center gap-2 text-neutral-600",children:[n.jsx(Bv,{className:"h-4 w-4 text-burgundy-500"}),n.jsx("span",{children:t.hometown})]}),t.occupation&&n.jsxs("div",{className:"flex items-center gap-2 text-neutral-600 col-span-2",children:[n.jsx(XY,{className:"h-4 w-4 text-burgundy-500"}),n.jsx("span",{children:t.occupation})]})]}),t.fun_fact&&n.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4 mb-6",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(kn,{className:"h-5 w-5 text-amber-500 flex-shrink-0 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-amber-800 mb-1",children:"Fun Fact"}),n.jsx("p",{className:"text-amber-700",children:t.fun_fact})]})]})}),t.previous_seasons&&t.previous_seasons.length>0&&n.jsxs("div",{className:"text-neutral-600",children:[n.jsx("span",{className:"font-medium",children:"Previous Seasons:"})," ",t.previous_seasons.join(", "),t.best_placement&&n.jsxs("span",{className:"ml-2 text-burgundy-600",children:["(Best: #",t.best_placement,")"]})]})]})]})}),n.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[n.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 p-6 text-center",children:[n.jsx("p",{className:"text-3xl font-bold text-burgundy-600",children:o}),n.jsx("p",{className:"text-neutral-500 text-sm",children:"Total Points"})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 p-6 text-center",children:[n.jsx("p",{className:"text-3xl font-bold text-neutral-800",children:d?`#${d}`:"-"}),n.jsxs("p",{className:"text-neutral-500 text-sm",children:["of ",u," Castaways"]})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 p-6 text-center",children:[n.jsx("p",{className:"text-3xl font-bold text-neutral-800",children:(a==null?void 0:a.length)||0}),n.jsx("p",{className:"text-neutral-500 text-sm",children:"Episodes Played"})]})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 overflow-hidden",children:[n.jsx("div",{className:"p-5 border-b border-cream-100",children:n.jsx("h2",{className:"text-lg font-display font-bold text-neutral-800",children:"Week-over-Week Performance"})}),a&&a.length>0?n.jsx("div",{className:"divide-y divide-cream-100",children:a.map((x,y)=>{const b=y>0?a[y-1].points:null,w=b!==null?x.points>b?"up":x.points<b?"down":"same":null;return n.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-cream-50 transition-colors",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-10 h-10 rounded-full bg-burgundy-100 flex items-center justify-center",children:n.jsx("span",{className:"font-bold text-burgundy-600",children:x.episode.number})}),n.jsxs("div",{children:[n.jsxs("p",{className:"font-medium text-neutral-800",children:["Episode ",x.episode.number,x.episode.title&&n.jsxs("span",{className:"text-neutral-500 ml-2",children:["- ",x.episode.title]})]}),n.jsx("p",{className:"text-sm text-neutral-500",children:new Date(x.episode.air_date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[w&&n.jsxs("div",{className:`flex items-center gap-1 text-sm ${w==="up"?"text-green-600":w==="down"?"text-red-600":"text-neutral-400"}`,children:[w==="up"&&n.jsx(Pr,{className:"h-4 w-4"}),w==="down"&&n.jsx(Lc,{className:"h-4 w-4"}),w==="same"&&n.jsx(Ap,{className:"h-4 w-4"})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-xl font-bold text-neutral-800",children:x.points}),n.jsx("p",{className:"text-xs text-neutral-400",children:"points"})]})]})]},x.episode_id)})}):n.jsxs("div",{className:"p-8 text-center text-neutral-500",children:[n.jsx("p",{children:"No scoring data available yet."}),n.jsx("p",{className:"text-sm mt-1",children:"Check back after episodes air!"})]})]})]}),n.jsx(tn,{})]})}function Ote(){const{user:e}=dt(),[t,r]=T.useState(""),[s,a]=T.useState(""),[i,o]=T.useState("general"),[d,u]=T.useState(""),[h,p]=T.useState(""),[f,x]=T.useState(!1),[y,b]=T.useState(!1),[w,v]=T.useState(""),{data:j}=re({queryKey:["profile",e==null?void 0:e.id],queryFn:async()=>{if(!(e!=null&&e.id))return null;const{data:k,error:R}=await K.from("users").select("display_name, email").eq("id",e.id).single();if(R)throw R;return k},enabled:!!(e!=null&&e.id)});T.useState(()=>{j&&(r(j.display_name||""),a(j.email||""))});const C=async k=>{k.preventDefault(),v(""),x(!0);try{const R=encodeURIComponent(`[RGFL ${i.toUpperCase()}] ${d}`),E=encodeURIComponent(`Name: ${t||(j==null?void 0:j.display_name)||"Anonymous"}
Email: ${s||(j==null?void 0:j.email)||(e==null?void 0:e.email)||"Not provided"}
Reason: ${i}
User ID: ${(e==null?void 0:e.id)||"Not logged in"}

Message:
${h}`);window.location.href=`mailto:support@realitygamesfantasyleague.com?subject=${R}&body=${E}`,setTimeout(()=>{b(!0),x(!1)},500)}catch{v("Failed to open email client. Please try again."),x(!1)}},S=[{value:"general",label:"General Inquiry",icon:gJ,description:"General questions about RGFL"},{value:"partner",label:"Partner With Us",icon:GJ,description:"Interested in partnerships or collaborations"},{value:"issue",label:"Report an Issue",icon:eJ,description:"Something not working right?"},{value:"scorekeeper",label:"Becoming a Scorekeeper",icon:$u,description:"Interested in helping score episodes"},{value:"other",label:"Other",icon:at,description:"Anything else on your mind"}];return y?n.jsx("div",{className:"max-w-2xl mx-auto py-12",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated p-8 border border-cream-200 text-center",children:[n.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:n.jsx(tt,{className:"h-8 w-8 text-green-600"})}),n.jsx("h1",{className:"text-2xl font-display font-bold text-neutral-800 mb-2",children:"Message Sent!"}),n.jsx("p",{className:"text-neutral-500 mb-6",children:"Thank you for reaching out. Your email client should have opened with your message. We typically respond within 24-48 hours."}),n.jsx("button",{onClick:()=>{b(!1),u(""),p("")},className:"btn btn-secondary",children:"Send Another Message"})]})}):n.jsxs("div",{className:"min-h-screen bg-cream-50 flex flex-col",children:[n.jsx(Se,{}),n.jsxs("div",{className:"max-w-2xl mx-auto pb-24 flex-1",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("div",{className:"w-16 h-16 bg-burgundy-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(xr,{className:"h-8 w-8 text-burgundy-600"})}),n.jsx("h1",{className:"text-3xl font-display font-bold text-neutral-800 mb-2",children:"Contact Us"}),n.jsx("p",{className:"text-neutral-500",children:"Have questions, feedback, or just want to say hi? We'd love to hear from you!"})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated p-6 border border-cream-200",children:[w&&n.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl",children:n.jsx("p",{className:"text-red-600 text-sm",children:w})}),n.jsxs("form",{onSubmit:C,className:"space-y-6",children:[!e&&n.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-neutral-700 mb-2",children:"Your Name"}),n.jsxs("div",{className:"relative",children:[n.jsx(Op,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-neutral-400"}),n.jsx("input",{id:"name",type:"text",value:t,onChange:k=>r(k.target.value),className:"input pl-10",placeholder:"John Doe"})]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-neutral-700 mb-2",children:"Email Address"}),n.jsxs("div",{className:"relative",children:[n.jsx(xr,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-neutral-400"}),n.jsx("input",{id:"email",type:"email",value:s,onChange:k=>a(k.target.value),className:"input pl-10",placeholder:"you@example.com"})]})]})]}),e&&j&&n.jsxs("div",{className:"p-4 bg-cream-50 rounded-xl border border-cream-200",children:[n.jsx("p",{className:"text-sm text-neutral-500",children:"Sending as:"}),n.jsx("p",{className:"font-medium text-neutral-800",children:j.display_name}),n.jsx("p",{className:"text-sm text-neutral-500",children:j.email})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-3",children:"What can we help you with?"}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:S.map(k=>n.jsxs("button",{type:"button",onClick:()=>o(k.value),className:`p-3 rounded-xl border text-left transition-all ${i===k.value?"border-burgundy-500 bg-burgundy-50 ring-2 ring-burgundy-100":"border-cream-200 bg-white hover:border-burgundy-200"}`,children:[n.jsx(k.icon,{className:`h-5 w-5 mb-1 ${i===k.value?"text-burgundy-500":"text-neutral-400"}`}),n.jsx("p",{className:`text-sm font-medium ${i===k.value?"text-burgundy-700":"text-neutral-700"}`,children:k.label})]},k.value))})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"subject",className:"block text-sm font-medium text-neutral-700 mb-2",children:"Subject"}),n.jsx("input",{id:"subject",type:"text",value:d,onChange:k=>u(k.target.value),className:"input",placeholder:"Brief description of your inquiry",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"message",className:"block text-sm font-medium text-neutral-700 mb-2",children:"Message"}),n.jsx("textarea",{id:"message",value:h,onChange:k=>p(k.target.value),className:"input min-h-[150px] resize-y",placeholder:"Tell us more...",required:!0})]}),n.jsx("button",{type:"submit",disabled:f||!d.trim()||!h.trim(),className:"w-full btn btn-primary btn-lg flex items-center justify-center gap-2 disabled:opacity-50",children:f?n.jsxs(n.Fragment,{children:[n.jsx(me,{className:"h-5 w-5 animate-spin"}),"Opening Email..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Fu,{className:"h-5 w-5"}),"Send Message"]})})]})]}),n.jsxs("div",{className:"mt-6 bg-white rounded-2xl shadow-card p-5 border border-cream-200",children:[n.jsx("h3",{className:"font-semibold text-neutral-800 mb-3",children:"Terms of Service"}),n.jsxs("ul",{className:"space-y-2 text-neutral-600 text-sm",children:[n.jsx("li",{children:" No refunds once payment has been made"}),n.jsx("li",{children:" Prize distribution is at the sole discretion of the site owners"})]})]})]}),n.jsx(tn,{})]})}function Lte(){var d;const{leagueId:e}=On(),{data:t,isLoading:r}=re({queryKey:["league",e],queryFn:async()=>{if(!e)throw new Error("No league ID");const{data:u,error:h}=await K.from("leagues").select("*, seasons(*)").eq("id",e).single();if(h)throw h;return u},enabled:!!e}),{data:s,isLoading:a}=re({queryKey:["league-history",t==null?void 0:t.commissioner_id],queryFn:async()=>{if(!(t!=null&&t.commissioner_id))throw new Error("No commissioner");const{data:u,error:h}=await K.from("leagues").select(`
          *,
          seasons(*),
          league_members(
            total_points,
            rank,
            users(display_name, avatar_url)
          )
        `).eq("commissioner_id",t.commissioner_id).eq("status","completed").order("created_at",{ascending:!1});if(h)throw h;return u||[]},enabled:!!(t!=null&&t.commissioner_id)}),{data:i}=re({queryKey:["league-episodes",e],queryFn:async()=>{if(!e||!(t!=null&&t.season_id))throw new Error("Missing data");const{data:u,error:h}=await K.from("episodes").select("*").eq("season_id",t.season_id).eq("is_scored",!0).order("number",{ascending:!1});if(h)throw h;return u||[]},enabled:!!e&&!!(t!=null&&t.season_id)});return r||a?n.jsxs(n.Fragment,{children:[n.jsx(Se,{}),n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center",children:n.jsx(me,{className:"h-8 w-8 text-burgundy-500 animate-spin"})})]}):n.jsxs(n.Fragment,{children:[n.jsx(Se,{}),n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 p-4 pb-24",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx(z,{to:`/leagues/${e}`,className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:n.jsx(st,{className:"h-5 w-5 text-neutral-600"})}),n.jsxs("div",{children:[n.jsxs("h1",{className:"text-2xl font-display font-bold text-neutral-800 flex items-center gap-2",children:[n.jsx(ou,{className:"h-6 w-6 text-burgundy-500"}),"League History"]}),n.jsx("p",{className:"text-neutral-500",children:t==null?void 0:t.name})]})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 mb-6",children:[n.jsx("div",{className:"px-4 py-3 border-b border-cream-200",children:n.jsxs("h2",{className:"text-lg font-display font-bold text-neutral-800 flex items-center gap-2",children:[n.jsx(er,{className:"h-5 w-5 text-burgundy-500"}),"Season ",(d=t==null?void 0:t.seasons)==null?void 0:d.number," Episodes"]})}),i&&i.length>0?n.jsx("div",{className:"divide-y divide-cream-100",children:i.map(u=>n.jsxs(z,{to:`/leagues/${e}/episodes/${u.id}`,className:"flex items-center gap-3 px-4 py-3 hover:bg-cream-50 transition-colors",children:[n.jsx("div",{className:"w-10 h-10 bg-cream-100 rounded-xl flex items-center justify-center border border-cream-200",children:n.jsx("span",{className:"text-burgundy-500 font-bold",children:u.number})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("p",{className:"text-neutral-800 font-medium",children:["Episode ",u.number,u.title&&`: ${u.title}`]}),n.jsx("p",{className:"text-neutral-500 text-sm",children:new Date(u.air_date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]}),n.jsx(Ke,{className:"h-5 w-5 text-neutral-400"})]},u.id))}):n.jsxs("div",{className:"p-8 text-center",children:[n.jsx(er,{className:"h-12 w-12 text-neutral-400 mx-auto mb-4"}),n.jsx("p",{className:"text-neutral-500",children:"No scored episodes yet."}),n.jsx("p",{className:"text-neutral-400 text-sm",children:"Results will appear after the first episode is scored."})]})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200",children:[n.jsx("div",{className:"px-4 py-3 border-b border-cream-200",children:n.jsxs("h2",{className:"text-lg font-display font-bold text-neutral-800 flex items-center gap-2",children:[n.jsx(Ke,{className:"h-5 w-5 text-burgundy-500"}),"Past Seasons"]})}),s&&s.length>0?n.jsx("div",{className:"divide-y divide-cream-100",children:s.map(u=>{var p,f,x,y,b;(p=u.league_members)==null||p.find(w=>w.rank===1);const h=(f=u.league_members)==null?void 0:f.sort((w,v)=>(w.rank||999)-(v.rank||999)).slice(0,3);return n.jsxs("div",{className:"p-4",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-neutral-800 font-medium",children:u.name}),n.jsxs("p",{className:"text-neutral-500 text-sm",children:["Season ",(x=u.seasons)==null?void 0:x.number,": ",(y=u.seasons)==null?void 0:y.name]})]}),n.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-700 rounded-full text-xs",children:"Completed"})]}),h&&h.length>0&&n.jsx("div",{className:"space-y-2",children:h.map((w,v)=>{var j,C,S;return n.jsxs("div",{className:`flex items-center gap-3 p-2 rounded-xl ${v===0?"bg-burgundy-50 border border-burgundy-100":"bg-cream-50 border border-cream-200"}`,children:[n.jsx("div",{className:"w-6 h-6 flex items-center justify-center",children:v===0?n.jsx(tr,{className:"h-5 w-5 text-burgundy-500"}):v===1?n.jsx(fr,{className:"h-5 w-5 text-gray-400"}):n.jsx(fr,{className:"h-5 w-5 text-amber-600"})}),(j=w.users)!=null&&j.avatar_url?n.jsx("img",{src:w.users.avatar_url,alt:"",className:"w-6 h-6 rounded-full object-cover"}):n.jsx("div",{className:"w-6 h-6 bg-cream-100 rounded-full flex items-center justify-center border border-cream-200",children:n.jsx($e,{className:"h-3 w-3 text-neutral-400"})}),n.jsx("span",{className:`flex-1 ${v===0?"text-burgundy-600 font-medium":"text-neutral-800"}`,children:(C=w.users)==null?void 0:C.display_name}),n.jsxs("span",{className:`font-bold ${v===0?"text-burgundy-500":"text-neutral-500"}`,children:[w.total_points," pts"]})]},((S=w.users)==null?void 0:S.display_name)||v)})}),n.jsxs("div",{className:"mt-3 flex items-center justify-between text-sm text-neutral-400",children:[n.jsxs("span",{children:[((b=u.league_members)==null?void 0:b.length)||0," players"]}),n.jsxs("span",{children:["Finished ",new Date(u.updated_at).toLocaleDateString()]})]})]},u.id)})}):n.jsxs("div",{className:"p-8 text-center",children:[n.jsx(ou,{className:"h-12 w-12 text-neutral-400 mx-auto mb-4"}),n.jsx("p",{className:"text-neutral-500",children:"No past seasons found."}),n.jsx("p",{className:"text-neutral-400 text-sm",children:"Previous league results will appear here."})]})]}),n.jsxs("div",{className:"mt-6 bg-burgundy-50 border border-burgundy-200 rounded-2xl p-4",children:[n.jsxs("h3",{className:"text-neutral-800 font-medium mb-3 flex items-center gap-2",children:[n.jsx(Ke,{className:"h-5 w-5 text-burgundy-500"}),"All-Time Stats"]}),n.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-2xl font-bold text-neutral-800",children:((s==null?void 0:s.length)||0)+1}),n.jsx("p",{className:"text-neutral-500 text-xs",children:"Seasons"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-2xl font-bold text-neutral-800",children:(i==null?void 0:i.length)||0}),n.jsx("p",{className:"text-neutral-500 text-xs",children:"Episodes Scored"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-2xl font-bold text-neutral-800",children:(s==null?void 0:s.reduce((u,h)=>{var p;return u+(((p=h.league_members)==null?void 0:p.length)||0)},0))||0}),n.jsx("p",{className:"text-neutral-500 text-xs",children:"Total Players"})]})]})]})]})]})}function $te(){const e=Et(),[t,r]=T.useState("notifications"),{data:s}=re({queryKey:["current-user"],queryFn:async()=>{const{data:{user:y}}=await K.auth.getUser();return y}}),{data:a}=re({queryKey:["user-profile",s==null?void 0:s.id],queryFn:async()=>{if(!(s!=null&&s.id))throw new Error("No user");const{data:y,error:b}=await K.from("users").select("*").eq("id",s.id).single();if(b)throw b;return y},enabled:!!(s!=null&&s.id)}),{data:i,isLoading:o}=re({queryKey:["notifications",s==null?void 0:s.id],queryFn:async()=>{if(!(s!=null&&s.id))throw new Error("No user");const{data:y,error:b}=await K.from("notifications").select("*").eq("user_id",s.id).order("sent_at",{ascending:!1}).limit(50);if(b)throw b;return y||[]},enabled:!!(s!=null&&s.id)}),d=De({mutationFn:async y=>{const{error:b}=await K.from("notifications").update({read_at:new Date().toISOString()}).eq("id",y);if(b)throw b},onSuccess:()=>{e.invalidateQueries({queryKey:["notifications"]})}}),u=De({mutationFn:async()=>{if(!(s!=null&&s.id))throw new Error("No user");const{error:y}=await K.from("notifications").update({read_at:new Date().toISOString()}).eq("user_id",s.id).is("read_at",null);if(y)throw y},onSuccess:()=>{e.invalidateQueries({queryKey:["notifications"]})}}),h=De({mutationFn:async y=>{if(!(s!=null&&s.id))throw new Error("No user");const{error:b}=await K.from("users").update(y).eq("id",s.id);if(b)throw b},onSuccess:()=>{e.invalidateQueries({queryKey:["user-profile",s==null?void 0:s.id]})}}),p=(i==null?void 0:i.filter(y=>!y.read_at).length)||0,f=y=>{switch(y){case"email":return n.jsx(xr,{className:"h-5 w-5 text-blue-500"});case"sms":return n.jsx(Hv,{className:"h-5 w-5 text-green-500"});case"push":return n.jsx(f2,{className:"h-5 w-5 text-purple-500"});default:return n.jsx(mi,{className:"h-5 w-5 text-burgundy-500"})}},x=y=>{const b=new Date(y),v=new Date().getTime()-b.getTime(),j=Math.floor(v/6e4),C=Math.floor(v/36e5),S=Math.floor(v/864e5);return j<1?"Just now":j<60?`${j}m ago`:C<24?`${C}h ago`:S<7?`${S}d ago`:b.toLocaleDateString()};return o?n.jsxs(n.Fragment,{children:[n.jsx(Se,{}),n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center",children:n.jsx(me,{className:"h-8 w-8 text-burgundy-500 animate-spin"})})]}):n.jsxs(n.Fragment,{children:[n.jsx(Se,{}),n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 p-4 pb-24",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx(z,{to:"/profile",className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:n.jsx(st,{className:"h-5 w-5 text-neutral-600"})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("h1",{className:"text-2xl font-display font-bold text-neutral-800 flex items-center gap-2",children:[n.jsx(mi,{className:"h-6 w-6 text-burgundy-500"}),"Notifications"]}),p>0&&n.jsxs("p",{className:"text-neutral-500",children:[p," unread"]})]}),p>0&&n.jsx("button",{onClick:()=>u.mutate(),disabled:u.isPending,className:"text-burgundy-500 text-sm hover:text-burgundy-600",children:"Mark all read"})]}),n.jsxs("div",{className:"flex gap-2 mb-6",children:[n.jsxs("button",{onClick:()=>r("notifications"),className:`flex-1 py-2 px-4 rounded-xl font-medium transition-colors ${t==="notifications"?"bg-burgundy-500 text-white":"bg-white text-neutral-600 hover:bg-cream-50 border border-cream-200"}`,children:[n.jsx(mi,{className:"h-4 w-4 inline mr-2"}),"Inbox"]}),n.jsxs("button",{onClick:()=>r("settings"),className:`flex-1 py-2 px-4 rounded-xl font-medium transition-colors ${t==="settings"?"bg-burgundy-500 text-white":"bg-white text-neutral-600 hover:bg-cream-50 border border-cream-200"}`,children:[n.jsx(Uu,{className:"h-4 w-4 inline mr-2"}),"Preferences"]})]}),t==="notifications"?n.jsx("div",{className:"space-y-3",children:i&&i.length>0?i.map(y=>n.jsx("div",{className:`bg-white rounded-2xl shadow-card p-4 border transition-colors ${y.read_at?"border-cream-200 opacity-75":"border-burgundy-200 bg-burgundy-50"}`,children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"p-2 bg-cream-100 rounded-xl border border-cream-200",children:f(y.type)}),n.jsxs("div",{className:"flex-1 min-w-0",children:[y.subject&&n.jsx("p",{className:"text-neutral-800 font-medium mb-1",children:y.subject}),n.jsx("p",{className:"text-neutral-600 text-sm",children:y.body}),n.jsx("p",{className:"text-neutral-400 text-xs mt-2",children:x(y.sent_at)})]}),!y.read_at&&n.jsx("button",{onClick:()=>d.mutate(y.id),className:"p-2 hover:bg-cream-100 rounded-xl transition-colors",title:"Mark as read",children:n.jsx(pQ,{className:"h-4 w-4 text-burgundy-500"})})]})},y.id)):n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-8 border border-cream-200 text-center",children:[n.jsx(mi,{className:"h-12 w-12 text-neutral-400 mx-auto mb-4"}),n.jsx("p",{className:"text-neutral-500",children:"No notifications yet."}),n.jsx("p",{className:"text-neutral-400 text-sm mt-1",children:"You'll receive updates about picks, scores, and league activity here."})]})}):n.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200",children:[n.jsxs("div",{className:"px-4 py-3 border-b border-cream-200",children:[n.jsx("h2",{className:"text-lg font-display font-bold text-neutral-800",children:"Notification Preferences"}),n.jsx("p",{className:"text-neutral-500 text-sm",children:"Choose how you want to receive updates"})]}),n.jsxs("div",{className:"divide-y divide-cream-100",children:[n.jsxs("div",{className:"p-4 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-xl",children:n.jsx(xr,{className:"h-5 w-5 text-blue-500"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-neutral-800 font-medium",children:"Email Notifications"}),n.jsx("p",{className:"text-neutral-500 text-sm",children:"Receive updates via email"})]})]}),n.jsx("button",{onClick:()=>h.mutate({notification_email:!(a!=null&&a.notification_email)}),disabled:h.isPending,className:`w-12 h-6 rounded-full transition-colors relative ${a!=null&&a.notification_email?"bg-burgundy-500":"bg-neutral-300"} ${h.isPending?"opacity-50":""}`,children:h.isPending?n.jsx(me,{className:"absolute top-1 left-4 w-4 h-4 text-white animate-spin"}):n.jsx("div",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-transform shadow ${a!=null&&a.notification_email?"left-7":"left-1"}`})})]}),n.jsxs("div",{className:"p-4 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-purple-100 rounded-xl",children:n.jsx(f2,{className:"h-5 w-5 text-purple-500"})}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("p",{className:"text-neutral-800 font-medium",children:"Push Notifications"}),n.jsx("span",{className:"px-2 py-0.5 bg-purple-100 text-purple-600 text-xs rounded-full font-medium",children:"Coming Soon"})]}),n.jsx("p",{className:"text-neutral-500 text-sm",children:"Real-time alerts on your device"})]})]}),n.jsx("button",{disabled:!0,className:"w-12 h-6 rounded-full bg-neutral-200 relative cursor-not-allowed opacity-50",children:n.jsx("div",{className:"absolute top-1 left-1 w-4 h-4 bg-white rounded-full shadow"})})]})]})]}),t==="settings"&&n.jsxs("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-2xl p-4",children:[n.jsx("h3",{className:"text-neutral-800 font-medium mb-3",children:"What You'll Receive"}),n.jsxs("ul",{className:"space-y-2 text-sm text-neutral-600",children:[n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx(qt,{className:"h-4 w-4 text-blue-500 mt-0.5 flex-shrink-0"}),n.jsx("span",{children:"Pick reminders before deadlines"})]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx(qt,{className:"h-4 w-4 text-blue-500 mt-0.5 flex-shrink-0"}),n.jsx("span",{children:"Episode scoring results and standings updates"})]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx(qt,{className:"h-4 w-4 text-blue-500 mt-0.5 flex-shrink-0"}),n.jsx("span",{children:"League activity and member updates"})]})]})]})]})]})}function Dte(){const{leagueId:e}=On(),t=ns(),r=Et(),[s,a]=T.useState([]),[i,o]=T.useState(!1),[d,u]=T.useState(null),{data:h}=re({queryKey:["current-user"],queryFn:async()=>{const{data:{user:O}}=await K.auth.getUser();return O}}),{data:p,isLoading:f}=re({queryKey:["league",e],queryFn:async()=>{if(!e)throw new Error("No league ID");const{data:O,error:L}=await K.from("leagues").select("*, seasons(*)").eq("id",e).single();if(L)throw L;return O},enabled:!!e}),{data:x,isLoading:y}=re({queryKey:["league-members",e],queryFn:async()=>{if(!e)throw new Error("No league ID");const{data:O,error:L}=await K.from("league_members").select("*, users(id, display_name, avatar_url)").eq("league_id",e).order("draft_position",{ascending:!0});if(L)throw L;const P=(O==null?void 0:O.map($=>$.user_id))||[];return s.length===0&&P.length>0&&a(P),O||[]},enabled:!!e}),b=(h==null?void 0:h.id)===(p==null?void 0:p.commissioner_id),w=()=>{const O=[...s].sort(()=>Math.random()-.5);a(O),o(!0)},v=O=>{u(O)},j=(O,L)=>{if(O.preventDefault(),d===null||d===L)return;const P=[...s],[$]=P.splice(d,1);P.splice(L,0,$),a(P),u(L),o(!0)},C=()=>{u(null)},S=De({mutationFn:async()=>{var B;if(!e)throw new Error("No league ID");const O=s.map((D,se)=>K.from("league_members").update({draft_position:se+1}).eq("league_id",e).eq("user_id",D)),P=(B=(await Promise.all(O)).find(D=>D.error))==null?void 0:B.error;if(P)throw P;const{error:$}=await K.from("leagues").update({draft_order:s}).eq("id",e);if($)throw $},onSuccess:()=>{o(!1),r.invalidateQueries({queryKey:["league",e]}),r.invalidateQueries({queryKey:["league-members",e]})}}),k=De({mutationFn:async()=>{if(!e)throw new Error("No league ID");const{error:O}=await K.from("leagues").update({draft_status:"in_progress",draft_started_at:new Date().toISOString(),status:"drafting"}).eq("id",e);if(O)throw O},onSuccess:()=>{r.invalidateQueries({queryKey:["league",e]}),t(`/leagues/${e}/draft`)}}),R=O=>x==null?void 0:x.find(L=>L.user_id===O),E=f||y,I=(p==null?void 0:p.draft_status)==="pending"&&x&&x.length>=2,M=(p==null?void 0:p.draft_status)!=="pending";return E?n.jsxs(n.Fragment,{children:[n.jsx(Se,{}),n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center",children:n.jsx(me,{className:"h-8 w-8 text-burgundy-500 animate-spin"})})]}):b?n.jsxs(n.Fragment,{children:[n.jsx(Se,{}),n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 p-4 pb-24",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx(z,{to:`/leagues/${e}/settings`,className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:n.jsx(st,{className:"h-5 w-5 text-neutral-600"})}),n.jsxs("div",{children:[n.jsxs("h1",{className:"text-2xl font-display font-bold text-neutral-800 flex items-center gap-2",children:[n.jsx(Uu,{className:"h-6 w-6 text-burgundy-500"}),"Draft Settings"]}),n.jsx("p",{className:"text-neutral-500",children:p==null?void 0:p.name})]})]}),n.jsx("div",{className:`rounded-2xl p-4 mb-6 ${M?"bg-amber-50 border border-amber-200":"bg-green-50 border border-green-200"}`,children:n.jsxs("div",{className:"flex items-center gap-3",children:[M?n.jsx(at,{className:"h-5 w-5 text-amber-600"}):n.jsx(qt,{className:"h-5 w-5 text-green-600"}),n.jsxs("div",{children:[n.jsx("p",{className:`font-medium ${M?"text-amber-800":"text-green-800"}`,children:M?`Draft is ${p==null?void 0:p.draft_status}`:"Draft has not started yet"}),n.jsx("p",{className:`text-sm ${M?"text-amber-600":"text-green-600"}`,children:M?"Draft order cannot be changed after the draft begins.":"Set the draft order below before starting."})]})]})}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 mb-6",children:[n.jsxs("div",{className:"px-4 py-3 border-b border-cream-200 flex items-center justify-between",children:[n.jsxs("h2",{className:"text-lg font-display font-bold text-neutral-800 flex items-center gap-2",children:[n.jsx($e,{className:"h-5 w-5 text-burgundy-500"}),"Draft Order"]}),!M&&n.jsxs("button",{onClick:w,className:"flex items-center gap-2 px-3 py-1.5 bg-burgundy-100 hover:bg-burgundy-200 text-burgundy-700 rounded-lg text-sm transition-colors",children:[n.jsx(WQ,{className:"h-4 w-4"}),"Randomize"]})]}),n.jsx("div",{className:"divide-y divide-cream-100",children:s.map((O,L)=>{var B,D;const P=R(O),$=O===(h==null?void 0:h.id);return n.jsxs("div",{draggable:!M,onDragStart:()=>v(L),onDragOver:se=>j(se,L),onDragEnd:C,className:`flex items-center gap-3 px-4 py-3 ${M?"":"cursor-grab active:cursor-grabbing"} ${d===L?"bg-burgundy-50":""} ${$?"bg-burgundy-50/50":""}`,children:[!M&&n.jsx(qv,{className:"h-5 w-5 text-neutral-400 flex-shrink-0"}),n.jsx("div",{className:"w-8 h-8 bg-burgundy-500 rounded-full flex items-center justify-center text-white font-bold",children:L+1}),(B=P==null?void 0:P.users)!=null&&B.avatar_url?n.jsx("img",{src:P.users.avatar_url,alt:"",className:"w-10 h-10 rounded-full object-cover"}):n.jsx("div",{className:"w-10 h-10 bg-cream-100 rounded-full flex items-center justify-center border border-cream-200",children:n.jsx($e,{className:"h-5 w-5 text-neutral-400"})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("p",{className:"text-neutral-800 font-medium flex items-center gap-2",children:[(D=P==null?void 0:P.users)==null?void 0:D.display_name,O===(p==null?void 0:p.commissioner_id)&&n.jsx(tr,{className:"h-4 w-4 text-burgundy-500"})]}),$&&n.jsx("p",{className:"text-burgundy-500 text-sm",children:"You"})]}),n.jsxs("div",{className:"text-neutral-500 text-sm",children:["Pick ",L+1," & ",((x==null?void 0:x.length)||0)*2-L]})]},O)})}),(x==null?void 0:x.length)===0&&n.jsxs("div",{className:"p-8 text-center",children:[n.jsx($e,{className:"h-12 w-12 text-neutral-400 mx-auto mb-4"}),n.jsx("p",{className:"text-neutral-600",children:"No members yet."}),n.jsx("p",{className:"text-neutral-500 text-sm",children:"Invite players to join your league."})]})]}),n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-2xl p-4 mb-6",children:[n.jsxs("h3",{className:"text-neutral-800 font-medium mb-2 flex items-center gap-2",children:[n.jsx(at,{className:"h-5 w-5 text-blue-500"}),"Snake Draft Format"]}),n.jsx("p",{className:"text-neutral-600 text-sm",children:"Each player drafts 2 castaways. Round 1 goes in order (1, 2, 3...), then Round 2 reverses (...3, 2, 1). This ensures fairness by giving later picks an earlier second pick."})]}),n.jsxs("div",{className:"space-y-3",children:[!M&&n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>S.mutate(),disabled:!i||S.isPending,className:"btn btn-primary w-full flex items-center justify-center gap-2",children:S.isPending?n.jsx(me,{className:"h-5 w-5 animate-spin"}):n.jsxs(n.Fragment,{children:[n.jsx(Ci,{className:"h-5 w-5"}),"Save Draft Order"]})}),n.jsx("button",{onClick:()=>{confirm("Are you sure you want to start the draft? This cannot be undone.")&&k.mutate()},disabled:!I||k.isPending||i,className:"w-full bg-green-600 hover:bg-green-500 disabled:bg-neutral-300 disabled:text-neutral-500 text-white font-bold py-3 rounded-xl transition-colors flex items-center justify-center gap-2",children:k.isPending?n.jsx(me,{className:"h-5 w-5 animate-spin"}):"Start Draft Now"}),i&&n.jsx("p",{className:"text-amber-600 text-sm text-center",children:"Save your changes before starting the draft."})]}),M&&n.jsx(z,{to:`/leagues/${e}/draft`,className:"btn btn-primary w-full flex items-center justify-center gap-2",children:"Go to Draft Room"})]})]})]}):n.jsxs(n.Fragment,{children:[n.jsx(Se,{}),n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 p-4 pb-24",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx(z,{to:`/leagues/${e}`,className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:n.jsx(st,{className:"h-5 w-5 text-neutral-600"})}),n.jsx("h1",{className:"text-2xl font-display font-bold text-neutral-800",children:"Draft Settings"})]}),n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-8 text-center",children:[n.jsx(at,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),n.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-2",children:"Access Denied"}),n.jsx("p",{className:"text-neutral-600",children:"Only the league creator can manage draft settings."})]})]})]})}function Fte(){const{user:e}=dt(),t=Et(),[r,s]=T.useState([]),[a,i]=T.useState(!1),[o,d]=T.useState(null),[u,h]=T.useState(!1),[p,f]=T.useState(!1),{data:x}=re({queryKey:["active-season"],queryFn:async()=>{const{data:P,error:$}=await K.from("seasons").select("*").eq("is_active",!0).single();if($)throw $;return P}}),{data:y,isLoading:b}=U4(x==null?void 0:x.id),{data:w,isLoading:v}=re({queryKey:["draft-rankings",x==null?void 0:x.id,e==null?void 0:e.id],queryFn:async()=>{if(!(x!=null&&x.id)||!(e!=null&&e.id))return null;const{data:P,error:$}=await K.from("draft_rankings").select("*").eq("season_id",x.id).eq("user_id",e.id).single();if($&&$.code!=="PGRST116")throw $;return P},enabled:!!(x!=null&&x.id)&&!!(e!=null&&e.id)});T.useEffect(()=>{if(y&&y.length>0&&r.length===0)if(w!=null&&w.rankings&&Array.isArray(w.rankings))s(w.rankings);else{const P=y.map($=>$.id);s(P)}},[y,w,r.length]);const j=De({mutationFn:async()=>{if(!(x!=null&&x.id)||!(e!=null&&e.id))throw new Error("Missing season or user");const{error:P}=await K.from("draft_rankings").upsert({user_id:e.id,season_id:x.id,rankings:r,updated_at:new Date().toISOString()});if(P)throw P},onSuccess:()=>{t.invalidateQueries({queryKey:["draft-rankings",x==null?void 0:x.id,e==null?void 0:e.id]}),i(!1),f(!0),setTimeout(()=>f(!1),3e3)}}),C=T.useMemo(()=>{const P=new Map;return y==null||y.forEach($=>P.set($.id,$)),P},[y]),S=x!=null&&x.draft_deadline?new Date(x.draft_deadline):null,R=S?new Date>S:!1,E=P=>{if(P===0)return;const $=[...r];[$[P-1],$[P]]=[$[P],$[P-1]],s($),i(!0)},I=P=>{if(P===r.length-1)return;const $=[...r];[$[P],$[P+1]]=[$[P+1],$[P]],s($),i(!0)},M=P=>d(P),O=(P,$)=>{if(P.preventDefault(),o===null||o===$)return;const B=[...r],[D]=B.splice(o,1);B.splice($,0,D),s(B),d($),i(!0)},L=()=>d(null);return v||b?n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex flex-col",children:[n.jsx(Se,{}),n.jsx("main",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8 flex-1 flex items-center justify-center",children:n.jsx(me,{className:"h-8 w-8 text-burgundy-500 animate-spin"})}),n.jsx(tn,{})]}):x?n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex flex-col",children:[n.jsx(Se,{}),n.jsxs("main",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8 flex-1",children:[n.jsxs("div",{className:"mb-6",children:[n.jsxs(z,{to:"/dashboard",className:"inline-flex items-center gap-2 text-neutral-600 hover:text-neutral-800 mb-4",children:[n.jsx(st,{className:"h-4 w-4"}),"Back to Dashboard"]}),n.jsx("h1",{className:"text-3xl font-display font-bold text-neutral-800 mb-2",children:"Global Draft Rankings"}),n.jsxs("p",{className:"text-neutral-500",children:["Rank all castaways for Season ",x.number,". This ranking will be used for all your leagues this season."]})]}),S&&n.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-xl p-4 mb-6 flex items-center gap-3",children:[n.jsx(Mt,{className:"h-5 w-5 text-orange-600 flex-shrink-0"}),n.jsxs("div",{children:[n.jsxs("p",{className:"text-orange-800 font-medium",children:["Draft Deadline: ",S.toLocaleDateString()," at"," ",S.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),R&&n.jsx("p",{className:"text-orange-600 text-sm mt-1",children:"Deadline has passed"})]})]}),p&&n.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4 mb-6 flex items-center gap-3",children:[n.jsx(qt,{className:"h-5 w-5 text-green-600"}),n.jsx("p",{className:"text-green-800 font-medium",children:"Rankings saved successfully!"})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 overflow-hidden",children:[n.jsxs("div",{className:"p-6 border-b border-cream-100 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold text-neutral-800",children:"Your Rankings"}),n.jsx("p",{className:"text-sm text-neutral-500 mt-1",children:"Drag to reorder or use the arrows to move castaways up/down"})]}),n.jsx("button",{onClick:()=>{a?h(!0):j.mutate()},disabled:!a||j.isPending,className:"btn btn-primary flex items-center gap-2 disabled:opacity-50",children:j.isPending?n.jsxs(n.Fragment,{children:[n.jsx(me,{className:"h-4 w-4 animate-spin"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Ci,{className:"h-4 w-4"}),"Save Rankings"]})})]}),n.jsx("div",{className:"divide-y divide-cream-100",children:r.map((P,$)=>{const B=C.get(P);return B?n.jsxs("div",{draggable:!0,onDragStart:()=>M($),onDragOver:D=>O(D,$),onDragEnd:L,className:`flex items-center gap-4 p-4 hover:bg-cream-50 transition-colors ${o===$?"opacity-50":""}`,children:[n.jsx(qv,{className:"h-5 w-5 text-neutral-400 cursor-move"}),n.jsx("div",{className:"w-12 text-center",children:n.jsxs("span",{className:"text-lg font-bold text-neutral-600",children:["#",$+1]})}),n.jsx("img",{src:B.photo_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${B.name}`,alt:B.name,className:"w-12 h-12 rounded-full object-cover"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold text-neutral-800",children:B.name}),B.occupation&&n.jsx("p",{className:"text-sm text-neutral-500",children:B.occupation})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>E($),disabled:$===0,className:"p-2 rounded-lg hover:bg-cream-100 disabled:opacity-30 disabled:cursor-not-allowed",children:""}),n.jsx("button",{onClick:()=>I($),disabled:$===r.length-1,className:"p-2 rounded-lg hover:bg-cream-100 disabled:opacity-30 disabled:cursor-not-allowed",children:""})]})]},P):null})})]}),u&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl p-6 max-w-lg w-full max-h-[90vh] flex flex-col",children:[n.jsx("h3",{className:"text-xl font-semibold text-neutral-800 mb-2",children:"Confirm Your Rankings"}),n.jsx("p",{className:"text-neutral-600 mb-4 text-sm",children:"This will update your global draft rankings for all leagues this season."}),n.jsx("div",{className:"flex-1 overflow-y-auto mb-4 border border-cream-200 rounded-xl",children:n.jsx("div",{className:"divide-y divide-cream-100",children:r.map((P,$)=>{const B=C.get(P);if(!B)return null;const D=$<2;return n.jsxs("div",{className:`flex items-center gap-3 p-3 ${D?"bg-amber-50":$%2===0?"bg-white":"bg-cream-50"}`,children:[n.jsxs("span",{className:`w-8 text-center font-bold ${D?"text-amber-600":"text-neutral-500"}`,children:["#",$+1]}),n.jsx("img",{src:B.photo_url||`https://api.dicebear.com/7.x/avataaars/svg?seed=${B.name}`,alt:B.name,className:"w-8 h-8 rounded-full object-cover"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:`font-medium truncate ${D?"text-amber-800":"text-neutral-800"}`,children:B.name}),B.tribe_original&&n.jsx("p",{className:"text-xs text-neutral-500",children:B.tribe_original})]}),D&&n.jsx("span",{className:"text-xs bg-amber-200 text-amber-800 px-2 py-0.5 rounded-full font-medium",children:"Top Pick"})]},P)})})}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:()=>{h(!1),j.mutate()},className:"flex-1 btn btn-primary",children:"Confirm & Save"}),n.jsx("button",{onClick:()=>h(!1),className:"flex-1 btn btn-secondary",children:"Go Back"})]})]})})]}),n.jsx(tn,{})]}):n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex flex-col",children:[n.jsx(Se,{}),n.jsx("main",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8 flex-1 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx(at,{className:"h-12 w-12 text-neutral-400 mx-auto mb-4"}),n.jsx("h2",{className:"text-xl font-bold text-neutral-700 mb-2",children:"No Active Season"}),n.jsx("p",{className:"text-neutral-500",children:"Check back when a new season begins!"})]})}),n.jsx(tn,{})]})}function Ute(){const{leagueId:e}=On(),[t,r]=T.useState(!1),[s,a]=T.useState(!1),{data:i}=re({queryKey:["current-user"],queryFn:async()=>{const{data:{user:b}}=await K.auth.getUser();return b}}),{data:o,isLoading:d}=re({queryKey:["league",e],queryFn:async()=>{if(!e)throw new Error("No league ID");const{data:b,error:w}=await K.from("leagues").select("*, seasons(*)").eq("id",e).single();if(w)throw w;return b},enabled:!!e}),{data:u}=re({queryKey:["league-member-count",e],queryFn:async()=>{if(!e)throw new Error("No league ID");const{count:b,error:w}=await K.from("league_members").select("*",{count:"exact",head:!0}).eq("league_id",e);if(w)throw w;return b||0},enabled:!!e}),h=(i==null?void 0:i.id)===(o==null?void 0:o.commissioner_id),p=`${window.location.origin}/join/${o==null?void 0:o.code}`,f=((o==null?void 0:o.max_players)||12)-(u||0),x=async()=>{await navigator.clipboard.writeText(p),r(!0),setTimeout(()=>r(!1),2e3)},y=async()=>{var b,w;if(navigator.share)try{await navigator.share({title:`Join ${o==null?void 0:o.name}`,text:`Join my Survivor Fantasy league! Season ${(b=o==null?void 0:o.seasons)==null?void 0:b.number}: ${(w=o==null?void 0:o.seasons)==null?void 0:w.name}`,url:p})}catch{x()}else x()};return d?n.jsxs(n.Fragment,{children:[n.jsx(Se,{}),n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center",children:n.jsx(me,{className:"h-8 w-8 text-burgundy-500 animate-spin"})})]}):h?n.jsxs(n.Fragment,{children:[n.jsx(Se,{}),n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 p-4 pb-24",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx(z,{to:`/leagues/${e}/settings`,className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:n.jsx(st,{className:"h-5 w-5 text-neutral-600"})}),n.jsxs("div",{children:[n.jsxs("h1",{className:"text-2xl font-display font-bold text-neutral-800 flex items-center gap-2",children:[n.jsx(rQ,{className:"h-6 w-6 text-burgundy-500"}),"Invite Link"]}),n.jsx("p",{className:"text-neutral-500",children:o==null?void 0:o.name})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-4 border border-cream-200",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx($e,{className:"h-5 w-5 text-burgundy-500"}),n.jsx("span",{className:"text-neutral-500 text-sm",children:"Members"})]}),n.jsxs("p",{className:"text-2xl font-bold text-neutral-800",children:[u,"/",o==null?void 0:o.max_players]})]}),n.jsxs("div",{className:`rounded-2xl p-4 border ${f>0?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(tr,{className:"h-5 w-5 text-burgundy-500"}),n.jsx("span",{className:"text-neutral-500 text-sm",children:"Spots Left"})]}),n.jsx("p",{className:`text-2xl font-bold ${f>0?"text-green-600":"text-red-600"}`,children:f})]})]}),n.jsxs("div",{className:"bg-burgundy-50 border border-burgundy-200 rounded-2xl p-6 mb-6 text-center",children:[n.jsx("p",{className:"text-burgundy-600 text-sm mb-2",children:"League Code"}),n.jsx("p",{className:"text-4xl font-mono font-bold text-burgundy-500 tracking-widest mb-4",children:o==null?void 0:o.code}),n.jsx("p",{className:"text-neutral-600 text-sm",children:"Share this code with friends to join your league"})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-4 border border-cream-200 mb-6",children:[n.jsx("p",{className:"text-neutral-500 text-sm mb-2",children:"Invite URL"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",value:p,readOnly:!0,className:"input flex-1 font-mono text-sm"}),n.jsx("button",{onClick:x,className:`px-4 py-2 rounded-xl font-medium transition-colors flex items-center gap-2 ${t?"bg-green-500 text-white":"bg-burgundy-500 hover:bg-burgundy-600 text-white"}`,children:t?n.jsxs(n.Fragment,{children:[n.jsx(qt,{className:"h-4 w-4"}),"Copied!"]}):n.jsxs(n.Fragment,{children:[n.jsx(Ip,{className:"h-4 w-4"}),"Copy"]})})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[n.jsxs("button",{onClick:y,className:"btn btn-primary flex items-center justify-center gap-2",children:[n.jsx(Mp,{className:"h-5 w-5"}),"Share Invite"]}),n.jsxs("button",{onClick:()=>a(!s),className:"btn btn-secondary flex items-center justify-center gap-2",children:[n.jsx(u2,{className:"h-5 w-5"}),s?"Hide QR":"Show QR"]})]}),s&&n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-8 mb-6 text-center border border-cream-200",children:[n.jsx("div",{className:"w-48 h-48 mx-auto bg-cream-50 rounded-xl flex items-center justify-center border border-cream-200",children:n.jsx(u2,{className:"h-24 w-24 text-neutral-400"})}),n.jsxs("p",{className:"text-neutral-600 text-sm mt-4",children:["Scan to join ",o==null?void 0:o.name]})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200",children:[n.jsx("div",{className:"px-4 py-3 border-b border-cream-200",children:n.jsx("h2",{className:"text-neutral-800 font-medium",children:"Join Requirements"})}),n.jsxs("div",{className:"divide-y divide-cream-100",children:[n.jsxs("div",{className:"px-4 py-3 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Mn,{className:"h-5 w-5 text-neutral-400"}),n.jsx("span",{className:"text-neutral-800",children:"Password Protected"})]}),n.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs ${o!=null&&o.password_hash?"bg-amber-100 text-amber-700":"bg-green-100 text-green-700"}`,children:o!=null&&o.password_hash?"Yes":"No"})]}),n.jsxs("div",{className:"px-4 py-3 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Sa,{className:"h-5 w-5 text-neutral-400"}),n.jsx("span",{className:"text-neutral-800",children:"Public League"})]}),n.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs ${o!=null&&o.is_public?"bg-green-100 text-green-700":"bg-neutral-100 text-neutral-600"}`,children:o!=null&&o.is_public?"Yes":"No"})]}),(o==null?void 0:o.require_donation)&&n.jsxs("div",{className:"px-4 py-3 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(tr,{className:"h-5 w-5 text-burgundy-500"}),n.jsx("span",{className:"text-neutral-800",children:"Entry Fee"})]}),n.jsxs("span",{className:"text-burgundy-500 font-bold",children:["$",o.donation_amount]})]})]})]}),n.jsxs("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-2xl p-4",children:[n.jsxs("h3",{className:"text-neutral-800 font-medium mb-2 flex items-center gap-2",children:[n.jsx(at,{className:"h-5 w-5 text-blue-500"}),"Invite Tips"]}),n.jsxs("ul",{className:"space-y-2 text-sm text-neutral-600",children:[n.jsx("li",{children:" Share the invite link via text, email, or social media"}),n.jsx("li",{children:" New members must create an account to join"}),n.jsx("li",{children:" The league code can be entered manually at /join"}),(o==null?void 0:o.require_donation)&&n.jsxs("li",{children:[" Members will need to pay the $",o.donation_amount," entry fee via Stripe"]})]})]}),n.jsx("div",{className:"mt-6",children:n.jsx(z,{to:`/leagues/${e}/settings`,className:"btn btn-secondary w-full flex items-center justify-center gap-2",children:"Manage League Settings"})})]})]}):n.jsxs(n.Fragment,{children:[n.jsx(Se,{}),n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 p-4 pb-24",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx(z,{to:`/leagues/${e}`,className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:n.jsx(st,{className:"h-5 w-5 text-neutral-600"})}),n.jsx("h1",{className:"text-2xl font-display font-bold text-neutral-800",children:"Invite Link"})]}),n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-8 text-center",children:[n.jsx(at,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),n.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-2",children:"Access Denied"}),n.jsx("p",{className:"text-neutral-600",children:"Only the league creator can manage invites."})]})]})]})}function qte(){return n.jsxs("div",{className:"min-h-screen bg-cream-50 flex flex-col",children:[n.jsx(Se,{}),n.jsxs("div",{className:"flex-1 max-w-4xl mx-auto px-6 py-12",children:[n.jsxs("div",{className:"mb-8",children:[n.jsxs(z,{to:"/",className:"inline-flex items-center gap-2 text-burgundy-600 hover:text-burgundy-700 mb-4",children:[n.jsx(st,{className:"h-4 w-4"}),"Back to Home"]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(_s,{className:"h-8 w-8 text-burgundy-500"}),n.jsx("h1",{className:"text-3xl font-display font-bold text-neutral-800",children:"Privacy Policy"})]}),n.jsx("p",{className:"text-neutral-500 mt-2",children:"Last updated: December 26, 2025"})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-8 border border-cream-200 space-y-8",children:[n.jsxs("section",{children:[n.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-3",children:"1. Information We Collect"}),n.jsx("p",{className:"text-neutral-600 mb-3",children:"We collect information you provide directly to us when you:"}),n.jsxs("ul",{className:"list-disc list-inside text-neutral-600 space-y-2 ml-4",children:[n.jsx("li",{children:"Create an account (email address, display name)"}),n.jsx("li",{children:"Add a phone number for SMS notifications"}),n.jsx("li",{children:"Make payments for league entry fees"}),n.jsx("li",{children:"Participate in leagues, drafts, and weekly picks"}),n.jsx("li",{children:"Contact us for support"})]})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-3",children:"2. How We Use Your Information"}),n.jsx("p",{className:"text-neutral-600 mb-3",children:"We use the information we collect to:"}),n.jsxs("ul",{className:"list-disc list-inside text-neutral-600 space-y-2 ml-4",children:[n.jsx("li",{children:"Provide, maintain, and improve our services"}),n.jsx("li",{children:"Process transactions and send related information"}),n.jsx("li",{children:"Send you notifications about picks, scores, and league activity"}),n.jsx("li",{children:"Respond to your comments, questions, and support requests"}),n.jsx("li",{children:"Monitor and analyze trends, usage, and activities"})]})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-3",children:"3. Information Sharing"}),n.jsx("p",{className:"text-neutral-600 mb-3",children:"We do not sell, trade, or rent your personal information to third parties. We may share your information in the following circumstances:"}),n.jsxs("ul",{className:"list-disc list-inside text-neutral-600 space-y-2 ml-4",children:[n.jsx("li",{children:"With other league members (display name, picks, scores)"}),n.jsx("li",{children:"With service providers who assist in our operations (Stripe for payments, Twilio for SMS)"}),n.jsx("li",{children:"If required by law or to protect our rights"})]})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-3",children:"4. Data Security"}),n.jsx("p",{className:"text-neutral-600",children:"We take reasonable measures to help protect your personal information from loss, theft, misuse, unauthorized access, disclosure, alteration, and destruction. Your data is stored securely using industry-standard encryption and access controls."})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-3",children:"5. Your Choices"}),n.jsx("p",{className:"text-neutral-600 mb-3",children:"You may:"}),n.jsxs("ul",{className:"list-disc list-inside text-neutral-600 space-y-2 ml-4",children:[n.jsx("li",{children:"Update your account information at any time in your Profile"}),n.jsx("li",{children:"Opt out of promotional communications"}),n.jsx("li",{children:"Choose which notifications you receive (email, SMS, push)"}),n.jsx("li",{children:"Request deletion of your account by contacting us"})]})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-3",children:"6. Cookies and Tracking"}),n.jsx("p",{className:"text-neutral-600",children:"We use cookies and similar technologies to maintain your session, remember your preferences, and understand how you interact with our service. You can control cookies through your browser settings."})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-3",children:"7. Children's Privacy"}),n.jsx("p",{className:"text-neutral-600",children:"Our service is not directed to children under 13. We do not knowingly collect personal information from children under 13. If you believe we have collected information from a child under 13, please contact us."})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-3",children:"8. Changes to This Policy"}),n.jsx("p",{className:"text-neutral-600",children:'We may update this Privacy Policy from time to time. We will notify you of any changes by posting the new Privacy Policy on this page and updating the "Last updated" date.'})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-3",children:"9. Contact Us"}),n.jsxs("p",{className:"text-neutral-600",children:["If you have any questions about this Privacy Policy, please contact us at"," ",n.jsx(z,{to:"/contact",className:"text-burgundy-600 hover:text-burgundy-700 underline",children:"our contact page"}),"."]})]})]})]}),n.jsx(tn,{})]})}function Bte(){return n.jsxs("div",{className:"min-h-screen bg-cream-50 flex flex-col",children:[n.jsx(Se,{}),n.jsxs("div",{className:"flex-1 max-w-4xl mx-auto px-6 py-12",children:[n.jsxs("div",{className:"mb-8",children:[n.jsxs(z,{to:"/",className:"inline-flex items-center gap-2 text-burgundy-600 hover:text-burgundy-700 mb-4",children:[n.jsx(st,{className:"h-4 w-4"}),"Back to Home"]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx($u,{className:"h-8 w-8 text-burgundy-500"}),n.jsx("h1",{className:"text-3xl font-display font-bold text-neutral-800",children:"Terms of Service"})]}),n.jsx("p",{className:"text-neutral-500 mt-2",children:"Last updated: December 26, 2025"})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-8 border border-cream-200 space-y-8",children:[n.jsxs("section",{children:[n.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-3",children:"1. Acceptance of Terms"}),n.jsx("p",{className:"text-neutral-600",children:'By accessing or using Reality Games Survivor Fantasy League ("the Service"), you agree to be bound by these Terms of Service. If you do not agree to these terms, please do not use the Service.'})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-3",children:"2. Description of Service"}),n.jsx("p",{className:"text-neutral-600",children:'Reality Games Survivor Fantasy League is a fantasy sports platform where users draft castaways from the CBS television show "Survivor," make weekly picks, and compete in leagues based on castaway performance. This is a fan-made fantasy game and is not affiliated with, endorsed by, or sponsored by CBS, Survivor, or any related entities.'})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-3",children:"3. User Accounts"}),n.jsx("p",{className:"text-neutral-600 mb-3",children:"To use certain features of the Service, you must create an account. You agree to:"}),n.jsxs("ul",{className:"list-disc list-inside text-neutral-600 space-y-2 ml-4",children:[n.jsx("li",{children:"Provide accurate and complete information"}),n.jsx("li",{children:"Maintain the security of your account credentials"}),n.jsx("li",{children:"Notify us immediately of any unauthorized access"}),n.jsx("li",{children:"Accept responsibility for all activities under your account"})]})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-3",children:"4. League Entry Fees and Payments"}),n.jsx("p",{className:"text-neutral-600 mb-3",children:'Some leagues may require entry fees ("donations"). By joining a paid league:'}),n.jsxs("ul",{className:"list-disc list-inside text-neutral-600 space-y-2 ml-4",children:[n.jsx("li",{children:"You authorize us to process payment through Stripe"}),n.jsx("li",{children:"Refunds are available only if you leave before the draft begins"}),n.jsx("li",{children:"Site administrators have final discretion on all league payouts and prize distribution"})]})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-3",children:"5. Mobile and Device Usage"}),n.jsx("p",{className:"text-neutral-600 mb-3",children:"The Service is designed to be accessible on mobile devices, tablets, and desktop computers. By using the Service on any device:"}),n.jsxs("ul",{className:"list-disc list-inside text-neutral-600 space-y-2 ml-4",children:[n.jsx("li",{children:"You are responsible for ensuring your device meets minimum technical requirements"}),n.jsx("li",{children:"You are responsible for any data charges incurred through your mobile carrier"}),n.jsx("li",{children:"We are not responsible for device-specific issues or compatibility problems"}),n.jsx("li",{children:"Some features may be optimized for specific screen sizes or device types"}),n.jsx("li",{children:"You agree to use the Service in compliance with your device's terms of service"})]})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-3",children:"6. User Conduct"}),n.jsx("p",{className:"text-neutral-600 mb-3",children:"You agree not to:"}),n.jsxs("ul",{className:"list-disc list-inside text-neutral-600 space-y-2 ml-4",children:[n.jsx("li",{children:"Use the Service for any unlawful purpose"}),n.jsx("li",{children:"Harass, abuse, or harm other users"}),n.jsx("li",{children:"Attempt to gain unauthorized access to the Service"}),n.jsx("li",{children:"Interfere with or disrupt the Service"}),n.jsx("li",{children:"Create multiple accounts to gain unfair advantages"}),n.jsx("li",{children:"Use automated scripts or bots"})]})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-3",children:"7. Scoring and Game Rules"}),n.jsx("p",{className:"text-neutral-600",children:"Scoring is determined by our proprietary system based on castaway actions during each episode. We reserve the right to adjust scores if errors are discovered. All scoring decisions are final. Picks must be submitted before the posted deadline; late picks may be auto-filled."})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-3",children:"8. Intellectual Property"}),n.jsx("p",{className:"text-neutral-600",children:'The Service and its original content, features, and functionality are owned by Reality Games Fantasy League and are protected by copyright, trademark, and other intellectual property laws. "Survivor" is a trademark of CBS. We are not affiliated with CBS.'})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-3",children:"9. Disclaimer of Warranties"}),n.jsx("p",{className:"text-neutral-600",children:'THE SERVICE IS PROVIDED "AS IS" AND "AS AVAILABLE" WITHOUT WARRANTIES OF ANY KIND, EXPRESS OR IMPLIED. WE DO NOT GUARANTEE THAT THE SERVICE WILL BE UNINTERRUPTED, SECURE, OR ERROR-FREE.'})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-3",children:"10. Limitation of Liability"}),n.jsx("p",{className:"text-neutral-600",children:"TO THE MAXIMUM EXTENT PERMITTED BY LAW, WE SHALL NOT BE LIABLE FOR ANY INDIRECT, INCIDENTAL, SPECIAL, CONSEQUENTIAL, OR PUNITIVE DAMAGES ARISING FROM YOUR USE OF THE SERVICE, INCLUDING LOSS OF PROFITS, DATA, OR PRIZES."})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-3",children:"11. Termination"}),n.jsx("p",{className:"text-neutral-600",children:"We may terminate or suspend your account at any time for violations of these Terms or for any other reason at our discretion. Upon termination, your right to use the Service will immediately cease."})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-3",children:"12. Changes to Terms"}),n.jsx("p",{className:"text-neutral-600",children:"We reserve the right to modify these Terms at any time. We will provide notice of significant changes by posting the updated Terms on this page. Your continued use of the Service after changes constitutes acceptance of the new Terms."})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-3",children:"13. Contact Us"}),n.jsxs("p",{className:"text-neutral-600",children:["If you have any questions about these Terms, please contact us at"," ",n.jsx(z,{to:"/contact",className:"text-burgundy-600 hover:text-burgundy-700 underline",children:"our contact page"}),"."]})]})]})]}),n.jsx(tn,{})]})}function Hte(){return n.jsxs("div",{className:"text-center mb-12",children:[n.jsxs("div",{className:"flex items-center justify-center gap-3 mb-6",children:[n.jsx(bn,{className:"h-12 w-12 text-burgundy-500"}),n.jsx("h1",{className:"text-5xl md:text-6xl font-display font-bold text-neutral-800",children:"Survivor Trivia Challenge"})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-8 border-2 border-burgundy-200 mb-8 max-w-3xl mx-auto",children:[n.jsx("h2",{className:"text-2xl font-display font-bold text-burgundy-600 mb-6",children:"How It Works"}),n.jsxs("div",{className:"space-y-4 text-left",children:[n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:"w-8 h-8 bg-burgundy-100 rounded-full flex items-center justify-center flex-shrink-0 mt-1",children:n.jsx("span",{className:"text-burgundy-600 font-bold",children:"1"})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-neutral-800 mb-1",children:"Answer All 24 Questions"}),n.jsx("p",{className:"text-neutral-600 text-sm",children:"You can answer all 24 questions in one day if you get them all right. Prove you're a true Survivor fan!"})]})]}),n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center flex-shrink-0 mt-1",children:n.jsx(Mt,{className:"h-4 w-4 text-red-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-neutral-800 mb-1",children:"20 Seconds Per Question"}),n.jsx("p",{className:"text-neutral-600 text-sm",children:"Each question has a 20-second timer. Time runs out? That counts as wrong."})]})]}),n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center flex-shrink-0 mt-1",children:n.jsx(Mn,{className:"h-4 w-4 text-red-600"})}),n.jsxs("div",{children:[n.jsxs("p",{className:"font-semibold text-neutral-800 mb-1",children:["Get One Wrong? ",n.jsx("span",{className:"text-red-600",children:"You have to try again tomorrow"})]}),n.jsx("p",{className:"text-neutral-600 text-sm",children:"Miss a question or run out of time? You're locked out for 24 hours. Come back tomorrow to continue."})]})]}),n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:"w-8 h-8 bg-burgundy-100 rounded-full flex items-center justify-center flex-shrink-0 mt-1",children:n.jsx(Ke,{className:"h-4 w-4 text-burgundy-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-neutral-800 mb-1",children:"Leaderboard Tracks Your Progress"}),n.jsx("p",{className:"text-neutral-600 text-sm",children:"See how many days it took you to complete all 24 questions. Fastest completion wins!"})]})]})]})]})]})}function Wte({questionsAnswered:e,totalQuestions:t,questionsCorrect:r}){const s=Array.from({length:t},(a,i)=>({isLit:i<r,isCurrent:i===r&&e===r,number:i+1}));return n.jsxs("div",{className:"mb-8 bg-white rounded-2xl shadow-card p-6 border border-cream-200",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("span",{className:"text-sm font-medium text-neutral-600",children:[r," of ",t," torches lit"]}),n.jsxs("span",{className:"text-sm font-medium text-burgundy-600",children:[r," correct"]})]}),n.jsx("div",{className:"grid grid-cols-6 sm:grid-cols-8 md:grid-cols-12 gap-2",children:s.map(a=>n.jsxs("div",{className:`relative flex flex-col items-center justify-center p-1 rounded-lg transition-all duration-300 ${a.isLit?"bg-gradient-to-b from-orange-100 to-amber-50":a.isCurrent?"bg-burgundy-50 ring-2 ring-burgundy-300 animate-pulse":"bg-neutral-50"}`,title:`Question ${a.number}${a.isLit?" ":""}`,children:[n.jsxs("div",{className:"relative",children:[a.isLit&&n.jsx("div",{className:"absolute -top-1 left-1/2 -translate-x-1/2",children:n.jsx(bn,{className:"h-4 w-4 text-orange-500 animate-flicker",fill:"currentColor"})}),n.jsx("div",{className:`w-2 h-5 rounded-sm mt-2 ${a.isLit?"bg-gradient-to-b from-amber-600 to-amber-800":"bg-neutral-300"}`})]}),n.jsx("span",{className:`text-[10px] font-medium mt-1 ${a.isLit?"text-amber-700":"text-neutral-400"}`,children:a.number})]},a.number))}),n.jsx("style",{children:`
        @keyframes flicker {
          0%, 100% { opacity: 1; transform: translateX(-50%) scale(1); }
          25% { opacity: 0.9; transform: translateX(-50%) scale(1.05); }
          50% { opacity: 1; transform: translateX(-50%) scale(0.95); }
          75% { opacity: 0.85; transform: translateX(-50%) scale(1.02); }
        }
        .animate-flicker {
          animation: flicker 0.8s ease-in-out infinite;
        }
      `})]})}function zte({lockedUntil:e}){const t=()=>{const r=new Date,a=new Date(e).getTime()-r.getTime();if(a<=0)return null;const i=Math.floor(a/(1e3*60*60)),o=Math.floor(a%(1e3*60*60)/(1e3*60));return`${i}h ${o}m`};return n.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-red-100 border-4 border-red-400 rounded-2xl p-8 mb-8 text-center shadow-lg",children:[n.jsx("div",{className:"text-6xl mb-4",children:""}),n.jsx("h2",{className:"text-4xl font-display font-bold text-red-800 mb-4",children:"It's Time For You To Go"}),n.jsx("p",{className:"text-xl text-red-700 mb-2 font-semibold",children:"The tribe has spoken."}),n.jsxs("p",{className:"text-lg text-red-600 mb-6",children:["You got a question wrong. Come back in"," ",n.jsx("strong",{className:"text-2xl",children:t()||"24 hours"})," to continue."]}),n.jsxs("p",{className:"text-sm text-red-500 mb-6",children:["Lockout expires: ",Qm(e)]}),n.jsxs(z,{to:"/dashboard",className:"inline-flex items-center gap-2 px-8 py-4 bg-burgundy-600 text-white font-bold rounded-xl hover:bg-burgundy-700 transition-colors shadow-md text-lg",children:["Join a League While You Wait",n.jsx(Ir,{className:"h-5 w-5"})]})]})}function Gte({daysToComplete:e}){return n.jsxs("div",{className:"bg-green-50 border-2 border-green-300 rounded-2xl p-8 mb-8 text-center",children:[n.jsx(Ke,{className:"h-12 w-12 text-green-600 mx-auto mb-4"}),n.jsx("h3",{className:"text-2xl font-display font-bold text-green-800 mb-2",children:"Congratulations! You Completed All 24 Questions!"}),n.jsxs("p",{className:"text-green-700 text-lg mb-4",children:["You finished in"," ",n.jsxs("strong",{children:[e," day",e!==1?"s":""]})]}),n.jsx(z,{to:"/dashboard",className:"inline-block bg-green-600 text-white font-bold px-8 py-3 rounded-xl hover:bg-green-700 transition-colors",children:"Join a League Now"})]})}function Kte({question:e,totalQuestions:t,timeRemaining:r,selectedIndex:s,showResult:a,isCorrect:i,isTimedOut:o,alreadyAnswered:d,userAnswer:u,correctIndex:h,funFact:p,wrongMessage:f,isPending:x,onAnswer:y}){return n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-8 border-2 border-burgundy-200",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("div",{children:n.jsxs("h2",{className:"text-xl font-display font-bold text-neutral-800",children:["Question ",e.questionNumber," of ",t]})}),!d&&!a&&n.jsxs("div",{className:"flex items-center gap-2 bg-red-50 border-2 border-red-300 rounded-xl px-4 py-2",children:[n.jsx(Mt,{className:"h-5 w-5 text-red-600"}),n.jsxs("span",{className:"font-bold text-red-700 text-lg",children:[r,"s"]})]})]}),n.jsx("p",{className:"text-2xl font-display font-bold text-neutral-800 mb-6",children:e.question}),n.jsx("div",{className:"space-y-3 mb-6",children:e.options.map((b,w)=>{const v=s===w||(u==null?void 0:u.selectedIndex)===w,j=a||d,C=v,S=j&&w===h;let k="w-full text-left p-4 rounded-xl border-2 transition-all ";return d?C?k+=u!=null&&u.isCorrect?"bg-green-50 border-green-300 text-green-800":"bg-red-50 border-red-300 text-red-800":S?k+="bg-green-50 border-green-300 text-green-800":k+="bg-neutral-50 border-cream-200 text-neutral-600":a?v?k+=i?"bg-green-50 border-green-300 text-green-800":"bg-red-50 border-red-300 text-red-800":S?k+="bg-green-50 border-green-300 text-green-800":k+="bg-neutral-50 border-cream-200 text-neutral-600":k+="bg-neutral-50 border-cream-200 text-neutral-700 hover:border-burgundy-300 hover:bg-cream-50 cursor-pointer",n.jsx("button",{onClick:()=>y(w),disabled:d||a||o||x,className:k,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{children:b}),a||d?n.jsxs(n.Fragment,{children:[C&&n.jsx("span",{className:"ml-2",children:u!=null&&u.isCorrect||i?n.jsx(qt,{className:"h-5 w-5 text-green-600"}):n.jsx(Sn,{className:"h-5 w-5 text-red-600"})}),!C&&S&&n.jsx(qt,{className:"h-5 w-5 text-green-600 ml-2"})]}):null]})},w)})}),(a||d)&&p&&n.jsx("div",{className:`p-6 rounded-xl mb-6 ${u!=null&&u.isCorrect||i?"bg-green-50 border-2 border-green-300":"bg-red-50 border-2 border-red-300"}`,children:i?n.jsxs(n.Fragment,{children:[n.jsxs("p",{className:"text-lg font-bold text-green-800 mb-2 flex items-center gap-2",children:[n.jsx("span",{className:"text-2xl",children:""})," Correct!"]}),n.jsx("p",{className:"text-sm text-neutral-700",children:p})]}):n.jsxs(n.Fragment,{children:[n.jsxs("p",{className:"text-2xl font-bold text-red-800 mb-3 text-center",children:[" ",f]}),n.jsxs("p",{className:"text-sm text-red-700 text-center mb-2",children:["Correct answer:"," ",n.jsx("span",{className:"font-semibold",children:e.options[h]})]}),n.jsx("p",{className:"text-sm text-neutral-700 mb-3",children:p}),n.jsx("div",{className:"bg-red-100 border border-red-300 rounded-lg p-3 mt-3",children:n.jsx("p",{className:"text-sm font-semibold text-red-800 text-center",children:" You're locked out for 24 hours. Come back tomorrow to continue."})})]})}),o&&!a&&n.jsx("div",{className:"p-4 bg-yellow-50 border-2 border-yellow-300 rounded-xl mb-6",children:n.jsxs("p",{className:"text-sm font-medium text-yellow-800 text-center",children:[" Time's up! ",f]})})]})}function Vte(){return n.jsxs("div",{className:"mt-8 bg-gradient-to-r from-burgundy-500 to-red-600 rounded-2xl p-8 text-white text-center shadow-lg",children:[n.jsx(Ke,{className:"h-12 w-12 mx-auto mb-4"}),n.jsx("h3",{className:"text-2xl font-display font-bold mb-2",children:"Ready to Play for Real?"}),n.jsx("p",{className:"text-burgundy-100 mb-6 max-w-lg mx-auto",children:"Join Season 50 and compete in fantasy leagues. Draft castaways, make weekly picks, and prove you're the ultimate Survivor fan!"}),n.jsx(z,{to:"/dashboard",className:"inline-block bg-white text-burgundy-600 font-bold px-8 py-4 rounded-xl hover:bg-cream-100 transition-colors",children:"Join a League Now"})]})}function Yte({isOpen:e,onClose:t,accessToken:r,currentUserId:s,title:a,subtitle:i,isCompletion:o=!1}){const{data:d,isLoading:u}=re({queryKey:["trivia","leaderboard"],queryFn:async()=>{const x=await Je("/trivia/leaderboard",r);if(x.error)throw new Error(x.error);return x.data},enabled:e&&!!r});if(!e)return null;const h=(d==null?void 0:d.leaderboard)||[],p=x=>x===1?n.jsx(Ke,{className:"h-5 w-5 text-yellow-500"}):x===2?n.jsx(fr,{className:"h-5 w-5 text-gray-400"}):x===3?n.jsx(fr,{className:"h-5 w-5 text-amber-600"}):n.jsx("span",{className:"text-neutral-500 font-mono text-sm",children:x}),f=h.find(x=>x.userId===s);return n.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[n.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:t}),n.jsxs("div",{className:`relative rounded-2xl shadow-2xl max-w-lg w-full max-h-[85vh] overflow-hidden ${o?"bg-gradient-to-b from-yellow-900/90 to-neutral-900 border border-yellow-500/30":"bg-gradient-to-b from-neutral-900 to-neutral-800 border border-orange-500/30"}`,children:[n.jsx("div",{className:`absolute top-0 left-0 right-0 h-32 pointer-events-none ${o?"bg-gradient-to-b from-yellow-500/20 to-transparent":"bg-gradient-to-b from-orange-600/20 to-transparent"}`}),n.jsx("button",{onClick:t,className:"absolute top-4 right-4 p-2 text-neutral-400 hover:text-white transition-colors z-10",children:n.jsx(Sn,{className:"h-5 w-5"})}),n.jsxs("div",{className:"relative px-6 pt-8 pb-4 text-center",children:[n.jsx("div",{className:"flex justify-center mb-4",children:n.jsx("div",{className:"relative",children:o?n.jsxs(n.Fragment,{children:[n.jsx(Ke,{className:"h-16 w-16 text-yellow-400"}),n.jsx(I4,{className:"absolute -top-2 -right-2 h-8 w-8 text-yellow-300 animate-pulse"}),n.jsx("div",{className:"absolute inset-0 h-16 w-16 bg-yellow-500/30 blur-xl"})]}):n.jsxs(n.Fragment,{children:[n.jsx(bn,{className:"h-16 w-16 text-orange-500 animate-pulse"}),n.jsx("div",{className:"absolute inset-0 h-16 w-16 bg-orange-500/30 blur-xl"})]})})}),n.jsx("h2",{className:`text-2xl font-display font-bold mb-2 ${o?"text-yellow-400":"text-orange-400"}`,children:a}),n.jsx("p",{className:"text-neutral-400 text-sm",children:i}),o&&f&&n.jsxs("div",{className:"mt-4 inline-flex items-center gap-2 bg-yellow-500/20 px-4 py-2 rounded-full border border-yellow-500/30",children:[n.jsx(Ke,{className:"h-4 w-4 text-yellow-400"}),n.jsxs("span",{className:"text-yellow-300 font-semibold",children:["You ranked #",f.rank,"  ",f.daysToComplete," ",f.daysToComplete===1?"day":"days","  ",f.attempts," ",f.attempts===1?"try":"tries"]})]})]}),n.jsxs("div",{className:"px-6 pb-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(Ke,{className:"h-5 w-5 text-yellow-500"}),n.jsx("h3",{className:"text-lg font-semibold text-white",children:"Trivia Champions"})]}),u?n.jsx("div",{className:"flex justify-center py-8",children:n.jsx("div",{className:`animate-spin h-8 w-8 border-2 border-t-transparent rounded-full ${o?"border-yellow-500":"border-orange-500"}`})}):h.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx("p",{className:"text-neutral-400",children:"No one has completed the trivia yet."}),n.jsx("p",{className:"text-sm text-neutral-500 mt-2",children:"Be the first to answer all 24 questions!"})]}):n.jsx("div",{className:"space-y-2 max-h-[40vh] overflow-y-auto pr-2 custom-scrollbar",children:h.map(x=>{const y=x.userId===s;return n.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl transition-colors ${y?o?"bg-yellow-500/20 border border-yellow-500/30":"bg-orange-500/20 border border-orange-500/30":"bg-neutral-700/50 hover:bg-neutral-700/70"}`,children:[n.jsx("div",{className:"w-8 flex justify-center",children:p(x.rank)}),n.jsx("div",{className:"flex-1 min-w-0",children:n.jsxs("p",{className:`font-medium truncate ${y?o?"text-yellow-300":"text-orange-300":"text-white"}`,children:[x.displayName,y&&n.jsx("span",{className:`ml-2 text-xs ${o?"text-yellow-400":"text-orange-400"}`,children:"(You)"})]})}),n.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[n.jsxs("div",{className:"flex items-center gap-1",title:"Days to complete",children:[n.jsx(Mt,{className:"h-4 w-4 text-neutral-400"}),n.jsxs("span",{className:y?o?"text-yellow-300":"text-orange-300":"text-neutral-300",children:[x.daysToComplete,"d"]})]}),n.jsxs("div",{className:"flex items-center gap-1",title:"Number of attempts",children:[n.jsx(R4,{className:"h-3.5 w-3.5 text-neutral-400"}),n.jsxs("span",{className:y?o?"text-yellow-300":"text-orange-300":"text-neutral-300",children:[x.attempts,"x"]})]})]})]},x.userId)})})]}),n.jsx("div",{className:"px-6 pb-6 space-y-3",children:o?n.jsxs(n.Fragment,{children:[n.jsx(z,{to:"/dashboard",className:"block w-full py-3 bg-gradient-to-r from-yellow-500 to-orange-500 text-white font-semibold rounded-xl hover:from-yellow-400 hover:to-orange-400 transition-all shadow-lg shadow-yellow-500/25 text-center",children:"Join a Fantasy League "}),n.jsx("button",{onClick:t,className:"w-full py-3 bg-neutral-700 text-neutral-300 font-medium rounded-xl hover:bg-neutral-600 transition-all",children:"Close"})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-neutral-800/50 rounded-xl p-4 mb-3 border border-orange-500/20",children:[n.jsx("p",{className:"text-neutral-300 text-sm mb-3 text-center",children:"While you wait, why not join a Fantasy Survivor league?"}),n.jsx(z,{to:"/leagues",className:"block w-full py-2.5 bg-gradient-to-r from-burgundy-600 to-burgundy-700 text-white font-semibold rounded-lg hover:from-burgundy-500 hover:to-burgundy-600 transition-all text-center text-sm",children:"Browse Leagues "})]}),n.jsx("button",{onClick:t,className:"w-full py-3 bg-gradient-to-r from-orange-600 to-red-600 text-white font-semibold rounded-xl hover:from-orange-500 hover:to-red-500 transition-all shadow-lg shadow-orange-500/25",children:"Try Again Tomorrow"})]})})]})]})}const jm=["It's time for you to go.","The Tribe Has Spoken.","Your torch has been snuffed.","Time for you to go.","Blindsided!","That's a vote against you.","You've been voted out of the trivia.","Grab your torch and head out.","You didn't have the numbers.","Should've played your idol.","The jury saw right through that.","Outplayed. Outwitted. Outlasted... by this quiz.","Drop your buff.","The tribe has spoken... and they said no.","Not immunity-worthy."];function Jte(){var G,ie;const{user:e,loading:t,session:r}=dt(),s=Et(),[a,i]=T.useState(null),[o,d]=T.useState(20),[u,h]=T.useState(!1),[p,f]=T.useState(!1),[x,y]=T.useState(!1),[b,w]=T.useState(null),[v,j]=T.useState("It's time for you to go."),[C,S]=T.useState(!1),[k,R]=T.useState("The Tribe Has Spoken"),{data:E,isLoading:I,refetch:M}=re({queryKey:["trivia","next"],queryFn:async()=>{var fe;if(!(r!=null&&r.access_token))throw new Error("Not authenticated");const ae=await Je("/trivia/next",r.access_token);if(ae.error)throw new Error(ae.error);if(!((fe=ae.data)!=null&&fe.data))throw new Error("No data returned");return ae.data.data},enabled:!!e&&!!(r!=null&&r.access_token),retry:!1}),{data:O}=re({queryKey:["trivia","progress"],queryFn:async()=>{var fe;if(!(r!=null&&r.access_token))throw new Error("Not authenticated");const ae=await Je("/trivia/progress",r.access_token);if(ae.error)throw new Error(ae.error);if(!((fe=ae.data)!=null&&fe.data))throw new Error("No data returned");return ae.data.data},enabled:!!e&&!!(r!=null&&r.access_token),refetchInterval:6e4}),{data:L}=re({queryKey:["trivia","all-questions"],queryFn:async()=>{var fe,je;const ae=await Lp("/trivia/questions");if(ae.error)throw new Error(ae.error);if(!((je=(fe=ae.data)==null?void 0:fe.data)!=null&&je.questions))throw new Error("No data returned");return{questions:ae.data.data.questions}},staleTime:1e3*60*60});T.useEffect(()=>{if(!(E!=null&&E.question)||E.alreadyAnswered||p||u||E.isLocked)return;if(o<=0){h(!0);return}const ae=setInterval(()=>{d(fe=>fe<=1?(h(!0),0):fe-1)},1e3);return()=>clearInterval(ae)},[o,E==null?void 0:E.question,E==null?void 0:E.alreadyAnswered,E==null?void 0:E.isLocked,p,u]),T.useEffect(()=>{E!=null&&E.question&&!E.alreadyAnswered&&!E.isLocked&&(d(20),h(!1),f(!1),i(null),w(null))},[(G=E==null?void 0:E.question)==null?void 0:G.id]);const P=De({mutationFn:async ae=>{var je;if(!(r!=null&&r.access_token))throw new Error("Not authenticated");if(!(E!=null&&E.question))throw new Error("No question available");const fe=await Je("/trivia/answer",r.access_token,{method:"POST",body:JSON.stringify({questionId:E.question.id,selectedIndex:ae})});if(fe.error)throw new Error(fe.error);if(!((je=fe.data)!=null&&je.data))throw new Error("No data returned");return fe.data.data},onSuccess:ae=>{if(y(ae.isCorrect),w(ae.funFact||null),f(!0),!ae.isCorrect){const fe=jm[Math.floor(Math.random()*jm.length)];j(fe),R(fe),setTimeout(()=>{S(!0)},2e3)}s.invalidateQueries({queryKey:["trivia","next"]}),s.invalidateQueries({queryKey:["trivia","progress"]})}}),$=T.useCallback(()=>{E!=null&&E.question&&!E.alreadyAnswered&&!p&&(j(jm[Math.floor(Math.random()*jm.length)]),P.mutate(-1))},[E==null?void 0:E.question,E==null?void 0:E.alreadyAnswered,p,P]);T.useEffect(()=>{u&&(E!=null&&E.question)&&!E.alreadyAnswered&&!p&&$()},[u,E==null?void 0:E.question,E==null?void 0:E.alreadyAnswered,p,$]);const B=ae=>{E!=null&&E.alreadyAnswered||p||u||E!=null&&E.isLocked||(i(ae),P.mutate(ae))};if(T.useEffect(()=>{if(p&&!(E!=null&&E.isLocked)&&x){const ae=setTimeout(()=>{M(),f(!1),i(null),h(!1),d(20)},3e3);return()=>clearTimeout(ae)}},[p,E==null?void 0:E.isLocked,x,M]),T.useEffect(()=>{(E!=null&&E.isComplete||O!=null&&O.isComplete)&&(R(" Trivia Champion!"),j("You completed all 24 questions!"),S(!0))},[E==null?void 0:E.isComplete,O==null?void 0:O.isComplete]),!t&&!e)return n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex flex-col",children:[n.jsx(Se,{}),n.jsxs("main",{className:"flex-1 max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-orange-500 to-red-600 rounded-full mb-6 shadow-lg",children:n.jsx(Ke,{className:"h-10 w-10 text-white"})}),n.jsx("h1",{className:"text-4xl font-display font-bold text-neutral-800 mb-4",children:"Survivor Trivia Challenge"}),n.jsx("p",{className:"text-lg text-neutral-600 max-w-md mx-auto",children:"Answer 24 questions to prove you're the ultimate Survivor fan. Get one wrong? Come back in 24 hours!"})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200 mb-8",children:[n.jsx("h2",{className:"text-xl font-semibold text-neutral-800 mb-4",children:"How It Works"}),n.jsxs("ul",{className:"space-y-3 text-neutral-600",children:[n.jsxs("li",{className:"flex items-start gap-3",children:[n.jsx("span",{className:"text-orange-500 font-bold",children:"1."}),n.jsx("span",{children:"Answer 24 Survivor trivia questions"})]}),n.jsxs("li",{className:"flex items-start gap-3",children:[n.jsx("span",{className:"text-orange-500 font-bold",children:"2."}),n.jsx("span",{children:"You have 20 seconds per question"})]}),n.jsxs("li",{className:"flex items-start gap-3",children:[n.jsx("span",{className:"text-orange-500 font-bold",children:"3."}),n.jsx("span",{children:"Get one wrong = 24 hour lockout"})]}),n.jsxs("li",{className:"flex items-start gap-3",children:[n.jsx("span",{className:"text-orange-500 font-bold",children:"4."}),n.jsx("span",{children:"Complete all 24 to join the leaderboard!"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-8 border-2 border-burgundy-200 mb-8",children:[n.jsx("h2",{className:"text-xl font-semibold text-neutral-800 mb-6 text-center",children:"Sign in to play"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs(z,{to:"/login",state:{from:"/trivia"},className:"flex items-center justify-center gap-3 w-full py-4 bg-gradient-to-r from-burgundy-600 to-burgundy-700 text-white font-semibold rounded-xl hover:from-burgundy-500 hover:to-burgundy-600 transition-all shadow-lg",children:[n.jsx(uQ,{className:"h-5 w-5"}),"Sign In"]}),n.jsxs(z,{to:"/signup",state:{from:"/trivia"},className:"flex items-center justify-center gap-3 w-full py-4 bg-white text-burgundy-600 font-semibold rounded-xl border-2 border-burgundy-200 hover:bg-burgundy-50 transition-all",children:[n.jsx(xr,{className:"h-5 w-5"}),"Create Account"]})]}),n.jsx("p",{className:"text-sm text-neutral-500 text-center mt-6",children:"Your progress is saved to your account so you can continue anytime."})]}),(L==null?void 0:L.questions)&&n.jsxs("div",{children:[n.jsx("div",{className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200 mb-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-amber-400 to-orange-500 rounded-full flex items-center justify-center",children:n.jsx(Fl,{className:"h-5 w-5 text-white"})}),n.jsxs("div",{className:"text-left",children:[n.jsx("h3",{className:"text-lg font-semibold text-neutral-800",children:"All 24 Trivia Questions"}),n.jsx("p",{className:"text-sm text-neutral-500",children:"Study up before you play!"})]})]})}),n.jsx("div",{className:"space-y-3",children:L.questions.map(ae=>n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-cream-200 overflow-hidden p-4",children:[n.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[n.jsx("span",{className:"flex-shrink-0 w-8 h-8 bg-burgundy-100 text-burgundy-700 rounded-full flex items-center justify-center font-bold text-sm",children:ae.questionNumber}),n.jsx("p",{className:"text-neutral-800 font-medium flex-1",children:ae.question})]}),n.jsx("div",{className:"space-y-2 mb-4 ml-11",children:ae.options.map((fe,je)=>n.jsxs("div",{className:`p-3 rounded-lg flex items-center gap-2 ${je===ae.correctIndex?"bg-green-50 border border-green-200":"bg-neutral-50 border border-neutral-100"}`,children:[je===ae.correctIndex&&n.jsx(tt,{className:"h-5 w-5 text-green-600 flex-shrink-0"}),n.jsx("span",{className:je===ae.correctIndex?"text-green-800 font-medium":"text-neutral-600",children:fe})]},je))}),ae.funFact&&n.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3 ml-11",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(Fl,{className:"h-4 w-4 text-amber-600 mt-0.5 flex-shrink-0"}),n.jsx("p",{className:"text-sm text-amber-800",children:ae.funFact})]})})]},ae.id))})]})]}),n.jsx(tn,{})]});const D=e&&!(r!=null&&r.access_token),se=e&&(r==null?void 0:r.access_token)&&I;if(t||D||se)return n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex flex-col",children:[n.jsx(Se,{}),n.jsx("main",{className:"flex-1 flex items-center justify-center",children:n.jsx(me,{className:"h-8 w-8 text-burgundy-500 animate-spin"})}),n.jsx(tn,{})]});const X=E==null?void 0:E.question,ee=E==null?void 0:E.alreadyAnswered,F=E==null?void 0:E.userAnswer,Q=(E==null?void 0:E.isLocked)||(O==null?void 0:O.isLocked),J=(E==null?void 0:E.lockedUntil)||(O==null?void 0:O.lockedUntil),U=(E==null?void 0:E.isComplete)||(O==null?void 0:O.isComplete);return n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex flex-col",children:[n.jsx(Se,{}),n.jsxs("main",{className:"flex-1 max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[!Q&&!U&&n.jsx(Hte,{}),O&&!U&&n.jsx(Wte,{questionsAnswered:O.questionsAnswered,totalQuestions:O.totalQuestions,questionsCorrect:O.questionsCorrect}),Q&&J&&n.jsx(zte,{lockedUntil:J}),U&&(O==null?void 0:O.daysToComplete)&&n.jsx(Gte,{daysToComplete:O.daysToComplete}),!Q&&!U&&X&&n.jsx(Kte,{question:X,totalQuestions:(O==null?void 0:O.totalQuestions)||24,timeRemaining:o,selectedIndex:a,showResult:p,isCorrect:x,isTimedOut:u,alreadyAnswered:ee||!1,userAnswer:F||null,correctIndex:((ie=P.data)==null?void 0:ie.correctIndex)??(F==null?void 0:F.correctIndex)??-1,funFact:b||(E==null?void 0:E.funFact)||null,wrongMessage:v,isPending:P.isPending,onAnswer:B}),!Q&&!U&&!X&&(L==null?void 0:L.questions)&&n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200",children:n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-amber-400 to-orange-500 rounded-full flex items-center justify-center",children:n.jsx(Fl,{className:"h-5 w-5 text-white"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-neutral-800",children:"All 24 Trivia Questions"}),n.jsx("p",{className:"text-sm text-neutral-500",children:"Study up before you play!"})]})]})}),n.jsx("div",{className:"space-y-3",children:L.questions.map(ae=>n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-cream-200 overflow-hidden p-4",children:[n.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[n.jsx("span",{className:"flex-shrink-0 w-8 h-8 bg-burgundy-100 text-burgundy-700 rounded-full flex items-center justify-center font-bold text-sm",children:ae.questionNumber}),n.jsx("p",{className:"text-neutral-800 font-medium flex-1",children:ae.question})]}),n.jsx("div",{className:"space-y-2 mb-4 ml-11",children:ae.options.map((fe,je)=>n.jsxs("div",{className:`p-3 rounded-lg flex items-center gap-2 ${je===ae.correctIndex?"bg-green-50 border border-green-200":"bg-neutral-50 border border-neutral-100"}`,children:[je===ae.correctIndex&&n.jsx(tt,{className:"h-5 w-5 text-green-600 flex-shrink-0"}),n.jsx("span",{className:je===ae.correctIndex?"text-green-800 font-medium":"text-neutral-600",children:fe})]},je))}),ae.funFact&&n.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3 ml-11",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(Fl,{className:"h-4 w-4 text-amber-600 mt-0.5 flex-shrink-0"}),n.jsx("p",{className:"text-sm text-amber-800",children:ae.funFact})]})})]},ae.id))})]}),!Q&&!U&&!X&&!(L!=null&&L.questions)&&n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-12 border border-cream-200 text-center",children:[n.jsx(at,{className:"h-12 w-12 text-neutral-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-xl font-semibold text-neutral-800 mb-2",children:"No Questions Available"}),n.jsx("p",{className:"text-neutral-500",children:"Check back later for trivia questions!"})]}),!U&&n.jsx(Vte,{})]}),n.jsx(tn,{}),n.jsx(Yte,{isOpen:C,onClose:()=>S(!1),accessToken:(r==null?void 0:r.access_token)||"",currentUserId:e==null?void 0:e.id,title:k,subtitle:U?"You've joined the ranks of Survivor trivia masters!":"Your torch has been snuffed. Come back in 24 hours.",isCompletion:U||!1})]})}function ft(){var $,B;const e=ts(),{user:t,signOut:r}=dt(),[s,a]=T.useState(!1),[i,o]=T.useState(!1),[d,u]=T.useState(!1),[h,p]=T.useState(!1),f=T.useRef(null),x=T.useRef(null),y=T.useRef(null),b=T.useRef(null);T.useEffect(()=>{a(!1),o(!1),u(!1),p(!1)},[e.pathname]),T.useEffect(()=>{const D=se=>{f.current&&!f.current.contains(se.target)&&a(!1),x.current&&!x.current.contains(se.target)&&o(!1),y.current&&!y.current.contains(se.target)&&u(!1),b.current&&!b.current.contains(se.target)&&p(!1)};return(s||i||d||h)&&document.addEventListener("mousedown",D),()=>document.removeEventListener("mousedown",D)},[s,i,d,h]);const w=async()=>{try{localStorage.removeItem("adminViewMode"),a(!1),await r()}catch(D){console.error("Sign out failed:",D),window.location.href="/"}},{data:v}=re({queryKey:["profile",t==null?void 0:t.id],queryFn:async()=>{if(!(t!=null&&t.id))return null;const{data:D,error:se}=await K.from("users").select("id, display_name, role, avatar_url").eq("id",t.id).single();if(se)throw se;return D},enabled:!!(t!=null&&t.id)}),{data:j}=re({queryKey:["admin","nav-badges"],queryFn:async()=>{const[D,se]=await Promise.all([K.from("failed_emails").select("*",{count:"exact",head:!0}),K.from("job_runs").select("*",{count:"exact",head:!0}).eq("status","failed").gte("started_at",new Date(Date.now()-864e5).toISOString())]);return{failedEmails:D.count||0,failedJobs:se.count||0}},refetchInterval:3e4}),C=(v==null?void 0:v.display_name)||(($=t==null?void 0:t.user_metadata)==null?void 0:$.display_name)||((B=t==null?void 0:t.email)==null?void 0:B.split("@")[0])||"",S=D=>D==="/admin"?e.pathname==="/admin":e.pathname.startsWith(D),k=()=>S("/admin/castaways")||S("/admin/users")||S("/admin/seasons"),R=()=>S("/admin/announcements")||S("/admin/push")||S("/admin/email-queue")||S("/admin/sms"),E=()=>S("/admin/jobs")||S("/admin/health")||S("/admin/stats"),I=[{path:"/admin",label:"Dashboard",exact:!0},{path:"/admin/leagues",label:"Leagues"},{path:"/admin/scoring",label:"Scoring"}],M=[{path:"/admin/castaways",label:"Castaways"},{path:"/admin/users",label:"Users"},{path:"/admin/seasons",label:"Seasons"}],O=[{path:"/admin/announcements",label:"Announcements"},{path:"/admin/push",label:"Push Notifications"},{path:"/admin/email-queue",label:"Email Queue",badgeKey:"failedEmails"},{path:"/admin/sms",label:"SMS"}],L=[{path:"/admin/jobs",label:"Job Monitor",badgeKey:"failedJobs"},{path:"/admin/health",label:"System Health"},{path:"/admin/stats",label:"Analytics"}],P=D=>!D||D===0?null:n.jsx("span",{className:"ml-2 bg-red-500 text-white text-xs font-bold px-1.5 py-0.5 rounded-full min-w-[18px] text-center",children:D>99?"99+":D});return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"bg-gradient-to-r from-orange-500 via-amber-500 to-orange-400 text-white py-2 px-4 sticky top-0 z-[60]",children:n.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[n.jsx("div",{className:"flex items-center gap-3",children:n.jsxs("div",{className:"flex items-center gap-2 bg-white/20 px-3 py-1 rounded-full",children:[n.jsx(_s,{className:"h-4 w-4"}),n.jsx("span",{className:"font-bold text-sm tracking-wide",children:"ADMIN"})]})}),n.jsxs(z,{to:"/dashboard",className:"flex items-center gap-2 bg-white text-orange-600 px-4 py-1.5 rounded-full font-semibold text-sm hover:bg-orange-50 transition-colors",children:[n.jsx(S4,{className:"h-4 w-4"}),"Exit Admin"]})]})}),n.jsx("nav",{className:"bg-neutral-900 border-b border-neutral-700 shadow-lg sticky top-[40px] z-50",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsxs("div",{className:"flex items-center justify-between h-12",children:[n.jsx(z,{to:"/admin",className:"flex items-center gap-2",children:n.jsx("img",{src:"/logo.png",alt:"Admin",className:"h-7 w-auto brightness-0 invert"})}),n.jsxs("div",{className:"hidden md:flex items-center gap-1",children:[I.map(D=>n.jsx(z,{to:D.path,className:`px-3 py-1.5 rounded text-sm font-medium transition-colors ${D.exact?e.pathname===D.path?"bg-orange-500 text-white":"text-neutral-300 hover:text-white hover:bg-neutral-800":S(D.path)?"bg-orange-500 text-white":"text-neutral-300 hover:text-white hover:bg-neutral-800"}`,children:D.label},D.path)),n.jsxs("div",{className:"relative",ref:x,children:[n.jsxs("button",{onClick:()=>{o(!i),u(!1),p(!1)},className:`px-3 py-1.5 rounded text-sm font-medium transition-colors flex items-center gap-1 ${k()?"bg-orange-500 text-white":"text-neutral-300 hover:text-white hover:bg-neutral-800"}`,children:["Manage",n.jsx(un,{className:`h-3 w-3 transition-transform ${i?"rotate-180":""}`})]}),i&&n.jsx("div",{className:"absolute top-full left-0 mt-1 bg-neutral-800 rounded-lg shadow-xl border border-neutral-700 min-w-[160px] z-50 py-1",children:M.map(D=>n.jsx(z,{to:D.path,onClick:()=>o(!1),className:`block px-3 py-2 text-sm ${S(D.path)?"text-orange-400 bg-neutral-700":"text-neutral-300 hover:text-white hover:bg-neutral-700"}`,children:D.label},D.path))})]}),n.jsxs("div",{className:"relative",ref:y,children:[n.jsxs("button",{onClick:()=>{u(!d),o(!1),p(!1)},className:`px-3 py-1.5 rounded text-sm font-medium transition-colors flex items-center gap-1 ${R()?"bg-orange-500 text-white":"text-neutral-300 hover:text-white hover:bg-neutral-800"}`,children:["Communicate",j!=null&&j.failedEmails?P(j.failedEmails):null,n.jsx(un,{className:`h-3 w-3 transition-transform ${d?"rotate-180":""}`})]}),d&&n.jsx("div",{className:"absolute top-full left-0 mt-1 bg-neutral-800 rounded-lg shadow-xl border border-neutral-700 min-w-[180px] z-50 py-1",children:O.map(D=>n.jsxs(z,{to:D.path,onClick:()=>u(!1),className:`flex items-center justify-between px-3 py-2 text-sm ${S(D.path)?"text-orange-400 bg-neutral-700":"text-neutral-300 hover:text-white hover:bg-neutral-700"}`,children:[n.jsx("span",{children:D.label}),D.badgeKey&&P(j==null?void 0:j[D.badgeKey])]},D.path))})]}),n.jsxs("div",{className:"relative",ref:b,children:[n.jsxs("button",{onClick:()=>{p(!h),o(!1),u(!1)},className:`px-3 py-1.5 rounded text-sm font-medium transition-colors flex items-center gap-1 ${E()?"bg-orange-500 text-white":"text-neutral-300 hover:text-white hover:bg-neutral-800"}`,children:["System",j!=null&&j.failedJobs?P(j.failedJobs):null,n.jsx(un,{className:`h-3 w-3 transition-transform ${h?"rotate-180":""}`})]}),h&&n.jsx("div",{className:"absolute top-full left-0 mt-1 bg-neutral-800 rounded-lg shadow-xl border border-neutral-700 min-w-[160px] z-50 py-1",children:L.map(D=>n.jsxs(z,{to:D.path,onClick:()=>p(!1),className:`flex items-center justify-between px-3 py-2 text-sm ${S(D.path)?"text-orange-400 bg-neutral-700":"text-neutral-300 hover:text-white hover:bg-neutral-700"}`,children:[n.jsx("span",{children:D.label}),D.badgeKey&&P(j==null?void 0:j[D.badgeKey])]},D.path))})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:()=>a(!s),className:"md:hidden p-2 text-neutral-300 hover:text-white","aria-label":s?"Close menu":"Open menu",children:s?n.jsx(Sn,{className:"h-5 w-5"}):n.jsx(Jm,{className:"h-5 w-5"})}),n.jsxs("div",{className:"hidden sm:flex items-center gap-2",children:[n.jsx("span",{className:"text-neutral-300 text-sm",children:C||"Admin"}),n.jsx("button",{onClick:w,className:"text-neutral-500 hover:text-neutral-300 text-xs",children:"Sign out"})]})]})]}),s&&n.jsxs("div",{ref:f,className:"md:hidden border-t border-neutral-700 py-2",children:[I.map(D=>n.jsx(z,{to:D.path,className:`block px-4 py-2.5 text-sm font-medium ${D.exact?e.pathname===D.path?"bg-orange-500 text-white":"text-neutral-300":S(D.path)?"bg-orange-500 text-white":"text-neutral-300"}`,children:D.label},D.path)),n.jsx("div",{className:"px-4 py-2 text-xs font-semibold text-neutral-500 uppercase tracking-wider",children:"Manage"}),M.map(D=>n.jsx(z,{to:D.path,className:`block px-6 py-2 text-sm ${S(D.path)?"text-orange-400":"text-neutral-300"}`,children:D.label},D.path)),n.jsx("div",{className:"px-4 py-2 text-xs font-semibold text-neutral-500 uppercase tracking-wider mt-2",children:"Communicate"}),O.map(D=>n.jsx(z,{to:D.path,className:`block px-6 py-2 text-sm ${S(D.path)?"text-orange-400":"text-neutral-300"}`,children:D.label},D.path)),n.jsx("div",{className:"px-4 py-2 text-xs font-semibold text-neutral-500 uppercase tracking-wider mt-2",children:"System"}),L.map(D=>n.jsx(z,{to:D.path,className:`block px-6 py-2 text-sm ${S(D.path)?"text-orange-400":"text-neutral-300"}`,children:D.label},D.path)),n.jsx("hr",{className:"my-2 border-neutral-700"}),n.jsx("button",{onClick:w,className:"w-full text-left px-4 py-2.5 text-sm text-red-400 hover:bg-neutral-800",children:"Sign out"})]})]})})]})}const Qte={episode:"bg-burgundy-500",deadline:"bg-red-500",job:"bg-blue-500",waiver:"bg-green-500"},k2={upcoming:{bg:"bg-neutral-100",text:"text-neutral-600"},"in-progress":{bg:"bg-yellow-100",text:"text-yellow-700"},completed:{bg:"bg-green-100",text:"text-green-700"}};function Xte({events:e}){return e.length===0?n.jsx("div",{className:"bg-white rounded-2xl shadow-card p-8 text-center",children:n.jsx("p",{className:"text-neutral-400",children:"No upcoming events"})}):n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6",children:[n.jsx("h2",{className:"text-lg font-display text-neutral-800 mb-6",children:"Upcoming Events"}),n.jsx("div",{className:"space-y-6",children:e.slice(0,10).map((t,r)=>{var s,a,i;return n.jsxs("div",{className:"relative",children:[r<e.length-1&&r<9&&n.jsx("div",{className:"absolute left-6 top-12 bottom-0 w-0.5 bg-cream-200"}),n.jsxs("div",{className:"flex gap-4",children:[n.jsx("div",{className:`flex-shrink-0 w-12 h-12 ${Qte[t.type]||"bg-neutral-400"} rounded-full flex items-center justify-center text-white text-xl font-semibold shadow-md z-10`,children:t.icon||t.type.charAt(0).toUpperCase()}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[n.jsx("h3",{className:"font-semibold text-neutral-800 text-sm",children:t.title}),t.status&&n.jsx("span",{className:`flex-shrink-0 text-xs px-2 py-0.5 rounded-full ${((s=k2[t.status])==null?void 0:s.bg)||"bg-neutral-100"} ${((a=k2[t.status])==null?void 0:a.text)||"text-neutral-600"}`,children:t.status.replace("-"," ")})]}),n.jsx("p",{className:"text-sm text-neutral-500 mb-2",children:t.description}),((i=t.metadata)==null?void 0:i.timeUntil)&&n.jsx("p",{className:"text-xs text-neutral-400 font-mono mb-2",children:t.metadata.timeUntil}),t.actionUrl&&n.jsxs(z,{to:t.actionUrl,className:"text-xs text-burgundy-600 hover:text-burgundy-700 font-medium inline-flex items-center gap-1",children:["Take action",n.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]})]},r)})}),e.length>10&&n.jsx("div",{className:"mt-6 pt-6 border-t border-cream-200 text-center",children:n.jsxs("p",{className:"text-sm text-neutral-400",children:["Showing 10 of ",e.length," upcoming events"]})})]})}function qn({title:e,value:t,subtitle:r,trend:s,progress:a,status:i}){const o={good:"text-green-600",warning:"text-yellow-600",critical:"text-red-600"},d={good:"bg-green-500",warning:"bg-yellow-500",critical:"bg-red-500"};return n.jsxs("div",{className:"bg-white rounded-xl shadow-card p-5",children:[n.jsxs("div",{className:"flex justify-between items-start mb-2",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm text-neutral-500 mb-1",children:e}),n.jsx("p",{className:"text-3xl font-display text-neutral-800 font-mono",children:t}),r&&n.jsx("p",{className:"text-xs text-neutral-400 mt-1",children:r})]}),s&&n.jsxs("div",{className:`text-sm flex items-center gap-1 ${s.value>=0?"text-green-600":"text-red-600"}`,children:[s.value>=0?n.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})}):n.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),n.jsxs("span",{className:"font-semibold",children:[Math.abs(s.value).toFixed(0),"%"]}),n.jsx("span",{className:"text-neutral-400 text-xs",children:s.label})]})]}),a&&n.jsxs("div",{className:"mt-3",children:[n.jsx("div",{className:"h-2 bg-cream-200 rounded-full overflow-hidden",children:n.jsx("div",{className:`h-full transition-all ${d[i||"good"]}`,style:{width:`${Math.min(100,a.value)}%`}})}),n.jsx("p",{className:"text-xs text-neutral-500 mt-1",children:a.label})]}),i&&!a&&n.jsx("div",{className:"mt-2",children:n.jsxs("span",{className:`text-xs font-semibold ${o[i]}`,children:[i==="good"&&" Healthy",i==="warning"&&" Warning",i==="critical"&&" Critical"]})})]})}function Zte({stats:e}){const t=()=>e.game.picksCompletionRate>=80?"good":e.game.picksCompletionRate>=50?"warning":"critical";return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-display text-neutral-800 mb-3",children:"Player Stats"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsx(qn,{title:"Total Users",value:e.players.total,trend:e.players.growthRate!==void 0?{value:e.players.growthRate,label:"vs last week"}:void 0}),n.jsx(qn,{title:"Active This Week",value:e.players.activeThisWeek,subtitle:"Logged in last 7 days"}),n.jsx(qn,{title:"New Today",value:e.players.newToday}),n.jsx(qn,{title:"New This Week",value:e.players.newThisWeek})]})]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-display text-neutral-800 mb-3",children:"League Stats"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsx(qn,{title:"Total Leagues",value:e.leagues.total}),n.jsx(qn,{title:"Active This Week",value:e.leagues.activeThisWeek,subtitle:"With picks submitted"}),n.jsx(qn,{title:"Global League",value:e.leagues.globalLeagueSize,subtitle:"members"}),n.jsx(qn,{title:"Average Size",value:e.leagues.averageSize.toFixed(1),subtitle:"members per league"})]})]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-display text-neutral-800 mb-3",children:"Game Stats"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsx(qn,{title:"Picks This Week",value:e.game.picksThisWeek,progress:{value:e.game.picksCompletionRate,label:`${e.game.picksCompletionRate.toFixed(0)}% completion rate`},status:t()}),n.jsx(qn,{title:"Episodes Scored",value:`${e.game.episodesScored}/${e.game.totalEpisodes}`,progress:{value:e.game.totalEpisodes>0?e.game.episodesScored/e.game.totalEpisodes*100:0,label:`${e.game.totalEpisodes-e.game.episodesScored} remaining`}}),n.jsx(qn,{title:"Castaways Remaining",value:e.game.castawaysRemaining,subtitle:"Still in the game"}),n.jsx(qn,{title:"Castaways Eliminated",value:e.game.castawaysEliminated,subtitle:"Voted out / quit"})]})]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-display text-neutral-800 mb-3",children:"System Health"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsx(qn,{title:"Database Response",value:`${e.systemHealth.dbResponseTimeMs}ms`,status:e.systemHealth.dbResponseTimeMs<1e3?"good":"warning"}),n.jsx(qn,{title:"Job Failures",value:e.systemHealth.jobFailuresLast24h,subtitle:"Last 24 hours",status:e.systemHealth.jobFailuresLast24h>=10?"critical":e.systemHealth.jobFailuresLast24h>=5?"warning":"good"}),n.jsx(qn,{title:"Email Queue",value:e.systemHealth.emailQueueSize,subtitle:"Pending/processing",status:e.systemHealth.emailQueueSize>=100?"warning":"good"}),n.jsx(qn,{title:"Failed Emails",value:e.systemHealth.failedEmailsCount,subtitle:"Needs retry",status:e.systemHealth.failedEmailsCount>=20?"critical":e.systemHealth.failedEmailsCount>=10?"warning":"good"})]})]})]})}const ene={healthy:{bg:"bg-green-50",border:"border-green-200",text:"text-green-800",icon:"text-green-500",badge:"bg-green-500",label:"All Systems Operational"},degraded:{bg:"bg-yellow-50",border:"border-yellow-200",text:"text-yellow-800",icon:"text-yellow-500",badge:"bg-yellow-500",label:"Some Issues Detected"},unhealthy:{bg:"bg-red-50",border:"border-red-200",text:"text-red-800",icon:"text-red-500",badge:"bg-red-500",label:"Critical Issues"}};function tne({health:e}){const t=ene[e.status],r=new Date(e.lastCheckTime),s=Math.floor((Date.now()-r.getTime())/1e3/60);return n.jsxs("div",{className:`${t.bg} ${t.border} border rounded-2xl p-4 mb-8 shadow-sm`,children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:`w-3 h-3 ${t.badge} rounded-full animate-pulse`}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h3",{className:`font-semibold ${t.text}`,children:t.label}),e.issues.length>0&&n.jsxs("span",{className:`text-xs ${t.text} opacity-70`,children:["(",e.issues.length," ",e.issues.length===1?"issue":"issues",")"]})]}),n.jsxs("p",{className:`text-sm ${t.text} opacity-70 mt-0.5`,children:["Last checked ",s<1?"just now":`${s}m ago`]})]}),n.jsxs("div",{className:"flex gap-2 ml-4",children:[n.jsx(E0,{label:"DB",healthy:e.checks.database}),n.jsx(E0,{label:"Jobs",healthy:e.checks.jobs}),n.jsx(E0,{label:"Email",healthy:e.checks.emailQueue})]})]}),n.jsxs(z,{to:"/admin/jobs",className:`text-sm ${t.text} font-medium hover:underline flex items-center gap-1`,children:["View Details",n.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]}),e.issues.length>0&&n.jsx("div",{className:"mt-3 pt-3 border-t border-current opacity-20",children:n.jsxs("ul",{className:`text-sm ${t.text} space-y-1`,children:[e.issues.slice(0,3).map((a,i)=>n.jsxs("li",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-xs",children:""}),a]},i)),e.issues.length>3&&n.jsxs("li",{className:"text-xs opacity-70",children:["+",e.issues.length-3," more issues"]})]})})]})}function E0({label:e,healthy:t}){return n.jsxs("div",{className:`flex items-center gap-1.5 px-2 py-1 rounded-md ${t?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[n.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${t?"bg-green-500":"bg-red-500"}`}),n.jsx("span",{className:"text-xs font-medium",children:e})]})}const nne={user_signup:"bg-blue-100 text-blue-600",league_created:"bg-purple-100 text-purple-600",draft_completed:"bg-green-100 text-green-600",pick_submitted:"bg-yellow-100 text-yellow-600",payment_received:"bg-green-100 text-green-600",admin_action:"bg-burgundy-100 text-burgundy-600"};function rne(e){const t=Date.now(),r=new Date(e).getTime(),s=t-r,a=Math.floor(s/1e3/60),i=Math.floor(a/60),o=Math.floor(i/24);return a<1?"just now":a<60?`${a}m ago`:i<24?`${i}h ago`:o<7?`${o}d ago`:new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"})}function sne(e){if(!e)return!1;const t=e.toLowerCase();return t.includes("test")||t.startsWith("user ")||/^test\d+$/.test(t)||/^user\d+$/.test(t)}function ane({activities:e}){const[t,r]=T.useState(!0),s=t?e.filter(i=>{var o;return!sne((o=i.user)==null?void 0:o.display_name)}):e,a=e.length-s.length;return e.length===0?n.jsx("div",{className:"bg-white rounded-2xl shadow-card p-8 text-center",children:n.jsx("p",{className:"text-neutral-400",children:"No recent activity"})}):n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h2",{className:"text-lg font-display text-neutral-800",children:"Recent Activity"}),n.jsx("button",{onClick:()=>r(!t),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-medium transition-colors ${t?"bg-neutral-100 text-neutral-600 hover:bg-neutral-200":"bg-orange-100 text-orange-600 hover:bg-orange-200"}`,title:t?"Show test accounts":"Hide test accounts",children:t?n.jsxs(n.Fragment,{children:[n.jsx(gc,{className:"h-3.5 w-3.5"}),n.jsxs("span",{children:["Hiding ",a," test",a!==1?"s":""]})]}):n.jsxs(n.Fragment,{children:[n.jsx(Ei,{className:"h-3.5 w-3.5"}),n.jsx("span",{children:"Showing all"})]})})]}),s.length===0?n.jsx("div",{className:"text-center py-8",children:n.jsxs("p",{className:"text-neutral-400 text-sm",children:["No activity from real users yet.",n.jsx("button",{onClick:()=>r(!1),className:"ml-1 text-orange-500 hover:underline",children:"Show test accounts"})]})}):n.jsx("div",{className:"space-y-3",children:s.map((i,o)=>n.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg hover:bg-cream-50 transition-colors",children:[n.jsx("div",{className:`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center text-sm ${nne[i.type]||"bg-neutral-100 text-neutral-600"}`,children:i.icon}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm text-neutral-700",children:i.message}),n.jsx("p",{className:"text-xs text-neutral-400 mt-0.5",children:rne(i.timestamp)})]})]},o))})]})}const ine="https://rgfl-api-production.up.railway.app";function one(){const{data:e,isLoading:t}=re({queryKey:["adminDraftStats"],queryFn:async()=>{var o;const a=(o=(await K.auth.getSession()).data.session)==null?void 0:o.access_token,i=await fetch(`${ine}/api/admin/dashboard/draft-stats`,{headers:{Authorization:`Bearer ${a}`}});if(!i.ok)throw new Error("Failed to fetch draft stats");return i.json()},refetchInterval:3e4});if(t)return n.jsx("div",{className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200",children:n.jsx("div",{className:"flex items-center justify-center h-32",children:n.jsx(me,{className:"h-6 w-6 animate-spin text-burgundy-500"})})});if(!e)return null;const r=e.total>0?Math.round(e.completed/e.total*100):0;return n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200",children:[n.jsxs("h2",{className:"text-lg font-display font-bold text-neutral-800 mb-4 flex items-center gap-2",children:[n.jsx($e,{className:"h-5 w-5 text-burgundy-500"}),"Draft Status"]}),n.jsxs("div",{className:"mb-4",children:[n.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[n.jsx("span",{className:"text-neutral-600",children:"Draft Completion"}),n.jsxs("span",{className:"font-medium text-neutral-800",children:[r,"%"]})]}),n.jsx("div",{className:"w-full bg-cream-200 rounded-full h-2.5",children:n.jsx("div",{className:"bg-gradient-to-r from-burgundy-500 to-orange-500 h-2.5 rounded-full transition-all duration-500",style:{width:`${r}%`}})})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{className:"bg-amber-50 rounded-lg p-3",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(Mt,{className:"h-4 w-4 text-amber-600"}),n.jsx("span",{className:"text-xs text-amber-700 font-medium",children:"Pending"})]}),n.jsx("p",{className:"text-2xl font-bold text-amber-800",children:e.pending})]}),n.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(me,{className:"h-4 w-4 text-blue-600"}),n.jsx("span",{className:"text-xs text-blue-700 font-medium",children:"In Progress"})]}),n.jsx("p",{className:"text-2xl font-bold text-blue-800",children:e.inProgress})]}),n.jsxs("div",{className:"bg-green-50 rounded-lg p-3",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(tt,{className:"h-4 w-4 text-green-600"}),n.jsx("span",{className:"text-xs text-green-700 font-medium",children:"Completed"})]}),n.jsx("p",{className:"text-2xl font-bold text-green-800",children:e.completed})]}),n.jsxs("div",{className:"bg-orange-50 rounded-lg p-3",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(at,{className:"h-4 w-4 text-orange-600"}),n.jsx("span",{className:"text-xs text-orange-700 font-medium",children:"Ready to Draft"})]}),n.jsx("p",{className:"text-2xl font-bold text-orange-800",children:e.awaitingDraft}),n.jsx("p",{className:"text-xs text-orange-600",children:"2+ members"})]})]})]})}const lne="https://rgfl-api-production.up.railway.app";function cne(){const{data:e,isLoading:t}=re({queryKey:["adminPaymentStats"],queryFn:async()=>{var o;const a=(o=(await K.auth.getSession()).data.session)==null?void 0:o.access_token,i=await fetch(`${lne}/api/admin/dashboard/payment-stats`,{headers:{Authorization:`Bearer ${a}`}});if(!i.ok)throw new Error("Failed to fetch payment stats");return i.json()},refetchInterval:3e4});if(t)return n.jsx("div",{className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200",children:n.jsx("div",{className:"flex items-center justify-center h-32",children:n.jsx(me,{className:"h-6 w-6 animate-spin text-burgundy-500"})})});if(!e)return null;const r=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(s);return n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200",children:[n.jsxs("h2",{className:"text-lg font-display font-bold text-neutral-800 mb-4 flex items-center gap-2",children:[n.jsx(ks,{className:"h-5 w-5 text-green-600"}),"Revenue & Payments"]}),n.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-emerald-600 rounded-xl p-4 mb-4 text-white",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(Pr,{className:"h-4 w-4"}),n.jsx("span",{className:"text-sm font-medium opacity-90",children:"All-Time Revenue"})]}),n.jsx("p",{className:"text-3xl font-bold",children:r(e.revenue.allTime)})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4",children:[n.jsxs("div",{className:"text-center p-2 bg-green-50 rounded-lg",children:[n.jsx("p",{className:"text-xs text-green-700 mb-1",children:"Today"}),n.jsx("p",{className:"text-lg font-bold text-green-800",children:r(e.revenue.today)})]}),n.jsxs("div",{className:"text-center p-2 bg-green-50 rounded-lg",children:[n.jsx("p",{className:"text-xs text-green-700 mb-1",children:"This Week"}),n.jsx("p",{className:"text-lg font-bold text-green-800",children:r(e.revenue.thisWeek)})]}),n.jsxs("div",{className:"text-center p-2 bg-green-50 rounded-lg",children:[n.jsx("p",{className:"text-xs text-green-700 mb-1",children:"This Month"}),n.jsx("p",{className:"text-lg font-bold text-green-800",children:r(e.revenue.thisMonth)})]})]}),n.jsxs("div",{className:"border-t border-cream-200 pt-4",children:[n.jsx("p",{className:"text-sm font-medium text-neutral-600 mb-3",children:"Payment Status"}),n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(tt,{className:"h-4 w-4 text-green-500"}),n.jsxs("span",{className:"text-sm text-neutral-600",children:[e.byStatus.completed," completed"]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Mt,{className:"h-4 w-4 text-amber-500"}),n.jsxs("span",{className:"text-sm text-neutral-600",children:[e.byStatus.pending," pending"]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Nn,{className:"h-4 w-4 text-red-500"}),n.jsxs("span",{className:"text-sm text-neutral-600",children:[e.byStatus.failed," failed"]})]})]})]})]})}const dne="https://rgfl-api-production.up.railway.app";function une(){const{data:e,isLoading:t}=re({queryKey:["adminTriviaStats"],queryFn:async()=>{var i;const s=(i=(await K.auth.getSession()).data.session)==null?void 0:i.access_token,a=await fetch(`${dne}/api/admin/dashboard/trivia-stats`,{headers:{Authorization:`Bearer ${s}`}});if(!a.ok)throw new Error("Failed to fetch trivia stats");return a.json()},refetchInterval:3e4});return t?n.jsx("div",{className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200",children:n.jsx("div",{className:"flex items-center justify-center h-32",children:n.jsx(me,{className:"h-6 w-6 animate-spin text-burgundy-500"})})}):e?n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200",children:[n.jsxs("h2",{className:"text-lg font-display font-bold text-neutral-800 mb-4 flex items-center gap-2",children:[n.jsx(N4,{className:"h-5 w-5 text-purple-600"}),"Trivia Engagement"]}),n.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-indigo-600 rounded-xl p-4 mb-4 text-white",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium opacity-90 mb-1",children:"Completion Rate"}),n.jsxs("p",{className:"text-3xl font-bold",children:[e.completionRate,"%"]})]}),n.jsx(Ke,{className:"h-10 w-10 opacity-75"})]})}),n.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[n.jsxs("div",{className:"bg-purple-50 rounded-lg p-3",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(gr,{className:"h-4 w-4 text-purple-600"}),n.jsx("span",{className:"text-xs text-purple-700 font-medium",children:"Total Attempts"})]}),n.jsx("p",{className:"text-2xl font-bold text-purple-800",children:e.totalAttempts})]}),n.jsxs("div",{className:"bg-green-50 rounded-lg p-3",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(Ke,{className:"h-4 w-4 text-green-600"}),n.jsx("span",{className:"text-xs text-green-700 font-medium",children:"Completed"})]}),n.jsx("p",{className:"text-2xl font-bold text-green-800",children:e.completedTrivia})]}),n.jsxs("div",{className:"bg-amber-50 rounded-lg p-3",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(me,{className:"h-4 w-4 text-amber-600"}),n.jsx("span",{className:"text-xs text-amber-700 font-medium",children:"In Progress"})]}),n.jsx("p",{className:"text-2xl font-bold text-amber-800",children:e.inProgress})]}),n.jsxs("div",{className:"bg-orange-50 rounded-lg p-3",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(bn,{className:"h-4 w-4 text-orange-600"}),n.jsx("span",{className:"text-xs text-orange-700 font-medium",children:"Avg. Correct"})]}),n.jsx("p",{className:"text-2xl font-bold text-orange-800",children:e.avgQuestionsCorrect}),n.jsx("p",{className:"text-xs text-orange-600",children:"out of 24"})]})]}),n.jsxs("div",{className:"border-t border-cream-200 pt-4",children:[n.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[n.jsx("span",{className:"text-neutral-600",children:"Avg. Questions Answered"}),n.jsxs("span",{className:"font-medium text-neutral-800",children:[e.avgQuestionsAnswered," / 24"]})]}),n.jsx("div",{className:"w-full bg-cream-200 rounded-full h-2",children:n.jsx("div",{className:"bg-purple-500 h-2 rounded-full transition-all duration-500",style:{width:`${e.avgQuestionsAnswered/24*100}%`}})})]})]}):null}const hne="https://rgfl-api-production.up.railway.app";function mne(){const{data:e,isLoading:t}=re({queryKey:["adminLeagueBreakdown"],queryFn:async()=>{var u;const o=(u=(await K.auth.getSession()).data.session)==null?void 0:u.access_token,d=await fetch(`${hne}/api/admin/dashboard/league-breakdown`,{headers:{Authorization:`Bearer ${o}`}});if(!d.ok)throw new Error("Failed to fetch league breakdown");return d.json()},refetchInterval:3e4});if(t)return n.jsx("div",{className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200",children:n.jsx("div",{className:"flex items-center justify-center h-32",children:n.jsx(me,{className:"h-6 w-6 animate-spin text-burgundy-500"})})});if(!e)return null;const r=e.byVisibility.public+e.byVisibility.private,s=r>0?Math.round(e.byVisibility.public/r*100):0,a=r>0?Math.round(e.byPayment.paid/r*100):0;return n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200",children:[n.jsx("h2",{className:"text-lg font-display font-bold text-neutral-800 mb-4",children:"League Breakdown"}),n.jsxs("div",{className:"mb-6",children:[n.jsx("p",{className:"text-sm font-medium text-neutral-600 mb-3",children:"By Visibility"}),n.jsxs("div",{className:"flex gap-3 mb-2",children:[n.jsxs("div",{className:"flex-1 bg-teal-50 rounded-lg p-3 border border-teal-200",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(Sa,{className:"h-4 w-4 text-teal-600"}),n.jsx("span",{className:"text-sm font-medium text-teal-700",children:"Public"})]}),n.jsx("p",{className:"text-2xl font-bold text-teal-800",children:e.byVisibility.public})]}),n.jsxs("div",{className:"flex-1 bg-purple-50 rounded-lg p-3 border border-purple-200",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(Mn,{className:"h-4 w-4 text-purple-600"}),n.jsx("span",{className:"text-sm font-medium text-purple-700",children:"Private"})]}),n.jsx("p",{className:"text-2xl font-bold text-purple-800",children:e.byVisibility.private})]})]}),n.jsx("div",{className:"w-full bg-cream-200 rounded-full h-2.5",children:n.jsx("div",{className:"bg-teal-500 h-2.5 rounded-l-full transition-all duration-500",style:{width:`${s}%`}})}),n.jsxs("div",{className:"flex justify-between text-xs text-neutral-500 mt-1",children:[n.jsxs("span",{children:[s,"% Public"]}),n.jsxs("span",{children:[100-s,"% Private"]})]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-neutral-600 mb-3",children:"By Payment"}),n.jsxs("div",{className:"flex gap-3 mb-2",children:[n.jsxs("div",{className:"flex-1 bg-green-50 rounded-lg p-3 border border-green-200",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(ks,{className:"h-4 w-4 text-green-600"}),n.jsx("span",{className:"text-sm font-medium text-green-700",children:"Paid"})]}),n.jsx("p",{className:"text-2xl font-bold text-green-800",children:e.byPayment.paid})]}),n.jsxs("div",{className:"flex-1 bg-blue-50 rounded-lg p-3 border border-blue-200",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(qJ,{className:"h-4 w-4 text-blue-600"}),n.jsx("span",{className:"text-sm font-medium text-blue-700",children:"Free"})]}),n.jsx("p",{className:"text-2xl font-bold text-blue-800",children:e.byPayment.free})]})]}),n.jsx("div",{className:"w-full bg-cream-200 rounded-full h-2.5",children:n.jsx("div",{className:"bg-green-500 h-2.5 rounded-l-full transition-all duration-500",style:{width:`${a}%`}})}),n.jsxs("div",{className:"flex justify-between text-xs text-neutral-500 mt-1",children:[n.jsxs("span",{children:[a,"% Paid"]}),n.jsxs("span",{children:[100-a,"% Free"]})]})]})]})}const Nm="https://rgfl-api-production.up.railway.app";function fne(){const{user:e}=dt(),{data:t}=re({queryKey:["profile",e==null?void 0:e.id],queryFn:async()=>{const{data:v,error:j}=await K.from("users").select("id, display_name, role").eq("id",e.id).single();if(j)throw j;return v},enabled:!!(e!=null&&e.id)}),{data:r,isLoading:s}=re({queryKey:["adminTimeline"],queryFn:async()=>{var k;const j=(k=(await K.auth.getSession()).data.session)==null?void 0:k.access_token,C=await fetch(`${Nm}/api/admin/dashboard/timeline`,{headers:{Authorization:`Bearer ${j}`}});if(!C.ok)throw new Error("Failed to fetch timeline");return(await C.json()).timeline},enabled:!!(e!=null&&e.id)&&(t==null?void 0:t.role)==="admin",refetchInterval:3e4}),{data:a,isLoading:i}=re({queryKey:["adminStats"],queryFn:async()=>{var S;const j=(S=(await K.auth.getSession()).data.session)==null?void 0:S.access_token,C=await fetch(`${Nm}/api/admin/dashboard/stats`,{headers:{Authorization:`Bearer ${j}`}});if(!C.ok)throw new Error("Failed to fetch stats");return C.json()},enabled:!!(e!=null&&e.id)&&(t==null?void 0:t.role)==="admin",refetchInterval:3e4}),{data:o,isLoading:d}=re({queryKey:["adminActivity"],queryFn:async()=>{var k;const j=(k=(await K.auth.getSession()).data.session)==null?void 0:k.access_token,C=await fetch(`${Nm}/api/admin/dashboard/activity`,{headers:{Authorization:`Bearer ${j}`}});if(!C.ok)throw new Error("Failed to fetch activity");return(await C.json()).activity},enabled:!!(e!=null&&e.id)&&(t==null?void 0:t.role)==="admin",refetchInterval:3e4}),{data:u,isLoading:h}=re({queryKey:["adminHealth"],queryFn:async()=>{var S;const j=(S=(await K.auth.getSession()).data.session)==null?void 0:S.access_token,C=await fetch(`${Nm}/api/admin/dashboard/system-health`,{headers:{Authorization:`Bearer ${j}`}});if(!C.ok)throw new Error("Failed to fetch system health");return C.json()},enabled:!!(e!=null&&e.id)&&(t==null?void 0:t.role)==="admin",refetchInterval:3e4}),{data:p}=re({queryKey:["failedEmailsCount"],queryFn:async()=>{const{count:v}=await K.from("failed_emails").select("*",{count:"exact",head:!0}).eq("retry_attempted",!1);return v||0},enabled:!!(e!=null&&e.id)&&(t==null?void 0:t.role)==="admin",refetchInterval:6e4}),{data:f}=re({queryKey:["pendingJobsCount"],queryFn:async()=>{const{count:v}=await K.from("job_runs").select("*",{count:"exact",head:!0}).eq("status","failed").gte("started_at",new Date(Date.now()-864e5).toISOString());return v||0},enabled:!!(e!=null&&e.id)&&(t==null?void 0:t.role)==="admin",refetchInterval:6e4}),x=[];p&&p>0&&x.push({type:"error",message:`${p} failed emails need attention`,action:{label:"View Queue",href:"/admin/email-queue"}}),f&&f>0&&x.push({type:"warning",message:`${f} job failures in the last 24 hours`,action:{label:"View Jobs",href:"/admin/jobs"}});const y=[{title:"Score Episode",description:"Enter scores for the latest episode",href:"/admin/scoring",icon:Zr,color:"bg-burgundy-500"},{title:"Analytics",description:"Full platform metrics",href:"/admin/stats",icon:Uv,color:"bg-purple-500"},{title:"Manage Leagues",description:"View all leagues",href:"/admin/leagues",icon:Ke,color:"bg-orange-500"},{title:"Manage Users",description:"User accounts",href:"/admin/users",icon:$e,color:"bg-teal-500"}],b=[{title:"Castaways",description:"Add, edit, eliminate",href:"/admin/castaways",icon:"",color:"bg-blue-500"},{title:"Seasons",description:"Manage seasons & episodes",href:"/admin/seasons",icon:"",color:"bg-green-500"},{title:"Scoring Rules",description:"View & manage rules",href:"/admin/scoring-rules",icon:"",color:"bg-purple-500"},{title:"Job Monitor",description:"Scheduled jobs",href:"/admin/jobs",icon:"",color:"bg-indigo-500"},{title:"Email Queue",description:"Monitor emails",href:"/admin/email-queue",icon:"",color:"bg-pink-500"},{title:"Announcements",description:"Dashboard messages",href:"/admin/announcements",icon:"",color:"bg-amber-500"}];if(t&&t.role!=="admin")return n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200",children:[n.jsx(ft,{}),n.jsx("main",{className:"max-w-4xl mx-auto px-4 py-16 text-center",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated p-12",children:[n.jsx("div",{className:"w-20 h-20 mx-auto mb-6 bg-red-100 rounded-full flex items-center justify-center",children:n.jsx(kt,{className:"w-10 h-10 text-red-600"})}),n.jsx("h1",{className:"text-2xl font-display text-neutral-800 mb-3",children:"Access Denied"}),n.jsx("p",{className:"text-neutral-500 mb-8",children:"You don't have permission to access the admin dashboard."}),n.jsx(z,{to:"/dashboard",className:"btn btn-primary",children:"Back to Dashboard"})]})})]});const w=s||i||d||h;return n.jsxs("div",{className:"min-h-screen bg-[#faf8f5]",children:[n.jsx(ft,{}),n.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6 animate-fade-in",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-display text-neutral-800",children:"Admin Command Center"}),n.jsx("p",{className:"text-neutral-500 mt-1",children:"Real-time platform monitoring and management"})]}),n.jsx(z,{to:"/dashboard",className:"btn bg-white text-neutral-700 shadow-card hover:shadow-card-hover",children:"Back to App"})]}),x.length>0&&n.jsx("div",{className:"mb-6 space-y-2 animate-fade-in",children:x.map((v,j)=>n.jsxs("div",{className:`flex items-center justify-between p-4 rounded-xl ${v.type==="error"?"bg-red-50 border border-red-200":v.type==="warning"?"bg-amber-50 border border-amber-200":"bg-blue-50 border border-blue-200"}`,children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(kt,{className:`h-5 w-5 ${v.type==="error"?"text-red-500":v.type==="warning"?"text-amber-500":"text-blue-500"}`}),n.jsx("span",{className:`font-medium ${v.type==="error"?"text-red-700":v.type==="warning"?"text-amber-700":"text-blue-700"}`,children:v.message})]}),v.action&&n.jsx(z,{to:v.action.href,className:`text-sm font-semibold px-3 py-1 rounded-lg ${v.type==="error"?"bg-red-100 text-red-700 hover:bg-red-200":v.type==="warning"?"bg-amber-100 text-amber-700 hover:bg-amber-200":"bg-blue-100 text-blue-700 hover:bg-blue-200"}`,children:v.action.label})]},j))}),n.jsxs("div",{className:"mb-8 animate-slide-up",children:[n.jsxs("h2",{className:"text-lg font-display text-neutral-800 mb-4 flex items-center gap-2",children:[n.jsx(Zr,{className:"h-5 w-5 text-amber-500"}),"Quick Actions"]}),n.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:y.map(v=>n.jsxs(z,{to:v.href,className:"bg-white rounded-xl shadow-card hover:shadow-card-hover p-5 transition-all group",children:[n.jsx("div",{className:`w-12 h-12 ${v.color} rounded-lg flex items-center justify-center text-white mb-3 group-hover:scale-110 transition-transform`,children:n.jsx(v.icon,{className:"h-6 w-6"})}),n.jsx("h3",{className:"font-semibold text-neutral-800 text-base mb-1",children:v.title}),n.jsx("p",{className:"text-xs text-neutral-500",children:v.description})]},v.href))})]}),u&&n.jsx(tne,{health:u}),w&&n.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mb-8",children:[n.jsx("div",{className:"md:col-span-1",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-8 animate-pulse",children:[n.jsx("div",{className:"h-6 bg-cream-200 rounded w-1/2 mb-6"}),n.jsx("div",{className:"space-y-4",children:[1,2,3,4].map(v=>n.jsx("div",{className:"h-16 bg-cream-100 rounded"},v))})]})}),n.jsx("div",{className:"md:col-span-2",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-8 animate-pulse",children:[n.jsx("div",{className:"h-6 bg-cream-200 rounded w-1/3 mb-6"}),n.jsx("div",{className:"grid grid-cols-2 gap-4",children:[1,2,3,4,5,6].map(v=>n.jsx("div",{className:"h-24 bg-cream-100 rounded"},v))})]})})]}),!w&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mb-8",children:[n.jsx("div",{className:"md:col-span-1 animate-slide-up",style:{animationDelay:"0.1s"},children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200",children:[n.jsxs("h3",{className:"text-lg font-display text-neutral-800 mb-4 flex items-center gap-2",children:[n.jsx(er,{className:"h-5 w-5 text-burgundy-500"}),"This Week"]}),r&&n.jsx(Xte,{events:r})]})}),n.jsx("div",{className:"md:col-span-2 space-y-6",children:n.jsx("div",{className:"animate-slide-up",style:{animationDelay:"0.15s"},children:a&&n.jsx(Zte,{stats:a})})})]}),n.jsxs("div",{className:"mb-8",children:[n.jsxs("h2",{className:"text-lg font-display text-neutral-800 mb-4 flex items-center gap-2",children:[n.jsx(Mt,{className:"h-5 w-5 text-green-500"}),"Real-time Vitals"]}),n.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:[n.jsx("div",{className:"animate-slide-up",style:{animationDelay:"0.2s"},children:n.jsx(one,{})}),n.jsx("div",{className:"animate-slide-up",style:{animationDelay:"0.23s"},children:n.jsx(cne,{})}),n.jsx("div",{className:"animate-slide-up",style:{animationDelay:"0.26s"},children:n.jsx(une,{})}),n.jsx("div",{className:"animate-slide-up",style:{animationDelay:"0.29s"},children:n.jsx(mne,{})})]})]}),n.jsx("div",{className:"mb-8 animate-slide-up",style:{animationDelay:"0.32s"},children:o&&n.jsx(ane,{activities:o})}),n.jsxs("div",{className:"animate-slide-up",style:{animationDelay:"0.35s"},children:[n.jsxs("h2",{className:"text-lg font-display text-neutral-800 mb-4 flex items-center gap-2",children:[n.jsx(Uu,{className:"h-5 w-5 text-neutral-500"}),"Management"]}),n.jsx("div",{className:"grid md:grid-cols-3 lg:grid-cols-6 gap-4",children:b.map(v=>n.jsxs(z,{to:v.href,className:"bg-white rounded-xl shadow-card hover:shadow-card-hover p-4 transition-all group text-center",children:[n.jsx("div",{className:`w-10 h-10 ${v.color} rounded-lg flex items-center justify-center text-white text-xl mb-2 mx-auto group-hover:scale-110 transition-transform`,children:v.icon}),n.jsx("h3",{className:"font-semibold text-neutral-800 text-sm mb-0.5",children:v.title}),n.jsx("p",{className:"text-xs text-neutral-500",children:v.description})]},v.href))})]})]})]})]})}function E2({rule:e,currentCount:t,onChange:r,isCommon:s}){return n.jsxs("div",{className:`group flex items-center justify-between p-3 rounded-xl border transition-all ${t>0?"bg-burgundy-50 border-burgundy-200":"bg-white border-cream-200 hover:border-cream-300"}`,children:[n.jsxs("div",{className:"flex-1 min-w-0 mr-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[s&&n.jsx(kn,{className:"h-3 w-3 text-amber-500 fill-amber-500"}),n.jsx("h4",{className:`font-medium truncate ${t>0?"text-burgundy-900":"text-neutral-800"}`,children:e.name}),n.jsxs("span",{className:`text-xs px-1.5 py-0.5 rounded-md font-bold ${e.points>0?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[e.points>0?"+":"",e.points]})]}),e.description&&n.jsx("p",{className:"text-xs text-neutral-500 truncate mt-0.5 group-hover:whitespace-normal group-hover:overflow-visible",children:e.description})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:()=>r(Math.max(0,t-1)),disabled:t===0,className:`p-1.5 rounded-lg transition-colors ${t>0?"bg-burgundy-200 text-burgundy-700 hover:bg-burgundy-300":"bg-cream-100 text-neutral-400 cursor-not-allowed"}`,children:n.jsx(Ap,{className:"h-4 w-4"})}),n.jsx("span",{className:`w-6 text-center font-bold text-lg ${t>0?"text-burgundy-600":"text-neutral-400"}`,children:t}),n.jsx("button",{onClick:()=>r(t+1),className:"p-1.5 bg-burgundy-500 text-white rounded-lg hover:bg-burgundy-600 transition-colors shadow-sm",children:n.jsx($o,{className:"h-4 w-4"})})]})]})}function pne({isOpen:e,onClose:t,onConfirm:r,isPending:s,scoringStatus:a}){if(!e)return null;const i=a==null?void 0:a.is_complete;return n.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[100] p-4",children:n.jsx("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full overflow-hidden animate-in fade-in zoom-in duration-200",children:n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsx("div",{className:`p-3 rounded-full ${i?"bg-green-100 text-green-600":"bg-amber-100 text-amber-600"}`,children:i?n.jsx(tt,{className:"h-6 w-6"}):n.jsx(kt,{className:"h-6 w-6"})}),n.jsx("button",{onClick:t,className:"p-1 hover:bg-cream-100 rounded-full transition-colors text-neutral-400",children:n.jsx(Sn,{className:"h-5 w-5"})})]}),n.jsx("h3",{className:"text-xl font-display font-bold text-neutral-900 mb-2",children:"Finalize Episode Scoring"}),n.jsxs("div",{className:"space-y-4 mb-6",children:[n.jsx("p",{className:"text-neutral-600",children:"Finalizing will lock all scores for this episode and update the global and private league standings."}),!i&&a&&n.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4",children:[n.jsx("p",{className:"text-sm text-amber-800 font-medium mb-2",children:"Warning: Scoring is incomplete"}),n.jsxs("p",{className:"text-xs text-amber-700",children:[a.total_castaways-a.scored_castaways," castaways have no points recorded. Finalizing will assume they earned 0 points."]}),n.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:a.unscored_castaway_names.map(o=>n.jsx("span",{className:"px-1.5 py-0.5 bg-amber-200/50 text-amber-800 rounded text-[10px]",children:o},o))})]}),n.jsx("div",{className:"bg-red-50 border border-red-100 rounded-xl p-4",children:n.jsxs("p",{className:"text-xs text-red-700 font-medium flex items-center gap-1",children:[n.jsx(kt,{className:"h-3 w-3"})," This action cannot be easily undone."]})})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:t,className:"flex-1 px-4 py-3 bg-cream-100 text-neutral-700 font-bold rounded-xl hover:bg-cream-200 transition-colors",children:"Back"}),n.jsx("button",{onClick:r,disabled:s,className:"flex-1 px-4 py-3 bg-burgundy-600 text-white font-bold rounded-xl hover:bg-burgundy-700 transition-colors shadow-lg shadow-burgundy-500/20 flex items-center justify-center gap-2",children:s?n.jsxs(n.Fragment,{children:[n.jsx(me,{className:"h-4 w-4 animate-spin"}),"Finalizing..."]}):"Finalize Now"})]})]})})})}function xne({isOpen:e,onClose:t,result:r}){if(!e)return null;const{success:s,eliminated:a}=r;return n.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[100] p-4",children:n.jsx("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full overflow-hidden animate-in fade-in zoom-in duration-200",children:n.jsxs("div",{className:"p-6 text-center",children:[n.jsx("div",{className:"w-16 h-16 bg-green-100 text-green-600 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx(tt,{className:"h-10 w-10"})}),n.jsx("h3",{className:"text-2xl font-display font-bold text-neutral-900 mb-2",children:s?"Scoring Finalized!":"Finalization Failed"}),n.jsx("p",{className:"text-neutral-600 mb-6",children:s?"Episode scores have been locked and all league standings have been updated.":"There was an error finalizing the scores. Please check the server logs."}),s&&a.length>0&&n.jsxs("div",{className:"bg-neutral-50 rounded-2xl p-4 mb-6 text-left border border-cream-200",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3 text-neutral-800 font-bold",children:[n.jsx(bn,{className:"h-4 w-4 text-orange-500"}),"Torches Snuffed (",a.length,")"]}),n.jsx("div",{className:"grid grid-cols-2 gap-2",children:a.map(i=>n.jsxs("div",{className:"text-sm text-neutral-600 flex items-center gap-2",children:[n.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-neutral-300"}),i]},i))})]}),n.jsx("button",{onClick:t,className:"w-full py-4 bg-neutral-900 text-white font-bold rounded-2xl hover:bg-neutral-800 transition-colors shadow-lg",children:"Done"})]})})})}function gne({castaways:e,selectedCastawayId:t,onSelect:r,existingScores:s,hideEliminated:a=!0}){const[i,o]=T.useState(a),d=p=>s==null?void 0:s.some(f=>f.castaway_id===p),u=i?e.filter(p=>p.status==="active"):e,h=e.filter(p=>p.status==="eliminated").length;return n.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar flex flex-col",children:[h>0&&n.jsx("div",{className:"px-4 pt-2 pb-1 border-b border-cream-100",children:n.jsx("button",{onClick:()=>o(!i),className:"flex items-center gap-2 text-xs text-neutral-500 hover:text-neutral-700 transition-colors",children:i?n.jsxs(n.Fragment,{children:[n.jsx(gc,{className:"h-3 w-3"}),n.jsxs("span",{children:["Show ",h," eliminated"]})]}):n.jsxs(n.Fragment,{children:[n.jsx(Ei,{className:"h-3 w-3"}),n.jsx("span",{children:"Hide eliminated"})]})})}),n.jsx("div",{className:"flex-1 p-4 space-y-2",children:u.map(p=>{const f=t===p.id,x=d(p.id);return n.jsxs("button",{onClick:()=>r(p.id),className:`w-full flex items-center gap-3 p-3 rounded-xl border transition-all text-left group ${f?"bg-burgundy-600 border-burgundy-600 text-white shadow-lg shadow-burgundy-500/20":"bg-white border-cream-200 text-neutral-700 hover:border-burgundy-200 hover:bg-burgundy-50/30"}`,children:[n.jsx("img",{src:Hn(p.name,p.photo_url),alt:p.name,className:`w-10 h-10 rounded-lg object-cover border-2 ${f?"border-white/30":"border-cream-100 group-hover:border-burgundy-100"}`}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:`font-semibold text-sm truncate ${f?"text-white":"text-neutral-800"}`,children:p.name}),n.jsx("p",{className:`text-[10px] uppercase font-bold tracking-tighter ${f?"text-burgundy-100":"text-neutral-400"}`,children:p.status})]}),x?n.jsx(tt,{className:`h-4 w-4 ${f?"text-white":"text-green-500"}`}):n.jsx(kt,{className:`h-4 w-4 ${f?"text-burgundy-300":"text-amber-400 opacity-0 group-hover:opacity-100"}`})]},p.id)})})]})}function bne({castaway:e,totalPoints:t,episodeNumber:r,isSaving:s,isDirty:a,lastSavedAt:i}){return n.jsx("div",{className:"bg-gradient-to-r from-burgundy-500 to-burgundy-600 rounded-2xl p-6 text-white shadow-elevated",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-xl flex items-center justify-center",children:e!=null&&e.photo_url?n.jsx("img",{src:Hn(e.name,e.photo_url),alt:e.name,className:"w-16 h-16 rounded-xl object-cover"}):n.jsx("span",{className:"text-2xl font-bold",children:e==null?void 0:e.name.charAt(0)})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-display",children:e==null?void 0:e.name}),n.jsxs("p",{className:"text-burgundy-100",children:["Episode ",r]})]})]}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-burgundy-200 text-sm",children:"Episode Total"}),n.jsxs("p",{className:`text-4xl font-display font-bold ${t>=0?"text-white":"text-red-200"}`,children:[t>=0?"+":"",t]})]}),n.jsxs("div",{className:"flex flex-col items-end gap-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[s&&n.jsxs("span",{className:"text-xs text-burgundy-200 flex items-center gap-1",children:[n.jsx(me,{className:"h-3 w-3 animate-spin"}),"Saving..."]}),a&&!s&&n.jsx("span",{className:"text-xs text-burgundy-200",children:"Unsaved changes"}),i&&!a&&!s&&n.jsxs("span",{className:"text-xs text-green-200 flex items-center gap-1",children:[n.jsx(tt,{className:"h-3 w-3"}),"Saved"]})]}),n.jsx("p",{className:"text-xs text-burgundy-200",children:"Auto-saves after 2 seconds"})]})]})]})})}function yne({episodes:e,selectedEpisodeId:t,onSelect:r}){return n.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated p-5",children:[n.jsx("h3",{className:"font-semibold text-neutral-800 mb-3",children:"Select Episode"}),n.jsxs("select",{value:t||"",onChange:s=>r(s.target.value||null),className:"w-full p-3 border border-cream-200 rounded-xl focus:ring-2 focus:ring-burgundy-500 focus:border-burgundy-500","aria-label":"Select episode to score",children:[n.jsx("option",{value:"",children:"Choose episode..."}),e.map(s=>n.jsxs("option",{value:s.id,children:["Ep ",s.number,": ",s.title||"TBD"," ",s.is_scored?"":""]},s.id))]})]})}function vne({scoringStatus:e,selectedEpisodeId:t,selectedEpisode:r,finalizeMutation:s,onShowFinalizeModal:a}){return n.jsxs("div",{className:"flex items-center justify-between mb-8 animate-fade-in",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(z,{to:"/admin",className:"text-neutral-400 hover:text-neutral-600 transition-colors","aria-label":"Back to admin dashboard",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),n.jsx("h1",{className:"text-2xl font-display text-neutral-800",children:"Score Episode"})]}),n.jsx("p",{className:"text-neutral-500",children:"Enter scores for each castaway"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[e&&t&&!(r!=null&&r.is_scored)&&n.jsxs("div",{className:`px-4 py-2 rounded-xl flex items-center gap-2 ${e.is_complete?"bg-green-100 text-green-700":"bg-amber-100 text-amber-700"}`,children:[e.is_complete?n.jsx(tt,{className:"h-5 w-5"}):n.jsx(kt,{className:"h-5 w-5"}),n.jsxs("span",{className:"font-medium",children:[e.scored_castaways,"/",e.total_castaways," castaways scored"]})]}),n.jsxs(z,{to:`/admin/scoring/grid${t?`?episode=${t}`:""}`,className:"btn btn-secondary flex items-center gap-2",children:[n.jsx(E4,{className:"h-4 w-4"}),"Grid View"]}),t&&!(r!=null&&r.is_scored)&&n.jsxs("button",{onClick:a,className:"btn btn-primary flex items-center gap-2",disabled:s.isPending||!(e!=null&&e.is_complete),title:e!=null&&e.is_complete?"Finalize episode scoring":`Score all ${(e==null?void 0:e.total_castaways)||0} castaways before finalizing`,children:[s.isPending?n.jsx(me,{className:"h-4 w-4 animate-spin"}):n.jsx(tt,{className:"h-4 w-4"}),"Finalize Scores"]}),(r==null?void 0:r.is_scored)&&n.jsxs("span",{className:"flex items-center gap-2 text-green-600 font-medium",children:[n.jsx(tt,{className:"h-5 w-5"}),"Finalized"]})]})]})}function C2({category:e,rules:t,scores:r,isExpanded:s,onToggle:a,onUpdateScore:i,isFeatured:o=!1}){const d=t.reduce((h,p)=>{const f=r[p.id]||0;return h+p.points*f},0),u=t.some(h=>(r[h.id]||0)>0);return o?n.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated overflow-hidden border-2 border-burgundy-200",children:[n.jsxs("button",{onClick:a,className:"w-full p-4 border-b border-cream-100 bg-gradient-to-r from-burgundy-50 to-cream-50 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(kn,{className:"h-5 w-5 text-burgundy-500 fill-burgundy-500"}),n.jsx("h3",{className:"font-semibold text-burgundy-700",children:e}),n.jsx("span",{className:"text-xs bg-burgundy-100 text-burgundy-600 px-2 py-0.5 rounded-full font-bold",children:t.length})]}),s?n.jsx(un,{className:"h-5 w-5 text-burgundy-400"}):n.jsx(hr,{className:"h-5 w-5 text-burgundy-400"})]}),s&&n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-px bg-cream-100",children:t.map(h=>n.jsx(E2,{rule:h,currentCount:r[h.id]||0,onChange:p=>i(h.id,p)},h.id))})]}):n.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated overflow-hidden",children:[n.jsxs("button",{onClick:a,className:"w-full p-4 border-b border-cream-100 bg-cream-50 flex items-center justify-between hover:bg-cream-100 transition-colors",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[s?n.jsx(un,{className:"h-5 w-5 text-neutral-400"}):n.jsx(hr,{className:"h-5 w-5 text-neutral-400"}),n.jsx("h3",{className:"font-semibold text-neutral-800",children:e}),n.jsx("span",{className:"text-xs bg-cream-200 text-neutral-500 px-2 py-0.5 rounded-full font-bold",children:t.length})]}),u&&n.jsxs("span",{className:`font-bold text-sm ${d>=0?"text-green-600":"text-red-600"}`,children:[d>=0?"+":"",d]})]}),s&&n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-px bg-cream-100",children:t.map(h=>n.jsx(E2,{rule:h,currentCount:r[h.id]||0,onChange:p=>i(h.id,p)},h.id))})]})}function Y4(){const[e,t]=T.useState(!1),r=[{points:"+0.5",description:"Your player is shown in a confessional"},{points:"-5",description:"Your player is snuffed at tribal council"},{points:"+5",description:"Your player does not go to tribal council"},{points:"+5",description:"Your player goes to tribal council but doesn't get snuffed"},{points:"+7",description:"Your player wins individual immunity (includes Final Four fire-making)"},{points:"+7",description:"Your player wins a combined reward/individual immunity challenge (no double points)"},{points:"+3",description:"Your player wins an individual reward challenge"},{points:"+1",description:"Your player participates in a team reward challenge and wins"},{points:"-2",description:"Your player goes to tribal council"},{points:"-1",description:"For each vote your player receives (does count)"},{points:"+1",description:"Your player's team wins a reward challenge (if 3 teams, 1st or 2nd)"},{points:"+1",description:"Your player's team wins an immunity challenge (if 3 teams, 1st or 2nd)"},{points:"+1",description:"Your player's team wins a combined reward/immunity challenge (no double points)"},{points:"-1",description:"Your player's team gets last place in any challenge"}],s=["After the first episode, participants rank castaways. Picks are made in reverse order of prior season rankings (or random for new leagues).","The picking order reverses each round (snake draft style).",'Each team picks one "starting" castaway per week to score points. The other is "benched" and does not score.',"A random number generator is used if no pick is made.",'When only one castaway remains on a team, they must be the "starting" player.',"If a team has no remaining castaways, they can no longer score points."];return n.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 mb-6",children:[n.jsxs("button",{onClick:()=>t(!e),className:"w-full p-4 flex items-center justify-between text-left hover:bg-cream-50 transition-colors rounded-2xl",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Du,{className:"h-5 w-5 text-burgundy-500"}),n.jsx("span",{className:"font-semibold text-neutral-800",children:"Scoring Rules Reference"})]}),e?n.jsx(zs,{className:"h-5 w-5 text-neutral-400"}):n.jsx(un,{className:"h-5 w-5 text-neutral-400"})]}),e&&n.jsxs("div",{className:"px-4 pb-4 space-y-4",children:[n.jsxs("div",{className:"bg-cream-50 rounded-xl p-4",children:[n.jsx("h4",{className:"font-semibold text-neutral-700 mb-2 text-sm",children:"Team Selection & Mechanics"}),n.jsx("ul",{className:"space-y-1 text-sm text-neutral-600",children:s.map((a,i)=>n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx("span",{className:"text-burgundy-500 mt-1",children:""}),n.jsx("span",{children:a})]},i))})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-neutral-700 mb-2 text-sm",children:"Point Values"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:r.map((a,i)=>n.jsxs("div",{className:`flex items-start gap-3 p-2 rounded-lg ${a.points.startsWith("+")?"bg-green-50":"bg-red-50"}`,children:[n.jsx("span",{className:`font-mono font-bold text-sm min-w-[40px] ${a.points.startsWith("+")?"text-green-600":"text-red-600"}`,children:a.points}),n.jsx("span",{className:"text-xs text-neutral-600",children:a.description})]},i))})]})]})]})}function T2(){const{user:e}=dt(),t=Et(),[r]=pu(),s=r.get("episode"),[a,i]=T.useState(s),[o,d]=T.useState(null),[u,h]=T.useState({}),[p,f]=T.useState(null),[x,y]=T.useState(!1),[b,w]=T.useState(!1),[v,j]=T.useState(!1),[C,S]=T.useState({"Most Common":!0}),[k,R]=T.useState(!1),[E,I]=T.useState(null),M=T.useRef(null),O=T.useRef(null),L=T.useRef(u),{data:P}=q4(e==null?void 0:e.id),{data:$}=B4(),{data:B}=H4($==null?void 0:$.id),{data:D}=W4($==null?void 0:$.id),{data:se}=z4($==null?void 0:$.id),{data:X}=G4(a),{data:ee,refetch:F}=K4(a),Q=T.useMemo(()=>xee(se),[se]),J=T.useMemo(()=>fee(se),[se]),U=B==null?void 0:B.find(he=>he.id===a),G=D==null?void 0:D.find(he=>he.id===o);T.useEffect(()=>{L.current=u},[u]);const ie=he=>{S(Ee=>({...Ee,[he]:!Ee[he]}))};T.useEffect(()=>{if(!b){if(v){j(!1);return}if(X&&o){const he=X.filter(nt=>nt.castaway_id===o),Ee={};he.forEach(nt=>{Ee[nt.scoring_rule_id]=nt.quantity}),h(Ee),y(!1)}else o&&(h({}),y(!1))}},[o,X]);const ae=T.useCallback(async(he,Ee)=>{if(!a||!he||!(e!=null&&e.id))return;const{data:{session:nt}}=await K.auth.getSession();if(!(nt!=null&&nt.access_token))throw new Error("Not authenticated");const Ln=Object.entries(Ee).filter(([yr,Ve])=>Ve>0).map(([yr,Ve])=>({castaway_id:he,scoring_rule_id:yr,quantity:Ve})),Or=await Je(`/episodes/${a}/scoring/save`,nt.access_token,{method:"POST",body:JSON.stringify({scores:Ln})});if(Or.error)throw new Error(Or.error);f(new Date),y(!1),j(!0),t.invalidateQueries({queryKey:["episodeScores",a]}),F()},[a,e==null?void 0:e.id,t,F]),fe=De({mutationFn:async()=>{if(!a)throw new Error("No episode selected");const{data:{session:he}}=await K.auth.getSession();if(!(he!=null&&he.access_token))throw new Error("Not authenticated");const Ee=await Je(`/episodes/${a}/scoring/finalize`,he.access_token,{method:"POST"});if(Ee.error)throw new Error(Ee.error);return Ee.data},onSuccess:he=>{I({success:!0,eliminated:(he==null?void 0:he.eliminated)||[]}),R(!1),t.invalidateQueries({queryKey:["episodes"]}),t.invalidateQueries({queryKey:["episodeScores"]}),t.invalidateQueries({queryKey:["castaways"]}),t.invalidateQueries({queryKey:["scoringStatus"]}),F()},onError:()=>{I({success:!1,eliminated:[]}),R(!1)}});T.useEffect(()=>{const he=M.current;if(he&&he!==o&&x){const Ee={...u};w(!0),ae(he,Ee).finally(()=>{w(!1)})}M.current=o},[o,x,u,ae]),T.useEffect(()=>{if(!x||!o)return;O.current&&clearTimeout(O.current);const he=o;return O.current=setTimeout(async()=>{const Ee={...L.current};w(!0);try{await ae(he,Ee)}finally{w(!1)}},2e3),()=>{O.current&&clearTimeout(O.current)}},[u,x,o,ae]);const je=(he,Ee)=>{h(nt=>({...nt,[he]:Math.max(0,Ee)})),y(!0)},ze=T.useMemo(()=>Object.entries(u).reduce((he,[Ee,nt])=>{const Ln=se==null?void 0:se.find(Or=>Or.id===Ee);return he+((Ln==null?void 0:Ln.points)||0)*nt},0),[u,se]);return P&&P.role!=="admin"?n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200",children:[n.jsx(ft,{}),n.jsx("main",{className:"max-w-4xl mx-auto px-4 py-16 text-center",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated p-12",children:[n.jsx("h1",{className:"text-2xl font-display text-neutral-800 mb-3",children:"Access Denied"}),n.jsx("p",{className:"text-neutral-500 mb-8",children:"You don't have permission to access this page."}),n.jsx(z,{to:"/dashboard",className:"btn btn-primary",children:"Back to Dashboard"})]})})]}):n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200",children:[n.jsx(ft,{}),n.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsx(Y4,{}),n.jsx(vne,{scoringStatus:ee||null,selectedEpisodeId:a,selectedEpisode:U,finalizeMutation:fe,onShowFinalizeModal:()=>R(!0)}),n.jsxs("div",{className:"grid lg:grid-cols-4 gap-8",children:[n.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[n.jsx(yne,{episodes:B||[],selectedEpisodeId:a,onSelect:he=>{i(he),d(null)}}),a&&n.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated overflow-hidden flex flex-col h-[500px]",children:[n.jsxs("div",{className:"p-5 border-b border-cream-100 flex items-center justify-between",children:[n.jsx("h3",{className:"font-semibold text-neutral-800",children:"Castaways"}),ee&&n.jsxs("span",{className:"text-[10px] bg-cream-100 text-neutral-500 px-2 py-0.5 rounded-full font-bold uppercase tracking-wider",children:[ee.scored_castaways,"/",ee.total_castaways]})]}),n.jsx(gne,{castaways:D||[],selectedCastawayId:o,onSelect:he=>d(he),existingScores:X||[]})]})]}),n.jsx("div",{className:"lg:col-span-3",children:a?o?n.jsxs("div",{className:"space-y-6",children:[n.jsx(bne,{castaway:G,totalPoints:ze,episodeNumber:(U==null?void 0:U.number)||0,isSaving:b,isDirty:x,lastSavedAt:p}),Q.length>0&&n.jsx(C2,{category:"Most Common",rules:Q,scores:u,isExpanded:C["Most Common"]??!0,onToggle:()=>ie("Most Common"),onUpdateScore:je,isFeatured:!0}),Object.entries(J).map(([he,Ee])=>n.jsx(C2,{category:he,rules:Ee,scores:u,isExpanded:C[he]??!1,onToggle:()=>ie(he),onUpdateScore:je},he))]}):n.jsx("div",{className:"bg-white rounded-2xl shadow-elevated p-12 text-center",children:n.jsx("p",{className:"text-neutral-500",children:"Select a castaway to enter scores"})}):n.jsx("div",{className:"bg-white rounded-2xl shadow-elevated p-12 text-center",children:n.jsx("p",{className:"text-neutral-500",children:"Select an episode to begin scoring"})})})]}),n.jsx(pne,{isOpen:k,onClose:()=>R(!1),onConfirm:()=>fe.mutate(),isPending:fe.isPending,scoringStatus:ee||{is_complete:!1,total_castaways:0,scored_castaways:0,unscored_castaway_ids:[],unscored_castaway_names:[],is_finalized:!1}}),E&&n.jsx(xne,{isOpen:!!E,onClose:()=>I(null),result:{success:E.success,eliminated:E.eliminated.map(he=>{var Ee;return((Ee=D==null?void 0:D.find(nt=>nt.id===he))==null?void 0:Ee.name)||he})}})]})]})}function wne({castaway:e,isEliminated:t=!1,onEdit:r,onEliminate:s,onReactivate:a,isReactivating:i=!1}){const o=e.best_placement===1,d=t?"bg-neutral-50 rounded-xl p-4 flex items-center gap-4 opacity-75":`rounded-xl p-4 flex items-center gap-4 ${o?"bg-yellow-50 border border-yellow-200":"bg-cream-50"}`,u=t?"relative w-14 h-14 bg-neutral-200 rounded-xl flex items-center justify-center overflow-hidden grayscale":"relative w-14 h-14 bg-cream-200 rounded-xl flex items-center justify-center overflow-hidden",h=t?"font-semibold text-neutral-600 truncate":"font-semibold text-neutral-800 truncate",p=t?"text-sm text-neutral-400":"text-sm text-neutral-500";return n.jsxs("div",{className:d,children:[n.jsxs("div",{className:u,children:[e.photo_url?n.jsx("img",{src:e.photo_url,alt:e.name,className:"w-14 h-14 object-cover"}):n.jsx("span",{className:"text-xl font-bold text-neutral-400",children:e.name.charAt(0)}),o&&n.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-yellow-400 rounded-full flex items-center justify-center",children:n.jsx(Ke,{className:"h-3 w-3 text-yellow-900"})})]}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("p",{className:h,children:e.name}),e.previous_seasons&&e.previous_seasons.length>0&&n.jsxs("span",{className:"flex items-center gap-1 text-xs bg-purple-100 text-purple-700 px-2 py-0.5 rounded-full",children:[n.jsx(ou,{className:"h-3 w-3"}),e.previous_seasons.length,"x"]})]}),n.jsx("p",{className:p,children:t?e.placement?`#${e.placement}`:"Eliminated":e.occupation||"No occupation"}),!t&&!e.photo_url&&n.jsx("p",{className:"text-xs text-orange-500",children:"Missing photo"})]}),n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("button",{onClick:r,className:"px-3 py-1.5 bg-blue-100 text-blue-700 rounded-lg text-sm font-medium hover:bg-blue-200 transition-colors",children:"Edit"}),t?n.jsx("button",{onClick:a,disabled:i,className:"px-3 py-1.5 bg-green-100 text-green-700 rounded-lg text-sm font-medium hover:bg-green-200 transition-colors disabled:opacity-50",children:"Reactivate"}):n.jsx("button",{onClick:s,className:"px-3 py-1.5 bg-red-100 text-red-700 rounded-lg text-sm font-medium hover:bg-red-200 transition-colors",children:"Eliminate"})]})]})}function R2({castaways:e,isLoading:t=!1,variant:r,onEdit:s,onEliminate:a,onReactivate:i,isReactivating:o=!1}){const d=r==="eliminated",u=d?"bg-neutral-50":"bg-green-50",h=d?"text-neutral-600":"text-green-800",p=d?`Eliminated (${e.length})`:`Active Castaways (${e.length})`;return t?n.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated overflow-hidden animate-slide-up",children:[n.jsx("div",{className:`p-6 border-b border-cream-100 ${u}`,children:n.jsx("h2",{className:`font-semibold ${h}`,children:p})}),n.jsx("div",{className:"p-12 text-center",children:n.jsx("div",{className:"w-8 h-8 mx-auto border-2 border-burgundy-500 border-t-transparent rounded-full animate-spin"})})]}):e.length===0?null:n.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated overflow-hidden animate-slide-up",children:[n.jsx("div",{className:`p-6 border-b border-cream-100 ${u}`,children:n.jsx("h2",{className:`font-semibold ${h}`,children:p})}),n.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4 p-6",children:e.map(f=>n.jsx(wne,{castaway:f,isEliminated:d,onEdit:()=>s(f),onEliminate:a?()=>a(f.id):void 0,onReactivate:i?()=>i(f.id):void 0,isReactivating:o},f.id))})]})}function _ne({castawayName:e,episodes:t,selectedEpisodeId:r,onEpisodeChange:s,onConfirm:a,onCancel:i,isPending:o}){return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated max-w-md w-full p-6 animate-slide-up",children:[n.jsx("h3",{className:"text-xl font-display text-neutral-800 mb-4",children:"Eliminate Castaway"}),n.jsxs("p",{className:"text-neutral-500 mb-6",children:["Select the episode when ",e," was eliminated."]}),n.jsxs("select",{value:r,onChange:d=>s(d.target.value),className:"w-full p-3 border border-cream-200 rounded-xl mb-6 focus:ring-2 focus:ring-burgundy-500",children:[n.jsx("option",{value:"",children:"Select episode..."}),t.map(d=>n.jsxs("option",{value:d.id,children:["Episode ",d.number,": ",d.title||"TBD"]},d.id))]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:i,className:"flex-1 btn bg-cream-100 text-neutral-700 hover:bg-cream-200",children:"Cancel"}),n.jsx("button",{onClick:a,disabled:!r||o,className:"flex-1 btn bg-red-600 text-white hover:bg-red-700 disabled:opacity-50",children:o?"Eliminating...":"Confirm"})]})]})})}function jne({formData:e,onFormChange:t,onSave:r,onCancel:s,isPending:a}){return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated max-w-lg w-full p-6 animate-slide-up my-8",children:[n.jsx("h3",{className:"text-xl font-display text-neutral-800 mb-6",children:"Edit Castaway"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Photo URL"}),n.jsx("input",{type:"url",value:e.photo_url,onChange:i=>t({...e,photo_url:i.target.value}),placeholder:"https://example.com/photo.jpg",className:"w-full p-3 border border-cream-200 rounded-xl focus:ring-2 focus:ring-burgundy-500"}),e.photo_url&&n.jsxs("div",{className:"mt-2 flex items-center gap-3",children:[n.jsx("img",{src:e.photo_url,alt:"Preview",className:"w-16 h-16 rounded-xl object-cover border border-cream-200",onError:i=>{i.target.style.display="none"}}),n.jsx("span",{className:"text-xs text-green-600",children:"Preview"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Name"}),n.jsx("input",{type:"text",value:e.name,onChange:i=>t({...e,name:i.target.value}),className:"w-full p-3 border border-cream-200 rounded-xl focus:ring-2 focus:ring-burgundy-500"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Age"}),n.jsx("input",{type:"number",value:e.age,onChange:i=>t({...e,age:i.target.value}),className:"w-full p-3 border border-cream-200 rounded-xl focus:ring-2 focus:ring-burgundy-500"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Hometown"}),n.jsx("input",{type:"text",value:e.hometown,onChange:i=>t({...e,hometown:i.target.value}),className:"w-full p-3 border border-cream-200 rounded-xl focus:ring-2 focus:ring-burgundy-500"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Occupation"}),n.jsx("input",{type:"text",value:e.occupation,onChange:i=>t({...e,occupation:i.target.value}),className:"w-full p-3 border border-cream-200 rounded-xl focus:ring-2 focus:ring-burgundy-500"})]}),n.jsxs("div",{className:"border-t border-cream-200 pt-4 mt-4",children:[n.jsxs("h4",{className:"font-medium text-neutral-800 mb-3 flex items-center gap-2",children:[n.jsx(ou,{className:"h-4 w-4 text-purple-500"}),"Returning Player Info"]}),n.jsxs("div",{className:"mb-4",children:[n.jsxs("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:["Previous Seasons"," ",n.jsx("span",{className:"text-neutral-400 font-normal",children:"(comma-separated)"})]}),n.jsx("input",{type:"text",value:e.previous_seasons,onChange:i=>t({...e,previous_seasons:i.target.value}),placeholder:"Heroes vs. Villains, Winners at War",className:"w-full p-3 border border-cream-200 rounded-xl focus:ring-2 focus:ring-burgundy-500"})]}),n.jsxs("div",{className:"mb-4",children:[n.jsxs("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:["Best Placement ",n.jsx("span",{className:"text-neutral-400 font-normal",children:"(1 = winner)"})]}),n.jsx("input",{type:"number",min:"1",value:e.best_placement,onChange:i=>t({...e,best_placement:i.target.value}),placeholder:"1",className:"w-full p-3 border border-cream-200 rounded-xl focus:ring-2 focus:ring-burgundy-500"}),e.best_placement==="1"&&n.jsxs("p",{className:"text-xs text-yellow-600 mt-1 flex items-center gap-1",children:[n.jsx(Ke,{className:"h-3 w-3"})," Will show winner badge"]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Fun Fact"}),n.jsx("textarea",{value:e.fun_fact,onChange:i=>t({...e,fun_fact:i.target.value}),placeholder:"Interesting trivia about this castaway...",rows:3,className:"w-full p-3 border border-cream-200 rounded-xl focus:ring-2 focus:ring-burgundy-500 resize-none"})]})]}),n.jsxs("div",{className:"flex gap-3 mt-6",children:[n.jsx("button",{onClick:s,className:"flex-1 btn bg-cream-100 text-neutral-700 hover:bg-cream-200",children:"Cancel"}),n.jsx("button",{onClick:r,disabled:a||!e.name,className:"flex-1 btn bg-burgundy-600 text-white hover:bg-burgundy-700 disabled:opacity-50",children:a?"Saving...":"Save Changes"})]})]})})}function Nne({missingPhotosCount:e,onAutoPopulatePhotos:t,isPending:r}){return e===0?null:n.jsx("button",{onClick:t,disabled:r,className:"btn bg-purple-600 text-white hover:bg-purple-700 disabled:opacity-50 flex items-center gap-2",children:r?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Populating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(kn,{className:"h-4 w-4"}),"Auto-Populate ",e," Photos"]})})}function I2(){var O;const{user:e}=dt(),t=Et(),[r,s]=T.useState(null),[a,i]=T.useState(null),[o,d]=T.useState(""),[u,h]=T.useState({name:"",age:"",hometown:"",occupation:"",photo_url:"",previous_seasons:"",best_placement:"",fun_fact:""}),{data:p}=re({queryKey:["profile",e==null?void 0:e.id],queryFn:async()=>{const{data:L,error:P}=await K.from("users").select("id, display_name, role").eq("id",e.id).single();if(P)throw P;return L},enabled:!!(e!=null&&e.id)}),{data:f}=re({queryKey:["activeSeason"],queryFn:async()=>{const{data:L,error:P}=await K.from("seasons").select("*").eq("is_active",!0).single();if(P&&P.code!=="PGRST116")throw P;return L}}),{data:x,isLoading:y}=re({queryKey:["castaways",f==null?void 0:f.id],queryFn:async()=>{if(!(f!=null&&f.id))return[];const{data:L,error:P}=await K.from("castaways").select("*").eq("season_id",f.id).order("name");if(P)throw P;return L},enabled:!!(f!=null&&f.id)}),{data:b}=re({queryKey:["episodes",f==null?void 0:f.id],queryFn:async()=>{if(!(f!=null&&f.id))return[];const{data:L,error:P}=await K.from("episodes").select("id, number, title").eq("season_id",f.id).order("number");if(P)throw P;return L},enabled:!!(f!=null&&f.id)}),w=De({mutationFn:async({castawayId:L,episodeId:P,placement:$})=>{const{data:{session:B}}=await K.auth.getSession();if(!(B!=null&&B.access_token))throw new Error("Not authenticated");const D=await Je(`/admin/castaways/${L}/eliminate`,B.access_token,{method:"POST",body:JSON.stringify({episode_id:P,placement:$})});if(D.error)throw new Error(D.error);return D.data},onSuccess:()=>{t.invalidateQueries({queryKey:["castaways"]}),i(null),d("")}}),v=De({mutationFn:async L=>{const{data:{session:P}}=await K.auth.getSession();if(!(P!=null&&P.access_token))throw new Error("Not authenticated");const $=await Je(`/admin/castaways/${L}`,P.access_token,{method:"PATCH",body:JSON.stringify({status:"active",eliminated_episode_id:null,placement:null})});if($.error)throw new Error($.error);return $.data},onSuccess:()=>{t.invalidateQueries({queryKey:["castaways"]})}}),j=De({mutationFn:async({castawayId:L,data:P})=>{const{data:{session:$}}=await K.auth.getSession();if(!($!=null&&$.access_token))throw new Error("Not authenticated");const B=await Je(`/admin/castaways/${L}`,$.access_token,{method:"PATCH",body:JSON.stringify(P)});if(B.error)throw new Error(B.error);return B.data},onSuccess:()=>{t.invalidateQueries({queryKey:["castaways"]}),s(null)}}),C=L=>{var P,$,B;s(L.id),h({name:L.name,age:((P=L.age)==null?void 0:P.toString())||"",hometown:L.hometown||"",occupation:L.occupation||"",photo_url:L.photo_url||"",previous_seasons:(($=L.previous_seasons)==null?void 0:$.join(", "))||"",best_placement:((B=L.best_placement)==null?void 0:B.toString())||"",fun_fact:L.fun_fact||""})},S=()=>{if(!r)return;const L=u.previous_seasons?u.previous_seasons.split(",").map(B=>B.trim()).filter(B=>B):null,P=u.age?parseInt(u.age):null;if(P!==null&&(isNaN(P)||P<1||P>120)){alert("Age must be a valid number between 1 and 120");return}const $=u.best_placement?parseInt(u.best_placement):null;if($!==null&&(isNaN($)||$<1||$>24)){alert("Best placement must be between 1 and 24");return}j.mutate({castawayId:r,data:{name:u.name,age:P,hometown:u.hometown||null,occupation:u.occupation||null,photo_url:u.photo_url||null,previous_seasons:L,best_placement:$,fun_fact:u.fun_fact||null}})},k=L=>`https://api.dicebear.com/7.x/initials/svg?seed=${encodeURIComponent(L)}&backgroundColor=8B0000&textColor=ffffff&fontSize=40`,R=De({mutationFn:async()=>{if(!x)return{updated:0};const{data:{session:L}}=await K.auth.getSession();if(!(L!=null&&L.access_token))throw new Error("Not authenticated");const P=x.filter($=>!$.photo_url).map($=>({id:$.id,photo_url:k($.name)}));for(const $ of P){const B=await Je(`/admin/castaways/${$.id}`,L.access_token,{method:"PATCH",body:JSON.stringify({photo_url:$.photo_url})});if(B.error)throw new Error(B.error)}return{updated:P.length}},onSuccess:()=>{t.invalidateQueries({queryKey:["castaways"]})}}),E=(x==null?void 0:x.filter(L=>!L.photo_url).length)||0,I=(x==null?void 0:x.filter(L=>L.status==="active"))||[],M=(x==null?void 0:x.filter(L=>L.status==="eliminated"))||[];return p&&p.role!=="admin"?n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200",children:[n.jsx(ft,{}),n.jsx("main",{className:"max-w-4xl mx-auto px-4 py-16 text-center",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated p-12",children:[n.jsx("h1",{className:"text-2xl font-display text-neutral-800 mb-3",children:"Access Denied"}),n.jsx(z,{to:"/dashboard",className:"btn btn-primary",children:"Back to Dashboard"})]})})]}):n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200",children:[n.jsx(ft,{}),n.jsxs("main",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"flex items-center justify-between mb-8 animate-fade-in",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(z,{to:"/admin",className:"text-neutral-400 hover:text-neutral-600 transition-colors",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),n.jsx("h1",{className:"text-2xl font-display text-neutral-800",children:"Manage Castaways"})]}),n.jsxs("p",{className:"text-neutral-500",children:[I.length," active, ",M.length," eliminated"]})]}),n.jsx(Nne,{missingPhotosCount:E,onAutoPopulatePhotos:()=>R.mutate(),isPending:R.isPending})]}),n.jsx("div",{className:"mb-8",children:n.jsx(R2,{castaways:I,isLoading:y,variant:"active",onEdit:C,onEliminate:L=>i(L)})}),n.jsx("div",{style:{animationDelay:"0.1s"},children:n.jsx(R2,{castaways:M,variant:"eliminated",onEdit:C,onReactivate:L=>v.mutate(L),isReactivating:v.isPending})}),a&&n.jsx(_ne,{castawayName:((O=x==null?void 0:x.find(L=>L.id===a))==null?void 0:O.name)||"",episodes:b||[],selectedEpisodeId:o,onEpisodeChange:d,onConfirm:()=>{o&&w.mutate({castawayId:a,episodeId:o})},onCancel:()=>{i(null),d("")},isPending:w.isPending}),r&&n.jsx(jne,{formData:u,onFormChange:h,onSave:S,onCancel:()=>s(null),isPending:j.isPending})]})]})}function P2(){const e=Et(),[t,r]=T.useState(!1),[s,a]=T.useState(null),[i,o]=T.useState({number:"",name:"",registration_opens_at:"",draft_order_deadline:"",registration_closes_at:"",premiere_at:"",draft_deadline:"",finale_at:""}),[d,u]=T.useState([]),h=()=>{const S=[],k=i.registration_opens_at?new Date(i.registration_opens_at):null,R=i.draft_order_deadline?new Date(i.draft_order_deadline):null,E=i.registration_closes_at?new Date(i.registration_closes_at):null,I=i.premiere_at?new Date(i.premiere_at):null,M=i.draft_deadline?new Date(i.draft_deadline):null,O=i.finale_at?new Date(i.finale_at):null;return i.number||S.push("Season number is required"),i.name||S.push("Season name is required"),k||S.push("Registration opens date is required"),R||S.push("Draft order deadline is required"),E||S.push("Registration closes date is required"),I||S.push("Premiere date is required"),M||S.push("Draft deadline is required"),k&&R&&k>=R&&S.push("Registration must open before draft order deadline"),R&&E&&R>=E&&S.push("Draft order deadline must be before registration closes"),E&&I&&E>I&&S.push("Registration must close before or on premiere date"),I&&M&&I>M&&S.push("Premiere must be before or on draft deadline"),M&&O&&M>=O&&S.push("Draft deadline must be before finale"),I&&O&&I>=O&&S.push("Premiere must be before finale"),u(S),S.length===0},{data:p,isLoading:f}=re({queryKey:["admin-seasons"],queryFn:async()=>{const{data:S,error:k}=await K.from("seasons").select("*").order("number",{ascending:!1});if(k)throw k;return S}}),x=De({mutationFn:async()=>{const S={number:parseInt(i.number),name:i.name,registration_opens_at:i.registration_opens_at,draft_order_deadline:i.draft_order_deadline,registration_closes_at:i.registration_closes_at,premiere_at:i.premiere_at,draft_deadline:i.draft_deadline,finale_at:i.finale_at||null};if(s){const{error:k}=await K.from("seasons").update(S).eq("id",s);if(k)throw k}else{const{error:k}=await K.from("seasons").insert(S);if(k)throw k}},onSuccess:()=>{e.invalidateQueries({queryKey:["admin-seasons"]}),w()}}),y=De({mutationFn:async S=>{const{error:k}=await K.from("seasons").update({is_active:!1}).neq("id",S);if(k)throw k;const{error:R}=await K.from("seasons").update({is_active:!0}).eq("id",S);if(R)throw R},onSuccess:()=>{e.invalidateQueries({queryKey:["admin-seasons"]})}}),b=De({mutationFn:async S=>{const{error:k}=await K.from("seasons").delete().eq("id",S);if(k)throw k},onSuccess:()=>{e.invalidateQueries({queryKey:["admin-seasons"]})}}),w=()=>{r(!1),a(null),u([]),o({number:"",name:"",registration_opens_at:"",draft_order_deadline:"",registration_closes_at:"",premiere_at:"",draft_deadline:"",finale_at:""})},v=()=>{h()&&x.mutate()},j=S=>{var k,R,E,I,M,O;u([]),a(S.id),o({number:S.number.toString(),name:S.name,registration_opens_at:((k=S.registration_opens_at)==null?void 0:k.slice(0,16))||"",draft_order_deadline:((R=S.draft_order_deadline)==null?void 0:R.slice(0,16))||"",registration_closes_at:((E=S.registration_closes_at)==null?void 0:E.slice(0,16))||"",premiere_at:((I=S.premiere_at)==null?void 0:I.slice(0,16))||"",draft_deadline:((M=S.draft_deadline)==null?void 0:M.slice(0,16))||"",finale_at:((O=S.finale_at)==null?void 0:O.slice(0,16))||""}),r(!0)},C=S=>S?new Date(S).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"-";return f?n.jsxs(n.Fragment,{children:[n.jsx(ft,{}),n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center",children:n.jsx(me,{className:"h-8 w-8 text-burgundy-500 animate-spin"})})]}):n.jsxs(n.Fragment,{children:[n.jsx(ft,{}),n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 p-4 pb-24",children:n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(z,{to:"/admin",className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:n.jsx(st,{className:"h-5 w-5 text-neutral-600"})}),n.jsxs("div",{children:[n.jsxs("h1",{className:"text-2xl font-display font-bold text-neutral-800 flex items-center gap-2",children:[n.jsx(er,{className:"h-6 w-6 text-orange-500"}),"Manage Seasons"]}),n.jsxs("p",{className:"text-neutral-500",children:[(p==null?void 0:p.length)||0," seasons"]})]})]}),n.jsxs("button",{onClick:()=>r(!0),className:"btn btn-primary flex items-center gap-2",children:[n.jsx($o,{className:"h-5 w-5"}),"New Season"]})]}),t&&n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200 mb-6",children:[n.jsx("h3",{className:"text-lg font-display font-bold text-neutral-800 mb-4",children:s?"Edit Season":"Create Season"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[n.jsxs("label",{className:"block",children:[n.jsx("span",{className:"text-neutral-500 text-sm",children:"Season Number"}),n.jsx("input",{type:"number",value:i.number,onChange:S=>o({...i,number:S.target.value}),className:"input mt-1"})]}),n.jsxs("label",{className:"block",children:[n.jsx("span",{className:"text-neutral-500 text-sm",children:"Season Name"}),n.jsx("input",{type:"text",value:i.name,onChange:S=>o({...i,name:S.target.value}),placeholder:"Survivor 50",className:"input mt-1"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[n.jsxs("label",{className:"block",children:[n.jsx("span",{className:"text-neutral-500 text-sm",children:"Registration Opens"}),n.jsx("input",{type:"datetime-local",value:i.registration_opens_at,onChange:S=>o({...i,registration_opens_at:S.target.value}),className:"input mt-1"})]}),n.jsxs("label",{className:"block",children:[n.jsx("span",{className:"text-neutral-500 text-sm",children:"Registration Closes"}),n.jsx("input",{type:"datetime-local",value:i.registration_closes_at,onChange:S=>o({...i,registration_closes_at:S.target.value}),className:"input mt-1"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[n.jsxs("label",{className:"block",children:[n.jsx("span",{className:"text-neutral-500 text-sm",children:"Draft Order Deadline"}),n.jsx("input",{type:"datetime-local",value:i.draft_order_deadline,onChange:S=>o({...i,draft_order_deadline:S.target.value}),className:"input mt-1"})]}),n.jsxs("label",{className:"block",children:[n.jsx("span",{className:"text-neutral-500 text-sm",children:"Draft Deadline"}),n.jsx("input",{type:"datetime-local",value:i.draft_deadline,onChange:S=>o({...i,draft_deadline:S.target.value}),className:"input mt-1"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[n.jsxs("label",{className:"block",children:[n.jsx("span",{className:"text-neutral-500 text-sm",children:"Premiere Date"}),n.jsx("input",{type:"datetime-local",value:i.premiere_at,onChange:S=>o({...i,premiere_at:S.target.value}),className:"input mt-1"})]}),n.jsxs("label",{className:"block",children:[n.jsx("span",{className:"text-neutral-500 text-sm",children:"Finale Date"}),n.jsx("input",{type:"datetime-local",value:i.finale_at,onChange:S=>o({...i,finale_at:S.target.value}),className:"input mt-1"})]})]}),d.length>0&&n.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-xl",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(at,{className:"h-5 w-5 text-red-500 flex-shrink-0 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-red-800",children:"Please fix the following errors:"}),n.jsx("ul",{className:"mt-2 space-y-1 text-sm text-red-600",children:d.map((S,k)=>n.jsx("li",{children:S},k))})]})]})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:v,disabled:x.isPending,className:"flex-1 bg-orange-500 hover:bg-orange-600 text-white py-2 px-4 rounded-xl font-medium transition-colors flex items-center justify-center gap-2",children:x.isPending?n.jsx(me,{className:"h-4 w-4 animate-spin"}):n.jsxs(n.Fragment,{children:[n.jsx(qt,{className:"h-4 w-4"}),s?"Update":"Create"]})}),n.jsx("button",{onClick:w,className:"bg-cream-100 hover:bg-cream-200 text-neutral-700 py-2 px-4 rounded-xl font-medium transition-colors",children:"Cancel"})]})]}),n.jsxs("div",{className:"space-y-3",children:[p==null?void 0:p.map(S=>n.jsxs("div",{className:`bg-white rounded-2xl shadow-card p-4 border ${S.is_active?"border-orange-300 ring-2 ring-orange-100":"border-cream-200"}`,children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("h3",{className:"text-lg font-display font-bold text-neutral-800",children:["Season ",S.number]}),S.is_active&&n.jsxs("span",{className:"px-2 py-0.5 bg-orange-100 text-orange-600 text-xs rounded-full flex items-center gap-1",children:[n.jsx(kn,{className:"h-3 w-3"})," Active"]})]}),n.jsx("p",{className:"text-neutral-500",children:S.name})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("button",{onClick:()=>j(S),className:"p-2 hover:bg-cream-100 rounded-xl transition-colors",children:n.jsx(Wv,{className:"h-4 w-4 text-neutral-500"})}),!S.is_active&&n.jsx("button",{onClick:()=>{confirm("Delete this season? This cannot be undone.")&&b.mutate(S.id)},className:"p-2 hover:bg-red-50 rounded-xl transition-colors",children:n.jsx(Oc,{className:"h-4 w-4 text-red-500"})})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm mb-3",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-neutral-400",children:"Premiere:"}),n.jsx("span",{className:"text-neutral-700 ml-2",children:C(S.premiere_at)})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-neutral-400",children:"Finale:"}),n.jsx("span",{className:"text-neutral-700 ml-2",children:C(S.finale_at)})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-neutral-400",children:"Registration:"}),n.jsx("span",{className:"text-neutral-700 ml-2",children:C(S.registration_opens_at)})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-neutral-400",children:"Draft Deadline:"}),n.jsx("span",{className:"text-neutral-700 ml-2",children:C(S.draft_deadline)})]})]}),n.jsxs("div",{className:"flex gap-2",children:[!S.is_active&&n.jsx("button",{onClick:()=>y.mutate(S.id),disabled:y.isPending,className:"flex-1 bg-orange-50 hover:bg-orange-100 text-orange-600 py-2 rounded-xl text-sm font-medium transition-colors",children:"Set as Active"}),n.jsx(z,{to:`/admin/seasons/${S.id}/episodes`,className:"flex-1 bg-cream-100 hover:bg-cream-200 text-neutral-700 py-2 rounded-xl text-sm font-medium text-center transition-colors",children:"Manage Episodes"}),n.jsx(z,{to:`/admin/seasons/${S.id}/castaways`,className:"flex-1 bg-cream-100 hover:bg-cream-200 text-neutral-700 py-2 rounded-xl text-sm font-medium text-center transition-colors",children:"Castaways"})]})]},S.id)),(p==null?void 0:p.length)===0&&n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-8 border border-cream-200 text-center",children:[n.jsx(er,{className:"h-12 w-12 text-neutral-400 mx-auto mb-4"}),n.jsx("p",{className:"text-neutral-500",children:"No seasons yet. Create your first season!"})]})]})]})})]})}function Sne(){const{seasonId:e}=On(),t=Et(),[r,s]=T.useState(!1),[a,i]=T.useState(null),[o,d]=T.useState({number:"",title:"",air_date:"",picks_lock_at:"",results_posted_at:"",is_finale:!1}),{data:u}=re({queryKey:["season",e],queryFn:async()=>{if(!e)throw new Error("No season ID");const{data:k,error:R}=await K.from("seasons").select("*").eq("id",e).single();if(R)throw R;return k},enabled:!!e}),{data:h,isLoading:p}=re({queryKey:["admin-episodes",e],queryFn:async()=>{if(!e)throw new Error("No season ID");const{data:k,error:R}=await K.from("episodes").select("*, users!results_released_by(display_name)").eq("season_id",e).order("number",{ascending:!0});if(R)throw R;return k},enabled:!!e}),f=De({mutationFn:async()=>{if(!e)throw new Error("No season ID");const k={season_id:e,number:parseInt(o.number),week_number:parseInt(o.number),title:o.title||null,air_date:o.air_date,picks_lock_at:o.picks_lock_at,results_posted_at:o.results_posted_at||null,is_finale:o.is_finale};if(a){const{error:R}=await K.from("episodes").update(k).eq("id",a);if(R)throw R}else{const{error:R}=await K.from("episodes").insert(k);if(R)throw R}},onSuccess:()=>{t.invalidateQueries({queryKey:["admin-episodes",e]}),v()}}),x=De({mutationFn:async k=>{const{error:R}=await K.from("episodes").delete().eq("id",k);if(R)throw R},onSuccess:()=>{t.invalidateQueries({queryKey:["admin-episodes",e]})}}),y=De({mutationFn:async k=>{const{data:{session:R}}=await K.auth.getSession();if(!R)throw new Error("Not authenticated");const I=await fetch(`/api/admin/episodes/${k}/lock`,{method:"POST",headers:{Authorization:`Bearer ${R.access_token}`,"Content-Type":"application/json"}}),M=await I.json();if(!I.ok)throw new Error(M.error||"Failed to lock results");return M},onSuccess:k=>{t.invalidateQueries({queryKey:["admin-episodes",e]}),alert(k.message||"Results locked! They will be released automatically.")},onError:k=>{alert(`Error: ${k.message}`)}}),b=De({mutationFn:async k=>{const{data:{session:R}}=await K.auth.getSession();if(!R)throw new Error("Not authenticated");const I=await fetch(`/api/admin/episodes/${k}/release-results`,{method:"POST",headers:{Authorization:`Bearer ${R.access_token}`,"Content-Type":"application/json"}}),M=await I.json();if(!I.ok)throw new Error(M.error||"Failed to release results");return M},onSuccess:k=>{t.invalidateQueries({queryKey:["admin-episodes",e]}),alert(`Results released! Sent ${k.notifications_sent} spoiler-safe notifications.`)},onError:k=>{alert(`Error: ${k.message}`)}}),w=De({mutationFn:async()=>{if(!u)throw new Error("No season");const k=new Date(u.premiere_at),R=[];for(let I=1;I<=14;I++){const M=new Date(k);M.setDate(k.getDate()+(I-1)*7);const O=new Date(M);O.setHours(15,0,0,0);const L=new Date(M);L.setDate(L.getDate()+2),L.setHours(12,0,0,0),R.push({season_id:e,number:I,week_number:I,title:I===14?"Finale":`Episode ${I}`,air_date:M.toISOString(),picks_lock_at:O.toISOString(),results_posted_at:L.toISOString(),is_finale:I===14})}const{error:E}=await K.from("episodes").insert(R);if(E)throw E},onSuccess:()=>{t.invalidateQueries({queryKey:["admin-episodes",e]})}}),v=()=>{s(!1),i(null),d({number:"",title:"",air_date:"",picks_lock_at:"",results_posted_at:"",is_finale:!1})},j=k=>{var R,E,I;i(k.id),d({number:k.number.toString(),title:k.title||"",air_date:((R=k.air_date)==null?void 0:R.slice(0,16))||"",picks_lock_at:((E=k.picks_lock_at)==null?void 0:E.slice(0,16))||"",results_posted_at:((I=k.results_posted_at)==null?void 0:I.slice(0,16))||"",is_finale:k.is_finale||!1}),s(!0)},C=k=>k?new Date(k).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}):"-",S=k=>k?new Date(k).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}):"";return p?n.jsxs(n.Fragment,{children:[n.jsx(ft,{}),n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center",children:n.jsx(me,{className:"h-8 w-8 text-burgundy-500 animate-spin"})})]}):n.jsxs(n.Fragment,{children:[n.jsx(ft,{}),n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 p-4 pb-24",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(z,{to:"/admin/seasons",className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:n.jsx(st,{className:"h-5 w-5 text-neutral-600"})}),n.jsxs("div",{children:[n.jsxs("h1",{className:"text-2xl font-display font-bold text-neutral-800 flex items-center gap-2",children:[n.jsx(yc,{className:"h-6 w-6 text-burgundy-500"}),"Episodes"]}),n.jsxs("p",{className:"text-neutral-500",children:["Season ",u==null?void 0:u.number,": ",u==null?void 0:u.name]})]})]}),n.jsx("button",{onClick:()=>s(!0),className:"p-2 bg-burgundy-500 hover:bg-burgundy-600 rounded-xl transition-colors shadow-card",children:n.jsx($o,{className:"h-5 w-5 text-white"})})]}),(h==null?void 0:h.length)===0&&n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200 mb-6 text-center",children:[n.jsx(yc,{className:"h-12 w-12 text-neutral-400 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-display font-bold text-neutral-800 mb-2",children:"No Episodes Yet"}),n.jsx("p",{className:"text-neutral-500 mb-4",children:"Generate all 14 episodes based on the premiere date, or add them manually."}),n.jsx("button",{onClick:()=>w.mutate(),disabled:w.isPending,className:"btn btn-primary",children:w.isPending?n.jsx(me,{className:"h-4 w-4 animate-spin"}):n.jsxs(n.Fragment,{children:[n.jsx($o,{className:"h-4 w-4"}),"Generate All Episodes"]})})]}),r&&n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-6 border border-cream-200 mb-6",children:[n.jsx("h3",{className:"text-lg font-display font-bold text-neutral-800 mb-4",children:a?"Edit Episode":"Add Episode"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[n.jsxs("label",{className:"block",children:[n.jsx("span",{className:"text-neutral-500 text-sm",children:"Episode Number"}),n.jsx("input",{type:"number",value:o.number,onChange:k=>d({...o,number:k.target.value}),className:"input mt-1"})]}),n.jsxs("label",{className:"block",children:[n.jsx("span",{className:"text-neutral-500 text-sm",children:"Title (Optional)"}),n.jsx("input",{type:"text",value:o.title,onChange:k=>d({...o,title:k.target.value}),placeholder:"Episode Title",className:"input mt-1"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[n.jsxs("label",{className:"block",children:[n.jsx("span",{className:"text-neutral-500 text-sm",children:"Air Date"}),n.jsx("input",{type:"datetime-local",value:o.air_date,onChange:k=>d({...o,air_date:k.target.value}),className:"input mt-1"})]}),n.jsxs("label",{className:"block",children:[n.jsx("span",{className:"text-neutral-500 text-sm",children:"Picks Lock At"}),n.jsx("input",{type:"datetime-local",value:o.picks_lock_at,onChange:k=>d({...o,picks_lock_at:k.target.value}),className:"input mt-1"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[n.jsxs("label",{className:"block",children:[n.jsx("span",{className:"text-neutral-500 text-sm",children:"Results Posted At"}),n.jsx("input",{type:"datetime-local",value:o.results_posted_at,onChange:k=>d({...o,results_posted_at:k.target.value}),className:"input mt-1"})]}),n.jsxs("label",{className:"flex items-center gap-2 mt-6",children:[n.jsx("input",{type:"checkbox",checked:o.is_finale,onChange:k=>d({...o,is_finale:k.target.checked}),className:"w-5 h-5 rounded bg-cream-100 border-cream-300 text-burgundy-500"}),n.jsx("span",{className:"text-neutral-700",children:"Is Finale"})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>f.mutate(),disabled:f.isPending,className:"btn btn-primary flex-1",children:f.isPending?n.jsx(me,{className:"h-4 w-4 animate-spin"}):n.jsxs(n.Fragment,{children:[n.jsx(qt,{className:"h-4 w-4"}),a?"Update":"Create"]})}),n.jsx("button",{onClick:v,className:"btn btn-secondary",children:"Cancel"})]})]}),n.jsx("div",{className:"space-y-3",children:h==null?void 0:h.map(k=>n.jsxs("div",{className:`bg-white rounded-2xl shadow-card p-4 border ${k.is_scored?"border-green-300":"border-cream-200"}`,children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-cream-100 rounded-full flex items-center justify-center border border-cream-200",children:n.jsx("span",{className:"text-burgundy-500 font-bold",children:k.number})}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h3",{className:"text-neutral-800 font-medium",children:k.title||`Episode ${k.number}`}),k.is_finale&&n.jsx(kn,{className:"h-4 w-4 text-burgundy-500"}),k.is_scored&&n.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-600 text-xs rounded-full",children:"Scored"})]}),n.jsxs("p",{className:"text-neutral-500 text-sm",children:[C(k.air_date)," at ",S(k.air_date)]})]})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("button",{onClick:()=>j(k),className:"p-2 hover:bg-cream-100 rounded-xl transition-colors",children:n.jsx(Wv,{className:"h-4 w-4 text-neutral-500"})}),n.jsx("button",{onClick:()=>{confirm("Delete this episode?")&&x.mutate(k.id)},className:"p-2 hover:bg-red-50 rounded-xl transition-colors",children:n.jsx(Oc,{className:"h-4 w-4 text-red-500"})})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-neutral-500 mb-3",children:[n.jsxs("div",{children:["Picks Lock: ",C(k.picks_lock_at)," ",S(k.picks_lock_at)]}),n.jsxs("div",{children:["Results: ",C(k.results_posted_at)," ",S(k.results_posted_at)]})]}),k.is_scored?k.results_released_at?n.jsxs("div",{className:"flex items-center justify-center gap-2 text-green-600 text-sm py-2",children:[n.jsx(tt,{className:"h-4 w-4"}),n.jsxs("span",{children:["Results Released ",new Date(k.results_released_at).toLocaleDateString()]})]}):k.results_locked_at?n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsxs("div",{className:"flex items-center justify-center gap-2 text-amber-600 text-sm py-2",children:[n.jsx(Mn,{className:"h-4 w-4"}),n.jsx("span",{children:"Locked - releasing automatically"})]}),n.jsx("button",{onClick:()=>{confirm("Release results immediately? This will send spoiler-safe notifications to all users.")&&b.mutate(k.id)},disabled:b.isPending,className:"w-full bg-blue-50 hover:bg-blue-100 text-blue-600 py-2 rounded-xl text-sm font-medium flex items-center justify-center gap-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:b.isPending?n.jsxs(n.Fragment,{children:[n.jsx(me,{className:"h-4 w-4 animate-spin"}),n.jsx("span",{children:"Releasing..."})]}):n.jsxs(n.Fragment,{children:[n.jsx(Fu,{className:"h-4 w-4"}),n.jsx("span",{children:"Release Now"})]})})]}):n.jsx("button",{onClick:()=>{confirm("Lock results for release? They will be sent automatically within 15 minutes.")&&y.mutate(k.id)},disabled:y.isPending,className:"w-full bg-amber-50 hover:bg-amber-100 text-amber-600 py-2 rounded-xl text-sm font-medium flex items-center justify-center gap-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:y.isPending?n.jsxs(n.Fragment,{children:[n.jsx(me,{className:"h-4 w-4 animate-spin"}),n.jsx("span",{children:"Locking..."})]}):n.jsxs(n.Fragment,{children:[n.jsx(Mn,{className:"h-4 w-4"}),n.jsx("span",{children:"Lock Results for Release"})]})}):n.jsx(z,{to:`/admin/episodes/${k.id}/scoring`,className:"block w-full bg-burgundy-50 hover:bg-burgundy-100 text-burgundy-600 py-2 rounded-xl text-sm font-medium text-center transition-colors",children:"Enter Scores"})]},k.id))})]})]})}function kne(){const{session:e}=dt(),t=Et(),[r,s]=T.useState(""),[a,i]=T.useState("all"),[o,d]=T.useState("all"),[u,h]=T.useState("created"),[p,f]=T.useState(!1),[x,y]=T.useState(null),[b,w]=T.useState(null),{data:v,isLoading:j}=re({queryKey:["admin-leagues-enhanced",a,o,u],queryFn:async()=>{if(!(e!=null&&e.access_token))throw new Error("Not authenticated");const O=new URLSearchParams({limit:"100",sort:u});a!=="all"&&O.append("status",a),o==="paid"&&O.append("type","paid"),o==="free"&&O.append("type","free");const L=await Je(`/admin/leagues?${O.toString()}`,e.access_token);if(L.error)throw new Error(L.error);return L.data},enabled:!!(e!=null&&e.access_token)}),C=De({mutationFn:async O=>{if(!(e!=null&&e.access_token))throw new Error("Not authenticated");const L=await Je(`/admin/leagues/${O}`,e.access_token,{method:"DELETE"});if(L.error)throw new Error(L.error);return L.data},onSuccess:()=>{t.invalidateQueries({queryKey:["admin-leagues-enhanced"]}),w(null)}}),S=(v==null?void 0:v.leagues)||[],k=S.filter(O=>{var P,$;return!r||O.name.toLowerCase().includes(r.toLowerCase())||O.code.toLowerCase().includes(r.toLowerCase())||(($=(P=O.users)==null?void 0:P.display_name)==null?void 0:$.toLowerCase().includes(r.toLowerCase()))}).sort((O,L)=>{var $,B;let P=0;switch(u){case"name":P=O.name.localeCompare(L.name);break;case"members":P=(O.member_count||0)-(L.member_count||0);break;case"revenue":P=((($=O.revenue)==null?void 0:$.gross)||0)-(((B=L.revenue)==null?void 0:B.gross)||0);break;default:P=new Date(L.created_at).getTime()-new Date(O.created_at).getTime()}return p?P:-P}),R={total:S.length,active:S.filter(O=>O.status==="active").length,paid:S.filter(O=>O.entry_fee>0).length,totalRevenue:S.reduce((O,L)=>{var P;return O+(((P=L.revenue)==null?void 0:P.gross)||0)},0)},E=O=>{u===O?f(!p):(h(O),f(!1))},I=({field:O})=>u!==O?null:p?n.jsx(zs,{className:"h-4 w-4"}):n.jsx(un,{className:"h-4 w-4"}),M=O=>O>=70?"text-green-600 bg-green-100":O>=40?"text-yellow-600 bg-yellow-100":"text-red-600 bg-red-100";return j?n.jsxs(n.Fragment,{children:[n.jsx(ft,{}),n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center",children:n.jsx(me,{className:"h-8 w-8 text-burgundy-500 animate-spin"})})]}):n.jsxs(n.Fragment,{children:[n.jsx(ft,{}),n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 p-4 pb-24",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx(z,{to:"/admin",className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:n.jsx(st,{className:"h-5 w-5 text-neutral-600"})}),n.jsxs("div",{children:[n.jsxs("h1",{className:"text-2xl font-display font-bold text-neutral-800 flex items-center gap-2",children:[n.jsx($e,{className:"h-6 w-6 text-burgundy-500"}),"League Management"]}),n.jsxs("p",{className:"text-neutral-500",children:[R.total," total leagues"]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-6",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-card p-4 border border-cream-200",children:[n.jsx("p",{className:"text-2xl font-bold text-neutral-800",children:R.total}),n.jsx("p",{className:"text-xs text-neutral-500",children:"Total Leagues"})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-card p-4 border border-cream-200",children:[n.jsx("p",{className:"text-2xl font-bold text-green-600",children:R.active}),n.jsx("p",{className:"text-xs text-neutral-500",children:"Active"})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-card p-4 border border-cream-200",children:[n.jsx("p",{className:"text-2xl font-bold text-blue-600",children:R.paid}),n.jsx("p",{className:"text-xs text-neutral-500",children:"Paid Leagues"})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-card p-4 border border-cream-200",children:[n.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["$",R.totalRevenue.toFixed(2)]}),n.jsx("p",{className:"text-xs text-neutral-500",children:"Total Revenue"})]})]}),n.jsx("div",{className:"bg-white rounded-xl shadow-card p-4 border border-cream-200 mb-6",children:n.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[n.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[n.jsx(Oi,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-neutral-400"}),n.jsx("input",{type:"text",placeholder:"Search by name, code, or commissioner...",value:r,onChange:O=>s(O.target.value),className:"w-full pl-10 pr-4 py-2 border border-cream-200 rounded-lg focus:ring-2 focus:ring-burgundy-500"})]}),n.jsxs("select",{value:a,onChange:O=>i(O.target.value),className:"px-3 py-2 border border-cream-200 rounded-lg",children:[n.jsx("option",{value:"all",children:"All Status"}),n.jsx("option",{value:"forming",children:"Forming"}),n.jsx("option",{value:"drafting",children:"Drafting"}),n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"completed",children:"Completed"})]}),n.jsxs("select",{value:o,onChange:O=>d(O.target.value),className:"px-3 py-2 border border-cream-200 rounded-lg",children:[n.jsx("option",{value:"all",children:"All Types"}),n.jsx("option",{value:"paid",children:"Paid"}),n.jsx("option",{value:"free",children:"Free"})]})]})}),n.jsxs("div",{className:"bg-white rounded-xl shadow-card border border-cream-200 overflow-hidden",children:[n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-cream-50 border-b border-cream-200",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider cursor-pointer hover:bg-cream-100",onClick:()=>E("name"),children:n.jsxs("div",{className:"flex items-center gap-1",children:["League",n.jsx(I,{field:"name"})]})}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider cursor-pointer hover:bg-cream-100",onClick:()=>E("members"),children:n.jsxs("div",{className:"flex items-center gap-1",children:["Members",n.jsx(I,{field:"members"})]})}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider",children:"Picks"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider",children:"Status"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider cursor-pointer hover:bg-cream-100",onClick:()=>E("revenue"),children:n.jsxs("div",{className:"flex items-center gap-1",children:["Revenue",n.jsx(I,{field:"revenue"})]})}),n.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-neutral-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"divide-y divide-cream-100",children:k.map(O=>{var L,P,$,B,D,se,X,ee;return n.jsxs(n.Fragment,{children:[n.jsxs("tr",{className:"hover:bg-cream-50 transition-colors cursor-pointer",onClick:()=>y(x===O.id?null:O.id),children:[n.jsx("td",{className:"px-4 py-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[O.is_global&&n.jsx(Sa,{className:"h-4 w-4 text-burgundy-500"}),!O.is_public&&n.jsx(Mn,{className:"h-4 w-4 text-neutral-400"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-neutral-800",children:O.name}),n.jsxs("p",{className:"text-xs text-neutral-500",children:[(L=O.users)==null?void 0:L.display_name,"  ",O.code]})]})]})}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("span",{className:"text-neutral-800",children:[O.member_count,"/",O.max_players]})}),n.jsx("td",{className:"px-4 py-3",children:O.pick_stats&&n.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${M(O.pick_stats.percentage)}`,children:[O.pick_stats.percentage,"%"]})}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs ${O.status==="active"?"bg-green-100 text-green-600":O.status==="drafting"?"bg-amber-100 text-amber-600":O.status==="completed"?"bg-neutral-100 text-neutral-600":"bg-blue-100 text-blue-600"}`,children:O.status}),O.entry_fee>0&&n.jsxs("span",{className:"px-2 py-0.5 rounded-full text-xs bg-green-100 text-green-600",children:["$",O.entry_fee]})]})}),n.jsx("td",{className:"px-4 py-3",children:O.entry_fee>0?n.jsxs("div",{children:[n.jsxs("p",{className:"text-green-600 font-medium",children:["$",(($=(P=O.revenue)==null?void 0:P.gross)==null?void 0:$.toFixed(2))||"0.00"]}),n.jsxs("p",{className:"text-xs text-neutral-500",children:["Net: $",((D=(B=O.revenue)==null?void 0:B.net)==null?void 0:D.toFixed(2))||"0.00"]})]}):n.jsx("span",{className:"text-neutral-400",children:"-"})}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("div",{className:"flex items-center justify-end gap-1",children:[n.jsx(z,{to:`/leagues/${O.id}`,onClick:F=>F.stopPropagation(),className:"p-1.5 text-neutral-400 hover:text-burgundy-500 hover:bg-cream-100 rounded",title:"View",children:n.jsx(Ei,{className:"h-4 w-4"})}),n.jsxs("div",{className:"relative",children:[n.jsx("button",{onClick:F=>{F.stopPropagation(),w(b===O.id?null:O.id)},className:"p-1.5 text-neutral-400 hover:text-neutral-600 hover:bg-cream-100 rounded",children:n.jsx(RJ,{className:"h-4 w-4"})}),b===O.id&&n.jsxs("div",{className:"absolute right-0 top-full mt-1 bg-white border border-cream-200 rounded-lg shadow-lg z-10 min-w-[160px]",children:[n.jsxs("button",{onClick:F=>{var Q;F.stopPropagation(),window.location.href=`mailto:${(Q=O.users)==null?void 0:Q.email}`,w(null)},className:"w-full px-3 py-2 text-left text-sm hover:bg-cream-50 flex items-center gap-2",children:[n.jsx(xr,{className:"h-4 w-4"})," Message Commissioner"]}),n.jsxs("button",{onClick:F=>{F.stopPropagation(),confirm(`Delete "${O.name}"? This cannot be undone.`)&&C.mutate(O.id)},className:"w-full px-3 py-2 text-left text-sm text-red-600 hover:bg-red-50 flex items-center gap-2",children:[n.jsx(Oc,{className:"h-4 w-4"})," Delete League"]})]})]})]})})]},O.id),x===O.id&&n.jsx("tr",{children:n.jsxs("td",{colSpan:6,className:"px-4 py-4 bg-cream-50",children:[n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-neutral-500 uppercase",children:"Commissioner"}),n.jsx("p",{className:"font-medium text-neutral-800",children:(se=O.users)==null?void 0:se.display_name}),n.jsx("p",{className:"text-xs text-neutral-500",children:(X=O.users)==null?void 0:X.email})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-neutral-500 uppercase",children:"Code"}),n.jsx("p",{className:"font-mono text-burgundy-500",children:O.code})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-neutral-500 uppercase",children:"Season"}),n.jsx("p",{className:"text-neutral-800",children:((ee=O.seasons)==null?void 0:ee.name)||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-neutral-500 uppercase",children:"Created"}),n.jsx("p",{className:"text-neutral-800",children:new Date(O.created_at).toLocaleDateString()})]})]}),O.entry_fee>0&&O.revenue&&n.jsxs("div",{className:"mt-4 p-3 bg-white rounded-lg border border-cream-200",children:[n.jsx("p",{className:"text-xs text-neutral-500 uppercase mb-2",children:"Revenue Breakdown"}),n.jsxs("div",{className:"grid grid-cols-4 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-neutral-500",children:"Gross"}),n.jsxs("p",{className:"font-medium text-neutral-800",children:["$",O.revenue.gross.toFixed(2)]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-neutral-500",children:"Stripe Fee"}),n.jsxs("p",{className:"font-medium text-red-600",children:["-$",(O.revenue.gross*.029+.3).toFixed(2)]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-neutral-500",children:"RGFL Fee (7%)"}),n.jsxs("p",{className:"font-medium text-orange-600",children:["-$",(O.revenue.gross*.07).toFixed(2)]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-neutral-500",children:"Net to League"}),n.jsxs("p",{className:"font-medium text-green-600",children:["$",O.revenue.net.toFixed(2)]})]})]})]})]})},`${O.id}-expanded`)]})})})]})}),k.length===0&&n.jsxs("div",{className:"text-center py-12",children:[n.jsx($e,{className:"h-12 w-12 text-neutral-300 mx-auto mb-4"}),n.jsx("p",{className:"text-neutral-500",children:"No leagues found matching your filters."})]})]})]})]})}function Ene(){const e=Et(),{session:t}=dt(),[r,s]=T.useState(""),[a,i]=T.useState("all"),[o,d]=T.useState("all"),[u,h]=T.useState("all"),[p,f]=T.useState(!0),[x,y]=T.useState(null),[b,w]=T.useState(!1),[v,j]=T.useState(null),{data:C,isLoading:S,error:k}=re({queryKey:["admin-users-enhanced",o,u],queryFn:async()=>{if(!(t!=null&&t.access_token))throw new Error("Not authenticated");const D=new URLSearchParams({limit:"1000"});o!=="all"&&D.append("segment",o),u!=="all"&&D.append("status",u);const se=await Je(`/admin/users?${D.toString()}`,t.access_token);if(se.error)throw new Error(se.error);return se.data},enabled:!!(t!=null&&t.access_token)}),R=De({mutationFn:async D=>{if(!(t!=null&&t.access_token))throw new Error("Not authenticated");const se=await Je(`/admin/users/${D}/impersonate`,t.access_token,{method:"POST"});if(se.error)throw new Error(se.error);return se.data},onSuccess:D=>{D!=null&&D.impersonationUrl&&window.open(D.impersonationUrl,"_blank"),w(!1)},onError:D=>{j(D.message)}}),E=De({mutationFn:async({userId:D,role:se})=>{if(!(t!=null&&t.access_token))throw new Error("Not authenticated");const X=await Je(`/admin/users/${D}`,t.access_token,{method:"PATCH",body:JSON.stringify({role:se})});if(X.error)throw new Error(X.error);return X.data},onSuccess:()=>{e.invalidateQueries({queryKey:["admin-users-enhanced"]})},onError:D=>{j(D.message)}}),I=De({mutationFn:async D=>{if(!(t!=null&&t.access_token))throw new Error("Not authenticated");const se=await Je(`/admin/users/${D}/reset-password`,t.access_token,{method:"POST"});if(se.error)throw new Error(se.error);return se.data},onSuccess:()=>{j(null),alert("Password reset email sent")},onError:D=>{j(D.message)}}),M=(C==null?void 0:C.users)||[],O=M.filter(D=>{var ee,F,Q,J,U;if(p&&(((ee=D.display_name)==null?void 0:ee.toLowerCase().includes("test"))||((F=D.email)==null?void 0:F.toLowerCase().includes("test"))||((Q=D.display_name)==null?void 0:Q.match(/^user\d+$/i))))return!1;const se=!r||((J=D.display_name)==null?void 0:J.toLowerCase().includes(r.toLowerCase()))||((U=D.email)==null?void 0:U.toLowerCase().includes(r.toLowerCase())),X=a==="all"||D.role===a;return se&&X}),L={total:M.length,power:M.filter(D=>D.segment==="power").length,casual:M.filter(D=>D.segment==="casual").length,dormant:M.filter(D=>D.segment==="dormant").length,churned:M.filter(D=>D.segment==="churned").length,new:M.filter(D=>D.segment==="new").length,healthy:M.filter(D=>D.health==="healthy").length,warning:M.filter(D=>D.health==="warning").length,critical:M.filter(D=>D.health==="critical").length},P=D=>{switch(D){case"power":return n.jsxs("span",{className:"px-2 py-0.5 rounded-full text-xs bg-green-100 text-green-700 flex items-center gap-1",children:[n.jsx(Zr,{className:"h-3 w-3"})," Power"]});case"casual":return n.jsxs("span",{className:"px-2 py-0.5 rounded-full text-xs bg-blue-100 text-blue-700 flex items-center gap-1",children:[n.jsx(Pr,{className:"h-3 w-3"})," Casual"]});case"dormant":return n.jsxs("span",{className:"px-2 py-0.5 rounded-full text-xs bg-yellow-100 text-yellow-700 flex items-center gap-1",children:[n.jsx(Mt,{className:"h-3 w-3"})," Dormant"]});case"churned":return n.jsxs("span",{className:"px-2 py-0.5 rounded-full text-xs bg-red-100 text-red-700 flex items-center gap-1",children:[n.jsx(Lc,{className:"h-3 w-3"})," Churned"]});default:return n.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs bg-neutral-100 text-neutral-600",children:"New"})}},$=D=>{switch(D){case"healthy":return n.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500",title:"Active"});case"warning":return n.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-500",title:"3-7 days inactive"});case"critical":return n.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500",title:"7+ days inactive"});default:return n.jsx("div",{className:"w-2 h-2 rounded-full bg-neutral-300"})}},B=D=>{switch(D){case"admin":return n.jsx(h2,{className:"h-4 w-4 text-red-500"});case"commissioner":return n.jsx(m2,{className:"h-4 w-4 text-burgundy-500"});default:return n.jsx(_s,{className:"h-4 w-4 text-neutral-400"})}};return k?n.jsxs(n.Fragment,{children:[n.jsx(ft,{}),n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-8 border border-red-200 text-center max-w-md",children:[n.jsx(at,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),n.jsx("h2",{className:"text-xl font-bold text-neutral-800 mb-2",children:"Access Denied"}),n.jsx("p",{className:"text-neutral-600 mb-4",children:k instanceof Error?k.message:"You do not have permission."}),n.jsx(z,{to:"/admin",className:"inline-block px-4 py-2 bg-burgundy-500 text-white rounded-lg hover:bg-burgundy-600",children:"Back to Admin"})]})})]}):n.jsxs(n.Fragment,{children:[n.jsx(ft,{}),n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 p-4 pb-24",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx(z,{to:"/admin",className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:n.jsx(st,{className:"h-5 w-5 text-neutral-600"})}),n.jsxs("div",{children:[n.jsxs("h1",{className:"text-2xl font-display font-bold text-neutral-800 flex items-center gap-2",children:[n.jsx($e,{className:"h-6 w-6 text-burgundy-500"}),"User Management"]}),n.jsxs("p",{className:"text-neutral-500",children:[M.length," registered users"]})]})]}),v&&n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 mb-4 flex items-center gap-3",children:[n.jsx(at,{className:"h-5 w-5 text-red-500 flex-shrink-0"}),n.jsx("p",{className:"text-red-700",children:v}),n.jsx("button",{onClick:()=>j(null),className:"ml-auto text-red-500 hover:text-red-700",children:""})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-6",children:[n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-card border border-cream-200",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-neutral-500 text-sm",children:"Total Users"}),n.jsx($e,{className:"h-5 w-5 text-burgundy-500"})]}),n.jsx("p",{className:"text-2xl font-bold text-neutral-800 mt-1",children:L.total})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-card border border-cream-200",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-neutral-500 text-sm",children:"Power Users"}),n.jsx(Zr,{className:"h-5 w-5 text-green-500"})]}),n.jsx("p",{className:"text-2xl font-bold text-green-600 mt-1",children:L.power})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-card border border-cream-200",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-neutral-500 text-sm",children:"At Risk"}),n.jsx(kt,{className:"h-5 w-5 text-yellow-500"})]}),n.jsx("p",{className:"text-2xl font-bold text-yellow-600 mt-1",children:L.dormant+L.churned})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-card border border-cream-200",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-neutral-500 text-sm",children:"Active (24h)"}),n.jsx(iu,{className:"h-5 w-5 text-blue-500"})]}),n.jsx("p",{className:"text-2xl font-bold text-blue-600 mt-1",children:L.healthy})]})]}),n.jsx("div",{className:"bg-white rounded-xl p-4 shadow-card border border-cream-200 mb-6",children:n.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[n.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[n.jsx(Oi,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-neutral-400"}),n.jsx("input",{type:"text",placeholder:"Search by name or email...",value:r,onChange:D=>s(D.target.value),className:"w-full pl-10 pr-4 py-2 border border-cream-200 rounded-lg focus:ring-2 focus:ring-burgundy-500 focus:border-transparent"})]}),n.jsxs("select",{value:a,onChange:D=>i(D.target.value),className:"px-3 py-2 border border-cream-200 rounded-lg focus:ring-2 focus:ring-burgundy-500",children:[n.jsx("option",{value:"all",children:"All Roles"}),n.jsx("option",{value:"player",children:"Players"}),n.jsx("option",{value:"commissioner",children:"Commissioners"}),n.jsx("option",{value:"admin",children:"Admins"})]}),n.jsxs("select",{value:o,onChange:D=>d(D.target.value),className:"px-3 py-2 border border-cream-200 rounded-lg focus:ring-2 focus:ring-burgundy-500",children:[n.jsx("option",{value:"all",children:"All Segments"}),n.jsx("option",{value:"power",children:"Power Users"}),n.jsx("option",{value:"casual",children:"Casual"}),n.jsx("option",{value:"dormant",children:"Dormant"}),n.jsx("option",{value:"churned",children:"Churned"}),n.jsx("option",{value:"new",children:"New"})]}),n.jsxs("select",{value:u,onChange:D=>h(D.target.value),className:"px-3 py-2 border border-cream-200 rounded-lg focus:ring-2 focus:ring-burgundy-500",children:[n.jsx("option",{value:"all",children:"All Status"}),n.jsx("option",{value:"healthy",children:"Healthy"}),n.jsx("option",{value:"warning",children:"Warning"}),n.jsx("option",{value:"critical",children:"Critical"})]}),n.jsxs("label",{className:"flex items-center gap-2 text-sm text-neutral-600 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:p,onChange:D=>f(D.target.checked),className:"rounded border-cream-200"}),"Hide test accounts"]})]})}),S?n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx(me,{className:"h-8 w-8 text-burgundy-500 animate-spin"})}):n.jsxs("div",{className:"bg-white rounded-xl shadow-card border border-cream-200 overflow-hidden",children:[n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-cream-50 border-b border-cream-200",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider",children:"User"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider",children:"Segment"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider",children:"Role"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider",children:"Leagues"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider",children:"Picks"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider",children:"Last Active"}),n.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-neutral-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"divide-y divide-cream-100",children:O.map(D=>n.jsxs("tr",{className:"hover:bg-cream-50 transition-colors",children:[n.jsx("td",{className:"px-4 py-3",children:n.jsxs("div",{className:"flex items-center gap-3",children:[$(D.health),D.avatar_url?n.jsx("img",{src:D.avatar_url,alt:"",className:"w-8 h-8 rounded-full object-cover"}):n.jsx("div",{className:"w-8 h-8 bg-cream-100 rounded-full flex items-center justify-center",children:n.jsx($e,{className:"h-4 w-4 text-neutral-400"})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-neutral-800",children:D.display_name}),n.jsx("p",{className:"text-xs text-neutral-500",children:D.email})]})]})}),n.jsx("td",{className:"px-4 py-3",children:P(D.segment)}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("div",{className:"flex items-center gap-1",children:[B(D.role),n.jsx("span",{className:"text-sm text-neutral-600 capitalize",children:D.role})]})}),n.jsx("td",{className:"px-4 py-3 text-sm text-neutral-600",children:D.league_count||0}),n.jsx("td",{className:"px-4 py-3 text-sm text-neutral-600",children:D.pick_count||0}),n.jsx("td",{className:"px-4 py-3 text-sm text-neutral-500",children:D.last_active_at?new Date(D.last_active_at).toLocaleDateString():"Never"}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("div",{className:"flex items-center justify-end gap-1",children:[n.jsx("button",{onClick:()=>{y(D),w(!0)},className:"p-1.5 text-neutral-400 hover:text-burgundy-500 hover:bg-cream-100 rounded",title:"Impersonate",children:n.jsx(Ei,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>I.mutate(D.id),className:"p-1.5 text-neutral-400 hover:text-blue-500 hover:bg-cream-100 rounded",title:"Send Password Reset",children:n.jsx(eQ,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>{window.location.href=`mailto:${D.email}`},className:"p-1.5 text-neutral-400 hover:text-green-500 hover:bg-cream-100 rounded",title:"Send Email",children:n.jsx(xr,{className:"h-4 w-4"})}),n.jsxs("div",{className:"relative group",children:[n.jsx("button",{className:"p-1.5 text-neutral-400 hover:text-neutral-600 hover:bg-cream-100 rounded",children:n.jsx(_s,{className:"h-4 w-4"})}),n.jsxs("div",{className:"absolute right-0 top-full mt-1 bg-white border border-cream-200 rounded-lg shadow-lg z-10 hidden group-hover:block min-w-[140px]",children:[n.jsxs("button",{onClick:()=>E.mutate({userId:D.id,role:"player"}),className:"w-full px-3 py-2 text-left text-sm hover:bg-cream-50 flex items-center gap-2",children:[n.jsx(_s,{className:"h-4 w-4"})," Player"]}),n.jsxs("button",{onClick:()=>E.mutate({userId:D.id,role:"commissioner"}),className:"w-full px-3 py-2 text-left text-sm hover:bg-cream-50 flex items-center gap-2",children:[n.jsx(m2,{className:"h-4 w-4"})," Commissioner"]}),n.jsxs("button",{onClick:()=>E.mutate({userId:D.id,role:"admin"}),className:"w-full px-3 py-2 text-left text-sm hover:bg-cream-50 flex items-center gap-2",children:[n.jsx(h2,{className:"h-4 w-4"})," Admin"]})]})]})]})})]},D.id))})]})}),O.length===0&&n.jsxs("div",{className:"text-center py-12",children:[n.jsx($e,{className:"h-12 w-12 text-neutral-300 mx-auto mb-4"}),n.jsx("p",{className:"text-neutral-500",children:"No users found matching your filters."})]})]})]}),b&&x&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full p-6",children:[n.jsx("h3",{className:"text-xl font-bold text-neutral-800 mb-4",children:"Impersonate User"}),n.jsxs("p",{className:"text-neutral-600 mb-4",children:["You are about to log in as ",n.jsx("strong",{children:x.display_name})," (",x.email,"). This will open in a new tab."]}),n.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-4",children:n.jsxs("p",{className:"text-yellow-800 text-sm flex items-center gap-2",children:[n.jsx(kt,{className:"h-4 w-4"}),"Use with caution. All actions will be logged."]})}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:()=>w(!1),className:"flex-1 px-4 py-2 border border-cream-200 rounded-lg hover:bg-cream-50",children:"Cancel"}),n.jsxs("button",{onClick:()=>R.mutate(x.id),disabled:R.isPending,className:"flex-1 px-4 py-2 bg-burgundy-500 text-white rounded-lg hover:bg-burgundy-600 flex items-center justify-center gap-2",children:[R.isPending?n.jsx(me,{className:"h-4 w-4 animate-spin"}):n.jsx(k4,{className:"h-4 w-4"}),"Open as User"]})]})]})})]})}function Cne(){const e=Et(),[t,r]=T.useState(""),[s,a]=T.useState("all"),[i,o]=T.useState(null),{data:d,isLoading:u}=re({queryKey:["admin-payments"],queryFn:async()=>{const{data:b,error:w}=await K.from("payments").select("*, users(display_name, email), leagues(name)").order("created_at",{ascending:!1});if(w)throw w;return b||[]}}),h=De({mutationFn:async b=>{const{error:w}=await K.from("payments").update({status:"refunded",refunded_at:new Date().toISOString()}).eq("id",b);if(w)throw w},onSuccess:()=>{e.invalidateQueries({queryKey:["admin-payments"]}),o(null)}}),p=d==null?void 0:d.filter(b=>{var j,C,S,k,R,E,I;const w=((C=(j=b.users)==null?void 0:j.display_name)==null?void 0:C.toLowerCase().includes(t.toLowerCase()))||((k=(S=b.users)==null?void 0:S.email)==null?void 0:k.toLowerCase().includes(t.toLowerCase()))||((E=(R=b.leagues)==null?void 0:R.name)==null?void 0:E.toLowerCase().includes(t.toLowerCase()))||((I=b.stripe_payment_intent_id)==null?void 0:I.includes(t)),v=s==="all"||b.status===s;return w&&v}),f={total:(d==null?void 0:d.length)||0,completed:(d==null?void 0:d.filter(b=>b.status==="completed").length)||0,refunded:(d==null?void 0:d.filter(b=>b.status==="refunded").length)||0,pending:(d==null?void 0:d.filter(b=>b.status==="pending").length)||0,totalRevenue:(d==null?void 0:d.filter(b=>b.status==="completed").reduce((b,w)=>b+parseFloat(w.amount||0),0))||0,totalRefunded:(d==null?void 0:d.filter(b=>b.status==="refunded").reduce((b,w)=>b+parseFloat(w.amount||0),0))||0},x=b=>{switch(b){case"completed":return n.jsx(tt,{className:"h-4 w-4 text-green-500"});case"refunded":return n.jsx(Xr,{className:"h-4 w-4 text-amber-500"});case"failed":return n.jsx(Nn,{className:"h-4 w-4 text-red-500"});default:return n.jsx(at,{className:"h-4 w-4 text-neutral-400"})}},y=b=>{switch(b){case"completed":return"bg-green-100 text-green-600";case"refunded":return"bg-amber-100 text-amber-600";case"failed":return"bg-red-100 text-red-600";default:return"bg-neutral-100 text-neutral-600"}};return u?n.jsxs(n.Fragment,{children:[n.jsx(ft,{}),n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center",children:n.jsx(me,{className:"h-8 w-8 text-burgundy-500 animate-spin"})})]}):n.jsxs(n.Fragment,{children:[n.jsx(ft,{}),n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 p-4 pb-24",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx(z,{to:"/admin",className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:n.jsx(st,{className:"h-5 w-5 text-neutral-600"})}),n.jsxs("div",{children:[n.jsxs("h1",{className:"text-2xl font-display font-bold text-neutral-800 flex items-center gap-2",children:[n.jsx(ks,{className:"h-6 w-6 text-burgundy-500"}),"All Payments"]}),n.jsxs("p",{className:"text-neutral-500",children:[(d==null?void 0:d.length)||0," transactions"]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[n.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-2xl p-4",children:[n.jsx("p",{className:"text-green-600 text-sm mb-1",children:"Total Revenue"}),n.jsxs("p",{className:"text-2xl font-bold text-green-700",children:["$",f.totalRevenue.toFixed(2)]}),n.jsxs("p",{className:"text-green-500 text-sm",children:[f.completed," payments"]})]}),n.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-2xl p-4",children:[n.jsx("p",{className:"text-amber-600 text-sm mb-1",children:"Total Refunded"}),n.jsxs("p",{className:"text-2xl font-bold text-amber-700",children:["$",f.totalRefunded.toFixed(2)]}),n.jsxs("p",{className:"text-amber-500 text-sm",children:[f.refunded," refunds"]})]})]}),n.jsxs("div",{className:"grid grid-cols-4 gap-2 mb-6",children:[n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-3 border border-cream-200 text-center",children:[n.jsx("p",{className:"text-xl font-bold text-neutral-800",children:f.total}),n.jsx("p",{className:"text-neutral-500 text-xs",children:"Total"})]}),n.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-2xl p-3 text-center",children:[n.jsx("p",{className:"text-xl font-bold text-green-600",children:f.completed}),n.jsx("p",{className:"text-neutral-500 text-xs",children:"Completed"})]}),n.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-2xl p-3 text-center",children:[n.jsx("p",{className:"text-xl font-bold text-amber-600",children:f.refunded}),n.jsx("p",{className:"text-neutral-500 text-xs",children:"Refunded"})]}),n.jsxs("div",{className:"bg-neutral-50 border border-neutral-200 rounded-2xl p-3 text-center",children:[n.jsx("p",{className:"text-xl font-bold text-neutral-600",children:f.pending}),n.jsx("p",{className:"text-neutral-500 text-xs",children:"Pending"})]})]}),n.jsxs("div",{className:"flex gap-2 mb-6",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx(Oi,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-neutral-400"}),n.jsx("input",{type:"text",value:t,onChange:b=>r(b.target.value),placeholder:"Search payments...",className:"input pl-10"})]}),n.jsxs("select",{value:s,onChange:b=>a(b.target.value),className:"input px-3 py-2 w-36",children:[n.jsx("option",{value:"all",children:"All Status"}),n.jsx("option",{value:"completed",children:"Completed"}),n.jsx("option",{value:"pending",children:"Pending"}),n.jsx("option",{value:"refunded",children:"Refunded"}),n.jsx("option",{value:"failed",children:"Failed"})]})]}),n.jsxs("div",{className:"space-y-3",children:[p==null?void 0:p.map(b=>{var w,v,j;return n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-4 border border-cream-200",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-neutral-800 font-medium",children:(w=b.users)==null?void 0:w.display_name}),n.jsx("p",{className:"text-neutral-500 text-sm",children:(v=b.users)==null?void 0:v.email})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("p",{className:"text-xl font-bold text-neutral-800",children:["$",parseFloat(b.amount).toFixed(2)]}),n.jsxs("span",{className:`px-2 py-0.5 rounded-full text-xs inline-flex items-center gap-1 ${y(b.status)}`,children:[x(b.status),b.status]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm text-neutral-500 mb-3",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-neutral-400",children:"League:"})," ",n.jsx("span",{children:(j=b.leagues)==null?void 0:j.name})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-neutral-400",children:"Date:"})," ",n.jsx("span",{children:new Date(b.created_at).toLocaleDateString()})]}),b.stripe_payment_intent_id&&n.jsxs("div",{className:"col-span-2",children:[n.jsx("span",{className:"text-neutral-400",children:"Stripe ID:"})," ",n.jsx("span",{className:"font-mono text-xs",children:b.stripe_payment_intent_id})]})]}),b.status==="completed"&&n.jsx("div",{className:"flex gap-2",children:i===b.id?n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>h.mutate(b.id),disabled:h.isPending,className:"btn flex-1 bg-red-100 text-red-600 hover:bg-red-200",children:h.isPending?n.jsx(me,{className:"h-4 w-4 animate-spin"}):"Confirm Refund"}),n.jsx("button",{onClick:()=>o(null),className:"btn btn-secondary px-4",children:"Cancel"})]}):n.jsxs("button",{onClick:()=>o(b.id),className:"btn btn-secondary flex-1",children:[n.jsx(Xr,{className:"h-4 w-4"}),"Issue Refund"]})}),b.status==="refunded"&&b.refunded_at&&n.jsxs("p",{className:"text-amber-600 text-sm",children:["Refunded on ",new Date(b.refunded_at).toLocaleDateString()]})]},b.id)}),(p==null?void 0:p.length)===0&&n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-8 border border-cream-200 text-center",children:[n.jsx(zb,{className:"h-12 w-12 text-neutral-400 mx-auto mb-4"}),n.jsx("p",{className:"text-neutral-500",children:"No payments found."})]})]})]})]})}const Tne={"draft-finalize":{description:"Auto-complete incomplete drafts",schedule:"One-time (from database)"},"lock-picks":{description:"Lock all pending weekly picks when episode airs",schedule:"Wed 5pm PST (weekly)"},"auto-pick":{description:"Fill missing picks with auto-select",schedule:"Wed 5:05pm PST (weekly)"},"pick-reminders":{description:"Send pick reminder notifications (3 hours before lock)",schedule:"Wed 2pm PST (weekly)"},"results-notification":{description:"Send scoring results to players (morning after episode)",schedule:"Thu 10am PST (weekly)"},"weekly-summary":{description:"Send weekly standings summary",schedule:"Sun 10am PST (weekly)"},"draft-reminders":{description:"Send draft reminder notifications",schedule:"Daily 9am PST"},"release-results":{description:"Release spoiler-safe results (checks for finalized episodes)",schedule:"Every 10 minutes"},"email-queue-processor":{description:"Process pending emails from queue",schedule:"Every 5 minutes"},"nurture-trivia-completers":{description:"Send nurture emails to trivia completers",schedule:"Daily 11am PST"}},Rne=Object.entries(Tne).map(([e,t])=>({name:e,description:t.description,schedule:t.schedule,lastRun:null,nextRun:null,status:"pending",enabled:!0}));function Ine(){Et();const[e,t]=T.useState(null),[r,s]=T.useState({}),[a,i]=T.useState(new Set),{data:o,isLoading:d,refetch:u}=re({queryKey:["admin-jobs"],queryFn:async()=>{var j;const{data:{session:w}}=await K.auth.getSession();if(!w)throw new Error("Not authenticated");const v=await Je("/admin/jobs",w.access_token);if(v.error)throw new Error(v.error);return((j=v.data)==null?void 0:j.jobs)||[]}}),h=Rne.map(w=>{const v=o==null?void 0:o.find(S=>S.name===w.name),j=r[w.name],C=a.has(w.name);return{...w,lastRun:(j==null?void 0:j.lastRun)||(v==null?void 0:v.lastRun)||w.lastRun,nextRun:(v==null?void 0:v.nextRun)||w.nextRun,status:e===w.name?"running":(j==null?void 0:j.status)||(v==null?void 0:v.status)||w.status,enabled:!C&&((v==null?void 0:v.enabled)??w.enabled)}}),p=De({mutationFn:async w=>{const{data:{session:v}}=await K.auth.getSession();if(!v)throw new Error("Not authenticated");const j=await Je(`/admin/jobs/${w}/run`,v.access_token,{method:"POST"});if(j.error)throw new Error(j.error);return j.data},onMutate:w=>{t(w)},onSuccess:(w,v)=>{s(j=>({...j,[v]:{status:"success",lastRun:new Date().toISOString(),message:w.result?JSON.stringify(w.result):void 0}})),t(null),u()},onError:(w,v)=>{s(j=>({...j,[v]:{status:"failed",lastRun:new Date().toISOString(),message:w.message}})),t(null)}}),f=w=>{i(v=>{const j=new Set(v);return j.has(w)?j.delete(w):j.add(w),j})},x=w=>{switch(w){case"success":return n.jsx(tt,{className:"h-5 w-5 text-green-500"});case"failed":return n.jsx(Nn,{className:"h-5 w-5 text-red-500"});case"running":return n.jsx(me,{className:"h-5 w-5 text-burgundy-500 animate-spin"});default:return n.jsx(Mt,{className:"h-5 w-5 text-neutral-400"})}},y=w=>{switch(w){case"success":return"bg-green-100 text-green-600";case"failed":return"bg-red-100 text-red-600";case"running":return"bg-burgundy-100 text-burgundy-600";default:return"bg-neutral-100 text-neutral-600"}},b={total:h.length,enabled:h.filter(w=>w.enabled).length,success:h.filter(w=>w.status==="success").length,failed:h.filter(w=>w.status==="failed").length};return n.jsxs(n.Fragment,{children:[n.jsx(ft,{}),n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 p-4 pb-24",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx(z,{to:"/admin",className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:n.jsx(st,{className:"h-5 w-5 text-neutral-600"})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("h1",{className:"text-2xl font-display font-bold text-neutral-800 flex items-center gap-2",children:[n.jsx(Zr,{className:"h-6 w-6 text-burgundy-500"}),"System Jobs"]}),n.jsxs("p",{className:"text-neutral-500",children:[h.length," scheduled jobs"]})]}),n.jsx("button",{onClick:()=>u(),disabled:d,className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:n.jsx(Xr,{className:`h-5 w-5 text-neutral-600 ${d?"animate-spin":""}`})})]}),n.jsxs("div",{className:"grid grid-cols-4 gap-2 mb-6",children:[n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-3 border border-cream-200 text-center",children:[n.jsx("p",{className:"text-xl font-bold text-neutral-800",children:b.total}),n.jsx("p",{className:"text-neutral-500 text-xs",children:"Total"})]}),n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-2xl p-3 text-center",children:[n.jsx("p",{className:"text-xl font-bold text-blue-600",children:b.enabled}),n.jsx("p",{className:"text-neutral-500 text-xs",children:"Enabled"})]}),n.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-2xl p-3 text-center",children:[n.jsx("p",{className:"text-xl font-bold text-green-600",children:b.success}),n.jsx("p",{className:"text-neutral-500 text-xs",children:"Success"})]}),n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-3 text-center",children:[n.jsx("p",{className:"text-xl font-bold text-red-600",children:b.failed}),n.jsx("p",{className:"text-neutral-500 text-xs",children:"Failed"})]})]}),n.jsx("div",{className:"space-y-3",children:h.map(w=>{var v;return n.jsxs("div",{className:`bg-white rounded-2xl shadow-card p-4 border transition-opacity ${w.enabled?"border-cream-200":"border-cream-100 opacity-50"}`,children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[x(e===w.name?"running":w.status),n.jsxs("div",{children:[n.jsx("h3",{className:"text-neutral-800 font-medium font-mono",children:w.name}),n.jsx("p",{className:"text-neutral-500 text-sm",children:w.description})]})]}),n.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs ${y(e===w.name?"running":w.status)}`,children:e===w.name?"running":w.status})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm text-neutral-500 mb-3",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(er,{className:"h-4 w-4"}),n.jsx("span",{children:w.schedule})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Xr,{className:"h-4 w-4"}),n.jsxs("span",{children:["Last:"," ",w.lastRun?new Date(w.lastRun).toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"}):"Never"]})]})]}),((v=r[w.name])==null?void 0:v.message)&&n.jsxs("div",{className:`text-xs p-2 rounded-lg mb-3 ${r[w.name].status==="success"?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:[r[w.name].status==="success"?" ":" ",r[w.name].message]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>p.mutate(w.name),disabled:e===w.name||!w.enabled,className:"btn btn-primary flex-1 disabled:opacity-50 disabled:cursor-not-allowed",children:e===w.name?n.jsxs(n.Fragment,{children:[n.jsx(me,{className:"h-4 w-4 animate-spin"}),"Running..."]}):n.jsxs(n.Fragment,{children:[n.jsx(T4,{className:"h-4 w-4"}),"Run Now"]})}),n.jsx("button",{onClick:()=>f(w.name),className:`btn ${w.enabled?"btn-secondary":"bg-green-100 text-green-600 hover:bg-green-200"} px-4`,children:w.enabled?"Disable":"Enable"})]})]},w.name)})}),n.jsx("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-2xl p-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(at,{className:"h-5 w-5 text-blue-500 flex-shrink-0 mt-0.5"}),n.jsxs("div",{className:"text-sm text-blue-800",children:[n.jsx("p",{className:"font-medium mb-1",children:"About System Jobs"}),n.jsx("p",{className:"text-blue-600",children:"Jobs are scheduled using Supabase pg_cron. Manual runs are useful for testing or recovering from failures. All times are in PST."})]})]})})]})]})}function Pne(){var o,d;const{data:e,isLoading:t}=re({queryKey:["global-league"],queryFn:async()=>{const{data:u,error:h}=await K.from("leagues").select("*, seasons(*)").eq("is_global",!0).single();if(h&&h.code!=="PGRST116")throw h;return u}}),{data:r,isLoading:s}=re({queryKey:["global-standings",e==null?void 0:e.id],queryFn:async()=>{if(!(e!=null&&e.id))throw new Error("No global league");const{data:u,error:h}=await K.from("league_members").select("*, users(display_name, avatar_url)").eq("league_id",e.id).order("total_points",{ascending:!1}).limit(100);if(h)throw h;return u||[]},enabled:!!(e!=null&&e.id)}),{data:a}=re({queryKey:["global-stats",e==null?void 0:e.id],queryFn:async()=>{var x;if(!(e!=null&&e.id))throw new Error("No global league");const{count:u}=await K.from("league_members").select("*",{count:"exact",head:!0}).eq("league_id",e.id),{data:h}=await K.from("league_members").select("total_points, users(display_name)").eq("league_id",e.id).order("total_points",{ascending:!1}).limit(1).single(),{data:p}=await K.from("league_members").select("total_points").eq("league_id",e.id),f=p!=null&&p.length?p.reduce((y,b)=>y+(b.total_points||0),0)/p.length:0;return{totalPlayers:u||0,topScore:(h==null?void 0:h.total_points)||0,topScorer:((x=h==null?void 0:h.users)==null?void 0:x.display_name)||"N/A",averageScore:Math.round(f)}},enabled:!!(e!=null&&e.id)});return t||s?n.jsxs(n.Fragment,{children:[n.jsx(ft,{}),n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center",children:n.jsx(me,{className:"h-8 w-8 text-burgundy-500 animate-spin"})})]}):e?n.jsxs(n.Fragment,{children:[n.jsx(ft,{}),n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 p-4 pb-24",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx(z,{to:"/admin",className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:n.jsx(st,{className:"h-5 w-5 text-neutral-600"})}),n.jsxs("div",{children:[n.jsxs("h1",{className:"text-2xl font-display font-bold text-neutral-800 flex items-center gap-2",children:[n.jsx(Sa,{className:"h-6 w-6 text-burgundy-500"}),"Global League"]}),n.jsxs("p",{className:"text-neutral-500",children:["Season ",(o=e.seasons)==null?void 0:o.number,": ",(d=e.seasons)==null?void 0:d.name]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[n.jsxs("div",{className:"bg-burgundy-50 border border-burgundy-200 rounded-2xl p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx($e,{className:"h-5 w-5 text-burgundy-500"}),n.jsx("span",{className:"text-burgundy-600 text-sm",children:"Total Players"})]}),n.jsx("p",{className:"text-3xl font-bold text-neutral-800",children:(a==null?void 0:a.totalPlayers)||0})]}),n.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-2xl p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Pr,{className:"h-5 w-5 text-green-500"}),n.jsx("span",{className:"text-green-600 text-sm",children:"Average Score"})]}),n.jsx("p",{className:"text-3xl font-bold text-neutral-800",children:(a==null?void 0:a.averageScore)||0})]})]}),n.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-amber-100 border border-amber-200 rounded-2xl p-4 mb-6",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-16 h-16 bg-amber-200 rounded-full flex items-center justify-center",children:n.jsx(tr,{className:"h-8 w-8 text-amber-600"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-amber-700 text-sm",children:"Current Leader"}),n.jsx("p",{className:"text-2xl font-bold text-neutral-800",children:a==null?void 0:a.topScorer}),n.jsxs("p",{className:"text-amber-600 font-medium",children:[a==null?void 0:a.topScore," points"]})]}),n.jsx(kn,{className:"h-8 w-8 text-amber-500"})]})}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200",children:[n.jsx("div",{className:"px-4 py-3 border-b border-cream-200 flex items-center justify-between",children:n.jsxs("h2",{className:"text-lg font-display font-bold text-neutral-800 flex items-center gap-2",children:[n.jsx(Ke,{className:"h-5 w-5 text-burgundy-500"}),"Top 100 Global Rankings"]})}),n.jsx("div",{className:"divide-y divide-cream-100",children:r==null?void 0:r.map((u,h)=>{var p,f;return n.jsxs("div",{className:`flex items-center gap-3 px-4 py-3 ${h<3?"bg-amber-50":""}`,children:[n.jsx("div",{className:"w-8 h-8 flex items-center justify-center",children:h===0?n.jsx("span",{className:"text-2xl",children:""}):h===1?n.jsx("span",{className:"text-2xl",children:""}):h===2?n.jsx("span",{className:"text-2xl",children:""}):n.jsx("span",{className:`font-bold ${h<10?"text-burgundy-500":"text-neutral-400"}`,children:h+1})}),(p=u.users)!=null&&p.avatar_url?n.jsx("img",{src:u.users.avatar_url,alt:"",className:"w-8 h-8 rounded-full object-cover"}):n.jsx("div",{className:"w-8 h-8 bg-cream-100 rounded-full flex items-center justify-center border border-cream-200",children:n.jsx($e,{className:"h-4 w-4 text-neutral-400"})}),n.jsx("div",{className:"flex-1 min-w-0",children:n.jsx("p",{className:"text-neutral-800 font-medium truncate",children:(f=u.users)==null?void 0:f.display_name})}),n.jsx("p",{className:`font-bold ${h===0?"text-amber-600 text-lg":h<3?"text-amber-600":"text-neutral-800"}`,children:u.total_points||0})]},u.id)})}),(!r||r.length===0)&&n.jsxs("div",{className:"p-8 text-center",children:[n.jsx(fr,{className:"h-12 w-12 text-neutral-400 mx-auto mb-4"}),n.jsx("p",{className:"text-neutral-500",children:"No rankings yet. Scoring will begin after the premiere."})]})]}),n.jsxs("div",{className:"mt-6 bg-white rounded-2xl shadow-card p-4 border border-cream-200",children:[n.jsx("h3",{className:"text-neutral-800 font-medium mb-3",children:"League Details"}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-neutral-400",children:"Code:"})," ",n.jsx("span",{className:"text-neutral-800 font-mono",children:e.code})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-neutral-400",children:"Status:"})," ",n.jsx("span",{className:"text-neutral-800",children:e.status})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-neutral-400",children:"Created:"})," ",n.jsx("span",{className:"text-neutral-800",children:e.created_at?new Date(e.created_at).toLocaleDateString():"N/A"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-neutral-400",children:"Max Players:"})," ",n.jsx("span",{className:"text-neutral-800",children:e.max_players})]})]})]})]})]}):n.jsxs(n.Fragment,{children:[n.jsx(ft,{}),n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 p-4 pb-24",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx(z,{to:"/admin",className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:n.jsx(st,{className:"h-5 w-5 text-neutral-600"})}),n.jsx("h1",{className:"text-2xl font-display font-bold text-neutral-800",children:"Global League"})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-8 border border-cream-200 text-center",children:[n.jsx(Sa,{className:"h-16 w-16 text-neutral-400 mx-auto mb-4"}),n.jsx("h2",{className:"text-xl font-display font-bold text-neutral-800 mb-2",children:"No Global League Found"}),n.jsx("p",{className:"text-neutral-500 mb-6",children:"Create a global league to enable cross-league rankings."}),n.jsx("button",{className:"btn btn-primary",children:"Create Global League"})]})]})]})}const J4=[{value:"low",label:"Low",color:"bg-green-100 text-green-700 border-green-200"},{value:"medium",label:"Medium",color:"bg-blue-100 text-blue-700 border-blue-200"},{value:"high",label:"High",color:"bg-amber-100 text-amber-700 border-amber-200"},{value:"urgent",label:"Urgent",color:"bg-red-100 text-red-700 border-red-200"}],Ane=e=>{const t=J4.find(r=>r.value===e);return(t==null?void 0:t.color)||"bg-gray-100 text-gray-700"},Mne=e=>{switch(e){case"urgent":return n.jsx(kt,{className:"h-4 w-4"});case"high":return n.jsx(bc,{className:"h-4 w-4"});case"medium":return n.jsx(Du,{className:"h-4 w-4"});default:return n.jsx(Rp,{className:"h-4 w-4"})}};function One(){const e=Et(),{session:t}=dt(),[r,s]=T.useState(!1),[a,i]=T.useState(null),[o,d]=T.useState(null),[u,h]=T.useState({title:"",content:"",priority:"medium",is_active:!0,expires_at:""}),{data:p,isLoading:f}=re({queryKey:["admin-announcements"],queryFn:async()=>{if(!(t!=null&&t.access_token))throw new Error("Not authenticated");const E=await Je("/admin/announcements",t.access_token);if(E.error)throw new Error(E.error);return E.data},enabled:!!(t!=null&&t.access_token)}),x=De({mutationFn:async E=>{if(!(t!=null&&t.access_token))throw new Error("Not authenticated");const I=await Je("/admin/announcements",t.access_token,{method:"POST",body:JSON.stringify({...E,expires_at:E.expires_at||null})});if(I.error)throw new Error(I.error);return I.data},onSuccess:()=>{e.invalidateQueries({queryKey:["admin-announcements"]}),e.invalidateQueries({queryKey:["announcements"]}),s(!1),v()},onError:E=>d(E.message)}),y=De({mutationFn:async({id:E,data:I})=>{if(!(t!=null&&t.access_token))throw new Error("Not authenticated");const M=await Je(`/admin/announcements/${E}`,t.access_token,{method:"PATCH",body:JSON.stringify({...I,expires_at:I.expires_at||null})});if(M.error)throw new Error(M.error);return M.data},onSuccess:()=>{e.invalidateQueries({queryKey:["admin-announcements"]}),e.invalidateQueries({queryKey:["announcements"]}),i(null),v()},onError:E=>d(E.message)}),b=De({mutationFn:async E=>{if(!(t!=null&&t.access_token))throw new Error("Not authenticated");const I=await Je(`/admin/announcements/${E}/toggle`,t.access_token,{method:"POST"});if(I.error)throw new Error(I.error);return I.data},onSuccess:()=>{e.invalidateQueries({queryKey:["admin-announcements"]}),e.invalidateQueries({queryKey:["announcements"]})},onError:E=>d(E.message)}),w=De({mutationFn:async E=>{if(!(t!=null&&t.access_token))throw new Error("Not authenticated");const I=await Je(`/admin/announcements/${E}`,t.access_token,{method:"DELETE"});if(I.error)throw new Error(I.error);return I.data},onSuccess:()=>{e.invalidateQueries({queryKey:["admin-announcements"]}),e.invalidateQueries({queryKey:["announcements"]})},onError:E=>d(E.message)}),v=()=>{h({title:"",content:"",priority:"medium",is_active:!0,expires_at:""})},j=E=>{i(E.id),h({title:E.title,content:E.content,priority:E.priority,is_active:E.is_active,expires_at:E.expires_at?w2(new Date(E.expires_at),"yyyy-MM-dd'T'HH:mm"):""})},C=E=>{if(E.preventDefault(),d(null),!u.title.trim()||!u.content.trim()){d("Title and content are required");return}a?y.mutate({id:a,data:u}):x.mutate(u)},S=(E,I)=>{confirm(`Are you sure you want to delete "${I}"?`)&&w.mutate(E)},k=(p==null?void 0:p.announcements)||[],R=k.filter(E=>E.is_active).length;return n.jsxs("div",{className:"min-h-screen bg-cream-50",children:[n.jsx(ft,{}),n.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-8",children:[n.jsxs("div",{className:"flex items-center justify-between mb-8",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(z,{to:"/admin",className:"p-2 hover:bg-cream-200 rounded-lg transition-colors",children:n.jsx(st,{className:"h-5 w-5 text-neutral-600"})}),n.jsxs("div",{children:[n.jsxs("h1",{className:"text-2xl font-display font-bold text-neutral-800 flex items-center gap-2",children:[n.jsx(bc,{className:"h-6 w-6 text-burgundy-500"}),"Announcements"]}),n.jsxs("p",{className:"text-neutral-500 text-sm",children:[k.length," total  ",R," active"]})]})]}),!r&&!a&&n.jsxs("button",{onClick:()=>s(!0),className:"btn btn-primary flex items-center gap-2",children:[n.jsx($o,{className:"h-4 w-4"}),"New Announcement"]})]}),o&&n.jsxs("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-xl p-4 flex items-center gap-3",children:[n.jsx(kt,{className:"h-5 w-5 text-red-500 flex-shrink-0"}),n.jsx("p",{className:"text-red-700",children:o}),n.jsx("button",{onClick:()=>d(null),className:"ml-auto text-red-500 hover:text-red-700",children:n.jsx(Sn,{className:"h-4 w-4"})})]}),(r||a)&&n.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 p-6 mb-8",children:[n.jsx("h2",{className:"font-display font-bold text-lg text-neutral-800 mb-4",children:a?"Edit Announcement":"New Announcement"}),n.jsxs("form",{onSubmit:C,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Title *"}),n.jsx("input",{type:"text",value:u.title,onChange:E=>h({...u,title:E.target.value}),className:"w-full px-4 py-2 border border-cream-200 rounded-lg focus:ring-2 focus:ring-burgundy-500 focus:border-burgundy-500",placeholder:"Announcement title..."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Content *"}),n.jsx("textarea",{value:u.content,onChange:E=>h({...u,content:E.target.value}),rows:3,className:"w-full px-4 py-2 border border-cream-200 rounded-lg focus:ring-2 focus:ring-burgundy-500 focus:border-burgundy-500",placeholder:"Announcement content..."})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Priority"}),n.jsx("select",{value:u.priority,onChange:E=>h({...u,priority:E.target.value}),className:"w-full px-4 py-2 border border-cream-200 rounded-lg focus:ring-2 focus:ring-burgundy-500 focus:border-burgundy-500",children:J4.map(E=>n.jsx("option",{value:E.value,children:E.label},E.value))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Expires At (optional)"}),n.jsx("input",{type:"datetime-local",value:u.expires_at,onChange:E=>h({...u,expires_at:E.target.value}),className:"w-full px-4 py-2 border border-cream-200 rounded-lg focus:ring-2 focus:ring-burgundy-500 focus:border-burgundy-500"})]}),n.jsx("div",{className:"flex items-end",children:n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:u.is_active,onChange:E=>h({...u,is_active:E.target.checked}),className:"w-4 h-4 text-burgundy-500 border-cream-300 rounded focus:ring-burgundy-500"}),n.jsx("span",{className:"text-sm text-neutral-700",children:"Active immediately"})]})})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsxs("button",{type:"submit",disabled:x.isPending||y.isPending,className:"btn btn-primary flex items-center gap-2",children:[x.isPending||y.isPending?n.jsx(me,{className:"h-4 w-4 animate-spin"}):n.jsx(Ci,{className:"h-4 w-4"}),a?"Update":"Create"]}),n.jsx("button",{type:"button",onClick:()=>{s(!1),i(null),v()},className:"btn btn-secondary",children:"Cancel"})]})]})]}),f?n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx(me,{className:"h-8 w-8 animate-spin text-burgundy-500"})}):k.length===0?n.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 p-12 text-center",children:[n.jsx(bc,{className:"h-12 w-12 text-neutral-300 mx-auto mb-4"}),n.jsx("h3",{className:"font-semibold text-neutral-800 mb-2",children:"No announcements yet"}),n.jsx("p",{className:"text-neutral-500 mb-6",children:"Create your first announcement to display on user dashboards."}),!r&&n.jsx("button",{onClick:()=>s(!0),className:"btn btn-primary",children:"Create Announcement"})]}):n.jsx("div",{className:"space-y-4",children:k.map(E=>n.jsx("div",{className:`bg-white rounded-2xl shadow-card border overflow-hidden ${E.is_active?"border-cream-200":"border-neutral-200 opacity-60"}`,children:n.jsx("div",{className:"p-5",children:n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium border ${Ane(E.priority)}`,children:[Mne(E.priority),E.priority.charAt(0).toUpperCase()+E.priority.slice(1)]}),!E.is_active&&n.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium bg-neutral-100 text-neutral-600",children:"Inactive"}),E.expires_at&&new Date(E.expires_at)<new Date&&n.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-600",children:"Expired"})]}),n.jsx("h3",{className:"font-semibold text-neutral-800 mb-1",children:E.title}),n.jsx("p",{className:"text-neutral-600 text-sm mb-3",children:E.content}),n.jsxs("div",{className:"flex items-center gap-4 text-xs text-neutral-400",children:[n.jsxs("span",{children:["Created"," ",F4(new Date(E.created_at),{addSuffix:!0})]}),E.expires_at&&n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(Mt,{className:"h-3 w-3"}),"Expires"," ",w2(new Date(E.expires_at),"MMM d, yyyy h:mm a")]})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>b.mutate(E.id),disabled:b.isPending,className:"p-2 hover:bg-cream-100 rounded-lg transition-colors",title:E.is_active?"Deactivate":"Activate",children:E.is_active?n.jsx(ZQ,{className:"h-5 w-5 text-green-500"}):n.jsx(QQ,{className:"h-5 w-5 text-neutral-400"})}),n.jsx("button",{onClick:()=>j(E),className:"p-2 hover:bg-cream-100 rounded-lg transition-colors",title:"Edit",children:n.jsx(zv,{className:"h-4 w-4 text-neutral-500"})}),n.jsx("button",{onClick:()=>S(E.id,E.title),disabled:w.isPending,className:"p-2 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:n.jsx(Oc,{className:"h-4 w-4 text-red-500"})})]})]})})},E.id))})]})]})}const Cd=["Pre-Merge Challenges","Post-Merge Challenges","Tribal Council","Strategic Play","Social Game","Idols & Advantages","Survival","Confessionals","Bonus","Penalties"];function Lne(){const e=Et(),[t,r]=T.useState(""),[s,a]=T.useState("all"),[i,o]=T.useState(null),[d,u]=T.useState(!1),[h,p]=T.useState(new Set(Cd)),[f,x]=T.useState({code:"",name:"",description:"",points:0,category:Cd[0],is_negative:!1,is_active:!0}),{data:y,isLoading:b}=re({queryKey:["admin-scoring-rules"],queryFn:async()=>{const{data:P,error:$}=await K.from("scoring_rules").select("*").order("category").order("sort_order");if($)throw $;return P||[]}}),w=Array.from(new Set([...Cd,...(y==null?void 0:y.map(P=>P.category).filter(Boolean))||[]])),v=De({mutationFn:async P=>{const{error:$}=await K.from("scoring_rules").insert(P);if($)throw $},onSuccess:()=>{e.invalidateQueries({queryKey:["admin-scoring-rules"]}),u(!1),S()}}),j=De({mutationFn:async({id:P,...$})=>{const{error:B}=await K.from("scoring_rules").update($).eq("id",P);if(B)throw B},onSuccess:()=>{e.invalidateQueries({queryKey:["admin-scoring-rules"]}),o(null),S()}}),C=De({mutationFn:async P=>{const{error:$}=await K.from("scoring_rules").delete().eq("id",P);if($)throw $},onSuccess:()=>{e.invalidateQueries({queryKey:["admin-scoring-rules"]})}}),S=()=>{x({code:"",name:"",description:"",points:0,category:Cd[0],is_negative:!1,is_active:!0})},k=P=>{o(P),x({code:P.code,name:P.name,description:P.description||"",points:P.points,category:P.category||Cd[0],is_negative:!!P.is_negative,is_active:!!P.is_active}),u(!1)},R=()=>{u(!0),o(null),S()},E=()=>{const P={code:f.code,name:f.name,description:f.description||null,points:f.points,category:f.category,is_negative:f.is_negative,is_active:f.is_active,sort_order:0};i?j.mutate({id:i.id,...P}):v.mutate(P)},I=P=>{p($=>{const B=new Set($);return B.has(P)?B.delete(P):B.add(P),B})},M=y==null?void 0:y.filter(P=>{var D;const $=P.code.toLowerCase().includes(t.toLowerCase())||P.name.toLowerCase().includes(t.toLowerCase())||((D=P.description)==null?void 0:D.toLowerCase().includes(t.toLowerCase())),B=s==="all"||P.category===s;return $&&B}),O=w.reduce((P,$)=>(P[$]=(M==null?void 0:M.filter(B=>B.category===$))||[],P),{}),L={total:(y==null?void 0:y.length)||0,active:(y==null?void 0:y.filter(P=>!!P.is_active).length)||0,positive:(y==null?void 0:y.filter(P=>!P.is_negative).length)||0,negative:(y==null?void 0:y.filter(P=>!!P.is_negative).length)||0};return b?n.jsxs(n.Fragment,{children:[n.jsx(ft,{}),n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center",children:n.jsx(me,{className:"h-8 w-8 text-burgundy-500 animate-spin"})})]}):n.jsxs(n.Fragment,{children:[n.jsx(ft,{}),n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 p-4 pb-24",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx(z,{to:"/admin",className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:n.jsx(st,{className:"h-5 w-5 text-neutral-600"})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("h1",{className:"text-2xl font-display font-bold text-neutral-800 flex items-center gap-2",children:[n.jsx(Lu,{className:"h-6 w-6 text-burgundy-500"}),"Scoring Rules"]}),n.jsxs("p",{className:"text-neutral-500",children:[(y==null?void 0:y.length)||0," rules defined"]})]}),n.jsxs("button",{onClick:R,className:"btn btn-primary",children:[n.jsx($o,{className:"h-4 w-4"}),"Add Rule"]})]}),n.jsxs("div",{className:"grid grid-cols-4 gap-2 mb-6",children:[n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-3 border border-cream-200 text-center",children:[n.jsx("p",{className:"text-xl font-bold text-neutral-800",children:L.total}),n.jsx("p",{className:"text-neutral-500 text-xs",children:"Total"})]}),n.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-2xl p-3 text-center",children:[n.jsx("p",{className:"text-xl font-bold text-green-600",children:L.active}),n.jsx("p",{className:"text-neutral-500 text-xs",children:"Active"})]}),n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-2xl p-3 text-center",children:[n.jsx("p",{className:"text-xl font-bold text-blue-600",children:L.positive}),n.jsx("p",{className:"text-neutral-500 text-xs",children:"Positive"})]}),n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-3 text-center",children:[n.jsx("p",{className:"text-xl font-bold text-red-600",children:L.negative}),n.jsx("p",{className:"text-neutral-500 text-xs",children:"Negative"})]})]}),(d||i)&&n.jsxs("div",{className:"bg-burgundy-50 border border-burgundy-200 rounded-2xl p-4 mb-6",children:[n.jsx("h3",{className:"text-neutral-800 font-medium mb-4",children:i?"Edit Rule":"Add New Rule"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-neutral-500 text-sm mb-1 block",children:"Code"}),n.jsx("input",{type:"text",value:f.code,onChange:P=>x({...f,code:P.target.value.toUpperCase()}),placeholder:"VOTE_CORRECT",className:"input font-mono"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-neutral-500 text-sm mb-1 block",children:"Points"}),n.jsx("input",{type:"number",value:f.points,onChange:P=>x({...f,points:parseInt(P.target.value)||0}),className:"input"})]}),n.jsxs("div",{className:"col-span-2",children:[n.jsx("label",{className:"text-neutral-500 text-sm mb-1 block",children:"Name"}),n.jsx("input",{type:"text",value:f.name,onChange:P=>x({...f,name:P.target.value}),placeholder:"Voted correctly",className:"input"})]}),n.jsxs("div",{className:"col-span-2",children:[n.jsx("label",{className:"text-neutral-500 text-sm mb-1 block",children:"Description"}),n.jsx("input",{type:"text",value:f.description,onChange:P=>x({...f,description:P.target.value}),placeholder:"Points for voting with the majority",className:"input"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-neutral-500 text-sm mb-1 block",children:"Category"}),n.jsx("select",{value:f.category,onChange:P=>x({...f,category:P.target.value}),className:"input",children:w.map(P=>n.jsx("option",{value:P,children:P},P))})]}),n.jsxs("div",{className:"flex items-center gap-4 pt-6",children:[n.jsxs("label",{className:"flex items-center gap-2 text-neutral-800",children:[n.jsx("input",{type:"checkbox",checked:f.is_negative,onChange:P=>x({...f,is_negative:P.target.checked}),className:"w-4 h-4 rounded border-cream-300 text-burgundy-500"}),"Negative Points"]}),n.jsxs("label",{className:"flex items-center gap-2 text-neutral-800",children:[n.jsx("input",{type:"checkbox",checked:f.is_active,onChange:P=>x({...f,is_active:P.target.checked}),className:"w-4 h-4 rounded border-cream-300 text-burgundy-500"}),"Active"]})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:E,disabled:v.isPending||j.isPending,className:"btn btn-primary flex-1",children:v.isPending||j.isPending?n.jsx(me,{className:"h-4 w-4 animate-spin"}):n.jsxs(n.Fragment,{children:[n.jsx(Ci,{className:"h-4 w-4"}),i?"Update Rule":"Create Rule"]})}),n.jsx("button",{onClick:()=>{u(!1),o(null),S()},className:"btn btn-secondary px-4",children:n.jsx(Sn,{className:"h-4 w-4"})})]})]}),n.jsxs("div",{className:"flex gap-2 mb-6",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx(Oi,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-neutral-400"}),n.jsx("input",{type:"text",value:t,onChange:P=>r(P.target.value),placeholder:"Search rules...",className:"input pl-10"})]}),n.jsxs("select",{value:s,onChange:P=>a(P.target.value),className:"input px-3 py-2 w-40",children:[n.jsx("option",{value:"all",children:"All Categories"}),w.map(P=>n.jsx("option",{value:P,children:P},P))]})]}),n.jsx("div",{className:"space-y-4",children:w.map(P=>{const $=O[P];return $.length===0?null:n.jsxs("div",{className:"bg-white rounded-2xl shadow-card border border-cream-200 overflow-hidden",children:[n.jsxs("button",{onClick:()=>I(P),className:"w-full px-4 py-3 flex items-center justify-between hover:bg-cream-50 transition-colors",children:[n.jsx("h3",{className:"text-neutral-800 font-medium",children:P}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("span",{className:"text-neutral-500 text-sm",children:[$.length," rules"]}),h.has(P)?n.jsx(zs,{className:"h-4 w-4 text-neutral-400"}):n.jsx(un,{className:"h-4 w-4 text-neutral-400"})]})]}),h.has(P)&&n.jsx("div",{className:"border-t border-cream-200 divide-y divide-cream-100",children:$.map(B=>n.jsxs("div",{className:`px-4 py-3 flex items-center gap-3 ${B.is_active?"":"opacity-50"}`,children:[n.jsxs("span",{className:`font-mono text-xs px-2 py-0.5 rounded ${B.is_negative?"bg-red-100 text-red-600":"bg-green-100 text-green-600"}`,children:[B.is_negative?"-":"+",Math.abs(B.points)]}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-neutral-800 font-medium truncate",children:B.name}),n.jsx("p",{className:"text-neutral-400 text-xs font-mono",children:B.code})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("button",{onClick:()=>k(B),className:"p-2 hover:bg-cream-100 rounded-xl transition-colors",children:n.jsx(Wv,{className:"h-4 w-4 text-neutral-500"})}),n.jsx("button",{onClick:()=>{confirm("Delete this rule?")&&C.mutate(B.id)},className:"p-2 hover:bg-red-50 rounded-xl transition-colors",children:n.jsx(Oc,{className:"h-4 w-4 text-red-500"})})]})]},B.id))})]},P)})})]})]})}function $ne(){const{user:e}=dt(),t=Et(),[r]=pu(),s=r.get("episode"),[a,i]=T.useState(s),[o,d]=T.useState({}),[u,h]=T.useState(null),[p,f]=T.useState(!1),[x,y]=T.useState(!1),[b,w]=T.useState(null),[v,j]=T.useState(null),C=T.useRef(null),{data:S}=q4(e==null?void 0:e.id),{data:k}=B4(),{data:R}=H4(k==null?void 0:k.id),{data:E}=W4(k==null?void 0:k.id),{data:I}=z4(k==null?void 0:k.id),{data:M}=G4(a),{data:O}=K4(a),L=T.useMemo(()=>{const X=new Set(I==null?void 0:I.map(ee=>ee.category||"Other"));return Array.from(X)},[I]),P=T.useMemo(()=>v?(I==null?void 0:I.filter(X=>(X.category||"Other")===v))||[]:I||[],[I,v]),$=T.useMemo(()=>(E==null?void 0:E.filter(X=>X.status==="active"))||[],[E]);T.useEffect(()=>{if(!x&&M&&$.length>0){const X={};$.forEach(ee=>{X[ee.id]={}}),M.forEach(ee=>{X[ee.castaway_id]&&(X[ee.castaway_id][ee.scoring_rule_id]=ee.quantity)}),d(X),f(!1)}},[M,$,x]);const B=T.useCallback(async()=>{if(!(!a||!(e!=null&&e.id)||!I)){y(!0),w(null);try{const{data:{session:X}}=await K.auth.getSession();if(!(X!=null&&X.access_token))throw new Error("Not authenticated");const ee=[];Object.entries(o).forEach(([Q,J])=>{Object.entries(J).forEach(([U,G])=>{G>0&&ee.push({castaway_id:Q,scoring_rule_id:U,quantity:G})})});const F=await Je(`/episodes/${a}/scoring/save`,X.access_token,{method:"POST",body:JSON.stringify({scores:ee})});if(F.error)throw new Error(F.error);h(new Date),f(!1),t.invalidateQueries({queryKey:["episodeScores",a]}),t.invalidateQueries({queryKey:["scoringStatus",a]})}catch(X){w(X instanceof Error?X.message:"Failed to save scores")}finally{y(!1)}}},[a,e==null?void 0:e.id,o,I,t]);T.useEffect(()=>{if(!(!p||!a))return C.current&&clearTimeout(C.current),C.current=setTimeout(()=>{B()},3e3),()=>{C.current&&clearTimeout(C.current)}},[o,p,a,B]);const D=(X,ee,F)=>{d(Q=>({...Q,[X]:{...Q[X],[ee]:Math.max(0,F)}})),f(!0)},se=X=>{const ee=o[X]||{};return Object.entries(ee).reduce((F,[Q,J])=>{const U=I==null?void 0:I.find(G=>G.id===Q);return F+((U==null?void 0:U.points)||0)*J},0)};return S&&S.role!=="admin"?n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200",children:[n.jsx(ft,{}),n.jsx("main",{className:"max-w-4xl mx-auto px-4 py-16 text-center",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated p-12",children:[n.jsx("h1",{className:"text-2xl font-display text-neutral-800 mb-3",children:"Access Denied"}),n.jsx("p",{className:"text-neutral-500 mb-8",children:"You don't have permission to access this page."}),n.jsx(z,{to:"/dashboard",className:"btn btn-primary",children:"Back to Dashboard"})]})})]}):n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200",children:[n.jsx(ft,{}),n.jsxs("main",{className:"max-w-full mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(z,{to:"/admin",className:"text-neutral-400 hover:text-neutral-600 transition-colors","aria-label":"Back to admin",children:n.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),n.jsxs("div",{children:[n.jsxs("h1",{className:"text-2xl font-display text-neutral-800 flex items-center gap-2",children:[n.jsx(E4,{className:"h-6 w-6 text-burgundy-500"}),"Grid Scoring"]}),n.jsx("p",{className:"text-neutral-500 text-sm",children:"Score all castaways at once"})]})]}),n.jsxs("div",{className:"flex items-center gap-4",children:[O&&a&&!O.is_finalized&&n.jsxs("div",{className:`px-4 py-2 rounded-xl flex items-center gap-2 ${O.is_complete?"bg-green-100 text-green-700":"bg-amber-100 text-amber-700"}`,children:[O.is_complete?n.jsx(tt,{className:"h-5 w-5"}):n.jsx(kt,{className:"h-5 w-5"}),n.jsxs("span",{className:"font-medium",children:[O.scored_castaways,"/",O.total_castaways," castaways scored"]})]}),n.jsxs(z,{to:`/admin/scoring${a?`?episode=${a}`:""}`,className:"btn btn-secondary flex items-center gap-2",children:[n.jsx(oQ,{className:"h-4 w-4"}),"List View"]}),p&&n.jsxs("button",{onClick:B,disabled:x,className:"btn btn-primary flex items-center gap-2",children:[x?n.jsx(me,{className:"h-4 w-4 animate-spin"}):n.jsx(Ci,{className:"h-4 w-4"}),"Save All"]})]})]}),b&&n.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl flex items-start gap-3",children:[n.jsx(at,{className:"h-5 w-5 text-red-500 flex-shrink-0 mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-red-800 font-medium",children:"Save Error"}),n.jsx("p",{className:"text-red-600 text-sm",children:b})]}),n.jsx("button",{onClick:()=>w(null),className:"text-red-400 hover:text-red-600",children:n.jsx(Sn,{className:"h-5 w-5"})})]}),n.jsx(Y4,{}),n.jsx("div",{className:"bg-white rounded-2xl shadow-elevated p-5 mb-6",children:n.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{className:"font-medium text-neutral-700",children:"Episode:"}),n.jsxs("select",{value:a||"",onChange:X=>i(X.target.value||null),className:"p-2 border border-cream-200 rounded-xl focus:ring-2 focus:ring-burgundy-500",children:[n.jsx("option",{value:"",children:"Choose episode..."}),R==null?void 0:R.map(X=>n.jsxs("option",{value:X.id,children:["Ep ",X.number,": ",X.title||"TBD"," ",X.is_scored?"":""]},X.id))]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{className:"font-medium text-neutral-700",children:"Category:"}),n.jsxs("select",{value:v||"",onChange:X=>j(X.target.value||null),className:"p-2 border border-cream-200 rounded-xl focus:ring-2 focus:ring-burgundy-500",children:[n.jsx("option",{value:"",children:"All Categories"}),L.map(X=>n.jsx("option",{value:X,children:X},X))]})]}),n.jsx("div",{className:"flex-1"}),x&&n.jsxs("span",{className:"text-sm text-neutral-500 flex items-center gap-1",children:[n.jsx(me,{className:"h-4 w-4 animate-spin"}),"Saving..."]}),u&&!p&&!x&&n.jsxs("span",{className:"text-sm text-green-600 flex items-center gap-1",children:[n.jsx(Ci,{className:"h-4 w-4"}),"Saved at ",u.toLocaleTimeString()]}),p&&!x&&n.jsx("span",{className:"text-sm text-amber-600",children:"Unsaved changes (auto-saves in 3s)"})]})}),a?n.jsx("div",{className:"bg-white rounded-2xl shadow-elevated overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full border-collapse",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"bg-cream-50",children:[n.jsxs("th",{className:"sticky left-0 bg-cream-50 z-10 p-3 text-left font-semibold text-neutral-700 border-b border-r border-cream-200 min-w-[200px]",children:["Rule (",P.length,")"]}),$.map(X=>n.jsx("th",{className:"p-2 text-center border-b border-cream-200 min-w-[80px]",children:n.jsxs("div",{className:"flex flex-col items-center gap-1",children:[X.photo_url?n.jsx("img",{src:X.photo_url,alt:X.name,className:"w-10 h-10 rounded-full object-cover border border-cream-200"}):n.jsx("div",{className:"w-10 h-10 bg-cream-200 rounded-full flex items-center justify-center",children:n.jsx("span",{className:"text-xs font-bold text-neutral-500",children:X.name.charAt(0)})}),n.jsx("span",{className:"text-xs font-medium text-neutral-700 max-w-[70px] truncate",children:X.name.split(" ")[0]})]})},X.id))]})}),n.jsxs("tbody",{children:[P.map((X,ee)=>n.jsxs("tr",{className:ee%2===0?"bg-white":"bg-cream-50/50",children:[n.jsx("td",{className:"sticky left-0 bg-inherit z-10 p-3 border-r border-cream-200",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("span",{className:`px-2 py-0.5 rounded text-xs font-bold ${X.is_negative?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:[X.points>=0?"+":"",X.points]}),n.jsx("span",{className:"text-sm font-medium text-neutral-800",children:X.name})]})}),$.map(F=>{var J;const Q=((J=o[F.id])==null?void 0:J[X.id])||0;return n.jsx("td",{className:"p-1 text-center",children:n.jsx("input",{type:"number",min:"0",value:Q||"",onChange:U=>D(F.id,X.id,parseInt(U.target.value)||0),className:`w-12 h-8 text-center text-sm border rounded focus:ring-2 focus:ring-burgundy-500 focus:border-burgundy-500 ${Q>0?"border-burgundy-300 bg-burgundy-50":"border-cream-200"}`,placeholder:"0"})},F.id)})]},X.id)),n.jsxs("tr",{className:"bg-burgundy-50 border-t-2 border-burgundy-200",children:[n.jsx("td",{className:"sticky left-0 bg-burgundy-50 z-10 p-3 font-bold text-burgundy-700 border-r border-burgundy-200",children:"TOTAL"}),$.map(X=>{const ee=se(X.id);return n.jsx("td",{className:"p-2 text-center",children:n.jsx("span",{className:`font-bold text-lg ${ee>0?"text-green-600":ee<0?"text-red-600":"text-neutral-400"}`,children:ee!==0?(ee>0?"+":"")+ee:""})},X.id)})]})]})]})})}):n.jsx("div",{className:"bg-white rounded-2xl shadow-elevated p-12 text-center",children:n.jsx("p",{className:"text-neutral-500",children:"Select an episode to begin scoring"})})]})]})}const Dne="https://rgfl-api-production.up.railway.app";function Ft({title:e,value:t,subtitle:r,icon:s,trend:a,status:i,className:o=""}){const d={good:"border-l-green-500",warning:"border-l-yellow-500",critical:"border-l-red-500"};return n.jsxs("div",{className:`bg-white rounded-xl shadow-card p-5 border-l-4 ${i?d[i]:"border-l-transparent"} ${o}`,children:[n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm text-neutral-500 mb-1",children:e}),n.jsx("p",{className:"text-2xl font-display text-neutral-800 font-mono",children:t}),r&&n.jsx("p",{className:"text-xs text-neutral-400 mt-1",children:r})]}),s&&n.jsx("div",{className:"p-2 bg-cream-100 rounded-lg",children:n.jsx(s,{className:"h-5 w-5 text-neutral-600"})})]}),a&&n.jsxs("div",{className:"mt-3 flex items-center gap-1",children:[a.value>=0?n.jsx(Pr,{className:"h-4 w-4 text-green-500"}):n.jsx(Lc,{className:"h-4 w-4 text-red-500"}),n.jsxs("span",{className:`text-sm font-semibold ${a.value>=0?"text-green-600":"text-red-600"}`,children:[Math.abs(a.value).toFixed(1),"%"]}),n.jsx("span",{className:"text-xs text-neutral-400",children:a.label})]})]})}function A2({value:e,max:t,label:r,color:s="burgundy"}){const a=t>0?e/t*100:0,i={burgundy:"bg-burgundy-500",green:"bg-green-500",blue:"bg-blue-500",orange:"bg-orange-500",red:"bg-red-500"};return n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between text-xs text-neutral-500 mb-1",children:[n.jsx("span",{children:r}),n.jsxs("span",{children:[e,"/",t," (",a.toFixed(0),"%)"]})]}),n.jsx("div",{className:"h-2 bg-cream-200 rounded-full overflow-hidden",children:n.jsx("div",{className:`h-full ${i[s]} transition-all duration-500`,style:{width:`${Math.min(100,a)}%`}})})]})}function Fne({data:e,label:t}){var s,a;const r=Math.max(...e.map(i=>i.count),1);return n.jsxs("div",{className:"bg-white rounded-xl shadow-card p-5",children:[n.jsx("h3",{className:"text-sm font-semibold text-neutral-700 mb-4",children:t}),n.jsx("div",{className:"flex items-end gap-1 h-24",children:e.map((i,o)=>n.jsx("div",{className:"flex-1 flex flex-col items-center",children:n.jsx("div",{className:"w-full bg-burgundy-500 rounded-t transition-all hover:bg-burgundy-600",style:{height:`${i.count/r*100}%`,minHeight:i.count>0?"4px":"0"},title:`${i.date}: ${i.count}`})},o))}),n.jsxs("div",{className:"flex justify-between text-xs text-neutral-400 mt-2",children:[n.jsx("span",{children:(s=e[0])==null?void 0:s.date.slice(5)}),n.jsx("span",{children:(a=e[e.length-1])==null?void 0:a.date.slice(5)})]})]})}function Une(){const{data:e,isLoading:t,error:r,refetch:s,isFetching:a}=re({queryKey:["admin-comprehensive-stats"],queryFn:async()=>{var u;const o=(u=(await K.auth.getSession()).data.session)==null?void 0:u.access_token,d=await fetch(`${Dne}/api/admin/stats`,{headers:{Authorization:`Bearer ${o}`}});if(!d.ok)throw new Error("Failed to fetch stats");return d.json()},refetchInterval:6e4});return t?n.jsxs("div",{className:"min-h-screen bg-[#faf8f5]",children:[n.jsx(ft,{}),n.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx(me,{className:"h-8 w-8 animate-spin text-burgundy-500"})})})]}):r||!e?n.jsxs("div",{className:"min-h-screen bg-[#faf8f5]",children:[n.jsx(ft,{}),n.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6 text-center",children:[n.jsx(Nn,{className:"h-8 w-8 text-red-500 mx-auto mb-2"}),n.jsx("p",{className:"text-red-700",children:"Failed to load stats. Please try again."}),n.jsx("button",{onClick:()=>s(),className:"mt-4 btn btn-primary",children:"Retry"})]})})]}):n.jsxs("div",{className:"min-h-screen bg-[#faf8f5]",children:[n.jsx(ft,{}),n.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"flex items-center justify-between mb-8",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(z,{to:"/admin",className:"p-2 hover:bg-cream-200 rounded-lg transition-colors",children:n.jsx(st,{className:"h-5 w-5 text-neutral-600"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-display text-neutral-800",children:"Analytics Dashboard"}),n.jsxs("p",{className:"text-neutral-500 mt-1",children:["Last updated: ",new Date(e.generatedAt).toLocaleTimeString()]})]})]}),n.jsxs("button",{onClick:()=>s(),disabled:a,className:"btn bg-white shadow-card hover:shadow-card-hover flex items-center gap-2",children:[n.jsx(Xr,{className:`h-4 w-4 ${a?"animate-spin":""}`}),"Refresh"]})]}),n.jsxs("section",{className:"mb-8",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(ks,{className:"h-5 w-5 text-green-600"}),n.jsx("h2",{className:"text-xl font-display text-neutral-800",children:"Revenue & Payments"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsx(Ft,{title:"Total Revenue",value:`$${e.revenue.totalRevenue.toFixed(2)}`,icon:ks,status:"good"}),n.jsx(Ft,{title:"This Month",value:`$${e.revenue.revenueThisMonth.toFixed(2)}`,trend:e.revenue.monthOverMonthGrowth!==null?{value:e.revenue.monthOverMonthGrowth,label:"vs last month"}:void 0}),n.jsx(Ft,{title:"Average Donation",value:`$${e.revenue.averageDonation.toFixed(2)}`,subtitle:`${e.revenue.totalPayments} total payments`}),n.jsx(Ft,{title:"Payment Status",value:e.revenue.paymentsByStatus.completed,subtitle:`${e.revenue.paymentsByStatus.pending} pending, ${e.revenue.paymentsByStatus.failed} failed`,status:e.revenue.paymentsByStatus.failed>0?"warning":"good"})]}),e.revenue.revenueByLeague.length>0&&n.jsxs("div",{className:"mt-4 bg-white rounded-xl shadow-card p-5",children:[n.jsx("h3",{className:"text-sm font-semibold text-neutral-700 mb-3",children:"Revenue by League"}),n.jsx("div",{className:"space-y-2",children:e.revenue.revenueByLeague.slice(0,5).map(i=>n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm text-neutral-600",children:i.leagueName}),n.jsxs("span",{className:"text-sm font-mono text-green-600",children:["$",i.totalAmount.toFixed(2)," (",i.paymentCount," payments)"]})]},i.leagueId))})]})]}),n.jsxs("section",{className:"mb-8",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx($e,{className:"h-5 w-5 text-blue-600"}),n.jsx("h2",{className:"text-xl font-display text-neutral-800",children:"User Engagement"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsx(Ft,{title:"Total Users",value:e.userEngagement.totalUsers,icon:$e}),n.jsx(Ft,{title:"Profile Completion",value:`${e.userEngagement.profileCompletionRate.toFixed(0)}%`,subtitle:`${e.userEngagement.profilesComplete} complete`}),n.jsx(Ft,{title:"Active This Week",value:e.userEngagement.retentionStats.activeThisWeek,subtitle:`${e.userEngagement.retentionStats.activeToday} today`}),n.jsx(Ft,{title:"Churned (30d)",value:e.userEngagement.retentionStats.churned30Days,status:e.userEngagement.retentionStats.churned30Days>10?"warning":"good"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mt-4",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-card p-5",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(bn,{className:"h-4 w-4 text-orange-500"}),n.jsx("h3",{className:"text-sm font-semibold text-neutral-700",children:"Trivia Challenge"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx(A2,{value:e.userEngagement.triviaStats.completed,max:e.userEngagement.triviaStats.started||1,label:"Completion Rate",color:"orange"}),n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-neutral-500",children:"Avg Score"}),n.jsx("span",{className:"font-mono",children:e.userEngagement.triviaStats.averageScore.toFixed(1)})]}),n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-neutral-500",children:"Avg Attempts"}),n.jsx("span",{className:"font-mono",children:e.userEngagement.triviaStats.averageAttempts.toFixed(1)})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-card p-5",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(iJ,{className:"h-4 w-4 text-purple-500"}),n.jsx("h3",{className:"text-sm font-semibold text-neutral-700",children:"Users by Role"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-neutral-500",children:"Players"}),n.jsx("span",{className:"text-sm font-mono bg-blue-100 text-blue-700 px-2 py-0.5 rounded",children:e.userEngagement.usersByRole.players})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-neutral-500",children:"Commissioners"}),n.jsx("span",{className:"text-sm font-mono bg-purple-100 text-purple-700 px-2 py-0.5 rounded",children:e.userEngagement.usersByRole.commissioners})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-neutral-500",children:"Admins"}),n.jsx("span",{className:"text-sm font-mono bg-red-100 text-red-700 px-2 py-0.5 rounded",children:e.userEngagement.usersByRole.admins})]})]})]}),n.jsx(Fne,{data:e.userEngagement.signupsByDay,label:"Signups (Last 14 Days)"})]})]}),n.jsxs("section",{className:"mb-8",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(Ke,{className:"h-5 w-5 text-amber-600"}),n.jsx("h2",{className:"text-xl font-display text-neutral-800",children:"League Analytics"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsx(Ft,{title:"Total Leagues",value:e.leagueAnalytics.totalLeagues,subtitle:`${e.leagueAnalytics.publicLeagues} public, ${e.leagueAnalytics.privateLeagues} private`,icon:Ke}),n.jsx(Ft,{title:"Paid Leagues",value:e.leagueAnalytics.paidLeagues,subtitle:`${e.leagueAnalytics.freeLeagues} free`}),n.jsx(Ft,{title:"Global League",value:e.leagueAnalytics.globalLeagueMembers,subtitle:"members"}),n.jsx(Ft,{title:"Avg League Size",value:e.leagueAnalytics.memberDistribution.average.toFixed(1),subtitle:`min: ${e.leagueAnalytics.memberDistribution.min}, max: ${e.leagueAnalytics.memberDistribution.max}`})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-card p-5",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(iu,{className:"h-4 w-4 text-indigo-500"}),n.jsx("h3",{className:"text-sm font-semibold text-neutral-700",children:"Draft Status"})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx(A2,{value:e.leagueAnalytics.draftStats.completed,max:e.leagueAnalytics.totalLeagues||1,label:"Completed",color:"green"}),n.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[n.jsxs("div",{className:"bg-cream-100 rounded-lg p-2",children:[n.jsx("p",{className:"text-lg font-mono text-neutral-800",children:e.leagueAnalytics.draftStats.pending}),n.jsx("p",{className:"text-xs text-neutral-500",children:"Pending"})]}),n.jsxs("div",{className:"bg-yellow-50 rounded-lg p-2",children:[n.jsx("p",{className:"text-lg font-mono text-yellow-700",children:e.leagueAnalytics.draftStats.inProgress}),n.jsx("p",{className:"text-xs text-neutral-500",children:"In Progress"})]}),n.jsxs("div",{className:"bg-green-50 rounded-lg p-2",children:[n.jsx("p",{className:"text-lg font-mono text-green-700",children:e.leagueAnalytics.draftStats.completed}),n.jsx("p",{className:"text-xs text-neutral-500",children:"Completed"})]})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-card p-5",children:[n.jsx("h3",{className:"text-sm font-semibold text-neutral-700 mb-3",children:"Top Leagues by Size"}),n.jsx("div",{className:"space-y-2",children:e.leagueAnalytics.topLeagues.slice(0,5).map((i,o)=>n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("span",{className:"text-xs text-neutral-400 w-4",children:[o+1,"."]}),n.jsx("span",{className:"text-sm text-neutral-600 truncate max-w-[150px]",children:i.name}),i.requireDonation&&n.jsxs("span",{className:"text-xs bg-green-100 text-green-700 px-1.5 py-0.5 rounded",children:["$",i.donationAmount]})]}),n.jsxs("span",{className:"text-sm font-mono text-neutral-800",children:[i.memberCount," members"]})]},i.id))})]})]})]}),n.jsxs("section",{className:"mb-8",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(Bs,{className:"h-5 w-5 text-teal-600"}),n.jsx("h2",{className:"text-xl font-display text-neutral-800",children:"Communication"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsx(Ft,{title:"Chat Messages",value:e.communication.chatStats.totalMessages,subtitle:`${e.communication.chatStats.messagesThisWeek} this week`,icon:Bs}),n.jsx(Ft,{title:"Unique Chatters",value:e.communication.chatStats.uniqueChatters,subtitle:`${e.communication.chatStats.averageMessagesPerUser.toFixed(1)} msgs/user`}),n.jsx(Ft,{title:"Emails Sent",value:e.communication.emailStats.totalSent,subtitle:`${e.communication.emailStats.sentToday} today`,icon:xr}),n.jsx(Ft,{title:"Email Delivery",value:`${e.communication.emailStats.deliveryRate.toFixed(1)}%`,subtitle:`${e.communication.emailStats.failedCount} failed`,status:e.communication.emailStats.deliveryRate<95?"warning":"good"})]}),n.jsxs("div",{className:"mt-4 bg-white rounded-xl shadow-card p-5",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(mi,{className:"h-4 w-4 text-purple-500"}),n.jsx("h3",{className:"text-sm font-semibold text-neutral-700",children:"Notification Preferences"})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-2xl font-mono text-neutral-800",children:e.communication.notificationPrefs.emailEnabled}),n.jsx("p",{className:"text-xs text-neutral-500",children:"Email Enabled"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-2xl font-mono text-neutral-800",children:e.communication.notificationPrefs.smsEnabled}),n.jsx("p",{className:"text-xs text-neutral-500",children:"SMS Enabled"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-2xl font-mono text-neutral-800",children:e.communication.notificationPrefs.pushEnabled}),n.jsx("p",{className:"text-xs text-neutral-500",children:"Push Enabled"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-2xl font-mono text-neutral-800",children:e.communication.notificationPrefs.spoilerDelayEnabled}),n.jsx("p",{className:"text-xs text-neutral-500",children:"Spoiler Delay"})]})]})]})]}),n.jsxs("section",{className:"mb-8",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(yc,{className:"h-5 w-5 text-burgundy-600"}),n.jsxs("h2",{className:"text-xl font-display text-neutral-800",children:["Game Progress",e.gameProgress.season&&n.jsxs("span",{className:"text-sm font-normal text-neutral-500 ml-2",children:["Season ",e.gameProgress.season.number,": ",e.gameProgress.season.name]})]})]}),e.gameProgress.season?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsx(Ft,{title:"Episodes Scored",value:`${e.gameProgress.episodes.scored}/${e.gameProgress.episodes.total}`,subtitle:`${e.gameProgress.episodes.remaining} remaining`,icon:yc}),n.jsx(Ft,{title:"Castaways Active",value:e.gameProgress.castaways.active,subtitle:`${e.gameProgress.castaways.eliminated} eliminated`}),n.jsx(Ft,{title:"Picks This Week",value:e.gameProgress.picks.totalThisWeek,subtitle:`${e.gameProgress.picks.lockedThisWeek} locked, ${e.gameProgress.picks.autoPickedThisWeek} auto`}),n.jsx(Ft,{title:"Total Points",value:e.gameProgress.scoring.totalPointsAwarded.toLocaleString(),subtitle:`${e.gameProgress.scoring.averagePointsPerEpisode.toFixed(0)} avg/episode`})]}),e.gameProgress.tribeBreakdown.length>0&&n.jsxs("div",{className:"mt-4 bg-white rounded-xl shadow-card p-5",children:[n.jsx("h3",{className:"text-sm font-semibold text-neutral-700 mb-3",children:"Tribe Breakdown"}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:e.gameProgress.tribeBreakdown.map(i=>n.jsxs("div",{className:"bg-cream-50 rounded-lg p-3",children:[n.jsx("p",{className:"text-sm font-semibold text-neutral-700",children:i.tribe}),n.jsxs("div",{className:"flex gap-2 mt-1",children:[n.jsxs("span",{className:"text-xs text-green-600",children:[i.active," active"]}),n.jsxs("span",{className:"text-xs text-red-600",children:[i.eliminated," out"]})]})]},i.tribe))})]}),e.gameProgress.scoring.topScorer&&n.jsx("div",{className:"mt-4 bg-gradient-to-r from-amber-50 to-orange-50 rounded-xl shadow-card p-5 border border-amber-200",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-amber-500 rounded-full flex items-center justify-center",children:n.jsx(Ke,{className:"h-5 w-5 text-white"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-amber-700",children:"Current Leader"}),n.jsxs("p",{className:"text-lg font-display text-neutral-800",children:[e.gameProgress.scoring.topScorer.name," -"," ",n.jsxs("span",{className:"font-mono",children:[e.gameProgress.scoring.topScorer.points," pts"]})]})]})]})})]}):n.jsx("div",{className:"bg-cream-100 rounded-xl p-8 text-center",children:n.jsx("p",{className:"text-neutral-500",children:"No active season"})})]}),n.jsxs("section",{className:"mb-8",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx($Q,{className:"h-5 w-5 text-slate-600"}),n.jsx("h2",{className:"text-xl font-display text-neutral-800",children:"System Metrics"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsx(Ft,{title:"Database Latency",value:`${e.systemMetrics.database.latencyMs}ms`,icon:Mt,status:e.systemMetrics.database.status==="healthy"?"good":"warning"}),n.jsx(Ft,{title:"Job Success Rate",value:`${e.systemMetrics.jobs.successRate.toFixed(1)}%`,subtitle:`${e.systemMetrics.jobs.totalRuns24h} runs (24h)`,status:e.systemMetrics.jobs.successRate>=95?"good":"warning"}),n.jsx(Ft,{title:"Email Queue",value:e.systemMetrics.email.queueSize,subtitle:`${e.systemMetrics.email.failedToday} failed today`,status:e.systemMetrics.email.queueSize>50?"warning":"good"}),n.jsx(Ft,{title:"Avatar Storage",value:e.systemMetrics.storage.avatarCount,subtitle:"uploaded avatars"})]}),n.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-4",children:[n.jsxs("div",{className:`rounded-xl p-4 flex items-center gap-3 ${e.systemMetrics.database.status==="healthy"?"bg-green-50 border border-green-200":e.systemMetrics.database.status==="degraded"?"bg-yellow-50 border border-yellow-200":"bg-red-50 border border-red-200"}`,children:[e.systemMetrics.database.status==="healthy"?n.jsx(tt,{className:"h-5 w-5 text-green-500"}):e.systemMetrics.database.status==="degraded"?n.jsx(kt,{className:"h-5 w-5 text-yellow-500"}):n.jsx(Nn,{className:"h-5 w-5 text-red-500"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-semibold text-neutral-700",children:"Database"}),n.jsx("p",{className:"text-xs text-neutral-500 capitalize",children:e.systemMetrics.database.status})]})]}),n.jsxs("div",{className:`rounded-xl p-4 flex items-center gap-3 ${e.systemMetrics.jobs.failures24h===0?"bg-green-50 border border-green-200":e.systemMetrics.jobs.failures24h<5?"bg-yellow-50 border border-yellow-200":"bg-red-50 border border-red-200"}`,children:[e.systemMetrics.jobs.failures24h===0?n.jsx(tt,{className:"h-5 w-5 text-green-500"}):e.systemMetrics.jobs.failures24h<5?n.jsx(kt,{className:"h-5 w-5 text-yellow-500"}):n.jsx(Nn,{className:"h-5 w-5 text-red-500"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-semibold text-neutral-700",children:"Jobs"}),n.jsxs("p",{className:"text-xs text-neutral-500",children:[e.systemMetrics.jobs.failures24h," failures (24h)"]})]})]}),n.jsxs("div",{className:`rounded-xl p-4 flex items-center gap-3 ${e.systemMetrics.email.failedToday===0?"bg-green-50 border border-green-200":e.systemMetrics.email.failedToday<10?"bg-yellow-50 border border-yellow-200":"bg-red-50 border border-red-200"}`,children:[e.systemMetrics.email.failedToday===0?n.jsx(tt,{className:"h-5 w-5 text-green-500"}):e.systemMetrics.email.failedToday<10?n.jsx(kt,{className:"h-5 w-5 text-yellow-500"}):n.jsx(Nn,{className:"h-5 w-5 text-red-500"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-semibold text-neutral-700",children:"Email"}),n.jsxs("p",{className:"text-xs text-neutral-500",children:[e.systemMetrics.email.failedToday," failed today"]})]})]})]})]})]})]})}function qne(){var x,y;const e=Et(),[t,r]=T.useState(null),{data:s,isLoading:a}=re({queryKey:["admin-email-stats"],queryFn:async()=>{const{data:{session:b}}=await K.auth.getSession();if(!b)throw new Error("Not authenticated");const w=await Je("/admin/email-queue/stats",b.access_token);if(w.error)throw new Error(w.error);return w.data||{pending:0,processing:0,failed_today:0,sent_today:0,total_sent:0}},refetchInterval:3e4}),{data:i,isLoading:o,refetch:d}=re({queryKey:["admin-failed-emails"],queryFn:async()=>{const{data:{session:b}}=await K.auth.getSession();if(!b)throw new Error("Not authenticated");const w=await Je("/admin/failed-emails",b.access_token);if(w.error)throw new Error(w.error);return w.data||{failed_emails:[],total:0}},refetchInterval:3e4}),u=De({mutationFn:async b=>{const{data:{session:w}}=await K.auth.getSession();if(!w)throw new Error("Not authenticated");const v=await Je(`/admin/failed-emails/${b}/retry`,w.access_token,{method:"POST"});if(v.error)throw new Error(v.error);return v.data},onMutate:b=>{r(b)},onSuccess:()=>{e.invalidateQueries({queryKey:["admin-failed-emails"]}),e.invalidateQueries({queryKey:["admin-email-stats"]}),r(null)},onError:()=>{r(null)}}),h=a||o,p=((x=i==null?void 0:i.failed_emails)==null?void 0:x.filter(b=>!b.retry_attempted))||[],f=((y=i==null?void 0:i.failed_emails)==null?void 0:y.filter(b=>b.retry_attempted))||[];return n.jsxs(n.Fragment,{children:[n.jsx(ft,{}),n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 p-4 pb-24",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx(z,{to:"/admin",className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:n.jsx(st,{className:"h-5 w-5 text-neutral-600"})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("h1",{className:"text-2xl font-display font-bold text-neutral-800 flex items-center gap-2",children:[n.jsx(xr,{className:"h-6 w-6 text-burgundy-500"}),"Email Queue"]}),n.jsx("p",{className:"text-neutral-500",children:"Monitor and manage email delivery"})]}),n.jsx("button",{onClick:()=>d(),disabled:h,className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:n.jsx(Xr,{className:`h-5 w-5 text-neutral-600 ${h?"animate-spin":""}`})})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3 mb-6",children:[n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-4 border border-cream-200",children:[n.jsxs("div",{className:"flex items-center gap-2 text-neutral-500 text-sm mb-1",children:[n.jsx(Mt,{className:"h-4 w-4"}),"Pending"]}),n.jsx("p",{className:"text-2xl font-bold text-neutral-800",children:(s==null?void 0:s.pending)||0})]}),n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-4 border border-cream-200",children:[n.jsxs("div",{className:"flex items-center gap-2 text-neutral-500 text-sm mb-1",children:[n.jsx(me,{className:"h-4 w-4"}),"Processing"]}),n.jsx("p",{className:"text-2xl font-bold text-neutral-800",children:(s==null?void 0:s.processing)||0})]}),n.jsxs("div",{className:"bg-green-50 rounded-2xl border border-green-200 p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 text-green-600 text-sm mb-1",children:[n.jsx(Fu,{className:"h-4 w-4"}),"Sent Today"]}),n.jsx("p",{className:"text-2xl font-bold text-green-700",children:(s==null?void 0:s.sent_today)||0})]}),n.jsxs("div",{className:"bg-red-50 rounded-2xl border border-red-200 p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 text-red-600 text-sm mb-1",children:[n.jsx(Nn,{className:"h-4 w-4"}),"Failed Today"]}),n.jsx("p",{className:"text-2xl font-bold text-red-700",children:(s==null?void 0:s.failed_today)||0})]}),n.jsxs("div",{className:"bg-blue-50 rounded-2xl border border-blue-200 p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 text-blue-600 text-sm mb-1",children:[n.jsx(QJ,{className:"h-4 w-4"}),"Total Sent"]}),n.jsx("p",{className:"text-2xl font-bold text-blue-700",children:(s==null?void 0:s.total_sent)||0})]})]}),p.length>0&&n.jsxs("div",{className:"mb-6",children:[n.jsx("div",{className:"flex items-center justify-between mb-3",children:n.jsxs("h2",{className:"text-lg font-display font-bold text-neutral-800 flex items-center gap-2",children:[n.jsx(kt,{className:"h-5 w-5 text-amber-500"}),"Needs Attention (",p.length,")"]})}),n.jsx("div",{className:"space-y-3",children:p.map(b=>n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-4 border border-amber-200",children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"font-medium text-neutral-800 truncate",children:b.email_job.subject}),n.jsxs("p",{className:"text-sm text-neutral-500 truncate",children:["To: ",b.email_job.to_email]})]}),n.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs bg-amber-100 text-amber-700",children:"Pending Retry"})]}),n.jsxs("div",{className:"flex items-center justify-between text-sm text-neutral-500",children:[n.jsxs("span",{children:["Failed:"," ",new Date(b.failed_at).toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})]}),n.jsx("button",{onClick:()=>u.mutate(b.id),disabled:t===b.id,className:"btn btn-primary py-1.5 px-3 text-sm",children:t===b.id?n.jsxs(n.Fragment,{children:[n.jsx(me,{className:"h-4 w-4 animate-spin"}),"Retrying..."]}):n.jsxs(n.Fragment,{children:[n.jsx(R4,{className:"h-4 w-4"}),"Retry"]})})]}),b.notes&&n.jsx("p",{className:"mt-2 text-xs text-red-600 bg-red-50 rounded-lg p-2",children:b.notes})]},b.id))})]}),f.length>0&&n.jsxs("div",{className:"mb-6",children:[n.jsxs("h2",{className:"text-lg font-display font-bold text-neutral-800 mb-3 flex items-center gap-2",children:[n.jsx(tt,{className:"h-5 w-5 text-green-500"}),"Retry History (",f.length,")"]}),n.jsx("div",{className:"space-y-2",children:f.map(b=>n.jsx("div",{className:`bg-white rounded-xl p-3 border ${b.retry_succeeded?"border-green-200":"border-red-200"}`,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[b.retry_succeeded?n.jsx(tt,{className:"h-5 w-5 text-green-500"}):n.jsx(Nn,{className:"h-5 w-5 text-red-500"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-neutral-800 text-sm",children:b.email_job.subject}),n.jsx("p",{className:"text-xs text-neutral-500",children:b.email_job.to_email})]})]}),n.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs ${b.retry_succeeded?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:b.retry_succeeded?"Sent":"Failed"})]})},b.id))})]}),!h&&p.length===0&&f.length===0&&n.jsxs("div",{className:"bg-white rounded-2xl shadow-card p-8 border border-cream-200 text-center",children:[n.jsx(tt,{className:"h-12 w-12 text-green-500 mx-auto mb-3"}),n.jsx("h3",{className:"text-lg font-display font-bold text-neutral-800 mb-1",children:"All Emails Delivered"}),n.jsx("p",{className:"text-neutral-500",children:"No failed emails in the queue."})]}),n.jsx("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-2xl p-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(at,{className:"h-5 w-5 text-blue-500 flex-shrink-0 mt-0.5"}),n.jsxs("div",{className:"text-sm text-blue-800",children:[n.jsx("p",{className:"font-medium mb-1",children:"About Email Queue"}),n.jsx("p",{className:"text-blue-600",children:"Emails are processed every 5 minutes. Failed emails are moved to a dead letter queue after 3 retry attempts. Use the Retry button to manually re-send failed emails."})]})]})})]})]})}function Bne(){const{session:e}=dt(),[t,r]=T.useState("executive"),{data:s,isLoading:a,refetch:i}=re({queryKey:["admin-analytics-executive"],queryFn:async()=>{if(!(e!=null&&e.access_token))throw new Error("Not authenticated");const b=await Je("/admin/analytics/executive",e.access_token);if(b.error)throw new Error(b.error);return b.data},enabled:!!(e!=null&&e.access_token)&&t==="executive",staleTime:300*1e3}),{data:o,isLoading:d,refetch:u}=re({queryKey:["admin-analytics-engagement"],queryFn:async()=>{if(!(e!=null&&e.access_token))throw new Error("Not authenticated");const b=await Je("/admin/analytics/engagement",e.access_token);if(b.error)throw new Error(b.error);return b.data},enabled:!!(e!=null&&e.access_token)&&t==="engagement",staleTime:300*1e3}),{data:h,isLoading:p,refetch:f}=re({queryKey:["admin-analytics-operations"],queryFn:async()=>{if(!(e!=null&&e.access_token))throw new Error("Not authenticated");const b=await Je("/admin/analytics/operations",e.access_token);if(b.error)throw new Error(b.error);return b.data},enabled:!!(e!=null&&e.access_token)&&t==="operations",staleTime:30*1e3}),x=()=>{t==="executive"?i():t==="engagement"?u():f()},y=t==="executive"&&a||t==="engagement"&&d||t==="operations"&&p;return n.jsxs(n.Fragment,{children:[n.jsx(ft,{}),n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 p-4 pb-24",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(z,{to:"/admin",className:"p-2 bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all border border-cream-200",children:n.jsx(st,{className:"h-5 w-5 text-neutral-600"})}),n.jsxs("div",{children:[n.jsxs("h1",{className:"text-2xl font-display font-bold text-neutral-800 flex items-center gap-2",children:[n.jsx(Uv,{className:"h-6 w-6 text-burgundy-500"}),"Analytics"]}),n.jsx("p",{className:"text-neutral-500",children:"Business intelligence & metrics"})]})]}),n.jsxs("button",{onClick:x,disabled:y,className:"px-4 py-2 bg-white rounded-lg shadow-card hover:shadow-card-hover flex items-center gap-2",children:[n.jsx(Xr,{className:`h-4 w-4 ${y?"animate-spin":""}`}),"Refresh"]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-card border border-cream-200 p-1 mb-6 flex",children:[n.jsx("button",{onClick:()=>r("executive"),className:`flex-1 px-4 py-2 rounded-lg text-sm font-medium transition-colors ${t==="executive"?"bg-burgundy-500 text-white":"text-neutral-600 hover:bg-cream-100"}`,children:"Executive"}),n.jsx("button",{onClick:()=>r("engagement"),className:`flex-1 px-4 py-2 rounded-lg text-sm font-medium transition-colors ${t==="engagement"?"bg-burgundy-500 text-white":"text-neutral-600 hover:bg-cream-100"}`,children:"Engagement"}),n.jsx("button",{onClick:()=>r("operations"),className:`flex-1 px-4 py-2 rounded-lg text-sm font-medium transition-colors ${t==="operations"?"bg-burgundy-500 text-white":"text-neutral-600 hover:bg-cream-100"}`,children:"Operations"})]}),y&&n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx(me,{className:"h-8 w-8 text-burgundy-500 animate-spin"})}),t==="executive"&&s&&!y&&n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"bg-white rounded-xl shadow-card p-6 border border-cream-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-neutral-800",children:"Health Score"}),n.jsx("p",{className:"text-sm text-neutral-500",children:"Composite: retention 50%, activation 30%, growth 20%"})]}),n.jsx("div",{className:`text-4xl font-bold ${s.healthScore>=70?"text-green-600":s.healthScore>=40?"text-yellow-600":"text-red-600"}`,children:s.healthScore})]})}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-card border border-cream-200",children:[n.jsx($e,{className:"h-5 w-5 text-blue-500 mb-2"}),n.jsx("p",{className:"text-2xl font-bold text-neutral-800",children:s.vitals.totalUsers}),n.jsx("p",{className:"text-xs text-neutral-500",children:"Total Users"})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-card border border-cream-200",children:[n.jsx(iu,{className:"h-5 w-5 text-green-500 mb-2"}),n.jsx("p",{className:"text-2xl font-bold text-neutral-800",children:s.vitals.activeUsers}),n.jsx("p",{className:"text-xs text-neutral-500",children:"Active (7d)"})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-card border border-cream-200",children:[n.jsx(Pr,{className:"h-5 w-5 text-purple-500 mb-2"}),n.jsxs("p",{className:"text-2xl font-bold text-neutral-800",children:[s.vitals.retentionRate,"%"]}),n.jsx("p",{className:"text-xs text-neutral-500",children:"Retention"})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-card border border-cream-200",children:[n.jsx(gr,{className:"h-5 w-5 text-orange-500 mb-2"}),n.jsxs("p",{className:"text-2xl font-bold text-neutral-800",children:[s.vitals.activationRate,"%"]}),n.jsx("p",{className:"text-xs text-neutral-500",children:"Activation"})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-card border border-cream-200",children:[n.jsx(Pr,{className:"h-5 w-5 text-teal-500 mb-2"}),n.jsxs("p",{className:"text-2xl font-bold text-neutral-800",children:[s.vitals.growthRate,"%"]}),n.jsx("p",{className:"text-xs text-neutral-500",children:"Growth Rate"})]}),n.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-card border border-cream-200",children:[n.jsx(er,{className:"h-5 w-5 text-pink-500 mb-2"}),n.jsx("p",{className:"text-2xl font-bold text-neutral-800",children:s.vitals.newUsersThisWeek}),n.jsx("p",{className:"text-xs text-neutral-500",children:"New This Week"})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-card p-6 border border-cream-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-neutral-800 mb-4",children:"User Funnel"}),n.jsx("div",{className:"space-y-3",children:[{label:"Signups",value:s.funnel.signups,color:"bg-blue-500"},{label:"Profile Complete",value:s.funnel.profileComplete,color:"bg-green-500"},{label:"Joined League",value:s.funnel.joinedLeague,color:"bg-purple-500"},{label:"Made Pick",value:s.funnel.madePick,color:"bg-orange-500"},{label:"Week 2 Retention",value:s.funnel.week2Retention,color:"bg-teal-500"}].map(b=>n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[n.jsx("span",{className:"text-neutral-600",children:b.label}),n.jsx("span",{className:"font-mono text-neutral-800",children:b.value})]}),n.jsx("div",{className:"h-2 bg-cream-200 rounded-full overflow-hidden",children:n.jsx("div",{className:`h-full ${b.color} transition-all`,style:{width:`${s.funnel.signups>0?b.value/s.funnel.signups*100:0}%`}})})]},b.label))})]}),s.donations.totalGross>0&&n.jsxs("div",{className:"bg-white rounded-xl shadow-card p-6 border border-cream-200",children:[n.jsxs("h3",{className:"text-lg font-semibold text-neutral-800 mb-4 flex items-center gap-2",children:[n.jsx(ks,{className:"h-5 w-5 text-green-500"}),"Donations"]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-neutral-500",children:"Gross"}),n.jsxs("p",{className:"text-xl font-bold text-neutral-800",children:["$",s.donations.totalGross.toFixed(2)]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-neutral-500",children:"Stripe Fee"}),n.jsxs("p",{className:"text-xl font-bold text-red-600",children:["-$",s.donations.totalStripeFee.toFixed(2)]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-neutral-500",children:"RGFL Fee (7%)"}),n.jsxs("p",{className:"text-xl font-bold text-orange-600",children:["-$",s.donations.totalRgflFee.toFixed(2)]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-neutral-500",children:"Net to Leagues"}),n.jsxs("p",{className:"text-xl font-bold text-green-600",children:["$",s.donations.totalNetToLeagues.toFixed(2)]})]})]})]})]}),t==="engagement"&&o&&!y&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-card p-6 border border-cream-200",children:[n.jsxs("h3",{className:"text-lg font-semibold text-neutral-800 mb-4",children:["Episode ",o.episodeStatus.episode," Pick Status"]}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsx("div",{className:"h-4 bg-cream-200 rounded-full overflow-hidden",children:n.jsx("div",{className:`h-full transition-all ${o.episodeStatus.percentage>=70?"bg-green-500":o.episodeStatus.percentage>=40?"bg-yellow-500":"bg-red-500"}`,style:{width:`${o.episodeStatus.percentage}%`}})})}),n.jsxs("span",{className:"text-lg font-bold text-neutral-800",children:[o.episodeStatus.submitted,"/",o.episodeStatus.total," (",o.episodeStatus.percentage,"%)"]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-card p-6 border border-cream-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-neutral-800 mb-4",children:"User Segments"}),n.jsxs("div",{className:"grid grid-cols-5 gap-4",children:[n.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[n.jsx(Zr,{className:"h-6 w-6 text-green-500 mx-auto mb-2"}),n.jsx("p",{className:"text-2xl font-bold text-green-600",children:o.segments.power}),n.jsx("p",{className:"text-xs text-neutral-500",children:"Power"})]}),n.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[n.jsx(Pr,{className:"h-6 w-6 text-blue-500 mx-auto mb-2"}),n.jsx("p",{className:"text-2xl font-bold text-blue-600",children:o.segments.casual}),n.jsx("p",{className:"text-xs text-neutral-500",children:"Casual"})]}),n.jsxs("div",{className:"text-center p-4 bg-yellow-50 rounded-lg",children:[n.jsx(Mt,{className:"h-6 w-6 text-yellow-500 mx-auto mb-2"}),n.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:o.segments.dormant}),n.jsx("p",{className:"text-xs text-neutral-500",children:"Dormant"})]}),n.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-lg",children:[n.jsx(Lc,{className:"h-6 w-6 text-red-500 mx-auto mb-2"}),n.jsx("p",{className:"text-2xl font-bold text-red-600",children:o.segments.churned}),n.jsx("p",{className:"text-xs text-neutral-500",children:"Churned"})]}),n.jsxs("div",{className:"text-center p-4 bg-neutral-50 rounded-lg",children:[n.jsx($e,{className:"h-6 w-6 text-neutral-500 mx-auto mb-2"}),n.jsx("p",{className:"text-2xl font-bold text-neutral-600",children:o.segments.new}),n.jsx("p",{className:"text-xs text-neutral-500",children:"New"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-card p-6 border border-cream-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-neutral-800 mb-4",children:"Pick Patterns by Day"}),n.jsx("div",{className:"flex items-end gap-2 h-32",children:o.pickPatterns.byDay.map((b,w)=>{const v=Math.max(...o.pickPatterns.byDay,1);return n.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[n.jsx("div",{className:"w-full bg-burgundy-500 rounded-t transition-all hover:bg-burgundy-600",style:{height:`${b/v*100}%`,minHeight:b>0?"4px":"0"},title:`${o.pickPatterns.dayLabels[w]}: ${b}`}),n.jsx("span",{className:"text-xs text-neutral-500 mt-1",children:o.pickPatterns.dayLabels[w]})]},w)})})]}),o.atRiskUsers.length>0&&n.jsxs("div",{className:"bg-white rounded-xl shadow-card p-6 border border-cream-200",children:[n.jsxs("h3",{className:"text-lg font-semibold text-neutral-800 mb-4 flex items-center gap-2",children:[n.jsx(kt,{className:"h-5 w-5 text-yellow-500"}),"At-Risk Users (7+ days inactive)"]}),n.jsx("div",{className:"space-y-2",children:o.atRiskUsers.slice(0,10).map(b=>n.jsxs("div",{className:"flex items-center justify-between p-2 bg-cream-50 rounded-lg",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-neutral-800",children:b.display_name}),n.jsx("p",{className:"text-xs text-neutral-500",children:b.email})]}),n.jsxs("span",{className:"text-xs text-neutral-500",children:["Last active:"," ",b.last_active_at?new Date(b.last_active_at).toLocaleDateString():"Never"]})]},b.id))})]}),o.cohorts.length>0&&n.jsxs("div",{className:"bg-white rounded-xl shadow-card p-6 border border-cream-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-neutral-800 mb-4",children:"Retention Cohorts"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"text-neutral-500",children:[n.jsx("th",{className:"text-left py-2",children:"Cohort"}),n.jsx("th",{className:"text-center py-2",children:"Size"}),n.jsx("th",{className:"text-center py-2",children:"Week 0"}),n.jsx("th",{className:"text-center py-2",children:"Week 1"}),n.jsx("th",{className:"text-center py-2",children:"Week 2"}),n.jsx("th",{className:"text-center py-2",children:"Week 3"}),n.jsx("th",{className:"text-center py-2",children:"Week 4"})]})}),n.jsx("tbody",{children:o.cohorts.map((b,w)=>n.jsxs("tr",{className:"border-t border-cream-100",children:[n.jsx("td",{className:"py-2 font-mono text-xs",children:new Date(b.cohort_week).toLocaleDateString()}),n.jsx("td",{className:"text-center py-2",children:b.cohort_size}),n.jsx("td",{className:"text-center py-2",children:b.week_0}),n.jsx("td",{className:"text-center py-2",children:b.week_1}),n.jsx("td",{className:"text-center py-2",children:b.week_2}),n.jsx("td",{className:"text-center py-2",children:b.week_3}),n.jsx("td",{className:"text-center py-2",children:b.week_4})]},b.cohort_week))})]})})]})]}),t==="operations"&&h&&!y&&n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:`rounded-xl shadow-card p-6 border ${h.systemStatus==="healthy"?"bg-green-50 border-green-200":h.systemStatus==="warning"?"bg-yellow-50 border-yellow-200":"bg-red-50 border-red-200"}`,children:n.jsxs("div",{className:"flex items-center gap-3",children:[h.systemStatus==="healthy"?n.jsx(tt,{className:"h-8 w-8 text-green-500"}):h.systemStatus==="warning"?n.jsx(kt,{className:"h-8 w-8 text-yellow-500"}):n.jsx(Nn,{className:"h-8 w-8 text-red-500"}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-semibold text-neutral-800",children:["System Status: ",h.systemStatus.toUpperCase()]}),n.jsxs("p",{className:"text-sm text-neutral-600",children:[h.emailPerformance.failedCount," failed emails,"," ",h.jobHistory.failedCount," failed jobs (24h)"]})]})]})}),n.jsxs("div",{className:"bg-white rounded-xl shadow-card p-6 border border-cream-200",children:[n.jsxs("h3",{className:"text-lg font-semibold text-neutral-800 mb-4 flex items-center gap-2",children:[n.jsx(xr,{className:"h-5 w-5 text-blue-500"}),"Email Performance (7d)"]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-neutral-500",children:"Sent"}),n.jsx("p",{className:"text-xl font-bold text-neutral-800",children:h.emailPerformance.total_sent})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-neutral-500",children:"Delivered"}),n.jsx("p",{className:"text-xl font-bold text-green-600",children:h.emailPerformance.total_delivered})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-neutral-500",children:"Failed"}),n.jsx("p",{className:"text-xl font-bold text-red-600",children:h.emailPerformance.total_failed})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-neutral-500",children:"Delivery Rate"}),n.jsxs("p",{className:`text-xl font-bold ${h.emailPerformance.delivery_rate>=.9?"text-green-600":"text-yellow-600"}`,children:[(h.emailPerformance.delivery_rate*100).toFixed(1),"%"]})]})]}),h.emailPerformance.recentFailures.length>0&&n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-medium text-neutral-700 mb-2",children:"Recent Failures"}),n.jsx("div",{className:"space-y-2",children:h.emailPerformance.recentFailures.slice(0,5).map(b=>n.jsxs("div",{className:"p-2 bg-red-50 rounded-lg text-sm",children:[n.jsx("p",{className:"font-medium text-neutral-800",children:b.to_email}),n.jsx("p",{className:"text-xs text-neutral-500",children:b.subject}),n.jsx("p",{className:"text-xs text-red-600",children:b.error_message})]},b.id))})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-card p-6 border border-cream-200",children:[n.jsxs("h3",{className:"text-lg font-semibold text-neutral-800 mb-4 flex items-center gap-2",children:[n.jsx(iu,{className:"h-5 w-5 text-purple-500"}),"Recent Job Runs"]}),n.jsx("div",{className:"space-y-2",children:h.jobHistory.recent.slice(0,10).map(b=>n.jsxs("div",{className:"flex items-center justify-between p-2 bg-cream-50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[b.status==="success"?n.jsx(tt,{className:"h-4 w-4 text-green-500"}):b.status==="failed"?n.jsx(Nn,{className:"h-4 w-4 text-red-500"}):n.jsx(me,{className:"h-4 w-4 text-blue-500 animate-spin"}),n.jsx("span",{className:"font-medium text-neutral-800",children:b.job_name})]}),n.jsxs("div",{className:"flex items-center gap-4 text-xs text-neutral-500",children:[n.jsxs("span",{children:[b.duration_ms,"ms"]}),n.jsx("span",{children:new Date(b.started_at).toLocaleTimeString()})]})]},b.id))})]}),h.errorLog.length>0&&n.jsxs("div",{className:"bg-white rounded-xl shadow-card p-6 border border-cream-200",children:[n.jsxs("h3",{className:"text-lg font-semibold text-neutral-800 mb-4 flex items-center gap-2",children:[n.jsx(kt,{className:"h-5 w-5 text-red-500"}),"Error Log"]}),n.jsx("div",{className:"space-y-2",children:h.errorLog.map((b,w)=>n.jsxs("div",{className:"p-2 bg-red-50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"font-medium text-neutral-800",children:b.job_name}),n.jsx("span",{className:"text-xs text-neutral-500",children:new Date(b.started_at).toLocaleString()})]}),n.jsx("p",{className:"text-sm text-red-600 mt-1",children:b.error_message})]},w))})]})]})]})]})}function Hne(){var d,u,h;const{data:e,isLoading:t,error:r,refetch:s}=re({queryKey:["admin","system-health"],queryFn:async()=>await Je("/api/admin/dashboard/system-health"),refetchInterval:3e4}),{data:a}=re({queryKey:["admin","analytics","operations"],queryFn:async()=>await Je("/api/admin/analytics/operations"),refetchInterval:6e4}),i=p=>{switch(p){case"pass":case"healthy":return n.jsx(tt,{className:"h-5 w-5 text-green-500"});case"warn":case"degraded":return n.jsx(kt,{className:"h-5 w-5 text-yellow-500"});case"fail":case"unhealthy":return n.jsx(Nn,{className:"h-5 w-5 text-red-500"});default:return n.jsx(iu,{className:"h-5 w-5 text-neutral-400"})}},o=p=>{switch(p){case"pass":case"healthy":return"bg-green-500/10 border-green-500/30 text-green-400";case"warn":case"degraded":return"bg-yellow-500/10 border-yellow-500/30 text-yellow-400";case"fail":case"unhealthy":return"bg-red-500/10 border-red-500/30 text-red-400";default:return"bg-neutral-500/10 border-neutral-500/30 text-neutral-400"}};return n.jsxs("div",{className:"min-h-screen bg-neutral-950 text-white",children:[n.jsx(ft,{}),n.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"flex items-center justify-between mb-8",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold",children:"System Health"}),n.jsx("p",{className:"text-neutral-400 mt-1",children:"Monitor system status and service health"})]}),n.jsxs("button",{onClick:()=>s(),className:"flex items-center gap-2 px-4 py-2 bg-neutral-800 hover:bg-neutral-700 rounded-lg transition-colors",children:[n.jsx(Xr,{className:`h-4 w-4 ${t?"animate-spin":""}`}),"Refresh"]})]}),r&&n.jsx("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-4 mb-6",children:n.jsx("p",{className:"text-red-400",children:"Failed to load system health data"})}),e&&n.jsx("div",{className:`rounded-lg border p-6 mb-8 ${o(e.status)}`,children:n.jsxs("div",{className:"flex items-center gap-4",children:[i(e.status),n.jsxs("div",{children:[n.jsxs("h2",{className:"text-xl font-semibold capitalize",children:["System ",e.status]}),n.jsxs("p",{className:"text-sm opacity-75",children:["Last checked: ",new Date(e.timestamp).toLocaleString()]})]})]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[n.jsxs("div",{className:"bg-neutral-900 rounded-lg border border-neutral-800 p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx(EJ,{className:"h-5 w-5 text-blue-400"}),n.jsx("h3",{className:"font-semibold",children:"Database"})]}),(d=e==null?void 0:e.checks)!=null&&d.database?n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-neutral-400",children:"Status"}),n.jsxs("div",{className:"flex items-center gap-2",children:[i(e.checks.database.status),n.jsx("span",{className:"capitalize",children:e.checks.database.status})]})]}),e.checks.database.latencyMs!==void 0&&n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-neutral-400",children:"Latency"}),n.jsxs("span",{children:[e.checks.database.latencyMs,"ms"]})]}),e.checks.database.error&&n.jsx("p",{className:"text-red-400 text-sm",children:e.checks.database.error})]}):n.jsx("p",{className:"text-neutral-500",children:"Loading..."})]}),n.jsxs("div",{className:"bg-neutral-900 rounded-lg border border-neutral-800 p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx(Mt,{className:"h-5 w-5 text-purple-400"}),n.jsx("h3",{className:"font-semibold",children:"Scheduler"})]}),(u=e==null?void 0:e.checks)!=null&&u.scheduler?n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-neutral-400",children:"Status"}),n.jsxs("div",{className:"flex items-center gap-2",children:[i(e.checks.scheduler.status),n.jsx("span",{className:"capitalize",children:e.checks.scheduler.status})]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-neutral-400",children:"Running"}),n.jsx("span",{children:e.checks.scheduler.running?"Yes":"No"})]}),e.checks.scheduler.error&&n.jsx("p",{className:"text-red-400 text-sm",children:e.checks.scheduler.error})]}):n.jsx("p",{className:"text-neutral-500",children:"Loading..."})]}),n.jsxs("div",{className:"bg-neutral-900 rounded-lg border border-neutral-800 p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx(kt,{className:"h-5 w-5 text-orange-400"}),n.jsx("h3",{className:"font-semibold",children:"Job Failures (24h)"})]}),(h=e==null?void 0:e.checks)!=null&&h.recentJobFailures?n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-neutral-400",children:"Status"}),n.jsxs("div",{className:"flex items-center gap-2",children:[i(e.checks.recentJobFailures.status),n.jsx("span",{className:"capitalize",children:e.checks.recentJobFailures.status})]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-neutral-400",children:"Failed Jobs"}),n.jsx("span",{className:e.checks.recentJobFailures.count>0?"text-red-400":"text-green-400",children:e.checks.recentJobFailures.count})]})]}):n.jsx("p",{className:"text-neutral-500",children:"Loading..."})]})]}),(a==null?void 0:a.emailPerformance)&&n.jsxs("div",{className:"bg-neutral-900 rounded-lg border border-neutral-800 p-6 mb-8",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx(xr,{className:"h-5 w-5 text-teal-400"}),n.jsx("h3",{className:"font-semibold text-lg",children:"Email Performance"})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-neutral-400 text-sm mb-1",children:"Delivery Rate"}),n.jsxs("p",{className:`text-2xl font-bold ${(a.emailPerformance.delivery_rate||0)>=.9?"text-green-400":(a.emailPerformance.delivery_rate||0)>=.7?"text-yellow-400":"text-red-400"}`,children:[Math.round((a.emailPerformance.delivery_rate||0)*100),"%"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-neutral-400 text-sm mb-1",children:"Total Sent"}),n.jsx("p",{className:"text-2xl font-bold",children:a.emailPerformance.total_sent||0})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-neutral-400 text-sm mb-1",children:"Failed"}),n.jsx("p",{className:"text-2xl font-bold text-red-400",children:a.emailPerformance.failedCount||0})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-neutral-400 text-sm mb-1",children:"Pending"}),n.jsx("p",{className:"text-2xl font-bold text-yellow-400",children:a.emailPerformance.pendingCount||0})]})]})]}),(a==null?void 0:a.errorLog)&&a.errorLog.length>0&&n.jsxs("div",{className:"bg-neutral-900 rounded-lg border border-neutral-800 p-6",children:[n.jsx("h3",{className:"font-semibold text-lg mb-4",children:"Recent Errors"}),n.jsx("div",{className:"space-y-3",children:a.errorLog.map((p,f)=>n.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("span",{className:"font-medium text-red-400",children:p.job_name}),n.jsx("span",{className:"text-neutral-500 text-sm",children:new Date(p.started_at).toLocaleString()})]}),n.jsx("p",{className:"text-sm text-neutral-300",children:p.error_message})]},f))})]})]}),n.jsx(tn,{})]})}class Wne extends T.Component{constructor(r){super(r);pl(this,"handleReload",()=>{window.location.reload()});pl(this,"handleGoBack",()=>{window.location.href="/admin"});pl(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null})});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(r){return{hasError:!0,error:r,errorInfo:null}}componentDidCatch(r,s){this.setState({errorInfo:s}),console.error("Admin Error Boundary caught error:",r,s),mt(r,{contexts:{react:{componentStack:s.componentStack}},tags:{boundary:"admin",area:"admin-panel"},level:"error"})}render(){return this.state.hasError?n.jsxs(n.Fragment,{children:[n.jsx(Se,{}),n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-cream-100 to-cream-200 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated p-8 max-w-lg w-full border border-cream-200",children:[n.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6",children:n.jsx(kt,{className:"h-8 w-8 text-red-500"})}),n.jsx("h1",{className:"text-2xl font-display font-bold text-neutral-800 mb-2 text-center",children:"Admin Error"}),n.jsx("p",{className:"text-neutral-500 mb-6 text-center",children:"Something went wrong while loading this admin page. This error has been logged for review."}),!1,n.jsxs("div",{className:"flex flex-col gap-3",children:[n.jsxs("button",{onClick:this.handleReset,className:"btn btn-primary w-full flex items-center justify-center gap-2",children:[n.jsx(Xr,{className:"h-4 w-4"}),"Try Again"]}),n.jsxs("button",{onClick:this.handleGoBack,className:"btn btn-secondary w-full flex items-center justify-center gap-2",children:[n.jsx(st,{className:"h-4 w-4"}),"Back to Admin Dashboard"]})]})]})})]}):this.props.children}}const ln=e=>n.jsx(Wne,{children:n.jsx(e,{})});function zne(){return n.jsx(P4,{children:n.jsx(yX,{children:n.jsx(LY,{children:n.jsxs(F6,{children:[n.jsx(_e,{path:"/",element:n.jsx(vX,{})}),n.jsx(_e,{path:"/login",element:n.jsx(wX,{})}),n.jsx(_e,{path:"/signup",element:n.jsx(p2,{})}),n.jsx(_e,{path:"/register",element:n.jsx(p2,{})}),n.jsx(_e,{path:"/how-to-play",element:n.jsx(Tee,{})}),n.jsx(_e,{path:"/scoring",element:n.jsx(j2,{})}),n.jsx(_e,{path:"/scoring-rules",element:n.jsx(j2,{})}),n.jsx(_e,{path:"/timeline",element:n.jsx(Iee,{})}),n.jsx(_e,{path:"/sms",element:n.jsx(vte,{})}),n.jsx(_e,{path:"/l/:code",element:n.jsx(Ste,{})}),n.jsx(_e,{path:"/contact",element:n.jsx(Ote,{})}),n.jsx(_e,{path:"/trivia",element:n.jsx(Jte,{})}),n.jsx(_e,{path:"/castaways",element:n.jsx(Ate,{})}),n.jsx(_e,{path:"/castaways/:id",element:n.jsx(Mte,{})}),n.jsx(_e,{path:"/privacy",element:n.jsx(qte,{})}),n.jsx(_e,{path:"/terms",element:n.jsx(Bte,{})}),n.jsx(_e,{path:"/results/:weekNumber",element:n.jsx(ite,{})}),n.jsxs(_e,{element:n.jsx(pX,{}),children:[n.jsx(_e,{path:"/profile/setup",element:n.jsx(Uee,{})}),n.jsxs(_e,{element:n.jsx(fX,{}),children:[n.jsx(_e,{path:"/dashboard",element:n.jsx(aee,{})}),n.jsx(_e,{path:"/profile",element:n.jsx(Dee,{})}),n.jsx(_e,{path:"/leagues/:leagueId/leaderboard",element:n.jsx(Eee,{})}),n.jsx(_e,{path:"/leaderboard",element:n.jsx(Ete,{})}),n.jsx(_e,{path:"/leagues",element:n.jsx(Tte,{})})]}),n.jsx(_e,{path:"/join",element:n.jsx(wi,{to:"/signup",replace:!0})}),n.jsx(_e,{path:"/join/:code",element:n.jsx(Pee,{})}),n.jsx(_e,{path:"/leagues/create",element:n.jsx(ute,{})}),n.jsx(_e,{path:"/leagues/:id",element:n.jsx(ete,{})}),n.jsx(_e,{path:"/leagues/:leagueId/draft",element:n.jsx(gee,{})}),n.jsx(_e,{path:"/leagues/:leagueId/draft/settings",element:n.jsx(Dte,{})}),n.jsx(_e,{path:"/draft/rankings",element:n.jsx(Fte,{})}),n.jsx(_e,{path:"/leagues/:leagueId/pick",element:n.jsx(kee,{})}),n.jsx(_e,{path:"/leagues/:leagueId/team",element:n.jsx(tte,{})}),n.jsx(_e,{path:"/leagues/:leagueId/settings",element:n.jsx(yte,{})}),n.jsx(_e,{path:"/leagues/:leagueId/invite",element:n.jsx(Ute,{})}),n.jsx(_e,{path:"/leagues/:leagueId/history",element:n.jsx(Lte,{})}),n.jsx(_e,{path:"/leagues/:leagueId/episodes/:episodeId",element:n.jsx(rte,{})}),n.jsx(_e,{path:"/profile/payments",element:n.jsx(Nte,{})}),n.jsx(_e,{path:"/profile/notifications",element:n.jsx($te,{})}),n.jsx(_e,{path:"/seasons/:seasonId/schedule",element:n.jsx(wte,{})}),n.jsx(_e,{path:"/seasons/:seasonId/castaways",element:n.jsx(_te,{})})]}),n.jsxs(_e,{element:n.jsx(xX,{}),children:[n.jsx(_e,{path:"/admin",element:ln(fne)}),n.jsx(_e,{path:"/admin/scoring",element:ln(T2)}),n.jsx(_e,{path:"/admin/castaways",element:ln(I2)}),n.jsx(_e,{path:"/admin/seasons",element:ln(P2)}),n.jsx(_e,{path:"/admin/seasons/:seasonId",element:ln(P2)}),n.jsx(_e,{path:"/admin/seasons/:seasonId/episodes",element:ln(Sne)}),n.jsx(_e,{path:"/admin/seasons/:seasonId/castaways",element:ln(I2)}),n.jsx(_e,{path:"/admin/episodes/:episodeId/scoring",element:ln(T2)}),n.jsx(_e,{path:"/admin/leagues",element:ln(kne)}),n.jsx(_e,{path:"/admin/users",element:ln(Ene)}),n.jsx(_e,{path:"/admin/payments",element:ln(Cne)}),n.jsx(_e,{path:"/admin/jobs",element:ln(Ine)}),n.jsx(_e,{path:"/admin/global",element:ln(Pne)}),n.jsx(_e,{path:"/admin/announcements",element:ln(One)}),n.jsx(_e,{path:"/admin/scoring-rules",element:ln(Lne)}),n.jsx(_e,{path:"/admin/scoring/grid",element:ln($ne)}),n.jsx(_e,{path:"/admin/stats",element:ln(Une)}),n.jsx(_e,{path:"/admin/analytics",element:ln(Bne)}),n.jsx(_e,{path:"/admin/email-queue",element:ln(qne)}),n.jsx(_e,{path:"/admin/health",element:ln(Hne)})]}),n.jsx(_e,{path:"*",element:n.jsx(Cee,{})})]})})})})}OY();const M2=(e,t)=>{if(e>=3)return!1;if(t instanceof TypeError&&t.message.includes("fetch"))return!0;if(t instanceof Error){const r=t.message.toLowerCase();if(r.includes("network")||r.includes("timeout")||r.includes("503")||r.includes("502")||r.includes("504"))return!0}return!1},O2=e=>Math.min(1e3*Math.pow(2,e),8e3),Gne=new C3({defaultOptions:{queries:{staleTime:1e3*60,retry:M2,retryDelay:O2},mutations:{retry:M2,retryDelay:O2}}});a3.createRoot(document.getElementById("root")).render(n.jsx(T.StrictMode,{children:n.jsx(P4,{children:n.jsx(T3,{client:Gne,children:n.jsx(dP,{children:n.jsx(zne,{})})})})}));
