!function(){"use strict";const e="undefined"!=typeof window?window:{assertive:{},benji:{},googletag:{cmd:[]},pbjs:{que:[]},YAHOO:{}};Promise.allSettled=Promise.allSettled||(e=>Promise.all(e.map((e=>e.then((e=>({status:"fulfilled",value:e}))).catch((e=>({reason:e,status:"rejected"})))))));const t=["localhost","aol.com","aol.co.uk","aol.de","autoblog.com","cricket.yahoo.sportz.io","engadget.com","yahoo.com","yahoo.com.hk","yahoo.com.tw"].map((e=>`([\\.\\w\\-]+\\.)?${e.replace(/\./g,"\\.")}`)),n=["cricket.yahoo.net"].map((e=>e.replace(/\./g,"\\."))),i=new RegExp(`^https?://(${t.concat(n).join("|")})(:\\d+)?$`);const s="initialize",o="initialize_ack",r="initialize_i13n",a="intersect",c="render",d="resize_ad",l="start_ads",g="tab_focus",u="block",h="index",p=!0,f="partner",m="testid",b="ncid",_="fr",y="pg_name",E="type",I="benjiDebug",S="auto",v="VERSION",A={ATS_DIRECT:"_lr_atsDirect",SEGMENTS:"sigsphere"},C=["yahoo1p-"];var T,D,R;!function(e){e.DynamicAllocation="Dynamic Allocation",e.DirectSold="Direct Sold"}(T||(T={})),function(e){e.AdX="AdX",e.Infolinks="Infolinks",e.OpenBidding="OpenBidding",e.YahooBroadhandPartnerATT="YahooBroadhandPartnerATT",e.YahooDirectAds="YahooDirectAds",e.YahooHKMarketingOnO="YahooHKMarketingOnO",e.YahooHKMediaService="YahooHKMediaService",e.YahooHouseAds="YahooHouseAds",e.YahooSMEPrograms="YahooSMEPrograms",e.YahooPrebid="YahooPrebid",e.YahooTestAds="YahooTestAds",e.Unknown="Unknown",e.VIZIO="VIZIO"}(D||(D={})),function(e){e.House="House",e.Programmatic="Programmatic",e.Redirect="Redirect",e.Reserved="Reserved"}(R||(R={}));const L={AolDL:{size:[869,424]},BankRateWidget:{size:[970,350]},BankRateWidgetLarge:{size:[750,600]},FeaturedBroker:{size:[758,198]},FeaturedBrokerMweb:{size:[343,310]},Horizon:{breakpoints:{"0,480":[16,9],"1331,Infinity":[16,3],"481,1330":[40,9]},size:[3,1]},HorizonXL:{breakpoints:{"481,Infinity":[16,6]},size:[4,1]},Lighthouse:{breakpoints:{"0,Infinity":[9,16]},size:[2,2]},SmartAssetWidgetLarge:{size:[800,635]},Spotlight:{breakpoints:{"0,480":[8,9]},size:[3,2]},TradeNow:{size:[280,55]}},w={"[1440,1024]":"Login","[2,2]":"Lighthouse","[280,55]":"TradeNow","[3,1]":"Horizon","[3,2]":"Spotlight","[343,310]":"FeaturedBrokerMweb","[758,198]":"FeaturedBroker"},B="https://s.yimg.com/eh/prebid-config",k=`https://s.yimg.com/aaq/prebid/prebid-${v}.js`,P="TABOOLA_PUBLISHERID_MACRO",O=`https://cdn.taboola.com/libtrc/${P}/loader.js`,j="yPrebid-script",N="taboola-script",M="none",U="identityLink",F="pairId",z="sharedId",x="ads:finish:parse",G="caas:article:init",$="darla:complete",H="wafer:ready",Y=["enableRefreshDebounce","enableYahooPrebid"],V="impressionViewable",q="slotOnload",W="slotRenderEnded",K="slotRequested",J="slotResponseReceived",Q="slotVisibilityChanged",X="consentRequested",Z="consentSettled",ee="engineReady",te="nocontent",ne="recRequest",ie="recResponse",se="render",oe="renderFailed",re="TABOOLA_API_FETCH_START_TIME",ae="TABOOLA_API_RESPONSE_RECEIVED_TIME",ce="TABOOLA_CONSENT_REQUESTED",de="TABOOLA_CONSENT_SETTLED",le="TABOOLA_ENGINE_READY",ge="TABOOLA_FLUSH_TIME",ue="TABOOLA_INIT_TIME",he="TABOOLA_JS_FETCH_START_TIME",pe="TABOOLA_READY",fe="TABOOLA_RENDER_TIME",me="auctionEnd",be="auctionInit",_e="bidResponse",ye="bidWon",Ee={e0:"-e0",e1:"-e1",EIDS_URL:"idx.liadm.com",HB_UI_MOD:"hb_uid_mod",LI_OFF:"liveIntentId_off",LI_ON_ENRICHED:"liveintentid_on_enriched",LI_ON_NOT_ENRICHED:"liveintentid_on_not_enriched",LI_REPORTING_KEY:"li-module-enabled",LIVEINTENT_ID:"liveIntentId",LOCAL_STORAGE_KEY:"_li_pbid",NO_ID_SOLUTION:"no_id_solution",t0:"t0",t1:"t1"},Ie={limitedAds:!0,restrictDataProcessing:!0},Se={nonPersonalizedAds:!0},ve={"-1":{advertiser:D.OpenBidding,excludeFromReservedLabeling:!0,type:R.Programmatic},5285812218:{advertiser:D.AdX,excludeFromReservedLabeling:!0,type:R.Programmatic},5286843762:{advertiser:D.YahooHouseAds,excludeFromReservedLabeling:!0,type:R.House},5323114552:{advertiser:D.YahooHKMediaService,excludeFromReservedLabeling:!0,type:R.House},5335252228:{advertiser:D.YahooDirectAds,excludeFromReservedLabeling:!0,type:R.Redirect},5335488228:{advertiser:D.YahooTestAds,excludeFromReservedLabeling:!1,type:R.Reserved},5336411758:{advertiser:D.YahooBroadhandPartnerATT,excludeFromReservedLabeling:!0,type:R.House},5355812158:{advertiser:D.YahooSMEPrograms,excludeFromReservedLabeling:!1,type:R.Reserved},5363643351:{advertiser:D.YahooHKMarketingOnO,excludeFromReservedLabeling:!0,type:R.House},5462617191:{advertiser:D.YahooPrebid,excludeFromReservedLabeling:!0,isYPBAdvertiser:!0,type:R.Programmatic},5627647433:{advertiser:D.VIZIO,excludeFromReservedLabeling:!1,type:R.House},5781437716:{advertiser:D.Infolinks,excludeFromReservedLabeling:!0,type:R.Redirect}},Ae="benji:render",Ce="benji:mounted",Te="benji:ready",De="tabFocus",Re="tabInactive",Le="userAction",we={top_center:[728,90]},Be=["top_right"],ke={aol:"aol",att:"att",bizmail:"bizmail",comcast:"comcast",frontier:"frontier",ftr:"frontier",rogers:"rogers","rogers-acs":"rogers",sbc:"att",sky:"sky",smallbiz:"bizmail",verizon:"verizon","vz-acs":"verizon",ycorp:"ycorp"},Pe={"desktop-lite":"desktop",ereader:"tablet",featurephone:"smartphone","game console":"desktop","media player":"desktop",mobile:"smartphone",phone:"smartphone",setbox:"desktop","smartphone-lite":"smartphone","tablet-lite":"tablet",tv:"desktop"},Oe=["abk","axid","cobrand","colo","device","fr","frtype","ga_property_id","ga_stream_id","lang","lmsid","lu","ncid",f,"pct","pd",y,"pstaid","pt","region","site","theme","ubid","ver","yPageContentType","yPageContentUUID","yPageType","referrer"];var je,Ne;!function(e){e.att="att",e.attarticles="attarticles",e.aol="aol",e.autoblog="autoblog",e.autos="autos",e.engadget="engadget",e.entertainment="entertainment",e.finance="finance",e.fp="fp",e.frontpage="frontpage",e.gma="gma",e.intheknow="intheknow",e.lifestyle="lifestyle",e.money="money",e.movies="movies",e.music="music",e.news="news",e.rivals="rivals",e.sports="sports",e.style="style",e.tech="tech",e.techcrunch="techcrunch"}(je||(je={})),function(e){e.yahoo_mail="yahoo_mail",e.aol_webmail="aol_webmail",e.aol_client_mail="aol_client_mail",e.yahoo_rogers_mail="yahoo_rogers_mail",e.yahoo_bizmail_mail="yahoo_bizmail_mail",e.yahoo_att_mail="yahoo_att_mail",e.yahoo_frontier_mail="yahoo_frontier_mail",e.yahoo_verizon_mail="yahoo_verizon_mail",e.yahoo_login="yahoo_login",e.aol_login="aol_login"}(Ne||(Ne={}));const Me={...Ne,...je},Ue=new Set([je.aol,je.engadget,je.techcrunch,je.rivals,je.autoblog]);var Fe;!function(e){e.validSite="validSite"}(Fe||(Fe={}));const ze="gamDebug",xe="taboolaDebug",Ge="scriptId",$e=`https://cadmus.script.ac/${Ge}/script.js`,He=`https://s.yimg.com/aaq/f10d509c/${Ge}.js`,Ye=!0,Ve="thamba",qe={[je.aol]:"d3decajspqn3ue",[je.autoblog]:"dy348zlstbwc5",[je.autos]:"dy348zlstbwc5",[je.engadget]:"dnt3mrnrwwk1",[je.entertainment]:"d25harazjdfhwp",[je.finance]:"d3lm64ch1c76ug",[je.fp]:"d1ccw66oyq8ex2",[je.frontpage]:"d1ccw66oyq8ex2",[je.intheknow]:"dlt600z2q25zi",[je.lifestyle]:"d12h8q03mwvikl",[je.news]:"d1irmdsmbztlvx",[je.rivals]:"d24s7e71jngyhb",[je.sports]:"d2ftq0ol13ke77",[je.style]:"d12h8q03mwvikl",[je.techcrunch]:"d2wmmfwby4fr6i",[Ne.yahoo_mail]:"d49ph8jz3wewg",[Ne.yahoo_rogers_mail]:"d49ph8jz3wewg",[Ne.yahoo_bizmail_mail]:"d49ph8jz3wewg",[Ne.yahoo_att_mail]:"d49ph8jz3wewg",[Ne.yahoo_frontier_mail]:"d49ph8jz3wewg",[Ne.yahoo_verizon_mail]:"d49ph8jz3wewg",[Ne.aol_webmail]:"d2uev3i365z5q8",[Ne.aol_client_mail]:"d2uev3i365z5q8",[Ne.yahoo_login]:"d1tqrs7vz94d9k",[Ne.aol_login]:"d3axh5emg5ece0",default:"d9pmsg6mvxzz6",sandbox:"d22u7q1sccu6up"},We=[1183335650,980787690,1183336089,959522530,959524012,980751813,980751814,980751815,1197806876,959522366,959524013,1197808162,1197808163,1197808164,1183336116,959523426,1183336115,959523395,1183336116,959523426,1197809770,1197809715,980751846,980751848,980751850,980751822,980751847,980751926,980751927,980751928,1197809825,1197809826,1197809827,1197809822,959523854,959523856,1197809837,1197809838,1197809839,1197809828,1197809829,1197809830,1197809832,959523853,959523839,1197810892,964048854,964048856,1197810152,1197810153,1197810154,1197803691,1197806445,1197806450,1197806455,1197808880,1197808881,1197808882,1197811195,964049433,1197811201,1197811194,964049432,1197811200,1197811197,1197811205,1197811203,1197811196,1197811204,1197811202,1197811191,1197811192,1197811193,1197811555,1197811556,1197811557,1197811558,1197811559,1197811560,1197811613,1197811614,1197811615,1184336193,964024914,964023856,1184336194,964024915,964024916,1197812077,963974959,963974961,1197812080,1197812078,1197812079,1197812081,1197812082,1197812083,963998854,1183836193,1197812150,1197812146,1197812128,1197812125,1197812126,1197812127,1197812133,1197812132,1197812134,1197812129,1197812130,1197812131,1187336201,964298854,1187336202,1197812153,1197812154,1197812155,1197812156,1197812157,1197812158,1197812159,1197812160,1197812161,1197812162,1197812163,1197812164];var Ke;!function(e){e.aol_webtest="aol-webtest",e.validPublisherId="validPublisher",e.yahooweb_network="yahooweb-network",e.yahoo_aol_network="yahoo-aol-network",e.yahoo_engadget_network="yahoo-engadget-network",e.yahoo_twhk_android_network="yahoo-twhk-android-network",e.yahoo_twhk_ios_network="yahoo-twhk-ios-network",e.yahootwhk_network="yahootwhk-network",e.yahoo_hp_att="yahoo-hp-att"}(Ke||(Ke={}));const Je={default:Ke.aol_webtest,[Fe.validSite]:Ke.validPublisherId},Qe={_rid:"yrid",lpstaid:"pstaid"},Xe=[m,b,_,E,I],Ze={bucket:"bucket",hashtag:"hashtag"},et=["abk","axid","bucket","partner","colo","device","lang","lu","region","site","ver","axidDv360","usercountry","cobrand","ubid"],tt=[m,b,_,E,y,"referrer"];var nt;!function(e){e.content="content",e.home="home",e.minihome="minihome",e.utility="utility"}(nt||(nt={}));const it={[nt.content]:"article",[nt.home]:"homepage",[nt.minihome]:"category",[nt.utility]:"category"},st={"es-US":"uses","fr-CA":"cafr"},ot=[je.sports,je.autos,je.engadget],rt={[je.att]:"yhp",[je.attarticles]:"ynews",[je.autos]:"yautos",[je.engadget]:"eng",[je.entertainment]:"yent",[je.finance]:"yfin",[je.fp]:"yhp",[je.gma]:"ynews",[je.lifestyle]:"ylife",[je.money]:"yfin",[je.movies]:"ymov",[je.music]:"yent",[je.news]:"ynews",[je.sports]:"ysports",[je.style]:"ylife",[je.tech]:"ytech"},at=["commerceArticleType","extractedKeyWords","abk","hashtag","pct","pd",y,"pt","pubid","spaceid","lmsid","pstaid","lpstaid","mchnm","_rid","ticker","site","sck","url","expn","p_cpos","senderdomain","senderkaminolevel1","senderkaminolevel2","theme","commercesiteid","yPageContentType","yPageContentUUID","yPageType","ga_property_id","ga_stream_id","referrer"],ct=["ticker"],dt={fetchMarginPercent:-1,mobileScaling:-1,renderMarginPercent:50},lt="RENDER_SUCCEEDED",gt="RENDER_FAILED",ut="SLOT_REQUESTED",ht="GAM_AD_PAGE_LOAD_COMPLETE",pt="SLOT_RESPONSE_RECEIVED",ft="IMPRESSION_VIEWABLE",mt="YPB_AD_STACK_RESOLVED",bt="YPB_CONFIG_LOADED",_t={allowOverlayExpansion:!1,allowPushExpansion:!1,sandbox:!0};var yt;!function(e){e.RESERVED="RESERVED",e.STANDARD="STANDARD"}(yt||(yt={}));const Et=["sellPersonalInformation","accountMatching","crossDeviceMapping"],It=["firstPartyAds"],St=["firstPartyAds","sellPersonalInformation","accountMatching","crossDeviceMapping"],vt=["firstPartyAds","sellPersonalInformation","accountMatching","crossDeviceMapping"],At=["firstPartyAds","sellPersonalInformation","accountMatching","crossDeviceMapping"],Ct={flush:!0},Tt=["newPageLoad"],Dt={"ads-combo-col2Bottom":["LREC","MON"],article_right_col_stack:["mid_right_rec","mid_right_mon"],col2Bottom:["LREC","MON"],mid_right_stack:["LREC","MON"],top_right:["300_250","300_600"],top_right_stack:["LREC","MON"],topCenterAdStack:["REC","top_center"]},Rt=["ay_floor","ay_floor_m","ay_floor_g","ay_hash","hb_adomain","hb_adid","hb_auctionid","hb_bidder","hb_bidder_seatid","hb_cache_host","hb_cache_id","hb_cache_path","hb_cache_region","hb_crid","hb_deal","hb_nbr","pbs_bucket","hb_dsp","hb_dt","hb_format","hb_pb","hb_pb100","hb_responsive","hb_size","hb_source","hb_uid_mod","hb_uuid","expn","p_cpos","p_sec","p_subsec","contentcategorypath"],Lt={analytics:{override:{normalizeSlotId:function(e){return e.replace(/-[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}/,"")}},useHistoryChangeTrigger:!0},entityId:"wnsrvBJmEPrTfrnFX",floor:{addToHashKey:!1,currency:"USD",enabled:!1,limit:{percentage:.95},prebid:!0,priceBuckets:{increment:.01,max:100,min:0}}},wt=["aol","att","autoblog","chromatic","engadget","intheknow","makers","oath","rivals","techcrunch","yahoo","yahoosandbox","compuserve","github","localhost","netscape","rivals-acceptance","rivals-local","rivals-staging","wmconnect","betterme-magazine","olo-magazine"],Bt="dv360",kt="gam",Pt="tbla",Ot="BENJI_START",jt="GPT_READY",Nt="PREBID_START",Mt="PREBID_AUCTION_READY",Ut="PREBID_AUCTION_START",Ft="PREBID_AUCTION_END",zt="GAM_FETCH",xt="GAM_RENDER_START",Gt="GAM_RENDER_END",$t="BENJI_QUEUE_START",Ht="BENJI_QUEUE_FLUSH",Yt="CMP_TCF_LOADED",Vt="CMP_USP_LOADED",qt="CMP_GPP_LOADED",Wt="playing",Kt="ended",Jt={api:[1,2],linearity:1,maxduration:30,mimes:["video/mp4","application/x-mpegURL","application/javascript"],placement:4,playbackmethod:[6],plcmt:4,protocols:[1,2,3,4,5,6,7,8],skip:0},Qt="taboola",Xt=[Ot,jt,Nt,Mt,Ut,Ft,zt,xt,Gt,Ht,$t],Zt=["380x100","869x424"],en=["2x2","9x16","720x1280","1080x1920"],tn={"1080x1920":"2x2","720x1280":"2x2","9x16":"2x2"},nn={"2x2":[[300,600],[2,2]]},sn={6:{animationDuration:3170,collapsedSize:[320,50],expandedSize:[320,150]}},on=["320x150"],rn={kargo:"kargo"},an="p";function cn(t,n=!1){const i=1e3*t,s=new CustomEvent(De),o=new CustomEvent(Re);let r,a=!0,c=null,d=!1;function l(){return!!(!a&&c&&Date.now()-c>i)}n||(e.addEventListener("focus",(()=>{l()&&d&&e.dispatchEvent(s),a=!0,d=!1})),e.addEventListener("blur",(()=>{a=!1,c=Date.now()}))),e.addEventListener("visibilitychange",(()=>{document.hidden?(d=!0,n&&(a=!1,c=Date.now(),r=setTimeout((()=>{document.hidden&&e.dispatchEvent(o)}),3e4))):n&&l()&&d&&(e.dispatchEvent(s),clearTimeout(r),a=!0,d=!1)}))}const dn="https://noa.yahoo.com/p",ln="unknown",gn=e=>{"function"!=typeof window.navigator?.sendBeacon?document.createElement("img").src=e:window.navigator.sendBeacon(e)},un=(e,t)=>{const{spaceid:n,...i}=t,s=Object.keys(i).map((e=>`${e}=${encodeURIComponent(i[e])}`)).join("&");return`${e}?s=${n}&t=${Date.now()}&_I=&_AO=0&_NOL=0&${s}`};function hn(e,t){const{currentI13n:{pd:n=ln,pt:i=ln}}=t,{test:s=ln,colo:o=ln,device:r=ln,lang:a=ln,site:c=ln,s:d=ln,ver:l=ln,partner:g=ln,pl1:u=ln,pl2:h=ln,pl3:p=ln,region:f=ln,src:m=ln,rid:b=ln,usercountry:_=ln}=e.page;return{s:d,src:m,site:c,partner:g,lang:a,region:f,device:r,colo:o,test:s,rid:b,pd:n,pt:i,ver:l,pl1:u,pl2:h,pl3:p,usercountry:_}}function pn(e,t){const{currentI13n:{pd:n=ln,pt:i=ln}}=t,{test:s=ln,colo:o=ln,device:r=ln,lang:a=ln,partner:c=ln,region:d=ln,site:l=ln,src:g=ln,s:u=ln,rid:h=ln,usercountry:p=ln,limitedAds:f=ln,NPA:m=ln,pl1:b=ln,pl2:_=ln,pl3:y=ln}=e.page;return{spaceid:u,src:g,site:l,partner:c,lang:a,region:d,device:r,colo:o,bucket:s,rid:h,limitedAds:f,NPA:m,pd:n,pt:i,usercountry:p,benjiVersion:b,prebidVersion:_,yahooPrebidVersion:y}}function fn(e,t){const n=["script","fetch","link"],i=t.performance.getEntriesByType("resource").filter((t=>t instanceof PerformanceResourceTiming&&t.name.includes(e)&&n.includes(t.initiatorType)));if(!i.length)return!1;try{return i.some((e=>{const t=e.responseStatus;if(!(0===t||t>=200&&t<400))return!1;return e.duration>0&&e.responseEnd>e.startTime}))}catch(e){return!1}}async function mn(t,n){return fn(t,e),fetch(t,n)}const bn="BENJI:LOGGER",_n="beforeunload",yn="visibilitychange",En="https://pbd.yahoo.com/data/logs/benji";const In=t=>{const n=new CustomEvent(bn,{detail:t});e.dispatchEvent(n)};const Sn={ERROR:"ERROR",INFO:"INFO",WARNING:"WARNING"},vn="PREBID",An="LIVEINTENT",Cn="PBJS:FAILSAFE",Tn="https://pbd.yahoo.com/data/logs/ypb",Dn="AUCTION_EVENTS_NOT_FIRED",Rn="AUCTION_FAIL_SAFE_AVERTED",Ln="AUCTION_FAIL_SAFE_TRIGGERED",wn="AY_JS_DISABLED",Bn="AY_JS_FAILURE",kn="AY_JS_SUCCESS",Pn="BP_CONFIG_FAILURE",On="CACHED_EIDS_NOT_SENT",jn="ERROR_AY_SETUP",Nn="ERROR_BIDS_BACK_HANDLER",Mn="ERROR_IN_POST_AUCTION",Un="ERROR_PREBID_SETUP",Fn="FAIL_SAFE_TRIGGERED_BEFORE_AUCTION",zn="FAIL_SAFE_TRIGGERED_BEFORE_BIDS_BACK_HANDLER",xn="FETCH_RETRY_SUCCEEDED",Gn="LI_MODULE_LOADED",$n="LI_MODULE_NOT_LOADED",Hn="LIVEINTENT_FINISHED_IN_TIME",Yn="LIVEINTENT_FINISHED_LATE",Vn="LIVEINTENT_PRESENT_IN_CONFIG",qn="NO_BIDS",Wn="PBJS_FAILURE",Kn="PBJS_SUCCESS",Jn="PREAUCTION",Qn="PREBID_FEATURE_COUNT",Xn="PREBID_SESSION_START",Zn="PREBID_SESSION_SUCCESS",ei="USER_ID_MODULE_BUCKET_CREATED",ti="USER_ID_MODULE_NOT_ELIGIBLE_IP",ni="SIGNALS_SESSION_FAILURE",ii="SIGNALS_SESSION_START",si="CONFIG_FAILURE",oi="OTHER_FAILURE",ri="SEGMENTS_FETCH_FAILURE",ai="IN_BANNER_VIDEO_PLAYER",ci="AD_CONTAINER_MISSING",di="PLAYER_ALREADY_EXISTS",li="PLAYER_RENDER_ERROR",gi="init",ui="TABOOLA_SESSION_FAILURE",hi="TABOOLA_SESSION_START",pi="TABOOLA_SESSION_SUCCESS",fi="ad block plus detected",mi="limited ads or non personalized ads allowed only",bi="configFeature",_i="i13nFeature",yi="default";function Ei(e,t,n){let i,s,o,r,a=-1;if("up"===n)for(i=e.top,s=e.bottom;i<=s;)a=Math.floor((i+s)/2),o=document.elementFromPoint(e.left,a),o===t?s=a-1:i=a+1;else if("down"===n)for(i=e.top,s=e.bottom;i<=s;)a=Math.floor((i+s)/2),o=document.elementFromPoint(e.left,a),o===t?i=a+1:s=a-1;else if("left"===n)for(i=e.left,s=e.right;i<=s;)a=Math.floor((i+s)/2),o=document.elementFromPoint(a,e.top),o===t?s=a-1:i=a+1;else for(i=e.left,s=e.right;i<=s;)a=Math.floor((i+s)/2),o=document.elementFromPoint(a,e.top),o===t?i=a+1:s=a-1;const c="up"===n||"left"===n?i:s;if(r="up"===n||"down"===n?document.elementFromPoint(e.left,c):document.elementFromPoint(c,e.top),r!==t)throw new Error("Element is completely obstructed "+n);return c}const Ii=t=>{if(!t)return!1;if(!((n=t).offsetWidth||n.offsetHeight||n.getClientRects().length))return!1;var n;const i=t.getBoundingClientRect(),s=e.innerWidth,o=e.innerHeight;if(i.top>o||i.bottom<0||i.right<0||i.left>s)return!1;const r=i.left<0?1:i.left+1,a=i.right>s?s-1:i.right-1,c=i.top>0?i.top+1:1,d=i.bottom>o?o-1:i.bottom-1,l=i.height*i.width;if((d-c)*(a-r)/l<.5)return!1;if(function(e,t){const{left:n,top:i,bottom:s,right:o}=e,r=[[n,i],[n,s],[o,i],[o,s]];for(const[e,n]of r){const i=document.elementFromPoint(e,n);if(i!==t&&!t.contains(i))return!0}return!1}({bottom:d,left:r,right:a,top:c},t)){const e=function(e,t,n){const{top:i,bottom:s,left:o,right:r}=e;try{const e=Ei({bottom:s,left:o,right:r,top:i},t,"up"),a=Ei({bottom:s,left:o,right:r,top:e},t,"down"),c=Ei({bottom:a,left:o,right:r,top:e},t,"left");return(a-e)*(Ei({bottom:a,left:c,right:r,top:e},t,"right")-c)/n}catch(e){return 0}}({bottom:d,left:r,right:a,top:c},t,l);return!(e<.5)&&e>=.5}return!0};function Si(t){if(Ki("benji-enableBrowserFocusCheck")&&"function"==typeof e.document.hasFocus&&!e.document.hasFocus())return!1;const n=e.document.getElementById(t);if(!n)return!1;const i=n?.querySelector("iframe"),s=n?.querySelector(".evp-player iframe"),o=s||i;return o instanceof HTMLElement&&Ii(o)}function vi(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Ai(e,t,n){const i=e.store.getAdComponent(t,n);if(i)return[i];const s=e.store.getRegionAdComponents(t);if(!s?.length)return[];let o;try{return o=n.startsWith("/")&&n.endsWith("/")?new RegExp(n.slice(1,-1)):n.startsWith("*")&&n.endsWith("*")?new RegExp(vi(n.slice(1,-1))):n.startsWith("~")?new RegExp(vi(n.slice(1))):new RegExp(vi(n)),s.filter((e=>o.test(e.id)))}catch{return[]}}function Ci(e,t){return"string"==typeof t?function(e,t){if(!t.includes(":"))return e.store.getRegionAdComponents(t);const[n,i]=t.split(":");return i?Ai(e,n,i):[]}(e,t):function(e,t){if(!t?.length)return[];const n=[],i=new Set;return t.forEach((t=>{if(!t)return;const s=t.split(":");if(!function(e){return 1===e.length?!!e[0]:2===e.length&&(!!e[0]&&!!e[1])}(s))return;if(1===s.length){const t=e.store.getAdComponentById(s[0]);return void(t&&!i.has(t.id)&&(i.add(t.id),n.push(t)))}const[o,r]=s;Ai(e,o,r).forEach((e=>{i.has(e.id)||(i.add(e.id),n.push(e))}))})),n}(e,t)}const Ti=(e,t)=>{let n,i;t||(t=4),i=e;for(let e=0;e<=t;e++)(i?.id&&"string"==typeof i.id&&(i.id.startsWith("sda-")||i.id.toLowerCase().startsWith("taboola-")||i.id.toLowerCase().startsWith("ad-")||i.id.toLowerCase().includes("-ad-")||i.id.toLowerCase().endsWith("-ad"))||i?.className?.startsWith("ad-")||i?.classList?.contains("native-ad")||i?.classList.contains("ad-container"))&&(n=i),i=i&&i.parentElement;return n};function Di(e){if(e<0||e>100)return!1;return Math.floor(100*Math.random())<e}function Ri(e,t){const n={};return Object.keys(e).forEach((i=>{let s=e[i];t.includes(i)&&(s=Array.isArray(s)?s.map((e=>Li(e))):Li(s)),n[i]=s})),n}function Li(e){let t=function(e){const t=/%[0-9A-Fa-f]{2}/g,n=e.replace(t,(e=>{try{return decodeURIComponent(e)}catch(t){return e}}));return n}(e);return[/(<([^>]+)>)/gm,/[\r\n]+/gm].forEach((e=>{t=t.replace(e,"")})),t}function wi(e){const t={};return Object.keys(e).forEach((n=>{void 0!==e[n]&&(t[n]=e[n])})),t}function Bi(e){return!!(e&&"object"==typeof e&&e.hasOwnProperty("path")&&e.hasOwnProperty("size"))}function ki(e){return"placement"in e&&"mode"in e}const Pi=(e,t)=>{const n=function(e,t){if(e&&(n=e,Object.values(Ke).includes(n)))return e;{const e=void 0===t||!Je.hasOwnProperty(t);return Je[e?yi:t]}var n}(t,e),i=encodeURIComponent(n);return O.replace(P,i)},Oi=(e,t,n)=>e&&t&&n?`${e}-${t}-${n}`.toLowerCase():"",ji=e=>{const t=e||"2.0";return k.replace(v,t)};function Ni(e,t){const n={};for(const i of Oe)"axid"===i&&t?n[i]=t:void 0!==e[i]&&""!==e[i]&&(n[i]=e[i]);return[Object.entries(n).map((e=>e.join(":"))).join(";"),"",e.spaceid,"","","",e.bucket,""].join("|")}function Mi(e){return Object.values(Ne).includes(e)}function Ui(e){e.startPrebidAuction((()=>{e.gptComponent.refresh([e.slot])}))}function Fi(e){return"string"==typeof e||Array.isArray(e)&&1===e.length&&"string"==typeof e[0]||Array.isArray(e)&&2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]}function zi(e,t){const n=Fi(e)?[e]:e,i=Fi(t)?[t]:t,s=n.filter((e=>function(e,t){const n=JSON.stringify(t);return e.some((e=>JSON.stringify(e)===n))}(i,e)));return 1===s.length?s[0]:s}function xi(e){return Dt[e]||(e=e?.replace(/--\d+$/,"")),Dt[e]}function Gi(e,t){const n=t&&xi(t);if(n){const t=n[1];return e.includes(t)}return!1}function $i(e){try{const t=performance.getEntriesByType("resource").find((t=>t.name.includes(e)));if(!t)return null;const{startTime:n,responseEnd:i}=t;return{responseEnd:i,startTime:n}}catch(e){}return null}function Hi(t){let n="";if(t)try{const i=JSON.parse(e.atob?.("string"==typeof t?t:""));n=Array.isArray(i?.envelope)?i.envelope.join():""}catch(e){}return n}function Yi(e){const t=document.getElementById(e);if(!t)return;return(Ti(t)||t).getBoundingClientRect()}function Vi(e,t){let n=Date.now();return function(){n+t-Date.now()<0&&(e(),n=Date.now())}}function qi(){let t;try{t=e.crypto.randomUUID()}catch(e){t=Math.floor(1e15*Math.random()).toString()}return t}function Wi(e,t){if(!Xe.includes(t))return null;return new URLSearchParams(e.location?.search).get(t)}function Ki(t){let n=!1;try{n=function(){if(!e.benji)return[];const t=Object.keys(e.benji.config?.feature||{}).filter((t=>e.benji.config?.feature[t])),n=e.benji.config?.i13n?.feature||[];return Array.from(new Set([...t,...n]))}().includes(t)}catch(e){In({logType:Sn.ERROR,message:`Error checking feature flag ${t}: ${e}`,source:"benji"})}return n}function Ji(e){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e,{once:!0}):e()}const Qi={},{PAGE_KV_MISMATCH:Xi,PAGE_KV_MISSING:Zi,KV_MONITOR:es}={KV_MONITOR:"KV_MONITOR",PAGE_KV_MISMATCH:"PAGE_KV_MISMATCH",PAGE_KV_MISSING:"PAGE_KV_MISSING"},ts=(t,n)=>{e.benji.logger.sendDebugBeacon({logType:Sn.INFO,message:Zi,messageDetails:`Missing: ${t} - ${n}`,source:es},!0)},ns=(t,n,i)=>{e.benji.logger.sendDebugBeacon({logType:Sn.INFO,message:Xi,messageDetails:`${t} - Expected: ${n} vs Actual: ${i}`,source:es},!0)},is=(t,n)=>{const i=(e=>{const t=new URL(e).searchParams.get("cust_params");if(!t)return null;const n=decodeURIComponent(t);return new URLSearchParams(n)})(n);if(i)for(const[e,n]of Object.entries(t)){const t=i.get(e);if(!t){ts(e,n);continue}t!==(Array.isArray(n)?n.join(","):n)&&ns(e,n,t)}else e.benji.logger.sendDebugBeacon({logType:Sn.INFO,message:Zi,messageDetails:"Missing: cust_params",source:es},!0)};function ss(t){t.getEntriesByType("resource").forEach((t=>{var n;if(t.name.includes("https://securepubads.g.doubleclick.net/gampad/ads"))try{n=t.name,is(Qi,n)}catch(t){e.benji.logger.sendDebugBeacon({logType:Sn.ERROR,message:"GAM KV Monitor Error",messageDetails:`Error validating Page KVs: ${t}`,source:es},!0)}}))}const os=Boolean(e?.console),rs=Boolean(os&&e?.console.info),as=Boolean(os&&e?.console.error);function cs(e){ls()&&rs&&console.info.apply(console,gs(e,"INFO:"))}function ds(e){ls()&&as&&console.error.apply(console,gs(e,"ERROR:"))}function ls(){let t=!1;const n=Wi(e,I);return"function"==typeof e.pbjs?.getConfig&&(t=e.pbjs.getConfig("debug")),"1"===n||!!t}function gs(e,t){const n=[e];return t&&n.unshift(t),n.unshift(`display: inline-block; color: #fff; background: ${"#0e7f0e"}; padding: 1px 4px; border-radius: 3px;`),n.unshift("%cBenji"),n}function us(t){return"1"===(t||e?.benji?.config)?.i13n?.ynet}function hs(t,n,i,s,o){if(!us(o))return;const r={args:i,method:n,timestamp:s};if(e.benji.debug||(e.benji.debug={},e.benji.debug.logs={}),e.benji.debug.logs){const n={benji:"benjiAPILogs",google:"googleAPILogs",prebid:"prebidAPILogs",taboola:"taboolaAPILogs"}[t];n&&(e.benji.debug.logs[n]=e.benji.debug.logs[n]||[]).push(r)}}class ps{_googletag;features;refreshQueue;debounceTimer;constructor(){return this.features={},this.refreshQueue=[],this.debounceTimer=null,this._googletag={},this._googletag.cmd=[],void 0!==e&&(e.googletag?this._googletag=e.googletag:e.googletag=this._googletag,this.addCallbackToCmdQueue((()=>{e.benji.logger.updateDatastore({[jt]:Math.round(e.performance.now())})}))),this}addCallbackToCmdQueue(e){hs("google","addCallbackToCmdQueue",{callback:e?.toString()},Date.now()),this._googletag.cmd.push((()=>{e()}))}addEventListener(e,t){hs("google","addEventListener",{event:e,handler:t?.toString()},Date.now()),this._googletag.cmd.push((()=>{this._googletag.pubads().addEventListener(e,t)}))}create(...e){hs("google","create",{args:e},Date.now());const[t,n]=e,{path:i,size:s,id:o,gptSetting:r}=t,{safeFrameConfig:a={}}=r||{};this._googletag.cmd.push((()=>{const e=this._googletag.defineSlot(i,s,o).setSafeFrameConfig(wi(a)).addService(this._googletag.pubads());n.slot=e}))}clearTargeting(e){hs("google","clearTargeting",{key:e},Date.now()),delete Qi[e],this._googletag.cmd.push((()=>{0!==this._googletag.pubads().getTargeting(e).length&&this._googletag.pubads().clearTargeting(e)}))}clear(e){hs("google","clear",{slots:e.map((e=>e?.getSlotId()?.getId()))},Date.now()),this._googletag.cmd.push((()=>{this._googletag.pubads().clear(e)}))}destroy(e){hs("google","destroy",{slots:e.map((e=>e?.getSlotId()?.getId()))},Date.now()),this._googletag.cmd.push((()=>{this._googletag.destroySlots(e)}))}enableLazyLoad(e){hs("google","enableLazyLoad",{config:e||null},Date.now()),this._googletag.cmd.push((()=>{const t={...dt,...e};this._googletag.pubads().enableLazyLoad({fetchMarginPercent:t.fetchMarginPercent,mobileScaling:t.mobileScaling,renderMarginPercent:t.renderMarginPercent})}))}enableSizeMappingForSlot(e,t,n){hs("google","enableSizeMappingForSlot",{adComponent:e.id,adSize:n,viewportSize:t},Date.now()),this._googletag.cmd.push((()=>{const i=this._googletag.sizeMapping().addSize(t,n).build();e.slot?.defineSizeMapping(i)}))}refresh(e){hs("google","refresh",{slots:e.map((e=>e?.getSlotId()?.getId()))},Date.now()),this.features.enableRefreshDebounce?this._refreshWithDebounce(e):this._refresh(e)}render(...e){hs("google","render",{args:e},Date.now());const[t,n]=e;this._googletag.cmd.push((()=>{n&&n.slot?this.refresh([n.slot]):this._display(t)}))}setInitialPageUrl(t){hs("google","setInitialPageUrl",{urlFromI13n:t},Date.now()),this._googletag.cmd.push((()=>{const n=t||e.location.href;this._googletag.pubads().set("page_url",n)}))}setPrivacySettings(e){hs("google","setPrivacySettings",{privacySettings:e},Date.now()),this._googletag.cmd.push((()=>{this._googletag.pubads().setPrivacySettings(e)}))}setPublisherProvidedId(e){hs("google","setPublisherProvidedId",{ppid:e},Date.now()),this._googletag.cmd.push((()=>{this._googletag.pubads().setPublisherProvidedId(e)}))}setPublisherProvidedSignalsTaxonomies(e){hs("google","setPublisherProvidedSignalsTaxonomies",{taxonomies:e},Date.now()),this._googletag.cmd.push((()=>{this._googletag.setConfig({pps:{taxonomies:e}})}))}setupService(...e){hs("google","setupService",{args:e},Date.now());const[t,n]=e;this.features=t,this._googletag.cmd.push((()=>{this._googletag.pubads().disableInitialLoad(),this._googletag.pubads().enableSingleRequest(),this._googletag.pubads().setForceSafeFrame(!0);const{safeFrameConfig:e={}}=n??{},t={..._t,...wi(e)};this._googletag.pubads().setSafeFrameConfig(t),this._googletag.enableServices()}))}setTargeting(e){hs("google","setTargeting",{kvs:e},Date.now()),Object.assign(Qi,e),this._googletag.cmd.push((()=>{Object.keys(e).forEach((t=>{"bucket"===t&&Ki("benji-addBucketToSlotKVs")||this._googletag.pubads().setTargeting(t,e[t])}))}))}setPageUrl(e){hs("google","setPageUrl",{url:e},Date.now()),this._googletag.cmd.push((()=>{this._googletag.pubads().get("page_url")!==e&&this._googletag.pubads().set("page_url",e)}))}getTargetings(e,t){hs("google","getTargetings",{callback:t?.toString(),keys:e},Date.now()),this._googletag.cmd.push((()=>{const n={};e.forEach((e=>{n[e]=this._googletag.pubads().getTargeting(e).join(",")})),t&&t(n)}))}setTargetingForSlot(e,t){hs("google","setTargetingForSlot",{adComponent:e,kvs:t},Date.now()),this._googletag.cmd.push((()=>{Object.keys(t).forEach((n=>{const i=t[n];e.slot.setTargeting(n,i),void 0===e.kvs&&(e.kvs={}),e.kvs[n]=i}))}))}collapseEmptyDivs(e){hs("google","collapseEmptyDivs",{shouldCollapseBeforeAdFetch:e||null},Date.now()),this._googletag.cmd.push((()=>{this._googletag.pubads().collapseEmptyDivs(e)}))}_display(e){hs("google","_display",{input:e},Date.now()),this._googletag.cmd.push((()=>{this._googletag.display(e)}))}_refresh(e){hs("google","_refresh",{slots:e.map((e=>e?.getSlotId()?.getId()))},Date.now()),this._googletag.cmd.push((()=>{this._googletag.pubads().refresh(e)}))}_refreshWithDebounce(e){hs("google","_refreshWithDebounce",{slots:e.map((e=>e?.getSlotId()?.getId()))},Date.now()),this.refreshQueue.push(...e),this.debounceTimer&&clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout((()=>{this._refresh(this.refreshQueue),this.refreshQueue=[],this.debounceTimer=null}),20)}}const fs=function(e,t){let n=0;return(...i)=>{const s=performance.now();if(!(s-n<t))return n=s,e(...i)}}((function(){const t=new CustomEvent(Le);e.dispatchEvent(t)}),200);const ms={},bs={},_s={},ys={},Es={},Is=[];function Ss(){this.gpt.addEventListener(V,(e=>{const t=e.slot.getSlotElementId(),n=bs[t];n&&n()})),this.gpt.addEventListener(Q,(e=>{const t=e.slot.getSlotElementId(),n=ms[t];n&&n(e.inViewPercentage)}))}function vs(){["pointermove","pointerup","scroll","keydown"].forEach((t=>{e.addEventListener(t,fs)})),e.addEventListener(Le,(()=>{for(;Is.length>0;){const e=Is.pop();e&&e()}}))}const As="liveintent.com";function Cs(e){return e.source===As||e.uids&&e.uids.some((e=>e.ext&&e.ext.provider===As))}function Ts(e){return e.userIdAsEids&&e.userIdAsEids.some(Cs)}function Ds(e){return e.userSync?.userIds?.find((e=>e.name===Ee.LIVEINTENT_ID))}function Rs({areBidsEnrichedByLiveIntent:e,liveIntentEnabled:t,instrumentation:n}){const{LI_OFF:i,LI_ON_ENRICHED:s,LI_ON_NOT_ENRICHED:o}=n;return t?e?s:o:i}var Ls={applyLiveIntentSampling:function(t){const n=Di(98);return void 0===e.liModuleEnabled&&(e.liModuleEnabled=n,e.liTreatmentRate=100/98),e.liModuleEnabled?t:t.filter((e=>e.name!==Ee.LIVEINTENT_ID))},areBidsEnrichedByLiveIntent:!1,getLiveIntentInstrumentationKeys:function(e){const t=Ds(e);if(!t)return Ee;let n=Ee;const{overrides:i}=t;return i&&(n={...Ee,...i}),n},getLiveIntentTargeting:Rs,hasLiveIntentAdUnit:function(e){return e.bids&&e.bids.some(Ts)},hasLiveIntentBid:Ts,instrumentation:Ee,isLiveIntentEnabled:function(e){return!!Ds(e)},isLiveIntentSource:Cs,liveIntentEnabled:!1,liveIntentInOriginalConfig:!1,logCachedEidsNotSent:function(t){!t&&function(){try{const t=e.localStorage?.getItem?.(Ee.LOCAL_STORAGE_KEY);return!!t}catch(e){return!1}}()&&In({logType:Sn.ERROR,message:On,source:`${vn}:${An}`})},logIfLiveIntentRequestFinishedInTime:function(e){const t=$i(Ee.EIDS_URL),n=$i("https://pbs.yahoo.com/openrtb2/auction");if(!t||!n)return;const i=t.responseEnd<=n.startTime?Hn:Yn;e.sendDebugBeacon({message:`timeDifference:${Math.round(Math.abs(t.responseEnd-n.startTime))}ms`,type:i})},logLiModuleLoadStatus:function(t){const n=e.liQ_instances?.length>0?Gn:$n;t.sendDebugBeacon({logType:Sn.INFO,message:n,source:`${vn}:${An}`})},sendLiveIntentBeacon:function({instrumentation:e,areBidsEnrichedByLiveIntent:t,liveIntentEnabled:n,logger:i}){i.sendDebugBeacon({type:"YAHOO_PREBID_LIVEINTENT_TARGETING",[e.HB_UI_MOD]:Rs({areBidsEnrichedByLiveIntent:t,instrumentation:e,liveIntentEnabled:n})})}};const ws=["auctionEnd","auctionInit","beforeBidderHttp","bidAccepted","bidAdjustment","bidderDone","bidderError","bidRejected","bidRequested","bidResponse","bidTimeout","bidWon"];var Bs={addNewAuctionToTracker:function(e,t){const n={auctionId:e,events:{auctionEnd:!1,auctionInit:!1,beforeBidderHttp:!1,bidAccepted:!1,bidAdjustment:!1,bidderDone:!1,bidderError:!1,bidRejected:!1,bidRequested:!1,bidResponse:!1,bidTimeout:!1,bidWon:!1}};t[e]=n},auctionEventsTrackerList:{},completedAuctions:0,logAuctionEvents:function(e){const{events:t,auctionId:n}=e,i=[];for(const e in t)t[e]||i.push(e);i.length&&((e,t,n)=>{In({logType:Sn.INFO,message:n,messageDetails:`auctionId:${e}|events:${t.join(",")}`,source:`${vn}:AUCTION`})})(n,i,Dn)},startAuctionEventsTracker:function(e,t){ws.forEach((n=>{e.onEvent(n,(e=>{const i=t[e.auctionId];i&&(i.events[n]=!0)}))}))}};const ks="fast",Ps="normal",Os={config:{setConfig:{bidderTimeout:500,s2sConfig:{timeout:500,tmax:500},userSync:{auctionDelay:0}}},identifier:{locs:["top_center"]}},js={delay:200},Ns={[ks]:Os,[Ps]:js},Ms=(e,t)=>e??t??2e3;function Us(e,t){const n=e.config?.setConfig?.userSync?.auctionDelay??t.setConfig.userSync?.auctionDelay??300,i=e.config?.setConfig?.bidderTimeout??t.setConfig.bidderTimeout??2e3;let s;return s=Array.isArray(t.setConfig.s2sConfig)?t.setConfig.s2sConfig.map((t=>({timeout:Ms(e.config?.setConfig?.s2sConfig?.timeout,t.timeout),tmax:Ms(e.config?.setConfig?.s2sConfig?.tmax,t.tmax)}))):{timeout:Ms(e.config?.setConfig?.s2sConfig?.timeout,t.setConfig.s2sConfig?.timeout),tmax:Ms(e.config?.setConfig?.s2sConfig?.tmax,t.setConfig.s2sConfig?.tmax)},{setConfig:{bidderTimeout:i,s2sConfig:s,userSync:{auctionDelay:n}}}}const Fs={_batchPipeline(e,t){if(!e.length||!this.requestBids||!this.pbjs)return;const n=this.pbjs.getConfig();if(!n)return;const i={...n};if(t?.setConfig.bidderTimeout&&(i.bidderTimeout=t?.setConfig.bidderTimeout),t?.setConfig.userSync?.auctionDelay&&(i.userSync=i.userSync||{},i.userSync.auctionDelay=t?.setConfig.userSync.auctionDelay),t?.setConfig.s2sConfig){const e=t.setConfig.s2sConfig;if(Array.isArray(e)){const t=i.s2sConfig;e.forEach(((e,n)=>{t[n].timeout=e.timeout,t[n].tmax=e.tmax}))}else{const t=i.s2sConfig;t.timeout=e.timeout,t.tmax=e.tmax}}t&&this.pbjs.setConfig(i);const s=qi();this.requestBids({auctionId:s,auctionItems:e})},_process(e){const t={[ks]:[],[Ps]:[]};e.forEach((e=>{const{stackGroup:n,loc:i}=e,{stackGroups:s,locs:o}=this.batchRule[ks]?.identifier;n&&s&&s.includes(n)||i&&o&&o.includes(i)?t[ks].push(e):t[Ps].push(e)})),Object.entries(t).forEach((([e,n])=>{if(!n.length)return;const i=this.features.enablePrebidBatchingDelay&&!!t[ks].length&&!!this.batchRule[e].delay,s=this.features.enablePrebidBatchingConfigs?this.batchConfigMap[e]:void 0;setTimeout((()=>{this._batchPipeline(n,s)}),i?this.batchRule[e].delay:0)}))},add(e){this.auctionQueue.push(e),this.debounceTimer&&clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout((()=>{const e=qi();this.features.enablePrebidBatching?this._process(this.auctionQueue):null!==this.requestBids&&this.requestBids({auctionId:e,auctionItems:[...this.auctionQueue]}),this.auctionQueue=[],this.debounceTimer=null}),20)},auctionQueue:[],batchConfigMap:{},batchRule:Ns,debounceTimer:null,features:{},pbjs:null,requestBids:null,start(e){const{pbjs:t,requestBids:n,prebidConfig:i,features:s}=e;if(this.requestBids=n,this.pbjs=t,this.features=s||{},this.features.enablePrebidBatching){if(this.features.enablePrebidBatchingRemoteConfigs){const e=i.batchConfig;e&&e[ks]&&e[Ps]?this.batchRule=i.batchConfig:(this.features.enablePrebidBatching=!1,this.features.enablePrebidBatchingDelay=!1,this.features.enablePrebidBatchingConfigs=!1,this.features.enablePrebidBatchingRemoteConfigs=!1,this.batchRule=Ns)}this.batchConfigMap[ks]=Us(this.batchRule[ks],i),this.batchConfigMap[Ps]=Us(this.batchRule[Ps],i)}}};var zs={setAYAnalyticsCustomParameter:function(e,t){if(!t)return;"string"==typeof t&&(t=[t]);const n=t.filter((e=>e.indexOf("-batchconfig-")>-1||e.startsWith("benji-")||e.startsWith("prebid-"))).join(",");n&&(e.assertiveQueue=e.assertiveQueue||[],e.assertiveQueue.push((function(){e.assertive.setConfig("analytics.custom.custom_1",n)})))},setAYTrafficShaping:function(e){Ki("benji-enableAYTrafficShaping")&&(e.assertiveQueue=e.assertiveQueue||[],e.assertiveQueue.push((function(){e.assertive.setConfig("reduction",{enabled:!0,limit:{excludeBidders:["ayPrebidServer","yahooPrebidServer"]}})})))}};function xs(e){return e&&ke[e]||M}function Gs(e,t){const n=function(e){const t=void 0!==e&&qe.hasOwnProperty(e)?e:yi,n=qe[t];let i=!1;return t in Ne?i=!0:t!==Me.finance&&(i=Di(1)),i?$e.replace(Ge,n):He.replace(Ge,n)}(t);Js({async:!0,id:"f10d509c-script",tagSrc:n,WIN:e})}function $s(e,t,n){const i=ji(),s=e.benji.config?.setting?.resourceRetryCount??2;Js({id:j,onerrorCb:n,onloadCb:t,retries:s,tagSrc:i,WIN:e})}function Hs(e,t){let n=t;return"object"==typeof e&&e.target instanceof HTMLScriptElement&&(n=e.target.src||t),n||"Unknown"}const Ys=200,Vs=3e3,qs=2;async function Ws(e,t){const{id:n,WIN:i}=e,s=(e.failures||0)+1;i.document.getElementById(n)?.remove();const o=function(e){const t=Ys*Math.pow(qs,e-1),n=Math.min(t,Vs),i=.2*n;return n+Math.random()*i}(s);return await new Promise((e=>setTimeout(e,o))),Js({...e,failures:s,retries:t-1})}function Ks(e,t,n){const{failures:i,tagSrc:s,WIN:o,onloadCb:r,onerrorCb:a,id:c}=t;e.onload=function(e){i&&i>0&&function(e,t,n){e.sendDebugBeacon({message:xn,messageDetails:`${t} fetch succeeded after ${n} attempts`,type:Sn.INFO})}(o.benji.logger,s,i),r?.(this,e)},e.onerror=async(e,i)=>{n>0?await Ws(t,n):(o.document.getElementById(c)?.remove(),a?.(e,i))}}function Js(e){const t=Ki("benji-enableAssetAsync"),{tagSrc:n,id:i,WIN:s,async:o=t,defer:r=!1,retries:a=0}=e;if(function(e,t){return Array.from(t.document.scripts).some((t=>t.src.includes(e)))}(n,s)&&fn(n,s))return void e.onloadCb?.(null);const c=function(e,t,n,i,s=!1){const o=e.document.createElement("script");return o.type="text/javascript",o.src=t,o.id=n,o.classList.add("benji-asset"),o.async=i,o.defer=s,o}(s,n,i,o,r);Ks(c,e,a),s.document.head.append(c)}const Qs={};function Xs(e,t){return t&&Mi(t)?{gptEvent:e}:{}}function Zs(e){return e===lt||e===gt||e===ut||e===ht||e===pt||e===ft||e===mt||e===bt}function eo(e){e.onEvent(ye,(e=>{const t=function(e){const{adUnitCode:t,width:n,height:i}=e;return{data:{height:i,id:t,size:[n,i],width:n},name:lt}}(e);Qs[lt]&&Qs[lt].forEach((e=>{e(t)}))}))}const to={},no=(e,t)=>`Video event for ${e} => ${t}`,{AD_START:io,AD_PROGRESS:so,AD_PAUSE:oo,AD_RESUME:ro,AD_ERROR:ao,AD_COMPLETE:co,AD_END:lo,PLAYER_ERROR:go,PLAYBACK_START:uo}={AD_COMPLETE:"AD_COMPLETE",AD_END:"AD_END",AD_ERROR:"AD_ERROR",AD_PAUSE:"AD_PAUSE",AD_PROGRESS:"AD_PROGRESS",AD_RESUME:"AD_RESUME",AD_START:"AD_START",DATERANGE_ENDED:"DATERANGE_ENDED",DATERANGE_STARTED:"DATERANGE_STARTED",DIMENSIONS_CHANGE:"DIMENSIONS_CHANGE",DOCK_CHANGE:"DOCK_CHANGE",FULLSCREEN_CHANGE:"FULLSCREEN_CHANGE",ITEM_END:"ITEM_END",ITEM_REQUEST:"ITEM_REQUEST",ITEM_START:"ITEM_START",MUTE_CHANGE:"MUTE_CHANGE",PLAYBACK_COMPLETE:"PLAYBACK_COMPLETE",PLAYBACK_END:"PLAYBACK_END",PLAYBACK_ERROR:"PLAYBACK_ERROR",PLAYBACK_PAUSE:"PLAYBACK_PAUSE",PLAYBACK_PROGRESS:"PLAYBACK_PROGRESS",PLAYBACK_RESUME:"PLAYBACK_RESUME",PLAYBACK_SEEKING:"PLAYBACK_SEEKING",PLAYBACK_START:"PLAYBACK_START",PLAYER_ERROR:"PLAYER_ERROR",PLAYER_READY:"PLAYER_READY",PLAYLIST_END:"PLAYLIST_END",PLAYLIST_ITEM_ADD:"PLAYLIST_ITEM_ADD",PLAYLIST_ITEM_REMOVE:"PLAYLIST_ITEM_REMOVE",PLAYLIST_POSITION_CHANGE:"PLAYLIST_POSITION_CHANGE",RENDER_FAIL:"RENDER_FAIL",TIMED_METADATA:"TIMED_METADATA",UI_INTERACT:"UI_INTERACT",VOLUME_CHANGE:"VOLUME_CHANGE"},ho=e=>to[e.adUnitCode]?to[e.adUnitCode]?.playerSize:(e=>[e=>e.width&&e.height&&{height:e.height,width:e.width},e=>{const[t,n]=(e.size||"").split("x").map(Number);return t&&n&&{height:n,width:t}},e=>{const[t,n]=e.mediaTypes?.banner?.sizes?.[0]||[];return t&&n&&{height:n,width:t}},e=>{const[t,n]=(e.adserverTargeting?.hb_size||"").split("x").map(Number);return t&&n&&{height:n,width:t}},e=>{const[t,n]=e.sizes?.[0]||[];return t&&n&&{height:n,width:t}}].reduce(((t,n)=>t||n(e)),null)||{height:250,width:300})(e),po=e=>{const{adId:t,adUnitCode:n,bidder:i,creativeId:s,mediaType:o,source:r,statusMessage:a}=e,c=ho(e);return{adId:t,adSize:`${c.width}x${c.height}`,adUnitCode:n,auctionSource:r,bidder:i,creativeId:s,mediaType:o,statusMessage:a}},fo=e=>{if(!to[e])return;const t=to[e].playerInstance;t&&t.destroy(),delete to[e]},mo=(e,t)=>{const n=po(t);In({logType:Sn.ERROR,message:e,messageDetails:JSON.stringify({...n}),source:ai})},bo=(e,t)=>{In({logType:Sn.INFO,message:e,messageDetails:`adUnitCode: ${t}`,source:ai})},_o=t=>{if(to[t]){const n=to[t],i={adUnitCode:t,currentTime:n.currentTime,duration:n.duration,status:n.status},s={logType:Sn.INFO,message:"IBV_REFRESH",...i,source:ai};e.benji.logger.sendPBDLog(s,s.source,Tn)}},yo={[co]:e=>{cs(no(e.adUnitCode,co)),to[e.adUnitCode].status=Kt},[lo]:t=>{to[t.adUnitCode].status=Kt;const n=e.benji.store.getAdComponentById(t.adUnitCode);if(!n||mr(n)){if(n){const i=to[t.adUnitCode],s=e.benji.config?.setting?.refresh?.duration,o=e.benji.config?.feature?.enableAdStacking,r=n.stackGroup,a=i?.duration&&s&&i.duration>s;o&&r&&!a||n?.checkAndRefreshAd()}cs(no(t.adUnitCode,lo))}},[ao]:e=>{ds(no(e.adUnitCode,ao)),fo(e.adUnitCode)},[oo]:t=>{to[t.adUnitCode].status="paused";const n=e.benji.store.getAdComponentById(t.adUnitCode);if(n&&!mr(n))return;cs(no(t.adUnitCode,oo));n&&!n.stackGroup&&n.eligibleForTimedRefresh&&(t=>{const n=e.benji.store.getAdComponentById(t);!n||n&&!mr(n)||(n?.refreshTimeoutActive&&clearTimeout(n.refreshTimeoutActive),n.refreshTimeoutActive=setTimeout((()=>{n?.checkAndRefreshAd()}),1e3))})(t.adUnitCode)},[so]:e=>{e.playerEventData.currentTime&&(to[e.adUnitCode].currentTime=e.playerEventData.currentTime),cs(no(e.adUnitCode,so))},[ro]:e=>{to[e.adUnitCode].status=Wt,cs(no(e.adUnitCode,ro))},[io]:e=>{to[e.adUnitCode].status=Wt,to[e.adUnitCode].duration=e.playerEventData.duration,to[e.adUnitCode].currentTime=e.playerEventData.currentTime,cs(no(e.adUnitCode,io))},[go]:e=>{ds(no(e.adUnitCode,go)),fo(e.adUnitCode)}},Eo={[co]:({adUnitCode:e})=>{bo(co,e)},[ao]:e=>{mo(ao,e)},[io]:({adUnitCode:e})=>{bo(io,e)},[uo]:e=>{mo(uo,e)},[go]:e=>{mo(go,e)}},Io=(t,n,i)=>({render:function(s){try{to[s.adUnitCode]&&(In({logType:Sn.INFO,message:di,messageDetails:`adUnitCode: ${s.adUnitCode}`,source:ai}),fo(s.adUnitCode));const o=((e,t,n)=>{const{site:i,region:s,lang:o,bucket:r,ver:a,pt:c,pd:d,pct:l,spaceid:g}=t,{adComponentPath:u}=n,{bidder:h}=e,p=e.vastXml,f=e.vastUrl,m=Array.isArray(r)?r.join(","):r,b={trackingParams:{hb_adid:e.adId,hb_auctionid:e.auctionId,hb_crid:e.creativeId,ibn:h,pct:l,pd:d,plcid:u,pt:c,ver:a}};return Object.keys(b.trackingParams).forEach((e=>{const t=e;void 0===b.trackingParams[t]&&delete b.trackingParams[t]})),{autoplay:!0,expBucket:m,expName:"outstream",lang:o,monetization:b,mute:!0,outstream:{...f&&{adUrl:f}||p&&{adXml:p}},pageSpaceId:g,region:s,site:i,ui:{fullscreenButton:!1}}})(s,t,n);((e,t)=>{to[e.adUnitCode]={currentTime:0,duration:0,playerInstance:null,playerSize:{height:t[1],width:t[0]},status:"initializing"}})(s,i);const r=(e=>{const t=document.querySelector(`#${e.adUnitCode}`);if(!t)return In({logType:Sn.INFO,message:ci,messageDetails:`adUnitCode: ${e.adUnitCode}`,source:ai}),null;const n=document.createElement("div"),{height:i,width:s}=ho(e);return n.id=`player-${e.adUnitCode}`,n.style.width=`${s}px`,n.style.height=`${i}px`,t.style.minHeight=`${i}px`,t.appendChild(n),n})(s);if(!r)return;const a=new e.YAHOO.VideoPlatform.AdOnly.VideoPlayer(o);((t,n)=>{const i=e.YAHOO.VideoPlatform.AdOnly.VideoPlayer.Events;for(const e in i)i.hasOwnProperty(e)&&t.on?.(i[e],(t=>{yo[e]&&yo[e]({adUnitCode:n.adUnitCode,playerEventData:t?.ad}),Eo[e]&&Eo[e](n)}))})(a,s),((e,t,n)=>{e.render(`#${t.id}`),to[n.adUnitCode].playerInstance=e})(a,r,s)}catch(e){In({logType:Sn.ERROR,message:li,messageDetails:`adUnitCode: ${s.adUnitCode}`,source:ai})}},url:"https://s.yimg.com/rx/ev/prod/evplayer-adonly.js"}),So=e=>to[e]?.status===Wt,vo=e=>!!to[e],Ao="bidderconfig",Co="DEFAULT";function To(e,t,n){let i,s;const o={},r=t[n];if("*"===r.blockList){i=new Set(r.allowList);for(const t in e)i.has(t)&&(o[t]=e[t]);return o}s=new Set(t.DEFAULT?.blockList??[]);for(const e of r.allowList??[])s.delete(e);for(const e of r.blockList??[])s.add(e);for(const t in e)s.has(t)||(o[t]=e[t]);return o}function Do(t,n){const{bucketConfig:i}=t.filters;if(void 0===i||void 0===n){if(void 0!==n&&n.toString().includes(Ao)){const n={logType:Sn.INFO,message:"BIDDER_FILTER_MISSING_CONFIG",messageDetails:`Config missing for valid bucket, ${i}`,source:"PBJS:BIDDER_FILTER"};e.benji.logger.sendDebugBeacon(n),e.benji.logger.sendPBDLog({...n,filters:JSON.stringify(t.filters)},n.source,Tn)}return t.adUnits}const s=Array.isArray(n)?n:[n],o=s.find((e=>e.includes(Ao)));if(o&&!(o in i)){const n={logType:Sn.INFO,message:"BIDDER_FILTER_MISSING_CONFIG",messageDetails:`Config missing for valid bucket: ${o}`,source:"PBJS:BIDDER_FILTER"};e.benji.logger.sendDebugBeacon(n),e.benji.logger.sendPBDLog({...n,filters:JSON.stringify(t.filters)},n.source,Tn)}const r=o&&o in i,a=s.filter((e=>e.includes(Ao)));return a.length>1&&e.benji.logger.sendDebugBeacon({logType:Sn.INFO,message:"BIDDER_FILTER_MULTIPLE_BUCKETS",messageDetails:`Multiple buckets: ${a.sort()}`,source:"PBJS:BIDDER_FILTER"}),r||Co in i?function(t,n,i){const s={};Object.entries(t).forEach((([e,t])=>{const{bidders:o,...r}=t,a={...r,bidders:To(o,n,i)};s[e]=a}));const o=Array.from(new Set(Object.keys(s).map((e=>Object.keys(s[e].bidders))).flat(1))).sort();return e.benji.logger.sendDebugBeacon({logType:Sn.INFO,message:"BIDDER_FILTERING_COMPLETE",messageDetails:`${i}: ${o}`,source:"PBJS:BIDDER_FILTER"}),s}(t.adUnits,i,r?o:Co):t.adUnits}const Ro="PBJS";function Lo(e,t){return e.some((e=>(t[e]?.bids||[]).some((e=>e?.adserverTargeting?.hb_dt===an))))}const wo={};function Bo(e,t,n,i){if(!function(e,t,n,i){return!!(e&&t&&n&&i)}(e,t,n,i))return!1;ko(e);const s=function(e){let t=3e3,n=null;e&&"function"==typeof e.getConfig&&(n=e.getConfig());n&&(n.bidderTimeout&&"number"==typeof n.bidderTimeout&&(t=n.bidderTimeout),n.timeoutBuffer&&"number"==typeof n.timeoutBuffer&&(t+=n.timeoutBuffer));return t}(n),o=function(e,t,n,i){return setTimeout((()=>{i.sendDebugBeacon({logType:Sn.INFO,message:Ln,messageDetails:`auctionId: ${e}, timeout: ${n}ms`,source:Cn},!0),t.forEach((e=>{const{adCode:t,stackGroup:n}=e;n&&Gi(t,n)||e.callback()}))}),n)}(e,t,s,i);return wo[e]=o,!0}function ko(e){return!!wo[e]&&(clearTimeout(wo[e]),delete wo[e],!0)}const Po="pbjs",Oo="Network error",jo="yahooPrebidServer",No="ayPrebidServer",Mo="fulfilled",Uo="rejected",Fo={[U]:"benji-disableLiveRamp",[F]:"benji-disablePairId",[z]:"benji-disableSharedId",[Ee.LIVEINTENT_ID]:"benji-disableLiveIntent"};var zo;!function(e){e.READY="READY",e.LOADING="LOADING",e.ERROR="ERROR",e.INIT="INIT",e.DISABLED="DISABLED"}(zo||(zo={}));const xo="benji-enablePrebidFailsafe";class Go{_pbjs;gptComponent;i13nStore;initialConfig;status;preSetupRequestsQueue;stackGroupAuctionState;auctionItemManager;stackGroupMap;logger;userModuleStatus;liveIntentUtils=Ls;auctionEventsTracking=Bs;ayUtils=zs;constructor(){return this.status=zo.INIT,this.preSetupRequestsQueue=[],this.initialConfig={prebid:{adUnits:{},bidders:{},filters:{},regionCountries:{},setConfig:{}}},this._pbjs={},this._pbjs.que=[],void 0!==e&&(e.pbjs?this._pbjs=e.pbjs:e.pbjs=this._pbjs),this.stackGroupMap={},this.stackGroupAuctionState={},this.auctionItemManager=Fs,this.userModuleStatus={},this}start(t){hs("prebid","start",{params:t},Date.now());const{consent:n,gptComponent:i,benjiConfig:s,logger:o,adblockEnabled:r}=t;this.gptComponent=i,this.i13nStore=t.i13nStore;const{feature:a,i13n:c,positions:d,prebidSetting:{pbjs:l,pbConfig:g={}}}=s,u=Array.isArray(c?.feature)?c?.feature:[];this.logger=o,this.status=zo.LOADING;const{allowOnlyLimitedAds:h,allowOnlyNonPersonalizedAds:p}=n;let f="",m=true;if(!1===a.enableYahooPrebid&&(f=bi,m=!1),c.feature?.includes("benji-disableYahooPrebid")&&(f=_i,m=!1),(h||p||r)&&(f=r?fi:mi,m=!1),!m)return this.status=zo.DISABLED,void this.logger.sendDebugBeacon({logType:Sn.INFO,message:"PREBID DISABLED",messageDetails:f,type:"PREBID_DISABLED"});this._sendSessionStartBeacon(),this.stackGroupMap=$o(d);const b=!a.disableAssertiveYield;Promise.allSettled([this._fetchAYClientJS(e,b),this._fetchPBJS(e,l?.version),this._fetchConfig(c,g),this._fetchBPConfig(c)]).then((([,t,n,i])=>{if(t.status===Mo&&n.status===Mo&&i.status===Mo){const t=n.value;this._emitConfigLoadedEvent({data:{config:t},name:bt}),this.initialConfig=t;const s={...t,prebid:{...t.prebid,adUnits:Do(t.prebid,this.i13nStore.currentI13n.bucket),setConfig:{...t.prebid.setConfig,...t.prebid.setConfig.floors&&{floors:{...t.prebid.setConfig.floors,additionalSchemaFields:{gamPath:(e,t)=>{try{const t=e?.ortb2Imp?.ext?.prebid?.storedrequest?.id;return t||null}catch(e){return null}}}}},...t.prebid.setConfig.userSync&&{userSync:this._filterUserIdModulesFromConfig(t.prebid.setConfig.userSync)}}}};this.initialConfig=s,this.auctionItemManager.start({features:{enablePrebidBatching:u.includes("enablePrebidBatching"),enablePrebidBatchingConfigs:u.includes("enablePrebidBatchingConfigs"),enablePrebidBatchingDelay:u.includes("enablePrebidBatchingDelay"),enablePrebidBatchingRemoteConfigs:u.includes("enablePrebidBatchingRemoteConfigs")},pbjs:this._pbjs,prebidConfig:s.prebid,requestBids:this._requestBids.bind(this)});const o=s.prebid.setConfig;this.liveIntentUtils.liveIntentInOriginalConfig=this.liveIntentUtils.isLiveIntentEnabled(o),this.liveIntentUtils.liveIntentInOriginalConfig&&(this.logger.sendDebugBeacon({logType:Sn.INFO,message:Vn,messageDetails:An,source:Po}),o.userSync&&(o.userSync.userIds=this.liveIntentUtils.applyLiveIntentSampling(o?.userSync.userIds))),this.liveIntentUtils.liveIntentEnabled=this.liveIntentUtils.isLiveIntentEnabled(o),this.liveIntentUtils.instrumentation=this.liveIntentUtils.getLiveIntentInstrumentationKeys(o);const r=i?.value;return r&&(o.yahooRtdProvider=Object.assign({},o.yahooRtdProvider,r)),this._setConfig(o),this._startObservables(),this._enableAnalytics(),this._enableSecureSignals(),this.status=zo.READY,e.benji.logger.updateDatastore({[Nt]:Math.round(e.performance.now())}),void this._sendSessionSuccessBeacon()}throw new Error(Un)})).catch((e=>{this.status=zo.ERROR,e.message!==Un&&this._sendDebugLog(Un,{error:oi,message:e.message,stack:e.stack})})).finally((()=>{this.preSetupRequestsQueue.forEach((e=>{e()})),this.preSetupRequestsQueue=[]})),eo(this)}startPrebid(e,t){switch(hs("prebid","startPrebid",{adInfo:e,postPrebidCB:t?.toString()},Date.now()),this.status){case zo.INIT:case zo.LOADING:this.preSetupRequestsQueue.push((()=>{this.startPrebid(e,t)}));break;case zo.ERROR:case zo.DISABLED:const{adComponentId:n,stackGroup:i}=e;if(i&&Gi(n,i))return;t();break;case zo.READY:try{const n=this._getAdUnitFromAdInfo(e);if(!function(e){return hs("prebid","isAdUnitEligibleForAuction",{adUnit:e},Date.now()),!!e&&e.mediaTypes&&Object.keys(e.mediaTypes).length>0}(n)){const{adComponentId:n,stackGroup:i}=e;if(i&&Gi(n,i))return;return void t()}this._splitAdUnitByMediaTypes(n).forEach((e=>{this.addAdUnit(e)}));const{adComponentId:i,stackGroup:s,loc:o}=e,r={adCode:i,callback:t,loc:o,stackGroup:s};this.auctionItemManager.add(r)}catch(e){this.status=zo.ERROR,t()}}}onEvent(e,t){hs("prebid","onEvent",{callback:t?.toString(),event:e},Date.now()),this._pbjs.que.push((()=>{this._pbjs.onEvent(e,t)}))}updateStackGroupMap(e){hs("prebid","updateStackGroupMap",{positionsConfig:e},Date.now()),this.stackGroupMap={...this.stackGroupMap,...$o(e)}}_enableAnalytics(){hs("prebid","_enableAnalytics",{},Date.now()),this._pbjs.que.push((()=>{this._pbjs.enableAnalytics({provider:"yahooAnalytics"})}))}_enableSecureSignals(){hs("prebid","_enableSecureSignals",{},Date.now());const e=new Promise((e=>this._pbjs.que.push(e))),t=new Promise((e=>this.gptComponent.addCallbackToCmdQueue(e)));return Promise.all([e,t]).then((()=>{this._pbjs.registerSignalSources()}))}_filterUserIdModulesFromConfig(e){hs("prebid","_filterUserIdModulesFromConfig",{userSync:e},Date.now());const t=e.userIds;if(!t)return e;const n=t.filter((e=>{const t=e.name,n=this.isUserCountryEligible(t,"userIdModules");n||this.logger.sendDebugBeacon({logType:Sn.INFO,message:ti,messageDetails:`${t}`,source:Po});const i=this._isItemToBeDisabledUnderBucket(t,"userIdModules");this.userModuleStatus[t]=n?!i:"filtered";return n&&!i}));return{...e,userIds:n}}_preAuction(e,t){hs("prebid","_preAuction",{adServerAdSlot:t,adUnit:e},Date.now());const n=t?.split("/").slice(-1)[0]||e?.ortb2Imp?.ext?.prebid?.storedrequest?.id||"not set";return this.logger.sendDebugBeacon({logType:Sn.INFO,message:Jn,messageDetails:`adServerAdSlot: ${t}; gpid: ${n}`,source:Po}),n}_setConfig(t){hs("prebid","_setConfig",{config:t},Date.now());const{cobrand:n,site:i,region:s}=this.i13nStore.getCurrent(),o=xs(n);this._pbjs.que.push((()=>{const{prebidVersion:n,yahooPrebidVersion:r}=e.benji;this.logger.updateDatastore({pl2:n,pl3:r}),this._pbjs.setConfig({...t,gptPreAuction:{customPreAuction:this._preAuction.bind(this)},realTimeData:{...t.realTimeData,dataProviders:[...t.realTimeData?.dataProviders||[],{name:"yahooRTDModule",params:{cobrand:o,region:s,site:i},waitForIt:!0}]}}),this._setBidderSettings()}))}_setBidderSettings(){if(hs("prebid","_setBidderSettings",{},Date.now()),!this.initialConfig?.prebid?.bidderSettings)return;const e=this.initialConfig.prebid.bidderSettings;this._pbjs.bidderSettings||(this._pbjs.bidderSettings={});for(const t of Object.keys(e))this._pbjs.bidderSettings[t]=e[t]}_decideWinningAndLosingStackGroupSides(e,t){hs("prebid","_decideWinningAndLosingStackGroupSides",{bids:t,stackGroupAuctionItems:e},Date.now());let n=[];const i=[],s=[],o={};return new Set(e.map((e=>e.stackGroup)).filter((e=>void 0!==e))).forEach((e=>{if(!this.stackGroupMap[e])return;const[i,s]=this.stackGroupMap[e];let o;if(Ki("benji-enableStackGroupPreferredDeals"))o=function(e,t,n){const i=Lo(e,n),s=Lo(t,n);if(i&&!s)return t;if(s&&!i)return e;const o=Ho(e,n),r=Ho(t,n);return o<r?e:t}(i,s,t);else{o=Ho(i,t)<Ho(s,t)?i:s}n=[...n,...o]})),e.forEach((e=>{n.includes(e.adCode)?s.push(e):(i.push(e),o[e.adCode]=t[e.adCode])})),[i,o,s]}_completePostAuctionSteps(e,t){hs("prebid","_completePostAuctionSteps",{auctionItems:e,bids:t},Date.now()),this._pbjs.que.push((()=>{const n=()=>{this._updateAdServerTargeting(t),this._pbjs.setTargetingForGPTAsync(Object.keys(t)),e.forEach((e=>{e.callback()})),(e=>{Object.keys(e).forEach((t=>{const n=e[t];n?.bids?.forEach((e=>{const t=po(e);In({logType:Sn.INFO,message:"BID_WON",messageDetails:JSON.stringify({...t}),source:ai})}))}))})(t)};if(Ki(xo))try{n()}catch(t){e.forEach((e=>{e.callback()})),this.logger.sendDebugBeacon({logType:Sn.ERROR,message:Mn,messageDetails:`error: ${t?.message}`,source:Cn})}else n()}))}_logLiveIntentRequestTiming(){hs("prebid","_logLiveIntentRequestTiming",{},Date.now()),!this.liveIntentUtils.liveIntentEnabled||this.auctionEventsTracking.completedAuctions>1||(this.liveIntentUtils.logLiModuleLoadStatus(this.logger),this.liveIntentUtils.logIfLiveIntentRequestFinishedInTime(this.logger))}_getStrategyFlags(){return{useAllValidBids:Ki("benji-enableStackGroupAllValidBids"),useBidLimit:Ki("benji-enableStackGroupBidLimit"),useHighestCpmBids:Ki("benji-enableStackGroupHighestCpmBids")}}_applyBidStrategy(e,t,n){const i={adCode:e,currentBids:t[e]&&t[e].bids||[],logger:this.logger,pbjs:this._pbjs};return n.useHighestCpmBids?function(e){const{adCode:t,pbjs:n,logger:i,currentBids:s}=e;try{const e=n.getHighestCpmBids(t);if(e&&e.length>0)return{bids:[...e,...s]}}catch(e){i.sendDebugBeacon({logType:Sn.ERROR,message:"STACK_GROUP_HIGHEST_CPM_BIDS_ERROR",messageDetails:`adCode: ${t}, error: ${e}`,source:Ro})}return null}(i):n.useAllValidBids?function(e){const{adCode:t,pbjs:n,logger:i,currentBids:s}=e;try{const e=n.getHighestUnusedBidResponseForAdUnitCode(t),i=n.getHighestCpmBids(t),o=[];return i&&Array.isArray(i)&&i.length>0&&o.push(...i),s&&Array.isArray(s)&&s.length>0&&o.push(...s),e&&e.bidder&&o.push(e),{bids:o}}catch(e){i.sendDebugBeacon({logType:Sn.ERROR,message:"STACK_GROUP_ALL_VALID_BIDS_ERROR",messageDetails:`adCode: ${t}, error: ${e}`,source:Ro})}return null}(i):n.useBidLimit?function(e){const{adCode:t,pbjs:n,logger:i}=e;try{const e=n.getHighestUnusedBidResponseForAdUnitCode(t);return e&&e.bidder?{bids:[e]}:null}catch(e){i.sendDebugBeacon({logType:Sn.ERROR,message:"STACK_GROUP_BID_LIMIT_ERROR",messageDetails:`adCode: ${t}, error: ${e}`,source:Ro})}return null}(i):null}_separateAuctionItemsByStackGroup(e,t){hs("prebid","_separateAuctionItemsByStackGroup",{auctionItems:e,bids:t},Date.now());const n=[],i={},s=[],o={},r=this._getStrategyFlags();return e.forEach((e=>{const{adCode:a,stackGroup:c}=e;if(c){s.push(e),o[a]=t[a];const n=this._applyBidStrategy(a,t,r);n&&(o[a]={bids:n.bids})}else n.push(e),i[a]=t[a]})),{nonStackGroupBids:i,nonStackGroupItems:n,stackGroupBids:o,stackGroupItems:s}}_handleNonStackGroupItems(e,t){hs("prebid","_handleNonStackGroupItems",{nonStackGroupBids:t,nonStackGroupItems:e},Date.now()),this._completePostAuctionSteps(e,t)}_handleStackGroupItems(e,t){hs("prebid","_handleStackGroupItems",{stackGroupBids:t,stackGroupItems:e},Date.now());const[n,i,s]=this._decideWinningAndLosingStackGroupSides(e,t),o=function(e,t){hs("prebid","constructYpbAdStackResolvedPayload",{losingAuctionItems:t,winningAuctionItems:e},Date.now());const n={data:{},name:mt};return[...e,...t].forEach((e=>{const{stackGroup:t}=e;if(void 0!==t&&void 0===n.data[t]){const e={losingSide:{adIds:[]},winningSide:{adIds:[]}};n.data[t]=e}})),e.forEach((e=>{const{stackGroup:t,adCode:i}=e;void 0!==t&&n.data[t].winningSide.adIds.push(i)})),t.forEach((e=>{const{stackGroup:t,adCode:i}=e;void 0!==t&&n.data[t].losingSide.adIds.push(i)})),n}(n,s);this._emitStackGroupResolvedEvent(o),this._updateStackGroupAuctionState(o.data),this._completePostAuctionSteps(n,i)}_emitConfigLoadedEvent(e){hs("prebid","_emitConfigLoadedEvent",{payload:e},Date.now()),Qs[bt]&&Qs[bt].forEach((t=>{t(e)}))}_emitStackGroupResolvedEvent(e){hs("prebid","_emitStackGroupResolvedEvent",{payload:e},Date.now()),Qs[mt]&&Qs[mt].forEach((t=>{t(e)}))}_updateStackGroupAuctionState(e){hs("prebid","_updateStackGroupAuctionState",{stackGroupAuctionResult:e},Date.now()),Object.entries(e).forEach((([e,t])=>{this.stackGroupAuctionState[e]=t}))}_logAuctionEvents(e){if(hs("prebid","_logAuctionEvents",{auctionId:e},Date.now()),this.auctionEventsTracking.auctionEventsTrackerList.hasOwnProperty(e)){const t=this.auctionEventsTracking.auctionEventsTrackerList[e];this.auctionEventsTracking.logAuctionEvents(t)}}bidsBackHandler(e={},t,n){hs("prebid","bidsBackHandler",{auctionId:t,auctionItems:n,bids:e},Date.now()),this.auctionEventsTracking.completedAuctions++,0===Object.keys(e).length&&In({logType:Sn.INFO,message:qn,messageDetails:`auctionId: ${t}`,source:Po}),this._logLiveIntentRequestTiming();const i=Ki(xo);if(i){const e=!function(e,t){return!!wo[e]&&(ko(e),t.sendDebugBeacon({logType:Sn.INFO,message:Rn,messageDetails:`auctionId: ${e}`,source:Cn},!0),!0)}(t,this.logger);if(e)return void this.logger.sendDebugBeacon({logType:Sn.INFO,message:zn,messageDetails:`auctionId: ${t}`,source:Cn})}this.gptComponent.addCallbackToCmdQueue((()=>{const s=()=>{const{nonStackGroupItems:i,nonStackGroupBids:s,stackGroupItems:o,stackGroupBids:r}=this._separateAuctionItemsByStackGroup(n,e);this._handleNonStackGroupItems(i,s),this._handleStackGroupItems(o,r),this._sendUserSyncModuleStatusToGAM(),this._logAuctionEvents(t)};if(i)try{s()}catch(e){this.logger.sendDebugBeacon({logType:Sn.ERROR,message:Nn,messageDetails:`auctionId: ${t}, error: ${e?.message}`,source:Cn}),n.forEach((e=>{const{adCode:t,stackGroup:n}=e;n&&Gi(t,n)||e.callback()}))}else s()}))}_requestBids(t){hs("prebid","_requestBids",{params:t},Date.now());const{auctionId:n,auctionItems:i}=t,s=i.map((e=>e.adCode)),o=Ki(xo);o&&Bo(n,i,this._pbjs,this.logger),this._pbjs.que.push((()=>{this.auctionEventsTracking.addNewAuctionToTracker(n,this.auctionEventsTracking.auctionEventsTrackerList),s.forEach((t=>{e.benji.logger.updateDatastore(t,{[Mt]:Math.round(e.performance.now())})})),o&&function(e,t,n,i){ko(e)?Bo(e,t,n,i):i.sendDebugBeacon({logType:Sn.INFO,message:Fn,messageDetails:`auctionId: ${e}`,source:Cn},!0)}(n,i,this._pbjs,this.logger),this._pbjs.requestBids({adUnitCodes:s,auctionId:n,bidsBackHandler:(e={})=>this.bidsBackHandler(e,n,i)})}))}_updateAdServerTargeting(t){hs("prebid","_updateAdServerTargeting",{responseBids:t},Date.now()),Object.keys(t).forEach((n=>{const i=t[n];i?.bids?.forEach((t=>{const i=t?.adserverTargeting?.hb_pb;if(i){const e=parseFloat(i);!isNaN(e)&&e>100?t.adserverTargeting.hb_pb100=!0:t.adserverTargeting.hb_pb100=!1}const s=t?.adserverTargeting?.hb_size,o=e.benji.store?.getAdComponentById(n);o&&mr(o)&&s&&t.ad_format_id&&on.includes(s)&&rn[t.bidderCode]&&(o.richMediaConfig=sn[t.ad_format_id]),s&&(Zt.includes(s)||en.includes(s)&&t.bidderCode===Qt)&&(t.adserverTargeting.hb_responsive=1,o&&mr(o)&&(o.hbResponsiveSize=tn[s]||s));"video"===t?.adserverTargeting?.hb_format&&(t.adserverTargeting.hb_auctionid=t.auctionId),Object.keys(t.adserverTargeting).forEach((e=>{Rt.includes(e)||delete t.adserverTargeting[e]}))}))}))}_addPbsBucketToI13n(e){hs("prebid","_addPbsBucketToI13n",{bid:e},Date.now());const t=e?.adserverTargeting?.pbs_bucket;if(!t)return;const n=this.i13nStore.getCurrent().bucket;if(!n)return this.i13nStore.updateCurrent({bucket:[t]}),void this.gptComponent.setTargeting({bucket:[t]});const i=t.split(",");if(i.some((e=>!n.includes(e)))){const e=Array.from(new Set([...n,...i]));this.i13nStore.updateCurrent({bucket:e}),this.gptComponent.setTargeting({bucket:e})}}_fetchConfig(e,t){if(hs("prebid","_fetchConfig",{pageConfig:e,presetConfig:t},Date.now()),function(e){return hs("prebid","isPrebidConfigJSON",{presetConfig:e},Date.now()),void 0!==e.prebid}(t))return new Promise((e=>{e(t)}));const{bucket:n,partner:i,device:s,region:o,site:r,feature:a}=e,c=xs(i),d=function(e){return e&&Pe[e]||e}(s),l=((new Date).getTime()/864e5).toFixed(),g=n&&n.toString().includes(Ao),u=a&&Array.isArray(a)?a.find((e=>e.includes("prebid-"))):void 0,h=[];let p="",f="";Array.isArray(a)&&this.logFeatureCount(a.filter((e=>e.includes("prebid-"))));const m=((e,t,n)=>{const i=Oi(n,t,e);return i?`${B}/${i}.json`:""})(d,o,r)+(g?`?v=${l}`:"");let b;h.push(mn(m)),c&&c!==M&&(p=((e,t,n,i)=>{const s=Oi(n,t,e);return s&&i?`${B}/${i}-${s}.json`:""})(d,o,r,c),p+=g?`?v=${l}`:"",h.push(mn(p))),u&&(f=((e,t,n,i)=>{const s=Oi(n,t,e);return s&&i?`${B}/${s}-${i}.json`:""})(d,o,r,u),f+=g?`?v=${l}`:"",h.push(mn(f)));const _={error:si,type:Un};return Promise.allSettled(h).then((([e,t,n])=>{if(n){if(!(n.status===Uo||n.value&&403===n.value.status))return b=n.value.url,n.value.json();this.logger.sendDebugBeacon({..._,errorMessage:`${Oo}: ${f}`})}if(t){if(!(t.status===Uo||t.value&&403===t.value.status))return b=t.value.url,t.value.json();{const e=c&&c!==M?p:f;this.logger.sendDebugBeacon({..._,errorMessage:`${Oo}: ${e}`})}}if(e.status===Uo||e.value&&403===e.value.status)throw this.logger.sendDebugBeacon({..._,errorMessage:`${Oo}: ${m}`}),new Error(si);return b=m,e.value.json()})).then((e=>{if(!e||!e.prebid)throw this.logger.sendDebugBeacon({..._,errorMessage:`Parsing error: ${b}`}),new Error(si);return e}))}_fetchPBJS(e,t){return hs("prebid","_fetchPBJS",{version:t,window:e?.toString()},Date.now()),new Promise(((n,i)=>{!function(e,t,n,i){if(Ki("benji-enableLatestPrebid")&&(t="3.0"),t){const s=ji(t);Js({id:j,onerrorCb:()=>{e.document.getElementById(j)?.remove(),$s(e,n,i)},onloadCb:n,tagSrc:s,WIN:e})}else $s(e,n,i)}(e,t,(()=>{n(Kn)}),((e,t)=>{this.logger.sendDebugBeacon({error:Wn,errorMessage:`${Oo}: ${Hs(e,t)}`,type:Un}),i(new Error(Wn))}))}))}_fetchAYClientJS(e,t){return hs("prebid","_fetchAYClientJS",{featureEnabledFetchAssertiveYield:t,window:e?.toString()},Date.now()),t?(e.assertive=Lt,zs.setAYTrafficShaping(e),new Promise(((t,n)=>{!function(e,t,n){Js({async:!0,id:"ay-script",onerrorCb:n,onloadCb:t,tagSrc:"https://s.yimg.com/du/ay/wnsrvbjmeprtfrnfx.js",WIN:e})}(e,(()=>{zs.setAYAnalyticsCustomParameter(e,this.i13nStore.currentI13n.bucket),t(kn)}),((e,t)=>{this.logger.sendDebugBeacon({error:Bn,errorMessage:`${Oo}: ${Hs(e,t)}`,type:jn}),n(new Error(Bn))}))}))):new Promise((e=>{e(wn)}))}_fetchBPConfig(e){hs("prebid","_fetchBPConfig",{pageConfig:e},Date.now());const{partner:t,site:n}=e,i=((e,t)=>{let n=`${B}/bp-${e}`;return t&&t!==M&&(n+=`-${t}`),n+".json"})(n,xs(t));return new Promise(((e,t)=>{mn(i).then((t=>{if(!t.ok)throw new Error(Pn);e(t.json())})).catch((()=>{this.logger.sendDebugBeacon({error:Pn,errorMessage:`${Oo}: ${i}`,source:Po,type:Un}),t(new Error(Pn))}))}))}_getMediaTypes(e){hs("prebid","_getMediaTypes",{adInfo:e},Date.now());const t={},{adComponentPath:n,size:i}=e,s=n.split("/").slice(-1)[0],o=this.initialConfig.prebid.adUnits[s];if(!o)return t;if(o.formats?.banner){const e=zi(o.formats.banner.sizes,i);e.length&&(t.banner={pos:o.pos,sizes:e})}if(o.formats?.video){let e=zi(o.formats.video.sizes,i);e=Array.isArray(e[0])?e[0]:e,e.length&&(t.video={context:o.formats.video.context,h:e[1],playerSize:e,pos:o.pos,w:e[0],...Jt})}return t}logFeatureCount(e){hs("prebid","logFeatureCount",{features:e},Date.now()),e&&e.length>1&&this.logger.sendDebugBeacon({logType:Sn.INFO,message:Qn,messageDetails:`${e.length}`,source:Po})}_isItemToBeDisabledUnderBucket(e,t){hs("prebid","_isItemToBeDisabledUnderBucket",{filterType:t,moduleName:e},Date.now());const n=Fo[e];if(n&&Ki(n))return!0;const i=this.initialConfig.prebid.filters?.[t]?.[e]?.disabledBucketRate;let s=!1;return i&&"number"==typeof i&&(s=Di(100*i)),s}isUserCountryEligible(e,t){hs("prebid","isUserCountryEligible",{filterType:t,item:e},Date.now());const n=this.initialConfig.prebid.filters?.[t];if(!n)return!0;const i=(this.i13nStore.getCurrent()?.usercountry??"").toString(),s=(this.i13nStore.getCurrent()?.toscountry??"").toString();if("*"===n[e]?.allowList?.userCountry)return!0;if(!(i||s))return!1;const o=n[e]||n.DEFAULT,{allowList:r,blockList:a}=o,c=!i||this._isUserLocationEligible(i,r,a),d=!s||this._isUserLocationEligible(s,r,a);return c&&d}_isUserLocationEligible(e,t,n){hs("prebid","_isUserLocationEligible",{allowList:t||null,blockList:n||null,usercountry:e},Date.now());const i=this.initialConfig.prebid.regionCountries,s=n&&this._isUserLocationInList(n,i,e),o=t&&this._isUserLocationInList(t,i,e),r=!("*"===t?.userCountry||t?.userCountry?.includes(e))&&!o,a=n?.userCountry?.includes(e);let c=!0;return(t&&r||a||s)&&(c=!1),c}_isUserLocationInList(e,t,n){return hs("prebid","_isUserLocationInList",{list:e,regions:t,usercountry:n},Date.now()),t&&e.userRegion?.some((e=>t[e]?.includes(n)))}_getBids(e){hs("prebid","_getBids",{adInfo:e},Date.now());const{adComponentPath:t}=e,n=t.split("/"),i=n[n.length-1],s=this.initialConfig.prebid.adUnits[i];if(void 0===s)return;const{bidders:o}=s;return Object.keys(o).filter((e=>this.isUserCountryEligible(e,"bidders"))).map((e=>({bidder:e,params:{...this.initialConfig.prebid.bidders[e],...o[e]}})))}_getAdUnitFromAdInfo(e){hs("prebid","_getAdUnitFromAdInfo",{adInfo:e},Date.now());const t=this._getBids(e);if(!t)return;const n=this._getOrtb2Imp(e,t),i=this._getMediaTypes(e);return{bids:t,code:e.adComponentId,mediaTypes:i,...n&&{ortb2Imp:n},...i.video&&{renderer:Io(this.i13nStore.getCurrent(),e,i.video.playerSize)}}}_splitAdUnitByMediaTypes(e){hs("prebid","_splitAdUnitByMediaTypes",{adUnit:e},Date.now());const{mediaTypes:t,renderer:n,...i}=e,s=[];return t.banner&&s.push({...i,mediaTypes:{banner:t.banner}}),t.video&&s.push({...i,mediaTypes:{video:t.video},renderer:n}),s}_getYahooBidderOrtb2Imp(e,t){hs("prebid","_getYahooBidderOrtb2Imp",{adCode:e,adInfo:t},Date.now());const n=this.i13nStore.createRSObject(),{axid:i,...s}=n,{bucket:o,bka:r,bkg:a,hashtag:c}=this.i13nStore.getCurrent(),d=Array.isArray(c)?c.join(","):c,l=Array.isArray(o)?o.join(","):o;return{ext:{prebid:{passthrough:{...l&&{bucket:l},...r&&{bka:r},...a&&{bkg:a},...d&&{hashtag:d},client:Po,gamAdCode:e,liveintentenabled:"filtered"!==this.userModuleStatus[Ee.LIVEINTENT_ID]&&this.liveIntentUtils.liveIntentEnabled,liveRampEnabled:!0===this.userModuleStatus[U],pairIdEnabled:!0===this.userModuleStatus[F],sharedIdEnabled:!0===this.userModuleStatus[z],...t.loc&&{gamLoc:t.loc},...s},storedrequest:{id:e}}}}}_getAYBidderOrtb2Imp(e){return hs("prebid","_getAYBidderOrtb2Imp",{adCode:e},Date.now()),{ext:{prebid:{storedrequest:{id:e}}}}}_getOrtb2Imp(e,t){hs("prebid","_getOrtb2Imp",{adInfo:e,bids:t},Date.now());const n=e.adComponentPath.split("/").slice(-1)[0],i=[jo,No],s={ext:{prebid:{passthrough:{},storedrequest:{id:n}}}};let o=!1,r=null,a=null;for(const s of t)i.includes(s.bidder)&&(s.bidder===No?(o=!0,r=this._getAYBidderOrtb2Imp(n)):s.bidder===jo&&!1!==s.params?.enabled&&(o=!0,a=this._getYahooBidderOrtb2Imp(n,e)));return o?(r&&(s.ext.prebid={...s.ext.prebid,...r.ext.prebid}),a&&(s.ext.prebid={...s.ext.prebid,passthrough:{...s.ext.prebid.passthrough,...a.ext.prebid.passthrough},storedrequest:a.ext.prebid.storedrequest}),s):null}addAdUnit(e){hs("prebid","addAdUnit",{adUnit:e},Date.now());this._adUnits().filter((t=>{const{code:n,mediaTypes:i}=t;if(n!==e.code)return!1;return i.banner&&e.mediaTypes.banner||i.video&&e.mediaTypes.video})).length>0||this._pbjs.que.push((()=>{this._pbjs.addAdUnits(e)}))}removeAdUnit(e){hs("prebid","removeAdUnit",{adCode:e},Date.now());const t=this._adUnits().filter((t=>t.code===e))[0];return t?(this._pbjs.que.push((()=>{this._pbjs.removeAdUnit(e)})),t):null}_destroy(e){hs("prebid","_destroy",{adId:e},Date.now()),e&&this._pbjs.removeAdUnit(e)}_adUnits(){return hs("prebid","_adUnits",{},Date.now()),this._pbjs.adUnits||[]}_sendSessionStartBeacon(){hs("prebid","_sendSessionStartBeacon",{},Date.now()),this.logger.sendDebugBeacon({type:Xn})}_sendSessionSuccessBeacon(){hs("prebid","_sendSessionSuccessBeacon",{},Date.now()),this.logger.sendDebugBeacon({type:Zn})}_sendUserSyncModuleStatusToGAM(){hs("prebid","_sendUserSyncModuleStatusToGAM",{},Date.now()),"filtered"!==this.userModuleStatus[Ee.LIVEINTENT_ID]&&void 0!==e.liModuleEnabled&&(this.userModuleStatus[Ee.LIVEINTENT_ID]=e.liModuleEnabled);const t={};[["liveramp.com",U,"lr_env"],["pubcid.org",z,"sharedid"],["google.com",F,"lr_pairid"],["liveintent.com",Ee.LIVEINTENT_ID,"li_2"]].forEach((([e,n,i])=>{this._userSyncSetTargetingHelper(e,n,i,t)})),this.gptComponent.setTargeting(t)}_userSyncSetTargetingHelper(e,t,n,i){if(hs("prebid","_userSyncSetTargetingHelper",{kvs:i,moduleName:t,source:e,targetKey:n},Date.now()),void 0===this.userModuleStatus[t]||"filtered"===this.userModuleStatus[t])return;let s="off";if(!0===this.userModuleStatus[t]){s=this._pbjs.getUserIdsAsEids().find((t=>t.source===e))?"id":"no-id"}i[n]=s}_startObservables(){hs("prebid","_startObservables",{},Date.now()),this.onEvent(be,(t=>{const{adUnitCodes:n}=t;n?.forEach((t=>{e.benji.logger.updateDatastore(t,{[Ut]:Math.round(e.performance.now())})}))})),this.onEvent(me,(t=>{const{adUnitCodes:n}=t;n?.forEach((t=>{e.benji.logger.updateDatastore(t,{[Ft]:Math.round(e.performance.now())})}))}));Object.values(this._getStrategyFlags()).some((e=>!0===e))&&this.onEvent(_e,(t=>{!function(e,t){if(e?.adserverTargeting?.hb_dt){const n=t.getAdComponentById(e.adUnitCode);n&&"stackGroup"in n&&n.stackGroup&&delete e.adserverTargeting.hb_dt}}(t,e.benji.store)}));const{liveIntentEnabled:t,liveIntentInOriginalConfig:n}=this.liveIntentUtils;n&&(t?this._activateLiveIntentObservable():this._setLiveIntentTargeting(),this.onEvent(be,(()=>{this.liveIntentUtils.sendLiveIntentBeacon({...this.liveIntentUtils,logger:this.logger})})),this.logger.sendDebugBeacon({logType:Sn.INFO,message:ei,messageDetails:`${An}-${t?98:2}`,source:Po})),this._pbjs.que.push((()=>{this.auctionEventsTracking.startAuctionEventsTracker(this._pbjs,this.auctionEventsTracking.auctionEventsTrackerList)}))}_setLiveIntentTargeting(e){hs("prebid","_setLiveIntentTargeting",{enriched:e||null},Date.now());const{liveIntentEnabled:t,instrumentation:n}=this.liveIntentUtils,{t0:i,t1:s,e0:o,e1:r,LI_REPORTING_KEY:a,HB_UI_MOD:c}=n;this.gptComponent.addCallbackToCmdQueue((()=>{let d=t?s:i;const l=this.liveIntentUtils.getLiveIntentTargeting({areBidsEnrichedByLiveIntent:!!e,instrumentation:n,liveIntentEnabled:t});void 0!==e&&(d+=e?r:o),this.gptComponent.setTargeting({[c]:l,[a]:d})}))}_activateLiveIntentObservable(){hs("prebid","_activateLiveIntentObservable",{},Date.now()),this.onEvent(be,(e=>{this._setBidsEnriched(e),this._setLiveIntentTargeting(this.liveIntentUtils.areBidsEnrichedByLiveIntent),this.liveIntentUtils.logCachedEidsNotSent(this.liveIntentUtils.areBidsEnrichedByLiveIntent)}))}_setBidsEnriched(e){hs("prebid","_setBidsEnriched",{auctionRequest:e},Date.now());const{adUnits:t}=e;this.liveIntentUtils.areBidsEnrichedByLiveIntent=!!t?.some(this.liveIntentUtils.hasLiveIntentAdUnit)}_sendDebugLog(e,t){hs("prebid","_sendDebugLog",{payload:t,type:e},Date.now());const n={error:t.error,message:t.message,...t.stack&&{stack:t.stack}};this.logger.sendPBDLog(n,e,"https://pbd.yahoo.com/data/logs/ypb",!0),this.logger.sendDebugBeacon({error:t.error,errorMessage:t.message,type:e})}}function $o(e){hs("prebid","createStackGroupMap",{positions:e},Date.now());const t=function(e){hs("prebid","getPositionsByStackGroup",{positions:e},Date.now());const t={};for(const[n,i]of Object.entries(e)){const e=Bi(i)&&i?.stackGroup;e&&(t[e]||(t[e]=[]),t[e].push(n))}return t}(e),n={};for(const[e,i]of Object.entries(t)){const t=xi(e);if(void 0===t)continue;const[s,o]=t,r=[[],[]];i.forEach((e=>{e.includes(s)?r[0].push(e):e.includes(o)&&r[1].push(e)})),n[e]=r}return n}function Ho(e,t){return hs("prebid","getSumOfBids",{adGroup:e,bids:t},Date.now()),e.reduce(((e,n)=>{const i=t[n]?function(e){return hs("prebid","getWinningBid",{bids:e},Date.now()),0===e.length?0:Math.max(...e.map((e=>e.cpm)))}(t[n].bids):0;return e+i}),0)}function Yo(e,t){if(e.ypbComponent.status!==zo.DISABLED){const n=e.ypbComponent.removeAdUnit(e.id);n&&n.mediaTypes.banner&&(n.mediaTypes.banner.sizes=t,e.ypbComponent.addAdUnit(n))}e.slot&&e.gptComponent.destroy([e.slot]);const n={gptSetting:e.gptSetting,id:e.id,path:e.slot.getAdUnitPath(),size:t};e.gptComponent.create(n,e),e.kvs&&e.gptComponent.setTargetingForSlot(e,e.kvs)}function Vo(e,t){Yo(e,t),e.startPrebidAuction()}class qo{action;duration;timerId;elapsedTime;constructor(e){const{action:t,duration:n}=e;this.action=t,this.duration=n,this.timerId=void 0,this.elapsedTime=0,this._resetElapsedTime()}getElapsedTime(){return this.elapsedTime}pause(){this._cancelElapse()}resume(){void 0===this.timerId&&0!==this.elapsedTime&&this._elapse()}start(){this._resetElapsedTime(),this._cancelElapse(),this._elapse()}stop(){this._resetElapsedTime(),this._cancelElapse()}_resetElapsedTime(){this.elapsedTime=0}_elapse(){this.timerId=e.setInterval((()=>{this.elapsedTime+=1,this.elapsedTime>=this.duration&&(this.stop(),this.action())}),1e3)}_cancelElapse(){clearInterval(this.timerId),this.timerId=void 0}}const Wo={},Ko={offset:600};function Jo(e,t){const n=e?.config.setting?.lazyLoad;if(!0===n)return;let i,s;const o=t?.id;ki(t)?i=n?.lazyFetch?.taboola:Bi(t)&&(i=n?.lazyFetch?.gam),i?.placements?Object.keys(i?.placements).forEach((e=>{const n=Bi(t)?t.kvs?.loc:void 0;(-1!==o.indexOf(e)||n&&-1!==n.indexOf(e))&&(s=i?.placements&&i?.placements[e])})):i?.positions?i?.positions[o]&&(s=i?.positions[o]):s=i;const r=t.lazyFetch||s;return r||void 0}function Qo(t){const{horizontalSwipe:n,offset:i=0,callback:s}=Wo[t];(function(t,n){const i=e.innerHeight,s=Yi(t),o=Math.min(s?.bottom,i)-Math.abs(s?.top);return o&&Math.abs(o)<n}(t,i)||n&&function(t,n){const i=e.innerWidth,s=Yi(t),o=Math.max(0,s?.left),r=Math.min(i,s?.right);return Math.abs(r-o)<n}(t,i))&&(cs(`Memory optimization: Lazy Fetch Ad - ID: ${t}`),delete Wo[t],s())}function Xo(){Object.keys(Wo).forEach((e=>{Qo(e)}))}function Zo(){function e(e){e.timer?.stop(),e.creativeInteractionConfig&&(e.creativeInteractionConfig.refreshPauseTS=Date.now()),e.creativeInteractionConfig?.isYahooCreative&&(e.creativeInteractionConfig.ycInteractionActive=!0),e.creativeInteractionConfig&&(e.creativeInteractionConfig.interactionActive=!0)}if(this.stackGroup&&this.features?.enableAdStacking){this.store.getSameSideStackAdComponents(this.id,this.stackGroup).forEach((t=>{e(t)}))}else e(this)}function er(){function t(t){t.creativeInteractionConfig?.interactionActive&&(t.creativeInteractionConfig&&(t.creativeInteractionConfig.interactionActive=!1),t.timer?.start(),t.creativeInteractionConfig?.isYahooCreative&&(t.creativeInteractionConfig.ycInteractionActive=!1),Di(10)&&t.creativeInteractionConfig?.refreshPauseTS&&e.benji.logger.sendDebugBeacon({ad_type:t.creativeInteractionConfig?.isYahooCreative?"yc":"3p",id:t.id,refresh_delay:(Date.now()-t.creativeInteractionConfig?.refreshPauseTS)/1e3,type:"ad_hover"}))}if(this.stackGroup&&this.features?.enableAdStacking){this.store.getSameSideStackAdComponents(this.id,this.stackGroup).forEach((e=>{t(e)}))}else t(this)}const tr=/;\s/g,nr=/([^=]+)=/i,ir=t=>{let n=null;return t=t.trim(),e.document?.cookie.split(tr).some((e=>{let i,s;const o=e.match(nr);if(Array.isArray(o))try{i=decodeURIComponent(o[1]),s=decodeURIComponent(e.substring(i.length+1))}catch(e){}return!(i!==t||!s)&&(n=s.trim(),!0)})),n},sr=(t,n,i)=>{i=i??604800;let s=`${t}=${n}`;const o=new Date;o.setTime(o.getTime()+1e3*i),s+=`; expires=${o.toUTCString()}; domain=${e.location.hostname}`,e.document.cookie=s},or=()=>"2"===ir(Ve);function rr(e,t){(Array.isArray(e)?e:[e]).forEach((e=>{e.renewTimer(t)}))}function ar(e,t){const n=t.kvs?.loc;return e&&"string"==typeof n&&we[n]||t.configSize}function cr(e,t,n){const{kvs:i,refreshConfig:s}=n,o=i?.loc;if("string"==typeof o)if(t){Be.includes(o)?rr(n,30):n.disableAllRefresh()}else e||s.disableRefresh||(n.enableAllRefresh(),rr(n,s.duration??30))}function dr(e){const t=document.getElementById(this.id),n=t&&Ti(t)||t;n&&n.classList&&n.classList.toggle("uba-container",e)}function lr(e){const t=e.stickyConfig;if(!t)return;const n=document.getElementById(t.adContainer||e.id);if(!n)return;const i=!t.adContainer&&Ti(n)||n,s=i?.style["min-height"],o=()=>{i.classList.add("gam-sticky-ad"),t.height&&i.style.setProperty("min-height",t.height+"px")},r=t.duration;if(r&&e._fetchCount<=1){const e=()=>{i&&(o(),setTimeout((()=>{i.classList.add("gam-sticky-ad-collapse")}),r),setTimeout((()=>{i.classList.remove("gam-sticky-ad","gam-sticky-ad-collapse"),t.height&&i.style.setProperty("min-height",s),window.removeEventListener("scroll",e)}),r+1e3))};window.addEventListener("scroll",e)}else r||i&&o()}function gr(){if(this.stackGroup&&this.features?.enableAdStacking){this.store.getStackAdComponents(this.stackGroup).forEach((e=>{e.timer?.stop()}));this.store.getSameSideStackAdComponents(this.id,this.stackGroup).forEach((e=>{e.timer?.start()}))}else this.timer?.start()}function ur(e){this.viewPercentage=e;!0===this.eligibleForTimedRefresh&&this.isInView()&&this.refreshWithTimeout()}function hr(){if((this.features?.enableTabSwitchDestroy??!1)&&this.slot)if(function(e){const t=document.getElementById(e?.id);if(t){const e=t.getBoundingClientRect(),n=Math.max(document.documentElement.clientHeight,window.innerHeight),i=Math.max(document.documentElement.clientWidth,window.innerWidth);return e.bottom>0&&e.top<n&&e.right>=0&&e.left<i}return!1}(this))this.timer?.start(),this.refresh();else{const e=this.lazyFetch||Ko;Wo[this.id]={callback:this.lazyFetchHandlerCallback(),...e}}this.disableRefresh||this.isInView()&&(this.timer?.start(),this.refresh())}function pr(){this.clear()}class fr{configSize;containerMap;eligibleForTimedRefresh;features;gptComponent;ypbComponent;gptSetting;path;size;i13n;id;isAdBlockAd;isEdgeToEdge;kvs;metrics;refreshConfig;region;renderInfo;richMediaConfig;slot;stackGroup;stickyConfig;store;timer;useSecure;viewPercentage;_clearCount;customSizeConfig;disableRefresh;disableTimedRefresh;adBlockPlusEnabled;_fetchCount;_failureCount;_isIntersecting;_stackAdLastRefreshedAt;lazyFetch;creativeInteractionConfig;hbResponsiveSize;refreshTimeoutActive;constructor(e){const{containerMap:t,disableRefresh:n,disableTimedRefresh:i,adBlockPlusEnabled:s,features:o,gptComponent:r,ypbComponent:a,gptSetting:c,kvs:d,refreshConfig:l,region:g,i13n:u,id:h,path:p,customSizeConfig:f,size:m,stackGroup:b,stickyConfig:_,store:y,useSecure:E,lazyFetch:I}=e;this.refreshTimeoutActive=null,this.isAdBlockAd=!1,this.configSize=m,this.containerMap=t,this.disableRefresh=n,this.disableTimedRefresh=i,this.features=o,this.id=h,this.path=p,this.gptComponent=r,this.ypbComponent=a,this.metrics={},this.refreshConfig=l,this.region=g,this.renderInfo={},this.stackGroup=b,this.store=y,this.useSecure=E,this.viewPercentage=0,this._isIntersecting=!1,this._stackAdLastRefreshedAt=0,this.gptSetting=c,this._failureCount=0,this._fetchCount=0,this._clearCount=0,this.i13n=u,this.lazyFetch=I,d&&(this.kvs=d),Ki("benji-addBucketToSlotKVs")&&this.i13n.bucket&&(this.kvs||(this.kvs={}),this.kvs.bucket=JSON.parse(JSON.stringify(this.i13n.bucket))),!this.disableRefresh&&!this.disableTimedRefresh&&this._createRefreshTimer();const S=(o?.enableAdBlockDetection&&or())??!1;S?(this.size=ar(S,this),cr(!0,S,this),this.isAdBlockAd=!0,dr.call(this,S)):this.size=this.configSize,this.store.add(g,h,this);const v={gptSetting:this.gptSetting,id:h,path:p,size:m};o?.enableLazyFetch&&this.lazyFetch?(Wo[h]={callback:this.lazyFetchHandlerCallback(),...this.lazyFetch},Qo(h)):(this._createSlot(v),this._sendKvs()),f&&(this.customSizeConfig=f),_&&(this.stickyConfig=_,lr(this)),this.adBlockPlusEnabled=s,this.features?.enableAdInteractionBasedRefresh&&(this.creativeInteractionConfig={hoverTimerId:null,iframeContainer:null,interactionActive:!1,interactionEndHandler:er.bind(this),interactionStartHandler:Zo.bind(this),isYahooCreative:!1,scrollOffset:150,ycInteractionActive:!1})}disableAllRefresh(){this.disableRefresh=!0}enableAllRefresh(){this.disableRefresh=!1}destroy(){this._unloadHandler(),this.timer&&(this.timer.stop(),delete this.timer),this.slot&&this.gptComponent.destroy([this.slot]);const t=this.i13n?.feature?.includes("benji-enablePBJSAdUnitDestroy");t&&this.ypbComponent._destroy(this.id),this.store.delete(this.region,this.id),e.benji.logger.clearDatastore(this.id)}clear(){this.gptComponent.clear([this.slot]),this.increaseClearCount()}increaseFailureCount(){this._failureCount+=1}increaseFetchCount(){this._fetchCount+=1}increaseClearCount(){this._clearCount+=1}isInitiallyLoaded(){return 1===this._fetchCount}_timerAction(){this.disableRefresh||(this.isInView()?this.refreshConfig.requireUserAction?Is.push((()=>this.refresh())):this.refreshWithTimeout():this.eligibleForTimedRefresh=!0)}checkAndRefreshAd(){this._timerAction()}isInitialLoadOfStackGroupAC(){if(!this.stackGroup)return!1;const e=this.store.getStackAdComponents(this.stackGroup);return!(e.reduce(((e,t)=>e+t._fetchCount),0)>=e.length)}isInView(){return this.useSecure?this._isIntersecting:Si(this.id)&&this.viewPercentage>=50}lazyFetchHandlerCallback=()=>()=>{if(this.features?.enableTabSwitchDestroy&&this.slot&&this.store.getAdComponentById(this.id))this.refresh();else{const{gptSetting:e,id:t,path:n,region:i,size:s}=this,o={gptSetting:e,id:t,path:n,size:s};this.store.add(i,t,this),this._createSlot(o),!this.disableRefresh&&!this.disableTimedRefresh&&this._createRefreshTimer(),this._sendKvs(),this.render()}};getRenderCount(){return this._fetchCount-this._failureCount}refreshWithTimeout(){if(this.disableRefresh)return void(this.eligibleForTimedRefresh=!1);const e=this.store.getStackAdComponents(this.stackGroup);if(this.stackGroup&&this.features?.enableAdStacking&&e?.some((e=>e.id!==this.id&&So(e.id))))return;const{duration:t}=this.refreshConfig;vo(this.id)&&So(this.id)&&t&&36>t?(this.refreshTimeoutActive&&clearTimeout(this.refreshTimeoutActive),this.refreshTimeoutActive=setTimeout((()=>{_o(this.id),this.refresh()}),1e3*(36-t)),In({logType:Sn.INFO,message:"IBV_AD_LONGER_THAN_20_SEC",messageDetails:"Ad duration longer than 20 seconds",source:ai})):(_o(this.id),this.refresh())}refresh(){if(this.refreshConfig.limit&&this.refreshConfig.limit<=this.getRenderCount())return;this.refreshTimeoutActive&&(clearTimeout(this.refreshTimeoutActive),this.refreshTimeoutActive=null);const e=this.stackGroup&&this.features?.enableAdStacking;vo(this.id)&&fo(this.id);const t=(this.features?.enableAdBlockDetection&&or())??!1;t!==this.isAdBlockAd&&(this.isAdBlockAd=t,function(e,t){const n=t.kvs?.loc;if(cr(!1,e,t),"string"==typeof n&&we[n]){const n=ar(e,t);t.size=n,Yo(t,n)}}(t,this),dr.call(this,t)),this.viewPercentage=0;const n=this.renderInfo.size&&`${this.renderInfo.size.width}x${this.renderInfo.size.height}`,i=this.features?.enableMultiSizeRefresh&&n&&(this.refreshConfig.multiSizeRefreshMap&&this.refreshConfig.multiSizeRefreshMap[n]||nn[n])&&1===this._fetchCount,s=this.refreshConfig.sameSizeRefresh&&!function(e){const t=e?.getSizes();if(!t)return!1;for(let e=0;e<t.length;e++)if("fluid"===t[e])return!0;return!1}(this.slot)&&1===this._fetchCount;if(e){if(!(Date.now()-this._stackAdLastRefreshedAt<=150)){const e=this.store.getStackAdComponents(this.stackGroup);e.forEach((e=>{e.id!==this.id&&(e.eligibleForTimedRefresh=!1),e._stackAdLastRefreshedAt=Date.now()})),e.forEach((e=>{Ui(e)}))}}else i?function(e){try{const{slot:t,renderInfo:n}=e,i=t.getSlotElementId();if(document.getElementById(i)instanceof HTMLElement){if(!n.size)return void Ui(e);const{height:t,width:i}=n.size,s=`${i}x${t}`,o=e.refreshConfig.multiSizeRefreshMap&&e.refreshConfig.multiSizeRefreshMap[s]||nn[s];e.size=o,Vo(e,o)}}catch(t){Ui(e)}}(this):s?function(e){try{const{slot:t,features:n,renderInfo:i}=e,s=t.getSlotElementId(),o=document.getElementById(s);if(o instanceof HTMLElement){if(!i.size)return void Ui(e);const{height:s,width:r}=i.size,a=[r,s],c=t.getSizes();let d=!1;for(let e=0;e<c.length;e++){const t=c[e];t.height===s&&t.width===r&&(d=!0)}if(!d)return void Ui(e);if(e.size=a,e.isEdgeToEdge||(o.style.minHeight=`${s}px`),n?.enableSizeMapping)return e.gptComponent.enableSizeMappingForSlot(e,[0,0],a),void Ui(e);Vo(e,a)}}catch(t){Ui(e)}}(this):Ui(this);this.eligibleForTimedRefresh=!1}_getInfoForPrebid(){return{adComponentId:this.id,adComponentPath:this.path,size:this.size,...this.kvs?.loc&&{loc:this.kvs.loc},...this.stackGroup&&{stackGroup:this.stackGroup}}}render(){if(this._loadHandler(),Wo&&Wo[this.id])return;this.startPrebidAuction((()=>{const e=document?.getElementById(this.id);"index"!==this.region||e?this.renderSlot():Ji((()=>{this.renderSlot()}))}))}renderSlot(){this.gptComponent.render(this.useSecure&&this.containerMap?.[this.id]?this.containerMap[this.id]:this.id,this)}renewTimer(e){if(void 0===this.timer)return;const t=this.timer.action;this.timer.stop(),this.timer=new qo({action:t,duration:e})}startPrebidAuction(e){const t=this._getInfoForPrebid(),n=e??(()=>{this.renderSlot()});this.ypbComponent.startPrebid(t,n)}_sendKvs(){this.kvs&&(e.benji.logger.updateDatastore(this.id,{sec:this.kvs.loc}),this.gptComponent.setTargetingForSlot(this,this.kvs))}_createSlot(e){this.gptComponent.create(e,this)}_createRefreshTimer(){const{duration:e}=this.refreshConfig;e&&(this.eligibleForTimedRefresh=!1,this.timer=new qo({action:this._timerAction.bind(this),duration:e}))}_loadHandler(){this.disableRefresh&&!this.features?.enableTabSwitchDestroy||this.useSecure||(ms[this.id]=ur.bind(this),bs[this.id]=gr.bind(this),_s[this.id]=hr.bind(this),ys[this.id]=pr.bind(this))}_unloadHandler(){delete ms[this.id],delete bs[this.id],delete _s[this.id],delete ys[this.id]}loadResizeHandler(e){this.useSecure||(Es[this.id]=e)}unloadResizeHandler(){this.useSecure||delete Es[this.id]}setRenderInfo(e){this.renderInfo={...this.renderInfo,...e}}}function mr(e){return e instanceof fr}class br{nextHandler=null;handle(e){const{positionId:t,positionConfig:n,context:i}=e,s=ki(n);if(!(Bi(n)||s))return null;const{id:o,region:r}=n;t!==o&&i.logger.sendDebugBeacon({id:o,outcm:"gamSchemaCheck",positionId:t,type:"positionKeyIdMismatch"});return void 0!==i.store.getAdComponent(r,o)?null:this.nextHandler?this.nextHandler.handle(e):void 0}setNext(e){this.nextHandler=e}}class _r{nextHandler=null;handle(e){const{positionConfig:t,context:n}=e,{duration:i,limit:s,multiSizeRefreshMap:o,requireUserAction:r,sameSizeRefresh:a,reserved:c}=n.config.setting?.refresh||{},{disableRefresh:d,disableTimedRefresh:l}=n.config.setting?.refresh||{},g={disableRefresh:d,disableTimedRefresh:l,duration:i,limit:s,multiSizeRefreshMap:o,requireUserAction:r,reserved:c,sameSizeRefresh:a},u=n.config.setting?.useSecure??!1;if(Bi(t)){const e=n.i13nStore.currentI13n||{},i="abp"===e.abk,{id:s,customSizeConfig:o,size:r,kvs:a,disableRefresh:c,disableTimedRefresh:d,stackGroup:l,stickyConfig:h,gptSetting:p,region:f}=t,m=((e,t)=>{if(e&&e.includes("${")){const n="yhp";let i=t.region;const s=t.site,o=t.lang;st[o]&&!ot.includes(s)&&(i=st[o]);const r=rt[s]||n;return e.replace(/\${REGION}/g,i.toLowerCase()).replace(/\${SITE}/g,r)}return e})(t.path,e),b=t.refresh,_=b?.requireUserAction??t.requireUserAction??g?.requireUserAction,y=b?.sameSizeRefresh??t.sameSizeRefresh??g?.sameSizeRefresh,E=b?.multiSizeRefreshMap??t.multiSizeRefreshMap??g?.multiSizeRefreshMap,I={...g,...b,multiSizeRefreshMap:E,requireUserAction:_,sameSizeRefresh:y},{feature:S}=n.config,v={enableAdBlockDetection:Ki("enableAdBlockDetection")||Ki("benji-enableAdBlock")||!1,enableAdInteractionBasedRefresh:S?.enableAdInteractionBasedRefresh||!1,enableAdStacking:S?.enableAdStacking||!1,enableLazyFetch:S?.enableLazyFetch||!1,enableMultiSizeRefresh:S?.enableMultiSizeRefresh||!1,enableSizeMapping:S?.enableSizeMapping||!1,enableTabSwitchDestroy:S?.enableTabSwitchDestroy||!1,enableYahooPrebid:n.ypb.status!==zo.DISABLED},A=Jo(n,t),C={adBlockPlusEnabled:i,containerMap:n.containerMap,customSizeConfig:o,disableRefresh:g.disableRefresh?g.disableRefresh:c,disableTimedRefresh:g.disableTimedRefresh?g.disableTimedRefresh:d,features:v,gptComponent:n.gpt,gptSetting:p,i13n:e,id:s,kvs:a,lazyFetch:A,path:m,refreshConfig:I,region:f,size:r,stackGroup:l,stickyConfig:h,store:n.store,useSecure:u,ypbComponent:n.ypb},{allowOnlyNonPersonalizedAds:T,allowOnlyLimitedAds:D}=n.config.setting?.consent||{},R=D||T;if(n.ypb.status!==zo.DISABLED&&(!n.config.feature?.enableAdStacking||R)&&t.stackGroup&&Gi(s,t.stackGroup))return void Ji((()=>{document.getElementById(s)?.remove()}));return new fr(C)}if(this.nextHandler)return this.nextHandler.handle(e)}setNext(e){this.nextHandler=e}}class yr{cseg;features;id;mode;placement;region;store;taboolaComponent;targetType;lazyFetch;constructor(e){const{cseg:t,features:n,id:i,mode:s,placement:o,region:r,store:a,taboolaComponent:c,targetType:d,lazyFetch:l}=e;this.features=n,this.id=i,this.mode=s,this.placement=o,this.region=r,this.store=a,this.taboolaComponent=c,this.targetType=d,this.lazyFetch=l,void 0!==t&&(this.cseg=t);const g={container:this.id,mode:this.mode,placement:this.placement,region:r,target_type:this.targetType,...void 0!==this.cseg?{cseg:t}:{}};if(n?.enableLazyFetch&&this.lazyFetch){const e=()=>{this.taboolaComponent.create(g),this.taboolaComponent.render()};Wo[i]={callback:e,...this.lazyFetch},Qo(i)}else this.taboolaComponent.create(g);this.store.add(r,i,this)}destroy(){this.store.delete(this.region,this.id)}refresh(){}render(){this.taboolaComponent.render()}}function Er(e){return e instanceof yr}class Ir{nextHandler=null;handle(e){const{positionConfig:t,context:n}=e,{feature:i}=n?.config,s=Jo(n,t),o={enableLazyFetch:i?.enableLazyFetch||!1},{cseg:r,mode:a,placement:c,targetType:d,region:l,id:g}=t,u={cseg:r,features:o,id:g,lazyFetch:s,mode:a,placement:c,region:l,store:n.store,taboolaComponent:n.taboola,targetType:d};return new yr(u)}setNext(){}}function Sr(e){const t=[],n=new br,i=new _r,s=new Ir;return n.setNext(i),i.setNext(s),Object.entries(e).forEach((([e,i])=>{const s=n.handle({context:this,positionConfig:i,positionId:e});s&&t.push(s)})),t}function vr(e){e?.forEach((e=>{e.render()}))}function Ar(e){if(hs("benji","render",{arg:e||null},Date.now()),"object"!=typeof e){const t="string"==typeof e?e:h;return void vr(this.store.getRegionAdComponents(t))}const t=e;this.ypb.status!==zo.DISABLED&&this.ypb.updateStackGroupMap(t);vr(Sr.call(this,t))}function Cr(e,t){if(e){const n=e.benjiAd?.slot,i=t&&n.id?function(e){return e+"-"+(new Date).getUTCMilliseconds()+"-benji-ad"}(n.id):n.id,s={id:i,path:n.path,region:n.region,size:n.size};return t&&t.elem&&(t.elem.id=i),s}}function Tr(t){const n={};t&&(n[t.id]=t,Ar.call(e.benji,n))}const Dr={[G]:function(e){const t=Cr(e&&e.meta&&e.meta.darlaConfig);t&&Tr(t)}};const Rr={[$]:function(e){const t=Cr(e&&e.meta&&e.meta.darlaConfig,e);t&&Tr(t)}};function Lr(){const t=Dr[G],n=Rr[$];e.wafer.ready((()=>{e.wafer.on(G,t),e.wafer.on($,n)}))}const wr=(e,t,n)=>{const i=e.document.createElement("meta");i.name=t,i.content=n,e.document?.head.append(i)};const Br=(e,t)=>{try{return e?.localStorage?.getItem&&Object.values(A).includes(t)?e.localStorage.getItem(t):null}catch(e){return null}};function kr(e,t){e.config.i13n?.axids&&e.i13nStore.updateCurrent({axids:e.config.i13n?.axids});let n=e.getAxid(kt);const i=Br(t,A.ATS_DIRECT),s=Wi(t,m),{allowOnlyNonPersonalizedAds:o,allowOnlyLimitedAds:r}=e.config.setting?.consent||{},a=!o&&!r;(o||r)&&(n="");const{age:c=0,gender:d=""}=a&&e.config.setting?.userInfo||{},l=function(e){const t={},n=Wi(e,b);n&&(t.ncid=n);const i=Wi(e,_);if(i){t.fr=i;const n=Wi(e,E);n&&(t.frtype=n)}return t}(t),g=Or(e.gpt,{age:c,atsd:Hi(i),axid:n,gender:d,i13n:e.config.i13n,queryI13n:l,testid:s});if(e.taboola){const t=e.config.i13n?.pt;e.taboola.updateTaboolaPageConfig(t,S)}e.i13nStore.updateCurrent(g)}function Pr(e,t,n){const{gpt:i,taboola:s}=e,o={};if(n&&n.length&&"string"!=typeof n){const t=n.filter((t=>{if(t===f){const{partner:n}=e.i13nStore.currentI13n;return!(n in ke)&&(i.clearTargeting(t),!0)}return!et.includes(t)&&(i.clearTargeting(t),!0)}));e.i13nStore.clearKeysFromCurrent(t)}let r;t&&t.url&&(r=t.url,i.setPageUrl(r)),jr(at,t,o);const a=Ri(o,tt);if(Object.keys(a).length>0){i.setTargeting(a);const n=e.i13nStore.currentI13n;e.i13nStore.updateCurrent(a);const o=e.i13nStore.currentI13n;if(s&&"modal"===o.pd&&"home"===n.pt){let t=window.location.origin;const n=e.config.i13n.site;"https://www.yahoo.com"===t&&"fp"!==n&&(t=`${t}/${n}`),s.sendPublisherURL(t)}if(s&&s.pageType&&"modal"!==o.pd){const e=Ni(o,s.axid);s.sendPublisherBlob(e),s.updateTaboolaPageConfig(t.pt,S)}}}function Or(e,{age:t,atsd:n,axid:i,gender:s,i13n:o,queryI13n:r,testid:a}){const c={};jr(et,o,c),jr(at,o,c),i&&(c.axid=Nr(i)),n&&(c.atsd=Nr(n)),a&&(c.testid=Nr(a)),t&&(c.bka=function(e){const t=[18,21,25,35,45,50,55,65,101].findIndex((t=>e<t));return-1===t?"0":`${t}`}(t)),s&&"f"===s&&(c.bkg="1"),s&&"m"===s&&(c.bkg="2"),o?.bka&&(c.bka=o?.bka),o?.bkg&&(c.bkg=o?.bkg),r&&Object.assign(c,r);const d=Ri(c,tt);if(d&&Object.keys(d).length){const t=function(e){if(""===e||null==e)return;if(Array.isArray(e)){if(0===e.length)return;e=e.join("")}const t="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567";let n="",i=0,s=0;for(let r=0;r<e.length;)r+=("string"==typeof(o=e[r])&&(o=o.charCodeAt(0)),i<0?s|=o>>-i:s=o<<i&248,i>3?(i-=8,1):(i<4&&(n+=t[s>>3],i+=5),0));var o;return n+(i<0?t[s>>3]:"")}(d.axid);e.setTargeting({...d,...t?{axid:t}:{}})}const l={};return jr(o&&Object.keys(o)||[],o,l),{...l,...d}}function jr(e,t,n){if(!t||"object"!=typeof t||Array.isArray(t)||0===Object.keys(t).length)return;[...Object.keys(t).filter((e=>C.some((t=>e.startsWith(t))))),...e].forEach((e=>{if(t[e]){let i=e,s=Nr(t[e]);Qe.hasOwnProperty(e)&&(i=Qe[e]),ct.includes(e)&&"string"==typeof s&&(s=encodeURIComponent(s)),n[i]=s,Ze.hasOwnProperty(e)&&(n[i]=Mr(n[i]))}}))}function Nr(e){return"number"==typeof e?`${e}`:e}function Mr(e){return"string"==typeof e?e.split(/[;,]+/):e}const Ur={[W]:function(e){if(e&&e.isEmpty){const t=e?.slot?.getSlotElementId(),n=this.store.getAdComponentById(t);if(n&&mr(n)){if(this.config?.feature?.enableAdStacking&&n.stackGroup)return;n.destroy()}(e=>{const t=document.getElementById(e);t?.style.setProperty("display","none");const n=t?.parentElement&&Ti(t.parentElement);n?.style?.setProperty("display","none")})(t)}}};function Fr(){const e=Ur[W];this.gpt.addEventListener(W,e.bind(this))}const zr={BTN:"BTNA","BTN-1":"BTNB","BTN-2":"BTNC","BTN-3":"BTND"},xr={BTN:{},"BTN-1":{},"BTN-2":{},"BTN-3":{},BTNA:{},BTNB:{},BTNC:{},BTND:{},FB2A:{},FB2B:{},FB2C:{},FB2D:{}};let Gr=0,$r=0;function Hr(t){if(t){let n=t?.slot?.getSlotElementId();n=n.replace(/default|sda-|-sizer/gi,""),n=zr[n]||n,xr[n]&&(Gr++,t.isEmpty?t.isEmpty&&(xr[n].validAd=!1):xr[n].validAd=!0),Gr===$r&&(((e,t)=>{e.dispatchEvent(new CustomEvent(x,{detail:{positions:t}}))})(e,xr),Gr=0)}}function Yr(){Object.keys(this.config.positions).forEach((e=>{(e.includes("BTN")||e.includes("FB2"))&&$r++})),this.gpt.addEventListener(W,(e=>{Hr.call(this,e)}))}class Vr{constructor(){return this}add(e,t,n){return void 0===this[e]?(this[e]={[t]:n},n):void 0===this[e][t]?(this[e][t]=n,n):void 0}delete(e,t){this[e]&&this[e][t]&&delete this[e][t]}getAdComponent(e,t){if(void 0!==this[e])return this[e][t]}getAdComponentById(e){const t=Object.entries(this);for(let n=0;n<t.length;n++){const[,i]=t[n];if(void 0!==i[e])return i[e]}}getAdComponentByLoc(e){const t=Object.entries(this);for(let n=0;n<t.length;n++){const[,i]=t[n],s=Object.values(i).find((t=>t?.kvs?.loc===e));if(s)return s}}getRegionAdComponents(e){return"object"==typeof this[e]?Object.values(this[e]):[]}getSameSideStackAdComponents(e,t){const n=[],i=this.getStackAdComponents(t),s=xi(t);if(void 0===s)return n;const o=e.includes(s[0])?s[0]:s[1];return i.forEach((e=>{e.id.includes(o)&&n.push(e)})),n}getStackAdComponents(e){const t=[],n=Object.entries(this);for(let i=0;i<n.length;i++){const[,s]=n[i];Object.values(s).forEach((n=>{mr(n)&&n?.stackGroup===e&&t.push(n)}))}return t}}class qr{currentI13n={};regions={};constructor(){return this}updateCurrent(e){this.currentI13n={...this.currentI13n,...e};const t=e.pstaid??e.lpstaid;t&&this.putRegion(t,e)}clearKeysFromCurrent(e){e.forEach((e=>{this.currentI13n[e]&&delete this.currentI13n[e]}))}putRegion(e,t){this.regions[e]?this.regions[e]={...this.regions[e],...t}:this.regions[e]=t}getRegion(e){return this.regions[e]}getCurrent(){return this.currentI13n}getKeyDifferences(e){return Object.keys(e).reduce(((t,n)=>{let i=e[n],s=this.currentI13n[n];return Ze.hasOwnProperty(n)&&(i=Mr(i).join(","),s=Array.isArray(s)?s.join(","):s),this.currentI13n.hasOwnProperty(n)?i!==s&&(t[n]=e[n]):t[n]=e[n],t}),{})}createRSObject(e=this.currentI13n,t){const n={};for(const i of Oe)"axid"===i&&t?n[i]=t:void 0!==e[i]&&""!==e[i]&&(n[i]=e[i]);return n}createPublisherBlob(e=this.currentI13n,t){const n=this.createRSObject(e,t);return[Object.entries(n).map((e=>e.join(":"))).join(";"),"",e.spaceid,"","","",e.bucket,""].join("|")}}class Wr{gpt;ypb;config;targetOrigin;containerMap;store;i13nStore;constructor(){this.i13nStore=new qr,this.config={},this.store=new Vr,this.containerMap={},this.targetOrigin="",this.gpt=new ps,this.ypb=new Go}getAdComponent=(e,t=h)=>this.store.getAdComponent(t,e);handleSlotRenderEnded=e=>{const{size:t}=e;this.postMessageToParent({payload:{id:e.slot.getSlotElementId(),size:t,sizes:e.slot.getSizes()},type:d})};handleIntersect=e=>{e.forEach((e=>{const{id:t,isIntersecting:n}=e,i=this.getAdComponent(t);i&&mr(i)&&(i._isIntersecting!==n&&n&&i?.eligibleForTimedRefresh&&i?.refresh(),i._isIntersecting=n)}))};handleImpressionViewable=e=>{const t=e.slot.getSlotElementId(),n=this.getAdComponent(t);n&&mr(n)&&n.timer?.start()};initialize(){const e=location.origin;this.containerMap={};const t=window.parent.frames,n=Object.keys(this.config.positions);for(let i=0;i<t.length;i++)try{const{location:s}=t[i];if(s.origin===e&&s.href!==location.href)for(let e=0;e<n.length;e++){if(this.containerMap[n[e]])continue;const s=t[i].window.document.getElementById(n[e]);if(s){this.containerMap[n[e]]=s;break}}}catch(e){}}handleInit=({config:e,origin:t})=>{this.config=e,this.targetOrigin=t,this.initialize()};handleStart=()=>{this.config?.positions&&(this.fetch(),this.render())};handlePostMessage=e=>{if(t=e.origin,!i.test(t))return;var t;const{payload:n,type:d}=e.data;switch(d){case s:this.handleInit({config:n.config,origin:e.origin}),this.postMessageToParent({type:o});break;case l:this.handleStart();break;case c:this.render(n.config);break;case r:{const{age:e,atsd:t,axid:i,gender:s}=n;Or(this.gpt,{age:e,atsd:Hi(t),axid:i,gender:s,i13n:this.config.i13n,queryI13n:null,testid:null});break}case a:this.handleIntersect(n);break;case g:this.store.getRegionAdComponents(h).forEach((e=>{mr(e)&&e?._isIntersecting&&(e.refresh(),e.timer?.start())}))}};init(){const e=new URL(window.location.href);this.targetOrigin=decodeURIComponent(e.searchParams.get("o")||""),window.addEventListener("message",this.handlePostMessage),this.gpt.addEventListener(W,this.handleSlotRenderEnded),this.gpt.addEventListener(V,this.handleImpressionViewable)}postMessageToParent(e){window.parent.postMessage(e,this.targetOrigin)}fetch(e){return Kr.call(this,e??this.config.positions)}render(e){(e?this.fetch(e):this.store.getRegionAdComponents(h)).forEach((e=>{e.render()}))}}function Kr(e){const t=[],n=new br,i=new _r;return n.setNext(i),Object.entries(e).forEach((([e,i])=>{const s=n.handle({context:this,positionConfig:i,positionId:e});s&&t.push(s)})),t}function Jr(){this instanceof Wr||this.on(lt,(e=>{!function(e,t){const{data:n}=t,{id:i,height:s,width:o}=n,r=document.getElementById(i),a=e?.store?.getAdComponentById(i),c=a?.hbResponsiveSize?.split("x");if(c&&Number(c[0])===o&&Number(c[1])===s)return;const d=r?.clientHeight;null!==s&&s!==d&&r?.style.setProperty("min-height",s+"px")}(this,e)}))}const Qr={};function Xr(e){const t=e.slot.getSlotElementId(),n=this.store.getAdComponentById(t);void 0!==n&&mr(n)&&n&&n.isInitiallyLoaded()&&"index"===n.region&&(n.stackGroup&&!n.isInitialLoadOfStackGroupAC()||this.logger.isPerfBeaconFiredForSlot(t)||this.logger.sendPositionPerfBeacon(t))}function Zr(){const t=e.performance?.now;t&&(this.gpt.addEventListener(K,(t=>{const n=t.slot.getSlotElementId();this.logger.updateDatastore(n,{[zt]:Math.round(e.performance.now())})})),this.gpt.addEventListener(W,(t=>{const n=t.slot.getSlotElementId();this.logger.updateDatastore(n,{[xt]:Math.round(e.performance.now())})})),this.gpt.addEventListener(q,(t=>{const n=t.slot.getSlotElementId();this.logger.updateDatastore(n,{[Gt]:Math.round(e.performance.now())}),Xr.call(this,t)})))}function ea(t,n){const i=Math.round(e.performance.now());Qr[t]=i,Qr.TABOOLA_JS_FETCH_START_TIME&&(this.taboola.addEventListener(ne,(()=>{Qr[re]=Math.round(e.performance.now())})),this.taboola.addEventListener(ie,(()=>{Qr[ae]=Math.round(e.performance.now())})),this.taboola.addEventListener(ee,(()=>{Qr[le]=Math.round(e.performance.now())})),this.taboola.addEventListener(X,(()=>{Qr[ce]=Math.round(e.performance.now())})),this.taboola.addEventListener(Z,(()=>{Qr[de]=Math.round(e.performance.now())}))),t===fe&&Qr.TABOOLA_INIT_TIME&&Qr.TABOOLA_READY&&(Qr.TABOOLA_RENDER_TIME=i,this.logger.sendPerfBeacon(Qr,{sec:n}))}const ta="INITIAL_RENDER_FAILURE",na="REFRESH_RENDER_FAILURE",ia="REFRESH_RENDER",sa="INITIAL_RENDER",oa={ads_failure_total:0,ads_fetch_total:0,ads_refresh_total:0,ads_slot_right_failure:0,ads_slot_right_total:0,ads_slot_top_failure:0,ads_slot_top_total:0};function ra(e,t){if(void 0===t.kvs||void 0===t.kvs.loc)return;const n=function(e){switch(e){case"top_right":return"right";case"top_center":return"top";default:return}}(t.kvs.loc);if(void 0===n)return;let i;return i=!0===e.isEmpty?t.isInitiallyLoaded()?ta:na:t.isInitiallyLoaded()?sa:ia,function(e,t){const n={...oa};switch(n[`ads_slot_${t}_total`]=1,e){case sa:return n.ads_fetch_total=1,n;case ia:return n.ads_refresh_total=1,n;case ta:return n[`ads_slot_${t}_failure`]=1,n.ads_failure_total=1,n.ads_fetch_total=1,n;case na:return n[`ads_slot_${t}_failure`]=1,n.ads_failure_total=1,n.ads_refresh_total=1,n}}(i,n)}function aa(){this.gpt.addEventListener(W,(e=>{const t=e.slot.getSlotElementId(),n=this.store.getAdComponentById(t);if(void 0===n||!mr(n))return;const i=ra(e,n);void 0!==i&&this.logger.sendMetricsBeacon(i)}))}function ca(){this.gpt.addEventListener(W,(e=>{const t=e.slot.getSlotElementId(),n=this.store.getAdComponentById(t);if(void 0===n||!mr(n))return;const i=function(e,t){const{id:n}=t,i=t.getRenderCount(),s=i>1?"true":"false",o=t.kvs?.loc?t.kvs.loc:"undefined",r=e.isEmpty?"failed":"succeeded";return{id:n,isRefresh:s,loc:Array.isArray(o)?o[0]:o,renderCount:i,status:r}}(e,n);this.logger.sendDebugBeacon(i)}))}function da(){let t=!0;const n=n=>{this.taboola.addEventListener(n,(i=>{const s=i.detail,{container:o,mode:r,placement:a,reason:c}=s;!function(t,n,i){if(!us())return;const{container:s}=t;s?.id&&(e.benji.debug||(e.benji.debug={}),e.benji.debug.taboolaEvents||(e.benji.debug.taboolaEvents=[]),e.benji.debug.taboolaEvents.push({data:t,id:s.id,timestamp:i,type:n}))}(s,n,Date.now());const d=this.store.getAdComponentById(o?.id);if((void 0===d||!Er(d))&&n!==te&&n!==oe)return;const l={container:o?.id,mode:r,outcm:xe,placement:a,[`${n}Time`]:Math.round(e.performance.now()),type:n,url:window.location.href};c&&(l.reason=c),t&&(ea.call(this,"TABOOLA_RENDER_TIME",a),t=!1),this.logger.sendDebugBeacon(l),this.logger.sendPBDLog(l,"taboolaRequest","https://pbd.yahoo.com/data/logs/taboola",!0)}))};n(se),n(te),n(oe)}function la(e){const{advertiserId:t}=e;if(t&&void 0!==ve[t]?.excludeFromReservedLabeling)return!ve[t].excludeFromReservedLabeling;const n=function(e){return e.advertiserId&&e.campaignId&&e.creativeId&&e.lineItemId?T.DirectSold:T.DynamicAllocation}(e),i=function(e){const{advertiserId:t}=e;if(t)return ve[t]?ve[t].advertiser:void 0}(e);return n===T.DirectSold&&void 0===i}function ga(e,t,n,i=!1){const s=e.config.setting?.refresh?.reserved,o=function(e,t,n){if(!n)return 0;const i=t&&n.sponsorship?n.sponsorship:n?.duration||0,s=e.size;if(!Array.isArray(s))return i;const o=JSON.stringify(s),r=n[w[o]];return r?t&&r?.sponsorship?r?.sponsorship:r?.duration||i:i}(t,i,s),r=n?.refreshConfig?.reserved;return(i&&r?.sponsorship?r?.sponsorship:r?.duration)||o}const ua="benji-premium-ad",ha="D(n)--landscape";function pa(e,t,n){n&&Object.keys(n).forEach((i=>{let s;s=i&&!0===n[i]?{}:i&&n[i];const o=L[i];s=Object.assign({},o,s);const r=t?.hbResponsiveSize?.split("x"),a=r?.length?r:e.size;if(t&&s?.size&&a&&s.size[0]===Number(a[0])&&s.size[1]===Number(a[1])){(s.breakpoints||s.resizeContainer)&&(s.isEligibleForResize=!0,t.isEdgeToEdge=!0);const e=this.config.setting?.refresh?.hbResponsive;r?.length&&t.hbResponsiveSize&&e&&rr(t,e.duration);const n=t.refreshConfig,o=n?.reserved&&n.reserved[i],a=o?.duration,c=o?.disableRefresh;c?t.disableAllRefresh():a&&rr(t,a),s.stickyConfig&&lr(t)}else s.isEligibleForResize=!1;n[i]=s}))}function fa(e,t,n){let i;const s=document.getElementById(e);if(!s)return;const o=s?.children[0],r=o?.children[0];if(t){const e=Object.keys(t).find((e=>{const n=e&&t[e];return!!n&&!0===n.isEligibleForResize}));i=e&&t[e]}if(!i)return;const a=window.innerWidth,c=i?.breakpoints;let d,l=!0;const g=i?.resizeContainer;if(g){const{height:e,width:t}=g,n=e=>e?.id&&document.getElementById(e.id)||e?.class&&document.getElementsByClassName(e.class)[0],i=()=>{const i=n(e),s=n(t);r.width=s&&JSON.stringify(s.clientWidth)||r.width,r.height=i&&JSON.stringify(i.clientHeight)||r.height};i(),setTimeout((()=>{i()}),200),s.style.removeProperty("min-height")}else for(const e in c)if(r&&e){const t=e.split(","),i=Number(t[0]),g=Number(t[1]);if(a>=i&&a<=g){const t=c[e];d=a*t[1]/t[0],l&&(n?s.setAttribute("style",`all: revert; min-height: ${d}px;`):s.setAttribute("style",`min-height: ${d}px;`),l=!1),o.style.display="block",r.height=d.toString(),r.width=a.toString()}}}function ma(e,t,n){const i=[],s=document.getElementById(e);if(s){if(!n){for(const e of s.classList){const t=e;t.toLowerCase().startsWith("sda")||i.push(t)}s.classList.remove(...i)}s.classList.add(`${ua}`),t&&function(e){e.classList?.add(ha);const t=e.parentElement&&Ti(e.parentElement);t?.classList?.add(ha)}(s)}}function ba(e){const t=e.slot.getSlotElementId(),n=this.store.getAdComponentById(t),i=this.config,s=this.config.feature?.enableNewPremiumAdLogic;if(void 0===n||!mr(n))return;const o=n.customSizeConfig;if(la(e)){if(n?.refreshConfig?.reserved?.disableRefresh||this.config.setting?.refresh?.reserved?.disableRefresh)n.disableAllRefresh();else{const t=ga(this,e,n,!1);t&&rr(n,t)}}else n.timer?.duration===n.refreshConfig.duration||n.isAdBlockAd||n.refreshConfig.duration&&rr(n,n.refreshConfig.duration);if(n.isEdgeToEdge=!1,o&&pa.call(this,e,n,o),n.isEdgeToEdge&&o){fa(n.id,o,s);ma(t,"smartphone"===i.i13n?.device,s),function(e,t){e.loadResizeHandler((()=>{e.isEdgeToEdge&&e.customSizeConfig&&fa(e.id,e.customSizeConfig,t)}))}(n,s)}else{const e=document.getElementById(t);if(e){e?.classList?.remove(ha,ua);const t=e?.parentElement&&Ti(e.parentElement);t?.classList?.remove(ha),s&&"revert"===e.style.all&&(e.style.all="revert-layer")}}}function _a(e){const t=e.slot.getSlotElementId(),n=this.store.getAdComponentById(t);n?.richMediaConfig&&function(e,t){if(!t)return;const{animationDuration:n,collapsedSize:i}=t;setTimeout((()=>{const t=document.getElementById(e),n=t?.children[0],s=n?.children[0];if(!t||!s)return;t.style.height=s.style.height=i[1]+"px";const o=t?.parentElement&&Ti(t.parentElement);o&&(o.style.height=i[1]+"px")}),n)}(t,n.richMediaConfig)}function ya(){this.gpt.addEventListener(W,(e=>{ba.call(this,e)})),this.gpt.addEventListener(q,(e=>{_a.call(this,e)}))}function Ea(){e.__bt=e.__bt||{},e.__bt.disableRecovery=!0,e.addEventListener("BTAADetection",(e=>{const{ab:t,acceptable:n}=e.detail;!0===t&&!0===n?(Pr(this,{abk:"abp"}),or()||sr(Ve,"2")):or()&&(sr(Ve,"",0),Pr(this,{abk:""}))}))}function Ia(){this.gpt.addEventListener(K,(e=>{const t=e.slot.getSlotElementId(),n=this.store.getAdComponentById(t);if(!n)return;mr(n)&&n.increaseFetchCount();const i=this.i13nStore.currentI13n?.site,s=function(e,t){return{data:{id:e.slot.getSlotElementId()},name:ut,...Xs(e,t)}}(e,i);Qs[ut]&&Qs[ut].forEach((e=>{e(s)})),mr(n)&&n.getRenderCount()>=1&&n.unloadResizeHandler()})),this.gpt.addEventListener(W,(e=>{const t=e.slot.getSlotElementId(),n=this.store.getAdComponentById(t);if(n)if(mr(n)&&function(e){if(void 0===e)return;const t=`${e.getRenderCount()}`;e.gptComponent.setTargetingForSlot(e,{ri:t})}(n),e.isEmpty){mr(n)&&n?.increaseFailureCount();const t=this.i13nStore.currentI13n?.site,i=function(e,t){return{data:{id:e.slot.getSlotElementId()},name:gt,...Xs(e,t)}}(e,t);Qs[gt]&&Qs[gt].forEach((e=>{e(i)}))}else{if(!(null!==e.advertiserId&&ve[e.advertiserId]?.isYPBAdvertiser)){const t=this.i13nStore.currentI13n?.site,n=function(e,t){const{slot:n,size:i}=e;let s=null,o=null,r=null;return Array.isArray(i)&&(s=i[0],o=i[1],r=[s,o]),{data:{height:o,id:n.getSlotElementId(),size:r,width:s},name:lt,...Xs(e,t)}}(e,t);Qs[lt]&&Qs[lt].forEach((e=>{e(n)}))}}})),this.gpt.addEventListener(J,(e=>{!function(e,t){const n=document?.getElementById(t);null===n&&e.logger.sendDebugBeacon({id:t,type:"AD_CONTAINER_NOT_EXIST"})}(this,e.slot.getSlotElementId());const t=this.i13nStore.currentI13n?.site,n=function(e,t){return{data:{id:e.slot.getSlotElementId()},name:pt,...Xs(e,t)}}(e,t);Qs[pt]&&Qs[pt].forEach((e=>{e(n)}))})),this.gpt.addEventListener(V,(e=>{const t=this.i13nStore.currentI13n?.site,n=function(e,t){return{data:{id:e.slot.getSlotElementId()},name:ft,...Xs(e,t)}}(e,t);Qs[ft]&&Qs[ft].forEach((e=>{e(n)}))}))}function Sa(t){let n=!1;const i=(t||[]).filter((e=>{const t=this.config.positions[e];return!!document?.getElementById(e)&&Bi(t)})),s=new Set(i),o={positions:{}},r=()=>{(Qs[ht]||[]).forEach((e=>{e(o)})),n=!0};0!==s.size?this.gpt.addEventListener(W,(t=>{if(n)return;const i=t.slot.getSlotElementId(),a=this.config.positions[i];if(s.has(i)&&Bi(a)){s.delete(i);const n=la(t);!function(t,n){us()&&n&&(e.benji.debug||(e.benji.debug={}),e.benji.debug.reservedAdSlots||(e.benji.debug.reservedAdSlots=new Set),e.benji.debug.reservedAdSlots.add(t))}(i,n),o.positions[i]={adType:n?yt.RESERVED:yt.STANDARD,id:i,loc:a.kvs?.loc,renderStatus:t.isEmpty?gt:lt}}0===s.size&&r()})):r()}function va(){this.on(lt,(e=>{const{id:t,width:n,height:i}=e.data,s=this.store.getAdComponentById(t);if(void 0!==s&&mr(s)){if(void 0===s.renderInfo.originalDisplayVal){const e=document?.getElementById(s.id),t=e?.style.display||u;s.setRenderInfo({originalDisplayVal:t})}n&&i&&s.setRenderInfo({size:{height:i,width:n}})}}))}function Aa(){this.on(mt,(e=>{const{data:t}=e,n=[],i=[];Object.entries(t).forEach((([e,t])=>{const{winningSide:s,losingSide:o}=t;n.push(...s.adIds),i.push(...o.adIds)})),[...n,...i].forEach((e=>{const t=document.getElementById(e);t?.style.setProperty("display","none")}))})),this.gpt.addEventListener(W,(e=>{const t=e.slot.getSlotElementId(),n=this.ypb.stackGroupAuctionState;Object.values(n).forEach((e=>{if(e.winningSide.adIds.includes(t)){const e=this.store.getAdComponentById(t);if(void 0!==e&&mr(e)){const n=document.getElementById(t);n?.style.setProperty("display",e.renderInfo.originalDisplayVal||u)}}}))}))}function Ca(){this.taboola.addEventListener(se,(e=>{const t=function(e){if(!e||0===Object.keys(e).length)return;const{container:t,mode:n,placement:i,items:s}=e;return{data:{container:t,items:s,mode:n,placement:i}}}(e.detail);Qs[lt]&&Qs[lt].forEach((e=>{e(t)}))}))}function Ta(){let t;t=e.benji.isInTopLevelWindow?e.location.hostname:document.referrer.replace(/^https?:\/\//,"");const n=function(e){for(const t of e)if(wt.includes(t))return!0;return!1}(t.split("."));return n||e.benji.logger.sendDebugBeacon({domain:t,type:"INVALID_DOMAIN"}),n}function Da(){window.addEventListener("message",(e=>{const t=e?.data?.creativeOrigin;if(!t||!t.includes("yahoomedia")||!e.data?.loc)return;const n=e.data?.loc,i=this.store.getAdComponentByLoc(n);i&&(i.creativeInteractionConfig={...i.creativeInteractionConfig,isYahooCreative:!0})}))}function Ra(){this.gpt.addEventListener(V,(e=>{const t=e.slot.getSlotElementId(),n=this.store.getAdComponentById(t);if(n&&this.config.feature.enableAdInteractionBasedRefresh&&mr(n)){const e=document.getElementById(t)?.querySelector("div[id^='google_ads_iframe_/22888152279/']");e&&(n.creativeInteractionConfig={...n.creativeInteractionConfig,iframeContainer:e},function(e){const t=e.creativeInteractionConfig,{iframeContainer:n,isYahooCreative:i,scrollOffset:s,interactionStartHandler:o,interactionEndHandler:r}=t;n&&(n.addEventListener("mouseenter",(()=>{i?t.hoverTimerId=setTimeout((()=>{if(t.ycInteractionActive)return;o();const e=window.scrollY||document.documentElement.scrollTop,n=()=>{const t=window.scrollY||document.documentElement.scrollTop,i=Math.abs(t-e);s&&i>s&&(r(),window.removeEventListener("scroll",n))};window.addEventListener("scroll",n)}),1e3):o()})),n.addEventListener("mouseleave",(()=>{i?clearTimeout(t.hoverTimerId):r()})))}(n))}}))}class La{static instance;benji;i13n;localSignalsData;logger;WIN;SEGMENTS_REFRESH_URL;constructor(){this.localSignalsData={},this.benji={},this.WIN={},this.i13n={},this.logger={},this.SEGMENTS_REFRESH_URL=""}static getInstance(){return this.instance||(this.instance=new La),this.instance}start(e){const{benji:t,WIN:n,i13n:i,logger:s}=e;this.benji=t,this.i13n=i,this.logger=s,this.WIN=n,this.logger.sendDebugBeacon({type:ii}),this.SEGMENTS_REFRESH_URL=function(e){let t="signal-service.pbs.yahoo.com";switch(e){case je.aol:case Ne.aol_webmail:case Ne.aol_client_mail:t="signal-service.pbs.www.aol.com"}return"https://"+t+"/v1/signal/refresh"}(this.i13n.site),this._setUserSegmentGAMKVs()}_setUserSegmentGAMKVs(){const e=Br(this.WIN,A.SEGMENTS);this._attemptLoadingLocalStorage(e)||this._callSignalService()}_attemptLoadingLocalStorage(e){if(this.localSignalsData={},e)try{if(this.localSignalsData=JSON.parse(e),this.localSignalsData.exp){const e=new Date(this.localSignalsData.exp).getTime();if(!Number.isNaN(e)&&e>Date.now())return this._updateGAMKVs(this.localSignalsData.gam?.targeting),!0}}catch(e){this.logger.sendDebugBeacon({error:ri,errorMessage:`BAD local state ${e}`,type:ni})}return!1}async _callSignalService(){const e=this._getSegmentRefreshBody();try{const t=await fetch(this.SEGMENTS_REFRESH_URL,{body:e,credentials:"include",headers:{"Content-Type":"application/json"},method:"POST"}),n=await t.json();if(!n.gam?.targeting)throw new Error("Segments payload invalid");this._updateGAMKVs(n.gam?.targeting);const i=JSON.stringify(n);((e,t,n)=>{try{return!(!e?.localStorage?.setItem||!Object.values(A).includes(t)||(e.localStorage.setItem(t,n),0))}catch(e){return!1}})(this.WIN,A.SEGMENTS,i)}catch(e){this.logger.sendDebugBeacon({error:ri,errorMessage:`Segments call failed: ${e}`,type:ni})}}_getSegmentRefreshBody(){const e={};var t;return e.metadata=Object.assign({client:"benji"},(t={site:this.i13n.site,userCountry:this.i13n.usercountry},Object.fromEntries(Object.entries(t).filter((([e,t])=>void 0!==t&&""!==t&&null!==t))))),this.localSignalsData&&Object.keys(this.localSignalsData).length>0&&(e.gam={...this.localSignalsData.gam?.targeting&&{targeting:this.localSignalsData.gam.targeting},...this.localSignalsData.gam?.targeting_exp&&"string"==typeof this.localSignalsData.gam?.targeting_exp&&{targeting_exp:this.localSignalsData.gam.targeting_exp}}),JSON.stringify(e)}_updateGAMKVs(e){e&&Object.keys(e).length>0&&Pr(this.benji,e)}}class wa{static instance;metrics;benji;gptListenerAddedOnce=!1;constructor(){this.benji={},this.metrics={countGAM:0,countPBContent:0,countPBContent_2_2:0,countPBContent_3_1:0,countPBPageCat:0}}static getInstance(){return this.instance||(this.instance=new wa),this.instance}start(e){this.benji=e,this.gptListenerAddedOnce||(this.gptListenerAddedOnce=!0,this.benji.gpt&&this.benji.gpt.addEventListener(W,(e=>this._sendFPDMetricsForSlotRender(e))))}gamSegmentsApplied(e=[]){this.metrics.countGAM=e.length}prebidSegmentsApplied(e){this.metrics.countPBPageCat=e.ortb2?.site?.pagecat?e.ortb2.site.pagecat.length:0,this.metrics.countPBContent=e.ortb2?.site?.content?.data?e.ortb2.site.content.data.length:0,this.metrics.countPBContent_2_2=this._getSegmentCountBySegTax(6,e.ortb2?.site?.content?.data),this.metrics.countPBContent_3_1=this._getSegmentCountBySegTax(9,e.ortb2?.site?.content?.data)}error(e,t){this.benji.logger.sendPBDLog({message:t?.message,source:e,stack:String(t?.stack)?.substring(0,1e3)},"benji-fpd-error",En)}_sendFPDMetricsForSlotRender(e){const t={metrics:this.metrics,slot:e?.slot?.getSlotElementId()};this.benji.logger.sendPBDLog(t,"benji-fpd-metrics",En)}_getSegmentCountBySegTax(e,t=[]){const n=t.find((t=>t.ext?.segtax===e));return n&&n.segment?n.segment.length:0}}const Ba="content",ka=Ba;class Pa{static instance;hasConsent=!1;config;benji;instrumentation;constructor(){this.config={},this.config.content=this.config.content||[],this.config.user=this.config.user||[],this.benji={},this.instrumentation=wa.getInstance()}static getInstance(){return this.instance||(this.instance=new Pa),this.instance}start(e){try{const{benji:t,config:n,consent:i}=e;if(this.hasConsent=this._checkConsent(i),!this.hasConsent)return this.config.content=[],void(this.config.user=[]);this.config=n,this.benji=t,(this.config?.gam||this.config?.prebid)&&this._handleConfigChange(),t.on(bt,(e=>{try{this._handleRemoteConfigLoad(e)}catch(e){this.instrumentation.error("configLoaded",e)}}))}catch(e){this.instrumentation.error("start",e)}}updateSegments(e,t=ka){try{if(!this.hasConsent)return;t===Ba?this.config.content=e:"user"===t&&(this.config.user=e),this._handleConfigChange()}catch(e){this.instrumentation.error("updateSegments",e)}}_handleRemoteConfigLoad(e){e.data.config&&e.data.config.firstPartyData&&(this.config={...this.config,...e.data.config.firstPartyData},this._handleConfigChange())}_checkConsent(e){return e.allowFirstPartyAds&&!e.allowOnlyLimitedAds&&!e.allowOnlyNonPersonalizedAds}_handleConfigChange(){this.hasConsent&&((this.config.gam||this.config.prebid)&&this.instrumentation.start(this.benji),this.config.gam&&this._applySegmentsToGAM(),this.config.prebid&&this._applySegmentsToPBJS())}_getSegmentProvidersByRef(e){return this.config.content?.find((t=>t.id===e))}_toSegmentIdArray(e){return e?.segment?.map((e=>e.id))||[]}_applySegmentsToGAM(){const e=this.config.gam;let t=[];if(e?.ppsTaxonomies?.IAB_CONTENT_2_2?.refSegmentsId){const n=e.ppsTaxonomies.IAB_CONTENT_2_2.refSegmentsId,i=this._getSegmentProvidersByRef(n);i&&(t=this._toSegmentIdArray(i))}this.benji.gpt.setPublisherProvidedSignalsTaxonomies({IAB_CONTENT_2_2:{values:t}}),this.instrumentation.gamSegmentsApplied(t)}_applySegmentsToPBJS(){const e=this.config.prebid;let t,n;if(e?.ortb2?.site?.pagecat?.refSegmentsId){const i=e.ortb2.site.pagecat.refSegmentsId,s=this._getSegmentProvidersByRef(i);n=this._toSegmentIdArray(s),t=s?.ext?.segtax}const i={data:this.config?.content?.map((e=>({ext:e.ext,name:e.name,segment:e.segment})))||[]},s={};i&&i.data&&i.data.length>0&&(s.content=i),n&&n.length>0&&t&&(s.pagecat=n,s.cattax=t);const o={ortb2:{site:s}};this.benji.ypb._setConfig(o),this.instrumentation.prebidSegmentsApplied(o)}}function Oa(){return Array.from(document.querySelectorAll('script[src^="https://s.yimg.com/oa/"]')).filter((e=>{const t=e.getAttribute("src");return t?.includes("consent")&&t.endsWith(".js")}))[0]||null}function ja(){const t=e.YahooCJS?.getConsentInfo();if(!t||t.errorMessage)return console.warn("no consent map"),In({logType:"error",message:"CONSENT_MAP_NOT_FOUND",messageDetails:"No consent map found",source:"DIDOMI_UTILS"}),{};const{consentTypes:n}=t;return function(e){const t={};return e instanceof Map?(e.forEach(((e,n)=>{const i=n.toLowerCase().replace(/_([a-z])/g,((e,t)=>t.toUpperCase()));t[i]=e})),t):t}(n)}const Na=[e=>{if(!e.i13n||!e.i13n.hasOwnProperty("dmi_consent"))return;const t=e.i13n.dmi_consent?"dmi_consent_true":"dmi_consent_false";Array.isArray(e.i13n.bucket)?e.i13n.bucket.push(t):"string"==typeof e.i13n.bucket?e.i13n.bucket=[e.i13n.bucket,t]:void 0===e.i13n.bucket&&(e.i13n.bucket=[t])}],Ma=4*e.innerHeight;let Ua=2*e.innerHeight,Fa=e?.scrollY,za="";const xa="down",Ga=()=>{if("smartphone"===e.benji?.config?.i13n?.device&&(Ua=Ma),(()=>{const t=e.scrollY;return Math.abs(t)>=Ua})()){const t=e.scrollY;za=t>=Fa?xa:"up",Fa=t,Object.keys(e.benji.store).map((t=>{const n=e.benji.store[t];Object.keys(n).map((t=>{const n=e.benji.store.getAdComponentById(t);Er(n)||Wo[t]||!(za===xa&&function(e,t){const n=document.getElementById(e),i=n?.getBoundingClientRect();return i&&i.top<-t}(t,Ua)||"up"===za&&function(e,t){const n=document.getElementById(e),i=n?.getBoundingClientRect();return i&&i.bottom>t}(t,Ua))||(e=>{const{lazyFetchHandlerCallback:t}=e,n=e.lazyFetch||Ko;cs(`Memory optimization: Destroy Ad - ID: ${e.id} LOC: ${e.kvs?.loc}`),Wo[e.id]={callback:t(),...n},e.destroy()})(n)}))}))}},$a={};function Ha(t,n){return function(...i){if(t.isReady)return n.apply(t,i);void 0===$a[$t]&&($a[$t]=Math.round(e.performance.now())),t.que.push((()=>{n.apply(t,i)}))}}function Ya(){void 0===$a[Ht]&&($a[Ht]=Math.round(e.performance.now())),this.logger.updateDatastore($a);const{BENJI_START:t,GPT_READY:n,PREBID_START:i}=this.logger.datastore.page;this.logger.sendPerfBeacon({BENJI_START:t,GPT_READY:n,PREBID_START:i,...$a})}function Va(){if(0!==this.que.length)for(Ya.call(this);this.que.length>0;){const e=this.que.shift();void 0!==e&&"function"==typeof e&&e()}}function qa(){e.__tcfapi?.("addEventListener",2,((t,n)=>{n&&"tcloaded"===t.eventStatus&&void 0===e.benji.logger.datastore.page[Yt]&&e.benji.logger.updateDatastore({[Yt]:Math.round(e.performance.now())})})),e.__gpp?.("addEventListener",((t,n)=>{if(!n)return;const{eventName:i,pingData:s}=t||{};"listenerRemoved"!==i&&"ready"===s.signalStatus&&"loaded"===s.cmpStatus&&void 0===e.benji.logger.datastore.page[qt]&&e.benji.logger.updateDatastore({[qt]:Math.round(e.performance.now())})})),function(){let t=null,n=null;function i(){t&&e.clearInterval(t),n&&e.clearTimeout(n)}t=e.setInterval((()=>{try{e.__uspapi?.("getUSPData",1,((t,n)=>{n&&t&&"string"==typeof t.uspString&&(void 0===e.benji.logger.datastore.page[Vt]&&e.benji.logger.updateDatastore({[Vt]:Math.round(e.performance.now())}),i())}))}catch{}}),100),n=e.setTimeout((()=>{i()}),6e3)}()}function Wa(t){qa(),this.config={...t,event:t.event||{},feature:t.feature||{},firstPartyData:t.firstPartyData||{},i13n:t.i13n||{},prebidSetting:t.prebidSetting||{},setting:t.setting||{}},(e=>{Na.forEach((t=>t(e)))})(this.config),this.logger.start(this),this.config.setting.tracking={...this.config.setting.tracking,metrics:this.config.setting.tracking?.metrics??true,performance:this.config.setting.tracking?.performance??true},(()=>{if(void 0===e)return;if(void 0===e.PerformanceObserver)return;new e.PerformanceObserver(ss).observe({entryTypes:["resource"]})})(),!1!==this.config.feature.enableRefreshDebounce&&(this.config.feature.enableRefreshDebounce=true),Ia.call(this),this.config.feature.enableAdInteractionBasedRefresh&&(Da.call(this),Ra.call(this)),!0===this.config.setting.tracking?.performance&&Zr.call(this),!0===this.config.setting.tracking?.metrics&&aa.call(this),!0===this.config.setting.tracking?.debug&&ca.call(this);const{feature:{enableAdBlockDetection:n=Ki("benji-enableAdBlock"),enablef10d509c:i=Ye},setting:{gptSetting:s,taboolaSetting:o}}=this.config;i&&Gs(e,this.config.i13n.site),n&&(!function(e){Js({async:!0,id:"ad-block-script",tagSrc:"https://s.yimg.com/du/abd/abd5668174786723840.js",WIN:e})}(e),Ea.call(this));const{allowFirstPartyAds:r,allowOnlyNonPersonalizedAds:a,allowOnlyLimitedAds:c}=this.config.setting?.consent||{},d={allowFirstPartyAds:!!r,allowOnlyLimitedAds:!!c,allowOnlyNonPersonalizedAds:!!a};!(this.config.feature.enableUserSegments||this.config.i13n.feature?.includes("benji-enableUserSegments"))||a||c||La.getInstance().start({benji:this,i13n:this.config.i13n,logger:this.logger,WIN:e}),this.firstPartyData=Pa.getInstance(),this.firstPartyData.start({benji:this,config:this.config?.firstPartyData,consent:d}),function(e,t=!1){const n=t?"https://pagead2.googlesyndication.com/tag/js/gpt.js":"https://securepubads.g.doubleclick.net/tag/js/gpt.js";(function(e){return!(!e.googletag||!e.googletag.apiReady)})(e)||Js({id:"gpt-tag",tagSrc:n,WIN:e})}(e,!!c),this.ypb.start({adblockEnabled:n&&or(),benjiConfig:this.config,consent:d,gptComponent:this.gpt,i13nStore:this.i13nStore,logger:this.logger});const l={};this.config.feature&&Y.forEach((e=>{this.config.feature[e]&&(l[e]=this.config.feature[e])})),this.gpt.setupService(l,s),this.gpt.setInitialPageUrl(t.i13n?.url);const{useSecure:g=!1}=this.config.setting;if(!g){if(kr(this,e),this.config.setting.refresh){Ss.call(this);const{tabFocus:t,requireUserAction:n}=this.config.setting.refresh;if(t){const{outOfFocusDuration:n}=t;!function(t,n=!1){cn(t,n),e.addEventListener(De,(()=>{Object.keys(_s).forEach((e=>{(0,_s[e])()})),Is.length=0})),e.addEventListener(Re,(()=>{Object.keys(ys).forEach((e=>{(0,ys[e])()}))}))}(n,this.config.feature.enableTabSwitchDestroy)}n&&vs()}e.addEventListener("resize",(()=>{Object.keys(Es).forEach((e=>{(0,Es[e])()}))}))}this.i13nStore.getCurrent().tbla_id||this.i13nStore.updateCurrent({tbla_id:ir("tbla_id")||""});const u=this.getAxid(kt),h=((e="")=>("string"==typeof e?Array.from(e).map((e=>e.charCodeAt(0).toString(16))).join(""):"").substring(0,150))(u);o&&(this.taboola.setupService(this.config.feature,o,this.config.i13n.site),da.call(this),Ca.call(this)),!h||a||c||this.gpt.setPublisherProvidedId(h),a?this.gpt.setPrivacySettings(Se):c&&this.gpt.setPrivacySettings(Ie);const f=this.config.setting.lazyLoad&&function(e){if(e){if(!0===e||!0===e.gptLazyLoad)return dt;for(const t in dt){if(e[t]&&!e.gptLazyLoad)return e;if(e.gptLazyLoad&&e.gptLazyLoad[t])return e.gptLazyLoad}}}(this.config.setting.lazyLoad);f&&this.gpt?.enableLazyLoad(f);const{positions:m}=this.config;g?this.secureController.start(this.config):Sr.call(this,m);const b=Object.keys(this.store.index||{});Sa.call(this,b);const{setting:{renderOnStart:_=p}}=this.config;var y;!0===_&&(g?this.secureController.render():Ar.call(this)),e.addEventListener(Ae,(e=>{const t=e.detail;g?this.secureController.render(t.positions):Ar.call(this,t.positions)})),e.wafer?Lr():e.addEventListener(H,(function(){Lr()})),(this.config.feature?.enableLazyFetch||this.config?.feature?.enableScrollDestroy||this.config?.feature?.enableTabSwitchDestroy)&&(y=this.config.feature?.enableLazyFetchTouchMoveListener,e.addEventListener("scroll",Vi(Xo,100)),y&&e.addEventListener("touchmove",Xo),(this.config.feature?.enableScrollDestroy||this.config?.i13n?.feature?.includes("enableScrollDestroy"))&&window.addEventListener("scroll",Vi(Ga,300))),!1!==this.config.feature?.collapseWhenNoFill&&Fr.call(this),!1!==this.config.feature?.adjustMinHeight&&Jr.call(this),!1!==this.config.feature?.enablePremiumAds&&ya.call(this),this.config.feature?.fireBrokerButtonEvent&&Yr.call(this),this.config.feature?.enableGooglePrivacySandboxPAIGTest&&function(e){wr(e,"opus:gps-paig-test","true")}(e),this.config.feature?.enableGooglePrivacySandboxARTest&&function(e){wr(e,"opus:gps-ar-test","true")}(e),function(e){Js({id:"opus-script",tagSrc:"https://opus.analytics.yahoo.com/tag/opus.js",WIN:e})}(e),this.isReady=!0,(e=>{const t=new CustomEvent(Te);e.dispatchEvent(t)})(e),this.logger.sendDebugBeacon({type:"BENJI_SESSION_START"});const E=this.getAxid(Pt);this.logger.sendPBDLog({gamAxid:u,taboolaAxid:E},"AXID",En);(t.feature?.enablePreProcessQue||t.i13n?.feature?.includes("enablePreProcessQue"))&&Va.call(this),va.call(this),Aa.call(this)}const Ka=(e,t)=>{const{firstPartyAds:n}=e,i=((e,t)=>{const n=(e=>e.region||e.usercountry||"")(t);let i=At;return t.gdpr?i=St:"us"===n.toLocaleLowerCase()&&(i=vt),i.some((t=>!1===e[t]))})(e,t),s=(e=>{let t=!1;const n=It.every((t=>!e[t])),i=Et.every((t=>e[t]));return t=n&&i,t})(e);return{allowFirstPartyAds:n,allowOnlyLimitedAds:i,allowOnlyNonPersonalizedAds:s}};const Ja={};let Qa=!0;async function Xa(e){const t=e?.data?.type,n=Ja[t];try{n&&e.source.postMessage({benji:{data:await n(e)}},e.origin)}catch(e){console.error("Error fetching postMessage data:",e)}}const Za="2.3.26";Za.split(".")[0];const ec=new qr,tc=new ps,nc=new class{benjiConfig={};unLoggedEvents=[];loggedEvents={};maxBatchSize=10;datastore={page:{},positions:{}};i13nStore;sampling=10;loggerActive=!1;perfOffset=0;isInTopLevelWindow;perfTelemetrySent=[];constructor(e){this.i13nStore=e}start(e){this.isInTopLevelWindow=e.isInTopLevelWindow,this.benjiConfig=e.config,this.benjiConfig.setting.logger?.sampling&&(this.sampling=this.benjiConfig.setting.logger.sampling),(Ki("disableSampling")||Ki("benji-disableSampling"))&&(this.sampling=100),this.benjiConfig.setting.logger?.perfOffset&&(this.perfOffset=Math.round(this.benjiConfig.setting.logger.perfOffset)),this.addWindowEventListeners(),this.loggerActive=Di(this.sampling);const{setting:{consent:{allowOnlyNonPersonalizedAds:t,allowOnlyLimitedAds:n}={allowOnlyLimitedAds:!1,allowOnlyNonPersonalizedAds:!1}},i13n:{colo:i,device:s,region:o,lang:r,site:a,spaceid:c,bucket:d,ver:l,src:g,_rid:u,usercountry:h,partner:p}}=this.benjiConfig,f=e.version;this.updateDatastore({colo:i,device:s,lang:r,limitedAds:n,NPA:t,partner:p,pl1:f,region:o,rid:u,s:c,site:a,src:g,test:Array.isArray(d)?d.join(","):d,usercountry:h,ver:l})}isPerfBeaconFiredForSlot(e){return this.perfTelemetrySent.includes(e)}isValidEvent(e){return!!(e&&e.logType&&e.message&&e.source)}addWindowEventListeners(){e.addEventListener(bn,(e=>this.handleWindowEvents(e))),e.addEventListener(yn,(()=>this.handleVisibilityChange())),e.addEventListener(_n,(()=>this.handleBeforeUnload()))}clearDatastore(e){delete this.datastore.positions[e]}handleWindowEvents(e){this.isValidEvent(e.detail)&&("error"!==e.detail?.logType?this.loggerActive&&this.sendDebugBeacon(e.detail):this.sendDebugBeacon(e.detail))}handleBeforeUnload(){this.sendBatchLogs(!0)}handleVisibilityChange(){this.sendBatchLogs()}log({logType:e,message:t,source:n,messageDetails:i}){this.unLoggedEvents.push({logType:e,message:t,messageDetails:i,source:n}),this.sendBatchLogs()}sendDebugBeacon(e,t=!0){if(e.outcm&&e.outcm!==ze||void 0===e.status||(t=!1),e.outcm!==xe||"init"!==e.type&&"render"!==e.type&&"renderFailed"!==e.type&&"nocontent"!==e.type||(t=!1),t){if(!this.loggerActive)return;e.sampleRate=this.sampling}const n={etrg:"backgroundPost",outcm:ze},i=pn(this.datastore,this.i13nStore),s=un(dn,{...n,...i,...e});gn(s)}sendPBDLog(e,t,n,i=!1){if(!i&&!this.loggerActive)return;const s={...pn(this.datastore,this.i13nStore),...e};Object.keys(s).forEach((e=>{s[e]===ln&&delete s[e]})),mn(n,{body:JSON.stringify({data:s,name:t}),headers:{"Content-Type":"application/json"},method:"POST"}).then((e=>{e.ok||this.sendDebugBeacon({logType:"error",message:`Failed to send PBD log ${e.statusText}`,source:"sendPBDLog"})})).catch((e=>{this.sendDebugBeacon({logType:"error",message:`Failed to send PBD log ${e.message}`,source:"sendPBDLog"})}))}sendPerfBeacon(e,t){if(!this.isInTopLevelWindow&&0===this.perfOffset)return;const n={etag:"performance",etrg:"backgroundPost",outcm:"performance",usergenf:"0"},i={...hn(this.datastore,this.i13nStore),...t};if(i.site&&Mi(i.site))return;var s;const o=((e,t)=>{const{s:n,...i}=t,s=Object.keys(i).map((e=>`${e}=${encodeURIComponent(i[e])}`)).join("&");return`${e}?s=${n}&t=${Date.now()}&_I=&_AO=0&_NOL=0&${s}`})((s=i.site,Ue.has(s)?"https://3p-geo.yahoo.com/p":"https://geo.yahoo.com/p"),{...n,...i,A_utm:JSON.stringify(e)});gn(o)}sendPositionPerfBeacon(e){const{sec:t,...n}=this.datastore.positions[e],{BENJI_START:i,GPT_READY:s,PREBID_START:o,BENJI_QUEUE_FLUSH:r,BENJI_QUEUE_START:a,CMP_TCF_LOADED:c,CMP_USP_LOADED:d,CMP_GPP_LOADED:l}=this.datastore.page,g={BENJI_QUEUE_FLUSH:r,BENJI_QUEUE_START:a,BENJI_START:i,CMP_GPP_LOADED:l,CMP_TCF_LOADED:c,CMP_USP_LOADED:d,GPT_READY:s,PREBID_START:o};this.perfTelemetrySent=[...this.perfTelemetrySent,e];const u={...g,...n},h={sec:t};this.sendPerfBeacon(u,h)}sendMetricsBeacon(e){const t=pn(this.datastore,this.i13nStore),n=un(dn,{etrg:"backgroundPost",outcm:"gamMetric",...t,...e});return gn(n)}sendBatchLogs(e=!1){if(this.unLoggedEvents.length>=this.maxBatchSize||e){const e=this.unLoggedEvents;this.unLoggedEvents=[],e.forEach((e=>{this.sendDebugBeacon(e)}))}}removeListeners(){e.removeEventListener(bn,this.handleWindowEvents),e.removeEventListener(yn,this.handleVisibilityChange),e.removeEventListener(_n,this.handleBeforeUnload)}updateDatastore(t,n){let i,s;if("string"==typeof t){const o=t;if(void 0===e.benji.store.getAdComponentById(o))return;void 0===this.datastore.positions[o]&&(this.datastore.positions[o]={}),i=this.datastore.positions[o],s=n}else i=this.datastore.page,s=t;Object.entries(s).forEach((([e,t])=>{void 0===i[e]&&(function(e){return Xt.includes(e)}(e)&&"number"==typeof t&&(t+=this.perfOffset),i[e]=t)}))}}(ec),ic=new class{config;_iframe;_iframeReady;_observer;_commandQueue;targetOrigin;constructor(){this.config={},this._iframeReady=!1,this._commandQueue=[],this.targetOrigin="https://s.yimg.com"}handlePostMessage=e=>{if(e.origin!==this.targetOrigin)return;const{type:t}=e.data;switch(t){case o:this._iframeReady=!0;for(let e=0;e<this._commandQueue.length;e++)this.postMessageToIframe({payload:this._commandQueue[e][1],type:this._commandQueue[e][0]});this._commandQueue=[];break;case d:const{id:t,size:n}=e.data.payload;if(n&&Array.isArray(n)){const e=document.getElementById(t);e?.querySelector("iframe")?.setAttribute("style",`width:${n[0]}px;height:${n[1]}px;border:0px;margin:0;`)}}};handleIntersection=e=>{const t=e.map((e=>({id:e.target.id,intersectionRatio:e.intersectionRatio,isIntersecting:e.isIntersecting,isVisible:e.isVisible,time:e.time})));this._iframeReady?this.postMessageToIframe({payload:t,type:a}):this._commandQueue.push([a,t])};handleTabFocus=()=>{this.postMessageToIframe({payload:!0,type:g})};createGPTIframe(){this._iframe=document.createElement("iframe"),this._iframe.setAttribute("src",`https://s.yimg.com/aaq/benji-safe/2.3.26/gpt.html?o=${encodeURIComponent(e.location.origin)}`),this._iframe.onload=()=>{this.initIframe(),this.initPagei13n()},this._iframe.style.display="none",document.body.appendChild(this._iframe)}createIframes(e){const{positions:t}=e;Object.keys(t).forEach((e=>{const t=document.getElementById(e);if(!t?.querySelector("iframe")){this._observer?.observe(t);const n=document.createElement("iframe");n.setAttribute("src",`https://s.yimg.com/aaq/benji-safe/2.3.26/sda.html?p=${e}`),n.setAttribute("scrolling","no"),n.setAttribute("style","border:0px;margin:0px;");document.createElement("div").id=e,t?.appendChild(n)}}))}init(t){if("undefined"!=typeof window){if(this.config=t,!this._iframe){window.addEventListener("message",this.handlePostMessage),this._observer=new IntersectionObserver(this.handleIntersection,{threshold:.5});const{tabFocus:t}=this.config.setting.refresh;if(t){const{outOfFocusDuration:n}=t;e.addEventListener(De,this.handleTabFocus),cn(n)}this.createGPTIframe()}this.createIframes(t)}}initIframe(){this.postMessageToIframe({payload:{config:this.config},type:s})}initPagei13n(){this.postMessageToIframe({payload:{},type:r})}render(e){this._iframeReady?this.postMessageToIframe({payload:{config:e},type:c}):this._commandQueue.push([c,{config:e}])}start(e){this.init(e),this._iframeReady?this.postMessageToIframe({type:l}):this._commandQueue.push([l,{config:e}])}postMessageToIframe(e){this._iframe?.contentWindow?.postMessage(e,this.targetOrigin)}},sc=new Vr,oc=new class{_taboola;axid;features;pageType;pageTypeValue;fetchCount;url;debounceTimer;collapseAds;pageConfig;region;deferLoading;taboolaObserver;taboolaContainers;scriptLoaded;engineHasSignaledReady;flushIsPending;constructor(){return this.axid=void 0,this.features={},this.fetchCount=0,this._taboola=[],this.pageType=void 0,this.pageTypeValue="",this.debounceTimer=null,this.collapseAds=!1,this.pageConfig={},this.region="",this.deferLoading=!1,this.taboolaContainers=new Set,this.scriptLoaded=!1,this.engineHasSignaledReady=!1,this.flushIsPending=!1,this._onFailure=this._onFailure.bind(this),this._onScriptLoadSuccess=this._onScriptLoadSuccess.bind(this),this._onEngineReady=this._onEngineReady.bind(this),this._loadTaboolaScript=this._loadTaboolaScript.bind(this),void 0!==e&&(e._taboola?this._taboola=e._taboola:e._taboola=this._taboola),this}create(...t){hs("taboola","create",{args:t},Date.now()),this.fetchCount++;const[n]=t;if(!n)return;const{container:i,mode:s,placement:o,target_type:r,cseg:a,region:c}=n,d=e.benji,l=d?.i13nStore?.currentI13n||{},{spaceid:g,pt:u}=l;if(this.region=c,"viewer"===c){const e=window.location.href;this.sendPublisherURL(e);const t=Ni(l);this.sendPublisherBlob(t),u&&this.updateTaboolaPageConfig(u.toString(),S)}const h={container:i,mode:s,placement:o,target_type:r,...a&&{cseg:a}};if(this.collapseAds){const e=document.getElementById(i);e&&(e.style.display="none")}else if(We.includes(Number(g))){const e=document.getElementById(i),t=e&&Ti(e);t&&(t.style.display="none")}else this.deferLoading&&!this.scriptLoaded&&(this.taboolaContainers.add(i),this._observeTaboolaContainer(i)),function(e,t){const n=document.getElementById(e),i=n?.closest("li"),s="data-tb-unwanted-container-detected";if(!i)return;if(i.hasAttribute(s))return;const o=Array.from(i.querySelectorAll('[id^="taboola-stream"]'));if(o.length>1){const n=`Detected li element has more than one taboola ad containers: ${o.map((e=>e.id)).join(", ")}`;t.sendDebugBeacon({containerId:e,message:n,outcm:xe,type:"more_than_one_taboola_container_in_li"}),i.setAttribute(s,"true")}}(i,d.logger),this._taboola.push(h),d.logger.sendDebugBeacon({container:i,initTime:Math.round(e.performance.now()),mode:s,outcm:xe,placement:o,type:gi}),1===this.fetchCount&&ea.call(d,ue)}_observeTaboolaContainer(e){hs("taboola","_observeTaboolaContainer",{containerId:e},Date.now()),this.taboolaObserver||(this.taboolaObserver=new IntersectionObserver((e=>{for(const t of e)if(t.isIntersecting&&!this.scriptLoaded){this._loadTaboolaScript();break}}),{rootMargin:"200% 0px",threshold:.1}));const t=document.getElementById(e);t&&this.taboolaObserver.observe(t)}_loadTaboolaScript(){if(hs("taboola","_loadTaboolaScript",{},Date.now()),this.scriptLoaded)return;const t=e.benji,{publisherId:n}=t.config?.setting?.taboolaSetting||{},i=t.config?.i13n?.site,s=Pi(i,n),o=Ki("benji-retryTaboolaScript")?e.benji.config?.setting?.resourceRetryCount||2:0;ea.call(t,he),Js({defer:!0,id:N,onerrorCb:this._onFailure,onloadCb:this._onScriptLoadSuccess,retries:o,tagSrc:s,WIN:e}),this.scriptLoaded=!0,this.taboolaObserver&&(this.taboolaObserver.disconnect(),this.taboolaObserver=void 0)}destroy(e){}render(){hs("taboola","render",{},Date.now());const t=e.benji;this.debounceTimer&&clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout((()=>{const e=t?.config?.i13n?.feature?.includes("benji-enableTaboolaEngineReadyFlush");!e||this.engineHasSignaledReady?(this._taboola.push(Ct),Qr&&!Qr[ge]&&ea.call(t,ge)):(this.flushIsPending=!0,t.logger.sendDebugBeacon({outcm:xe,type:"flush_pending_engine_not_ready"}))}),100)}setupService(...t){hs("taboola","setupService",{args:t},Date.now());const[n,i,s]=t,{publisherId:o,pageType:r,pageTypeValue:a,url:c,defer:d}=i;if(this.features=n,this.deferLoading=!!d,!e||!r)return;const l=e.benji;if(this.pageType=r,this.pageTypeValue=a??S,this.url=c,l.logger.sendDebugBeacon({outcm:xe,type:hi}),!this.deferLoading){const t=Pi(s,o);ea.call(l,he),Js({async:!0,id:N,onerrorCb:this._onFailure,onloadCb:this._onScriptLoadSuccess,tagSrc:t,WIN:e}),this.scriptLoaded=!0}const g=l?.i13nStore?.currentI13n,u=l?.config?.setting?.consent,h=u?.allowOnlyLimitedAds||u?.allowOnlyNonPersonalizedAds,p={[this.pageType]:this.pageTypeValue};!0===h?p.cex=JSON.stringify(!h):(this.axid=l.getAxid(Pt),this.axid&&(p.unified_id=this.axid));const f=g&&Ni(g,this.axid);p.pblob=f;const m=this.url&&(e=>{try{const t=new URL(e);return t.origin+t.pathname}catch(e){return null}})(this.url);if(m){const e={...p,url:m};this._taboola.push(e),this.pageConfig=e}else this._taboola.push(p),this.pageConfig=p}addEventListener(e,t){hs("taboola","addEventListener",{event:e,handler:t?.toString()},Date.now());const n={handler:t,listenTo:e};this._taboola.push(n)}sendPublisherBlob(e){hs("taboola","sendPublisherBlob",{pblob:e},Date.now()),this._taboola.push({pblob:e})}sendPublisherURL(e){hs("taboola","sendPublisherURL",{url:e},Date.now()),this._taboola.push({pageType:this.pageTypeValue,url:e})}notify(e,t){hs("taboola","notify",{benji:e,commands:t},Date.now());const n={...this.pageConfig,...t};this._taboola.push(n),Ca.call(e)}updateTaboolaPageConfig(e,t){if(hs("taboola","updateTaboolaPageConfig",{pageType:e,taboolaPageTypeValue:t},Date.now()),e&&it.hasOwnProperty(e)){const n=it[e];this.pageType&&this.pageType!==n&&(this.pageType=n,this.pageTypeValue=t??S,this._taboola.push({[n]:this.pageTypeValue}))}}_onFailure(t,n){hs("taboola","_onFailure",{event:JSON.stringify(t),source:n||null},Date.now());e.benji.logger.sendDebugBeacon({errorMessage:JSON.stringify(t),errorOrigin:`${Hs(t,n)}`,outcm:xe,type:ui}),this.collapseAds=!0}_onScriptLoadSuccess(){hs("taboola","_onScriptLoadSuccess",{},Date.now());const t=e.benji;ea.call(t,pe),t.logger.sendDebugBeacon({outcm:xe,type:pi}),this._taboola.push({handler:this._onEngineReady,listenTo:ee})}_onEngineReady(){hs("taboola","_onEngineReady",{},Date.now());const t=e.benji;this.engineHasSignaledReady||(this.engineHasSignaledReady=!0,ea.call(t,le),t.logger.sendDebugBeacon({outcm:xe,type:ee}),this._flushIfPending())}_flushIfPending(){if(hs("taboola","_flushIfPending",{},Date.now()),this.flushIsPending){const t=e.benji;this._taboola.push(Ct),Qr&&!Qr[ge]&&ea.call(t,ge),this.flushIsPending=!1,t.logger.sendDebugBeacon({outcm:xe,type:"flush_executed_on_engine_ready"})}}},rc={gpt:tc,i13nStore:ec,logger:nc,secureController:ic,store:sc,taboola:oc,ypb:new Go,que:[],on:function(e,t){hs("benji","on",{event:e,handler:t?.toString()},Date.now()),Zs(e)&&(Qs[e]||(Qs[e]=[]),Qs[e].push(t))},start:function(t){if(this.isInTopLevelWindow=e.self===e.top,!Ta())return;if(!t||!t.positions||!t.setting||0===Object.keys(t).length)return void console.warn("Invalid config, config object should have positions and setting attributes");this.logger.updateDatastore({[Ot]:Math.round(e.performance.now())}),us(t)&&(window.benji.debug={},window.benji.debug.logs={},window.benji.debug.logs.benjiAPILogs=[],window.benji.debug.logs.prebidAPILogs=[],window.benji.debug.logs.googleAPILogs=[],window.benji.debug.logs.taboolaAPILogs=[],hs("benji","start",{config:t},Date.now(),t)),ls()&&this.loadDebug?.(t);const n=!e.YahooCJS&&!!Oa(),i=()=>{if(!(e.YahooCJS?.didomiActive&&e.YahooCJS?.isDidomiFlow()))return void Wa.call(this,t);const n=e=>{const{region:n,usercountry:i}=t.i13n??{},s=this.getConsent({region:n,usercountry:i},e);t.setting={...t.setting,consent:{...s}},Wa.call(this,t)};if(!!!e.YCJSDmi?.isConsented)return void document.addEventListener("cjsUserConsented",(e=>{const{consentData:t}=e.detail;n(t)}));const i=ja();n(i)};n?new Promise((t=>{e.YahooCJS&&t(),document.addEventListener("YahooCJSReady",(()=>{t()}),{once:!0});const n=Oa();n&&n.addEventListener("load",(()=>{t()}))})).then((()=>{i()})):i()}};rc.render=Ha(rc,Ar),rc.refresh=Ha(rc,(function(e,t){hs("benji","refresh",{refreshAdsInput:e,refreshSettings:t||null},Date.now());const n=Ci(this,e);n?.forEach((e=>{(!t?.checkViewport||t?.checkViewport&&Si(e?.id))&&e?.refresh()}))})),rc.destroy=Ha(rc,(function(e){if(hs("benji","destroy",{destroyAdsInput:e},Date.now()),null!=e)if("string"==typeof e||Array.isArray(e))if(!Array.isArray(e)||e.every((e=>"string"==typeof e||null===e)))try{const t=Ci(this,e);t?.forEach((e=>{e?.destroy&&e.destroy()}))}catch(e){console.error("destroy(): Failed to destroy ads:",e)}else console.warn("destroy(): Array items must be strings");else console.warn("destroy(): Input must be a string or array of strings");else console.warn("destroy(): Input cannot be null or undefined")})),rc.getI13N=function(e){hs("benji","getI13N",{keysRequested:e},Date.now());const{axid:t,...n}=this.i13nStore.getCurrent();if(void 0===e)return n;if(!Array.isArray(e)||0===e.length)return;const i={};return e.forEach((e=>{"string"==typeof e&&void 0!==n[e]&&(i[e]=n[e])})),i},rc.updateI13N=Ha(rc,(function(e,t=[]){if(hs("benji","updateI13N",{i13nConfig:e,keysToClear:t},Date.now()),!e||"object"!=typeof e)return;const n=this.i13nStore.getKeyDifferences(e);(Object.keys(n).length||t.length)&&Pr(this,n,t)})),rc.updateFirstPartyData=Ha(rc,(function(e,t=ka){hs("benji","updateFirstPartyData",{segmentProviders:e,segmentType:t},Date.now()),Pa.getInstance().updateSegments(e,t)})),rc.getConsent=function(t,n){hs("benji","getConsent",{consentBits:n,context:t},Date.now());const i=e.YahooCJS?.getJurisdictionInfo().isEU;return Ka(n,{gdpr:i,...t})},rc.isReady=!1,rc.version=Za,rc.getAxid=function(e){hs("benji","getAxid",{axidType:e},Date.now()),this.i13nStore.getCurrent().axids||this.i13nStore.updateCurrent({axids:ir("axids")||""});const t=this.i13nStore.getCurrent().axids,n=new URLSearchParams(t).get(e);return n||({[kt]:this.i13nStore.currentI13n.axid,[Bt]:this.i13nStore.currentI13n.axidDv360}[e]||"")},rc.postMessage=function(t,n){return hs("benji","postMessage",{callback:n?.toString(),dataType:t},Date.now()),Ja[t]=n,Qa&&(e.addEventListener("message",Xa),Qa=!1),()=>{delete Ja[t]}},rc.notify=Ha(rc,(function(e){hs("benji","notify",{notifyCommand:e},Date.now());const{taboola:t}=this;t&&e&&Tt.includes(e.notify)&&t.notify(this,e)})),rc.clear=function(e){const t=Ci(this,e);t?.forEach((e=>{mr(e)&&e.clear()}))},rc.loadDebug=function(t){hs("benji","loadDebug",{},Date.now(),t),"1"===(t||this.config).i13n?.ynet&&(console.log("Loading debug script..."),function(e,t,n){Js({async:!0,id:"benji-debug",onerrorCb:n,onloadCb:t,tagSrc:"https://s.yimg.com/du/debug/benji-debug.js",WIN:e})}(e,(()=>{console.log("Debug script loaded successfully")}),((e,t)=>{console.error("Failed to load debug script: ",e,t)})))},rc.loadReporter=function(t){hs("benji","loadReporter",{},Date.now(),t),"1"===(t||this.config).i13n?.ynet&&(console.log("Loading ad reporter script..."),function(e,t,n){Js({async:!0,id:"benji-badads",onerrorCb:n,onloadCb:t,tagSrc:"https://s.yimg.com/du/badads/benji-badads.js",WIN:e})}(e,(()=>{console.log("Ad reporter script loaded successfully")}),((e,t)=>{console.error("Failed to load ad reporter script: ",e,t)})))},rc.removeEventHandler=function(e,t){if(!Zs(e)||!Qs)return;hs("benji","removeEventHandler",{event:e,handler:t?.toString()},Date.now());const n=Qs[e];if(n){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}};const ac=rc;!function(){if(e){const t=e.benji?.config&&Object.assign({},e.benji?.config),n=e.benji?.que||[];e.benji=ac,e.benji.que=n,t&&e.benji.start(t),(e=>{const t=new CustomEvent(Ce);e.dispatchEvent(t)})(e)}}()}();
//# sourceMappingURL=benji-2.3.26.js.map
